

## <a name="memory-preserving-updates"></a><span data-ttu-id="06bce-101">Memory-preserving updates</span><span class="sxs-lookup"><span data-stu-id="06bce-101">Memory-preserving updates</span></span>
<span data-ttu-id="06bce-102">For a class of updates in Microsoft Azure, customers do not see any impact to their running virtual machines.</span><span class="sxs-lookup"><span data-stu-id="06bce-102">For a class of updates in Microsoft Azure, customers do not see any impact to their running virtual machines.</span></span> <span data-ttu-id="06bce-103">Many of these updates are to components or services that can be updated without interfering with the running instance.</span><span class="sxs-lookup"><span data-stu-id="06bce-103">Many of these updates are to components or services that can be updated without interfering with the running instance.</span></span> <span data-ttu-id="06bce-104">Some of these updates are platform infrastructure updates on the host operating system that can be applied without requiring a full reboot of the virtual machines.</span><span class="sxs-lookup"><span data-stu-id="06bce-104">Some of these updates are platform infrastructure updates on the host operating system that can be applied without requiring a full reboot of the virtual machines.</span></span>

<span data-ttu-id="06bce-105">These updates are accomplished with technology that enables in-place live migration, also called a “memory-preserving” update.</span><span class="sxs-lookup"><span data-stu-id="06bce-105">These updates are accomplished with technology that enables in-place live migration, also called a “memory-preserving” update.</span></span> <span data-ttu-id="06bce-106">When updating, the virtual machine is placed into a “paused” state, preserving the memory in RAM, while the underlying host operating system receives the necessary updates and patches.</span><span class="sxs-lookup"><span data-stu-id="06bce-106">When updating, the virtual machine is placed into a “paused” state, preserving the memory in RAM, while the underlying host operating system receives the necessary updates and patches.</span></span> <span data-ttu-id="06bce-107">The virtual machine is resumed within 30 seconds of being paused.</span><span class="sxs-lookup"><span data-stu-id="06bce-107">The virtual machine is resumed within 30 seconds of being paused.</span></span> <span data-ttu-id="06bce-108">After resuming, the clock of the virtual machine is automatically synchronized.</span><span class="sxs-lookup"><span data-stu-id="06bce-108">After resuming, the clock of the virtual machine is automatically synchronized.</span></span>

<span data-ttu-id="06bce-109">Not all updates can be deployed by using this mechanism, but given the short pause period, deploying updates in this way greatly reduces impact to virtual machines.</span><span class="sxs-lookup"><span data-stu-id="06bce-109">Not all updates can be deployed by using this mechanism, but given the short pause period, deploying updates in this way greatly reduces impact to virtual machines.</span></span>

<span data-ttu-id="06bce-110">Multi-instance updates (for virtual machines in an availability set) are applied one update domain at a time.</span><span class="sxs-lookup"><span data-stu-id="06bce-110">Multi-instance updates (for virtual machines in an availability set) are applied one update domain at a time.</span></span>  

## <a name="virtual-machine-configurations"></a><span data-ttu-id="06bce-111">Virtual machine configurations</span><span class="sxs-lookup"><span data-stu-id="06bce-111">Virtual machine configurations</span></span>
<span data-ttu-id="06bce-112">There are two kinds of virtual machine configurations: multi-instance and single-instance.</span><span class="sxs-lookup"><span data-stu-id="06bce-112">There are two kinds of virtual machine configurations: multi-instance and single-instance.</span></span> <span data-ttu-id="06bce-113">In a multi-instance configuration, similar virtual machines are placed in an availability set.</span><span class="sxs-lookup"><span data-stu-id="06bce-113">In a multi-instance configuration, similar virtual machines are placed in an availability set.</span></span>

<span data-ttu-id="06bce-114">The multi-instance configuration provides redundancy across physical machines, power, and network, and it is recommended to ensure the availability of your application.</span><span class="sxs-lookup"><span data-stu-id="06bce-114">The multi-instance configuration provides redundancy across physical machines, power, and network, and it is recommended to ensure the availability of your application.</span></span> <span data-ttu-id="06bce-115">All virtual machines in the availability set should serve the same purpose to your application.</span><span class="sxs-lookup"><span data-stu-id="06bce-115">All virtual machines in the availability set should serve the same purpose to your application.</span></span>

<span data-ttu-id="06bce-116">For more information about configuring your virtual machines for high availability, see [Manage the availability of your Windows virtual machines](../articles/virtual-machines/windows/manage-availability.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json) or [Manage the availability of your Linux virtual machines](../articles/virtual-machines/linux/manage-availability.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="06bce-116">For more information about configuring your virtual machines for high availability, see [Manage the availability of your Windows virtual machines](../articles/virtual-machines/windows/manage-availability.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json) or [Manage the availability of your Linux virtual machines](../articles/virtual-machines/linux/manage-availability.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span></span>

<span data-ttu-id="06bce-117">By contrast, a single-instance configuration is used for standalone virtual machines that are not placed in an availability set.</span><span class="sxs-lookup"><span data-stu-id="06bce-117">By contrast, a single-instance configuration is used for standalone virtual machines that are not placed in an availability set.</span></span> <span data-ttu-id="06bce-118">These virtual machines do not qualify for the service level agreement (SLA) that requires deploying two or more virtual machines in the same availability set.</span><span class="sxs-lookup"><span data-stu-id="06bce-118">These virtual machines do not qualify for the service level agreement (SLA) that requires deploying two or more virtual machines in the same availability set.</span></span>

<span data-ttu-id="06bce-119">For more information about SLAs, see the "Cloud Services and Virtual Machines" sections of [Service Level Agreements](https://azure.microsoft.com/support/legal/sla/).</span><span class="sxs-lookup"><span data-stu-id="06bce-119">For more information about SLAs, see the "Cloud Services and Virtual Machines" sections of [Service Level Agreements](https://azure.microsoft.com/support/legal/sla/).</span></span>

## <a name="multi-instance-configuration-updates"></a><span data-ttu-id="06bce-120">Multi-instance configuration updates</span><span class="sxs-lookup"><span data-stu-id="06bce-120">Multi-instance configuration updates</span></span>
<span data-ttu-id="06bce-121">During planned maintenance, the Azure platform first updates the set of virtual machines that are hosted in a multi-instance configuration.</span><span class="sxs-lookup"><span data-stu-id="06bce-121">During planned maintenance, the Azure platform first updates the set of virtual machines that are hosted in a multi-instance configuration.</span></span> <span data-ttu-id="06bce-122">The update causes a reboot to these virtual machines with approximately 15 minutes of downtime.</span><span class="sxs-lookup"><span data-stu-id="06bce-122">The update causes a reboot to these virtual machines with approximately 15 minutes of downtime.</span></span>

<span data-ttu-id="06bce-123">A multi-instance configuration update assumes that each virtual machine serves a similar function as the others in the availability set.</span><span class="sxs-lookup"><span data-stu-id="06bce-123">A multi-instance configuration update assumes that each virtual machine serves a similar function as the others in the availability set.</span></span> <span data-ttu-id="06bce-124">In this setting, virtual machines are updated in a way that preserves availability throughout the process.</span><span class="sxs-lookup"><span data-stu-id="06bce-124">In this setting, virtual machines are updated in a way that preserves availability throughout the process.</span></span>

<span data-ttu-id="06bce-125">Each virtual machine in an availability set is assigned an update domain and a fault domain by the underlying Azure platform.</span><span class="sxs-lookup"><span data-stu-id="06bce-125">Each virtual machine in an availability set is assigned an update domain and a fault domain by the underlying Azure platform.</span></span> <span data-ttu-id="06bce-126">Each update domain is a group of virtual machines that will be rebooted in the same time window.</span><span class="sxs-lookup"><span data-stu-id="06bce-126">Each update domain is a group of virtual machines that will be rebooted in the same time window.</span></span> <span data-ttu-id="06bce-127">Each fault domain is a group of virtual machines that share a common power source and network switch.</span><span class="sxs-lookup"><span data-stu-id="06bce-127">Each fault domain is a group of virtual machines that share a common power source and network switch.</span></span>


<span data-ttu-id="06bce-128">For more information about update domains and fault domains, see [Configure multiple virtual machines in an availability set for redundancy](../articles/virtual-machines/windows/manage-availability.md#configure-multiple-virtual-machines-in-an-availability-set-for-redundancy).</span><span class="sxs-lookup"><span data-stu-id="06bce-128">For more information about update domains and fault domains, see [Configure multiple virtual machines in an availability set for redundancy](../articles/virtual-machines/windows/manage-availability.md#configure-multiple-virtual-machines-in-an-availability-set-for-redundancy).</span></span>

<span data-ttu-id="06bce-129">To maintain availability through an update, Azure performs the maintenance by update domain, updating one domain at a time.</span><span class="sxs-lookup"><span data-stu-id="06bce-129">To maintain availability through an update, Azure performs the maintenance by update domain, updating one domain at a time.</span></span> <span data-ttu-id="06bce-130">The maintenance in an update domain consists of shutting down each virtual machine in the domain, applying the update to the host machines, and then restarting the virtual machines.</span><span class="sxs-lookup"><span data-stu-id="06bce-130">The maintenance in an update domain consists of shutting down each virtual machine in the domain, applying the update to the host machines, and then restarting the virtual machines.</span></span> <span data-ttu-id="06bce-131">When the maintenance in the domain completes, Azure repeats the process with the next update domain, and continues with each domain until all are updated.</span><span class="sxs-lookup"><span data-stu-id="06bce-131">When the maintenance in the domain completes, Azure repeats the process with the next update domain, and continues with each domain until all are updated.</span></span>

<span data-ttu-id="06bce-132">The order of the update domains that are being rebooted may not proceed sequentially during planned maintenance, but only one update domain is rebooted at a time.</span><span class="sxs-lookup"><span data-stu-id="06bce-132">The order of the update domains that are being rebooted may not proceed sequentially during planned maintenance, but only one update domain is rebooted at a time.</span></span> <span data-ttu-id="06bce-133">Today, Azure offers 1-week advanced notification for planned maintenance of virtual machines in the multi-instance configuration.</span><span class="sxs-lookup"><span data-stu-id="06bce-133">Today, Azure offers 1-week advanced notification for planned maintenance of virtual machines in the multi-instance configuration.</span></span>

<span data-ttu-id="06bce-134">After a virtual machine is restored, here is an example of what your Windows Event Viewer might display:</span><span class="sxs-lookup"><span data-stu-id="06bce-134">After a virtual machine is restored, here is an example of what your Windows Event Viewer might display:</span></span>

<!--Image reference-->
![][image2]


<span data-ttu-id="06bce-135">Use the viewer to report the virtual machines that are configured in a multi-instance configuration using the Azure portal, Azure PowerShell, or Azure CLI.</span><span class="sxs-lookup"><span data-stu-id="06bce-135">Use the viewer to report the virtual machines that are configured in a multi-instance configuration using the Azure portal, Azure PowerShell, or Azure CLI.</span></span> <span data-ttu-id="06bce-136">For example, using the Azure portal, you can add the _Availability Set_ to the **virtual machines (classic)** browse dialog.</span><span class="sxs-lookup"><span data-stu-id="06bce-136">For example, using the Azure portal, you can add the _Availability Set_ to the **virtual machines (classic)** browse dialog.</span></span> <span data-ttu-id="06bce-137">The virtual machines that report the same availability set are part of a multi-instance configuration.</span><span class="sxs-lookup"><span data-stu-id="06bce-137">The virtual machines that report the same availability set are part of a multi-instance configuration.</span></span> <span data-ttu-id="06bce-138">In the following example, the multi-instance configuration consists of virtual machines SQLContoso01 and SQLContoso02.</span><span class="sxs-lookup"><span data-stu-id="06bce-138">In the following example, the multi-instance configuration consists of virtual machines SQLContoso01 and SQLContoso02.</span></span>

<span data-ttu-id="06bce-139"><!--Image reference--> ![Virtual machines (classic) view from the Azure portal][image4]</span><span class="sxs-lookup"><span data-stu-id="06bce-139"><!--Image reference--> ![Virtual machines (classic) view from the Azure portal][image4]</span></span>

## <a name="single-instance-configuration-updates"></a><span data-ttu-id="06bce-140">Single-instance configuration updates</span><span class="sxs-lookup"><span data-stu-id="06bce-140">Single-instance configuration updates</span></span>
<span data-ttu-id="06bce-141">After the multi-instance configuration updates are complete, Azure performs single-instance configuration updates.</span><span class="sxs-lookup"><span data-stu-id="06bce-141">After the multi-instance configuration updates are complete, Azure performs single-instance configuration updates.</span></span> <span data-ttu-id="06bce-142">These updates also cause reboots to your virtual machines that are not running in availability sets.</span><span class="sxs-lookup"><span data-stu-id="06bce-142">These updates also cause reboots to your virtual machines that are not running in availability sets.</span></span>

> [!NOTE]
> <span data-ttu-id="06bce-143">If an availability set has only one virtual machine instance running, the Azure platform treats it as a multi-instance configuration update.</span><span class="sxs-lookup"><span data-stu-id="06bce-143">If an availability set has only one virtual machine instance running, the Azure platform treats it as a multi-instance configuration update.</span></span>
>

<span data-ttu-id="06bce-144">Maintenance in a single-instance configuration consists of shutting down each virtual machine running on a host machine, updating the host machine, and then restarting the virtual machines.</span><span class="sxs-lookup"><span data-stu-id="06bce-144">Maintenance in a single-instance configuration consists of shutting down each virtual machine running on a host machine, updating the host machine, and then restarting the virtual machines.</span></span> <span data-ttu-id="06bce-145">The maintenance requires approximately 15 minutes of downtime.</span><span class="sxs-lookup"><span data-stu-id="06bce-145">The maintenance requires approximately 15 minutes of downtime.</span></span> <span data-ttu-id="06bce-146">The planned maintenance event runs across all virtual machines in a region in a single maintenance window.</span><span class="sxs-lookup"><span data-stu-id="06bce-146">The planned maintenance event runs across all virtual machines in a region in a single maintenance window.</span></span>


<span data-ttu-id="06bce-147">Planned maintenance events impact the availability of your application for single-instance configurations.</span><span class="sxs-lookup"><span data-stu-id="06bce-147">Planned maintenance events impact the availability of your application for single-instance configurations.</span></span> <span data-ttu-id="06bce-148">Azure offers a one-week advanced notification for planned maintenance of virtual machines in single-instance configurations.</span><span class="sxs-lookup"><span data-stu-id="06bce-148">Azure offers a one-week advanced notification for planned maintenance of virtual machines in single-instance configurations.</span></span>

## <a name="email-notification"></a><span data-ttu-id="06bce-149">Email notification</span><span class="sxs-lookup"><span data-stu-id="06bce-149">Email notification</span></span>
<span data-ttu-id="06bce-150">For single-instance and multi-instance virtual machine configurations only, Azure sends an email alert of the upcoming planned maintenance (one week in advance).</span><span class="sxs-lookup"><span data-stu-id="06bce-150">For single-instance and multi-instance virtual machine configurations only, Azure sends an email alert of the upcoming planned maintenance (one week in advance).</span></span> <span data-ttu-id="06bce-151">This email is sent to the subscription administrator and co-administrator email accounts.</span><span class="sxs-lookup"><span data-stu-id="06bce-151">This email is sent to the subscription administrator and co-administrator email accounts.</span></span> <span data-ttu-id="06bce-152">Here is an example of this type of email:</span><span class="sxs-lookup"><span data-stu-id="06bce-152">Here is an example of this type of email:</span></span>

<!--Image reference-->
![][image1]

## <a name="region-pairs"></a><span data-ttu-id="06bce-153">Region pairs</span><span class="sxs-lookup"><span data-stu-id="06bce-153">Region pairs</span></span>

<span data-ttu-id="06bce-154">When executing maintenance, Azure only updates the Virtual Machine instances in a single region of its pair.</span><span class="sxs-lookup"><span data-stu-id="06bce-154">When executing maintenance, Azure only updates the Virtual Machine instances in a single region of its pair.</span></span> <span data-ttu-id="06bce-155">For example, when updating the Virtual Machines in North Central US, Azure will not update any Virtual Machines in South Central US at the same time.</span><span class="sxs-lookup"><span data-stu-id="06bce-155">For example, when updating the Virtual Machines in North Central US, Azure will not update any Virtual Machines in South Central US at the same time.</span></span> <span data-ttu-id="06bce-156">This will be scheduled at a separate time, enabling failover or load balancing between regions.</span><span class="sxs-lookup"><span data-stu-id="06bce-156">This will be scheduled at a separate time, enabling failover or load balancing between regions.</span></span> <span data-ttu-id="06bce-157">However, other regions such as North Europe can be under maintenance at the same time as East US.</span><span class="sxs-lookup"><span data-stu-id="06bce-157">However, other regions such as North Europe can be under maintenance at the same time as East US.</span></span>

<span data-ttu-id="06bce-158">See the following table for current region pairs:</span><span class="sxs-lookup"><span data-stu-id="06bce-158">See the following table for current region pairs:</span></span>

| <span data-ttu-id="06bce-159">Region 1</span><span class="sxs-lookup"><span data-stu-id="06bce-159">Region 1</span></span> | <span data-ttu-id="06bce-160">Region 2</span><span class="sxs-lookup"><span data-stu-id="06bce-160">Region 2</span></span> |
|:--- | ---:|
| <span data-ttu-id="06bce-161">East US</span><span class="sxs-lookup"><span data-stu-id="06bce-161">East US</span></span> |<span data-ttu-id="06bce-162">West US</span><span class="sxs-lookup"><span data-stu-id="06bce-162">West US</span></span> |
| <span data-ttu-id="06bce-163">East US 2</span><span class="sxs-lookup"><span data-stu-id="06bce-163">East US 2</span></span> |<span data-ttu-id="06bce-164">Central US</span><span class="sxs-lookup"><span data-stu-id="06bce-164">Central US</span></span> |
| <span data-ttu-id="06bce-165">North Central US</span><span class="sxs-lookup"><span data-stu-id="06bce-165">North Central US</span></span> |<span data-ttu-id="06bce-166">South Central US</span><span class="sxs-lookup"><span data-stu-id="06bce-166">South Central US</span></span> |
| <span data-ttu-id="06bce-167">West Central US</span><span class="sxs-lookup"><span data-stu-id="06bce-167">West Central US</span></span> |<span data-ttu-id="06bce-168">West US 2</span><span class="sxs-lookup"><span data-stu-id="06bce-168">West US 2</span></span> |
| <span data-ttu-id="06bce-169">Canada East</span><span class="sxs-lookup"><span data-stu-id="06bce-169">Canada East</span></span> |<span data-ttu-id="06bce-170">Canada Central</span><span class="sxs-lookup"><span data-stu-id="06bce-170">Canada Central</span></span> |
| <span data-ttu-id="06bce-171">Brazil South</span><span class="sxs-lookup"><span data-stu-id="06bce-171">Brazil South</span></span> |<span data-ttu-id="06bce-172">South Central US</span><span class="sxs-lookup"><span data-stu-id="06bce-172">South Central US</span></span> |
| <span data-ttu-id="06bce-173">US Gov Iowa</span><span class="sxs-lookup"><span data-stu-id="06bce-173">US Gov Iowa</span></span> |<span data-ttu-id="06bce-174">US Gov Virginia</span><span class="sxs-lookup"><span data-stu-id="06bce-174">US Gov Virginia</span></span> |
| <span data-ttu-id="06bce-175">US DoD East</span><span class="sxs-lookup"><span data-stu-id="06bce-175">US DoD East</span></span> |<span data-ttu-id="06bce-176">US DoD Central</span><span class="sxs-lookup"><span data-stu-id="06bce-176">US DoD Central</span></span> |
| <span data-ttu-id="06bce-177">North Europe</span><span class="sxs-lookup"><span data-stu-id="06bce-177">North Europe</span></span> |<span data-ttu-id="06bce-178">West Europe</span><span class="sxs-lookup"><span data-stu-id="06bce-178">West Europe</span></span> |
| <span data-ttu-id="06bce-179">UK West</span><span class="sxs-lookup"><span data-stu-id="06bce-179">UK West</span></span> |<span data-ttu-id="06bce-180">UK South</span><span class="sxs-lookup"><span data-stu-id="06bce-180">UK South</span></span> |
| <span data-ttu-id="06bce-181">Germany Central</span><span class="sxs-lookup"><span data-stu-id="06bce-181">Germany Central</span></span> |<span data-ttu-id="06bce-182">Germany Northeast</span><span class="sxs-lookup"><span data-stu-id="06bce-182">Germany Northeast</span></span> |
| <span data-ttu-id="06bce-183">South East Asia</span><span class="sxs-lookup"><span data-stu-id="06bce-183">South East Asia</span></span> |<span data-ttu-id="06bce-184">East Asia</span><span class="sxs-lookup"><span data-stu-id="06bce-184">East Asia</span></span> |
| <span data-ttu-id="06bce-185">Australia Southeast</span><span class="sxs-lookup"><span data-stu-id="06bce-185">Australia Southeast</span></span> |<span data-ttu-id="06bce-186">Australia East</span><span class="sxs-lookup"><span data-stu-id="06bce-186">Australia East</span></span> |
| <span data-ttu-id="06bce-187">India Central</span><span class="sxs-lookup"><span data-stu-id="06bce-187">India Central</span></span> |<span data-ttu-id="06bce-188">India South</span><span class="sxs-lookup"><span data-stu-id="06bce-188">India South</span></span> |
| <span data-ttu-id="06bce-189">India West</span><span class="sxs-lookup"><span data-stu-id="06bce-189">India West</span></span> |<span data-ttu-id="06bce-190">India South</span><span class="sxs-lookup"><span data-stu-id="06bce-190">India South</span></span> |
| <span data-ttu-id="06bce-191">Japan East</span><span class="sxs-lookup"><span data-stu-id="06bce-191">Japan East</span></span> |<span data-ttu-id="06bce-192">Japan West</span><span class="sxs-lookup"><span data-stu-id="06bce-192">Japan West</span></span> |
| <span data-ttu-id="06bce-193">Korea Central</span><span class="sxs-lookup"><span data-stu-id="06bce-193">Korea Central</span></span> |<span data-ttu-id="06bce-194">Korea South</span><span class="sxs-lookup"><span data-stu-id="06bce-194">Korea South</span></span> |
| <span data-ttu-id="06bce-195">East China</span><span class="sxs-lookup"><span data-stu-id="06bce-195">East China</span></span> |<span data-ttu-id="06bce-196">North China</span><span class="sxs-lookup"><span data-stu-id="06bce-196">North China</span></span> |


<!--Anchors-->
[image1]: https://docstestmedia1.blob.core.windows.net/azure-media/includes/media/virtual-machines-common-planned-maintenance/vmplanned1.png
[image2]: https://docstestmedia1.blob.core.windows.net/azure-media/includes/media/virtual-machines-common-planned-maintenance/EventViewerPostReboot.png
[image3]: ./media/virtual-machines-planned-maintenance/RegionPairs.PNG
[image4]: https://docstestmedia1.blob.core.windows.net/azure-media/includes/media/virtual-machines-common-planned-maintenance/AvailabilitySetExample.png


<!--Link references-->
[Virtual Machines Manage Availability]: ../articles/virtual-machines/virtual-machines-windows-hero-tutorial.md

[Understand planned versus unplanned maintenance]: ../articles/virtual-machines/windows/manage-availability.md#Understand-planned-versus-unplanned-maintenance/



