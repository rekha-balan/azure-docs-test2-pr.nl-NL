# <a name="azure-security-guidance"></a><span data-ttu-id="ec092-101">Azure Security Guidance</span><span class="sxs-lookup"><span data-stu-id="ec092-101">Azure Security Guidance</span></span>
## <a name="abstract"></a><span data-ttu-id="ec092-102">Abstract</span><span class="sxs-lookup"><span data-stu-id="ec092-102">Abstract</span></span>
<span data-ttu-id="ec092-103">When developing applications for Azure, identity and access are the primary security concerns that you need to keep in mind.</span><span class="sxs-lookup"><span data-stu-id="ec092-103">When developing applications for Azure, identity and access are the primary security concerns that you need to keep in mind.</span></span>
<span data-ttu-id="ec092-104">This topic explains the key security concerns related to identity and access in the cloud and how you can best protect your cloud applications.</span><span class="sxs-lookup"><span data-stu-id="ec092-104">This topic explains the key security concerns related to identity and access in the cloud and how you can best protect your cloud applications.</span></span>

## <a name="overview"></a><span data-ttu-id="ec092-105">Overview</span><span class="sxs-lookup"><span data-stu-id="ec092-105">Overview</span></span>
<span data-ttu-id="ec092-106">An application's security is a function of its surface.</span><span class="sxs-lookup"><span data-stu-id="ec092-106">An application's security is a function of its surface.</span></span> <span data-ttu-id="ec092-107">The more surface that the application exposes the greater the security concerns.</span><span class="sxs-lookup"><span data-stu-id="ec092-107">The more surface that the application exposes the greater the security concerns.</span></span> <span data-ttu-id="ec092-108">For example, an application that runs as an unattended batch process exposes less, from a security perspective, than a publicly available website.</span><span class="sxs-lookup"><span data-stu-id="ec092-108">For example, an application that runs as an unattended batch process exposes less, from a security perspective, than a publicly available website.</span></span>

<span data-ttu-id="ec092-109">When you move to the cloud you gain a certain peace of mind about infrastructure and networking since these are managed in data centers with world-class security practices, tools, technology.</span><span class="sxs-lookup"><span data-stu-id="ec092-109">When you move to the cloud you gain a certain peace of mind about infrastructure and networking since these are managed in data centers with world-class security practices, tools, technology.</span></span> <span data-ttu-id="ec092-110">On the other hand, the cloud intrinsically exposes more surface area for your application that can be potentially exploited by attackers.</span><span class="sxs-lookup"><span data-stu-id="ec092-110">On the other hand, the cloud intrinsically exposes more surface area for your application that can be potentially exploited by attackers.</span></span> <span data-ttu-id="ec092-111">This is because many cloud technologies and services are exposed as end points vs. in-memory components.</span><span class="sxs-lookup"><span data-stu-id="ec092-111">This is because many cloud technologies and services are exposed as end points vs. in-memory components.</span></span> <span data-ttu-id="ec092-112">Azure storage, Service Bus, SQL Database (formerly SQL Azure), and many other services are accessible via their endpoints over the wire.</span><span class="sxs-lookup"><span data-stu-id="ec092-112">Azure storage, Service Bus, SQL Database (formerly SQL Azure), and many other services are accessible via their endpoints over the wire.</span></span>

<span data-ttu-id="ec092-113">In cloud applications more responsibility lays on the shoulders of the application developers to design, develop, and maintain their cloud applications to high security standards to keep attackers at bay.</span><span class="sxs-lookup"><span data-stu-id="ec092-113">In cloud applications more responsibility lays on the shoulders of the application developers to design, develop, and maintain their cloud applications to high security standards to keep attackers at bay.</span></span>
<span data-ttu-id="ec092-114">Consider the following diagram (from J.D.</span><span class="sxs-lookup"><span data-stu-id="ec092-114">Consider the following diagram (from J.D.</span></span> <span data-ttu-id="ec092-115">Meier's [Azure Security Notes PDF](http://blogs.msdn.com/b/jmeier/archive/2010/08/03/now-available-azure-security-notes-pdf.aspx)): notice how the infrastructure part is being addressed by the cloud provider--in our case by Azure--leaving more security work to the application developers:</span><span class="sxs-lookup"><span data-stu-id="ec092-115">Meier's [Azure Security Notes PDF](http://blogs.msdn.com/b/jmeier/archive/2010/08/03/now-available-azure-security-notes-pdf.aspx)): notice how the infrastructure part is being addressed by the cloud provider--in our case by Azure--leaving more security work to the application developers:</span></span>

![Securing the application][01]

<span data-ttu-id="ec092-117">The good news is that all of the security development practices, principles, and techniques you already know still apply when developing cloud applications.</span><span class="sxs-lookup"><span data-stu-id="ec092-117">The good news is that all of the security development practices, principles, and techniques you already know still apply when developing cloud applications.</span></span> <span data-ttu-id="ec092-118">Consider the following key areas that must be addressed:</span><span class="sxs-lookup"><span data-stu-id="ec092-118">Consider the following key areas that must be addressed:</span></span>

* <span data-ttu-id="ec092-119">All input is validated for type, length, range, and string patterns to avoid injection attacks, and all the data your app echoes back is properly sanitized.</span><span class="sxs-lookup"><span data-stu-id="ec092-119">All input is validated for type, length, range, and string patterns to avoid injection attacks, and all the data your app echoes back is properly sanitized.</span></span>
* <span data-ttu-id="ec092-120">Sensitive data should be protected at rest and on the wire to mitigate information disclosure and data tampering threats.</span><span class="sxs-lookup"><span data-stu-id="ec092-120">Sensitive data should be protected at rest and on the wire to mitigate information disclosure and data tampering threats.</span></span>
* <span data-ttu-id="ec092-121">Auditing and logging must be properly implemented to mitigate non repudiation threats.</span><span class="sxs-lookup"><span data-stu-id="ec092-121">Auditing and logging must be properly implemented to mitigate non repudiation threats.</span></span>
* <span data-ttu-id="ec092-122">Authentication and Authorization should be implemented using proven mechanisms offered by the platform to prevent identity spoofing and elevation of privileges threats.</span><span class="sxs-lookup"><span data-stu-id="ec092-122">Authentication and Authorization should be implemented using proven mechanisms offered by the platform to prevent identity spoofing and elevation of privileges threats.</span></span>

<span data-ttu-id="ec092-123">For a complete list of threats, attacks, vulnerabilities, and countermeasures refer to patterns & practices' [Cheat Sheet: Web Application Security Frame](http://msdn.microsoft.com/library/ff649461.aspx) and [Security Guidance for Applications Index](http://msdn.microsoft.com/library/ff650760.aspx).</span><span class="sxs-lookup"><span data-stu-id="ec092-123">For a complete list of threats, attacks, vulnerabilities, and countermeasures refer to patterns & practices' [Cheat Sheet: Web Application Security Frame](http://msdn.microsoft.com/library/ff649461.aspx) and [Security Guidance for Applications Index](http://msdn.microsoft.com/library/ff650760.aspx).</span></span>

<span data-ttu-id="ec092-124">In the cloud, authentication and access control mechanisms are very different than those available for on-premises applications.</span><span class="sxs-lookup"><span data-stu-id="ec092-124">In the cloud, authentication and access control mechanisms are very different than those available for on-premises applications.</span></span> <span data-ttu-id="ec092-125">There are many more authentication and access options offered for cloud applications that can lead to confusion, and as a result, to flawed implementations.</span><span class="sxs-lookup"><span data-stu-id="ec092-125">There are many more authentication and access options offered for cloud applications that can lead to confusion, and as a result, to flawed implementations.</span></span> <span data-ttu-id="ec092-126">More confusion is introduced when defining what a cloud app is.</span><span class="sxs-lookup"><span data-stu-id="ec092-126">More confusion is introduced when defining what a cloud app is.</span></span> <span data-ttu-id="ec092-127">For example, the application could be deployed to the cloud yet its authentication mechanism might be provided by Active Directory.</span><span class="sxs-lookup"><span data-stu-id="ec092-127">For example, the application could be deployed to the cloud yet its authentication mechanism might be provided by Active Directory.</span></span> <span data-ttu-id="ec092-128">On other hand, the application could be deployed on-premises but with authentication mechanisms in the cloud (for example, by Azure Active Directory Access Control (previously known as Access Control Service or ACS)).</span><span class="sxs-lookup"><span data-stu-id="ec092-128">On other hand, the application could be deployed on-premises but with authentication mechanisms in the cloud (for example, by Azure Active Directory Access Control (previously known as Access Control Service or ACS)).</span></span>

## <a name="threats-vulnerabilities-and-attacks"></a><span data-ttu-id="ec092-129">Threats, Vulnerabilities, and Attacks</span><span class="sxs-lookup"><span data-stu-id="ec092-129">Threats, Vulnerabilities, and Attacks</span></span>
<span data-ttu-id="ec092-130">A threat is a potential bad outcome that you want to avoid such as the disclosure of sensitive information or a service becoming unavailable.</span><span class="sxs-lookup"><span data-stu-id="ec092-130">A threat is a potential bad outcome that you want to avoid such as the disclosure of sensitive information or a service becoming unavailable.</span></span>
<span data-ttu-id="ec092-131">It is common practice to classify threats by using the acronym "STRIDE":</span><span class="sxs-lookup"><span data-stu-id="ec092-131">It is common practice to classify threats by using the acronym "STRIDE":</span></span>

* <span data-ttu-id="ec092-132">**S**poofing or identity theft</span><span class="sxs-lookup"><span data-stu-id="ec092-132">**S**poofing or identity theft</span></span>
* <span data-ttu-id="ec092-133">**T**ampering with data</span><span class="sxs-lookup"><span data-stu-id="ec092-133">**T**ampering with data</span></span>
* <span data-ttu-id="ec092-134">**R**epudiation of actions</span><span class="sxs-lookup"><span data-stu-id="ec092-134">**R**epudiation of actions</span></span>
* <span data-ttu-id="ec092-135">**I**nformation disclosure</span><span class="sxs-lookup"><span data-stu-id="ec092-135">**I**nformation disclosure</span></span>
* <span data-ttu-id="ec092-136">**D**enial of service</span><span class="sxs-lookup"><span data-stu-id="ec092-136">**D**enial of service</span></span>
* <span data-ttu-id="ec092-137">**E**levation of privileges</span><span class="sxs-lookup"><span data-stu-id="ec092-137">**E**levation of privileges</span></span>

<span data-ttu-id="ec092-138">Vulnerabilities are bugs that we, as developers, introduce into the code that make an application exploitable by attackers.</span><span class="sxs-lookup"><span data-stu-id="ec092-138">Vulnerabilities are bugs that we, as developers, introduce into the code that make an application exploitable by attackers.</span></span> <span data-ttu-id="ec092-139">For example, sending sensitive data in clear text makes an information disclosure threat possible by a traffic sniffing attack.</span><span class="sxs-lookup"><span data-stu-id="ec092-139">For example, sending sensitive data in clear text makes an information disclosure threat possible by a traffic sniffing attack.</span></span>

<span data-ttu-id="ec092-140">Attacks are the exploitation of those vulnerabilities to cause harm to an application.</span><span class="sxs-lookup"><span data-stu-id="ec092-140">Attacks are the exploitation of those vulnerabilities to cause harm to an application.</span></span> <span data-ttu-id="ec092-141">For example, a Cross Site Scripting, or XSS, is an attack that exploits unsanitized output.</span><span class="sxs-lookup"><span data-stu-id="ec092-141">For example, a Cross Site Scripting, or XSS, is an attack that exploits unsanitized output.</span></span> <span data-ttu-id="ec092-142">Another example is eavesdropping on the wire to capture credentials sent in clear.</span><span class="sxs-lookup"><span data-stu-id="ec092-142">Another example is eavesdropping on the wire to capture credentials sent in clear.</span></span> <span data-ttu-id="ec092-143">These attacks can lead to an identity spoof threat being realized.</span><span class="sxs-lookup"><span data-stu-id="ec092-143">These attacks can lead to an identity spoof threat being realized.</span></span> <span data-ttu-id="ec092-144">To make it simple consider threats, vulnerabilities, and attacks as bad things.</span><span class="sxs-lookup"><span data-stu-id="ec092-144">To make it simple consider threats, vulnerabilities, and attacks as bad things.</span></span>
<span data-ttu-id="ec092-145">Consider the following diagrams as a balcony view of the bad things related to a Web application deployed to Azure (from J.D.</span><span class="sxs-lookup"><span data-stu-id="ec092-145">Consider the following diagrams as a balcony view of the bad things related to a Web application deployed to Azure (from J.D.</span></span>
<span data-ttu-id="ec092-146">Meier's [Azure Security Notes PDF](http://blogs.msdn.com/b/jmeier/archive/2010/08/03/now-available-azure-security-notes-pdf.aspx)):</span><span class="sxs-lookup"><span data-stu-id="ec092-146">Meier's [Azure Security Notes PDF](http://blogs.msdn.com/b/jmeier/archive/2010/08/03/now-available-azure-security-notes-pdf.aspx)):</span></span>

![Threats Vulnerabilities and Attacks][02]

<span data-ttu-id="ec092-148">You, as a developer, have control over the vulnerabilities.</span><span class="sxs-lookup"><span data-stu-id="ec092-148">You, as a developer, have control over the vulnerabilities.</span></span> <span data-ttu-id="ec092-149">The fewer vulnerabilities that you introduce, the fewer options that are left to attacker to exploit.</span><span class="sxs-lookup"><span data-stu-id="ec092-149">The fewer vulnerabilities that you introduce, the fewer options that are left to attacker to exploit.</span></span>

<span data-ttu-id="ec092-150">Identity and access related vulnerabilities leave you open to all threats in the STRIDE model.</span><span class="sxs-lookup"><span data-stu-id="ec092-150">Identity and access related vulnerabilities leave you open to all threats in the STRIDE model.</span></span> <span data-ttu-id="ec092-151">For example, an improperly implemented authentication mechanism may lead to an identity spoof and, as a result, information disclosure, data tampering, elevated privileges operations, or even shutting down the service altogether.</span><span class="sxs-lookup"><span data-stu-id="ec092-151">For example, an improperly implemented authentication mechanism may lead to an identity spoof and, as a result, information disclosure, data tampering, elevated privileges operations, or even shutting down the service altogether.</span></span> <span data-ttu-id="ec092-152">Consider the following questions that may point to potential vulnerabilities in your cloud app's identity and access implementation:</span><span class="sxs-lookup"><span data-stu-id="ec092-152">Consider the following questions that may point to potential vulnerabilities in your cloud app's identity and access implementation:</span></span>

* <span data-ttu-id="ec092-153">Are you sending credentials in clear over the wire to your Azure services?</span><span class="sxs-lookup"><span data-stu-id="ec092-153">Are you sending credentials in clear over the wire to your Azure services?</span></span>
* <span data-ttu-id="ec092-154">Do you store Azure services credentials in clear?</span><span class="sxs-lookup"><span data-stu-id="ec092-154">Do you store Azure services credentials in clear?</span></span>
* <span data-ttu-id="ec092-155">Do your Azure services credentials follow strong password policies?</span><span class="sxs-lookup"><span data-stu-id="ec092-155">Do your Azure services credentials follow strong password policies?</span></span>
* <span data-ttu-id="ec092-156">Do you rely on Azure to verify credentials vs. using custom verification mechanisms?</span><span class="sxs-lookup"><span data-stu-id="ec092-156">Do you rely on Azure to verify credentials vs. using custom verification mechanisms?</span></span>
* <span data-ttu-id="ec092-157">Do you limit Azure services authentication sessions or token lifetime to a reasonable time window?</span><span class="sxs-lookup"><span data-stu-id="ec092-157">Do you limit Azure services authentication sessions or token lifetime to a reasonable time window?</span></span>
* <span data-ttu-id="ec092-158">Do you verify permissions for each Azure entry point of your distributed cloud app?</span><span class="sxs-lookup"><span data-stu-id="ec092-158">Do you verify permissions for each Azure entry point of your distributed cloud app?</span></span>
* <span data-ttu-id="ec092-159">Does your authorization mechanism fail securely without exposing sensitive information, or without allowing limitless access?</span><span class="sxs-lookup"><span data-stu-id="ec092-159">Does your authorization mechanism fail securely without exposing sensitive information, or without allowing limitless access?</span></span>

## <a name="countermeasures"></a><span data-ttu-id="ec092-160">Countermeasures</span><span class="sxs-lookup"><span data-stu-id="ec092-160">Countermeasures</span></span>
<span data-ttu-id="ec092-161">The best countermeasure against an attack is by using the identity and access mechanisms offered by the platform rather than implementing your own.</span><span class="sxs-lookup"><span data-stu-id="ec092-161">The best countermeasure against an attack is by using the identity and access mechanisms offered by the platform rather than implementing your own.</span></span> <span data-ttu-id="ec092-162">Consider the following prominent identity and access technologies:</span><span class="sxs-lookup"><span data-stu-id="ec092-162">Consider the following prominent identity and access technologies:</span></span>

<span data-ttu-id="ec092-163">**Windows Identity Foundation (WIF).**</span><span class="sxs-lookup"><span data-stu-id="ec092-163">**Windows Identity Foundation (WIF).**</span></span> <span data-ttu-id="ec092-164">WIF is a .NET runtime library included with the .NET Framework 4.5 (it is also available as separate download for .NET 3.5/4.0).</span><span class="sxs-lookup"><span data-stu-id="ec092-164">WIF is a .NET runtime library included with the .NET Framework 4.5 (it is also available as separate download for .NET 3.5/4.0).</span></span> <span data-ttu-id="ec092-165">WIF does the heavy lifting for handling protocols such as WS-Federation and WS-Trust and tokens handling such as Security Assertion Markup Language (SAML) so you don't need to write very complex security-related code in your application.</span><span class="sxs-lookup"><span data-stu-id="ec092-165">WIF does the heavy lifting for handling protocols such as WS-Federation and WS-Trust and tokens handling such as Security Assertion Markup Language (SAML) so you don't need to write very complex security-related code in your application.</span></span> <span data-ttu-id="ec092-166">The following resources provide in-depth information about WIF:</span><span class="sxs-lookup"><span data-stu-id="ec092-166">The following resources provide in-depth information about WIF:</span></span>

* <span data-ttu-id="ec092-167">[Windows Identity Foundation 4.5 Samples](http://code.msdn.microsoft.com/site/search?f%5B0%5D.Type=SearchText&f%5B0%5D.Value=wif&f%5B1%5D.Type=Topic&f%5B1%5D.Value=claims-based%20authentication) on MSDN Code Gallery.</span><span class="sxs-lookup"><span data-stu-id="ec092-167">[Windows Identity Foundation 4.5 Samples](http://code.msdn.microsoft.com/site/search?f%5B0%5D.Type=SearchText&f%5B0%5D.Value=wif&f%5B1%5D.Type=Topic&f%5B1%5D.Value=claims-based%20authentication) on MSDN Code Gallery.</span></span>
* <span data-ttu-id="ec092-168">[Windows Identity Foundation 4.5 tools for Visual Studio 11 Beta](http://visualstudiogallery.msdn.microsoft.com/e21bf653-dfe1-4d81-b3d3-795cb104066e) on MSDN Code Gallery.</span><span class="sxs-lookup"><span data-stu-id="ec092-168">[Windows Identity Foundation 4.5 tools for Visual Studio 11 Beta](http://visualstudiogallery.msdn.microsoft.com/e21bf653-dfe1-4d81-b3d3-795cb104066e) on MSDN Code Gallery.</span></span>
* <span data-ttu-id="ec092-169">[Windows Identity Foundation runtime (.Net 3.5/4.0)](http://www.microsoft.com/download/details.aspx?id=17331) on MSDN.</span><span class="sxs-lookup"><span data-stu-id="ec092-169">[Windows Identity Foundation runtime (.Net 3.5/4.0)](http://www.microsoft.com/download/details.aspx?id=17331) on MSDN.</span></span>
* <span data-ttu-id="ec092-170">[Windows Identity Foundation 3.5/4.0 samples and Visual Studio 2008/2010 templates](http://www.microsoft.com/download/details.aspx?displaylang=en&id=4451) on MSDN.</span><span class="sxs-lookup"><span data-stu-id="ec092-170">[Windows Identity Foundation 3.5/4.0 samples and Visual Studio 2008/2010 templates](http://www.microsoft.com/download/details.aspx?displaylang=en&id=4451) on MSDN.</span></span>

<span data-ttu-id="ec092-171">**Azure AD Access Control (previously known as ACS)**.</span><span class="sxs-lookup"><span data-stu-id="ec092-171">**Azure AD Access Control (previously known as ACS)**.</span></span> <span data-ttu-id="ec092-172">Azure AD Access Control is a cloud service that provides Security Token Service (STS) and allows federation with different identity providers (IdPs) such as a corporate Active Directory or Internet IdPs such as Windows Live ID / Microsoft Account, Facebook, Google, Yahoo!, and Open ID 2.0 identity providers.</span><span class="sxs-lookup"><span data-stu-id="ec092-172">Azure AD Access Control is a cloud service that provides Security Token Service (STS) and allows federation with different identity providers (IdPs) such as a corporate Active Directory or Internet IdPs such as Windows Live ID / Microsoft Account, Facebook, Google, Yahoo!, and Open ID 2.0 identity providers.</span></span> <span data-ttu-id="ec092-173">The following resources provide in-depth information about Azure AD Access Control:</span><span class="sxs-lookup"><span data-stu-id="ec092-173">The following resources provide in-depth information about Azure AD Access Control:</span></span>

* [<span data-ttu-id="ec092-174">Access Control Service 2.0</span><span class="sxs-lookup"><span data-stu-id="ec092-174">Access Control Service 2.0</span></span>](http://msdn.microsoft.com/library/gg429786.aspx) 
* [<span data-ttu-id="ec092-175">Scenarios and Solutions Using ACS</span><span class="sxs-lookup"><span data-stu-id="ec092-175">Scenarios and Solutions Using ACS</span></span>](http://msdn.microsoft.com/library/gg185920.aspx)
* [<span data-ttu-id="ec092-176">ACS How To's</span><span class="sxs-lookup"><span data-stu-id="ec092-176">ACS How To's</span></span>](http://msdn.microsoft.com/library/windowsazure/gg185939.aspx)
* [<span data-ttu-id="ec092-177">A Guide to Claims-Based Identity and Access Control</span><span class="sxs-lookup"><span data-stu-id="ec092-177">A Guide to Claims-Based Identity and Access Control</span></span>](http://msdn.microsoft.com/library/ff423674.aspx)
* [<span data-ttu-id="ec092-178">Identity Developer Training Kit</span><span class="sxs-lookup"><span data-stu-id="ec092-178">Identity Developer Training Kit</span></span>](http://www.microsoft.com/download/details.aspx?id=14347)
* [<span data-ttu-id="ec092-179">MSDN-hosted Identity Developer Training Course</span><span class="sxs-lookup"><span data-stu-id="ec092-179">MSDN-hosted Identity Developer Training Course</span></span>](http://msdn.microsoft.com/IdentityTrainingCourse)

<span data-ttu-id="ec092-180">**Active Directory Federation Services (AD FS).** Active Directory Federation Services (AD FS) 2.0 provides support for claims-aware identity solutions that involve Windows Server??</span><span class="sxs-lookup"><span data-stu-id="ec092-180">**Active Directory Federation Services (AD FS).** Active Directory Federation Services (AD FS) 2.0 provides support for claims-aware identity solutions that involve Windows Server??</span></span> <span data-ttu-id="ec092-181">and Active Directory technology.</span><span class="sxs-lookup"><span data-stu-id="ec092-181">and Active Directory technology.</span></span> <span data-ttu-id="ec092-182">AD FS 2.0 supports the WS-Trust, WS-Federation, and SAML protocols.</span><span class="sxs-lookup"><span data-stu-id="ec092-182">AD FS 2.0 supports the WS-Trust, WS-Federation, and SAML protocols.</span></span> <span data-ttu-id="ec092-183">The following resources provide in-depth information about AD FS:</span><span class="sxs-lookup"><span data-stu-id="ec092-183">The following resources provide in-depth information about AD FS:</span></span>

* [<span data-ttu-id="ec092-184">AD FS 2.0 Content Map</span><span class="sxs-lookup"><span data-stu-id="ec092-184">AD FS 2.0 Content Map</span></span>](http://social.technet.microsoft.com/wiki/contents/articles/2735.ad-fs-2-0-content-map.aspx)
* <span data-ttu-id="ec092-185">[Web SSO Design][Web SSO Design]</span><span class="sxs-lookup"><span data-stu-id="ec092-185">[Web SSO Design][Web SSO Design]</span></span>
* <span data-ttu-id="ec092-186">[Federated Web SSO Design][Federated Web SSO Design]</span><span class="sxs-lookup"><span data-stu-id="ec092-186">[Federated Web SSO Design][Federated Web SSO Design]</span></span>

<span data-ttu-id="ec092-187">**Azure Shared Access Signatures.**</span><span class="sxs-lookup"><span data-stu-id="ec092-187">**Azure Shared Access Signatures.**</span></span> <span data-ttu-id="ec092-188">Shared Access Signatures enable you to fine-tune access to a blob or container resource.</span><span class="sxs-lookup"><span data-stu-id="ec092-188">Shared Access Signatures enable you to fine-tune access to a blob or container resource.</span></span> <span data-ttu-id="ec092-189">The following resources provide in-depth information about Shared Access Signatures.</span><span class="sxs-lookup"><span data-stu-id="ec092-189">The following resources provide in-depth information about Shared Access Signatures.</span></span>

* [<span data-ttu-id="ec092-190">Managing Access to Blobs and Containers</span><span class="sxs-lookup"><span data-stu-id="ec092-190">Managing Access to Blobs and Containers</span></span>](http://msdn.microsoft.com/library/ee393343.aspx)
* [<span data-ttu-id="ec092-191">New Storage Feature: Shared Access Signatures</span><span class="sxs-lookup"><span data-stu-id="ec092-191">New Storage Feature: Shared Access Signatures</span></span>](http://blog.smarx.com/posts/new-storage-feature-signed-access-signatures)
* [<span data-ttu-id="ec092-192">Shared Access Signatures Are Easy These Days</span><span class="sxs-lookup"><span data-stu-id="ec092-192">Shared Access Signatures Are Easy These Days</span></span>](http://blog.smarx.com/posts/shared-access-signatures-are-easy-these-days)

## <a name="scenarios-map"></a><span data-ttu-id="ec092-193">Scenarios Map</span><span class="sxs-lookup"><span data-stu-id="ec092-193">Scenarios Map</span></span>
<span data-ttu-id="ec092-194">This section briefly outlines the key scenarios covered in this topic.</span><span class="sxs-lookup"><span data-stu-id="ec092-194">This section briefly outlines the key scenarios covered in this topic.</span></span>
<span data-ttu-id="ec092-195">Use it as a map to determine the right identity solution for your application.</span><span class="sxs-lookup"><span data-stu-id="ec092-195">Use it as a map to determine the right identity solution for your application.</span></span>

* <span data-ttu-id="ec092-196">**ASP.NET Web Form Application with Federated Authentication.**</span><span class="sxs-lookup"><span data-stu-id="ec092-196">**ASP.NET Web Form Application with Federated Authentication.**</span></span> <span data-ttu-id="ec092-197">In this scenario you control access to your ASP.NET Web Forms app using either Internet identity such as Live ID / Microsoft Account or corporate identity managed in Windows Server Active Directory.</span><span class="sxs-lookup"><span data-stu-id="ec092-197">In this scenario you control access to your ASP.NET Web Forms app using either Internet identity such as Live ID / Microsoft Account or corporate identity managed in Windows Server Active Directory.</span></span>
* <span data-ttu-id="ec092-198">**WCF (SOAP) Service with Federated Authentication.** In this scenario you control access to your WCF (SOAP) service using Service Identities managed by Azure AD Access Control.</span><span class="sxs-lookup"><span data-stu-id="ec092-198">**WCF (SOAP) Service with Federated Authentication.** In this scenario you control access to your WCF (SOAP) service using Service Identities managed by Azure AD Access Control.</span></span>
* <span data-ttu-id="ec092-199">**WCF (SOAP) Service with Federated Authentication, Identities in Active Directory.**</span><span class="sxs-lookup"><span data-stu-id="ec092-199">**WCF (SOAP) Service with Federated Authentication, Identities in Active Directory.**</span></span> <span data-ttu-id="ec092-200">In this scenario you control access to your WCF (SOAP) web service using identities managed by corporate Windows Server Active Directory.</span><span class="sxs-lookup"><span data-stu-id="ec092-200">In this scenario you control access to your WCF (SOAP) web service using identities managed by corporate Windows Server Active Directory.</span></span>
* <span data-ttu-id="ec092-201">**WCF (REST) Service With Federated Authentication.** In this scenario you control access to your WCF (REST) service using Service Identities managed by Azure AD Access Control.</span><span class="sxs-lookup"><span data-stu-id="ec092-201">**WCF (REST) Service With Federated Authentication.** In this scenario you control access to your WCF (REST) service using Service Identities managed by Azure AD Access Control.</span></span>
* <span data-ttu-id="ec092-202">**WCF (REST) Service With Live ID / Microsoft Account, Facebook, Google, Yahoo!, Open ID.**</span><span class="sxs-lookup"><span data-stu-id="ec092-202">**WCF (REST) Service With Live ID / Microsoft Account, Facebook, Google, Yahoo!, Open ID.**</span></span> <span data-ttu-id="ec092-203">In this scenario you control access to your WCF (REST) service using Internet identity such as Live ID / Microsoft Account.</span><span class="sxs-lookup"><span data-stu-id="ec092-203">In this scenario you control access to your WCF (REST) service using Internet identity such as Live ID / Microsoft Account.</span></span>
* <span data-ttu-id="ec092-204">**ASP.NET Web App to REST WCF Service Using Shared SWT Token.**</span><span class="sxs-lookup"><span data-stu-id="ec092-204">**ASP.NET Web App to REST WCF Service Using Shared SWT Token.**</span></span> <span data-ttu-id="ec092-205">In this scenario you have distributed application with front end ASP.NET web app and downstream REST service and you want to flow end user's context through physical tiers.</span><span class="sxs-lookup"><span data-stu-id="ec092-205">In this scenario you have distributed application with front end ASP.NET web app and downstream REST service and you want to flow end user's context through physical tiers.</span></span>
* <span data-ttu-id="ec092-206">**Role-Based Access Control (RBAC) Authorization In Claims-Aware Applications and Services.**</span><span class="sxs-lookup"><span data-stu-id="ec092-206">**Role-Based Access Control (RBAC) Authorization In Claims-Aware Applications and Services.**</span></span> <span data-ttu-id="ec092-207">In this scenario you want to implement authorization logic in your app based on roles.</span><span class="sxs-lookup"><span data-stu-id="ec092-207">In this scenario you want to implement authorization logic in your app based on roles.</span></span>
* <span data-ttu-id="ec092-208">**Claims-Based Authorization In Claims-Aware Applications and Services.**</span><span class="sxs-lookup"><span data-stu-id="ec092-208">**Claims-Based Authorization In Claims-Aware Applications and Services.**</span></span> <span data-ttu-id="ec092-209">In this scenario you want to implement authorization logic in your app based on complex authorization rules.</span><span class="sxs-lookup"><span data-stu-id="ec092-209">In this scenario you want to implement authorization logic in your app based on complex authorization rules.</span></span>
* <span data-ttu-id="ec092-210">**Azure Storage Service Identity and Access Scenarios.** In this scenario you need to securely share access to Azure storage blobs and containers.</span><span class="sxs-lookup"><span data-stu-id="ec092-210">**Azure Storage Service Identity and Access Scenarios.** In this scenario you need to securely share access to Azure storage blobs and containers.</span></span>
* <span data-ttu-id="ec092-211">**Azure SQL Database Identity and Access Scenarios.** SQL Database supports only SQL Server Authentication.</span><span class="sxs-lookup"><span data-stu-id="ec092-211">**Azure SQL Database Identity and Access Scenarios.** SQL Database supports only SQL Server Authentication.</span></span> <span data-ttu-id="ec092-212">Windows Authentication (integrated security) is not supported.</span><span class="sxs-lookup"><span data-stu-id="ec092-212">Windows Authentication (integrated security) is not supported.</span></span> <span data-ttu-id="ec092-213">Users must provide credentials (login and password) every time they connect to SQL Database.</span><span class="sxs-lookup"><span data-stu-id="ec092-213">Users must provide credentials (login and password) every time they connect to SQL Database.</span></span>
* <span data-ttu-id="ec092-214">**Azure Service Bus Identity and Access Scenarios.** In this scenario you need securely access Azure Service Bus queues.</span><span class="sxs-lookup"><span data-stu-id="ec092-214">**Azure Service Bus Identity and Access Scenarios.** In this scenario you need securely access Azure Service Bus queues.</span></span>
* <span data-ttu-id="ec092-215">**In-Memory Cache Identity and Access Scenarios.** In this scenario you need to securely access data managed by in-memory cache.</span><span class="sxs-lookup"><span data-stu-id="ec092-215">**In-Memory Cache Identity and Access Scenarios.** In this scenario you need to securely access data managed by in-memory cache.</span></span>
* <span data-ttu-id="ec092-216">**Azure Marketplace Identity and Access Scenarios.** In this scenario you need to securely access Azure Marketplace datasets.</span><span class="sxs-lookup"><span data-stu-id="ec092-216">**Azure Marketplace Identity and Access Scenarios.** In this scenario you need to securely access Azure Marketplace datasets.</span></span>

## <a name="azure-identity-and-access-scenarios"></a><span data-ttu-id="ec092-217">Azure Identity and Access Scenarios</span><span class="sxs-lookup"><span data-stu-id="ec092-217">Azure Identity and Access Scenarios</span></span>
<span data-ttu-id="ec092-218">This section outlines common identity and access scenarios for different application architectures.</span><span class="sxs-lookup"><span data-stu-id="ec092-218">This section outlines common identity and access scenarios for different application architectures.</span></span> <span data-ttu-id="ec092-219">Use the Scenarios Map for a quick orientation.</span><span class="sxs-lookup"><span data-stu-id="ec092-219">Use the Scenarios Map for a quick orientation.</span></span>

### <a name="aspnet-web-form-application-with-federated-authentication"></a><span data-ttu-id="ec092-220">ASP.NET Web Form Application with Federated Authentication</span><span class="sxs-lookup"><span data-stu-id="ec092-220">ASP.NET Web Form Application with Federated Authentication</span></span>
<span data-ttu-id="ec092-221">In this application architecture scenario your web application may be deployed to Azure or on-premises.</span><span class="sxs-lookup"><span data-stu-id="ec092-221">In this application architecture scenario your web application may be deployed to Azure or on-premises.</span></span> <span data-ttu-id="ec092-222">The application requires that its users will be authenticated by either corporate Active Directory or Internet identity providers.</span><span class="sxs-lookup"><span data-stu-id="ec092-222">The application requires that its users will be authenticated by either corporate Active Directory or Internet identity providers.</span></span>

<span data-ttu-id="ec092-223">To solve this scenarios use Azure AD Access control and Windows Identity Foundation.</span><span class="sxs-lookup"><span data-stu-id="ec092-223">To solve this scenarios use Azure AD Access control and Windows Identity Foundation.</span></span>

![Azure Active Directory Access control][03]

<span data-ttu-id="ec092-225">Refer to the following resources to implement this scenario:</span><span class="sxs-lookup"><span data-stu-id="ec092-225">Refer to the following resources to implement this scenario:</span></span>

* [<span data-ttu-id="ec092-226">How To: Create My First Claims-Aware ASP.NET Application Using ACS</span><span class="sxs-lookup"><span data-stu-id="ec092-226">How To: Create My First Claims-Aware ASP.NET Application Using ACS</span></span>](http://msdn.microsoft.com/library/gg429779.aspx)
* [<span data-ttu-id="ec092-227">How To: Host Login Pages in Your ASP.NET Web Application</span><span class="sxs-lookup"><span data-stu-id="ec092-227">How To: Host Login Pages in Your ASP.NET Web Application</span></span>](http://msdn.microsoft.com/library/gg185926.aspx)
* [<span data-ttu-id="ec092-228">How To: Implement Claims Authorization in a Claims-Aware ASP.NET Application Using WIF and ACS</span><span class="sxs-lookup"><span data-stu-id="ec092-228">How To: Implement Claims Authorization in a Claims-Aware ASP.NET Application Using WIF and ACS</span></span>](http://msdn.microsoft.com/library/gg185907.aspx)    
* [<span data-ttu-id="ec092-229">How To: Implement Role Based Access Control (RBAC) in a Claims-Aware ASP.NET Application Using WIF and ACS</span><span class="sxs-lookup"><span data-stu-id="ec092-229">How To: Implement Role Based Access Control (RBAC) in a Claims-Aware ASP.NET Application Using WIF and ACS</span></span>](http://msdn.microsoft.com/library/gg185914.aspx)
* [<span data-ttu-id="ec092-230">How To: Configure Trust Between ACS and ASP.NET Web Applications Using X.509 Certificates</span><span class="sxs-lookup"><span data-stu-id="ec092-230">How To: Configure Trust Between ACS and ASP.NET Web Applications Using X.509 Certificates</span></span>](http://msdn.microsoft.com/library/gg185947.aspx)
* [<span data-ttu-id="ec092-231">Code Sample: ASP.NET Simple Forms</span><span class="sxs-lookup"><span data-stu-id="ec092-231">Code Sample: ASP.NET Simple Forms</span></span>](http://msdn.microsoft.com/library/gg185938.aspx)

### <a name="wcf-soap-service-with-service-identity"></a><span data-ttu-id="ec092-232">WCF (SOAP) Service with Service Identity</span><span class="sxs-lookup"><span data-stu-id="ec092-232">WCF (SOAP) Service with Service Identity</span></span>
<span data-ttu-id="ec092-233">In this application architecture scenario your WCF (SOAP) service may be deployed to Azure or on-premises.</span><span class="sxs-lookup"><span data-stu-id="ec092-233">In this application architecture scenario your WCF (SOAP) service may be deployed to Azure or on-premises.</span></span> <span data-ttu-id="ec092-234">The service is being accessed as a downstream service by a web application or even by another web service.</span><span class="sxs-lookup"><span data-stu-id="ec092-234">The service is being accessed as a downstream service by a web application or even by another web service.</span></span> <span data-ttu-id="ec092-235">You need to control access to it using application specific identity.</span><span class="sxs-lookup"><span data-stu-id="ec092-235">You need to control access to it using application specific identity.</span></span> <span data-ttu-id="ec092-236">Think of it in terms of the type of app pool account that you used in IIS - although the technology is different, the approaches are similar in that the service is accessed using an application scope account vs. end user account.</span><span class="sxs-lookup"><span data-stu-id="ec092-236">Think of it in terms of the type of app pool account that you used in IIS - although the technology is different, the approaches are similar in that the service is accessed using an application scope account vs. end user account.</span></span>

<span data-ttu-id="ec092-237">Use the Service Identity feature in Azure AD Access control.</span><span class="sxs-lookup"><span data-stu-id="ec092-237">Use the Service Identity feature in Azure AD Access control.</span></span>
<span data-ttu-id="ec092-238">This is similar to the IIS app pool account you were using when deploying your apps to Windows Server and IIS.</span><span class="sxs-lookup"><span data-stu-id="ec092-238">This is similar to the IIS app pool account you were using when deploying your apps to Windows Server and IIS.</span></span> <span data-ttu-id="ec092-239">Configure Azure AD Access Control to issue SAML tokens that will be handled by WIF at the WCF (SOAP) service.</span><span class="sxs-lookup"><span data-stu-id="ec092-239">Configure Azure AD Access Control to issue SAML tokens that will be handled by WIF at the WCF (SOAP) service.</span></span>

![WCF (SOAP) Service][04]

<span data-ttu-id="ec092-241">Refer to the following resources to implement this scenario:</span><span class="sxs-lookup"><span data-stu-id="ec092-241">Refer to the following resources to implement this scenario:</span></span>

* [<span data-ttu-id="ec092-242">How To: Add Service Identities with an X.509 Certificate, Password, or Symmetric Key</span><span class="sxs-lookup"><span data-stu-id="ec092-242">How To: Add Service Identities with an X.509 Certificate, Password, or Symmetric Key</span></span>](http://msdn.microsoft.com/library/gg185924.aspx)
* [<span data-ttu-id="ec092-243">How To: Authenticate with a Client Certificate to a WCF Service Protected by ACS</span><span class="sxs-lookup"><span data-stu-id="ec092-243">How To: Authenticate with a Client Certificate to a WCF Service Protected by ACS</span></span>](http://msdn.microsoft.com/library/hh289316.aspx)
* [<span data-ttu-id="ec092-244">How To: Authenticate with a Username and Password to a WCF Service Protected by ACS</span><span class="sxs-lookup"><span data-stu-id="ec092-244">How To: Authenticate with a Username and Password to a WCF Service Protected by ACS</span></span>](http://msdn.microsoft.com/library/gg185954.aspx)
* [<span data-ttu-id="ec092-245">Code Sample: WCF Certificate Authentication</span><span class="sxs-lookup"><span data-stu-id="ec092-245">Code Sample: WCF Certificate Authentication</span></span>](http://msdn.microsoft.com/library/gg185952.aspx)
* [<span data-ttu-id="ec092-246">Code Sample: WCF Username Authentication</span><span class="sxs-lookup"><span data-stu-id="ec092-246">Code Sample: WCF Username Authentication</span></span>](http://msdn.microsoft.com/library/gg185927.aspx)

### <a name="wcf-soap-service-with-federated-authentication-identities-in-active-directory"></a><span data-ttu-id="ec092-247">WCF (SOAP) Service With Federated Authentication, Identities In Active Directory</span><span class="sxs-lookup"><span data-stu-id="ec092-247">WCF (SOAP) Service With Federated Authentication, Identities In Active Directory</span></span>
<span data-ttu-id="ec092-248">In this application architecture scenario your WCF (SOAP) service may be deployed to Azure or on-premises.</span><span class="sxs-lookup"><span data-stu-id="ec092-248">In this application architecture scenario your WCF (SOAP) service may be deployed to Azure or on-premises.</span></span> <span data-ttu-id="ec092-249">You need to control access to it by using an identity that is managed by a corporate Windows Server Active Directory (AD).</span><span class="sxs-lookup"><span data-stu-id="ec092-249">You need to control access to it by using an identity that is managed by a corporate Windows Server Active Directory (AD).</span></span>

<span data-ttu-id="ec092-250">Use Azure AD Access Control configured for federation with Windows Server AD FS.</span><span class="sxs-lookup"><span data-stu-id="ec092-250">Use Azure AD Access Control configured for federation with Windows Server AD FS.</span></span> <span data-ttu-id="ec092-251">In this case you do not need to configure Service Identity with Azure AD Access Control.</span><span class="sxs-lookup"><span data-stu-id="ec092-251">In this case you do not need to configure Service Identity with Azure AD Access Control.</span></span> <span data-ttu-id="ec092-252">The agent that needs to access the WCF (SOAP) service provides credentials to AD FS and upon successful authentication is issued the token by AD FS.</span><span class="sxs-lookup"><span data-stu-id="ec092-252">The agent that needs to access the WCF (SOAP) service provides credentials to AD FS and upon successful authentication is issued the token by AD FS.</span></span> <span data-ttu-id="ec092-253">The token is then submitted to Azure AD Access Control and reissued back to the agent.</span><span class="sxs-lookup"><span data-stu-id="ec092-253">The token is then submitted to Azure AD Access Control and reissued back to the agent.</span></span> <span data-ttu-id="ec092-254">The agent uses the token to submit request to the WCF (SOAP) service.</span><span class="sxs-lookup"><span data-stu-id="ec092-254">The agent uses the token to submit request to the WCF (SOAP) service.</span></span>

![WCF (SOAP) Service With AD][05]

<span data-ttu-id="ec092-256">Refer to the following resources to implement this scenario:</span><span class="sxs-lookup"><span data-stu-id="ec092-256">Refer to the following resources to implement this scenario:</span></span>

* [<span data-ttu-id="ec092-257">How To: Add Service Identities with an X.509 Certificate, Password, or Symmetric Key</span><span class="sxs-lookup"><span data-stu-id="ec092-257">How To: Add Service Identities with an X.509 Certificate, Password, or Symmetric Key</span></span>](http://msdn.microsoft.com/library/gg185924.aspx)
* [<span data-ttu-id="ec092-258">How To: Configure AD FS 2.0 as an Identity Provider</span><span class="sxs-lookup"><span data-stu-id="ec092-258">How To: Configure AD FS 2.0 as an Identity Provider</span></span>](http://msdn.microsoft.com/library/gg185961.aspx)
* [<span data-ttu-id="ec092-259">How To: Use Management Service to Configure AD FS 2.0 as an Enterprise Identity Provider</span><span class="sxs-lookup"><span data-stu-id="ec092-259">How To: Use Management Service to Configure AD FS 2.0 as an Enterprise Identity Provider</span></span>](http://msdn.microsoft.com/library/gg185905.aspx)
* [<span data-ttu-id="ec092-260">Code Sample: WCF Federated Authentication With AD FS 2.0 </span><span class="sxs-lookup"><span data-stu-id="ec092-260">Code Sample: WCF Federated Authentication With AD FS 2.0 </span></span>](http://msdn.microsoft.com/library/hh127796.aspx)

### <a name="wcf-rest-service-with-service-identities"></a><span data-ttu-id="ec092-261">WCF (REST) Service With Service Identities</span><span class="sxs-lookup"><span data-stu-id="ec092-261">WCF (REST) Service With Service Identities</span></span>
<span data-ttu-id="ec092-262">In this scenario your WCF (REST) service may be deployed to Azure or on-premises.</span><span class="sxs-lookup"><span data-stu-id="ec092-262">In this scenario your WCF (REST) service may be deployed to Azure or on-premises.</span></span> <span data-ttu-id="ec092-263">The service is accessed as a downstream service by a web application or by another web service.</span><span class="sxs-lookup"><span data-stu-id="ec092-263">The service is accessed as a downstream service by a web application or by another web service.</span></span> <span data-ttu-id="ec092-264">You need to control access to it using an application-specific identity Think of it in terms of the type of app pool account that you used in IIS - although the technology is different, the approaches are similar in that the service is accessed using an application scope account vs. end user account.</span><span class="sxs-lookup"><span data-stu-id="ec092-264">You need to control access to it using an application-specific identity Think of it in terms of the type of app pool account that you used in IIS - although the technology is different, the approaches are similar in that the service is accessed using an application scope account vs. end user account.</span></span>

<span data-ttu-id="ec092-265">Use the Service Identity feature in Azure AD Access Control.</span><span class="sxs-lookup"><span data-stu-id="ec092-265">Use the Service Identity feature in Azure AD Access Control.</span></span>
<span data-ttu-id="ec092-266">Configure Azure AD Access Control to issue Simple Web Token (SWT) tokens.</span><span class="sxs-lookup"><span data-stu-id="ec092-266">Configure Azure AD Access Control to issue Simple Web Token (SWT) tokens.</span></span> <span data-ttu-id="ec092-267">To handle the SWT token on the REST service side, you can either implement a custom token handler and plug it into the WIF pipeline, or you can parse it "manually" without using the WIF infrastructure.</span><span class="sxs-lookup"><span data-stu-id="ec092-267">To handle the SWT token on the REST service side, you can either implement a custom token handler and plug it into the WIF pipeline, or you can parse it "manually" without using the WIF infrastructure.</span></span>

<span data-ttu-id="ec092-268">Consider the following diagram (WIF is optional):</span><span class="sxs-lookup"><span data-stu-id="ec092-268">Consider the following diagram (WIF is optional):</span></span>

![REST Service][06]

<span data-ttu-id="ec092-270">Refer to the following resources to implement this scenario:</span><span class="sxs-lookup"><span data-stu-id="ec092-270">Refer to the following resources to implement this scenario:</span></span>

* [<span data-ttu-id="ec092-271">How To: Configure Trust Between ACS and WCF Service Using Symmetric Keys</span><span class="sxs-lookup"><span data-stu-id="ec092-271">How To: Configure Trust Between ACS and WCF Service Using Symmetric Keys</span></span>](http://msdn.microsoft.com/library/gg185958.aspx)
* [<span data-ttu-id="ec092-272">How To: Authenticate to a REST WCF Service Deployed to Azure Using ACS</span><span class="sxs-lookup"><span data-stu-id="ec092-272">How To: Authenticate to a REST WCF Service Deployed to Azure Using ACS</span></span>](http://msdn.microsoft.com/library/hh289317.aspx)
* [<span data-ttu-id="ec092-273">Code Sample: ASP.NET Web Service</span><span class="sxs-lookup"><span data-stu-id="ec092-273">Code Sample: ASP.NET Web Service</span></span>](http://msdn.microsoft.com/library/gg983271.aspx)
* [<span data-ttu-id="ec092-274">Code Sample: Windows Phone 7 Application</span><span class="sxs-lookup"><span data-stu-id="ec092-274">Code Sample: Windows Phone 7 Application</span></span>](http://msdn.microsoft.com/library/gg983271.aspx)
* [<span data-ttu-id="ec092-275">REST WCF With SWT Token Issued By Azure Access Control Service (ACS)</span><span class="sxs-lookup"><span data-stu-id="ec092-275">REST WCF With SWT Token Issued By Azure Access Control Service (ACS)</span></span>](http://code.msdn.microsoft.com/REST-WCF-With-SWT-Token-123d93c0)

### <a name="wcf-rest-service-with-live-id--microsoft-account-facebook-google-yahoo-open-id"></a><span data-ttu-id="ec092-276">WCF (REST) Service with Live ID / Microsoft Account, Facebook, Google, Yahoo!, Open ID</span><span class="sxs-lookup"><span data-stu-id="ec092-276">WCF (REST) Service with Live ID / Microsoft Account, Facebook, Google, Yahoo!, Open ID</span></span>
<span data-ttu-id="ec092-277">In this scenario, your WCF (REST) service can be deployed to Azure or on-premises.</span><span class="sxs-lookup"><span data-stu-id="ec092-277">In this scenario, your WCF (REST) service can be deployed to Azure or on-premises.</span></span> <span data-ttu-id="ec092-278">You need to control access to it using a public Internet identity, such as Live ID / Microsoft Account or Facebook.</span><span class="sxs-lookup"><span data-stu-id="ec092-278">You need to control access to it using a public Internet identity, such as Live ID / Microsoft Account or Facebook.</span></span>

<span data-ttu-id="ec092-279">Use Azure AD Access Control to issue SWT tokens.</span><span class="sxs-lookup"><span data-stu-id="ec092-279">Use Azure AD Access Control to issue SWT tokens.</span></span> <span data-ttu-id="ec092-280">To handle the SWT token on the REST service side, you can implement a custom token handler and plug it into a WIF pipeline, or you can parse it "manually" without using the WIF infrastructure.</span><span class="sxs-lookup"><span data-stu-id="ec092-280">To handle the SWT token on the REST service side, you can implement a custom token handler and plug it into a WIF pipeline, or you can parse it "manually" without using the WIF infrastructure.</span></span>

<span data-ttu-id="ec092-281">It is important to note that in order to implement this scenario, the application needs to use web browser control to collect end user credentials.</span><span class="sxs-lookup"><span data-stu-id="ec092-281">It is important to note that in order to implement this scenario, the application needs to use web browser control to collect end user credentials.</span></span> <span data-ttu-id="ec092-282">This makes it unsuitable for scenarios in which the REST service is accessed from an ASP.NET web app.</span><span class="sxs-lookup"><span data-stu-id="ec092-282">This makes it unsuitable for scenarios in which the REST service is accessed from an ASP.NET web app.</span></span> <span data-ttu-id="ec092-283">It is only suitable for scenarios in which the REST service is being accessed by the user's client application, such as a Windows Phone 7 app or a rich desktop client.</span><span class="sxs-lookup"><span data-stu-id="ec092-283">It is only suitable for scenarios in which the REST service is being accessed by the user's client application, such as a Windows Phone 7 app or a rich desktop client.</span></span> <span data-ttu-id="ec092-284">The key reason for popping the web browser control is that Internet identities don't natively support active profile scenarios (web services scenario).</span><span class="sxs-lookup"><span data-stu-id="ec092-284">The key reason for popping the web browser control is that Internet identities don't natively support active profile scenarios (web services scenario).</span></span> <span data-ttu-id="ec092-285">Internet identities mainly support passive profile scenarios (web apps) that rely on browser redirects: this is where web browser control comes handy.</span><span class="sxs-lookup"><span data-stu-id="ec092-285">Internet identities mainly support passive profile scenarios (web apps) that rely on browser redirects: this is where web browser control comes handy.</span></span>

<span data-ttu-id="ec092-286">Consider the following diagram (WIF is optional, and thus not shown):</span><span class="sxs-lookup"><span data-stu-id="ec092-286">Consider the following diagram (WIF is optional, and thus not shown):</span></span>

![WIF is optional][07]

<span data-ttu-id="ec092-288">Refer to the following resources to implement this scenario:</span><span class="sxs-lookup"><span data-stu-id="ec092-288">Refer to the following resources to implement this scenario:</span></span>

* [<span data-ttu-id="ec092-289">How To: Authenticate to a REST WCF Service Deployed to Azure Using ACS</span><span class="sxs-lookup"><span data-stu-id="ec092-289">How To: Authenticate to a REST WCF Service Deployed to Azure Using ACS</span></span>](http://msdn.microsoft.com/library/hh289317.aspx)
* [<span data-ttu-id="ec092-290">How To: Configure Google as an Identity Provider</span><span class="sxs-lookup"><span data-stu-id="ec092-290">How To: Configure Google as an Identity Provider</span></span>](http://msdn.microsoft.com/library/gg185976.aspx)
* [<span data-ttu-id="ec092-291">How To: Configure Facebook as an Identity Provider</span><span class="sxs-lookup"><span data-stu-id="ec092-291">How To: Configure Facebook as an Identity Provider</span></span>](http://msdn.microsoft.com/library/gg185919.aspx)
* [<span data-ttu-id="ec092-292">How To: Configure Yahoo! as an Identity Provider</span><span class="sxs-lookup"><span data-stu-id="ec092-292">How To: Configure Yahoo! as an Identity Provider</span></span>](http://msdn.microsoft.com/library/gg185977.aspx)
* [<span data-ttu-id="ec092-293"> Code Sample: Windows Phone 7 Application</span><span class="sxs-lookup"><span data-stu-id="ec092-293"> Code Sample: Windows Phone 7 Application</span></span>](http://msdn.microsoft.com/library/gg983271.aspx)
* [<span data-ttu-id="ec092-294">REST WCF With SWT Token Issued By Azure Access Control Service (ACS)</span><span class="sxs-lookup"><span data-stu-id="ec092-294">REST WCF With SWT Token Issued By Azure Access Control Service (ACS)</span></span>](http://code.msdn.microsoft.com/REST-WCF-With-SWT-Token-123d93c0)

### <a name="aspnet-web-app-to-rest-wcf-service-using-shared-swt-token"></a><span data-ttu-id="ec092-295">ASP.NET Web App to REST WCF Service Using Shared SWT Token</span><span class="sxs-lookup"><span data-stu-id="ec092-295">ASP.NET Web App to REST WCF Service Using Shared SWT Token</span></span>
<span data-ttu-id="ec092-296">In this scenario you have a distributed application with a front-end ASP.NET web app and a downstream REST service and you want to maintain the end user's context across physical tiers.</span><span class="sxs-lookup"><span data-stu-id="ec092-296">In this scenario you have a distributed application with a front-end ASP.NET web app and a downstream REST service and you want to maintain the end user's context across physical tiers.</span></span> <span data-ttu-id="ec092-297">This is sometimes needed when implementing authorization logic or logging based on the end user's identity in the downstream REST service.</span><span class="sxs-lookup"><span data-stu-id="ec092-297">This is sometimes needed when implementing authorization logic or logging based on the end user's identity in the downstream REST service.</span></span>

<span data-ttu-id="ec092-298">Configure Azure AD Access Control to issue SWT token.</span><span class="sxs-lookup"><span data-stu-id="ec092-298">Configure Azure AD Access Control to issue SWT token.</span></span> <span data-ttu-id="ec092-299">The SWT token is issued to the front-end ASP.NET web app and then shared with the downstream REST service.</span><span class="sxs-lookup"><span data-stu-id="ec092-299">The SWT token is issued to the front-end ASP.NET web app and then shared with the downstream REST service.</span></span> <span data-ttu-id="ec092-300">In this case, there is only one relying party configured in Azure AD Access Control.</span><span class="sxs-lookup"><span data-stu-id="ec092-300">In this case, there is only one relying party configured in Azure AD Access Control.</span></span> <span data-ttu-id="ec092-301">However, there are several caveats:</span><span class="sxs-lookup"><span data-stu-id="ec092-301">However, there are several caveats:</span></span>

* <span data-ttu-id="ec092-302">Since WIF does not provide a SWT token handler out of the box you need to implement a custom token handler to be used with the ASP.NET web app.</span><span class="sxs-lookup"><span data-stu-id="ec092-302">Since WIF does not provide a SWT token handler out of the box you need to implement a custom token handler to be used with the ASP.NET web app.</span></span> <span data-ttu-id="ec092-303">You should rely on the heavy lifting that WIF does to support the WS-Federation protocol that relies on browser redirects vs. implementing it yourself.</span><span class="sxs-lookup"><span data-stu-id="ec092-303">You should rely on the heavy lifting that WIF does to support the WS-Federation protocol that relies on browser redirects vs. implementing it yourself.</span></span>
* <span data-ttu-id="ec092-304">When implementing a SWT custom token handler, make sure the bootstrap token is being addressed to make sure it's retained.</span><span class="sxs-lookup"><span data-stu-id="ec092-304">When implementing a SWT custom token handler, make sure the bootstrap token is being addressed to make sure it's retained.</span></span>
  <span data-ttu-id="ec092-305">Otherwise you won't be able to share it and send it to the downstream REST service.</span><span class="sxs-lookup"><span data-stu-id="ec092-305">Otherwise you won't be able to share it and send it to the downstream REST service.</span></span>
* <span data-ttu-id="ec092-306">You don't have to use WIF on a REST service; rather, you can parse the token "manually" since there is no need to handle redirects in this case.</span><span class="sxs-lookup"><span data-stu-id="ec092-306">You don't have to use WIF on a REST service; rather, you can parse the token "manually" since there is no need to handle redirects in this case.</span></span>

![ASP.NET Web Application][08]

<span data-ttu-id="ec092-308">Refer to the following resources to implement this scenario:</span><span class="sxs-lookup"><span data-stu-id="ec092-308">Refer to the following resources to implement this scenario:</span></span>

* [<span data-ttu-id="ec092-309">How To: Configure Google as an Identity Provider</span><span class="sxs-lookup"><span data-stu-id="ec092-309">How To: Configure Google as an Identity Provider</span></span>](http://msdn.microsoft.com/library/gg185976.aspx)
* [<span data-ttu-id="ec092-310">How To: Configure Facebook as an Identity Provider</span><span class="sxs-lookup"><span data-stu-id="ec092-310">How To: Configure Facebook as an Identity Provider</span></span>](http://msdn.microsoft.com/library/gg185919.aspx)
* [<span data-ttu-id="ec092-311">How To: Configure Yahoo! as an Identity Provider</span><span class="sxs-lookup"><span data-stu-id="ec092-311">How To: Configure Yahoo! as an Identity Provider</span></span>](http://msdn.microsoft.com/library/gg185977.aspx)
* [<span data-ttu-id="ec092-312">ASP.NET Web App To REST WCF Service Delegation Using Shared SWT Token</span><span class="sxs-lookup"><span data-stu-id="ec092-312">ASP.NET Web App To REST WCF Service Delegation Using Shared SWT Token</span></span>](http://code.msdn.microsoft.com/ASPNET-Web-App-To-REST-WCF-b2b95f82)

### <a name="role-based-access-control-rbac-in-claims-aware-applications-and-services"></a><span data-ttu-id="ec092-313">Role-Based Access Control (RBAC) In Claims-Aware Applications and Services</span><span class="sxs-lookup"><span data-stu-id="ec092-313">Role-Based Access Control (RBAC) In Claims-Aware Applications and Services</span></span>
<span data-ttu-id="ec092-314">In this scenario you need to implement authorization in your web application or service based on user roles: user with required roles get access and those that don't have required roles are denied.</span><span class="sxs-lookup"><span data-stu-id="ec092-314">In this scenario you need to implement authorization in your web application or service based on user roles: user with required roles get access and those that don't have required roles are denied.</span></span> <span data-ttu-id="ec092-315">Simply put, your application needs to answer simple question - is the user in role X?</span><span class="sxs-lookup"><span data-stu-id="ec092-315">Simply put, your application needs to answer simple question - is the user in role X?</span></span>

<span data-ttu-id="ec092-316">There are several ways to solve this scenario.</span><span class="sxs-lookup"><span data-stu-id="ec092-316">There are several ways to solve this scenario.</span></span> <span data-ttu-id="ec092-317">You can use Azure AD Access Control, WIF Claims Authentication Manager, samlSecurityTokenRequirement mapping, or Customer Role Manager.</span><span class="sxs-lookup"><span data-stu-id="ec092-317">You can use Azure AD Access Control, WIF Claims Authentication Manager, samlSecurityTokenRequirement mapping, or Customer Role Manager.</span></span>

<span data-ttu-id="ec092-318">WIF is used in all cases.</span><span class="sxs-lookup"><span data-stu-id="ec092-318">WIF is used in all cases.</span></span> <span data-ttu-id="ec092-319">WIF supports the IPrincipal.IsInRole("MyRole") method.</span><span class="sxs-lookup"><span data-stu-id="ec092-319">WIF supports the IPrincipal.IsInRole("MyRole") method.</span></span> <span data-ttu-id="ec092-320">In most of the cases the key is to make sure there is role type claim with URI of http://schemas.microsoft.com/ws/2008/06/identity/claims/role in the token so that WIF can successfully verify role membership when the IsInRole method is called.</span><span class="sxs-lookup"><span data-stu-id="ec092-320">In most of the cases the key is to make sure there is role type claim with URI of http://schemas.microsoft.com/ws/2008/06/identity/claims/role in the token so that WIF can successfully verify role membership when the IsInRole method is called.</span></span>

<span data-ttu-id="ec092-321">**Azure AD Access Control**.</span><span class="sxs-lookup"><span data-stu-id="ec092-321">**Azure AD Access Control**.</span></span> <span data-ttu-id="ec092-322">In this implementation the Azure AD Access Control claims transformation rule engine is used.</span><span class="sxs-lookup"><span data-stu-id="ec092-322">In this implementation the Azure AD Access Control claims transformation rule engine is used.</span></span> <span data-ttu-id="ec092-323">Using the claims transformation rule engine rules you can transform any incoming claim into a role type claim so that when the token hits the application or a service WIF can parse this role claim to make sure IsInRole method call is succesful.</span><span class="sxs-lookup"><span data-stu-id="ec092-323">Using the claims transformation rule engine rules you can transform any incoming claim into a role type claim so that when the token hits the application or a service WIF can parse this role claim to make sure IsInRole method call is succesful.</span></span>

![][09]

<span data-ttu-id="ec092-324">**WIF ClaimsAuthenticationManager**.</span><span class="sxs-lookup"><span data-stu-id="ec092-324">**WIF ClaimsAuthenticationManager**.</span></span> <span data-ttu-id="ec092-325">In this implementation use ClaimsAuthenticationManager as WIF's extensibility point.</span><span class="sxs-lookup"><span data-stu-id="ec092-325">In this implementation use ClaimsAuthenticationManager as WIF's extensibility point.</span></span> <span data-ttu-id="ec092-326">Using this approach you transform any arbitrary incoming claims to a role claim type at the application.</span><span class="sxs-lookup"><span data-stu-id="ec092-326">Using this approach you transform any arbitrary incoming claims to a role claim type at the application.</span></span> <span data-ttu-id="ec092-327">The complexity of the transformation is only limited by the code you write.</span><span class="sxs-lookup"><span data-stu-id="ec092-327">The complexity of the transformation is only limited by the code you write.</span></span>

![][10]

<span data-ttu-id="ec092-328">**samlSecurityTokenRequriement mapping**.</span><span class="sxs-lookup"><span data-stu-id="ec092-328">**samlSecurityTokenRequriement mapping**.</span></span> <span data-ttu-id="ec092-329">In this implementation you use the samlSecurityTokenRequirement configuration in web.config to tell WIF which claim types behave as if they were role claim types.</span><span class="sxs-lookup"><span data-stu-id="ec092-329">In this implementation you use the samlSecurityTokenRequirement configuration in web.config to tell WIF which claim types behave as if they were role claim types.</span></span> <span data-ttu-id="ec092-330">For example, if the token carries a claim of group type, you can map it to role claim type.</span><span class="sxs-lookup"><span data-stu-id="ec092-330">For example, if the token carries a claim of group type, you can map it to role claim type.</span></span> <span data-ttu-id="ec092-331">You can achieve only simple mappings using this approach.</span><span class="sxs-lookup"><span data-stu-id="ec092-331">You can achieve only simple mappings using this approach.</span></span>

![][11]

<span data-ttu-id="ec092-332">**Custom RoleManager.**</span><span class="sxs-lookup"><span data-stu-id="ec092-332">**Custom RoleManager.**</span></span> <span data-ttu-id="ec092-333">In this implementation you implement custom RoleManger.</span><span class="sxs-lookup"><span data-stu-id="ec092-333">In this implementation you implement custom RoleManger.</span></span> <span data-ttu-id="ec092-334">WIF is used to inspect the incoming claims when implementing custom RoleManager interface methods such as GetAllRoles().</span><span class="sxs-lookup"><span data-stu-id="ec092-334">WIF is used to inspect the incoming claims when implementing custom RoleManager interface methods such as GetAllRoles().</span></span>

![][12]

<span data-ttu-id="ec092-335">Refer to the following resources to implement this scenario:</span><span class="sxs-lookup"><span data-stu-id="ec092-335">Refer to the following resources to implement this scenario:</span></span>

* [<span data-ttu-id="ec092-336">How To: Implement Role Based Access Control (RBAC) in a Claims-Aware ASP.NET Application Using WIF and ACS</span><span class="sxs-lookup"><span data-stu-id="ec092-336">How To: Implement Role Based Access Control (RBAC) in a Claims-Aware ASP.NET Application Using WIF and ACS</span></span>](http://msdn.microsoft.com/library/gg185914.aspx)
* [<span data-ttu-id="ec092-337">How To: Implement Token Transformation Logic Using Rules</span><span class="sxs-lookup"><span data-stu-id="ec092-337">How To: Implement Token Transformation Logic Using Rules</span></span>](http://msdn.microsoft.com/library/gg185955.aspx)
* [<span data-ttu-id="ec092-338">Authorization With RoleManager For Claims Aware (WIF) ASP.NET Web Applications</span><span class="sxs-lookup"><span data-stu-id="ec092-338">Authorization With RoleManager For Claims Aware (WIF) ASP.NET Web Applications</span></span>](http://blogs.msdn.com/b/alikl/archive/2010/11/18/authorization-with-rolemanager-for-claims-aware-wif-asp-net-web-applications.aspx)
* <span data-ttu-id="ec092-339">Code Sample: Using Claims In IsInRole in [Windows Identity Foundation SDK](http://www.microsoft.com/downloads/details.aspx?FamilyID=c148b2df-c7af-46bb-9162-2c9422208504)</span><span class="sxs-lookup"><span data-stu-id="ec092-339">Code Sample: Using Claims In IsInRole in [Windows Identity Foundation SDK](http://www.microsoft.com/downloads/details.aspx?FamilyID=c148b2df-c7af-46bb-9162-2c9422208504)</span></span>

### <a name="claims-based-authorization-in-claims-aware-applications-and-services"></a><span data-ttu-id="ec092-340">Claims-Based Authorization In Claims-Aware Applications and Services</span><span class="sxs-lookup"><span data-stu-id="ec092-340">Claims-Based Authorization In Claims-Aware Applications and Services</span></span>
<span data-ttu-id="ec092-341">In this scenario you need to implement complex authorization logic in your web application or service and the IsInRole() method is not satisfactory for your authorization needs.</span><span class="sxs-lookup"><span data-stu-id="ec092-341">In this scenario you need to implement complex authorization logic in your web application or service and the IsInRole() method is not satisfactory for your authorization needs.</span></span> <span data-ttu-id="ec092-342">If your authorization approach relies on roles then consider implementing role-based access control outlined in previous section.</span><span class="sxs-lookup"><span data-stu-id="ec092-342">If your authorization approach relies on roles then consider implementing role-based access control outlined in previous section.</span></span>

<span data-ttu-id="ec092-343">Use ClaimsAuthorizationManager as the WIF extensibility point.</span><span class="sxs-lookup"><span data-stu-id="ec092-343">Use ClaimsAuthorizationManager as the WIF extensibility point.</span></span>
<span data-ttu-id="ec092-344">ClaimsAuthorizationManager allows external access check calls so that your application code looks cleaner and more maintainable than when access checks implemented in the application's code.</span><span class="sxs-lookup"><span data-stu-id="ec092-344">ClaimsAuthorizationManager allows external access check calls so that your application code looks cleaner and more maintainable than when access checks implemented in the application's code.</span></span>

![][13]

<span data-ttu-id="ec092-345">Refer to the following resources to implement this scenario:</span><span class="sxs-lookup"><span data-stu-id="ec092-345">Refer to the following resources to implement this scenario:</span></span>

* [<span data-ttu-id="ec092-346">How To: Implement Token Transformation Logic Using Rules</span><span class="sxs-lookup"><span data-stu-id="ec092-346">How To: Implement Token Transformation Logic Using Rules</span></span>](http://msdn.microsoft.com/library/gg185955.aspx)
* [<span data-ttu-id="ec092-347">How To: Implement Claims Authorization in a Claims-Aware ASP.NET Application Using WIF and ACS</span><span class="sxs-lookup"><span data-stu-id="ec092-347">How To: Implement Claims Authorization in a Claims-Aware ASP.NET Application Using WIF and ACS</span></span>](http://msdn.microsoft.com/library/gg185907.aspx)
* <span data-ttu-id="ec092-348">Code Sample: Claims based Authorization in [Windows Identity Foundation SDK](http://www.microsoft.com/downloads/details.aspx?FamilyID=c148b2df-c7af-46bb-9162-2c9422208504)</span><span class="sxs-lookup"><span data-stu-id="ec092-348">Code Sample: Claims based Authorization in [Windows Identity Foundation SDK](http://www.microsoft.com/downloads/details.aspx?FamilyID=c148b2df-c7af-46bb-9162-2c9422208504)</span></span>

## <a name="azure-storage-service-identity-and-access-scenarios"></a><span data-ttu-id="ec092-349">Azure Storage Service Identity and Access Scenarios</span><span class="sxs-lookup"><span data-stu-id="ec092-349">Azure Storage Service Identity and Access Scenarios</span></span>
<span data-ttu-id="ec092-350">In this scenario you need to securely share access to Azure storage blobs and containers.</span><span class="sxs-lookup"><span data-stu-id="ec092-350">In this scenario you need to securely share access to Azure storage blobs and containers.</span></span>

<span data-ttu-id="ec092-351">Use Shared Access Signatures.</span><span class="sxs-lookup"><span data-stu-id="ec092-351">Use Shared Access Signatures.</span></span> <span data-ttu-id="ec092-352">To access your storage service account from your own application, use the shared hash that is available through Azure portal when you configure and manage your storage service accounts.</span><span class="sxs-lookup"><span data-stu-id="ec092-352">To access your storage service account from your own application, use the shared hash that is available through Azure portal when you configure and manage your storage service accounts.</span></span> <span data-ttu-id="ec092-353">When you want to give someone else access to the blobs and containers in your storage service account use Shared Access Signatures URL's.</span><span class="sxs-lookup"><span data-stu-id="ec092-353">When you want to give someone else access to the blobs and containers in your storage service account use Shared Access Signatures URL's.</span></span>

<span data-ttu-id="ec092-354">Pay special attention to securely managing the information to avoid its exposure; also, pay special attention to the lifetime of the Shared Access Signatures.</span><span class="sxs-lookup"><span data-stu-id="ec092-354">Pay special attention to securely managing the information to avoid its exposure; also, pay special attention to the lifetime of the Shared Access Signatures.</span></span>

![][14]

<span data-ttu-id="ec092-355">Refer to the following resources to solve this scenario</span><span class="sxs-lookup"><span data-stu-id="ec092-355">Refer to the following resources to solve this scenario</span></span>

* [<span data-ttu-id="ec092-356">Managing Access to Blobs and Containers</span><span class="sxs-lookup"><span data-stu-id="ec092-356">Managing Access to Blobs and Containers</span></span>](http://msdn.microsoft.com/library/ee393343.aspx)
* [<span data-ttu-id="ec092-357">New Storage Feature: Shared Access Signatures</span><span class="sxs-lookup"><span data-stu-id="ec092-357">New Storage Feature: Shared Access Signatures</span></span>](http://blog.smarx.com/posts/new-storage-feature-signed-access-signatures)
* [<span data-ttu-id="ec092-358">Shared Access Signatures Are Easy These Days</span><span class="sxs-lookup"><span data-stu-id="ec092-358">Shared Access Signatures Are Easy These Days</span></span>](http://blog.smarx.com/posts/shared-access-signatures-are-easy-these-days)

## <a name="azure-sql-database-identity-and-access-scenarios"></a><span data-ttu-id="ec092-359">Azure SQL Database Identity and Access Scenarios</span><span class="sxs-lookup"><span data-stu-id="ec092-359">Azure SQL Database Identity and Access Scenarios</span></span>
<span data-ttu-id="ec092-360">SQL Database only supports SQL Server Authentication.</span><span class="sxs-lookup"><span data-stu-id="ec092-360">SQL Database only supports SQL Server Authentication.</span></span> <span data-ttu-id="ec092-361">Windows Authentication (integrated security) is not supported.</span><span class="sxs-lookup"><span data-stu-id="ec092-361">Windows Authentication (integrated security) is not supported.</span></span> <span data-ttu-id="ec092-362">Users must provide credentials (login and password) every time they connect to a SQL Database.</span><span class="sxs-lookup"><span data-stu-id="ec092-362">Users must provide credentials (login and password) every time they connect to a SQL Database.</span></span> <span data-ttu-id="ec092-363">Pay special attention when managing your username and password to avoid information disclosure.</span><span class="sxs-lookup"><span data-stu-id="ec092-363">Pay special attention when managing your username and password to avoid information disclosure.</span></span>

![][15]

<span data-ttu-id="ec092-364">To solve this scenario, refer to the following Help topic:</span><span class="sxs-lookup"><span data-stu-id="ec092-364">To solve this scenario, refer to the following Help topic:</span></span><br/>
[<span data-ttu-id="ec092-365">Azure SQL Database Development: How-to Topics</span><span class="sxs-lookup"><span data-stu-id="ec092-365">Azure SQL Database Development: How-to Topics</span></span>](http://msdn.microsoft.com/library/azure/ee621787.aspx)

<span data-ttu-id="ec092-366">Or refer to one of its many child topics, some of which are:</span><span class="sxs-lookup"><span data-stu-id="ec092-366">Or refer to one of its many child topics, some of which are:</span></span>

* [<span data-ttu-id="ec092-367">How to: Connect to SQL Database Using sqlcmd</span><span class="sxs-lookup"><span data-stu-id="ec092-367">How to: Connect to SQL Database Using sqlcmd</span></span>](http://msdn.microsoft.com/library/azure/ee336280.aspx)
* [<span data-ttu-id="ec092-368">Code sample: Retry logic for connecting to Azure SQL Database with ADO.NET</span><span class="sxs-lookup"><span data-stu-id="ec092-368">Code sample: Retry logic for connecting to Azure SQL Database with ADO.NET</span></span>](http://msdn.microsoft.com/library/azure/ee336243.aspx)
* [<span data-ttu-id="ec092-369">How to: Connect to SQL Database Using PHP</span><span class="sxs-lookup"><span data-stu-id="ec092-369">How to: Connect to SQL Database Using PHP</span></span>](http://msdn.microsoft.com/library/azure/ff394110.aspx)
* [<span data-ttu-id="ec092-370">How to: Connect to SQL Database Using JDBC</span><span class="sxs-lookup"><span data-stu-id="ec092-370">How to: Connect to SQL Database Using JDBC</span></span>](http://msdn.microsoft.com/library/azure/gg715284.aspx)

<span data-ttu-id="ec092-371">Or refer to:</span><span class="sxs-lookup"><span data-stu-id="ec092-371">Or refer to:</span></span><br/>
[<span data-ttu-id="ec092-372">Azure SQL Database Security Guidelines and Limitations</span><span class="sxs-lookup"><span data-stu-id="ec092-372">Azure SQL Database Security Guidelines and Limitations</span></span>](http://msdn.microsoft.com/library/azure/ff394108.aspx#authentication)

## <a name="azure-service-bus-identity-and-access-scenarios"></a><span data-ttu-id="ec092-373">Azure Service Bus Identity and Access Scenarios</span><span class="sxs-lookup"><span data-stu-id="ec092-373">Azure Service Bus Identity and Access Scenarios</span></span>
<span data-ttu-id="ec092-374">The Service Bus and Azure AD Access Control have a special relationship in that each Service Bus service namespace is paired with a matching Access Control service namespace of the same name, with the suffix "-sb".</span><span class="sxs-lookup"><span data-stu-id="ec092-374">The Service Bus and Azure AD Access Control have a special relationship in that each Service Bus service namespace is paired with a matching Access Control service namespace of the same name, with the suffix "-sb".</span></span> <span data-ttu-id="ec092-375">The reason for this special relationship is in the way that Service Bus and Access Control manage their mutual trust relationship and the associated cryptographic secrets.</span><span class="sxs-lookup"><span data-stu-id="ec092-375">The reason for this special relationship is in the way that Service Bus and Access Control manage their mutual trust relationship and the associated cryptographic secrets.</span></span> <span data-ttu-id="ec092-376">Refer to the resources listed below for more details.</span><span class="sxs-lookup"><span data-stu-id="ec092-376">Refer to the resources listed below for more details.</span></span>

![][16]

<span data-ttu-id="ec092-377">Refer to the following resources to solve this scenario:</span><span class="sxs-lookup"><span data-stu-id="ec092-377">Refer to the following resources to solve this scenario:</span></span>

* <span data-ttu-id="ec092-378">[Securing Service Bus with ACS](http://channel9.msdn.com/posts/Securing-Service-Bus-with-ACS) (Video)</span><span class="sxs-lookup"><span data-stu-id="ec092-378">[Securing Service Bus with ACS](http://channel9.msdn.com/posts/Securing-Service-Bus-with-ACS) (Video)</span></span>
* <span data-ttu-id="ec092-379">[Securing Service Bus with ACS](https://skydrive.live.com/view.aspx?cid=123CCD2A7AB10107&resid=123CCD2A7AB10107%211849) (Slides)</span><span class="sxs-lookup"><span data-stu-id="ec092-379">[Securing Service Bus with ACS](https://skydrive.live.com/view.aspx?cid=123CCD2A7AB10107&resid=123CCD2A7AB10107%211849) (Slides)</span></span>
* [<span data-ttu-id="ec092-380">Service Bus Authentication and Authorization with the Access Control Service</span><span class="sxs-lookup"><span data-stu-id="ec092-380">Service Bus Authentication and Authorization with the Access Control Service</span></span>](http://msdn.microsoft.com/library/hh403962.aspx)

## <a name="in-memory-cache-identity-and-access-scenarios"></a><span data-ttu-id="ec092-381">In-Memory Cache Identity and Access Scenarios</span><span class="sxs-lookup"><span data-stu-id="ec092-381">In-Memory Cache Identity and Access Scenarios</span></span>
<span data-ttu-id="ec092-382">In-memory cache (formerly known as Azure Cache) relies on Azure AD Access Control for authentication.</span><span class="sxs-lookup"><span data-stu-id="ec092-382">In-memory cache (formerly known as Azure Cache) relies on Azure AD Access Control for authentication.</span></span> <span data-ttu-id="ec092-383">It uses shared keys available through the management portal.</span><span class="sxs-lookup"><span data-stu-id="ec092-383">It uses shared keys available through the management portal.</span></span> <span data-ttu-id="ec092-384">Use the keys in your code or configuration files when accessing the cache.</span><span class="sxs-lookup"><span data-stu-id="ec092-384">Use the keys in your code or configuration files when accessing the cache.</span></span> <span data-ttu-id="ec092-385">Be sure to store the keys securely so as to avoid information disclosure.</span><span class="sxs-lookup"><span data-stu-id="ec092-385">Be sure to store the keys securely so as to avoid information disclosure.</span></span>

![][17]

<span data-ttu-id="ec092-386">Refer to the following resources to solve this scenario:</span><span class="sxs-lookup"><span data-stu-id="ec092-386">Refer to the following resources to solve this scenario:</span></span>

* [<span data-ttu-id="ec092-387">How to: Configure a Cache Client Programmatically for Azure Caching</span><span class="sxs-lookup"><span data-stu-id="ec092-387">How to: Configure a Cache Client Programmatically for Azure Caching</span></span>](http://msdn.microsoft.com/library/windowsazure/gg618003.aspx)
* [<span data-ttu-id="ec092-388">How to: Configure a Cache Client using the Application Configuration File for Azure Caching</span><span class="sxs-lookup"><span data-stu-id="ec092-388">How to: Configure a Cache Client using the Application Configuration File for Azure Caching</span></span>](http://msdn.microsoft.com/library/windowsazure/gg278346.aspx)
* <span data-ttu-id="ec092-389">[Azure Service Bus and Caching Samples](http://msdn.microsoft.com/library/ee706741.aspx) (Caching Samples section)</span><span class="sxs-lookup"><span data-stu-id="ec092-389">[Azure Service Bus and Caching Samples](http://msdn.microsoft.com/library/ee706741.aspx) (Caching Samples section)</span></span>

## <a name="azure-marketplace-identity-and-access-scenarios"></a><span data-ttu-id="ec092-390">Azure Marketplace Identity and Access Scenarios</span><span class="sxs-lookup"><span data-stu-id="ec092-390">Azure Marketplace Identity and Access Scenarios</span></span>
<span data-ttu-id="ec092-391">Every access to an Azure Marketplace dataset, whether free or paid, must authenticate the user before access is granted.</span><span class="sxs-lookup"><span data-stu-id="ec092-391">Every access to an Azure Marketplace dataset, whether free or paid, must authenticate the user before access is granted.</span></span> <span data-ttu-id="ec092-392">When you create an application the authentication process must be included in your code.</span><span class="sxs-lookup"><span data-stu-id="ec092-392">When you create an application the authentication process must be included in your code.</span></span> <span data-ttu-id="ec092-393">Consider the following common scenarios:</span><span class="sxs-lookup"><span data-stu-id="ec092-393">Consider the following common scenarios:</span></span>

### <a name="i-access-my-dataset"></a><span data-ttu-id="ec092-394">I Access My Dataset</span><span class="sxs-lookup"><span data-stu-id="ec092-394">I Access My Dataset</span></span>
<span data-ttu-id="ec092-395">In this scenario you are building an application that consumes datasets in your Marketplace subscription.</span><span class="sxs-lookup"><span data-stu-id="ec092-395">In this scenario you are building an application that consumes datasets in your Marketplace subscription.</span></span> <span data-ttu-id="ec092-396">You are the user of the application.</span><span class="sxs-lookup"><span data-stu-id="ec092-396">You are the user of the application.</span></span>
<span data-ttu-id="ec092-397">The application can be deployed either to Azure, on-premises, or Marketplace.</span><span class="sxs-lookup"><span data-stu-id="ec092-397">The application can be deployed either to Azure, on-premises, or Marketplace.</span></span>

<span data-ttu-id="ec092-398">Use the shared key that's available through your Marketplace subscription.</span><span class="sxs-lookup"><span data-stu-id="ec092-398">Use the shared key that's available through your Marketplace subscription.</span></span> <span data-ttu-id="ec092-399">You obtain the shared key using the Marketplace portal.</span><span class="sxs-lookup"><span data-stu-id="ec092-399">You obtain the shared key using the Marketplace portal.</span></span>

![][18]

<span data-ttu-id="ec092-400">Refer to the following resources to solve this scenario:</span><span class="sxs-lookup"><span data-stu-id="ec092-400">Refer to the following resources to solve this scenario:</span></span>

* [<span data-ttu-id="ec092-401">Use HTTP Basic Auth in your Marketplace App</span><span class="sxs-lookup"><span data-stu-id="ec092-401">Use HTTP Basic Auth in your Marketplace App</span></span>](http://msdn.microsoft.com/library/gg193417.aspx)

### <a name="users-access-my-datasets"></a><span data-ttu-id="ec092-402">Users Access My Datasets</span><span class="sxs-lookup"><span data-stu-id="ec092-402">Users Access My Datasets</span></span>
<span data-ttu-id="ec092-403">In this scenario you are building an application that allows users to access your dataset.</span><span class="sxs-lookup"><span data-stu-id="ec092-403">In this scenario you are building an application that allows users to access your dataset.</span></span> <span data-ttu-id="ec092-404">The application can be deployed on Azure, on-premises, or Marketplace.</span><span class="sxs-lookup"><span data-stu-id="ec092-404">The application can be deployed on Azure, on-premises, or Marketplace.</span></span>

<span data-ttu-id="ec092-405">To solve this scenario, use OAuth delegation.</span><span class="sxs-lookup"><span data-stu-id="ec092-405">To solve this scenario, use OAuth delegation.</span></span> <span data-ttu-id="ec092-406">Users will be prompted to provide their Live ID / Microsoft Account credentials, and then they will be taken through the consent process.</span><span class="sxs-lookup"><span data-stu-id="ec092-406">Users will be prompted to provide their Live ID / Microsoft Account credentials, and then they will be taken through the consent process.</span></span>

![][19]

<span data-ttu-id="ec092-407">Refer to the following resources to solve this scenario:</span><span class="sxs-lookup"><span data-stu-id="ec092-407">Refer to the following resources to solve this scenario:</span></span>

* [<span data-ttu-id="ec092-408">OAuth Web Client Example</span><span class="sxs-lookup"><span data-stu-id="ec092-408">OAuth Web Client Example</span></span>](http://go.microsoft.com/fwlink/?LinkId=219162)
* [<span data-ttu-id="ec092-409">OAuth Rich Client Example</span><span class="sxs-lookup"><span data-stu-id="ec092-409">OAuth Rich Client Example</span></span>](http://go.microsoft.com/fwlink/?LinkId=219163)

### <a name="application-access-marketplace-api"></a><span data-ttu-id="ec092-410">Application Access Marketplace API</span><span class="sxs-lookup"><span data-stu-id="ec092-410">Application Access Marketplace API</span></span>
<span data-ttu-id="ec092-411">In this scenario you are building an application that accesses the Marketplace API.</span><span class="sxs-lookup"><span data-stu-id="ec092-411">In this scenario you are building an application that accesses the Marketplace API.</span></span> <span data-ttu-id="ec092-412">The Marketplace API requires authentication to successfully accomplish calls to it.</span><span class="sxs-lookup"><span data-stu-id="ec092-412">The Marketplace API requires authentication to successfully accomplish calls to it.</span></span> <span data-ttu-id="ec092-413">The application is deployed to Azure Marketplace.</span><span class="sxs-lookup"><span data-stu-id="ec092-413">The application is deployed to Azure Marketplace.</span></span>

![][20]

<span data-ttu-id="ec092-414">Consult the Marketplace publishing kit for details about the authentication implementation.</span><span class="sxs-lookup"><span data-stu-id="ec092-414">Consult the Marketplace publishing kit for details about the authentication implementation.</span></span>

<span data-ttu-id="ec092-415">Refer to the following resources to solve this scenario:</span><span class="sxs-lookup"><span data-stu-id="ec092-415">Refer to the following resources to solve this scenario:</span></span>

* [<span data-ttu-id="ec092-416">Download the App Publishing Kit</span><span class="sxs-lookup"><span data-stu-id="ec092-416">Download the App Publishing Kit</span></span>](http://go.microsoft.com/fwlink/?LinkId=221323)
* [<span data-ttu-id="ec092-417">Introduction to Azure Marketplace for Applications</span><span class="sxs-lookup"><span data-stu-id="ec092-417">Introduction to Azure Marketplace for Applications</span></span>](https://datamarket.azure.com/)

## <a name="security-knobs"></a><span data-ttu-id="ec092-418">Security Knobs</span><span class="sxs-lookup"><span data-stu-id="ec092-418">Security Knobs</span></span>
<span data-ttu-id="ec092-419">This section outlines security knobs for Windows Identity Foundation and Azure AD Access Control.</span><span class="sxs-lookup"><span data-stu-id="ec092-419">This section outlines security knobs for Windows Identity Foundation and Azure AD Access Control.</span></span> <span data-ttu-id="ec092-420">Use it as a basic security checklist for these technologies when designing and deploying your application.</span><span class="sxs-lookup"><span data-stu-id="ec092-420">Use it as a basic security checklist for these technologies when designing and deploying your application.</span></span>

### <a name="windows-identity-foundation"></a><span data-ttu-id="ec092-421">Windows Identity Foundation</span><span class="sxs-lookup"><span data-stu-id="ec092-421">Windows Identity Foundation</span></span>
<span data-ttu-id="ec092-422">The following are key security knobs of WIF.</span><span class="sxs-lookup"><span data-stu-id="ec092-422">The following are key security knobs of WIF.</span></span> <span data-ttu-id="ec092-423">The information below is a digest from [WIF Design Considerations](http://msdn.microsoft.com/library/ee517298.aspx) and [Windows Identity Foundation (WIF) Security for ASP.NET Web Applications - Threats & Countermeasures](http://blogs.msdn.com/b/alikl/archive/2010/12/02/windows-identity-foundation-wif-security-for-asp-net-web-applications-threats-amp-countermeasures.aspx) .</span><span class="sxs-lookup"><span data-stu-id="ec092-423">The information below is a digest from [WIF Design Considerations](http://msdn.microsoft.com/library/ee517298.aspx) and [Windows Identity Foundation (WIF) Security for ASP.NET Web Applications - Threats & Countermeasures](http://blogs.msdn.com/b/alikl/archive/2010/12/02/windows-identity-foundation-wif-security-for-asp-net-web-applications-threats-amp-countermeasures.aspx) .</span></span>

* <span data-ttu-id="ec092-424">**IssuerNameRegistry**.</span><span class="sxs-lookup"><span data-stu-id="ec092-424">**IssuerNameRegistry**.</span></span> <span data-ttu-id="ec092-425">Specifies trusted Security Token Services (STS's).</span><span class="sxs-lookup"><span data-stu-id="ec092-425">Specifies trusted Security Token Services (STS's).</span></span> <span data-ttu-id="ec092-426">Make sure only trusted STS are listed.</span><span class="sxs-lookup"><span data-stu-id="ec092-426">Make sure only trusted STS are listed.</span></span>
* <span data-ttu-id="ec092-427">**cookieHandler requireSsl="true"**.</span><span class="sxs-lookup"><span data-stu-id="ec092-427">**cookieHandler requireSsl="true"**.</span></span> <span data-ttu-id="ec092-428">Specifies whether session cookies transferred over the SSL protocol.</span><span class="sxs-lookup"><span data-stu-id="ec092-428">Specifies whether session cookies transferred over the SSL protocol.</span></span>
* <span data-ttu-id="ec092-429">**wsFederation's requireHttps="true"**.</span><span class="sxs-lookup"><span data-stu-id="ec092-429">**wsFederation's requireHttps="true"**.</span></span> <span data-ttu-id="ec092-430">Specifies whether the federation protocol communication with identity provider performed over SSL protocol.</span><span class="sxs-lookup"><span data-stu-id="ec092-430">Specifies whether the federation protocol communication with identity provider performed over SSL protocol.</span></span>
* <span data-ttu-id="ec092-431">**tokenReplayDetection enabled="true"**.</span><span class="sxs-lookup"><span data-stu-id="ec092-431">**tokenReplayDetection enabled="true"**.</span></span> <span data-ttu-id="ec092-432">Specifies whether token replay detection feature is enabled.</span><span class="sxs-lookup"><span data-stu-id="ec092-432">Specifies whether token replay detection feature is enabled.</span></span> <span data-ttu-id="ec092-433">Be aware that this feature creates server affinity as it manages local copies of used tokens.</span><span class="sxs-lookup"><span data-stu-id="ec092-433">Be aware that this feature creates server affinity as it manages local copies of used tokens.</span></span>
* <span data-ttu-id="ec092-434">**audienceUris**.</span><span class="sxs-lookup"><span data-stu-id="ec092-434">**audienceUris**.</span></span> <span data-ttu-id="ec092-435">Specifies intended audience of the token.</span><span class="sxs-lookup"><span data-stu-id="ec092-435">Specifies intended audience of the token.</span></span> <span data-ttu-id="ec092-436">If your application receives a token that was not intended for your app it will be rejected by WIF.</span><span class="sxs-lookup"><span data-stu-id="ec092-436">If your application receives a token that was not intended for your app it will be rejected by WIF.</span></span>
* <span data-ttu-id="ec092-437">**requestValidation** and **httpRuntime requestValidationType**.</span><span class="sxs-lookup"><span data-stu-id="ec092-437">**requestValidation** and **httpRuntime requestValidationType**.</span></span>
  <span data-ttu-id="ec092-438">Enables/disables ASP.NET validation feature.</span><span class="sxs-lookup"><span data-stu-id="ec092-438">Enables/disables ASP.NET validation feature.</span></span> <span data-ttu-id="ec092-439">See guidance as outlined in [Windows Identity Foundation (WIF): A Potentially Dangerous Request.Form Value Was Detected from the Client](http://social.technet.microsoft.com/wiki/contents/articles/1725.windows-identity-foundation-wif-a-potentially-dangerous-request-form-value-was-detected-from-the-client-wresult-t-requestsecurityto.aspx)</span><span class="sxs-lookup"><span data-stu-id="ec092-439">See guidance as outlined in [Windows Identity Foundation (WIF): A Potentially Dangerous Request.Form Value Was Detected from the Client](http://social.technet.microsoft.com/wiki/contents/articles/1725.windows-identity-foundation-wif-a-potentially-dangerous-request-form-value-was-detected-from-the-client-wresult-t-requestsecurityto.aspx)</span></span>

### <a name="azure-ad-access-control"></a><span data-ttu-id="ec092-440">Azure AD Access Control</span><span class="sxs-lookup"><span data-stu-id="ec092-440">Azure AD Access Control</span></span>
<span data-ttu-id="ec092-441">Consider the following security knobs in Azure AD Access Control deployment.</span><span class="sxs-lookup"><span data-stu-id="ec092-441">Consider the following security knobs in Azure AD Access Control deployment.</span></span> <span data-ttu-id="ec092-442">The information below is a digest from [ACS Security Guidelines](http://msdn.microsoft.com/library/gg185962.aspx) and [Certificates and Keys Management Guidelines](http://msdn.microsoft.com/library/hh204521.aspx).</span><span class="sxs-lookup"><span data-stu-id="ec092-442">The information below is a digest from [ACS Security Guidelines](http://msdn.microsoft.com/library/gg185962.aspx) and [Certificates and Keys Management Guidelines](http://msdn.microsoft.com/library/hh204521.aspx).</span></span>

* <span data-ttu-id="ec092-443">**STS tokens expiration**.</span><span class="sxs-lookup"><span data-stu-id="ec092-443">**STS tokens expiration**.</span></span> <span data-ttu-id="ec092-444">Use Azure AD Access Control management portal to set aggressive token expiration.</span><span class="sxs-lookup"><span data-stu-id="ec092-444">Use Azure AD Access Control management portal to set aggressive token expiration.</span></span>
* <span data-ttu-id="ec092-445">**Data validation when using the Error URL feature**.</span><span class="sxs-lookup"><span data-stu-id="ec092-445">**Data validation when using the Error URL feature**.</span></span> <span data-ttu-id="ec092-446">Azure AD Access Control Error URL feature requires anonymous access to the app's page where it sends error messages.</span><span class="sxs-lookup"><span data-stu-id="ec092-446">Azure AD Access Control Error URL feature requires anonymous access to the app's page where it sends error messages.</span></span> <span data-ttu-id="ec092-447">Assume all data coming to this page as dangerous from untrusted source.</span><span class="sxs-lookup"><span data-stu-id="ec092-447">Assume all data coming to this page as dangerous from untrusted source.</span></span>
* <span data-ttu-id="ec092-448">**Encrypting tokens for highly sensitive scenarios**.</span><span class="sxs-lookup"><span data-stu-id="ec092-448">**Encrypting tokens for highly sensitive scenarios**.</span></span> <span data-ttu-id="ec092-449">To mitigate threat of information disclosure that available in the token consider encrypting the tokens.</span><span class="sxs-lookup"><span data-stu-id="ec092-449">To mitigate threat of information disclosure that available in the token consider encrypting the tokens.</span></span>
* <span data-ttu-id="ec092-450">**Encrypting cookies using RSA when deploying to Azure**.</span><span class="sxs-lookup"><span data-stu-id="ec092-450">**Encrypting cookies using RSA when deploying to Azure**.</span></span>
  <span data-ttu-id="ec092-451">WIF encrypts cookies using DPAPI by default.</span><span class="sxs-lookup"><span data-stu-id="ec092-451">WIF encrypts cookies using DPAPI by default.</span></span> <span data-ttu-id="ec092-452">It creates server affinity and may result in exceptions when deployed to web farm and Azure environments.</span><span class="sxs-lookup"><span data-stu-id="ec092-452">It creates server affinity and may result in exceptions when deployed to web farm and Azure environments.</span></span> <span data-ttu-id="ec092-453">Use RSA instead in web farm and Azure scenarios.</span><span class="sxs-lookup"><span data-stu-id="ec092-453">Use RSA instead in web farm and Azure scenarios.</span></span>
* <span data-ttu-id="ec092-454">**Token signing certificates**.</span><span class="sxs-lookup"><span data-stu-id="ec092-454">**Token signing certificates**.</span></span> <span data-ttu-id="ec092-455">Renew token signing certificates periodically to avoid denial of service.</span><span class="sxs-lookup"><span data-stu-id="ec092-455">Renew token signing certificates periodically to avoid denial of service.</span></span> <span data-ttu-id="ec092-456">Azure AD Access Control signs all security tokens it issues.</span><span class="sxs-lookup"><span data-stu-id="ec092-456">Azure AD Access Control signs all security tokens it issues.</span></span> <span data-ttu-id="ec092-457">X.509 certificates are used for signing when you build an application that consumes SAML tokens issued by ACS.</span><span class="sxs-lookup"><span data-stu-id="ec092-457">X.509 certificates are used for signing when you build an application that consumes SAML tokens issued by ACS.</span></span> <span data-ttu-id="ec092-458">When signing certificates expire you will receive errors when trying to request a token.</span><span class="sxs-lookup"><span data-stu-id="ec092-458">When signing certificates expire you will receive errors when trying to request a token.</span></span>
* <span data-ttu-id="ec092-459">**Token signing keys**.</span><span class="sxs-lookup"><span data-stu-id="ec092-459">**Token signing keys**.</span></span> <span data-ttu-id="ec092-460">Renew token signing keys periodically to avoid denial of service.</span><span class="sxs-lookup"><span data-stu-id="ec092-460">Renew token signing keys periodically to avoid denial of service.</span></span> <span data-ttu-id="ec092-461">Azure AD Access Control signs all security tokens it issues.</span><span class="sxs-lookup"><span data-stu-id="ec092-461">Azure AD Access Control signs all security tokens it issues.</span></span> <span data-ttu-id="ec092-462">256-bit symmetric signing keys are used when you build an application that consumes SWT tokens issued by ACS.</span><span class="sxs-lookup"><span data-stu-id="ec092-462">256-bit symmetric signing keys are used when you build an application that consumes SWT tokens issued by ACS.</span></span> <span data-ttu-id="ec092-463">When signing keys expire you will receive errors when trying to request a token.</span><span class="sxs-lookup"><span data-stu-id="ec092-463">When signing keys expire you will receive errors when trying to request a token.</span></span>
* <span data-ttu-id="ec092-464">**Token encryption certificates**.</span><span class="sxs-lookup"><span data-stu-id="ec092-464">**Token encryption certificates**.</span></span> <span data-ttu-id="ec092-465">Renew token encryption certificates periodically to avoid denial of service.</span><span class="sxs-lookup"><span data-stu-id="ec092-465">Renew token encryption certificates periodically to avoid denial of service.</span></span> <span data-ttu-id="ec092-466">Token encryption is required if a relying party application is a web service using proof-of-possession tokens over the WS-Trust protocol, in other cases token encryption is optional.</span><span class="sxs-lookup"><span data-stu-id="ec092-466">Token encryption is required if a relying party application is a web service using proof-of-possession tokens over the WS-Trust protocol, in other cases token encryption is optional.</span></span> <span data-ttu-id="ec092-467">When encryption certificates expire you will receive errors when trying to request a token.</span><span class="sxs-lookup"><span data-stu-id="ec092-467">When encryption certificates expire you will receive errors when trying to request a token.</span></span>
* <span data-ttu-id="ec092-468">**Token decryption certificates**.</span><span class="sxs-lookup"><span data-stu-id="ec092-468">**Token decryption certificates**.</span></span> <span data-ttu-id="ec092-469">Renew token decryption certificates periodically to avoid denial of service.</span><span class="sxs-lookup"><span data-stu-id="ec092-469">Renew token decryption certificates periodically to avoid denial of service.</span></span> <span data-ttu-id="ec092-470">Azure AD Access Control can accept encrypted tokens from WS-Federation identity providers (for example, AD FS 2.0).</span><span class="sxs-lookup"><span data-stu-id="ec092-470">Azure AD Access Control can accept encrypted tokens from WS-Federation identity providers (for example, AD FS 2.0).</span></span> <span data-ttu-id="ec092-471">An X.509 certificate hosted in Azure AD Access Control is used for decryption.</span><span class="sxs-lookup"><span data-stu-id="ec092-471">An X.509 certificate hosted in Azure AD Access Control is used for decryption.</span></span>
  <span data-ttu-id="ec092-472">When decryption certificates expire you will receive errors when trying to request a token.</span><span class="sxs-lookup"><span data-stu-id="ec092-472">When decryption certificates expire you will receive errors when trying to request a token.</span></span>
* <span data-ttu-id="ec092-473">**Service identity credentials**.</span><span class="sxs-lookup"><span data-stu-id="ec092-473">**Service identity credentials**.</span></span> <span data-ttu-id="ec092-474">Renew Service Identity credentials periodically to avoid denial of service.</span><span class="sxs-lookup"><span data-stu-id="ec092-474">Renew Service Identity credentials periodically to avoid denial of service.</span></span> <span data-ttu-id="ec092-475">Service identities use credentials that are configured globally for your Azure AD Access Control namespace that allow applications or clients to authenticate directly with Azure AD Access Control and receive a token.</span><span class="sxs-lookup"><span data-stu-id="ec092-475">Service identities use credentials that are configured globally for your Azure AD Access Control namespace that allow applications or clients to authenticate directly with Azure AD Access Control and receive a token.</span></span> <span data-ttu-id="ec092-476">There are three credential types that Azure AD Access Control service identity can be associated with: Symmetric key, Password, and X.509 certificate.</span><span class="sxs-lookup"><span data-stu-id="ec092-476">There are three credential types that Azure AD Access Control service identity can be associated with: Symmetric key, Password, and X.509 certificate.</span></span> <span data-ttu-id="ec092-477">You will start receiving exception when the credentials are expired.</span><span class="sxs-lookup"><span data-stu-id="ec092-477">You will start receiving exception when the credentials are expired.</span></span>
* <span data-ttu-id="ec092-478">**Azure AD Access Control Management Service account credentials**.</span><span class="sxs-lookup"><span data-stu-id="ec092-478">**Azure AD Access Control Management Service account credentials**.</span></span> <span data-ttu-id="ec092-479">Renew Management service credentials periodically to avoid denial of service.</span><span class="sxs-lookup"><span data-stu-id="ec092-479">Renew Management service credentials periodically to avoid denial of service.</span></span> <span data-ttu-id="ec092-480">The Azure AD Access Control Management Service is a key component that allows you to programmatically manage and configure settings for your Azure AD Access Control namespace.</span><span class="sxs-lookup"><span data-stu-id="ec092-480">The Azure AD Access Control Management Service is a key component that allows you to programmatically manage and configure settings for your Azure AD Access Control namespace.</span></span> <span data-ttu-id="ec092-481">There are three credential types that the Management service account can be associated with.</span><span class="sxs-lookup"><span data-stu-id="ec092-481">There are three credential types that the Management service account can be associated with.</span></span> <span data-ttu-id="ec092-482">These are symmetric key, password, and an X.509 certificate.</span><span class="sxs-lookup"><span data-stu-id="ec092-482">These are symmetric key, password, and an X.509 certificate.</span></span> <span data-ttu-id="ec092-483">You will start receiving exception when the credentials are expired.</span><span class="sxs-lookup"><span data-stu-id="ec092-483">You will start receiving exception when the credentials are expired.</span></span>
* <span data-ttu-id="ec092-484">**WS-Federation identity provider signing and encryption certificates**.</span><span class="sxs-lookup"><span data-stu-id="ec092-484">**WS-Federation identity provider signing and encryption certificates**.</span></span> <span data-ttu-id="ec092-485">Query for WS-Federation identity provider's certificate validity to avoid denial of service.</span><span class="sxs-lookup"><span data-stu-id="ec092-485">Query for WS-Federation identity provider's certificate validity to avoid denial of service.</span></span> <span data-ttu-id="ec092-486">WS-Federation identity provider certificate is available through its metadata.</span><span class="sxs-lookup"><span data-stu-id="ec092-486">WS-Federation identity provider certificate is available through its metadata.</span></span>
  <span data-ttu-id="ec092-487">When configuring WS-Federation identity provider, such as AD FS, the WS-Federation signing certificate is configured through WS-Federation metadata available via URL or as a file.</span><span class="sxs-lookup"><span data-stu-id="ec092-487">When configuring WS-Federation identity provider, such as AD FS, the WS-Federation signing certificate is configured through WS-Federation metadata available via URL or as a file.</span></span> <span data-ttu-id="ec092-488">After the WS-Federation identity provider configured use Azure AD Access Control management service to query it for its certificates validness.</span><span class="sxs-lookup"><span data-stu-id="ec092-488">After the WS-Federation identity provider configured use Azure AD Access Control management service to query it for its certificates validness.</span></span> <span data-ttu-id="ec092-489">When the certificate expires you will start receiving exceptions.</span><span class="sxs-lookup"><span data-stu-id="ec092-489">When the certificate expires you will start receiving exceptions.</span></span>

## <a name="shared-hosting-using-azure-websites"></a><span data-ttu-id="ec092-490">Shared Hosting Using Azure Websites</span><span class="sxs-lookup"><span data-stu-id="ec092-490">Shared Hosting Using Azure Websites</span></span>
<span data-ttu-id="ec092-491">All scenarios and solutions outlined in this topic are valid when the application is hosted on Azure Websites.</span><span class="sxs-lookup"><span data-stu-id="ec092-491">All scenarios and solutions outlined in this topic are valid when the application is hosted on Azure Websites.</span></span>

## <a name="azure-virtual-machines"></a><span data-ttu-id="ec092-492">Azure Virtual Machines</span><span class="sxs-lookup"><span data-stu-id="ec092-492">Azure Virtual Machines</span></span>
<span data-ttu-id="ec092-493">All scenarios and solutions outlined in this topic are valid when the application is hosted on Azure Virtual Machines.</span><span class="sxs-lookup"><span data-stu-id="ec092-493">All scenarios and solutions outlined in this topic are valid when the application is hosted on Azure Virtual Machines.</span></span>

## <a name="resources"></a><span data-ttu-id="ec092-494">Resources</span><span class="sxs-lookup"><span data-stu-id="ec092-494">Resources</span></span>
* [<span data-ttu-id="ec092-495">Identity Developer Training Kit</span><span class="sxs-lookup"><span data-stu-id="ec092-495">Identity Developer Training Kit</span></span>](http://go.microsoft.com/fwlink/?LinkId=214555)
* [<span data-ttu-id="ec092-496">MSDN-hosted Identity Developer Training Course</span><span class="sxs-lookup"><span data-stu-id="ec092-496">MSDN-hosted Identity Developer Training Course</span></span>](http://go.microsoft.com/fwlink/?LinkId=214561)
* [<span data-ttu-id="ec092-497">A Guide to Claims-based Identity and Access Control</span><span class="sxs-lookup"><span data-stu-id="ec092-497">A Guide to Claims-based Identity and Access Control</span></span>](http://go.microsoft.com/fwlink/?LinkId=214562)
* [<span data-ttu-id="ec092-498">Access Control Service</span><span class="sxs-lookup"><span data-stu-id="ec092-498">Access Control Service</span></span>](http://msdn.microsoft.com/library/windowsazure/gg429786.aspx)
* [<span data-ttu-id="ec092-499">ACS How To's</span><span class="sxs-lookup"><span data-stu-id="ec092-499">ACS How To's</span></span>](http://msdn.microsoft.com/library/windowsazure/gg185939.aspx)
* [<span data-ttu-id="ec092-500">Secure Azure Web Role ASP.NET Web Application Using Access Control Service v2.0</span><span class="sxs-lookup"><span data-stu-id="ec092-500">Secure Azure Web Role ASP.NET Web Application Using Access Control Service v2.0</span></span>](http://social.technet.microsoft.com/wiki/contents/articles/2590.aspx)
* [<span data-ttu-id="ec092-501">Azure AD Access Control Service (ACS) Academy Videos</span><span class="sxs-lookup"><span data-stu-id="ec092-501">Azure AD Access Control Service (ACS) Academy Videos</span></span>](http://social.technet.microsoft.com/wiki/contents/articles/2777.aspx)
* [<span data-ttu-id="ec092-502">Microsoft Security Development Lifecycle</span><span class="sxs-lookup"><span data-stu-id="ec092-502">Microsoft Security Development Lifecycle</span></span>](http://www.microsoft.com/security/sdl/default.aspx)
* [<span data-ttu-id="ec092-503">SDL Threat Modeling Tool 3.1.8</span><span class="sxs-lookup"><span data-stu-id="ec092-503">SDL Threat Modeling Tool 3.1.8</span></span>](http://www.microsoft.com/download/en/details.aspx?displaylang=en&id=2955)
* [<span data-ttu-id="ec092-504">Security and Privacy Blogs</span><span class="sxs-lookup"><span data-stu-id="ec092-504">Security and Privacy Blogs</span></span>](http://www.microsoft.com/about/twc/en/us/blogs.aspx)
* [<span data-ttu-id="ec092-505">Security Response Center</span><span class="sxs-lookup"><span data-stu-id="ec092-505">Security Response Center</span></span>](http://www.microsoft.com/security/msrc/default.aspx)
* [<span data-ttu-id="ec092-506">Security Intelligence Report</span><span class="sxs-lookup"><span data-stu-id="ec092-506">Security Intelligence Report</span></span>](http://www.microsoft.com/security/sir/)
* [<span data-ttu-id="ec092-507">Security Development Lifecycle</span><span class="sxs-lookup"><span data-stu-id="ec092-507">Security Development Lifecycle</span></span>](http://www.microsoft.com/security/sdl/default.aspx)
* [<span data-ttu-id="ec092-508">Security Developer Center (MSDN)</span><span class="sxs-lookup"><span data-stu-id="ec092-508">Security Developer Center (MSDN)</span></span>](http://msdn.microsoft.com/security/)

[01]:https://docstestmedia1.blob.core.windows.net/azure-media/includes/media/SecurityRX/01_SecuringTheApplication.gif
[02]:https://docstestmedia1.blob.core.windows.net/azure-media/includes/media/SecurityRX/02_ThreatsVulnerabilitiesandAttacks.gif
[03]:https://docstestmedia1.blob.core.windows.net/azure-media/includes/media/SecurityRX/03_WindowsAzureADAccesscontrol.gif
[04]:https://docstestmedia1.blob.core.windows.net/azure-media/includes/media/SecurityRX/04_WCF(SOAP)Service.gif
[05]:https://docstestmedia1.blob.core.windows.net/azure-media/includes/media/SecurityRX/05_AzureADAccessControl.gif
[06]:https://docstestmedia1.blob.core.windows.net/azure-media/includes/media/SecurityRX/06_RESTService.gif
[07]:https://docstestmedia1.blob.core.windows.net/azure-media/includes/media/SecurityRX/07_WIFisOptional.gif
[08]:https://docstestmedia1.blob.core.windows.net/azure-media/includes/media/SecurityRX/08_ASPNETWebApptoREST.gif
[09]:https://docstestmedia1.blob.core.windows.net/azure-media/includes/media/SecurityRX/09_RBAC.gif
[10]:https://docstestmedia1.blob.core.windows.net/azure-media/includes/media/SecurityRX/10_WIFClaimsAuthenticationManager.gif
[11]:https://docstestmedia1.blob.core.windows.net/azure-media/includes/media/SecurityRX/11_SecurityTokenRequriementmapping.gif
[12]:https://docstestmedia1.blob.core.windows.net/azure-media/includes/media/SecurityRX/12_CustomRoleManager.gif
[13]:https://docstestmedia1.blob.core.windows.net/azure-media/includes/media/SecurityRX/13_ClaimsAuthorizationManager.gif
[14]:https://docstestmedia1.blob.core.windows.net/azure-media/includes/media/SecurityRX/14_WindowsAzurestorage.gif
[15]:https://docstestmedia1.blob.core.windows.net/azure-media/includes/media/SecurityRX/15_SQLAzureIdentityandAccessScenarios.gif
[16]:https://docstestmedia1.blob.core.windows.net/azure-media/includes/media/SecurityRX/16_WindowsAzureServiceBusIdentity.gif
[17]:https://docstestmedia1.blob.core.windows.net/azure-media/includes/media/SecurityRX/17_WindowsAzureCacheIdentity.gif
[18]:https://docstestmedia1.blob.core.windows.net/azure-media/includes/media/SecurityRX/18_IAccessMyDataset.gif
[19]:https://docstestmedia1.blob.core.windows.net/azure-media/includes/media/SecurityRX/19_UsersAccessMyDatasets.gif
[20]:https://docstestmedia1.blob.core.windows.net/azure-media/includes/media/SecurityRX/20_ApplicationAccessMarketplaceAPI.gif

[Web SSO Design]: http://technet.microsoft.com/library/dd807033(WS.10).aspx
[Federated Web SSO Design]: http://technet.microsoft.com/library/dd807050(WS.10).aspx




















