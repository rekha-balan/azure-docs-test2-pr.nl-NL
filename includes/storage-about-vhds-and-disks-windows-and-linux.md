
## <a name="about-vhds"></a><span data-ttu-id="f4409-101">About VHDs</span><span class="sxs-lookup"><span data-stu-id="f4409-101">About VHDs</span></span>

<span data-ttu-id="f4409-102">The VHDs used in Azure are .vhd files stored as page blobs in a standard or premium storage account in Azure.</span><span class="sxs-lookup"><span data-stu-id="f4409-102">The VHDs used in Azure are .vhd files stored as page blobs in a standard or premium storage account in Azure.</span></span> <span data-ttu-id="f4409-103">For details about page blobs, see [Understanding block blobs and page blobs](/rest/api/storageservices/fileservices/Understanding-Block-Blobs--Append-Blobs--and-Page-Blobs/).</span><span class="sxs-lookup"><span data-stu-id="f4409-103">For details about page blobs, see [Understanding block blobs and page blobs](/rest/api/storageservices/fileservices/Understanding-Block-Blobs--Append-Blobs--and-Page-Blobs/).</span></span> <span data-ttu-id="f4409-104">For details about premium storage, see [High-performance premium storage and Azure VMs](../articles/storage/storage-premium-storage.md).</span><span class="sxs-lookup"><span data-stu-id="f4409-104">For details about premium storage, see [High-performance premium storage and Azure VMs](../articles/storage/storage-premium-storage.md).</span></span>

<span data-ttu-id="f4409-105">Azure supports the fixed disk VHD format.</span><span class="sxs-lookup"><span data-stu-id="f4409-105">Azure supports the fixed disk VHD format.</span></span> <span data-ttu-id="f4409-106">The fixed format lays the logical disk out linearly within the file, so that disk offset X is stored at blob offset X. A small footer at the end of the blob describes the properties of the VHD.</span><span class="sxs-lookup"><span data-stu-id="f4409-106">The fixed format lays the logical disk out linearly within the file, so that disk offset X is stored at blob offset X. A small footer at the end of the blob describes the properties of the VHD.</span></span> <span data-ttu-id="f4409-107">Often, the fixed format wastes space because most disks have large unused ranges in them.</span><span class="sxs-lookup"><span data-stu-id="f4409-107">Often, the fixed format wastes space because most disks have large unused ranges in them.</span></span> <span data-ttu-id="f4409-108">However, Azure stores .vhd files in a sparse format, so you receive the benefits of both the fixed and dynamic disks at the same time.</span><span class="sxs-lookup"><span data-stu-id="f4409-108">However, Azure stores .vhd files in a sparse format, so you receive the benefits of both the fixed and dynamic disks at the same time.</span></span> <span data-ttu-id="f4409-109">For more details, see [Getting started with virtual hard disks](https://technet.microsoft.com/library/dd979539.aspx).</span><span class="sxs-lookup"><span data-stu-id="f4409-109">For more details, see [Getting started with virtual hard disks](https://technet.microsoft.com/library/dd979539.aspx).</span></span>

<span data-ttu-id="f4409-110">All .vhd files in Azure that you want to use as a source to create disks or images are read-only.</span><span class="sxs-lookup"><span data-stu-id="f4409-110">All .vhd files in Azure that you want to use as a source to create disks or images are read-only.</span></span> <span data-ttu-id="f4409-111">When you create a disk or image, Azure makes copies of the .vhd files.</span><span class="sxs-lookup"><span data-stu-id="f4409-111">When you create a disk or image, Azure makes copies of the .vhd files.</span></span> <span data-ttu-id="f4409-112">These copies can be read-only or read-and-write, depending on how you use the VHD.</span><span class="sxs-lookup"><span data-stu-id="f4409-112">These copies can be read-only or read-and-write, depending on how you use the VHD.</span></span>

<span data-ttu-id="f4409-113">When you create a virtual machine from an image, Azure creates a disk for the virtual machine that is a copy of the source .vhd file.</span><span class="sxs-lookup"><span data-stu-id="f4409-113">When you create a virtual machine from an image, Azure creates a disk for the virtual machine that is a copy of the source .vhd file.</span></span> <span data-ttu-id="f4409-114">To protect against accidental deletion, Azure places a lease on any source .vhd file that’s used to create an image, an operating system disk, or a data disk.</span><span class="sxs-lookup"><span data-stu-id="f4409-114">To protect against accidental deletion, Azure places a lease on any source .vhd file that’s used to create an image, an operating system disk, or a data disk.</span></span>

<span data-ttu-id="f4409-115">Before you can delete a source .vhd file, you’ll need to remove the lease by deleting the disk or image.</span><span class="sxs-lookup"><span data-stu-id="f4409-115">Before you can delete a source .vhd file, you’ll need to remove the lease by deleting the disk or image.</span></span> <span data-ttu-id="f4409-116">To delete a .vhd file that is being used by a virtual machine as an operating system disk, you can delete the virtual machine, the operating system disk, and the source .vhd file all at once by deleting the virtual machine and deleting all associated disks.</span><span class="sxs-lookup"><span data-stu-id="f4409-116">To delete a .vhd file that is being used by a virtual machine as an operating system disk, you can delete the virtual machine, the operating system disk, and the source .vhd file all at once by deleting the virtual machine and deleting all associated disks.</span></span> <span data-ttu-id="f4409-117">However, deleting a .vhd file that’s a source for a data disk requires several steps in a set order.</span><span class="sxs-lookup"><span data-stu-id="f4409-117">However, deleting a .vhd file that’s a source for a data disk requires several steps in a set order.</span></span> <span data-ttu-id="f4409-118">First you detach the disk from the virtual machine, then delete the disk, and then delete the .vhd file.</span><span class="sxs-lookup"><span data-stu-id="f4409-118">First you detach the disk from the virtual machine, then delete the disk, and then delete the .vhd file.</span></span>

> [!WARNING]
> <span data-ttu-id="f4409-119">If you delete a source .vhd file from storage, or delete your storage account, Microsoft can't recover that data for you.</span><span class="sxs-lookup"><span data-stu-id="f4409-119">If you delete a source .vhd file from storage, or delete your storage account, Microsoft can't recover that data for you.</span></span>
> 

## <a name="types-of-disks"></a><span data-ttu-id="f4409-120">Types of disks</span><span class="sxs-lookup"><span data-stu-id="f4409-120">Types of disks</span></span> 

<span data-ttu-id="f4409-121">There are two performance tiers for storage that you can choose from when creating your disks -- Standard Storage and Premium Storage.</span><span class="sxs-lookup"><span data-stu-id="f4409-121">There are two performance tiers for storage that you can choose from when creating your disks -- Standard Storage and Premium Storage.</span></span> <span data-ttu-id="f4409-122">Also, there are two types of disks -- unmanaged and managed -- and they can reside in either performance tier.</span><span class="sxs-lookup"><span data-stu-id="f4409-122">Also, there are two types of disks -- unmanaged and managed -- and they can reside in either performance tier.</span></span>  

### <a name="standard-storage"></a><span data-ttu-id="f4409-123">Standard storage</span><span class="sxs-lookup"><span data-stu-id="f4409-123">Standard storage</span></span> 

<span data-ttu-id="f4409-124">Standard Storage is backed by HDDs, and delivers cost-effective storage while still being performant.</span><span class="sxs-lookup"><span data-stu-id="f4409-124">Standard Storage is backed by HDDs, and delivers cost-effective storage while still being performant.</span></span> <span data-ttu-id="f4409-125">Standard storage can be replicated locally in one datacenter, or be geo-redundant with primary and secondary data centers.</span><span class="sxs-lookup"><span data-stu-id="f4409-125">Standard storage can be replicated locally in one datacenter, or be geo-redundant with primary and secondary data centers.</span></span> <span data-ttu-id="f4409-126">For more information about storage replication, please see [Azure Storage replication](../articles/storage/storage-redundancy.md).</span><span class="sxs-lookup"><span data-stu-id="f4409-126">For more information about storage replication, please see [Azure Storage replication](../articles/storage/storage-redundancy.md).</span></span> 

<span data-ttu-id="f4409-127">For more information about using Standard Storage with VM disks, please see [Standard Storage and Disks](../articles/storage/storage-standard-storage.md).</span><span class="sxs-lookup"><span data-stu-id="f4409-127">For more information about using Standard Storage with VM disks, please see [Standard Storage and Disks](../articles/storage/storage-standard-storage.md).</span></span>

### <a name="premium-storage"></a><span data-ttu-id="f4409-128">Premium storage</span><span class="sxs-lookup"><span data-stu-id="f4409-128">Premium storage</span></span> 

<span data-ttu-id="f4409-129">Premium Storage is backed by SSDs, and delivers high-performance, low-latency disk support for VMs running I/O-intensive workloads.</span><span class="sxs-lookup"><span data-stu-id="f4409-129">Premium Storage is backed by SSDs, and delivers high-performance, low-latency disk support for VMs running I/O-intensive workloads.</span></span> <span data-ttu-id="f4409-130">You can use Premium Storage with DS, DSv2, GS, or FS series Azure VMs.</span><span class="sxs-lookup"><span data-stu-id="f4409-130">You can use Premium Storage with DS, DSv2, GS, or FS series Azure VMs.</span></span> <span data-ttu-id="f4409-131">For more information, please see [Premium Storage](../articles/storage/storage-premium-storage.md).</span><span class="sxs-lookup"><span data-stu-id="f4409-131">For more information, please see [Premium Storage](../articles/storage/storage-premium-storage.md).</span></span>

### <a name="unmanaged-disks"></a><span data-ttu-id="f4409-132">Unmanaged disks</span><span class="sxs-lookup"><span data-stu-id="f4409-132">Unmanaged disks</span></span>

<span data-ttu-id="f4409-133">Unmanaged disks are the traditional type of disks that have been used by VMs.</span><span class="sxs-lookup"><span data-stu-id="f4409-133">Unmanaged disks are the traditional type of disks that have been used by VMs.</span></span> <span data-ttu-id="f4409-134">With these, you create your own storage account and specify that storage account when you create the disk.</span><span class="sxs-lookup"><span data-stu-id="f4409-134">With these, you create your own storage account and specify that storage account when you create the disk.</span></span> <span data-ttu-id="f4409-135">You have to make sure you don't put too many disks in the same storage account, because you could exceed the [scalability targets](../articles/storage/storage-scalability-targets.md) of the storage account (20,000 IOPS, for example), resulting in the VMs being throttled.</span><span class="sxs-lookup"><span data-stu-id="f4409-135">You have to make sure you don't put too many disks in the same storage account, because you could exceed the [scalability targets](../articles/storage/storage-scalability-targets.md) of the storage account (20,000 IOPS, for example), resulting in the VMs being throttled.</span></span> <span data-ttu-id="f4409-136">With unmanaged disks, you have to figure out how to maximize the use of one or more storage accounts to get the best performance out of your VMs.</span><span class="sxs-lookup"><span data-stu-id="f4409-136">With unmanaged disks, you have to figure out how to maximize the use of one or more storage accounts to get the best performance out of your VMs.</span></span>

### <a name="managed-disks"></a><span data-ttu-id="f4409-137">Managed disks</span><span class="sxs-lookup"><span data-stu-id="f4409-137">Managed disks</span></span> 

<span data-ttu-id="f4409-138">Managed Disks handles the storage account creation/management in the background for you, and ensures that you do not have to worry about the scalability limits of the storage account.</span><span class="sxs-lookup"><span data-stu-id="f4409-138">Managed Disks handles the storage account creation/management in the background for you, and ensures that you do not have to worry about the scalability limits of the storage account.</span></span> <span data-ttu-id="f4409-139">You simply specify the disk size and the performance tier (Standard/Premium), and Azure creates and manages the disk for you.</span><span class="sxs-lookup"><span data-stu-id="f4409-139">You simply specify the disk size and the performance tier (Standard/Premium), and Azure creates and manages the disk for you.</span></span> <span data-ttu-id="f4409-140">Even as you add disks or scale the VM up and down, you don't have to worry about the storage being used.</span><span class="sxs-lookup"><span data-stu-id="f4409-140">Even as you add disks or scale the VM up and down, you don't have to worry about the storage being used.</span></span> 

<span data-ttu-id="f4409-141">You can also manage your custom images in one storage account per Azure region, and use them to create hundreds of VMs in the same subscription.</span><span class="sxs-lookup"><span data-stu-id="f4409-141">You can also manage your custom images in one storage account per Azure region, and use them to create hundreds of VMs in the same subscription.</span></span> <span data-ttu-id="f4409-142">For more information about Managed Disks, please see the [Managed Disks Overview](../articles/storage/storage-managed-disks-overview.md).</span><span class="sxs-lookup"><span data-stu-id="f4409-142">For more information about Managed Disks, please see the [Managed Disks Overview](../articles/storage/storage-managed-disks-overview.md).</span></span>

<span data-ttu-id="f4409-143">We recommend that you use Azure Managed Disks for new VMs, and that you convert your previous unmanaged disks to managed disks, to take advantage of the many features available in Managed Disks.</span><span class="sxs-lookup"><span data-stu-id="f4409-143">We recommend that you use Azure Managed Disks for new VMs, and that you convert your previous unmanaged disks to managed disks, to take advantage of the many features available in Managed Disks.</span></span>

### <a name="disk-comparison"></a><span data-ttu-id="f4409-144">Disk comparison</span><span class="sxs-lookup"><span data-stu-id="f4409-144">Disk comparison</span></span>

<span data-ttu-id="f4409-145">The following table provides a comparison of Premium vs Standard for both unmanaged and managed disks to help you decide what to use.</span><span class="sxs-lookup"><span data-stu-id="f4409-145">The following table provides a comparison of Premium vs Standard for both unmanaged and managed disks to help you decide what to use.</span></span>

|    | <span data-ttu-id="f4409-146">Azure Premium Disk</span><span class="sxs-lookup"><span data-stu-id="f4409-146">Azure Premium Disk</span></span> | <span data-ttu-id="f4409-147">Azure Standard Disk</span><span class="sxs-lookup"><span data-stu-id="f4409-147">Azure Standard Disk</span></span> |
|--- | ------------------ | ------------------- |
| <span data-ttu-id="f4409-148">Disk Type</span><span class="sxs-lookup"><span data-stu-id="f4409-148">Disk Type</span></span> | <span data-ttu-id="f4409-149">Solid State Drives (SSD)</span><span class="sxs-lookup"><span data-stu-id="f4409-149">Solid State Drives (SSD)</span></span> | <span data-ttu-id="f4409-150">Hard Disk Drives (HDD)</span><span class="sxs-lookup"><span data-stu-id="f4409-150">Hard Disk Drives (HDD)</span></span>  |
| <span data-ttu-id="f4409-151">Overview</span><span class="sxs-lookup"><span data-stu-id="f4409-151">Overview</span></span>  | <span data-ttu-id="f4409-152">SSD-based high-performance, low-latency disk support for VMs running IO-intensive workloads or hosting mission critical production environment</span><span class="sxs-lookup"><span data-stu-id="f4409-152">SSD-based high-performance, low-latency disk support for VMs running IO-intensive workloads or hosting mission critical production environment</span></span> | <span data-ttu-id="f4409-153">HDD-based cost effective disk support for Dev/Test VM scenarios</span><span class="sxs-lookup"><span data-stu-id="f4409-153">HDD-based cost effective disk support for Dev/Test VM scenarios</span></span> |
| <span data-ttu-id="f4409-154">Scenario</span><span class="sxs-lookup"><span data-stu-id="f4409-154">Scenario</span></span>  | <span data-ttu-id="f4409-155">Production and performance sensitive workloads</span><span class="sxs-lookup"><span data-stu-id="f4409-155">Production and performance sensitive workloads</span></span> | <span data-ttu-id="f4409-156">Dev/Test, non-critical,</span><span class="sxs-lookup"><span data-stu-id="f4409-156">Dev/Test, non-critical,</span></span> <br><span data-ttu-id="f4409-157">Infrequent access</span><span class="sxs-lookup"><span data-stu-id="f4409-157">Infrequent access</span></span> |
| <span data-ttu-id="f4409-158">Disk Size</span><span class="sxs-lookup"><span data-stu-id="f4409-158">Disk Size</span></span> | <span data-ttu-id="f4409-159">P10: 128 GB</span><span class="sxs-lookup"><span data-stu-id="f4409-159">P10: 128 GB</span></span><br><span data-ttu-id="f4409-160">P20: 512 GB</span><span class="sxs-lookup"><span data-stu-id="f4409-160">P20: 512 GB</span></span><br><span data-ttu-id="f4409-161">P30: 1024 GB</span><span class="sxs-lookup"><span data-stu-id="f4409-161">P30: 1024 GB</span></span> | <span data-ttu-id="f4409-162">Unmanaged Disks: 1 GB – 1 TB</span><span class="sxs-lookup"><span data-stu-id="f4409-162">Unmanaged Disks: 1 GB – 1 TB</span></span> <br><br><span data-ttu-id="f4409-163">Managed Disks:</span><span class="sxs-lookup"><span data-stu-id="f4409-163">Managed Disks:</span></span><br> <span data-ttu-id="f4409-164">S4: 32 GB</span><span class="sxs-lookup"><span data-stu-id="f4409-164">S4: 32 GB</span></span> <br><span data-ttu-id="f4409-165">S6: 64 GB</span><span class="sxs-lookup"><span data-stu-id="f4409-165">S6: 64 GB</span></span> <br><span data-ttu-id="f4409-166">S10: 128 GB</span><span class="sxs-lookup"><span data-stu-id="f4409-166">S10: 128 GB</span></span> <br><span data-ttu-id="f4409-167">S20: 512 GB</span><span class="sxs-lookup"><span data-stu-id="f4409-167">S20: 512 GB</span></span> <br><span data-ttu-id="f4409-168">S30: 1024 GB</span><span class="sxs-lookup"><span data-stu-id="f4409-168">S30: 1024 GB</span></span> |
| <span data-ttu-id="f4409-169">Max Throughput per Disk</span><span class="sxs-lookup"><span data-stu-id="f4409-169">Max Throughput per Disk</span></span> | <span data-ttu-id="f4409-170">200 MB/s</span><span class="sxs-lookup"><span data-stu-id="f4409-170">200 MB/s</span></span> | <span data-ttu-id="f4409-171">60 MB/s</span><span class="sxs-lookup"><span data-stu-id="f4409-171">60 MB/s</span></span> |
| <span data-ttu-id="f4409-172">Max IOPS per Disk</span><span class="sxs-lookup"><span data-stu-id="f4409-172">Max IOPS per Disk</span></span> | <span data-ttu-id="f4409-173">5000 IOPS</span><span class="sxs-lookup"><span data-stu-id="f4409-173">5000 IOPS</span></span> | <span data-ttu-id="f4409-174">500 IOPS</span><span class="sxs-lookup"><span data-stu-id="f4409-174">500 IOPS</span></span> |
