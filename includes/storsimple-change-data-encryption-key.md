<!--author=SharS last changed: 12/01/15-->

### <a name="step-1-authorize-a-device-to-change-the-service-data-encryption-key-in-the-azure-classic-portal"></a><span data-ttu-id="f7d84-101">Step 1: Authorize a device to change the service data encryption key in the Azure classic portal</span><span class="sxs-lookup"><span data-stu-id="f7d84-101">Step 1: Authorize a device to change the service data encryption key in the Azure classic portal</span></span>
<span data-ttu-id="f7d84-102">Typically, the device administrator will request that the service administrator authorize a device to change service data encryption keys.</span><span class="sxs-lookup"><span data-stu-id="f7d84-102">Typically, the device administrator will request that the service administrator authorize a device to change service data encryption keys.</span></span> <span data-ttu-id="f7d84-103">The service administrator will then authorize the device to change the key.</span><span class="sxs-lookup"><span data-stu-id="f7d84-103">The service administrator will then authorize the device to change the key.</span></span>

<span data-ttu-id="f7d84-104">This step is performed in the Azure classic portal.</span><span class="sxs-lookup"><span data-stu-id="f7d84-104">This step is performed in the Azure classic portal.</span></span> <span data-ttu-id="f7d84-105">The service administrator can select a device from a displayed list of the devices that are eligible to be authorized.</span><span class="sxs-lookup"><span data-stu-id="f7d84-105">The service administrator can select a device from a displayed list of the devices that are eligible to be authorized.</span></span> <span data-ttu-id="f7d84-106">The device is then authorized to start the service data encryption key change process.</span><span class="sxs-lookup"><span data-stu-id="f7d84-106">The device is then authorized to start the service data encryption key change process.</span></span>

#### <a name="which-devices-can-be-authorized-to-change-service-data-encryption-keys"></a><span data-ttu-id="f7d84-107">Which devices can be authorized to change service data encryption keys?</span><span class="sxs-lookup"><span data-stu-id="f7d84-107">Which devices can be authorized to change service data encryption keys?</span></span>
<span data-ttu-id="f7d84-108">A device must meet the following criteria before it can be authorized to initiate service data encryption key changes:</span><span class="sxs-lookup"><span data-stu-id="f7d84-108">A device must meet the following criteria before it can be authorized to initiate service data encryption key changes:</span></span>

* <span data-ttu-id="f7d84-109">The device must be online to be eligible for service data encryption key change authorization.</span><span class="sxs-lookup"><span data-stu-id="f7d84-109">The device must be online to be eligible for service data encryption key change authorization.</span></span>
* <span data-ttu-id="f7d84-110">You can authorize the same device again after 30 minutes if the key change has not been initiated.</span><span class="sxs-lookup"><span data-stu-id="f7d84-110">You can authorize the same device again after 30 minutes if the key change has not been initiated.</span></span>
* <span data-ttu-id="f7d84-111">You can authorize a different device, provided that the key change has not been initiated by the previously authorized device.</span><span class="sxs-lookup"><span data-stu-id="f7d84-111">You can authorize a different device, provided that the key change has not been initiated by the previously authorized device.</span></span> <span data-ttu-id="f7d84-112">After the new device has been authorized, the old device cannot initiate the change.</span><span class="sxs-lookup"><span data-stu-id="f7d84-112">After the new device has been authorized, the old device cannot initiate the change.</span></span>
* <span data-ttu-id="f7d84-113">You cannot authorize a device while the rollover of the service data encryption key is in progress.</span><span class="sxs-lookup"><span data-stu-id="f7d84-113">You cannot authorize a device while the rollover of the service data encryption key is in progress.</span></span>
* <span data-ttu-id="f7d84-114">You can authorize a device when some of the devices registered with the service have rolled over the encryption while others have not.</span><span class="sxs-lookup"><span data-stu-id="f7d84-114">You can authorize a device when some of the devices registered with the service have rolled over the encryption while others have not.</span></span> <span data-ttu-id="f7d84-115">In such cases, the eligible devices are the ones that have completed the service data encryption key change.</span><span class="sxs-lookup"><span data-stu-id="f7d84-115">In such cases, the eligible devices are the ones that have completed the service data encryption key change.</span></span>

> [!NOTE]
> <span data-ttu-id="f7d84-116">In the Azure classic portal, StorSimple virtual devices are not shown in the list of devices that can be authorized to start the key change.</span><span class="sxs-lookup"><span data-stu-id="f7d84-116">In the Azure classic portal, StorSimple virtual devices are not shown in the list of devices that can be authorized to start the key change.</span></span>
> 
> 

<span data-ttu-id="f7d84-117">Perform the following steps to select and authorize a device to initiate the service data encryption key change.</span><span class="sxs-lookup"><span data-stu-id="f7d84-117">Perform the following steps to select and authorize a device to initiate the service data encryption key change.</span></span>

#### <a name="to-authorize-a-device-to-change-the-key"></a><span data-ttu-id="f7d84-118">To authorize a device to change the key</span><span class="sxs-lookup"><span data-stu-id="f7d84-118">To authorize a device to change the key</span></span>
1. <span data-ttu-id="f7d84-119">On the service dashboard page, click **Change service data encryption key**.</span><span class="sxs-lookup"><span data-stu-id="f7d84-119">On the service dashboard page, click **Change service data encryption key**.</span></span>
   
    ![Change service encryption key](https://docstestmedia1.blob.core.windows.net/azure-media/includes/media/storsimple-change-data-encryption-key/HCS_ChangeServiceDataEncryptionKey-include.png)
2. <span data-ttu-id="f7d84-121">In the **Change service data encryption key** dialog box, select and authorize a device to initiate the service data encryption key change.</span><span class="sxs-lookup"><span data-stu-id="f7d84-121">In the **Change service data encryption key** dialog box, select and authorize a device to initiate the service data encryption key change.</span></span> <span data-ttu-id="f7d84-122">The drop-down list has all the eligible devices that can be authorized.</span><span class="sxs-lookup"><span data-stu-id="f7d84-122">The drop-down list has all the eligible devices that can be authorized.</span></span>
3. <span data-ttu-id="f7d84-123">Click the check icon</span><span class="sxs-lookup"><span data-stu-id="f7d84-123">Click the check icon</span></span> ![check icon](https://docstestmedia1.blob.core.windows.net/azure-media/includes/media/storsimple-change-data-encryption-key/HCS_CheckIcon-include.png)<span data-ttu-id="f7d84-125">.</span><span class="sxs-lookup"><span data-stu-id="f7d84-125">.</span></span>

### <a name="step-2-use-windows-powershell-for-storsimple-to-initiate-the-service-data-encryption-key-change"></a><span data-ttu-id="f7d84-126">Step 2: Use Windows PowerShell for StorSimple to initiate the service data encryption key change</span><span class="sxs-lookup"><span data-stu-id="f7d84-126">Step 2: Use Windows PowerShell for StorSimple to initiate the service data encryption key change</span></span>
<span data-ttu-id="f7d84-127">This step is performed in the Windows PowerShell for StorSimple interface on the authorized StorSimple device.</span><span class="sxs-lookup"><span data-stu-id="f7d84-127">This step is performed in the Windows PowerShell for StorSimple interface on the authorized StorSimple device.</span></span>

> [!NOTE]
> <span data-ttu-id="f7d84-128">No operations can be performed in the Azure classic portal of your StorSimple Manager service until the key rollover is completed.</span><span class="sxs-lookup"><span data-stu-id="f7d84-128">No operations can be performed in the Azure classic portal of your StorSimple Manager service until the key rollover is completed.</span></span>
> 
> 

<span data-ttu-id="f7d84-129">If you are using the device serial console to connect to the Windows PowerShell interface, perform the following steps.</span><span class="sxs-lookup"><span data-stu-id="f7d84-129">If you are using the device serial console to connect to the Windows PowerShell interface, perform the following steps.</span></span>

#### <a name="to-initiate-the-service-data-encryption-key-change"></a><span data-ttu-id="f7d84-130">To initiate the service data encryption key change</span><span class="sxs-lookup"><span data-stu-id="f7d84-130">To initiate the service data encryption key change</span></span>
1. <span data-ttu-id="f7d84-131">Select option 1 to log on with full access.</span><span class="sxs-lookup"><span data-stu-id="f7d84-131">Select option 1 to log on with full access.</span></span>
2. <span data-ttu-id="f7d84-132">At the command prompt, type:</span><span class="sxs-lookup"><span data-stu-id="f7d84-132">At the command prompt, type:</span></span>
   
     `Invoke-HcsmServiceDataEncryptionKeyChange`
3. <span data-ttu-id="f7d84-133">After the cmdlet has successfully completed, you will get a new service data encryption key.</span><span class="sxs-lookup"><span data-stu-id="f7d84-133">After the cmdlet has successfully completed, you will get a new service data encryption key.</span></span> <span data-ttu-id="f7d84-134">Copy and save this key for use in step 3 of this process.</span><span class="sxs-lookup"><span data-stu-id="f7d84-134">Copy and save this key for use in step 3 of this process.</span></span> <span data-ttu-id="f7d84-135">This key will be used to update all the remaining devices registered with the StorSimple Manager service.</span><span class="sxs-lookup"><span data-stu-id="f7d84-135">This key will be used to update all the remaining devices registered with the StorSimple Manager service.</span></span>
   
   > [!NOTE]
   > <span data-ttu-id="f7d84-136">This process must be initiated within four hours of authorizing a StorSimple device.</span><span class="sxs-lookup"><span data-stu-id="f7d84-136">This process must be initiated within four hours of authorizing a StorSimple device.</span></span>
   > 
   > 
   
   <span data-ttu-id="f7d84-137">This new key is then sent to the service to be pushed to all the devices that are registered with the service.</span><span class="sxs-lookup"><span data-stu-id="f7d84-137">This new key is then sent to the service to be pushed to all the devices that are registered with the service.</span></span> <span data-ttu-id="f7d84-138">An alert will then appear on the service dashboard.</span><span class="sxs-lookup"><span data-stu-id="f7d84-138">An alert will then appear on the service dashboard.</span></span> <span data-ttu-id="f7d84-139">The service will disable all the operations on the registered devices, and the device administrator will then need to update the service data encryption key on the other devices.</span><span class="sxs-lookup"><span data-stu-id="f7d84-139">The service will disable all the operations on the registered devices, and the device administrator will then need to update the service data encryption key on the other devices.</span></span> <span data-ttu-id="f7d84-140">However, the I/Os (hosts sending data to the cloud) will not be disrupted.</span><span class="sxs-lookup"><span data-stu-id="f7d84-140">However, the I/Os (hosts sending data to the cloud) will not be disrupted.</span></span>
   
   <span data-ttu-id="f7d84-141">If you have a single device registered to your service, the rollover process is now complete and you can skip the next step.</span><span class="sxs-lookup"><span data-stu-id="f7d84-141">If you have a single device registered to your service, the rollover process is now complete and you can skip the next step.</span></span> <span data-ttu-id="f7d84-142">If you have multiple devices registered to your service, proceed to step 3.</span><span class="sxs-lookup"><span data-stu-id="f7d84-142">If you have multiple devices registered to your service, proceed to step 3.</span></span>

### <a name="step-3-update-the-service-data-encryption-key-on-other-storsimple-devices"></a><span data-ttu-id="f7d84-143">Step 3: Update the service data encryption key on other StorSimple devices</span><span class="sxs-lookup"><span data-stu-id="f7d84-143">Step 3: Update the service data encryption key on other StorSimple devices</span></span>
<span data-ttu-id="f7d84-144">These steps must be performed in the Windows PowerShell interface of your StorSimple device if you have multiple devices registered to your StorSimple Manager service.</span><span class="sxs-lookup"><span data-stu-id="f7d84-144">These steps must be performed in the Windows PowerShell interface of your StorSimple device if you have multiple devices registered to your StorSimple Manager service.</span></span> <span data-ttu-id="f7d84-145">The key that you obtained in Step 2: Use Windows PowerShell for StorSimple to initiate the service data encryption key change must be used to update all the remaining StorSimple device registered with the StorSimple Manager service.</span><span class="sxs-lookup"><span data-stu-id="f7d84-145">The key that you obtained in Step 2: Use Windows PowerShell for StorSimple to initiate the service data encryption key change must be used to update all the remaining StorSimple device registered with the StorSimple Manager service.</span></span>

<span data-ttu-id="f7d84-146">Perform the following steps to update the service data encryption on your device.</span><span class="sxs-lookup"><span data-stu-id="f7d84-146">Perform the following steps to update the service data encryption on your device.</span></span>

#### <a name="to-update-the-service-data-encryption-key"></a><span data-ttu-id="f7d84-147">To update the service data encryption key</span><span class="sxs-lookup"><span data-stu-id="f7d84-147">To update the service data encryption key</span></span>
1. <span data-ttu-id="f7d84-148">Use Windows PowerShell for StorSimple to connect to the console.</span><span class="sxs-lookup"><span data-stu-id="f7d84-148">Use Windows PowerShell for StorSimple to connect to the console.</span></span> <span data-ttu-id="f7d84-149">Select option 1 to log on with full access.</span><span class="sxs-lookup"><span data-stu-id="f7d84-149">Select option 1 to log on with full access.</span></span>
2. <span data-ttu-id="f7d84-150">At the command prompt, type:</span><span class="sxs-lookup"><span data-stu-id="f7d84-150">At the command prompt, type:</span></span>
   
    `Invoke-HcsmServiceDataEncryptionKeyChange – ServiceDataEncryptionKey`
3. <span data-ttu-id="f7d84-151">Provide the service data encryption key that you obtained in [Step 2: Use Windows PowerShell for StorSimple to initiate the service data encryption key change](#to-initiate-the-service-data-encryption-key-change).</span><span class="sxs-lookup"><span data-stu-id="f7d84-151">Provide the service data encryption key that you obtained in [Step 2: Use Windows PowerShell for StorSimple to initiate the service data encryption key change](#to-initiate-the-service-data-encryption-key-change).</span></span>



