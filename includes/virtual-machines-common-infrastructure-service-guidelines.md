

<span data-ttu-id="c7eec-101">Azure is an excellent platform to implement dev/test or proof-of-concept configurations, because it requires very little investment to test a particular approach to an implementation of your solutions.</span><span class="sxs-lookup"><span data-stu-id="c7eec-101">Azure is an excellent platform to implement dev/test or proof-of-concept configurations, because it requires very little investment to test a particular approach to an implementation of your solutions.</span></span> <span data-ttu-id="c7eec-102">However, you must be able to distinguish the easy practices for a dev/test environment from the more difficult, detailed practices for a fully functional, production-ready implementation of an IT workload.</span><span class="sxs-lookup"><span data-stu-id="c7eec-102">However, you must be able to distinguish the easy practices for a dev/test environment from the more difficult, detailed practices for a fully functional, production-ready implementation of an IT workload.</span></span>

<span data-ttu-id="c7eec-103">This guidance identifies many areas for which planning is vital to the success of an IT workload in Azure.</span><span class="sxs-lookup"><span data-stu-id="c7eec-103">This guidance identifies many areas for which planning is vital to the success of an IT workload in Azure.</span></span> <span data-ttu-id="c7eec-104">In addition, planning provides an order to the creation of the necessary resources.</span><span class="sxs-lookup"><span data-stu-id="c7eec-104">In addition, planning provides an order to the creation of the necessary resources.</span></span> <span data-ttu-id="c7eec-105">Although there is some flexibility, we recommend that you apply the order in this article to your planning and decision-making.</span><span class="sxs-lookup"><span data-stu-id="c7eec-105">Although there is some flexibility, we recommend that you apply the order in this article to your planning and decision-making.</span></span>

<span data-ttu-id="c7eec-106">This article was adapted from the content in the [Azure implementation guidelines](http://blogs.msdn.com/b/thecolorofazure/archive/2014/05/13/azure-implementation-guidelines.aspx) blog post.</span><span class="sxs-lookup"><span data-stu-id="c7eec-106">This article was adapted from the content in the [Azure implementation guidelines](http://blogs.msdn.com/b/thecolorofazure/archive/2014/05/13/azure-implementation-guidelines.aspx) blog post.</span></span> <span data-ttu-id="c7eec-107">Thanks to Santiago Cánepa (Application Development Manager for Microsoft) and Hugo Salcedo (Application Development Manager for Microsoft) for their original material.</span><span class="sxs-lookup"><span data-stu-id="c7eec-107">Thanks to Santiago Cánepa (Application Development Manager for Microsoft) and Hugo Salcedo (Application Development Manager for Microsoft) for their original material.</span></span>

> [!NOTE]
> <span data-ttu-id="c7eec-108">Affinity groups have been deprecated.</span><span class="sxs-lookup"><span data-stu-id="c7eec-108">Affinity groups have been deprecated.</span></span> <span data-ttu-id="c7eec-109">Their use is not described here.</span><span class="sxs-lookup"><span data-stu-id="c7eec-109">Their use is not described here.</span></span> <span data-ttu-id="c7eec-110">For more information, see [About regional VNets and affinity groups](../articles/virtual-network/virtual-networks-migrate-to-regional-vnet.md).</span><span class="sxs-lookup"><span data-stu-id="c7eec-110">For more information, see [About regional VNets and affinity groups](../articles/virtual-network/virtual-networks-migrate-to-regional-vnet.md).</span></span>
> 
> 

## <a name="1-naming-conventions"></a><span data-ttu-id="c7eec-111">1. Naming conventions</span><span class="sxs-lookup"><span data-stu-id="c7eec-111">1. Naming conventions</span></span>
<span data-ttu-id="c7eec-112">You should have a good naming convention in place before creating anything in Azure.</span><span class="sxs-lookup"><span data-stu-id="c7eec-112">You should have a good naming convention in place before creating anything in Azure.</span></span> <span data-ttu-id="c7eec-113">A naming convention ensures that all the resources have a predictable name, which helps lower the administrative burden associated with managing those resources.</span><span class="sxs-lookup"><span data-stu-id="c7eec-113">A naming convention ensures that all the resources have a predictable name, which helps lower the administrative burden associated with managing those resources.</span></span>

<span data-ttu-id="c7eec-114">You might choose to follow a specific set of naming conventions defined for your entire organization or for a specific Azure subscription or account.</span><span class="sxs-lookup"><span data-stu-id="c7eec-114">You might choose to follow a specific set of naming conventions defined for your entire organization or for a specific Azure subscription or account.</span></span> <span data-ttu-id="c7eec-115">Although it is easy for individuals within organizations to establish implicit rules when working with Azure resources, when a team needs to work on a project on Azure, that model does not scale well.</span><span class="sxs-lookup"><span data-stu-id="c7eec-115">Although it is easy for individuals within organizations to establish implicit rules when working with Azure resources, when a team needs to work on a project on Azure, that model does not scale well.</span></span>

<span data-ttu-id="c7eec-116">You should agree on a set of naming conventions up front.</span><span class="sxs-lookup"><span data-stu-id="c7eec-116">You should agree on a set of naming conventions up front.</span></span> <span data-ttu-id="c7eec-117">There are some considerations regarding naming conventions that cut across the sets of rules that make up those conventions.</span><span class="sxs-lookup"><span data-stu-id="c7eec-117">There are some considerations regarding naming conventions that cut across the sets of rules that make up those conventions.</span></span>

### <a name="affixes"></a><span data-ttu-id="c7eec-118">Affixes</span><span class="sxs-lookup"><span data-stu-id="c7eec-118">Affixes</span></span>
<span data-ttu-id="c7eec-119">When creating certain resources, Azure uses some defaults to simplify management of the resources that are associated with these resources.</span><span class="sxs-lookup"><span data-stu-id="c7eec-119">When creating certain resources, Azure uses some defaults to simplify management of the resources that are associated with these resources.</span></span> <span data-ttu-id="c7eec-120">For example, when creating the first virtual machine for a new cloud service, the Azure classic portal attempts to use the virtual machine’s name for the name of a new cloud service for the virtual machine.</span><span class="sxs-lookup"><span data-stu-id="c7eec-120">For example, when creating the first virtual machine for a new cloud service, the Azure classic portal attempts to use the virtual machine’s name for the name of a new cloud service for the virtual machine.</span></span>

<span data-ttu-id="c7eec-121">Therefore, it is beneficial to identify types of resources that need an affix to identify that type.</span><span class="sxs-lookup"><span data-stu-id="c7eec-121">Therefore, it is beneficial to identify types of resources that need an affix to identify that type.</span></span> <span data-ttu-id="c7eec-122">In addition, clearly specify whether the affix will be at:</span><span class="sxs-lookup"><span data-stu-id="c7eec-122">In addition, clearly specify whether the affix will be at:</span></span>

* <span data-ttu-id="c7eec-123">The beginning of the name (prefix)</span><span class="sxs-lookup"><span data-stu-id="c7eec-123">The beginning of the name (prefix)</span></span>
* <span data-ttu-id="c7eec-124">The end of the name (suffix)</span><span class="sxs-lookup"><span data-stu-id="c7eec-124">The end of the name (suffix)</span></span>

<span data-ttu-id="c7eec-125">For instance, here are two possible names for a resource group that hosts a calculation engine:</span><span class="sxs-lookup"><span data-stu-id="c7eec-125">For instance, here are two possible names for a resource group that hosts a calculation engine:</span></span>

* <span data-ttu-id="c7eec-126">Rg-CalculationEngine (prefix)</span><span class="sxs-lookup"><span data-stu-id="c7eec-126">Rg-CalculationEngine (prefix)</span></span>
* <span data-ttu-id="c7eec-127">CalculationEngine-Rg (suffix)</span><span class="sxs-lookup"><span data-stu-id="c7eec-127">CalculationEngine-Rg (suffix)</span></span>

<span data-ttu-id="c7eec-128">Affixes can refer to different aspects that describe the particular resources.</span><span class="sxs-lookup"><span data-stu-id="c7eec-128">Affixes can refer to different aspects that describe the particular resources.</span></span> <span data-ttu-id="c7eec-129">The following table shows some examples typically used.</span><span class="sxs-lookup"><span data-stu-id="c7eec-129">The following table shows some examples typically used.</span></span>

| <span data-ttu-id="c7eec-130">Aspect</span><span class="sxs-lookup"><span data-stu-id="c7eec-130">Aspect</span></span> | <span data-ttu-id="c7eec-131">Examples</span><span class="sxs-lookup"><span data-stu-id="c7eec-131">Examples</span></span> | <span data-ttu-id="c7eec-132">Notes</span><span class="sxs-lookup"><span data-stu-id="c7eec-132">Notes</span></span> |
| --- | --- | --- |
| <span data-ttu-id="c7eec-133">Environment</span><span class="sxs-lookup"><span data-stu-id="c7eec-133">Environment</span></span> |<span data-ttu-id="c7eec-134">dev, stg, prod</span><span class="sxs-lookup"><span data-stu-id="c7eec-134">dev, stg, prod</span></span> |<span data-ttu-id="c7eec-135">Depending on the purpose and name of each environment.</span><span class="sxs-lookup"><span data-stu-id="c7eec-135">Depending on the purpose and name of each environment.</span></span> |
| <span data-ttu-id="c7eec-136">Location</span><span class="sxs-lookup"><span data-stu-id="c7eec-136">Location</span></span> |<span data-ttu-id="c7eec-137">usw (West US), use (East US 2)</span><span class="sxs-lookup"><span data-stu-id="c7eec-137">usw (West US), use (East US 2)</span></span> |<span data-ttu-id="c7eec-138">Depending on the region of the datacenter or the region of the organization.</span><span class="sxs-lookup"><span data-stu-id="c7eec-138">Depending on the region of the datacenter or the region of the organization.</span></span> |
| <span data-ttu-id="c7eec-139">Azure component, service, or product</span><span class="sxs-lookup"><span data-stu-id="c7eec-139">Azure component, service, or product</span></span> |<span data-ttu-id="c7eec-140">Rg for resource group, Svc for cloud service, VNet for virtual network</span><span class="sxs-lookup"><span data-stu-id="c7eec-140">Rg for resource group, Svc for cloud service, VNet for virtual network</span></span> |<span data-ttu-id="c7eec-141">Depending on the product for which the resource provides support.</span><span class="sxs-lookup"><span data-stu-id="c7eec-141">Depending on the product for which the resource provides support.</span></span> |
| <span data-ttu-id="c7eec-142">Role</span><span class="sxs-lookup"><span data-stu-id="c7eec-142">Role</span></span> |<span data-ttu-id="c7eec-143">sql, ora, sp, iis</span><span class="sxs-lookup"><span data-stu-id="c7eec-143">sql, ora, sp, iis</span></span> |<span data-ttu-id="c7eec-144">Depending on the role of the virtual machine.</span><span class="sxs-lookup"><span data-stu-id="c7eec-144">Depending on the role of the virtual machine.</span></span> |
| <span data-ttu-id="c7eec-145">Instance</span><span class="sxs-lookup"><span data-stu-id="c7eec-145">Instance</span></span> |<span data-ttu-id="c7eec-146">01, 02, 03, etc.</span><span class="sxs-lookup"><span data-stu-id="c7eec-146">01, 02, 03, etc.</span></span> |<span data-ttu-id="c7eec-147">For resources that have more than one instance.</span><span class="sxs-lookup"><span data-stu-id="c7eec-147">For resources that have more than one instance.</span></span> <span data-ttu-id="c7eec-148">For example, load balanced web servers in a cloud service.</span><span class="sxs-lookup"><span data-stu-id="c7eec-148">For example, load balanced web servers in a cloud service.</span></span> |

<span data-ttu-id="c7eec-149">When establishing your naming conventions, make sure that they clearly state which affixes to use for each type of resource, and in which position (prefix vs suffix).</span><span class="sxs-lookup"><span data-stu-id="c7eec-149">When establishing your naming conventions, make sure that they clearly state which affixes to use for each type of resource, and in which position (prefix vs suffix).</span></span>

### <a name="dates"></a><span data-ttu-id="c7eec-150">Dates</span><span class="sxs-lookup"><span data-stu-id="c7eec-150">Dates</span></span>
<span data-ttu-id="c7eec-151">It is often important to determine the date of creation from the name of a resource.</span><span class="sxs-lookup"><span data-stu-id="c7eec-151">It is often important to determine the date of creation from the name of a resource.</span></span> <span data-ttu-id="c7eec-152">We recommend the YYYYMMDD date format.</span><span class="sxs-lookup"><span data-stu-id="c7eec-152">We recommend the YYYYMMDD date format.</span></span> <span data-ttu-id="c7eec-153">This format ensures that not only the full date is recorded, but also that two resources whose names differ only on the date will be sorted alphabetically and chronologically at the same time.</span><span class="sxs-lookup"><span data-stu-id="c7eec-153">This format ensures that not only the full date is recorded, but also that two resources whose names differ only on the date will be sorted alphabetically and chronologically at the same time.</span></span>

### <a name="naming-resources"></a><span data-ttu-id="c7eec-154">Naming resources</span><span class="sxs-lookup"><span data-stu-id="c7eec-154">Naming resources</span></span>
<span data-ttu-id="c7eec-155">You should define each type of resource in the naming convention, which should have rules that define how to assign names to each resource that is created.</span><span class="sxs-lookup"><span data-stu-id="c7eec-155">You should define each type of resource in the naming convention, which should have rules that define how to assign names to each resource that is created.</span></span> <span data-ttu-id="c7eec-156">These rules should apply to all types of resources, for example:</span><span class="sxs-lookup"><span data-stu-id="c7eec-156">These rules should apply to all types of resources, for example:</span></span>

* <span data-ttu-id="c7eec-157">Subscriptions</span><span class="sxs-lookup"><span data-stu-id="c7eec-157">Subscriptions</span></span>
* <span data-ttu-id="c7eec-158">Accounts</span><span class="sxs-lookup"><span data-stu-id="c7eec-158">Accounts</span></span>
* <span data-ttu-id="c7eec-159">Storage accounts</span><span class="sxs-lookup"><span data-stu-id="c7eec-159">Storage accounts</span></span>
* <span data-ttu-id="c7eec-160">Virtual networks</span><span class="sxs-lookup"><span data-stu-id="c7eec-160">Virtual networks</span></span>
* <span data-ttu-id="c7eec-161">Subnets</span><span class="sxs-lookup"><span data-stu-id="c7eec-161">Subnets</span></span>
* <span data-ttu-id="c7eec-162">Availability sets</span><span class="sxs-lookup"><span data-stu-id="c7eec-162">Availability sets</span></span>
* <span data-ttu-id="c7eec-163">Resource groups</span><span class="sxs-lookup"><span data-stu-id="c7eec-163">Resource groups</span></span>
* <span data-ttu-id="c7eec-164">Cloud services</span><span class="sxs-lookup"><span data-stu-id="c7eec-164">Cloud services</span></span>
* <span data-ttu-id="c7eec-165">Virtual machines</span><span class="sxs-lookup"><span data-stu-id="c7eec-165">Virtual machines</span></span>
* <span data-ttu-id="c7eec-166">Endpoints</span><span class="sxs-lookup"><span data-stu-id="c7eec-166">Endpoints</span></span>
* <span data-ttu-id="c7eec-167">Network security groups</span><span class="sxs-lookup"><span data-stu-id="c7eec-167">Network security groups</span></span>
* <span data-ttu-id="c7eec-168">Roles</span><span class="sxs-lookup"><span data-stu-id="c7eec-168">Roles</span></span>

<span data-ttu-id="c7eec-169">To ensure that the name provides enough information to determine to which resource it refers, you should use descriptive names.</span><span class="sxs-lookup"><span data-stu-id="c7eec-169">To ensure that the name provides enough information to determine to which resource it refers, you should use descriptive names.</span></span>

### <a name="computer-names"></a><span data-ttu-id="c7eec-170">Computer names</span><span class="sxs-lookup"><span data-stu-id="c7eec-170">Computer names</span></span>
<span data-ttu-id="c7eec-171">When administrators create a virtual machine, Microsoft Azure requires them to provide a virtual machine name of up to 15 characters.</span><span class="sxs-lookup"><span data-stu-id="c7eec-171">When administrators create a virtual machine, Microsoft Azure requires them to provide a virtual machine name of up to 15 characters.</span></span> <span data-ttu-id="c7eec-172">Azure uses the virtual machine name as the Azure virtual machine resource name.</span><span class="sxs-lookup"><span data-stu-id="c7eec-172">Azure uses the virtual machine name as the Azure virtual machine resource name.</span></span> <span data-ttu-id="c7eec-173">Azure uses the same name as the computer name for the operating system installed in the virtual machine.</span><span class="sxs-lookup"><span data-stu-id="c7eec-173">Azure uses the same name as the computer name for the operating system installed in the virtual machine.</span></span> <span data-ttu-id="c7eec-174">However, these names might not always be the same.</span><span class="sxs-lookup"><span data-stu-id="c7eec-174">However, these names might not always be the same.</span></span>

<span data-ttu-id="c7eec-175">In case a virtual machine is created from a .vhd image file that already contains an operating system, the virtual machine name in Azure can differ from the virtual machine’s operating system computer name.</span><span class="sxs-lookup"><span data-stu-id="c7eec-175">In case a virtual machine is created from a .vhd image file that already contains an operating system, the virtual machine name in Azure can differ from the virtual machine’s operating system computer name.</span></span> <span data-ttu-id="c7eec-176">This situation can add a degree of difficulty to virtual machine management, which we therefore do not recommend.</span><span class="sxs-lookup"><span data-stu-id="c7eec-176">This situation can add a degree of difficulty to virtual machine management, which we therefore do not recommend.</span></span> <span data-ttu-id="c7eec-177">Assign the Azure virtual machine resource the same name as the computer name that you assign to the operating system of that virtual machine.</span><span class="sxs-lookup"><span data-stu-id="c7eec-177">Assign the Azure virtual machine resource the same name as the computer name that you assign to the operating system of that virtual machine.</span></span>

<span data-ttu-id="c7eec-178">We recommend that the Azure virtual machine name be the same as the underlying operating system computer name.</span><span class="sxs-lookup"><span data-stu-id="c7eec-178">We recommend that the Azure virtual machine name be the same as the underlying operating system computer name.</span></span> <span data-ttu-id="c7eec-179">Because of this, follow the NetBIOS naming rules as described in [Microsoft NetBIOS computer naming conventions](https://support.microsoft.com/kb/188997/).</span><span class="sxs-lookup"><span data-stu-id="c7eec-179">Because of this, follow the NetBIOS naming rules as described in [Microsoft NetBIOS computer naming conventions](https://support.microsoft.com/kb/188997/).</span></span>

### <a name="storage-account-names"></a><span data-ttu-id="c7eec-180">Storage account names</span><span class="sxs-lookup"><span data-stu-id="c7eec-180">Storage account names</span></span>
<span data-ttu-id="c7eec-181">Storage accounts have special rules governing their names.</span><span class="sxs-lookup"><span data-stu-id="c7eec-181">Storage accounts have special rules governing their names.</span></span> <span data-ttu-id="c7eec-182">You can only use lowercase letters and numbers.</span><span class="sxs-lookup"><span data-stu-id="c7eec-182">You can only use lowercase letters and numbers.</span></span> <span data-ttu-id="c7eec-183">See [Create a storage account](../articles/storage/storage-create-storage-account.md#create-a-storage-account) for more information.</span><span class="sxs-lookup"><span data-stu-id="c7eec-183">See [Create a storage account](../articles/storage/storage-create-storage-account.md#create-a-storage-account) for more information.</span></span> <span data-ttu-id="c7eec-184">Additionally, the storage account name, in combination with core.windows.net, should be a globally valid, unique DNS name.</span><span class="sxs-lookup"><span data-stu-id="c7eec-184">Additionally, the storage account name, in combination with core.windows.net, should be a globally valid, unique DNS name.</span></span> <span data-ttu-id="c7eec-185">For instance, if the storage account is called mystorageaccount, the following resulting DNS names should be unique:</span><span class="sxs-lookup"><span data-stu-id="c7eec-185">For instance, if the storage account is called mystorageaccount, the following resulting DNS names should be unique:</span></span>

* <span data-ttu-id="c7eec-186">mystorageaccount.blob.core.windows.net</span><span class="sxs-lookup"><span data-stu-id="c7eec-186">mystorageaccount.blob.core.windows.net</span></span>
* <span data-ttu-id="c7eec-187">mystorageaccount.table.core.windows.net</span><span class="sxs-lookup"><span data-stu-id="c7eec-187">mystorageaccount.table.core.windows.net</span></span>
* <span data-ttu-id="c7eec-188">mystorageaccount.queue.core.windows.net</span><span class="sxs-lookup"><span data-stu-id="c7eec-188">mystorageaccount.queue.core.windows.net</span></span>

### <a name="azure-building-block-names"></a><span data-ttu-id="c7eec-189">Azure building block names</span><span class="sxs-lookup"><span data-stu-id="c7eec-189">Azure building block names</span></span>
<span data-ttu-id="c7eec-190">Azure building blocks are application-level services that Azure offers, typically to those applications taking advantage of PaaS features, although IaaS resources might leverage some, like SQL Database, Traffic Manager, and others.</span><span class="sxs-lookup"><span data-stu-id="c7eec-190">Azure building blocks are application-level services that Azure offers, typically to those applications taking advantage of PaaS features, although IaaS resources might leverage some, like SQL Database, Traffic Manager, and others.</span></span>

<span data-ttu-id="c7eec-191">These services rely on an array of artifacts that are created and registered in Azure.</span><span class="sxs-lookup"><span data-stu-id="c7eec-191">These services rely on an array of artifacts that are created and registered in Azure.</span></span> <span data-ttu-id="c7eec-192">These also need to be considered in your naming conventions.</span><span class="sxs-lookup"><span data-stu-id="c7eec-192">These also need to be considered in your naming conventions.</span></span>

### <a name="implementation-guidelines-recap-for-naming-conventions"></a><span data-ttu-id="c7eec-193">Implementation guidelines recap for naming conventions</span><span class="sxs-lookup"><span data-stu-id="c7eec-193">Implementation guidelines recap for naming conventions</span></span>
<span data-ttu-id="c7eec-194">Decision:</span><span class="sxs-lookup"><span data-stu-id="c7eec-194">Decision:</span></span>

* <span data-ttu-id="c7eec-195">What are your naming conventions for Azure resources?</span><span class="sxs-lookup"><span data-stu-id="c7eec-195">What are your naming conventions for Azure resources?</span></span>

<span data-ttu-id="c7eec-196">Task:</span><span class="sxs-lookup"><span data-stu-id="c7eec-196">Task:</span></span>

* <span data-ttu-id="c7eec-197">Define the naming conventions in terms of affixes, hierarchy, string values, and other policies for Azure resources.</span><span class="sxs-lookup"><span data-stu-id="c7eec-197">Define the naming conventions in terms of affixes, hierarchy, string values, and other policies for Azure resources.</span></span>

## <a name="2-subscriptions-and-accounts"></a><span data-ttu-id="c7eec-198">2. Subscriptions and accounts</span><span class="sxs-lookup"><span data-stu-id="c7eec-198">2. Subscriptions and accounts</span></span>
<span data-ttu-id="c7eec-199">In order to work with Azure, you need one or more Azure subscriptions.</span><span class="sxs-lookup"><span data-stu-id="c7eec-199">In order to work with Azure, you need one or more Azure subscriptions.</span></span> <span data-ttu-id="c7eec-200">Resources, like cloud services or virtual machines, exist in the context of those subscriptions.</span><span class="sxs-lookup"><span data-stu-id="c7eec-200">Resources, like cloud services or virtual machines, exist in the context of those subscriptions.</span></span>

* <span data-ttu-id="c7eec-201">Enterprise customers typically have an Enterprise Enrollment, which is the top-most resource in the hierarchy, and is associated to one or more accounts.</span><span class="sxs-lookup"><span data-stu-id="c7eec-201">Enterprise customers typically have an Enterprise Enrollment, which is the top-most resource in the hierarchy, and is associated to one or more accounts.</span></span>
* <span data-ttu-id="c7eec-202">For consumers and customers without an Enterprise Enrollment, the top-most resource is the account.</span><span class="sxs-lookup"><span data-stu-id="c7eec-202">For consumers and customers without an Enterprise Enrollment, the top-most resource is the account.</span></span>
* <span data-ttu-id="c7eec-203">Subscriptions are associated to accounts, and there can be one or more subscriptions per account.</span><span class="sxs-lookup"><span data-stu-id="c7eec-203">Subscriptions are associated to accounts, and there can be one or more subscriptions per account.</span></span> <span data-ttu-id="c7eec-204">Azure records billing information at the subscription level.</span><span class="sxs-lookup"><span data-stu-id="c7eec-204">Azure records billing information at the subscription level.</span></span>

<span data-ttu-id="c7eec-205">Due to the limit of two hierarchy levels on the Account/Subscription relationship, it is important to align the naming convention of accounts and subscriptions to the billing needs.</span><span class="sxs-lookup"><span data-stu-id="c7eec-205">Due to the limit of two hierarchy levels on the Account/Subscription relationship, it is important to align the naming convention of accounts and subscriptions to the billing needs.</span></span> <span data-ttu-id="c7eec-206">For instance, if a global company uses Azure, they might choose to have one account per region, and have subscriptions managed at the region level.</span><span class="sxs-lookup"><span data-stu-id="c7eec-206">For instance, if a global company uses Azure, they might choose to have one account per region, and have subscriptions managed at the region level.</span></span>

![](https://docstestmedia1.blob.core.windows.net/azure-media/includes/media/virtual-machines-common-infrastructure-service-guidelines/sub01.png)

<span data-ttu-id="c7eec-207">For instance, you might use this structure.</span><span class="sxs-lookup"><span data-stu-id="c7eec-207">For instance, you might use this structure.</span></span>

![](https://docstestmedia1.blob.core.windows.net/azure-media/includes/media/virtual-machines-common-infrastructure-service-guidelines/sub02.png)

<span data-ttu-id="c7eec-208">Following the same example, if a region decides to have more than one subscription associated to a particular group, then the naming convention should incorporate a way to encode the extra on either the account or the subscription name.</span><span class="sxs-lookup"><span data-stu-id="c7eec-208">Following the same example, if a region decides to have more than one subscription associated to a particular group, then the naming convention should incorporate a way to encode the extra on either the account or the subscription name.</span></span> <span data-ttu-id="c7eec-209">This organization allows massaging billing data to generate the new levels of hierarchy during billing reports.</span><span class="sxs-lookup"><span data-stu-id="c7eec-209">This organization allows massaging billing data to generate the new levels of hierarchy during billing reports.</span></span>

![](https://docstestmedia1.blob.core.windows.net/azure-media/includes/media/virtual-machines-common-infrastructure-service-guidelines/sub03.png)

<span data-ttu-id="c7eec-210">The organization could look like this.</span><span class="sxs-lookup"><span data-stu-id="c7eec-210">The organization could look like this.</span></span>

![](https://docstestmedia1.blob.core.windows.net/azure-media/includes/media/virtual-machines-common-infrastructure-service-guidelines/sub04.png)

<span data-ttu-id="c7eec-211">Microsoft provides detailed billing via a downloadable file for a single account or for all accounts in an enterprise agreement.</span><span class="sxs-lookup"><span data-stu-id="c7eec-211">Microsoft provides detailed billing via a downloadable file for a single account or for all accounts in an enterprise agreement.</span></span> <span data-ttu-id="c7eec-212">You can process this file, for example, by using Microsoft Excel.</span><span class="sxs-lookup"><span data-stu-id="c7eec-212">You can process this file, for example, by using Microsoft Excel.</span></span> <span data-ttu-id="c7eec-213">This process would ingest the data, partition the resources that encode more than one level of the hierarchy into separate columns, and use a pivot table or PowerPivot to provide dynamic reporting capabilities.</span><span class="sxs-lookup"><span data-stu-id="c7eec-213">This process would ingest the data, partition the resources that encode more than one level of the hierarchy into separate columns, and use a pivot table or PowerPivot to provide dynamic reporting capabilities.</span></span>

### <a name="implementation-guidelines-recap-for-subscriptions-and-accounts"></a><span data-ttu-id="c7eec-214">Implementation guidelines recap for subscriptions and accounts</span><span class="sxs-lookup"><span data-stu-id="c7eec-214">Implementation guidelines recap for subscriptions and accounts</span></span>
<span data-ttu-id="c7eec-215">Decision:</span><span class="sxs-lookup"><span data-stu-id="c7eec-215">Decision:</span></span>

* <span data-ttu-id="c7eec-216">What set of subscriptions and accounts do you need to host your IT workload or infrastructure?</span><span class="sxs-lookup"><span data-stu-id="c7eec-216">What set of subscriptions and accounts do you need to host your IT workload or infrastructure?</span></span>

<span data-ttu-id="c7eec-217">Task:</span><span class="sxs-lookup"><span data-stu-id="c7eec-217">Task:</span></span>

* <span data-ttu-id="c7eec-218">Create the set of subscriptions and accounts using your naming convention.</span><span class="sxs-lookup"><span data-stu-id="c7eec-218">Create the set of subscriptions and accounts using your naming convention.</span></span>

## <a name="3-storage"></a><span data-ttu-id="c7eec-219">3. Storage</span><span class="sxs-lookup"><span data-stu-id="c7eec-219">3. Storage</span></span>
<span data-ttu-id="c7eec-220">Azure Storage is an integral part of many Azure solutions.</span><span class="sxs-lookup"><span data-stu-id="c7eec-220">Azure Storage is an integral part of many Azure solutions.</span></span> <span data-ttu-id="c7eec-221">Azure Storage provides services for storing file data, unstructured data, and messages, and it is also part of the infrastructure supporting virtual machines.</span><span class="sxs-lookup"><span data-stu-id="c7eec-221">Azure Storage provides services for storing file data, unstructured data, and messages, and it is also part of the infrastructure supporting virtual machines.</span></span>

<span data-ttu-id="c7eec-222">There are two types of storage accounts available from Azure.</span><span class="sxs-lookup"><span data-stu-id="c7eec-222">There are two types of storage accounts available from Azure.</span></span> <span data-ttu-id="c7eec-223">A standard storage account gives you access to blob storage (used for storing Azure virtual machine disks), table storage, queue storage, and file storage.</span><span class="sxs-lookup"><span data-stu-id="c7eec-223">A standard storage account gives you access to blob storage (used for storing Azure virtual machine disks), table storage, queue storage, and file storage.</span></span> <span data-ttu-id="c7eec-224">Premium storage is designed for high-performance applications, such as SQL Servers in an AlwaysOn cluster, and currently supports Azure virtual machine disks only.</span><span class="sxs-lookup"><span data-stu-id="c7eec-224">Premium storage is designed for high-performance applications, such as SQL Servers in an AlwaysOn cluster, and currently supports Azure virtual machine disks only.</span></span>

<span data-ttu-id="c7eec-225">Storage accounts are bound to scalability targets.</span><span class="sxs-lookup"><span data-stu-id="c7eec-225">Storage accounts are bound to scalability targets.</span></span> <span data-ttu-id="c7eec-226">See [Microsoft Azure subscription and service limits, quotas, and constraints](../articles/azure-subscription-service-limits.md#storage-limits) to become familiar with current Azure storage limits.</span><span class="sxs-lookup"><span data-stu-id="c7eec-226">See [Microsoft Azure subscription and service limits, quotas, and constraints](../articles/azure-subscription-service-limits.md#storage-limits) to become familiar with current Azure storage limits.</span></span> <span data-ttu-id="c7eec-227">Also see [Azure storage scalability and performance targets](../articles/storage/storage-scalability-targets.md).</span><span class="sxs-lookup"><span data-stu-id="c7eec-227">Also see [Azure storage scalability and performance targets](../articles/storage/storage-scalability-targets.md).</span></span>

<span data-ttu-id="c7eec-228">Azure creates virtual machines with an operating system disk, a temporary disk, and zero or more optional data disks.</span><span class="sxs-lookup"><span data-stu-id="c7eec-228">Azure creates virtual machines with an operating system disk, a temporary disk, and zero or more optional data disks.</span></span> <span data-ttu-id="c7eec-229">The operating system disk and data disks are Azure page blobs, whereas the temporary disk is stored locally on the node where the machine lives.</span><span class="sxs-lookup"><span data-stu-id="c7eec-229">The operating system disk and data disks are Azure page blobs, whereas the temporary disk is stored locally on the node where the machine lives.</span></span> <span data-ttu-id="c7eec-230">This makes the temporary disk unfit for data that must persist during a system recycle, because the machine might silently be migrated from one node to another, losing any data in that disk.</span><span class="sxs-lookup"><span data-stu-id="c7eec-230">This makes the temporary disk unfit for data that must persist during a system recycle, because the machine might silently be migrated from one node to another, losing any data in that disk.</span></span> <span data-ttu-id="c7eec-231">Do not store anything on the temporary drive.</span><span class="sxs-lookup"><span data-stu-id="c7eec-231">Do not store anything on the temporary drive.</span></span>

<span data-ttu-id="c7eec-232">Operating system disks and data disks have a maximum size of 1023 gigabytes (GB) because the maximum size of a blob is 1024 GB and that must contain the metadata (footer) of the VHD file (a GB is 1024<sup>3</sup> bytes).</span><span class="sxs-lookup"><span data-stu-id="c7eec-232">Operating system disks and data disks have a maximum size of 1023 gigabytes (GB) because the maximum size of a blob is 1024 GB and that must contain the metadata (footer) of the VHD file (a GB is 1024<sup>3</sup> bytes).</span></span> <span data-ttu-id="c7eec-233">You can implement disk striping in Windows to surpass this limit.</span><span class="sxs-lookup"><span data-stu-id="c7eec-233">You can implement disk striping in Windows to surpass this limit.</span></span>

### <a name="striped-disks"></a><span data-ttu-id="c7eec-234">Striped disks</span><span class="sxs-lookup"><span data-stu-id="c7eec-234">Striped disks</span></span>
<span data-ttu-id="c7eec-235">Besides providing the ability to create disks larger than 1023 GB, in many instances, using striping for data disks enhances performance by allowing multiple blobs to back the storage for a single volume.</span><span class="sxs-lookup"><span data-stu-id="c7eec-235">Besides providing the ability to create disks larger than 1023 GB, in many instances, using striping for data disks enhances performance by allowing multiple blobs to back the storage for a single volume.</span></span> <span data-ttu-id="c7eec-236">With striping, the I/O required to write and read data from a single logical disk proceeds in parallel.</span><span class="sxs-lookup"><span data-stu-id="c7eec-236">With striping, the I/O required to write and read data from a single logical disk proceeds in parallel.</span></span>

<span data-ttu-id="c7eec-237">Azure imposes limits on the amount of data disks and bandwidth available, depending on the virtual machine size.</span><span class="sxs-lookup"><span data-stu-id="c7eec-237">Azure imposes limits on the amount of data disks and bandwidth available, depending on the virtual machine size.</span></span> <span data-ttu-id="c7eec-238">For details, see [Sizes for virtual machines](../articles/virtual-machines/linux/sizes.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="c7eec-238">For details, see [Sizes for virtual machines](../articles/virtual-machines/linux/sizes.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span></span>

<span data-ttu-id="c7eec-239">If you are using disk striping for Azure data disks, consider the following guidelines:</span><span class="sxs-lookup"><span data-stu-id="c7eec-239">If you are using disk striping for Azure data disks, consider the following guidelines:</span></span>

* <span data-ttu-id="c7eec-240">Data disks should always be the maximum size (1023 GB)</span><span class="sxs-lookup"><span data-stu-id="c7eec-240">Data disks should always be the maximum size (1023 GB)</span></span>
* <span data-ttu-id="c7eec-241">Attach the maximum data disks allowed for the virtual machine size</span><span class="sxs-lookup"><span data-stu-id="c7eec-241">Attach the maximum data disks allowed for the virtual machine size</span></span>
* <span data-ttu-id="c7eec-242">Use storage spaces configuration</span><span class="sxs-lookup"><span data-stu-id="c7eec-242">Use storage spaces configuration</span></span>
* <span data-ttu-id="c7eec-243">Use storage striping configuration</span><span class="sxs-lookup"><span data-stu-id="c7eec-243">Use storage striping configuration</span></span>
* <span data-ttu-id="c7eec-244">Avoid using Azure data disk caching options (caching policy = None)</span><span class="sxs-lookup"><span data-stu-id="c7eec-244">Avoid using Azure data disk caching options (caching policy = None)</span></span>

<span data-ttu-id="c7eec-245">For more information, see [Storage spaces - designing for performance](http://social.technet.microsoft.com/wiki/contents/articles/15200.storage-spaces-designing-for-performance.aspx).</span><span class="sxs-lookup"><span data-stu-id="c7eec-245">For more information, see [Storage spaces - designing for performance](http://social.technet.microsoft.com/wiki/contents/articles/15200.storage-spaces-designing-for-performance.aspx).</span></span>

### <a name="multiple-storage-accounts"></a><span data-ttu-id="c7eec-246">Multiple storage accounts</span><span class="sxs-lookup"><span data-stu-id="c7eec-246">Multiple storage accounts</span></span>
<span data-ttu-id="c7eec-247">Using multiple storage accounts to back the disks associated with many virtual machines ensures that the aggregated I/O of those disks is well below the scalability targets for each one of those storage accounts.</span><span class="sxs-lookup"><span data-stu-id="c7eec-247">Using multiple storage accounts to back the disks associated with many virtual machines ensures that the aggregated I/O of those disks is well below the scalability targets for each one of those storage accounts.</span></span>

<span data-ttu-id="c7eec-248">We recommend that you start with the deployment of one virtual machine per storage account.</span><span class="sxs-lookup"><span data-stu-id="c7eec-248">We recommend that you start with the deployment of one virtual machine per storage account.</span></span>

### <a name="storage-layout-design"></a><span data-ttu-id="c7eec-249">Storage layout design</span><span class="sxs-lookup"><span data-stu-id="c7eec-249">Storage layout design</span></span>
<span data-ttu-id="c7eec-250">To implement these strategies to implement the disk subsystem of the virtual machines with good performance, an IT workload or infrastructure typically takes advantage of many storage accounts.</span><span class="sxs-lookup"><span data-stu-id="c7eec-250">To implement these strategies to implement the disk subsystem of the virtual machines with good performance, an IT workload or infrastructure typically takes advantage of many storage accounts.</span></span> <span data-ttu-id="c7eec-251">These host many VHD blobs.</span><span class="sxs-lookup"><span data-stu-id="c7eec-251">These host many VHD blobs.</span></span> <span data-ttu-id="c7eec-252">In some instances, more than one blob is associated to one single volume in a virtual machine.</span><span class="sxs-lookup"><span data-stu-id="c7eec-252">In some instances, more than one blob is associated to one single volume in a virtual machine.</span></span>

<span data-ttu-id="c7eec-253">This situation can add complexity to the management tasks.</span><span class="sxs-lookup"><span data-stu-id="c7eec-253">This situation can add complexity to the management tasks.</span></span> <span data-ttu-id="c7eec-254">Designing a sound strategy for storage, including appropriate naming for the underlying disks and associated VHD blobs is key.</span><span class="sxs-lookup"><span data-stu-id="c7eec-254">Designing a sound strategy for storage, including appropriate naming for the underlying disks and associated VHD blobs is key.</span></span>

### <a name="implementation-guidelines-recap-for-storage"></a><span data-ttu-id="c7eec-255">Implementation guidelines recap for storage</span><span class="sxs-lookup"><span data-stu-id="c7eec-255">Implementation guidelines recap for storage</span></span>
<span data-ttu-id="c7eec-256">Decisions:</span><span class="sxs-lookup"><span data-stu-id="c7eec-256">Decisions:</span></span>

* <span data-ttu-id="c7eec-257">Do you need disk striping to create disks larger than 500 terabytes (TB)?</span><span class="sxs-lookup"><span data-stu-id="c7eec-257">Do you need disk striping to create disks larger than 500 terabytes (TB)?</span></span>
* <span data-ttu-id="c7eec-258">Do you need disk striping to achieve optimal performance for your workload?</span><span class="sxs-lookup"><span data-stu-id="c7eec-258">Do you need disk striping to achieve optimal performance for your workload?</span></span>
* <span data-ttu-id="c7eec-259">What set of storage accounts do you need to host your IT workload or infrastructure?</span><span class="sxs-lookup"><span data-stu-id="c7eec-259">What set of storage accounts do you need to host your IT workload or infrastructure?</span></span>

<span data-ttu-id="c7eec-260">Task:</span><span class="sxs-lookup"><span data-stu-id="c7eec-260">Task:</span></span>

* <span data-ttu-id="c7eec-261">Create the set of storage accounts using your naming convention.</span><span class="sxs-lookup"><span data-stu-id="c7eec-261">Create the set of storage accounts using your naming convention.</span></span> <span data-ttu-id="c7eec-262">You can use the Azure portal, the Azure classic portal, or the **New-AzureStorageAccount** PowerShell cmdlet.</span><span class="sxs-lookup"><span data-stu-id="c7eec-262">You can use the Azure portal, the Azure classic portal, or the **New-AzureStorageAccount** PowerShell cmdlet.</span></span>

## <a name="4-cloud-services"></a><span data-ttu-id="c7eec-263">4. Cloud services</span><span class="sxs-lookup"><span data-stu-id="c7eec-263">4. Cloud services</span></span>
<span data-ttu-id="c7eec-264">Cloud services are a fundamental building block in Azure service management, both for PaaS and IaaS services.</span><span class="sxs-lookup"><span data-stu-id="c7eec-264">Cloud services are a fundamental building block in Azure service management, both for PaaS and IaaS services.</span></span> <span data-ttu-id="c7eec-265">For PaaS, cloud services represent an association of roles whose instances can communicate among each other.</span><span class="sxs-lookup"><span data-stu-id="c7eec-265">For PaaS, cloud services represent an association of roles whose instances can communicate among each other.</span></span> <span data-ttu-id="c7eec-266">Cloud services are associated to a public virtual IP (VIP) address and a load balancer, which takes incoming traffic from the Internet and load balances it to the roles configured to receive that traffic.</span><span class="sxs-lookup"><span data-stu-id="c7eec-266">Cloud services are associated to a public virtual IP (VIP) address and a load balancer, which takes incoming traffic from the Internet and load balances it to the roles configured to receive that traffic.</span></span>

<span data-ttu-id="c7eec-267">In the case of IaaS, cloud services offer similar functionality, although in most cases, the load balancer functionality is used to forward traffic to specific TCP or UDP ports from the Internet to the many virtual machines within that cloud service.</span><span class="sxs-lookup"><span data-stu-id="c7eec-267">In the case of IaaS, cloud services offer similar functionality, although in most cases, the load balancer functionality is used to forward traffic to specific TCP or UDP ports from the Internet to the many virtual machines within that cloud service.</span></span>

> [!NOTE]
> <span data-ttu-id="c7eec-268">Cloud services do not exist in Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="c7eec-268">Cloud services do not exist in Azure Resource Manager.</span></span> <span data-ttu-id="c7eec-269">For an introduction to the advantages of Resource Manager, see [Azure compute, network and storage providers under Azure Resource Manager](../articles/virtual-machines/virtual-machines-windows-compare-deployment-models.md).</span><span class="sxs-lookup"><span data-stu-id="c7eec-269">For an introduction to the advantages of Resource Manager, see [Azure compute, network and storage providers under Azure Resource Manager](../articles/virtual-machines/virtual-machines-windows-compare-deployment-models.md).</span></span>
> 
> 

<span data-ttu-id="c7eec-270">Cloud service names are especially important in IaaS because Azure uses them as part of the default naming convention for disks.</span><span class="sxs-lookup"><span data-stu-id="c7eec-270">Cloud service names are especially important in IaaS because Azure uses them as part of the default naming convention for disks.</span></span> <span data-ttu-id="c7eec-271">The cloud service name can contain only letters, numbers, and hyphens.</span><span class="sxs-lookup"><span data-stu-id="c7eec-271">The cloud service name can contain only letters, numbers, and hyphens.</span></span> <span data-ttu-id="c7eec-272">The first and last character in the field must be a letter or number.</span><span class="sxs-lookup"><span data-stu-id="c7eec-272">The first and last character in the field must be a letter or number.</span></span>

<span data-ttu-id="c7eec-273">Azure exposes the cloud service names, because they are associated to the VIP, in the domain “cloudapp.net”.</span><span class="sxs-lookup"><span data-stu-id="c7eec-273">Azure exposes the cloud service names, because they are associated to the VIP, in the domain “cloudapp.net”.</span></span> <span data-ttu-id="c7eec-274">For a better user experience of the application, a vanity name should be configured as needed to replace the fully qualified cloud service name.</span><span class="sxs-lookup"><span data-stu-id="c7eec-274">For a better user experience of the application, a vanity name should be configured as needed to replace the fully qualified cloud service name.</span></span> <span data-ttu-id="c7eec-275">This is typically done with a CNAME record in your public DNS that maps the public DNS name of your resource (for example, www.contoso.com) to the DNS name of the cloud service hosting the resource (for example, the cloud service hosting the web servers for www.contoso.com).</span><span class="sxs-lookup"><span data-stu-id="c7eec-275">This is typically done with a CNAME record in your public DNS that maps the public DNS name of your resource (for example, www.contoso.com) to the DNS name of the cloud service hosting the resource (for example, the cloud service hosting the web servers for www.contoso.com).</span></span>

<span data-ttu-id="c7eec-276">In addition, the naming convention used for cloud services might need to tolerate exceptions because the cloud service names must be unique among all other Microsoft Azure cloud services, regardless of the Microsoft Azure tenant.</span><span class="sxs-lookup"><span data-stu-id="c7eec-276">In addition, the naming convention used for cloud services might need to tolerate exceptions because the cloud service names must be unique among all other Microsoft Azure cloud services, regardless of the Microsoft Azure tenant.</span></span>

<span data-ttu-id="c7eec-277">One important limitation of cloud services to consider is that only one virtual machine management operation can be performed at a time for all the virtual machines in the cloud service.</span><span class="sxs-lookup"><span data-stu-id="c7eec-277">One important limitation of cloud services to consider is that only one virtual machine management operation can be performed at a time for all the virtual machines in the cloud service.</span></span> <span data-ttu-id="c7eec-278">When you perform a virtual machine management operation on one virtual machine in the cloud service, you must wait until it is finished before you can perform a new management operation on another virtual machine.</span><span class="sxs-lookup"><span data-stu-id="c7eec-278">When you perform a virtual machine management operation on one virtual machine in the cloud service, you must wait until it is finished before you can perform a new management operation on another virtual machine.</span></span> <span data-ttu-id="c7eec-279">Therefore, you should keep the number of virtual machines in a cloud service low.</span><span class="sxs-lookup"><span data-stu-id="c7eec-279">Therefore, you should keep the number of virtual machines in a cloud service low.</span></span>

<span data-ttu-id="c7eec-280">Azure subscriptions can support a maximum of 200 cloud services.</span><span class="sxs-lookup"><span data-stu-id="c7eec-280">Azure subscriptions can support a maximum of 200 cloud services.</span></span>

### <a name="implementation-guidelines-recap-for-cloud-services"></a><span data-ttu-id="c7eec-281">Implementation guidelines recap for cloud services</span><span class="sxs-lookup"><span data-stu-id="c7eec-281">Implementation guidelines recap for cloud services</span></span>
<span data-ttu-id="c7eec-282">Decision:</span><span class="sxs-lookup"><span data-stu-id="c7eec-282">Decision:</span></span>

* <span data-ttu-id="c7eec-283">What set of cloud services do you need to host your IT workload or infrastructure?</span><span class="sxs-lookup"><span data-stu-id="c7eec-283">What set of cloud services do you need to host your IT workload or infrastructure?</span></span>

<span data-ttu-id="c7eec-284">Task:</span><span class="sxs-lookup"><span data-stu-id="c7eec-284">Task:</span></span>

* <span data-ttu-id="c7eec-285">Create the set of cloud services using your naming convention.</span><span class="sxs-lookup"><span data-stu-id="c7eec-285">Create the set of cloud services using your naming convention.</span></span> <span data-ttu-id="c7eec-286">You can use the Azure classic portal or the **New-AzureService** PowerShell cmdlet.</span><span class="sxs-lookup"><span data-stu-id="c7eec-286">You can use the Azure classic portal or the **New-AzureService** PowerShell cmdlet.</span></span>

## <a name="5-virtual-networks"></a><span data-ttu-id="c7eec-287">5. Virtual networks</span><span class="sxs-lookup"><span data-stu-id="c7eec-287">5. Virtual networks</span></span>
<span data-ttu-id="c7eec-288">The next logical step is to create the virtual networks necessary to support the communications across the virtual machines in the solution.</span><span class="sxs-lookup"><span data-stu-id="c7eec-288">The next logical step is to create the virtual networks necessary to support the communications across the virtual machines in the solution.</span></span> <span data-ttu-id="c7eec-289">Although it is possible to host multiple virtual machines of an IT workload within just one cloud service, virtual networks are recommended.</span><span class="sxs-lookup"><span data-stu-id="c7eec-289">Although it is possible to host multiple virtual machines of an IT workload within just one cloud service, virtual networks are recommended.</span></span>

<span data-ttu-id="c7eec-290">Virtual networks are a container for virtual machines for which you can also specify subnets, custom addressing, and DNS configuration options.</span><span class="sxs-lookup"><span data-stu-id="c7eec-290">Virtual networks are a container for virtual machines for which you can also specify subnets, custom addressing, and DNS configuration options.</span></span> <span data-ttu-id="c7eec-291">Virtual machines within the same virtual network can communicate directly with other computers within the same virtual network, regardless of which cloud service they are a member of.</span><span class="sxs-lookup"><span data-stu-id="c7eec-291">Virtual machines within the same virtual network can communicate directly with other computers within the same virtual network, regardless of which cloud service they are a member of.</span></span> <span data-ttu-id="c7eec-292">Within the virtual network, this communication remains private, without the need for the communication to go through the public endpoints.</span><span class="sxs-lookup"><span data-stu-id="c7eec-292">Within the virtual network, this communication remains private, without the need for the communication to go through the public endpoints.</span></span> <span data-ttu-id="c7eec-293">This communication can occur via IP address, or by name, using a DNS server installed in the virtual network, or on-premises, if the virtual machine is connected to the corporate network.</span><span class="sxs-lookup"><span data-stu-id="c7eec-293">This communication can occur via IP address, or by name, using a DNS server installed in the virtual network, or on-premises, if the virtual machine is connected to the corporate network.</span></span>

### <a name="site-connectivity"></a><span data-ttu-id="c7eec-294">Site connectivity</span><span class="sxs-lookup"><span data-stu-id="c7eec-294">Site connectivity</span></span>
<span data-ttu-id="c7eec-295">If on-premises users and computers do not require ongoing connectivity to virtual machines in an Azure virtual network, create a cloud-only virtual network.</span><span class="sxs-lookup"><span data-stu-id="c7eec-295">If on-premises users and computers do not require ongoing connectivity to virtual machines in an Azure virtual network, create a cloud-only virtual network.</span></span>

![](https://docstestmedia1.blob.core.windows.net/azure-media/includes/media/virtual-machines-common-infrastructure-service-guidelines/vnet01.png)

<span data-ttu-id="c7eec-296">This is typically for Internet-facing workloads, such as an Internet-based web server.</span><span class="sxs-lookup"><span data-stu-id="c7eec-296">This is typically for Internet-facing workloads, such as an Internet-based web server.</span></span> <span data-ttu-id="c7eec-297">You can manage these virtual machines using Remote Desktop connections, remote PowerShell sessions, Secure Shell (SSH) connections, and point-to-site VPN connections.</span><span class="sxs-lookup"><span data-stu-id="c7eec-297">You can manage these virtual machines using Remote Desktop connections, remote PowerShell sessions, Secure Shell (SSH) connections, and point-to-site VPN connections.</span></span>

<span data-ttu-id="c7eec-298">Because they do not connect to your on-premises network, cloud-only virtual networks can use any portion of the private IP address space.</span><span class="sxs-lookup"><span data-stu-id="c7eec-298">Because they do not connect to your on-premises network, cloud-only virtual networks can use any portion of the private IP address space.</span></span>

<span data-ttu-id="c7eec-299">If on-premises users and computers require ongoing connectivity to virtual machines in an Azure virtual network, create a cross-premises virtual network and connect it to your on-premises network with an ExpressRoute or site-to-site VPN connection.</span><span class="sxs-lookup"><span data-stu-id="c7eec-299">If on-premises users and computers require ongoing connectivity to virtual machines in an Azure virtual network, create a cross-premises virtual network and connect it to your on-premises network with an ExpressRoute or site-to-site VPN connection.</span></span>

![](https://docstestmedia1.blob.core.windows.net/azure-media/includes/media/virtual-machines-common-infrastructure-service-guidelines/vnet02.png)

<span data-ttu-id="c7eec-300">In this configuration, the Azure virtual network is essentially a cloud-based extension of your on-premises network.</span><span class="sxs-lookup"><span data-stu-id="c7eec-300">In this configuration, the Azure virtual network is essentially a cloud-based extension of your on-premises network.</span></span>

<span data-ttu-id="c7eec-301">Because they connect to your on-premises network, cross-premises virtual networks must use a portion of the address space used by your organization that is unique, and the routing infrastructure must support routing traffic to that portion by forwarding it to your on-premises VPN device.</span><span class="sxs-lookup"><span data-stu-id="c7eec-301">Because they connect to your on-premises network, cross-premises virtual networks must use a portion of the address space used by your organization that is unique, and the routing infrastructure must support routing traffic to that portion by forwarding it to your on-premises VPN device.</span></span>

<span data-ttu-id="c7eec-302">To allow packets to travel from your cross-premises virtual network to your on-premises network, you must configure the set of relevant on-premises address prefixes as part of the local network definition for the virtual network.</span><span class="sxs-lookup"><span data-stu-id="c7eec-302">To allow packets to travel from your cross-premises virtual network to your on-premises network, you must configure the set of relevant on-premises address prefixes as part of the local network definition for the virtual network.</span></span> <span data-ttu-id="c7eec-303">Depending on the address space of the virtual network and the set of relevant on-premises locations, there can be many address prefixes in the local network.</span><span class="sxs-lookup"><span data-stu-id="c7eec-303">Depending on the address space of the virtual network and the set of relevant on-premises locations, there can be many address prefixes in the local network.</span></span>

<span data-ttu-id="c7eec-304">You can convert a cloud-only virtual network to a cross-premises virtual network, but it will most likely require you to renumber your virtual network address space, your subnets, and the virtual machines that use static Azure-assigned IP addresses, known as Dynamic IPs (DIPs).</span><span class="sxs-lookup"><span data-stu-id="c7eec-304">You can convert a cloud-only virtual network to a cross-premises virtual network, but it will most likely require you to renumber your virtual network address space, your subnets, and the virtual machines that use static Azure-assigned IP addresses, known as Dynamic IPs (DIPs).</span></span> <span data-ttu-id="c7eec-305">Therefore, carefully consider the type of virtual networks you need (cloud-only versus cross-premises) before you create them.</span><span class="sxs-lookup"><span data-stu-id="c7eec-305">Therefore, carefully consider the type of virtual networks you need (cloud-only versus cross-premises) before you create them.</span></span>

### <a name="subnets"></a><span data-ttu-id="c7eec-306">Subnets</span><span class="sxs-lookup"><span data-stu-id="c7eec-306">Subnets</span></span>
<span data-ttu-id="c7eec-307">Subnets allow you to organize resources that are related, either logically (for example, one subnet for virtual machines associated to the same application), or physically (for example, one subnet per cloud service), or to employ subnet isolation techniques for added security.</span><span class="sxs-lookup"><span data-stu-id="c7eec-307">Subnets allow you to organize resources that are related, either logically (for example, one subnet for virtual machines associated to the same application), or physically (for example, one subnet per cloud service), or to employ subnet isolation techniques for added security.</span></span>

<span data-ttu-id="c7eec-308">For cross-premises virtual networks, you should design subnets with the same conventions that you use for on-premises resources, keeping in mind that **Azure always uses the first three IP addresses of the address space for each subnet**.</span><span class="sxs-lookup"><span data-stu-id="c7eec-308">For cross-premises virtual networks, you should design subnets with the same conventions that you use for on-premises resources, keeping in mind that **Azure always uses the first three IP addresses of the address space for each subnet**.</span></span> <span data-ttu-id="c7eec-309">To determine the number of addresses needed for the subnet, count the number of virtual machines that you need now, estimate for future growth, and then use the following table to determine the size of the subnet.</span><span class="sxs-lookup"><span data-stu-id="c7eec-309">To determine the number of addresses needed for the subnet, count the number of virtual machines that you need now, estimate for future growth, and then use the following table to determine the size of the subnet.</span></span>

| <span data-ttu-id="c7eec-310">Number of virtual machines needed</span><span class="sxs-lookup"><span data-stu-id="c7eec-310">Number of virtual machines needed</span></span> | <span data-ttu-id="c7eec-311">Number of host bits needed</span><span class="sxs-lookup"><span data-stu-id="c7eec-311">Number of host bits needed</span></span> | <span data-ttu-id="c7eec-312">Size of the subnet</span><span class="sxs-lookup"><span data-stu-id="c7eec-312">Size of the subnet</span></span> |
| --- | --- | --- |
| <span data-ttu-id="c7eec-313">1–3</span><span class="sxs-lookup"><span data-stu-id="c7eec-313">1–3</span></span> |<span data-ttu-id="c7eec-314">3</span><span class="sxs-lookup"><span data-stu-id="c7eec-314">3</span></span> |<span data-ttu-id="c7eec-315">/29</span><span class="sxs-lookup"><span data-stu-id="c7eec-315">/29</span></span> |
| <span data-ttu-id="c7eec-316">4–11</span><span class="sxs-lookup"><span data-stu-id="c7eec-316">4–11</span></span> |<span data-ttu-id="c7eec-317">4</span><span class="sxs-lookup"><span data-stu-id="c7eec-317">4</span></span> |<span data-ttu-id="c7eec-318">/28</span><span class="sxs-lookup"><span data-stu-id="c7eec-318">/28</span></span> |
| <span data-ttu-id="c7eec-319">12–27</span><span class="sxs-lookup"><span data-stu-id="c7eec-319">12–27</span></span> |<span data-ttu-id="c7eec-320">5</span><span class="sxs-lookup"><span data-stu-id="c7eec-320">5</span></span> |<span data-ttu-id="c7eec-321">/27</span><span class="sxs-lookup"><span data-stu-id="c7eec-321">/27</span></span> |
| <span data-ttu-id="c7eec-322">28–59</span><span class="sxs-lookup"><span data-stu-id="c7eec-322">28–59</span></span> |<span data-ttu-id="c7eec-323">6</span><span class="sxs-lookup"><span data-stu-id="c7eec-323">6</span></span> |<span data-ttu-id="c7eec-324">/26</span><span class="sxs-lookup"><span data-stu-id="c7eec-324">/26</span></span> |
| <span data-ttu-id="c7eec-325">60–123</span><span class="sxs-lookup"><span data-stu-id="c7eec-325">60–123</span></span> |<span data-ttu-id="c7eec-326">7</span><span class="sxs-lookup"><span data-stu-id="c7eec-326">7</span></span> |<span data-ttu-id="c7eec-327">/25</span><span class="sxs-lookup"><span data-stu-id="c7eec-327">/25</span></span> |

> [!NOTE]
> <span data-ttu-id="c7eec-328">For normal on-premises subnets, the maximum number of host addresses for a subnet with n host bits is 2<sup>n</sup> – 2.</span><span class="sxs-lookup"><span data-stu-id="c7eec-328">For normal on-premises subnets, the maximum number of host addresses for a subnet with n host bits is 2<sup>n</sup> – 2.</span></span> <span data-ttu-id="c7eec-329">For an Azure subnet, the maximum number of host addresses for a subnet with n host bits is 2<sup>n</sup> – 5 (2 plus 3 for the addresses that Azure uses on each subnet).</span><span class="sxs-lookup"><span data-stu-id="c7eec-329">For an Azure subnet, the maximum number of host addresses for a subnet with n host bits is 2<sup>n</sup> – 5 (2 plus 3 for the addresses that Azure uses on each subnet).</span></span>
> 
> 

<span data-ttu-id="c7eec-330">If you choose a subnet size that is too small, you will have to renumber and redeploy the virtual machines in the subnet.</span><span class="sxs-lookup"><span data-stu-id="c7eec-330">If you choose a subnet size that is too small, you will have to renumber and redeploy the virtual machines in the subnet.</span></span>

### <a name="implementation-guidelines-recap-for-virtual-networks"></a><span data-ttu-id="c7eec-331">Implementation guidelines recap for virtual networks</span><span class="sxs-lookup"><span data-stu-id="c7eec-331">Implementation guidelines recap for virtual networks</span></span>
<span data-ttu-id="c7eec-332">Decisions:</span><span class="sxs-lookup"><span data-stu-id="c7eec-332">Decisions:</span></span>

* <span data-ttu-id="c7eec-333">What type of virtual network do you need to host your IT workload or infrastructure (cloud-only or cross-premises)?</span><span class="sxs-lookup"><span data-stu-id="c7eec-333">What type of virtual network do you need to host your IT workload or infrastructure (cloud-only or cross-premises)?</span></span>
* <span data-ttu-id="c7eec-334">For cross-premises virtual networks, how much address space do you need to host the subnets and virtual machines now and for reasonable expansion in the future?</span><span class="sxs-lookup"><span data-stu-id="c7eec-334">For cross-premises virtual networks, how much address space do you need to host the subnets and virtual machines now and for reasonable expansion in the future?</span></span>

<span data-ttu-id="c7eec-335">Tasks:</span><span class="sxs-lookup"><span data-stu-id="c7eec-335">Tasks:</span></span>

* <span data-ttu-id="c7eec-336">Define the address space for the virtual network.</span><span class="sxs-lookup"><span data-stu-id="c7eec-336">Define the address space for the virtual network.</span></span>
* <span data-ttu-id="c7eec-337">Define the set of subnets and the address space for each.</span><span class="sxs-lookup"><span data-stu-id="c7eec-337">Define the set of subnets and the address space for each.</span></span>
* <span data-ttu-id="c7eec-338">For cross-premises virtual networks, define the set of local network address spaces for the on-premises locations that the virtual machines in the virtual network need to reach.</span><span class="sxs-lookup"><span data-stu-id="c7eec-338">For cross-premises virtual networks, define the set of local network address spaces for the on-premises locations that the virtual machines in the virtual network need to reach.</span></span>
* <span data-ttu-id="c7eec-339">Create the virtual network using your naming convention.</span><span class="sxs-lookup"><span data-stu-id="c7eec-339">Create the virtual network using your naming convention.</span></span> <span data-ttu-id="c7eec-340">You can use the Azure portal or the Azure classic portal.</span><span class="sxs-lookup"><span data-stu-id="c7eec-340">You can use the Azure portal or the Azure classic portal.</span></span>

## <a name="6-availability-sets"></a><span data-ttu-id="c7eec-341">6. Availability sets</span><span class="sxs-lookup"><span data-stu-id="c7eec-341">6. Availability sets</span></span>
<span data-ttu-id="c7eec-342">In Azure PaaS, cloud services contain one or more roles that execute application code.</span><span class="sxs-lookup"><span data-stu-id="c7eec-342">In Azure PaaS, cloud services contain one or more roles that execute application code.</span></span> <span data-ttu-id="c7eec-343">Roles can have one or more virtual machine instances that the fabric automatically provisions.</span><span class="sxs-lookup"><span data-stu-id="c7eec-343">Roles can have one or more virtual machine instances that the fabric automatically provisions.</span></span> <span data-ttu-id="c7eec-344">At any given time, Azure might update the instances in these roles, but because they are part of the same role, Azure knows not to update all at the same time to prevent a service outage for the role.</span><span class="sxs-lookup"><span data-stu-id="c7eec-344">At any given time, Azure might update the instances in these roles, but because they are part of the same role, Azure knows not to update all at the same time to prevent a service outage for the role.</span></span>

<span data-ttu-id="c7eec-345">In Azure IaaS, the concept of role is not significant, because each IaaS virtual machine represents a role with a single instance.</span><span class="sxs-lookup"><span data-stu-id="c7eec-345">In Azure IaaS, the concept of role is not significant, because each IaaS virtual machine represents a role with a single instance.</span></span> <span data-ttu-id="c7eec-346">In order to hint to Azure not to bring down two or more associated machines at the same time (for example, for operating system updates of the node where they reside), the concept of availability sets was introduced.</span><span class="sxs-lookup"><span data-stu-id="c7eec-346">In order to hint to Azure not to bring down two or more associated machines at the same time (for example, for operating system updates of the node where they reside), the concept of availability sets was introduced.</span></span> <span data-ttu-id="c7eec-347">An availability set tells Azure not to bring down all the machines in the same availability set at the same time to prevent a service outage.</span><span class="sxs-lookup"><span data-stu-id="c7eec-347">An availability set tells Azure not to bring down all the machines in the same availability set at the same time to prevent a service outage.</span></span> <span data-ttu-id="c7eec-348">The virtual machine members of an availability set have a 99.95% uptime service level agreement.</span><span class="sxs-lookup"><span data-stu-id="c7eec-348">The virtual machine members of an availability set have a 99.95% uptime service level agreement.</span></span>

<span data-ttu-id="c7eec-349">Availability sets must be part of the high-availability planning of the solution.</span><span class="sxs-lookup"><span data-stu-id="c7eec-349">Availability sets must be part of the high-availability planning of the solution.</span></span> <span data-ttu-id="c7eec-350">An availability set is defined as the set of virtual machines within a single cloud service that have the same availability set name.</span><span class="sxs-lookup"><span data-stu-id="c7eec-350">An availability set is defined as the set of virtual machines within a single cloud service that have the same availability set name.</span></span> <span data-ttu-id="c7eec-351">You can create availability sets after you create cloud services.</span><span class="sxs-lookup"><span data-stu-id="c7eec-351">You can create availability sets after you create cloud services.</span></span>

### <a name="implementation-guidelines-recap-for-availability-sets"></a><span data-ttu-id="c7eec-352">Implementation guidelines recap for availability sets</span><span class="sxs-lookup"><span data-stu-id="c7eec-352">Implementation guidelines recap for availability sets</span></span>
<span data-ttu-id="c7eec-353">Decision:</span><span class="sxs-lookup"><span data-stu-id="c7eec-353">Decision:</span></span>

* <span data-ttu-id="c7eec-354">How many availability sets do you need for the various roles and tiers in your IT workload or infrastructure?</span><span class="sxs-lookup"><span data-stu-id="c7eec-354">How many availability sets do you need for the various roles and tiers in your IT workload or infrastructure?</span></span>

<span data-ttu-id="c7eec-355">Task:</span><span class="sxs-lookup"><span data-stu-id="c7eec-355">Task:</span></span>

* <span data-ttu-id="c7eec-356">Define the set of availability sets using your naming convention.</span><span class="sxs-lookup"><span data-stu-id="c7eec-356">Define the set of availability sets using your naming convention.</span></span> <span data-ttu-id="c7eec-357">You can associate a virtual machine to an availability set when you create the virtual machines, or you can associate a virtual machine to an availability set after the virtual machine has been created.</span><span class="sxs-lookup"><span data-stu-id="c7eec-357">You can associate a virtual machine to an availability set when you create the virtual machines, or you can associate a virtual machine to an availability set after the virtual machine has been created.</span></span>

## <a name="7-virtual-machines"></a><span data-ttu-id="c7eec-358">7. Virtual machines</span><span class="sxs-lookup"><span data-stu-id="c7eec-358">7. Virtual machines</span></span>
<span data-ttu-id="c7eec-359">In Azure PaaS, Azure manages virtual machines and their associated disks.</span><span class="sxs-lookup"><span data-stu-id="c7eec-359">In Azure PaaS, Azure manages virtual machines and their associated disks.</span></span> <span data-ttu-id="c7eec-360">You must create and name cloud services and roles, and then Azure creates instances associated to those roles.</span><span class="sxs-lookup"><span data-stu-id="c7eec-360">You must create and name cloud services and roles, and then Azure creates instances associated to those roles.</span></span> <span data-ttu-id="c7eec-361">In the case of Azure IaaS, it is up to you to provide names for the cloud services, virtual machines, and associated disks.</span><span class="sxs-lookup"><span data-stu-id="c7eec-361">In the case of Azure IaaS, it is up to you to provide names for the cloud services, virtual machines, and associated disks.</span></span>

<span data-ttu-id="c7eec-362">To reduce administrative burden, the Azure classic portal uses the computer name as a suggestion for the default name for the associated cloud service (in the case the customer chooses to create a new cloud service as part of the virtual machine creation wizard).</span><span class="sxs-lookup"><span data-stu-id="c7eec-362">To reduce administrative burden, the Azure classic portal uses the computer name as a suggestion for the default name for the associated cloud service (in the case the customer chooses to create a new cloud service as part of the virtual machine creation wizard).</span></span>

<span data-ttu-id="c7eec-363">In addition, Azure names disks and their supporting VHD blobs using a combination of the cloud service name, the computer name, and the creation date.</span><span class="sxs-lookup"><span data-stu-id="c7eec-363">In addition, Azure names disks and their supporting VHD blobs using a combination of the cloud service name, the computer name, and the creation date.</span></span>

<span data-ttu-id="c7eec-364">In general, the number of disks is much greater than the number of virtual machines.</span><span class="sxs-lookup"><span data-stu-id="c7eec-364">In general, the number of disks is much greater than the number of virtual machines.</span></span> <span data-ttu-id="c7eec-365">You should be careful when manipulating virtual machines to prevent orphaning disks.</span><span class="sxs-lookup"><span data-stu-id="c7eec-365">You should be careful when manipulating virtual machines to prevent orphaning disks.</span></span> <span data-ttu-id="c7eec-366">Also, disks can be deleted without deleting the supporting blob.</span><span class="sxs-lookup"><span data-stu-id="c7eec-366">Also, disks can be deleted without deleting the supporting blob.</span></span> <span data-ttu-id="c7eec-367">If this is the case, the blob remains in the storage account until manually deleted.</span><span class="sxs-lookup"><span data-stu-id="c7eec-367">If this is the case, the blob remains in the storage account until manually deleted.</span></span>

### <a name="implementation-guidelines-recap-for-virtual-machines"></a><span data-ttu-id="c7eec-368">Implementation guidelines recap for virtual machines</span><span class="sxs-lookup"><span data-stu-id="c7eec-368">Implementation guidelines recap for virtual machines</span></span>
<span data-ttu-id="c7eec-369">Decision:</span><span class="sxs-lookup"><span data-stu-id="c7eec-369">Decision:</span></span>

* <span data-ttu-id="c7eec-370">How many virtual machines do you need to provide for the IT workload or infrastructure?</span><span class="sxs-lookup"><span data-stu-id="c7eec-370">How many virtual machines do you need to provide for the IT workload or infrastructure?</span></span>

<span data-ttu-id="c7eec-371">Tasks:</span><span class="sxs-lookup"><span data-stu-id="c7eec-371">Tasks:</span></span>

* <span data-ttu-id="c7eec-372">Define each virtual machine name using your naming convention.</span><span class="sxs-lookup"><span data-stu-id="c7eec-372">Define each virtual machine name using your naming convention.</span></span>
* <span data-ttu-id="c7eec-373">Create your virtual machines with the Azure portal, the Azure classic portal, the **New-AzureVM** PowerShell cmdlet, the Azure CLI, or with Resource Manager templates.</span><span class="sxs-lookup"><span data-stu-id="c7eec-373">Create your virtual machines with the Azure portal, the Azure classic portal, the **New-AzureVM** PowerShell cmdlet, the Azure CLI, or with Resource Manager templates.</span></span>

## <a name="example-of-an-it-workload-the-contoso-financial-analysis-engine"></a><span data-ttu-id="c7eec-374">Example of an IT workload: The Contoso financial analysis engine</span><span class="sxs-lookup"><span data-stu-id="c7eec-374">Example of an IT workload: The Contoso financial analysis engine</span></span>
<span data-ttu-id="c7eec-375">The Contoso Corporation has developed a next-generation financial analysis engine with leading-edge proprietary algorithms to aid in futures market trading.</span><span class="sxs-lookup"><span data-stu-id="c7eec-375">The Contoso Corporation has developed a next-generation financial analysis engine with leading-edge proprietary algorithms to aid in futures market trading.</span></span> <span data-ttu-id="c7eec-376">They want to make this engine available to its customers as a set of servers in Azure, which consist of:</span><span class="sxs-lookup"><span data-stu-id="c7eec-376">They want to make this engine available to its customers as a set of servers in Azure, which consist of:</span></span>

* <span data-ttu-id="c7eec-377">Two (and eventually more) IIS-based web servers running custom web services in a web tier</span><span class="sxs-lookup"><span data-stu-id="c7eec-377">Two (and eventually more) IIS-based web servers running custom web services in a web tier</span></span>
* <span data-ttu-id="c7eec-378">Two (and eventually more) IIS-based application servers that perform the calculations in an application tier</span><span class="sxs-lookup"><span data-stu-id="c7eec-378">Two (and eventually more) IIS-based application servers that perform the calculations in an application tier</span></span>
* <span data-ttu-id="c7eec-379">A SQL Server 2014 cluster with AlwaysOn availability groups (two SQL Servers and a majority node witness) that stores historical and ongoing calculation data in a database tier</span><span class="sxs-lookup"><span data-stu-id="c7eec-379">A SQL Server 2014 cluster with AlwaysOn availability groups (two SQL Servers and a majority node witness) that stores historical and ongoing calculation data in a database tier</span></span>
* <span data-ttu-id="c7eec-380">Two Active Directory domain controllers for a self-contained forest and domain in the authentication tier, which is required by SQL Server clustering</span><span class="sxs-lookup"><span data-stu-id="c7eec-380">Two Active Directory domain controllers for a self-contained forest and domain in the authentication tier, which is required by SQL Server clustering</span></span>
* <span data-ttu-id="c7eec-381">All of the servers are located on two subnets; a front end subnet for the web servers and a back end subnet for the application servers, a SQL Server 2014 cluster, and domain controllers</span><span class="sxs-lookup"><span data-stu-id="c7eec-381">All of the servers are located on two subnets; a front end subnet for the web servers and a back end subnet for the application servers, a SQL Server 2014 cluster, and domain controllers</span></span>

![](https://docstestmedia1.blob.core.windows.net/azure-media/includes/media/virtual-machines-common-infrastructure-service-guidelines/example-tiers.png)

<span data-ttu-id="c7eec-382">Incoming secure web traffic from the Contoso clients on the Internet needs to be load-balanced among the web servers.</span><span class="sxs-lookup"><span data-stu-id="c7eec-382">Incoming secure web traffic from the Contoso clients on the Internet needs to be load-balanced among the web servers.</span></span> <span data-ttu-id="c7eec-383">Calculation request traffic in the form of HTTP requests from the web servers needs to be balanced among the application servers.</span><span class="sxs-lookup"><span data-stu-id="c7eec-383">Calculation request traffic in the form of HTTP requests from the web servers needs to be balanced among the application servers.</span></span> <span data-ttu-id="c7eec-384">Additionally, the engine must be designed for high availability.</span><span class="sxs-lookup"><span data-stu-id="c7eec-384">Additionally, the engine must be designed for high availability.</span></span>

<span data-ttu-id="c7eec-385">The resulting design must incorporate:</span><span class="sxs-lookup"><span data-stu-id="c7eec-385">The resulting design must incorporate:</span></span>

* <span data-ttu-id="c7eec-386">A Contoso Azure subscription and account</span><span class="sxs-lookup"><span data-stu-id="c7eec-386">A Contoso Azure subscription and account</span></span>
* <span data-ttu-id="c7eec-387">Storage accounts</span><span class="sxs-lookup"><span data-stu-id="c7eec-387">Storage accounts</span></span>
* <span data-ttu-id="c7eec-388">A virtual network with two subnets</span><span class="sxs-lookup"><span data-stu-id="c7eec-388">A virtual network with two subnets</span></span>
* <span data-ttu-id="c7eec-389">Availability sets for the sets of servers with a similar role</span><span class="sxs-lookup"><span data-stu-id="c7eec-389">Availability sets for the sets of servers with a similar role</span></span>
* <span data-ttu-id="c7eec-390">Virtual machines</span><span class="sxs-lookup"><span data-stu-id="c7eec-390">Virtual machines</span></span>
* <span data-ttu-id="c7eec-391">A single resource group</span><span class="sxs-lookup"><span data-stu-id="c7eec-391">A single resource group</span></span>

<span data-ttu-id="c7eec-392">All of the above will follow these Contoso naming conventions:</span><span class="sxs-lookup"><span data-stu-id="c7eec-392">All of the above will follow these Contoso naming conventions:</span></span>

* <span data-ttu-id="c7eec-393">Contoso uses [IT workload]-[location]-[Azure resource] as a prefix.</span><span class="sxs-lookup"><span data-stu-id="c7eec-393">Contoso uses [IT workload]-[location]-[Azure resource] as a prefix.</span></span> <span data-ttu-id="c7eec-394">For this example, "azfae" (Azure Financial Analysis Engine) is the IT workload name and "use" (East US 2) is the location, because most of Contoso's initial customers are on the East Coast of the United States.</span><span class="sxs-lookup"><span data-stu-id="c7eec-394">For this example, "azfae" (Azure Financial Analysis Engine) is the IT workload name and "use" (East US 2) is the location, because most of Contoso's initial customers are on the East Coast of the United States.</span></span>
* <span data-ttu-id="c7eec-395">Storage accounts use contosoazfaeusesa[description] Note that contoso was added to the prefix to provide uniqueness, and storage account names do not support the use of hyphens.</span><span class="sxs-lookup"><span data-stu-id="c7eec-395">Storage accounts use contosoazfaeusesa[description] Note that contoso was added to the prefix to provide uniqueness, and storage account names do not support the use of hyphens.</span></span>
* <span data-ttu-id="c7eec-396">Virtual networks use AZFAE-USE-VN[number].</span><span class="sxs-lookup"><span data-stu-id="c7eec-396">Virtual networks use AZFAE-USE-VN[number].</span></span>
* <span data-ttu-id="c7eec-397">Availability sets use azfae-use-as-[role].</span><span class="sxs-lookup"><span data-stu-id="c7eec-397">Availability sets use azfae-use-as-[role].</span></span>
* <span data-ttu-id="c7eec-398">Virtual machine names use azfae-use-vm-[vmname].</span><span class="sxs-lookup"><span data-stu-id="c7eec-398">Virtual machine names use azfae-use-vm-[vmname].</span></span>

### <a name="azure-subscriptions-and-accounts"></a><span data-ttu-id="c7eec-399">Azure subscriptions and accounts</span><span class="sxs-lookup"><span data-stu-id="c7eec-399">Azure subscriptions and accounts</span></span>
<span data-ttu-id="c7eec-400">Contoso is using their Enterprise subscription, named Contoso Enterprise Subscription, to provide billing for this IT workload.</span><span class="sxs-lookup"><span data-stu-id="c7eec-400">Contoso is using their Enterprise subscription, named Contoso Enterprise Subscription, to provide billing for this IT workload.</span></span>

### <a name="storage-accounts"></a><span data-ttu-id="c7eec-401">Storage accounts</span><span class="sxs-lookup"><span data-stu-id="c7eec-401">Storage accounts</span></span>
<span data-ttu-id="c7eec-402">Contoso determined that they needed two storage accounts:</span><span class="sxs-lookup"><span data-stu-id="c7eec-402">Contoso determined that they needed two storage accounts:</span></span>

* <span data-ttu-id="c7eec-403">**contosoazfaeusesawebapp** for the standard storage of the web servers, application servers, and domain controlles and their extra data disks</span><span class="sxs-lookup"><span data-stu-id="c7eec-403">**contosoazfaeusesawebapp** for the standard storage of the web servers, application servers, and domain controlles and their extra data disks</span></span>
* <span data-ttu-id="c7eec-404">**contosoazfaeusesasqlclust** for the premium storage of the SQL Server cluster servers and their extra data disks</span><span class="sxs-lookup"><span data-stu-id="c7eec-404">**contosoazfaeusesasqlclust** for the premium storage of the SQL Server cluster servers and their extra data disks</span></span>

### <a name="a-virtual-network-with-subnets"></a><span data-ttu-id="c7eec-405">A virtual network with subnets</span><span class="sxs-lookup"><span data-stu-id="c7eec-405">A virtual network with subnets</span></span>
<span data-ttu-id="c7eec-406">Because the virtual network does not need ongoing connectivity to the Contoso on-premises network, Contoso decided on a cloud-only virtual network.</span><span class="sxs-lookup"><span data-stu-id="c7eec-406">Because the virtual network does not need ongoing connectivity to the Contoso on-premises network, Contoso decided on a cloud-only virtual network.</span></span>

<span data-ttu-id="c7eec-407">They created a cloud-only virtual network with the following settings using the Azure portal:</span><span class="sxs-lookup"><span data-stu-id="c7eec-407">They created a cloud-only virtual network with the following settings using the Azure portal:</span></span>

* <span data-ttu-id="c7eec-408">Name: AZFAE-USE-VN01</span><span class="sxs-lookup"><span data-stu-id="c7eec-408">Name: AZFAE-USE-VN01</span></span>
* <span data-ttu-id="c7eec-409">Location: East US 2</span><span class="sxs-lookup"><span data-stu-id="c7eec-409">Location: East US 2</span></span>
* <span data-ttu-id="c7eec-410">Virtual network address space: 10.0.0.0/8</span><span class="sxs-lookup"><span data-stu-id="c7eec-410">Virtual network address space: 10.0.0.0/8</span></span>
* <span data-ttu-id="c7eec-411">First subnet:</span><span class="sxs-lookup"><span data-stu-id="c7eec-411">First subnet:</span></span>
  * <span data-ttu-id="c7eec-412">Name: FrontEnd</span><span class="sxs-lookup"><span data-stu-id="c7eec-412">Name: FrontEnd</span></span>
  * <span data-ttu-id="c7eec-413">Address space: 10.0.1.0/24</span><span class="sxs-lookup"><span data-stu-id="c7eec-413">Address space: 10.0.1.0/24</span></span>
* <span data-ttu-id="c7eec-414">Second subnet:</span><span class="sxs-lookup"><span data-stu-id="c7eec-414">Second subnet:</span></span>
  * <span data-ttu-id="c7eec-415">Name: BackEnd</span><span class="sxs-lookup"><span data-stu-id="c7eec-415">Name: BackEnd</span></span>
  * <span data-ttu-id="c7eec-416">Address space: 10.0.2.0/24</span><span class="sxs-lookup"><span data-stu-id="c7eec-416">Address space: 10.0.2.0/24</span></span>

### <a name="availability-sets"></a><span data-ttu-id="c7eec-417">Availability sets</span><span class="sxs-lookup"><span data-stu-id="c7eec-417">Availability sets</span></span>
<span data-ttu-id="c7eec-418">To maintain high availability of all four tiers of their financial analysis engine, Contoso decided on four availability sets:</span><span class="sxs-lookup"><span data-stu-id="c7eec-418">To maintain high availability of all four tiers of their financial analysis engine, Contoso decided on four availability sets:</span></span>

* <span data-ttu-id="c7eec-419">**azfae-use-as-dc** for the domain controllers</span><span class="sxs-lookup"><span data-stu-id="c7eec-419">**azfae-use-as-dc** for the domain controllers</span></span>
* <span data-ttu-id="c7eec-420">**azfae-use-as-web** for the web servers</span><span class="sxs-lookup"><span data-stu-id="c7eec-420">**azfae-use-as-web** for the web servers</span></span>
* <span data-ttu-id="c7eec-421">**azfae-use-as-app** for the application servers</span><span class="sxs-lookup"><span data-stu-id="c7eec-421">**azfae-use-as-app** for the application servers</span></span>
* <span data-ttu-id="c7eec-422">**azfae-use-as-sql** for the servers in the SQL Server cluster</span><span class="sxs-lookup"><span data-stu-id="c7eec-422">**azfae-use-as-sql** for the servers in the SQL Server cluster</span></span>

<span data-ttu-id="c7eec-423">These availability sets will be created along with the virtual machines.</span><span class="sxs-lookup"><span data-stu-id="c7eec-423">These availability sets will be created along with the virtual machines.</span></span>

### <a name="virtual-machines"></a><span data-ttu-id="c7eec-424">Virtual machines</span><span class="sxs-lookup"><span data-stu-id="c7eec-424">Virtual machines</span></span>
<span data-ttu-id="c7eec-425">Contoso decided on the following names for their Azure virtual machines:</span><span class="sxs-lookup"><span data-stu-id="c7eec-425">Contoso decided on the following names for their Azure virtual machines:</span></span>

* <span data-ttu-id="c7eec-426">**azfae-use-vm-dc01** for the first domain controller</span><span class="sxs-lookup"><span data-stu-id="c7eec-426">**azfae-use-vm-dc01** for the first domain controller</span></span>
* <span data-ttu-id="c7eec-427">**azfae-use-vm-dc02** for the second domain controller</span><span class="sxs-lookup"><span data-stu-id="c7eec-427">**azfae-use-vm-dc02** for the second domain controller</span></span>
* <span data-ttu-id="c7eec-428">**azfae-use-vm-web01** for the first web server</span><span class="sxs-lookup"><span data-stu-id="c7eec-428">**azfae-use-vm-web01** for the first web server</span></span>
* <span data-ttu-id="c7eec-429">**azfae-use-vm-web02** for the second web server</span><span class="sxs-lookup"><span data-stu-id="c7eec-429">**azfae-use-vm-web02** for the second web server</span></span>
* <span data-ttu-id="c7eec-430">**azfae-use-vm-app01** for the first application server</span><span class="sxs-lookup"><span data-stu-id="c7eec-430">**azfae-use-vm-app01** for the first application server</span></span>
* <span data-ttu-id="c7eec-431">**azfae-use-vm-app02** for the second application server</span><span class="sxs-lookup"><span data-stu-id="c7eec-431">**azfae-use-vm-app02** for the second application server</span></span>
* <span data-ttu-id="c7eec-432">**azfae-use-vm-sql01** for the first SQL Server in the SQL Server cluster</span><span class="sxs-lookup"><span data-stu-id="c7eec-432">**azfae-use-vm-sql01** for the first SQL Server in the SQL Server cluster</span></span>
* <span data-ttu-id="c7eec-433">**azfae-use-vm-sql02** for the second SQL Server in the SQL Server cluster</span><span class="sxs-lookup"><span data-stu-id="c7eec-433">**azfae-use-vm-sql02** for the second SQL Server in the SQL Server cluster</span></span>
* <span data-ttu-id="c7eec-434">**azfae-use-vm-sqlmn01** for the majority node witness in the SQL Server cluster</span><span class="sxs-lookup"><span data-stu-id="c7eec-434">**azfae-use-vm-sqlmn01** for the majority node witness in the SQL Server cluster</span></span>

<span data-ttu-id="c7eec-435">Here is the resulting configuration.</span><span class="sxs-lookup"><span data-stu-id="c7eec-435">Here is the resulting configuration.</span></span>

![](https://docstestmedia1.blob.core.windows.net/azure-media/includes/media/virtual-machines-common-infrastructure-service-guidelines/example-config.png)

<span data-ttu-id="c7eec-436">This configuration incorporates:</span><span class="sxs-lookup"><span data-stu-id="c7eec-436">This configuration incorporates:</span></span>

* <span data-ttu-id="c7eec-437">A cloud-only virtual network with two subnets (FrontEnd and BackEnd)</span><span class="sxs-lookup"><span data-stu-id="c7eec-437">A cloud-only virtual network with two subnets (FrontEnd and BackEnd)</span></span>
* <span data-ttu-id="c7eec-438">Two storage accounts</span><span class="sxs-lookup"><span data-stu-id="c7eec-438">Two storage accounts</span></span>
* <span data-ttu-id="c7eec-439">Four availability sets, one for each tier of the financial analysis engine</span><span class="sxs-lookup"><span data-stu-id="c7eec-439">Four availability sets, one for each tier of the financial analysis engine</span></span>
* <span data-ttu-id="c7eec-440">The virtual machines for the four tiers</span><span class="sxs-lookup"><span data-stu-id="c7eec-440">The virtual machines for the four tiers</span></span>
* <span data-ttu-id="c7eec-441">An external load balanced set for HTTPS-based web traffic from the Internet to the web servers</span><span class="sxs-lookup"><span data-stu-id="c7eec-441">An external load balanced set for HTTPS-based web traffic from the Internet to the web servers</span></span>
* <span data-ttu-id="c7eec-442">An internal load balanced set for unencrypted web traffic from the web servers to the application servers</span><span class="sxs-lookup"><span data-stu-id="c7eec-442">An internal load balanced set for unencrypted web traffic from the web servers to the application servers</span></span>
* <span data-ttu-id="c7eec-443">A single resource group</span><span class="sxs-lookup"><span data-stu-id="c7eec-443">A single resource group</span></span>

## <a name="additional-resources"></a><span data-ttu-id="c7eec-444">Additional resources</span><span class="sxs-lookup"><span data-stu-id="c7eec-444">Additional resources</span></span>
[<span data-ttu-id="c7eec-445">Microsoft Azure subscription and service limits, quotas, and constraints</span><span class="sxs-lookup"><span data-stu-id="c7eec-445">Microsoft Azure subscription and service limits, quotas, and constraints</span></span>](../articles/azure-subscription-service-limits.md#storage-limits)

[<span data-ttu-id="c7eec-446">Sizes for virtual machines</span><span class="sxs-lookup"><span data-stu-id="c7eec-446">Sizes for virtual machines</span></span>](../articles/virtual-machines/linux/sizes.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)

[<span data-ttu-id="c7eec-447">Azure storage scalability and performance targets</span><span class="sxs-lookup"><span data-stu-id="c7eec-447">Azure storage scalability and performance targets</span></span>](../articles/storage/storage-scalability-targets.md)

[<span data-ttu-id="c7eec-448">Datacenter extension reference architecture diagram</span><span class="sxs-lookup"><span data-stu-id="c7eec-448">Datacenter extension reference architecture diagram</span></span>](https://gallery.technet.microsoft.com/Datacenter-extension-687b1d84)

[<span data-ttu-id="c7eec-449">Azure compute, network, and storage providers under Azure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="c7eec-449">Azure compute, network, and storage providers under Azure Resource Manager</span></span>](../articles/virtual-machines/virtual-machines-windows-compare-deployment-models.md)









