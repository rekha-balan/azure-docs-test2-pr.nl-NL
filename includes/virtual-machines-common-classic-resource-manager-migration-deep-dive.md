## <a name="meaning-of-migration-of-iaas-resources-from-classic-to-resource-manager"></a><span data-ttu-id="650ae-101">Meaning of migration of IaaS resources from classic to Resource Manager</span><span class="sxs-lookup"><span data-stu-id="650ae-101">Meaning of migration of IaaS resources from classic to Resource Manager</span></span>
<span data-ttu-id="650ae-102">Before we drill down into the details, let's look at the difference between data-plane and management-plane operations on the IaaS resources.</span><span class="sxs-lookup"><span data-stu-id="650ae-102">Before we drill down into the details, let's look at the difference between data-plane and management-plane operations on the IaaS resources.</span></span>

* <span data-ttu-id="650ae-103">*Management/Control plane* describes the calls that come into the management/control plane or the API for modifying resources.</span><span class="sxs-lookup"><span data-stu-id="650ae-103">*Management/Control plane* describes the calls that come into the management/control plane or the API for modifying resources.</span></span> <span data-ttu-id="650ae-104">For example, operations like creating a VM, restarting a VM, and updating a virtual network with a new subnet manage the running resources.</span><span class="sxs-lookup"><span data-stu-id="650ae-104">For example, operations like creating a VM, restarting a VM, and updating a virtual network with a new subnet manage the running resources.</span></span> <span data-ttu-id="650ae-105">They don't directly affect connecting to the instances.</span><span class="sxs-lookup"><span data-stu-id="650ae-105">They don't directly affect connecting to the instances.</span></span>
* <span data-ttu-id="650ae-106">*Data plane* (application) describes the runtime of the application itself and involves interaction with instances that don’t go through the Azure API.</span><span class="sxs-lookup"><span data-stu-id="650ae-106">*Data plane* (application) describes the runtime of the application itself and involves interaction with instances that don’t go through the Azure API.</span></span> <span data-ttu-id="650ae-107">Accessing your website or pulling data from a running SQL Server instance or a MongoDB server would be considered data plane or application interaction.</span><span class="sxs-lookup"><span data-stu-id="650ae-107">Accessing your website or pulling data from a running SQL Server instance or a MongoDB server would be considered data plane or application interaction.</span></span> <span data-ttu-id="650ae-108">Copying a blob from a storage account and accessing a public IP address to RDP or SSH into the virtual machine also are data plane.</span><span class="sxs-lookup"><span data-stu-id="650ae-108">Copying a blob from a storage account and accessing a public IP address to RDP or SSH into the virtual machine also are data plane.</span></span> <span data-ttu-id="650ae-109">These operations keep the application running across compute, networking, and storage.</span><span class="sxs-lookup"><span data-stu-id="650ae-109">These operations keep the application running across compute, networking, and storage.</span></span>

![Screenshot that illustrates difference between management/control plane and data plane](https://docstestmedia1.blob.core.windows.net/azure-media/articles/virtual-machines/media/virtual-machines-windows-migration-classic-resource-manager/data-control-plane.png)

> [!NOTE]
> <span data-ttu-id="650ae-111">In some migration scenarios, the Azure platform stops, deallocates, and restarts your virtual machines.</span><span class="sxs-lookup"><span data-stu-id="650ae-111">In some migration scenarios, the Azure platform stops, deallocates, and restarts your virtual machines.</span></span> <span data-ttu-id="650ae-112">This incurs a short data-plane downtime.</span><span class="sxs-lookup"><span data-stu-id="650ae-112">This incurs a short data-plane downtime.</span></span>
>
>

## <a name="the-migration-experience"></a><span data-ttu-id="650ae-113">The migration experience</span><span class="sxs-lookup"><span data-stu-id="650ae-113">The migration experience</span></span>
<span data-ttu-id="650ae-114">Before you start the migration experience, the following is recommended:</span><span class="sxs-lookup"><span data-stu-id="650ae-114">Before you start the migration experience, the following is recommended:</span></span>

* <span data-ttu-id="650ae-115">Ensure that the resources that you want to migrate don't use any unsupported features or configurations.</span><span class="sxs-lookup"><span data-stu-id="650ae-115">Ensure that the resources that you want to migrate don't use any unsupported features or configurations.</span></span> <span data-ttu-id="650ae-116">Usually the platform detects these issues and generates an error.</span><span class="sxs-lookup"><span data-stu-id="650ae-116">Usually the platform detects these issues and generates an error.</span></span>
* <span data-ttu-id="650ae-117">If you have VMs that are not in a virtual network, they will be stopped and deallocated as part of the prepare operation.</span><span class="sxs-lookup"><span data-stu-id="650ae-117">If you have VMs that are not in a virtual network, they will be stopped and deallocated as part of the prepare operation.</span></span> <span data-ttu-id="650ae-118">If you don't want to lose the public IP address, look into reserving the IP address before triggering the prepare operation.</span><span class="sxs-lookup"><span data-stu-id="650ae-118">If you don't want to lose the public IP address, look into reserving the IP address before triggering the prepare operation.</span></span> <span data-ttu-id="650ae-119">However, if the VMs are in a virtual network, they are not stopped and deallocated.</span><span class="sxs-lookup"><span data-stu-id="650ae-119">However, if the VMs are in a virtual network, they are not stopped and deallocated.</span></span>
* <span data-ttu-id="650ae-120">Plan your migration during non-business hours to accommodate for any unexpected failures that might happen during migration.</span><span class="sxs-lookup"><span data-stu-id="650ae-120">Plan your migration during non-business hours to accommodate for any unexpected failures that might happen during migration.</span></span>
* <span data-ttu-id="650ae-121">Download the current configuration of your VMs by using PowerShell, command-line interface (CLI) commands, or REST APIs to make it easier for validation after the prepare step is complete.</span><span class="sxs-lookup"><span data-stu-id="650ae-121">Download the current configuration of your VMs by using PowerShell, command-line interface (CLI) commands, or REST APIs to make it easier for validation after the prepare step is complete.</span></span>
* <span data-ttu-id="650ae-122">Update your automation/operationalization scripts to handle the Resource Manager deployment model before you start the migration.</span><span class="sxs-lookup"><span data-stu-id="650ae-122">Update your automation/operationalization scripts to handle the Resource Manager deployment model before you start the migration.</span></span> <span data-ttu-id="650ae-123">You can optionally do GET operations when the resources are in the prepared state.</span><span class="sxs-lookup"><span data-stu-id="650ae-123">You can optionally do GET operations when the resources are in the prepared state.</span></span>
* <span data-ttu-id="650ae-124">Evaluate the RBAC policies that are configured on the classic IaaS resources, and plan for after the migration is complete.</span><span class="sxs-lookup"><span data-stu-id="650ae-124">Evaluate the RBAC policies that are configured on the classic IaaS resources, and plan for after the migration is complete.</span></span>

<span data-ttu-id="650ae-125">The migration workflow is as follows</span><span class="sxs-lookup"><span data-stu-id="650ae-125">The migration workflow is as follows</span></span>

![Screenshot that shows the migration workflow](https://docstestmedia1.blob.core.windows.net/azure-media/articles/virtual-machines/windows/media/migration-classic-resource-manager/migration-workflow.png)

> [!NOTE]
> <span data-ttu-id="650ae-127">All the operations described in the following sections are idempotent.</span><span class="sxs-lookup"><span data-stu-id="650ae-127">All the operations described in the following sections are idempotent.</span></span> <span data-ttu-id="650ae-128">If you have a problem other than an unsupported feature or a configuration error, it is recommended that you retry the prepare, abort, or commit operation.</span><span class="sxs-lookup"><span data-stu-id="650ae-128">If you have a problem other than an unsupported feature or a configuration error, it is recommended that you retry the prepare, abort, or commit operation.</span></span> <span data-ttu-id="650ae-129">The Azure platform tries the action again.</span><span class="sxs-lookup"><span data-stu-id="650ae-129">The Azure platform tries the action again.</span></span>
>
>

### <a name="validate"></a><span data-ttu-id="650ae-130">Validate</span><span class="sxs-lookup"><span data-stu-id="650ae-130">Validate</span></span>
<span data-ttu-id="650ae-131">The validate operation is the first step in the migration process.</span><span class="sxs-lookup"><span data-stu-id="650ae-131">The validate operation is the first step in the migration process.</span></span> <span data-ttu-id="650ae-132">The goal of this step is to analyze data in the background for the resources under migration and return success/failure if the resources are capable of migration.</span><span class="sxs-lookup"><span data-stu-id="650ae-132">The goal of this step is to analyze data in the background for the resources under migration and return success/failure if the resources are capable of migration.</span></span>

<span data-ttu-id="650ae-133">You select the virtual network or the hosted service (if it’s not a virtual network) that you want to validate for migration.</span><span class="sxs-lookup"><span data-stu-id="650ae-133">You select the virtual network or the hosted service (if it’s not a virtual network) that you want to validate for migration.</span></span>

* <span data-ttu-id="650ae-134">If the resource is not capable of migration, the Azure platform lists all the reasons for why it’s not supported for migration.</span><span class="sxs-lookup"><span data-stu-id="650ae-134">If the resource is not capable of migration, the Azure platform lists all the reasons for why it’s not supported for migration.</span></span>

<span data-ttu-id="650ae-135">When validating storage services you will find the migrated account in a resource group named the same as your storage account with "-Migrated" appended.</span><span class="sxs-lookup"><span data-stu-id="650ae-135">When validating storage services you will find the migrated account in a resource group named the same as your storage account with "-Migrated" appended.</span></span>  <span data-ttu-id="650ae-136">For example if your storage account is named "mystorage" you will find the Azure Resource Manager enabled resource in a resource group named "mystorage-Migrated" and it will contain a storage account named "mystorage".</span><span class="sxs-lookup"><span data-stu-id="650ae-136">For example if your storage account is named "mystorage" you will find the Azure Resource Manager enabled resource in a resource group named "mystorage-Migrated" and it will contain a storage account named "mystorage".</span></span>

### <a name="prepare"></a><span data-ttu-id="650ae-137">Prepare</span><span class="sxs-lookup"><span data-stu-id="650ae-137">Prepare</span></span>
<span data-ttu-id="650ae-138">The prepare operation is the second step in the migration process.</span><span class="sxs-lookup"><span data-stu-id="650ae-138">The prepare operation is the second step in the migration process.</span></span> <span data-ttu-id="650ae-139">The goal of this step is to simulate the transformation of the IaaS resources from classic to Resource Manager resources and present this side by side for you to visualize.</span><span class="sxs-lookup"><span data-stu-id="650ae-139">The goal of this step is to simulate the transformation of the IaaS resources from classic to Resource Manager resources and present this side by side for you to visualize.</span></span>

<span data-ttu-id="650ae-140">You select the virtual network or the hosted service (if it’s not a virtual network) that you want to prepare for migration.</span><span class="sxs-lookup"><span data-stu-id="650ae-140">You select the virtual network or the hosted service (if it’s not a virtual network) that you want to prepare for migration.</span></span>

* <span data-ttu-id="650ae-141">If the resource is not capable of migration, the Azure platform stops the migration process and lists the reason why the prepare operation failed.</span><span class="sxs-lookup"><span data-stu-id="650ae-141">If the resource is not capable of migration, the Azure platform stops the migration process and lists the reason why the prepare operation failed.</span></span>
* <span data-ttu-id="650ae-142">If the resource is capable of migration, the Azure platform first locks down the management-plane operations for the resources under migration.</span><span class="sxs-lookup"><span data-stu-id="650ae-142">If the resource is capable of migration, the Azure platform first locks down the management-plane operations for the resources under migration.</span></span> <span data-ttu-id="650ae-143">For example, you are not able to add a data disk to a VM under migration.</span><span class="sxs-lookup"><span data-stu-id="650ae-143">For example, you are not able to add a data disk to a VM under migration.</span></span>

<span data-ttu-id="650ae-144">The Azure platform then starts the migration of metadata from classic to Resource Manager for the migrating resources.</span><span class="sxs-lookup"><span data-stu-id="650ae-144">The Azure platform then starts the migration of metadata from classic to Resource Manager for the migrating resources.</span></span>

<span data-ttu-id="650ae-145">After the prepare operation is complete, you have the option of visualizing the resources in both classic and Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="650ae-145">After the prepare operation is complete, you have the option of visualizing the resources in both classic and Resource Manager.</span></span> <span data-ttu-id="650ae-146">For every cloud service in the classic deployment model, the Azure platform creates a resource group name that has the pattern `cloud-service-name>-Migrated`.</span><span class="sxs-lookup"><span data-stu-id="650ae-146">For every cloud service in the classic deployment model, the Azure platform creates a resource group name that has the pattern `cloud-service-name>-Migrated`.</span></span>

> [!NOTE]
> <span data-ttu-id="650ae-147">It is not possible to select the name of Resource Group created for migrated resources (i.e. "-Migrated") but after migration is complete, you can use Azure Resource Manager move feature to move resources to any Resource Group you want.</span><span class="sxs-lookup"><span data-stu-id="650ae-147">It is not possible to select the name of Resource Group created for migrated resources (i.e. "-Migrated") but after migration is complete, you can use Azure Resource Manager move feature to move resources to any Resource Group you want.</span></span> <span data-ttu-id="650ae-148">To read more about this see [Move resources to new resource group or subscription](../articles/resource-group-move-resources.md)</span><span class="sxs-lookup"><span data-stu-id="650ae-148">To read more about this see [Move resources to new resource group or subscription](../articles/resource-group-move-resources.md)</span></span>

<span data-ttu-id="650ae-149">Here are two screens that show the result after a succesful Prepare operation.</span><span class="sxs-lookup"><span data-stu-id="650ae-149">Here are two screens that show the result after a succesful Prepare operation.</span></span> <span data-ttu-id="650ae-150">First screen shows a Resource Group that contains the original cloud service.</span><span class="sxs-lookup"><span data-stu-id="650ae-150">First screen shows a Resource Group that contains the original cloud service.</span></span> <span data-ttu-id="650ae-151">Second screen shows the new "-Migrated" resource group that contains the equivalent Azure Resource Manager resources.</span><span class="sxs-lookup"><span data-stu-id="650ae-151">Second screen shows the new "-Migrated" resource group that contains the equivalent Azure Resource Manager resources.</span></span>

![Screenshot that shows Portal classic cloud service](https://docstestmedia1.blob.core.windows.net/azure-media/articles/virtual-machines/windows/media/migration-classic-resource-manager/portal-classic.png)

![Screenshot that shows Portal Azure Resource Manager resources in Prepare](https://docstestmedia1.blob.core.windows.net/azure-media/articles/virtual-machines/windows/media/migration-classic-resource-manager/portal-arm.png)

> [!NOTE]
> <span data-ttu-id="650ae-154">Virtual Machines that are not in a classic Virtual Network are stopped deallocated in this phase of migration.</span><span class="sxs-lookup"><span data-stu-id="650ae-154">Virtual Machines that are not in a classic Virtual Network are stopped deallocated in this phase of migration.</span></span>
>
>

### <a name="check-manual-or-scripted"></a><span data-ttu-id="650ae-155">Check (manual or scripted)</span><span class="sxs-lookup"><span data-stu-id="650ae-155">Check (manual or scripted)</span></span>
<span data-ttu-id="650ae-156">In the check step, you can optionally use the configuration that you downloaded earlier to validate that the migration looks correct.</span><span class="sxs-lookup"><span data-stu-id="650ae-156">In the check step, you can optionally use the configuration that you downloaded earlier to validate that the migration looks correct.</span></span> <span data-ttu-id="650ae-157">Alternatively, you can sign in to the portal and spot check the properties and resources to validate that metadata migration looks good.</span><span class="sxs-lookup"><span data-stu-id="650ae-157">Alternatively, you can sign in to the portal and spot check the properties and resources to validate that metadata migration looks good.</span></span>

<span data-ttu-id="650ae-158">If you are migrating a virtual network, most configuration of virtual machines is not restarted.</span><span class="sxs-lookup"><span data-stu-id="650ae-158">If you are migrating a virtual network, most configuration of virtual machines is not restarted.</span></span> <span data-ttu-id="650ae-159">For applications on those VMs, you can validate that the application is still up and running.</span><span class="sxs-lookup"><span data-stu-id="650ae-159">For applications on those VMs, you can validate that the application is still up and running.</span></span>

<span data-ttu-id="650ae-160">You can test your monitoring/automation and operational scripts to see if the VMs are working as expected and if your updated scripts work correctly.</span><span class="sxs-lookup"><span data-stu-id="650ae-160">You can test your monitoring/automation and operational scripts to see if the VMs are working as expected and if your updated scripts work correctly.</span></span> <span data-ttu-id="650ae-161">Only GET operations are supported when the resources are in the prepared state.</span><span class="sxs-lookup"><span data-stu-id="650ae-161">Only GET operations are supported when the resources are in the prepared state.</span></span>

<span data-ttu-id="650ae-162">There is no set time window before which you need to commit the migration.</span><span class="sxs-lookup"><span data-stu-id="650ae-162">There is no set time window before which you need to commit the migration.</span></span> <span data-ttu-id="650ae-163">You can take as much time as you want in this state.</span><span class="sxs-lookup"><span data-stu-id="650ae-163">You can take as much time as you want in this state.</span></span> <span data-ttu-id="650ae-164">However, the management plane is locked for these resources until you either abort or commit.</span><span class="sxs-lookup"><span data-stu-id="650ae-164">However, the management plane is locked for these resources until you either abort or commit.</span></span>

<span data-ttu-id="650ae-165">If you see any issues, you can always abort the migration and go back to the classic deployment model.</span><span class="sxs-lookup"><span data-stu-id="650ae-165">If you see any issues, you can always abort the migration and go back to the classic deployment model.</span></span> <span data-ttu-id="650ae-166">After you go back, the Azure platform will open the management-plane operations on the resources so that you can resume normal operations on those VMs in the classic deployment model.</span><span class="sxs-lookup"><span data-stu-id="650ae-166">After you go back, the Azure platform will open the management-plane operations on the resources so that you can resume normal operations on those VMs in the classic deployment model.</span></span>

### <a name="abort"></a><span data-ttu-id="650ae-167">Abort</span><span class="sxs-lookup"><span data-stu-id="650ae-167">Abort</span></span>
<span data-ttu-id="650ae-168">Abort is an optional step that you can use to revert your changes to the classic deployment model and stop the migration.</span><span class="sxs-lookup"><span data-stu-id="650ae-168">Abort is an optional step that you can use to revert your changes to the classic deployment model and stop the migration.</span></span>

> [!NOTE]
> <span data-ttu-id="650ae-169">This operation cannot be executed after you have triggered the commit operation.</span><span class="sxs-lookup"><span data-stu-id="650ae-169">This operation cannot be executed after you have triggered the commit operation.</span></span>     
>
>

### <a name="commit"></a><span data-ttu-id="650ae-170">Commit</span><span class="sxs-lookup"><span data-stu-id="650ae-170">Commit</span></span>
<span data-ttu-id="650ae-171">After you finish the validation, you can commit the migration.</span><span class="sxs-lookup"><span data-stu-id="650ae-171">After you finish the validation, you can commit the migration.</span></span> <span data-ttu-id="650ae-172">Resources do not appear anymore in classic and are available only in the Resource Manager deployment model.</span><span class="sxs-lookup"><span data-stu-id="650ae-172">Resources do not appear anymore in classic and are available only in the Resource Manager deployment model.</span></span> <span data-ttu-id="650ae-173">The migrated resources can be managed only in the new portal.</span><span class="sxs-lookup"><span data-stu-id="650ae-173">The migrated resources can be managed only in the new portal.</span></span>

> [!NOTE]
> <span data-ttu-id="650ae-174">This is an idempotent operation.</span><span class="sxs-lookup"><span data-stu-id="650ae-174">This is an idempotent operation.</span></span> <span data-ttu-id="650ae-175">If it fails, it is recommended that you retry the operation.</span><span class="sxs-lookup"><span data-stu-id="650ae-175">If it fails, it is recommended that you retry the operation.</span></span> <span data-ttu-id="650ae-176">If it continues to fail, create a support ticket or create a forum post with a ClassicIaaSMigration tag on our [VM forum](https://social.msdn.microsoft.com/Forums/azure/home?forum=WAVirtualMachinesforWindows).</span><span class="sxs-lookup"><span data-stu-id="650ae-176">If it continues to fail, create a support ticket or create a forum post with a ClassicIaaSMigration tag on our [VM forum](https://social.msdn.microsoft.com/Forums/azure/home?forum=WAVirtualMachinesforWindows).</span></span>
>
>
<br>
<span data-ttu-id="650ae-177">Here is a flowchart of the steps during a migration process</span><span class="sxs-lookup"><span data-stu-id="650ae-177">Here is a flowchart of the steps during a migration process</span></span>

![Screenshot that shows the migration steps](https://docstestmedia1.blob.core.windows.net/azure-media/articles/virtual-machines/windows/media/migration-classic-resource-manager/migration-flow.png)

## <a name="translation-of-classic-to-azure-resource-manager-resources"></a><span data-ttu-id="650ae-179">Translation of classic to Azure Resource Manager resources</span><span class="sxs-lookup"><span data-stu-id="650ae-179">Translation of classic to Azure Resource Manager resources</span></span>
<span data-ttu-id="650ae-180">You can find the classic and Resource Manager representations of the resources in the following table.</span><span class="sxs-lookup"><span data-stu-id="650ae-180">You can find the classic and Resource Manager representations of the resources in the following table.</span></span> <span data-ttu-id="650ae-181">Other features and resources are not currently supported.</span><span class="sxs-lookup"><span data-stu-id="650ae-181">Other features and resources are not currently supported.</span></span>

| <span data-ttu-id="650ae-182">Classic representation</span><span class="sxs-lookup"><span data-stu-id="650ae-182">Classic representation</span></span> | <span data-ttu-id="650ae-183">Resource Manager representation</span><span class="sxs-lookup"><span data-stu-id="650ae-183">Resource Manager representation</span></span> | <span data-ttu-id="650ae-184">Detailed notes</span><span class="sxs-lookup"><span data-stu-id="650ae-184">Detailed notes</span></span> |
| --- | --- | --- |
| <span data-ttu-id="650ae-185">Cloud service name</span><span class="sxs-lookup"><span data-stu-id="650ae-185">Cloud service name</span></span> |<span data-ttu-id="650ae-186">DNS name</span><span class="sxs-lookup"><span data-stu-id="650ae-186">DNS name</span></span> |<span data-ttu-id="650ae-187">During migration, a new resource group is created for every cloud service with the naming pattern `<cloudservicename>-migrated`.</span><span class="sxs-lookup"><span data-stu-id="650ae-187">During migration, a new resource group is created for every cloud service with the naming pattern `<cloudservicename>-migrated`.</span></span> <span data-ttu-id="650ae-188">This resource group contains all your resources.</span><span class="sxs-lookup"><span data-stu-id="650ae-188">This resource group contains all your resources.</span></span> <span data-ttu-id="650ae-189">The cloud service name becomes a DNS name that is associated with the public IP address.</span><span class="sxs-lookup"><span data-stu-id="650ae-189">The cloud service name becomes a DNS name that is associated with the public IP address.</span></span> |
| <span data-ttu-id="650ae-190">Virtual machine</span><span class="sxs-lookup"><span data-stu-id="650ae-190">Virtual machine</span></span> |<span data-ttu-id="650ae-191">Virtual machine</span><span class="sxs-lookup"><span data-stu-id="650ae-191">Virtual machine</span></span> |<span data-ttu-id="650ae-192">VM-specific properties are migrated unchanged.</span><span class="sxs-lookup"><span data-stu-id="650ae-192">VM-specific properties are migrated unchanged.</span></span> <span data-ttu-id="650ae-193">Certain osProfile information, like computer name, is not stored in the classic deployment model and remains empty after migration.</span><span class="sxs-lookup"><span data-stu-id="650ae-193">Certain osProfile information, like computer name, is not stored in the classic deployment model and remains empty after migration.</span></span> |
| <span data-ttu-id="650ae-194">Disk resources attached to VM</span><span class="sxs-lookup"><span data-stu-id="650ae-194">Disk resources attached to VM</span></span> |<span data-ttu-id="650ae-195">Implicit disks attached to VM</span><span class="sxs-lookup"><span data-stu-id="650ae-195">Implicit disks attached to VM</span></span> |<span data-ttu-id="650ae-196">Disks are not modeled as top-level resources in the Resource Manager deployment model.</span><span class="sxs-lookup"><span data-stu-id="650ae-196">Disks are not modeled as top-level resources in the Resource Manager deployment model.</span></span> <span data-ttu-id="650ae-197">They are migrated as implicit disks under the VM.</span><span class="sxs-lookup"><span data-stu-id="650ae-197">They are migrated as implicit disks under the VM.</span></span> <span data-ttu-id="650ae-198">Only disks that are attached to a VM are currently supported.</span><span class="sxs-lookup"><span data-stu-id="650ae-198">Only disks that are attached to a VM are currently supported.</span></span> <span data-ttu-id="650ae-199">Resource Manager VMs can now use classic storage accounts, which allows the disks to be easily migrated without any updates.</span><span class="sxs-lookup"><span data-stu-id="650ae-199">Resource Manager VMs can now use classic storage accounts, which allows the disks to be easily migrated without any updates.</span></span> |
| <span data-ttu-id="650ae-200">VM extensions</span><span class="sxs-lookup"><span data-stu-id="650ae-200">VM extensions</span></span> |<span data-ttu-id="650ae-201">VM extensions</span><span class="sxs-lookup"><span data-stu-id="650ae-201">VM extensions</span></span> |<span data-ttu-id="650ae-202">All the resource extensions, except XML extensions, are migrated from the classic deployment model.</span><span class="sxs-lookup"><span data-stu-id="650ae-202">All the resource extensions, except XML extensions, are migrated from the classic deployment model.</span></span> |
| <span data-ttu-id="650ae-203">Virtual machine certificates</span><span class="sxs-lookup"><span data-stu-id="650ae-203">Virtual machine certificates</span></span> |<span data-ttu-id="650ae-204">Certificates in Azure Key Vault</span><span class="sxs-lookup"><span data-stu-id="650ae-204">Certificates in Azure Key Vault</span></span> |<span data-ttu-id="650ae-205">If a cloud service contains service certificates, a new Azure key vault per cloud service and moves the certificates into the key vault.</span><span class="sxs-lookup"><span data-stu-id="650ae-205">If a cloud service contains service certificates, a new Azure key vault per cloud service and moves the certificates into the key vault.</span></span> <span data-ttu-id="650ae-206">The VMs are updated to reference the certificates from the key vault.</span><span class="sxs-lookup"><span data-stu-id="650ae-206">The VMs are updated to reference the certificates from the key vault.</span></span> <br><br> <span data-ttu-id="650ae-207">**NOTE:** Please do not delete the keyvault as it can cause the VM to go into a failed state.</span><span class="sxs-lookup"><span data-stu-id="650ae-207">**NOTE:** Please do not delete the keyvault as it can cause the VM to go into a failed state.</span></span> <span data-ttu-id="650ae-208">We're working on improving things in the backend so that Key Vaults can be deleted safely or moved along with the VM to a new subscription.</span><span class="sxs-lookup"><span data-stu-id="650ae-208">We're working on improving things in the backend so that Key Vaults can be deleted safely or moved along with the VM to a new subscription.</span></span> |
| <span data-ttu-id="650ae-209">WinRM configuration</span><span class="sxs-lookup"><span data-stu-id="650ae-209">WinRM configuration</span></span> |<span data-ttu-id="650ae-210">WinRM configuration under osProfile</span><span class="sxs-lookup"><span data-stu-id="650ae-210">WinRM configuration under osProfile</span></span> |<span data-ttu-id="650ae-211">Windows Remote Management configuration is moved unchanged, as part of the migration.</span><span class="sxs-lookup"><span data-stu-id="650ae-211">Windows Remote Management configuration is moved unchanged, as part of the migration.</span></span> |
| <span data-ttu-id="650ae-212">Availability-set property</span><span class="sxs-lookup"><span data-stu-id="650ae-212">Availability-set property</span></span> |<span data-ttu-id="650ae-213">Availability-set resource</span><span class="sxs-lookup"><span data-stu-id="650ae-213">Availability-set resource</span></span> | <span data-ttu-id="650ae-214">Availability-set specification was a property on the VM in the classic deployment model.</span><span class="sxs-lookup"><span data-stu-id="650ae-214">Availability-set specification was a property on the VM in the classic deployment model.</span></span> <span data-ttu-id="650ae-215">Availability sets become a top-level resource as part of the migration.</span><span class="sxs-lookup"><span data-stu-id="650ae-215">Availability sets become a top-level resource as part of the migration.</span></span> <span data-ttu-id="650ae-216">The following configurations are not supported: multiple availability sets per cloud service, or one or more availability sets along with VMs that are not in any availability set in a cloud service.</span><span class="sxs-lookup"><span data-stu-id="650ae-216">The following configurations are not supported: multiple availability sets per cloud service, or one or more availability sets along with VMs that are not in any availability set in a cloud service.</span></span> |
| <span data-ttu-id="650ae-217">Network configuration on a VM</span><span class="sxs-lookup"><span data-stu-id="650ae-217">Network configuration on a VM</span></span> |<span data-ttu-id="650ae-218">Primary network interface</span><span class="sxs-lookup"><span data-stu-id="650ae-218">Primary network interface</span></span> |<span data-ttu-id="650ae-219">Network configuration on a VM is represented as the primary network interface resource after migration.</span><span class="sxs-lookup"><span data-stu-id="650ae-219">Network configuration on a VM is represented as the primary network interface resource after migration.</span></span> <span data-ttu-id="650ae-220">For VMs that are not in a virtual network, the internal IP address changes during migration.</span><span class="sxs-lookup"><span data-stu-id="650ae-220">For VMs that are not in a virtual network, the internal IP address changes during migration.</span></span> |
| <span data-ttu-id="650ae-221">Multiple network interfaces on a VM</span><span class="sxs-lookup"><span data-stu-id="650ae-221">Multiple network interfaces on a VM</span></span> |<span data-ttu-id="650ae-222">Network interfaces</span><span class="sxs-lookup"><span data-stu-id="650ae-222">Network interfaces</span></span> |<span data-ttu-id="650ae-223">If a VM has multiple network interfaces associated with it, each network interface becomes a top-level resource as part of the migration in the Resource Manager deployment model, along with all the properties.</span><span class="sxs-lookup"><span data-stu-id="650ae-223">If a VM has multiple network interfaces associated with it, each network interface becomes a top-level resource as part of the migration in the Resource Manager deployment model, along with all the properties.</span></span> |
| <span data-ttu-id="650ae-224">Load-balanced endpoint set</span><span class="sxs-lookup"><span data-stu-id="650ae-224">Load-balanced endpoint set</span></span> |<span data-ttu-id="650ae-225">Load balancer</span><span class="sxs-lookup"><span data-stu-id="650ae-225">Load balancer</span></span> |<span data-ttu-id="650ae-226">In the classic deployment model, the platform assigned an implicit load balancer for every cloud service.</span><span class="sxs-lookup"><span data-stu-id="650ae-226">In the classic deployment model, the platform assigned an implicit load balancer for every cloud service.</span></span> <span data-ttu-id="650ae-227">During migration, a new load-balancer resource is created, and the load-balancing endpoint set becomes load-balancer rules.</span><span class="sxs-lookup"><span data-stu-id="650ae-227">During migration, a new load-balancer resource is created, and the load-balancing endpoint set becomes load-balancer rules.</span></span> |
| <span data-ttu-id="650ae-228">Inbound NAT rules</span><span class="sxs-lookup"><span data-stu-id="650ae-228">Inbound NAT rules</span></span> |<span data-ttu-id="650ae-229">Inbound NAT rules</span><span class="sxs-lookup"><span data-stu-id="650ae-229">Inbound NAT rules</span></span> |<span data-ttu-id="650ae-230">Input endpoints defined on the VM are converted to inbound network address translation rules under the load balancer during the migration.</span><span class="sxs-lookup"><span data-stu-id="650ae-230">Input endpoints defined on the VM are converted to inbound network address translation rules under the load balancer during the migration.</span></span> |
| <span data-ttu-id="650ae-231">VIP address</span><span class="sxs-lookup"><span data-stu-id="650ae-231">VIP address</span></span> |<span data-ttu-id="650ae-232">Public IP address with DNS name</span><span class="sxs-lookup"><span data-stu-id="650ae-232">Public IP address with DNS name</span></span> |<span data-ttu-id="650ae-233">The virtual IP address becomes a public IP address and is associated with the load balancer.</span><span class="sxs-lookup"><span data-stu-id="650ae-233">The virtual IP address becomes a public IP address and is associated with the load balancer.</span></span> |
| <span data-ttu-id="650ae-234">Virtual network</span><span class="sxs-lookup"><span data-stu-id="650ae-234">Virtual network</span></span> |<span data-ttu-id="650ae-235">Virtual network</span><span class="sxs-lookup"><span data-stu-id="650ae-235">Virtual network</span></span> |<span data-ttu-id="650ae-236">The virtual network is migrated, with all its properties, to the Resource Manager deployment model.</span><span class="sxs-lookup"><span data-stu-id="650ae-236">The virtual network is migrated, with all its properties, to the Resource Manager deployment model.</span></span> <span data-ttu-id="650ae-237">A new resource group is created with the name `-migrated`.</span><span class="sxs-lookup"><span data-stu-id="650ae-237">A new resource group is created with the name `-migrated`.</span></span> |
| <span data-ttu-id="650ae-238">Reserved IPs</span><span class="sxs-lookup"><span data-stu-id="650ae-238">Reserved IPs</span></span> |<span data-ttu-id="650ae-239">Public IP address with static allocation method</span><span class="sxs-lookup"><span data-stu-id="650ae-239">Public IP address with static allocation method</span></span> |<span data-ttu-id="650ae-240">Reserved IPs associated with the load balancer are migrated, along with the migration of the cloud service or the virtual machine.</span><span class="sxs-lookup"><span data-stu-id="650ae-240">Reserved IPs associated with the load balancer are migrated, along with the migration of the cloud service or the virtual machine.</span></span> <span data-ttu-id="650ae-241">Unassociated reserved IP migration is not currently supported.</span><span class="sxs-lookup"><span data-stu-id="650ae-241">Unassociated reserved IP migration is not currently supported.</span></span> |
| <span data-ttu-id="650ae-242">Public IP address per VM</span><span class="sxs-lookup"><span data-stu-id="650ae-242">Public IP address per VM</span></span> |<span data-ttu-id="650ae-243">Public IP address with dynamic allocation method</span><span class="sxs-lookup"><span data-stu-id="650ae-243">Public IP address with dynamic allocation method</span></span> |<span data-ttu-id="650ae-244">The public IP address associated with the VM is converted as a public IP address resource, with the allocation method set to static.</span><span class="sxs-lookup"><span data-stu-id="650ae-244">The public IP address associated with the VM is converted as a public IP address resource, with the allocation method set to static.</span></span> |
| <span data-ttu-id="650ae-245">NSGs</span><span class="sxs-lookup"><span data-stu-id="650ae-245">NSGs</span></span> |<span data-ttu-id="650ae-246">NSGs</span><span class="sxs-lookup"><span data-stu-id="650ae-246">NSGs</span></span> |<span data-ttu-id="650ae-247">Network security groups associated with a subnet are cloned as part of the migration to the Resource Manager deployment model.</span><span class="sxs-lookup"><span data-stu-id="650ae-247">Network security groups associated with a subnet are cloned as part of the migration to the Resource Manager deployment model.</span></span> <span data-ttu-id="650ae-248">The NSG in the classic deployment model is not removed during the migration.</span><span class="sxs-lookup"><span data-stu-id="650ae-248">The NSG in the classic deployment model is not removed during the migration.</span></span> <span data-ttu-id="650ae-249">However, the management-plane operations for the NSG are blocked when the migration is in progress.</span><span class="sxs-lookup"><span data-stu-id="650ae-249">However, the management-plane operations for the NSG are blocked when the migration is in progress.</span></span> |
| <span data-ttu-id="650ae-250">DNS servers</span><span class="sxs-lookup"><span data-stu-id="650ae-250">DNS servers</span></span> |<span data-ttu-id="650ae-251">DNS servers</span><span class="sxs-lookup"><span data-stu-id="650ae-251">DNS servers</span></span> |<span data-ttu-id="650ae-252">DNS servers associated with a virtual network or the VM are migrated as part of the corresponding resource migration, along with all the properties.</span><span class="sxs-lookup"><span data-stu-id="650ae-252">DNS servers associated with a virtual network or the VM are migrated as part of the corresponding resource migration, along with all the properties.</span></span> |
| <span data-ttu-id="650ae-253">UDRs</span><span class="sxs-lookup"><span data-stu-id="650ae-253">UDRs</span></span> |<span data-ttu-id="650ae-254">UDRs</span><span class="sxs-lookup"><span data-stu-id="650ae-254">UDRs</span></span> |<span data-ttu-id="650ae-255">User-defined routes associated with a subnet are cloned as part of the migration to the Resource Manager deployment model.</span><span class="sxs-lookup"><span data-stu-id="650ae-255">User-defined routes associated with a subnet are cloned as part of the migration to the Resource Manager deployment model.</span></span> <span data-ttu-id="650ae-256">The UDR in the classic deployment model is not removed during the migration.</span><span class="sxs-lookup"><span data-stu-id="650ae-256">The UDR in the classic deployment model is not removed during the migration.</span></span> <span data-ttu-id="650ae-257">The management-plane operations for the UDR are blocked when the migration is in progress.</span><span class="sxs-lookup"><span data-stu-id="650ae-257">The management-plane operations for the UDR are blocked when the migration is in progress.</span></span> |
| <span data-ttu-id="650ae-258">IP forwarding property on a VM's network configuration</span><span class="sxs-lookup"><span data-stu-id="650ae-258">IP forwarding property on a VM's network configuration</span></span> |<span data-ttu-id="650ae-259">IP forwarding property on the NIC</span><span class="sxs-lookup"><span data-stu-id="650ae-259">IP forwarding property on the NIC</span></span> |<span data-ttu-id="650ae-260">The IP forwarding property on a VM is converted to a property on the network interface during the migration.</span><span class="sxs-lookup"><span data-stu-id="650ae-260">The IP forwarding property on a VM is converted to a property on the network interface during the migration.</span></span> |
| <span data-ttu-id="650ae-261">Load balancer with multiple IPs</span><span class="sxs-lookup"><span data-stu-id="650ae-261">Load balancer with multiple IPs</span></span> |<span data-ttu-id="650ae-262">Load balancer with multiple public IP resources</span><span class="sxs-lookup"><span data-stu-id="650ae-262">Load balancer with multiple public IP resources</span></span> |<span data-ttu-id="650ae-263">Every public IP associated with the load balancer is converted to a public IP resource and associated with the load balancer after migration.</span><span class="sxs-lookup"><span data-stu-id="650ae-263">Every public IP associated with the load balancer is converted to a public IP resource and associated with the load balancer after migration.</span></span> |
| <span data-ttu-id="650ae-264">Internal DNS names on the VM</span><span class="sxs-lookup"><span data-stu-id="650ae-264">Internal DNS names on the VM</span></span> |<span data-ttu-id="650ae-265">Internal DNS names on the NIC</span><span class="sxs-lookup"><span data-stu-id="650ae-265">Internal DNS names on the NIC</span></span> |<span data-ttu-id="650ae-266">During migration, the internal DNS suffixes for the VMs are migrated to a read-only property named “InternalDomainNameSuffix” on the NIC.</span><span class="sxs-lookup"><span data-stu-id="650ae-266">During migration, the internal DNS suffixes for the VMs are migrated to a read-only property named “InternalDomainNameSuffix” on the NIC.</span></span> <span data-ttu-id="650ae-267">The suffix remains unchanged after migration and VM resolution should continue to work as previously.</span><span class="sxs-lookup"><span data-stu-id="650ae-267">The suffix remains unchanged after migration and VM resolution should continue to work as previously.</span></span> |
| <span data-ttu-id="650ae-268">Virtual Network Gateway</span><span class="sxs-lookup"><span data-stu-id="650ae-268">Virtual Network Gateway</span></span> |<span data-ttu-id="650ae-269">Virtual Network Gateway</span><span class="sxs-lookup"><span data-stu-id="650ae-269">Virtual Network Gateway</span></span> |<span data-ttu-id="650ae-270">Virtual Network Gateway properties are migrated unchanged.</span><span class="sxs-lookup"><span data-stu-id="650ae-270">Virtual Network Gateway properties are migrated unchanged.</span></span> <span data-ttu-id="650ae-271">The VIP associated with the gateway does not change either.</span><span class="sxs-lookup"><span data-stu-id="650ae-271">The VIP associated with the gateway does not change either.</span></span> |
| <span data-ttu-id="650ae-272">Local network site</span><span class="sxs-lookup"><span data-stu-id="650ae-272">Local network site</span></span> |<span data-ttu-id="650ae-273">Local Network Gateway</span><span class="sxs-lookup"><span data-stu-id="650ae-273">Local Network Gateway</span></span> |<span data-ttu-id="650ae-274">Local network site properties are migrated unchanged to a new resource called Local Network Gateway.</span><span class="sxs-lookup"><span data-stu-id="650ae-274">Local network site properties are migrated unchanged to a new resource called Local Network Gateway.</span></span> <span data-ttu-id="650ae-275">This represent on premises address prefixes and remote gateway IP.</span><span class="sxs-lookup"><span data-stu-id="650ae-275">This represent on premises address prefixes and remote gateway IP.</span></span> |
| <span data-ttu-id="650ae-276">Connections references</span><span class="sxs-lookup"><span data-stu-id="650ae-276">Connections references</span></span> |<span data-ttu-id="650ae-277">Connection</span><span class="sxs-lookup"><span data-stu-id="650ae-277">Connection</span></span> |<span data-ttu-id="650ae-278">Connectivity references between gateway and local network site in network configuration is represented by a newly created resource called Connection in resource manager after migration.</span><span class="sxs-lookup"><span data-stu-id="650ae-278">Connectivity references between gateway and local network site in network configuration is represented by a newly created resource called Connection in resource manager after migration.</span></span> <span data-ttu-id="650ae-279">All properties of connectivity reference in network configuration files are copied unchanged to the newly created Connection resource.</span><span class="sxs-lookup"><span data-stu-id="650ae-279">All properties of connectivity reference in network configuration files are copied unchanged to the newly created Connection resource.</span></span> <span data-ttu-id="650ae-280">VNet to VNet connectivity in classic is achieved by creating two IPsec tunnels to local network sites representing the VNets.</span><span class="sxs-lookup"><span data-stu-id="650ae-280">VNet to VNet connectivity in classic is achieved by creating two IPsec tunnels to local network sites representing the VNets.</span></span> <span data-ttu-id="650ae-281">This is transformed to Vnet2Vnet connection type in resource manager model without requiring local network gateways.</span><span class="sxs-lookup"><span data-stu-id="650ae-281">This is transformed to Vnet2Vnet connection type in resource manager model without requiring local network gateways.</span></span> |

## <a name="changes-to-your-automation-and-tooling-after-migration"></a><span data-ttu-id="650ae-282">Changes to your automation and tooling after migration</span><span class="sxs-lookup"><span data-stu-id="650ae-282">Changes to your automation and tooling after migration</span></span>
<span data-ttu-id="650ae-283">As part of migrating your resources from the Classic deployment model to the Resource Manager deployment model, you have to update your existing automation or tooling to ensure that it continues to work after the migration.</span><span class="sxs-lookup"><span data-stu-id="650ae-283">As part of migrating your resources from the Classic deployment model to the Resource Manager deployment model, you have to update your existing automation or tooling to ensure that it continues to work after the migration.</span></span>





