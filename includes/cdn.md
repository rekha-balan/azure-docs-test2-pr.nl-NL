# <a name="using-cdn-for-azure"></a><span data-ttu-id="95610-101">Using CDN for Azure</span><span class="sxs-lookup"><span data-stu-id="95610-101">Using CDN for Azure</span></span>
<span data-ttu-id="95610-102">The Azure Content Delivery Network (CDN) offers developers a global solution for delivering high-bandwidth content by caching blobs and static content of compute instances at physical nodes in the United States, Europe, Asia, Australia and South America.</span><span class="sxs-lookup"><span data-stu-id="95610-102">The Azure Content Delivery Network (CDN) offers developers a global solution for delivering high-bandwidth content by caching blobs and static content of compute instances at physical nodes in the United States, Europe, Asia, Australia and South America.</span></span> <span data-ttu-id="95610-103">For a current list of CDN node locations, see [Azure CDN Node Locations].</span><span class="sxs-lookup"><span data-stu-id="95610-103">For a current list of CDN node locations, see [Azure CDN Node Locations].</span></span>

<span data-ttu-id="95610-104">This task includes the following steps:</span><span class="sxs-lookup"><span data-stu-id="95610-104">This task includes the following steps:</span></span>

* [<span data-ttu-id="95610-105">Step 1: Create a storage account</span><span class="sxs-lookup"><span data-stu-id="95610-105">Step 1: Create a storage account</span></span>](#Step1)
* [<span data-ttu-id="95610-106">Step 2: Create a new CDN endpoint for your storage account</span><span class="sxs-lookup"><span data-stu-id="95610-106">Step 2: Create a new CDN endpoint for your storage account</span></span>](#Step2)
* [<span data-ttu-id="95610-107">Step 3: Access your CDN content</span><span class="sxs-lookup"><span data-stu-id="95610-107">Step 3: Access your CDN content</span></span>](#Step3)
* [<span data-ttu-id="95610-108">Step 4: Remove your CDN content</span><span class="sxs-lookup"><span data-stu-id="95610-108">Step 4: Remove your CDN content</span></span>](#Step4)

<span data-ttu-id="95610-109">The benefits of using CDN to cache Azure data include:</span><span class="sxs-lookup"><span data-stu-id="95610-109">The benefits of using CDN to cache Azure data include:</span></span>

* <span data-ttu-id="95610-110">Better performance and user experience for end users who are far from a content source, and are using applications where many 'internet trips' are required to load content</span><span class="sxs-lookup"><span data-stu-id="95610-110">Better performance and user experience for end users who are far from a content source, and are using applications where many 'internet trips' are required to load content</span></span>
* <span data-ttu-id="95610-111">Large distributed scale to better handle instantaneous high load, say, at the start of an event such as a product launch</span><span class="sxs-lookup"><span data-stu-id="95610-111">Large distributed scale to better handle instantaneous high load, say, at the start of an event such as a product launch</span></span>

<span data-ttu-id="95610-112">Existing CDN customers can now use the Azure CDN in the [Azure classic portal].</span><span class="sxs-lookup"><span data-stu-id="95610-112">Existing CDN customers can now use the Azure CDN in the [Azure classic portal].</span></span> <span data-ttu-id="95610-113">The CDN is an add-on feature to your subscription and has a separate [billing plan].</span><span class="sxs-lookup"><span data-stu-id="95610-113">The CDN is an add-on feature to your subscription and has a separate [billing plan].</span></span>

<span data-ttu-id="95610-114"><a id="Step1"> </a></span><span class="sxs-lookup"><span data-stu-id="95610-114"><a id="Step1"> </a></span></span>

<h2><span data-ttu-id="95610-115">Step 1: Create a storage account</span><span class="sxs-lookup"><span data-stu-id="95610-115">Step 1: Create a storage account</span></span></h2>

<span data-ttu-id="95610-116">Use the following procedure to create a new storage account for a Azure subscription.</span><span class="sxs-lookup"><span data-stu-id="95610-116">Use the following procedure to create a new storage account for a Azure subscription.</span></span> <span data-ttu-id="95610-117">A storage account gives access to Azure storage services.</span><span class="sxs-lookup"><span data-stu-id="95610-117">A storage account gives access to Azure storage services.</span></span> <span data-ttu-id="95610-118">The storage account represents the highest level of the namespace for accessing each of the Azure storage service components: Blob services, Queue services, and Table services.</span><span class="sxs-lookup"><span data-stu-id="95610-118">The storage account represents the highest level of the namespace for accessing each of the Azure storage service components: Blob services, Queue services, and Table services.</span></span> <span data-ttu-id="95610-119">For more information about the Azure storage services, see [Using the Azure Storage Services](http://msdn.microsoft.com/library/azure/gg433040.aspx).</span><span class="sxs-lookup"><span data-stu-id="95610-119">For more information about the Azure storage services, see [Using the Azure Storage Services](http://msdn.microsoft.com/library/azure/gg433040.aspx).</span></span>

<span data-ttu-id="95610-120">To create a storage account, you must be either the service administrator or a co-administrator for the associated subscription.</span><span class="sxs-lookup"><span data-stu-id="95610-120">To create a storage account, you must be either the service administrator or a co-administrator for the associated subscription.</span></span>

> [!NOTE]
> <span data-ttu-id="95610-121">For information about performing this operation by using the Azure Service Management API, see the [Create Storage Account](http://msdn.microsoft.com/library/windowsazure/hh264518.aspx) reference topic.</span><span class="sxs-lookup"><span data-stu-id="95610-121">For information about performing this operation by using the Azure Service Management API, see the [Create Storage Account](http://msdn.microsoft.com/library/windowsazure/hh264518.aspx) reference topic.</span></span>
> 
> 

<span data-ttu-id="95610-122">**To create a storage account for an Azure subscription**</span><span class="sxs-lookup"><span data-stu-id="95610-122">**To create a storage account for an Azure subscription**</span></span>

1. <span data-ttu-id="95610-123">Log into the [Azure classic portal].</span><span class="sxs-lookup"><span data-stu-id="95610-123">Log into the [Azure classic portal].</span></span>
2. <span data-ttu-id="95610-124">In the lower left corner, click **New**.</span><span class="sxs-lookup"><span data-stu-id="95610-124">In the lower left corner, click **New**.</span></span> <span data-ttu-id="95610-125">In the **New** Dialog, select **Data Services**, then click **Storage**, then **Quick Create**.</span><span class="sxs-lookup"><span data-stu-id="95610-125">In the **New** Dialog, select **Data Services**, then click **Storage**, then **Quick Create**.</span></span>
   
   <span data-ttu-id="95610-126">The **Create Storage Account** dialog appears.</span><span class="sxs-lookup"><span data-stu-id="95610-126">The **Create Storage Account** dialog appears.</span></span>
   
   ![Create Storage Account][create-new-storage-account]
3. <span data-ttu-id="95610-128">In the **URL** field, type a subdomain name.</span><span class="sxs-lookup"><span data-stu-id="95610-128">In the **URL** field, type a subdomain name.</span></span> <span data-ttu-id="95610-129">This entry can contain from 3-24 lowercase letters and numbers.</span><span class="sxs-lookup"><span data-stu-id="95610-129">This entry can contain from 3-24 lowercase letters and numbers.</span></span>
   
    <span data-ttu-id="95610-130">This value becomes the host name within the URI that is used to address Blob, Queue, or Table resources for the subscription.</span><span class="sxs-lookup"><span data-stu-id="95610-130">This value becomes the host name within the URI that is used to address Blob, Queue, or Table resources for the subscription.</span></span> <span data-ttu-id="95610-131">To address a container resource in the Blob service, you would use a URI in the following format, where *&lt;StorageAccountLabel&gt;* refers to the value you typed in **Enter a URL**:</span><span class="sxs-lookup"><span data-stu-id="95610-131">To address a container resource in the Blob service, you would use a URI in the following format, where *&lt;StorageAccountLabel&gt;* refers to the value you typed in **Enter a URL**:</span></span>
   
    <span data-ttu-id="95610-132">http://*&lt;StorageAcountLabel&gt;*.blob.core.windows.net/*&lt;mycontainer&gt;*</span><span class="sxs-lookup"><span data-stu-id="95610-132">http://*&lt;StorageAcountLabel&gt;*.blob.core.windows.net/*&lt;mycontainer&gt;*</span></span>
   
    <span data-ttu-id="95610-133">**Important:** The URL label forms the subdomain of the storage  account URI and must be unique among all hosted services in  Azure.</span><span class="sxs-lookup"><span data-stu-id="95610-133">**Important:** The URL label forms the subdomain of the storage  account URI and must be unique among all hosted services in  Azure.</span></span>
   
    <span data-ttu-id="95610-134">This value is also used as the name of this storage account in the portal, or when accessing this account programmatically.</span><span class="sxs-lookup"><span data-stu-id="95610-134">This value is also used as the name of this storage account in the portal, or when accessing this account programmatically.</span></span>
4. <span data-ttu-id="95610-135">From the **Region/Affinity Group** drop-down list, select a region or affinity group for the storage account.</span><span class="sxs-lookup"><span data-stu-id="95610-135">From the **Region/Affinity Group** drop-down list, select a region or affinity group for the storage account.</span></span> <span data-ttu-id="95610-136">Select an affinity group instead of a region if you want your storage services to be in the same data center with other Windows Azure services that you are using.</span><span class="sxs-lookup"><span data-stu-id="95610-136">Select an affinity group instead of a region if you want your storage services to be in the same data center with other Windows Azure services that you are using.</span></span> <span data-ttu-id="95610-137">This can improve performance, and no charges are incurred for egress.</span><span class="sxs-lookup"><span data-stu-id="95610-137">This can improve performance, and no charges are incurred for egress.</span></span>  
   
   <span data-ttu-id="95610-138">**Note:** To create an affinity group, open the **Settings** area of the Management Portal, click **Affinity Groups**, and then click either **Add an affinity group** or **Add**.</span><span class="sxs-lookup"><span data-stu-id="95610-138">**Note:** To create an affinity group, open the **Settings** area of the Management Portal, click **Affinity Groups**, and then click either **Add an affinity group** or **Add**.</span></span> <span data-ttu-id="95610-139">You can also create and manage affinity groups using the Windows Azure Service Management API.</span><span class="sxs-lookup"><span data-stu-id="95610-139">You can also create and manage affinity groups using the Windows Azure Service Management API.</span></span> <span data-ttu-id="95610-140">For more information, see [Operations on Affinity Groups].</span><span class="sxs-lookup"><span data-stu-id="95610-140">For more information, see [Operations on Affinity Groups].</span></span>
5. <span data-ttu-id="95610-141">From the **Subscription** drop-down list, select the subscription that the storage account will be used with.</span><span class="sxs-lookup"><span data-stu-id="95610-141">From the **Subscription** drop-down list, select the subscription that the storage account will be used with.</span></span>
6. <span data-ttu-id="95610-142">Click **Create Storage Account**.</span><span class="sxs-lookup"><span data-stu-id="95610-142">Click **Create Storage Account**.</span></span> <span data-ttu-id="95610-143">The process of creating the storage account might take several minutes to complete.</span><span class="sxs-lookup"><span data-stu-id="95610-143">The process of creating the storage account might take several minutes to complete.</span></span>
7. <span data-ttu-id="95610-144">To verify that the storage account was created successfully, verify that the account appears in the items listed for **Storage** with a status of **Online**.</span><span class="sxs-lookup"><span data-stu-id="95610-144">To verify that the storage account was created successfully, verify that the account appears in the items listed for **Storage** with a status of **Online**.</span></span>

<span data-ttu-id="95610-145"><a id="Step2"> </a></span><span class="sxs-lookup"><span data-stu-id="95610-145"><a id="Step2"> </a></span></span>

<h2><span data-ttu-id="95610-146">Step 2: Create a new CDN endpoint for your storage account</span><span class="sxs-lookup"><span data-stu-id="95610-146">Step 2: Create a new CDN endpoint for your storage account</span></span></h2>

<span data-ttu-id="95610-147">Once you enable CDN access to a storage account or hosted service, all publicly available objects are eligible for CDN edge caching.</span><span class="sxs-lookup"><span data-stu-id="95610-147">Once you enable CDN access to a storage account or hosted service, all publicly available objects are eligible for CDN edge caching.</span></span> <span data-ttu-id="95610-148">If you modify an object that is currently cached in the CDN, the new content will not be available via the CDN until the CDN refreshes its content when the cached content time-to-live period expires.</span><span class="sxs-lookup"><span data-stu-id="95610-148">If you modify an object that is currently cached in the CDN, the new content will not be available via the CDN until the CDN refreshes its content when the cached content time-to-live period expires.</span></span>

<span data-ttu-id="95610-149">**To create a new CDN endpoint for your storage account**</span><span class="sxs-lookup"><span data-stu-id="95610-149">**To create a new CDN endpoint for your storage account**</span></span>

1. <span data-ttu-id="95610-150">In the [Azure classic portal], in the navigation pane, click **CDN**.</span><span class="sxs-lookup"><span data-stu-id="95610-150">In the [Azure classic portal], in the navigation pane, click **CDN**.</span></span>
2. <span data-ttu-id="95610-151">On the ribbon, click **New**.</span><span class="sxs-lookup"><span data-stu-id="95610-151">On the ribbon, click **New**.</span></span> <span data-ttu-id="95610-152">In the **New** dialog, select **App Services**, then **CDN**, then **Quick Create**.</span><span class="sxs-lookup"><span data-stu-id="95610-152">In the **New** dialog, select **App Services**, then **CDN**, then **Quick Create**.</span></span>
3. <span data-ttu-id="95610-153">In the **Origin Domain** dropdown, select the storage account you created in the previous section from the list of your available storage accounts.</span><span class="sxs-lookup"><span data-stu-id="95610-153">In the **Origin Domain** dropdown, select the storage account you created in the previous section from the list of your available storage accounts.</span></span> 
4. <span data-ttu-id="95610-154">Click the **Create** button to create the new endpoint.</span><span class="sxs-lookup"><span data-stu-id="95610-154">Click the **Create** button to create the new endpoint.</span></span>
5. <span data-ttu-id="95610-155">Once the endpoint is created, it appears in a list of endpoints for the subscription.</span><span class="sxs-lookup"><span data-stu-id="95610-155">Once the endpoint is created, it appears in a list of endpoints for the subscription.</span></span> <span data-ttu-id="95610-156">The list view shows the URL to use to access cached content, as well as the origin domain.</span><span class="sxs-lookup"><span data-stu-id="95610-156">The list view shows the URL to use to access cached content, as well as the origin domain.</span></span> 
   
    <span data-ttu-id="95610-157">The origin domain is the location from which the CDN caches content.</span><span class="sxs-lookup"><span data-stu-id="95610-157">The origin domain is the location from which the CDN caches content.</span></span> <span data-ttu-id="95610-158">The origin domain can be either a storage account or a cloud service; a storage account is used for the purposes of this example.</span><span class="sxs-lookup"><span data-stu-id="95610-158">The origin domain can be either a storage account or a cloud service; a storage account is used for the purposes of this example.</span></span> <span data-ttu-id="95610-159">Storage content is cached to edge servers according either to a cache-control setting that you specify, or to the default heuristics of the caching network.</span><span class="sxs-lookup"><span data-stu-id="95610-159">Storage content is cached to edge servers according either to a cache-control setting that you specify, or to the default heuristics of the caching network.</span></span> 

    > <span data-ttu-id="95610-160">[AZURE.NOTE] The configuration created for the endpoint will not immediately be available; it can take up to 60 minutes for the registration to propagate through the CDN network.</span><span class="sxs-lookup"><span data-stu-id="95610-160">[AZURE.NOTE] The configuration created for the endpoint will not immediately be available; it can take up to 60 minutes for the registration to propagate through the CDN network.</span></span> <span data-ttu-id="95610-161">Users who try to use the CDN domain name immediately may receive status code 400 (Bad Request) until the content is available via the CDN.</span><span class="sxs-lookup"><span data-stu-id="95610-161">Users who try to use the CDN domain name immediately may receive status code 400 (Bad Request) until the content is available via the CDN.</span></span>

<span data-ttu-id="95610-162"><a id="Step3"> </a></span><span class="sxs-lookup"><span data-stu-id="95610-162"><a id="Step3"> </a></span></span>

<h2><span data-ttu-id="95610-163">Step 3: Access CDN content</span><span class="sxs-lookup"><span data-stu-id="95610-163">Step 3: Access CDN content</span></span></h2> 

<span data-ttu-id="95610-164">To access cached content on the CDN, use the CDN URL provided in the portal.</span><span class="sxs-lookup"><span data-stu-id="95610-164">To access cached content on the CDN, use the CDN URL provided in the portal.</span></span> <span data-ttu-id="95610-165">The address for a cached blob will be similar to the following:</span><span class="sxs-lookup"><span data-stu-id="95610-165">The address for a cached blob will be similar to the following:</span></span>

<span data-ttu-id="95610-166">http://<*CDNNamespace*\>.vo.msecnd.net/<*myPublicContainer*\>/<*BlobName*\></span><span class="sxs-lookup"><span data-stu-id="95610-166">http://<*CDNNamespace*\>.vo.msecnd.net/<*myPublicContainer*\>/<*BlobName*\></span></span>

<span data-ttu-id="95610-167"><a id="Step4"> </a></span><span class="sxs-lookup"><span data-stu-id="95610-167"><a id="Step4"> </a></span></span>

<h2><span data-ttu-id="95610-168">Step 4: Remove content from the CDN</span><span class="sxs-lookup"><span data-stu-id="95610-168">Step 4: Remove content from the CDN</span></span></h2>

<span data-ttu-id="95610-169">If you no longer wish to cache an object in the Azure Content Delivery Network (CDN), you can take one of the following steps:</span><span class="sxs-lookup"><span data-stu-id="95610-169">If you no longer wish to cache an object in the Azure Content Delivery Network (CDN), you can take one of the following steps:</span></span>

* <span data-ttu-id="95610-170">For an Azure blob, you can delete the blob from the public container.</span><span class="sxs-lookup"><span data-stu-id="95610-170">For an Azure blob, you can delete the blob from the public container.</span></span>
* <span data-ttu-id="95610-171">You can make the container private instead of public.</span><span class="sxs-lookup"><span data-stu-id="95610-171">You can make the container private instead of public.</span></span> <span data-ttu-id="95610-172">See [Restrict Access to Containers and Blobs](https://azure.microsoft.com/documentation/articles/storage-manage-access-to-resources/#restrict-access-to-containers-and-blobs) for more information.</span><span class="sxs-lookup"><span data-stu-id="95610-172">See [Restrict Access to Containers and Blobs](https://azure.microsoft.com/documentation/articles/storage-manage-access-to-resources/#restrict-access-to-containers-and-blobs) for more information.</span></span>
* <span data-ttu-id="95610-173">You can disable or delete the CDN endpoint using the Management Portal.</span><span class="sxs-lookup"><span data-stu-id="95610-173">You can disable or delete the CDN endpoint using the Management Portal.</span></span>
* <span data-ttu-id="95610-174">You can modify your hosted service to no longer respond to requests for the object.</span><span class="sxs-lookup"><span data-stu-id="95610-174">You can modify your hosted service to no longer respond to requests for the object.</span></span>

<span data-ttu-id="95610-175">An object already cached in the CDN will remain cached until the time-to-live period for the object expires.</span><span class="sxs-lookup"><span data-stu-id="95610-175">An object already cached in the CDN will remain cached until the time-to-live period for the object expires.</span></span> <span data-ttu-id="95610-176">When the time-to-live period expires, the CDN will check to see whether the CDN endpoint is still valid and the object still anonymously accessible.</span><span class="sxs-lookup"><span data-stu-id="95610-176">When the time-to-live period expires, the CDN will check to see whether the CDN endpoint is still valid and the object still anonymously accessible.</span></span> <span data-ttu-id="95610-177">If it is not, then the object will no longer be cached.</span><span class="sxs-lookup"><span data-stu-id="95610-177">If it is not, then the object will no longer be cached.</span></span>

<span data-ttu-id="95610-178">The ability to immediately purge content is currently not supported on Azure Management Portal.</span><span class="sxs-lookup"><span data-stu-id="95610-178">The ability to immediately purge content is currently not supported on Azure Management Portal.</span></span> <span data-ttu-id="95610-179">Please contact [Azure support](https://azure.microsoft.com/support/options/)  if you need to immediately purge content.</span><span class="sxs-lookup"><span data-stu-id="95610-179">Please contact [Azure support](https://azure.microsoft.com/support/options/)  if you need to immediately purge content.</span></span> 

## <a name="additional-resources"></a><span data-ttu-id="95610-180">Additional resources</span><span class="sxs-lookup"><span data-stu-id="95610-180">Additional resources</span></span>
* <span data-ttu-id="95610-181">[How to Create an Affinity Group in Azure]</span><span class="sxs-lookup"><span data-stu-id="95610-181">[How to Create an Affinity Group in Azure]</span></span>
* <span data-ttu-id="95610-182">[How to: Manage Storage Accounts for an Azure Subscription]</span><span class="sxs-lookup"><span data-stu-id="95610-182">[How to: Manage Storage Accounts for an Azure Subscription]</span></span>
* <span data-ttu-id="95610-183">[About the Service Management API]</span><span class="sxs-lookup"><span data-stu-id="95610-183">[About the Service Management API]</span></span>
* <span data-ttu-id="95610-184">[How to Map CDN Content to a Custom Domain]</span><span class="sxs-lookup"><span data-stu-id="95610-184">[How to Map CDN Content to a Custom Domain]</span></span>

[Create Storage Account]: http://azure.microsoft.com/documentation/articles/storage-create-storage-account/
[Azure CDN Node Locations]: http://msdn.microsoft.com/library/windowsazure/gg680302.aspx
[Azure classic portal]: https://manage.windowsazure.com/
[billing plan]: /pricing/calculator/?scenario=full
[How to Create an Affinity Group in Azure]: http://msdn.microsoft.com/library/azure/ee460798.aspx
[Overview of the Azure CDN]: http://msdn.microsoft.com/library/windowsazure/ff919703.aspx
[About the Service Management API]: http://msdn.microsoft.com/library/windowsazure/ee460807.aspx
[How to Map CDN Content to a Custom Domain]: http://msdn.microsoft.com/library/windowsazure/gg680307.aspx


[create-new-storage-account]: https://docstestmedia1.blob.core.windows.net/azure-media/includes/media/cdn/CDN_CreateNewStorageAcct.png
[Previous Management Portal]: ../../Shared/Media/previous-portal.png

