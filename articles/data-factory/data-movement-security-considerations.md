---
title: Security considerations in Azure Data Factory | Microsoft Docs
description: Describes basic security infrastructure that data movement services in Azure Data Factory use to help secure your data.
services: data-factory
documentationcenter: ''
author: nabhishek
manager: craigg
ms.reviewer: douglasl
ms.service: data-factory
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: conceptual
ms.date: 06/15/2018
ms.author: abnarain
ms.openlocfilehash: 3c2b44455b417d1bc764337d91a5535d7ffa34a5
ms.sourcegitcommit: d1451406a010fd3aa854dc8e5b77dc5537d8050e
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 09/13/2018
ms.locfileid: "44855694"
---
#  <a name="security-considerations-for-data-movement-in-azure-data-factory"></a><span data-ttu-id="6bac3-103">Security considerations for data movement in Azure Data Factory</span><span class="sxs-lookup"><span data-stu-id="6bac3-103">Security considerations for data movement in Azure Data Factory</span></span>
> [!div class="op_single_selector" title1="Select the version of Data Factory service you are using:"]
> * [Version 1](v1/data-factory-data-movement-security-considerations.md)
> * [Current version](data-movement-security-considerations.md)

<span data-ttu-id="6bac3-106">This article describes basic security infrastructure that data movement services in Azure Data Factory use to help secure your data.</span><span class="sxs-lookup"><span data-stu-id="6bac3-106">This article describes basic security infrastructure that data movement services in Azure Data Factory use to help secure your data.</span></span> <span data-ttu-id="6bac3-107">Data Factory management resources are built on Azure security infrastructure and use all possible security measures offered by Azure.</span><span class="sxs-lookup"><span data-stu-id="6bac3-107">Data Factory management resources are built on Azure security infrastructure and use all possible security measures offered by Azure.</span></span>

<span data-ttu-id="6bac3-108">In a Data Factory solution, you create one or more data [pipelines](concepts-pipelines-activities.md).</span><span class="sxs-lookup"><span data-stu-id="6bac3-108">In a Data Factory solution, you create one or more data [pipelines](concepts-pipelines-activities.md).</span></span> <span data-ttu-id="6bac3-109">A pipeline is a logical grouping of activities that together perform a task.</span><span class="sxs-lookup"><span data-stu-id="6bac3-109">A pipeline is a logical grouping of activities that together perform a task.</span></span> <span data-ttu-id="6bac3-110">These pipelines reside in the region where the data factory was created.</span><span class="sxs-lookup"><span data-stu-id="6bac3-110">These pipelines reside in the region where the data factory was created.</span></span> 

<span data-ttu-id="6bac3-111">Even though Data Factory is only available in few regions, the data movement service is [available globally](concepts-integration-runtime.md#integration-runtime-location) to ensure data compliance, efficiency, and reduced network egress costs.</span><span class="sxs-lookup"><span data-stu-id="6bac3-111">Even though Data Factory is only available in few regions, the data movement service is [available globally](concepts-integration-runtime.md#integration-runtime-location) to ensure data compliance, efficiency, and reduced network egress costs.</span></span> 

<span data-ttu-id="6bac3-112">Azure Data Factory does not store any data except for linked service credentials for cloud data stores, which are encrypted by using certificates.</span><span class="sxs-lookup"><span data-stu-id="6bac3-112">Azure Data Factory does not store any data except for linked service credentials for cloud data stores, which are encrypted by using certificates.</span></span> <span data-ttu-id="6bac3-113">With Data Factory, you create data-driven workflows to orchestrate movement of data between [supported data stores](copy-activity-overview.md#supported-data-stores-and-formats), and processing of data by using [compute services](compute-linked-services.md) in other regions or in an on-premises environment.</span><span class="sxs-lookup"><span data-stu-id="6bac3-113">With Data Factory, you create data-driven workflows to orchestrate movement of data between [supported data stores](copy-activity-overview.md#supported-data-stores-and-formats), and processing of data by using [compute services](compute-linked-services.md) in other regions or in an on-premises environment.</span></span> <span data-ttu-id="6bac3-114">You can also monitor and manage workflows by using SDKs and Azure Monitor.</span><span class="sxs-lookup"><span data-stu-id="6bac3-114">You can also monitor and manage workflows by using SDKs and Azure Monitor.</span></span>

<span data-ttu-id="6bac3-115">Data movement by using Data Factory has been certified for:</span><span class="sxs-lookup"><span data-stu-id="6bac3-115">Data movement by using Data Factory has been certified for:</span></span>
-   [<span data-ttu-id="6bac3-116">HIPAA/HITECH</span><span class="sxs-lookup"><span data-stu-id="6bac3-116">HIPAA/HITECH</span></span>](https://www.microsoft.com/en-us/trustcenter/Compliance/HIPAA) 
-   [<span data-ttu-id="6bac3-117">ISO/IEC 27001</span><span class="sxs-lookup"><span data-stu-id="6bac3-117">ISO/IEC 27001</span></span>](https://www.microsoft.com/en-us/trustcenter/Compliance/ISO-IEC-27001)  
-   [<span data-ttu-id="6bac3-118">ISO/IEC 27018</span><span class="sxs-lookup"><span data-stu-id="6bac3-118">ISO/IEC 27018</span></span>](https://www.microsoft.com/en-us/trustcenter/Compliance/ISO-IEC-27018)
-   [<span data-ttu-id="6bac3-119">CSA STAR</span><span class="sxs-lookup"><span data-stu-id="6bac3-119">CSA STAR</span></span>](https://www.microsoft.com/en-us/trustcenter/Compliance/CSA-STAR-Certification)

<span data-ttu-id="6bac3-120">If you're interested in Azure compliance and how Azure secures its own infrastructure, visit the [Microsoft Trust Center](https://microsoft.com/en-us/trustcenter/default.aspx).</span><span class="sxs-lookup"><span data-stu-id="6bac3-120">If you're interested in Azure compliance and how Azure secures its own infrastructure, visit the [Microsoft Trust Center](https://microsoft.com/en-us/trustcenter/default.aspx).</span></span>

<span data-ttu-id="6bac3-121">In this article, we review security considerations in the following two data movement scenarios:</span><span class="sxs-lookup"><span data-stu-id="6bac3-121">In this article, we review security considerations in the following two data movement scenarios:</span></span> 

- <span data-ttu-id="6bac3-122">**Cloud scenario**: In this scenario, both your source and your destination are publicly accessible through the internet.</span><span class="sxs-lookup"><span data-stu-id="6bac3-122">**Cloud scenario**: In this scenario, both your source and your destination are publicly accessible through the internet.</span></span> <span data-ttu-id="6bac3-123">These include managed cloud storage services such as Azure Storage, Azure SQL Data Warehouse, Azure SQL Database, Azure Data Lake Store, Amazon S3, Amazon Redshift, SaaS services such as Salesforce, and web protocols such as FTP and OData.</span><span class="sxs-lookup"><span data-stu-id="6bac3-123">These include managed cloud storage services such as Azure Storage, Azure SQL Data Warehouse, Azure SQL Database, Azure Data Lake Store, Amazon S3, Amazon Redshift, SaaS services such as Salesforce, and web protocols such as FTP and OData.</span></span> <span data-ttu-id="6bac3-124">Find a complete list of supported data sources in  [Supported data stores and formats](copy-activity-overview.md#supported-data-stores-and-formats).</span><span class="sxs-lookup"><span data-stu-id="6bac3-124">Find a complete list of supported data sources in  [Supported data stores and formats](copy-activity-overview.md#supported-data-stores-and-formats).</span></span>
- <span data-ttu-id="6bac3-125">**Hybrid scenario**: In this scenario, either your source or your destination is behind a firewall or inside an on-premises corporate network.</span><span class="sxs-lookup"><span data-stu-id="6bac3-125">**Hybrid scenario**: In this scenario, either your source or your destination is behind a firewall or inside an on-premises corporate network.</span></span> <span data-ttu-id="6bac3-126">Or, the data store is in a private network or virtual network (most often the source) and is not publicly accessible.</span><span class="sxs-lookup"><span data-stu-id="6bac3-126">Or, the data store is in a private network or virtual network (most often the source) and is not publicly accessible.</span></span> <span data-ttu-id="6bac3-127">Database servers hosted on virtual machines also fall under this scenario.</span><span class="sxs-lookup"><span data-stu-id="6bac3-127">Database servers hosted on virtual machines also fall under this scenario.</span></span>

## <a name="cloud-scenarios"></a><span data-ttu-id="6bac3-128">Cloud scenarios</span><span class="sxs-lookup"><span data-stu-id="6bac3-128">Cloud scenarios</span></span>

### <a name="securing-data-store-credentials"></a><span data-ttu-id="6bac3-129">Securing data store credentials</span><span class="sxs-lookup"><span data-stu-id="6bac3-129">Securing data store credentials</span></span>

- <span data-ttu-id="6bac3-130">**Store encrypted credentials in an Azure Data Factory managed store**.</span><span class="sxs-lookup"><span data-stu-id="6bac3-130">**Store encrypted credentials in an Azure Data Factory managed store**.</span></span> <span data-ttu-id="6bac3-131">Data Factory helps protect your data store credentials by encrypting them with certificates managed by Microsoft.</span><span class="sxs-lookup"><span data-stu-id="6bac3-131">Data Factory helps protect your data store credentials by encrypting them with certificates managed by Microsoft.</span></span> <span data-ttu-id="6bac3-132">These certificates are rotated every two years (which includes certificate renewal and the migration of credentials).</span><span class="sxs-lookup"><span data-stu-id="6bac3-132">These certificates are rotated every two years (which includes certificate renewal and the migration of credentials).</span></span> <span data-ttu-id="6bac3-133">The encrypted credentials are securely stored in an Azure storage account managed by Azure Data Factory management services.</span><span class="sxs-lookup"><span data-stu-id="6bac3-133">The encrypted credentials are securely stored in an Azure storage account managed by Azure Data Factory management services.</span></span> <span data-ttu-id="6bac3-134">For more information about Azure Storage security, see [Azure Storage security overview](../security/security-storage-overview.md).</span><span class="sxs-lookup"><span data-stu-id="6bac3-134">For more information about Azure Storage security, see [Azure Storage security overview](../security/security-storage-overview.md).</span></span>
- <span data-ttu-id="6bac3-135">**Store credentials in Azure Key Vault**.</span><span class="sxs-lookup"><span data-stu-id="6bac3-135">**Store credentials in Azure Key Vault**.</span></span> <span data-ttu-id="6bac3-136">You can also store the data store's credential in [Azure Key Vault](https://azure.microsoft.com/services/key-vault/).</span><span class="sxs-lookup"><span data-stu-id="6bac3-136">You can also store the data store's credential in [Azure Key Vault](https://azure.microsoft.com/services/key-vault/).</span></span> <span data-ttu-id="6bac3-137">Data Factory retrieves the credential during the execution of an activity.</span><span class="sxs-lookup"><span data-stu-id="6bac3-137">Data Factory retrieves the credential during the execution of an activity.</span></span> <span data-ttu-id="6bac3-138">For more information, see [Store credential in Azure Key Vault](store-credentials-in-key-vault.md).</span><span class="sxs-lookup"><span data-stu-id="6bac3-138">For more information, see [Store credential in Azure Key Vault](store-credentials-in-key-vault.md).</span></span>

### <a name="data-encryption-in-transit"></a><span data-ttu-id="6bac3-139">Data encryption in transit</span><span class="sxs-lookup"><span data-stu-id="6bac3-139">Data encryption in transit</span></span>
<span data-ttu-id="6bac3-140">If the cloud data store supports HTTPS or TLS, all data transfers between data movement services in Data Factory and a cloud data store are via secure channel HTTPS or TLS .</span><span class="sxs-lookup"><span data-stu-id="6bac3-140">If the cloud data store supports HTTPS or TLS, all data transfers between data movement services in Data Factory and a cloud data store are via secure channel HTTPS or TLS .</span></span>

> [!NOTE]
> All connections to Azure SQL Database and Azure SQL Data Warehouse require encryption (SSL/TLS) while data is in transit to and from the database. When you're authoring a pipeline by using JSON, add the encryption property and set it to **true** in the connection string. For Azure Storage, you can use **HTTPS** in the connection string.

> [!NOTE]
> To enable encryption in transit while moving data from Oracle follow one of the below options:
> 1. In Oracle server, go to Oracle Advanced Security (OAS) and configure the encryption settings, which supports Triple-DES Encryption (3DES) and Advanced Encryption Standard (AES), refer [here](https://docs.oracle.com/cd/E11882_01/network.112/e40393/asointro.htm#i1008759) for details. ADF automatically negotiates the encryption method to use the one you configure in OAS when establishing connection to Oracle.
> 2. In ADF, you can add EncryptionMethod=1 in the connection string (in the Linked Service). This will use SSL/TLS as the encryption method. To use this, you need to disable non-SSL encryption settings in OAS on the Oracle server side to avoid encryption conflict.

> [!NOTE]
> TLS version used is 1.2.

### <a name="data-encryption-at-rest"></a><span data-ttu-id="6bac3-151">Data encryption at rest</span><span class="sxs-lookup"><span data-stu-id="6bac3-151">Data encryption at rest</span></span>
<span data-ttu-id="6bac3-152">Some data stores support encryption of data at rest.</span><span class="sxs-lookup"><span data-stu-id="6bac3-152">Some data stores support encryption of data at rest.</span></span> <span data-ttu-id="6bac3-153">We recommend that you enable the data encryption mechanism for those data stores.</span><span class="sxs-lookup"><span data-stu-id="6bac3-153">We recommend that you enable the data encryption mechanism for those data stores.</span></span> 

#### <a name="azure-sql-data-warehouse"></a><span data-ttu-id="6bac3-154">Azure SQL Data Warehouse</span><span class="sxs-lookup"><span data-stu-id="6bac3-154">Azure SQL Data Warehouse</span></span>
<span data-ttu-id="6bac3-155">Transparent Data Encryption (TDE) in Azure SQL Data Warehouse helps protect against the threat of malicious activity by performing real-time encryption and decryption of your data at rest.</span><span class="sxs-lookup"><span data-stu-id="6bac3-155">Transparent Data Encryption (TDE) in Azure SQL Data Warehouse helps protect against the threat of malicious activity by performing real-time encryption and decryption of your data at rest.</span></span> <span data-ttu-id="6bac3-156">This behavior is transparent to the client.</span><span class="sxs-lookup"><span data-stu-id="6bac3-156">This behavior is transparent to the client.</span></span> <span data-ttu-id="6bac3-157">For more information, see [Secure a database in SQL Data Warehouse](../sql-data-warehouse/sql-data-warehouse-overview-manage-security.md).</span><span class="sxs-lookup"><span data-stu-id="6bac3-157">For more information, see [Secure a database in SQL Data Warehouse](../sql-data-warehouse/sql-data-warehouse-overview-manage-security.md).</span></span>

#### <a name="azure-sql-database"></a><span data-ttu-id="6bac3-158">Azure SQL Database</span><span class="sxs-lookup"><span data-stu-id="6bac3-158">Azure SQL Database</span></span>
<span data-ttu-id="6bac3-159">Azure SQL Database also supports transparent data encryption (TDE), which helps protect against the threat of malicious activity by performing real-time encryption and decryption of the data, without requiring changes to the application.</span><span class="sxs-lookup"><span data-stu-id="6bac3-159">Azure SQL Database also supports transparent data encryption (TDE), which helps protect against the threat of malicious activity by performing real-time encryption and decryption of the data, without requiring changes to the application.</span></span> <span data-ttu-id="6bac3-160">This behavior is transparent to the client.</span><span class="sxs-lookup"><span data-stu-id="6bac3-160">This behavior is transparent to the client.</span></span> <span data-ttu-id="6bac3-161">For more information, see [Transparent data encryption for SQL Database and Data Warehouse](https://docs.microsoft.com/sql/relational-databases/security/encryption/transparent-data-encryption-azure-sql).</span><span class="sxs-lookup"><span data-stu-id="6bac3-161">For more information, see [Transparent data encryption for SQL Database and Data Warehouse](https://docs.microsoft.com/sql/relational-databases/security/encryption/transparent-data-encryption-azure-sql).</span></span>

#### <a name="azure-data-lake-store"></a><span data-ttu-id="6bac3-162">Azure Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="6bac3-162">Azure Data Lake Store</span></span>
<span data-ttu-id="6bac3-163">Azure Data Lake Store also provides encryption for data stored in the account.</span><span class="sxs-lookup"><span data-stu-id="6bac3-163">Azure Data Lake Store also provides encryption for data stored in the account.</span></span> <span data-ttu-id="6bac3-164">When enabled, Data Lake Store automatically encrypts data before persisting and decrypts before retrieval, making it transparent to the client that accesses the data.</span><span class="sxs-lookup"><span data-stu-id="6bac3-164">When enabled, Data Lake Store automatically encrypts data before persisting and decrypts before retrieval, making it transparent to the client that accesses the data.</span></span> <span data-ttu-id="6bac3-165">For more information, see [Security in Azure Data Lake Store](../data-lake-store/data-lake-store-security-overview.md).</span><span class="sxs-lookup"><span data-stu-id="6bac3-165">For more information, see [Security in Azure Data Lake Store](../data-lake-store/data-lake-store-security-overview.md).</span></span> 

#### <a name="azure-blob-storage-and-azure-table-storage"></a><span data-ttu-id="6bac3-166">Azure Blob storage and Azure Table storage</span><span class="sxs-lookup"><span data-stu-id="6bac3-166">Azure Blob storage and Azure Table storage</span></span>
<span data-ttu-id="6bac3-167">Azure Blob storage and Azure Table storage support Storage Service Encryption (SSE), which automatically encrypts your data before persisting to storage and decrypts before retrieval.</span><span class="sxs-lookup"><span data-stu-id="6bac3-167">Azure Blob storage and Azure Table storage support Storage Service Encryption (SSE), which automatically encrypts your data before persisting to storage and decrypts before retrieval.</span></span> <span data-ttu-id="6bac3-168">For more information, see [Azure Storage Service Encryption for Data at Rest](../storage/common/storage-service-encryption.md).</span><span class="sxs-lookup"><span data-stu-id="6bac3-168">For more information, see [Azure Storage Service Encryption for Data at Rest](../storage/common/storage-service-encryption.md).</span></span>

#### <a name="amazon-s3"></a><span data-ttu-id="6bac3-169">Amazon S3</span><span class="sxs-lookup"><span data-stu-id="6bac3-169">Amazon S3</span></span>
<span data-ttu-id="6bac3-170">Amazon S3 supports both client and server encryption of data at rest.</span><span class="sxs-lookup"><span data-stu-id="6bac3-170">Amazon S3 supports both client and server encryption of data at rest.</span></span> <span data-ttu-id="6bac3-171">For more information, see [Protecting Data Using Encryption](http://docs.aws.amazon.com/AmazonS3/latest/dev/UsingEncryption.html).</span><span class="sxs-lookup"><span data-stu-id="6bac3-171">For more information, see [Protecting Data Using Encryption](http://docs.aws.amazon.com/AmazonS3/latest/dev/UsingEncryption.html).</span></span>

#### <a name="amazon-redshift"></a><span data-ttu-id="6bac3-172">Amazon Redshift</span><span class="sxs-lookup"><span data-stu-id="6bac3-172">Amazon Redshift</span></span>
<span data-ttu-id="6bac3-173">Amazon Redshift supports cluster encryption for data at rest.</span><span class="sxs-lookup"><span data-stu-id="6bac3-173">Amazon Redshift supports cluster encryption for data at rest.</span></span> <span data-ttu-id="6bac3-174">For more information, see [Amazon Redshift Database Encryption](http://docs.aws.amazon.com/redshift/latest/mgmt/working-with-db-encryption.html).</span><span class="sxs-lookup"><span data-stu-id="6bac3-174">For more information, see [Amazon Redshift Database Encryption](http://docs.aws.amazon.com/redshift/latest/mgmt/working-with-db-encryption.html).</span></span> 

#### <a name="salesforce"></a><span data-ttu-id="6bac3-175">Salesforce</span><span class="sxs-lookup"><span data-stu-id="6bac3-175">Salesforce</span></span>
<span data-ttu-id="6bac3-176">Salesforce supports Shield Platform Encryption that allows encryption of all files, attachments, and custom fields.</span><span class="sxs-lookup"><span data-stu-id="6bac3-176">Salesforce supports Shield Platform Encryption that allows encryption of all files, attachments, and custom fields.</span></span> <span data-ttu-id="6bac3-177">For more information, see [Understanding the Web Server OAuth Authentication Flow](https://developer.salesforce.com/docs/atlas.en-us.api_rest.meta/api_rest/intro_understanding_web_server_oauth_flow.htm).</span><span class="sxs-lookup"><span data-stu-id="6bac3-177">For more information, see [Understanding the Web Server OAuth Authentication Flow](https://developer.salesforce.com/docs/atlas.en-us.api_rest.meta/api_rest/intro_understanding_web_server_oauth_flow.htm).</span></span>  

## <a name="hybrid-scenarios"></a><span data-ttu-id="6bac3-178">Hybrid scenarios</span><span class="sxs-lookup"><span data-stu-id="6bac3-178">Hybrid scenarios</span></span>
<span data-ttu-id="6bac3-179">Hybrid scenarios require self-hosted integration runtime to be installed in an on-premises network, inside a virtual network (Azure), or inside a virtual private cloud (Amazon).</span><span class="sxs-lookup"><span data-stu-id="6bac3-179">Hybrid scenarios require self-hosted integration runtime to be installed in an on-premises network, inside a virtual network (Azure), or inside a virtual private cloud (Amazon).</span></span> <span data-ttu-id="6bac3-180">The self-hosted integration runtime must be able to access the local data stores.</span><span class="sxs-lookup"><span data-stu-id="6bac3-180">The self-hosted integration runtime must be able to access the local data stores.</span></span> <span data-ttu-id="6bac3-181">For more information about self-hosted integration runtime, see [How to create and configure self-hosted integration runtime](https://docs.microsoft.com/azure/data-factory/create-self-hosted-integration-runtime).</span><span class="sxs-lookup"><span data-stu-id="6bac3-181">For more information about self-hosted integration runtime, see [How to create and configure self-hosted integration runtime](https://docs.microsoft.com/azure/data-factory/create-self-hosted-integration-runtime).</span></span> 

![self-hosted integration runtime channels](media/data-movement-security-considerations/data-management-gateway-channels.png)

<span data-ttu-id="6bac3-183">The command channel allows communication between data movement services in Data Factory and self-hosted integration runtime.</span><span class="sxs-lookup"><span data-stu-id="6bac3-183">The command channel allows communication between data movement services in Data Factory and self-hosted integration runtime.</span></span> <span data-ttu-id="6bac3-184">The communication contains information related to the activity.</span><span class="sxs-lookup"><span data-stu-id="6bac3-184">The communication contains information related to the activity.</span></span> <span data-ttu-id="6bac3-185">The data channel is used for transferring data between on-premises data stores and cloud data stores.</span><span class="sxs-lookup"><span data-stu-id="6bac3-185">The data channel is used for transferring data between on-premises data stores and cloud data stores.</span></span>    

### <a name="on-premises-data-store-credentials"></a><span data-ttu-id="6bac3-186">On-premises data store credentials</span><span class="sxs-lookup"><span data-stu-id="6bac3-186">On-premises data store credentials</span></span>
<span data-ttu-id="6bac3-187">The credentials for your on-premises data stores are always encrypted and stored.</span><span class="sxs-lookup"><span data-stu-id="6bac3-187">The credentials for your on-premises data stores are always encrypted and stored.</span></span> <span data-ttu-id="6bac3-188">They can be either stored locally on the self-hosted integration runtime machine, or stored in Azure Data Factory managed storage (just like cloud store credentials).</span><span class="sxs-lookup"><span data-stu-id="6bac3-188">They can be either stored locally on the self-hosted integration runtime machine, or stored in Azure Data Factory managed storage (just like cloud store credentials).</span></span> 

- <span data-ttu-id="6bac3-189">**Store credentials locally**.</span><span class="sxs-lookup"><span data-stu-id="6bac3-189">**Store credentials locally**.</span></span> <span data-ttu-id="6bac3-190">If you want to encrypt and store credentials locally on the self-hosted integration runtime, follow the steps in [Encrypt credentials for on-premises data stores in Azure Data Factory](encrypt-credentials-self-hosted-integration-runtime.md).</span><span class="sxs-lookup"><span data-stu-id="6bac3-190">If you want to encrypt and store credentials locally on the self-hosted integration runtime, follow the steps in [Encrypt credentials for on-premises data stores in Azure Data Factory](encrypt-credentials-self-hosted-integration-runtime.md).</span></span> <span data-ttu-id="6bac3-191">All connectors support this option.</span><span class="sxs-lookup"><span data-stu-id="6bac3-191">All connectors support this option.</span></span> <span data-ttu-id="6bac3-192">The self-hosted integration runtime uses Windows [DPAPI](https://msdn.microsoft.com/library/ms995355.aspx) to encrypt the sensitive data and credential information.</span><span class="sxs-lookup"><span data-stu-id="6bac3-192">The self-hosted integration runtime uses Windows [DPAPI](https://msdn.microsoft.com/library/ms995355.aspx) to encrypt the sensitive data and credential information.</span></span> 

   <span data-ttu-id="6bac3-193">Use the **New-AzureRmDataFactoryV2LinkedServiceEncryptedCredential** cmdlet to encrypt linked service credentials and sensitive details in the linked service.</span><span class="sxs-lookup"><span data-stu-id="6bac3-193">Use the **New-AzureRmDataFactoryV2LinkedServiceEncryptedCredential** cmdlet to encrypt linked service credentials and sensitive details in the linked service.</span></span> <span data-ttu-id="6bac3-194">You can then use the JSON returned (with the **EncryptedCredential** element in the connection string) to create a linked service by using the **Set-AzureRmDataFactoryV2LinkedService** cmdlet.</span><span class="sxs-lookup"><span data-stu-id="6bac3-194">You can then use the JSON returned (with the **EncryptedCredential** element in the connection string) to create a linked service by using the **Set-AzureRmDataFactoryV2LinkedService** cmdlet.</span></span>  

- <span data-ttu-id="6bac3-195">**Store in Azure Data Factory managed storage**.</span><span class="sxs-lookup"><span data-stu-id="6bac3-195">**Store in Azure Data Factory managed storage**.</span></span> <span data-ttu-id="6bac3-196">If you directly use the **Set-AzureRmDataFactoryV2LinkedService** cmdlet with the connection strings and credentials inline in the JSON, the linked service is encrypted and stored in Azure Data Factory managed storage.</span><span class="sxs-lookup"><span data-stu-id="6bac3-196">If you directly use the **Set-AzureRmDataFactoryV2LinkedService** cmdlet with the connection strings and credentials inline in the JSON, the linked service is encrypted and stored in Azure Data Factory managed storage.</span></span> <span data-ttu-id="6bac3-197">The sensitive information is still encrypted by certificate, and Microsoft manages these certificates.</span><span class="sxs-lookup"><span data-stu-id="6bac3-197">The sensitive information is still encrypted by certificate, and Microsoft manages these certificates.</span></span>



#### <a name="ports-used-when-encrypting-linked-service-on-self-hosted-integration-runtime"></a><span data-ttu-id="6bac3-198">Ports used when encrypting linked service on self-hosted integration runtime</span><span class="sxs-lookup"><span data-stu-id="6bac3-198">Ports used when encrypting linked service on self-hosted integration runtime</span></span>
<span data-ttu-id="6bac3-199">By default, PowerShell uses port 8050 on the machine with self-hosted integration runtime for secure communication.</span><span class="sxs-lookup"><span data-stu-id="6bac3-199">By default, PowerShell uses port 8050 on the machine with self-hosted integration runtime for secure communication.</span></span> <span data-ttu-id="6bac3-200">If necessary, this port can be changed.</span><span class="sxs-lookup"><span data-stu-id="6bac3-200">If necessary, this port can be changed.</span></span>  

![HTTPS port for the gateway](media/data-movement-security-considerations/https-port-for-gateway.png)

 


### <a name="encryption-in-transit"></a><span data-ttu-id="6bac3-202">Encryption in transit</span><span class="sxs-lookup"><span data-stu-id="6bac3-202">Encryption in transit</span></span>
<span data-ttu-id="6bac3-203">All data transfers are via secure channel HTTPS and TLS over TCP to prevent man-in-the-middle attacks during communication with Azure services.</span><span class="sxs-lookup"><span data-stu-id="6bac3-203">All data transfers are via secure channel HTTPS and TLS over TCP to prevent man-in-the-middle attacks during communication with Azure services.</span></span>

<span data-ttu-id="6bac3-204">You can also use [IPSec VPN](../vpn-gateway/vpn-gateway-about-vpn-devices.md) or [Azure ExpressRoute](../expressroute/expressroute-introduction.md) to further secure the communication channel between your on-premises network and Azure.</span><span class="sxs-lookup"><span data-stu-id="6bac3-204">You can also use [IPSec VPN](../vpn-gateway/vpn-gateway-about-vpn-devices.md) or [Azure ExpressRoute](../expressroute/expressroute-introduction.md) to further secure the communication channel between your on-premises network and Azure.</span></span>

<span data-ttu-id="6bac3-205">Azure Virtual Network is a logical representation of your network in the cloud.</span><span class="sxs-lookup"><span data-stu-id="6bac3-205">Azure Virtual Network is a logical representation of your network in the cloud.</span></span> <span data-ttu-id="6bac3-206">You can connect an on-premises network to your virtual network by setting up IPSec VPN (site-to-site) or ExpressRoute (private peering).</span><span class="sxs-lookup"><span data-stu-id="6bac3-206">You can connect an on-premises network to your virtual network by setting up IPSec VPN (site-to-site) or ExpressRoute (private peering).</span></span>    

<span data-ttu-id="6bac3-207">The following table summarizes the network and self-hosted integration runtime configuration recommendations based on different combinations of source and destination locations for hybrid data movement.</span><span class="sxs-lookup"><span data-stu-id="6bac3-207">The following table summarizes the network and self-hosted integration runtime configuration recommendations based on different combinations of source and destination locations for hybrid data movement.</span></span>

| <span data-ttu-id="6bac3-208">Source</span><span class="sxs-lookup"><span data-stu-id="6bac3-208">Source</span></span>      | <span data-ttu-id="6bac3-209">Destination</span><span class="sxs-lookup"><span data-stu-id="6bac3-209">Destination</span></span>                              | <span data-ttu-id="6bac3-210">Network configuration</span><span class="sxs-lookup"><span data-stu-id="6bac3-210">Network configuration</span></span>                    | <span data-ttu-id="6bac3-211">Integration runtime setup</span><span class="sxs-lookup"><span data-stu-id="6bac3-211">Integration runtime setup</span></span>                |
| ----------- | ---------------------------------------- | ---------------------------------------- | ---------------------------------------- |
| <span data-ttu-id="6bac3-212">On-premises</span><span class="sxs-lookup"><span data-stu-id="6bac3-212">On-premises</span></span> | <span data-ttu-id="6bac3-213">Virtual machines and cloud services deployed in virtual networks</span><span class="sxs-lookup"><span data-stu-id="6bac3-213">Virtual machines and cloud services deployed in virtual networks</span></span> | <span data-ttu-id="6bac3-214">IPSec VPN (point-to-site or site-to-site)</span><span class="sxs-lookup"><span data-stu-id="6bac3-214">IPSec VPN (point-to-site or site-to-site)</span></span> | <span data-ttu-id="6bac3-215">The self-hosted integration runtime can be installed either on-premises or on an Azure virtual machine in a virtual network.</span><span class="sxs-lookup"><span data-stu-id="6bac3-215">The self-hosted integration runtime can be installed either on-premises or on an Azure virtual machine in a virtual network.</span></span> |
| <span data-ttu-id="6bac3-216">On-premises</span><span class="sxs-lookup"><span data-stu-id="6bac3-216">On-premises</span></span> | <span data-ttu-id="6bac3-217">Virtual machines and cloud services deployed in virtual networks</span><span class="sxs-lookup"><span data-stu-id="6bac3-217">Virtual machines and cloud services deployed in virtual networks</span></span> | <span data-ttu-id="6bac3-218">ExpressRoute (private peering)</span><span class="sxs-lookup"><span data-stu-id="6bac3-218">ExpressRoute (private peering)</span></span>           | <span data-ttu-id="6bac3-219">The self-hosted integration runtime can be installed either on-premises or on an Azure virtual machine in a virtual network.</span><span class="sxs-lookup"><span data-stu-id="6bac3-219">The self-hosted integration runtime can be installed either on-premises or on an Azure virtual machine in a virtual network.</span></span> |
| <span data-ttu-id="6bac3-220">On-premises</span><span class="sxs-lookup"><span data-stu-id="6bac3-220">On-premises</span></span> | <span data-ttu-id="6bac3-221">Azure-based services that have a public endpoint</span><span class="sxs-lookup"><span data-stu-id="6bac3-221">Azure-based services that have a public endpoint</span></span> | <span data-ttu-id="6bac3-222">ExpressRoute (public peering)</span><span class="sxs-lookup"><span data-stu-id="6bac3-222">ExpressRoute (public peering)</span></span>            | <span data-ttu-id="6bac3-223">The self-hosted integration runtime must be installed on-premises.</span><span class="sxs-lookup"><span data-stu-id="6bac3-223">The self-hosted integration runtime must be installed on-premises.</span></span> |

<span data-ttu-id="6bac3-224">The following images show the use of self-hosted integration runtime for moving data between an on-premises database and Azure services by using ExpressRoute and IPSec VPN (with Azure Virtual Network):</span><span class="sxs-lookup"><span data-stu-id="6bac3-224">The following images show the use of self-hosted integration runtime for moving data between an on-premises database and Azure services by using ExpressRoute and IPSec VPN (with Azure Virtual Network):</span></span>

<span data-ttu-id="6bac3-225">**ExpressRoute**</span><span class="sxs-lookup"><span data-stu-id="6bac3-225">**ExpressRoute**</span></span>

![Use ExpressRoute with gateway](media/data-movement-security-considerations/express-route-for-gateway.png) 

<span data-ttu-id="6bac3-227">**IPSec VPN**</span><span class="sxs-lookup"><span data-stu-id="6bac3-227">**IPSec VPN**</span></span>

![IPSec VPN with gateway](media/data-movement-security-considerations/ipsec-vpn-for-gateway.png)

### <a name="firewall-configurations-and-whitelisting-ip-address-of-gateway"></a> <span data-ttu-id="6bac3-229">Firewall configurations and whitelisting IP addresses</span><span class="sxs-lookup"><span data-stu-id="6bac3-229">Firewall configurations and whitelisting IP addresses</span></span>

#### <a name="firewall-requirements-for-on-premisesprivate-network"></a><span data-ttu-id="6bac3-230">Firewall requirements for on-premises/private network</span><span class="sxs-lookup"><span data-stu-id="6bac3-230">Firewall requirements for on-premises/private network</span></span>  
<span data-ttu-id="6bac3-231">In an enterprise, a corporate firewall runs on the central router of the organization.</span><span class="sxs-lookup"><span data-stu-id="6bac3-231">In an enterprise, a corporate firewall runs on the central router of the organization.</span></span> <span data-ttu-id="6bac3-232">Windows Firewall runs as a daemon on the local machine in which the self-hosted integration runtime is installed.</span><span class="sxs-lookup"><span data-stu-id="6bac3-232">Windows Firewall runs as a daemon on the local machine in which the self-hosted integration runtime is installed.</span></span> 

<span data-ttu-id="6bac3-233">The following table provides outbound port and domain requirements for corporate firewalls:</span><span class="sxs-lookup"><span data-stu-id="6bac3-233">The following table provides outbound port and domain requirements for corporate firewalls:</span></span>

| <span data-ttu-id="6bac3-234">Domain names</span><span class="sxs-lookup"><span data-stu-id="6bac3-234">Domain names</span></span>                  | <span data-ttu-id="6bac3-235">Outbound ports</span><span class="sxs-lookup"><span data-stu-id="6bac3-235">Outbound ports</span></span> | <span data-ttu-id="6bac3-236">Description</span><span class="sxs-lookup"><span data-stu-id="6bac3-236">Description</span></span>                              |
| ----------------------------- | -------------- | ---------------------------------------- |
| `*.servicebus.windows.net`    | <span data-ttu-id="6bac3-237">443</span><span class="sxs-lookup"><span data-stu-id="6bac3-237">443</span></span>            | <span data-ttu-id="6bac3-238">Required by the self-hosted integration runtime to connect to data movement services in Data Factory.</span><span class="sxs-lookup"><span data-stu-id="6bac3-238">Required by the self-hosted integration runtime to connect to data movement services in Data Factory.</span></span> |
| `*.frontend.clouddatahub.net` | <span data-ttu-id="6bac3-239">443</span><span class="sxs-lookup"><span data-stu-id="6bac3-239">443</span></span>            | <span data-ttu-id="6bac3-240">Required by the self-hosted integration runtime to connect to the Data Factory service.</span><span class="sxs-lookup"><span data-stu-id="6bac3-240">Required by the self-hosted integration runtime to connect to the Data Factory service.</span></span> |
| `download.microsoft.com`    | <span data-ttu-id="6bac3-241">443</span><span class="sxs-lookup"><span data-stu-id="6bac3-241">443</span></span>            | <span data-ttu-id="6bac3-242">Required by the self-hosted integration runtime for downloading the updates.</span><span class="sxs-lookup"><span data-stu-id="6bac3-242">Required by the self-hosted integration runtime for downloading the updates.</span></span> <span data-ttu-id="6bac3-243">If you have disabled auto-update then you may skip this.</span><span class="sxs-lookup"><span data-stu-id="6bac3-243">If you have disabled auto-update then you may skip this.</span></span> |
| `*.core.windows.net`          | <span data-ttu-id="6bac3-244">443</span><span class="sxs-lookup"><span data-stu-id="6bac3-244">443</span></span>            | <span data-ttu-id="6bac3-245">Used by the self-hosted integration runtime to connect to the Azure storage account when you use the [staged copy](copy-activity-performance.md#staged-copy) feature.</span><span class="sxs-lookup"><span data-stu-id="6bac3-245">Used by the self-hosted integration runtime to connect to the Azure storage account when you use the [staged copy](copy-activity-performance.md#staged-copy) feature.</span></span> |
| `*.database.windows.net`      | <span data-ttu-id="6bac3-246">1433</span><span class="sxs-lookup"><span data-stu-id="6bac3-246">1433</span></span>           | <span data-ttu-id="6bac3-247">(Optional) Required when you copy from or to Azure SQL Database or Azure SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="6bac3-247">(Optional) Required when you copy from or to Azure SQL Database or Azure SQL Data Warehouse.</span></span> <span data-ttu-id="6bac3-248">Use the staged copy feature to copy data to Azure SQL Database or Azure SQL Data Warehouse without opening port 1433.</span><span class="sxs-lookup"><span data-stu-id="6bac3-248">Use the staged copy feature to copy data to Azure SQL Database or Azure SQL Data Warehouse without opening port 1433.</span></span> |
| `*.azuredatalakestore.net`<br>`login.microsoftonline.com/<tenant>/oauth2/token`    | <span data-ttu-id="6bac3-249">443</span><span class="sxs-lookup"><span data-stu-id="6bac3-249">443</span></span>            | <span data-ttu-id="6bac3-250">(Optional) Required when you copy from or to  Azure Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="6bac3-250">(Optional) Required when you copy from or to  Azure Data Lake Store.</span></span> |

> [!NOTE] 
> You might have to manage ports or whitelisting domains at the corporate firewall level as required by the respective data sources. This table only uses Azure SQL Database, Azure SQL Data Warehouse, and Azure Data Lake Store as examples.   

<span data-ttu-id="6bac3-253">The following table provides inbound port requirements for Windows Firewall:</span><span class="sxs-lookup"><span data-stu-id="6bac3-253">The following table provides inbound port requirements for Windows Firewall:</span></span>

| <span data-ttu-id="6bac3-254">Inbound ports</span><span class="sxs-lookup"><span data-stu-id="6bac3-254">Inbound ports</span></span> | <span data-ttu-id="6bac3-255">Description</span><span class="sxs-lookup"><span data-stu-id="6bac3-255">Description</span></span>                              |
| ------------- | ---------------------------------------- |
| <span data-ttu-id="6bac3-256">8050 (TCP)</span><span class="sxs-lookup"><span data-stu-id="6bac3-256">8050 (TCP)</span></span>    | <span data-ttu-id="6bac3-257">Required by the PowerShell encryption cmdlet as described in [Encrypt credentials for on-premises data stores in Azure Data Factory](encrypt-credentials-self-hosted-integration-runtime.md), and by the credential manager application to securely set credentials for on-premises data stores on the self-hosted integration runtime.</span><span class="sxs-lookup"><span data-stu-id="6bac3-257">Required by the PowerShell encryption cmdlet as described in [Encrypt credentials for on-premises data stores in Azure Data Factory](encrypt-credentials-self-hosted-integration-runtime.md), and by the credential manager application to securely set credentials for on-premises data stores on the self-hosted integration runtime.</span></span> |

![Gateway port requirements](media\data-movement-security-considerations/gateway-port-requirements.png) 

#### <a name="ip-configurations-and-whitelisting-in-data-stores"></a><span data-ttu-id="6bac3-259">IP configurations and whitelisting in data stores</span><span class="sxs-lookup"><span data-stu-id="6bac3-259">IP configurations and whitelisting in data stores</span></span>
<span data-ttu-id="6bac3-260">Some data stores in the cloud also require that you whitelist the IP address of the machine accessing the store.</span><span class="sxs-lookup"><span data-stu-id="6bac3-260">Some data stores in the cloud also require that you whitelist the IP address of the machine accessing the store.</span></span> <span data-ttu-id="6bac3-261">Ensure that the IP address of the self-hosted integration runtime machine is whitelisted or configured in the firewall appropriately.</span><span class="sxs-lookup"><span data-stu-id="6bac3-261">Ensure that the IP address of the self-hosted integration runtime machine is whitelisted or configured in the firewall appropriately.</span></span>

<span data-ttu-id="6bac3-262">The following cloud data stores require that you whitelist the IP address of the self-hosted integration runtime machine.</span><span class="sxs-lookup"><span data-stu-id="6bac3-262">The following cloud data stores require that you whitelist the IP address of the self-hosted integration runtime machine.</span></span> <span data-ttu-id="6bac3-263">Some of these data stores, by default, might not require whitelisting.</span><span class="sxs-lookup"><span data-stu-id="6bac3-263">Some of these data stores, by default, might not require whitelisting.</span></span> 

- [<span data-ttu-id="6bac3-264">Azure SQL Database</span><span class="sxs-lookup"><span data-stu-id="6bac3-264">Azure SQL Database</span></span>](../sql-database/sql-database-firewall-configure.md) 
- [<span data-ttu-id="6bac3-265">Azure SQL Data Warehouse</span><span class="sxs-lookup"><span data-stu-id="6bac3-265">Azure SQL Data Warehouse</span></span>](../sql-data-warehouse/sql-data-warehouse-get-started-provision.md)
- [<span data-ttu-id="6bac3-266">Azure Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="6bac3-266">Azure Data Lake Store</span></span>](../data-lake-store/data-lake-store-secure-data.md#set-ip-address-range-for-data-access)
- [<span data-ttu-id="6bac3-267">Azure Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="6bac3-267">Azure Cosmos DB</span></span>](../cosmos-db/firewall-support.md)
- [<span data-ttu-id="6bac3-268">Amazon Redshift</span><span class="sxs-lookup"><span data-stu-id="6bac3-268">Amazon Redshift</span></span>](http://docs.aws.amazon.com/redshift/latest/gsg/rs-gsg-authorize-cluster-access.html) 

## <a name="frequently-asked-questions"></a><span data-ttu-id="6bac3-269">Frequently asked questions</span><span class="sxs-lookup"><span data-stu-id="6bac3-269">Frequently asked questions</span></span>

<span data-ttu-id="6bac3-270">**Can the self-hosted integration runtime be shared across different data factories?**</span><span class="sxs-lookup"><span data-stu-id="6bac3-270">**Can the self-hosted integration runtime be shared across different data factories?**</span></span>

<span data-ttu-id="6bac3-271">We do not support this feature yet.</span><span class="sxs-lookup"><span data-stu-id="6bac3-271">We do not support this feature yet.</span></span> <span data-ttu-id="6bac3-272">We are actively working on it.</span><span class="sxs-lookup"><span data-stu-id="6bac3-272">We are actively working on it.</span></span>

<span data-ttu-id="6bac3-273">**What are the port requirements for the self-hosted integration runtime to work?**</span><span class="sxs-lookup"><span data-stu-id="6bac3-273">**What are the port requirements for the self-hosted integration runtime to work?**</span></span>

<span data-ttu-id="6bac3-274">The self-hosted integration runtime makes HTTP-based connections to access the internet.</span><span class="sxs-lookup"><span data-stu-id="6bac3-274">The self-hosted integration runtime makes HTTP-based connections to access the internet.</span></span> <span data-ttu-id="6bac3-275">The outbound ports 443 must be opened for the self-hosted integration runtime to make this connection.</span><span class="sxs-lookup"><span data-stu-id="6bac3-275">The outbound ports 443 must be opened for the self-hosted integration runtime to make this connection.</span></span> <span data-ttu-id="6bac3-276">Open inbound port 8050 only at the machine level (not the corporate firewall level) for credential manager application.</span><span class="sxs-lookup"><span data-stu-id="6bac3-276">Open inbound port 8050 only at the machine level (not the corporate firewall level) for credential manager application.</span></span> <span data-ttu-id="6bac3-277">If Azure SQL Database or Azure SQL Data Warehouse is used as the source or the destination, you need to open port 1433 as well.</span><span class="sxs-lookup"><span data-stu-id="6bac3-277">If Azure SQL Database or Azure SQL Data Warehouse is used as the source or the destination, you need to open port 1433 as well.</span></span> <span data-ttu-id="6bac3-278">For more information, see the [Firewall configurations and whitelisting IP addresses](#firewall-configurations-and-whitelisting-ip-address-of-gateway) section.</span><span class="sxs-lookup"><span data-stu-id="6bac3-278">For more information, see the [Firewall configurations and whitelisting IP addresses](#firewall-configurations-and-whitelisting-ip-address-of-gateway) section.</span></span> 


## <a name="next-steps"></a><span data-ttu-id="6bac3-279">Next steps</span><span class="sxs-lookup"><span data-stu-id="6bac3-279">Next steps</span></span>
<span data-ttu-id="6bac3-280">For information about Azure Data Factory Copy Activity performance, see [Copy Activity performance and tuning guide](copy-activity-performance.md).</span><span class="sxs-lookup"><span data-stu-id="6bac3-280">For information about Azure Data Factory Copy Activity performance, see [Copy Activity performance and tuning guide](copy-activity-performance.md).</span></span>

 
