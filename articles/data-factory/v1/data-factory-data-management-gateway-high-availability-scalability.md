---
title: High availability with data management gateway in Azure Data Factory | Microsoft Docs
description: This article explains how you can scale out a data management gateway by adding more nodes and scale up by increasing number of concurrent jobs that can run on a node.
services: data-factory
documentationcenter: ''
author: nabhishek
manager: craigg
editor: ''
ms.service: data-factory
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: conceptual
ms.date: 01/10/2018
ms.author: abnarain
robots: noindex
ms.openlocfilehash: 58f612906af55575e9d42307af924ea0a8501ca1
ms.sourcegitcommit: d1451406a010fd3aa854dc8e5b77dc5537d8050e
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 09/13/2018
ms.locfileid: "44869421"
---
# <a name="data-management-gateway---high-availability-and-scalability-preview"></a><span data-ttu-id="514c2-103">Data Management Gateway - high availability and scalability (Preview)</span><span class="sxs-lookup"><span data-stu-id="514c2-103">Data Management Gateway - high availability and scalability (Preview)</span></span>
> [!NOTE]
> <span data-ttu-id="514c2-104">This article applies to version 1 of Data Factory.</span><span class="sxs-lookup"><span data-stu-id="514c2-104">This article applies to version 1 of Data Factory.</span></span> <span data-ttu-id="514c2-105">If you are using the current version of the Data Factory service, see [self-hosted integration runtime in](../create-self-hosted-integration-runtime.md).</span><span class="sxs-lookup"><span data-stu-id="514c2-105">If you are using the current version of the Data Factory service, see [self-hosted integration runtime in](../create-self-hosted-integration-runtime.md).</span></span> 


<span data-ttu-id="514c2-106">This article helps you configure high availability and scalability solution with Data Management Gateway/ Integration.</span><span class="sxs-lookup"><span data-stu-id="514c2-106">This article helps you configure high availability and scalability solution with Data Management Gateway/ Integration.</span></span>    

> [!NOTE]
> <span data-ttu-id="514c2-107">This article assumes that you are already familiar with basics of Integration Runtime (Earlier Data Management Gateway).</span><span class="sxs-lookup"><span data-stu-id="514c2-107">This article assumes that you are already familiar with basics of Integration Runtime (Earlier Data Management Gateway).</span></span> <span data-ttu-id="514c2-108">If you are not, see [Data Management Gateway](data-factory-data-management-gateway.md).</span><span class="sxs-lookup"><span data-stu-id="514c2-108">If you are not, see [Data Management Gateway](data-factory-data-management-gateway.md).</span></span>

><span data-ttu-id="514c2-109">**This preview feature is officially supported on Data Management Gateway version 2.12.xxxx.x and above**.</span><span class="sxs-lookup"><span data-stu-id="514c2-109">**This preview feature is officially supported on Data Management Gateway version 2.12.xxxx.x and above**.</span></span> <span data-ttu-id="514c2-110">Please make sure you are using version 2.12.xxxx.x or above.</span><span class="sxs-lookup"><span data-stu-id="514c2-110">Please make sure you are using version 2.12.xxxx.x or above.</span></span> <span data-ttu-id="514c2-111">Download the latest version of Data Management Gateway [here](https://www.microsoft.com/download/details.aspx?id=39717).</span><span class="sxs-lookup"><span data-stu-id="514c2-111">Download the latest version of Data Management Gateway [here](https://www.microsoft.com/download/details.aspx?id=39717).</span></span>

## <a name="overview"></a><span data-ttu-id="514c2-112">Overview</span><span class="sxs-lookup"><span data-stu-id="514c2-112">Overview</span></span>
<span data-ttu-id="514c2-113">You can associate data management gateways that are installed on multiple on-premises machines with a single logical gateway from the portal.</span><span class="sxs-lookup"><span data-stu-id="514c2-113">You can associate data management gateways that are installed on multiple on-premises machines with a single logical gateway from the portal.</span></span> <span data-ttu-id="514c2-114">These machines are called **nodes**.</span><span class="sxs-lookup"><span data-stu-id="514c2-114">These machines are called **nodes**.</span></span> <span data-ttu-id="514c2-115">You can have up to **four nodes** associated with a logical gateway.</span><span class="sxs-lookup"><span data-stu-id="514c2-115">You can have up to **four nodes** associated with a logical gateway.</span></span> <span data-ttu-id="514c2-116">The benefits of having multiple nodes (on-premises machines with gateway installed) for a logical gateway are:</span><span class="sxs-lookup"><span data-stu-id="514c2-116">The benefits of having multiple nodes (on-premises machines with gateway installed) for a logical gateway are:</span></span>  

- <span data-ttu-id="514c2-117">Improve performance of data movement between on-premises and cloud data stores.</span><span class="sxs-lookup"><span data-stu-id="514c2-117">Improve performance of data movement between on-premises and cloud data stores.</span></span>  
- <span data-ttu-id="514c2-118">If one of the nodes goes down for some reason, other nodes are still available for moving the data.</span><span class="sxs-lookup"><span data-stu-id="514c2-118">If one of the nodes goes down for some reason, other nodes are still available for moving the data.</span></span> 
- <span data-ttu-id="514c2-119">If one of the nodes need to be taken offline for maintenance, other nodes are still available for moving the data.</span><span class="sxs-lookup"><span data-stu-id="514c2-119">If one of the nodes need to be taken offline for maintenance, other nodes are still available for moving the data.</span></span>

<span data-ttu-id="514c2-120">You can also configure the number of **concurrent data movement jobs** that can run on a node to scale up the capability of moving data between on-premises and cloud data stores.</span><span class="sxs-lookup"><span data-stu-id="514c2-120">You can also configure the number of **concurrent data movement jobs** that can run on a node to scale up the capability of moving data between on-premises and cloud data stores.</span></span> 

<span data-ttu-id="514c2-121">Using the Azure portal, you can monitor the status of these nodes, which helps you decide whether to add or remove a node from the logical gateway.</span><span class="sxs-lookup"><span data-stu-id="514c2-121">Using the Azure portal, you can monitor the status of these nodes, which helps you decide whether to add or remove a node from the logical gateway.</span></span> 

## <a name="architecture"></a><span data-ttu-id="514c2-122">Architecture</span><span class="sxs-lookup"><span data-stu-id="514c2-122">Architecture</span></span> 
<span data-ttu-id="514c2-123">The following diagram provides the architecture overview of scalability and availability feature of the Data Management Gateway:</span><span class="sxs-lookup"><span data-stu-id="514c2-123">The following diagram provides the architecture overview of scalability and availability feature of the Data Management Gateway:</span></span> 

![Data Management Gateway - High Availability and Scalability](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-high-availability-and-scalability.png)

<span data-ttu-id="514c2-125">A **logical gateway** is the gateway you add to a data factory in the Azure portal.</span><span class="sxs-lookup"><span data-stu-id="514c2-125">A **logical gateway** is the gateway you add to a data factory in the Azure portal.</span></span> <span data-ttu-id="514c2-126">Earlier, you could associate only one on-premises Windows machine with Data Management Gateway installed with a logical gateway.</span><span class="sxs-lookup"><span data-stu-id="514c2-126">Earlier, you could associate only one on-premises Windows machine with Data Management Gateway installed with a logical gateway.</span></span> <span data-ttu-id="514c2-127">This on-premises gateway machine is called a node.</span><span class="sxs-lookup"><span data-stu-id="514c2-127">This on-premises gateway machine is called a node.</span></span> <span data-ttu-id="514c2-128">Now, you can associate up to **four physical nodes** with a logical gateway.</span><span class="sxs-lookup"><span data-stu-id="514c2-128">Now, you can associate up to **four physical nodes** with a logical gateway.</span></span> <span data-ttu-id="514c2-129">A logical gateway with multiple nodes is called a **multi-node gateway**.</span><span class="sxs-lookup"><span data-stu-id="514c2-129">A logical gateway with multiple nodes is called a **multi-node gateway**.</span></span>  

<span data-ttu-id="514c2-130">All these nodes are **active**.</span><span class="sxs-lookup"><span data-stu-id="514c2-130">All these nodes are **active**.</span></span> <span data-ttu-id="514c2-131">They all can process data movement jobs to move data between on-premises and cloud data stores.</span><span class="sxs-lookup"><span data-stu-id="514c2-131">They all can process data movement jobs to move data between on-premises and cloud data stores.</span></span> <span data-ttu-id="514c2-132">One of the nodes act as both dispatcher and worker.</span><span class="sxs-lookup"><span data-stu-id="514c2-132">One of the nodes act as both dispatcher and worker.</span></span> <span data-ttu-id="514c2-133">Other nodes in the groups are worker nodes.</span><span class="sxs-lookup"><span data-stu-id="514c2-133">Other nodes in the groups are worker nodes.</span></span> <span data-ttu-id="514c2-134">A **dispatcher** node pulls data movement tasks/jobs from the cloud service and dispatches them to worker nodes (including itself).</span><span class="sxs-lookup"><span data-stu-id="514c2-134">A **dispatcher** node pulls data movement tasks/jobs from the cloud service and dispatches them to worker nodes (including itself).</span></span> <span data-ttu-id="514c2-135">A **worker** node executes data movement jobs to move data between on-premises and cloud data stores.</span><span class="sxs-lookup"><span data-stu-id="514c2-135">A **worker** node executes data movement jobs to move data between on-premises and cloud data stores.</span></span> <span data-ttu-id="514c2-136">All nodes are workers.</span><span class="sxs-lookup"><span data-stu-id="514c2-136">All nodes are workers.</span></span> <span data-ttu-id="514c2-137">Only one node can be both dispatch and worker.</span><span class="sxs-lookup"><span data-stu-id="514c2-137">Only one node can be both dispatch and worker.</span></span>    

<span data-ttu-id="514c2-138">You may typically start with one node and **scale out** to add more nodes as the existing node(s) are overwhelmed with the data movement load.</span><span class="sxs-lookup"><span data-stu-id="514c2-138">You may typically start with one node and **scale out** to add more nodes as the existing node(s) are overwhelmed with the data movement load.</span></span> <span data-ttu-id="514c2-139">You can also **scale up** the data movement capability of a gateway node by increasing the number of concurrent jobs that are allowed to run on the node.</span><span class="sxs-lookup"><span data-stu-id="514c2-139">You can also **scale up** the data movement capability of a gateway node by increasing the number of concurrent jobs that are allowed to run on the node.</span></span> <span data-ttu-id="514c2-140">This capability is also available with a single-node gateway (even when the scalability and availability feature is not enabled).</span><span class="sxs-lookup"><span data-stu-id="514c2-140">This capability is also available with a single-node gateway (even when the scalability and availability feature is not enabled).</span></span> 

<span data-ttu-id="514c2-141">A gateway with multiple nodes keeps the data store credentials in sync across all nodes.</span><span class="sxs-lookup"><span data-stu-id="514c2-141">A gateway with multiple nodes keeps the data store credentials in sync across all nodes.</span></span> <span data-ttu-id="514c2-142">If there is a node-to-node connectivity issue, the credentials may be out of sync. When you set credentials for an on-premises data store that uses a gateway, it saves credentials on the dispatcher/worker node.</span><span class="sxs-lookup"><span data-stu-id="514c2-142">If there is a node-to-node connectivity issue, the credentials may be out of sync. When you set credentials for an on-premises data store that uses a gateway, it saves credentials on the dispatcher/worker node.</span></span> <span data-ttu-id="514c2-143">The dispatcher node syncs with other worker nodes.</span><span class="sxs-lookup"><span data-stu-id="514c2-143">The dispatcher node syncs with other worker nodes.</span></span> <span data-ttu-id="514c2-144">This process is known as **credentials sync**. The communication channel between nodes can be **encrypted** by a public SSL/TLS certificate.</span><span class="sxs-lookup"><span data-stu-id="514c2-144">This process is known as **credentials sync**. The communication channel between nodes can be **encrypted** by a public SSL/TLS certificate.</span></span> 

## <a name="set-up-a-multi-node-gateway"></a><span data-ttu-id="514c2-145">Set up a multi-node gateway</span><span class="sxs-lookup"><span data-stu-id="514c2-145">Set up a multi-node gateway</span></span>
<span data-ttu-id="514c2-146">This section assumes that you have gone through the following two articles or familiar with concepts in these articles:</span><span class="sxs-lookup"><span data-stu-id="514c2-146">This section assumes that you have gone through the following two articles or familiar with concepts in these articles:</span></span> 

- <span data-ttu-id="514c2-147">[Data Management Gateway](data-factory-data-management-gateway.md) - provides a detailed overview of the gateway.</span><span class="sxs-lookup"><span data-stu-id="514c2-147">[Data Management Gateway](data-factory-data-management-gateway.md) - provides a detailed overview of the gateway.</span></span>
- <span data-ttu-id="514c2-148">[Move data between on-premises and cloud data stores](data-factory-move-data-between-onprem-and-cloud.md) - contains a walkthrough with step-by-step instructions for using a gateway with a single node.</span><span class="sxs-lookup"><span data-stu-id="514c2-148">[Move data between on-premises and cloud data stores](data-factory-move-data-between-onprem-and-cloud.md) - contains a walkthrough with step-by-step instructions for using a gateway with a single node.</span></span>  

> [!NOTE]
> <span data-ttu-id="514c2-149">Before you install a data management gateway on an on-premises Windows machine, see prerequisites listed in [the main article](data-factory-data-management-gateway.md#prerequisites).</span><span class="sxs-lookup"><span data-stu-id="514c2-149">Before you install a data management gateway on an on-premises Windows machine, see prerequisites listed in [the main article](data-factory-data-management-gateway.md#prerequisites).</span></span>

1. <span data-ttu-id="514c2-150">In the [walkthrough](data-factory-move-data-between-onprem-and-cloud.md#create-gateway), while creating a logical gateway, enable the **High Availability & Scalability** feature.</span><span class="sxs-lookup"><span data-stu-id="514c2-150">In the [walkthrough](data-factory-move-data-between-onprem-and-cloud.md#create-gateway), while creating a logical gateway, enable the **High Availability & Scalability** feature.</span></span> 

    ![Data Management Gateway - enable high availability and scalability](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-enable-high-availability-scalability.png)
2. <span data-ttu-id="514c2-152">In the **Configure** page, use either **Express Setup** or **Manual Setup** link to install a gateway on the first node (an on-premises Windows machine).</span><span class="sxs-lookup"><span data-stu-id="514c2-152">In the **Configure** page, use either **Express Setup** or **Manual Setup** link to install a gateway on the first node (an on-premises Windows machine).</span></span>

    ![Data Management Gateway - express or manual setup](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-express-manual-setup.png)

    > [!NOTE]
    > <span data-ttu-id="514c2-154">If you use the express setup option, the node-to-node communication is done without encryption.</span><span class="sxs-lookup"><span data-stu-id="514c2-154">If you use the express setup option, the node-to-node communication is done without encryption.</span></span> <span data-ttu-id="514c2-155">The node name is same as the machine name.</span><span class="sxs-lookup"><span data-stu-id="514c2-155">The node name is same as the machine name.</span></span> <span data-ttu-id="514c2-156">Use manual setup if the node-node communication needs to be encrypted or you want to specify a node name of your choice.</span><span class="sxs-lookup"><span data-stu-id="514c2-156">Use manual setup if the node-node communication needs to be encrypted or you want to specify a node name of your choice.</span></span> <span data-ttu-id="514c2-157">Node names cannot be edited later.</span><span class="sxs-lookup"><span data-stu-id="514c2-157">Node names cannot be edited later.</span></span>
3. <span data-ttu-id="514c2-158">If you choose **express setup**</span><span class="sxs-lookup"><span data-stu-id="514c2-158">If you choose **express setup**</span></span>
    1. <span data-ttu-id="514c2-159">You see the following message after the gateway is successfully installed:</span><span class="sxs-lookup"><span data-stu-id="514c2-159">You see the following message after the gateway is successfully installed:</span></span>

        ![Data Management Gateway - express setup success](media/data-factory-data-management-gateway-high-availability-scalability/express-setup-success.png)
    2. <span data-ttu-id="514c2-161">Launch Data Management Configuration Manager for the gateway by following [these instructions](data-factory-data-management-gateway.md#configuration-manager).</span><span class="sxs-lookup"><span data-stu-id="514c2-161">Launch Data Management Configuration Manager for the gateway by following [these instructions](data-factory-data-management-gateway.md#configuration-manager).</span></span> <span data-ttu-id="514c2-162">You see the gateway name, node name, status, etc.</span><span class="sxs-lookup"><span data-stu-id="514c2-162">You see the gateway name, node name, status, etc.</span></span>

        ![Data Management Gateway - installation successful](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-installation-success.png)
4. <span data-ttu-id="514c2-164">If you choose **manual setup**:</span><span class="sxs-lookup"><span data-stu-id="514c2-164">If you choose **manual setup**:</span></span>
    1. <span data-ttu-id="514c2-165">Download the installation package from the Microsoft Download Center, run it to install gateway on your machine.</span><span class="sxs-lookup"><span data-stu-id="514c2-165">Download the installation package from the Microsoft Download Center, run it to install gateway on your machine.</span></span>
    2. <span data-ttu-id="514c2-166">Use the **authentication key** from the **Configure** page to register the gateway.</span><span class="sxs-lookup"><span data-stu-id="514c2-166">Use the **authentication key** from the **Configure** page to register the gateway.</span></span>
    
        ![Data Management Gateway - installation successful](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-authentication-key.png)
    3. <span data-ttu-id="514c2-168">In the **New gateway node** page, you can provide a custom **name** to the gateway node.</span><span class="sxs-lookup"><span data-stu-id="514c2-168">In the **New gateway node** page, you can provide a custom **name** to the gateway node.</span></span> <span data-ttu-id="514c2-169">By default, node name is same as the machine name.</span><span class="sxs-lookup"><span data-stu-id="514c2-169">By default, node name is same as the machine name.</span></span>    

        ![Data Management Gateway - specify name](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-name.png)
    4. <span data-ttu-id="514c2-171">In the next page, you can choose whether to **enable encryption for node-to-node communication**.</span><span class="sxs-lookup"><span data-stu-id="514c2-171">In the next page, you can choose whether to **enable encryption for node-to-node communication**.</span></span> <span data-ttu-id="514c2-172">Click **Skip** to disable encryption (default).</span><span class="sxs-lookup"><span data-stu-id="514c2-172">Click **Skip** to disable encryption (default).</span></span>

        ![Data Management Gateway - enable encryption](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-node-encryption.png)  
    
        > [!NOTE]
        > <span data-ttu-id="514c2-174">Changing of encryption mode is only supported when you have a single gateway node in the logical gateway.</span><span class="sxs-lookup"><span data-stu-id="514c2-174">Changing of encryption mode is only supported when you have a single gateway node in the logical gateway.</span></span> <span data-ttu-id="514c2-175">To change the encryption mode when a gateway has multiple nodes, do the following steps: delete all the nodes except one node, change the encryption mode, and then add the nodes again.</span><span class="sxs-lookup"><span data-stu-id="514c2-175">To change the encryption mode when a gateway has multiple nodes, do the following steps: delete all the nodes except one node, change the encryption mode, and then add the nodes again.</span></span>
        > 
        > <span data-ttu-id="514c2-176">See [TLS/SSL certificate requirements](#tlsssl-certificate-requirements) section for a list of requirements for using an TLS/SSL certificate.</span><span class="sxs-lookup"><span data-stu-id="514c2-176">See [TLS/SSL certificate requirements](#tlsssl-certificate-requirements) section for a list of requirements for using an TLS/SSL certificate.</span></span> 
    5. <span data-ttu-id="514c2-177">After the gateway is successfully installed, click Launch Configuration Manager:</span><span class="sxs-lookup"><span data-stu-id="514c2-177">After the gateway is successfully installed, click Launch Configuration Manager:</span></span>
    
        ![Manual setup - launch configuration manager](media/data-factory-data-management-gateway-high-availability-scalability/manual-setup-launch-configuration-manager.png)   
    6. <span data-ttu-id="514c2-179">you see Data Management Gateway Configuration Manager on the node (on-premises Windows machine), which shows connectivity status, **gateway name**, and **node name**.</span><span class="sxs-lookup"><span data-stu-id="514c2-179">you see Data Management Gateway Configuration Manager on the node (on-premises Windows machine), which shows connectivity status, **gateway name**, and **node name**.</span></span>  

        ![Data Management Gateway - installation successful](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-installation-success.png)

        > [!NOTE]
        > <span data-ttu-id="514c2-181">If you are provisioning the gateway on an Azure VM, you can use [this Azure Resource Manager template](https://github.com/Azure/azure-quickstart-templates/tree/master/101-mutiple-vms-with-data-management-gateway).</span><span class="sxs-lookup"><span data-stu-id="514c2-181">If you are provisioning the gateway on an Azure VM, you can use [this Azure Resource Manager template](https://github.com/Azure/azure-quickstart-templates/tree/master/101-mutiple-vms-with-data-management-gateway).</span></span> <span data-ttu-id="514c2-182">This script creates a logical gateway, sets up VMs with Data Management Gateway software installed, and registers them with the logical gateway.</span><span class="sxs-lookup"><span data-stu-id="514c2-182">This script creates a logical gateway, sets up VMs with Data Management Gateway software installed, and registers them with the logical gateway.</span></span> 
6. <span data-ttu-id="514c2-183">In Azure portal, launch the **Gateway** page:</span><span class="sxs-lookup"><span data-stu-id="514c2-183">In Azure portal, launch the **Gateway** page:</span></span> 
    1. <span data-ttu-id="514c2-184">On the data factory home page in the portal, click **Linked Services**.</span><span class="sxs-lookup"><span data-stu-id="514c2-184">On the data factory home page in the portal, click **Linked Services**.</span></span>
    
        ![Data factory home page](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-home-page.png)
    2. <span data-ttu-id="514c2-186">select the **gateway** to see the **Gateway** page:</span><span class="sxs-lookup"><span data-stu-id="514c2-186">select the **gateway** to see the **Gateway** page:</span></span>
    
        ![Data factory home page](media/data-factory-data-management-gateway-high-availability-scalability/linked-services-gateway.png)
    4. <span data-ttu-id="514c2-188">You see the **Gateway** page:</span><span class="sxs-lookup"><span data-stu-id="514c2-188">You see the **Gateway** page:</span></span>   

        ![Gateway with single node view](media/data-factory-data-management-gateway-high-availability-scalability/gateway-first-node-portal-view.png) 
7. <span data-ttu-id="514c2-190">Click **Add Node** on the toolbar to add a node to the logical gateway.</span><span class="sxs-lookup"><span data-stu-id="514c2-190">Click **Add Node** on the toolbar to add a node to the logical gateway.</span></span> <span data-ttu-id="514c2-191">If you are planning to use express setup, do this step from the on-premises machine that will be added as a node to the gateway.</span><span class="sxs-lookup"><span data-stu-id="514c2-191">If you are planning to use express setup, do this step from the on-premises machine that will be added as a node to the gateway.</span></span> 

    ![Data Management Gateway - add node menu](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-add-node-menu.png)
8. <span data-ttu-id="514c2-193">Steps are similar to setting up the first node.</span><span class="sxs-lookup"><span data-stu-id="514c2-193">Steps are similar to setting up the first node.</span></span> <span data-ttu-id="514c2-194">The Configuration Manager UI lets you set the node name if you choose the manual installation option:</span><span class="sxs-lookup"><span data-stu-id="514c2-194">The Configuration Manager UI lets you set the node name if you choose the manual installation option:</span></span> 

    ![Configuration Manager - install second gateway](media/data-factory-data-management-gateway-high-availability-scalability/install-second-gateway.png)
9. <span data-ttu-id="514c2-196">After the gateway is installed successfully on the node, the Configuration Manager tool displays the following screen:</span><span class="sxs-lookup"><span data-stu-id="514c2-196">After the gateway is installed successfully on the node, the Configuration Manager tool displays the following screen:</span></span>  

    ![Configuration Manager - install second gateway successful](media/data-factory-data-management-gateway-high-availability-scalability/second-gateway-installation-successful.png)
10. <span data-ttu-id="514c2-198">If you open the **Gateway** page in the portal, you see two gateway nodes now:</span><span class="sxs-lookup"><span data-stu-id="514c2-198">If you open the **Gateway** page in the portal, you see two gateway nodes now:</span></span> 

    ![Gateway with two nodes in the portal](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-multi-node-monitoring.png)
11. <span data-ttu-id="514c2-200">To delete a gateway node, click **Delete Node** on the toolbar, select the node you want to delete, and then click **Delete** from the toolbar.</span><span class="sxs-lookup"><span data-stu-id="514c2-200">To delete a gateway node, click **Delete Node** on the toolbar, select the node you want to delete, and then click **Delete** from the toolbar.</span></span> <span data-ttu-id="514c2-201">This action deletes the selected node from the group.</span><span class="sxs-lookup"><span data-stu-id="514c2-201">This action deletes the selected node from the group.</span></span> <span data-ttu-id="514c2-202">Note that this action does not uninstall the data management gateway software from the node (on-premises Windows machine).</span><span class="sxs-lookup"><span data-stu-id="514c2-202">Note that this action does not uninstall the data management gateway software from the node (on-premises Windows machine).</span></span> <span data-ttu-id="514c2-203">Use **Add or remove programs** in Control Panel on the on-premises to uninstall the gateway.</span><span class="sxs-lookup"><span data-stu-id="514c2-203">Use **Add or remove programs** in Control Panel on the on-premises to uninstall the gateway.</span></span> <span data-ttu-id="514c2-204">When you uninstall gateway from the node, it's automatically deleted in the portal.</span><span class="sxs-lookup"><span data-stu-id="514c2-204">When you uninstall gateway from the node, it's automatically deleted in the portal.</span></span>   

## <a name="upgrade-an-existing-gateway"></a><span data-ttu-id="514c2-205">Upgrade an existing gateway</span><span class="sxs-lookup"><span data-stu-id="514c2-205">Upgrade an existing gateway</span></span>
<span data-ttu-id="514c2-206">You can upgrade an existing gateway to use the high availability and scalability feature.</span><span class="sxs-lookup"><span data-stu-id="514c2-206">You can upgrade an existing gateway to use the high availability and scalability feature.</span></span> <span data-ttu-id="514c2-207">This feature works only with nodes that have the data management gateway of version >= 2.12.xxxx.</span><span class="sxs-lookup"><span data-stu-id="514c2-207">This feature works only with nodes that have the data management gateway of version >= 2.12.xxxx.</span></span> <span data-ttu-id="514c2-208">You can see the version of data management gateway installed on a machine in the **Help** tab of the Data Management Gateway Configuration Manager.</span><span class="sxs-lookup"><span data-stu-id="514c2-208">You can see the version of data management gateway installed on a machine in the **Help** tab of the Data Management Gateway Configuration Manager.</span></span> 

1. <span data-ttu-id="514c2-209">Update the gateway on the on-premises machine to the latest version by following by downloading and running an MSI setup package from the [Microsoft Download Center](https://www.microsoft.com/download/details.aspx?id=39717).</span><span class="sxs-lookup"><span data-stu-id="514c2-209">Update the gateway on the on-premises machine to the latest version by following by downloading and running an MSI setup package from the [Microsoft Download Center](https://www.microsoft.com/download/details.aspx?id=39717).</span></span> <span data-ttu-id="514c2-210">See [installation](data-factory-data-management-gateway.md#installation) section for details.</span><span class="sxs-lookup"><span data-stu-id="514c2-210">See [installation](data-factory-data-management-gateway.md#installation) section for details.</span></span>  
2. <span data-ttu-id="514c2-211">Navigate to the Azure portal.</span><span class="sxs-lookup"><span data-stu-id="514c2-211">Navigate to the Azure portal.</span></span> <span data-ttu-id="514c2-212">Launch the **Data Factory page** for your data factory.</span><span class="sxs-lookup"><span data-stu-id="514c2-212">Launch the **Data Factory page** for your data factory.</span></span> <span data-ttu-id="514c2-213">Click Linked services tile to launch the **linked services page**.</span><span class="sxs-lookup"><span data-stu-id="514c2-213">Click Linked services tile to launch the **linked services page**.</span></span> <span data-ttu-id="514c2-214">Select the gateway to launch the **gateway page**.</span><span class="sxs-lookup"><span data-stu-id="514c2-214">Select the gateway to launch the **gateway page**.</span></span> <span data-ttu-id="514c2-215">Click and enable **Preview Feature** as shown in the following image:</span><span class="sxs-lookup"><span data-stu-id="514c2-215">Click and enable **Preview Feature** as shown in the following image:</span></span> 

    ![Data Management Gateway - enable preview feature](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-existing-gateway-enable-high-availability.png)   
2. <span data-ttu-id="514c2-217">Once the preview feature is enabled in the portal, close all pages.</span><span class="sxs-lookup"><span data-stu-id="514c2-217">Once the preview feature is enabled in the portal, close all pages.</span></span> <span data-ttu-id="514c2-218">Reopen the **gateway page** to see the new preview user interface (UI).</span><span class="sxs-lookup"><span data-stu-id="514c2-218">Reopen the **gateway page** to see the new preview user interface (UI).</span></span>
 
    ![Data Management Gateway - enable preview feature success](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-preview-success.png)

    ![Data Management Gateway - preview UI](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-preview.png)

    > [!NOTE]
    > <span data-ttu-id="514c2-221">During the upgrade, name of the first node is the name of the machine.</span><span class="sxs-lookup"><span data-stu-id="514c2-221">During the upgrade, name of the first node is the name of the machine.</span></span> 
3. <span data-ttu-id="514c2-222">Now, add a node.</span><span class="sxs-lookup"><span data-stu-id="514c2-222">Now, add a node.</span></span> <span data-ttu-id="514c2-223">In the **Gateway** page, click **Add Node**.</span><span class="sxs-lookup"><span data-stu-id="514c2-223">In the **Gateway** page, click **Add Node**.</span></span>  

    ![Data Management Gateway - add node menu](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-add-node-menu.png)

    <span data-ttu-id="514c2-225">Follow instructions from the previous section to set up the node.</span><span class="sxs-lookup"><span data-stu-id="514c2-225">Follow instructions from the previous section to set up the node.</span></span> 

### <a name="installation-best-practices"></a><span data-ttu-id="514c2-226">Installation best practices</span><span class="sxs-lookup"><span data-stu-id="514c2-226">Installation best practices</span></span>

- <span data-ttu-id="514c2-227">Configure power plan on the host machine for the gateway so that the machine does not hibernate.</span><span class="sxs-lookup"><span data-stu-id="514c2-227">Configure power plan on the host machine for the gateway so that the machine does not hibernate.</span></span> <span data-ttu-id="514c2-228">If the host machine hibernates, the gateway does not respond to data requests.</span><span class="sxs-lookup"><span data-stu-id="514c2-228">If the host machine hibernates, the gateway does not respond to data requests.</span></span>
- <span data-ttu-id="514c2-229">Back up the certificate associated with the gateway.</span><span class="sxs-lookup"><span data-stu-id="514c2-229">Back up the certificate associated with the gateway.</span></span>
- <span data-ttu-id="514c2-230">Ensure all nodes are of similar configuration (recommended) for ideal performance.</span><span class="sxs-lookup"><span data-stu-id="514c2-230">Ensure all nodes are of similar configuration (recommended) for ideal performance.</span></span> 
- <span data-ttu-id="514c2-231">Add at least two nodes to ensure high availability.</span><span class="sxs-lookup"><span data-stu-id="514c2-231">Add at least two nodes to ensure high availability.</span></span>  

### <a name="tlsssl-certificate-requirements"></a><span data-ttu-id="514c2-232">TLS/SSL certificate requirements</span><span class="sxs-lookup"><span data-stu-id="514c2-232">TLS/SSL certificate requirements</span></span>
<span data-ttu-id="514c2-233">Here are the requirements for the TLS/SSL certificate that is used for securing communications between integration runtime nodes:</span><span class="sxs-lookup"><span data-stu-id="514c2-233">Here are the requirements for the TLS/SSL certificate that is used for securing communications between integration runtime nodes:</span></span>

- <span data-ttu-id="514c2-234">The certificate must be a publicly trusted X509 v3 certificate.</span><span class="sxs-lookup"><span data-stu-id="514c2-234">The certificate must be a publicly trusted X509 v3 certificate.</span></span> <span data-ttu-id="514c2-235">We recommend that you use certificates that are issued by a public (third-party) certification authority (CA).</span><span class="sxs-lookup"><span data-stu-id="514c2-235">We recommend that you use certificates that are issued by a public (third-party) certification authority (CA).</span></span>
- <span data-ttu-id="514c2-236">Each integration runtime node must trust this certificate, as well as the client machine that is running the credential manager application.</span><span class="sxs-lookup"><span data-stu-id="514c2-236">Each integration runtime node must trust this certificate, as well as the client machine that is running the credential manager application.</span></span> 
> [!NOTE]
> <span data-ttu-id="514c2-237">Credential manager application is used while securely setting credential from Copy Wizard/ Azure Portal.</span><span class="sxs-lookup"><span data-stu-id="514c2-237">Credential manager application is used while securely setting credential from Copy Wizard/ Azure Portal.</span></span> <span data-ttu-id="514c2-238">And this can be fired from any machine within the same network as the on-premises/ private data store.</span><span class="sxs-lookup"><span data-stu-id="514c2-238">And this can be fired from any machine within the same network as the on-premises/ private data store.</span></span>
- <span data-ttu-id="514c2-239">Wild card certificates are supported.</span><span class="sxs-lookup"><span data-stu-id="514c2-239">Wild card certificates are supported.</span></span> <span data-ttu-id="514c2-240">If your FQDN name is **node1.domain.contoso.com**, you can use \***.domain.contoso.com** as subject name of the certificate.</span><span class="sxs-lookup"><span data-stu-id="514c2-240">If your FQDN name is **node1.domain.contoso.com**, you can use \***.domain.contoso.com** as subject name of the certificate.</span></span>
- <span data-ttu-id="514c2-241">SAN certificates are not recommended since only the last item of the Subject Alternative Names will be used and all others will be ignored due to current limitation.</span><span class="sxs-lookup"><span data-stu-id="514c2-241">SAN certificates are not recommended since only the last item of the Subject Alternative Names will be used and all others will be ignored due to current limitation.</span></span> <span data-ttu-id="514c2-242">E.g.</span><span class="sxs-lookup"><span data-stu-id="514c2-242">E.g.</span></span> <span data-ttu-id="514c2-243">you have a SAN certificate whose SAN are **node1.domain.contoso.com** and **node2.domain.contoso.com**, you can only use this cert on machine whose FQDN is **node2.domain.contoso.com**.</span><span class="sxs-lookup"><span data-stu-id="514c2-243">you have a SAN certificate whose SAN are **node1.domain.contoso.com** and **node2.domain.contoso.com**, you can only use this cert on machine whose FQDN is **node2.domain.contoso.com**.</span></span>
- <span data-ttu-id="514c2-244">Supports any key size supported by Windows Server 2012 R2 for SSL certificates.</span><span class="sxs-lookup"><span data-stu-id="514c2-244">Supports any key size supported by Windows Server 2012 R2 for SSL certificates.</span></span>
- <span data-ttu-id="514c2-245">Certificate using CNG keys are not supported.</span><span class="sxs-lookup"><span data-stu-id="514c2-245">Certificate using CNG keys are not supported.</span></span>

#### <a name="faq-when-would-i-not-enable-this-encryption"></a><span data-ttu-id="514c2-246">FAQ: When would I not enable this encryption?</span><span class="sxs-lookup"><span data-stu-id="514c2-246">FAQ: When would I not enable this encryption?</span></span>
<span data-ttu-id="514c2-247">Enabling encryption can add certain cost to your infrastructure (owning public certificate) hence you may skip enabling encryption in the below cases:</span><span class="sxs-lookup"><span data-stu-id="514c2-247">Enabling encryption can add certain cost to your infrastructure (owning public certificate) hence you may skip enabling encryption in the below cases:</span></span>
- <span data-ttu-id="514c2-248">When the integration runtime is running on a trusted network, or a network with transparent encryption like IP/SEC.</span><span class="sxs-lookup"><span data-stu-id="514c2-248">When the integration runtime is running on a trusted network, or a network with transparent encryption like IP/SEC.</span></span> <span data-ttu-id="514c2-249">Since this channel communication is only limited within your trusted network, you may not need additional encryption.</span><span class="sxs-lookup"><span data-stu-id="514c2-249">Since this channel communication is only limited within your trusted network, you may not need additional encryption.</span></span>
- <span data-ttu-id="514c2-250">When the integration runtime is not running in a production environment.</span><span class="sxs-lookup"><span data-stu-id="514c2-250">When the integration runtime is not running in a production environment.</span></span> <span data-ttu-id="514c2-251">This can help in reducing TLS/SSL certificate cost.</span><span class="sxs-lookup"><span data-stu-id="514c2-251">This can help in reducing TLS/SSL certificate cost.</span></span>


## <a name="monitor-a-multi-node-gateway"></a><span data-ttu-id="514c2-252">Monitor a multi-node gateway</span><span class="sxs-lookup"><span data-stu-id="514c2-252">Monitor a multi-node gateway</span></span>
### <a name="multi-node-gateway-monitoring"></a><span data-ttu-id="514c2-253">Multi-node gateway monitoring</span><span class="sxs-lookup"><span data-stu-id="514c2-253">Multi-node gateway monitoring</span></span>
<span data-ttu-id="514c2-254">In the Azure portal, you can view near-real time snapshot of resource utilization (CPU, memory, network(in/out), etc.) on each node along with statuses of gateway nodes.</span><span class="sxs-lookup"><span data-stu-id="514c2-254">In the Azure portal, you can view near-real time snapshot of resource utilization (CPU, memory, network(in/out), etc.) on each node along with statuses of gateway nodes.</span></span> 

![Data Management Gateway - multiple node monitoring](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-multi-node-monitoring.png)

<span data-ttu-id="514c2-256">You can enable **Advanced Settings** in the **Gateway** page to see advanced metrics like **Network**(in/out), **Role & Credential Status**, which is helpful in debugging gateway issues, and **Concurrent Jobs** (Running/ Limit) which can be modified/ changed accordingly during performance tuning.</span><span class="sxs-lookup"><span data-stu-id="514c2-256">You can enable **Advanced Settings** in the **Gateway** page to see advanced metrics like **Network**(in/out), **Role & Credential Status**, which is helpful in debugging gateway issues, and **Concurrent Jobs** (Running/ Limit) which can be modified/ changed accordingly during performance tuning.</span></span> <span data-ttu-id="514c2-257">The following table provides descriptions of columns in the **Gateway Nodes** list:</span><span class="sxs-lookup"><span data-stu-id="514c2-257">The following table provides descriptions of columns in the **Gateway Nodes** list:</span></span>  

<span data-ttu-id="514c2-258">Monitoring Property</span><span class="sxs-lookup"><span data-stu-id="514c2-258">Monitoring Property</span></span> | <span data-ttu-id="514c2-259">Description</span><span class="sxs-lookup"><span data-stu-id="514c2-259">Description</span></span>
:------------------ | :---------- 
<span data-ttu-id="514c2-260">Name</span><span class="sxs-lookup"><span data-stu-id="514c2-260">Name</span></span> | <span data-ttu-id="514c2-261">Name of the logical gateway and nodes associated with the gateway.</span><span class="sxs-lookup"><span data-stu-id="514c2-261">Name of the logical gateway and nodes associated with the gateway.</span></span>  
<span data-ttu-id="514c2-262">Status</span><span class="sxs-lookup"><span data-stu-id="514c2-262">Status</span></span> | <span data-ttu-id="514c2-263">Status of the logical gateway and the gateway nodes.</span><span class="sxs-lookup"><span data-stu-id="514c2-263">Status of the logical gateway and the gateway nodes.</span></span> <span data-ttu-id="514c2-264">Example: Online/Offline/Limited/etc. For information about these statuses, See [Gateway status](#gateway-status) section.</span><span class="sxs-lookup"><span data-stu-id="514c2-264">Example: Online/Offline/Limited/etc. For information about these statuses, See [Gateway status](#gateway-status) section.</span></span> 
<span data-ttu-id="514c2-265">Version</span><span class="sxs-lookup"><span data-stu-id="514c2-265">Version</span></span> | <span data-ttu-id="514c2-266">Shows the version of the logical gateway and each gateway node.</span><span class="sxs-lookup"><span data-stu-id="514c2-266">Shows the version of the logical gateway and each gateway node.</span></span> <span data-ttu-id="514c2-267">The version of the logical gateway is determined based on version of majority of nodes in the group.</span><span class="sxs-lookup"><span data-stu-id="514c2-267">The version of the logical gateway is determined based on version of majority of nodes in the group.</span></span> <span data-ttu-id="514c2-268">If there are nodes with different versions in the logical gateway setup, only the nodes with the same version number as the logical gateway function properly.</span><span class="sxs-lookup"><span data-stu-id="514c2-268">If there are nodes with different versions in the logical gateway setup, only the nodes with the same version number as the logical gateway function properly.</span></span> <span data-ttu-id="514c2-269">Others are in the limited mode and need to be manually updated (only in case auto-update fails).</span><span class="sxs-lookup"><span data-stu-id="514c2-269">Others are in the limited mode and need to be manually updated (only in case auto-update fails).</span></span> 
<span data-ttu-id="514c2-270">Available memory</span><span class="sxs-lookup"><span data-stu-id="514c2-270">Available memory</span></span> | <span data-ttu-id="514c2-271">Available memory on a gateway node.</span><span class="sxs-lookup"><span data-stu-id="514c2-271">Available memory on a gateway node.</span></span> <span data-ttu-id="514c2-272">This value is a near real-time snapshot.</span><span class="sxs-lookup"><span data-stu-id="514c2-272">This value is a near real-time snapshot.</span></span> 
<span data-ttu-id="514c2-273">CPU utilization</span><span class="sxs-lookup"><span data-stu-id="514c2-273">CPU utilization</span></span> | <span data-ttu-id="514c2-274">CPU utilization of a gateway node.</span><span class="sxs-lookup"><span data-stu-id="514c2-274">CPU utilization of a gateway node.</span></span> <span data-ttu-id="514c2-275">This value is a near real-time snapshot.</span><span class="sxs-lookup"><span data-stu-id="514c2-275">This value is a near real-time snapshot.</span></span> 
<span data-ttu-id="514c2-276">Networking (In/Out)</span><span class="sxs-lookup"><span data-stu-id="514c2-276">Networking (In/Out)</span></span> | <span data-ttu-id="514c2-277">Network utilization of a gateway node.</span><span class="sxs-lookup"><span data-stu-id="514c2-277">Network utilization of a gateway node.</span></span> <span data-ttu-id="514c2-278">This value is a near real-time snapshot.</span><span class="sxs-lookup"><span data-stu-id="514c2-278">This value is a near real-time snapshot.</span></span> 
<span data-ttu-id="514c2-279">Concurrent Jobs (Running/ Limit)</span><span class="sxs-lookup"><span data-stu-id="514c2-279">Concurrent Jobs (Running/ Limit)</span></span> | <span data-ttu-id="514c2-280">Number of jobs or tasks running on each node.</span><span class="sxs-lookup"><span data-stu-id="514c2-280">Number of jobs or tasks running on each node.</span></span> <span data-ttu-id="514c2-281">This value is a near real-time snapshot.</span><span class="sxs-lookup"><span data-stu-id="514c2-281">This value is a near real-time snapshot.</span></span> <span data-ttu-id="514c2-282">Limit signifies the maximum concurrent jobs for each node.</span><span class="sxs-lookup"><span data-stu-id="514c2-282">Limit signifies the maximum concurrent jobs for each node.</span></span> <span data-ttu-id="514c2-283">This value is defined based on the machine size.</span><span class="sxs-lookup"><span data-stu-id="514c2-283">This value is defined based on the machine size.</span></span> <span data-ttu-id="514c2-284">You can increase the limit to scale up concurrent job execution in advanced scenarios, where CPU/ memory/ network is under-utilized, but activities are timing out. This capability is also available with a single-node gateway (even when the scalability and availability feature is not enabled).</span><span class="sxs-lookup"><span data-stu-id="514c2-284">You can increase the limit to scale up concurrent job execution in advanced scenarios, where CPU/ memory/ network is under-utilized, but activities are timing out. This capability is also available with a single-node gateway (even when the scalability and availability feature is not enabled).</span></span> <span data-ttu-id="514c2-285">For more information, see [scale considerations](#scale-considerations) section.</span><span class="sxs-lookup"><span data-stu-id="514c2-285">For more information, see [scale considerations](#scale-considerations) section.</span></span> 
<span data-ttu-id="514c2-286">Role</span><span class="sxs-lookup"><span data-stu-id="514c2-286">Role</span></span> | <span data-ttu-id="514c2-287">There are two types of roles  Dispatcher and worker.</span><span class="sxs-lookup"><span data-stu-id="514c2-287">There are two types of roles  Dispatcher and worker.</span></span> <span data-ttu-id="514c2-288">All nodes are workers, which means they can all be used to execute jobs.</span><span class="sxs-lookup"><span data-stu-id="514c2-288">All nodes are workers, which means they can all be used to execute jobs.</span></span> <span data-ttu-id="514c2-289">There is only one dispatcher node, which is used to pull tasks/jobs from cloud services and dispatch them to different worker nodes (including itself).</span><span class="sxs-lookup"><span data-stu-id="514c2-289">There is only one dispatcher node, which is used to pull tasks/jobs from cloud services and dispatch them to different worker nodes (including itself).</span></span> 

![Data Management Gateway - advanced multiple node monitoring](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-multi-node-monitoring-advanced.png)

### <a name="gateway-status"></a><span data-ttu-id="514c2-291">Gateway status</span><span class="sxs-lookup"><span data-stu-id="514c2-291">Gateway status</span></span>

<span data-ttu-id="514c2-292">The following table provides possible statuses of a **gateway node**:</span><span class="sxs-lookup"><span data-stu-id="514c2-292">The following table provides possible statuses of a **gateway node**:</span></span> 

<span data-ttu-id="514c2-293">Status</span><span class="sxs-lookup"><span data-stu-id="514c2-293">Status</span></span>  | <span data-ttu-id="514c2-294">Comments/Scenarios</span><span class="sxs-lookup"><span data-stu-id="514c2-294">Comments/Scenarios</span></span>
:------- | :------------------
<span data-ttu-id="514c2-295">Online</span><span class="sxs-lookup"><span data-stu-id="514c2-295">Online</span></span> | <span data-ttu-id="514c2-296">Node connected to Data Factory service.</span><span class="sxs-lookup"><span data-stu-id="514c2-296">Node connected to Data Factory service.</span></span>
<span data-ttu-id="514c2-297">Offline</span><span class="sxs-lookup"><span data-stu-id="514c2-297">Offline</span></span> | <span data-ttu-id="514c2-298">Node is offline.</span><span class="sxs-lookup"><span data-stu-id="514c2-298">Node is offline.</span></span>
<span data-ttu-id="514c2-299">Upgrading</span><span class="sxs-lookup"><span data-stu-id="514c2-299">Upgrading</span></span> | <span data-ttu-id="514c2-300">The node is being auto-updated.</span><span class="sxs-lookup"><span data-stu-id="514c2-300">The node is being auto-updated.</span></span>
<span data-ttu-id="514c2-301">Limited</span><span class="sxs-lookup"><span data-stu-id="514c2-301">Limited</span></span> | <span data-ttu-id="514c2-302">Due to Connectivity issue.</span><span class="sxs-lookup"><span data-stu-id="514c2-302">Due to Connectivity issue.</span></span> <span data-ttu-id="514c2-303">May be due to HTTP port 8050 issue, service bus connectivity issue, or credential sync issue.</span><span class="sxs-lookup"><span data-stu-id="514c2-303">May be due to HTTP port 8050 issue, service bus connectivity issue, or credential sync issue.</span></span> 
<span data-ttu-id="514c2-304">Inactive</span><span class="sxs-lookup"><span data-stu-id="514c2-304">Inactive</span></span> | <span data-ttu-id="514c2-305">Node is in a configuration different from the configuration of other majority nodes.</span><span class="sxs-lookup"><span data-stu-id="514c2-305">Node is in a configuration different from the configuration of other majority nodes.</span></span><br/><br/> <span data-ttu-id="514c2-306">A node can be inactive when it cannot connect to other nodes.</span><span class="sxs-lookup"><span data-stu-id="514c2-306">A node can be inactive when it cannot connect to other nodes.</span></span> 


<span data-ttu-id="514c2-307">The following table provides possible statuses of a **logical gateway**.</span><span class="sxs-lookup"><span data-stu-id="514c2-307">The following table provides possible statuses of a **logical gateway**.</span></span> <span data-ttu-id="514c2-308">The gateway status depends on statuses of the gateway nodes.</span><span class="sxs-lookup"><span data-stu-id="514c2-308">The gateway status depends on statuses of the gateway nodes.</span></span> 

<span data-ttu-id="514c2-309">Status</span><span class="sxs-lookup"><span data-stu-id="514c2-309">Status</span></span> | <span data-ttu-id="514c2-310">Comments</span><span class="sxs-lookup"><span data-stu-id="514c2-310">Comments</span></span>
:----- | :-------
<span data-ttu-id="514c2-311">Needs Registration</span><span class="sxs-lookup"><span data-stu-id="514c2-311">Needs Registration</span></span> | <span data-ttu-id="514c2-312">No node is yet registered to this logical gateway</span><span class="sxs-lookup"><span data-stu-id="514c2-312">No node is yet registered to this logical gateway</span></span>
<span data-ttu-id="514c2-313">Online</span><span class="sxs-lookup"><span data-stu-id="514c2-313">Online</span></span> | <span data-ttu-id="514c2-314">Gateway Nodes are online</span><span class="sxs-lookup"><span data-stu-id="514c2-314">Gateway Nodes are online</span></span>
<span data-ttu-id="514c2-315">Offline</span><span class="sxs-lookup"><span data-stu-id="514c2-315">Offline</span></span> | <span data-ttu-id="514c2-316">No node in online status.</span><span class="sxs-lookup"><span data-stu-id="514c2-316">No node in online status.</span></span>
<span data-ttu-id="514c2-317">Limited</span><span class="sxs-lookup"><span data-stu-id="514c2-317">Limited</span></span> | <span data-ttu-id="514c2-318">Not all nodes in this gateway are in healthy state.</span><span class="sxs-lookup"><span data-stu-id="514c2-318">Not all nodes in this gateway are in healthy state.</span></span> <span data-ttu-id="514c2-319">This status is a warning that some node might be down!</span><span class="sxs-lookup"><span data-stu-id="514c2-319">This status is a warning that some node might be down!</span></span> <br/><br/><span data-ttu-id="514c2-320">Could be due to credential sync issue on dispatcher/worker node.</span><span class="sxs-lookup"><span data-stu-id="514c2-320">Could be due to credential sync issue on dispatcher/worker node.</span></span> 

### <a name="pipeline-activities-monitoring"></a><span data-ttu-id="514c2-321">Pipeline/ activities monitoring</span><span class="sxs-lookup"><span data-stu-id="514c2-321">Pipeline/ activities monitoring</span></span>
<span data-ttu-id="514c2-322">The Azure portal provides a pipeline monitoring experience with granular node level details.</span><span class="sxs-lookup"><span data-stu-id="514c2-322">The Azure portal provides a pipeline monitoring experience with granular node level details.</span></span> <span data-ttu-id="514c2-323">For example, it shows which activities ran on which node.</span><span class="sxs-lookup"><span data-stu-id="514c2-323">For example, it shows which activities ran on which node.</span></span> <span data-ttu-id="514c2-324">This information can be helpful in understanding performance issues on a particular node, say due to network throttling.</span><span class="sxs-lookup"><span data-stu-id="514c2-324">This information can be helpful in understanding performance issues on a particular node, say due to network throttling.</span></span> 

![Data Management Gateway - multiple node monitoring for pipelines](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-multi-node-monitoring-pipelines.png)

![Data Management Gateway - pipeline details](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-multi-node-pipeline-details.png)

## <a name="scale-considerations"></a><span data-ttu-id="514c2-327">Scale considerations</span><span class="sxs-lookup"><span data-stu-id="514c2-327">Scale considerations</span></span>

### <a name="scale-out"></a><span data-ttu-id="514c2-328">Scale out</span><span class="sxs-lookup"><span data-stu-id="514c2-328">Scale out</span></span>
<span data-ttu-id="514c2-329">When the **available memory is low** and the **CPU usage is high**, adding a new node helps scale out the load across machines.</span><span class="sxs-lookup"><span data-stu-id="514c2-329">When the **available memory is low** and the **CPU usage is high**, adding a new node helps scale out the load across machines.</span></span> <span data-ttu-id="514c2-330">If activities are failing due to time-out or gateway node being offline, it helps if you add a node to the gateway.</span><span class="sxs-lookup"><span data-stu-id="514c2-330">If activities are failing due to time-out or gateway node being offline, it helps if you add a node to the gateway.</span></span>
 
### <a name="scale-up"></a><span data-ttu-id="514c2-331">Scale up</span><span class="sxs-lookup"><span data-stu-id="514c2-331">Scale up</span></span>
<span data-ttu-id="514c2-332">When the available memory and CPU are not utilized well, but the idle capacity is 0, you should scale up by increasing the number of concurrent jobs that can run on a node.</span><span class="sxs-lookup"><span data-stu-id="514c2-332">When the available memory and CPU are not utilized well, but the idle capacity is 0, you should scale up by increasing the number of concurrent jobs that can run on a node.</span></span> <span data-ttu-id="514c2-333">You may also want to scale up when activities are timing out because the gateway is overloaded.</span><span class="sxs-lookup"><span data-stu-id="514c2-333">You may also want to scale up when activities are timing out because the gateway is overloaded.</span></span> <span data-ttu-id="514c2-334">As shown in the following image, you can increase the maximum capacity for a node.</span><span class="sxs-lookup"><span data-stu-id="514c2-334">As shown in the following image, you can increase the maximum capacity for a node.</span></span> <span data-ttu-id="514c2-335">We suggest doubling it to start with.</span><span class="sxs-lookup"><span data-stu-id="514c2-335">We suggest doubling it to start with.</span></span>  

![Data Management Gateway - scale considerations](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-scale-considerations.png)


## <a name="known-issuesbreaking-changes"></a><span data-ttu-id="514c2-337">Known issues/breaking changes</span><span class="sxs-lookup"><span data-stu-id="514c2-337">Known issues/breaking changes</span></span>

- <span data-ttu-id="514c2-338">Currently, you can have up to four physical gateway nodes for a single logical gateway.</span><span class="sxs-lookup"><span data-stu-id="514c2-338">Currently, you can have up to four physical gateway nodes for a single logical gateway.</span></span> <span data-ttu-id="514c2-339">If you need more than four nodes for performance reasons, send an email to [DMGHelp@microsoft.com](mailto:DMGHelp@microsoft.com).</span><span class="sxs-lookup"><span data-stu-id="514c2-339">If you need more than four nodes for performance reasons, send an email to [DMGHelp@microsoft.com](mailto:DMGHelp@microsoft.com).</span></span>
- <span data-ttu-id="514c2-340">You cannot re-register a gateway node with the authentication key from another logical gateway to switch from the current logical gateway.</span><span class="sxs-lookup"><span data-stu-id="514c2-340">You cannot re-register a gateway node with the authentication key from another logical gateway to switch from the current logical gateway.</span></span> <span data-ttu-id="514c2-341">To re-register, uninstall the gateway from the node, reinstall the gateway, and register it with the authentication key for the other logical gateway.</span><span class="sxs-lookup"><span data-stu-id="514c2-341">To re-register, uninstall the gateway from the node, reinstall the gateway, and register it with the authentication key for the other logical gateway.</span></span> 
- <span data-ttu-id="514c2-342">If HTTP proxy is required for all your gateway nodes, set the proxy in diahost.exe.config and diawp.exe.config, and use the server manager to make sure all nodes have the same diahost.exe.config and diawip.exe.config. See [configure proxy settings](data-factory-data-management-gateway.md#configure-proxy-server-settings) section for details.</span><span class="sxs-lookup"><span data-stu-id="514c2-342">If HTTP proxy is required for all your gateway nodes, set the proxy in diahost.exe.config and diawp.exe.config, and use the server manager to make sure all nodes have the same diahost.exe.config and diawip.exe.config. See [configure proxy settings](data-factory-data-management-gateway.md#configure-proxy-server-settings) section for details.</span></span> 
- <span data-ttu-id="514c2-343">To change encryption mode for node-to-node communication in Gateway Configuration Manager, delete all the nodes in the portal except one.</span><span class="sxs-lookup"><span data-stu-id="514c2-343">To change encryption mode for node-to-node communication in Gateway Configuration Manager, delete all the nodes in the portal except one.</span></span> <span data-ttu-id="514c2-344">Then, add nodes back after changing the encryption mode.</span><span class="sxs-lookup"><span data-stu-id="514c2-344">Then, add nodes back after changing the encryption mode.</span></span>
- <span data-ttu-id="514c2-345">Use an official SSL certificate if you choose to encrypt the node-to-node communication channel.</span><span class="sxs-lookup"><span data-stu-id="514c2-345">Use an official SSL certificate if you choose to encrypt the node-to-node communication channel.</span></span> <span data-ttu-id="514c2-346">Self-signed certificate may cause connectivity issues as the same certificate may not be trusted in certifying authority list on other machines.</span><span class="sxs-lookup"><span data-stu-id="514c2-346">Self-signed certificate may cause connectivity issues as the same certificate may not be trusted in certifying authority list on other machines.</span></span> 
- <span data-ttu-id="514c2-347">You cannot register a gateway node to a logical gateway when the node version is lower than the logical gateway version.</span><span class="sxs-lookup"><span data-stu-id="514c2-347">You cannot register a gateway node to a logical gateway when the node version is lower than the logical gateway version.</span></span> <span data-ttu-id="514c2-348">Delete all nodes of the logical gateway from portal so that you can register a lower version node(downgrade) it.</span><span class="sxs-lookup"><span data-stu-id="514c2-348">Delete all nodes of the logical gateway from portal so that you can register a lower version node(downgrade) it.</span></span> <span data-ttu-id="514c2-349">If you delete all nodes of a logical gateway, manually install and register new nodes to that logical gateway.</span><span class="sxs-lookup"><span data-stu-id="514c2-349">If you delete all nodes of a logical gateway, manually install and register new nodes to that logical gateway.</span></span> <span data-ttu-id="514c2-350">Express setup is not supported in this case.</span><span class="sxs-lookup"><span data-stu-id="514c2-350">Express setup is not supported in this case.</span></span>
- <span data-ttu-id="514c2-351">You cannot use express setup to install nodes to an existing logical gateway, which is still using cloud credentials.</span><span class="sxs-lookup"><span data-stu-id="514c2-351">You cannot use express setup to install nodes to an existing logical gateway, which is still using cloud credentials.</span></span> <span data-ttu-id="514c2-352">You can check where the credentials are stored from the Gateway Configuration Manager on the Settings tab.</span><span class="sxs-lookup"><span data-stu-id="514c2-352">You can check where the credentials are stored from the Gateway Configuration Manager on the Settings tab.</span></span>
- <span data-ttu-id="514c2-353">You cannot use express setup to install nodes to an existing logical gateway, which has node-to-node encryption enabled.</span><span class="sxs-lookup"><span data-stu-id="514c2-353">You cannot use express setup to install nodes to an existing logical gateway, which has node-to-node encryption enabled.</span></span> <span data-ttu-id="514c2-354">As setting the encryption mode involves manually adding certificates, express install is no more an option.</span><span class="sxs-lookup"><span data-stu-id="514c2-354">As setting the encryption mode involves manually adding certificates, express install is no more an option.</span></span> 
- <span data-ttu-id="514c2-355">For a file copy from on-premises environment, you should not use \\localhost or C:\files anymore since localhost or local drive might not be accessible via all nodes.</span><span class="sxs-lookup"><span data-stu-id="514c2-355">For a file copy from on-premises environment, you should not use \\localhost or C:\files anymore since localhost or local drive might not be accessible via all nodes.</span></span> <span data-ttu-id="514c2-356">Instead, use \\ServerName\files to specify files location.</span><span class="sxs-lookup"><span data-stu-id="514c2-356">Instead, use \\ServerName\files to specify files location.</span></span>


## <a name="rolling-back-from-the-preview"></a><span data-ttu-id="514c2-357">Rolling back from the preview</span><span class="sxs-lookup"><span data-stu-id="514c2-357">Rolling back from the preview</span></span> 
<span data-ttu-id="514c2-358">To roll back from the preview, delete all nodes but one node.</span><span class="sxs-lookup"><span data-stu-id="514c2-358">To roll back from the preview, delete all nodes but one node.</span></span> <span data-ttu-id="514c2-359">It doesnt matter which nodes you delete, but ensure you have at least one node in the logical gateway.</span><span class="sxs-lookup"><span data-stu-id="514c2-359">It doesnt matter which nodes you delete, but ensure you have at least one node in the logical gateway.</span></span> <span data-ttu-id="514c2-360">You can delete a node either by uninstalling gateway on the machine or by using the Azure portal.</span><span class="sxs-lookup"><span data-stu-id="514c2-360">You can delete a node either by uninstalling gateway on the machine or by using the Azure portal.</span></span> <span data-ttu-id="514c2-361">In the Azure portal, in the **Data Factory** page, click Linked services to launch the **Linked services** page.</span><span class="sxs-lookup"><span data-stu-id="514c2-361">In the Azure portal, in the **Data Factory** page, click Linked services to launch the **Linked services** page.</span></span> <span data-ttu-id="514c2-362">Select the gateway to launch the **Gateway** page.</span><span class="sxs-lookup"><span data-stu-id="514c2-362">Select the gateway to launch the **Gateway** page.</span></span> <span data-ttu-id="514c2-363">In the Gateway page, you can see the nodes associated with the gateway.</span><span class="sxs-lookup"><span data-stu-id="514c2-363">In the Gateway page, you can see the nodes associated with the gateway.</span></span> <span data-ttu-id="514c2-364">The page lets you delete a node from the gateway.</span><span class="sxs-lookup"><span data-stu-id="514c2-364">The page lets you delete a node from the gateway.</span></span>
 
<span data-ttu-id="514c2-365">After deleting, click **preview features** in the same Azure portal page, and disable the preview feature.</span><span class="sxs-lookup"><span data-stu-id="514c2-365">After deleting, click **preview features** in the same Azure portal page, and disable the preview feature.</span></span> <span data-ttu-id="514c2-366">You have reset your gateway to one node GA (general availability) gateway.</span><span class="sxs-lookup"><span data-stu-id="514c2-366">You have reset your gateway to one node GA (general availability) gateway.</span></span>


## <a name="next-steps"></a><span data-ttu-id="514c2-367">Next steps</span><span class="sxs-lookup"><span data-stu-id="514c2-367">Next steps</span></span>
<span data-ttu-id="514c2-368">Review the following articles:</span><span class="sxs-lookup"><span data-stu-id="514c2-368">Review the following articles:</span></span>
- <span data-ttu-id="514c2-369">[Data Management Gateway](data-factory-data-management-gateway.md) - provides a detailed overview of the gateway.</span><span class="sxs-lookup"><span data-stu-id="514c2-369">[Data Management Gateway](data-factory-data-management-gateway.md) - provides a detailed overview of the gateway.</span></span>
- <span data-ttu-id="514c2-370">[Move data between on-premises and cloud data stores](data-factory-move-data-between-onprem-and-cloud.md) - contains a walkthrough with step-by-step instructions for using a gateway with a single node.</span><span class="sxs-lookup"><span data-stu-id="514c2-370">[Move data between on-premises and cloud data stores](data-factory-move-data-between-onprem-and-cloud.md) - contains a walkthrough with step-by-step instructions for using a gateway with a single node.</span></span> 
