---
title: Data Management Gateway for Data Factory | Microsoft Docs
description: Set up a data gateway to move data between on-premises and the cloud. Use Data Management Gateway in Azure Data Factory to move your data.
services: data-factory
documentationcenter: ''
author: nabhishek
manager: craigg
ms.assetid: b9084537-2e1c-4e96-b5bc-0e2044388ffd
ms.service: data-factory
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: conceptual
ms.date: 01/10/2018
ms.author: abnarain
robots: noindex
ms.openlocfilehash: 988c264ef6052b4b41de493944ac8d39a197a083
ms.sourcegitcommit: d1451406a010fd3aa854dc8e5b77dc5537d8050e
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 09/13/2018
ms.locfileid: "44857688"
---
# <a name="data-management-gateway"></a><span data-ttu-id="28b57-104">Data Management Gateway</span><span class="sxs-lookup"><span data-stu-id="28b57-104">Data Management Gateway</span></span>
> [!NOTE]
> <span data-ttu-id="28b57-105">This article applies to version 1 of Data Factory.</span><span class="sxs-lookup"><span data-stu-id="28b57-105">This article applies to version 1 of Data Factory.</span></span> <span data-ttu-id="28b57-106">If you are using the current version of the Data Factory service, see [self-hosted integration runtime in](../create-self-hosted-integration-runtime.md).</span><span class="sxs-lookup"><span data-stu-id="28b57-106">If you are using the current version of the Data Factory service, see [self-hosted integration runtime in](../create-self-hosted-integration-runtime.md).</span></span> 

> [!NOTE]
> <span data-ttu-id="28b57-107">Data Management Gateway has now been rebranded as Self-hosted Integration Runtime.</span><span class="sxs-lookup"><span data-stu-id="28b57-107">Data Management Gateway has now been rebranded as Self-hosted Integration Runtime.</span></span>  

<span data-ttu-id="28b57-108">The Data management gateway is a client agent that you must install in your on-premises environment to copy data between cloud and on-premises data stores.</span><span class="sxs-lookup"><span data-stu-id="28b57-108">The Data management gateway is a client agent that you must install in your on-premises environment to copy data between cloud and on-premises data stores.</span></span> <span data-ttu-id="28b57-109">The on-premises data stores supported by Data Factory are listed in the [Supported data sources](data-factory-data-movement-activities.md#supported-data-stores-and-formats) section.</span><span class="sxs-lookup"><span data-stu-id="28b57-109">The on-premises data stores supported by Data Factory are listed in the [Supported data sources](data-factory-data-movement-activities.md#supported-data-stores-and-formats) section.</span></span>

<span data-ttu-id="28b57-110">This article complements the walkthrough in the [Move data between on-premises and cloud data stores](data-factory-move-data-between-onprem-and-cloud.md) article.</span><span class="sxs-lookup"><span data-stu-id="28b57-110">This article complements the walkthrough in the [Move data between on-premises and cloud data stores](data-factory-move-data-between-onprem-and-cloud.md) article.</span></span> <span data-ttu-id="28b57-111">In the walkthrough, you create a pipeline that uses the gateway to move data from an on-premises SQL Server database to an Azure blob.</span><span class="sxs-lookup"><span data-stu-id="28b57-111">In the walkthrough, you create a pipeline that uses the gateway to move data from an on-premises SQL Server database to an Azure blob.</span></span> <span data-ttu-id="28b57-112">This article provides detailed in-depth information about the data management gateway.</span><span class="sxs-lookup"><span data-stu-id="28b57-112">This article provides detailed in-depth information about the data management gateway.</span></span> 

<span data-ttu-id="28b57-113">You can scale out a data management gateway by associating multiple on-premises machines with the gateway.</span><span class="sxs-lookup"><span data-stu-id="28b57-113">You can scale out a data management gateway by associating multiple on-premises machines with the gateway.</span></span> <span data-ttu-id="28b57-114">You can scale up by increasing number of data movement jobs that can run concurrently on a node.</span><span class="sxs-lookup"><span data-stu-id="28b57-114">You can scale up by increasing number of data movement jobs that can run concurrently on a node.</span></span> <span data-ttu-id="28b57-115">This feature is also available for a logical gateway with a single node.</span><span class="sxs-lookup"><span data-stu-id="28b57-115">This feature is also available for a logical gateway with a single node.</span></span> <span data-ttu-id="28b57-116">See [Scaling data management gateway in Azure Data Factory](data-factory-data-management-gateway-high-availability-scalability.md) article for details.</span><span class="sxs-lookup"><span data-stu-id="28b57-116">See [Scaling data management gateway in Azure Data Factory](data-factory-data-management-gateway-high-availability-scalability.md) article for details.</span></span>

> [!NOTE]
> <span data-ttu-id="28b57-117">Currently, gateway supports only the copy activity and stored procedure activity in Data Factory.</span><span class="sxs-lookup"><span data-stu-id="28b57-117">Currently, gateway supports only the copy activity and stored procedure activity in Data Factory.</span></span> <span data-ttu-id="28b57-118">It is not possible to use the gateway from a custom activity to access on-premises data sources.</span><span class="sxs-lookup"><span data-stu-id="28b57-118">It is not possible to use the gateway from a custom activity to access on-premises data sources.</span></span>      

## <a name="overview"></a><span data-ttu-id="28b57-119">Overview</span><span class="sxs-lookup"><span data-stu-id="28b57-119">Overview</span></span>
### <a name="capabilities-of-data-management-gateway"></a><span data-ttu-id="28b57-120">Capabilities of data management gateway</span><span class="sxs-lookup"><span data-stu-id="28b57-120">Capabilities of data management gateway</span></span>
<span data-ttu-id="28b57-121">Data management gateway provides the following capabilities:</span><span class="sxs-lookup"><span data-stu-id="28b57-121">Data management gateway provides the following capabilities:</span></span>

* <span data-ttu-id="28b57-122">Model on-premises data sources and cloud data sources within the same data factory and move data.</span><span class="sxs-lookup"><span data-stu-id="28b57-122">Model on-premises data sources and cloud data sources within the same data factory and move data.</span></span>
* <span data-ttu-id="28b57-123">Have a single pane of glass for monitoring and management with visibility into gateway status from the Data Factory page.</span><span class="sxs-lookup"><span data-stu-id="28b57-123">Have a single pane of glass for monitoring and management with visibility into gateway status from the Data Factory page.</span></span>
* <span data-ttu-id="28b57-124">Manage access to on-premises data sources securely.</span><span class="sxs-lookup"><span data-stu-id="28b57-124">Manage access to on-premises data sources securely.</span></span>
  * <span data-ttu-id="28b57-125">No changes required to corporate firewall.</span><span class="sxs-lookup"><span data-stu-id="28b57-125">No changes required to corporate firewall.</span></span> <span data-ttu-id="28b57-126">Gateway only makes outbound HTTP-based connections to open internet.</span><span class="sxs-lookup"><span data-stu-id="28b57-126">Gateway only makes outbound HTTP-based connections to open internet.</span></span>
  * <span data-ttu-id="28b57-127">Encrypt credentials for your on-premises data stores with your certificate.</span><span class="sxs-lookup"><span data-stu-id="28b57-127">Encrypt credentials for your on-premises data stores with your certificate.</span></span>
* <span data-ttu-id="28b57-128">Move data efficiently - data is transferred in parallel, resilient to intermittent network issues with auto retry logic.</span><span class="sxs-lookup"><span data-stu-id="28b57-128">Move data efficiently - data is transferred in parallel, resilient to intermittent network issues with auto retry logic.</span></span>

### <a name="command-flow-and-data-flow"></a><span data-ttu-id="28b57-129">Command flow and data flow</span><span class="sxs-lookup"><span data-stu-id="28b57-129">Command flow and data flow</span></span>
<span data-ttu-id="28b57-130">When you use a copy activity to copy data between on-premises and cloud, the activity uses a gateway to transfer data from on-premises data source to cloud and vice versa.</span><span class="sxs-lookup"><span data-stu-id="28b57-130">When you use a copy activity to copy data between on-premises and cloud, the activity uses a gateway to transfer data from on-premises data source to cloud and vice versa.</span></span>

<span data-ttu-id="28b57-131">Here is the high-level data flow for and summary of steps for copy with data gateway: ![Data flow using gateway](./media/data-factory-data-management-gateway/data-flow-using-gateway.png)</span><span class="sxs-lookup"><span data-stu-id="28b57-131">Here is the high-level data flow for and summary of steps for copy with data gateway: ![Data flow using gateway](./media/data-factory-data-management-gateway/data-flow-using-gateway.png)</span></span>

1. <span data-ttu-id="28b57-132">Data developer creates a gateway for an Azure Data Factory using either the [Azure portal](https://portal.azure.com) or [PowerShell Cmdlet](https://docs.microsoft.com/powershell/module/azurerm.datafactories/).</span><span class="sxs-lookup"><span data-stu-id="28b57-132">Data developer creates a gateway for an Azure Data Factory using either the [Azure portal](https://portal.azure.com) or [PowerShell Cmdlet](https://docs.microsoft.com/powershell/module/azurerm.datafactories/).</span></span>
2. <span data-ttu-id="28b57-133">Data developer creates a linked service for an on-premises data store by specifying the gateway.</span><span class="sxs-lookup"><span data-stu-id="28b57-133">Data developer creates a linked service for an on-premises data store by specifying the gateway.</span></span> <span data-ttu-id="28b57-134">As part of setting up the linked service, data developer uses the Setting Credentials application to specify authentication types and credentials.</span><span class="sxs-lookup"><span data-stu-id="28b57-134">As part of setting up the linked service, data developer uses the Setting Credentials application to specify authentication types and credentials.</span></span>  <span data-ttu-id="28b57-135">The Setting Credentials application dialog communicates with the data store to test connection and the gateway to save credentials.</span><span class="sxs-lookup"><span data-stu-id="28b57-135">The Setting Credentials application dialog communicates with the data store to test connection and the gateway to save credentials.</span></span>
3. <span data-ttu-id="28b57-136">Gateway encrypts the credentials with the certificate associated with the gateway (supplied by data developer), before saving the credentials in the cloud.</span><span class="sxs-lookup"><span data-stu-id="28b57-136">Gateway encrypts the credentials with the certificate associated with the gateway (supplied by data developer), before saving the credentials in the cloud.</span></span>
4. <span data-ttu-id="28b57-137">Data Factory service communicates with the gateway for scheduling & management of jobs via a control channel that uses a shared Azure service bus queue.</span><span class="sxs-lookup"><span data-stu-id="28b57-137">Data Factory service communicates with the gateway for scheduling & management of jobs via a control channel that uses a shared Azure service bus queue.</span></span> <span data-ttu-id="28b57-138">When a copy activity job needs to be kicked off, Data Factory queues the request along with credential information.</span><span class="sxs-lookup"><span data-stu-id="28b57-138">When a copy activity job needs to be kicked off, Data Factory queues the request along with credential information.</span></span> <span data-ttu-id="28b57-139">Gateway kicks off the job after polling the queue.</span><span class="sxs-lookup"><span data-stu-id="28b57-139">Gateway kicks off the job after polling the queue.</span></span>
5. <span data-ttu-id="28b57-140">The gateway decrypts the credentials with the same certificate and then connects to the on-premises data store with proper authentication type and credentials.</span><span class="sxs-lookup"><span data-stu-id="28b57-140">The gateway decrypts the credentials with the same certificate and then connects to the on-premises data store with proper authentication type and credentials.</span></span>
6. <span data-ttu-id="28b57-141">The gateway copies data from an on-premises store to a cloud storage, or vice versa depending on how the Copy Activity is configured in the data pipeline.</span><span class="sxs-lookup"><span data-stu-id="28b57-141">The gateway copies data from an on-premises store to a cloud storage, or vice versa depending on how the Copy Activity is configured in the data pipeline.</span></span> <span data-ttu-id="28b57-142">For this step, the gateway directly communicates with cloud-based storage services such as Azure Blob Storage over a secure (HTTPS) channel.</span><span class="sxs-lookup"><span data-stu-id="28b57-142">For this step, the gateway directly communicates with cloud-based storage services such as Azure Blob Storage over a secure (HTTPS) channel.</span></span>

### <a name="considerations-for-using-gateway"></a><span data-ttu-id="28b57-143">Considerations for using gateway</span><span class="sxs-lookup"><span data-stu-id="28b57-143">Considerations for using gateway</span></span>
* <span data-ttu-id="28b57-144">A single instance of data management gateway can be used for multiple on-premises data sources.</span><span class="sxs-lookup"><span data-stu-id="28b57-144">A single instance of data management gateway can be used for multiple on-premises data sources.</span></span> <span data-ttu-id="28b57-145">However, **a single gateway instance is tied to only one Azure data factory** and cannot be shared with another data factory.</span><span class="sxs-lookup"><span data-stu-id="28b57-145">However, **a single gateway instance is tied to only one Azure data factory** and cannot be shared with another data factory.</span></span>
* <span data-ttu-id="28b57-146">You can have **only one instance of data management gateway** installed on a single machine.</span><span class="sxs-lookup"><span data-stu-id="28b57-146">You can have **only one instance of data management gateway** installed on a single machine.</span></span> <span data-ttu-id="28b57-147">Suppose, you have two data factories that need to access on-premises data sources, you need to install gateways on two on-premises computers.</span><span class="sxs-lookup"><span data-stu-id="28b57-147">Suppose, you have two data factories that need to access on-premises data sources, you need to install gateways on two on-premises computers.</span></span> <span data-ttu-id="28b57-148">In other words, a gateway is tied to a specific data factory</span><span class="sxs-lookup"><span data-stu-id="28b57-148">In other words, a gateway is tied to a specific data factory</span></span>
* <span data-ttu-id="28b57-149">The **gateway does not need to be on the same machine as the data source**.</span><span class="sxs-lookup"><span data-stu-id="28b57-149">The **gateway does not need to be on the same machine as the data source**.</span></span> <span data-ttu-id="28b57-150">However, having gateway closer to the data source reduces the time for the gateway to connect to the data source.</span><span class="sxs-lookup"><span data-stu-id="28b57-150">However, having gateway closer to the data source reduces the time for the gateway to connect to the data source.</span></span> <span data-ttu-id="28b57-151">We recommend that you install the gateway on a machine that is different from the one that hosts on-premises data source.</span><span class="sxs-lookup"><span data-stu-id="28b57-151">We recommend that you install the gateway on a machine that is different from the one that hosts on-premises data source.</span></span> <span data-ttu-id="28b57-152">When the gateway and data source are on different machines, the gateway does not compete for resources with data source.</span><span class="sxs-lookup"><span data-stu-id="28b57-152">When the gateway and data source are on different machines, the gateway does not compete for resources with data source.</span></span>
* <span data-ttu-id="28b57-153">You can have **multiple gateways on different machines connecting to the same on-premises data source**.</span><span class="sxs-lookup"><span data-stu-id="28b57-153">You can have **multiple gateways on different machines connecting to the same on-premises data source**.</span></span> <span data-ttu-id="28b57-154">For example, you may have two gateways serving two data factories but the same on-premises data source is registered with both the data factories.</span><span class="sxs-lookup"><span data-stu-id="28b57-154">For example, you may have two gateways serving two data factories but the same on-premises data source is registered with both the data factories.</span></span>
* <span data-ttu-id="28b57-155">If you already have a gateway installed on your computer serving a **Power BI** scenario, install a **separate gateway for Azure Data Factory** on another machine.</span><span class="sxs-lookup"><span data-stu-id="28b57-155">If you already have a gateway installed on your computer serving a **Power BI** scenario, install a **separate gateway for Azure Data Factory** on another machine.</span></span>
* <span data-ttu-id="28b57-156">Gateway must be used even when you use **ExpressRoute**.</span><span class="sxs-lookup"><span data-stu-id="28b57-156">Gateway must be used even when you use **ExpressRoute**.</span></span>
* <span data-ttu-id="28b57-157">Treat your data source as an on-premises data source (that is behind a firewall) even when you use **ExpressRoute**.</span><span class="sxs-lookup"><span data-stu-id="28b57-157">Treat your data source as an on-premises data source (that is behind a firewall) even when you use **ExpressRoute**.</span></span> <span data-ttu-id="28b57-158">Use the gateway to establish connectivity between the service and the data source.</span><span class="sxs-lookup"><span data-stu-id="28b57-158">Use the gateway to establish connectivity between the service and the data source.</span></span>
* <span data-ttu-id="28b57-159">You must **use the gateway** even if the data store is in the cloud on an **Azure IaaS VM**.</span><span class="sxs-lookup"><span data-stu-id="28b57-159">You must **use the gateway** even if the data store is in the cloud on an **Azure IaaS VM**.</span></span>

## <a name="installation"></a><span data-ttu-id="28b57-160">Installation</span><span class="sxs-lookup"><span data-stu-id="28b57-160">Installation</span></span>
### <a name="prerequisites"></a><span data-ttu-id="28b57-161">Prerequisites</span><span class="sxs-lookup"><span data-stu-id="28b57-161">Prerequisites</span></span>
* <span data-ttu-id="28b57-162">The supported **Operating System** versions are Windows 7, Windows 8/8.1, Windows 10, Windows Server 2008 R2, Windows Server 2012, Windows Server 2012 R2.</span><span class="sxs-lookup"><span data-stu-id="28b57-162">The supported **Operating System** versions are Windows 7, Windows 8/8.1, Windows 10, Windows Server 2008 R2, Windows Server 2012, Windows Server 2012 R2.</span></span> <span data-ttu-id="28b57-163">Installation of the data management gateway on a domain controller is currently not supported.</span><span class="sxs-lookup"><span data-stu-id="28b57-163">Installation of the data management gateway on a domain controller is currently not supported.</span></span>
* <span data-ttu-id="28b57-164">.NET Framework 4.5.1 or above is required.</span><span class="sxs-lookup"><span data-stu-id="28b57-164">.NET Framework 4.5.1 or above is required.</span></span> <span data-ttu-id="28b57-165">If you are installing gateway on a Windows 7 machine, install .NET Framework 4.5 or later.</span><span class="sxs-lookup"><span data-stu-id="28b57-165">If you are installing gateway on a Windows 7 machine, install .NET Framework 4.5 or later.</span></span> <span data-ttu-id="28b57-166">See [.NET Framework System Requirements](https://msdn.microsoft.com/library/8z6watww.aspx) for details.</span><span class="sxs-lookup"><span data-stu-id="28b57-166">See [.NET Framework System Requirements](https://msdn.microsoft.com/library/8z6watww.aspx) for details.</span></span>
* <span data-ttu-id="28b57-167">The recommended **configuration** for the gateway machine is at least 2 GHz, 4 cores, 8-GB RAM, and 80-GB disk.</span><span class="sxs-lookup"><span data-stu-id="28b57-167">The recommended **configuration** for the gateway machine is at least 2 GHz, 4 cores, 8-GB RAM, and 80-GB disk.</span></span>
* <span data-ttu-id="28b57-168">If the host machine hibernates, the gateway does not respond to data requests.</span><span class="sxs-lookup"><span data-stu-id="28b57-168">If the host machine hibernates, the gateway does not respond to data requests.</span></span> <span data-ttu-id="28b57-169">Therefore, configure an appropriate **power plan** on the computer before installing the gateway.</span><span class="sxs-lookup"><span data-stu-id="28b57-169">Therefore, configure an appropriate **power plan** on the computer before installing the gateway.</span></span> <span data-ttu-id="28b57-170">If the machine is configured to hibernate, the gateway installation prompts a message.</span><span class="sxs-lookup"><span data-stu-id="28b57-170">If the machine is configured to hibernate, the gateway installation prompts a message.</span></span>
* <span data-ttu-id="28b57-171">You must be an administrator on the machine to install and configure the data management gateway successfully.</span><span class="sxs-lookup"><span data-stu-id="28b57-171">You must be an administrator on the machine to install and configure the data management gateway successfully.</span></span> <span data-ttu-id="28b57-172">You can add additional users to the **data management gateway Users** local Windows group.</span><span class="sxs-lookup"><span data-stu-id="28b57-172">You can add additional users to the **data management gateway Users** local Windows group.</span></span> <span data-ttu-id="28b57-173">The members of this group are able to use the **Data Management Gateway Configuration Manager** tool to configure the gateway.</span><span class="sxs-lookup"><span data-stu-id="28b57-173">The members of this group are able to use the **Data Management Gateway Configuration Manager** tool to configure the gateway.</span></span>

<span data-ttu-id="28b57-174">As copy activity runs happen on a specific frequency, the resource usage (CPU, memory) on the machine also follows the same pattern with peak and idle times.</span><span class="sxs-lookup"><span data-stu-id="28b57-174">As copy activity runs happen on a specific frequency, the resource usage (CPU, memory) on the machine also follows the same pattern with peak and idle times.</span></span> <span data-ttu-id="28b57-175">Resource utilization also depends heavily on the amount of data being moved.</span><span class="sxs-lookup"><span data-stu-id="28b57-175">Resource utilization also depends heavily on the amount of data being moved.</span></span> <span data-ttu-id="28b57-176">When multiple copy jobs are in progress, you see resource usage go up during peak times.</span><span class="sxs-lookup"><span data-stu-id="28b57-176">When multiple copy jobs are in progress, you see resource usage go up during peak times.</span></span>

### <a name="installation-options"></a><span data-ttu-id="28b57-177">Installation options</span><span class="sxs-lookup"><span data-stu-id="28b57-177">Installation options</span></span>
<span data-ttu-id="28b57-178">Data management gateway can be installed in the following ways:</span><span class="sxs-lookup"><span data-stu-id="28b57-178">Data management gateway can be installed in the following ways:</span></span>

* <span data-ttu-id="28b57-179">By downloading an MSI setup package from the [Microsoft Download Center](https://www.microsoft.com/download/details.aspx?id=39717).</span><span class="sxs-lookup"><span data-stu-id="28b57-179">By downloading an MSI setup package from the [Microsoft Download Center](https://www.microsoft.com/download/details.aspx?id=39717).</span></span>  <span data-ttu-id="28b57-180">The MSI can also be used to upgrade existing data management gateway to the latest version, with all settings preserved.</span><span class="sxs-lookup"><span data-stu-id="28b57-180">The MSI can also be used to upgrade existing data management gateway to the latest version, with all settings preserved.</span></span>
* <span data-ttu-id="28b57-181">By clicking **Download and install data gateway** link under MANUAL SETUP or **Install directly on this computer** under EXPRESS SETUP.</span><span class="sxs-lookup"><span data-stu-id="28b57-181">By clicking **Download and install data gateway** link under MANUAL SETUP or **Install directly on this computer** under EXPRESS SETUP.</span></span> <span data-ttu-id="28b57-182">See [Move data between on-premises and cloud](data-factory-move-data-between-onprem-and-cloud.md) article for step-by-step instructions on using express setup.</span><span class="sxs-lookup"><span data-stu-id="28b57-182">See [Move data between on-premises and cloud](data-factory-move-data-between-onprem-and-cloud.md) article for step-by-step instructions on using express setup.</span></span> <span data-ttu-id="28b57-183">The manual step takes you to the download center.</span><span class="sxs-lookup"><span data-stu-id="28b57-183">The manual step takes you to the download center.</span></span>  <span data-ttu-id="28b57-184">The instructions for downloading and installing the gateway from download center are in the next section.</span><span class="sxs-lookup"><span data-stu-id="28b57-184">The instructions for downloading and installing the gateway from download center are in the next section.</span></span>

### <a name="installation-best-practices"></a><span data-ttu-id="28b57-185">Installation best practices:</span><span class="sxs-lookup"><span data-stu-id="28b57-185">Installation best practices:</span></span>
1. <span data-ttu-id="28b57-186">Configure power plan on the host machine for the gateway so that the machine does not hibernate.</span><span class="sxs-lookup"><span data-stu-id="28b57-186">Configure power plan on the host machine for the gateway so that the machine does not hibernate.</span></span> <span data-ttu-id="28b57-187">If the host machine hibernates, the gateway does not respond to data requests.</span><span class="sxs-lookup"><span data-stu-id="28b57-187">If the host machine hibernates, the gateway does not respond to data requests.</span></span>
2. <span data-ttu-id="28b57-188">Back up the certificate associated with the gateway.</span><span class="sxs-lookup"><span data-stu-id="28b57-188">Back up the certificate associated with the gateway.</span></span>

### <a name="install-the-gateway-from-download-center"></a><span data-ttu-id="28b57-189">Install the gateway from download center</span><span class="sxs-lookup"><span data-stu-id="28b57-189">Install the gateway from download center</span></span>
1. <span data-ttu-id="28b57-190">Navigate to [Microsoft Data Management Gateway download page](https://www.microsoft.com/download/details.aspx?id=39717).</span><span class="sxs-lookup"><span data-stu-id="28b57-190">Navigate to [Microsoft Data Management Gateway download page](https://www.microsoft.com/download/details.aspx?id=39717).</span></span>
2. <span data-ttu-id="28b57-191">Click **Download**, select the appropriate version (**32-bit** vs. **64-bit**), and click **Next**.</span><span class="sxs-lookup"><span data-stu-id="28b57-191">Click **Download**, select the appropriate version (**32-bit** vs. **64-bit**), and click **Next**.</span></span>
3. <span data-ttu-id="28b57-192">Run the **MSI** directly or save it to your hard disk and run.</span><span class="sxs-lookup"><span data-stu-id="28b57-192">Run the **MSI** directly or save it to your hard disk and run.</span></span>
4. <span data-ttu-id="28b57-193">On the **Welcome** page, select a **language** click **Next**.</span><span class="sxs-lookup"><span data-stu-id="28b57-193">On the **Welcome** page, select a **language** click **Next**.</span></span>
5. <span data-ttu-id="28b57-194">**Accept** the End-User License Agreement and click **Next**.</span><span class="sxs-lookup"><span data-stu-id="28b57-194">**Accept** the End-User License Agreement and click **Next**.</span></span>
6. <span data-ttu-id="28b57-195">Select **folder** to install the gateway and click **Next**.</span><span class="sxs-lookup"><span data-stu-id="28b57-195">Select **folder** to install the gateway and click **Next**.</span></span>
7. <span data-ttu-id="28b57-196">On the **Ready to install** page, click **Install**.</span><span class="sxs-lookup"><span data-stu-id="28b57-196">On the **Ready to install** page, click **Install**.</span></span>
8. <span data-ttu-id="28b57-197">Click **Finish** to complete installation.</span><span class="sxs-lookup"><span data-stu-id="28b57-197">Click **Finish** to complete installation.</span></span>
9. <span data-ttu-id="28b57-198">Get the key from the Azure portal.</span><span class="sxs-lookup"><span data-stu-id="28b57-198">Get the key from the Azure portal.</span></span> <span data-ttu-id="28b57-199">See the next section for step-by-step instructions.</span><span class="sxs-lookup"><span data-stu-id="28b57-199">See the next section for step-by-step instructions.</span></span>
10. <span data-ttu-id="28b57-200">On the **Register gateway** page of **Data Management Gateway Configuration Manager** running on your machine, do the following steps:</span><span class="sxs-lookup"><span data-stu-id="28b57-200">On the **Register gateway** page of **Data Management Gateway Configuration Manager** running on your machine, do the following steps:</span></span>
    1. <span data-ttu-id="28b57-201">Paste the key in the text.</span><span class="sxs-lookup"><span data-stu-id="28b57-201">Paste the key in the text.</span></span>
    2. <span data-ttu-id="28b57-202">Optionally, click **Show gateway key** to see the key text.</span><span class="sxs-lookup"><span data-stu-id="28b57-202">Optionally, click **Show gateway key** to see the key text.</span></span>
    3. <span data-ttu-id="28b57-203">Click **Register**.</span><span class="sxs-lookup"><span data-stu-id="28b57-203">Click **Register**.</span></span>

### <a name="register-gateway-using-key"></a><span data-ttu-id="28b57-204">Register gateway using key</span><span class="sxs-lookup"><span data-stu-id="28b57-204">Register gateway using key</span></span>
#### <a name="if-you-havent-already-created-a-logical-gateway-in-the-portal"></a><span data-ttu-id="28b57-205">If you haven't already created a logical gateway in the portal</span><span class="sxs-lookup"><span data-stu-id="28b57-205">If you haven't already created a logical gateway in the portal</span></span>
<span data-ttu-id="28b57-206">To create a gateway in the portal and get the key from the **Configure** page, Follow steps from walkthrough in the [Move data between on-premises and cloud](data-factory-move-data-between-onprem-and-cloud.md) article.</span><span class="sxs-lookup"><span data-stu-id="28b57-206">To create a gateway in the portal and get the key from the **Configure** page, Follow steps from walkthrough in the [Move data between on-premises and cloud](data-factory-move-data-between-onprem-and-cloud.md) article.</span></span>    

#### <a name="if-you-have-already-created-the-logical-gateway-in-the-portal"></a><span data-ttu-id="28b57-207">If you have already created the logical gateway in the portal</span><span class="sxs-lookup"><span data-stu-id="28b57-207">If you have already created the logical gateway in the portal</span></span>
1. <span data-ttu-id="28b57-208">In Azure portal, navigate to the **Data Factory** page, and click **Linked Services** tile.</span><span class="sxs-lookup"><span data-stu-id="28b57-208">In Azure portal, navigate to the **Data Factory** page, and click **Linked Services** tile.</span></span>

    ![Data Factory page](media/data-factory-data-management-gateway/data-factory-blade.png)
2. <span data-ttu-id="28b57-210">In the **Linked Services** page, select the logical **gateway** you created in the portal.</span><span class="sxs-lookup"><span data-stu-id="28b57-210">In the **Linked Services** page, select the logical **gateway** you created in the portal.</span></span>

    ![logical gateway](media/data-factory-data-management-gateway/data-factory-select-gateway.png)  
3. <span data-ttu-id="28b57-212">In the **Data Gateway** page, click **Download and install data gateway**.</span><span class="sxs-lookup"><span data-stu-id="28b57-212">In the **Data Gateway** page, click **Download and install data gateway**.</span></span>

    ![Download link in the portal](media/data-factory-data-management-gateway/download-and-install-link-on-portal.png)   
4. <span data-ttu-id="28b57-214">In the **Configure** page, click **Recreate key**.</span><span class="sxs-lookup"><span data-stu-id="28b57-214">In the **Configure** page, click **Recreate key**.</span></span> <span data-ttu-id="28b57-215">Click Yes on the warning message after reading it carefully.</span><span class="sxs-lookup"><span data-stu-id="28b57-215">Click Yes on the warning message after reading it carefully.</span></span>

    ![Recreate key](media/data-factory-data-management-gateway/recreate-key-button.png)
5. <span data-ttu-id="28b57-217">Click Copy button next to the key.</span><span class="sxs-lookup"><span data-stu-id="28b57-217">Click Copy button next to the key.</span></span> <span data-ttu-id="28b57-218">The key is copied to the clipboard.</span><span class="sxs-lookup"><span data-stu-id="28b57-218">The key is copied to the clipboard.</span></span>

    ![Copy key](media/data-factory-data-management-gateway/copy-gateway-key.png)

### <a name="system-tray-icons-notifications"></a><span data-ttu-id="28b57-220">System tray icons/ notifications</span><span class="sxs-lookup"><span data-stu-id="28b57-220">System tray icons/ notifications</span></span>
<span data-ttu-id="28b57-221">The following image shows some of the tray icons that you see.</span><span class="sxs-lookup"><span data-stu-id="28b57-221">The following image shows some of the tray icons that you see.</span></span>

![system tray icons](./media/data-factory-data-management-gateway/gateway-tray-icons.png)

<span data-ttu-id="28b57-223">If you move cursor over the system tray icon/notification message, you see details about the state of the gateway/update operation in a popup window.</span><span class="sxs-lookup"><span data-stu-id="28b57-223">If you move cursor over the system tray icon/notification message, you see details about the state of the gateway/update operation in a popup window.</span></span>

### <a name="ports-and-firewall"></a><span data-ttu-id="28b57-224">Ports and firewall</span><span class="sxs-lookup"><span data-stu-id="28b57-224">Ports and firewall</span></span>
<span data-ttu-id="28b57-225">There are two firewalls you need to consider: **corporate firewall** running on the central router of the organization, and **Windows firewall** configured as a daemon on the local machine where the gateway is installed.</span><span class="sxs-lookup"><span data-stu-id="28b57-225">There are two firewalls you need to consider: **corporate firewall** running on the central router of the organization, and **Windows firewall** configured as a daemon on the local machine where the gateway is installed.</span></span>  

![firewalls](./media/data-factory-data-management-gateway/firewalls2.png)

<span data-ttu-id="28b57-227">At corporate firewall level, you need configure the following domains and outbound ports:</span><span class="sxs-lookup"><span data-stu-id="28b57-227">At corporate firewall level, you need configure the following domains and outbound ports:</span></span>

| <span data-ttu-id="28b57-228">Domain names</span><span class="sxs-lookup"><span data-stu-id="28b57-228">Domain names</span></span> | <span data-ttu-id="28b57-229">Ports</span><span class="sxs-lookup"><span data-stu-id="28b57-229">Ports</span></span> | <span data-ttu-id="28b57-230">Description</span><span class="sxs-lookup"><span data-stu-id="28b57-230">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="28b57-231">\*.servicebus.windows.net</span><span class="sxs-lookup"><span data-stu-id="28b57-231">\*.servicebus.windows.net</span></span> |<span data-ttu-id="28b57-232">443</span><span class="sxs-lookup"><span data-stu-id="28b57-232">443</span></span> |<span data-ttu-id="28b57-233">Used for communication with Data Movement Service backend</span><span class="sxs-lookup"><span data-stu-id="28b57-233">Used for communication with Data Movement Service backend</span></span> |
| <span data-ttu-id="28b57-234">\*.core.windows.net</span><span class="sxs-lookup"><span data-stu-id="28b57-234">\*.core.windows.net</span></span> |<span data-ttu-id="28b57-235">443</span><span class="sxs-lookup"><span data-stu-id="28b57-235">443</span></span> |<span data-ttu-id="28b57-236">Used for Staged copy using Azure Blob (if configured)</span><span class="sxs-lookup"><span data-stu-id="28b57-236">Used for Staged copy using Azure Blob (if configured)</span></span>|
| <span data-ttu-id="28b57-237">\*.frontend.clouddatahub.net</span><span class="sxs-lookup"><span data-stu-id="28b57-237">\*.frontend.clouddatahub.net</span></span> |<span data-ttu-id="28b57-238">443</span><span class="sxs-lookup"><span data-stu-id="28b57-238">443</span></span> |<span data-ttu-id="28b57-239">Used for communication with Data Movement Service backend</span><span class="sxs-lookup"><span data-stu-id="28b57-239">Used for communication with Data Movement Service backend</span></span> |
| <span data-ttu-id="28b57-240">\*.servicebus.windows.net</span><span class="sxs-lookup"><span data-stu-id="28b57-240">\*.servicebus.windows.net</span></span> |<span data-ttu-id="28b57-241">9350-9354, 5671</span><span class="sxs-lookup"><span data-stu-id="28b57-241">9350-9354, 5671</span></span> |<span data-ttu-id="28b57-242">Optional service bus relay over TCP used by the Copy Wizard</span><span class="sxs-lookup"><span data-stu-id="28b57-242">Optional service bus relay over TCP used by the Copy Wizard</span></span> |


<span data-ttu-id="28b57-243">At Windows firewall level, these outbound ports are normally enabled.</span><span class="sxs-lookup"><span data-stu-id="28b57-243">At Windows firewall level, these outbound ports are normally enabled.</span></span> <span data-ttu-id="28b57-244">If not, you can configure the domains and ports accordingly on gateway machine.</span><span class="sxs-lookup"><span data-stu-id="28b57-244">If not, you can configure the domains and ports accordingly on gateway machine.</span></span>

> [!NOTE]
> 1. <span data-ttu-id="28b57-245">Based on your source/ sinks, you may have to whitelist additional domains and outbound ports in your corporate/Windows firewall.</span><span class="sxs-lookup"><span data-stu-id="28b57-245">Based on your source/ sinks, you may have to whitelist additional domains and outbound ports in your corporate/Windows firewall.</span></span>
> 2. <span data-ttu-id="28b57-246">For some Cloud Databases (For example: [Azure SQL Database](https://docs.microsoft.com/azure/sql-database/sql-database-configure-firewall-settings), [Azure Data Lake](https://docs.microsoft.com/azure/data-lake-store/data-lake-store-secure-data#set-ip-address-range-for-data-access), etc.), you may need to whitelist IP address of Gateway machine on their firewall configuration.</span><span class="sxs-lookup"><span data-stu-id="28b57-246">For some Cloud Databases (For example: [Azure SQL Database](https://docs.microsoft.com/azure/sql-database/sql-database-configure-firewall-settings), [Azure Data Lake](https://docs.microsoft.com/azure/data-lake-store/data-lake-store-secure-data#set-ip-address-range-for-data-access), etc.), you may need to whitelist IP address of Gateway machine on their firewall configuration.</span></span>
>
>


#### <a name="copy-data-from-a-source-data-store-to-a-sink-data-store"></a><span data-ttu-id="28b57-247">Copy data from a source data store to a sink data store</span><span class="sxs-lookup"><span data-stu-id="28b57-247">Copy data from a source data store to a sink data store</span></span>
<span data-ttu-id="28b57-248">Ensure that the firewall rules are enabled properly on the corporate firewall, Windows firewall on the gateway machine, and the data store itself.</span><span class="sxs-lookup"><span data-stu-id="28b57-248">Ensure that the firewall rules are enabled properly on the corporate firewall, Windows firewall on the gateway machine, and the data store itself.</span></span> <span data-ttu-id="28b57-249">Enabling these rules allows the gateway to connect to both source and sink successfully.</span><span class="sxs-lookup"><span data-stu-id="28b57-249">Enabling these rules allows the gateway to connect to both source and sink successfully.</span></span> <span data-ttu-id="28b57-250">Enable rules for each data store that is involved in the copy operation.</span><span class="sxs-lookup"><span data-stu-id="28b57-250">Enable rules for each data store that is involved in the copy operation.</span></span>

<span data-ttu-id="28b57-251">For example, to copy from **an on-premises data store to an Azure SQL Database sink or an Azure SQL Data Warehouse sink**, do the following steps:</span><span class="sxs-lookup"><span data-stu-id="28b57-251">For example, to copy from **an on-premises data store to an Azure SQL Database sink or an Azure SQL Data Warehouse sink**, do the following steps:</span></span>

* <span data-ttu-id="28b57-252">Allow outbound **TCP** communication on port **1433** for both Windows firewall and corporate firewall.</span><span class="sxs-lookup"><span data-stu-id="28b57-252">Allow outbound **TCP** communication on port **1433** for both Windows firewall and corporate firewall.</span></span>
* <span data-ttu-id="28b57-253">Configure the firewall settings of Azure SQL server to add the IP address of the gateway machine to the list of allowed IP addresses.</span><span class="sxs-lookup"><span data-stu-id="28b57-253">Configure the firewall settings of Azure SQL server to add the IP address of the gateway machine to the list of allowed IP addresses.</span></span>

> [!NOTE]
> <span data-ttu-id="28b57-254">If your firewall does not allow outbound port 1433, Gateway can't access Azure SQL directly.</span><span class="sxs-lookup"><span data-stu-id="28b57-254">If your firewall does not allow outbound port 1433, Gateway can't access Azure SQL directly.</span></span> <span data-ttu-id="28b57-255">In this case, you may use [Staged Copy](https://docs.microsoft.com/azure/data-factory/data-factory-copy-activity-performance#staged-copy) to SQL Azure Database/ SQL Azure DW.</span><span class="sxs-lookup"><span data-stu-id="28b57-255">In this case, you may use [Staged Copy](https://docs.microsoft.com/azure/data-factory/data-factory-copy-activity-performance#staged-copy) to SQL Azure Database/ SQL Azure DW.</span></span> <span data-ttu-id="28b57-256">In this scenario, you would only require HTTPS (port 443) for the data movement.</span><span class="sxs-lookup"><span data-stu-id="28b57-256">In this scenario, you would only require HTTPS (port 443) for the data movement.</span></span>
>
>


### <a name="proxy-server-considerations"></a><span data-ttu-id="28b57-257">Proxy server considerations</span><span class="sxs-lookup"><span data-stu-id="28b57-257">Proxy server considerations</span></span>
<span data-ttu-id="28b57-258">If your corporate network environment uses a proxy server to access the internet, configure data management gateway to use appropriate proxy settings.</span><span class="sxs-lookup"><span data-stu-id="28b57-258">If your corporate network environment uses a proxy server to access the internet, configure data management gateway to use appropriate proxy settings.</span></span> <span data-ttu-id="28b57-259">You can set the proxy during the initial registration phase.</span><span class="sxs-lookup"><span data-stu-id="28b57-259">You can set the proxy during the initial registration phase.</span></span>

![Set proxy during registration](media/data-factory-data-management-gateway/SetProxyDuringRegistration.png)

<span data-ttu-id="28b57-261">Gateway uses the proxy server to connect to the cloud service.</span><span class="sxs-lookup"><span data-stu-id="28b57-261">Gateway uses the proxy server to connect to the cloud service.</span></span> <span data-ttu-id="28b57-262">Click **Change** link during initial setup.</span><span class="sxs-lookup"><span data-stu-id="28b57-262">Click **Change** link during initial setup.</span></span> <span data-ttu-id="28b57-263">You see the **proxy setting** dialog.</span><span class="sxs-lookup"><span data-stu-id="28b57-263">You see the **proxy setting** dialog.</span></span>

![Set proxy using config manager](media/data-factory-data-management-gateway/SetProxySettings.png)

<span data-ttu-id="28b57-265">There are three configuration options:</span><span class="sxs-lookup"><span data-stu-id="28b57-265">There are three configuration options:</span></span>

* <span data-ttu-id="28b57-266">**Do not use proxy**: Gateway does not explicitly use any proxy to connect to cloud services.</span><span class="sxs-lookup"><span data-stu-id="28b57-266">**Do not use proxy**: Gateway does not explicitly use any proxy to connect to cloud services.</span></span>
* <span data-ttu-id="28b57-267">**Use system proxy**: Gateway uses the proxy setting that is configured in diahost.exe.config and diawp.exe.config.  If no proxy is configured in diahost.exe.config and diawp.exe.config, gateway connects to cloud service directly without going through proxy.</span><span class="sxs-lookup"><span data-stu-id="28b57-267">**Use system proxy**: Gateway uses the proxy setting that is configured in diahost.exe.config and diawp.exe.config.  If no proxy is configured in diahost.exe.config and diawp.exe.config, gateway connects to cloud service directly without going through proxy.</span></span>
* <span data-ttu-id="28b57-268">**Use custom proxy**: Configure the HTTP proxy setting to use for gateway, instead of using configurations in diahost.exe.config and diawp.exe.config.  Address and Port are required.</span><span class="sxs-lookup"><span data-stu-id="28b57-268">**Use custom proxy**: Configure the HTTP proxy setting to use for gateway, instead of using configurations in diahost.exe.config and diawp.exe.config.  Address and Port are required.</span></span>  <span data-ttu-id="28b57-269">User Name and Password are optional depending on your proxy's authentication setting.</span><span class="sxs-lookup"><span data-stu-id="28b57-269">User Name and Password are optional depending on your proxy's authentication setting.</span></span>  <span data-ttu-id="28b57-270">All settings are encrypted with the credential certificate of the gateway and stored locally on the gateway host machine.</span><span class="sxs-lookup"><span data-stu-id="28b57-270">All settings are encrypted with the credential certificate of the gateway and stored locally on the gateway host machine.</span></span>

<span data-ttu-id="28b57-271">The data management gateway Host Service restarts automatically after you save the updated proxy settings.</span><span class="sxs-lookup"><span data-stu-id="28b57-271">The data management gateway Host Service restarts automatically after you save the updated proxy settings.</span></span>

<span data-ttu-id="28b57-272">After gateway has been successfully registered, if you want to view or update proxy settings, use Data Management Gateway Configuration Manager.</span><span class="sxs-lookup"><span data-stu-id="28b57-272">After gateway has been successfully registered, if you want to view or update proxy settings, use Data Management Gateway Configuration Manager.</span></span>

1. <span data-ttu-id="28b57-273">Launch **Data Management Gateway Configuration Manager**.</span><span class="sxs-lookup"><span data-stu-id="28b57-273">Launch **Data Management Gateway Configuration Manager**.</span></span>
2. <span data-ttu-id="28b57-274">Switch to the **Settings** tab.</span><span class="sxs-lookup"><span data-stu-id="28b57-274">Switch to the **Settings** tab.</span></span>
3. <span data-ttu-id="28b57-275">Click **Change** link in **HTTP Proxy** section to launch the **Set HTTP Proxy** dialog.</span><span class="sxs-lookup"><span data-stu-id="28b57-275">Click **Change** link in **HTTP Proxy** section to launch the **Set HTTP Proxy** dialog.</span></span>  
4. <span data-ttu-id="28b57-276">After you click the **Next** button, you see a warning dialog asking for your permission to save the proxy setting and restart the Gateway Host Service.</span><span class="sxs-lookup"><span data-stu-id="28b57-276">After you click the **Next** button, you see a warning dialog asking for your permission to save the proxy setting and restart the Gateway Host Service.</span></span>

<span data-ttu-id="28b57-277">You can view and update HTTP proxy by using Configuration Manager tool.</span><span class="sxs-lookup"><span data-stu-id="28b57-277">You can view and update HTTP proxy by using Configuration Manager tool.</span></span>

![Set proxy using config manager](media/data-factory-data-management-gateway/SetProxyConfigManager.png)

> [!NOTE]
> <span data-ttu-id="28b57-279">If you set up a proxy server with NTLM authentication, Gateway Host Service runs under the domain account.</span><span class="sxs-lookup"><span data-stu-id="28b57-279">If you set up a proxy server with NTLM authentication, Gateway Host Service runs under the domain account.</span></span> <span data-ttu-id="28b57-280">If you change the password for the domain account later, remember to update configuration settings for the service and restart it accordingly.</span><span class="sxs-lookup"><span data-stu-id="28b57-280">If you change the password for the domain account later, remember to update configuration settings for the service and restart it accordingly.</span></span> <span data-ttu-id="28b57-281">Due to this requirement, we suggest you use a dedicated domain account to access the proxy server that does not require you to update the password frequently.</span><span class="sxs-lookup"><span data-stu-id="28b57-281">Due to this requirement, we suggest you use a dedicated domain account to access the proxy server that does not require you to update the password frequently.</span></span>
>
>

### <a name="configure-proxy-server-settings"></a><span data-ttu-id="28b57-282">Configure proxy server settings</span><span class="sxs-lookup"><span data-stu-id="28b57-282">Configure proxy server settings</span></span>
<span data-ttu-id="28b57-283">If you select **Use system proxy** setting for the HTTP proxy, gateway uses the proxy setting in diahost.exe.config and diawp.exe.config.  If no proxy is specified in diahost.exe.config and diawp.exe.config, gateway connects to cloud service directly without going through proxy.</span><span class="sxs-lookup"><span data-stu-id="28b57-283">If you select **Use system proxy** setting for the HTTP proxy, gateway uses the proxy setting in diahost.exe.config and diawp.exe.config.  If no proxy is specified in diahost.exe.config and diawp.exe.config, gateway connects to cloud service directly without going through proxy.</span></span> <span data-ttu-id="28b57-284">The following procedure provides instructions for updating the diahost.exe.config file.</span><span class="sxs-lookup"><span data-stu-id="28b57-284">The following procedure provides instructions for updating the diahost.exe.config file.</span></span>  

1. <span data-ttu-id="28b57-285">In File Explorer, make a safe copy of C:\Program Files\Microsoft Data Management Gateway\2.0\Shared\diahost.exe.config to back up the original file.</span><span class="sxs-lookup"><span data-stu-id="28b57-285">In File Explorer, make a safe copy of C:\Program Files\Microsoft Data Management Gateway\2.0\Shared\diahost.exe.config to back up the original file.</span></span>
2. <span data-ttu-id="28b57-286">Launch Notepad.exe running as administrator, and open text file "C:\Program Files\Microsoft Data Management Gateway\2.0\Shared\diahost.exe.config. You find the default tag for system.net as shown in the following code:</span><span class="sxs-lookup"><span data-stu-id="28b57-286">Launch Notepad.exe running as administrator, and open text file "C:\Program Files\Microsoft Data Management Gateway\2.0\Shared\diahost.exe.config. You find the default tag for system.net as shown in the following code:</span></span>

         <system.net>
             <defaultProxy useDefaultCredentials="true" />
         </system.net>    

   <span data-ttu-id="28b57-287">You can then add proxy server details as shown in the following example:</span><span class="sxs-lookup"><span data-stu-id="28b57-287">You can then add proxy server details as shown in the following example:</span></span>

         <system.net>
               <defaultProxy enabled="true">
                     <proxy bypassonlocal="true" proxyaddress="http://proxy.domain.org:8888/" />
               </defaultProxy>
         </system.net>

   <span data-ttu-id="28b57-288">Additional properties are allowed inside the proxy tag to specify the required settings like scriptLocation.</span><span class="sxs-lookup"><span data-stu-id="28b57-288">Additional properties are allowed inside the proxy tag to specify the required settings like scriptLocation.</span></span> <span data-ttu-id="28b57-289">Refer to [proxy Element (Network Settings)](https://msdn.microsoft.com/library/sa91de1e.aspx) on syntax.</span><span class="sxs-lookup"><span data-stu-id="28b57-289">Refer to [proxy Element (Network Settings)](https://msdn.microsoft.com/library/sa91de1e.aspx) on syntax.</span></span>

         <proxy autoDetect="true|false|unspecified" bypassonlocal="true|false|unspecified" proxyaddress="uriString" scriptLocation="uriString" usesystemdefault="true|false|unspecified "/>
3. <span data-ttu-id="28b57-290">Save the configuration file into the original location, then restart the Data Management Gateway Host service, which picks up the changes.</span><span class="sxs-lookup"><span data-stu-id="28b57-290">Save the configuration file into the original location, then restart the Data Management Gateway Host service, which picks up the changes.</span></span> <span data-ttu-id="28b57-291">To restart the service: use services applet from the control panel, or from the **Data Management Gateway Configuration Manager** > click the **Stop Service** button, then click the **Start Service**.</span><span class="sxs-lookup"><span data-stu-id="28b57-291">To restart the service: use services applet from the control panel, or from the **Data Management Gateway Configuration Manager** > click the **Stop Service** button, then click the **Start Service**.</span></span> <span data-ttu-id="28b57-292">If the service does not start, it is likely that an incorrect XML tag syntax has been added into the application configuration file that was edited.</span><span class="sxs-lookup"><span data-stu-id="28b57-292">If the service does not start, it is likely that an incorrect XML tag syntax has been added into the application configuration file that was edited.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="28b57-293">Do not forget to update **both** diahost.exe.config and diawp.exe.config.</span><span class="sxs-lookup"><span data-stu-id="28b57-293">Do not forget to update **both** diahost.exe.config and diawp.exe.config.</span></span>  


<span data-ttu-id="28b57-294">In addition to these points, you also need to make sure Microsoft Azure is in your company's whitelist.</span><span class="sxs-lookup"><span data-stu-id="28b57-294">In addition to these points, you also need to make sure Microsoft Azure is in your company's whitelist.</span></span> <span data-ttu-id="28b57-295">The list of valid Microsoft Azure IP addresses can be downloaded from the [Microsoft Download Center](https://www.microsoft.com/download/details.aspx?id=41653).</span><span class="sxs-lookup"><span data-stu-id="28b57-295">The list of valid Microsoft Azure IP addresses can be downloaded from the [Microsoft Download Center](https://www.microsoft.com/download/details.aspx?id=41653).</span></span>

#### <a name="possible-symptoms-for-firewall-and-proxy-server-related-issues"></a><span data-ttu-id="28b57-296">Possible symptoms for firewall and proxy server-related issues</span><span class="sxs-lookup"><span data-stu-id="28b57-296">Possible symptoms for firewall and proxy server-related issues</span></span>
<span data-ttu-id="28b57-297">If you encounter errors similar to the following ones, it is likely due to improper configuration of the firewall or proxy server, which blocks gateway from connecting to Data Factory to authenticate itself.</span><span class="sxs-lookup"><span data-stu-id="28b57-297">If you encounter errors similar to the following ones, it is likely due to improper configuration of the firewall or proxy server, which blocks gateway from connecting to Data Factory to authenticate itself.</span></span> <span data-ttu-id="28b57-298">Refer to previous section to ensure your firewall and proxy server are properly configured.</span><span class="sxs-lookup"><span data-stu-id="28b57-298">Refer to previous section to ensure your firewall and proxy server are properly configured.</span></span>

1. <span data-ttu-id="28b57-299">When you try to register the gateway, you receive the following error: "Failed to register the gateway key.</span><span class="sxs-lookup"><span data-stu-id="28b57-299">When you try to register the gateway, you receive the following error: "Failed to register the gateway key.</span></span> <span data-ttu-id="28b57-300">Before trying to register the gateway key again, confirm that the data management gateway is in a connected state and the Data Management Gateway Host Service is Started."</span><span class="sxs-lookup"><span data-stu-id="28b57-300">Before trying to register the gateway key again, confirm that the data management gateway is in a connected state and the Data Management Gateway Host Service is Started."</span></span>
2. <span data-ttu-id="28b57-301">When you open Configuration Manager, you see status as "Disconnected" or "Connecting."</span><span class="sxs-lookup"><span data-stu-id="28b57-301">When you open Configuration Manager, you see status as "Disconnected" or "Connecting."</span></span> <span data-ttu-id="28b57-302">When viewing Windows event logs, under "Event Viewer" > "Application and Services Logs" > "Data Management Gateway", you see error messages such as the following error: `Unable to connect to the remote server`
   `A component of Data Management Gateway has become unresponsive and restarts automatically. Component name: Gateway.`</span><span class="sxs-lookup"><span data-stu-id="28b57-302">When viewing Windows event logs, under "Event Viewer" > "Application and Services Logs" > "Data Management Gateway", you see error messages such as the following error: `Unable to connect to the remote server`
   `A component of Data Management Gateway has become unresponsive and restarts automatically. Component name: Gateway.`</span></span>

### <a name="open-port-8050-for-credential-encryption"></a><span data-ttu-id="28b57-303">Open port 8050 for credential encryption</span><span class="sxs-lookup"><span data-stu-id="28b57-303">Open port 8050 for credential encryption</span></span>
<span data-ttu-id="28b57-304">The **Setting Credentials** application uses the inbound port **8050** to relay credentials to the gateway when you set up an on-premises linked service in the Azure portal.</span><span class="sxs-lookup"><span data-stu-id="28b57-304">The **Setting Credentials** application uses the inbound port **8050** to relay credentials to the gateway when you set up an on-premises linked service in the Azure portal.</span></span> <span data-ttu-id="28b57-305">During gateway setup, by default, the gateway installation opens it on the gateway machine.</span><span class="sxs-lookup"><span data-stu-id="28b57-305">During gateway setup, by default, the gateway installation opens it on the gateway machine.</span></span>

<span data-ttu-id="28b57-306">If you are using a third-party firewall, you can manually open the port 8050.</span><span class="sxs-lookup"><span data-stu-id="28b57-306">If you are using a third-party firewall, you can manually open the port 8050.</span></span> <span data-ttu-id="28b57-307">If you run into firewall issue during gateway setup, you can try using the following command to install the gateway without configuring the firewall.</span><span class="sxs-lookup"><span data-stu-id="28b57-307">If you run into firewall issue during gateway setup, you can try using the following command to install the gateway without configuring the firewall.</span></span>

    msiexec /q /i DataManagementGateway.msi NOFIREWALL=1

<span data-ttu-id="28b57-308">If you choose not to open the port 8050 on the gateway machine, use mechanisms other than using the **Setting Credentials** application to configure data store credentials.</span><span class="sxs-lookup"><span data-stu-id="28b57-308">If you choose not to open the port 8050 on the gateway machine, use mechanisms other than using the **Setting Credentials** application to configure data store credentials.</span></span> <span data-ttu-id="28b57-309">For example, you could use [New-AzureRmDataFactoryEncryptValue](https://docs.microsoft.com/powershell/module/azurerm.datafactories/new-azurermdatafactoryencryptvalue) PowerShell cmdlet.</span><span class="sxs-lookup"><span data-stu-id="28b57-309">For example, you could use [New-AzureRmDataFactoryEncryptValue](https://docs.microsoft.com/powershell/module/azurerm.datafactories/new-azurermdatafactoryencryptvalue) PowerShell cmdlet.</span></span> <span data-ttu-id="28b57-310">See [Setting Credentials and Security](#set-credentials-and-securityy) section on how data store credentials can be set.</span><span class="sxs-lookup"><span data-stu-id="28b57-310">See [Setting Credentials and Security](#set-credentials-and-securityy) section on how data store credentials can be set.</span></span>

## <a name="update"></a><span data-ttu-id="28b57-311">Update</span><span class="sxs-lookup"><span data-stu-id="28b57-311">Update</span></span>
<span data-ttu-id="28b57-312">By default, data management gateway is automatically updated when a newer version of the gateway is available.</span><span class="sxs-lookup"><span data-stu-id="28b57-312">By default, data management gateway is automatically updated when a newer version of the gateway is available.</span></span> <span data-ttu-id="28b57-313">The gateway is not updated until all the scheduled tasks are done.</span><span class="sxs-lookup"><span data-stu-id="28b57-313">The gateway is not updated until all the scheduled tasks are done.</span></span> <span data-ttu-id="28b57-314">No further tasks are processed by the gateway until the update operation is completed.</span><span class="sxs-lookup"><span data-stu-id="28b57-314">No further tasks are processed by the gateway until the update operation is completed.</span></span> <span data-ttu-id="28b57-315">If the update fails, gateway is rolled back to the old version.</span><span class="sxs-lookup"><span data-stu-id="28b57-315">If the update fails, gateway is rolled back to the old version.</span></span>

<span data-ttu-id="28b57-316">You see the scheduled update time in the following places:</span><span class="sxs-lookup"><span data-stu-id="28b57-316">You see the scheduled update time in the following places:</span></span>

* <span data-ttu-id="28b57-317">The gateway properties page in the Azure portal.</span><span class="sxs-lookup"><span data-stu-id="28b57-317">The gateway properties page in the Azure portal.</span></span>
* <span data-ttu-id="28b57-318">Home page of the Data Management Gateway Configuration Manager</span><span class="sxs-lookup"><span data-stu-id="28b57-318">Home page of the Data Management Gateway Configuration Manager</span></span>
* <span data-ttu-id="28b57-319">System tray notification message.</span><span class="sxs-lookup"><span data-stu-id="28b57-319">System tray notification message.</span></span>

<span data-ttu-id="28b57-320">The Home tab of the Data Management Gateway Configuration Manager displays the update schedule and the last time the gateway was installed/updated.</span><span class="sxs-lookup"><span data-stu-id="28b57-320">The Home tab of the Data Management Gateway Configuration Manager displays the update schedule and the last time the gateway was installed/updated.</span></span>

![Schedule updates](media/data-factory-data-management-gateway/UpdateSection.png)

<span data-ttu-id="28b57-322">You can install the update right away or wait for the gateway to be automatically updated at the scheduled time.</span><span class="sxs-lookup"><span data-stu-id="28b57-322">You can install the update right away or wait for the gateway to be automatically updated at the scheduled time.</span></span> <span data-ttu-id="28b57-323">For example, the following image shows you the notification message shown in the Gateway Configuration Manager along with the Update button that you can click to install it immediately.</span><span class="sxs-lookup"><span data-stu-id="28b57-323">For example, the following image shows you the notification message shown in the Gateway Configuration Manager along with the Update button that you can click to install it immediately.</span></span>

![Update in DMG Configuration Manager](./media/data-factory-data-management-gateway/gateway-auto-update-config-manager.png)

<span data-ttu-id="28b57-325">The notification message in the system tray would look as shown in the following image:</span><span class="sxs-lookup"><span data-stu-id="28b57-325">The notification message in the system tray would look as shown in the following image:</span></span>

![System Tray message](./media/data-factory-data-management-gateway/gateway-auto-update-tray-message.png)

<span data-ttu-id="28b57-327">You see the status of update operation (manual or automatic) in the system tray.</span><span class="sxs-lookup"><span data-stu-id="28b57-327">You see the status of update operation (manual or automatic) in the system tray.</span></span> <span data-ttu-id="28b57-328">When you launch Gateway Configuration Manager next time, you see a message on the notification bar that the gateway has been updated along with a link to [what's new topic](data-factory-gateway-release-notes.md).</span><span class="sxs-lookup"><span data-stu-id="28b57-328">When you launch Gateway Configuration Manager next time, you see a message on the notification bar that the gateway has been updated along with a link to [what's new topic](data-factory-gateway-release-notes.md).</span></span>

### <a name="to-disableenable-auto-update-feature"></a><span data-ttu-id="28b57-329">To disable/enable auto-update feature</span><span class="sxs-lookup"><span data-stu-id="28b57-329">To disable/enable auto-update feature</span></span>
<span data-ttu-id="28b57-330">You can disable/enable the auto-update feature by doing the following steps:</span><span class="sxs-lookup"><span data-stu-id="28b57-330">You can disable/enable the auto-update feature by doing the following steps:</span></span>

<span data-ttu-id="28b57-331">[For single node gateway]</span><span class="sxs-lookup"><span data-stu-id="28b57-331">[For single node gateway]</span></span>
1. <span data-ttu-id="28b57-332">Launch Windows PowerShell on the gateway machine.</span><span class="sxs-lookup"><span data-stu-id="28b57-332">Launch Windows PowerShell on the gateway machine.</span></span>
2. <span data-ttu-id="28b57-333">Switch to the C:\Program Files\Microsoft Integration Runtime\3.0\PowerShellScript\ folder.</span><span class="sxs-lookup"><span data-stu-id="28b57-333">Switch to the C:\Program Files\Microsoft Integration Runtime\3.0\PowerShellScript\ folder.</span></span>
3. <span data-ttu-id="28b57-334">Run the following command to turn the auto-update feature OFF (disable).</span><span class="sxs-lookup"><span data-stu-id="28b57-334">Run the following command to turn the auto-update feature OFF (disable).</span></span>   

    ```PowerShell
    .\IntegrationRuntimeAutoUpdateToggle.ps1  -off
    ```
4. <span data-ttu-id="28b57-335">To turn it back on:</span><span class="sxs-lookup"><span data-stu-id="28b57-335">To turn it back on:</span></span>

    ```PowerShell
    .\IntegrationRuntimeAutoUpdateToggle.ps1 -on  
    ```
[<span data-ttu-id="28b57-336">For multi-node highly available and scalable gateway</span><span class="sxs-lookup"><span data-stu-id="28b57-336">For multi-node highly available and scalable gateway</span></span>](data-factory-data-management-gateway-high-availability-scalability.md)
1. <span data-ttu-id="28b57-337">Launch Windows PowerShell on the gateway machine.</span><span class="sxs-lookup"><span data-stu-id="28b57-337">Launch Windows PowerShell on the gateway machine.</span></span>
2. <span data-ttu-id="28b57-338">Switch to the C:\Program Files\Microsoft Integration Runtime\3.0\PowerShellScript\ folder.</span><span class="sxs-lookup"><span data-stu-id="28b57-338">Switch to the C:\Program Files\Microsoft Integration Runtime\3.0\PowerShellScript\ folder.</span></span>
3. <span data-ttu-id="28b57-339">Run the following command to turn the auto-update feature OFF (disable).</span><span class="sxs-lookup"><span data-stu-id="28b57-339">Run the following command to turn the auto-update feature OFF (disable).</span></span>   

    <span data-ttu-id="28b57-340">For gateway with high availability feature, an extra AuthKey param is required.</span><span class="sxs-lookup"><span data-stu-id="28b57-340">For gateway with high availability feature, an extra AuthKey param is required.</span></span>
    ```PowerShell
    .\IntegrationRuntimeAutoUpdateToggle.ps1  -off -AuthKey <your auth key>
    ```
4. <span data-ttu-id="28b57-341">To turn it back on:</span><span class="sxs-lookup"><span data-stu-id="28b57-341">To turn it back on:</span></span>

    ```PowerShell
    .\IntegrationRuntimeAutoUpdateToggle.ps1  -on -AuthKey <your auth key> 
    ```

## <a name="configuration-manager"></a><span data-ttu-id="28b57-342">Configuration Manager</span><span class="sxs-lookup"><span data-stu-id="28b57-342">Configuration Manager</span></span>
<span data-ttu-id="28b57-343">Once you install the gateway, you can launch Data Management Gateway Configuration Manager in one of the following ways:</span><span class="sxs-lookup"><span data-stu-id="28b57-343">Once you install the gateway, you can launch Data Management Gateway Configuration Manager in one of the following ways:</span></span>

1. <span data-ttu-id="28b57-344">In the **Search** window, type **Data Management Gateway** to access this utility.</span><span class="sxs-lookup"><span data-stu-id="28b57-344">In the **Search** window, type **Data Management Gateway** to access this utility.</span></span>
2. <span data-ttu-id="28b57-345">Run the executable **ConfigManager.exe** in the folder: **C:\Program Files\Microsoft Data Management Gateway\2.0\Shared**</span><span class="sxs-lookup"><span data-stu-id="28b57-345">Run the executable **ConfigManager.exe** in the folder: **C:\Program Files\Microsoft Data Management Gateway\2.0\Shared**</span></span>

### <a name="home-page"></a><span data-ttu-id="28b57-346">Home page</span><span class="sxs-lookup"><span data-stu-id="28b57-346">Home page</span></span>
<span data-ttu-id="28b57-347">The Home page allows you to do the following actions:</span><span class="sxs-lookup"><span data-stu-id="28b57-347">The Home page allows you to do the following actions:</span></span>

* <span data-ttu-id="28b57-348">View status of the gateway (connected to the cloud service etc.).</span><span class="sxs-lookup"><span data-stu-id="28b57-348">View status of the gateway (connected to the cloud service etc.).</span></span>
* <span data-ttu-id="28b57-349">**Register** using a key from the portal.</span><span class="sxs-lookup"><span data-stu-id="28b57-349">**Register** using a key from the portal.</span></span>
* <span data-ttu-id="28b57-350">**Stop** and start the **Data Management Gateway Host service** on the gateway machine.</span><span class="sxs-lookup"><span data-stu-id="28b57-350">**Stop** and start the **Data Management Gateway Host service** on the gateway machine.</span></span>
* <span data-ttu-id="28b57-351">**Schedule updates** at a specific time of the days.</span><span class="sxs-lookup"><span data-stu-id="28b57-351">**Schedule updates** at a specific time of the days.</span></span>
* <span data-ttu-id="28b57-352">View the date when the gateway was **last updated**.</span><span class="sxs-lookup"><span data-stu-id="28b57-352">View the date when the gateway was **last updated**.</span></span>

### <a name="settings-page"></a><span data-ttu-id="28b57-353">Settings page</span><span class="sxs-lookup"><span data-stu-id="28b57-353">Settings page</span></span>
<span data-ttu-id="28b57-354">The Settings page allows you to do the following actions:</span><span class="sxs-lookup"><span data-stu-id="28b57-354">The Settings page allows you to do the following actions:</span></span>

* <span data-ttu-id="28b57-355">View, change, and export **certificate** used by the gateway.</span><span class="sxs-lookup"><span data-stu-id="28b57-355">View, change, and export **certificate** used by the gateway.</span></span> <span data-ttu-id="28b57-356">This certificate is used to encrypt data source credentials.</span><span class="sxs-lookup"><span data-stu-id="28b57-356">This certificate is used to encrypt data source credentials.</span></span>
* <span data-ttu-id="28b57-357">Change **HTTPS port** for the endpoint.</span><span class="sxs-lookup"><span data-stu-id="28b57-357">Change **HTTPS port** for the endpoint.</span></span> <span data-ttu-id="28b57-358">The gateway opens a port for setting the data source credentials.</span><span class="sxs-lookup"><span data-stu-id="28b57-358">The gateway opens a port for setting the data source credentials.</span></span>
* <span data-ttu-id="28b57-359">**Status** of the endpoint</span><span class="sxs-lookup"><span data-stu-id="28b57-359">**Status** of the endpoint</span></span>
* <span data-ttu-id="28b57-360">View **SSL certificate** is used for SSL communication between portal and the gateway to set credentials for data sources.</span><span class="sxs-lookup"><span data-stu-id="28b57-360">View **SSL certificate** is used for SSL communication between portal and the gateway to set credentials for data sources.</span></span>  

### <a name="remote-access-from-intranet"></a><span data-ttu-id="28b57-361">Remote access from intranet</span><span class="sxs-lookup"><span data-stu-id="28b57-361">Remote access from intranet</span></span>  
<span data-ttu-id="28b57-362">This functionality will be enabled in the future.</span><span class="sxs-lookup"><span data-stu-id="28b57-362">This functionality will be enabled in the future.</span></span> <span data-ttu-id="28b57-363">In the upcoming updates (v3.4 or later) we will let you enable/ disable any remote connectivity that today happens using port 8050 (see section above) while using PowerShell or Credential Manager application for encrypting credentials.</span><span class="sxs-lookup"><span data-stu-id="28b57-363">In the upcoming updates (v3.4 or later) we will let you enable/ disable any remote connectivity that today happens using port 8050 (see section above) while using PowerShell or Credential Manager application for encrypting credentials.</span></span> 

### <a name="diagnostics-page"></a><span data-ttu-id="28b57-364">Diagnostics page</span><span class="sxs-lookup"><span data-stu-id="28b57-364">Diagnostics page</span></span>
<span data-ttu-id="28b57-365">The Diagnostics page allows you to do the following actions:</span><span class="sxs-lookup"><span data-stu-id="28b57-365">The Diagnostics page allows you to do the following actions:</span></span>

* <span data-ttu-id="28b57-366">Enable verbose **logging**, view logs in event viewer, and send logs to Microsoft if there was a failure.</span><span class="sxs-lookup"><span data-stu-id="28b57-366">Enable verbose **logging**, view logs in event viewer, and send logs to Microsoft if there was a failure.</span></span>
* <span data-ttu-id="28b57-367">**Test connection** to a data source.</span><span class="sxs-lookup"><span data-stu-id="28b57-367">**Test connection** to a data source.</span></span>  

### <a name="help-page"></a><span data-ttu-id="28b57-368">Help page</span><span class="sxs-lookup"><span data-stu-id="28b57-368">Help page</span></span>
<span data-ttu-id="28b57-369">The Help page displays the following information:</span><span class="sxs-lookup"><span data-stu-id="28b57-369">The Help page displays the following information:</span></span>  

* <span data-ttu-id="28b57-370">Brief description of the gateway</span><span class="sxs-lookup"><span data-stu-id="28b57-370">Brief description of the gateway</span></span>
* <span data-ttu-id="28b57-371">Version number</span><span class="sxs-lookup"><span data-stu-id="28b57-371">Version number</span></span>
* <span data-ttu-id="28b57-372">Links to online help, privacy statement, and license agreement.</span><span class="sxs-lookup"><span data-stu-id="28b57-372">Links to online help, privacy statement, and license agreement.</span></span>  

## <a name="monitor-gateway-in-the-portal"></a><span data-ttu-id="28b57-373">Monitor gateway in the portal</span><span class="sxs-lookup"><span data-stu-id="28b57-373">Monitor gateway in the portal</span></span>
<span data-ttu-id="28b57-374">In the Azure portal, you can view near-real time snapshot of resource utilization (CPU, memory, network(in/out), etc.) on a gateway machine.</span><span class="sxs-lookup"><span data-stu-id="28b57-374">In the Azure portal, you can view near-real time snapshot of resource utilization (CPU, memory, network(in/out), etc.) on a gateway machine.</span></span>  

1. <span data-ttu-id="28b57-375">In Azure portal, navigate to the home page for your data factory, and click **Linked services** tile.</span><span class="sxs-lookup"><span data-stu-id="28b57-375">In Azure portal, navigate to the home page for your data factory, and click **Linked services** tile.</span></span> 

    ![Data factory home page](./media/data-factory-data-management-gateway/monitor-data-factory-home-page.png) 
2. <span data-ttu-id="28b57-377">Select the **gateway** in the **Linked services** page.</span><span class="sxs-lookup"><span data-stu-id="28b57-377">Select the **gateway** in the **Linked services** page.</span></span>

    ![Linked services page](./media/data-factory-data-management-gateway/monitor-linked-services-blade.png)
3. <span data-ttu-id="28b57-379">In the **Gateway** page, you can see the memory and CPU usage of the gateway.</span><span class="sxs-lookup"><span data-stu-id="28b57-379">In the **Gateway** page, you can see the memory and CPU usage of the gateway.</span></span>

    ![CPU and memory usage of gateway](./media/data-factory-data-management-gateway/gateway-simple-monitoring.png) 
4. <span data-ttu-id="28b57-381">Enable **Advanced settings** to see more details such as network usage.</span><span class="sxs-lookup"><span data-stu-id="28b57-381">Enable **Advanced settings** to see more details such as network usage.</span></span>
    
    ![Advanced monitoring of gateway](./media/data-factory-data-management-gateway/gateway-advanced-monitoring.png)

<span data-ttu-id="28b57-383">The following table provides descriptions of columns in the **Gateway Nodes** list:</span><span class="sxs-lookup"><span data-stu-id="28b57-383">The following table provides descriptions of columns in the **Gateway Nodes** list:</span></span>  

<span data-ttu-id="28b57-384">Monitoring Property</span><span class="sxs-lookup"><span data-stu-id="28b57-384">Monitoring Property</span></span> | <span data-ttu-id="28b57-385">Description</span><span class="sxs-lookup"><span data-stu-id="28b57-385">Description</span></span>
:------------------ | :---------- 
<span data-ttu-id="28b57-386">Name</span><span class="sxs-lookup"><span data-stu-id="28b57-386">Name</span></span> | <span data-ttu-id="28b57-387">Name of the logical gateway and nodes associated with the gateway.</span><span class="sxs-lookup"><span data-stu-id="28b57-387">Name of the logical gateway and nodes associated with the gateway.</span></span> <span data-ttu-id="28b57-388">Node is an on-premises Windows machine that has the gateway installed on it.</span><span class="sxs-lookup"><span data-stu-id="28b57-388">Node is an on-premises Windows machine that has the gateway installed on it.</span></span> <span data-ttu-id="28b57-389">For information on having more than one node (up to four nodes) in a single logical gateway, see [Data Management Gateway - high availability and scalability](data-factory-data-management-gateway-high-availability-scalability.md).</span><span class="sxs-lookup"><span data-stu-id="28b57-389">For information on having more than one node (up to four nodes) in a single logical gateway, see [Data Management Gateway - high availability and scalability](data-factory-data-management-gateway-high-availability-scalability.md).</span></span>    
<span data-ttu-id="28b57-390">Status</span><span class="sxs-lookup"><span data-stu-id="28b57-390">Status</span></span> | <span data-ttu-id="28b57-391">Status of the logical gateway and the gateway nodes.</span><span class="sxs-lookup"><span data-stu-id="28b57-391">Status of the logical gateway and the gateway nodes.</span></span> <span data-ttu-id="28b57-392">Example: Online/Offline/Limited/etc. For information about these statuses, See [Gateway status](#gateway-status) section.</span><span class="sxs-lookup"><span data-stu-id="28b57-392">Example: Online/Offline/Limited/etc. For information about these statuses, See [Gateway status](#gateway-status) section.</span></span> 
<span data-ttu-id="28b57-393">Version</span><span class="sxs-lookup"><span data-stu-id="28b57-393">Version</span></span> | <span data-ttu-id="28b57-394">Shows the version of the logical gateway and each gateway node.</span><span class="sxs-lookup"><span data-stu-id="28b57-394">Shows the version of the logical gateway and each gateway node.</span></span> <span data-ttu-id="28b57-395">The version of the logical gateway is determined based on version of majority of nodes in the group.</span><span class="sxs-lookup"><span data-stu-id="28b57-395">The version of the logical gateway is determined based on version of majority of nodes in the group.</span></span> <span data-ttu-id="28b57-396">If there are nodes with different versions in the logical gateway setup, only the nodes with the same version number as the logical gateway function properly.</span><span class="sxs-lookup"><span data-stu-id="28b57-396">If there are nodes with different versions in the logical gateway setup, only the nodes with the same version number as the logical gateway function properly.</span></span> <span data-ttu-id="28b57-397">Others are in the limited mode and need to be manually updated (only in case auto-update fails).</span><span class="sxs-lookup"><span data-stu-id="28b57-397">Others are in the limited mode and need to be manually updated (only in case auto-update fails).</span></span> 
<span data-ttu-id="28b57-398">Available memory</span><span class="sxs-lookup"><span data-stu-id="28b57-398">Available memory</span></span> | <span data-ttu-id="28b57-399">Available memory on a gateway node.</span><span class="sxs-lookup"><span data-stu-id="28b57-399">Available memory on a gateway node.</span></span> <span data-ttu-id="28b57-400">This value is a near real-time snapshot.</span><span class="sxs-lookup"><span data-stu-id="28b57-400">This value is a near real-time snapshot.</span></span> 
<span data-ttu-id="28b57-401">CPU utilization</span><span class="sxs-lookup"><span data-stu-id="28b57-401">CPU utilization</span></span> | <span data-ttu-id="28b57-402">CPU utilization of a gateway node.</span><span class="sxs-lookup"><span data-stu-id="28b57-402">CPU utilization of a gateway node.</span></span> <span data-ttu-id="28b57-403">This value is a near real-time snapshot.</span><span class="sxs-lookup"><span data-stu-id="28b57-403">This value is a near real-time snapshot.</span></span> 
<span data-ttu-id="28b57-404">Networking (In/Out)</span><span class="sxs-lookup"><span data-stu-id="28b57-404">Networking (In/Out)</span></span> | <span data-ttu-id="28b57-405">Network utilization of a gateway node.</span><span class="sxs-lookup"><span data-stu-id="28b57-405">Network utilization of a gateway node.</span></span> <span data-ttu-id="28b57-406">This value is a near real-time snapshot.</span><span class="sxs-lookup"><span data-stu-id="28b57-406">This value is a near real-time snapshot.</span></span> 
<span data-ttu-id="28b57-407">Concurrent Jobs (Running/ Limit)</span><span class="sxs-lookup"><span data-stu-id="28b57-407">Concurrent Jobs (Running/ Limit)</span></span> | <span data-ttu-id="28b57-408">Number of jobs or tasks running on each node.</span><span class="sxs-lookup"><span data-stu-id="28b57-408">Number of jobs or tasks running on each node.</span></span> <span data-ttu-id="28b57-409">This value is a near real-time snapshot.</span><span class="sxs-lookup"><span data-stu-id="28b57-409">This value is a near real-time snapshot.</span></span> <span data-ttu-id="28b57-410">Limit signifies the maximum concurrent jobs for each node.</span><span class="sxs-lookup"><span data-stu-id="28b57-410">Limit signifies the maximum concurrent jobs for each node.</span></span> <span data-ttu-id="28b57-411">This value is defined based on the machine size.</span><span class="sxs-lookup"><span data-stu-id="28b57-411">This value is defined based on the machine size.</span></span> <span data-ttu-id="28b57-412">You can increase the limit to scale up concurrent job execution in advanced scenarios, where CPU/memory/network is under-utilized, but activities are timing out. This capability is also available with a single-node gateway (even when the scalability and availability feature is not enabled).</span><span class="sxs-lookup"><span data-stu-id="28b57-412">You can increase the limit to scale up concurrent job execution in advanced scenarios, where CPU/memory/network is under-utilized, but activities are timing out. This capability is also available with a single-node gateway (even when the scalability and availability feature is not enabled).</span></span>  
<span data-ttu-id="28b57-413">Role</span><span class="sxs-lookup"><span data-stu-id="28b57-413">Role</span></span> | <span data-ttu-id="28b57-414">There are two types of roles in a multi-node gateway - Dispatcher and worker.</span><span class="sxs-lookup"><span data-stu-id="28b57-414">There are two types of roles in a multi-node gateway - Dispatcher and worker.</span></span> <span data-ttu-id="28b57-415">All nodes are workers, which means they can all be used to execute jobs.</span><span class="sxs-lookup"><span data-stu-id="28b57-415">All nodes are workers, which means they can all be used to execute jobs.</span></span> <span data-ttu-id="28b57-416">There is only one dispatcher node, which is used to pull tasks/jobs from cloud services and dispatch them to different worker nodes (including itself).</span><span class="sxs-lookup"><span data-stu-id="28b57-416">There is only one dispatcher node, which is used to pull tasks/jobs from cloud services and dispatch them to different worker nodes (including itself).</span></span>

<span data-ttu-id="28b57-417">In this page, you see some settings that make more sense when there are two or more nodes (scale out scenario) in the gateway.</span><span class="sxs-lookup"><span data-stu-id="28b57-417">In this page, you see some settings that make more sense when there are two or more nodes (scale out scenario) in the gateway.</span></span> <span data-ttu-id="28b57-418">See [Data Management Gateway - high availability and scalability](data-factory-data-management-gateway-high-availability-scalability.md) for details about setting up a multi-node gateway.</span><span class="sxs-lookup"><span data-stu-id="28b57-418">See [Data Management Gateway - high availability and scalability](data-factory-data-management-gateway-high-availability-scalability.md) for details about setting up a multi-node gateway.</span></span>

### <a name="gateway-status"></a><span data-ttu-id="28b57-419">Gateway status</span><span class="sxs-lookup"><span data-stu-id="28b57-419">Gateway status</span></span>
<span data-ttu-id="28b57-420">The following table provides possible statuses of a **gateway node**:</span><span class="sxs-lookup"><span data-stu-id="28b57-420">The following table provides possible statuses of a **gateway node**:</span></span> 

<span data-ttu-id="28b57-421">Status</span><span class="sxs-lookup"><span data-stu-id="28b57-421">Status</span></span>  | <span data-ttu-id="28b57-422">Comments/Scenarios</span><span class="sxs-lookup"><span data-stu-id="28b57-422">Comments/Scenarios</span></span>
:------- | :------------------
<span data-ttu-id="28b57-423">Online</span><span class="sxs-lookup"><span data-stu-id="28b57-423">Online</span></span> | <span data-ttu-id="28b57-424">Node connected to Data Factory service.</span><span class="sxs-lookup"><span data-stu-id="28b57-424">Node connected to Data Factory service.</span></span>
<span data-ttu-id="28b57-425">Offline</span><span class="sxs-lookup"><span data-stu-id="28b57-425">Offline</span></span> | <span data-ttu-id="28b57-426">Node is offline.</span><span class="sxs-lookup"><span data-stu-id="28b57-426">Node is offline.</span></span>
<span data-ttu-id="28b57-427">Upgrading</span><span class="sxs-lookup"><span data-stu-id="28b57-427">Upgrading</span></span> | <span data-ttu-id="28b57-428">The node is being auto-updated.</span><span class="sxs-lookup"><span data-stu-id="28b57-428">The node is being auto-updated.</span></span>
<span data-ttu-id="28b57-429">Limited</span><span class="sxs-lookup"><span data-stu-id="28b57-429">Limited</span></span> | <span data-ttu-id="28b57-430">Due to Connectivity issue.</span><span class="sxs-lookup"><span data-stu-id="28b57-430">Due to Connectivity issue.</span></span> <span data-ttu-id="28b57-431">May be due to HTTP port 8050 issue, service bus connectivity issue, or credential sync issue.</span><span class="sxs-lookup"><span data-stu-id="28b57-431">May be due to HTTP port 8050 issue, service bus connectivity issue, or credential sync issue.</span></span> 
<span data-ttu-id="28b57-432">Inactive</span><span class="sxs-lookup"><span data-stu-id="28b57-432">Inactive</span></span> | <span data-ttu-id="28b57-433">Node is in a configuration different from the configuration of other majority nodes.</span><span class="sxs-lookup"><span data-stu-id="28b57-433">Node is in a configuration different from the configuration of other majority nodes.</span></span><br/><br/> <span data-ttu-id="28b57-434">A node can be inactive when it cannot connect to other nodes.</span><span class="sxs-lookup"><span data-stu-id="28b57-434">A node can be inactive when it cannot connect to other nodes.</span></span> 


<span data-ttu-id="28b57-435">The following table provides possible statuses of a **logical gateway**.</span><span class="sxs-lookup"><span data-stu-id="28b57-435">The following table provides possible statuses of a **logical gateway**.</span></span> <span data-ttu-id="28b57-436">The gateway status depends on statuses of the gateway nodes.</span><span class="sxs-lookup"><span data-stu-id="28b57-436">The gateway status depends on statuses of the gateway nodes.</span></span> 

<span data-ttu-id="28b57-437">Status</span><span class="sxs-lookup"><span data-stu-id="28b57-437">Status</span></span> | <span data-ttu-id="28b57-438">Comments</span><span class="sxs-lookup"><span data-stu-id="28b57-438">Comments</span></span>
:----- | :-------
<span data-ttu-id="28b57-439">Needs Registration</span><span class="sxs-lookup"><span data-stu-id="28b57-439">Needs Registration</span></span> | <span data-ttu-id="28b57-440">No node is yet registered to this logical gateway</span><span class="sxs-lookup"><span data-stu-id="28b57-440">No node is yet registered to this logical gateway</span></span>
<span data-ttu-id="28b57-441">Online</span><span class="sxs-lookup"><span data-stu-id="28b57-441">Online</span></span> | <span data-ttu-id="28b57-442">Gateway Nodes are online</span><span class="sxs-lookup"><span data-stu-id="28b57-442">Gateway Nodes are online</span></span>
<span data-ttu-id="28b57-443">Offline</span><span class="sxs-lookup"><span data-stu-id="28b57-443">Offline</span></span> | <span data-ttu-id="28b57-444">No node in online status.</span><span class="sxs-lookup"><span data-stu-id="28b57-444">No node in online status.</span></span>
<span data-ttu-id="28b57-445">Limited</span><span class="sxs-lookup"><span data-stu-id="28b57-445">Limited</span></span> | <span data-ttu-id="28b57-446">Not all nodes in this gateway are in healthy state.</span><span class="sxs-lookup"><span data-stu-id="28b57-446">Not all nodes in this gateway are in healthy state.</span></span> <span data-ttu-id="28b57-447">This status is a warning that some node might be down!</span><span class="sxs-lookup"><span data-stu-id="28b57-447">This status is a warning that some node might be down!</span></span> <br/><br/><span data-ttu-id="28b57-448">Could be due to credential sync issue on dispatcher/worker node.</span><span class="sxs-lookup"><span data-stu-id="28b57-448">Could be due to credential sync issue on dispatcher/worker node.</span></span> 

## <a name="scale-up-gateway"></a><span data-ttu-id="28b57-449">Scale up gateway</span><span class="sxs-lookup"><span data-stu-id="28b57-449">Scale up gateway</span></span>
<span data-ttu-id="28b57-450">You can configure the number of **concurrent data movement jobs** that can run on a node to scale up the capability of moving data between on-premises and cloud data stores.</span><span class="sxs-lookup"><span data-stu-id="28b57-450">You can configure the number of **concurrent data movement jobs** that can run on a node to scale up the capability of moving data between on-premises and cloud data stores.</span></span> 

<span data-ttu-id="28b57-451">When the available memory and CPU are not utilized well, but the idle capacity is 0, you should scale up by increasing the number of concurrent jobs that can run on a node.</span><span class="sxs-lookup"><span data-stu-id="28b57-451">When the available memory and CPU are not utilized well, but the idle capacity is 0, you should scale up by increasing the number of concurrent jobs that can run on a node.</span></span> <span data-ttu-id="28b57-452">You may also want to scale up when activities are timing out because the gateway is overloaded.</span><span class="sxs-lookup"><span data-stu-id="28b57-452">You may also want to scale up when activities are timing out because the gateway is overloaded.</span></span> <span data-ttu-id="28b57-453">In the advanced settings of a gateway node, you can increase the maximum capacity for a node.</span><span class="sxs-lookup"><span data-stu-id="28b57-453">In the advanced settings of a gateway node, you can increase the maximum capacity for a node.</span></span> 
  

## <a name="troubleshooting-gateway-issues"></a><span data-ttu-id="28b57-454">Troubleshooting gateway issues</span><span class="sxs-lookup"><span data-stu-id="28b57-454">Troubleshooting gateway issues</span></span>
<span data-ttu-id="28b57-455">See [Troubleshooting gateway issues](data-factory-troubleshoot-gateway-issues.md) article for information/tips for troubleshooting issues with using the data management gateway.</span><span class="sxs-lookup"><span data-stu-id="28b57-455">See [Troubleshooting gateway issues](data-factory-troubleshoot-gateway-issues.md) article for information/tips for troubleshooting issues with using the data management gateway.</span></span>  

## <a name="move-gateway-from-one-machine-to-another"></a><span data-ttu-id="28b57-456">Move gateway from one machine to another</span><span class="sxs-lookup"><span data-stu-id="28b57-456">Move gateway from one machine to another</span></span>
<span data-ttu-id="28b57-457">This section provides steps for moving gateway client from one machine to another machine.</span><span class="sxs-lookup"><span data-stu-id="28b57-457">This section provides steps for moving gateway client from one machine to another machine.</span></span>

1. <span data-ttu-id="28b57-458">In the portal, navigate to the **Data Factory home page**, and click the **Linked Services** tile.</span><span class="sxs-lookup"><span data-stu-id="28b57-458">In the portal, navigate to the **Data Factory home page**, and click the **Linked Services** tile.</span></span>

    ![Data Gateways Link](./media/data-factory-data-management-gateway/DataGatewaysLink.png)
2. <span data-ttu-id="28b57-460">Select your gateway in the **DATA GATEWAYS** section of the **Linked Services** page.</span><span class="sxs-lookup"><span data-stu-id="28b57-460">Select your gateway in the **DATA GATEWAYS** section of the **Linked Services** page.</span></span>

    ![Linked Services page with gateway selected](./media/data-factory-data-management-gateway/LinkedServiceBladeWithGateway.png)
3. <span data-ttu-id="28b57-462">In the **Data gateway** page, click **Download and install data gateway**.</span><span class="sxs-lookup"><span data-stu-id="28b57-462">In the **Data gateway** page, click **Download and install data gateway**.</span></span>

    ![Download gateway link](./media/data-factory-data-management-gateway/DownloadGatewayLink.png)
4. <span data-ttu-id="28b57-464">In the **Configure** page, click **Download and install data gateway**, and follow instructions to install the data gateway on the machine.</span><span class="sxs-lookup"><span data-stu-id="28b57-464">In the **Configure** page, click **Download and install data gateway**, and follow instructions to install the data gateway on the machine.</span></span>

    ![Configure page](./media/data-factory-data-management-gateway/ConfigureBlade.png)
5. <span data-ttu-id="28b57-466">Keep the **Microsoft Data Management Gateway Configuration Manager** open.</span><span class="sxs-lookup"><span data-stu-id="28b57-466">Keep the **Microsoft Data Management Gateway Configuration Manager** open.</span></span>

    ![Configuration Manager](./media/data-factory-data-management-gateway/ConfigurationManager.png)    
6. <span data-ttu-id="28b57-468">In the **Configure** page in the portal, click **Recreate key** on the command bar, and click **Yes** for the warning message.</span><span class="sxs-lookup"><span data-stu-id="28b57-468">In the **Configure** page in the portal, click **Recreate key** on the command bar, and click **Yes** for the warning message.</span></span> <span data-ttu-id="28b57-469">Click **copy button** next to key text that copies the key to the clipboard.</span><span class="sxs-lookup"><span data-stu-id="28b57-469">Click **copy button** next to key text that copies the key to the clipboard.</span></span> <span data-ttu-id="28b57-470">The gateway on the old machine stops functioning as soon you recreate the key.</span><span class="sxs-lookup"><span data-stu-id="28b57-470">The gateway on the old machine stops functioning as soon you recreate the key.</span></span>  

    ![Recreate key](./media/data-factory-data-management-gateway/RecreateKey.png)
7. <span data-ttu-id="28b57-472">Paste the **key** into text box in the **Register Gateway** page of the **Data Management Gateway Configuration Manager** on your machine.</span><span class="sxs-lookup"><span data-stu-id="28b57-472">Paste the **key** into text box in the **Register Gateway** page of the **Data Management Gateway Configuration Manager** on your machine.</span></span> <span data-ttu-id="28b57-473">(optional) Click **Show gateway key** check box to see the key text.</span><span class="sxs-lookup"><span data-stu-id="28b57-473">(optional) Click **Show gateway key** check box to see the key text.</span></span>

    ![Copy key and Register](./media/data-factory-data-management-gateway/CopyKeyAndRegister.png)
8. <span data-ttu-id="28b57-475">Click **Register** to register the gateway with the cloud service.</span><span class="sxs-lookup"><span data-stu-id="28b57-475">Click **Register** to register the gateway with the cloud service.</span></span>
9. <span data-ttu-id="28b57-476">On the **Settings** tab, click **Change** to select the same certificate that was used with the old gateway, enter the **password**, and click **Finish**.</span><span class="sxs-lookup"><span data-stu-id="28b57-476">On the **Settings** tab, click **Change** to select the same certificate that was used with the old gateway, enter the **password**, and click **Finish**.</span></span>

   ![Specify Certificate](./media/data-factory-data-management-gateway/SpecifyCertificate.png)

   <span data-ttu-id="28b57-478">You can export a certificate from the old gateway by doing the following steps: launch Data Management Gateway Configuration Manager on the old machine, switch to the **Certificate** tab, click **Export** button and follow the instructions.</span><span class="sxs-lookup"><span data-stu-id="28b57-478">You can export a certificate from the old gateway by doing the following steps: launch Data Management Gateway Configuration Manager on the old machine, switch to the **Certificate** tab, click **Export** button and follow the instructions.</span></span>
10. <span data-ttu-id="28b57-479">After successful registration of the gateway, you should see the **Registration** set to **Registered** and **Status** set to **Started** on the Home page of the Gateway Configuration Manager.</span><span class="sxs-lookup"><span data-stu-id="28b57-479">After successful registration of the gateway, you should see the **Registration** set to **Registered** and **Status** set to **Started** on the Home page of the Gateway Configuration Manager.</span></span>

## <a name="encrypting-credentials"></a><span data-ttu-id="28b57-480">Encrypting credentials</span><span class="sxs-lookup"><span data-stu-id="28b57-480">Encrypting credentials</span></span>
<span data-ttu-id="28b57-481">To encrypt credentials in the Data Factory Editor, do the following steps:</span><span class="sxs-lookup"><span data-stu-id="28b57-481">To encrypt credentials in the Data Factory Editor, do the following steps:</span></span>

1. <span data-ttu-id="28b57-482">Launch web browser on the **gateway machine**, navigate to [Azure portal](http://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="28b57-482">Launch web browser on the **gateway machine**, navigate to [Azure portal](http://portal.azure.com).</span></span> <span data-ttu-id="28b57-483">Search for your data factory if needed, open data factory in the **DATA FACTORY** page and then click **Author & Deploy** to launch Data Factory Editor.</span><span class="sxs-lookup"><span data-stu-id="28b57-483">Search for your data factory if needed, open data factory in the **DATA FACTORY** page and then click **Author & Deploy** to launch Data Factory Editor.</span></span>   
2. <span data-ttu-id="28b57-484">Click an existing **linked service** in the tree view to see its JSON definition or create a linked service that requires a data management gateway (for example: SQL Server or Oracle).</span><span class="sxs-lookup"><span data-stu-id="28b57-484">Click an existing **linked service** in the tree view to see its JSON definition or create a linked service that requires a data management gateway (for example: SQL Server or Oracle).</span></span>
3. <span data-ttu-id="28b57-485">In the JSON editor, for the **gatewayName** property, enter the name of the gateway.</span><span class="sxs-lookup"><span data-stu-id="28b57-485">In the JSON editor, for the **gatewayName** property, enter the name of the gateway.</span></span>
4. <span data-ttu-id="28b57-486">Enter server name for the **Data Source** property in the **connectionString**.</span><span class="sxs-lookup"><span data-stu-id="28b57-486">Enter server name for the **Data Source** property in the **connectionString**.</span></span>
5. <span data-ttu-id="28b57-487">Enter database name for the **Initial Catalog** property in the **connectionString**.</span><span class="sxs-lookup"><span data-stu-id="28b57-487">Enter database name for the **Initial Catalog** property in the **connectionString**.</span></span>    
6. <span data-ttu-id="28b57-488">Click **Encrypt** button on the command bar that launches the click-once **Credential Manager** application.</span><span class="sxs-lookup"><span data-stu-id="28b57-488">Click **Encrypt** button on the command bar that launches the click-once **Credential Manager** application.</span></span> <span data-ttu-id="28b57-489">You should see the **Setting Credentials** dialog box.</span><span class="sxs-lookup"><span data-stu-id="28b57-489">You should see the **Setting Credentials** dialog box.</span></span>

    ![Setting credentials dialog](./media/data-factory-data-management-gateway/setting-credentials-dialog.png)
7. <span data-ttu-id="28b57-491">In the **Setting Credentials** dialog box, do the following steps:</span><span class="sxs-lookup"><span data-stu-id="28b57-491">In the **Setting Credentials** dialog box, do the following steps:</span></span>
   1. <span data-ttu-id="28b57-492">Select **authentication** that you want the Data Factory service to use to connect to the database.</span><span class="sxs-lookup"><span data-stu-id="28b57-492">Select **authentication** that you want the Data Factory service to use to connect to the database.</span></span>
   2. <span data-ttu-id="28b57-493">Enter name of the user who has access to the database for the **USERNAME** setting.</span><span class="sxs-lookup"><span data-stu-id="28b57-493">Enter name of the user who has access to the database for the **USERNAME** setting.</span></span>
   3. <span data-ttu-id="28b57-494">Enter password for the user for the **PASSWORD** setting.</span><span class="sxs-lookup"><span data-stu-id="28b57-494">Enter password for the user for the **PASSWORD** setting.</span></span>  
   4. <span data-ttu-id="28b57-495">Click **OK** to encrypt credentials and close the dialog box.</span><span class="sxs-lookup"><span data-stu-id="28b57-495">Click **OK** to encrypt credentials and close the dialog box.</span></span>
8. <span data-ttu-id="28b57-496">You should see a **encryptedCredential** property in the **connectionString** now.</span><span class="sxs-lookup"><span data-stu-id="28b57-496">You should see a **encryptedCredential** property in the **connectionString** now.</span></span>

    ```JSON
    {
        "name": "SqlServerLinkedService",
        "properties": {
            "type": "OnPremisesSqlServer",
            "description": "",
            "typeProperties": {
                "connectionString": "data source=myserver;initial catalog=mydatabase;Integrated Security=False;EncryptedCredential=eyJDb25uZWN0aW9uU3R",
                "gatewayName": "adftutorialgateway"
            }
        }
    }
    ```
<span data-ttu-id="28b57-497">If you access the portal from a machine that is different from the gateway machine, you must make sure that the Credentials Manager application can connect to the gateway machine.</span><span class="sxs-lookup"><span data-stu-id="28b57-497">If you access the portal from a machine that is different from the gateway machine, you must make sure that the Credentials Manager application can connect to the gateway machine.</span></span> <span data-ttu-id="28b57-498">If the application cannot reach the gateway machine, it does not allow you to set credentials for the data source and to test connection to the data source.</span><span class="sxs-lookup"><span data-stu-id="28b57-498">If the application cannot reach the gateway machine, it does not allow you to set credentials for the data source and to test connection to the data source.</span></span>  

<span data-ttu-id="28b57-499">When you use the **Setting Credentials** application, the portal encrypts the credentials with the certificate specified in the **Certificate** tab of the **Gateway Configuration Manager** on the gateway machine.</span><span class="sxs-lookup"><span data-stu-id="28b57-499">When you use the **Setting Credentials** application, the portal encrypts the credentials with the certificate specified in the **Certificate** tab of the **Gateway Configuration Manager** on the gateway machine.</span></span>

<span data-ttu-id="28b57-500">If you are looking for an API-based approach for encrypting the credentials, you can use the [New-AzureRmDataFactoryEncryptValue](https://docs.microsoft.com/powershell/module/azurerm.datafactories/new-azurermdatafactoryencryptvalue) PowerShell cmdlet to encrypt credentials.</span><span class="sxs-lookup"><span data-stu-id="28b57-500">If you are looking for an API-based approach for encrypting the credentials, you can use the [New-AzureRmDataFactoryEncryptValue](https://docs.microsoft.com/powershell/module/azurerm.datafactories/new-azurermdatafactoryencryptvalue) PowerShell cmdlet to encrypt credentials.</span></span> <span data-ttu-id="28b57-501">The cmdlet uses the certificate that gateway is configured to use to encrypt the credentials.</span><span class="sxs-lookup"><span data-stu-id="28b57-501">The cmdlet uses the certificate that gateway is configured to use to encrypt the credentials.</span></span> <span data-ttu-id="28b57-502">You add encrypted credentials to the **EncryptedCredential** element of the **connectionString** in the JSON.</span><span class="sxs-lookup"><span data-stu-id="28b57-502">You add encrypted credentials to the **EncryptedCredential** element of the **connectionString** in the JSON.</span></span> <span data-ttu-id="28b57-503">You use the JSON with the [New-AzureRmDataFactoryLinkedService](https://docs.microsoft.com/powershell/module/azurerm.datafactories/new-azurermdatafactorylinkedservice) cmdlet or in the Data Factory Editor.</span><span class="sxs-lookup"><span data-stu-id="28b57-503">You use the JSON with the [New-AzureRmDataFactoryLinkedService](https://docs.microsoft.com/powershell/module/azurerm.datafactories/new-azurermdatafactorylinkedservice) cmdlet or in the Data Factory Editor.</span></span>

```JSON
"connectionString": "Data Source=<servername>;Initial Catalog=<databasename>;Integrated Security=True;EncryptedCredential=<encrypted credential>",
```

<span data-ttu-id="28b57-504">There is one more approach for setting credentials using Data Factory Editor.</span><span class="sxs-lookup"><span data-stu-id="28b57-504">There is one more approach for setting credentials using Data Factory Editor.</span></span> <span data-ttu-id="28b57-505">If you create a SQL Server linked service by using the editor and you enter credentials in plain text, the credentials are encrypted using a certificate that the Data Factory service owns.</span><span class="sxs-lookup"><span data-stu-id="28b57-505">If you create a SQL Server linked service by using the editor and you enter credentials in plain text, the credentials are encrypted using a certificate that the Data Factory service owns.</span></span> <span data-ttu-id="28b57-506">It does NOT use the certificate that gateway is configured to use.</span><span class="sxs-lookup"><span data-stu-id="28b57-506">It does NOT use the certificate that gateway is configured to use.</span></span> <span data-ttu-id="28b57-507">While this approach might be a little faster in some cases, it is less secure.</span><span class="sxs-lookup"><span data-stu-id="28b57-507">While this approach might be a little faster in some cases, it is less secure.</span></span> <span data-ttu-id="28b57-508">Therefore, we recommend that you follow this approach only for development/testing purposes.</span><span class="sxs-lookup"><span data-stu-id="28b57-508">Therefore, we recommend that you follow this approach only for development/testing purposes.</span></span>

## <a name="powershell-cmdlets"></a><span data-ttu-id="28b57-509">PowerShell cmdlets</span><span class="sxs-lookup"><span data-stu-id="28b57-509">PowerShell cmdlets</span></span>
<span data-ttu-id="28b57-510">This section describes how to create and register a gateway using Azure PowerShell cmdlets.</span><span class="sxs-lookup"><span data-stu-id="28b57-510">This section describes how to create and register a gateway using Azure PowerShell cmdlets.</span></span>

1. <span data-ttu-id="28b57-511">Launch **Azure PowerShell** in administrator mode.</span><span class="sxs-lookup"><span data-stu-id="28b57-511">Launch **Azure PowerShell** in administrator mode.</span></span>
2. <span data-ttu-id="28b57-512">Log in to your Azure account by running the following command and entering your Azure credentials.</span><span class="sxs-lookup"><span data-stu-id="28b57-512">Log in to your Azure account by running the following command and entering your Azure credentials.</span></span>

    ```PowerShell
    Connect-AzureRmAccount
    ```
3. <span data-ttu-id="28b57-513">Use the **New-AzureRmDataFactoryGateway** cmdlet to create a logical gateway as follows:</span><span class="sxs-lookup"><span data-stu-id="28b57-513">Use the **New-AzureRmDataFactoryGateway** cmdlet to create a logical gateway as follows:</span></span>

    ```PowerShell
    $MyDMG = New-AzureRmDataFactoryGateway -Name <gatewayName> -DataFactoryName <dataFactoryName> -ResourceGroupName ADF Description <desc>
    ```
    <span data-ttu-id="28b57-514">**Example command and output**:</span><span class="sxs-lookup"><span data-stu-id="28b57-514">**Example command and output**:</span></span>

    ```
    PS C:\> $MyDMG = New-AzureRmDataFactoryGateway -Name MyGateway -DataFactoryName $df -ResourceGroupName ADF Description gateway for walkthrough

    Name              : MyGateway
    Description       : gateway for walkthrough
    Version           :
    Status            : NeedRegistration
    VersionStatus     : None
    CreateTime        : 9/28/2014 10:58:22
    RegisterTime      :
    LastConnectTime   :
    ExpiryTime        :
    ProvisioningState : Succeeded
    Key               : ADF#00000000-0000-4fb8-a867-947877aef6cb@fda06d87-f446-43b1-9485-78af26b8bab0@4707262b-dc25-4fe5-881c-c8a7c3c569fe@wu#nfU4aBlq/heRyYFZ2Xt/CD+7i73PEO521Sj2AFOCmiI
    ```

1. <span data-ttu-id="28b57-515">In Azure PowerShell, switch to the folder: \**C:\Program Files\Microsoft Data Management Gateway\2.0\PowerShellScript\**.</span><span class="sxs-lookup"><span data-stu-id="28b57-515">In Azure PowerShell, switch to the folder: \**C:\Program Files\Microsoft Data Management Gateway\2.0\PowerShellScript\**.</span></span> <span data-ttu-id="28b57-516">Run **RegisterGateway.ps1** associated with the local variable **$Key** as shown in the following command.</span><span class="sxs-lookup"><span data-stu-id="28b57-516">Run **RegisterGateway.ps1** associated with the local variable **$Key** as shown in the following command.</span></span> <span data-ttu-id="28b57-517">This script registers the client agent installed on your machine with the logical gateway you create earlier.</span><span class="sxs-lookup"><span data-stu-id="28b57-517">This script registers the client agent installed on your machine with the logical gateway you create earlier.</span></span>

    ```PowerShell
    PS C:\> .\RegisterGateway.ps1 $MyDMG.Key
    ```
    ```
    Agent registration is successful!
    ```
    <span data-ttu-id="28b57-518">You can register the gateway on a remote machine by using the IsRegisterOnRemoteMachine parameter.</span><span class="sxs-lookup"><span data-stu-id="28b57-518">You can register the gateway on a remote machine by using the IsRegisterOnRemoteMachine parameter.</span></span> <span data-ttu-id="28b57-519">Example:</span><span class="sxs-lookup"><span data-stu-id="28b57-519">Example:</span></span>

    ```PowerShell
    .\RegisterGateway.ps1 $MyDMG.Key -IsRegisterOnRemoteMachine true
    ```
2. <span data-ttu-id="28b57-520">You can use the **Get-AzureRmDataFactoryGateway** cmdlet to get the list of Gateways in your data factory.</span><span class="sxs-lookup"><span data-stu-id="28b57-520">You can use the **Get-AzureRmDataFactoryGateway** cmdlet to get the list of Gateways in your data factory.</span></span> <span data-ttu-id="28b57-521">When the **Status** shows **online**, it means your gateway is ready to use.</span><span class="sxs-lookup"><span data-stu-id="28b57-521">When the **Status** shows **online**, it means your gateway is ready to use.</span></span>

    ```PowerShell        
    Get-AzureRmDataFactoryGateway -DataFactoryName <dataFactoryName> -ResourceGroupName ADF
    ```
<span data-ttu-id="28b57-522">You can remove a gateway using the **Remove-AzureRmDataFactoryGateway** cmdlet and update description for a gateway using the **Set-AzureRmDataFactoryGateway** cmdlets.</span><span class="sxs-lookup"><span data-stu-id="28b57-522">You can remove a gateway using the **Remove-AzureRmDataFactoryGateway** cmdlet and update description for a gateway using the **Set-AzureRmDataFactoryGateway** cmdlets.</span></span> <span data-ttu-id="28b57-523">For syntax and other details about these cmdlets, see Data Factory Cmdlet Reference.</span><span class="sxs-lookup"><span data-stu-id="28b57-523">For syntax and other details about these cmdlets, see Data Factory Cmdlet Reference.</span></span>  

### <a name="list-gateways-using-powershell"></a><span data-ttu-id="28b57-524">List gateways using PowerShell</span><span class="sxs-lookup"><span data-stu-id="28b57-524">List gateways using PowerShell</span></span>

```PowerShell
Get-AzureRmDataFactoryGateway -DataFactoryName jasoncopyusingstoredprocedure -ResourceGroupName ADF_ResourceGroup
```

### <a name="remove-gateway-using-powershell"></a><span data-ttu-id="28b57-525">Remove gateway using PowerShell</span><span class="sxs-lookup"><span data-stu-id="28b57-525">Remove gateway using PowerShell</span></span>

```PowerShell
Remove-AzureRmDataFactoryGateway -Name JasonHDMG_byPSRemote -ResourceGroupName ADF_ResourceGroup -DataFactoryName jasoncopyusingstoredprocedure -Force
```


## <a name="next-steps"></a><span data-ttu-id="28b57-526">Next steps</span><span class="sxs-lookup"><span data-stu-id="28b57-526">Next steps</span></span>
* <span data-ttu-id="28b57-527">See [Move data between on-premises and cloud data stores](data-factory-move-data-between-onprem-and-cloud.md) article.</span><span class="sxs-lookup"><span data-stu-id="28b57-527">See [Move data between on-premises and cloud data stores](data-factory-move-data-between-onprem-and-cloud.md) article.</span></span> <span data-ttu-id="28b57-528">In the walkthrough, you create a pipeline that uses the gateway to move data from an on-premises SQL Server database to an Azure blob.</span><span class="sxs-lookup"><span data-stu-id="28b57-528">In the walkthrough, you create a pipeline that uses the gateway to move data from an on-premises SQL Server database to an Azure blob.</span></span>  
