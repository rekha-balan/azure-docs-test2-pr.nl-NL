---
title: Compute environments supported by Azure Data Factory | Microsoft Docs
description: Learn about compute environments that you can use in Azure Data Factory pipelines (such as Azure HDInsight) to transform or process data.
services: data-factory
documentationcenter: ''
author: sharonlo101
manager: craigg
ms.assetid: 6877a7e8-1a58-4cfb-bbd3-252ac72e4145
ms.service: data-factory
ms.workload: data-services
ms.tgt_pltfrm: na
ms.topic: conceptual
ms.date: 01/10/2018
ms.author: shlo
robots: noindex
ms.openlocfilehash: 59631ee0115c817da1b0588c1ad37d2f8b34db67
ms.sourcegitcommit: d1451406a010fd3aa854dc8e5b77dc5537d8050e
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 09/13/2018
ms.locfileid: "44857258"
---
# <a name="compute-environments-supported-by-azure-data-factory"></a><span data-ttu-id="45eae-103">Compute environments supported by Azure Data Factory</span><span class="sxs-lookup"><span data-stu-id="45eae-103">Compute environments supported by Azure Data Factory</span></span>
> [!NOTE]
> <span data-ttu-id="45eae-104">This article applies to version 1 of Azure Data Factory.</span><span class="sxs-lookup"><span data-stu-id="45eae-104">This article applies to version 1 of Azure Data Factory.</span></span> <span data-ttu-id="45eae-105">If you are using the current version of the Data Factory service, see [Compute linked services in](../compute-linked-services.md).</span><span class="sxs-lookup"><span data-stu-id="45eae-105">If you are using the current version of the Data Factory service, see [Compute linked services in](../compute-linked-services.md).</span></span>

<span data-ttu-id="45eae-106">This article explains the compute environments that you can use to process or transform data.</span><span class="sxs-lookup"><span data-stu-id="45eae-106">This article explains the compute environments that you can use to process or transform data.</span></span> <span data-ttu-id="45eae-107">It also provides details about different configurations (on-demand versus bring-your-own) that Data Factory supports when you configure linked services that link these compute environments to an Azure data factory.</span><span class="sxs-lookup"><span data-stu-id="45eae-107">It also provides details about different configurations (on-demand versus bring-your-own) that Data Factory supports when you configure linked services that link these compute environments to an Azure data factory.</span></span>

<span data-ttu-id="45eae-108">The following table provides a list of compute environments that are supported by Data Factory, and the activities that can run on them.</span><span class="sxs-lookup"><span data-stu-id="45eae-108">The following table provides a list of compute environments that are supported by Data Factory, and the activities that can run on them.</span></span> 

| <span data-ttu-id="45eae-109">Compute environment</span><span class="sxs-lookup"><span data-stu-id="45eae-109">Compute environment</span></span>                      | <span data-ttu-id="45eae-110">Activities</span><span class="sxs-lookup"><span data-stu-id="45eae-110">Activities</span></span>                               |
| ---------------------------------------- | ---------------------------------------- |
| <span data-ttu-id="45eae-111">[On-demand Azure HDInsight cluster](#azure-hdinsight-on-demand-linked-service) or [your own HDInsight cluster](#azure-hdinsight-linked-service)</span><span class="sxs-lookup"><span data-stu-id="45eae-111">[On-demand Azure HDInsight cluster](#azure-hdinsight-on-demand-linked-service) or [your own HDInsight cluster](#azure-hdinsight-linked-service)</span></span> | <span data-ttu-id="45eae-112">[DotNet](data-factory-use-custom-activities.md), [Hive](data-factory-hive-activity.md), [Pig](data-factory-pig-activity.md), [MapReduce](data-factory-map-reduce.md), [Hadoop Streaming](data-factory-hadoop-streaming-activity.md)</span><span class="sxs-lookup"><span data-stu-id="45eae-112">[DotNet](data-factory-use-custom-activities.md), [Hive](data-factory-hive-activity.md), [Pig](data-factory-pig-activity.md), [MapReduce](data-factory-map-reduce.md), [Hadoop Streaming](data-factory-hadoop-streaming-activity.md)</span></span> |
| [<span data-ttu-id="45eae-113">Azure Batch</span><span class="sxs-lookup"><span data-stu-id="45eae-113">Azure Batch</span></span>](#azure-batch-linked-service) | [<span data-ttu-id="45eae-114">DotNet</span><span class="sxs-lookup"><span data-stu-id="45eae-114">DotNet</span></span>](data-factory-use-custom-activities.md) |
| [<span data-ttu-id="45eae-115">Azure Machine Learning</span><span class="sxs-lookup"><span data-stu-id="45eae-115">Azure Machine Learning</span></span>](#azure-machine-learning-linked-service) | [<span data-ttu-id="45eae-116">Machine Learning activities: Batch Execution and Update Resource</span><span class="sxs-lookup"><span data-stu-id="45eae-116">Machine Learning activities: Batch Execution and Update Resource</span></span>](data-factory-azure-ml-batch-execution-activity.md) |
| [<span data-ttu-id="45eae-117">Azure Data Lake Analytics</span><span class="sxs-lookup"><span data-stu-id="45eae-117">Azure Data Lake Analytics</span></span>](#azure-data-lake-analytics-linked-service) | [<span data-ttu-id="45eae-118">Data Lake Analytics U-SQL</span><span class="sxs-lookup"><span data-stu-id="45eae-118">Data Lake Analytics U-SQL</span></span>](data-factory-usql-activity.md) |
| <span data-ttu-id="45eae-119">[Azure SQL](#azure-sql-linked-service), [Azure SQL Data Warehouse](#azure-sql-data-warehouse-linked-service), [SQL Server](#sql-server-linked-service)</span><span class="sxs-lookup"><span data-stu-id="45eae-119">[Azure SQL](#azure-sql-linked-service), [Azure SQL Data Warehouse](#azure-sql-data-warehouse-linked-service), [SQL Server](#sql-server-linked-service)</span></span> | [<span data-ttu-id="45eae-120">Stored Procedure Activity</span><span class="sxs-lookup"><span data-stu-id="45eae-120">Stored Procedure Activity</span></span>](data-factory-stored-proc-activity.md) |

## <a name="supported-hdinsight-versions-in-azure-data-factory"></a><span data-ttu-id="45eae-121">HDInsight versions supported in Data Factory</span><span class="sxs-lookup"><span data-stu-id="45eae-121">HDInsight versions supported in Data Factory</span></span>
<span data-ttu-id="45eae-122">Azure HDInsight supports multiple Hadoop cluster versions that you can deploy at any time.</span><span class="sxs-lookup"><span data-stu-id="45eae-122">Azure HDInsight supports multiple Hadoop cluster versions that you can deploy at any time.</span></span> <span data-ttu-id="45eae-123">Each supported version creates a specific version of the Hortonworks Data Platform (HDP) distribution and a set of components in the distribution.</span><span class="sxs-lookup"><span data-stu-id="45eae-123">Each supported version creates a specific version of the Hortonworks Data Platform (HDP) distribution and a set of components in the distribution.</span></span> 

<span data-ttu-id="45eae-124">Microsoft updates the list of supported HDInsight versions  with the latest Hadoop ecosystem components and fixes.</span><span class="sxs-lookup"><span data-stu-id="45eae-124">Microsoft updates the list of supported HDInsight versions  with the latest Hadoop ecosystem components and fixes.</span></span> <span data-ttu-id="45eae-125">For detailed information, see [Supported HDInsight versions](../../hdinsight/hdinsight-component-versioning.md#supported-hdinsight-versions).</span><span class="sxs-lookup"><span data-stu-id="45eae-125">For detailed information, see [Supported HDInsight versions](../../hdinsight/hdinsight-component-versioning.md#supported-hdinsight-versions).</span></span>

> [!IMPORTANT]
> <span data-ttu-id="45eae-126">Linux-based HDInsight version 3.3 was retired July 31, 2017.</span><span class="sxs-lookup"><span data-stu-id="45eae-126">Linux-based HDInsight version 3.3 was retired July 31, 2017.</span></span> <span data-ttu-id="45eae-127">Data Factory version 1 on-demand HDInsight linked services customers were given until December 15, 2017, to test and upgrade to a later version of HDInsight.</span><span class="sxs-lookup"><span data-stu-id="45eae-127">Data Factory version 1 on-demand HDInsight linked services customers were given until December 15, 2017, to test and upgrade to a later version of HDInsight.</span></span> <span data-ttu-id="45eae-128">Windows-based HDInsight will be retired July 31, 2018.</span><span class="sxs-lookup"><span data-stu-id="45eae-128">Windows-based HDInsight will be retired July 31, 2018.</span></span>
>
> 

### <a name="after-the-retirement-date"></a><span data-ttu-id="45eae-129">After the retirement date</span><span class="sxs-lookup"><span data-stu-id="45eae-129">After the retirement date</span></span> 

<span data-ttu-id="45eae-130">After December 15, 2017:</span><span class="sxs-lookup"><span data-stu-id="45eae-130">After December 15, 2017:</span></span>

- <span data-ttu-id="45eae-131">You can no longer create Linux-based HDInsight version 3.3 (or earlier versions) clusters by using an on-demand HDInsight linked service in Data Factory version 1.</span><span class="sxs-lookup"><span data-stu-id="45eae-131">You can no longer create Linux-based HDInsight version 3.3 (or earlier versions) clusters by using an on-demand HDInsight linked service in Data Factory version 1.</span></span> 
- <span data-ttu-id="45eae-132">If the  [**osType** and **Version** properties](https://docs.microsoft.com/azure/data-factory/v1/data-factory-compute-linked-services#azure-hdinsight-on-demand-linked-service) are not explicitly specified in the JSON definition for an existing Data Factory version 1 on-demand HDInsight linked service, the default value is changed from **Version=3.1, osType=Windows** to **Version=\<latest HDI default version\>(https://docs.microsoft.com/azure/hdinsight/hdinsight-component-versioning#hadoop-components-available-with-different-hdinsight-versions), osType=Linux**.</span><span class="sxs-lookup"><span data-stu-id="45eae-132">If the  [**osType** and **Version** properties](https://docs.microsoft.com/azure/data-factory/v1/data-factory-compute-linked-services#azure-hdinsight-on-demand-linked-service) are not explicitly specified in the JSON definition for an existing Data Factory version 1 on-demand HDInsight linked service, the default value is changed from **Version=3.1, osType=Windows** to **Version=\<latest HDI default version\>(https://docs.microsoft.com/azure/hdinsight/hdinsight-component-versioning#hadoop-components-available-with-different-hdinsight-versions), osType=Linux**.</span></span>

<span data-ttu-id="45eae-133">After July 31, 2018:</span><span class="sxs-lookup"><span data-stu-id="45eae-133">After July 31, 2018:</span></span>

- <span data-ttu-id="45eae-134">You can no longer create any version of Windows-based HDInsight clusters by using an on-demand HDInsight linked service in Data Factory version 1.</span><span class="sxs-lookup"><span data-stu-id="45eae-134">You can no longer create any version of Windows-based HDInsight clusters by using an on-demand HDInsight linked service in Data Factory version 1.</span></span> 

### <a name="recommended-actions"></a><span data-ttu-id="45eae-135">Recommended actions</span><span class="sxs-lookup"><span data-stu-id="45eae-135">Recommended actions</span></span> 

- <span data-ttu-id="45eae-136">To ensure that you can use the latest Hadoop ecosystem components and fixes, update the [**osType** and **Version** properties](https://docs.microsoft.com/azure/data-factory/v1/data-factory-compute-linked-services#azure-hdinsight-on-demand-linked-service) of affected Data Factory version 1 on-demand HDInsight linked service definitions to newer Linux-based HDInsight versions (HDInsight 3.6).</span><span class="sxs-lookup"><span data-stu-id="45eae-136">To ensure that you can use the latest Hadoop ecosystem components and fixes, update the [**osType** and **Version** properties](https://docs.microsoft.com/azure/data-factory/v1/data-factory-compute-linked-services#azure-hdinsight-on-demand-linked-service) of affected Data Factory version 1 on-demand HDInsight linked service definitions to newer Linux-based HDInsight versions (HDInsight 3.6).</span></span> 
- <span data-ttu-id="45eae-137">Before December 15, 2017, test Data Factory version 1 Hive, Pig, MapReduce, and Hadoop streaming activities that reference the affected linked service.</span><span class="sxs-lookup"><span data-stu-id="45eae-137">Before December 15, 2017, test Data Factory version 1 Hive, Pig, MapReduce, and Hadoop streaming activities that reference the affected linked service.</span></span> <span data-ttu-id="45eae-138">Ensure that they are compatible with the new **osType** and **Version** default values (**Version=3.6**, **osType=Linux**) or the explicit HDInsight version and OS type that you are upgrading to.</span><span class="sxs-lookup"><span data-stu-id="45eae-138">Ensure that they are compatible with the new **osType** and **Version** default values (**Version=3.6**, **osType=Linux**) or the explicit HDInsight version and OS type that you are upgrading to.</span></span> 
  <span data-ttu-id="45eae-139">To learn more about compatibility, see [Migrate from a Windows-based HDInsight cluster to a Linux-based cluster](https://docs.microsoft.com/azure/hdinsight/hdinsight-migrate-from-windows-to-linux) and [What are the Hadoop components and versions available with HDInsight?](https://docs.microsoft.com/azure/hdinsight/hdinsight-component-versioning#hortonworks-release-notes-associated-with-hdinsight-versions).</span><span class="sxs-lookup"><span data-stu-id="45eae-139">To learn more about compatibility, see [Migrate from a Windows-based HDInsight cluster to a Linux-based cluster](https://docs.microsoft.com/azure/hdinsight/hdinsight-migrate-from-windows-to-linux) and [What are the Hadoop components and versions available with HDInsight?](https://docs.microsoft.com/azure/hdinsight/hdinsight-component-versioning#hortonworks-release-notes-associated-with-hdinsight-versions).</span></span> 
- <span data-ttu-id="45eae-140">To continue using a Data Factory version 1 on-demand HDInsight linked service to create Windows-based HDInsight clusters, explicitly set **osType** to **Windows** before December 15, 2017.</span><span class="sxs-lookup"><span data-stu-id="45eae-140">To continue using a Data Factory version 1 on-demand HDInsight linked service to create Windows-based HDInsight clusters, explicitly set **osType** to **Windows** before December 15, 2017.</span></span> <span data-ttu-id="45eae-141">We recommend that you migrate to Linux-based HDInsight clusters before July 31, 2018.</span><span class="sxs-lookup"><span data-stu-id="45eae-141">We recommend that you migrate to Linux-based HDInsight clusters before July 31, 2018.</span></span> 
- <span data-ttu-id="45eae-142">If you are using an on-demand HDInsight linked service to execute Data Factory version 1 DotNet Custom Activity, update the DotNet Custom Activity JSON definition to instead use an Azure Batch linked service.</span><span class="sxs-lookup"><span data-stu-id="45eae-142">If you are using an on-demand HDInsight linked service to execute Data Factory version 1 DotNet Custom Activity, update the DotNet Custom Activity JSON definition to instead use an Azure Batch linked service.</span></span> <span data-ttu-id="45eae-143">For more information, see [Use custom activities in a Data Factory pipeline](https://docs.microsoft.com/azure/data-factory/v1/data-factory-use-custom-activities).</span><span class="sxs-lookup"><span data-stu-id="45eae-143">For more information, see [Use custom activities in a Data Factory pipeline](https://docs.microsoft.com/azure/data-factory/v1/data-factory-use-custom-activities).</span></span> 

> [!Note]
> <span data-ttu-id="45eae-144">If you use your existing, bring-your-own cluster HDInsight linked device in Data Factory version 1 or a bring-your-own and on-demand HDInsight linked service in Azure Data Factory, no action is required.</span><span class="sxs-lookup"><span data-stu-id="45eae-144">If you use your existing, bring-your-own cluster HDInsight linked device in Data Factory version 1 or a bring-your-own and on-demand HDInsight linked service in Azure Data Factory, no action is required.</span></span> <span data-ttu-id="45eae-145">In those scenarios, the latest version support policy of HDInsight clusters is already enforced.</span><span class="sxs-lookup"><span data-stu-id="45eae-145">In those scenarios, the latest version support policy of HDInsight clusters is already enforced.</span></span> 
>
> 


## <a name="on-demand-compute-environment"></a><span data-ttu-id="45eae-146">On-demand compute environment</span><span class="sxs-lookup"><span data-stu-id="45eae-146">On-demand compute environment</span></span>
<span data-ttu-id="45eae-147">In an on-demand configuration, Data Factory fully manages the compute environment.</span><span class="sxs-lookup"><span data-stu-id="45eae-147">In an on-demand configuration, Data Factory fully manages the compute environment.</span></span> <span data-ttu-id="45eae-148">Data Factory automatically creates the compute environment before a job is submitted for processing data.</span><span class="sxs-lookup"><span data-stu-id="45eae-148">Data Factory automatically creates the compute environment before a job is submitted for processing data.</span></span> <span data-ttu-id="45eae-149">When the job is finished, Data Factory removes the compute environment.</span><span class="sxs-lookup"><span data-stu-id="45eae-149">When the job is finished, Data Factory removes the compute environment.</span></span> 

<span data-ttu-id="45eae-150">You can create a linked service for an on-demand compute environment.</span><span class="sxs-lookup"><span data-stu-id="45eae-150">You can create a linked service for an on-demand compute environment.</span></span> <span data-ttu-id="45eae-151">Use the linked service to configure the compute environment, and to control granular settings for job execution, cluster management, and bootstrapping actions.</span><span class="sxs-lookup"><span data-stu-id="45eae-151">Use the linked service to configure the compute environment, and to control granular settings for job execution, cluster management, and bootstrapping actions.</span></span>

> [!NOTE]
> <span data-ttu-id="45eae-152">Currently, the on-demand configuration is supported only for HDInsight clusters.</span><span class="sxs-lookup"><span data-stu-id="45eae-152">Currently, the on-demand configuration is supported only for HDInsight clusters.</span></span>
> 

## <a name="azure-hdinsight-on-demand-linked-service"></a><span data-ttu-id="45eae-153">Azure HDInsight on-demand linked service</span><span class="sxs-lookup"><span data-stu-id="45eae-153">Azure HDInsight on-demand linked service</span></span>
<span data-ttu-id="45eae-154">Data Factory can automatically create a Windows-based or Linux-based on-demand HDInsight cluster for processing data.</span><span class="sxs-lookup"><span data-stu-id="45eae-154">Data Factory can automatically create a Windows-based or Linux-based on-demand HDInsight cluster for processing data.</span></span> <span data-ttu-id="45eae-155">The cluster is created in the same region as the storage account that's associated with the cluster.</span><span class="sxs-lookup"><span data-stu-id="45eae-155">The cluster is created in the same region as the storage account that's associated with the cluster.</span></span> <span data-ttu-id="45eae-156">Use the JSON **linkedServiceName** property to create the cluster.</span><span class="sxs-lookup"><span data-stu-id="45eae-156">Use the JSON **linkedServiceName** property to create the cluster.</span></span>

<span data-ttu-id="45eae-157">Note the following *key* points about on-demand HDInsight linked service:</span><span class="sxs-lookup"><span data-stu-id="45eae-157">Note the following *key* points about on-demand HDInsight linked service:</span></span>

* <span data-ttu-id="45eae-158">The on-demand HDInsight cluster doesn't appear in your Azure subscription.</span><span class="sxs-lookup"><span data-stu-id="45eae-158">The on-demand HDInsight cluster doesn't appear in your Azure subscription.</span></span> <span data-ttu-id="45eae-159">The Data Factory service manages the on-demand HDInsight cluster on your behalf.</span><span class="sxs-lookup"><span data-stu-id="45eae-159">The Data Factory service manages the on-demand HDInsight cluster on your behalf.</span></span>
* <span data-ttu-id="45eae-160">The logs for jobs that are run on an on-demand HDInsight cluster are copied to the storage account that's associated with the HDInsight cluster.</span><span class="sxs-lookup"><span data-stu-id="45eae-160">The logs for jobs that are run on an on-demand HDInsight cluster are copied to the storage account that's associated with the HDInsight cluster.</span></span> <span data-ttu-id="45eae-161">To access these logs, in the Azure portal, go to the **Activity Run Details** pane.</span><span class="sxs-lookup"><span data-stu-id="45eae-161">To access these logs, in the Azure portal, go to the **Activity Run Details** pane.</span></span> <span data-ttu-id="45eae-162">For more information, see [Monitor and manage pipelines](data-factory-monitor-manage-pipelines.md).</span><span class="sxs-lookup"><span data-stu-id="45eae-162">For more information, see [Monitor and manage pipelines](data-factory-monitor-manage-pipelines.md).</span></span>
* <span data-ttu-id="45eae-163">You are charged only for the time that the HDInsight cluster is up and running jobs.</span><span class="sxs-lookup"><span data-stu-id="45eae-163">You are charged only for the time that the HDInsight cluster is up and running jobs.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="45eae-164">It typically takes *20 minutes* or more to provision an on-demand HDInsight cluster.</span><span class="sxs-lookup"><span data-stu-id="45eae-164">It typically takes *20 minutes* or more to provision an on-demand HDInsight cluster.</span></span>
>
> 

### <a name="example"></a><span data-ttu-id="45eae-165">Example</span><span class="sxs-lookup"><span data-stu-id="45eae-165">Example</span></span>
<span data-ttu-id="45eae-166">The following JSON defines a Linux-based on-demand HDInsight linked service.</span><span class="sxs-lookup"><span data-stu-id="45eae-166">The following JSON defines a Linux-based on-demand HDInsight linked service.</span></span> <span data-ttu-id="45eae-167">Data Factory automatically creates a *Linux-based* HDInsight cluster when it processes a data slice.</span><span class="sxs-lookup"><span data-stu-id="45eae-167">Data Factory automatically creates a *Linux-based* HDInsight cluster when it processes a data slice.</span></span> 

```json
{
    "name": "HDInsightOnDemandLinkedService",
    "properties": {
        "type": "HDInsightOnDemand",
        "typeProperties": {
            "version": "3.6",
            "osType": "Linux",
            "clusterSize": 1,
            "timeToLive": "00:05:00",            
            "linkedServiceName": "AzureStorageLinkedService"
        }
    }
}
```

> [!IMPORTANT]
> <span data-ttu-id="45eae-168">The HDInsight cluster creates a *default container* in the Azure Blob storage that you specify in the JSON **linkedServiceName** property.</span><span class="sxs-lookup"><span data-stu-id="45eae-168">The HDInsight cluster creates a *default container* in the Azure Blob storage that you specify in the JSON **linkedServiceName** property.</span></span> <span data-ttu-id="45eae-169">By design, HDInsight doesn't delete this container when the cluster is deleted.</span><span class="sxs-lookup"><span data-stu-id="45eae-169">By design, HDInsight doesn't delete this container when the cluster is deleted.</span></span> <span data-ttu-id="45eae-170">In an on-demand HDInsight linked service, an HDInsight cluster is created every time a slice needs to be processed, unless there's an existing live cluster (**timeToLive**).</span><span class="sxs-lookup"><span data-stu-id="45eae-170">In an on-demand HDInsight linked service, an HDInsight cluster is created every time a slice needs to be processed, unless there's an existing live cluster (**timeToLive**).</span></span> <span data-ttu-id="45eae-171">The cluster is deleted when processing is finished.</span><span class="sxs-lookup"><span data-stu-id="45eae-171">The cluster is deleted when processing is finished.</span></span> 
>
> <span data-ttu-id="45eae-172">As more slices are processed, you see many containers in your Blob storage.</span><span class="sxs-lookup"><span data-stu-id="45eae-172">As more slices are processed, you see many containers in your Blob storage.</span></span> <span data-ttu-id="45eae-173">If you don't need the containers for troubleshooting jobs, you might want to delete the containers to reduce the storage cost.</span><span class="sxs-lookup"><span data-stu-id="45eae-173">If you don't need the containers for troubleshooting jobs, you might want to delete the containers to reduce the storage cost.</span></span> <span data-ttu-id="45eae-174">The names of these containers follow a pattern: `adf<your Data Factory name>-<linked service name>-<date and time>`.</span><span class="sxs-lookup"><span data-stu-id="45eae-174">The names of these containers follow a pattern: `adf<your Data Factory name>-<linked service name>-<date and time>`.</span></span> <span data-ttu-id="45eae-175">You can use a tool like [Microsoft Storage Explorer](http://storageexplorer.com/) to delete containers in Blob storage.</span><span class="sxs-lookup"><span data-stu-id="45eae-175">You can use a tool like [Microsoft Storage Explorer](http://storageexplorer.com/) to delete containers in Blob storage.</span></span>
>
> 

### <a name="properties"></a><span data-ttu-id="45eae-176">Properties</span><span class="sxs-lookup"><span data-stu-id="45eae-176">Properties</span></span>
| <span data-ttu-id="45eae-177">Property</span><span class="sxs-lookup"><span data-stu-id="45eae-177">Property</span></span>                     | <span data-ttu-id="45eae-178">Description</span><span class="sxs-lookup"><span data-stu-id="45eae-178">Description</span></span>                              | <span data-ttu-id="45eae-179">Required</span><span class="sxs-lookup"><span data-stu-id="45eae-179">Required</span></span> |
| ---------------------------- | ---------------------------------------- | -------- |
| <span data-ttu-id="45eae-180">type</span><span class="sxs-lookup"><span data-stu-id="45eae-180">type</span></span>                         | <span data-ttu-id="45eae-181">Set the type property to **HDInsightOnDemand**.</span><span class="sxs-lookup"><span data-stu-id="45eae-181">Set the type property to **HDInsightOnDemand**.</span></span> | <span data-ttu-id="45eae-182">Yes</span><span class="sxs-lookup"><span data-stu-id="45eae-182">Yes</span></span>      |
| <span data-ttu-id="45eae-183">clusterSize</span><span class="sxs-lookup"><span data-stu-id="45eae-183">clusterSize</span></span>                  | <span data-ttu-id="45eae-184">The number of worker and data nodes in the cluster.</span><span class="sxs-lookup"><span data-stu-id="45eae-184">The number of worker and data nodes in the cluster.</span></span> <span data-ttu-id="45eae-185">The HDInsight cluster is created with 2 head nodes, in addition to the number of worker nodes that you specify for this property.</span><span class="sxs-lookup"><span data-stu-id="45eae-185">The HDInsight cluster is created with 2 head nodes, in addition to the number of worker nodes that you specify for this property.</span></span> <span data-ttu-id="45eae-186">The nodes are of size Standard_D3, which has 4 cores.</span><span class="sxs-lookup"><span data-stu-id="45eae-186">The nodes are of size Standard_D3, which has 4 cores.</span></span> <span data-ttu-id="45eae-187">A 4-worker node cluster takes 24 cores (4\*4 = 16 cores for worker nodes, plus 2\*4 = 8 cores for head nodes).</span><span class="sxs-lookup"><span data-stu-id="45eae-187">A 4-worker node cluster takes 24 cores (4\*4 = 16 cores for worker nodes, plus 2\*4 = 8 cores for head nodes).</span></span> <span data-ttu-id="45eae-188">For details about the Standard_D3 tier, see [Create Linux-based Hadoop clusters in HDInsight](../../hdinsight/hdinsight-hadoop-provision-linux-clusters.md).</span><span class="sxs-lookup"><span data-stu-id="45eae-188">For details about the Standard_D3 tier, see [Create Linux-based Hadoop clusters in HDInsight](../../hdinsight/hdinsight-hadoop-provision-linux-clusters.md).</span></span> | <span data-ttu-id="45eae-189">Yes</span><span class="sxs-lookup"><span data-stu-id="45eae-189">Yes</span></span>      |
| <span data-ttu-id="45eae-190">timeToLive</span><span class="sxs-lookup"><span data-stu-id="45eae-190">timeToLive</span></span>                   | <span data-ttu-id="45eae-191">The allowed idle time for the on-demand HDInsight cluster.</span><span class="sxs-lookup"><span data-stu-id="45eae-191">The allowed idle time for the on-demand HDInsight cluster.</span></span> <span data-ttu-id="45eae-192">Specifies how long the on-demand HDInsight cluster stays alive when an activity run is finished, if there are no other active jobs in the cluster.</span><span class="sxs-lookup"><span data-stu-id="45eae-192">Specifies how long the on-demand HDInsight cluster stays alive when an activity run is finished, if there are no other active jobs in the cluster.</span></span><br /><br /><span data-ttu-id="45eae-193">For example, if an activity run takes 6 minutes and **timeToLive** is set to 5 minutes, the cluster stays alive for 5 minutes after the 6 minutes of processing the activity run.</span><span class="sxs-lookup"><span data-stu-id="45eae-193">For example, if an activity run takes 6 minutes and **timeToLive** is set to 5 minutes, the cluster stays alive for 5 minutes after the 6 minutes of processing the activity run.</span></span> <span data-ttu-id="45eae-194">If another activity run is executed in the 6-minute window, it's processed by the same cluster.</span><span class="sxs-lookup"><span data-stu-id="45eae-194">If another activity run is executed in the 6-minute window, it's processed by the same cluster.</span></span><br /><br /><span data-ttu-id="45eae-195">Creating an on-demand HDInsight cluster is an expensive operation (it might take a while).</span><span class="sxs-lookup"><span data-stu-id="45eae-195">Creating an on-demand HDInsight cluster is an expensive operation (it might take a while).</span></span> <span data-ttu-id="45eae-196">Use this setting as needed to improve performance of a data factory by reusing an on-demand HDInsight cluster.</span><span class="sxs-lookup"><span data-stu-id="45eae-196">Use this setting as needed to improve performance of a data factory by reusing an on-demand HDInsight cluster.</span></span><br /><br /><span data-ttu-id="45eae-197">If you set the **timeToLive** value to **0**, the cluster is deleted as soon as the activity run finishes.</span><span class="sxs-lookup"><span data-stu-id="45eae-197">If you set the **timeToLive** value to **0**, the cluster is deleted as soon as the activity run finishes.</span></span> <span data-ttu-id="45eae-198">However, if you set a high value, the cluster might stay idle, unnecessarily resulting in high costs.</span><span class="sxs-lookup"><span data-stu-id="45eae-198">However, if you set a high value, the cluster might stay idle, unnecessarily resulting in high costs.</span></span> <span data-ttu-id="45eae-199">It's important to set the appropriate value based on your needs.</span><span class="sxs-lookup"><span data-stu-id="45eae-199">It's important to set the appropriate value based on your needs.</span></span><br /><br /><span data-ttu-id="45eae-200">If the **timeToLive** value is appropriately set, multiple pipelines can share the instance of the on-demand HDInsight cluster.</span><span class="sxs-lookup"><span data-stu-id="45eae-200">If the **timeToLive** value is appropriately set, multiple pipelines can share the instance of the on-demand HDInsight cluster.</span></span> | <span data-ttu-id="45eae-201">Yes</span><span class="sxs-lookup"><span data-stu-id="45eae-201">Yes</span></span>      |
| <span data-ttu-id="45eae-202">version</span><span class="sxs-lookup"><span data-stu-id="45eae-202">version</span></span>                      | <span data-ttu-id="45eae-203">The version of the HDInsight cluster.</span><span class="sxs-lookup"><span data-stu-id="45eae-203">The version of the HDInsight cluster.</span></span> <span data-ttu-id="45eae-204">For allowed HDInsight versions, see [Supported HDInsight versions](https://docs.microsoft.com/azure/hdinsight/hdinsight-component-versioning#supported-hdinsight-versions).</span><span class="sxs-lookup"><span data-stu-id="45eae-204">For allowed HDInsight versions, see [Supported HDInsight versions](https://docs.microsoft.com/azure/hdinsight/hdinsight-component-versioning#supported-hdinsight-versions).</span></span> <span data-ttu-id="45eae-205">If this value isn't specified,  the [latest HDI default version](https://docs.microsoft.com/azure/hdinsight/hdinsight-component-versioning#hadoop-components-available-with-different-hdinsight-versions) is used.</span><span class="sxs-lookup"><span data-stu-id="45eae-205">If this value isn't specified,  the [latest HDI default version](https://docs.microsoft.com/azure/hdinsight/hdinsight-component-versioning#hadoop-components-available-with-different-hdinsight-versions) is used.</span></span> | <span data-ttu-id="45eae-206">No</span><span class="sxs-lookup"><span data-stu-id="45eae-206">No</span></span>       |
| <span data-ttu-id="45eae-207">linkedServiceName</span><span class="sxs-lookup"><span data-stu-id="45eae-207">linkedServiceName</span></span>            | <span data-ttu-id="45eae-208">The Azure Storage linked service to be used by the on-demand cluster for storing and processing data.</span><span class="sxs-lookup"><span data-stu-id="45eae-208">The Azure Storage linked service to be used by the on-demand cluster for storing and processing data.</span></span> <span data-ttu-id="45eae-209">The HDInsight cluster is created in the same region as this storage account.</span><span class="sxs-lookup"><span data-stu-id="45eae-209">The HDInsight cluster is created in the same region as this storage account.</span></span><p><span data-ttu-id="45eae-210">Currently, you can't create an on-demand HDInsight cluster that uses Azure Data Lake Store as the storage.</span><span class="sxs-lookup"><span data-stu-id="45eae-210">Currently, you can't create an on-demand HDInsight cluster that uses Azure Data Lake Store as the storage.</span></span> <span data-ttu-id="45eae-211">If you want to store the result data from HDInsight processing in Data Lake Store, use Copy Activity to copy the data from Blob storage to Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="45eae-211">If you want to store the result data from HDInsight processing in Data Lake Store, use Copy Activity to copy the data from Blob storage to Data Lake Store.</span></span> </p> | <span data-ttu-id="45eae-212">Yes</span><span class="sxs-lookup"><span data-stu-id="45eae-212">Yes</span></span>      |
| <span data-ttu-id="45eae-213">additionalLinkedServiceNames</span><span class="sxs-lookup"><span data-stu-id="45eae-213">additionalLinkedServiceNames</span></span> | <span data-ttu-id="45eae-214">Specifies additional storage accounts for the HDInsight linked service.</span><span class="sxs-lookup"><span data-stu-id="45eae-214">Specifies additional storage accounts for the HDInsight linked service.</span></span> <span data-ttu-id="45eae-215">Data Factory registers the storage accounts on your behalf.</span><span class="sxs-lookup"><span data-stu-id="45eae-215">Data Factory registers the storage accounts on your behalf.</span></span> <span data-ttu-id="45eae-216">These storage accounts must be in the same region as the HDInsight cluster.</span><span class="sxs-lookup"><span data-stu-id="45eae-216">These storage accounts must be in the same region as the HDInsight cluster.</span></span> <span data-ttu-id="45eae-217">The HDInsight cluster is created in the same region as the storage account that's specified by the **linkedServiceName** property.</span><span class="sxs-lookup"><span data-stu-id="45eae-217">The HDInsight cluster is created in the same region as the storage account that's specified by the **linkedServiceName** property.</span></span> | <span data-ttu-id="45eae-218">No</span><span class="sxs-lookup"><span data-stu-id="45eae-218">No</span></span>       |
| <span data-ttu-id="45eae-219">osType</span><span class="sxs-lookup"><span data-stu-id="45eae-219">osType</span></span>                       | <span data-ttu-id="45eae-220">The type of operating system.</span><span class="sxs-lookup"><span data-stu-id="45eae-220">The type of operating system.</span></span> <span data-ttu-id="45eae-221">Allowed values are **Linux** and **Windows**.</span><span class="sxs-lookup"><span data-stu-id="45eae-221">Allowed values are **Linux** and **Windows**.</span></span> <span data-ttu-id="45eae-222">If this value isn't specified, **Linux** is used.</span><span class="sxs-lookup"><span data-stu-id="45eae-222">If this value isn't specified, **Linux** is used.</span></span>  <br /><br /><span data-ttu-id="45eae-223">We strongly recommend using Linux-based HDInsight clusters.</span><span class="sxs-lookup"><span data-stu-id="45eae-223">We strongly recommend using Linux-based HDInsight clusters.</span></span> <span data-ttu-id="45eae-224">The retirement date for HDInsight on Windows is July 31, 2018.</span><span class="sxs-lookup"><span data-stu-id="45eae-224">The retirement date for HDInsight on Windows is July 31, 2018.</span></span> | <span data-ttu-id="45eae-225">No</span><span class="sxs-lookup"><span data-stu-id="45eae-225">No</span></span>       |
| <span data-ttu-id="45eae-226">hcatalogLinkedServiceName</span><span class="sxs-lookup"><span data-stu-id="45eae-226">hcatalogLinkedServiceName</span></span>    | <span data-ttu-id="45eae-227">The name of the Azure SQL linked service that points to the HCatalog database.</span><span class="sxs-lookup"><span data-stu-id="45eae-227">The name of the Azure SQL linked service that points to the HCatalog database.</span></span> <span data-ttu-id="45eae-228">The on-demand HDInsight cluster is created by using the SQL database as the metastore.</span><span class="sxs-lookup"><span data-stu-id="45eae-228">The on-demand HDInsight cluster is created by using the SQL database as the metastore.</span></span> | <span data-ttu-id="45eae-229">No</span><span class="sxs-lookup"><span data-stu-id="45eae-229">No</span></span>       |

#### <a name="example-linkedservicenames-json"></a><span data-ttu-id="45eae-230">Example: LinkedServiceNames JSON</span><span class="sxs-lookup"><span data-stu-id="45eae-230">Example: LinkedServiceNames JSON</span></span>

```json
"additionalLinkedServiceNames": [
    "otherLinkedServiceName1",
    "otherLinkedServiceName2"
  ]
```

### <a name="advanced-properties"></a><span data-ttu-id="45eae-231">Advanced properties</span><span class="sxs-lookup"><span data-stu-id="45eae-231">Advanced properties</span></span>
<span data-ttu-id="45eae-232">For granular configuration of the on-demand HDInsight cluster, you can specify the following properties:</span><span class="sxs-lookup"><span data-stu-id="45eae-232">For granular configuration of the on-demand HDInsight cluster, you can specify the following properties:</span></span>

| <span data-ttu-id="45eae-233">Property</span><span class="sxs-lookup"><span data-stu-id="45eae-233">Property</span></span>               | <span data-ttu-id="45eae-234">Description</span><span class="sxs-lookup"><span data-stu-id="45eae-234">Description</span></span>                              | <span data-ttu-id="45eae-235">Required</span><span class="sxs-lookup"><span data-stu-id="45eae-235">Required</span></span> |
| :--------------------- | :--------------------------------------- | :------- |
| <span data-ttu-id="45eae-236">coreConfiguration</span><span class="sxs-lookup"><span data-stu-id="45eae-236">coreConfiguration</span></span>      | <span data-ttu-id="45eae-237">Specifies the core configuration parameters (core-site.xml) for the HDInsight cluster to be created.</span><span class="sxs-lookup"><span data-stu-id="45eae-237">Specifies the core configuration parameters (core-site.xml) for the HDInsight cluster to be created.</span></span> | <span data-ttu-id="45eae-238">No</span><span class="sxs-lookup"><span data-stu-id="45eae-238">No</span></span>       |
| <span data-ttu-id="45eae-239">hBaseConfiguration</span><span class="sxs-lookup"><span data-stu-id="45eae-239">hBaseConfiguration</span></span>     | <span data-ttu-id="45eae-240">Specifies the HBase configuration parameters (hbase-site.xml) for the HDInsight cluster.</span><span class="sxs-lookup"><span data-stu-id="45eae-240">Specifies the HBase configuration parameters (hbase-site.xml) for the HDInsight cluster.</span></span> | <span data-ttu-id="45eae-241">No</span><span class="sxs-lookup"><span data-stu-id="45eae-241">No</span></span>       |
| <span data-ttu-id="45eae-242">hdfsConfiguration</span><span class="sxs-lookup"><span data-stu-id="45eae-242">hdfsConfiguration</span></span>      | <span data-ttu-id="45eae-243">Specifies the HDFS configuration parameters (hdfs-site.xml) for the HDInsight cluster.</span><span class="sxs-lookup"><span data-stu-id="45eae-243">Specifies the HDFS configuration parameters (hdfs-site.xml) for the HDInsight cluster.</span></span> | <span data-ttu-id="45eae-244">No</span><span class="sxs-lookup"><span data-stu-id="45eae-244">No</span></span>       |
| <span data-ttu-id="45eae-245">hiveConfiguration</span><span class="sxs-lookup"><span data-stu-id="45eae-245">hiveConfiguration</span></span>      | <span data-ttu-id="45eae-246">Specifies the Hive configuration parameters (hive-site.xml) for the HDInsight cluster.</span><span class="sxs-lookup"><span data-stu-id="45eae-246">Specifies the Hive configuration parameters (hive-site.xml) for the HDInsight cluster.</span></span> | <span data-ttu-id="45eae-247">No</span><span class="sxs-lookup"><span data-stu-id="45eae-247">No</span></span>       |
| <span data-ttu-id="45eae-248">mapReduceConfiguration</span><span class="sxs-lookup"><span data-stu-id="45eae-248">mapReduceConfiguration</span></span> | <span data-ttu-id="45eae-249">Specifies the MapReduce configuration parameters (mapred-site.xml) for the HDInsight cluster.</span><span class="sxs-lookup"><span data-stu-id="45eae-249">Specifies the MapReduce configuration parameters (mapred-site.xml) for the HDInsight cluster.</span></span> | <span data-ttu-id="45eae-250">No</span><span class="sxs-lookup"><span data-stu-id="45eae-250">No</span></span>       |
| <span data-ttu-id="45eae-251">oozieConfiguration</span><span class="sxs-lookup"><span data-stu-id="45eae-251">oozieConfiguration</span></span>     | <span data-ttu-id="45eae-252">Specifies the Oozie configuration parameters (oozie-site.xml) for the HDInsight cluster.</span><span class="sxs-lookup"><span data-stu-id="45eae-252">Specifies the Oozie configuration parameters (oozie-site.xml) for the HDInsight cluster.</span></span> | <span data-ttu-id="45eae-253">No</span><span class="sxs-lookup"><span data-stu-id="45eae-253">No</span></span>       |
| <span data-ttu-id="45eae-254">stormConfiguration</span><span class="sxs-lookup"><span data-stu-id="45eae-254">stormConfiguration</span></span>     | <span data-ttu-id="45eae-255">Specifies the Storm configuration parameters (storm-site.xml) for the HDInsight cluster.</span><span class="sxs-lookup"><span data-stu-id="45eae-255">Specifies the Storm configuration parameters (storm-site.xml) for the HDInsight cluster.</span></span> | <span data-ttu-id="45eae-256">No</span><span class="sxs-lookup"><span data-stu-id="45eae-256">No</span></span>       |
| <span data-ttu-id="45eae-257">yarnConfiguration</span><span class="sxs-lookup"><span data-stu-id="45eae-257">yarnConfiguration</span></span>      | <span data-ttu-id="45eae-258">Specifies the YARN configuration parameters (yarn-site.xml) for the HDInsight cluster.</span><span class="sxs-lookup"><span data-stu-id="45eae-258">Specifies the YARN configuration parameters (yarn-site.xml) for the HDInsight cluster.</span></span> | <span data-ttu-id="45eae-259">No</span><span class="sxs-lookup"><span data-stu-id="45eae-259">No</span></span>       |

#### <a name="example-on-demand-hdinsight-cluster-configuration-with-advanced-properties"></a><span data-ttu-id="45eae-260">Example: On-demand HDInsight cluster configuration with advanced properties</span><span class="sxs-lookup"><span data-stu-id="45eae-260">Example: On-demand HDInsight cluster configuration with advanced properties</span></span>

```json
{
  "name": " HDInsightOnDemandLinkedService",
  "properties": {
    "type": "HDInsightOnDemand",
    "typeProperties": {
      "version": "3.6",
      "osType": "Linux",
      "clusterSize": 16,
      "timeToLive": "01:30:00",
      "linkedServiceName": "adfods1",
      "coreConfiguration": {
        "templeton.mapper.memory.mb": "5000"
      },
      "hiveConfiguration": {
        "templeton.mapper.memory.mb": "5000"
      },
      "mapReduceConfiguration": {
        "mapreduce.reduce.java.opts": "-Xmx4000m",
        "mapreduce.map.java.opts": "-Xmx4000m",
        "mapreduce.map.memory.mb": "5000",
        "mapreduce.reduce.memory.mb": "5000",
        "mapreduce.job.reduce.slowstart.completedmaps": "0.8"
      },
      "yarnConfiguration": {
        "yarn.app.mapreduce.am.resource.mb": "5000",
        "mapreduce.map.memory.mb": "5000"
      },
      "additionalLinkedServiceNames": [
        "datafeeds",
        "adobedatafeed"
      ]
    }
  }
}
```

### <a name="node-sizes"></a><span data-ttu-id="45eae-261">Node sizes</span><span class="sxs-lookup"><span data-stu-id="45eae-261">Node sizes</span></span>
<span data-ttu-id="45eae-262">To specify the size of head, data, and ZooKeeper nodes, use the following properties:</span><span class="sxs-lookup"><span data-stu-id="45eae-262">To specify the size of head, data, and ZooKeeper nodes, use the following properties:</span></span> 

| <span data-ttu-id="45eae-263">Property</span><span class="sxs-lookup"><span data-stu-id="45eae-263">Property</span></span>          | <span data-ttu-id="45eae-264">Description</span><span class="sxs-lookup"><span data-stu-id="45eae-264">Description</span></span>                              | <span data-ttu-id="45eae-265">Required</span><span class="sxs-lookup"><span data-stu-id="45eae-265">Required</span></span> |
| :---------------- | :--------------------------------------- | :------- |
| <span data-ttu-id="45eae-266">headNodeSize</span><span class="sxs-lookup"><span data-stu-id="45eae-266">headNodeSize</span></span>      | <span data-ttu-id="45eae-267">Sets the size of the head node.</span><span class="sxs-lookup"><span data-stu-id="45eae-267">Sets the size of the head node.</span></span> <span data-ttu-id="45eae-268">The default value is **Standard_D3**.</span><span class="sxs-lookup"><span data-stu-id="45eae-268">The default value is **Standard_D3**.</span></span> <span data-ttu-id="45eae-269">For details, see [Specify node sizes](#specify-node-sizes).</span><span class="sxs-lookup"><span data-stu-id="45eae-269">For details, see [Specify node sizes](#specify-node-sizes).</span></span> | <span data-ttu-id="45eae-270">No</span><span class="sxs-lookup"><span data-stu-id="45eae-270">No</span></span>       |
| <span data-ttu-id="45eae-271">dataNodeSize</span><span class="sxs-lookup"><span data-stu-id="45eae-271">dataNodeSize</span></span>      | <span data-ttu-id="45eae-272">Sets the size of the data node.</span><span class="sxs-lookup"><span data-stu-id="45eae-272">Sets the size of the data node.</span></span> <span data-ttu-id="45eae-273">The default value is **Standard_D3**.</span><span class="sxs-lookup"><span data-stu-id="45eae-273">The default value is **Standard_D3**.</span></span> | <span data-ttu-id="45eae-274">No</span><span class="sxs-lookup"><span data-stu-id="45eae-274">No</span></span>       |
| <span data-ttu-id="45eae-275">zookeeperNodeSize</span><span class="sxs-lookup"><span data-stu-id="45eae-275">zookeeperNodeSize</span></span> | <span data-ttu-id="45eae-276">Sets the size of the ZooKeeper node.</span><span class="sxs-lookup"><span data-stu-id="45eae-276">Sets the size of the ZooKeeper node.</span></span> <span data-ttu-id="45eae-277">The default value is **Standard_D3**.</span><span class="sxs-lookup"><span data-stu-id="45eae-277">The default value is **Standard_D3**.</span></span> | <span data-ttu-id="45eae-278">No</span><span class="sxs-lookup"><span data-stu-id="45eae-278">No</span></span>       |

#### <a name="specify-node-sizes"></a><span data-ttu-id="45eae-279">Specify node sizes</span><span class="sxs-lookup"><span data-stu-id="45eae-279">Specify node sizes</span></span>
<span data-ttu-id="45eae-280">For string values that you must specify for the properties described in the preceding section, see [Virtual machine sizes](../../virtual-machines/linux/sizes.md).</span><span class="sxs-lookup"><span data-stu-id="45eae-280">For string values that you must specify for the properties described in the preceding section, see [Virtual machine sizes](../../virtual-machines/linux/sizes.md).</span></span> <span data-ttu-id="45eae-281">The values must conform to the cmdlets and APIs referenced in [Virtual machine sizes](../../virtual-machines/linux/sizes.md).</span><span class="sxs-lookup"><span data-stu-id="45eae-281">The values must conform to the cmdlets and APIs referenced in [Virtual machine sizes](../../virtual-machines/linux/sizes.md).</span></span> <span data-ttu-id="45eae-282">The  Large (default) data node size has 7 GB of memory.</span><span class="sxs-lookup"><span data-stu-id="45eae-282">The  Large (default) data node size has 7 GB of memory.</span></span> <span data-ttu-id="45eae-283">This might not be sufficient for your scenario.</span><span class="sxs-lookup"><span data-stu-id="45eae-283">This might not be sufficient for your scenario.</span></span> 

<span data-ttu-id="45eae-284">If you want to create D4-size head nodes and worker nodes, specify **Standard_D4** as the value for the **headNodeSize** and **dataNodeSize** properties:</span><span class="sxs-lookup"><span data-stu-id="45eae-284">If you want to create D4-size head nodes and worker nodes, specify **Standard_D4** as the value for the **headNodeSize** and **dataNodeSize** properties:</span></span> 

```json
"headNodeSize": "Standard_D4",    
"dataNodeSize": "Standard_D4",
```

<span data-ttu-id="45eae-285">If you set an incorrect value for these properties, you might see the following message:</span><span class="sxs-lookup"><span data-stu-id="45eae-285">If you set an incorrect value for these properties, you might see the following message:</span></span>

  <span data-ttu-id="45eae-286">Failed to create cluster.</span><span class="sxs-lookup"><span data-stu-id="45eae-286">Failed to create cluster.</span></span> <span data-ttu-id="45eae-287">Exception: Unable to complete the cluster create operation.</span><span class="sxs-lookup"><span data-stu-id="45eae-287">Exception: Unable to complete the cluster create operation.</span></span> <span data-ttu-id="45eae-288">Operation failed with code '400'.</span><span class="sxs-lookup"><span data-stu-id="45eae-288">Operation failed with code '400'.</span></span> <span data-ttu-id="45eae-289">Cluster left behind state: 'Error'.</span><span class="sxs-lookup"><span data-stu-id="45eae-289">Cluster left behind state: 'Error'.</span></span> <span data-ttu-id="45eae-290">Message: 'PreClusterCreationValidationFailure'.</span><span class="sxs-lookup"><span data-stu-id="45eae-290">Message: 'PreClusterCreationValidationFailure'.</span></span> 
  
<span data-ttu-id="45eae-291">If you see this message, ensure that you are using the cmdlet and API names from the table in [Virtual machine sizes](../../virtual-machines/linux/sizes.md).</span><span class="sxs-lookup"><span data-stu-id="45eae-291">If you see this message, ensure that you are using the cmdlet and API names from the table in [Virtual machine sizes](../../virtual-machines/linux/sizes.md).</span></span>  

> [!NOTE]
> <span data-ttu-id="45eae-292">Currently, Data Factory doesn't support HDInsight clusters that use Data Lake Store as the primary store.</span><span class="sxs-lookup"><span data-stu-id="45eae-292">Currently, Data Factory doesn't support HDInsight clusters that use Data Lake Store as the primary store.</span></span> <span data-ttu-id="45eae-293">Use Azure Storage as the primary store for HDInsight clusters.</span><span class="sxs-lookup"><span data-stu-id="45eae-293">Use Azure Storage as the primary store for HDInsight clusters.</span></span> 
>
> 


## <a name="bring-your-own-compute-environment"></a><span data-ttu-id="45eae-294">Bring-your-own compute environment</span><span class="sxs-lookup"><span data-stu-id="45eae-294">Bring-your-own compute environment</span></span>
<span data-ttu-id="45eae-295">You can register an existing compute environment as a linked service in Data Factory.</span><span class="sxs-lookup"><span data-stu-id="45eae-295">You can register an existing compute environment as a linked service in Data Factory.</span></span> <span data-ttu-id="45eae-296">You manage the compute environment.</span><span class="sxs-lookup"><span data-stu-id="45eae-296">You manage the compute environment.</span></span> <span data-ttu-id="45eae-297">The Data Factory service uses the compute environment to execute activities.</span><span class="sxs-lookup"><span data-stu-id="45eae-297">The Data Factory service uses the compute environment to execute activities.</span></span>

<span data-ttu-id="45eae-298">This type of configuration is supported for the following compute environments:</span><span class="sxs-lookup"><span data-stu-id="45eae-298">This type of configuration is supported for the following compute environments:</span></span>

* <span data-ttu-id="45eae-299">Azure HDInsight</span><span class="sxs-lookup"><span data-stu-id="45eae-299">Azure HDInsight</span></span>
* <span data-ttu-id="45eae-300">Azure Batch</span><span class="sxs-lookup"><span data-stu-id="45eae-300">Azure Batch</span></span>
* <span data-ttu-id="45eae-301">Azure Machine Learning</span><span class="sxs-lookup"><span data-stu-id="45eae-301">Azure Machine Learning</span></span>
* <span data-ttu-id="45eae-302">Azure Data Lake Analytics</span><span class="sxs-lookup"><span data-stu-id="45eae-302">Azure Data Lake Analytics</span></span>
* <span data-ttu-id="45eae-303">Azure SQL Database, Azure SQL Data Warehouse, SQL Server</span><span class="sxs-lookup"><span data-stu-id="45eae-303">Azure SQL Database, Azure SQL Data Warehouse, SQL Server</span></span>

## <a name="azure-hdinsight-linked-service"></a><span data-ttu-id="45eae-304">Azure HDInsight linked service</span><span class="sxs-lookup"><span data-stu-id="45eae-304">Azure HDInsight linked service</span></span>
<span data-ttu-id="45eae-305">You can create an HDInsight linked service to register your own HDInsight cluster with Data Factory.</span><span class="sxs-lookup"><span data-stu-id="45eae-305">You can create an HDInsight linked service to register your own HDInsight cluster with Data Factory.</span></span>

### <a name="example"></a><span data-ttu-id="45eae-306">Example</span><span class="sxs-lookup"><span data-stu-id="45eae-306">Example</span></span>

```json
{
  "name": "HDInsightLinkedService",
  "properties": {
    "type": "HDInsight",
    "typeProperties": {
      "clusterUri": " https://<hdinsightclustername>.azurehdinsight.net/",
      "userName": "admin",
      "password": "<password>",
      "linkedServiceName": "MyHDInsightStoragelinkedService"
    }
  }
}
```

### <a name="properties"></a><span data-ttu-id="45eae-307">Properties</span><span class="sxs-lookup"><span data-stu-id="45eae-307">Properties</span></span>
| <span data-ttu-id="45eae-308">Property</span><span class="sxs-lookup"><span data-stu-id="45eae-308">Property</span></span>          | <span data-ttu-id="45eae-309">Description</span><span class="sxs-lookup"><span data-stu-id="45eae-309">Description</span></span>                              | <span data-ttu-id="45eae-310">Required</span><span class="sxs-lookup"><span data-stu-id="45eae-310">Required</span></span> |
| ----------------- | ---------------------------------------- | -------- |
| <span data-ttu-id="45eae-311">type</span><span class="sxs-lookup"><span data-stu-id="45eae-311">type</span></span>              | <span data-ttu-id="45eae-312">Set the type property to **HDInsight**.</span><span class="sxs-lookup"><span data-stu-id="45eae-312">Set the type property to **HDInsight**.</span></span> | <span data-ttu-id="45eae-313">Yes</span><span class="sxs-lookup"><span data-stu-id="45eae-313">Yes</span></span>      |
| <span data-ttu-id="45eae-314">clusterUri</span><span class="sxs-lookup"><span data-stu-id="45eae-314">clusterUri</span></span>        | <span data-ttu-id="45eae-315">The URI of the HDInsight cluster.</span><span class="sxs-lookup"><span data-stu-id="45eae-315">The URI of the HDInsight cluster.</span></span>        | <span data-ttu-id="45eae-316">Yes</span><span class="sxs-lookup"><span data-stu-id="45eae-316">Yes</span></span>      |
| <span data-ttu-id="45eae-317">username</span><span class="sxs-lookup"><span data-stu-id="45eae-317">username</span></span>          | <span data-ttu-id="45eae-318">The name of the user account to use to connect to an existing HDInsight cluster.</span><span class="sxs-lookup"><span data-stu-id="45eae-318">The name of the user account to use to connect to an existing HDInsight cluster.</span></span> | <span data-ttu-id="45eae-319">Yes</span><span class="sxs-lookup"><span data-stu-id="45eae-319">Yes</span></span>      |
| <span data-ttu-id="45eae-320">password</span><span class="sxs-lookup"><span data-stu-id="45eae-320">password</span></span>          | <span data-ttu-id="45eae-321">The password for the user account.</span><span class="sxs-lookup"><span data-stu-id="45eae-321">The password for the user account.</span></span>   | <span data-ttu-id="45eae-322">Yes</span><span class="sxs-lookup"><span data-stu-id="45eae-322">Yes</span></span>      |
| <span data-ttu-id="45eae-323">linkedServiceName</span><span class="sxs-lookup"><span data-stu-id="45eae-323">linkedServiceName</span></span> | <span data-ttu-id="45eae-324">The name of the storage linked service that refers to the Blob storage used by the HDInsight cluster.</span><span class="sxs-lookup"><span data-stu-id="45eae-324">The name of the storage linked service that refers to the Blob storage used by the HDInsight cluster.</span></span> <p><span data-ttu-id="45eae-325">Currently, you can't specify a Data Lake Store linked service for this property.</span><span class="sxs-lookup"><span data-stu-id="45eae-325">Currently, you can't specify a Data Lake Store linked service for this property.</span></span> <span data-ttu-id="45eae-326">If the HDInsight cluster has access to Data Lake Store, you might access data in Data Lake Store from Hive or Pig scripts.</span><span class="sxs-lookup"><span data-stu-id="45eae-326">If the HDInsight cluster has access to Data Lake Store, you might access data in Data Lake Store from Hive or Pig scripts.</span></span> </p> | <span data-ttu-id="45eae-327">Yes</span><span class="sxs-lookup"><span data-stu-id="45eae-327">Yes</span></span>      |

## <a name="azure-batch-linked-service"></a><span data-ttu-id="45eae-328">Azure Batch linked service</span><span class="sxs-lookup"><span data-stu-id="45eae-328">Azure Batch linked service</span></span>
<span data-ttu-id="45eae-329">You can create a Batch linked service to register a Batch pool of virtual machines (VMs) to a data factory.</span><span class="sxs-lookup"><span data-stu-id="45eae-329">You can create a Batch linked service to register a Batch pool of virtual machines (VMs) to a data factory.</span></span> <span data-ttu-id="45eae-330">You can run Microsoft .NET custom activities by using either Batch or HDInsight.</span><span class="sxs-lookup"><span data-stu-id="45eae-330">You can run Microsoft .NET custom activities by using either Batch or HDInsight.</span></span>

<span data-ttu-id="45eae-331">If you are new to using the Batch service:</span><span class="sxs-lookup"><span data-stu-id="45eae-331">If you are new to using the Batch service:</span></span>

* <span data-ttu-id="45eae-332">Learn about [Azure Batch basics](../../batch/batch-technical-overview.md).</span><span class="sxs-lookup"><span data-stu-id="45eae-332">Learn about [Azure Batch basics](../../batch/batch-technical-overview.md).</span></span>
* <span data-ttu-id="45eae-333">Learn about the [New-AzureBatchAccount](https://msdn.microsoft.com/library/mt125880.aspx) cmdlet.</span><span class="sxs-lookup"><span data-stu-id="45eae-333">Learn about the [New-AzureBatchAccount](https://msdn.microsoft.com/library/mt125880.aspx) cmdlet.</span></span> <span data-ttu-id="45eae-334">Use this cmdlet to create a Batch account.</span><span class="sxs-lookup"><span data-stu-id="45eae-334">Use this cmdlet to create a Batch account.</span></span> <span data-ttu-id="45eae-335">Or, you can create the Batch account by using the [Azure portal](../../batch/batch-account-create-portal.md).</span><span class="sxs-lookup"><span data-stu-id="45eae-335">Or, you can create the Batch account by using the [Azure portal](../../batch/batch-account-create-portal.md).</span></span> <span data-ttu-id="45eae-336">For detailed information about using the cmdlet, see [Using PowerShell to manage a Batch account](http://blogs.technet.com/b/windowshpc/archive/2014/10/28/using-azure-powershell-to-manage-azure-batch-account.aspx).</span><span class="sxs-lookup"><span data-stu-id="45eae-336">For detailed information about using the cmdlet, see [Using PowerShell to manage a Batch account](http://blogs.technet.com/b/windowshpc/archive/2014/10/28/using-azure-powershell-to-manage-azure-batch-account.aspx).</span></span>
* <span data-ttu-id="45eae-337">Learn about the [New-AzureBatchPool](https://msdn.microsoft.com/library/mt125936.aspx) cmdlet.</span><span class="sxs-lookup"><span data-stu-id="45eae-337">Learn about the [New-AzureBatchPool](https://msdn.microsoft.com/library/mt125936.aspx) cmdlet.</span></span> <span data-ttu-id="45eae-338">Use this cmdlet to create a Batch pool.</span><span class="sxs-lookup"><span data-stu-id="45eae-338">Use this cmdlet to create a Batch pool.</span></span>

### <a name="example"></a><span data-ttu-id="45eae-339">Example</span><span class="sxs-lookup"><span data-stu-id="45eae-339">Example</span></span>

```json
{
  "name": "AzureBatchLinkedService",
  "properties": {
    "type": "AzureBatch",
    "typeProperties": {
      "accountName": "<Azure Batch account name>",
      "accessKey": "<Azure Batch account key>",
      "poolName": "<Azure Batch pool name>",
      "linkedServiceName": "<Specify associated storage linked service reference here>"
    }
  }
}
```

<span data-ttu-id="45eae-340">For the **accountName** property, append **.\<region name\>** to the name of your batch account.</span><span class="sxs-lookup"><span data-stu-id="45eae-340">For the **accountName** property, append **.\<region name\>** to the name of your batch account.</span></span> <span data-ttu-id="45eae-341">For example:</span><span class="sxs-lookup"><span data-stu-id="45eae-341">For example:</span></span>

```json
"accountName": "mybatchaccount.eastus"
```

<span data-ttu-id="45eae-342">Another option is to provide the **batchUri** endpoint.</span><span class="sxs-lookup"><span data-stu-id="45eae-342">Another option is to provide the **batchUri** endpoint.</span></span> <span data-ttu-id="45eae-343">For example:</span><span class="sxs-lookup"><span data-stu-id="45eae-343">For example:</span></span>

```json
"accountName": "adfteam",
"batchUri": "https://eastus.batch.azure.com",
```

### <a name="properties"></a><span data-ttu-id="45eae-344">Properties</span><span class="sxs-lookup"><span data-stu-id="45eae-344">Properties</span></span>
| <span data-ttu-id="45eae-345">Property</span><span class="sxs-lookup"><span data-stu-id="45eae-345">Property</span></span>          | <span data-ttu-id="45eae-346">Description</span><span class="sxs-lookup"><span data-stu-id="45eae-346">Description</span></span>                              | <span data-ttu-id="45eae-347">Required</span><span class="sxs-lookup"><span data-stu-id="45eae-347">Required</span></span> |
| ----------------- | ---------------------------------------- | -------- |
| <span data-ttu-id="45eae-348">type</span><span class="sxs-lookup"><span data-stu-id="45eae-348">type</span></span>              | <span data-ttu-id="45eae-349">Set the type property to **AzureBatch**.</span><span class="sxs-lookup"><span data-stu-id="45eae-349">Set the type property to **AzureBatch**.</span></span> | <span data-ttu-id="45eae-350">Yes</span><span class="sxs-lookup"><span data-stu-id="45eae-350">Yes</span></span>      |
| <span data-ttu-id="45eae-351">accountName</span><span class="sxs-lookup"><span data-stu-id="45eae-351">accountName</span></span>       | <span data-ttu-id="45eae-352">The name of the Batch account.</span><span class="sxs-lookup"><span data-stu-id="45eae-352">The name of the Batch account.</span></span>         | <span data-ttu-id="45eae-353">Yes</span><span class="sxs-lookup"><span data-stu-id="45eae-353">Yes</span></span>      |
| <span data-ttu-id="45eae-354">accessKey</span><span class="sxs-lookup"><span data-stu-id="45eae-354">accessKey</span></span>         | <span data-ttu-id="45eae-355">The access key for the Batch account.</span><span class="sxs-lookup"><span data-stu-id="45eae-355">The access key for the Batch account.</span></span>  | <span data-ttu-id="45eae-356">Yes</span><span class="sxs-lookup"><span data-stu-id="45eae-356">Yes</span></span>      |
| <span data-ttu-id="45eae-357">poolName</span><span class="sxs-lookup"><span data-stu-id="45eae-357">poolName</span></span>          | <span data-ttu-id="45eae-358">The name of the pool of VMs.</span><span class="sxs-lookup"><span data-stu-id="45eae-358">The name of the pool of VMs.</span></span>    | <span data-ttu-id="45eae-359">Yes</span><span class="sxs-lookup"><span data-stu-id="45eae-359">Yes</span></span>      |
| <span data-ttu-id="45eae-360">linkedServiceName</span><span class="sxs-lookup"><span data-stu-id="45eae-360">linkedServiceName</span></span> | <span data-ttu-id="45eae-361">The name of the storage linked service that's associated with this Batch linked service.</span><span class="sxs-lookup"><span data-stu-id="45eae-361">The name of the storage linked service that's associated with this Batch linked service.</span></span> <span data-ttu-id="45eae-362">This linked service is used for staging files that are required to run the activity, and to store activity execution logs.</span><span class="sxs-lookup"><span data-stu-id="45eae-362">This linked service is used for staging files that are required to run the activity, and to store activity execution logs.</span></span> | <span data-ttu-id="45eae-363">Yes</span><span class="sxs-lookup"><span data-stu-id="45eae-363">Yes</span></span>      |

## <a name="azure-machine-learning-linked-service"></a><span data-ttu-id="45eae-364">Azure Machine Learning linked service</span><span class="sxs-lookup"><span data-stu-id="45eae-364">Azure Machine Learning linked service</span></span>
<span data-ttu-id="45eae-365">You can create a Machine Learning linked service to register a Machine Learning batch scoring endpoint to a data factory.</span><span class="sxs-lookup"><span data-stu-id="45eae-365">You can create a Machine Learning linked service to register a Machine Learning batch scoring endpoint to a data factory.</span></span>

### <a name="example"></a><span data-ttu-id="45eae-366">Example</span><span class="sxs-lookup"><span data-stu-id="45eae-366">Example</span></span>

```json
{
  "name": "AzureMLLinkedService",
  "properties": {
    "type": "AzureML",
    "typeProperties": {
      "mlEndpoint": "https://[batch scoring endpoint]/jobs",
      "apiKey": "<apikey>"
    }
  }
}
```

### <a name="properties"></a><span data-ttu-id="45eae-367">Properties</span><span class="sxs-lookup"><span data-stu-id="45eae-367">Properties</span></span>
| <span data-ttu-id="45eae-368">Property</span><span class="sxs-lookup"><span data-stu-id="45eae-368">Property</span></span>   | <span data-ttu-id="45eae-369">Description</span><span class="sxs-lookup"><span data-stu-id="45eae-369">Description</span></span>                              | <span data-ttu-id="45eae-370">Required</span><span class="sxs-lookup"><span data-stu-id="45eae-370">Required</span></span> |
| ---------- | ---------------------------------------- | -------- |
| <span data-ttu-id="45eae-371">Type</span><span class="sxs-lookup"><span data-stu-id="45eae-371">Type</span></span>       | <span data-ttu-id="45eae-372">Set the type property to **AzureML**.</span><span class="sxs-lookup"><span data-stu-id="45eae-372">Set the type property to **AzureML**.</span></span> | <span data-ttu-id="45eae-373">Yes</span><span class="sxs-lookup"><span data-stu-id="45eae-373">Yes</span></span>      |
| <span data-ttu-id="45eae-374">mlEndpoint</span><span class="sxs-lookup"><span data-stu-id="45eae-374">mlEndpoint</span></span> | <span data-ttu-id="45eae-375">The batch scoring URL.</span><span class="sxs-lookup"><span data-stu-id="45eae-375">The batch scoring URL.</span></span>                   | <span data-ttu-id="45eae-376">Yes</span><span class="sxs-lookup"><span data-stu-id="45eae-376">Yes</span></span>      |
| <span data-ttu-id="45eae-377">apiKey</span><span class="sxs-lookup"><span data-stu-id="45eae-377">apiKey</span></span>     | <span data-ttu-id="45eae-378">The published workspace models API.</span><span class="sxs-lookup"><span data-stu-id="45eae-378">The published workspace models API.</span></span>     | <span data-ttu-id="45eae-379">Yes</span><span class="sxs-lookup"><span data-stu-id="45eae-379">Yes</span></span>      |

## <a name="azure-data-lake-analytics-linked-service"></a><span data-ttu-id="45eae-380">Azure Data Lake Analytics linked service</span><span class="sxs-lookup"><span data-stu-id="45eae-380">Azure Data Lake Analytics linked service</span></span>
<span data-ttu-id="45eae-381">You can create a Data Lake Analytics linked service to link a Data Lake Analytics compute service to an Azure data factory.</span><span class="sxs-lookup"><span data-stu-id="45eae-381">You can create a Data Lake Analytics linked service to link a Data Lake Analytics compute service to an Azure data factory.</span></span> <span data-ttu-id="45eae-382">The Data Lake Analytics U-SQL activity in the pipeline refers to this linked service.</span><span class="sxs-lookup"><span data-stu-id="45eae-382">The Data Lake Analytics U-SQL activity in the pipeline refers to this linked service.</span></span> 

<span data-ttu-id="45eae-383">The following table describes the generic properties that are used in the JSON definition:</span><span class="sxs-lookup"><span data-stu-id="45eae-383">The following table describes the generic properties that are used in the JSON definition:</span></span>

| <span data-ttu-id="45eae-384">Property</span><span class="sxs-lookup"><span data-stu-id="45eae-384">Property</span></span>                 | <span data-ttu-id="45eae-385">Description</span><span class="sxs-lookup"><span data-stu-id="45eae-385">Description</span></span>                              | <span data-ttu-id="45eae-386">Required</span><span class="sxs-lookup"><span data-stu-id="45eae-386">Required</span></span>                                 |
| ------------------------ | ---------------------------------------- | ---------------------------------------- |
| <span data-ttu-id="45eae-387">type</span><span class="sxs-lookup"><span data-stu-id="45eae-387">type</span></span>                 | <span data-ttu-id="45eae-388">Set the type property to **AzureDataLakeAnalytics**.</span><span class="sxs-lookup"><span data-stu-id="45eae-388">Set the type property to **AzureDataLakeAnalytics**.</span></span> | <span data-ttu-id="45eae-389">Yes</span><span class="sxs-lookup"><span data-stu-id="45eae-389">Yes</span></span>                                      |
| <span data-ttu-id="45eae-390">accountName</span><span class="sxs-lookup"><span data-stu-id="45eae-390">accountName</span></span>          | <span data-ttu-id="45eae-391">The Data Lake Analytics account name.</span><span class="sxs-lookup"><span data-stu-id="45eae-391">The Data Lake Analytics account name.</span></span>  | <span data-ttu-id="45eae-392">Yes</span><span class="sxs-lookup"><span data-stu-id="45eae-392">Yes</span></span>                                      |
| <span data-ttu-id="45eae-393">dataLakeAnalyticsUri</span><span class="sxs-lookup"><span data-stu-id="45eae-393">dataLakeAnalyticsUri</span></span> | <span data-ttu-id="45eae-394">The Data Lake Analytics URI.</span><span class="sxs-lookup"><span data-stu-id="45eae-394">The Data Lake Analytics URI.</span></span>           | <span data-ttu-id="45eae-395">No</span><span class="sxs-lookup"><span data-stu-id="45eae-395">No</span></span>                                       |
| <span data-ttu-id="45eae-396">subscriptionId</span><span class="sxs-lookup"><span data-stu-id="45eae-396">subscriptionId</span></span>       | <span data-ttu-id="45eae-397">The Azure subscription ID.</span><span class="sxs-lookup"><span data-stu-id="45eae-397">The Azure subscription ID.</span></span>                    | <span data-ttu-id="45eae-398">No</span><span class="sxs-lookup"><span data-stu-id="45eae-398">No</span></span><br /><br /><span data-ttu-id="45eae-399">(If not specified, the data factory subscription is used.)</span><span class="sxs-lookup"><span data-stu-id="45eae-399">(If not specified, the data factory subscription is used.)</span></span> |
| <span data-ttu-id="45eae-400">resourceGroupName</span><span class="sxs-lookup"><span data-stu-id="45eae-400">resourceGroupName</span></span>    | <span data-ttu-id="45eae-401">The Azure resource group name.</span><span class="sxs-lookup"><span data-stu-id="45eae-401">The Azure resource group name.</span></span>                | <span data-ttu-id="45eae-402">No</span><span class="sxs-lookup"><span data-stu-id="45eae-402">No</span></span><br /><br /> <span data-ttu-id="45eae-403">(If not specified, the data factory resource group is used.)</span><span class="sxs-lookup"><span data-stu-id="45eae-403">(If not specified, the data factory resource group is used.)</span></span> |

### <a name="authentication-options"></a><span data-ttu-id="45eae-404">Authentication options</span><span class="sxs-lookup"><span data-stu-id="45eae-404">Authentication options</span></span>
<span data-ttu-id="45eae-405">For your Data Lake Analytics linked service, you can choose between authentication by using a service principal or a user credential.</span><span class="sxs-lookup"><span data-stu-id="45eae-405">For your Data Lake Analytics linked service, you can choose between authentication by using a service principal or a user credential.</span></span>

#### <a name="service-principal-authentication-recommended"></a><span data-ttu-id="45eae-406">Service principal authentication (recommended)</span><span class="sxs-lookup"><span data-stu-id="45eae-406">Service principal authentication (recommended)</span></span>
<span data-ttu-id="45eae-407">To use service principal authentication, register an application entity in Azure Active Directory (Azure AD).</span><span class="sxs-lookup"><span data-stu-id="45eae-407">To use service principal authentication, register an application entity in Azure Active Directory (Azure AD).</span></span> <span data-ttu-id="45eae-408">Then, grant Azure AD access to Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="45eae-408">Then, grant Azure AD access to Data Lake Store.</span></span> <span data-ttu-id="45eae-409">For detailed steps, see [Service-to-service authentication](../../data-lake-store/data-lake-store-authenticate-using-active-directory.md).</span><span class="sxs-lookup"><span data-stu-id="45eae-409">For detailed steps, see [Service-to-service authentication](../../data-lake-store/data-lake-store-authenticate-using-active-directory.md).</span></span> <span data-ttu-id="45eae-410">Make note of the following values, which you use to define the linked service:</span><span class="sxs-lookup"><span data-stu-id="45eae-410">Make note of the following values, which you use to define the linked service:</span></span>
* <span data-ttu-id="45eae-411">Application ID</span><span class="sxs-lookup"><span data-stu-id="45eae-411">Application ID</span></span>
* <span data-ttu-id="45eae-412">Application key</span><span class="sxs-lookup"><span data-stu-id="45eae-412">Application key</span></span> 
* <span data-ttu-id="45eae-413">Tenant ID</span><span class="sxs-lookup"><span data-stu-id="45eae-413">Tenant ID</span></span>

<span data-ttu-id="45eae-414">Use service principal authentication by specifying the following properties:</span><span class="sxs-lookup"><span data-stu-id="45eae-414">Use service principal authentication by specifying the following properties:</span></span>

| <span data-ttu-id="45eae-415">Property</span><span class="sxs-lookup"><span data-stu-id="45eae-415">Property</span></span>                | <span data-ttu-id="45eae-416">Description</span><span class="sxs-lookup"><span data-stu-id="45eae-416">Description</span></span>                              | <span data-ttu-id="45eae-417">Required</span><span class="sxs-lookup"><span data-stu-id="45eae-417">Required</span></span> |
| :---------------------- | :--------------------------------------- | :------- |
| <span data-ttu-id="45eae-418">servicePrincipalId</span><span class="sxs-lookup"><span data-stu-id="45eae-418">servicePrincipalId</span></span>  | <span data-ttu-id="45eae-419">The application's client ID.</span><span class="sxs-lookup"><span data-stu-id="45eae-419">The application's client ID.</span></span>     | <span data-ttu-id="45eae-420">Yes</span><span class="sxs-lookup"><span data-stu-id="45eae-420">Yes</span></span>      |
| <span data-ttu-id="45eae-421">servicePrincipalKey</span><span class="sxs-lookup"><span data-stu-id="45eae-421">servicePrincipalKey</span></span> | <span data-ttu-id="45eae-422">The application's key.</span><span class="sxs-lookup"><span data-stu-id="45eae-422">The application's key.</span></span>           | <span data-ttu-id="45eae-423">Yes</span><span class="sxs-lookup"><span data-stu-id="45eae-423">Yes</span></span>      |
| <span data-ttu-id="45eae-424">tenant</span><span class="sxs-lookup"><span data-stu-id="45eae-424">tenant</span></span>              | <span data-ttu-id="45eae-425">The tenant information (domain name or tenant ID) where your application is located.</span><span class="sxs-lookup"><span data-stu-id="45eae-425">The tenant information (domain name or tenant ID) where your application is located.</span></span> <span data-ttu-id="45eae-426">To get this information, hover your mouse in the upper-right corner of the Azure portal.</span><span class="sxs-lookup"><span data-stu-id="45eae-426">To get this information, hover your mouse in the upper-right corner of the Azure portal.</span></span> | <span data-ttu-id="45eae-427">Yes</span><span class="sxs-lookup"><span data-stu-id="45eae-427">Yes</span></span>      |

<span data-ttu-id="45eae-428">**Example: Service principal authentication**</span><span class="sxs-lookup"><span data-stu-id="45eae-428">**Example: Service principal authentication**</span></span>
```json
{
    "name": "AzureDataLakeAnalyticsLinkedService",
    "properties": {
        "type": "AzureDataLakeAnalytics",
        "typeProperties": {
            "accountName": "adftestaccount",
            "dataLakeAnalyticsUri": "datalakeanalyticscompute.net",
            "servicePrincipalId": "<service principal id>",
            "servicePrincipalKey": "<service principal key>",
            "tenant": "<tenant info, e.g. microsoft.onmicrosoft.com>",
            "subscriptionId": "<optional, subscription id of ADLA>",
            "resourceGroupName": "<optional, resource group name of ADLA>"
        }
    }
}
```

#### <a name="user-credential-authentication"></a><span data-ttu-id="45eae-429">User credential authentication</span><span class="sxs-lookup"><span data-stu-id="45eae-429">User credential authentication</span></span>
<span data-ttu-id="45eae-430">For user credential authentication for Data Lake Analytics, specify the following properties:</span><span class="sxs-lookup"><span data-stu-id="45eae-430">For user credential authentication for Data Lake Analytics, specify the following properties:</span></span>

| <span data-ttu-id="45eae-431">Property</span><span class="sxs-lookup"><span data-stu-id="45eae-431">Property</span></span>          | <span data-ttu-id="45eae-432">Description</span><span class="sxs-lookup"><span data-stu-id="45eae-432">Description</span></span>                              | <span data-ttu-id="45eae-433">Required</span><span class="sxs-lookup"><span data-stu-id="45eae-433">Required</span></span> |
| :---------------- | :--------------------------------------- | :------- |
| <span data-ttu-id="45eae-434">authorization</span><span class="sxs-lookup"><span data-stu-id="45eae-434">authorization</span></span> | <span data-ttu-id="45eae-435">In Data Factory Editor, select the **Authorize** button.</span><span class="sxs-lookup"><span data-stu-id="45eae-435">In Data Factory Editor, select the **Authorize** button.</span></span> <span data-ttu-id="45eae-436">Enter the credential that assigns the autogenerated authorization URL to this property.</span><span class="sxs-lookup"><span data-stu-id="45eae-436">Enter the credential that assigns the autogenerated authorization URL to this property.</span></span> | <span data-ttu-id="45eae-437">Yes</span><span class="sxs-lookup"><span data-stu-id="45eae-437">Yes</span></span>      |
| <span data-ttu-id="45eae-438">sessionId</span><span class="sxs-lookup"><span data-stu-id="45eae-438">sessionId</span></span>     | <span data-ttu-id="45eae-439">The OAuth session ID from the OAuth authorization session.</span><span class="sxs-lookup"><span data-stu-id="45eae-439">The OAuth session ID from the OAuth authorization session.</span></span> <span data-ttu-id="45eae-440">Each session ID is unique and can be used only once.</span><span class="sxs-lookup"><span data-stu-id="45eae-440">Each session ID is unique and can be used only once.</span></span> <span data-ttu-id="45eae-441">This setting is automatically generated when you use Data Factory Editor.</span><span class="sxs-lookup"><span data-stu-id="45eae-441">This setting is automatically generated when you use Data Factory Editor.</span></span> | <span data-ttu-id="45eae-442">Yes</span><span class="sxs-lookup"><span data-stu-id="45eae-442">Yes</span></span>      |

<span data-ttu-id="45eae-443">**Example: User credential authentication**</span><span class="sxs-lookup"><span data-stu-id="45eae-443">**Example: User credential authentication**</span></span>
```json
{
    "name": "AzureDataLakeAnalyticsLinkedService",
    "properties": {
        "type": "AzureDataLakeAnalytics",
        "typeProperties": {
            "accountName": "adftestaccount",
            "dataLakeAnalyticsUri": "datalakeanalyticscompute.net",
            "authorization": "<authcode>",
            "sessionId": "<session ID>", 
            "subscriptionId": "<optional, subscription id of ADLA>",
            "resourceGroupName": "<optional, resource group name of ADLA>"
        }
    }
}
```

#### <a name="token-expiration"></a><span data-ttu-id="45eae-444">Token expiration</span><span class="sxs-lookup"><span data-stu-id="45eae-444">Token expiration</span></span>
<span data-ttu-id="45eae-445">The authorization code that you generated by selecting the **Authorize** button expires after a set interval.</span><span class="sxs-lookup"><span data-stu-id="45eae-445">The authorization code that you generated by selecting the **Authorize** button expires after a set interval.</span></span> 

<span data-ttu-id="45eae-446">You might see the following error message when the authentication token expires:</span><span class="sxs-lookup"><span data-stu-id="45eae-446">You might see the following error message when the authentication token expires:</span></span> 

  <span data-ttu-id="45eae-447">Credential operation error: invalid_grant - AADSTS70002: Error validating credentials.</span><span class="sxs-lookup"><span data-stu-id="45eae-447">Credential operation error: invalid_grant - AADSTS70002: Error validating credentials.</span></span> <span data-ttu-id="45eae-448">AADSTS70008: The provided access grant is expired or revoked.</span><span class="sxs-lookup"><span data-stu-id="45eae-448">AADSTS70008: The provided access grant is expired or revoked.</span></span> <span data-ttu-id="45eae-449">Trace ID: d18629e8-af88-43c5-88e3-d8419eb1fca1 Correlation ID: fac30a0c-6be6-4e02-8d69-a776d2ffefd7 Timestamp: 2015-12-15 21:09:31Z</span><span class="sxs-lookup"><span data-stu-id="45eae-449">Trace ID: d18629e8-af88-43c5-88e3-d8419eb1fca1 Correlation ID: fac30a0c-6be6-4e02-8d69-a776d2ffefd7 Timestamp: 2015-12-15 21:09:31Z</span></span>

<span data-ttu-id="45eae-450">The following table shows expirations by user account type:</span><span class="sxs-lookup"><span data-stu-id="45eae-450">The following table shows expirations by user account type:</span></span> 

| <span data-ttu-id="45eae-451">User type</span><span class="sxs-lookup"><span data-stu-id="45eae-451">User type</span></span>                                | <span data-ttu-id="45eae-452">Expires after</span><span class="sxs-lookup"><span data-stu-id="45eae-452">Expires after</span></span>                            |
| :--------------------------------------- | :--------------------------------------- |
| <span data-ttu-id="45eae-453">User accounts that are *not* managed by Azure AD (Hotmail, Live, and so on)</span><span class="sxs-lookup"><span data-stu-id="45eae-453">User accounts that are *not* managed by Azure AD (Hotmail, Live, and so on)</span></span> | <span data-ttu-id="45eae-454">12 hours.</span><span class="sxs-lookup"><span data-stu-id="45eae-454">12 hours.</span></span>                                 |
| <span data-ttu-id="45eae-455">User accounts that *are* managed by Azure AD</span><span class="sxs-lookup"><span data-stu-id="45eae-455">User accounts that *are* managed by Azure AD</span></span> | <span data-ttu-id="45eae-456">14 days after the last slice run.</span><span class="sxs-lookup"><span data-stu-id="45eae-456">14 days after the last slice run.</span></span> <br /><br /><span data-ttu-id="45eae-457">90 days, if a slice that's based on an OAuth-based linked service runs at least once every 14 days.</span><span class="sxs-lookup"><span data-stu-id="45eae-457">90 days, if a slice that's based on an OAuth-based linked service runs at least once every 14 days.</span></span> |

<span data-ttu-id="45eae-458">To avoid or resolve this error, reauthorize by selecting the **Authorize** button when the token expires.</span><span class="sxs-lookup"><span data-stu-id="45eae-458">To avoid or resolve this error, reauthorize by selecting the **Authorize** button when the token expires.</span></span> <span data-ttu-id="45eae-459">Then, redeploy the linked service.</span><span class="sxs-lookup"><span data-stu-id="45eae-459">Then, redeploy the linked service.</span></span> <span data-ttu-id="45eae-460">You can also generate values for the **sessionId** and **authorization** properties programmatically by using the following code:</span><span class="sxs-lookup"><span data-stu-id="45eae-460">You can also generate values for the **sessionId** and **authorization** properties programmatically by using the following code:</span></span>

```csharp
if (linkedService.Properties.TypeProperties is AzureDataLakeStoreLinkedService ||
    linkedService.Properties.TypeProperties is AzureDataLakeAnalyticsLinkedService)
{
    AuthorizationSessionGetResponse authorizationSession = this.Client.OAuth.Get(this.ResourceGroupName, this.DataFactoryName, linkedService.Properties.Type);

    WindowsFormsWebAuthenticationDialog authenticationDialog = new WindowsFormsWebAuthenticationDialog(null);
    string authorization = authenticationDialog.AuthenticateAAD(authorizationSession.AuthorizationSession.Endpoint, new Uri("urn:ietf:wg:oauth:2.0:oob"));

    AzureDataLakeStoreLinkedService azureDataLakeStoreProperties = linkedService.Properties.TypeProperties as AzureDataLakeStoreLinkedService;
    if (azureDataLakeStoreProperties != null)
    {
        azureDataLakeStoreProperties.SessionId = authorizationSession.AuthorizationSession.SessionId;
        azureDataLakeStoreProperties.Authorization = authorization;
    }

    AzureDataLakeAnalyticsLinkedService azureDataLakeAnalyticsProperties = linkedService.Properties.TypeProperties as AzureDataLakeAnalyticsLinkedService;
    if (azureDataLakeAnalyticsProperties != null)
    {
        azureDataLakeAnalyticsProperties.SessionId = authorizationSession.AuthorizationSession.SessionId;
        azureDataLakeAnalyticsProperties.Authorization = authorization;
    }
}
```

<span data-ttu-id="45eae-461">For details about the Data Factory classes that are used in this code example, see:</span><span class="sxs-lookup"><span data-stu-id="45eae-461">For details about the Data Factory classes that are used in this code example, see:</span></span>
* [<span data-ttu-id="45eae-462">AzureDataLakeStoreLinkedService class</span><span class="sxs-lookup"><span data-stu-id="45eae-462">AzureDataLakeStoreLinkedService class</span></span>](https://msdn.microsoft.com/library/microsoft.azure.management.datafactories.models.azuredatalakestorelinkedservice.aspx)
* [<span data-ttu-id="45eae-463">AzureDataLakeAnalyticsLinkedService class</span><span class="sxs-lookup"><span data-stu-id="45eae-463">AzureDataLakeAnalyticsLinkedService class</span></span>](https://msdn.microsoft.com/library/microsoft.azure.management.datafactories.models.azuredatalakeanalyticslinkedservice.aspx)
* [<span data-ttu-id="45eae-464">AuthorizationSessionGetResponse class</span><span class="sxs-lookup"><span data-stu-id="45eae-464">AuthorizationSessionGetResponse class</span></span>](https://msdn.microsoft.com/library/microsoft.azure.management.datafactories.models.authorizationsessiongetresponse.aspx)

<span data-ttu-id="45eae-465">Add a reference to Microsoft.IdentityModel.Clients.ActiveDirectory.WindowsForms.dll for the **WindowsFormsWebAuthenticationDialog** class.</span><span class="sxs-lookup"><span data-stu-id="45eae-465">Add a reference to Microsoft.IdentityModel.Clients.ActiveDirectory.WindowsForms.dll for the **WindowsFormsWebAuthenticationDialog** class.</span></span> 

## <a name="azure-sql-linked-service"></a><span data-ttu-id="45eae-466">Azure SQL linked service</span><span class="sxs-lookup"><span data-stu-id="45eae-466">Azure SQL linked service</span></span>
<span data-ttu-id="45eae-467">You can create a SQL linked service and use it with the [Stored Procedure Activity](data-factory-stored-proc-activity.md) to invoke a stored procedure from a Data Factory pipeline.</span><span class="sxs-lookup"><span data-stu-id="45eae-467">You can create a SQL linked service and use it with the [Stored Procedure Activity](data-factory-stored-proc-activity.md) to invoke a stored procedure from a Data Factory pipeline.</span></span> <span data-ttu-id="45eae-468">For more information, see [Azure SQL connector](data-factory-azure-sql-connector.md#linked-service-properties).</span><span class="sxs-lookup"><span data-stu-id="45eae-468">For more information, see [Azure SQL connector](data-factory-azure-sql-connector.md#linked-service-properties).</span></span>

## <a name="azure-sql-data-warehouse-linked-service"></a><span data-ttu-id="45eae-469">Azure SQL Data Warehouse linked service</span><span class="sxs-lookup"><span data-stu-id="45eae-469">Azure SQL Data Warehouse linked service</span></span>
<span data-ttu-id="45eae-470">You can create a SQL Data Warehouse linked service and use it with the [Stored Procedure Activity](data-factory-stored-proc-activity.md) to invoke a stored procedure from a Data Factory pipeline.</span><span class="sxs-lookup"><span data-stu-id="45eae-470">You can create a SQL Data Warehouse linked service and use it with the [Stored Procedure Activity](data-factory-stored-proc-activity.md) to invoke a stored procedure from a Data Factory pipeline.</span></span> <span data-ttu-id="45eae-471">For more information, see [Azure SQL Data Warehouse connector](data-factory-azure-sql-data-warehouse-connector.md#linked-service-properties).</span><span class="sxs-lookup"><span data-stu-id="45eae-471">For more information, see [Azure SQL Data Warehouse connector](data-factory-azure-sql-data-warehouse-connector.md#linked-service-properties).</span></span>

## <a name="sql-server-linked-service"></a><span data-ttu-id="45eae-472">SQL Server linked service</span><span class="sxs-lookup"><span data-stu-id="45eae-472">SQL Server linked service</span></span>
<span data-ttu-id="45eae-473">You can create a SQL Server linked service and use it with the [Stored Procedure Activity](data-factory-stored-proc-activity.md) to invoke a stored procedure from a Data Factory pipeline.</span><span class="sxs-lookup"><span data-stu-id="45eae-473">You can create a SQL Server linked service and use it with the [Stored Procedure Activity](data-factory-stored-proc-activity.md) to invoke a stored procedure from a Data Factory pipeline.</span></span> <span data-ttu-id="45eae-474">For more information, see [SQL Server connector](data-factory-sqlserver-connector.md#linked-service-properties).</span><span class="sxs-lookup"><span data-stu-id="45eae-474">For more information, see [SQL Server connector](data-factory-sqlserver-connector.md#linked-service-properties).</span></span>

