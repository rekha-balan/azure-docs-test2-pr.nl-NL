---
title: How caching works | Microsoft Docs
description: Caching is the process of storing data locally so that future requests for that data can be accessed more quickly.
services: cdn
documentationcenter: ''
author: dksimpson
manager: akucer
editor: ''
ms.assetid: ''
ms.service: cdn
ms.workload: tbd
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 04/30/2018
ms.author: v-deasim
ms.openlocfilehash: bb0824995972b49febdb1695e41f45fbd0966cd1
ms.sourcegitcommit: d1451406a010fd3aa854dc8e5b77dc5537d8050e
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 09/13/2018
ms.locfileid: "44867389"
---
# <a name="how-caching-works"></a><span data-ttu-id="b423b-103">How caching works</span><span class="sxs-lookup"><span data-stu-id="b423b-103">How caching works</span></span>

<span data-ttu-id="b423b-104">This article provides an overview of general caching concepts and how [Azure Content Delivery Network (CDN)](cdn-overview.md) uses caching to improve performance.</span><span class="sxs-lookup"><span data-stu-id="b423b-104">This article provides an overview of general caching concepts and how [Azure Content Delivery Network (CDN)](cdn-overview.md) uses caching to improve performance.</span></span> <span data-ttu-id="b423b-105">If you’d like to learn about how to customize caching behavior on your CDN endpoint, see [Control Azure CDN caching behavior with caching rules](cdn-caching-rules.md) and [Control Azure CDN caching behavior with query strings](cdn-query-string.md).</span><span class="sxs-lookup"><span data-stu-id="b423b-105">If you’d like to learn about how to customize caching behavior on your CDN endpoint, see [Control Azure CDN caching behavior with caching rules](cdn-caching-rules.md) and [Control Azure CDN caching behavior with query strings](cdn-query-string.md).</span></span>

## <a name="introduction-to-caching"></a><span data-ttu-id="b423b-106">Introduction to caching</span><span class="sxs-lookup"><span data-stu-id="b423b-106">Introduction to caching</span></span>

<span data-ttu-id="b423b-107">Caching is the process of storing data locally so that future requests for that data can be accessed more quickly.</span><span class="sxs-lookup"><span data-stu-id="b423b-107">Caching is the process of storing data locally so that future requests for that data can be accessed more quickly.</span></span> <span data-ttu-id="b423b-108">In the most common type of caching, web browser caching, a web browser stores copies of static data locally on a local hard drive.</span><span class="sxs-lookup"><span data-stu-id="b423b-108">In the most common type of caching, web browser caching, a web browser stores copies of static data locally on a local hard drive.</span></span> <span data-ttu-id="b423b-109">By using caching, the web browser can avoid making multiple round-trips to the server and instead access the same data locally, thus saving time and resources.</span><span class="sxs-lookup"><span data-stu-id="b423b-109">By using caching, the web browser can avoid making multiple round-trips to the server and instead access the same data locally, thus saving time and resources.</span></span> <span data-ttu-id="b423b-110">Caching is well-suited for locally managing small, static data such as static images, CSS files, and JavaScript files.</span><span class="sxs-lookup"><span data-stu-id="b423b-110">Caching is well-suited for locally managing small, static data such as static images, CSS files, and JavaScript files.</span></span>

<span data-ttu-id="b423b-111">Similarly, caching is used by a content delivery network on edge servers close to the user to avoid requests traveling back to the origin and reducing end-user latency.</span><span class="sxs-lookup"><span data-stu-id="b423b-111">Similarly, caching is used by a content delivery network on edge servers close to the user to avoid requests traveling back to the origin and reducing end-user latency.</span></span> <span data-ttu-id="b423b-112">Unlike a web browser cache, which is used only for a single user, the CDN has a shared cache.</span><span class="sxs-lookup"><span data-stu-id="b423b-112">Unlike a web browser cache, which is used only for a single user, the CDN has a shared cache.</span></span> <span data-ttu-id="b423b-113">In a CDN shared cache, a file that is requested by one user can be accessed later by other users, which greatly decreases the number of requests to the origin server.</span><span class="sxs-lookup"><span data-stu-id="b423b-113">In a CDN shared cache, a file that is requested by one user can be accessed later by other users, which greatly decreases the number of requests to the origin server.</span></span>

<span data-ttu-id="b423b-114">Dynamic resources that change frequently or are unique to an individual user cannot be cached.</span><span class="sxs-lookup"><span data-stu-id="b423b-114">Dynamic resources that change frequently or are unique to an individual user cannot be cached.</span></span> <span data-ttu-id="b423b-115">Those types of resources, however, can take advantage of dynamic site acceleration (DSA) optimization on the Azure Content Delivery Network for performance improvements.</span><span class="sxs-lookup"><span data-stu-id="b423b-115">Those types of resources, however, can take advantage of dynamic site acceleration (DSA) optimization on the Azure Content Delivery Network for performance improvements.</span></span>

<span data-ttu-id="b423b-116">Caching can occur at multiple levels between the origin server and the end user:</span><span class="sxs-lookup"><span data-stu-id="b423b-116">Caching can occur at multiple levels between the origin server and the end user:</span></span>

- <span data-ttu-id="b423b-117">Web server: Uses a shared cache (for multiple users).</span><span class="sxs-lookup"><span data-stu-id="b423b-117">Web server: Uses a shared cache (for multiple users).</span></span>
- <span data-ttu-id="b423b-118">Content delivery network: Uses a shared cache (for multiple users).</span><span class="sxs-lookup"><span data-stu-id="b423b-118">Content delivery network: Uses a shared cache (for multiple users).</span></span>
- <span data-ttu-id="b423b-119">Internet service provider (ISP): Uses a shared cache (for multiple users).</span><span class="sxs-lookup"><span data-stu-id="b423b-119">Internet service provider (ISP): Uses a shared cache (for multiple users).</span></span>
- <span data-ttu-id="b423b-120">Web browser: Uses a private cache (for one user).</span><span class="sxs-lookup"><span data-stu-id="b423b-120">Web browser: Uses a private cache (for one user).</span></span>

<span data-ttu-id="b423b-121">Each cache typically manages its own resource freshness and performs validation when a file is stale.</span><span class="sxs-lookup"><span data-stu-id="b423b-121">Each cache typically manages its own resource freshness and performs validation when a file is stale.</span></span> <span data-ttu-id="b423b-122">This behavior is defined in the HTTP caching specification, [RFC 7234](https://tools.ietf.org/html/rfc7234).</span><span class="sxs-lookup"><span data-stu-id="b423b-122">This behavior is defined in the HTTP caching specification, [RFC 7234](https://tools.ietf.org/html/rfc7234).</span></span>

### <a name="resource-freshness"></a><span data-ttu-id="b423b-123">Resource freshness</span><span class="sxs-lookup"><span data-stu-id="b423b-123">Resource freshness</span></span>

<span data-ttu-id="b423b-124">Because a cached resource can potentially be out-of-date, or stale (as compared to the corresponding resource on the origin server), it is important for any caching mechanism to control when content is refreshed.</span><span class="sxs-lookup"><span data-stu-id="b423b-124">Because a cached resource can potentially be out-of-date, or stale (as compared to the corresponding resource on the origin server), it is important for any caching mechanism to control when content is refreshed.</span></span> <span data-ttu-id="b423b-125">To save time and bandwidth consumption, a cached resource is not compared to the version on the origin server every time it is accessed.</span><span class="sxs-lookup"><span data-stu-id="b423b-125">To save time and bandwidth consumption, a cached resource is not compared to the version on the origin server every time it is accessed.</span></span> <span data-ttu-id="b423b-126">Instead, as long as a cached resource is considered to be fresh, it is assumed to be the most current version and is sent directly to the client.</span><span class="sxs-lookup"><span data-stu-id="b423b-126">Instead, as long as a cached resource is considered to be fresh, it is assumed to be the most current version and is sent directly to the client.</span></span> <span data-ttu-id="b423b-127">A cached resource is considered to be fresh when its age is less than the age or period defined by a cache setting.</span><span class="sxs-lookup"><span data-stu-id="b423b-127">A cached resource is considered to be fresh when its age is less than the age or period defined by a cache setting.</span></span> <span data-ttu-id="b423b-128">For example, when a browser reloads a web page, it verifies that each cached resource on your hard drive is fresh and loads it.</span><span class="sxs-lookup"><span data-stu-id="b423b-128">For example, when a browser reloads a web page, it verifies that each cached resource on your hard drive is fresh and loads it.</span></span> <span data-ttu-id="b423b-129">If the resource is not fresh (stale), an up-to-date copy is loaded from the server.</span><span class="sxs-lookup"><span data-stu-id="b423b-129">If the resource is not fresh (stale), an up-to-date copy is loaded from the server.</span></span>

### <a name="validation"></a><span data-ttu-id="b423b-130">Validation</span><span class="sxs-lookup"><span data-stu-id="b423b-130">Validation</span></span>

<span data-ttu-id="b423b-131">If a resource is considered to be stale, the origin server is asked to validate it, that is, determine whether the data in the cache still matches what’s on the origin server.</span><span class="sxs-lookup"><span data-stu-id="b423b-131">If a resource is considered to be stale, the origin server is asked to validate it, that is, determine whether the data in the cache still matches what’s on the origin server.</span></span> <span data-ttu-id="b423b-132">If the file has been modified on the origin server, the cache updates its version of the resource.</span><span class="sxs-lookup"><span data-stu-id="b423b-132">If the file has been modified on the origin server, the cache updates its version of the resource.</span></span> <span data-ttu-id="b423b-133">Otherwise, if the resource is fresh, the data is delivered directly from the cache without validating it first.</span><span class="sxs-lookup"><span data-stu-id="b423b-133">Otherwise, if the resource is fresh, the data is delivered directly from the cache without validating it first.</span></span>

### <a name="cdn-caching"></a><span data-ttu-id="b423b-134">CDN caching</span><span class="sxs-lookup"><span data-stu-id="b423b-134">CDN caching</span></span>

<span data-ttu-id="b423b-135">Caching is integral to the way a CDN operates to speed up delivery and reduce origin load for static assets such as images, fonts, and videos.</span><span class="sxs-lookup"><span data-stu-id="b423b-135">Caching is integral to the way a CDN operates to speed up delivery and reduce origin load for static assets such as images, fonts, and videos.</span></span> <span data-ttu-id="b423b-136">In CDN caching, static resources are selectively stored on strategically placed servers that are more local to a user and offers the following advantages:</span><span class="sxs-lookup"><span data-stu-id="b423b-136">In CDN caching, static resources are selectively stored on strategically placed servers that are more local to a user and offers the following advantages:</span></span>

- <span data-ttu-id="b423b-137">Because most web traffic is static (for example, images, fonts, and videos), CDN caching reduces network latency by moving content closer to the user, thus reducing the distance that data travels.</span><span class="sxs-lookup"><span data-stu-id="b423b-137">Because most web traffic is static (for example, images, fonts, and videos), CDN caching reduces network latency by moving content closer to the user, thus reducing the distance that data travels.</span></span>

- <span data-ttu-id="b423b-138">By offloading work to a CDN, caching can reduce network traffic and the load on the origin server.</span><span class="sxs-lookup"><span data-stu-id="b423b-138">By offloading work to a CDN, caching can reduce network traffic and the load on the origin server.</span></span> <span data-ttu-id="b423b-139">Doing so reduces cost and resource requirements for the application, even when there are large numbers of users.</span><span class="sxs-lookup"><span data-stu-id="b423b-139">Doing so reduces cost and resource requirements for the application, even when there are large numbers of users.</span></span>

<span data-ttu-id="b423b-140">Similar to how caching is implemented in a web browser, you can control how caching is performed in a CDN by sending cache-directive headers.</span><span class="sxs-lookup"><span data-stu-id="b423b-140">Similar to how caching is implemented in a web browser, you can control how caching is performed in a CDN by sending cache-directive headers.</span></span> <span data-ttu-id="b423b-141">Cache-directive headers are HTTP headers, which are typically added by the origin server.</span><span class="sxs-lookup"><span data-stu-id="b423b-141">Cache-directive headers are HTTP headers, which are typically added by the origin server.</span></span> <span data-ttu-id="b423b-142">Although most of these headers were originally designed to address caching in client browsers, they are now also used by all intermediate caches, such as CDNs.</span><span class="sxs-lookup"><span data-stu-id="b423b-142">Although most of these headers were originally designed to address caching in client browsers, they are now also used by all intermediate caches, such as CDNs.</span></span> 

<span data-ttu-id="b423b-143">Two headers can be used to define cache freshness: `Cache-Control` and `Expires`.</span><span class="sxs-lookup"><span data-stu-id="b423b-143">Two headers can be used to define cache freshness: `Cache-Control` and `Expires`.</span></span> <span data-ttu-id="b423b-144">`Cache-Control` is more current and takes precedence over `Expires`, if both exist.</span><span class="sxs-lookup"><span data-stu-id="b423b-144">`Cache-Control` is more current and takes precedence over `Expires`, if both exist.</span></span> <span data-ttu-id="b423b-145">There are also two types of headers used for validation (called validators): `ETag` and `Last-Modified`.</span><span class="sxs-lookup"><span data-stu-id="b423b-145">There are also two types of headers used for validation (called validators): `ETag` and `Last-Modified`.</span></span> <span data-ttu-id="b423b-146">`ETag` is more current and takes precedence over `Last-Modified`, if both are defined.</span><span class="sxs-lookup"><span data-stu-id="b423b-146">`ETag` is more current and takes precedence over `Last-Modified`, if both are defined.</span></span>  

## <a name="cache-directive-headers"></a><span data-ttu-id="b423b-147">Cache-directive headers</span><span class="sxs-lookup"><span data-stu-id="b423b-147">Cache-directive headers</span></span>

> [!IMPORTANT]
> <span data-ttu-id="b423b-148">By default, an Azure CDN endpoint that is optimized for DSA ignores cache-directive headers and bypasses caching.</span><span class="sxs-lookup"><span data-stu-id="b423b-148">By default, an Azure CDN endpoint that is optimized for DSA ignores cache-directive headers and bypasses caching.</span></span> <span data-ttu-id="b423b-149">For **Azure CDN Standard from Verizon** and **Azure CDN Standard from Akamai** profiles, you can adjust how an Azure CDN endpoint treats these headers by using [CDN caching rules](cdn-caching-rules.md) to enable caching.</span><span class="sxs-lookup"><span data-stu-id="b423b-149">For **Azure CDN Standard from Verizon** and **Azure CDN Standard from Akamai** profiles, you can adjust how an Azure CDN endpoint treats these headers by using [CDN caching rules](cdn-caching-rules.md) to enable caching.</span></span> <span data-ttu-id="b423b-150">For **Azure CDN Premium from Verizon** profiles only, you use the [rules engine](cdn-rules-engine.md) to enable caching.</span><span class="sxs-lookup"><span data-stu-id="b423b-150">For **Azure CDN Premium from Verizon** profiles only, you use the [rules engine](cdn-rules-engine.md) to enable caching.</span></span>

<span data-ttu-id="b423b-151">Azure CDN supports the following HTTP cache-directive headers, which define cache duration and cache sharing.</span><span class="sxs-lookup"><span data-stu-id="b423b-151">Azure CDN supports the following HTTP cache-directive headers, which define cache duration and cache sharing.</span></span>

<span data-ttu-id="b423b-152">**Cache-Control:**</span><span class="sxs-lookup"><span data-stu-id="b423b-152">**Cache-Control:**</span></span>
- <span data-ttu-id="b423b-153">Introduced in HTTP 1.1 to give web publishers more control over their content and to address the limitations of the `Expires` header.</span><span class="sxs-lookup"><span data-stu-id="b423b-153">Introduced in HTTP 1.1 to give web publishers more control over their content and to address the limitations of the `Expires` header.</span></span>
- <span data-ttu-id="b423b-154">Overrides the `Expires` header, if both it and `Cache-Control` are defined.</span><span class="sxs-lookup"><span data-stu-id="b423b-154">Overrides the `Expires` header, if both it and `Cache-Control` are defined.</span></span>
- <span data-ttu-id="b423b-155">When used in an HTTP request from the client to the CDN POP, `Cache-Control` is ignored by all Azure CDN profiles, by default.</span><span class="sxs-lookup"><span data-stu-id="b423b-155">When used in an HTTP request from the client to the CDN POP, `Cache-Control` is ignored by all Azure CDN profiles, by default.</span></span>
- <span data-ttu-id="b423b-156">When used in an HTTP response from the client to the CDN POP:</span><span class="sxs-lookup"><span data-stu-id="b423b-156">When used in an HTTP response from the client to the CDN POP:</span></span>
     - <span data-ttu-id="b423b-157">**Azure CDN Standard/Premium from Verizon** and **Azure CDN Standard from Microsoft** support all `Cache-Control` directives.</span><span class="sxs-lookup"><span data-stu-id="b423b-157">**Azure CDN Standard/Premium from Verizon** and **Azure CDN Standard from Microsoft** support all `Cache-Control` directives.</span></span>
     - <span data-ttu-id="b423b-158">**Azure CDN Standard from Akamai** supports only the following `Cache-Control` directives; all others are ignored:</span><span class="sxs-lookup"><span data-stu-id="b423b-158">**Azure CDN Standard from Akamai** supports only the following `Cache-Control` directives; all others are ignored:</span></span>
         - <span data-ttu-id="b423b-159">`max-age`: A cache can store the content for the number of seconds specified.</span><span class="sxs-lookup"><span data-stu-id="b423b-159">`max-age`: A cache can store the content for the number of seconds specified.</span></span> <span data-ttu-id="b423b-160">For example, `Cache-Control: max-age=5`.</span><span class="sxs-lookup"><span data-stu-id="b423b-160">For example, `Cache-Control: max-age=5`.</span></span> <span data-ttu-id="b423b-161">This directive specifies the maximum amount of time the content is considered to be fresh.</span><span class="sxs-lookup"><span data-stu-id="b423b-161">This directive specifies the maximum amount of time the content is considered to be fresh.</span></span>
         - <span data-ttu-id="b423b-162">`no-cache`: Cache the content, but validate the content every time before delivering it from the cache.</span><span class="sxs-lookup"><span data-stu-id="b423b-162">`no-cache`: Cache the content, but validate the content every time before delivering it from the cache.</span></span> <span data-ttu-id="b423b-163">Equivalent to `Cache-Control: max-age=0`.</span><span class="sxs-lookup"><span data-stu-id="b423b-163">Equivalent to `Cache-Control: max-age=0`.</span></span>
         - <span data-ttu-id="b423b-164">`no-store`: Never cache the content.</span><span class="sxs-lookup"><span data-stu-id="b423b-164">`no-store`: Never cache the content.</span></span> <span data-ttu-id="b423b-165">Remove content if it has been previously stored.</span><span class="sxs-lookup"><span data-stu-id="b423b-165">Remove content if it has been previously stored.</span></span>

<span data-ttu-id="b423b-166">**Expires:**</span><span class="sxs-lookup"><span data-stu-id="b423b-166">**Expires:**</span></span>
- <span data-ttu-id="b423b-167">Legacy header introduced in HTTP 1.0; supported for backwards compatibility.</span><span class="sxs-lookup"><span data-stu-id="b423b-167">Legacy header introduced in HTTP 1.0; supported for backwards compatibility.</span></span>
- <span data-ttu-id="b423b-168">Uses a date-based expiration time with second precision.</span><span class="sxs-lookup"><span data-stu-id="b423b-168">Uses a date-based expiration time with second precision.</span></span> 
- <span data-ttu-id="b423b-169">Similar to `Cache-Control: max-age`.</span><span class="sxs-lookup"><span data-stu-id="b423b-169">Similar to `Cache-Control: max-age`.</span></span>
- <span data-ttu-id="b423b-170">Used when `Cache-Control` doesn't exist.</span><span class="sxs-lookup"><span data-stu-id="b423b-170">Used when `Cache-Control` doesn't exist.</span></span>

<span data-ttu-id="b423b-171">**Pragma:**</span><span class="sxs-lookup"><span data-stu-id="b423b-171">**Pragma:**</span></span>
   - <span data-ttu-id="b423b-172">Not honored by Azure CDN, by default.</span><span class="sxs-lookup"><span data-stu-id="b423b-172">Not honored by Azure CDN, by default.</span></span>
   - <span data-ttu-id="b423b-173">Legacy header introduced in HTTP 1.0; supported for backwards compatibility.</span><span class="sxs-lookup"><span data-stu-id="b423b-173">Legacy header introduced in HTTP 1.0; supported for backwards compatibility.</span></span>
   - <span data-ttu-id="b423b-174">Used as a client request header with the following directive: `no-cache`.</span><span class="sxs-lookup"><span data-stu-id="b423b-174">Used as a client request header with the following directive: `no-cache`.</span></span> <span data-ttu-id="b423b-175">This directive instructs the server to deliver a fresh version of the resource.</span><span class="sxs-lookup"><span data-stu-id="b423b-175">This directive instructs the server to deliver a fresh version of the resource.</span></span>
   - <span data-ttu-id="b423b-176">`Pragma: no-cache` is equivalent to `Cache-Control: no-cache`.</span><span class="sxs-lookup"><span data-stu-id="b423b-176">`Pragma: no-cache` is equivalent to `Cache-Control: no-cache`.</span></span>

## <a name="validators"></a><span data-ttu-id="b423b-177">Validators</span><span class="sxs-lookup"><span data-stu-id="b423b-177">Validators</span></span>

<span data-ttu-id="b423b-178">When the cache is stale, HTTP cache validators are used to compare the cached version of a file with the version on the origin server.</span><span class="sxs-lookup"><span data-stu-id="b423b-178">When the cache is stale, HTTP cache validators are used to compare the cached version of a file with the version on the origin server.</span></span> <span data-ttu-id="b423b-179">**Azure CDN Standard/Premium from Verizon** supports both `ETag` and `Last-Modified` validators by default, while **Azure CDN Standard from Microsoft** and **Azure CDN Standard from Akamai** supports only `Last-Modified` by default.</span><span class="sxs-lookup"><span data-stu-id="b423b-179">**Azure CDN Standard/Premium from Verizon** supports both `ETag` and `Last-Modified` validators by default, while **Azure CDN Standard from Microsoft** and **Azure CDN Standard from Akamai** supports only `Last-Modified` by default.</span></span>

<span data-ttu-id="b423b-180">**ETag:**</span><span class="sxs-lookup"><span data-stu-id="b423b-180">**ETag:**</span></span>
- <span data-ttu-id="b423b-181">**Azure CDN Standard/Premium from Verizon** supports `ETag` by default, while **Azure CDN Standard from Microsoft** and **Azure CDN Standard from Akamai** do not.</span><span class="sxs-lookup"><span data-stu-id="b423b-181">**Azure CDN Standard/Premium from Verizon** supports `ETag` by default, while **Azure CDN Standard from Microsoft** and **Azure CDN Standard from Akamai** do not.</span></span>
- <span data-ttu-id="b423b-182">`ETag` defines a string that is unique for every file and version of a file.</span><span class="sxs-lookup"><span data-stu-id="b423b-182">`ETag` defines a string that is unique for every file and version of a file.</span></span> <span data-ttu-id="b423b-183">For example, `ETag: "17f0ddd99ed5bbe4edffdd6496d7131f"`.</span><span class="sxs-lookup"><span data-stu-id="b423b-183">For example, `ETag: "17f0ddd99ed5bbe4edffdd6496d7131f"`.</span></span>
- <span data-ttu-id="b423b-184">Introduced in HTTP 1.1 and is more current than `Last-Modified`.</span><span class="sxs-lookup"><span data-stu-id="b423b-184">Introduced in HTTP 1.1 and is more current than `Last-Modified`.</span></span> <span data-ttu-id="b423b-185">Useful when the last modified date is difficult to determine.</span><span class="sxs-lookup"><span data-stu-id="b423b-185">Useful when the last modified date is difficult to determine.</span></span>
- <span data-ttu-id="b423b-186">Supports both strong validation and weak validation; however, Azure CDN supports only strong validation.</span><span class="sxs-lookup"><span data-stu-id="b423b-186">Supports both strong validation and weak validation; however, Azure CDN supports only strong validation.</span></span> <span data-ttu-id="b423b-187">For strong validation, the two resource representations must be byte-for-byte identical.</span><span class="sxs-lookup"><span data-stu-id="b423b-187">For strong validation, the two resource representations must be byte-for-byte identical.</span></span> 
- <span data-ttu-id="b423b-188">A cache validates a file that uses `ETag` by sending an `If-None-Match` header with one or more `ETag` validators in the request.</span><span class="sxs-lookup"><span data-stu-id="b423b-188">A cache validates a file that uses `ETag` by sending an `If-None-Match` header with one or more `ETag` validators in the request.</span></span> <span data-ttu-id="b423b-189">For example, `If-None-Match: "17f0ddd99ed5bbe4edffdd6496d7131f"`.</span><span class="sxs-lookup"><span data-stu-id="b423b-189">For example, `If-None-Match: "17f0ddd99ed5bbe4edffdd6496d7131f"`.</span></span> <span data-ttu-id="b423b-190">If the server’s version matches an `ETag` validator on the list, it sends status code 304 (Not Modified) in its response.</span><span class="sxs-lookup"><span data-stu-id="b423b-190">If the server’s version matches an `ETag` validator on the list, it sends status code 304 (Not Modified) in its response.</span></span> <span data-ttu-id="b423b-191">If the version is different, the server responds with status code 200 (OK) and the updated resource.</span><span class="sxs-lookup"><span data-stu-id="b423b-191">If the version is different, the server responds with status code 200 (OK) and the updated resource.</span></span>

<span data-ttu-id="b423b-192">**Last-Modified:**</span><span class="sxs-lookup"><span data-stu-id="b423b-192">**Last-Modified:**</span></span>
- <span data-ttu-id="b423b-193">For **Azure CDN Standard/Premium from Verizon** only, `Last-Modified` is used if `ETag` is not part of the HTTP response.</span><span class="sxs-lookup"><span data-stu-id="b423b-193">For **Azure CDN Standard/Premium from Verizon** only, `Last-Modified` is used if `ETag` is not part of the HTTP response.</span></span> 
- <span data-ttu-id="b423b-194">Specifies the date and time that the origin server has determined the resource was last modified.</span><span class="sxs-lookup"><span data-stu-id="b423b-194">Specifies the date and time that the origin server has determined the resource was last modified.</span></span> <span data-ttu-id="b423b-195">For example, `Last-Modified: Thu, 19 Oct 2017 09:28:00 GMT`.</span><span class="sxs-lookup"><span data-stu-id="b423b-195">For example, `Last-Modified: Thu, 19 Oct 2017 09:28:00 GMT`.</span></span>
- <span data-ttu-id="b423b-196">A cache validates a file using `Last-Modified` by sending an `If-Modified-Since` header with a date and time in the request.</span><span class="sxs-lookup"><span data-stu-id="b423b-196">A cache validates a file using `Last-Modified` by sending an `If-Modified-Since` header with a date and time in the request.</span></span> <span data-ttu-id="b423b-197">The origin server compares that date with the `Last-Modified` header of the latest resource.</span><span class="sxs-lookup"><span data-stu-id="b423b-197">The origin server compares that date with the `Last-Modified` header of the latest resource.</span></span> <span data-ttu-id="b423b-198">If the resource has not been modified since the specified time, the server returns status code 304 (Not Modified) in its response.</span><span class="sxs-lookup"><span data-stu-id="b423b-198">If the resource has not been modified since the specified time, the server returns status code 304 (Not Modified) in its response.</span></span> <span data-ttu-id="b423b-199">If the resource has been modified, the server returns status code 200 (OK) and the updated resource.</span><span class="sxs-lookup"><span data-stu-id="b423b-199">If the resource has been modified, the server returns status code 200 (OK) and the updated resource.</span></span>

## <a name="determining-which-files-can-be-cached"></a><span data-ttu-id="b423b-200">Determining which files can be cached</span><span class="sxs-lookup"><span data-stu-id="b423b-200">Determining which files can be cached</span></span>

<span data-ttu-id="b423b-201">Not all resources can be cached.</span><span class="sxs-lookup"><span data-stu-id="b423b-201">Not all resources can be cached.</span></span> <span data-ttu-id="b423b-202">The following table shows what resources can be cached, based on the type of HTTP response.</span><span class="sxs-lookup"><span data-stu-id="b423b-202">The following table shows what resources can be cached, based on the type of HTTP response.</span></span> <span data-ttu-id="b423b-203">Resources delivered with HTTP responses that don't meet all of these conditions cannot be cached.</span><span class="sxs-lookup"><span data-stu-id="b423b-203">Resources delivered with HTTP responses that don't meet all of these conditions cannot be cached.</span></span> <span data-ttu-id="b423b-204">For **Azure CDN Premium from Verizon** only, you can use the rules engine to customize some of these conditions.</span><span class="sxs-lookup"><span data-stu-id="b423b-204">For **Azure CDN Premium from Verizon** only, you can use the rules engine to customize some of these conditions.</span></span>

|                   | <span data-ttu-id="b423b-205">Azure CDN from Microsoft</span><span class="sxs-lookup"><span data-stu-id="b423b-205">Azure CDN from Microsoft</span></span>          | <span data-ttu-id="b423b-206">Azure CDN from Verizon</span><span class="sxs-lookup"><span data-stu-id="b423b-206">Azure CDN from Verizon</span></span> | <span data-ttu-id="b423b-207">Azure CDN from Akamai</span><span class="sxs-lookup"><span data-stu-id="b423b-207">Azure CDN from Akamai</span></span>        |
|-------------------|-----------------------------------|------------------------|------------------------------|
| <span data-ttu-id="b423b-208">HTTP status codes</span><span class="sxs-lookup"><span data-stu-id="b423b-208">HTTP status codes</span></span> | <span data-ttu-id="b423b-209">200, 203, 206, 300, 301, 410, 416</span><span class="sxs-lookup"><span data-stu-id="b423b-209">200, 203, 206, 300, 301, 410, 416</span></span> | <span data-ttu-id="b423b-210">200</span><span class="sxs-lookup"><span data-stu-id="b423b-210">200</span></span>                    | <span data-ttu-id="b423b-211">200, 203, 300, 301, 302, 401</span><span class="sxs-lookup"><span data-stu-id="b423b-211">200, 203, 300, 301, 302, 401</span></span> |
| <span data-ttu-id="b423b-212">HTTP methods</span><span class="sxs-lookup"><span data-stu-id="b423b-212">HTTP methods</span></span>      | <span data-ttu-id="b423b-213">GET, HEAD</span><span class="sxs-lookup"><span data-stu-id="b423b-213">GET, HEAD</span></span>                         | <span data-ttu-id="b423b-214">GET</span><span class="sxs-lookup"><span data-stu-id="b423b-214">GET</span></span>                    | <span data-ttu-id="b423b-215">GET</span><span class="sxs-lookup"><span data-stu-id="b423b-215">GET</span></span>                          |
| <span data-ttu-id="b423b-216">File size limits</span><span class="sxs-lookup"><span data-stu-id="b423b-216">File size limits</span></span>  | <span data-ttu-id="b423b-217">300 GB</span><span class="sxs-lookup"><span data-stu-id="b423b-217">300 GB</span></span>                            | <span data-ttu-id="b423b-218">300 GB</span><span class="sxs-lookup"><span data-stu-id="b423b-218">300 GB</span></span>                 | <span data-ttu-id="b423b-219">- General web delivery optimization: 1.8 GB</span><span class="sxs-lookup"><span data-stu-id="b423b-219">- General web delivery optimization: 1.8 GB</span></span><br /><span data-ttu-id="b423b-220">- Media streaming optimizations: 1.8 GB</span><span class="sxs-lookup"><span data-stu-id="b423b-220">- Media streaming optimizations: 1.8 GB</span></span><br /><span data-ttu-id="b423b-221">- Large file optimization: 150 GB</span><span class="sxs-lookup"><span data-stu-id="b423b-221">- Large file optimization: 150 GB</span></span> |

<span data-ttu-id="b423b-222">For **Azure CDN Standard from Microsoft** caching to work on a resource, the origin server must support any HEAD and GET HTTP requests and the content-length values must be the same for any HEAD and GET HTTP responses for the asset.</span><span class="sxs-lookup"><span data-stu-id="b423b-222">For **Azure CDN Standard from Microsoft** caching to work on a resource, the origin server must support any HEAD and GET HTTP requests and the content-length values must be the same for any HEAD and GET HTTP responses for the asset.</span></span> <span data-ttu-id="b423b-223">For a HEAD request, the origin server must support the HEAD request, and must respond with the same headers as if it had received a GET request.</span><span class="sxs-lookup"><span data-stu-id="b423b-223">For a HEAD request, the origin server must support the HEAD request, and must respond with the same headers as if it had received a GET request.</span></span>

## <a name="default-caching-behavior"></a><span data-ttu-id="b423b-224">Default caching behavior</span><span class="sxs-lookup"><span data-stu-id="b423b-224">Default caching behavior</span></span>

<span data-ttu-id="b423b-225">The following table describes the default caching behavior for the Azure CDN products and their optimizations.</span><span class="sxs-lookup"><span data-stu-id="b423b-225">The following table describes the default caching behavior for the Azure CDN products and their optimizations.</span></span>

|    | <span data-ttu-id="b423b-226">Microsoft: General web delivery</span><span class="sxs-lookup"><span data-stu-id="b423b-226">Microsoft: General web delivery</span></span> | <span data-ttu-id="b423b-227">Verizon: General web delivery</span><span class="sxs-lookup"><span data-stu-id="b423b-227">Verizon: General web delivery</span></span> | <span data-ttu-id="b423b-228">Verizon: DSA</span><span class="sxs-lookup"><span data-stu-id="b423b-228">Verizon: DSA</span></span> | <span data-ttu-id="b423b-229">Akamai: General web delivery</span><span class="sxs-lookup"><span data-stu-id="b423b-229">Akamai: General web delivery</span></span> | <span data-ttu-id="b423b-230">Akamai: DSA</span><span class="sxs-lookup"><span data-stu-id="b423b-230">Akamai: DSA</span></span> | <span data-ttu-id="b423b-231">Akamai: Large file download</span><span class="sxs-lookup"><span data-stu-id="b423b-231">Akamai: Large file download</span></span> | <span data-ttu-id="b423b-232">Akamai: general or VOD media streaming</span><span class="sxs-lookup"><span data-stu-id="b423b-232">Akamai: general or VOD media streaming</span></span> |
|------------------------|--------|-------|------|--------|------|-------|--------|
| <span data-ttu-id="b423b-233">**Honor origin**</span><span class="sxs-lookup"><span data-stu-id="b423b-233">**Honor origin**</span></span>       | <span data-ttu-id="b423b-234">Yes</span><span class="sxs-lookup"><span data-stu-id="b423b-234">Yes</span></span>    | <span data-ttu-id="b423b-235">Yes</span><span class="sxs-lookup"><span data-stu-id="b423b-235">Yes</span></span>   | <span data-ttu-id="b423b-236">No</span><span class="sxs-lookup"><span data-stu-id="b423b-236">No</span></span>   | <span data-ttu-id="b423b-237">Yes</span><span class="sxs-lookup"><span data-stu-id="b423b-237">Yes</span></span>    | <span data-ttu-id="b423b-238">No</span><span class="sxs-lookup"><span data-stu-id="b423b-238">No</span></span>   | <span data-ttu-id="b423b-239">Yes</span><span class="sxs-lookup"><span data-stu-id="b423b-239">Yes</span></span>   | <span data-ttu-id="b423b-240">Yes</span><span class="sxs-lookup"><span data-stu-id="b423b-240">Yes</span></span>    |
| <span data-ttu-id="b423b-241">**CDN cache duration**</span><span class="sxs-lookup"><span data-stu-id="b423b-241">**CDN cache duration**</span></span> | <span data-ttu-id="b423b-242">2 days</span><span class="sxs-lookup"><span data-stu-id="b423b-242">2 days</span></span> |<span data-ttu-id="b423b-243">7 days</span><span class="sxs-lookup"><span data-stu-id="b423b-243">7 days</span></span> | <span data-ttu-id="b423b-244">None</span><span class="sxs-lookup"><span data-stu-id="b423b-244">None</span></span> | <span data-ttu-id="b423b-245">7 days</span><span class="sxs-lookup"><span data-stu-id="b423b-245">7 days</span></span> | <span data-ttu-id="b423b-246">None</span><span class="sxs-lookup"><span data-stu-id="b423b-246">None</span></span> | <span data-ttu-id="b423b-247">1 day</span><span class="sxs-lookup"><span data-stu-id="b423b-247">1 day</span></span> | <span data-ttu-id="b423b-248">1 year</span><span class="sxs-lookup"><span data-stu-id="b423b-248">1 year</span></span> |

<span data-ttu-id="b423b-249">**Honor origin**: Specifies whether to honor the [supported cache-directive headers](#http-cache-directive-headers) if they exist in the HTTP response from the origin server.</span><span class="sxs-lookup"><span data-stu-id="b423b-249">**Honor origin**: Specifies whether to honor the [supported cache-directive headers](#http-cache-directive-headers) if they exist in the HTTP response from the origin server.</span></span>

<span data-ttu-id="b423b-250">**CDN cache duration**: Specifies the amount of time for which a resource is cached on the Azure CDN.</span><span class="sxs-lookup"><span data-stu-id="b423b-250">**CDN cache duration**: Specifies the amount of time for which a resource is cached on the Azure CDN.</span></span> <span data-ttu-id="b423b-251">However, if **Honor origin** is Yes and the HTTP response from the origin server includes the cache-directive header `Expires` or `Cache-Control: max-age`, Azure CDN uses the duration value specified by the header instead.</span><span class="sxs-lookup"><span data-stu-id="b423b-251">However, if **Honor origin** is Yes and the HTTP response from the origin server includes the cache-directive header `Expires` or `Cache-Control: max-age`, Azure CDN uses the duration value specified by the header instead.</span></span> 

## <a name="next-steps"></a><span data-ttu-id="b423b-252">Next steps</span><span class="sxs-lookup"><span data-stu-id="b423b-252">Next steps</span></span>

- <span data-ttu-id="b423b-253">To learn how to customize and override the default caching behavior on the CDN through caching rules, see [Control Azure CDN caching behavior with caching rules](cdn-caching-rules.md).</span><span class="sxs-lookup"><span data-stu-id="b423b-253">To learn how to customize and override the default caching behavior on the CDN through caching rules, see [Control Azure CDN caching behavior with caching rules](cdn-caching-rules.md).</span></span> 
- <span data-ttu-id="b423b-254">To learn how to use query strings to control caching behavior, see [Control Azure CDN caching behavior with query strings](cdn-query-string.md).</span><span class="sxs-lookup"><span data-stu-id="b423b-254">To learn how to use query strings to control caching behavior, see [Control Azure CDN caching behavior with query strings](cdn-query-string.md).</span></span>



