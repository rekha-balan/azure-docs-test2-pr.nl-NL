---
title: Large file download optimization with Azure CDN
description: This article explains how large file downloads can be optimized.
services: cdn
documentationcenter: ''
author: dksimpson
manager: akucer
editor: ''
ms.assetid: ''
ms.service: cdn
ms.workload: tbd
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 05/01/2018
ms.author: v-deasim
ms.openlocfilehash: 2bdb6bdea7b6180e34458883d026161403e4cb58
ms.sourcegitcommit: d1451406a010fd3aa854dc8e5b77dc5537d8050e
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 09/13/2018
ms.locfileid: "44866422"
---
# <a name="large-file-download-optimization-with-azure-cdn"></a><span data-ttu-id="fb7e3-103">Large file download optimization with Azure CDN</span><span class="sxs-lookup"><span data-stu-id="fb7e3-103">Large file download optimization with Azure CDN</span></span>

<span data-ttu-id="fb7e3-104">File sizes of content delivered over the internet continue to grow due to enhanced functionality, improved graphics, and rich media content.</span><span class="sxs-lookup"><span data-stu-id="fb7e3-104">File sizes of content delivered over the internet continue to grow due to enhanced functionality, improved graphics, and rich media content.</span></span> <span data-ttu-id="fb7e3-105">This growth is driven by many factors: broadband penetration, larger inexpensive storage devices, widespread increase of high-definition video, and internet-connected devices (IoT).</span><span class="sxs-lookup"><span data-stu-id="fb7e3-105">This growth is driven by many factors: broadband penetration, larger inexpensive storage devices, widespread increase of high-definition video, and internet-connected devices (IoT).</span></span> <span data-ttu-id="fb7e3-106">A fast and efficient delivery mechanism for large files is critical to ensure a smooth and enjoyable consumer experience.</span><span class="sxs-lookup"><span data-stu-id="fb7e3-106">A fast and efficient delivery mechanism for large files is critical to ensure a smooth and enjoyable consumer experience.</span></span>

<span data-ttu-id="fb7e3-107">Delivery of large files has several challenges.</span><span class="sxs-lookup"><span data-stu-id="fb7e3-107">Delivery of large files has several challenges.</span></span> <span data-ttu-id="fb7e3-108">First, the average time to download a large file can be significant because applications might not download all data sequentially.</span><span class="sxs-lookup"><span data-stu-id="fb7e3-108">First, the average time to download a large file can be significant because applications might not download all data sequentially.</span></span> <span data-ttu-id="fb7e3-109">In some cases, applications might download the last part of a file before the first part.</span><span class="sxs-lookup"><span data-stu-id="fb7e3-109">In some cases, applications might download the last part of a file before the first part.</span></span> <span data-ttu-id="fb7e3-110">When only a small amount of a file is requested or a user pauses a download, the download can fail.</span><span class="sxs-lookup"><span data-stu-id="fb7e3-110">When only a small amount of a file is requested or a user pauses a download, the download can fail.</span></span> <span data-ttu-id="fb7e3-111">The download also might be delayed until after the content delivery network (CDN) retrieves the entire file from the origin server.</span><span class="sxs-lookup"><span data-stu-id="fb7e3-111">The download also might be delayed until after the content delivery network (CDN) retrieves the entire file from the origin server.</span></span> 

<span data-ttu-id="fb7e3-112">Second, the latency between a user's machine and the file determines the speed at which they can view content.</span><span class="sxs-lookup"><span data-stu-id="fb7e3-112">Second, the latency between a user's machine and the file determines the speed at which they can view content.</span></span> <span data-ttu-id="fb7e3-113">In addition, network congestion and capacity problems also affect throughput.</span><span class="sxs-lookup"><span data-stu-id="fb7e3-113">In addition, network congestion and capacity problems also affect throughput.</span></span> <span data-ttu-id="fb7e3-114">Greater distances between servers and users create additional opportunities for packet loss to occur, which reduces quality.</span><span class="sxs-lookup"><span data-stu-id="fb7e3-114">Greater distances between servers and users create additional opportunities for packet loss to occur, which reduces quality.</span></span> <span data-ttu-id="fb7e3-115">The reduction in quality caused by limited throughput and increased packet loss might increase the wait time for a file download to finish.</span><span class="sxs-lookup"><span data-stu-id="fb7e3-115">The reduction in quality caused by limited throughput and increased packet loss might increase the wait time for a file download to finish.</span></span> 

<span data-ttu-id="fb7e3-116">Third, many large files are not delivered in their entirety.</span><span class="sxs-lookup"><span data-stu-id="fb7e3-116">Third, many large files are not delivered in their entirety.</span></span> <span data-ttu-id="fb7e3-117">Users might cancel a download halfway through or watch only the first few minutes of a long MP4 video.</span><span class="sxs-lookup"><span data-stu-id="fb7e3-117">Users might cancel a download halfway through or watch only the first few minutes of a long MP4 video.</span></span> <span data-ttu-id="fb7e3-118">Therefore, software and media delivery companies want to deliver only the portion of a file that's requested.</span><span class="sxs-lookup"><span data-stu-id="fb7e3-118">Therefore, software and media delivery companies want to deliver only the portion of a file that's requested.</span></span> <span data-ttu-id="fb7e3-119">Efficient distribution of the requested portions reduces the egress traffic from the origin server.</span><span class="sxs-lookup"><span data-stu-id="fb7e3-119">Efficient distribution of the requested portions reduces the egress traffic from the origin server.</span></span> <span data-ttu-id="fb7e3-120">Efficient distribution also reduces the memory and I/O pressure on the origin server.</span><span class="sxs-lookup"><span data-stu-id="fb7e3-120">Efficient distribution also reduces the memory and I/O pressure on the origin server.</span></span> 


## <a name="optimize-for-delivery-of-large-files-with-azure-cdn-from-microsoft"></a><span data-ttu-id="fb7e3-121">Optimize for delivery of large files with Azure CDN from Microsoft</span><span class="sxs-lookup"><span data-stu-id="fb7e3-121">Optimize for delivery of large files with Azure CDN from Microsoft</span></span>

<span data-ttu-id="fb7e3-122">**Azure CDN Standard from Microsoft** endpoints deliver large files without a cap on file size.</span><span class="sxs-lookup"><span data-stu-id="fb7e3-122">**Azure CDN Standard from Microsoft** endpoints deliver large files without a cap on file size.</span></span> <span data-ttu-id="fb7e3-123">Additional features are turned on by default to make delivery of large files faster.</span><span class="sxs-lookup"><span data-stu-id="fb7e3-123">Additional features are turned on by default to make delivery of large files faster.</span></span>

### <a name="object-chunking"></a><span data-ttu-id="fb7e3-124">Object chunking</span><span class="sxs-lookup"><span data-stu-id="fb7e3-124">Object chunking</span></span> 

<span data-ttu-id="fb7e3-125">**Azure CDN Standard from Microsoft** uses a technique called object chunking.</span><span class="sxs-lookup"><span data-stu-id="fb7e3-125">**Azure CDN Standard from Microsoft** uses a technique called object chunking.</span></span> <span data-ttu-id="fb7e3-126">When a large file is requested, the CDN retrieves smaller pieces of the file from the origin.</span><span class="sxs-lookup"><span data-stu-id="fb7e3-126">When a large file is requested, the CDN retrieves smaller pieces of the file from the origin.</span></span> <span data-ttu-id="fb7e3-127">After the CDN POP server receives a full or byte-range file request, the CDN edge server requests the file from the origin in chunks of 8 MB.</span><span class="sxs-lookup"><span data-stu-id="fb7e3-127">After the CDN POP server receives a full or byte-range file request, the CDN edge server requests the file from the origin in chunks of 8 MB.</span></span> 

<span data-ttu-id="fb7e3-128">After the chunk arrives at the CDN edge, it's cached and immediately served to the user.</span><span class="sxs-lookup"><span data-stu-id="fb7e3-128">After the chunk arrives at the CDN edge, it's cached and immediately served to the user.</span></span> <span data-ttu-id="fb7e3-129">The CDN then prefetches the next chunk in parallel.</span><span class="sxs-lookup"><span data-stu-id="fb7e3-129">The CDN then prefetches the next chunk in parallel.</span></span> <span data-ttu-id="fb7e3-130">This prefetch ensures that the content stays one chunk ahead of the user, which reduces latency.</span><span class="sxs-lookup"><span data-stu-id="fb7e3-130">This prefetch ensures that the content stays one chunk ahead of the user, which reduces latency.</span></span> <span data-ttu-id="fb7e3-131">This process continues until the entire file is downloaded (if requested), all byte ranges are available (if requested), or the client terminates the connection.</span><span class="sxs-lookup"><span data-stu-id="fb7e3-131">This process continues until the entire file is downloaded (if requested), all byte ranges are available (if requested), or the client terminates the connection.</span></span> 

<span data-ttu-id="fb7e3-132">For more information on the byte-range request, see [RFC 7233](https://tools.ietf.org/html/rfc7233).</span><span class="sxs-lookup"><span data-stu-id="fb7e3-132">For more information on the byte-range request, see [RFC 7233](https://tools.ietf.org/html/rfc7233).</span></span>

<span data-ttu-id="fb7e3-133">The CDN caches any chunks as they're received.</span><span class="sxs-lookup"><span data-stu-id="fb7e3-133">The CDN caches any chunks as they're received.</span></span> <span data-ttu-id="fb7e3-134">The entire file doesn't need to be cached on the CDN cache.</span><span class="sxs-lookup"><span data-stu-id="fb7e3-134">The entire file doesn't need to be cached on the CDN cache.</span></span> <span data-ttu-id="fb7e3-135">Subsequent requests for the file or byte ranges are served from the CDN cache.</span><span class="sxs-lookup"><span data-stu-id="fb7e3-135">Subsequent requests for the file or byte ranges are served from the CDN cache.</span></span> <span data-ttu-id="fb7e3-136">If not all the chunks are cached on the CDN, prefetch is used to request chunks from the origin.</span><span class="sxs-lookup"><span data-stu-id="fb7e3-136">If not all the chunks are cached on the CDN, prefetch is used to request chunks from the origin.</span></span> <span data-ttu-id="fb7e3-137">This optimization relies on the ability of the origin server to support byte-range requests; if the origin server doesn't support byte-range requests, this optimization isn't effective.</span><span class="sxs-lookup"><span data-stu-id="fb7e3-137">This optimization relies on the ability of the origin server to support byte-range requests; if the origin server doesn't support byte-range requests, this optimization isn't effective.</span></span> 

### <a name="conditions-for-large-file-optimization"></a><span data-ttu-id="fb7e3-138">Conditions for large file optimization</span><span class="sxs-lookup"><span data-stu-id="fb7e3-138">Conditions for large file optimization</span></span>
<span data-ttu-id="fb7e3-139">Large file optimization features for **Azure CDN Standard from Microsoft** are turned on by default when you use the general web delivery optimization type.</span><span class="sxs-lookup"><span data-stu-id="fb7e3-139">Large file optimization features for **Azure CDN Standard from Microsoft** are turned on by default when you use the general web delivery optimization type.</span></span> <span data-ttu-id="fb7e3-140">There are no limits on maximum file size.</span><span class="sxs-lookup"><span data-stu-id="fb7e3-140">There are no limits on maximum file size.</span></span>


## <a name="optimize-for-delivery-of-large-files-with-azure-cdn-from-verizon"></a><span data-ttu-id="fb7e3-141">Optimize for delivery of large files with Azure CDN from Verizon</span><span class="sxs-lookup"><span data-stu-id="fb7e3-141">Optimize for delivery of large files with Azure CDN from Verizon</span></span>

<span data-ttu-id="fb7e3-142">**Azure CDN Standard from Verizon** and **Azure CDN Premium from Verizon** endpoints deliver large files without a cap on file size.</span><span class="sxs-lookup"><span data-stu-id="fb7e3-142">**Azure CDN Standard from Verizon** and **Azure CDN Premium from Verizon** endpoints deliver large files without a cap on file size.</span></span> <span data-ttu-id="fb7e3-143">Additional features are turned on by default to make delivery of large files faster.</span><span class="sxs-lookup"><span data-stu-id="fb7e3-143">Additional features are turned on by default to make delivery of large files faster.</span></span>

### <a name="complete-cache-fill"></a><span data-ttu-id="fb7e3-144">Complete cache fill</span><span class="sxs-lookup"><span data-stu-id="fb7e3-144">Complete cache fill</span></span>

<span data-ttu-id="fb7e3-145">The default complete cache fill feature enables the CDN to pull a file into the cache when an initial request is abandoned or lost.</span><span class="sxs-lookup"><span data-stu-id="fb7e3-145">The default complete cache fill feature enables the CDN to pull a file into the cache when an initial request is abandoned or lost.</span></span> 

<span data-ttu-id="fb7e3-146">Complete cache fill is most useful for large assets.</span><span class="sxs-lookup"><span data-stu-id="fb7e3-146">Complete cache fill is most useful for large assets.</span></span> <span data-ttu-id="fb7e3-147">Typically, users don't download them from start to finish.</span><span class="sxs-lookup"><span data-stu-id="fb7e3-147">Typically, users don't download them from start to finish.</span></span> <span data-ttu-id="fb7e3-148">They use progressive download.</span><span class="sxs-lookup"><span data-stu-id="fb7e3-148">They use progressive download.</span></span> <span data-ttu-id="fb7e3-149">The default behavior forces the edge server to initiate a background fetch of the asset from the origin server.</span><span class="sxs-lookup"><span data-stu-id="fb7e3-149">The default behavior forces the edge server to initiate a background fetch of the asset from the origin server.</span></span> <span data-ttu-id="fb7e3-150">Afterward, the asset is in the edge server's local cache.</span><span class="sxs-lookup"><span data-stu-id="fb7e3-150">Afterward, the asset is in the edge server's local cache.</span></span> <span data-ttu-id="fb7e3-151">After the full object is in the cache, the edge server fulfills byte-range requests to the CDN for the cached object.</span><span class="sxs-lookup"><span data-stu-id="fb7e3-151">After the full object is in the cache, the edge server fulfills byte-range requests to the CDN for the cached object.</span></span>

<span data-ttu-id="fb7e3-152">The default behavior can be disabled through the rules engine in **Azure CDN Premium from Verizon**.</span><span class="sxs-lookup"><span data-stu-id="fb7e3-152">The default behavior can be disabled through the rules engine in **Azure CDN Premium from Verizon**.</span></span>

### <a name="peer-cache-fill-hot-filing"></a><span data-ttu-id="fb7e3-153">Peer cache fill hot-filing</span><span class="sxs-lookup"><span data-stu-id="fb7e3-153">Peer cache fill hot-filing</span></span>

<span data-ttu-id="fb7e3-154">The default peer cache fill hot-filing feature uses a sophisticated proprietary algorithm.</span><span class="sxs-lookup"><span data-stu-id="fb7e3-154">The default peer cache fill hot-filing feature uses a sophisticated proprietary algorithm.</span></span> <span data-ttu-id="fb7e3-155">It uses additional edge caching servers based on bandwidth and aggregate requests metrics to fulfill client requests for large, highly popular objects.</span><span class="sxs-lookup"><span data-stu-id="fb7e3-155">It uses additional edge caching servers based on bandwidth and aggregate requests metrics to fulfill client requests for large, highly popular objects.</span></span> <span data-ttu-id="fb7e3-156">This feature prevents a situation in which large numbers of extra requests are sent to a user's origin server.</span><span class="sxs-lookup"><span data-stu-id="fb7e3-156">This feature prevents a situation in which large numbers of extra requests are sent to a user's origin server.</span></span> 

### <a name="conditions-for-large-file-optimization"></a><span data-ttu-id="fb7e3-157">Conditions for large file optimization</span><span class="sxs-lookup"><span data-stu-id="fb7e3-157">Conditions for large file optimization</span></span>

<span data-ttu-id="fb7e3-158">Large file optimization features for **Azure CDN Standard from Verizon** and **Azure CDN Premium from Verizon** are turned on by default when you use the general web delivery optimization type.</span><span class="sxs-lookup"><span data-stu-id="fb7e3-158">Large file optimization features for **Azure CDN Standard from Verizon** and **Azure CDN Premium from Verizon** are turned on by default when you use the general web delivery optimization type.</span></span> <span data-ttu-id="fb7e3-159">There are no limits on maximum file size.</span><span class="sxs-lookup"><span data-stu-id="fb7e3-159">There are no limits on maximum file size.</span></span> 


## <a name="optimize-for-delivery-of-large-files-with-azure-cdn-standard-from-akamai"></a><span data-ttu-id="fb7e3-160">Optimize for delivery of large files with Azure CDN Standard from Akamai</span><span class="sxs-lookup"><span data-stu-id="fb7e3-160">Optimize for delivery of large files with Azure CDN Standard from Akamai</span></span>

<span data-ttu-id="fb7e3-161">**Azure CDN Standard from Akamai** profile endpoints offer a feature that delivers large files efficiently to users across the globe at scale.</span><span class="sxs-lookup"><span data-stu-id="fb7e3-161">**Azure CDN Standard from Akamai** profile endpoints offer a feature that delivers large files efficiently to users across the globe at scale.</span></span> <span data-ttu-id="fb7e3-162">The feature reduces latencies because it reduces the load on the origin servers.</span><span class="sxs-lookup"><span data-stu-id="fb7e3-162">The feature reduces latencies because it reduces the load on the origin servers.</span></span>

<span data-ttu-id="fb7e3-163">The large file optimization type feature turns on network optimizations and configurations to deliver large files faster and more responsively.</span><span class="sxs-lookup"><span data-stu-id="fb7e3-163">The large file optimization type feature turns on network optimizations and configurations to deliver large files faster and more responsively.</span></span> <span data-ttu-id="fb7e3-164">General web delivery with **Azure CDN Standard from Akamai** endpoints caches files only below 1.8 GB and can tunnel (not cache) files up to 150 GB.</span><span class="sxs-lookup"><span data-stu-id="fb7e3-164">General web delivery with **Azure CDN Standard from Akamai** endpoints caches files only below 1.8 GB and can tunnel (not cache) files up to 150 GB.</span></span> <span data-ttu-id="fb7e3-165">Large file optimization caches files up to 150 GB.</span><span class="sxs-lookup"><span data-stu-id="fb7e3-165">Large file optimization caches files up to 150 GB.</span></span>

<span data-ttu-id="fb7e3-166">Large file optimization is effective when certain conditions are satisfied.</span><span class="sxs-lookup"><span data-stu-id="fb7e3-166">Large file optimization is effective when certain conditions are satisfied.</span></span> <span data-ttu-id="fb7e3-167">Conditions include how the origin server operates and the sizes and types of the files that are requested.</span><span class="sxs-lookup"><span data-stu-id="fb7e3-167">Conditions include how the origin server operates and the sizes and types of the files that are requested.</span></span> 

### <a name="configure-an-akamai-cdn-endpoint-to-optimize-delivery-of-large-files"></a><span data-ttu-id="fb7e3-168">Configure an Akamai CDN endpoint to optimize delivery of large files</span><span class="sxs-lookup"><span data-stu-id="fb7e3-168">Configure an Akamai CDN endpoint to optimize delivery of large files</span></span>

<span data-ttu-id="fb7e3-169">You can configure your **Azure CDN Standard from Akamai** endpoint to optimize delivery for large files via the Azure portal.</span><span class="sxs-lookup"><span data-stu-id="fb7e3-169">You can configure your **Azure CDN Standard from Akamai** endpoint to optimize delivery for large files via the Azure portal.</span></span> <span data-ttu-id="fb7e3-170">You can also use the REST APIs or any of the client SDKs to do this.</span><span class="sxs-lookup"><span data-stu-id="fb7e3-170">You can also use the REST APIs or any of the client SDKs to do this.</span></span> <span data-ttu-id="fb7e3-171">The following steps show the process via the Azure portal for an **Azure CDN Standard from Akamai** profile:</span><span class="sxs-lookup"><span data-stu-id="fb7e3-171">The following steps show the process via the Azure portal for an **Azure CDN Standard from Akamai** profile:</span></span>

1. <span data-ttu-id="fb7e3-172">To add a new endpoint, on an Akamai **CDN profile** page, select **Endpoint**.</span><span class="sxs-lookup"><span data-stu-id="fb7e3-172">To add a new endpoint, on an Akamai **CDN profile** page, select **Endpoint**.</span></span>

    ![New endpoint](./media/cdn-large-file-optimization/cdn-new-akamai-endpoint.png)    
 
2. <span data-ttu-id="fb7e3-174">In the **Optimized for** drop-down list, select **Large file download**.</span><span class="sxs-lookup"><span data-stu-id="fb7e3-174">In the **Optimized for** drop-down list, select **Large file download**.</span></span>

    ![Large file optimization selected](./media/cdn-large-file-optimization/cdn-large-file-select.png)


<span data-ttu-id="fb7e3-176">After you create the CDN endpoint, it applies the large file optimizations for all files that match certain criteria.</span><span class="sxs-lookup"><span data-stu-id="fb7e3-176">After you create the CDN endpoint, it applies the large file optimizations for all files that match certain criteria.</span></span> <span data-ttu-id="fb7e3-177">The following section describes this process.</span><span class="sxs-lookup"><span data-stu-id="fb7e3-177">The following section describes this process.</span></span>

### <a name="object-chunking"></a><span data-ttu-id="fb7e3-178">Object chunking</span><span class="sxs-lookup"><span data-stu-id="fb7e3-178">Object chunking</span></span> 

<span data-ttu-id="fb7e3-179">Large file optimization with **Azure CDN Standard from Akamai** uses a technique called object chunking.</span><span class="sxs-lookup"><span data-stu-id="fb7e3-179">Large file optimization with **Azure CDN Standard from Akamai** uses a technique called object chunking.</span></span> <span data-ttu-id="fb7e3-180">When a large file is requested, the CDN retrieves smaller pieces of the file from the origin.</span><span class="sxs-lookup"><span data-stu-id="fb7e3-180">When a large file is requested, the CDN retrieves smaller pieces of the file from the origin.</span></span> <span data-ttu-id="fb7e3-181">After the CDN POP server receives a full or byte-range file request, it checks whether the file type is supported for this optimization.</span><span class="sxs-lookup"><span data-stu-id="fb7e3-181">After the CDN POP server receives a full or byte-range file request, it checks whether the file type is supported for this optimization.</span></span> <span data-ttu-id="fb7e3-182">It also checks whether the file type meets the file size requirements.</span><span class="sxs-lookup"><span data-stu-id="fb7e3-182">It also checks whether the file type meets the file size requirements.</span></span> <span data-ttu-id="fb7e3-183">If the file size is greater than 10 MB, the CDN edge server requests the file from the origin in chunks of 2 MB.</span><span class="sxs-lookup"><span data-stu-id="fb7e3-183">If the file size is greater than 10 MB, the CDN edge server requests the file from the origin in chunks of 2 MB.</span></span> 

<span data-ttu-id="fb7e3-184">After the chunk arrives at the CDN edge, it's cached and immediately served to the user.</span><span class="sxs-lookup"><span data-stu-id="fb7e3-184">After the chunk arrives at the CDN edge, it's cached and immediately served to the user.</span></span> <span data-ttu-id="fb7e3-185">The CDN then prefetches the next chunk in parallel.</span><span class="sxs-lookup"><span data-stu-id="fb7e3-185">The CDN then prefetches the next chunk in parallel.</span></span> <span data-ttu-id="fb7e3-186">This prefetch ensures that the content stays one chunk ahead of the user, which reduces latency.</span><span class="sxs-lookup"><span data-stu-id="fb7e3-186">This prefetch ensures that the content stays one chunk ahead of the user, which reduces latency.</span></span> <span data-ttu-id="fb7e3-187">This process continues until the entire file is downloaded (if requested), all byte ranges are available (if requested), or the client terminates the connection.</span><span class="sxs-lookup"><span data-stu-id="fb7e3-187">This process continues until the entire file is downloaded (if requested), all byte ranges are available (if requested), or the client terminates the connection.</span></span> 

<span data-ttu-id="fb7e3-188">For more information on the byte-range request, see [RFC 7233](https://tools.ietf.org/html/rfc7233).</span><span class="sxs-lookup"><span data-stu-id="fb7e3-188">For more information on the byte-range request, see [RFC 7233](https://tools.ietf.org/html/rfc7233).</span></span>

<span data-ttu-id="fb7e3-189">The CDN caches any chunks as they're received.</span><span class="sxs-lookup"><span data-stu-id="fb7e3-189">The CDN caches any chunks as they're received.</span></span> <span data-ttu-id="fb7e3-190">The entire file doesn't need to be cached on the CDN cache.</span><span class="sxs-lookup"><span data-stu-id="fb7e3-190">The entire file doesn't need to be cached on the CDN cache.</span></span> <span data-ttu-id="fb7e3-191">Subsequent requests for the file or byte ranges are served from the CDN cache.</span><span class="sxs-lookup"><span data-stu-id="fb7e3-191">Subsequent requests for the file or byte ranges are served from the CDN cache.</span></span> <span data-ttu-id="fb7e3-192">If not all the chunks are cached on the CDN, prefetch is used to request chunks from the origin.</span><span class="sxs-lookup"><span data-stu-id="fb7e3-192">If not all the chunks are cached on the CDN, prefetch is used to request chunks from the origin.</span></span> <span data-ttu-id="fb7e3-193">This optimization relies on the ability of the origin server to support byte-range requests; if the origin server doesn't support byte-range requests, this optimization isn't effective.</span><span class="sxs-lookup"><span data-stu-id="fb7e3-193">This optimization relies on the ability of the origin server to support byte-range requests; if the origin server doesn't support byte-range requests, this optimization isn't effective.</span></span>

### <a name="caching"></a><span data-ttu-id="fb7e3-194">Caching</span><span class="sxs-lookup"><span data-stu-id="fb7e3-194">Caching</span></span>
<span data-ttu-id="fb7e3-195">Large file optimization uses different default caching-expiration times from general web delivery.</span><span class="sxs-lookup"><span data-stu-id="fb7e3-195">Large file optimization uses different default caching-expiration times from general web delivery.</span></span> <span data-ttu-id="fb7e3-196">It differentiates between positive caching and negative caching based on HTTP response codes.</span><span class="sxs-lookup"><span data-stu-id="fb7e3-196">It differentiates between positive caching and negative caching based on HTTP response codes.</span></span> <span data-ttu-id="fb7e3-197">If the origin server specifies an expiration time via a cache-control or expires header in the response, the CDN honors that value.</span><span class="sxs-lookup"><span data-stu-id="fb7e3-197">If the origin server specifies an expiration time via a cache-control or expires header in the response, the CDN honors that value.</span></span> <span data-ttu-id="fb7e3-198">When the origin doesn’t specify and the file matches the type and size conditions for this optimization type, the CDN uses the default values for large file optimization.</span><span class="sxs-lookup"><span data-stu-id="fb7e3-198">When the origin doesn’t specify and the file matches the type and size conditions for this optimization type, the CDN uses the default values for large file optimization.</span></span> <span data-ttu-id="fb7e3-199">Otherwise, the CDN uses defaults for general web delivery.</span><span class="sxs-lookup"><span data-stu-id="fb7e3-199">Otherwise, the CDN uses defaults for general web delivery.</span></span>


|    | <span data-ttu-id="fb7e3-200">General web</span><span class="sxs-lookup"><span data-stu-id="fb7e3-200">General web</span></span> | <span data-ttu-id="fb7e3-201">Large file optimization</span><span class="sxs-lookup"><span data-stu-id="fb7e3-201">Large file optimization</span></span> 
--- | --- | --- 
<span data-ttu-id="fb7e3-202">Caching: Positive</span><span class="sxs-lookup"><span data-stu-id="fb7e3-202">Caching: Positive</span></span> <br> <span data-ttu-id="fb7e3-203">HTTP 200, 203, 300,</span><span class="sxs-lookup"><span data-stu-id="fb7e3-203">HTTP 200, 203, 300,</span></span> <br> <span data-ttu-id="fb7e3-204">301, 302, and 410</span><span class="sxs-lookup"><span data-stu-id="fb7e3-204">301, 302, and 410</span></span> | <span data-ttu-id="fb7e3-205">7 days</span><span class="sxs-lookup"><span data-stu-id="fb7e3-205">7 days</span></span> |<span data-ttu-id="fb7e3-206">1 day</span><span class="sxs-lookup"><span data-stu-id="fb7e3-206">1 day</span></span>  
<span data-ttu-id="fb7e3-207">Caching: Negative</span><span class="sxs-lookup"><span data-stu-id="fb7e3-207">Caching: Negative</span></span> <br> <span data-ttu-id="fb7e3-208">HTTP 204, 305, 404,</span><span class="sxs-lookup"><span data-stu-id="fb7e3-208">HTTP 204, 305, 404,</span></span> <br> <span data-ttu-id="fb7e3-209">and 405</span><span class="sxs-lookup"><span data-stu-id="fb7e3-209">and 405</span></span> | <span data-ttu-id="fb7e3-210">None</span><span class="sxs-lookup"><span data-stu-id="fb7e3-210">None</span></span> | <span data-ttu-id="fb7e3-211">1 second</span><span class="sxs-lookup"><span data-stu-id="fb7e3-211">1 second</span></span> 

### <a name="deal-with-origin-failure"></a><span data-ttu-id="fb7e3-212">Deal with origin failure</span><span class="sxs-lookup"><span data-stu-id="fb7e3-212">Deal with origin failure</span></span>

<span data-ttu-id="fb7e3-213">The origin read-timeout length increases from two seconds for general web delivery to two minutes for the large file optimization type.</span><span class="sxs-lookup"><span data-stu-id="fb7e3-213">The origin read-timeout length increases from two seconds for general web delivery to two minutes for the large file optimization type.</span></span> <span data-ttu-id="fb7e3-214">This increase accounts for the larger file sizes to avoid a premature timeout connection.</span><span class="sxs-lookup"><span data-stu-id="fb7e3-214">This increase accounts for the larger file sizes to avoid a premature timeout connection.</span></span>

<span data-ttu-id="fb7e3-215">When a connection times out, the CDN retries a number of times before it sends a "504 - Gateway Timeout" error to the client.</span><span class="sxs-lookup"><span data-stu-id="fb7e3-215">When a connection times out, the CDN retries a number of times before it sends a "504 - Gateway Timeout" error to the client.</span></span> 

### <a name="conditions-for-large-file-optimization"></a><span data-ttu-id="fb7e3-216">Conditions for large file optimization</span><span class="sxs-lookup"><span data-stu-id="fb7e3-216">Conditions for large file optimization</span></span>

<span data-ttu-id="fb7e3-217">The following table lists the set of criteria to be satisfied for large file optimization:</span><span class="sxs-lookup"><span data-stu-id="fb7e3-217">The following table lists the set of criteria to be satisfied for large file optimization:</span></span>

<span data-ttu-id="fb7e3-218">Condition</span><span class="sxs-lookup"><span data-stu-id="fb7e3-218">Condition</span></span> | <span data-ttu-id="fb7e3-219">Values</span><span class="sxs-lookup"><span data-stu-id="fb7e3-219">Values</span></span> 
--- | --- 
<span data-ttu-id="fb7e3-220">Supported file types</span><span class="sxs-lookup"><span data-stu-id="fb7e3-220">Supported file types</span></span> | <span data-ttu-id="fb7e3-221">3g2, 3gp, asf, avi, bz2, dmg, exe, f4v, flv,</span><span class="sxs-lookup"><span data-stu-id="fb7e3-221">3g2, 3gp, asf, avi, bz2, dmg, exe, f4v, flv,</span></span> <br> <span data-ttu-id="fb7e3-222">gz, hdp, iso, jxr, m4v, mkv, mov, mp4,</span><span class="sxs-lookup"><span data-stu-id="fb7e3-222">gz, hdp, iso, jxr, m4v, mkv, mov, mp4,</span></span> <br> <span data-ttu-id="fb7e3-223">mpeg, mpg, mts, pkg, qt, rm, swf, tar,</span><span class="sxs-lookup"><span data-stu-id="fb7e3-223">mpeg, mpg, mts, pkg, qt, rm, swf, tar,</span></span> <br> <span data-ttu-id="fb7e3-224">tgz, wdp, webm, webp, wma, wmv, zip</span><span class="sxs-lookup"><span data-stu-id="fb7e3-224">tgz, wdp, webm, webp, wma, wmv, zip</span></span>  
<span data-ttu-id="fb7e3-225">Minimum file size</span><span class="sxs-lookup"><span data-stu-id="fb7e3-225">Minimum file size</span></span> | <span data-ttu-id="fb7e3-226">10 MB</span><span class="sxs-lookup"><span data-stu-id="fb7e3-226">10 MB</span></span> 
<span data-ttu-id="fb7e3-227">Maximum file size</span><span class="sxs-lookup"><span data-stu-id="fb7e3-227">Maximum file size</span></span> | <span data-ttu-id="fb7e3-228">150 GB</span><span class="sxs-lookup"><span data-stu-id="fb7e3-228">150 GB</span></span> 
<span data-ttu-id="fb7e3-229">Origin server characteristics</span><span class="sxs-lookup"><span data-stu-id="fb7e3-229">Origin server characteristics</span></span> | <span data-ttu-id="fb7e3-230">Must support byte-range requests</span><span class="sxs-lookup"><span data-stu-id="fb7e3-230">Must support byte-range requests</span></span> 

## <a name="additional-considerations"></a><span data-ttu-id="fb7e3-231">Additional considerations</span><span class="sxs-lookup"><span data-stu-id="fb7e3-231">Additional considerations</span></span>

<span data-ttu-id="fb7e3-232">Consider the following additional aspects for this optimization type:</span><span class="sxs-lookup"><span data-stu-id="fb7e3-232">Consider the following additional aspects for this optimization type:</span></span>

- <span data-ttu-id="fb7e3-233">The chunking process generates additional requests to the origin server.</span><span class="sxs-lookup"><span data-stu-id="fb7e3-233">The chunking process generates additional requests to the origin server.</span></span> <span data-ttu-id="fb7e3-234">However, the overall volume of data delivered from the origin is much smaller.</span><span class="sxs-lookup"><span data-stu-id="fb7e3-234">However, the overall volume of data delivered from the origin is much smaller.</span></span> <span data-ttu-id="fb7e3-235">Chunking results in better caching characteristics at the CDN.</span><span class="sxs-lookup"><span data-stu-id="fb7e3-235">Chunking results in better caching characteristics at the CDN.</span></span>

- <span data-ttu-id="fb7e3-236">Memory and I/O pressure are reduced at the origin because smaller pieces of the file are delivered.</span><span class="sxs-lookup"><span data-stu-id="fb7e3-236">Memory and I/O pressure are reduced at the origin because smaller pieces of the file are delivered.</span></span>

- <span data-ttu-id="fb7e3-237">For chunks cached at the CDN, there are no additional requests to the origin until the content expires or it's evicted from the cache.</span><span class="sxs-lookup"><span data-stu-id="fb7e3-237">For chunks cached at the CDN, there are no additional requests to the origin until the content expires or it's evicted from the cache.</span></span>

- <span data-ttu-id="fb7e3-238">Users can make range requests to the CDN, which are treated like any normal file.</span><span class="sxs-lookup"><span data-stu-id="fb7e3-238">Users can make range requests to the CDN, which are treated like any normal file.</span></span> <span data-ttu-id="fb7e3-239">Optimization applies only if it's a valid file type and the byte range is between 10 MB and 150 GB.</span><span class="sxs-lookup"><span data-stu-id="fb7e3-239">Optimization applies only if it's a valid file type and the byte range is between 10 MB and 150 GB.</span></span> <span data-ttu-id="fb7e3-240">If the average file size requested is smaller than 10 MB, use general web delivery instead.</span><span class="sxs-lookup"><span data-stu-id="fb7e3-240">If the average file size requested is smaller than 10 MB, use general web delivery instead.</span></span>

