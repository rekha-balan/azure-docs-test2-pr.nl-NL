---
title: Stream Azure monitoring data to Event Hubs
description: Learn how to stream all of your Azure monitoring data to an event hub to get the data into a partner SIEM or analytics tool.
author: johnkemnetz
services: azure-monitor
ms.service: azure-monitor
ms.topic: conceptual
ms.date: 8/21/2018
ms.author: johnkem
ms.component: ''
ms.openlocfilehash: e4bbf86c6cb7e827672fe279e86c8d3fd76e8e8b
ms.sourcegitcommit: d1451406a010fd3aa854dc8e5b77dc5537d8050e
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 09/13/2018
ms.locfileid: "44870247"
---
# <a name="stream-azure-monitoring-data-to-an-event-hub-for-consumption-by-an-external-tool"></a><span data-ttu-id="8d9e3-103">Stream Azure monitoring data to an event hub for consumption by an external tool</span><span class="sxs-lookup"><span data-stu-id="8d9e3-103">Stream Azure monitoring data to an event hub for consumption by an external tool</span></span>

<span data-ttu-id="8d9e3-104">Azure Monitor provides a single pipeline for getting access to all of the monitoring data from your Azure environment, enabling you to easily set up partner SIEM and monitoring tools to consume that data.</span><span class="sxs-lookup"><span data-stu-id="8d9e3-104">Azure Monitor provides a single pipeline for getting access to all of the monitoring data from your Azure environment, enabling you to easily set up partner SIEM and monitoring tools to consume that data.</span></span> <span data-ttu-id="8d9e3-105">This article walks through setting up different tiers of data from your Azure environment to be sent to a single Event Hubs namespace or event hub, where it can be collected by an external tool.</span><span class="sxs-lookup"><span data-stu-id="8d9e3-105">This article walks through setting up different tiers of data from your Azure environment to be sent to a single Event Hubs namespace or event hub, where it can be collected by an external tool.</span></span>

> [!VIDEO https://www.youtube.com/embed/SPHxCgbcvSw]

## <a name="what-data-can-i-send-into-an-event-hub"></a><span data-ttu-id="8d9e3-106">What data can I send into an event hub?</span><span class="sxs-lookup"><span data-stu-id="8d9e3-106">What data can I send into an event hub?</span></span> 

<span data-ttu-id="8d9e3-107">Within your Azure environment, there are several 'tiers' of monitoring data, and the method of accessing data from each tier varies slightly.</span><span class="sxs-lookup"><span data-stu-id="8d9e3-107">Within your Azure environment, there are several 'tiers' of monitoring data, and the method of accessing data from each tier varies slightly.</span></span> <span data-ttu-id="8d9e3-108">Typically, these tiers can be described as:</span><span class="sxs-lookup"><span data-stu-id="8d9e3-108">Typically, these tiers can be described as:</span></span>

- <span data-ttu-id="8d9e3-109">**Application monitoring data:** Data about the performance and functionality of the code you have written and are running on Azure.</span><span class="sxs-lookup"><span data-stu-id="8d9e3-109">**Application monitoring data:** Data about the performance and functionality of the code you have written and are running on Azure.</span></span> <span data-ttu-id="8d9e3-110">Examples of application monitoring data include performance traces, application logs, and user telemetry.</span><span class="sxs-lookup"><span data-stu-id="8d9e3-110">Examples of application monitoring data include performance traces, application logs, and user telemetry.</span></span> <span data-ttu-id="8d9e3-111">Application monitoring data is usually collected in one of the following ways:</span><span class="sxs-lookup"><span data-stu-id="8d9e3-111">Application monitoring data is usually collected in one of the following ways:</span></span>
  - <span data-ttu-id="8d9e3-112">By instrumenting your code with an SDK such as the [Application Insights SDK](../application-insights/app-insights-overview.md).</span><span class="sxs-lookup"><span data-stu-id="8d9e3-112">By instrumenting your code with an SDK such as the [Application Insights SDK](../application-insights/app-insights-overview.md).</span></span>
  - <span data-ttu-id="8d9e3-113">By running a monitoring agent that listens for new application logs on the machine running your application, such as the [Windows Azure Diagnostic Agent](./azure-diagnostics.md) or [Linux Azure Diagnostic Agent](../virtual-machines/linux/diagnostic-extension.md).</span><span class="sxs-lookup"><span data-stu-id="8d9e3-113">By running a monitoring agent that listens for new application logs on the machine running your application, such as the [Windows Azure Diagnostic Agent](./azure-diagnostics.md) or [Linux Azure Diagnostic Agent](../virtual-machines/linux/diagnostic-extension.md).</span></span>
- <span data-ttu-id="8d9e3-114">**Guest OS monitoring data:** Data about the operating system on which your application is running.</span><span class="sxs-lookup"><span data-stu-id="8d9e3-114">**Guest OS monitoring data:** Data about the operating system on which your application is running.</span></span> <span data-ttu-id="8d9e3-115">Examples of guest OS monitoring data would be Linux syslog or Windows system events.</span><span class="sxs-lookup"><span data-stu-id="8d9e3-115">Examples of guest OS monitoring data would be Linux syslog or Windows system events.</span></span> <span data-ttu-id="8d9e3-116">To collect this type of data, you need to install an agent such as the [Windows Azure Diagnostic Agent](./azure-diagnostics.md) or [Linux Azure Diagnostic Agent](../virtual-machines/linux/diagnostic-extension.md).</span><span class="sxs-lookup"><span data-stu-id="8d9e3-116">To collect this type of data, you need to install an agent such as the [Windows Azure Diagnostic Agent](./azure-diagnostics.md) or [Linux Azure Diagnostic Agent](../virtual-machines/linux/diagnostic-extension.md).</span></span>
- <span data-ttu-id="8d9e3-117">**Azure resource monitoring data:** Data about the operation of an Azure resource.</span><span class="sxs-lookup"><span data-stu-id="8d9e3-117">**Azure resource monitoring data:** Data about the operation of an Azure resource.</span></span> <span data-ttu-id="8d9e3-118">For some Azure resource types, such as virtual machines, there is a guest OS and application(s) to monitor inside of that Azure service.</span><span class="sxs-lookup"><span data-stu-id="8d9e3-118">For some Azure resource types, such as virtual machines, there is a guest OS and application(s) to monitor inside of that Azure service.</span></span> <span data-ttu-id="8d9e3-119">For other Azure resources, such as Network Security Groups, the resource monitoring data is the highest tier of data available (since there is no guest OS or application running in those resources).</span><span class="sxs-lookup"><span data-stu-id="8d9e3-119">For other Azure resources, such as Network Security Groups, the resource monitoring data is the highest tier of data available (since there is no guest OS or application running in those resources).</span></span> <span data-ttu-id="8d9e3-120">This data can be collected using [resource diagnostic settings](./monitoring-overview-of-diagnostic-logs.md#diagnostic-settings).</span><span class="sxs-lookup"><span data-stu-id="8d9e3-120">This data can be collected using [resource diagnostic settings](./monitoring-overview-of-diagnostic-logs.md#diagnostic-settings).</span></span>
- <span data-ttu-id="8d9e3-121">**Azure subscription monitoring data:** Data about the operation and management of an Azure subscription, as well as data about the health and operation of Azure itself.</span><span class="sxs-lookup"><span data-stu-id="8d9e3-121">**Azure subscription monitoring data:** Data about the operation and management of an Azure subscription, as well as data about the health and operation of Azure itself.</span></span> <span data-ttu-id="8d9e3-122">The [activity log](./monitoring-overview-activity-logs.md) contains most subscription monitoring data, such as service health incidents and Azure Resource Manager audits.</span><span class="sxs-lookup"><span data-stu-id="8d9e3-122">The [activity log](./monitoring-overview-activity-logs.md) contains most subscription monitoring data, such as service health incidents and Azure Resource Manager audits.</span></span> <span data-ttu-id="8d9e3-123">You can collect this data using a Log Profile.</span><span class="sxs-lookup"><span data-stu-id="8d9e3-123">You can collect this data using a Log Profile.</span></span>
- <span data-ttu-id="8d9e3-124">**Azure tenant monitoring data:** Data about the operation of tenant-level Azure services, such as Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="8d9e3-124">**Azure tenant monitoring data:** Data about the operation of tenant-level Azure services, such as Azure Active Directory.</span></span> <span data-ttu-id="8d9e3-125">The Azure Active Directory audits and sign-ins are examples of tenant monitoring data.</span><span class="sxs-lookup"><span data-stu-id="8d9e3-125">The Azure Active Directory audits and sign-ins are examples of tenant monitoring data.</span></span> <span data-ttu-id="8d9e3-126">This data can be collected using a tenant diagnostic setting.</span><span class="sxs-lookup"><span data-stu-id="8d9e3-126">This data can be collected using a tenant diagnostic setting.</span></span>

<span data-ttu-id="8d9e3-127">Data from any tier can be sent into an event hub, where it can be pulled into a partner tool.</span><span class="sxs-lookup"><span data-stu-id="8d9e3-127">Data from any tier can be sent into an event hub, where it can be pulled into a partner tool.</span></span> <span data-ttu-id="8d9e3-128">The next sections describe how you can configure data from each tier to be streamed to an event hub.</span><span class="sxs-lookup"><span data-stu-id="8d9e3-128">The next sections describe how you can configure data from each tier to be streamed to an event hub.</span></span> <span data-ttu-id="8d9e3-129">The steps assume that you already have assets at that tier to be monitored.</span><span class="sxs-lookup"><span data-stu-id="8d9e3-129">The steps assume that you already have assets at that tier to be monitored.</span></span>

## <a name="set-up-an-event-hubs-namespace"></a><span data-ttu-id="8d9e3-130">Set up an Event Hubs namespace</span><span class="sxs-lookup"><span data-stu-id="8d9e3-130">Set up an Event Hubs namespace</span></span>

<span data-ttu-id="8d9e3-131">Before you begin, you need to [create an Event Hubs namespace and event hub](../event-hubs/event-hubs-create.md).</span><span class="sxs-lookup"><span data-stu-id="8d9e3-131">Before you begin, you need to [create an Event Hubs namespace and event hub](../event-hubs/event-hubs-create.md).</span></span> <span data-ttu-id="8d9e3-132">This namespace and event hub is the destination for all of your monitoring data.</span><span class="sxs-lookup"><span data-stu-id="8d9e3-132">This namespace and event hub is the destination for all of your monitoring data.</span></span> <span data-ttu-id="8d9e3-133">An Event Hubs namespace is a logical grouping of event hubs that share the same access policy, much like a storage account has individual blobs within that storage account.</span><span class="sxs-lookup"><span data-stu-id="8d9e3-133">An Event Hubs namespace is a logical grouping of event hubs that share the same access policy, much like a storage account has individual blobs within that storage account.</span></span> <span data-ttu-id="8d9e3-134">Please note a few details about the event hubs namespace and event hubs that you create:</span><span class="sxs-lookup"><span data-stu-id="8d9e3-134">Please note a few details about the event hubs namespace and event hubs that you create:</span></span>
* <span data-ttu-id="8d9e3-135">We recommend using a Standard Event Hubs namespace.</span><span class="sxs-lookup"><span data-stu-id="8d9e3-135">We recommend using a Standard Event Hubs namespace.</span></span>
* <span data-ttu-id="8d9e3-136">Typically, only one throughput unit is necessary.</span><span class="sxs-lookup"><span data-stu-id="8d9e3-136">Typically, only one throughput unit is necessary.</span></span> <span data-ttu-id="8d9e3-137">If you need to scale up as your log usage increases, you can always manually increase the number of throughput units for the namespace later or enable auto inflation.</span><span class="sxs-lookup"><span data-stu-id="8d9e3-137">If you need to scale up as your log usage increases, you can always manually increase the number of throughput units for the namespace later or enable auto inflation.</span></span>
* <span data-ttu-id="8d9e3-138">The number of throughput units allows you to increase throughput scale for your event hubs.</span><span class="sxs-lookup"><span data-stu-id="8d9e3-138">The number of throughput units allows you to increase throughput scale for your event hubs.</span></span> <span data-ttu-id="8d9e3-139">The number of partitions allows you to parallelize consumption across many consumers.</span><span class="sxs-lookup"><span data-stu-id="8d9e3-139">The number of partitions allows you to parallelize consumption across many consumers.</span></span> <span data-ttu-id="8d9e3-140">A single partition can do up to 20MBps, or approximately 20,000 messages per second.</span><span class="sxs-lookup"><span data-stu-id="8d9e3-140">A single partition can do up to 20MBps, or approximately 20,000 messages per second.</span></span> <span data-ttu-id="8d9e3-141">Depending on the tool consuming the data, it may or may not support consuming from multiple partitions.</span><span class="sxs-lookup"><span data-stu-id="8d9e3-141">Depending on the tool consuming the data, it may or may not support consuming from multiple partitions.</span></span> <span data-ttu-id="8d9e3-142">If you're not sure about the number of partitions to set, we recommend starting with four partitions.</span><span class="sxs-lookup"><span data-stu-id="8d9e3-142">If you're not sure about the number of partitions to set, we recommend starting with four partitions.</span></span>
* <span data-ttu-id="8d9e3-143">We recommend that you set message retention on your event hub to 7 days.</span><span class="sxs-lookup"><span data-stu-id="8d9e3-143">We recommend that you set message retention on your event hub to 7 days.</span></span> <span data-ttu-id="8d9e3-144">If your consuming tool goes down for more than a day, this ensures that the tool can pick up where it left off (for events up to 7 days old).</span><span class="sxs-lookup"><span data-stu-id="8d9e3-144">If your consuming tool goes down for more than a day, this ensures that the tool can pick up where it left off (for events up to 7 days old).</span></span>
* <span data-ttu-id="8d9e3-145">We recommend using the default consumer group for your event hub.</span><span class="sxs-lookup"><span data-stu-id="8d9e3-145">We recommend using the default consumer group for your event hub.</span></span> <span data-ttu-id="8d9e3-146">There is no need to create other consumer groups or use a separate consumer group unless you plan to have two different tools consume the same data from the same event hub.</span><span class="sxs-lookup"><span data-stu-id="8d9e3-146">There is no need to create other consumer groups or use a separate consumer group unless you plan to have two different tools consume the same data from the same event hub.</span></span>
* <span data-ttu-id="8d9e3-147">For the Azure Activity Log, you pick an Event Hubs namespace and Azure Monitor creates an event hub within that namespace called 'insights-logs-operationallogs.'</span><span class="sxs-lookup"><span data-stu-id="8d9e3-147">For the Azure Activity Log, you pick an Event Hubs namespace and Azure Monitor creates an event hub within that namespace called 'insights-logs-operationallogs.'</span></span> <span data-ttu-id="8d9e3-148">For other log types, you can either choose an existing event hub (allowing you to reuse the same insights-logs-operationallogs event hub) or have Azure Monitor create an event hub per log category.</span><span class="sxs-lookup"><span data-stu-id="8d9e3-148">For other log types, you can either choose an existing event hub (allowing you to reuse the same insights-logs-operationallogs event hub) or have Azure Monitor create an event hub per log category.</span></span>
* <span data-ttu-id="8d9e3-149">Typically, port 5671 and 5672 must be opened on the machine consuming data from the event hub.</span><span class="sxs-lookup"><span data-stu-id="8d9e3-149">Typically, port 5671 and 5672 must be opened on the machine consuming data from the event hub.</span></span>

<span data-ttu-id="8d9e3-150">Please also see the [Azure Event Hubs FAQ](../event-hubs/event-hubs-faq.md).</span><span class="sxs-lookup"><span data-stu-id="8d9e3-150">Please also see the [Azure Event Hubs FAQ](../event-hubs/event-hubs-faq.md).</span></span>

## <a name="azure-tenant-monitoring-data"></a><span data-ttu-id="8d9e3-151">Azure tenant monitoring data</span><span class="sxs-lookup"><span data-stu-id="8d9e3-151">Azure tenant monitoring data</span></span>

<span data-ttu-id="8d9e3-152">Azure tenant monitoring data is currently only available for Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="8d9e3-152">Azure tenant monitoring data is currently only available for Azure Active Directory.</span></span> <span data-ttu-id="8d9e3-153">You can use the data from [Azure Active Directory reporting](../active-directory/reports-monitoring/overview-reports.md), which contains the history of sign-in activity and audit trail of changes made within a particular tenant.</span><span class="sxs-lookup"><span data-stu-id="8d9e3-153">You can use the data from [Azure Active Directory reporting](../active-directory/reports-monitoring/overview-reports.md), which contains the history of sign-in activity and audit trail of changes made within a particular tenant.</span></span>

### <a name="azure-active-directory-data"></a><span data-ttu-id="8d9e3-154">Azure Active Directory data</span><span class="sxs-lookup"><span data-stu-id="8d9e3-154">Azure Active Directory data</span></span>

<span data-ttu-id="8d9e3-155">To send data from the Azure Active Directory log into an Event Hubs namespace, you set up a tenant diagnostic setting on your AAD tenant.</span><span class="sxs-lookup"><span data-stu-id="8d9e3-155">To send data from the Azure Active Directory log into an Event Hubs namespace, you set up a tenant diagnostic setting on your AAD tenant.</span></span> <span data-ttu-id="8d9e3-156">[Follow this guide](../active-directory/reports-monitoring/quickstart-azure-monitor-stream-logs-to-event-hub.md) to set up a tenant diagnostic setting.</span><span class="sxs-lookup"><span data-stu-id="8d9e3-156">[Follow this guide](../active-directory/reports-monitoring/quickstart-azure-monitor-stream-logs-to-event-hub.md) to set up a tenant diagnostic setting.</span></span>

## <a name="azure-subscription-monitoring-data"></a><span data-ttu-id="8d9e3-157">Azure subscription monitoring data</span><span class="sxs-lookup"><span data-stu-id="8d9e3-157">Azure subscription monitoring data</span></span>

<span data-ttu-id="8d9e3-158">Azure subscription monitoring data is available in the [Azure activity log](./monitoring-overview-activity-logs.md).</span><span class="sxs-lookup"><span data-stu-id="8d9e3-158">Azure subscription monitoring data is available in the [Azure activity log](./monitoring-overview-activity-logs.md).</span></span> <span data-ttu-id="8d9e3-159">This contains the create, update, and delete operations from Resource Manager, the changes in [Azure service health](../service-health/service-health-overview.md) that may impact resources in your subscription, the [resource health](../service-health/resource-health-overview.md) state transitions, and several other types of subscription-level events.</span><span class="sxs-lookup"><span data-stu-id="8d9e3-159">This contains the create, update, and delete operations from Resource Manager, the changes in [Azure service health](../service-health/service-health-overview.md) that may impact resources in your subscription, the [resource health](../service-health/resource-health-overview.md) state transitions, and several other types of subscription-level events.</span></span> <span data-ttu-id="8d9e3-160">[This article details all categories of events that appear in the Azure activity log](./monitoring-activity-log-schema.md).</span><span class="sxs-lookup"><span data-stu-id="8d9e3-160">[This article details all categories of events that appear in the Azure activity log](./monitoring-activity-log-schema.md).</span></span>

### <a name="activity-log-data"></a><span data-ttu-id="8d9e3-161">Activity log data</span><span class="sxs-lookup"><span data-stu-id="8d9e3-161">Activity log data</span></span>

<span data-ttu-id="8d9e3-162">To send data from the Azure activity log into an Event Hubs namespace, you set up a Log Profile on your subscription.</span><span class="sxs-lookup"><span data-stu-id="8d9e3-162">To send data from the Azure activity log into an Event Hubs namespace, you set up a Log Profile on your subscription.</span></span> <span data-ttu-id="8d9e3-163">[Follow this guide](./monitoring-stream-activity-logs-event-hubs.md) to set up a Log Profile on your subscription.</span><span class="sxs-lookup"><span data-stu-id="8d9e3-163">[Follow this guide](./monitoring-stream-activity-logs-event-hubs.md) to set up a Log Profile on your subscription.</span></span> <span data-ttu-id="8d9e3-164">Do this once per subscription you want to monitor.</span><span class="sxs-lookup"><span data-stu-id="8d9e3-164">Do this once per subscription you want to monitor.</span></span>

> [!TIP]
> <span data-ttu-id="8d9e3-165">A Log Profile currently only allows you to select an Event Hubs namespace, in which an event hub is created with the name 'insights-operational-logs.'</span><span class="sxs-lookup"><span data-stu-id="8d9e3-165">A Log Profile currently only allows you to select an Event Hubs namespace, in which an event hub is created with the name 'insights-operational-logs.'</span></span> <span data-ttu-id="8d9e3-166">It is not yet possible to specify your own event hub name in a Log Profile.</span><span class="sxs-lookup"><span data-stu-id="8d9e3-166">It is not yet possible to specify your own event hub name in a Log Profile.</span></span>

## <a name="azure-resource-metrics-and-diagnostics-logs"></a><span data-ttu-id="8d9e3-167">Azure resource metrics and diagnostics logs</span><span class="sxs-lookup"><span data-stu-id="8d9e3-167">Azure resource metrics and diagnostics logs</span></span>

<span data-ttu-id="8d9e3-168">Azure resources emit two types of monitoring data:</span><span class="sxs-lookup"><span data-stu-id="8d9e3-168">Azure resources emit two types of monitoring data:</span></span>
1. [<span data-ttu-id="8d9e3-169">Resource diagnostic logs</span><span class="sxs-lookup"><span data-stu-id="8d9e3-169">Resource diagnostic logs</span></span>](./monitoring-overview-of-diagnostic-logs.md)
2. [<span data-ttu-id="8d9e3-170">Metrics</span><span class="sxs-lookup"><span data-stu-id="8d9e3-170">Metrics</span></span>](monitoring-overview-metrics.md)

<span data-ttu-id="8d9e3-171">Both types of data are sent to an event hub using a resource diagnostic setting.</span><span class="sxs-lookup"><span data-stu-id="8d9e3-171">Both types of data are sent to an event hub using a resource diagnostic setting.</span></span> <span data-ttu-id="8d9e3-172">[Follow this guide](./monitoring-stream-diagnostic-logs-to-event-hubs.md) to set up a resource diagnostic setting on a particular resource.</span><span class="sxs-lookup"><span data-stu-id="8d9e3-172">[Follow this guide](./monitoring-stream-diagnostic-logs-to-event-hubs.md) to set up a resource diagnostic setting on a particular resource.</span></span> <span data-ttu-id="8d9e3-173">Set a resource diagnostic setting on each resource from which you want to collect logs.</span><span class="sxs-lookup"><span data-stu-id="8d9e3-173">Set a resource diagnostic setting on each resource from which you want to collect logs.</span></span>

> [!TIP]
> <span data-ttu-id="8d9e3-174">You can use Azure Policy to ensure that every resource within a certain scope is always set up with a diagnostic setting [by using the DeployIfNotExists effect in the policy rule](../azure-policy/policy-definition.md#policy-rule).</span><span class="sxs-lookup"><span data-stu-id="8d9e3-174">You can use Azure Policy to ensure that every resource within a certain scope is always set up with a diagnostic setting [by using the DeployIfNotExists effect in the policy rule](../azure-policy/policy-definition.md#policy-rule).</span></span> <span data-ttu-id="8d9e3-175">Today DeployIfNotExists is only supported on built-in policies.</span><span class="sxs-lookup"><span data-stu-id="8d9e3-175">Today DeployIfNotExists is only supported on built-in policies.</span></span>

## <a name="guest-os-data"></a><span data-ttu-id="8d9e3-176">Guest OS data</span><span class="sxs-lookup"><span data-stu-id="8d9e3-176">Guest OS data</span></span>

<span data-ttu-id="8d9e3-177">You need to install an agent to send guest OS monitoring data into an event hub.</span><span class="sxs-lookup"><span data-stu-id="8d9e3-177">You need to install an agent to send guest OS monitoring data into an event hub.</span></span> <span data-ttu-id="8d9e3-178">For either Windows or Linux, you specify the data you want to be sent to the event hub as well as the event hub to which the data should be sent in a configuration file and pass that configuration file to the agent running on the VM.</span><span class="sxs-lookup"><span data-stu-id="8d9e3-178">For either Windows or Linux, you specify the data you want to be sent to the event hub as well as the event hub to which the data should be sent in a configuration file and pass that configuration file to the agent running on the VM.</span></span>

### <a name="linux-data"></a><span data-ttu-id="8d9e3-179">Linux data</span><span class="sxs-lookup"><span data-stu-id="8d9e3-179">Linux data</span></span>

<span data-ttu-id="8d9e3-180">The [Linux Azure Diagnostic agent](../virtual-machines/extensions/diagnostics-linux.md) can be used to send monitoring data from a Linux machine to an event hub.</span><span class="sxs-lookup"><span data-stu-id="8d9e3-180">The [Linux Azure Diagnostic agent](../virtual-machines/extensions/diagnostics-linux.md) can be used to send monitoring data from a Linux machine to an event hub.</span></span> <span data-ttu-id="8d9e3-181">Do this by adding the event hub as a sink in your LAD configuration file protected settings JSON.</span><span class="sxs-lookup"><span data-stu-id="8d9e3-181">Do this by adding the event hub as a sink in your LAD configuration file protected settings JSON.</span></span> <span data-ttu-id="8d9e3-182">[See this article to learn more about adding the event hub sink to your Linux Azure Diagnostic agent](../virtual-machines/extensions/diagnostics-linux.md#protected-settings).</span><span class="sxs-lookup"><span data-stu-id="8d9e3-182">[See this article to learn more about adding the event hub sink to your Linux Azure Diagnostic agent](../virtual-machines/extensions/diagnostics-linux.md#protected-settings).</span></span>

> [!NOTE]
> <span data-ttu-id="8d9e3-183">You cannot set up streaming of guest OS monitoring data to an event hub in the portal.</span><span class="sxs-lookup"><span data-stu-id="8d9e3-183">You cannot set up streaming of guest OS monitoring data to an event hub in the portal.</span></span> <span data-ttu-id="8d9e3-184">Instead, you must manually edit the configuration file.</span><span class="sxs-lookup"><span data-stu-id="8d9e3-184">Instead, you must manually edit the configuration file.</span></span>

### <a name="windows-data"></a><span data-ttu-id="8d9e3-185">Windows data</span><span class="sxs-lookup"><span data-stu-id="8d9e3-185">Windows data</span></span>

<span data-ttu-id="8d9e3-186">The [Windows Azure Diagnostic agent](./azure-diagnostics.md) can be used to send monitoring data from a Windows machine to an event hub.</span><span class="sxs-lookup"><span data-stu-id="8d9e3-186">The [Windows Azure Diagnostic agent](./azure-diagnostics.md) can be used to send monitoring data from a Windows machine to an event hub.</span></span> <span data-ttu-id="8d9e3-187">Do this by adding the event hub as a sink in your privateConfig section of the WAD configuration file.</span><span class="sxs-lookup"><span data-stu-id="8d9e3-187">Do this by adding the event hub as a sink in your privateConfig section of the WAD configuration file.</span></span> <span data-ttu-id="8d9e3-188">[See this article to learn more about adding the event hub sink to your Windows Azure Diagnostic agent](./azure-diagnostics-streaming-event-hubs.md).</span><span class="sxs-lookup"><span data-stu-id="8d9e3-188">[See this article to learn more about adding the event hub sink to your Windows Azure Diagnostic agent](./azure-diagnostics-streaming-event-hubs.md).</span></span>

> [!NOTE]
> <span data-ttu-id="8d9e3-189">You cannot set up streaming of guest OS monitoring data to an event hub in the portal.</span><span class="sxs-lookup"><span data-stu-id="8d9e3-189">You cannot set up streaming of guest OS monitoring data to an event hub in the portal.</span></span> <span data-ttu-id="8d9e3-190">Instead, you must manually edit the configuration file.</span><span class="sxs-lookup"><span data-stu-id="8d9e3-190">Instead, you must manually edit the configuration file.</span></span>

## <a name="application-monitoring-data"></a><span data-ttu-id="8d9e3-191">Application monitoring data</span><span class="sxs-lookup"><span data-stu-id="8d9e3-191">Application monitoring data</span></span>

<span data-ttu-id="8d9e3-192">Application monitoring data requires that your code is instrumented with an SDK, so there isn't a general-purpose solution to routing application monitoring data to an event hub in Azure.</span><span class="sxs-lookup"><span data-stu-id="8d9e3-192">Application monitoring data requires that your code is instrumented with an SDK, so there isn't a general-purpose solution to routing application monitoring data to an event hub in Azure.</span></span> <span data-ttu-id="8d9e3-193">However, [Azure Application Insights](../application-insights/app-insights-overview.md) is one service that can be used to collect Azure application-level data.</span><span class="sxs-lookup"><span data-stu-id="8d9e3-193">However, [Azure Application Insights](../application-insights/app-insights-overview.md) is one service that can be used to collect Azure application-level data.</span></span> <span data-ttu-id="8d9e3-194">If you are using Application Insights, you can stream monitoring data to an event hub by doing the following:</span><span class="sxs-lookup"><span data-stu-id="8d9e3-194">If you are using Application Insights, you can stream monitoring data to an event hub by doing the following:</span></span>

1. <span data-ttu-id="8d9e3-195">[Set up continuous export](../application-insights/app-insights-export-telemetry.md) of the Application Insights data to a storage account.</span><span class="sxs-lookup"><span data-stu-id="8d9e3-195">[Set up continuous export](../application-insights/app-insights-export-telemetry.md) of the Application Insights data to a storage account.</span></span>

2. <span data-ttu-id="8d9e3-196">Set up a timer-triggered Logic App that [pulls data from blob storage](../connectors/connectors-create-api-azureblobstorage.md#add-action) and [pushes it as a message to the event hub](../connectors/connectors-create-api-azure-event-hubs.md#add-action).</span><span class="sxs-lookup"><span data-stu-id="8d9e3-196">Set up a timer-triggered Logic App that [pulls data from blob storage](../connectors/connectors-create-api-azureblobstorage.md#add-action) and [pushes it as a message to the event hub](../connectors/connectors-create-api-azure-event-hubs.md#add-action).</span></span>

## <a name="what-can-i-do-with-the-monitoring-data-being-sent-to-my-event-hub"></a><span data-ttu-id="8d9e3-197">What can I do with the monitoring data being sent to my event hub?</span><span class="sxs-lookup"><span data-stu-id="8d9e3-197">What can I do with the monitoring data being sent to my event hub?</span></span>

<span data-ttu-id="8d9e3-198">Routing your monitoring data to an event hub with Azure Monitor enables you to easily integrate with partner SIEM and monitoring tools.</span><span class="sxs-lookup"><span data-stu-id="8d9e3-198">Routing your monitoring data to an event hub with Azure Monitor enables you to easily integrate with partner SIEM and monitoring tools.</span></span> <span data-ttu-id="8d9e3-199">Most tools require the event hub connection string and certain permissions to your Azure subscription to read data from the event hub.</span><span class="sxs-lookup"><span data-stu-id="8d9e3-199">Most tools require the event hub connection string and certain permissions to your Azure subscription to read data from the event hub.</span></span> <span data-ttu-id="8d9e3-200">Here is a non-exhaustive list of tools with Azure Monitor integration:</span><span class="sxs-lookup"><span data-stu-id="8d9e3-200">Here is a non-exhaustive list of tools with Azure Monitor integration:</span></span>

* <span data-ttu-id="8d9e3-201">**IBM QRadar** - The Microsoft Azure DSM and Microsoft Azure Event Hub Protocol are available for download from [the IBM support website](http://www.ibm.com/support).</span><span class="sxs-lookup"><span data-stu-id="8d9e3-201">**IBM QRadar** - The Microsoft Azure DSM and Microsoft Azure Event Hub Protocol are available for download from [the IBM support website](http://www.ibm.com/support).</span></span> <span data-ttu-id="8d9e3-202">You can [learn more about the integration with Azure here](https://www.ibm.com/support/knowledgecenter/SS42VS_DSM/c_dsm_guide_microsoft_azure_overview.html?cp=SS42VS_7.3.0).</span><span class="sxs-lookup"><span data-stu-id="8d9e3-202">You can [learn more about the integration with Azure here](https://www.ibm.com/support/knowledgecenter/SS42VS_DSM/c_dsm_guide_microsoft_azure_overview.html?cp=SS42VS_7.3.0).</span></span>
* <span data-ttu-id="8d9e3-203">**Splunk** - Depending on your Splunk setup, there are two approaches:</span><span class="sxs-lookup"><span data-stu-id="8d9e3-203">**Splunk** - Depending on your Splunk setup, there are two approaches:</span></span>
    1. <span data-ttu-id="8d9e3-204">[The Azure Monitor Add-On for Splunk](https://splunkbase.splunk.com/app/3534/) is available in Splunkbase and an open source project.</span><span class="sxs-lookup"><span data-stu-id="8d9e3-204">[The Azure Monitor Add-On for Splunk](https://splunkbase.splunk.com/app/3534/) is available in Splunkbase and an open source project.</span></span> <span data-ttu-id="8d9e3-205">[Documentation is here](https://github.com/Microsoft/AzureMonitorAddonForSplunk/wiki/Azure-Monitor-Addon-For-Splunk).</span><span class="sxs-lookup"><span data-stu-id="8d9e3-205">[Documentation is here](https://github.com/Microsoft/AzureMonitorAddonForSplunk/wiki/Azure-Monitor-Addon-For-Splunk).</span></span>
    2. <span data-ttu-id="8d9e3-206">If you cannot install an add-on in your Splunk instance (eg.</span><span class="sxs-lookup"><span data-stu-id="8d9e3-206">If you cannot install an add-on in your Splunk instance (eg.</span></span> <span data-ttu-id="8d9e3-207">if using a proxy or running on Splunk Cloud), you can forward these events to the Splunk HTTP Event Collector using [this Function which is triggered by new messages in the event hub](https://github.com/Microsoft/AzureFunctionforSplunkVS).</span><span class="sxs-lookup"><span data-stu-id="8d9e3-207">if using a proxy or running on Splunk Cloud), you can forward these events to the Splunk HTTP Event Collector using [this Function which is triggered by new messages in the event hub](https://github.com/Microsoft/AzureFunctionforSplunkVS).</span></span>
* <span data-ttu-id="8d9e3-208">**SumoLogic** - Instructions for setting up SumoLogic to consume data from an event hub are [available here](https://help.sumologic.com/Send-Data/Applications-and-Other-Data-Sources/Azure-Audit/02Collect-Logs-for-Azure-Audit-from-Event-Hub)</span><span class="sxs-lookup"><span data-stu-id="8d9e3-208">**SumoLogic** - Instructions for setting up SumoLogic to consume data from an event hub are [available here](https://help.sumologic.com/Send-Data/Applications-and-Other-Data-Sources/Azure-Audit/02Collect-Logs-for-Azure-Audit-from-Event-Hub)</span></span>
* <span data-ttu-id="8d9e3-209">**Syslog server** - If you want to stream Azure Monitor data directly to a syslog server, you can check out [this github repo](https://github.com/miguelangelopereira/azuremonitor2syslog/).</span><span class="sxs-lookup"><span data-stu-id="8d9e3-209">**Syslog server** - If you want to stream Azure Monitor data directly to a syslog server, you can check out [this github repo](https://github.com/miguelangelopereira/azuremonitor2syslog/).</span></span>

## <a name="next-steps"></a><span data-ttu-id="8d9e3-210">Next Steps</span><span class="sxs-lookup"><span data-stu-id="8d9e3-210">Next Steps</span></span>
* [<span data-ttu-id="8d9e3-211">Archive the Activity Log to a storage account</span><span class="sxs-lookup"><span data-stu-id="8d9e3-211">Archive the Activity Log to a storage account</span></span>](monitoring-archive-activity-log.md)
* [<span data-ttu-id="8d9e3-212">Read the overview of the Azure Activity Log</span><span class="sxs-lookup"><span data-stu-id="8d9e3-212">Read the overview of the Azure Activity Log</span></span>](monitoring-overview-activity-logs.md)
* [<span data-ttu-id="8d9e3-213">Set up an alert based on an Activity Log event</span><span class="sxs-lookup"><span data-stu-id="8d9e3-213">Set up an alert based on an Activity Log event</span></span>](insights-auditlog-to-webhook-email.md)

