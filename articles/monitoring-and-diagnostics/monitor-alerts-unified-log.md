---
title: Log alerts in Azure Monitor
description: Trigger emails, notifications, call websites URLs (webhooks), or automation when the analytic query conditions you specify are met for Azure Alerts .
author: msvijayn
services: monitoring
ms.service: azure-monitor
ms.topic: conceptual
ms.date: 05/01/2018
ms.author: vinagara
ms.component: alerts
ms.openlocfilehash: fd1fb978fb47c69b2eb672bc27baee73dfdd0a29
ms.sourcegitcommit: d1451406a010fd3aa854dc8e5b77dc5537d8050e
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 09/13/2018
ms.locfileid: "44865806"
---
# <a name="log-alerts-in-azure-monitor---alerts"></a><span data-ttu-id="3f260-103">Log alerts in Azure Monitor - Alerts</span><span class="sxs-lookup"><span data-stu-id="3f260-103">Log alerts in Azure Monitor - Alerts</span></span> 
<span data-ttu-id="3f260-104">This article provides details of Log alerts are one of the types of alerts supported within the new [Azure Alerts](monitoring-overview-unified-alerts.md) and allow users to use Azure's analytics platform as basis for alerting.</span><span class="sxs-lookup"><span data-stu-id="3f260-104">This article provides details of Log alerts are one of the types of alerts supported within the new [Azure Alerts](monitoring-overview-unified-alerts.md) and allow users to use Azure's analytics platform as basis for alerting.</span></span>


<span data-ttu-id="3f260-105">Log Alert consists of Log Search rules created for [Azure Log Analytics](../log-analytics/log-analytics-tutorial-viewdata.md) or [Application Insights](../application-insights/app-insights-cloudservices.md#view-azure-diagnostic-events).</span><span class="sxs-lookup"><span data-stu-id="3f260-105">Log Alert consists of Log Search rules created for [Azure Log Analytics](../log-analytics/log-analytics-tutorial-viewdata.md) or [Application Insights](../application-insights/app-insights-cloudservices.md#view-azure-diagnostic-events).</span></span> <span data-ttu-id="3f260-106">Pricing details for Log Alerts is available at the [Azure Monitor Pricing](https://azure.microsoft.com/en-us/pricing/details/monitor/) page.</span><span class="sxs-lookup"><span data-stu-id="3f260-106">Pricing details for Log Alerts is available at the [Azure Monitor Pricing](https://azure.microsoft.com/en-us/pricing/details/monitor/) page.</span></span> <span data-ttu-id="3f260-107">In Azure bills, Log Alerts are represented as type `microsoft.insights/scheduledqueryrules` with:</span><span class="sxs-lookup"><span data-stu-id="3f260-107">In Azure bills, Log Alerts are represented as type `microsoft.insights/scheduledqueryrules` with:</span></span>
- <span data-ttu-id="3f260-108">Log Alerts on Application Insights shown with exact alert name along with resource group and alert properties</span><span class="sxs-lookup"><span data-stu-id="3f260-108">Log Alerts on Application Insights shown with exact alert name along with resource group and alert properties</span></span>
- <span data-ttu-id="3f260-109">Log Alerts on Log Analytics shown with alert name as `<WorkspaceName>|<savedSearchId>|<scheduleId>|<ActionId>` along with resource group and alert properties</span><span class="sxs-lookup"><span data-stu-id="3f260-109">Log Alerts on Log Analytics shown with alert name as `<WorkspaceName>|<savedSearchId>|<scheduleId>|<ActionId>` along with resource group and alert properties</span></span>

    > [!NOTE]
    > <span data-ttu-id="3f260-110">The name for all saved searches, schedules, and actions created with the Log Analytics API must be in lowercase.</span><span class="sxs-lookup"><span data-stu-id="3f260-110">The name for all saved searches, schedules, and actions created with the Log Analytics API must be in lowercase.</span></span> <span data-ttu-id="3f260-111">If invalid characters such as `<, >, %, &, \, ?, /` are used - they will be replaced with `_` in the bill.</span><span class="sxs-lookup"><span data-stu-id="3f260-111">If invalid characters such as `<, >, %, &, \, ?, /` are used - they will be replaced with `_` in the bill.</span></span>

## <a name="log-search-alert-rule---definition-and-types"></a><span data-ttu-id="3f260-112">Log search alert rule - definition and types</span><span class="sxs-lookup"><span data-stu-id="3f260-112">Log search alert rule - definition and types</span></span>

<span data-ttu-id="3f260-113">Log search rules are created by Azure Alerts to automatically run specified log queries at regular intervals.</span><span class="sxs-lookup"><span data-stu-id="3f260-113">Log search rules are created by Azure Alerts to automatically run specified log queries at regular intervals.</span></span>  <span data-ttu-id="3f260-114">If the results of the log query match particular criteria, then an alert record is created.</span><span class="sxs-lookup"><span data-stu-id="3f260-114">If the results of the log query match particular criteria, then an alert record is created.</span></span> <span data-ttu-id="3f260-115">The rule can then automatically run one or more actions using [Action Groups](monitoring-action-groups.md).</span><span class="sxs-lookup"><span data-stu-id="3f260-115">The rule can then automatically run one or more actions using [Action Groups](monitoring-action-groups.md).</span></span> 

<span data-ttu-id="3f260-116">Log search rules are defined by the following details:</span><span class="sxs-lookup"><span data-stu-id="3f260-116">Log search rules are defined by the following details:</span></span>
- <span data-ttu-id="3f260-117">**Log Query**.</span><span class="sxs-lookup"><span data-stu-id="3f260-117">**Log Query**.</span></span>  <span data-ttu-id="3f260-118">The query that runs every time the alert rule fires.</span><span class="sxs-lookup"><span data-stu-id="3f260-118">The query that runs every time the alert rule fires.</span></span>  <span data-ttu-id="3f260-119">The records returned by this query are used to determine whether an alert is created.</span><span class="sxs-lookup"><span data-stu-id="3f260-119">The records returned by this query are used to determine whether an alert is created.</span></span> <span data-ttu-id="3f260-120">*Azure Application Insights* query can also include [cross-application calls](https://dev.applicationinsights.io/ai/documentation/2-Using-the-API/CrossResourceQuery), provided the user has access rights to the external applications.</span><span class="sxs-lookup"><span data-stu-id="3f260-120">*Azure Application Insights* query can also include [cross-application calls](https://dev.applicationinsights.io/ai/documentation/2-Using-the-API/CrossResourceQuery), provided the user has access rights to the external applications.</span></span> 

    > [!IMPORTANT]
    > <span data-ttu-id="3f260-121">Suppport of [cross application query for Application Insights](https://dev.applicationinsights.io/ai/documentation/2-Using-the-API/CrossResourceQuery) is in preview - the functionality limited to use with 2 or more apps and user experience is subject to change.</span><span class="sxs-lookup"><span data-stu-id="3f260-121">Suppport of [cross application query for Application Insights](https://dev.applicationinsights.io/ai/documentation/2-Using-the-API/CrossResourceQuery) is in preview - the functionality limited to use with 2 or more apps and user experience is subject to change.</span></span> <span data-ttu-id="3f260-122">Usage of [cross workspace query](https://dev.loganalytics.io/oms/documentation/3-Using-the-API/CrossResourceQuery) and [cross-resource query for Log Analytics](../log-analytics/log-analytics-cross-workspace-search.md) is currently **not supported**  in Azure alerts.</span><span class="sxs-lookup"><span data-stu-id="3f260-122">Usage of [cross workspace query](https://dev.loganalytics.io/oms/documentation/3-Using-the-API/CrossResourceQuery) and [cross-resource query for Log Analytics](../log-analytics/log-analytics-cross-workspace-search.md) is currently **not supported**  in Azure alerts.</span></span>

- <span data-ttu-id="3f260-123">**Time Period**.</span><span class="sxs-lookup"><span data-stu-id="3f260-123">**Time Period**.</span></span>  <span data-ttu-id="3f260-124">Specifies the time range for the query.</span><span class="sxs-lookup"><span data-stu-id="3f260-124">Specifies the time range for the query.</span></span> <span data-ttu-id="3f260-125">The query returns only records that were created within this range of the current time.</span><span class="sxs-lookup"><span data-stu-id="3f260-125">The query returns only records that were created within this range of the current time.</span></span> <span data-ttu-id="3f260-126">Time period restricts the data fetched for log query to prevent abuse and circumvents any time command (like ago) used in log query.</span><span class="sxs-lookup"><span data-stu-id="3f260-126">Time period restricts the data fetched for log query to prevent abuse and circumvents any time command (like ago) used in log query.</span></span> <br><span data-ttu-id="3f260-127">*For example, If the time period is set to 60 minutes, and the query is run at 1:15 PM, only records created between 12:15 PM and 1:15 PM is returned to execute log query. Now if the log query uses time command like ago (7d), the log query would be run only for data between 12:15 PM and 1:15 PM - as if data exists for only the past 60 minutes. And not for seven days of data as specified in log query.*</span><span class="sxs-lookup"><span data-stu-id="3f260-127">*For example, If the time period is set to 60 minutes, and the query is run at 1:15 PM, only records created between 12:15 PM and 1:15 PM is returned to execute log query. Now if the log query uses time command like ago (7d), the log query would be run only for data between 12:15 PM and 1:15 PM - as if data exists for only the past 60 minutes. And not for seven days of data as specified in log query.*</span></span>
- <span data-ttu-id="3f260-128">**Frequency**.</span><span class="sxs-lookup"><span data-stu-id="3f260-128">**Frequency**.</span></span>  <span data-ttu-id="3f260-129">Specifies how often the query should be run.</span><span class="sxs-lookup"><span data-stu-id="3f260-129">Specifies how often the query should be run.</span></span> <span data-ttu-id="3f260-130">Can be any value between 5 minutes and 24 hours.</span><span class="sxs-lookup"><span data-stu-id="3f260-130">Can be any value between 5 minutes and 24 hours.</span></span> <span data-ttu-id="3f260-131">Should be equal to or less than the time period.</span><span class="sxs-lookup"><span data-stu-id="3f260-131">Should be equal to or less than the time period.</span></span>  <span data-ttu-id="3f260-132">If the value is greater than the time period, then you risk records being missed.</span><span class="sxs-lookup"><span data-stu-id="3f260-132">If the value is greater than the time period, then you risk records being missed.</span></span><br><span data-ttu-id="3f260-133">*For example, consider a time period of 30 minutes and a frequency of 60 minutes.  If the query is run at 1:00, it returns records between 12:30 and 1:00 PM.  The next time the query would run is 2:00 when it would return records between 1:30 and 2:00.  Any records created between 1:00 and 1:30 would never be evaluated.*</span><span class="sxs-lookup"><span data-stu-id="3f260-133">*For example, consider a time period of 30 minutes and a frequency of 60 minutes.  If the query is run at 1:00, it returns records between 12:30 and 1:00 PM.  The next time the query would run is 2:00 when it would return records between 1:30 and 2:00.  Any records created between 1:00 and 1:30 would never be evaluated.*</span></span>
- <span data-ttu-id="3f260-134">**Threshold**.</span><span class="sxs-lookup"><span data-stu-id="3f260-134">**Threshold**.</span></span>  <span data-ttu-id="3f260-135">The results of the log search are evaluated to determine whether an alert should be created.</span><span class="sxs-lookup"><span data-stu-id="3f260-135">The results of the log search are evaluated to determine whether an alert should be created.</span></span>  <span data-ttu-id="3f260-136">The threshold is different for the different types of log search alert rules.</span><span class="sxs-lookup"><span data-stu-id="3f260-136">The threshold is different for the different types of log search alert rules.</span></span>

<span data-ttu-id="3f260-137">Log search rules be it for [Azure Log Analytics](../log-analytics/log-analytics-tutorial-viewdata.md) or [Application Insights](../application-insights/app-insights-cloudservices.md#view-azure-diagnostic-events), can be of two types.</span><span class="sxs-lookup"><span data-stu-id="3f260-137">Log search rules be it for [Azure Log Analytics](../log-analytics/log-analytics-tutorial-viewdata.md) or [Application Insights](../application-insights/app-insights-cloudservices.md#view-azure-diagnostic-events), can be of two types.</span></span> <span data-ttu-id="3f260-138">Each of these types is described in detail in the sections that follow.</span><span class="sxs-lookup"><span data-stu-id="3f260-138">Each of these types is described in detail in the sections that follow.</span></span>

- <span data-ttu-id="3f260-139">**[Number of results](#number-of-results-alert-rules)**.</span><span class="sxs-lookup"><span data-stu-id="3f260-139">**[Number of results](#number-of-results-alert-rules)**.</span></span> <span data-ttu-id="3f260-140">Single alert created when the number records returned by the log search exceed a specified number.</span><span class="sxs-lookup"><span data-stu-id="3f260-140">Single alert created when the number records returned by the log search exceed a specified number.</span></span>
- <span data-ttu-id="3f260-141">**[Metric measurement](#metric-measurement-alert-rules)**.</span><span class="sxs-lookup"><span data-stu-id="3f260-141">**[Metric measurement](#metric-measurement-alert-rules)**.</span></span>  <span data-ttu-id="3f260-142">Alert created for each object in the results of the log search with values that exceed specified threshold.</span><span class="sxs-lookup"><span data-stu-id="3f260-142">Alert created for each object in the results of the log search with values that exceed specified threshold.</span></span>

<span data-ttu-id="3f260-143">The differences between alert rule types are as follows.</span><span class="sxs-lookup"><span data-stu-id="3f260-143">The differences between alert rule types are as follows.</span></span>

- <span data-ttu-id="3f260-144">*Number of results* alert rules always creates a single alert, while *Metric measurement* alert rule creates an alert for each object that exceeds the threshold.</span><span class="sxs-lookup"><span data-stu-id="3f260-144">*Number of results* alert rules always creates a single alert, while *Metric measurement* alert rule creates an alert for each object that exceeds the threshold.</span></span>
- <span data-ttu-id="3f260-145">*Number of results* alert rules create an alert when the threshold is exceeded a single time.</span><span class="sxs-lookup"><span data-stu-id="3f260-145">*Number of results* alert rules create an alert when the threshold is exceeded a single time.</span></span> <span data-ttu-id="3f260-146">*Metric measurement* alert rules can create an alert when the threshold is exceeded a certain number of times over a particular time interval.</span><span class="sxs-lookup"><span data-stu-id="3f260-146">*Metric measurement* alert rules can create an alert when the threshold is exceeded a certain number of times over a particular time interval.</span></span>

### <a name="number-of-results-alert-rules"></a><span data-ttu-id="3f260-147">Number of results alert rules</span><span class="sxs-lookup"><span data-stu-id="3f260-147">Number of results alert rules</span></span>
<span data-ttu-id="3f260-148">**Number of results** alert rules create a single alert when the number of records returned by the search query exceed the specified threshold.</span><span class="sxs-lookup"><span data-stu-id="3f260-148">**Number of results** alert rules create a single alert when the number of records returned by the search query exceed the specified threshold.</span></span> <span data-ttu-id="3f260-149">This type of alert rule is ideal for working with events such as Windows event logs, Syslog, WebApp Response, and Custom logs.</span><span class="sxs-lookup"><span data-stu-id="3f260-149">This type of alert rule is ideal for working with events such as Windows event logs, Syslog, WebApp Response, and Custom logs.</span></span>  <span data-ttu-id="3f260-150">You may want to create an alert when a particular error event gets created, or when multiple error events are created within a particular time period.</span><span class="sxs-lookup"><span data-stu-id="3f260-150">You may want to create an alert when a particular error event gets created, or when multiple error events are created within a particular time period.</span></span>

<span data-ttu-id="3f260-151">**Threshold**: The threshold for a Number of results alert rules is greater than or less than a particular value.</span><span class="sxs-lookup"><span data-stu-id="3f260-151">**Threshold**: The threshold for a Number of results alert rules is greater than or less than a particular value.</span></span>  <span data-ttu-id="3f260-152">If the number of records returned by the log search match this criteria, then an alert is created.</span><span class="sxs-lookup"><span data-stu-id="3f260-152">If the number of records returned by the log search match this criteria, then an alert is created.</span></span>

<span data-ttu-id="3f260-153">To alert on a single event, set the number of results to greater than 0 and check for the occurrence of a single event that was created since the last time the query was run.</span><span class="sxs-lookup"><span data-stu-id="3f260-153">To alert on a single event, set the number of results to greater than 0 and check for the occurrence of a single event that was created since the last time the query was run.</span></span> <span data-ttu-id="3f260-154">Some applications may log an occasional error that shouldn't necessarily raise an alert.</span><span class="sxs-lookup"><span data-stu-id="3f260-154">Some applications may log an occasional error that shouldn't necessarily raise an alert.</span></span>  <span data-ttu-id="3f260-155">For example, the application may retry the process that created the error event and then succeed the next time.</span><span class="sxs-lookup"><span data-stu-id="3f260-155">For example, the application may retry the process that created the error event and then succeed the next time.</span></span>  <span data-ttu-id="3f260-156">In this case, you may not want to create the alert unless multiple events are created within a particular time period.</span><span class="sxs-lookup"><span data-stu-id="3f260-156">In this case, you may not want to create the alert unless multiple events are created within a particular time period.</span></span>  

<span data-ttu-id="3f260-157">In some cases, you may want to create an alert in the absence of an event.</span><span class="sxs-lookup"><span data-stu-id="3f260-157">In some cases, you may want to create an alert in the absence of an event.</span></span>  <span data-ttu-id="3f260-158">For example, a process may log regular events to indicate that it's working properly.</span><span class="sxs-lookup"><span data-stu-id="3f260-158">For example, a process may log regular events to indicate that it's working properly.</span></span>  <span data-ttu-id="3f260-159">If it doesn't log one of these events within a particular time period, then an alert should be created.</span><span class="sxs-lookup"><span data-stu-id="3f260-159">If it doesn't log one of these events within a particular time period, then an alert should be created.</span></span>  <span data-ttu-id="3f260-160">In this case, you would set the threshold to **less than 1**.</span><span class="sxs-lookup"><span data-stu-id="3f260-160">In this case, you would set the threshold to **less than 1**.</span></span>

#### <a name="example"></a><span data-ttu-id="3f260-161">Example</span><span class="sxs-lookup"><span data-stu-id="3f260-161">Example</span></span>
<span data-ttu-id="3f260-162">Consider a scenario where you want to know when your web-based App gives a response to users with code 500 (that is) Internal Server Error.</span><span class="sxs-lookup"><span data-stu-id="3f260-162">Consider a scenario where you want to know when your web-based App gives a response to users with code 500 (that is) Internal Server Error.</span></span> <span data-ttu-id="3f260-163">You would create an alert rule with the following details:</span><span class="sxs-lookup"><span data-stu-id="3f260-163">You would create an alert rule with the following details:</span></span>  
- <span data-ttu-id="3f260-164">**Query:** requests | where resultCode == "500"</span><span class="sxs-lookup"><span data-stu-id="3f260-164">**Query:** requests | where resultCode == "500"</span></span><br>
- <span data-ttu-id="3f260-165">**Time period:** 30 minutes</span><span class="sxs-lookup"><span data-stu-id="3f260-165">**Time period:** 30 minutes</span></span><br>
- <span data-ttu-id="3f260-166">**Alert frequency:** five minutes</span><span class="sxs-lookup"><span data-stu-id="3f260-166">**Alert frequency:** five minutes</span></span><br>
- <span data-ttu-id="3f260-167">**Threshold value:** Greater than 0</span><span class="sxs-lookup"><span data-stu-id="3f260-167">**Threshold value:** Greater than 0</span></span><br>

<span data-ttu-id="3f260-168">Then alert would run the query every 5 minutes, with 30 minutes of data - to look for any record where result code was 500.</span><span class="sxs-lookup"><span data-stu-id="3f260-168">Then alert would run the query every 5 minutes, with 30 minutes of data - to look for any record where result code was 500.</span></span> <span data-ttu-id="3f260-169">If even one such record is found, it fires the alert and triggers the action configured.</span><span class="sxs-lookup"><span data-stu-id="3f260-169">If even one such record is found, it fires the alert and triggers the action configured.</span></span>

### <a name="metric-measurement-alert-rules"></a><span data-ttu-id="3f260-170">Metric measurement alert rules</span><span class="sxs-lookup"><span data-stu-id="3f260-170">Metric measurement alert rules</span></span>

- <span data-ttu-id="3f260-171">**Metric measurement** alert rules create an alert for each object in a query with a value that exceeds a specified threshold.</span><span class="sxs-lookup"><span data-stu-id="3f260-171">**Metric measurement** alert rules create an alert for each object in a query with a value that exceeds a specified threshold.</span></span>  <span data-ttu-id="3f260-172">They have the following distinct differences from **Number of results** alert rules.</span><span class="sxs-lookup"><span data-stu-id="3f260-172">They have the following distinct differences from **Number of results** alert rules.</span></span>
- <span data-ttu-id="3f260-173">**Aggregate function**: Determines the calculation that is performed and potentially a numeric field to aggregate.</span><span class="sxs-lookup"><span data-stu-id="3f260-173">**Aggregate function**: Determines the calculation that is performed and potentially a numeric field to aggregate.</span></span>  <span data-ttu-id="3f260-174">For example, **count()** returns the number of records in the query, **avg(CounterValue)** returns the average of the CounterValue field over the interval.</span><span class="sxs-lookup"><span data-stu-id="3f260-174">For example, **count()** returns the number of records in the query, **avg(CounterValue)** returns the average of the CounterValue field over the interval.</span></span> <span data-ttu-id="3f260-175">Aggregate function in query must be named/called: AggregatedValue and provide a numeric value.</span><span class="sxs-lookup"><span data-stu-id="3f260-175">Aggregate function in query must be named/called: AggregatedValue and provide a numeric value.</span></span> 
- <span data-ttu-id="3f260-176">**Group Field**: A record with an aggregated value is created for each instance of this field, and an alert can be generated for each.</span><span class="sxs-lookup"><span data-stu-id="3f260-176">**Group Field**: A record with an aggregated value is created for each instance of this field, and an alert can be generated for each.</span></span>  <span data-ttu-id="3f260-177">For example, if you wanted to generate an alert for each computer, you would use **by Computer**</span><span class="sxs-lookup"><span data-stu-id="3f260-177">For example, if you wanted to generate an alert for each computer, you would use **by Computer**</span></span> 

    > [!NOTE]
    > <span data-ttu-id="3f260-178">For Metric measurement alert rules that are based on Application Insights, you can specify the field for grouping the data.</span><span class="sxs-lookup"><span data-stu-id="3f260-178">For Metric measurement alert rules that are based on Application Insights, you can specify the field for grouping the data.</span></span> <span data-ttu-id="3f260-179">To do this, use the **Aggregate on** option in the rule definition.</span><span class="sxs-lookup"><span data-stu-id="3f260-179">To do this, use the **Aggregate on** option in the rule definition.</span></span>   
    
- <span data-ttu-id="3f260-180">**Interval**:  Defines the time interval over which the data is aggregated.</span><span class="sxs-lookup"><span data-stu-id="3f260-180">**Interval**:  Defines the time interval over which the data is aggregated.</span></span>  <span data-ttu-id="3f260-181">For example, if you specified **five minutes**, a record would be created for each instance of the group field aggregated at 5-minute intervals over the time period specified for the alert.</span><span class="sxs-lookup"><span data-stu-id="3f260-181">For example, if you specified **five minutes**, a record would be created for each instance of the group field aggregated at 5-minute intervals over the time period specified for the alert.</span></span>

    > [!NOTE]
    > <span data-ttu-id="3f260-182">Bin function must be used in query to specify interval.</span><span class="sxs-lookup"><span data-stu-id="3f260-182">Bin function must be used in query to specify interval.</span></span> <span data-ttu-id="3f260-183">As bin() can result in unequal time intervals  - Alert will automatically convert bin command to  bin_at command with appropriate time at runtime, to ensure results with a fixed point</span><span class="sxs-lookup"><span data-stu-id="3f260-183">As bin() can result in unequal time intervals  - Alert will automatically convert bin command to  bin_at command with appropriate time at runtime, to ensure results with a fixed point</span></span>
    
- <span data-ttu-id="3f260-184">**Threshold**: The threshold for Metric measurement alert rules is defined by an aggregate value and a number of breaches.</span><span class="sxs-lookup"><span data-stu-id="3f260-184">**Threshold**: The threshold for Metric measurement alert rules is defined by an aggregate value and a number of breaches.</span></span>  <span data-ttu-id="3f260-185">If any data point in the log search exceeds this value, it's considered a breach.</span><span class="sxs-lookup"><span data-stu-id="3f260-185">If any data point in the log search exceeds this value, it's considered a breach.</span></span>  <span data-ttu-id="3f260-186">If the number of breaches in for any object in the results exceeds the specified value, then an alert is created for that object.</span><span class="sxs-lookup"><span data-stu-id="3f260-186">If the number of breaches in for any object in the results exceeds the specified value, then an alert is created for that object.</span></span>

#### <a name="example"></a><span data-ttu-id="3f260-187">Example</span><span class="sxs-lookup"><span data-stu-id="3f260-187">Example</span></span>
<span data-ttu-id="3f260-188">Consider a scenario where you wanted an alert if any computer exceeded processor utilization of 90% three times over 30 minutes.</span><span class="sxs-lookup"><span data-stu-id="3f260-188">Consider a scenario where you wanted an alert if any computer exceeded processor utilization of 90% three times over 30 minutes.</span></span>  <span data-ttu-id="3f260-189">You would create an alert rule with the following details:</span><span class="sxs-lookup"><span data-stu-id="3f260-189">You would create an alert rule with the following details:</span></span>  

- <span data-ttu-id="3f260-190">**Query:** Perf | where ObjectName == "Processor" and CounterName == "% Processor Time" | summarize AggregatedValue = avg(CounterValue) by bin(TimeGenerated, 5m), Computer</span><span class="sxs-lookup"><span data-stu-id="3f260-190">**Query:** Perf | where ObjectName == "Processor" and CounterName == "% Processor Time" | summarize AggregatedValue = avg(CounterValue) by bin(TimeGenerated, 5m), Computer</span></span><br>
- <span data-ttu-id="3f260-191">**Time period:** 30 minutes</span><span class="sxs-lookup"><span data-stu-id="3f260-191">**Time period:** 30 minutes</span></span><br>
- <span data-ttu-id="3f260-192">**Alert frequency:** five minutes</span><span class="sxs-lookup"><span data-stu-id="3f260-192">**Alert frequency:** five minutes</span></span><br>
- <span data-ttu-id="3f260-193">**Aggregate value:** Greater than 90</span><span class="sxs-lookup"><span data-stu-id="3f260-193">**Aggregate value:** Greater than 90</span></span><br>
- <span data-ttu-id="3f260-194">**Trigger alert based on:** Total breaches Greater than 2</span><span class="sxs-lookup"><span data-stu-id="3f260-194">**Trigger alert based on:** Total breaches Greater than 2</span></span><br>

<span data-ttu-id="3f260-195">The query would create an average value for each computer at 5-minute intervals.</span><span class="sxs-lookup"><span data-stu-id="3f260-195">The query would create an average value for each computer at 5-minute intervals.</span></span>  <span data-ttu-id="3f260-196">This query would be run every 5 minutes for data collected over the previous 30 minutes.</span><span class="sxs-lookup"><span data-stu-id="3f260-196">This query would be run every 5 minutes for data collected over the previous 30 minutes.</span></span>  <span data-ttu-id="3f260-197">Sample data is shown below for three computers.</span><span class="sxs-lookup"><span data-stu-id="3f260-197">Sample data is shown below for three computers.</span></span>

![Sample query results](./media/monitor-alerts-unified/metrics-measurement-sample-graph.png)

<span data-ttu-id="3f260-199">In this example, separate alerts would be created for srv02 and srv03 since they breached the 90% threshold 3 times over the time period.</span><span class="sxs-lookup"><span data-stu-id="3f260-199">In this example, separate alerts would be created for srv02 and srv03 since they breached the 90% threshold 3 times over the time period.</span></span>  <span data-ttu-id="3f260-200">If the **Trigger alert based on:** were changed to **Consecutive** then an alert would be created only for srv03 since it breached the threshold for three consecutive samples.</span><span class="sxs-lookup"><span data-stu-id="3f260-200">If the **Trigger alert based on:** were changed to **Consecutive** then an alert would be created only for srv03 since it breached the threshold for three consecutive samples.</span></span>


## <a name="log-search-alert-rule---creation-and-modification"></a><span data-ttu-id="3f260-201">Log search alert rule - creation and modification</span><span class="sxs-lookup"><span data-stu-id="3f260-201">Log search alert rule - creation and modification</span></span>

<span data-ttu-id="3f260-202">Log alert as well as its consisting log search alert rule can be viewed, created, or modified from:</span><span class="sxs-lookup"><span data-stu-id="3f260-202">Log alert as well as its consisting log search alert rule can be viewed, created, or modified from:</span></span>
- <span data-ttu-id="3f260-203">Azure portal</span><span class="sxs-lookup"><span data-stu-id="3f260-203">Azure portal</span></span>
- <span data-ttu-id="3f260-204">REST APIs (including via PowerShell)</span><span class="sxs-lookup"><span data-stu-id="3f260-204">REST APIs (including via PowerShell)</span></span>
- <span data-ttu-id="3f260-205">Azure Resource Manager Templates</span><span class="sxs-lookup"><span data-stu-id="3f260-205">Azure Resource Manager Templates</span></span>

### <a name="azure-portal"></a><span data-ttu-id="3f260-206">Azure portal</span><span class="sxs-lookup"><span data-stu-id="3f260-206">Azure portal</span></span>
<span data-ttu-id="3f260-207">Since the introduction of the [new Azure alerts](monitoring-overview-unified-alerts.md), now users can manage all types of alerts in Azure portal from a single location and with similar steps for usage.</span><span class="sxs-lookup"><span data-stu-id="3f260-207">Since the introduction of the [new Azure alerts](monitoring-overview-unified-alerts.md), now users can manage all types of alerts in Azure portal from a single location and with similar steps for usage.</span></span> <span data-ttu-id="3f260-208">Learn more about [using new Azure Alerts](monitor-alerts-unified-usage.md).</span><span class="sxs-lookup"><span data-stu-id="3f260-208">Learn more about [using new Azure Alerts](monitor-alerts-unified-usage.md).</span></span>

<span data-ttu-id="3f260-209">Also, users can perfect their queries in Analytics platform of choice in Azure and then *import them for use in Alerts  by saving the query*.</span><span class="sxs-lookup"><span data-stu-id="3f260-209">Also, users can perfect their queries in Analytics platform of choice in Azure and then *import them for use in Alerts  by saving the query*.</span></span> <span data-ttu-id="3f260-210">Steps to follow:</span><span class="sxs-lookup"><span data-stu-id="3f260-210">Steps to follow:</span></span>
- <span data-ttu-id="3f260-211">*For Application Insights*: Go-to Analytics portal, validate query and its results.</span><span class="sxs-lookup"><span data-stu-id="3f260-211">*For Application Insights*: Go-to Analytics portal, validate query and its results.</span></span> <span data-ttu-id="3f260-212">Then save with unique name into *Shared Queries*.</span><span class="sxs-lookup"><span data-stu-id="3f260-212">Then save with unique name into *Shared Queries*.</span></span>
- <span data-ttu-id="3f260-213">*For Log Analytics*: Go-to Log Search, validate query and its results.</span><span class="sxs-lookup"><span data-stu-id="3f260-213">*For Log Analytics*: Go-to Log Search, validate query and its results.</span></span> <span data-ttu-id="3f260-214">Then use save with unique name into any category.</span><span class="sxs-lookup"><span data-stu-id="3f260-214">Then use save with unique name into any category.</span></span>

<span data-ttu-id="3f260-215">Then when [creating a log alert in Alerts ](monitor-alerts-unified-usage.md), you see the saved query listed as signal type **Log (Saved Query)**; as illustrated in below example: ![Saved Query imported to Alerts](./media/monitor-alerts-unified/AlertsPreviewResourceSelectionLog-new.png)</span><span class="sxs-lookup"><span data-stu-id="3f260-215">Then when [creating a log alert in Alerts ](monitor-alerts-unified-usage.md), you see the saved query listed as signal type **Log (Saved Query)**; as illustrated in below example: ![Saved Query imported to Alerts](./media/monitor-alerts-unified/AlertsPreviewResourceSelectionLog-new.png)</span></span>

> [!NOTE]
> <span data-ttu-id="3f260-216">Using **Log (Saved Query)** results in an import to Alerts.</span><span class="sxs-lookup"><span data-stu-id="3f260-216">Using **Log (Saved Query)** results in an import to Alerts.</span></span> <span data-ttu-id="3f260-217">Hence any changes done after in Analytics will not be reflective in log search alert rules and vice-versa.</span><span class="sxs-lookup"><span data-stu-id="3f260-217">Hence any changes done after in Analytics will not be reflective in log search alert rules and vice-versa.</span></span>

### <a name="rest-apis"></a><span data-ttu-id="3f260-218">REST APIs</span><span class="sxs-lookup"><span data-stu-id="3f260-218">REST APIs</span></span>
<span data-ttu-id="3f260-219">APIs provided for Log alerts are RESTful and can be accessed via the Azure Resource Manager REST API.</span><span class="sxs-lookup"><span data-stu-id="3f260-219">APIs provided for Log alerts are RESTful and can be accessed via the Azure Resource Manager REST API.</span></span> <span data-ttu-id="3f260-220">Hence can be accessed over PowerShell, as well other options to leverage the APIs.</span><span class="sxs-lookup"><span data-stu-id="3f260-220">Hence can be accessed over PowerShell, as well other options to leverage the APIs.</span></span>

<span data-ttu-id="3f260-221">For details as well as examples on using REST API, kindly refer to:</span><span class="sxs-lookup"><span data-stu-id="3f260-221">For details as well as examples on using REST API, kindly refer to:</span></span>
- <span data-ttu-id="3f260-222">[Log Analytics Alert REST API](../log-analytics/log-analytics-api-alerts.md) -  to create and manage log search alert rules for Azure Log Analytics</span><span class="sxs-lookup"><span data-stu-id="3f260-222">[Log Analytics Alert REST API](../log-analytics/log-analytics-api-alerts.md) -  to create and manage log search alert rules for Azure Log Analytics</span></span>
- <span data-ttu-id="3f260-223">[Azure Monitor Scheduled Query Rules REST API](https://docs.microsoft.com/rest/api/monitor/scheduledqueryrules/) - to create and manage log search alert rules for Azure Application Insights</span><span class="sxs-lookup"><span data-stu-id="3f260-223">[Azure Monitor Scheduled Query Rules REST API](https://docs.microsoft.com/rest/api/monitor/scheduledqueryrules/) - to create and manage log search alert rules for Azure Application Insights</span></span>

### <a name="azure-resource-manager-template"></a><span data-ttu-id="3f260-224">Azure Resource Manager Template</span><span class="sxs-lookup"><span data-stu-id="3f260-224">Azure Resource Manager Template</span></span>
<span data-ttu-id="3f260-225">Users can also use the flexibility provided by [Azure Resource Manager](../azure-resource-manager/resource-group-overview.md) to create and update resources - for creating or updating Log alerts.</span><span class="sxs-lookup"><span data-stu-id="3f260-225">Users can also use the flexibility provided by [Azure Resource Manager](../azure-resource-manager/resource-group-overview.md) to create and update resources - for creating or updating Log alerts.</span></span>

<span data-ttu-id="3f260-226">For details as well as examples on using Resource Manager templates, kindly refer to:</span><span class="sxs-lookup"><span data-stu-id="3f260-226">For details as well as examples on using Resource Manager templates, kindly refer to:</span></span>
- <span data-ttu-id="3f260-227">[Saved search and alerts management](monitor-alerts-unified-log-template.md#managing-log-alert-on-log-analytics) for log alerts based on Azure Log Analytics</span><span class="sxs-lookup"><span data-stu-id="3f260-227">[Saved search and alerts management](monitor-alerts-unified-log-template.md#managing-log-alert-on-log-analytics) for log alerts based on Azure Log Analytics</span></span>
- <span data-ttu-id="3f260-228">[Scheduled Query Rule](monitor-alerts-unified-log-template.md#managing-log-alert-on-application-insights) for log alerts based on Azure Application Insights</span><span class="sxs-lookup"><span data-stu-id="3f260-228">[Scheduled Query Rule](monitor-alerts-unified-log-template.md#managing-log-alert-on-application-insights) for log alerts based on Azure Application Insights</span></span>
 

## <a name="next-steps"></a><span data-ttu-id="3f260-229">Next steps</span><span class="sxs-lookup"><span data-stu-id="3f260-229">Next steps</span></span>
* <span data-ttu-id="3f260-230">Understand [webhooks in log alerts in Azure](monitor-alerts-unified-log-webhook.md).</span><span class="sxs-lookup"><span data-stu-id="3f260-230">Understand [webhooks in log alerts in Azure](monitor-alerts-unified-log-webhook.md).</span></span>
* <span data-ttu-id="3f260-231">Learn about the new [Azure Alerts](monitoring-overview-unified-alerts.md).</span><span class="sxs-lookup"><span data-stu-id="3f260-231">Learn about the new [Azure Alerts](monitoring-overview-unified-alerts.md).</span></span>
* <span data-ttu-id="3f260-232">Learn more about [Application Insights](../application-insights/app-insights-analytics.md).</span><span class="sxs-lookup"><span data-stu-id="3f260-232">Learn more about [Application Insights](../application-insights/app-insights-analytics.md).</span></span>
* <span data-ttu-id="3f260-233">Learn more about [Log Analytics](../log-analytics/log-analytics-overview.md).</span><span class="sxs-lookup"><span data-stu-id="3f260-233">Learn more about [Log Analytics](../log-analytics/log-analytics-overview.md).</span></span>    
