---
title: Designing Azure Virtual Machine Scale Sets For Scale | Microsoft Docs
description: Learn about how to design your Azure Virtual Machine Scale Sets for scale
keywords: linux virtual machine,virtual machine scale sets
services: virtual-machine-scale-sets
documentationcenter: ''
author: gatneil
manager: madhana
editor: tysonn
tags: azure-resource-manager
ms.assetid: c27c6a59-a0ab-4117-a01b-42b049464ca1
ms.service: virtual-machine-scale-sets
ms.workload: na
ms.tgt_pltfrm: vm-linux
ms.devlang: na
ms.topic: article
ms.date: 02/13/2017
ms.author: negat
ms.openlocfilehash: de3687a1bf36bf49db400a5660ac631f20b629d0
ms.sourcegitcommit: 5b9d839c0c0a94b293fdafe1d6e5429506c07e05
ms.translationtype: HT
ms.contentlocale: nl-NL
ms.lasthandoff: 08/02/2018
ms.locfileid: "44660925"
---
# <a name="designing-vm-scale-sets-for-scale"></a><span data-ttu-id="6105f-104">Designing VM Scale Sets For Scale</span><span class="sxs-lookup"><span data-stu-id="6105f-104">Designing VM Scale Sets For Scale</span></span>
<span data-ttu-id="6105f-105">This topic discusses design considerations for Virtual Machine Scale Sets.</span><span class="sxs-lookup"><span data-stu-id="6105f-105">This topic discusses design considerations for Virtual Machine Scale Sets.</span></span> <span data-ttu-id="6105f-106">For information about what Virtual Machine Scale Sets are, refer to [Virtual Machine Scale Sets Overview](virtual-machine-scale-sets-overview.md).</span><span class="sxs-lookup"><span data-stu-id="6105f-106">For information about what Virtual Machine Scale Sets are, refer to [Virtual Machine Scale Sets Overview](virtual-machine-scale-sets-overview.md).</span></span>

## <a name="storage"></a><span data-ttu-id="6105f-107">Storage</span><span class="sxs-lookup"><span data-stu-id="6105f-107">Storage</span></span>

### <a name="scale-sets-with-azure-managed-disks"></a><span data-ttu-id="6105f-108">Scale sets with Azure Managed Disks</span><span class="sxs-lookup"><span data-stu-id="6105f-108">Scale sets with Azure Managed Disks</span></span>
<span data-ttu-id="6105f-109">Scale sets can be now created with [Azure Managed Disks](../storage/storage-managed-disks-overview.md).</span><span class="sxs-lookup"><span data-stu-id="6105f-109">Scale sets can be now created with [Azure Managed Disks](../storage/storage-managed-disks-overview.md).</span></span> <span data-ttu-id="6105f-110">Managed Disks provide the following benefits:</span><span class="sxs-lookup"><span data-stu-id="6105f-110">Managed Disks provide the following benefits:</span></span>
- <span data-ttu-id="6105f-111">You do not have to pre-create a set of Azure storage accounts for the scale set VMs.</span><span class="sxs-lookup"><span data-stu-id="6105f-111">You do not have to pre-create a set of Azure storage accounts for the scale set VMs.</span></span>
- <span data-ttu-id="6105f-112">You can define [attached data disks](virtual-machine-scale-sets-attached-disks.md) for the VMs in your scale set.</span><span class="sxs-lookup"><span data-stu-id="6105f-112">You can define [attached data disks](virtual-machine-scale-sets-attached-disks.md) for the VMs in your scale set.</span></span>
- <span data-ttu-id="6105f-113">Scale sets can be configured to [support up to 1,000 VMs in a set](virtual-machine-scale-sets-placement-groups.md).</span><span class="sxs-lookup"><span data-stu-id="6105f-113">Scale sets can be configured to [support up to 1,000 VMs in a set](virtual-machine-scale-sets-placement-groups.md).</span></span> 

<span data-ttu-id="6105f-114">You can create scale sets with Managed Disks starting with version "2016-04-30-preview" of the Azure Compute API.</span><span class="sxs-lookup"><span data-stu-id="6105f-114">You can create scale sets with Managed Disks starting with version "2016-04-30-preview" of the Azure Compute API.</span></span> <span data-ttu-id="6105f-115">For information on converting a scale set template to Managed Disks, refer to [Convert a scale set template to a managed disk scale set template](virtual-machine-scale-sets-convert-template-to-md.md).</span><span class="sxs-lookup"><span data-stu-id="6105f-115">For information on converting a scale set template to Managed Disks, refer to [Convert a scale set template to a managed disk scale set template](virtual-machine-scale-sets-convert-template-to-md.md).</span></span>

### <a name="user-managed-storage"></a><span data-ttu-id="6105f-116">User-managed Storage</span><span class="sxs-lookup"><span data-stu-id="6105f-116">User-managed Storage</span></span>
<span data-ttu-id="6105f-117">A scale set which is not defined with Azure Managed Disks relies on user-created storage accounts to store the OS disks of the VMs in the set.</span><span class="sxs-lookup"><span data-stu-id="6105f-117">A scale set which is not defined with Azure Managed Disks relies on user-created storage accounts to store the OS disks of the VMs in the set.</span></span> <span data-ttu-id="6105f-118">A ratio of 20 VMs per storage account or less is recommended to achieve maximum IO and also take advantage of _overprovisioning_ (see below).</span><span class="sxs-lookup"><span data-stu-id="6105f-118">A ratio of 20 VMs per storage account or less is recommended to achieve maximum IO and also take advantage of _overprovisioning_ (see below).</span></span> <span data-ttu-id="6105f-119">It is also recommended that you spread the beginning characters of the storage account names across the alphabet.</span><span class="sxs-lookup"><span data-stu-id="6105f-119">It is also recommended that you spread the beginning characters of the storage account names across the alphabet.</span></span> <span data-ttu-id="6105f-120">Doing so helps spread load across different internal systems.</span><span class="sxs-lookup"><span data-stu-id="6105f-120">Doing so helps spread load across different internal systems.</span></span> 

>[!NOTE]
><span data-ttu-id="6105f-121">VM Scale Sets API version `2016-04-30-preview` supports using Azure Managed Disks for the Operating System disk and any extra data disks.</span><span class="sxs-lookup"><span data-stu-id="6105f-121">VM Scale Sets API version `2016-04-30-preview` supports using Azure Managed Disks for the Operating System disk and any extra data disks.</span></span> <span data-ttu-id="6105f-122">For more information, see [Managed Disks Overview](../storage/storage-managed-disks-overview.md) and [Use Attached Data Disks](virtual-machine-scale-sets-attached-disks.md).</span><span class="sxs-lookup"><span data-stu-id="6105f-122">For more information, see [Managed Disks Overview](../storage/storage-managed-disks-overview.md) and [Use Attached Data Disks](virtual-machine-scale-sets-attached-disks.md).</span></span> 

## <a name="overprovisioning"></a><span data-ttu-id="6105f-123">Overprovisioning</span><span class="sxs-lookup"><span data-stu-id="6105f-123">Overprovisioning</span></span>
<span data-ttu-id="6105f-124">Starting with the "2016-03-30" API version, VM Scale Sets default to "overprovisioning" VMs.</span><span class="sxs-lookup"><span data-stu-id="6105f-124">Starting with the "2016-03-30" API version, VM Scale Sets default to "overprovisioning" VMs.</span></span> <span data-ttu-id="6105f-125">With overprovisioning turned on, the scale set actually spins up more VMs than you asked for, then deletes the extra VMs once the requested number of VMs are successfully provisioned.</span><span class="sxs-lookup"><span data-stu-id="6105f-125">With overprovisioning turned on, the scale set actually spins up more VMs than you asked for, then deletes the extra VMs once the requested number of VMs are successfully provisioned.</span></span> <span data-ttu-id="6105f-126">Overprovisioning improves provisioning success rates and reduces deployment time.</span><span class="sxs-lookup"><span data-stu-id="6105f-126">Overprovisioning improves provisioning success rates and reduces deployment time.</span></span> <span data-ttu-id="6105f-127">You are not billed for the extra VMs, and they do not count toward your quota limits.</span><span class="sxs-lookup"><span data-stu-id="6105f-127">You are not billed for the extra VMs, and they do not count toward your quota limits.</span></span>

<span data-ttu-id="6105f-128">While overprovisioning does improve provisioning success rates, it can cause confusing behavior for an application that is not designed to handle extra VMs appearing and then disappearing.</span><span class="sxs-lookup"><span data-stu-id="6105f-128">While overprovisioning does improve provisioning success rates, it can cause confusing behavior for an application that is not designed to handle extra VMs appearing and then disappearing.</span></span> <span data-ttu-id="6105f-129">To turn overprovisioning off, ensure you have the following string in your template: "overprovision": "false".</span><span class="sxs-lookup"><span data-stu-id="6105f-129">To turn overprovisioning off, ensure you have the following string in your template: "overprovision": "false".</span></span> <span data-ttu-id="6105f-130">More details can be found in the [VM Scale Set REST API documentation](https://msdn.microsoft.com/library/azure/mt589035.aspx).</span><span class="sxs-lookup"><span data-stu-id="6105f-130">More details can be found in the [VM Scale Set REST API documentation](https://msdn.microsoft.com/library/azure/mt589035.aspx).</span></span>

<span data-ttu-id="6105f-131">If your scale set uses user-managed storage, and you turn off overprovisioning, you can have more than 20 VMs per storage account, but it is not recommended to go above 40 for IO performance reasons.</span><span class="sxs-lookup"><span data-stu-id="6105f-131">If your scale set uses user-managed storage, and you turn off overprovisioning, you can have more than 20 VMs per storage account, but it is not recommended to go above 40 for IO performance reasons.</span></span> 

## <a name="limits"></a><span data-ttu-id="6105f-132">Limits</span><span class="sxs-lookup"><span data-stu-id="6105f-132">Limits</span></span>
<span data-ttu-id="6105f-133">A scale set built on a Marketplace image (also known as a platform image) and configured to use Azure Managed Disks supports a capacity of up to 1,000 VMs.</span><span class="sxs-lookup"><span data-stu-id="6105f-133">A scale set built on a Marketplace image (also known as a platform image) and configured to use Azure Managed Disks supports a capacity of up to 1,000 VMs.</span></span> <span data-ttu-id="6105f-134">If you configure your scale set to support more than 100 VMs, not all scenarios work the same (for example load balancing).</span><span class="sxs-lookup"><span data-stu-id="6105f-134">If you configure your scale set to support more than 100 VMs, not all scenarios work the same (for example load balancing).</span></span> <span data-ttu-id="6105f-135">For more information, see [Working with large virtual machine scale sets](virtual-machine-scale-sets-placement-groups.md).</span><span class="sxs-lookup"><span data-stu-id="6105f-135">For more information, see [Working with large virtual machine scale sets](virtual-machine-scale-sets-placement-groups.md).</span></span> 

<span data-ttu-id="6105f-136">A scale set configured with user-managed storage accounts is currently limited to 100 VMs (and 5 storage accounts are recommended for this scale).</span><span class="sxs-lookup"><span data-stu-id="6105f-136">A scale set configured with user-managed storage accounts is currently limited to 100 VMs (and 5 storage accounts are recommended for this scale).</span></span>

<span data-ttu-id="6105f-137">A scale set built on a custom image (one built by you) can have a capacity of up to 100 VMs when configured with Azure Managed disks.</span><span class="sxs-lookup"><span data-stu-id="6105f-137">A scale set built on a custom image (one built by you) can have a capacity of up to 100 VMs when configured with Azure Managed disks.</span></span> <span data-ttu-id="6105f-138">If the scale set is configured with user-managed storage accounts, it must create all OS disk VHDs within one storage account.</span><span class="sxs-lookup"><span data-stu-id="6105f-138">If the scale set is configured with user-managed storage accounts, it must create all OS disk VHDs within one storage account.</span></span> <span data-ttu-id="6105f-139">As a result, the maximum recommended number of VMs in a scale set built on a custom image and user-managed storage is 20.</span><span class="sxs-lookup"><span data-stu-id="6105f-139">As a result, the maximum recommended number of VMs in a scale set built on a custom image and user-managed storage is 20.</span></span> <span data-ttu-id="6105f-140">If you turn off overprovisioning, you can go up to 40.</span><span class="sxs-lookup"><span data-stu-id="6105f-140">If you turn off overprovisioning, you can go up to 40.</span></span>

<span data-ttu-id="6105f-141">For more VMs than these limits allow, you need to deploy multiple scale sets as shown in [this template](https://github.com/Azure/azure-quickstart-templates/tree/master/301-custom-images-at-scale).</span><span class="sxs-lookup"><span data-stu-id="6105f-141">For more VMs than these limits allow, you need to deploy multiple scale sets as shown in [this template](https://github.com/Azure/azure-quickstart-templates/tree/master/301-custom-images-at-scale).</span></span>

