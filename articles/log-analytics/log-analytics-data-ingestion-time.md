---
title: Data ingestion time in Azure Log Analytics | Microsoft Docs
description: Explains the different factors that affect latency in collecting data in Azure Log Analytics.
services: log-analytics
documentationcenter: ''
author: bwren
manager: carmonm
editor: tysonn
ms.service: log-analytics
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 07/10/2018
ms.author: bwren
ms.openlocfilehash: 0e513cc4f6a7d5d030ded807870de9eb0fdc0ed8
ms.sourcegitcommit: d1451406a010fd3aa854dc8e5b77dc5537d8050e
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 09/13/2018
ms.locfileid: "44867998"
---
# <a name="data-ingestion-time-in-log-analytics"></a><span data-ttu-id="f4ef5-103">Data ingestion time in Log Analytics</span><span class="sxs-lookup"><span data-stu-id="f4ef5-103">Data ingestion time in Log Analytics</span></span>
<span data-ttu-id="f4ef5-104">Azure Log Analytics is a high scale data service that serves thousands of customers sending terabytes of data each month at a growing pace.</span><span class="sxs-lookup"><span data-stu-id="f4ef5-104">Azure Log Analytics is a high scale data service that serves thousands of customers sending terabytes of data each month at a growing pace.</span></span> <span data-ttu-id="f4ef5-105">There are often questions about the time it takes for data to become available in Log Analytics after it's collected.</span><span class="sxs-lookup"><span data-stu-id="f4ef5-105">There are often questions about the time it takes for data to become available in Log Analytics after it's collected.</span></span> <span data-ttu-id="f4ef5-106">This article explains the different factors that affect this latency.</span><span class="sxs-lookup"><span data-stu-id="f4ef5-106">This article explains the different factors that affect this latency.</span></span>

## <a name="typical-latency"></a><span data-ttu-id="f4ef5-107">Typical latency</span><span class="sxs-lookup"><span data-stu-id="f4ef5-107">Typical latency</span></span>
<span data-ttu-id="f4ef5-108">Latency refers to the time that data is created on the monitored system and the time that it comes available for analysis in Log Analytics.</span><span class="sxs-lookup"><span data-stu-id="f4ef5-108">Latency refers to the time that data is created on the monitored system and the time that it comes available for analysis in Log Analytics.</span></span> <span data-ttu-id="f4ef5-109">The typical latency to ingest data into Log Analytics is between 3 and 10 minutes, with 95% of data ingested in less than 7 minutes.</span><span class="sxs-lookup"><span data-stu-id="f4ef5-109">The typical latency to ingest data into Log Analytics is between 3 and 10 minutes, with 95% of data ingested in less than 7 minutes.</span></span> <span data-ttu-id="f4ef5-110">The specific latency for any particular data will vary depending on a variety of factors explained below.</span><span class="sxs-lookup"><span data-stu-id="f4ef5-110">The specific latency for any particular data will vary depending on a variety of factors explained below.</span></span>

## <a name="sla-for-log-analytics"></a><span data-ttu-id="f4ef5-111">SLA for Log Analytics</span><span class="sxs-lookup"><span data-stu-id="f4ef5-111">SLA for Log Analytics</span></span>
<span data-ttu-id="f4ef5-112">The [Log Analytics Service Level Agreement (SLA)](https://azure.microsoft.com/support/legal/sla/log-analytics/v1_1/) is a legal binding agreement that defines when Microsoft refunds customers when the service doesn’t meet its goals.</span><span class="sxs-lookup"><span data-stu-id="f4ef5-112">The [Log Analytics Service Level Agreement (SLA)](https://azure.microsoft.com/support/legal/sla/log-analytics/v1_1/) is a legal binding agreement that defines when Microsoft refunds customers when the service doesn’t meet its goals.</span></span> <span data-ttu-id="f4ef5-113">This isn't based on the typical performance of the system but its worst case, which accounts for potential catastrophic situations.</span><span class="sxs-lookup"><span data-stu-id="f4ef5-113">This isn't based on the typical performance of the system but its worst case, which accounts for potential catastrophic situations.</span></span>

## <a name="factors-affecting-latency"></a><span data-ttu-id="f4ef5-114">Factors affecting latency</span><span class="sxs-lookup"><span data-stu-id="f4ef5-114">Factors affecting latency</span></span>
<span data-ttu-id="f4ef5-115">The total ingestion time for a particular set of data can be broken down into the following high-level areas.</span><span class="sxs-lookup"><span data-stu-id="f4ef5-115">The total ingestion time for a particular set of data can be broken down into the following high-level areas.</span></span> 

- <span data-ttu-id="f4ef5-116">Agent time - The time to discover an event, collect it, and then send it to Log Analytics ingestion point as a log record.</span><span class="sxs-lookup"><span data-stu-id="f4ef5-116">Agent time - The time to discover an event, collect it, and then send it to Log Analytics ingestion point as a log record.</span></span> <span data-ttu-id="f4ef5-117">In most cases, this process is handled by an agent.</span><span class="sxs-lookup"><span data-stu-id="f4ef5-117">In most cases, this process is handled by an agent.</span></span>
- <span data-ttu-id="f4ef5-118">Pipeline time - The time for the ingestion pipeline to process the log record.</span><span class="sxs-lookup"><span data-stu-id="f4ef5-118">Pipeline time - The time for the ingestion pipeline to process the log record.</span></span> <span data-ttu-id="f4ef5-119">This includes parsing the properties of the event and potentially adding calculated information.</span><span class="sxs-lookup"><span data-stu-id="f4ef5-119">This includes parsing the properties of the event and potentially adding calculated information.</span></span>
- <span data-ttu-id="f4ef5-120">Indexing time – The time spent to ingest a log record into Log Analytics Big Data store.</span><span class="sxs-lookup"><span data-stu-id="f4ef5-120">Indexing time – The time spent to ingest a log record into Log Analytics Big Data store.</span></span>

<span data-ttu-id="f4ef5-121">Details on the different latency introduced in this process are described below.</span><span class="sxs-lookup"><span data-stu-id="f4ef5-121">Details on the different latency introduced in this process are described below.</span></span>

### <a name="agent-collection-latency"></a><span data-ttu-id="f4ef5-122">Agent collection latency</span><span class="sxs-lookup"><span data-stu-id="f4ef5-122">Agent collection latency</span></span>
<span data-ttu-id="f4ef5-123">Agents and management solutions use different strategies to collect data from a virtual machine, which may affect the latency.</span><span class="sxs-lookup"><span data-stu-id="f4ef5-123">Agents and management solutions use different strategies to collect data from a virtual machine, which may affect the latency.</span></span> <span data-ttu-id="f4ef5-124">Some specific examples include the following:</span><span class="sxs-lookup"><span data-stu-id="f4ef5-124">Some specific examples include the following:</span></span>

- <span data-ttu-id="f4ef5-125">Windows events, syslog events, and performance metrics are collected immediately.</span><span class="sxs-lookup"><span data-stu-id="f4ef5-125">Windows events, syslog events, and performance metrics are collected immediately.</span></span> <span data-ttu-id="f4ef5-126">Linux performance counters are polled at 30-second intervals.</span><span class="sxs-lookup"><span data-stu-id="f4ef5-126">Linux performance counters are polled at 30-second intervals.</span></span>
- <span data-ttu-id="f4ef5-127">IIS logs and custom logs are collected once their timestamp changes.</span><span class="sxs-lookup"><span data-stu-id="f4ef5-127">IIS logs and custom logs are collected once their timestamp changes.</span></span> <span data-ttu-id="f4ef5-128">For IIS logs, this is influenced by the [rollover schedule configured on IIS](log-analytics-data-sources-iis-logs.md).</span><span class="sxs-lookup"><span data-stu-id="f4ef5-128">For IIS logs, this is influenced by the [rollover schedule configured on IIS](log-analytics-data-sources-iis-logs.md).</span></span> 
- <span data-ttu-id="f4ef5-129">Active Directory Replication solution performs its assessment every five days, while the Active Directory Assessment solution performs a weekly assessment of your Active Directory infrastructure.</span><span class="sxs-lookup"><span data-stu-id="f4ef5-129">Active Directory Replication solution performs its assessment every five days, while the Active Directory Assessment solution performs a weekly assessment of your Active Directory infrastructure.</span></span> <span data-ttu-id="f4ef5-130">The agent will collect these logs only when assessment is complete.</span><span class="sxs-lookup"><span data-stu-id="f4ef5-130">The agent will collect these logs only when assessment is complete.</span></span>

### <a name="agent-upload-frequency"></a><span data-ttu-id="f4ef5-131">Agent upload frequency</span><span class="sxs-lookup"><span data-stu-id="f4ef5-131">Agent upload frequency</span></span>
<span data-ttu-id="f4ef5-132">To ensure Log Analytics agent is lightweight, the agent buffers logs and periodically uploads them to Log Analytics.</span><span class="sxs-lookup"><span data-stu-id="f4ef5-132">To ensure Log Analytics agent is lightweight, the agent buffers logs and periodically uploads them to Log Analytics.</span></span> <span data-ttu-id="f4ef5-133">Upload frequency varies between 30 seconds and 2 minutes depending on the type of data.</span><span class="sxs-lookup"><span data-stu-id="f4ef5-133">Upload frequency varies between 30 seconds and 2 minutes depending on the type of data.</span></span> <span data-ttu-id="f4ef5-134">Most data is uploaded in under 1 minute.</span><span class="sxs-lookup"><span data-stu-id="f4ef5-134">Most data is uploaded in under 1 minute.</span></span> <span data-ttu-id="f4ef5-135">Network conditions may negatively affect the latency of this data to reach Log Analytics ingestion point.</span><span class="sxs-lookup"><span data-stu-id="f4ef5-135">Network conditions may negatively affect the latency of this data to reach Log Analytics ingestion point.</span></span>

### <a name="azure-logs-and-metrics"></a><span data-ttu-id="f4ef5-136">Azure logs and metrics</span><span class="sxs-lookup"><span data-stu-id="f4ef5-136">Azure logs and metrics</span></span> 
<span data-ttu-id="f4ef5-137">Activity log data will take about 5 minutes to come available in Log Analytics.</span><span class="sxs-lookup"><span data-stu-id="f4ef5-137">Activity log data will take about 5 minutes to come available in Log Analytics.</span></span> <span data-ttu-id="f4ef5-138">Data from diagnostic logs and metrics can take 1-5 minutes to become available, depending on the Azure service.</span><span class="sxs-lookup"><span data-stu-id="f4ef5-138">Data from diagnostic logs and metrics can take 1-5 minutes to become available, depending on the Azure service.</span></span> <span data-ttu-id="f4ef5-139">It will then take an additional 30-60 seconds for logs and 3 minutes for metrics for data to be sent to Log Analytics ingestion point.</span><span class="sxs-lookup"><span data-stu-id="f4ef5-139">It will then take an additional 30-60 seconds for logs and 3 minutes for metrics for data to be sent to Log Analytics ingestion point.</span></span>

### <a name="management-solutions-collection"></a><span data-ttu-id="f4ef5-140">Management solutions collection</span><span class="sxs-lookup"><span data-stu-id="f4ef5-140">Management solutions collection</span></span>
<span data-ttu-id="f4ef5-141">Some solutions do not collect their data from an agent and may use a collection method that introduces additional latency.</span><span class="sxs-lookup"><span data-stu-id="f4ef5-141">Some solutions do not collect their data from an agent and may use a collection method that introduces additional latency.</span></span> <span data-ttu-id="f4ef5-142">Some solutions collect data at regular intervals without attempting near-real time collection.</span><span class="sxs-lookup"><span data-stu-id="f4ef5-142">Some solutions collect data at regular intervals without attempting near-real time collection.</span></span> <span data-ttu-id="f4ef5-143">Specific examples include the following:</span><span class="sxs-lookup"><span data-stu-id="f4ef5-143">Specific examples include the following:</span></span>

- <span data-ttu-id="f4ef5-144">Office 365 solution polls activity logs using the Office 365 Management Activity API, which currently does not provide any near-real time latency guarantees.</span><span class="sxs-lookup"><span data-stu-id="f4ef5-144">Office 365 solution polls activity logs using the Office 365 Management Activity API, which currently does not provide any near-real time latency guarantees.</span></span>
- <span data-ttu-id="f4ef5-145">Windows Analytics solutions (Update Compliance for example) data is collected by the solution at a daily frequency.</span><span class="sxs-lookup"><span data-stu-id="f4ef5-145">Windows Analytics solutions (Update Compliance for example) data is collected by the solution at a daily frequency.</span></span>

<span data-ttu-id="f4ef5-146">Refer to the documentation for each solution to determine its collection frequency.</span><span class="sxs-lookup"><span data-stu-id="f4ef5-146">Refer to the documentation for each solution to determine its collection frequency.</span></span>

### <a name="pipeline-process-time"></a><span data-ttu-id="f4ef5-147">Pipeline-process time</span><span class="sxs-lookup"><span data-stu-id="f4ef5-147">Pipeline-process time</span></span>
<span data-ttu-id="f4ef5-148">Once log records are ingested into Log Analytics pipeline, they're written to temporary storage to ensure tenant isolation and to make sure that data isn't lost.</span><span class="sxs-lookup"><span data-stu-id="f4ef5-148">Once log records are ingested into Log Analytics pipeline, they're written to temporary storage to ensure tenant isolation and to make sure that data isn't lost.</span></span> <span data-ttu-id="f4ef5-149">This process typically adds 5-15 seconds.</span><span class="sxs-lookup"><span data-stu-id="f4ef5-149">This process typically adds 5-15 seconds.</span></span> <span data-ttu-id="f4ef5-150">Some management solutions implement heavier algorithms to aggregate data and derive insights as data is streaming in.</span><span class="sxs-lookup"><span data-stu-id="f4ef5-150">Some management solutions implement heavier algorithms to aggregate data and derive insights as data is streaming in.</span></span> <span data-ttu-id="f4ef5-151">For example, the Network Performance Monitoring aggregates incoming data over 3-minute intervals, effectively adding 3-minute latency.</span><span class="sxs-lookup"><span data-stu-id="f4ef5-151">For example, the Network Performance Monitoring aggregates incoming data over 3-minute intervals, effectively adding 3-minute latency.</span></span>

### <a name="new-custom-data-types-provisioning"></a><span data-ttu-id="f4ef5-152">New custom data types provisioning</span><span class="sxs-lookup"><span data-stu-id="f4ef5-152">New custom data types provisioning</span></span>
<span data-ttu-id="f4ef5-153">When a new type of custom data is created from a [custom log](../log-analytics/log-analytics-data-sources-custom-logs.md) or the [Data Collector API](../log-analytics/log-analytics-data-collector-api.md), the system creates a dedicated storage container.</span><span class="sxs-lookup"><span data-stu-id="f4ef5-153">When a new type of custom data is created from a [custom log](../log-analytics/log-analytics-data-sources-custom-logs.md) or the [Data Collector API](../log-analytics/log-analytics-data-collector-api.md), the system creates a dedicated storage container.</span></span> <span data-ttu-id="f4ef5-154">This is a one-time overhead that occurs only on the first appearance of this data type.</span><span class="sxs-lookup"><span data-stu-id="f4ef5-154">This is a one-time overhead that occurs only on the first appearance of this data type.</span></span>

### <a name="surge-protection"></a><span data-ttu-id="f4ef5-155">Surge protection</span><span class="sxs-lookup"><span data-stu-id="f4ef5-155">Surge protection</span></span>
<span data-ttu-id="f4ef5-156">The top priority of Log Analytics is to ensure that no customer data is lost, so the system has built-in protection for data surges.</span><span class="sxs-lookup"><span data-stu-id="f4ef5-156">The top priority of Log Analytics is to ensure that no customer data is lost, so the system has built-in protection for data surges.</span></span> <span data-ttu-id="f4ef5-157">This includes buffers to ensure that even under immense load, the system will keep functioning.</span><span class="sxs-lookup"><span data-stu-id="f4ef5-157">This includes buffers to ensure that even under immense load, the system will keep functioning.</span></span> <span data-ttu-id="f4ef5-158">Under normal load, these controls add less than a minute, but in extreme conditions and failures they could add significant time while ensuring data is safe.</span><span class="sxs-lookup"><span data-stu-id="f4ef5-158">Under normal load, these controls add less than a minute, but in extreme conditions and failures they could add significant time while ensuring data is safe.</span></span>

### <a name="indexing-time"></a><span data-ttu-id="f4ef5-159">Indexing time</span><span class="sxs-lookup"><span data-stu-id="f4ef5-159">Indexing time</span></span>
<span data-ttu-id="f4ef5-160">There is a built-in balance for every Big Data platform between providing analytics and advanced search capabilities as opposed to providing immediate access to the data.</span><span class="sxs-lookup"><span data-stu-id="f4ef5-160">There is a built-in balance for every Big Data platform between providing analytics and advanced search capabilities as opposed to providing immediate access to the data.</span></span> <span data-ttu-id="f4ef5-161">Azure Log Analytics allows you to run powerful queries on billions of records and get results within a few seconds.</span><span class="sxs-lookup"><span data-stu-id="f4ef5-161">Azure Log Analytics allows you to run powerful queries on billions of records and get results within a few seconds.</span></span> <span data-ttu-id="f4ef5-162">This is made possible because the infrastructure transforms the data dramatically during its ingestion and stores it in unique compact structures.</span><span class="sxs-lookup"><span data-stu-id="f4ef5-162">This is made possible because the infrastructure transforms the data dramatically during its ingestion and stores it in unique compact structures.</span></span> <span data-ttu-id="f4ef5-163">The system buffers the data until enough of it is available to create these structures.</span><span class="sxs-lookup"><span data-stu-id="f4ef5-163">The system buffers the data until enough of it is available to create these structures.</span></span> <span data-ttu-id="f4ef5-164">This must be completed before the log record appears in search results.</span><span class="sxs-lookup"><span data-stu-id="f4ef5-164">This must be completed before the log record appears in search results.</span></span>

<span data-ttu-id="f4ef5-165">This process currently takes about 5 minutes when there is low volume of data but less time at higher data rates.</span><span class="sxs-lookup"><span data-stu-id="f4ef5-165">This process currently takes about 5 minutes when there is low volume of data but less time at higher data rates.</span></span> <span data-ttu-id="f4ef5-166">This seems counterintuitive, but this process allows optimization of latency for high-volume production workloads.</span><span class="sxs-lookup"><span data-stu-id="f4ef5-166">This seems counterintuitive, but this process allows optimization of latency for high-volume production workloads.</span></span>



## <a name="checking-ingestion-time"></a><span data-ttu-id="f4ef5-167">Checking ingestion time</span><span class="sxs-lookup"><span data-stu-id="f4ef5-167">Checking ingestion time</span></span>
<span data-ttu-id="f4ef5-168">You can use the **Heartbeat** table to get an estimate of latency for data from agents.</span><span class="sxs-lookup"><span data-stu-id="f4ef5-168">You can use the **Heartbeat** table to get an estimate of latency for data from agents.</span></span> <span data-ttu-id="f4ef5-169">Since Heartbeat is sent once a minute, the difference between the current time and the last heartbeat record will ideally be as close to a minute as possible.</span><span class="sxs-lookup"><span data-stu-id="f4ef5-169">Since Heartbeat is sent once a minute, the difference between the current time and the last heartbeat record will ideally be as close to a minute as possible.</span></span>

<span data-ttu-id="f4ef5-170">Use the following query to list the computers with the highest latency.</span><span class="sxs-lookup"><span data-stu-id="f4ef5-170">Use the following query to list the computers with the highest latency.</span></span>

    Heartbeat 
    | summarize IngestionTime = now() - max(TimeGenerated) by Computer 
    | top 50 by IngestionTime asc

 
<span data-ttu-id="f4ef5-171">Use the following query in large environments summarize the latency for different percentages of total computers.</span><span class="sxs-lookup"><span data-stu-id="f4ef5-171">Use the following query in large environments summarize the latency for different percentages of total computers.</span></span>

    Heartbeat 
    | summarize IngestionTime = now() - max(TimeGenerated) by Computer 
    | summarize percentiles(IngestionTime, 50,95,99)



## <a name="next-steps"></a><span data-ttu-id="f4ef5-172">Next steps</span><span class="sxs-lookup"><span data-stu-id="f4ef5-172">Next steps</span></span>
* <span data-ttu-id="f4ef5-173">Read the [Service Level Agreement (SLA)](https://azure.microsoft.com/support/legal/sla/log-analytics/v1_1/) for Log Analytics.</span><span class="sxs-lookup"><span data-stu-id="f4ef5-173">Read the [Service Level Agreement (SLA)](https://azure.microsoft.com/support/legal/sla/log-analytics/v1_1/) for Log Analytics.</span></span>

