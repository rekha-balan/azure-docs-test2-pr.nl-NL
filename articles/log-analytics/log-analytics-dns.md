---
title: DNS Analytics solution in Azure Log Analytics | Microsoft Docs
description: Set up and use the DNS Analytics solution in Log Analytics to gather security, performance, and operations-related insights into DNS infrastructure.
services: log-analytics
documentationcenter: ''
author: bandersmsft
manager: carmonm
editor: ''
ms.assetid: f44a40c4-820a-406e-8c40-70bd8dc67ae7
ms.service: log-analytics
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 04/18/2017
ms.author: banders
ms.openlocfilehash: a6c74e55291b62a2b2bf5fb84eb7aafe78f4efb9
ms.sourcegitcommit: 5b9d839c0c0a94b293fdafe1d6e5429506c07e05
ms.translationtype: HT
ms.contentlocale: nl-NL
ms.lasthandoff: 08/02/2018
ms.locfileid: "44551957"
---
# <a name="gather-insights-about-your-dns-infrastructure-with-the-dns-analytics-preview-solution"></a><span data-ttu-id="92e09-103">Gather insights about your DNS infrastructure with the DNS Analytics (Preview) solution</span><span class="sxs-lookup"><span data-stu-id="92e09-103">Gather insights about your DNS infrastructure with the DNS Analytics (Preview) solution</span></span>

<span data-ttu-id="92e09-104">This article describes how to set up and use the DNS Analytics solution in Log Analytics to gather security, performance, and operations-related insights into DNS infrastructure.</span><span class="sxs-lookup"><span data-stu-id="92e09-104">This article describes how to set up and use the DNS Analytics solution in Log Analytics to gather security, performance, and operations-related insights into DNS infrastructure.</span></span>

<span data-ttu-id="92e09-105">DNS Analytics helps you:</span><span class="sxs-lookup"><span data-stu-id="92e09-105">DNS Analytics helps you:</span></span>

- <span data-ttu-id="92e09-106">Identify clients that try to resolve malicious domain names</span><span class="sxs-lookup"><span data-stu-id="92e09-106">Identify clients that try to resolve malicious domain names</span></span>
- <span data-ttu-id="92e09-107">Identify stale resource records</span><span class="sxs-lookup"><span data-stu-id="92e09-107">Identify stale resource records</span></span>
- <span data-ttu-id="92e09-108">Identify frequently queried domain names and talkative DNS clients</span><span class="sxs-lookup"><span data-stu-id="92e09-108">Identify frequently queried domain names and talkative DNS clients</span></span>
- <span data-ttu-id="92e09-109">View request load on DNS servers</span><span class="sxs-lookup"><span data-stu-id="92e09-109">View request load on DNS servers</span></span>
- <span data-ttu-id="92e09-110">View dynamic DNS registration failures</span><span class="sxs-lookup"><span data-stu-id="92e09-110">View dynamic DNS registration failures</span></span>

<span data-ttu-id="92e09-111">The solution collects, analyzes, and correlates Windows DNS analytic and audit logs and other related data from your DNS servers.</span><span class="sxs-lookup"><span data-stu-id="92e09-111">The solution collects, analyzes, and correlates Windows DNS analytic and audit logs and other related data from your DNS servers.</span></span>

## <a name="connected-sources"></a><span data-ttu-id="92e09-112">Connected sources</span><span class="sxs-lookup"><span data-stu-id="92e09-112">Connected sources</span></span>

<span data-ttu-id="92e09-113">The following table describes the connected sources that are supported by this solution.</span><span class="sxs-lookup"><span data-stu-id="92e09-113">The following table describes the connected sources that are supported by this solution.</span></span>

| <span data-ttu-id="92e09-114">**Connected Source**</span><span class="sxs-lookup"><span data-stu-id="92e09-114">**Connected Source**</span></span> | <span data-ttu-id="92e09-115">**Support**</span><span class="sxs-lookup"><span data-stu-id="92e09-115">**Support**</span></span> | <span data-ttu-id="92e09-116">**Description**</span><span class="sxs-lookup"><span data-stu-id="92e09-116">**Description**</span></span> |
| --- | --- | --- |
| [<span data-ttu-id="92e09-117">Windows agents</span><span class="sxs-lookup"><span data-stu-id="92e09-117">Windows agents</span></span>](log-analytics-windows-agents.md) | <span data-ttu-id="92e09-118">Yes</span><span class="sxs-lookup"><span data-stu-id="92e09-118">Yes</span></span> | <span data-ttu-id="92e09-119">The solution collects DNS information from Windows agents.</span><span class="sxs-lookup"><span data-stu-id="92e09-119">The solution collects DNS information from Windows agents.</span></span> |
| [<span data-ttu-id="92e09-120">Linux agents</span><span class="sxs-lookup"><span data-stu-id="92e09-120">Linux agents</span></span>](log-analytics-linux-agents.md) | <span data-ttu-id="92e09-121">No</span><span class="sxs-lookup"><span data-stu-id="92e09-121">No</span></span> | <span data-ttu-id="92e09-122">The solution does not collect DNS information from direct Linux agents.</span><span class="sxs-lookup"><span data-stu-id="92e09-122">The solution does not collect DNS information from direct Linux agents.</span></span> |
| [<span data-ttu-id="92e09-123">SCOM management group</span><span class="sxs-lookup"><span data-stu-id="92e09-123">SCOM management group</span></span>](log-analytics-om-agents.md) | <span data-ttu-id="92e09-124">Yes</span><span class="sxs-lookup"><span data-stu-id="92e09-124">Yes</span></span> | <span data-ttu-id="92e09-125">The solution collects DNS information from agents in a connected SCOM management group.</span><span class="sxs-lookup"><span data-stu-id="92e09-125">The solution collects DNS information from agents in a connected SCOM management group.</span></span> <span data-ttu-id="92e09-126">A direct connection from the SCOM agent to OMS is not required.</span><span class="sxs-lookup"><span data-stu-id="92e09-126">A direct connection from the SCOM agent to OMS is not required.</span></span> <span data-ttu-id="92e09-127">Data is forwarded from the management group to the OMS repository.</span><span class="sxs-lookup"><span data-stu-id="92e09-127">Data is forwarded from the management group to the OMS repository.</span></span> |
| [<span data-ttu-id="92e09-128">Azure storage account</span><span class="sxs-lookup"><span data-stu-id="92e09-128">Azure storage account</span></span>](log-analytics-azure-storage.md) | <span data-ttu-id="92e09-129">No</span><span class="sxs-lookup"><span data-stu-id="92e09-129">No</span></span> | <span data-ttu-id="92e09-130">Azure storage isn't used by the solution.</span><span class="sxs-lookup"><span data-stu-id="92e09-130">Azure storage isn't used by the solution.</span></span> |

### <a name="data-collection-details"></a><span data-ttu-id="92e09-131">Data collection details</span><span class="sxs-lookup"><span data-stu-id="92e09-131">Data collection details</span></span>

<span data-ttu-id="92e09-132">The solution collects DNS inventory and DNS event-related data from the DNS servers where a Log Analytics agent is installed.</span><span class="sxs-lookup"><span data-stu-id="92e09-132">The solution collects DNS inventory and DNS event-related data from the DNS servers where a Log Analytics agent is installed.</span></span> <span data-ttu-id="92e09-133">This data is then uploaded to Log Analytics and then displayed in the solution dashboard.</span><span class="sxs-lookup"><span data-stu-id="92e09-133">This data is then uploaded to Log Analytics and then displayed in the solution dashboard.</span></span> <span data-ttu-id="92e09-134">Inventory-related data, such as the number of DNS servers, zones, and resource records are collected by running the DNS Powershell cmdlets.</span><span class="sxs-lookup"><span data-stu-id="92e09-134">Inventory-related data, such as the number of DNS servers, zones, and resource records are collected by running the DNS Powershell cmdlets.</span></span> <span data-ttu-id="92e09-135">The data is updated once every two days.</span><span class="sxs-lookup"><span data-stu-id="92e09-135">The data is updated once every two days.</span></span> <span data-ttu-id="92e09-136">The event-related data is collected near real-time from the [Analytic and Audit logs](https://technet.microsoft.com/library/dn800669.aspx#enhanc) provided by enhanced DNS logging and diagnostics in Windows Server 2012 R2.</span><span class="sxs-lookup"><span data-stu-id="92e09-136">The event-related data is collected near real-time from the [Analytic and Audit logs](https://technet.microsoft.com/library/dn800669.aspx#enhanc) provided by enhanced DNS logging and diagnostics in Windows Server 2012 R2.</span></span>

## <a name="configuration"></a><span data-ttu-id="92e09-137">Configuration</span><span class="sxs-lookup"><span data-stu-id="92e09-137">Configuration</span></span>

<span data-ttu-id="92e09-138">Use the following information to configure the solution.</span><span class="sxs-lookup"><span data-stu-id="92e09-138">Use the following information to configure the solution.</span></span>

- <span data-ttu-id="92e09-139">You must have a  [Windows](log-analytics-windows-agents.md) or  [Operations Manager](log-analytics-om-agents.md) agent on each DNS server that you want to monitor.</span><span class="sxs-lookup"><span data-stu-id="92e09-139">You must have a  [Windows](log-analytics-windows-agents.md) or  [Operations Manager](log-analytics-om-agents.md) agent on each DNS server that you want to monitor.</span></span>
- <span data-ttu-id="92e09-140">Add the DNS Analytics solution to your OMS workspace from the [Azure marketplace](https://aka.ms/dnsanalyticsazuremarketplace) or by using the process described in [Add Log Analytics solutions from the Solutions Gallery](log-analytics-add-solutions.md).</span><span class="sxs-lookup"><span data-stu-id="92e09-140">Add the DNS Analytics solution to your OMS workspace from the [Azure marketplace](https://aka.ms/dnsanalyticsazuremarketplace) or by using the process described in [Add Log Analytics solutions from the Solutions Gallery](log-analytics-add-solutions.md).</span></span>

<span data-ttu-id="92e09-141">The solution starts collecting data without the need of further configuration.</span><span class="sxs-lookup"><span data-stu-id="92e09-141">The solution starts collecting data without the need of further configuration.</span></span> <span data-ttu-id="92e09-142">However, you can use the following configuration to customize data collection.</span><span class="sxs-lookup"><span data-stu-id="92e09-142">However, you can use the following configuration to customize data collection.</span></span>

###  <a name="configure-the-solution"></a><span data-ttu-id="92e09-143">Configure the solution</span><span class="sxs-lookup"><span data-stu-id="92e09-143">Configure the solution</span></span>

<span data-ttu-id="92e09-144">On the solution dashboard, click **Configuration** to open the DNS Analytics Configuration page.</span><span class="sxs-lookup"><span data-stu-id="92e09-144">On the solution dashboard, click **Configuration** to open the DNS Analytics Configuration page.</span></span> <span data-ttu-id="92e09-145">There are two types of configuration changes that you can make:</span><span class="sxs-lookup"><span data-stu-id="92e09-145">There are two types of configuration changes that you can make:</span></span>

- <span data-ttu-id="92e09-146">**Whitelisted Domain Names** The solution does not process all the lookup queries.</span><span class="sxs-lookup"><span data-stu-id="92e09-146">**Whitelisted Domain Names** The solution does not process all the lookup queries.</span></span> <span data-ttu-id="92e09-147">It maintains a whitelist of domain name suffixes.</span><span class="sxs-lookup"><span data-stu-id="92e09-147">It maintains a whitelist of domain name suffixes.</span></span> <span data-ttu-id="92e09-148">The lookup queries, which resolve to the domain names that match  domain name suffixes in this whitelist, are not processed by the solution.</span><span class="sxs-lookup"><span data-stu-id="92e09-148">The lookup queries, which resolve to the domain names that match  domain name suffixes in this whitelist, are not processed by the solution.</span></span> <span data-ttu-id="92e09-149">Not processing whitelisted domain names helps to optimize the data sent to Log Analytics.</span><span class="sxs-lookup"><span data-stu-id="92e09-149">Not processing whitelisted domain names helps to optimize the data sent to Log Analytics.</span></span> <span data-ttu-id="92e09-150">The default whitelist includes popular public domain names, such as www.google.com and www.facebook.com.</span><span class="sxs-lookup"><span data-stu-id="92e09-150">The default whitelist includes popular public domain names, such as www.google.com and www.facebook.com.</span></span> <span data-ttu-id="92e09-151">You can view the complete default list by using the scroll bar.</span><span class="sxs-lookup"><span data-stu-id="92e09-151">You can view the complete default list by using the scroll bar.</span></span>

<span data-ttu-id="92e09-152">You can modify the list to add (or remove) any domain name suffix that you aren't interested in to view lookup insights.</span><span class="sxs-lookup"><span data-stu-id="92e09-152">You can modify the list to add (or remove) any domain name suffix that you aren't interested in to view lookup insights.</span></span>

- <span data-ttu-id="92e09-153">**Talkative Client Threshold** The DNS clients, which exceed the threshold for the number of lookup requests, are highlighted in the **DNS Clients** blade.</span><span class="sxs-lookup"><span data-stu-id="92e09-153">**Talkative Client Threshold** The DNS clients, which exceed the threshold for the number of lookup requests, are highlighted in the **DNS Clients** blade.</span></span> <span data-ttu-id="92e09-154">The default threshold is 1000.</span><span class="sxs-lookup"><span data-stu-id="92e09-154">The default threshold is 1000.</span></span> <span data-ttu-id="92e09-155">You can edit the threshold.</span><span class="sxs-lookup"><span data-stu-id="92e09-155">You can edit the threshold.</span></span>

![whitelisted domain names](https://docstestmedia1.blob.core.windows.net/azure-media/articles/log-analytics/media/log-analytics-dns/dns-config.png)

## <a name="management-packs"></a><span data-ttu-id="92e09-157">Management packs</span><span class="sxs-lookup"><span data-stu-id="92e09-157">Management packs</span></span>

<span data-ttu-id="92e09-158">If you are using the Microsoft Monitoring Agent (MMA) to connect to your OMS workspace, then the following management pack is installed.</span><span class="sxs-lookup"><span data-stu-id="92e09-158">If you are using the Microsoft Monitoring Agent (MMA) to connect to your OMS workspace, then the following management pack is installed.</span></span>

- <span data-ttu-id="92e09-159">Microsoft DNS Data Collector Intelligence Pack (Microsft.IntelligencePacks.Dns)</span><span class="sxs-lookup"><span data-stu-id="92e09-159">Microsoft DNS Data Collector Intelligence Pack (Microsft.IntelligencePacks.Dns)</span></span>

<span data-ttu-id="92e09-160">If your SCOM management group is connected to your OMS workspace, then the following management packs are installed in SCOM when you add this solution.</span><span class="sxs-lookup"><span data-stu-id="92e09-160">If your SCOM management group is connected to your OMS workspace, then the following management packs are installed in SCOM when you add this solution.</span></span> <span data-ttu-id="92e09-161">There is no required configuration or maintenance of these management packs.</span><span class="sxs-lookup"><span data-stu-id="92e09-161">There is no required configuration or maintenance of these management packs.</span></span>

- <span data-ttu-id="92e09-162">Microsoft DNS Data Collector Intelligence Pack (Microsft.IntelligencePacks.Dns)</span><span class="sxs-lookup"><span data-stu-id="92e09-162">Microsoft DNS Data Collector Intelligence Pack (Microsft.IntelligencePacks.Dns)</span></span>
- <span data-ttu-id="92e09-163">Microsoft System Center Advisor DNS Analytics Configuration (Microsoft.IntelligencePack.Dns.Configuration)</span><span class="sxs-lookup"><span data-stu-id="92e09-163">Microsoft System Center Advisor DNS Analytics Configuration (Microsoft.IntelligencePack.Dns.Configuration)</span></span>

<span data-ttu-id="92e09-164">For more information on how solution management packs are updated, see [Connect Operations Manager to Log Analytics](log-analytics-om-agents.md).</span><span class="sxs-lookup"><span data-stu-id="92e09-164">For more information on how solution management packs are updated, see [Connect Operations Manager to Log Analytics](log-analytics-om-agents.md).</span></span>

## <a name="use-the-solution"></a><span data-ttu-id="92e09-165">Use the solution</span><span class="sxs-lookup"><span data-stu-id="92e09-165">Use the solution</span></span>

<span data-ttu-id="92e09-166">This section explains all the dashboard functions and how to use them.</span><span class="sxs-lookup"><span data-stu-id="92e09-166">This section explains all the dashboard functions and how to use them.</span></span>

<span data-ttu-id="92e09-167">After you've added the DNS Analytics solution to your workspace, the solution tile on the OMS Overview page provides a quick summary of your DNS infrastructure.</span><span class="sxs-lookup"><span data-stu-id="92e09-167">After you've added the DNS Analytics solution to your workspace, the solution tile on the OMS Overview page provides a quick summary of your DNS infrastructure.</span></span> <span data-ttu-id="92e09-168">It includes the number of DNS servers where the data is being collected and the number of requests made by clients to resolve malicious domains in the past 24 hours.</span><span class="sxs-lookup"><span data-stu-id="92e09-168">It includes the number of DNS servers where the data is being collected and the number of requests made by clients to resolve malicious domains in the past 24 hours.</span></span> <span data-ttu-id="92e09-169">When you click the tile, it opens the solution dashboard.</span><span class="sxs-lookup"><span data-stu-id="92e09-169">When you click the tile, it opens the solution dashboard.</span></span>

![DNS Analytics tile](https://docstestmedia1.blob.core.windows.net/azure-media/articles/log-analytics/media/log-analytics-dns/dns-tile.png)

### <a name="solution-dashboard"></a><span data-ttu-id="92e09-171">Solution dashboard</span><span class="sxs-lookup"><span data-stu-id="92e09-171">Solution dashboard</span></span>

<span data-ttu-id="92e09-172">The solution dashboard shows summarized information for the various features of the solution.</span><span class="sxs-lookup"><span data-stu-id="92e09-172">The solution dashboard shows summarized information for the various features of the solution.</span></span> <span data-ttu-id="92e09-173">It also includes links to the detailed view for forensic analysis and diagnosis.</span><span class="sxs-lookup"><span data-stu-id="92e09-173">It also includes links to the detailed view for forensic analysis and diagnosis.</span></span> <span data-ttu-id="92e09-174">By default, the data is shown for the last seven days.</span><span class="sxs-lookup"><span data-stu-id="92e09-174">By default, the data is shown for the last seven days.</span></span> <span data-ttu-id="92e09-175">You can change the date and time range with the date-time selection control, similar to the following image.</span><span class="sxs-lookup"><span data-stu-id="92e09-175">You can change the date and time range with the date-time selection control, similar to the following image.</span></span>

![time selection control](https://docstestmedia1.blob.core.windows.net/azure-media/articles/log-analytics/media/log-analytics-dns/dns-time.png)

<span data-ttu-id="92e09-177">The solution dashboard shows the following blades:</span><span class="sxs-lookup"><span data-stu-id="92e09-177">The solution dashboard shows the following blades:</span></span>

<span data-ttu-id="92e09-178">**DNS Security** - Reports the DNS clients that are trying to communicate with malicious domains.</span><span class="sxs-lookup"><span data-stu-id="92e09-178">**DNS Security** - Reports the DNS clients that are trying to communicate with malicious domains.</span></span> <span data-ttu-id="92e09-179">By using Microsoft threat intelligence feeds, DNS Analytics can detect client IPs that are trying to access the malicious domains.</span><span class="sxs-lookup"><span data-stu-id="92e09-179">By using Microsoft threat intelligence feeds, DNS Analytics can detect client IPs that are trying to access the malicious domains.</span></span> <span data-ttu-id="92e09-180">In many cases, malware infected devices &quot;dial out&quot; to the &quot;command and control&quot; center of the malicious domain by resolving the malware domain name.</span><span class="sxs-lookup"><span data-stu-id="92e09-180">In many cases, malware infected devices &quot;dial out&quot; to the &quot;command and control&quot; center of the malicious domain by resolving the malware domain name.</span></span>

![DNS Security blade](https://docstestmedia1.blob.core.windows.net/azure-media/articles/log-analytics/media/log-analytics-dns/dns-security-blade.png)

<span data-ttu-id="92e09-182">When you click a client IP in the list, Log Search opens showing the lookup details of the respective query.</span><span class="sxs-lookup"><span data-stu-id="92e09-182">When you click a client IP in the list, Log Search opens showing the lookup details of the respective query.</span></span> <span data-ttu-id="92e09-183">In the following example, DNS Analytics detected that the communication was done with an [IRCbot](https://www.microsoft.com/security/portal/threat/encyclopedia/entry.aspx?Name=Win32/IRCbot).</span><span class="sxs-lookup"><span data-stu-id="92e09-183">In the following example, DNS Analytics detected that the communication was done with an [IRCbot](https://www.microsoft.com/security/portal/threat/encyclopedia/entry.aspx?Name=Win32/IRCbot).</span></span>

![log search results showing ircbot](https://docstestmedia1.blob.core.windows.net/azure-media/articles/log-analytics/media/log-analytics-dns/ircbot.png)

<span data-ttu-id="92e09-185">The information helps you to identify:</span><span class="sxs-lookup"><span data-stu-id="92e09-185">The information helps you to identify:</span></span>

- <span data-ttu-id="92e09-186">the client IP that initiated the communication</span><span class="sxs-lookup"><span data-stu-id="92e09-186">the client IP that initiated the communication</span></span>
- <span data-ttu-id="92e09-187">the domain name resolving to the malicious IP</span><span class="sxs-lookup"><span data-stu-id="92e09-187">the domain name resolving to the malicious IP</span></span>
- <span data-ttu-id="92e09-188">the IP addresses the domain name resolves to</span><span class="sxs-lookup"><span data-stu-id="92e09-188">the IP addresses the domain name resolves to</span></span>
- <span data-ttu-id="92e09-189">the malicious IP address</span><span class="sxs-lookup"><span data-stu-id="92e09-189">the malicious IP address</span></span>
- <span data-ttu-id="92e09-190">the severity of the issue</span><span class="sxs-lookup"><span data-stu-id="92e09-190">the severity of the issue</span></span>
- <span data-ttu-id="92e09-191">the reason for blacklisting the malicious IP</span><span class="sxs-lookup"><span data-stu-id="92e09-191">the reason for blacklisting the malicious IP</span></span>
- <span data-ttu-id="92e09-192">the detection time</span><span class="sxs-lookup"><span data-stu-id="92e09-192">the detection time</span></span>

<span data-ttu-id="92e09-193">**Domains Queried**  - Provides the most frequent domain names being queried by the DNS clients in your environment.</span><span class="sxs-lookup"><span data-stu-id="92e09-193">**Domains Queried**  - Provides the most frequent domain names being queried by the DNS clients in your environment.</span></span> <span data-ttu-id="92e09-194">You can view the list of all the domain names queried, and drill down into the lookup request details of a specific domain name in Log Search.</span><span class="sxs-lookup"><span data-stu-id="92e09-194">You can view the list of all the domain names queried, and drill down into the lookup request details of a specific domain name in Log Search.</span></span>

![Domains Queried blade](https://docstestmedia1.blob.core.windows.net/azure-media/articles/log-analytics/media/log-analytics-dns/domains-queried-blade.png)

<span data-ttu-id="92e09-196">**DNS Clients** - Reports the clients **breaching the threshold** for number of queries in the chosen time period.</span><span class="sxs-lookup"><span data-stu-id="92e09-196">**DNS Clients** - Reports the clients **breaching the threshold** for number of queries in the chosen time period.</span></span> <span data-ttu-id="92e09-197">You can view the list of all the DNS clients and the details of the queries made by them in Log Search.</span><span class="sxs-lookup"><span data-stu-id="92e09-197">You can view the list of all the DNS clients and the details of the queries made by them in Log Search.</span></span>

![DNS Clients blade](https://docstestmedia1.blob.core.windows.net/azure-media/articles/log-analytics/media/log-analytics-dns/dns-clients-blade.png)

<span data-ttu-id="92e09-199">**Dynamic DNS Registrations** - Reports name registration failures.</span><span class="sxs-lookup"><span data-stu-id="92e09-199">**Dynamic DNS Registrations** - Reports name registration failures.</span></span> <span data-ttu-id="92e09-200">All registration failures for address [resource records](https://en.wikipedia.org/wiki/List_of_DNS_record_types) (Type A and AAAA) are highlighted along with the client IPs that made the registration requests.</span><span class="sxs-lookup"><span data-stu-id="92e09-200">All registration failures for address [resource records](https://en.wikipedia.org/wiki/List_of_DNS_record_types) (Type A and AAAA) are highlighted along with the client IPs that made the registration requests.</span></span> <span data-ttu-id="92e09-201">You can then use this information to find the root cause of the registration failure:</span><span class="sxs-lookup"><span data-stu-id="92e09-201">You can then use this information to find the root cause of the registration failure:</span></span>

1. <span data-ttu-id="92e09-202">Find the zone that is authoritative for the name that the client is trying to update.</span><span class="sxs-lookup"><span data-stu-id="92e09-202">Find the zone that is authoritative for the name that the client is trying to update.</span></span>
2. <span data-ttu-id="92e09-203">Use the solution to check the inventory information of that zone.</span><span class="sxs-lookup"><span data-stu-id="92e09-203">Use the solution to check the inventory information of that zone.</span></span>
3. <span data-ttu-id="92e09-204">Verify that the dynamic update for the zone is enabled.</span><span class="sxs-lookup"><span data-stu-id="92e09-204">Verify that the dynamic update for the zone is enabled.</span></span>
4. <span data-ttu-id="92e09-205">Check whether the zone is configured for secure dynamic update or not.</span><span class="sxs-lookup"><span data-stu-id="92e09-205">Check whether the zone is configured for secure dynamic update or not.</span></span>

![Dynamic DNS Registrations blade](https://docstestmedia1.blob.core.windows.net/azure-media/articles/log-analytics/media/log-analytics-dns/dynamic-dns-reg-blade.png)

<span data-ttu-id="92e09-207">**Name registration requests** - The upper tile shows a trend of successful and failed DNS dynamic update request count.</span><span class="sxs-lookup"><span data-stu-id="92e09-207">**Name registration requests** - The upper tile shows a trend of successful and failed DNS dynamic update request count.</span></span> <span data-ttu-id="92e09-208">The lower tile lists the top 10 clients sending failed DNS update requests to the DNS servers, sorted by the number of failures.</span><span class="sxs-lookup"><span data-stu-id="92e09-208">The lower tile lists the top 10 clients sending failed DNS update requests to the DNS servers, sorted by the number of failures.</span></span>

![<span data-ttu-id="92e09-209">Name registration requests blade</span><span class="sxs-lookup"><span data-stu-id="92e09-209">Name registration requests blade</span></span> ](https://docstestmedia1.blob.core.windows.net/azure-media/articles/log-analytics/media/log-analytics-dns/name-reg-req-blade.png)

<span data-ttu-id="92e09-210">**Sample DNS Analytics Queries**  - Contains a list of most common search queries that fetch raw analytics data directly.</span><span class="sxs-lookup"><span data-stu-id="92e09-210">**Sample DNS Analytics Queries**  - Contains a list of most common search queries that fetch raw analytics data directly.</span></span>

![sample queries](https://docstestmedia1.blob.core.windows.net/azure-media/articles/log-analytics/media/log-analytics-dns/queries.png)

<span data-ttu-id="92e09-212">You can use these queries as a starting point for creating your own queries for customized reporting.</span><span class="sxs-lookup"><span data-stu-id="92e09-212">You can use these queries as a starting point for creating your own queries for customized reporting.</span></span>

- <span data-ttu-id="92e09-213">**List of servers:** This link opens the DNS Log search page showing a list of all DNS servers with their associated FQDN, domain name, forest name, and server IPs.</span><span class="sxs-lookup"><span data-stu-id="92e09-213">**List of servers:** This link opens the DNS Log search page showing a list of all DNS servers with their associated FQDN, domain name, forest name, and server IPs.</span></span>
- <span data-ttu-id="92e09-214">**List of DNS zones:** This link opens the DNS Log search page showing a list of all DNS zones with the associated zone name, dynamic update status, name servers, and DNSSEC signing status.</span><span class="sxs-lookup"><span data-stu-id="92e09-214">**List of DNS zones:** This link opens the DNS Log search page showing a list of all DNS zones with the associated zone name, dynamic update status, name servers, and DNSSEC signing status.</span></span>
- <span data-ttu-id="92e09-215">**Unused resource records:** This link opens the DNS Log search page and shows a list of all the unused/stale resource records.</span><span class="sxs-lookup"><span data-stu-id="92e09-215">**Unused resource records:** This link opens the DNS Log search page and shows a list of all the unused/stale resource records.</span></span> <span data-ttu-id="92e09-216">This list contains the resource record name, resource record type, the associated DNS server, record generation time, and zone name.</span><span class="sxs-lookup"><span data-stu-id="92e09-216">This list contains the resource record name, resource record type, the associated DNS server, record generation time, and zone name.</span></span> <span data-ttu-id="92e09-217">You can use this list to identify the DNS resource records that are no longer in use.</span><span class="sxs-lookup"><span data-stu-id="92e09-217">You can use this list to identify the DNS resource records that are no longer in use.</span></span> <span data-ttu-id="92e09-218">Based on this information, you can then act to remove those entries from the DNS servers.</span><span class="sxs-lookup"><span data-stu-id="92e09-218">Based on this information, you can then act to remove those entries from the DNS servers.</span></span>
- <span data-ttu-id="92e09-219">**DNS servers query load:** This link opens the DNS Log search page where you can get a perspective of the DNS load on your DNS servers to help you plan the capacity for the servers.</span><span class="sxs-lookup"><span data-stu-id="92e09-219">**DNS servers query load:** This link opens the DNS Log search page where you can get a perspective of the DNS load on your DNS servers to help you plan the capacity for the servers.</span></span> <span data-ttu-id="92e09-220">You can move to the **Metrics** tab to change the view to a graphical visualization.</span><span class="sxs-lookup"><span data-stu-id="92e09-220">You can move to the **Metrics** tab to change the view to a graphical visualization.</span></span> <span data-ttu-id="92e09-221">This view helps you understand how the DNS load is distributed across your DNS servers.</span><span class="sxs-lookup"><span data-stu-id="92e09-221">This view helps you understand how the DNS load is distributed across your DNS servers.</span></span> <span data-ttu-id="92e09-222">It shows DNS query rate trends for each server.</span><span class="sxs-lookup"><span data-stu-id="92e09-222">It shows DNS query rate trends for each server.</span></span>
    <span data-ttu-id="92e09-223">![DNS servers query log search results](https://docstestmedia1.blob.core.windows.net/azure-media/articles/log-analytics/media/log-analytics-dns/dns-servers-query-load.png)</span><span class="sxs-lookup"><span data-stu-id="92e09-223">![DNS servers query log search results](https://docstestmedia1.blob.core.windows.net/azure-media/articles/log-analytics/media/log-analytics-dns/dns-servers-query-load.png)</span></span>  
- <span data-ttu-id="92e09-224">**DNS zones query load:** This link opens the DNS Log search page where you can see the DNS zone query per second statistics of all the zones on the DNS servers being managed by the solution.</span><span class="sxs-lookup"><span data-stu-id="92e09-224">**DNS zones query load:** This link opens the DNS Log search page where you can see the DNS zone query per second statistics of all the zones on the DNS servers being managed by the solution.</span></span> <span data-ttu-id="92e09-225">Click the **Metrics** tab to change the view from detailed records to a graphical visualization of the results.</span><span class="sxs-lookup"><span data-stu-id="92e09-225">Click the **Metrics** tab to change the view from detailed records to a graphical visualization of the results.</span></span>
- <span data-ttu-id="92e09-226">**Configuration events:** This link opens the DNS Log search page where you can see all the DNS configuration change events and associated messages.</span><span class="sxs-lookup"><span data-stu-id="92e09-226">**Configuration events:** This link opens the DNS Log search page where you can see all the DNS configuration change events and associated messages.</span></span> <span data-ttu-id="92e09-227">You can then filter these events based on time of the event, event ID, DNS server, or task category.</span><span class="sxs-lookup"><span data-stu-id="92e09-227">You can then filter these events based on time of the event, event ID, DNS server, or task category.</span></span> <span data-ttu-id="92e09-228">It can help you audit changes made to specific DNS servers at specific times.</span><span class="sxs-lookup"><span data-stu-id="92e09-228">It can help you audit changes made to specific DNS servers at specific times.</span></span>
- <span data-ttu-id="92e09-229">**DNS analytical log:** This link opens the DNS Log search page where you can see all the analytic events on all the DNS servers managed by the solution.</span><span class="sxs-lookup"><span data-stu-id="92e09-229">**DNS analytical log:** This link opens the DNS Log search page where you can see all the analytic events on all the DNS servers managed by the solution.</span></span> <span data-ttu-id="92e09-230">You can then filter these events based on time of the event, event ID, DNS server, client IP that made the lookup query and query type task category.</span><span class="sxs-lookup"><span data-stu-id="92e09-230">You can then filter these events based on time of the event, event ID, DNS server, client IP that made the lookup query and query type task category.</span></span> <span data-ttu-id="92e09-231">DNS server analytic events enable activity tracking on the DNS server.</span><span class="sxs-lookup"><span data-stu-id="92e09-231">DNS server analytic events enable activity tracking on the DNS server.</span></span> <span data-ttu-id="92e09-232">An analytic event is logged each time the server sends or receives DNS information.</span><span class="sxs-lookup"><span data-stu-id="92e09-232">An analytic event is logged each time the server sends or receives DNS information.</span></span>

### <a name="dns-log-search"></a><span data-ttu-id="92e09-233">DNS log search</span><span class="sxs-lookup"><span data-stu-id="92e09-233">DNS log search</span></span>

<span data-ttu-id="92e09-234">On the Search page, you can create a query, and then when you search, you can filter the results by using facet controls.</span><span class="sxs-lookup"><span data-stu-id="92e09-234">On the Search page, you can create a query, and then when you search, you can filter the results by using facet controls.</span></span> <span data-ttu-id="92e09-235">You can also create advanced queries to transform, filter, and report on your results.</span><span class="sxs-lookup"><span data-stu-id="92e09-235">You can also create advanced queries to transform, filter, and report on your results.</span></span> <span data-ttu-id="92e09-236">You can start by using the following queries.</span><span class="sxs-lookup"><span data-stu-id="92e09-236">You can start by using the following queries.</span></span>

<span data-ttu-id="92e09-237">In the search query field, type `Type=DnsEvents` to view all the DNS events generated by the DNS servers managed by the solution.</span><span class="sxs-lookup"><span data-stu-id="92e09-237">In the search query field, type `Type=DnsEvents` to view all the DNS events generated by the DNS servers managed by the solution.</span></span> <span data-ttu-id="92e09-238">The results list log data for all events related to lookup queries, dynamic registrations, and configuration changes.</span><span class="sxs-lookup"><span data-stu-id="92e09-238">The results list log data for all events related to lookup queries, dynamic registrations, and configuration changes.</span></span>

![dnsevents log search](https://docstestmedia1.blob.core.windows.net/azure-media/articles/log-analytics/media/log-analytics-dns/log-search-dnsevents.png)  

- <span data-ttu-id="92e09-240">To view the log data for lookup query, filter for SubType as **LookUpQuery** from the LHS facet control.</span><span class="sxs-lookup"><span data-stu-id="92e09-240">To view the log data for lookup query, filter for SubType as **LookUpQuery** from the LHS facet control.</span></span> <span data-ttu-id="92e09-241">A list/table containing the lookup query events for the selected time period is displayed.</span><span class="sxs-lookup"><span data-stu-id="92e09-241">A list/table containing the lookup query events for the selected time period is displayed.</span></span>
- <span data-ttu-id="92e09-242">To view the log data for Dynamic Registrations, filter for SubType as **DynamicRegistration** from the LHS facet control.</span><span class="sxs-lookup"><span data-stu-id="92e09-242">To view the log data for Dynamic Registrations, filter for SubType as **DynamicRegistration** from the LHS facet control.</span></span> <span data-ttu-id="92e09-243">A list/table containing all the Dynamic Registrations event is displayed for the selected time-period.</span><span class="sxs-lookup"><span data-stu-id="92e09-243">A list/table containing all the Dynamic Registrations event is displayed for the selected time-period.</span></span>
- <span data-ttu-id="92e09-244">To view the log data for Configuration changes, filter for SubType as **ConfigurationChange** from the LHS facet control.</span><span class="sxs-lookup"><span data-stu-id="92e09-244">To view the log data for Configuration changes, filter for SubType as **ConfigurationChange** from the LHS facet control.</span></span> <span data-ttu-id="92e09-245">A list/table containing all the Configuration changes event is displayed for the selected time-period.</span><span class="sxs-lookup"><span data-stu-id="92e09-245">A list/table containing all the Configuration changes event is displayed for the selected time-period.</span></span>

<span data-ttu-id="92e09-246">In the search query field, type `Type=DnsInventory` to view all the DNS inventory-related data for the DNS servers managed by the solution.</span><span class="sxs-lookup"><span data-stu-id="92e09-246">In the search query field, type `Type=DnsInventory` to view all the DNS inventory-related data for the DNS servers managed by the solution.</span></span> <span data-ttu-id="92e09-247">The results list the log data for DNS servers, DNS zones, and resource records.</span><span class="sxs-lookup"><span data-stu-id="92e09-247">The results list the log data for DNS servers, DNS zones, and resource records.</span></span>
<span data-ttu-id="92e09-248">![dnsinventory log search](https://docstestmedia1.blob.core.windows.net/azure-media/articles/log-analytics/media/log-analytics-dns/log-search-dnsinventory.png)</span><span class="sxs-lookup"><span data-stu-id="92e09-248">![dnsinventory log search](https://docstestmedia1.blob.core.windows.net/azure-media/articles/log-analytics/media/log-analytics-dns/log-search-dnsinventory.png)</span></span>

## <a name="feedback"></a><span data-ttu-id="92e09-249">Feedback</span><span class="sxs-lookup"><span data-stu-id="92e09-249">Feedback</span></span>

<span data-ttu-id="92e09-250">There are a couple of different routes to give feedback:</span><span class="sxs-lookup"><span data-stu-id="92e09-250">There are a couple of different routes to give feedback:</span></span>

- <span data-ttu-id="92e09-251">**UserVoice** Post ideas for DNS Analytics features to work on.</span><span class="sxs-lookup"><span data-stu-id="92e09-251">**UserVoice** Post ideas for DNS Analytics features to work on.</span></span> <span data-ttu-id="92e09-252">Visit the [OMS UserVoice page](https://aka.ms/dnsanalyticsuservoice).</span><span class="sxs-lookup"><span data-stu-id="92e09-252">Visit the [OMS UserVoice page](https://aka.ms/dnsanalyticsuservoice).</span></span>
- <span data-ttu-id="92e09-253">**Join our cohort**   We're always interested in having new customers join our cohorts to get early access to new features and help us improve DNS Analytics going forward.</span><span class="sxs-lookup"><span data-stu-id="92e09-253">**Join our cohort**   We're always interested in having new customers join our cohorts to get early access to new features and help us improve DNS Analytics going forward.</span></span> <span data-ttu-id="92e09-254">If you are interested in joining our cohorts, fill out [this quick survey](https://aka.ms/dnsanalyticssurvey).</span><span class="sxs-lookup"><span data-stu-id="92e09-254">If you are interested in joining our cohorts, fill out [this quick survey](https://aka.ms/dnsanalyticssurvey).</span></span>

## <a name="next-steps"></a><span data-ttu-id="92e09-255">Next steps</span><span class="sxs-lookup"><span data-stu-id="92e09-255">Next steps</span></span>

- <span data-ttu-id="92e09-256">[Search logs](log-analytics-log-searches.md) to view detailed DNS log records.</span><span class="sxs-lookup"><span data-stu-id="92e09-256">[Search logs](log-analytics-log-searches.md) to view detailed DNS log records.</span></span>













