---
title: DNS Analytics solution in Azure Log Analytics | Microsoft Docs
description: Set up and use the DNS Analytics solution in Log Analytics to gather insights into DNS infrastructure on security, performance, and operations.
services: log-analytics
documentationcenter: ''
author: mgoedtel
manager: carmonm
editor: ''
ms.assetid: f44a40c4-820a-406e-8c40-70bd8dc67ae7
ms.service: log-analytics
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: conceptual
ms.date: 03/20/2018
ms.author: magoedte
ms.component: na
ms.openlocfilehash: 1cb65f7f7eb0ae04d607c127a3a19b33d477fd0a
ms.sourcegitcommit: d1451406a010fd3aa854dc8e5b77dc5537d8050e
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 09/13/2018
ms.locfileid: "44818771"
---
# <a name="gather-insights-about-your-dns-infrastructure-with-the-dns-analytics-preview-solution"></a><span data-ttu-id="16725-103">Gather insights about your DNS infrastructure with the DNS Analytics Preview solution</span><span class="sxs-lookup"><span data-stu-id="16725-103">Gather insights about your DNS infrastructure with the DNS Analytics Preview solution</span></span>

![DNS Analytics symbol](./media/log-analytics-dns/dns-analytics-symbol.png)

<span data-ttu-id="16725-105">This article describes how to set up and use the Azure DNS Analytics solution in Azure Log Analytics to gather insights into DNS infrastructure on security, performance, and operations.</span><span class="sxs-lookup"><span data-stu-id="16725-105">This article describes how to set up and use the Azure DNS Analytics solution in Azure Log Analytics to gather insights into DNS infrastructure on security, performance, and operations.</span></span>

<span data-ttu-id="16725-106">DNS Analytics helps you to:</span><span class="sxs-lookup"><span data-stu-id="16725-106">DNS Analytics helps you to:</span></span>

- <span data-ttu-id="16725-107">Identify clients that try to resolve malicious domain names.</span><span class="sxs-lookup"><span data-stu-id="16725-107">Identify clients that try to resolve malicious domain names.</span></span>
- <span data-ttu-id="16725-108">Identify stale resource records.</span><span class="sxs-lookup"><span data-stu-id="16725-108">Identify stale resource records.</span></span>
- <span data-ttu-id="16725-109">Identify frequently queried domain names and talkative DNS clients.</span><span class="sxs-lookup"><span data-stu-id="16725-109">Identify frequently queried domain names and talkative DNS clients.</span></span>
- <span data-ttu-id="16725-110">View request load on DNS servers.</span><span class="sxs-lookup"><span data-stu-id="16725-110">View request load on DNS servers.</span></span>
- <span data-ttu-id="16725-111">View dynamic DNS registration failures.</span><span class="sxs-lookup"><span data-stu-id="16725-111">View dynamic DNS registration failures.</span></span>

<span data-ttu-id="16725-112">The solution collects, analyzes, and correlates Windows DNS analytic and audit logs and other related data from your DNS servers.</span><span class="sxs-lookup"><span data-stu-id="16725-112">The solution collects, analyzes, and correlates Windows DNS analytic and audit logs and other related data from your DNS servers.</span></span>

## <a name="connected-sources"></a><span data-ttu-id="16725-113">Connected sources</span><span class="sxs-lookup"><span data-stu-id="16725-113">Connected sources</span></span>

<span data-ttu-id="16725-114">The following table describes the connected sources that are supported by this solution:</span><span class="sxs-lookup"><span data-stu-id="16725-114">The following table describes the connected sources that are supported by this solution:</span></span>

| <span data-ttu-id="16725-115">**Connected source**</span><span class="sxs-lookup"><span data-stu-id="16725-115">**Connected source**</span></span> | <span data-ttu-id="16725-116">**Support**</span><span class="sxs-lookup"><span data-stu-id="16725-116">**Support**</span></span> | <span data-ttu-id="16725-117">**Description**</span><span class="sxs-lookup"><span data-stu-id="16725-117">**Description**</span></span> |
| --- | --- | --- |
| [<span data-ttu-id="16725-118">Windows agents</span><span class="sxs-lookup"><span data-stu-id="16725-118">Windows agents</span></span>](log-analytics-windows-agent.md) | <span data-ttu-id="16725-119">Yes</span><span class="sxs-lookup"><span data-stu-id="16725-119">Yes</span></span> | <span data-ttu-id="16725-120">The solution collects DNS information from Windows agents.</span><span class="sxs-lookup"><span data-stu-id="16725-120">The solution collects DNS information from Windows agents.</span></span> |
| [<span data-ttu-id="16725-121">Linux agents</span><span class="sxs-lookup"><span data-stu-id="16725-121">Linux agents</span></span>](log-analytics-linux-agents.md) | <span data-ttu-id="16725-122">No</span><span class="sxs-lookup"><span data-stu-id="16725-122">No</span></span> | <span data-ttu-id="16725-123">The solution does not collect DNS information from direct Linux agents.</span><span class="sxs-lookup"><span data-stu-id="16725-123">The solution does not collect DNS information from direct Linux agents.</span></span> |
| [<span data-ttu-id="16725-124">System Center Operations Manager management group</span><span class="sxs-lookup"><span data-stu-id="16725-124">System Center Operations Manager management group</span></span>](log-analytics-om-agents.md) | <span data-ttu-id="16725-125">Yes</span><span class="sxs-lookup"><span data-stu-id="16725-125">Yes</span></span> | <span data-ttu-id="16725-126">The solution collects DNS information from agents in a connected Operations Manager management group.</span><span class="sxs-lookup"><span data-stu-id="16725-126">The solution collects DNS information from agents in a connected Operations Manager management group.</span></span> <span data-ttu-id="16725-127">A direct connection from the Operations Manager agent to the Operations Management Suite is not required.</span><span class="sxs-lookup"><span data-stu-id="16725-127">A direct connection from the Operations Manager agent to the Operations Management Suite is not required.</span></span> <span data-ttu-id="16725-128">Data is forwarded from the management group to the Operations Management Suite repository.</span><span class="sxs-lookup"><span data-stu-id="16725-128">Data is forwarded from the management group to the Operations Management Suite repository.</span></span> |
| [<span data-ttu-id="16725-129">Azure storage account</span><span class="sxs-lookup"><span data-stu-id="16725-129">Azure storage account</span></span>](log-analytics-azure-storage.md) | <span data-ttu-id="16725-130">No</span><span class="sxs-lookup"><span data-stu-id="16725-130">No</span></span> | <span data-ttu-id="16725-131">Azure storage isn't used by the solution.</span><span class="sxs-lookup"><span data-stu-id="16725-131">Azure storage isn't used by the solution.</span></span> |

### <a name="data-collection-details"></a><span data-ttu-id="16725-132">Data collection details</span><span class="sxs-lookup"><span data-stu-id="16725-132">Data collection details</span></span>

<span data-ttu-id="16725-133">The solution collects DNS inventory and DNS event-related data from the DNS servers where a Log Analytics agent is installed.</span><span class="sxs-lookup"><span data-stu-id="16725-133">The solution collects DNS inventory and DNS event-related data from the DNS servers where a Log Analytics agent is installed.</span></span> <span data-ttu-id="16725-134">This data is then uploaded to Log Analytics and displayed in the solution dashboard.</span><span class="sxs-lookup"><span data-stu-id="16725-134">This data is then uploaded to Log Analytics and displayed in the solution dashboard.</span></span> <span data-ttu-id="16725-135">Inventory-related data, such as the number of DNS servers, zones, and resource records, is collected by running the DNS PowerShell cmdlets.</span><span class="sxs-lookup"><span data-stu-id="16725-135">Inventory-related data, such as the number of DNS servers, zones, and resource records, is collected by running the DNS PowerShell cmdlets.</span></span> <span data-ttu-id="16725-136">The data is updated once every two days.</span><span class="sxs-lookup"><span data-stu-id="16725-136">The data is updated once every two days.</span></span> <span data-ttu-id="16725-137">The event-related data is collected near real time from the [analytic and audit logs](https://technet.microsoft.com/library/dn800669.aspx#enhanc) provided by enhanced DNS logging and diagnostics in Windows Server 2012 R2.</span><span class="sxs-lookup"><span data-stu-id="16725-137">The event-related data is collected near real time from the [analytic and audit logs](https://technet.microsoft.com/library/dn800669.aspx#enhanc) provided by enhanced DNS logging and diagnostics in Windows Server 2012 R2.</span></span>

## <a name="configuration"></a><span data-ttu-id="16725-138">Configuration</span><span class="sxs-lookup"><span data-stu-id="16725-138">Configuration</span></span>

<span data-ttu-id="16725-139">Use the following information to configure the solution:</span><span class="sxs-lookup"><span data-stu-id="16725-139">Use the following information to configure the solution:</span></span>

- <span data-ttu-id="16725-140">You must have a [Windows](log-analytics-windows-agent.md) or [Operations Manager](log-analytics-om-agents.md) agent on each DNS server that you want to monitor.</span><span class="sxs-lookup"><span data-stu-id="16725-140">You must have a [Windows](log-analytics-windows-agent.md) or [Operations Manager](log-analytics-om-agents.md) agent on each DNS server that you want to monitor.</span></span>
- <span data-ttu-id="16725-141">You can add the DNS Analytics solution to your Operations Management Suite workspace from the [Azure Marketplace](https://aka.ms/dnsanalyticsazuremarketplace).</span><span class="sxs-lookup"><span data-stu-id="16725-141">You can add the DNS Analytics solution to your Operations Management Suite workspace from the [Azure Marketplace](https://aka.ms/dnsanalyticsazuremarketplace).</span></span> <span data-ttu-id="16725-142">You can also use the process described in [Add Log Analytics solutions from the Solutions Gallery](log-analytics-add-solutions.md).</span><span class="sxs-lookup"><span data-stu-id="16725-142">You can also use the process described in [Add Log Analytics solutions from the Solutions Gallery](log-analytics-add-solutions.md).</span></span>

<span data-ttu-id="16725-143">The solution starts collecting data without the need of further configuration.</span><span class="sxs-lookup"><span data-stu-id="16725-143">The solution starts collecting data without the need of further configuration.</span></span> <span data-ttu-id="16725-144">However, you can use the following configuration to customize data collection.</span><span class="sxs-lookup"><span data-stu-id="16725-144">However, you can use the following configuration to customize data collection.</span></span>

### <a name="configure-the-solution"></a><span data-ttu-id="16725-145">Configure the solution</span><span class="sxs-lookup"><span data-stu-id="16725-145">Configure the solution</span></span>

<span data-ttu-id="16725-146">On the solution dashboard, click **Configuration** to open the DNS Analytics Configuration page.</span><span class="sxs-lookup"><span data-stu-id="16725-146">On the solution dashboard, click **Configuration** to open the DNS Analytics Configuration page.</span></span> <span data-ttu-id="16725-147">There are two types of configuration changes that you can make:</span><span class="sxs-lookup"><span data-stu-id="16725-147">There are two types of configuration changes that you can make:</span></span>

- <span data-ttu-id="16725-148">**Whitelisted Domain Names**.</span><span class="sxs-lookup"><span data-stu-id="16725-148">**Whitelisted Domain Names**.</span></span> <span data-ttu-id="16725-149">The solution does not process all the lookup queries.</span><span class="sxs-lookup"><span data-stu-id="16725-149">The solution does not process all the lookup queries.</span></span> <span data-ttu-id="16725-150">It maintains a whitelist of domain name suffixes.</span><span class="sxs-lookup"><span data-stu-id="16725-150">It maintains a whitelist of domain name suffixes.</span></span> <span data-ttu-id="16725-151">The lookup queries that resolve to the domain names that match domain name suffixes in this whitelist are not processed by the solution.</span><span class="sxs-lookup"><span data-stu-id="16725-151">The lookup queries that resolve to the domain names that match domain name suffixes in this whitelist are not processed by the solution.</span></span> <span data-ttu-id="16725-152">Not processing whitelisted domain names helps to optimize the data sent to Log Analytics.</span><span class="sxs-lookup"><span data-stu-id="16725-152">Not processing whitelisted domain names helps to optimize the data sent to Log Analytics.</span></span> <span data-ttu-id="16725-153">The default whitelist includes popular public domain names, such as www.google.com and www.facebook.com.</span><span class="sxs-lookup"><span data-stu-id="16725-153">The default whitelist includes popular public domain names, such as www.google.com and www.facebook.com.</span></span> <span data-ttu-id="16725-154">You can view the complete default list by scrolling.</span><span class="sxs-lookup"><span data-stu-id="16725-154">You can view the complete default list by scrolling.</span></span>

 <span data-ttu-id="16725-155">You can modify the list to add any domain name suffix that you want to view lookup insights for.</span><span class="sxs-lookup"><span data-stu-id="16725-155">You can modify the list to add any domain name suffix that you want to view lookup insights for.</span></span> <span data-ttu-id="16725-156">You can also remove any domain name suffix that you don't want to view lookup insights for.</span><span class="sxs-lookup"><span data-stu-id="16725-156">You can also remove any domain name suffix that you don't want to view lookup insights for.</span></span>

- <span data-ttu-id="16725-157">**Talkative Client Threshold**.</span><span class="sxs-lookup"><span data-stu-id="16725-157">**Talkative Client Threshold**.</span></span> <span data-ttu-id="16725-158">DNS clients that exceed the threshold for the number of lookup requests are highlighted in the **DNS Clients** blade.</span><span class="sxs-lookup"><span data-stu-id="16725-158">DNS clients that exceed the threshold for the number of lookup requests are highlighted in the **DNS Clients** blade.</span></span> <span data-ttu-id="16725-159">The default threshold is 1,000.</span><span class="sxs-lookup"><span data-stu-id="16725-159">The default threshold is 1,000.</span></span> <span data-ttu-id="16725-160">You can edit the threshold.</span><span class="sxs-lookup"><span data-stu-id="16725-160">You can edit the threshold.</span></span>

    ![Whitelisted domain names](./media/log-analytics-dns/dns-config.png)

## <a name="management-packs"></a><span data-ttu-id="16725-162">Management packs</span><span class="sxs-lookup"><span data-stu-id="16725-162">Management packs</span></span>

<span data-ttu-id="16725-163">If you are using the Microsoft Monitoring Agent to connect to your Operations Management Suite workspace, the following management pack is installed:</span><span class="sxs-lookup"><span data-stu-id="16725-163">If you are using the Microsoft Monitoring Agent to connect to your Operations Management Suite workspace, the following management pack is installed:</span></span>

- <span data-ttu-id="16725-164">Microsoft DNS Data Collector Intelligence Pack (Microsft.IntelligencePacks.Dns)</span><span class="sxs-lookup"><span data-stu-id="16725-164">Microsoft DNS Data Collector Intelligence Pack (Microsft.IntelligencePacks.Dns)</span></span>

<span data-ttu-id="16725-165">If your Operations Manager management group is connected to your Operations Management Suite workspace, the following management packs are installed in Operations Manager when you add this solution.</span><span class="sxs-lookup"><span data-stu-id="16725-165">If your Operations Manager management group is connected to your Operations Management Suite workspace, the following management packs are installed in Operations Manager when you add this solution.</span></span> <span data-ttu-id="16725-166">There is no required configuration or maintenance of these management packs:</span><span class="sxs-lookup"><span data-stu-id="16725-166">There is no required configuration or maintenance of these management packs:</span></span>

- <span data-ttu-id="16725-167">Microsoft DNS Data Collector Intelligence Pack (Microsft.IntelligencePacks.Dns)</span><span class="sxs-lookup"><span data-stu-id="16725-167">Microsoft DNS Data Collector Intelligence Pack (Microsft.IntelligencePacks.Dns)</span></span>
- <span data-ttu-id="16725-168">Microsoft System Center Advisor DNS Analytics Configuration (Microsoft.IntelligencePack.Dns.Configuration)</span><span class="sxs-lookup"><span data-stu-id="16725-168">Microsoft System Center Advisor DNS Analytics Configuration (Microsoft.IntelligencePack.Dns.Configuration)</span></span>

<span data-ttu-id="16725-169">For more information on how solution management packs are updated, see [Connect Operations Manager to Log Analytics](log-analytics-om-agents.md).</span><span class="sxs-lookup"><span data-stu-id="16725-169">For more information on how solution management packs are updated, see [Connect Operations Manager to Log Analytics](log-analytics-om-agents.md).</span></span>

## <a name="use-the-dns-analytics-solution"></a><span data-ttu-id="16725-170">Use the DNS Analytics solution</span><span class="sxs-lookup"><span data-stu-id="16725-170">Use the DNS Analytics solution</span></span>

<span data-ttu-id="16725-171">This section explains all the dashboard functions and how to use them.</span><span class="sxs-lookup"><span data-stu-id="16725-171">This section explains all the dashboard functions and how to use them.</span></span>

<span data-ttu-id="16725-172">After you've added the solution to your workspace, the solution tile on the Operations Management Suite Overview page provides a quick summary of your DNS infrastructure.</span><span class="sxs-lookup"><span data-stu-id="16725-172">After you've added the solution to your workspace, the solution tile on the Operations Management Suite Overview page provides a quick summary of your DNS infrastructure.</span></span> <span data-ttu-id="16725-173">It includes the number of DNS servers where the data is being collected.</span><span class="sxs-lookup"><span data-stu-id="16725-173">It includes the number of DNS servers where the data is being collected.</span></span> <span data-ttu-id="16725-174">It also includes the number of requests made by clients to resolve malicious domains in the past 24 hours.</span><span class="sxs-lookup"><span data-stu-id="16725-174">It also includes the number of requests made by clients to resolve malicious domains in the past 24 hours.</span></span> <span data-ttu-id="16725-175">When you click the tile, the solution dashboard opens.</span><span class="sxs-lookup"><span data-stu-id="16725-175">When you click the tile, the solution dashboard opens.</span></span>

![DNS Analytics tile](./media/log-analytics-dns/dns-tile.png)

### <a name="solution-dashboard"></a><span data-ttu-id="16725-177">Solution dashboard</span><span class="sxs-lookup"><span data-stu-id="16725-177">Solution dashboard</span></span>

<span data-ttu-id="16725-178">The solution dashboard shows summarized information for the various features of the solution.</span><span class="sxs-lookup"><span data-stu-id="16725-178">The solution dashboard shows summarized information for the various features of the solution.</span></span> <span data-ttu-id="16725-179">It also includes links to the detailed view for forensic analysis and diagnosis.</span><span class="sxs-lookup"><span data-stu-id="16725-179">It also includes links to the detailed view for forensic analysis and diagnosis.</span></span> <span data-ttu-id="16725-180">By default, the data is shown for the last seven days.</span><span class="sxs-lookup"><span data-stu-id="16725-180">By default, the data is shown for the last seven days.</span></span> <span data-ttu-id="16725-181">You can change the date and time range by using the **date-time selection control**, as shown in the following image:</span><span class="sxs-lookup"><span data-stu-id="16725-181">You can change the date and time range by using the **date-time selection control**, as shown in the following image:</span></span>

![Time selection control](./media/log-analytics-dns/dns-time.png)

<span data-ttu-id="16725-183">The solution dashboard shows the following blades:</span><span class="sxs-lookup"><span data-stu-id="16725-183">The solution dashboard shows the following blades:</span></span>

<span data-ttu-id="16725-184">**DNS Security**.</span><span class="sxs-lookup"><span data-stu-id="16725-184">**DNS Security**.</span></span> <span data-ttu-id="16725-185">Reports the DNS clients that are trying to communicate with malicious domains.</span><span class="sxs-lookup"><span data-stu-id="16725-185">Reports the DNS clients that are trying to communicate with malicious domains.</span></span> <span data-ttu-id="16725-186">By using Microsoft threat intelligence feeds, DNS Analytics can detect client IPs that are trying to access malicious domains.</span><span class="sxs-lookup"><span data-stu-id="16725-186">By using Microsoft threat intelligence feeds, DNS Analytics can detect client IPs that are trying to access malicious domains.</span></span> <span data-ttu-id="16725-187">In many cases, malware-infected devices "dial out" to the "command and control" center of the malicious domain by resolving the malware domain name.</span><span class="sxs-lookup"><span data-stu-id="16725-187">In many cases, malware-infected devices "dial out" to the "command and control" center of the malicious domain by resolving the malware domain name.</span></span>

![DNS Security blade](./media/log-analytics-dns/dns-security-blade.png)

<span data-ttu-id="16725-189">When you click a client IP in the list, Log Search opens and shows the lookup details of the respective query.</span><span class="sxs-lookup"><span data-stu-id="16725-189">When you click a client IP in the list, Log Search opens and shows the lookup details of the respective query.</span></span> <span data-ttu-id="16725-190">In the following example, DNS Analytics detected that the communication was done with an [IRCbot](https://www.microsoft.com/security/portal/threat/encyclopedia/entry.aspx?Name=Win32/IRCbot):</span><span class="sxs-lookup"><span data-stu-id="16725-190">In the following example, DNS Analytics detected that the communication was done with an [IRCbot](https://www.microsoft.com/security/portal/threat/encyclopedia/entry.aspx?Name=Win32/IRCbot):</span></span>

![Log search results showing ircbot](./media/log-analytics-dns/ircbot.png)

<span data-ttu-id="16725-192">The information helps you to identify the:</span><span class="sxs-lookup"><span data-stu-id="16725-192">The information helps you to identify the:</span></span>

- <span data-ttu-id="16725-193">Client IP that initiated the communication.</span><span class="sxs-lookup"><span data-stu-id="16725-193">Client IP that initiated the communication.</span></span>
- <span data-ttu-id="16725-194">Domain name that resolves to the malicious IP.</span><span class="sxs-lookup"><span data-stu-id="16725-194">Domain name that resolves to the malicious IP.</span></span>
- <span data-ttu-id="16725-195">IP addresses that the domain name resolves to.</span><span class="sxs-lookup"><span data-stu-id="16725-195">IP addresses that the domain name resolves to.</span></span>
- <span data-ttu-id="16725-196">Malicious IP address.</span><span class="sxs-lookup"><span data-stu-id="16725-196">Malicious IP address.</span></span>
- <span data-ttu-id="16725-197">Severity of the issue.</span><span class="sxs-lookup"><span data-stu-id="16725-197">Severity of the issue.</span></span>
- <span data-ttu-id="16725-198">Reason for blacklisting the malicious IP.</span><span class="sxs-lookup"><span data-stu-id="16725-198">Reason for blacklisting the malicious IP.</span></span>
- <span data-ttu-id="16725-199">Detection time.</span><span class="sxs-lookup"><span data-stu-id="16725-199">Detection time.</span></span>

<span data-ttu-id="16725-200">**Domains Queried**.</span><span class="sxs-lookup"><span data-stu-id="16725-200">**Domains Queried**.</span></span> <span data-ttu-id="16725-201">Provides the most frequent domain names being queried by the DNS clients in your environment.</span><span class="sxs-lookup"><span data-stu-id="16725-201">Provides the most frequent domain names being queried by the DNS clients in your environment.</span></span> <span data-ttu-id="16725-202">You can view the list of all the domain names queried.</span><span class="sxs-lookup"><span data-stu-id="16725-202">You can view the list of all the domain names queried.</span></span> <span data-ttu-id="16725-203">You can also drill down into the lookup request details of a specific domain name in Log Search.</span><span class="sxs-lookup"><span data-stu-id="16725-203">You can also drill down into the lookup request details of a specific domain name in Log Search.</span></span>

![Domains Queried blade](./media/log-analytics-dns/domains-queried-blade.png)

<span data-ttu-id="16725-205">**DNS Clients**.</span><span class="sxs-lookup"><span data-stu-id="16725-205">**DNS Clients**.</span></span> <span data-ttu-id="16725-206">Reports the clients *breaching the threshold* for number of queries in the chosen time period.</span><span class="sxs-lookup"><span data-stu-id="16725-206">Reports the clients *breaching the threshold* for number of queries in the chosen time period.</span></span> <span data-ttu-id="16725-207">You can view the list of all the DNS clients and the details of the queries made by them in Log Search.</span><span class="sxs-lookup"><span data-stu-id="16725-207">You can view the list of all the DNS clients and the details of the queries made by them in Log Search.</span></span>

![DNS Clients blade](./media/log-analytics-dns/dns-clients-blade.png)

<span data-ttu-id="16725-209">**Dynamic DNS Registrations**.</span><span class="sxs-lookup"><span data-stu-id="16725-209">**Dynamic DNS Registrations**.</span></span> <span data-ttu-id="16725-210">Reports name registration failures.</span><span class="sxs-lookup"><span data-stu-id="16725-210">Reports name registration failures.</span></span> <span data-ttu-id="16725-211">All registration failures for address [resource records](https://en.wikipedia.org/wiki/List_of_DNS_record_types) (Type A and AAAA) are highlighted along with the client IPs that made the registration requests.</span><span class="sxs-lookup"><span data-stu-id="16725-211">All registration failures for address [resource records](https://en.wikipedia.org/wiki/List_of_DNS_record_types) (Type A and AAAA) are highlighted along with the client IPs that made the registration requests.</span></span> <span data-ttu-id="16725-212">You can then use this information to find the root cause of the registration failure by following these steps:</span><span class="sxs-lookup"><span data-stu-id="16725-212">You can then use this information to find the root cause of the registration failure by following these steps:</span></span>

1. <span data-ttu-id="16725-213">Find the zone that is authoritative for the name that the client is trying to update.</span><span class="sxs-lookup"><span data-stu-id="16725-213">Find the zone that is authoritative for the name that the client is trying to update.</span></span>

1. <span data-ttu-id="16725-214">Use the solution to check the inventory information of that zone.</span><span class="sxs-lookup"><span data-stu-id="16725-214">Use the solution to check the inventory information of that zone.</span></span>

1. <span data-ttu-id="16725-215">Verify that the dynamic update for the zone is enabled.</span><span class="sxs-lookup"><span data-stu-id="16725-215">Verify that the dynamic update for the zone is enabled.</span></span>

1. <span data-ttu-id="16725-216">Check whether the zone is configured for secure dynamic update or not.</span><span class="sxs-lookup"><span data-stu-id="16725-216">Check whether the zone is configured for secure dynamic update or not.</span></span>

    ![Dynamic DNS Registrations blade](./media/log-analytics-dns/dynamic-dns-reg-blade.png)

<span data-ttu-id="16725-218">**Name registration requests**.</span><span class="sxs-lookup"><span data-stu-id="16725-218">**Name registration requests**.</span></span> <span data-ttu-id="16725-219">The upper tile shows a trendline of successful and failed DNS dynamic update requests.</span><span class="sxs-lookup"><span data-stu-id="16725-219">The upper tile shows a trendline of successful and failed DNS dynamic update requests.</span></span> <span data-ttu-id="16725-220">The lower tile lists the top 10 clients that are sending failed DNS update requests to the DNS servers, sorted by the number of failures.</span><span class="sxs-lookup"><span data-stu-id="16725-220">The lower tile lists the top 10 clients that are sending failed DNS update requests to the DNS servers, sorted by the number of failures.</span></span>

![<span data-ttu-id="16725-221">Name registration requests blade</span><span class="sxs-lookup"><span data-stu-id="16725-221">Name registration requests blade</span></span> ](./media/log-analytics-dns/name-reg-req-blade.png)

<span data-ttu-id="16725-222">**Sample DDI Analytics Queries**.</span><span class="sxs-lookup"><span data-stu-id="16725-222">**Sample DDI Analytics Queries**.</span></span> <span data-ttu-id="16725-223">Contains a list of the most common search queries that fetch raw analytics data directly.</span><span class="sxs-lookup"><span data-stu-id="16725-223">Contains a list of the most common search queries that fetch raw analytics data directly.</span></span>


![Sample queries](./media/log-analytics-dns/queries.png)

<span data-ttu-id="16725-225">You can use these queries as a starting point for creating your own queries for customized reporting.</span><span class="sxs-lookup"><span data-stu-id="16725-225">You can use these queries as a starting point for creating your own queries for customized reporting.</span></span> <span data-ttu-id="16725-226">The queries link to the DNS Analytics Log Search page where results are displayed:</span><span class="sxs-lookup"><span data-stu-id="16725-226">The queries link to the DNS Analytics Log Search page where results are displayed:</span></span>

- <span data-ttu-id="16725-227">**List of DNS Servers**.</span><span class="sxs-lookup"><span data-stu-id="16725-227">**List of DNS Servers**.</span></span> <span data-ttu-id="16725-228">Shows a list of all DNS servers with their associated FQDN, domain name, forest name, and server IPs.</span><span class="sxs-lookup"><span data-stu-id="16725-228">Shows a list of all DNS servers with their associated FQDN, domain name, forest name, and server IPs.</span></span>
- <span data-ttu-id="16725-229">**List of DNS Zones**.</span><span class="sxs-lookup"><span data-stu-id="16725-229">**List of DNS Zones**.</span></span> <span data-ttu-id="16725-230">Shows a list of all DNS zones with the associated zone name, dynamic update status, name servers, and DNSSEC signing status.</span><span class="sxs-lookup"><span data-stu-id="16725-230">Shows a list of all DNS zones with the associated zone name, dynamic update status, name servers, and DNSSEC signing status.</span></span>
- <span data-ttu-id="16725-231">**Unused Resource Records**.</span><span class="sxs-lookup"><span data-stu-id="16725-231">**Unused Resource Records**.</span></span> <span data-ttu-id="16725-232">Shows a list of all the unused/stale resource records.</span><span class="sxs-lookup"><span data-stu-id="16725-232">Shows a list of all the unused/stale resource records.</span></span> <span data-ttu-id="16725-233">This list contains the resource record name, resource record type, the associated DNS server, record generation time, and zone name.</span><span class="sxs-lookup"><span data-stu-id="16725-233">This list contains the resource record name, resource record type, the associated DNS server, record generation time, and zone name.</span></span> <span data-ttu-id="16725-234">You can use this list to identify the DNS resource records that are no longer in use.</span><span class="sxs-lookup"><span data-stu-id="16725-234">You can use this list to identify the DNS resource records that are no longer in use.</span></span> <span data-ttu-id="16725-235">Based on this information, you can then remove those entries from the DNS servers.</span><span class="sxs-lookup"><span data-stu-id="16725-235">Based on this information, you can then remove those entries from the DNS servers.</span></span>
- <span data-ttu-id="16725-236">**DNS Servers Query Load**.</span><span class="sxs-lookup"><span data-stu-id="16725-236">**DNS Servers Query Load**.</span></span> <span data-ttu-id="16725-237">Shows information so that you can get a perspective of the DNS load on your DNS servers.</span><span class="sxs-lookup"><span data-stu-id="16725-237">Shows information so that you can get a perspective of the DNS load on your DNS servers.</span></span> <span data-ttu-id="16725-238">This information can help you plan the capacity for the servers.</span><span class="sxs-lookup"><span data-stu-id="16725-238">This information can help you plan the capacity for the servers.</span></span> <span data-ttu-id="16725-239">You can go to the **Metrics** tab to change the view to a graphical visualization.</span><span class="sxs-lookup"><span data-stu-id="16725-239">You can go to the **Metrics** tab to change the view to a graphical visualization.</span></span> <span data-ttu-id="16725-240">This view helps you understand how the DNS load is distributed across your DNS servers.</span><span class="sxs-lookup"><span data-stu-id="16725-240">This view helps you understand how the DNS load is distributed across your DNS servers.</span></span> <span data-ttu-id="16725-241">It shows DNS query rate trends for each server.</span><span class="sxs-lookup"><span data-stu-id="16725-241">It shows DNS query rate trends for each server.</span></span>

    ![DNS servers query log search results](./media/log-analytics-dns/dns-servers-query-load.png)

- <span data-ttu-id="16725-243">**DNS Zones Query Load**.</span><span class="sxs-lookup"><span data-stu-id="16725-243">**DNS Zones Query Load**.</span></span> <span data-ttu-id="16725-244">Shows the DNS zone-query-per-second statistics of all the zones on the DNS servers being managed by the solution.</span><span class="sxs-lookup"><span data-stu-id="16725-244">Shows the DNS zone-query-per-second statistics of all the zones on the DNS servers being managed by the solution.</span></span> <span data-ttu-id="16725-245">Click the **Metrics** tab to change the view from detailed records to a graphical visualization of the results.</span><span class="sxs-lookup"><span data-stu-id="16725-245">Click the **Metrics** tab to change the view from detailed records to a graphical visualization of the results.</span></span>
- <span data-ttu-id="16725-246">**Configuration Events**.</span><span class="sxs-lookup"><span data-stu-id="16725-246">**Configuration Events**.</span></span> <span data-ttu-id="16725-247">Shows all the DNS configuration change events and associated messages.</span><span class="sxs-lookup"><span data-stu-id="16725-247">Shows all the DNS configuration change events and associated messages.</span></span> <span data-ttu-id="16725-248">You can then filter these events based on time of the event, event ID, DNS server, or task category.</span><span class="sxs-lookup"><span data-stu-id="16725-248">You can then filter these events based on time of the event, event ID, DNS server, or task category.</span></span> <span data-ttu-id="16725-249">The data can help you audit changes made to specific DNS servers at specific times.</span><span class="sxs-lookup"><span data-stu-id="16725-249">The data can help you audit changes made to specific DNS servers at specific times.</span></span>
- <span data-ttu-id="16725-250">**DNS Analytical Log**.</span><span class="sxs-lookup"><span data-stu-id="16725-250">**DNS Analytical Log**.</span></span> <span data-ttu-id="16725-251">Shows all the analytic events on all the DNS servers managed by the solution.</span><span class="sxs-lookup"><span data-stu-id="16725-251">Shows all the analytic events on all the DNS servers managed by the solution.</span></span> <span data-ttu-id="16725-252">You can then filter these events based on time of the event, event ID, DNS server, client IP that made the lookup query, and query type task category.</span><span class="sxs-lookup"><span data-stu-id="16725-252">You can then filter these events based on time of the event, event ID, DNS server, client IP that made the lookup query, and query type task category.</span></span> <span data-ttu-id="16725-253">DNS server analytic events enable activity tracking on the DNS server.</span><span class="sxs-lookup"><span data-stu-id="16725-253">DNS server analytic events enable activity tracking on the DNS server.</span></span> <span data-ttu-id="16725-254">An analytic event is logged each time the server sends or receives DNS information.</span><span class="sxs-lookup"><span data-stu-id="16725-254">An analytic event is logged each time the server sends or receives DNS information.</span></span>

### <a name="search-by-using-dns-analytics-log-search"></a><span data-ttu-id="16725-255">Search by using DNS Analytics Log Search</span><span class="sxs-lookup"><span data-stu-id="16725-255">Search by using DNS Analytics Log Search</span></span>

<span data-ttu-id="16725-256">On the Log Search page, you can create a query.</span><span class="sxs-lookup"><span data-stu-id="16725-256">On the Log Search page, you can create a query.</span></span> <span data-ttu-id="16725-257">You can filter your search results by using facet controls.</span><span class="sxs-lookup"><span data-stu-id="16725-257">You can filter your search results by using facet controls.</span></span> <span data-ttu-id="16725-258">You can also create advanced queries to transform, filter, and report on your results.</span><span class="sxs-lookup"><span data-stu-id="16725-258">You can also create advanced queries to transform, filter, and report on your results.</span></span> <span data-ttu-id="16725-259">Start by using the following queries:</span><span class="sxs-lookup"><span data-stu-id="16725-259">Start by using the following queries:</span></span>

1. <span data-ttu-id="16725-260">In the **search query box**, type `DnsEvents` to view all the DNS events generated by the DNS servers managed by the solution.</span><span class="sxs-lookup"><span data-stu-id="16725-260">In the **search query box**, type `DnsEvents` to view all the DNS events generated by the DNS servers managed by the solution.</span></span> <span data-ttu-id="16725-261">The results list the log data for all events related to lookup queries, dynamic registrations, and configuration changes.</span><span class="sxs-lookup"><span data-stu-id="16725-261">The results list the log data for all events related to lookup queries, dynamic registrations, and configuration changes.</span></span>

    ![DnsEvents log search](./media/log-analytics-dns/log-search-dnsevents.png)  

    <span data-ttu-id="16725-263">a.</span><span class="sxs-lookup"><span data-stu-id="16725-263">a.</span></span> <span data-ttu-id="16725-264">To view the log data for lookup queries, select **LookUpQuery** as the **Subtype** filter from the facet control on the left.</span><span class="sxs-lookup"><span data-stu-id="16725-264">To view the log data for lookup queries, select **LookUpQuery** as the **Subtype** filter from the facet control on the left.</span></span> <span data-ttu-id="16725-265">A table that lists all the lookup query events for the selected time period is displayed.</span><span class="sxs-lookup"><span data-stu-id="16725-265">A table that lists all the lookup query events for the selected time period is displayed.</span></span>

    <span data-ttu-id="16725-266">b.</span><span class="sxs-lookup"><span data-stu-id="16725-266">b.</span></span> <span data-ttu-id="16725-267">To view the log data for dynamic registrations, select **DynamicRegistration** as the **Subtype** filter from the facet control on the left.</span><span class="sxs-lookup"><span data-stu-id="16725-267">To view the log data for dynamic registrations, select **DynamicRegistration** as the **Subtype** filter from the facet control on the left.</span></span> <span data-ttu-id="16725-268">A table that lists all the dynamic registration events for the selected time period is displayed.</span><span class="sxs-lookup"><span data-stu-id="16725-268">A table that lists all the dynamic registration events for the selected time period is displayed.</span></span>

    <span data-ttu-id="16725-269">c.</span><span class="sxs-lookup"><span data-stu-id="16725-269">c.</span></span> <span data-ttu-id="16725-270">To view the log data for configuration changes, select **ConfigurationChange** as the **Subtype** filter from the facet control on the left.</span><span class="sxs-lookup"><span data-stu-id="16725-270">To view the log data for configuration changes, select **ConfigurationChange** as the **Subtype** filter from the facet control on the left.</span></span> <span data-ttu-id="16725-271">A table that lists all the configuration change events for the selected time period is displayed.</span><span class="sxs-lookup"><span data-stu-id="16725-271">A table that lists all the configuration change events for the selected time period is displayed.</span></span>

1. <span data-ttu-id="16725-272">In the **search query box**, type `DnsInventory` to view all the DNS inventory-related data for the DNS servers managed by the solution.</span><span class="sxs-lookup"><span data-stu-id="16725-272">In the **search query box**, type `DnsInventory` to view all the DNS inventory-related data for the DNS servers managed by the solution.</span></span> <span data-ttu-id="16725-273">The results list the log data for DNS servers, DNS zones, and resource records.</span><span class="sxs-lookup"><span data-stu-id="16725-273">The results list the log data for DNS servers, DNS zones, and resource records.</span></span>

    ![DnsInventory log search](./media/log-analytics-dns/log-search-dnsinventory.png)

## <a name="feedback"></a><span data-ttu-id="16725-275">Feedback</span><span class="sxs-lookup"><span data-stu-id="16725-275">Feedback</span></span>

<span data-ttu-id="16725-276">There are two ways you can give feedback:</span><span class="sxs-lookup"><span data-stu-id="16725-276">There are two ways you can give feedback:</span></span>

- <span data-ttu-id="16725-277">**UserVoice**.</span><span class="sxs-lookup"><span data-stu-id="16725-277">**UserVoice**.</span></span> <span data-ttu-id="16725-278">Post ideas for DNS Analytics features to work on.</span><span class="sxs-lookup"><span data-stu-id="16725-278">Post ideas for DNS Analytics features to work on.</span></span> <span data-ttu-id="16725-279">Visit the [Operations Management Suite UserVoice page](https://aka.ms/dnsanalyticsuservoice).</span><span class="sxs-lookup"><span data-stu-id="16725-279">Visit the [Operations Management Suite UserVoice page](https://aka.ms/dnsanalyticsuservoice).</span></span>
- <span data-ttu-id="16725-280">**Join our cohort**.</span><span class="sxs-lookup"><span data-stu-id="16725-280">**Join our cohort**.</span></span> <span data-ttu-id="16725-281">We're always interested in having new customers join our cohorts to get early access to new features and help us improve DNS Analytics.</span><span class="sxs-lookup"><span data-stu-id="16725-281">We're always interested in having new customers join our cohorts to get early access to new features and help us improve DNS Analytics.</span></span> <span data-ttu-id="16725-282">If you are interested in joining our cohorts, fill out [this quick survey](https://aka.ms/dnsanalyticssurvey).</span><span class="sxs-lookup"><span data-stu-id="16725-282">If you are interested in joining our cohorts, fill out [this quick survey](https://aka.ms/dnsanalyticssurvey).</span></span>

## <a name="next-steps"></a><span data-ttu-id="16725-283">Next steps</span><span class="sxs-lookup"><span data-stu-id="16725-283">Next steps</span></span>

<span data-ttu-id="16725-284">[Search logs](log-analytics-log-searches.md) to view detailed DNS log records.</span><span class="sxs-lookup"><span data-stu-id="16725-284">[Search logs](log-analytics-log-searches.md) to view detailed DNS log records.</span></span>
