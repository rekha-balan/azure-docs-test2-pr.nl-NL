---
title: Computer groups in Log Analytics log searches | Microsoft Docs
description: Computer groups in Log Analytics allow you to scope log searches to a particular set of computers.  This article describes the different methods you can use to create computer groups and how to use them in a log search.
services: log-analytics
documentationcenter: ''
author: bwren
manager: jwhit
editor: ''
ms.assetid: a28b9e8a-6761-4ead-aa61-c8451ca90125
ms.service: log-analytics
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 12/09/2016
ms.author: bwren
ms.openlocfilehash: b0eaaf7877964b050710dd0c80ec9206f024f13c
ms.sourcegitcommit: 5b9d839c0c0a94b293fdafe1d6e5429506c07e05
ms.translationtype: HT
ms.contentlocale: nl-NL
ms.lasthandoff: 08/02/2018
ms.locfileid: "44661062"
---
# <a name="computer-groups-in-log-analytics-log-searches"></a><span data-ttu-id="5d3ad-104">Computer groups in Log Analytics log searches</span><span class="sxs-lookup"><span data-stu-id="5d3ad-104">Computer groups in Log Analytics log searches</span></span>
<span data-ttu-id="5d3ad-105">Computer groups in Log Analytics allow you to scope [log searches](log-analytics-log-searches.md) to a particular set of computers.</span><span class="sxs-lookup"><span data-stu-id="5d3ad-105">Computer groups in Log Analytics allow you to scope [log searches](log-analytics-log-searches.md) to a particular set of computers.</span></span>  <span data-ttu-id="5d3ad-106">Each group is populated with computers either using a query that you define or by importing groups from different sources.</span><span class="sxs-lookup"><span data-stu-id="5d3ad-106">Each group is populated with computers either using a query that you define or by importing groups from different sources.</span></span>  <span data-ttu-id="5d3ad-107">When the group is included in a log search, the results are limited to records that match the computers in the group.</span><span class="sxs-lookup"><span data-stu-id="5d3ad-107">When the group is included in a log search, the results are limited to records that match the computers in the group.</span></span>

## <a name="creating-a-computer-group"></a><span data-ttu-id="5d3ad-108">Creating a computer group</span><span class="sxs-lookup"><span data-stu-id="5d3ad-108">Creating a computer group</span></span>
<span data-ttu-id="5d3ad-109">You can create a computer group in Log Analytics using any of the methods in the following table.</span><span class="sxs-lookup"><span data-stu-id="5d3ad-109">You can create a computer group in Log Analytics using any of the methods in the following table.</span></span>  <span data-ttu-id="5d3ad-110">Details on each method are provided in the sections below.</span><span class="sxs-lookup"><span data-stu-id="5d3ad-110">Details on each method are provided in the sections below.</span></span> 

| <span data-ttu-id="5d3ad-111">Method</span><span class="sxs-lookup"><span data-stu-id="5d3ad-111">Method</span></span> | <span data-ttu-id="5d3ad-112">Description</span><span class="sxs-lookup"><span data-stu-id="5d3ad-112">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="5d3ad-113">Log search</span><span class="sxs-lookup"><span data-stu-id="5d3ad-113">Log search</span></span> |<span data-ttu-id="5d3ad-114">Create a log search that returns a list of computers and save the results as a computer group.</span><span class="sxs-lookup"><span data-stu-id="5d3ad-114">Create a log search that returns a list of computers and save the results as a computer group.</span></span> |
| <span data-ttu-id="5d3ad-115">Log Search API</span><span class="sxs-lookup"><span data-stu-id="5d3ad-115">Log Search API</span></span> |<span data-ttu-id="5d3ad-116">Use the Log Search API to programmatically create a computer group based on the results of a log search.</span><span class="sxs-lookup"><span data-stu-id="5d3ad-116">Use the Log Search API to programmatically create a computer group based on the results of a log search.</span></span> |
| <span data-ttu-id="5d3ad-117">Active Directory</span><span class="sxs-lookup"><span data-stu-id="5d3ad-117">Active Directory</span></span> |<span data-ttu-id="5d3ad-118">Automatically scan the group membership of any agent computers that are members of an Active Directory domain and create a group in Log Analytics for each security group.</span><span class="sxs-lookup"><span data-stu-id="5d3ad-118">Automatically scan the group membership of any agent computers that are members of an Active Directory domain and create a group in Log Analytics for each security group.</span></span> |
| <span data-ttu-id="5d3ad-119">WSUS</span><span class="sxs-lookup"><span data-stu-id="5d3ad-119">WSUS</span></span> |<span data-ttu-id="5d3ad-120">Automatically scan WSUS servers or clients for targeting groups and create a group in Log Analytics for each.</span><span class="sxs-lookup"><span data-stu-id="5d3ad-120">Automatically scan WSUS servers or clients for targeting groups and create a group in Log Analytics for each.</span></span> |

### <a name="log-search"></a><span data-ttu-id="5d3ad-121">Log search</span><span class="sxs-lookup"><span data-stu-id="5d3ad-121">Log search</span></span>
<span data-ttu-id="5d3ad-122">Computer groups created from a Log Search will contain all of the computers returned by a search query that you define.</span><span class="sxs-lookup"><span data-stu-id="5d3ad-122">Computer groups created from a Log Search will contain all of the computers returned by a search query that you define.</span></span>  <span data-ttu-id="5d3ad-123">This query is run every time the computer group is used so that any changes since the group was created will be reflected.</span><span class="sxs-lookup"><span data-stu-id="5d3ad-123">This query is run every time the computer group is used so that any changes since the group was created will be reflected.</span></span>

<span data-ttu-id="5d3ad-124">Use the following procedure to create a computer group from a log search.</span><span class="sxs-lookup"><span data-stu-id="5d3ad-124">Use the following procedure to create a computer group from a log search.</span></span>

1. <span data-ttu-id="5d3ad-125">[Create a log search](log-analytics-log-searches.md) that returns a list of computers.</span><span class="sxs-lookup"><span data-stu-id="5d3ad-125">[Create a log search](log-analytics-log-searches.md) that returns a list of computers.</span></span>  <span data-ttu-id="5d3ad-126">The search must return a distinct set of computers by using something like **Distinct Computer** or **measure count() by Computer** in the query.</span><span class="sxs-lookup"><span data-stu-id="5d3ad-126">The search must return a distinct set of computers by using something like **Distinct Computer** or **measure count() by Computer** in the query.</span></span>  
2. <span data-ttu-id="5d3ad-127">Click the **Save** button at the top of the screen.</span><span class="sxs-lookup"><span data-stu-id="5d3ad-127">Click the **Save** button at the top of the screen.</span></span>
3. <span data-ttu-id="5d3ad-128">Select **Yes** to **Save this query as a computer group:**.</span><span class="sxs-lookup"><span data-stu-id="5d3ad-128">Select **Yes** to **Save this query as a computer group:**.</span></span>
4. <span data-ttu-id="5d3ad-129">Type in a **Name** and a **Category** for the group.</span><span class="sxs-lookup"><span data-stu-id="5d3ad-129">Type in a **Name** and a **Category** for the group.</span></span>  <span data-ttu-id="5d3ad-130">If a search with the same name and category already exists, then you will be prompted to overwrite it.</span><span class="sxs-lookup"><span data-stu-id="5d3ad-130">If a search with the same name and category already exists, then you will be prompted to overwrite it.</span></span>  <span data-ttu-id="5d3ad-131">You can have multiple searches with the same name in different categories.</span><span class="sxs-lookup"><span data-stu-id="5d3ad-131">You can have multiple searches with the same name in different categories.</span></span> 

<span data-ttu-id="5d3ad-132">Following are example searches that you can save as a computer group.</span><span class="sxs-lookup"><span data-stu-id="5d3ad-132">Following are example searches that you can save as a computer group.</span></span>

    Computer="Computer1" OR Computer="Computer2" | distinct Computer 
    Computer=*srv* | measure count() by Computer

### <a name="log-search-api"></a><span data-ttu-id="5d3ad-133">Log search API</span><span class="sxs-lookup"><span data-stu-id="5d3ad-133">Log search API</span></span>
<span data-ttu-id="5d3ad-134">Computer groups created with the Log Search API are the same as searches created with a Log Search.</span><span class="sxs-lookup"><span data-stu-id="5d3ad-134">Computer groups created with the Log Search API are the same as searches created with a Log Search.</span></span>

<span data-ttu-id="5d3ad-135">For details on creating a computer group using the Log Search API see [Computer Groups in Log Analytics log search REST API](log-analytics-log-search-api.md#computer-groups).</span><span class="sxs-lookup"><span data-stu-id="5d3ad-135">For details on creating a computer group using the Log Search API see [Computer Groups in Log Analytics log search REST API](log-analytics-log-search-api.md#computer-groups).</span></span>

### <a name="active-directory"></a><span data-ttu-id="5d3ad-136">Active Directory</span><span class="sxs-lookup"><span data-stu-id="5d3ad-136">Active Directory</span></span>
<span data-ttu-id="5d3ad-137">When you configure Log Analytics to import Active Directory group memberships, it will analyze the group membership of any domain joined computers with the OMS agent.</span><span class="sxs-lookup"><span data-stu-id="5d3ad-137">When you configure Log Analytics to import Active Directory group memberships, it will analyze the group membership of any domain joined computers with the OMS agent.</span></span>  <span data-ttu-id="5d3ad-138">A computer group is created in Log Analytics for each security group in Active Directory, and each computer is added to the computer groups corresponding to the security groups they are members of.</span><span class="sxs-lookup"><span data-stu-id="5d3ad-138">A computer group is created in Log Analytics for each security group in Active Directory, and each computer is added to the computer groups corresponding to the security groups they are members of.</span></span>  <span data-ttu-id="5d3ad-139">This membership is continuously updated every 4 hours.</span><span class="sxs-lookup"><span data-stu-id="5d3ad-139">This membership is continuously updated every 4 hours.</span></span>  

<span data-ttu-id="5d3ad-140">You configure Log Analytics to import Active Directory security groups from the **Computer Groups** menu in Log Analytics **Settings**.</span><span class="sxs-lookup"><span data-stu-id="5d3ad-140">You configure Log Analytics to import Active Directory security groups from the **Computer Groups** menu in Log Analytics **Settings**.</span></span>  <span data-ttu-id="5d3ad-141">Select **Automation** and then **Import Active Directory group memberships from computers**.</span><span class="sxs-lookup"><span data-stu-id="5d3ad-141">Select **Automation** and then **Import Active Directory group memberships from computers**.</span></span>  <span data-ttu-id="5d3ad-142">There is no further configuration required.</span><span class="sxs-lookup"><span data-stu-id="5d3ad-142">There is no further configuration required.</span></span>

![Computer groups from Active Directory](https://docstestmedia1.blob.core.windows.net/azure-media/articles/log-analytics/media/log-analytics-computer-groups/configure-activedirectory.png)

<span data-ttu-id="5d3ad-144">When groups have been imported, the menu will list the number of computers with group membership detected and the number of groups imported.</span><span class="sxs-lookup"><span data-stu-id="5d3ad-144">When groups have been imported, the menu will list the number of computers with group membership detected and the number of groups imported.</span></span>  <span data-ttu-id="5d3ad-145">You can click on either of these links to return the **ComputerGroup** records with this information.</span><span class="sxs-lookup"><span data-stu-id="5d3ad-145">You can click on either of these links to return the **ComputerGroup** records with this information.</span></span>

### <a name="windows-server-update-service"></a><span data-ttu-id="5d3ad-146">Windows Server Update Service</span><span class="sxs-lookup"><span data-stu-id="5d3ad-146">Windows Server Update Service</span></span>
<span data-ttu-id="5d3ad-147">When you configure Log Analytics to import WSUS group memberships, it will analyze the targeting group membership of any computers with the OMS agent.</span><span class="sxs-lookup"><span data-stu-id="5d3ad-147">When you configure Log Analytics to import WSUS group memberships, it will analyze the targeting group membership of any computers with the OMS agent.</span></span>  <span data-ttu-id="5d3ad-148">If you are using client-side targeting, any computer that is connected to OMS and is part of any WSUS targeting groups will have its group membership imported to Log Analytics.</span><span class="sxs-lookup"><span data-stu-id="5d3ad-148">If you are using client-side targeting, any computer that is connected to OMS and is part of any WSUS targeting groups will have its group membership imported to Log Analytics.</span></span> <span data-ttu-id="5d3ad-149">If you are using server-side targeting, the OMS agent should be installed on the WSUS server in order for the group membership information to be imported to OMS.</span><span class="sxs-lookup"><span data-stu-id="5d3ad-149">If you are using server-side targeting, the OMS agent should be installed on the WSUS server in order for the group membership information to be imported to OMS.</span></span>  <span data-ttu-id="5d3ad-150">This membership is continuously updated every 4 hours.</span><span class="sxs-lookup"><span data-stu-id="5d3ad-150">This membership is continuously updated every 4 hours.</span></span> 

<span data-ttu-id="5d3ad-151">You configure Log Analytics to import Active Directory security groups from the **Computer Groups** menu in Log Analytics **Settings**.</span><span class="sxs-lookup"><span data-stu-id="5d3ad-151">You configure Log Analytics to import Active Directory security groups from the **Computer Groups** menu in Log Analytics **Settings**.</span></span>  <span data-ttu-id="5d3ad-152">Select **Active Directory** and then **Import Active Directory group memberships from computers**.</span><span class="sxs-lookup"><span data-stu-id="5d3ad-152">Select **Active Directory** and then **Import Active Directory group memberships from computers**.</span></span>  <span data-ttu-id="5d3ad-153">There is no further configuration required.</span><span class="sxs-lookup"><span data-stu-id="5d3ad-153">There is no further configuration required.</span></span>

![Computer groups from Active Directory](https://docstestmedia1.blob.core.windows.net/azure-media/articles/log-analytics/media/log-analytics-computer-groups/configure-wsus.png)

<span data-ttu-id="5d3ad-155">When groups have been imported, the menu will list the number of computers with group membership detected and the number of groups imported.</span><span class="sxs-lookup"><span data-stu-id="5d3ad-155">When groups have been imported, the menu will list the number of computers with group membership detected and the number of groups imported.</span></span>  <span data-ttu-id="5d3ad-156">You can click on either of these links to return the **ComputerGroup** records with this information.</span><span class="sxs-lookup"><span data-stu-id="5d3ad-156">You can click on either of these links to return the **ComputerGroup** records with this information.</span></span>

## <a name="managing-computer-groups"></a><span data-ttu-id="5d3ad-157">Managing computer groups</span><span class="sxs-lookup"><span data-stu-id="5d3ad-157">Managing computer groups</span></span>
<span data-ttu-id="5d3ad-158">You can view computer groups that were created from a log search or the Log Search API from the **Computer Groups** menu in Log Analytics **Settings**.</span><span class="sxs-lookup"><span data-stu-id="5d3ad-158">You can view computer groups that were created from a log search or the Log Search API from the **Computer Groups** menu in Log Analytics **Settings**.</span></span>  <span data-ttu-id="5d3ad-159">Click the **x** in the **Remove** column to delete the computer group.</span><span class="sxs-lookup"><span data-stu-id="5d3ad-159">Click the **x** in the **Remove** column to delete the computer group.</span></span>  <span data-ttu-id="5d3ad-160">Click the **View members** icon for a group to run the group's log search that returns its members.</span><span class="sxs-lookup"><span data-stu-id="5d3ad-160">Click the **View members** icon for a group to run the group's log search that returns its members.</span></span> 

![Saved computer groups](https://docstestmedia1.blob.core.windows.net/azure-media/articles/log-analytics/media/log-analytics-computer-groups/configure-saved.png)

<span data-ttu-id="5d3ad-162">To modify the group, create a new group with the same **Category** and **Name** to overwrite the original group.</span><span class="sxs-lookup"><span data-stu-id="5d3ad-162">To modify the group, create a new group with the same **Category** and **Name** to overwrite the original group.</span></span>

## <a name="using-a-computer-group-in-a-log-search"></a><span data-ttu-id="5d3ad-163">Using a computer group in a log search</span><span class="sxs-lookup"><span data-stu-id="5d3ad-163">Using a computer group in a log search</span></span>
<span data-ttu-id="5d3ad-164">You use the following syntax to refer to a computer group in a log search.</span><span class="sxs-lookup"><span data-stu-id="5d3ad-164">You use the following syntax to refer to a computer group in a log search.</span></span>  <span data-ttu-id="5d3ad-165">Specifying the **Category** is optional and only required if you have computer groups with the same name in different categories.</span><span class="sxs-lookup"><span data-stu-id="5d3ad-165">Specifying the **Category** is optional and only required if you have computer groups with the same name in different categories.</span></span> 

    $ComputerGroups[Category: Name]

<span data-ttu-id="5d3ad-166">When a search is run, the members of any computer groups included in the search are first resolved.</span><span class="sxs-lookup"><span data-stu-id="5d3ad-166">When a search is run, the members of any computer groups included in the search are first resolved.</span></span>  <span data-ttu-id="5d3ad-167">If the group is based on a log search, then that search is run to return the members of the group before performing the top level log search.</span><span class="sxs-lookup"><span data-stu-id="5d3ad-167">If the group is based on a log search, then that search is run to return the members of the group before performing the top level log search.</span></span>

<span data-ttu-id="5d3ad-168">Computer groups are typically used with the **IN** clause in the log search as in the following example.</span><span class="sxs-lookup"><span data-stu-id="5d3ad-168">Computer groups are typically used with the **IN** clause in the log search as in the following example.</span></span>

    Type=UpdateSummary Computer IN $ComputerGroups[My Computer Group]

## <a name="computer-group-records"></a><span data-ttu-id="5d3ad-169">Computer group records</span><span class="sxs-lookup"><span data-stu-id="5d3ad-169">Computer group records</span></span>
<span data-ttu-id="5d3ad-170">A record is created in the OMS repository for each computer group membership created from Active Directory or WSUS.</span><span class="sxs-lookup"><span data-stu-id="5d3ad-170">A record is created in the OMS repository for each computer group membership created from Active Directory or WSUS.</span></span>  <span data-ttu-id="5d3ad-171">These records have a type of **ComputerGroup** and have the properties in the following table.</span><span class="sxs-lookup"><span data-stu-id="5d3ad-171">These records have a type of **ComputerGroup** and have the properties in the following table.</span></span>  <span data-ttu-id="5d3ad-172">Records are not created for computer groups based on log searches.</span><span class="sxs-lookup"><span data-stu-id="5d3ad-172">Records are not created for computer groups based on log searches.</span></span>

| <span data-ttu-id="5d3ad-173">Property</span><span class="sxs-lookup"><span data-stu-id="5d3ad-173">Property</span></span> | <span data-ttu-id="5d3ad-174">Description</span><span class="sxs-lookup"><span data-stu-id="5d3ad-174">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="5d3ad-175">Type</span><span class="sxs-lookup"><span data-stu-id="5d3ad-175">Type</span></span> |<span data-ttu-id="5d3ad-176">*ComputerGroup*</span><span class="sxs-lookup"><span data-stu-id="5d3ad-176">*ComputerGroup*</span></span> |
| <span data-ttu-id="5d3ad-177">SourceSystem</span><span class="sxs-lookup"><span data-stu-id="5d3ad-177">SourceSystem</span></span> |<span data-ttu-id="5d3ad-178">*SourceSystem*</span><span class="sxs-lookup"><span data-stu-id="5d3ad-178">*SourceSystem*</span></span> |
| <span data-ttu-id="5d3ad-179">Computer</span><span class="sxs-lookup"><span data-stu-id="5d3ad-179">Computer</span></span> |<span data-ttu-id="5d3ad-180">Name of the member computer.</span><span class="sxs-lookup"><span data-stu-id="5d3ad-180">Name of the member computer.</span></span> |
| <span data-ttu-id="5d3ad-181">Group</span><span class="sxs-lookup"><span data-stu-id="5d3ad-181">Group</span></span> |<span data-ttu-id="5d3ad-182">Name of the group.</span><span class="sxs-lookup"><span data-stu-id="5d3ad-182">Name of the group.</span></span> |
| <span data-ttu-id="5d3ad-183">GroupFullName</span><span class="sxs-lookup"><span data-stu-id="5d3ad-183">GroupFullName</span></span> |<span data-ttu-id="5d3ad-184">Full path to the group including the source and source name.</span><span class="sxs-lookup"><span data-stu-id="5d3ad-184">Full path to the group including the source and source name.</span></span> |
| <span data-ttu-id="5d3ad-185">GroupSource</span><span class="sxs-lookup"><span data-stu-id="5d3ad-185">GroupSource</span></span> |<span data-ttu-id="5d3ad-186">Source that group was collected from.</span><span class="sxs-lookup"><span data-stu-id="5d3ad-186">Source that group was collected from.</span></span> <br><br><span data-ttu-id="5d3ad-187">ActiveDirectory</span><span class="sxs-lookup"><span data-stu-id="5d3ad-187">ActiveDirectory</span></span><br><span data-ttu-id="5d3ad-188">WSUS</span><span class="sxs-lookup"><span data-stu-id="5d3ad-188">WSUS</span></span><br><span data-ttu-id="5d3ad-189">WSUSClientTargeting</span><span class="sxs-lookup"><span data-stu-id="5d3ad-189">WSUSClientTargeting</span></span> |
| <span data-ttu-id="5d3ad-190">GroupSourceName</span><span class="sxs-lookup"><span data-stu-id="5d3ad-190">GroupSourceName</span></span> |<span data-ttu-id="5d3ad-191">Name of the source that the groups was collected from.</span><span class="sxs-lookup"><span data-stu-id="5d3ad-191">Name of the source that the groups was collected from.</span></span>  <span data-ttu-id="5d3ad-192">For Active Directory, this is the domain name.</span><span class="sxs-lookup"><span data-stu-id="5d3ad-192">For Active Directory, this is the domain name.</span></span> |
| <span data-ttu-id="5d3ad-193">ManagementGroupName</span><span class="sxs-lookup"><span data-stu-id="5d3ad-193">ManagementGroupName</span></span> |<span data-ttu-id="5d3ad-194">Name of the management group for SCOM agents.</span><span class="sxs-lookup"><span data-stu-id="5d3ad-194">Name of the management group for SCOM agents.</span></span>  <span data-ttu-id="5d3ad-195">For other agents, this is AOI-\<workspace ID\></span><span class="sxs-lookup"><span data-stu-id="5d3ad-195">For other agents, this is AOI-\<workspace ID\></span></span> |
| <span data-ttu-id="5d3ad-196">TimeGenerated</span><span class="sxs-lookup"><span data-stu-id="5d3ad-196">TimeGenerated</span></span> |<span data-ttu-id="5d3ad-197">Date and time the computer group was created or updated.</span><span class="sxs-lookup"><span data-stu-id="5d3ad-197">Date and time the computer group was created or updated.</span></span> |

## <a name="next-steps"></a><span data-ttu-id="5d3ad-198">Next steps</span><span class="sxs-lookup"><span data-stu-id="5d3ad-198">Next steps</span></span>
* <span data-ttu-id="5d3ad-199">Learn about [log searches](log-analytics-log-searches.md) to analyze the data collected from data sources and solutions.</span><span class="sxs-lookup"><span data-stu-id="5d3ad-199">Learn about [log searches](log-analytics-log-searches.md) to analyze the data collected from data sources and solutions.</span></span>  




