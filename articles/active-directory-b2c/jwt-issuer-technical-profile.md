---
title: Define a technical profile for a JWT token issuer in a custom policy in Azure Active Directory B2C | Microsoft Docs
description: Define a technical profile for a JWT token issuer in a custom policy in Azure Active Directory B2C.
services: active-directory-b2c
author: davidmu1
manager: mtillman
ms.service: active-directory
ms.workload: identity
ms.topic: reference
ms.date: 09/10/2018
ms.author: davidmu
ms.component: B2C
ms.openlocfilehash: cb004745cfbc6af185a06c4787fb34326eccc69a
ms.sourcegitcommit: d1451406a010fd3aa854dc8e5b77dc5537d8050e
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 09/13/2018
ms.locfileid: "44870039"
---
# <a name="define-a-technical-profile-for-a-jwt-token-issuer-in-an-azure-active-directory-b2c-custom-policy"></a><span data-ttu-id="509dc-103">Define a technical profile for a JWT token issuer in an Azure Active Directory B2C custom policy</span><span class="sxs-lookup"><span data-stu-id="509dc-103">Define a technical profile for a JWT token issuer in an Azure Active Directory B2C custom policy</span></span>

[!INCLUDE [active-directory-b2c-advanced-audience-warning](../../includes/active-directory-b2c-advanced-audience-warning.md)]

<span data-ttu-id="509dc-104">Azure Active Directory (Azure AD) B2C emits several types of security tokens as it processes each authentication flow.</span><span class="sxs-lookup"><span data-stu-id="509dc-104">Azure Active Directory (Azure AD) B2C emits several types of security tokens as it processes each authentication flow.</span></span> <span data-ttu-id="509dc-105">A technical profile for a JWT token issuer emits a JWT token that is returned back to the relying party application.</span><span class="sxs-lookup"><span data-stu-id="509dc-105">A technical profile for a JWT token issuer emits a JWT token that is returned back to the relying party application.</span></span> <span data-ttu-id="509dc-106">Usually this technical profile is the last orchestration step in the user journey.</span><span class="sxs-lookup"><span data-stu-id="509dc-106">Usually this technical profile is the last orchestration step in the user journey.</span></span>

## <a name="protocol"></a><span data-ttu-id="509dc-107">Protocol</span><span class="sxs-lookup"><span data-stu-id="509dc-107">Protocol</span></span>

<span data-ttu-id="509dc-108">The **Name** attribute of the **Protocol** element needs to be set to `None`.</span><span class="sxs-lookup"><span data-stu-id="509dc-108">The **Name** attribute of the **Protocol** element needs to be set to `None`.</span></span> <span data-ttu-id="509dc-109">Set the **OutputTokenFormat** element to `JWT`.</span><span class="sxs-lookup"><span data-stu-id="509dc-109">Set the **OutputTokenFormat** element to `JWT`.</span></span>

<span data-ttu-id="509dc-110">The following example shows a technical profile for `JwtIssuer`:</span><span class="sxs-lookup"><span data-stu-id="509dc-110">The following example shows a technical profile for `JwtIssuer`:</span></span>

```XML
<TechnicalProfile Id="JwtIssuer">
  <DisplayName>JWT Issuer</DisplayName>
  <Protocol Name="None" />
  <OutputTokenFormat>JWT</OutputTokenFormat>
  ...
</TechnicalProfile>
```
 
## <a name="input-output-and-persist-claims"></a><span data-ttu-id="509dc-111">Input, output, and persist claims</span><span class="sxs-lookup"><span data-stu-id="509dc-111">Input, output, and persist claims</span></span>

<span data-ttu-id="509dc-112">The **InputClaims**, **OutputClaims**, and **PersistClaims** elements are empty or absent.</span><span class="sxs-lookup"><span data-stu-id="509dc-112">The **InputClaims**, **OutputClaims**, and **PersistClaims** elements are empty or absent.</span></span> <span data-ttu-id="509dc-113">The **InutputClaimsTransformations** and **OutputClaimsTransformations** elements are also absent.</span><span class="sxs-lookup"><span data-stu-id="509dc-113">The **InutputClaimsTransformations** and **OutputClaimsTransformations** elements are also absent.</span></span>

## <a name="metadata"></a><span data-ttu-id="509dc-114">Metadata</span><span class="sxs-lookup"><span data-stu-id="509dc-114">Metadata</span></span>

| <span data-ttu-id="509dc-115">Attribute</span><span class="sxs-lookup"><span data-stu-id="509dc-115">Attribute</span></span> | <span data-ttu-id="509dc-116">Required</span><span class="sxs-lookup"><span data-stu-id="509dc-116">Required</span></span> | <span data-ttu-id="509dc-117">Description</span><span class="sxs-lookup"><span data-stu-id="509dc-117">Description</span></span> |
| --------- | -------- | ----------- |
| <span data-ttu-id="509dc-118">issuer_refresh_token_user_identity_claim_type</span><span class="sxs-lookup"><span data-stu-id="509dc-118">issuer_refresh_token_user_identity_claim_type</span></span> | <span data-ttu-id="509dc-119">Yes</span><span class="sxs-lookup"><span data-stu-id="509dc-119">Yes</span></span> | <span data-ttu-id="509dc-120">The claim that should be used as the user identity claim within the OAuth2 authorization codes and refresh tokens.</span><span class="sxs-lookup"><span data-stu-id="509dc-120">The claim that should be used as the user identity claim within the OAuth2 authorization codes and refresh tokens.</span></span> <span data-ttu-id="509dc-121">By default, you should set it to `objectId`, unless you specify a different SubjectNamingInfo claim type.</span><span class="sxs-lookup"><span data-stu-id="509dc-121">By default, you should set it to `objectId`, unless you specify a different SubjectNamingInfo claim type.</span></span> | 
| <span data-ttu-id="509dc-122">SendTokenResponseBodyWithJsonNumbers</span><span class="sxs-lookup"><span data-stu-id="509dc-122">SendTokenResponseBodyWithJsonNumbers</span></span> | <span data-ttu-id="509dc-123">No</span><span class="sxs-lookup"><span data-stu-id="509dc-123">No</span></span> | <span data-ttu-id="509dc-124">Always set to `true`.</span><span class="sxs-lookup"><span data-stu-id="509dc-124">Always set to `true`.</span></span> <span data-ttu-id="509dc-125">For legacy format where numeric values are given as strings instead of JSON numbers, set to `false`.</span><span class="sxs-lookup"><span data-stu-id="509dc-125">For legacy format where numeric values are given as strings instead of JSON numbers, set to `false`.</span></span> <span data-ttu-id="509dc-126">This attribute is needed for clients that have taken a dependency on an earlier implementation that returned such properties as strings.</span><span class="sxs-lookup"><span data-stu-id="509dc-126">This attribute is needed for clients that have taken a dependency on an earlier implementation that returned such properties as strings.</span></span> | 
| <span data-ttu-id="509dc-127">token_lifetime_secs</span><span class="sxs-lookup"><span data-stu-id="509dc-127">token_lifetime_secs</span></span> | <span data-ttu-id="509dc-128">No</span><span class="sxs-lookup"><span data-stu-id="509dc-128">No</span></span> | <span data-ttu-id="509dc-129">Access token lifetimes.</span><span class="sxs-lookup"><span data-stu-id="509dc-129">Access token lifetimes.</span></span> <span data-ttu-id="509dc-130">The lifetime of the OAuth 2.0 bearer token used to gain access to a protected resource.</span><span class="sxs-lookup"><span data-stu-id="509dc-130">The lifetime of the OAuth 2.0 bearer token used to gain access to a protected resource.</span></span> <span data-ttu-id="509dc-131">The default is 3,600 seconds (1 hour).</span><span class="sxs-lookup"><span data-stu-id="509dc-131">The default is 3,600 seconds (1 hour).</span></span> <span data-ttu-id="509dc-132">The minimum (inclusive) is 300 seconds (5 minutes).</span><span class="sxs-lookup"><span data-stu-id="509dc-132">The minimum (inclusive) is 300 seconds (5 minutes).</span></span> <span data-ttu-id="509dc-133">The maximum (inclusive) is 86,400 seconds (24 hours).</span><span class="sxs-lookup"><span data-stu-id="509dc-133">The maximum (inclusive) is 86,400 seconds (24 hours).</span></span> | 
| <span data-ttu-id="509dc-134">id_token_lifetime_secs</span><span class="sxs-lookup"><span data-stu-id="509dc-134">id_token_lifetime_secs</span></span> | <span data-ttu-id="509dc-135">No</span><span class="sxs-lookup"><span data-stu-id="509dc-135">No</span></span> | <span data-ttu-id="509dc-136">ID token lifetimes.</span><span class="sxs-lookup"><span data-stu-id="509dc-136">ID token lifetimes.</span></span> <span data-ttu-id="509dc-137">The default is 3,600 seconds (1 hour).</span><span class="sxs-lookup"><span data-stu-id="509dc-137">The default is 3,600 seconds (1 hour).</span></span> <span data-ttu-id="509dc-138">The minimum (inclusive) is 300 seconds (5 minutes).</span><span class="sxs-lookup"><span data-stu-id="509dc-138">The minimum (inclusive) is 300 seconds (5 minutes).</span></span> <span data-ttu-id="509dc-139">The maximum (inclusive) is seconds 86,400 (24 hours).</span><span class="sxs-lookup"><span data-stu-id="509dc-139">The maximum (inclusive) is seconds 86,400 (24 hours).</span></span> | 
| <span data-ttu-id="509dc-140">refresh_token_lifetime_secs</span><span class="sxs-lookup"><span data-stu-id="509dc-140">refresh_token_lifetime_secs</span></span> | <span data-ttu-id="509dc-141">No</span><span class="sxs-lookup"><span data-stu-id="509dc-141">No</span></span> | <span data-ttu-id="509dc-142">Refresh token lifetimes.</span><span class="sxs-lookup"><span data-stu-id="509dc-142">Refresh token lifetimes.</span></span> <span data-ttu-id="509dc-143">The maximum time period before which a refresh token can be used to acquire a new access token, if your application had been granted the offline_access scope.</span><span class="sxs-lookup"><span data-stu-id="509dc-143">The maximum time period before which a refresh token can be used to acquire a new access token, if your application had been granted the offline_access scope.</span></span> <span data-ttu-id="509dc-144">The default is 120,9600 seconds (14 days).</span><span class="sxs-lookup"><span data-stu-id="509dc-144">The default is 120,9600 seconds (14 days).</span></span> <span data-ttu-id="509dc-145">The minimum (inclusive) is 86,400 seconds (24 hours).</span><span class="sxs-lookup"><span data-stu-id="509dc-145">The minimum (inclusive) is 86,400 seconds (24 hours).</span></span> <span data-ttu-id="509dc-146">The maximum (inclusive) is 7,776,000 seconds (90 days).</span><span class="sxs-lookup"><span data-stu-id="509dc-146">The maximum (inclusive) is 7,776,000 seconds (90 days).</span></span> | 
| <span data-ttu-id="509dc-147">rolling_refresh_token_lifetime_secs</span><span class="sxs-lookup"><span data-stu-id="509dc-147">rolling_refresh_token_lifetime_secs</span></span> | <span data-ttu-id="509dc-148">No</span><span class="sxs-lookup"><span data-stu-id="509dc-148">No</span></span> | <span data-ttu-id="509dc-149">Refresh token sliding window lifetime.</span><span class="sxs-lookup"><span data-stu-id="509dc-149">Refresh token sliding window lifetime.</span></span> <span data-ttu-id="509dc-150">After this time period elapses the user is forced to reauthenticate, irrespective of the validity period of the most recent refresh token acquired by the application.</span><span class="sxs-lookup"><span data-stu-id="509dc-150">After this time period elapses the user is forced to reauthenticate, irrespective of the validity period of the most recent refresh token acquired by the application.</span></span> <span data-ttu-id="509dc-151">If you don't want to enforce a sliding window lifetime, set the value of allow_infinite_rolling_refresh_token to `true`.</span><span class="sxs-lookup"><span data-stu-id="509dc-151">If you don't want to enforce a sliding window lifetime, set the value of allow_infinite_rolling_refresh_token to `true`.</span></span> <span data-ttu-id="509dc-152">The default is 7,776,000 seconds (90 days).</span><span class="sxs-lookup"><span data-stu-id="509dc-152">The default is 7,776,000 seconds (90 days).</span></span> <span data-ttu-id="509dc-153">The minimum (inclusive) is 86,400 seconds (24 hours).</span><span class="sxs-lookup"><span data-stu-id="509dc-153">The minimum (inclusive) is 86,400 seconds (24 hours).</span></span> <span data-ttu-id="509dc-154">The maximum (inclusive) is 31,536,000 seconds (365 days).</span><span class="sxs-lookup"><span data-stu-id="509dc-154">The maximum (inclusive) is 31,536,000 seconds (365 days).</span></span> | 
| <span data-ttu-id="509dc-155">rolling_refresh_token_lifetime_secs</span><span class="sxs-lookup"><span data-stu-id="509dc-155">rolling_refresh_token_lifetime_secs</span></span> | <span data-ttu-id="509dc-156">No</span><span class="sxs-lookup"><span data-stu-id="509dc-156">No</span></span> | <span data-ttu-id="509dc-157">If set to `true`, the refresh token sliding window lifetime never expires.</span><span class="sxs-lookup"><span data-stu-id="509dc-157">If set to `true`, the refresh token sliding window lifetime never expires.</span></span> |
| <span data-ttu-id="509dc-158">IssuanceClaimPattern</span><span class="sxs-lookup"><span data-stu-id="509dc-158">IssuanceClaimPattern</span></span> | <span data-ttu-id="509dc-159">Yes</span><span class="sxs-lookup"><span data-stu-id="509dc-159">Yes</span></span> | <span data-ttu-id="509dc-160">Controls the Issuer (iss) claim.</span><span class="sxs-lookup"><span data-stu-id="509dc-160">Controls the Issuer (iss) claim.</span></span> <span data-ttu-id="509dc-161">One of the values:</span><span class="sxs-lookup"><span data-stu-id="509dc-161">One of the values:</span></span><ul><li><span data-ttu-id="509dc-162">AuthorityAndTenantGuid - The iss claim includes your domain name, such as `login.microsoftonline` or `tenant-name.b2clogin.com`, and your tenant identifier https://login.microsoftonline.com/00000000-0000-0000-0000-000000000000/v2.0/</span><span class="sxs-lookup"><span data-stu-id="509dc-162">AuthorityAndTenantGuid - The iss claim includes your domain name, such as `login.microsoftonline` or `tenant-name.b2clogin.com`, and your tenant identifier https://login.microsoftonline.com/00000000-0000-0000-0000-000000000000/v2.0/</span></span></li><li><span data-ttu-id="509dc-163">AuthorityWithTfp - The iss claim includes your domain name, such as `login.microsoftonline` or `tenant-name.b2clogin.com`, your tenant identifier and your relying party policy name.</span><span class="sxs-lookup"><span data-stu-id="509dc-163">AuthorityWithTfp - The iss claim includes your domain name, such as `login.microsoftonline` or `tenant-name.b2clogin.com`, your tenant identifier and your relying party policy name.</span></span> <span data-ttu-id="509dc-164">https://login.microsoftonline.com/tfp/00000000-0000-0000-0000-000000000000/b2c_1a_tp_sign-up-or-sign-in/v2.0/</span><span class="sxs-lookup"><span data-stu-id="509dc-164">https://login.microsoftonline.com/tfp/00000000-0000-0000-0000-000000000000/b2c_1a_tp_sign-up-or-sign-in/v2.0/</span></span></li></ul> | 
| <span data-ttu-id="509dc-165">AuthenticationContextReferenceClaimPattern</span><span class="sxs-lookup"><span data-stu-id="509dc-165">AuthenticationContextReferenceClaimPattern</span></span> | <span data-ttu-id="509dc-166">No</span><span class="sxs-lookup"><span data-stu-id="509dc-166">No</span></span> | <span data-ttu-id="509dc-167">Controls the `acr` claim value.</span><span class="sxs-lookup"><span data-stu-id="509dc-167">Controls the `acr` claim value.</span></span><ul><li><span data-ttu-id="509dc-168">None - Azure AD B2C doesn't issue the acr claim</span><span class="sxs-lookup"><span data-stu-id="509dc-168">None - Azure AD B2C doesn't issue the acr claim</span></span></li><li><span data-ttu-id="509dc-169">PolicyId - the `acr` claim contains the policy name</span><span class="sxs-lookup"><span data-stu-id="509dc-169">PolicyId - the `acr` claim contains the policy name</span></span></li></ul><span data-ttu-id="509dc-170">The options for setting this value are TFP (trust framework policy) and ACR (authentication context reference).</span><span class="sxs-lookup"><span data-stu-id="509dc-170">The options for setting this value are TFP (trust framework policy) and ACR (authentication context reference).</span></span> <span data-ttu-id="509dc-171">It is recommended setting this value to TFP, to set the value, ensure the `<Item>` with the `Key="AuthenticationContextReferenceClaimPattern"` exists and the value is `None`.</span><span class="sxs-lookup"><span data-stu-id="509dc-171">It is recommended setting this value to TFP, to set the value, ensure the `<Item>` with the `Key="AuthenticationContextReferenceClaimPattern"` exists and the value is `None`.</span></span> <span data-ttu-id="509dc-172">In your relying party policy, add <OutputClaims> item, add this element `<OutputClaim ClaimTypeReferenceId="trustFrameworkPolicy" Required="true" DefaultValue="{policy}" />`.</span><span class="sxs-lookup"><span data-stu-id="509dc-172">In your relying party policy, add <OutputClaims> item, add this element `<OutputClaim ClaimTypeReferenceId="trustFrameworkPolicy" Required="true" DefaultValue="{policy}" />`.</span></span> <span data-ttu-id="509dc-173">Also make sure your policy contains the claim type `<ClaimType Id="trustFrameworkPolicy"> <DisplayName>trustFrameworkPolicy</DisplayName>     <DataType>string</DataType> </ClaimType>`</span><span class="sxs-lookup"><span data-stu-id="509dc-173">Also make sure your policy contains the claim type `<ClaimType Id="trustFrameworkPolicy"> <DisplayName>trustFrameworkPolicy</DisplayName>     <DataType>string</DataType> </ClaimType>`</span></span> | 

## <a name="cryptographic-keys"></a><span data-ttu-id="509dc-174">Cryptographic keys</span><span class="sxs-lookup"><span data-stu-id="509dc-174">Cryptographic keys</span></span>

<span data-ttu-id="509dc-175">The CryptographicKeys element contains the following attributes:</span><span class="sxs-lookup"><span data-stu-id="509dc-175">The CryptographicKeys element contains the following attributes:</span></span>

| <span data-ttu-id="509dc-176">Attribute</span><span class="sxs-lookup"><span data-stu-id="509dc-176">Attribute</span></span> | <span data-ttu-id="509dc-177">Required</span><span class="sxs-lookup"><span data-stu-id="509dc-177">Required</span></span> | <span data-ttu-id="509dc-178">Description</span><span class="sxs-lookup"><span data-stu-id="509dc-178">Description</span></span> |
| --------- | -------- | ----------- |
| <span data-ttu-id="509dc-179">issuer_secret</span><span class="sxs-lookup"><span data-stu-id="509dc-179">issuer_secret</span></span> | <span data-ttu-id="509dc-180">Yes</span><span class="sxs-lookup"><span data-stu-id="509dc-180">Yes</span></span> | <span data-ttu-id="509dc-181">The X509 certificate (RSA key set) to use to sign the JWT token.</span><span class="sxs-lookup"><span data-stu-id="509dc-181">The X509 certificate (RSA key set) to use to sign the JWT token.</span></span> <span data-ttu-id="509dc-182">This is the `B2C_1A_TokenSigningKeyContainer` key you cofigured in [Get started with custom policies](active-directory-b2c-get-started-custom.md).</span><span class="sxs-lookup"><span data-stu-id="509dc-182">This is the `B2C_1A_TokenSigningKeyContainer` key you cofigured in [Get started with custom policies](active-directory-b2c-get-started-custom.md).</span></span> | 
| <span data-ttu-id="509dc-183">issuer_refresh_token_key</span><span class="sxs-lookup"><span data-stu-id="509dc-183">issuer_refresh_token_key</span></span> | <span data-ttu-id="509dc-184">Yes</span><span class="sxs-lookup"><span data-stu-id="509dc-184">Yes</span></span> | <span data-ttu-id="509dc-185">The X509 certificate (RSA key set) to use to encrypt the refresh token.</span><span class="sxs-lookup"><span data-stu-id="509dc-185">The X509 certificate (RSA key set) to use to encrypt the refresh token.</span></span> <span data-ttu-id="509dc-186">You configured the `B2C_1A_TokenEncryptionKeyContainer` key in [Get started with custom policies](active-directory-b2c-get-started-custom.md)</span><span class="sxs-lookup"><span data-stu-id="509dc-186">You configured the `B2C_1A_TokenEncryptionKeyContainer` key in [Get started with custom policies](active-directory-b2c-get-started-custom.md)</span></span> |














