---
title: Azure Active Directory B2C custom policies | Microsoft Docs
description: Learn about Azure Active Directory B2C custom policies.
services: active-directory-b2c
author: davidmu1
manager: mtillman
ms.service: active-directory
ms.workload: identity
ms.topic: conceptual
ms.date: 09/04/2018
ms.author: davidmu
ms.component: B2C
ms.openlocfilehash: 5634c14ee2b25600d66ff0f2c7385b2aaa9f1810
ms.sourcegitcommit: d1451406a010fd3aa854dc8e5b77dc5537d8050e
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 09/13/2018
ms.locfileid: "44857416"
---
# <a name="custom-policies-in-azure-active-directory-b2c"></a><span data-ttu-id="b4834-103">Custom policies in Azure Active Directory B2C</span><span class="sxs-lookup"><span data-stu-id="b4834-103">Custom policies in Azure Active Directory B2C</span></span>

[!INCLUDE [active-directory-b2c-advanced-audience-warning](../../includes/active-directory-b2c-advanced-audience-warning.md)]

<span data-ttu-id="b4834-104">Custom policies are configuration files that define the behavior of your Azure Active Directory (Azure AD) B2C tenant.</span><span class="sxs-lookup"><span data-stu-id="b4834-104">Custom policies are configuration files that define the behavior of your Azure Active Directory (Azure AD) B2C tenant.</span></span> <span data-ttu-id="b4834-105">Built-in policies are predefined in the Azure AD B2C portal for the most common identity tasks.</span><span class="sxs-lookup"><span data-stu-id="b4834-105">Built-in policies are predefined in the Azure AD B2C portal for the most common identity tasks.</span></span> <span data-ttu-id="b4834-106">Custom policies can be fully edited by an identity developer to complete many different tasks.</span><span class="sxs-lookup"><span data-stu-id="b4834-106">Custom policies can be fully edited by an identity developer to complete many different tasks.</span></span>

## <a name="comparing-built-in-policies-and-custom-policies"></a><span data-ttu-id="b4834-107">Comparing built-in policies and custom policies</span><span class="sxs-lookup"><span data-stu-id="b4834-107">Comparing built-in policies and custom policies</span></span>

| | <span data-ttu-id="b4834-108">Built-in policies</span><span class="sxs-lookup"><span data-stu-id="b4834-108">Built-in policies</span></span> | <span data-ttu-id="b4834-109">Custom policies</span><span class="sxs-lookup"><span data-stu-id="b4834-109">Custom policies</span></span> |
|-|-------------------|-----------------|
| <span data-ttu-id="b4834-110">Target users</span><span class="sxs-lookup"><span data-stu-id="b4834-110">Target users</span></span> | <span data-ttu-id="b4834-111">All application developers with or without identity expertise.</span><span class="sxs-lookup"><span data-stu-id="b4834-111">All application developers with or without identity expertise.</span></span> | <span data-ttu-id="b4834-112">Identity pros, systems integrators, consultants, and in-house identity teams.</span><span class="sxs-lookup"><span data-stu-id="b4834-112">Identity pros, systems integrators, consultants, and in-house identity teams.</span></span> <span data-ttu-id="b4834-113">They are comfortable with OpenIDConnect flows and understand identity providers and claims-based authentication.</span><span class="sxs-lookup"><span data-stu-id="b4834-113">They are comfortable with OpenIDConnect flows and understand identity providers and claims-based authentication.</span></span> |
| <span data-ttu-id="b4834-114">Configuration method</span><span class="sxs-lookup"><span data-stu-id="b4834-114">Configuration method</span></span> | <span data-ttu-id="b4834-115">Azure portal with a user-friendly user-interface (UI).</span><span class="sxs-lookup"><span data-stu-id="b4834-115">Azure portal with a user-friendly user-interface (UI).</span></span> | <span data-ttu-id="b4834-116">Directly editing XML files and then uploading to the Azure portal.</span><span class="sxs-lookup"><span data-stu-id="b4834-116">Directly editing XML files and then uploading to the Azure portal.</span></span> |
| <span data-ttu-id="b4834-117">UI customization</span><span class="sxs-lookup"><span data-stu-id="b4834-117">UI customization</span></span> | <span data-ttu-id="b4834-118">Full UI customization including HTML and CSS.</span><span class="sxs-lookup"><span data-stu-id="b4834-118">Full UI customization including HTML and CSS.</span></span><br><br><span data-ttu-id="b4834-119">Multilanguage support with Custom strings.</span><span class="sxs-lookup"><span data-stu-id="b4834-119">Multilanguage support with Custom strings.</span></span> | <span data-ttu-id="b4834-120">Same</span><span class="sxs-lookup"><span data-stu-id="b4834-120">Same</span></span> |
| <span data-ttu-id="b4834-121">Attribute customization</span><span class="sxs-lookup"><span data-stu-id="b4834-121">Attribute customization</span></span> | <span data-ttu-id="b4834-122">Standard and custom attributes.</span><span class="sxs-lookup"><span data-stu-id="b4834-122">Standard and custom attributes.</span></span> | <span data-ttu-id="b4834-123">Same</span><span class="sxs-lookup"><span data-stu-id="b4834-123">Same</span></span> |
| <span data-ttu-id="b4834-124">Token and session management</span><span class="sxs-lookup"><span data-stu-id="b4834-124">Token and session management</span></span> | <span data-ttu-id="b4834-125">Custom token and multiple session options.</span><span class="sxs-lookup"><span data-stu-id="b4834-125">Custom token and multiple session options.</span></span> | <span data-ttu-id="b4834-126">Same</span><span class="sxs-lookup"><span data-stu-id="b4834-126">Same</span></span> |
| <span data-ttu-id="b4834-127">Identity Providers</span><span class="sxs-lookup"><span data-stu-id="b4834-127">Identity Providers</span></span> | <span data-ttu-id="b4834-128">Predefined local or social provider.</span><span class="sxs-lookup"><span data-stu-id="b4834-128">Predefined local or social provider.</span></span> | <span data-ttu-id="b4834-129">Standards-based OIDC, OAUTH, and SAML.</span><span class="sxs-lookup"><span data-stu-id="b4834-129">Standards-based OIDC, OAUTH, and SAML.</span></span> |
| <span data-ttu-id="b4834-130">Identity Tasks</span><span class="sxs-lookup"><span data-stu-id="b4834-130">Identity Tasks</span></span> | <span data-ttu-id="b4834-131">Sign-up or sign-in with local or many social accounts.</span><span class="sxs-lookup"><span data-stu-id="b4834-131">Sign-up or sign-in with local or many social accounts.</span></span><br><br><span data-ttu-id="b4834-132">Self-service password reset.</span><span class="sxs-lookup"><span data-stu-id="b4834-132">Self-service password reset.</span></span><br><br><span data-ttu-id="b4834-133">Profile edit.</span><span class="sxs-lookup"><span data-stu-id="b4834-133">Profile edit.</span></span><br><br><span data-ttu-id="b4834-134">Multi-Factor Authentication.</span><span class="sxs-lookup"><span data-stu-id="b4834-134">Multi-Factor Authentication.</span></span><br><br><span data-ttu-id="b4834-135">Customize tokens and sessions.</span><span class="sxs-lookup"><span data-stu-id="b4834-135">Customize tokens and sessions.</span></span><br><br><span data-ttu-id="b4834-136">Access token flows.</span><span class="sxs-lookup"><span data-stu-id="b4834-136">Access token flows.</span></span> | <span data-ttu-id="b4834-137">Complete the same tasks as built-in policies using custom identity providers or use custom scopes.</span><span class="sxs-lookup"><span data-stu-id="b4834-137">Complete the same tasks as built-in policies using custom identity providers or use custom scopes.</span></span><br><br><span data-ttu-id="b4834-138">Provision a user account in another system at the time of registration.</span><span class="sxs-lookup"><span data-stu-id="b4834-138">Provision a user account in another system at the time of registration.</span></span><br><br><span data-ttu-id="b4834-139">Send a welcome email using your own email service provider.</span><span class="sxs-lookup"><span data-stu-id="b4834-139">Send a welcome email using your own email service provider.</span></span><br><br><span data-ttu-id="b4834-140">Use a user store outside Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="b4834-140">Use a user store outside Azure AD B2C.</span></span><br><br><span data-ttu-id="b4834-141">Validate user provided information with a trusted system by using an API.</span><span class="sxs-lookup"><span data-stu-id="b4834-141">Validate user provided information with a trusted system by using an API.</span></span> |

## <a name="policy-files"></a><span data-ttu-id="b4834-142">Policy files</span><span class="sxs-lookup"><span data-stu-id="b4834-142">Policy files</span></span>

<span data-ttu-id="b4834-143">These three types of policy files are used:</span><span class="sxs-lookup"><span data-stu-id="b4834-143">These three types of policy files are used:</span></span>

- <span data-ttu-id="b4834-144">**Base file** - contains most of the definitions.</span><span class="sxs-lookup"><span data-stu-id="b4834-144">**Base file** - contains most of the definitions.</span></span> <span data-ttu-id="b4834-145">It is recommended that you make a minimum number of changes to this file to help with troubleshooting, and long-term maintenance of your policies.</span><span class="sxs-lookup"><span data-stu-id="b4834-145">It is recommended that you make a minimum number of changes to this file to help with troubleshooting, and long-term maintenance of your policies.</span></span>
- <span data-ttu-id="b4834-146">**Extensions file** - holds the unique configuration changes for your tenant.</span><span class="sxs-lookup"><span data-stu-id="b4834-146">**Extensions file** - holds the unique configuration changes for your tenant.</span></span>
- <span data-ttu-id="b4834-147">**Relying Party (RP) file** - The single task-focused file that is invoked directly by the application or service (also, known as a Relying Party).</span><span class="sxs-lookup"><span data-stu-id="b4834-147">**Relying Party (RP) file** - The single task-focused file that is invoked directly by the application or service (also, known as a Relying Party).</span></span> <span data-ttu-id="b4834-148">Each unique task requires its own RP and depending on branding requirements, the number might be "total of applications x total number of use cases."</span><span class="sxs-lookup"><span data-stu-id="b4834-148">Each unique task requires its own RP and depending on branding requirements, the number might be "total of applications x total number of use cases."</span></span>

<span data-ttu-id="b4834-149">Built-in policies in Azure AD B2C follow the three-file pattern depicted above, but the developer only sees the RP file, while the Azure portal makes changes in the background to the extensions file.</span><span class="sxs-lookup"><span data-stu-id="b4834-149">Built-in policies in Azure AD B2C follow the three-file pattern depicted above, but the developer only sees the RP file, while the Azure portal makes changes in the background to the extensions file.</span></span>

## <a name="custom-policy-core-concepts"></a><span data-ttu-id="b4834-150">Custom policy core concepts</span><span class="sxs-lookup"><span data-stu-id="b4834-150">Custom policy core concepts</span></span>

<span data-ttu-id="b4834-151">The customer identity and access management (CIAM) service in Azure includes:</span><span class="sxs-lookup"><span data-stu-id="b4834-151">The customer identity and access management (CIAM) service in Azure includes:</span></span>

- <span data-ttu-id="b4834-152">A user directory that is accessible by using Microsoft Graph and which holds user data for both local accounts and federated accounts.</span><span class="sxs-lookup"><span data-stu-id="b4834-152">A user directory that is accessible by using Microsoft Graph and which holds user data for both local accounts and federated accounts.</span></span>
- <span data-ttu-id="b4834-153">Access to the **Identity Experience Framework** that orchestrates trust between users and entities and passes claims between them to complete an identity or access management task.</span><span class="sxs-lookup"><span data-stu-id="b4834-153">Access to the **Identity Experience Framework** that orchestrates trust between users and entities and passes claims between them to complete an identity or access management task.</span></span> 
- <span data-ttu-id="b4834-154">A security token service (STS) that issues ID tokens, refresh tokens, and access tokens (and equivalent SAML assertions) and validates them to protect resources.</span><span class="sxs-lookup"><span data-stu-id="b4834-154">A security token service (STS) that issues ID tokens, refresh tokens, and access tokens (and equivalent SAML assertions) and validates them to protect resources.</span></span>

<span data-ttu-id="b4834-155">Azure AD B2C interacts with identity providers, users, other systems, and with the local user directory in sequence to achieve an identity task.</span><span class="sxs-lookup"><span data-stu-id="b4834-155">Azure AD B2C interacts with identity providers, users, other systems, and with the local user directory in sequence to achieve an identity task.</span></span> <span data-ttu-id="b4834-156">For example, sign in a user, register a new user, or reset a password.</span><span class="sxs-lookup"><span data-stu-id="b4834-156">For example, sign in a user, register a new user, or reset a password.</span></span> <span data-ttu-id="b4834-157">The Identity Experience Framework and a policy (also called a user journey or a trust framework policy) establishes multi-party trust and explicitly defines the actors, the actions, the protocols, and the sequence of steps to complete.</span><span class="sxs-lookup"><span data-stu-id="b4834-157">The Identity Experience Framework and a policy (also called a user journey or a trust framework policy) establishes multi-party trust and explicitly defines the actors, the actions, the protocols, and the sequence of steps to complete.</span></span>

<span data-ttu-id="b4834-158">The Identity Experience Framework is a fully configurable, policy-driven, cloud-based Azure platform that orchestrates trust between entities in standard protocol formats such as OpenIDConnect, OAuth, SAML, WSFed, and a few non-standard ones, for example REST API-based system-to-system claims exchanges.</span><span class="sxs-lookup"><span data-stu-id="b4834-158">The Identity Experience Framework is a fully configurable, policy-driven, cloud-based Azure platform that orchestrates trust between entities in standard protocol formats such as OpenIDConnect, OAuth, SAML, WSFed, and a few non-standard ones, for example REST API-based system-to-system claims exchanges.</span></span> <span data-ttu-id="b4834-159">The framework creates user-friendly, white-labeled experiences that support HTML and CSS.</span><span class="sxs-lookup"><span data-stu-id="b4834-159">The framework creates user-friendly, white-labeled experiences that support HTML and CSS.</span></span>

<span data-ttu-id="b4834-160">A custom policy is represented as one or several XML-formatted files that refer to each other in a hierarchical chain.</span><span class="sxs-lookup"><span data-stu-id="b4834-160">A custom policy is represented as one or several XML-formatted files that refer to each other in a hierarchical chain.</span></span> <span data-ttu-id="b4834-161">The XML elements define the claims schema, claims transformations, content definitions, claims providers, technical profiles, and user journey orchestration steps, among other elements.</span><span class="sxs-lookup"><span data-stu-id="b4834-161">The XML elements define the claims schema, claims transformations, content definitions, claims providers, technical profiles, and user journey orchestration steps, among other elements.</span></span> <span data-ttu-id="b4834-162">A custom policy is accessible as one or several XML files that are executed by the Identity Experience Framework when invoked by a relying party.</span><span class="sxs-lookup"><span data-stu-id="b4834-162">A custom policy is accessible as one or several XML files that are executed by the Identity Experience Framework when invoked by a relying party.</span></span> <span data-ttu-id="b4834-163">Developers configuring custom policies must define the trusted relationships in careful detail to include metadata endpoints, exact claims exchange definitions, and configure secrets, keys, and certificates as needed by each identity provider.</span><span class="sxs-lookup"><span data-stu-id="b4834-163">Developers configuring custom policies must define the trusted relationships in careful detail to include metadata endpoints, exact claims exchange definitions, and configure secrets, keys, and certificates as needed by each identity provider.</span></span>

### <a name="inheritance-model"></a><span data-ttu-id="b4834-164">Inheritance model</span><span class="sxs-lookup"><span data-stu-id="b4834-164">Inheritance model</span></span>

<span data-ttu-id="b4834-165">When an application calls the RP policy file, the Identity Experience Framework in Azure AD B2C adds all of the elements from base file, from the extensions file, and then from the RP policy file to assemble the current policy in effect.</span><span class="sxs-lookup"><span data-stu-id="b4834-165">When an application calls the RP policy file, the Identity Experience Framework in Azure AD B2C adds all of the elements from base file, from the extensions file, and then from the RP policy file to assemble the current policy in effect.</span></span>  <span data-ttu-id="b4834-166">Elements of the same type and name in the RP file will override those in the extensions, and extensions overrides base.</span><span class="sxs-lookup"><span data-stu-id="b4834-166">Elements of the same type and name in the RP file will override those in the extensions, and extensions overrides base.</span></span>

## <a name="next-steps"></a><span data-ttu-id="b4834-167">Next steps</span><span class="sxs-lookup"><span data-stu-id="b4834-167">Next steps</span></span>

> [!div class="nextstepaction"]
> [<span data-ttu-id="b4834-168">Get started with custom policies</span><span class="sxs-lookup"><span data-stu-id="b4834-168">Get started with custom policies</span></span>](active-directory-b2c-get-started-custom.md)
