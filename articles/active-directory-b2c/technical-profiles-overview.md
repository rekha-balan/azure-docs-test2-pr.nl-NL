---
title: About technical profiles in Azure Active Directory B2C custom policies | Microsoft Docs
description: Learn about how technical profiles are used in a custom policy in Azure Active Directory B2C.
services: active-directory-b2c
author: davidmu1
manager: mtillman
ms.service: active-directory
ms.workload: identity
ms.topic: reference
ms.date: 09/10/2018
ms.author: davidmu
ms.component: B2C
ms.openlocfilehash: 4dc88abda0f19896b8f1ed6465fe0fc39ac81b72
ms.sourcegitcommit: d1451406a010fd3aa854dc8e5b77dc5537d8050e
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 09/13/2018
ms.locfileid: "44856589"
---
# <a name="about-technical-profiles-in-azure-active-directory-b2c-custom-policies"></a><span data-ttu-id="a4988-103">About technical profiles in Azure Active Directory B2C custom policies</span><span class="sxs-lookup"><span data-stu-id="a4988-103">About technical profiles in Azure Active Directory B2C custom policies</span></span>

[!INCLUDE [active-directory-b2c-advanced-audience-warning](../../includes/active-directory-b2c-advanced-audience-warning.md)]

<span data-ttu-id="a4988-104">A technical profile provides a framework with a built-in mechanism to communicate with different type of parties using a custom policy in Azure Active Directory (Azure AD) B2C.</span><span class="sxs-lookup"><span data-stu-id="a4988-104">A technical profile provides a framework with a built-in mechanism to communicate with different type of parties using a custom policy in Azure Active Directory (Azure AD) B2C.</span></span> <span data-ttu-id="a4988-105">Technical profiles are used to communicate with your Azure AD B2C tenant, to create a user, or read a user profile.</span><span class="sxs-lookup"><span data-stu-id="a4988-105">Technical profiles are used to communicate with your Azure AD B2C tenant, to create a user, or read a user profile.</span></span> <span data-ttu-id="a4988-106">A technical profile can be self-asserted to enable interaction with the user.</span><span class="sxs-lookup"><span data-stu-id="a4988-106">A technical profile can be self-asserted to enable interaction with the user.</span></span> <span data-ttu-id="a4988-107">For example, collect the user's credential to sign in and then render the sign-up page or password reset page.</span><span class="sxs-lookup"><span data-stu-id="a4988-107">For example, collect the user's credential to sign in and then render the sign-up page or password reset page.</span></span> 

## <a name="type-of-technical-profiles"></a><span data-ttu-id="a4988-108">Type of technical profiles</span><span class="sxs-lookup"><span data-stu-id="a4988-108">Type of technical profiles</span></span>

<span data-ttu-id="a4988-109">A technical profile enables these types of scenarios:</span><span class="sxs-lookup"><span data-stu-id="a4988-109">A technical profile enables these types of scenarios:</span></span>

- <span data-ttu-id="a4988-110">[Azure Active Directory](active-directory-technical-profile.md) - Provides support for the Azure Active Directory B2C user management.</span><span class="sxs-lookup"><span data-stu-id="a4988-110">[Azure Active Directory](active-directory-technical-profile.md) - Provides support for the Azure Active Directory B2C user management.</span></span>
- <span data-ttu-id="a4988-111">[JWT token issuer](jwt-issuer-technical-profile.md) -  Emits a JWT token that is returned back to the relying party application.</span><span class="sxs-lookup"><span data-stu-id="a4988-111">[JWT token issuer](jwt-issuer-technical-profile.md) -  Emits a JWT token that is returned back to the relying party application.</span></span> 
- <span data-ttu-id="a4988-112">**Phone factor provider** - Multi-factor authentication.</span><span class="sxs-lookup"><span data-stu-id="a4988-112">**Phone factor provider** - Multi-factor authentication.</span></span>
- <span data-ttu-id="a4988-113">[OAuth1](oauth1-technical-profile.md) - Federation with any OAuth 1.0 protocol identity provider.</span><span class="sxs-lookup"><span data-stu-id="a4988-113">[OAuth1](oauth1-technical-profile.md) - Federation with any OAuth 1.0 protocol identity provider.</span></span>
- <span data-ttu-id="a4988-114">[OAuth2](oauth2-technical-profile.md) - Federation with any OAuth 2.0 protocol identity provider.</span><span class="sxs-lookup"><span data-stu-id="a4988-114">[OAuth2](oauth2-technical-profile.md) - Federation with any OAuth 2.0 protocol identity provider.</span></span>
- <span data-ttu-id="a4988-115">[OpenIdConnect](openid-connect-technical-profile.md) - Federation with any OpenId Connect protocol identity provider.</span><span class="sxs-lookup"><span data-stu-id="a4988-115">[OpenIdConnect](openid-connect-technical-profile.md) - Federation with any OpenId Connect protocol identity provider.</span></span>
- <span data-ttu-id="a4988-116">[Claims transformation](claims-transformation-technical-profile.md) - Call output claims transformations to manipulate claims values, validate claims, or set default values for a set of output claims.</span><span class="sxs-lookup"><span data-stu-id="a4988-116">[Claims transformation](claims-transformation-technical-profile.md) - Call output claims transformations to manipulate claims values, validate claims, or set default values for a set of output claims.</span></span>
- <span data-ttu-id="a4988-117">[Restful provider](restful-technical-profile.md) - Call to REST API services, such as validate user input, enrich user data, or integrate with line-of-business applications.</span><span class="sxs-lookup"><span data-stu-id="a4988-117">[Restful provider](restful-technical-profile.md) - Call to REST API services, such as validate user input, enrich user data, or integrate with line-of-business applications.</span></span>
- <span data-ttu-id="a4988-118">[SAML2](saml-technical-profile.md) - Federation with any SAML protocol identity provider.</span><span class="sxs-lookup"><span data-stu-id="a4988-118">[SAML2](saml-technical-profile.md) - Federation with any SAML protocol identity provider.</span></span>
- <span data-ttu-id="a4988-119">[Self-Asserted](self-asserted-technical-profile.md) - Interact with the user.</span><span class="sxs-lookup"><span data-stu-id="a4988-119">[Self-Asserted](self-asserted-technical-profile.md) - Interact with the user.</span></span> <span data-ttu-id="a4988-120">For example, collect the user's credential to sign in, render the sign-up page, or password reset.</span><span class="sxs-lookup"><span data-stu-id="a4988-120">For example, collect the user's credential to sign in, render the sign-up page, or password reset.</span></span>
- <span data-ttu-id="a4988-121">[Token Issuer](jwt-issuer-technical-profile.md) - Issue an access token.</span><span class="sxs-lookup"><span data-stu-id="a4988-121">[Token Issuer](jwt-issuer-technical-profile.md) - Issue an access token.</span></span>
- <span data-ttu-id="a4988-122">**WsFed** - Federation with any WsFed protocol identity provider.</span><span class="sxs-lookup"><span data-stu-id="a4988-122">**WsFed** - Federation with any WsFed protocol identity provider.</span></span> 
- <span data-ttu-id="a4988-123">**Session management** - Handle different types of sessions.</span><span class="sxs-lookup"><span data-stu-id="a4988-123">**Session management** - Handle different types of sessions.</span></span> 
- <span data-ttu-id="a4988-124">**User journey context provider**</span><span class="sxs-lookup"><span data-stu-id="a4988-124">**User journey context provider**</span></span>
- <span data-ttu-id="a4988-125">**Application insights**</span><span class="sxs-lookup"><span data-stu-id="a4988-125">**Application insights**</span></span>

## <a name="technical-profile-flow"></a><span data-ttu-id="a4988-126">Technical profile flow</span><span class="sxs-lookup"><span data-stu-id="a4988-126">Technical profile flow</span></span>

<span data-ttu-id="a4988-127">All types of technical profiles share the same concept.</span><span class="sxs-lookup"><span data-stu-id="a4988-127">All types of technical profiles share the same concept.</span></span> <span data-ttu-id="a4988-128">You send input claims, run claims transformation, and communicate with the configured party, such as an identity provider, REST API, or Azure AD directory services.</span><span class="sxs-lookup"><span data-stu-id="a4988-128">You send input claims, run claims transformation, and communicate with the configured party, such as an identity provider, REST API, or Azure AD directory services.</span></span> <span data-ttu-id="a4988-129">After the process finishes, the technical profile returns the output claims and may run output claims transformation.</span><span class="sxs-lookup"><span data-stu-id="a4988-129">After the process finishes, the technical profile returns the output claims and may run output claims transformation.</span></span> <span data-ttu-id="a4988-130">The following diagram shows how the transformations and mappings referenced in the technical profile are processed.</span><span class="sxs-lookup"><span data-stu-id="a4988-130">The following diagram shows how the transformations and mappings referenced in the technical profile are processed.</span></span> <span data-ttu-id="a4988-131">Regardless of the party the technical profile interacts with, after any claims transformation is executed, the output claims from the technical profile are immediately stored in the claims bag.</span><span class="sxs-lookup"><span data-stu-id="a4988-131">Regardless of the party the technical profile interacts with, after any claims transformation is executed, the output claims from the technical profile are immediately stored in the claims bag.</span></span> 

![Technical profile flow](./media/technical-profiles-overview/technical-profile-idp-saml-flow.png)
â€ƒ
1. <span data-ttu-id="a4988-133">**InputClaimsTransformation** - Input claims of every  input [claims transformation](claimstransformations.md) are picked up from the claims bag, and after execution, the output claims are put back in the claims bag.</span><span class="sxs-lookup"><span data-stu-id="a4988-133">**InputClaimsTransformation** - Input claims of every  input [claims transformation](claimstransformations.md) are picked up from the claims bag, and after execution, the output claims are put back in the claims bag.</span></span> <span data-ttu-id="a4988-134">The output claims of an input claims transformation can be input claims of a subsequent input claims transformation.</span><span class="sxs-lookup"><span data-stu-id="a4988-134">The output claims of an input claims transformation can be input claims of a subsequent input claims transformation.</span></span>
2. <span data-ttu-id="a4988-135">**InputClaims** - Claims are picked up from the claims bag and are used for the technical profile.</span><span class="sxs-lookup"><span data-stu-id="a4988-135">**InputClaims** - Claims are picked up from the claims bag and are used for the technical profile.</span></span> <span data-ttu-id="a4988-136">For example, a [self-asserted technical profile](self-asserted-technical-profile.md) uses the input claims to prepopulate the output claims that the user provides.</span><span class="sxs-lookup"><span data-stu-id="a4988-136">For example, a [self-asserted technical profile](self-asserted-technical-profile.md) uses the input claims to prepopulate the output claims that the user provides.</span></span> <span data-ttu-id="a4988-137">A REST API technical profile uses the input claims to send input parameters to the REST API endpoint.</span><span class="sxs-lookup"><span data-stu-id="a4988-137">A REST API technical profile uses the input claims to send input parameters to the REST API endpoint.</span></span> <span data-ttu-id="a4988-138">Azure Active Directory uses input claim as a unique identifier to read, update, or delete an account.</span><span class="sxs-lookup"><span data-stu-id="a4988-138">Azure Active Directory uses input claim as a unique identifier to read, update, or delete an account.</span></span>
3. <span data-ttu-id="a4988-139">**Technical profile execution** - The technical profile exchanges the claims with the configured party.</span><span class="sxs-lookup"><span data-stu-id="a4988-139">**Technical profile execution** - The technical profile exchanges the claims with the configured party.</span></span> <span data-ttu-id="a4988-140">For example:</span><span class="sxs-lookup"><span data-stu-id="a4988-140">For example:</span></span>
    - <span data-ttu-id="a4988-141">Redirect the user to the identity provider to complete the sign-in.</span><span class="sxs-lookup"><span data-stu-id="a4988-141">Redirect the user to the identity provider to complete the sign-in.</span></span> <span data-ttu-id="a4988-142">After successful sign-in, the user returns back and the technical profile execution continues.</span><span class="sxs-lookup"><span data-stu-id="a4988-142">After successful sign-in, the user returns back and the technical profile execution continues.</span></span>
    - <span data-ttu-id="a4988-143">Call a REST API while sending parameters as InputClaims and getting information back as OutputClaims.</span><span class="sxs-lookup"><span data-stu-id="a4988-143">Call a REST API while sending parameters as InputClaims and getting information back as OutputClaims.</span></span>
    - <span data-ttu-id="a4988-144">Create or update the user account.</span><span class="sxs-lookup"><span data-stu-id="a4988-144">Create or update the user account.</span></span>
    - <span data-ttu-id="a4988-145">Sends and verifies the MFA text message.</span><span class="sxs-lookup"><span data-stu-id="a4988-145">Sends and verifies the MFA text message.</span></span>
4. <span data-ttu-id="a4988-146">**ValidationTechnicalProfiles** - For a [self-asserted technical profile](self-asserted-technical-profile.md), you can call an input [validation technical profile](validation-technical-profile.md).</span><span class="sxs-lookup"><span data-stu-id="a4988-146">**ValidationTechnicalProfiles** - For a [self-asserted technical profile](self-asserted-technical-profile.md), you can call an input [validation technical profile](validation-technical-profile.md).</span></span> <span data-ttu-id="a4988-147">The validation technical profile validates the data provided by the user and returns an error message or Ok with or without output claims.</span><span class="sxs-lookup"><span data-stu-id="a4988-147">The validation technical profile validates the data provided by the user and returns an error message or Ok with or without output claims.</span></span> <span data-ttu-id="a4988-148">For example, before Azure AD B2C creates a new account, it checks whether the user already exists in the directory services.</span><span class="sxs-lookup"><span data-stu-id="a4988-148">For example, before Azure AD B2C creates a new account, it checks whether the user already exists in the directory services.</span></span> <span data-ttu-id="a4988-149">You can call a REST API technical profile to add your own business logic.</span><span class="sxs-lookup"><span data-stu-id="a4988-149">You can call a REST API technical profile to add your own business logic.</span></span>
5. <span data-ttu-id="a4988-150">**OutputClaims** - Claims are retuned back to the claims bag.</span><span class="sxs-lookup"><span data-stu-id="a4988-150">**OutputClaims** - Claims are retuned back to the claims bag.</span></span> <span data-ttu-id="a4988-151">You can use those claims in the next orchestration steps or output claims transformations.</span><span class="sxs-lookup"><span data-stu-id="a4988-151">You can use those claims in the next orchestration steps or output claims transformations.</span></span>
6. <span data-ttu-id="a4988-152">**OutputClaimsTransformations** - Input claims of every output claims transformation are picked up from the claims bag.</span><span class="sxs-lookup"><span data-stu-id="a4988-152">**OutputClaimsTransformations** - Input claims of every output claims transformation are picked up from the claims bag.</span></span> <span data-ttu-id="a4988-153">The output claims of the technical profile from the previous step as well as output claims of the input claims transformations from the first step can be input claims of an output claims transformation.</span><span class="sxs-lookup"><span data-stu-id="a4988-153">The output claims of the technical profile from the previous step as well as output claims of the input claims transformations from the first step can be input claims of an output claims transformation.</span></span> <span data-ttu-id="a4988-154">After execution, the output claims are put back in the claims bag.</span><span class="sxs-lookup"><span data-stu-id="a4988-154">After execution, the output claims are put back in the claims bag.</span></span> <span data-ttu-id="a4988-155">The output claims of an output claims transformation can also be input claims of a subsequent output claims transformation.</span><span class="sxs-lookup"><span data-stu-id="a4988-155">The output claims of an output claims transformation can also be input claims of a subsequent output claims transformation.</span></span>
7. <span data-ttu-id="a4988-156">**ValidationTechnicalProfiles** - For a [self asserted technical profile](self-asserted-technical-profile.md), you can call an input [validation technical profile](validation-technical-profile.md).</span><span class="sxs-lookup"><span data-stu-id="a4988-156">**ValidationTechnicalProfiles** - For a [self asserted technical profile](self-asserted-technical-profile.md), you can call an input [validation technical profile](validation-technical-profile.md).</span></span> <span data-ttu-id="a4988-157">The validation technical profile validates the data profiled by the user and returns an error message or Ok, with or without output claims.</span><span class="sxs-lookup"><span data-stu-id="a4988-157">The validation technical profile validates the data profiled by the user and returns an error message or Ok, with or without output claims.</span></span> <span data-ttu-id="a4988-158">For example, before Azure AD B2C creates a new account, it checks whether the user already exists in the directory services.</span><span class="sxs-lookup"><span data-stu-id="a4988-158">For example, before Azure AD B2C creates a new account, it checks whether the user already exists in the directory services.</span></span> <span data-ttu-id="a4988-159">You can call a REST API technical profile to add your own business logic.</span><span class="sxs-lookup"><span data-stu-id="a4988-159">You can call a REST API technical profile to add your own business logic.</span></span>
8. <span data-ttu-id="a4988-160">**OutputClaims** - Claims are retuned back to the claims bag.</span><span class="sxs-lookup"><span data-stu-id="a4988-160">**OutputClaims** - Claims are retuned back to the claims bag.</span></span> <span data-ttu-id="a4988-161">You can use those claims in the next orchestrations step, or output claims transformations.</span><span class="sxs-lookup"><span data-stu-id="a4988-161">You can use those claims in the next orchestrations step, or output claims transformations.</span></span>
9. <span data-ttu-id="a4988-162">**OutputClaimsTransformations** - Input claims of every output [claims transformation](claimstransformations.md) are picked up from the claims bag.</span><span class="sxs-lookup"><span data-stu-id="a4988-162">**OutputClaimsTransformations** - Input claims of every output [claims transformation](claimstransformations.md) are picked up from the claims bag.</span></span> <span data-ttu-id="a4988-163">The output claims of the technical profile from the previous steps can be input claims of an output claims transformation.</span><span class="sxs-lookup"><span data-stu-id="a4988-163">The output claims of the technical profile from the previous steps can be input claims of an output claims transformation.</span></span> <span data-ttu-id="a4988-164">After execution, the output claims are put back in the claims bag.</span><span class="sxs-lookup"><span data-stu-id="a4988-164">After execution, the output claims are put back in the claims bag.</span></span> <span data-ttu-id="a4988-165">The output claims of an output claims transformation can also be input claims of a subsequent output claims transformation.</span><span class="sxs-lookup"><span data-stu-id="a4988-165">The output claims of an output claims transformation can also be input claims of a subsequent output claims transformation.</span></span>

<span data-ttu-id="a4988-166">A technical profile can inherit from another technical profile to change settings or add new functionality.</span><span class="sxs-lookup"><span data-stu-id="a4988-166">A technical profile can inherit from another technical profile to change settings or add new functionality.</span></span>  <span data-ttu-id="a4988-167">The **IncludeTechnicalProfile** element is a reference to the base technical profile from which a technical profile is derived.</span><span class="sxs-lookup"><span data-stu-id="a4988-167">The **IncludeTechnicalProfile** element is a reference to the base technical profile from which a technical profile is derived.</span></span>  

<span data-ttu-id="a4988-168">For example, the **AAD-UserReadUsingAlternativeSecurityId-NoError** technical profile includes the **AAD-UserReadUsingAlternativeSecurityId**.</span><span class="sxs-lookup"><span data-stu-id="a4988-168">For example, the **AAD-UserReadUsingAlternativeSecurityId-NoError** technical profile includes the **AAD-UserReadUsingAlternativeSecurityId**.</span></span> <span data-ttu-id="a4988-169">This technical profile sets the **RaiseErrorIfClaimsPrincipalDoesNotExist** metadata item to `true`, and raises an error if a social account does not exist in the directory.</span><span class="sxs-lookup"><span data-stu-id="a4988-169">This technical profile sets the **RaiseErrorIfClaimsPrincipalDoesNotExist** metadata item to `true`, and raises an error if a social account does not exist in the directory.</span></span> <span data-ttu-id="a4988-170">**AAD-UserReadUsingAlternativeSecurityId-NoError** overrides this behavior and disables the error message if the user has not existed.</span><span class="sxs-lookup"><span data-stu-id="a4988-170">**AAD-UserReadUsingAlternativeSecurityId-NoError** overrides this behavior and disables the error message if the user has not existed.</span></span>

```XML
<TechnicalProfile Id="AAD-UserReadUsingAlternativeSecurityId-NoError">
  <Metadata>
    <Item Key="RaiseErrorIfClaimsPrincipalDoesNotExist">false</Item>
  </Metadata>
  <IncludeTechnicalProfile ReferenceId="AAD-UserReadUsingAlternativeSecurityId" />
</TechnicalProfile>
``` 

<span data-ttu-id="a4988-171">**AAD-UserReadUsingAlternativeSecurityId** includes the `AAD-Common` technical profile.</span><span class="sxs-lookup"><span data-stu-id="a4988-171">**AAD-UserReadUsingAlternativeSecurityId** includes the `AAD-Common` technical profile.</span></span>

```XML
<TechnicalProfile Id="AAD-UserReadUsingAlternativeSecurityId">
  <Metadata>
    <Item Key="Operation">Read</Item>
    <Item Key="RaiseErrorIfClaimsPrincipalDoesNotExist">true</Item>
    <Item Key="UserMessageIfClaimsPrincipalDoesNotExist">User does not exist. Please sign up before you can sign in.</Item>
  </Metadata>
  <InputClaims>
    <InputClaim ClaimTypeReferenceId="AlternativeSecurityId" PartnerClaimType="alternativeSecurityId" Required="true" />
  </InputClaims>
  <OutputClaims>
    <OutputClaim ClaimTypeReferenceId="objectId" />
    <OutputClaim ClaimTypeReferenceId="userPrincipalName" />
    <OutputClaim ClaimTypeReferenceId="displayName" />
    <OutputClaim ClaimTypeReferenceId="otherMails" />
    <OutputClaim ClaimTypeReferenceId="givenName" />
    <OutputClaim ClaimTypeReferenceId="surname" />
  </OutputClaims>
  <IncludeTechnicalProfile ReferenceId="AAD-Common" />
</TechnicalProfile>
```

<span data-ttu-id="a4988-172">Both **AAD-UserReadUsingAlternativeSecurityId-NoError** and  **AAD-UserReadUsingAlternativeSecurityId** don't specify the required **Protocol** element because it's specified in the **AAD-Common** technical profile.</span><span class="sxs-lookup"><span data-stu-id="a4988-172">Both **AAD-UserReadUsingAlternativeSecurityId-NoError** and  **AAD-UserReadUsingAlternativeSecurityId** don't specify the required **Protocol** element because it's specified in the **AAD-Common** technical profile.</span></span>

```XML
<TechnicalProfile Id="AAD-Common">
  <DisplayName>Azure Active Directory</DisplayName>
  <Protocol Name="Proprietary" Handler="Web.TPEngine.Providers.AzureActiveDirectoryProvider, Web.TPEngine, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" />
  ...
</TechnicalProfile>
```

<span data-ttu-id="a4988-173">A technical profile may include or inherit another technical profile, which may include another one.</span><span class="sxs-lookup"><span data-stu-id="a4988-173">A technical profile may include or inherit another technical profile, which may include another one.</span></span> <span data-ttu-id="a4988-174">There is no limit on the number of levels.</span><span class="sxs-lookup"><span data-stu-id="a4988-174">There is no limit on the number of levels.</span></span> <span data-ttu-id="a4988-175">Depending on the business requirements, your user journey may call **AAD-UserReadUsingAlternativeSecurityId** that raises an error if a user social account not exists, or **AAD-UserReadUsingAlternativeSecurityId-NoError** which doesn't raise an error.</span><span class="sxs-lookup"><span data-stu-id="a4988-175">Depending on the business requirements, your user journey may call **AAD-UserReadUsingAlternativeSecurityId** that raises an error if a user social account not exists, or **AAD-UserReadUsingAlternativeSecurityId-NoError** which doesn't raise an error.</span></span>











