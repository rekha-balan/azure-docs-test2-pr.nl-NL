---
title: Tutorial - Enable a web application to authenticate with accounts using Azure Active Directory B2C | Microsoft Docs
description: Tutorial on how to use Azure Active Directory B2C to provide user login for an ASP.NET web application.
services: active-directory-b2c
author: davidmu1
manager: mtillman
ms.author: davidmu
ms.date: 1/23/2018
ms.custom: mvc
ms.topic: tutorial
ms.service: active-directory
ms.component: B2C
ms.openlocfilehash: ed34dcfb2aa488f4e7e34294b46de68624811afd
ms.sourcegitcommit: d1451406a010fd3aa854dc8e5b77dc5537d8050e
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 09/13/2018
ms.locfileid: "44967111"
---
# <a name="tutorial-enable-a-web-application-to-authenticate-with-accounts-using-azure-active-directory-b2c"></a><span data-ttu-id="ad633-103">Tutorial: Enable a web application to authenticate with accounts using Azure Active Directory B2C</span><span class="sxs-lookup"><span data-stu-id="ad633-103">Tutorial: Enable a web application to authenticate with accounts using Azure Active Directory B2C</span></span>

<span data-ttu-id="ad633-104">This tutorial shows you how to use Azure Active Directory (Azure AD) B2C to sign in and sign up users in an ASP.NET web app.</span><span class="sxs-lookup"><span data-stu-id="ad633-104">This tutorial shows you how to use Azure Active Directory (Azure AD) B2C to sign in and sign up users in an ASP.NET web app.</span></span> <span data-ttu-id="ad633-105">Azure AD B2C enables your apps to authenticate to social accounts, enterprise accounts, and Azure Active Directory accounts using open standard protocols.</span><span class="sxs-lookup"><span data-stu-id="ad633-105">Azure AD B2C enables your apps to authenticate to social accounts, enterprise accounts, and Azure Active Directory accounts using open standard protocols.</span></span>

<span data-ttu-id="ad633-106">In this tutorial, you learn how to:</span><span class="sxs-lookup"><span data-stu-id="ad633-106">In this tutorial, you learn how to:</span></span>

> [!div class="checklist"]
> * <span data-ttu-id="ad633-107">Register a sample ASP.NET web app in your Azure AD B2C tenant.</span><span class="sxs-lookup"><span data-stu-id="ad633-107">Register a sample ASP.NET web app in your Azure AD B2C tenant.</span></span>
> * <span data-ttu-id="ad633-108">Create policies for user sign-up, sign-in, editing a profile, and password reset.</span><span class="sxs-lookup"><span data-stu-id="ad633-108">Create policies for user sign-up, sign-in, editing a profile, and password reset.</span></span>
> * <span data-ttu-id="ad633-109">Configure the sample web app to use your Azure AD B2C tenant.</span><span class="sxs-lookup"><span data-stu-id="ad633-109">Configure the sample web app to use your Azure AD B2C tenant.</span></span> 

[!INCLUDE [quickstarts-free-trial-note](../../includes/quickstarts-free-trial-note.md)]

## <a name="prerequisites"></a><span data-ttu-id="ad633-110">Prerequisites</span><span class="sxs-lookup"><span data-stu-id="ad633-110">Prerequisites</span></span>

* <span data-ttu-id="ad633-111">Create your own [Azure AD B2C Tenant](active-directory-b2c-get-started.md)</span><span class="sxs-lookup"><span data-stu-id="ad633-111">Create your own [Azure AD B2C Tenant](active-directory-b2c-get-started.md)</span></span>
* <span data-ttu-id="ad633-112">Install [Visual Studio 2017](https://www.visualstudio.com/downloads/) with the **ASP.NET and web development** workload.</span><span class="sxs-lookup"><span data-stu-id="ad633-112">Install [Visual Studio 2017](https://www.visualstudio.com/downloads/) with the **ASP.NET and web development** workload.</span></span>

## <a name="register-web-app"></a><span data-ttu-id="ad633-113">Register web app</span><span class="sxs-lookup"><span data-stu-id="ad633-113">Register web app</span></span>

<span data-ttu-id="ad633-114">Applications need to be [registered](../active-directory/develop/developer-glossary.md#application-registration) in your tenant before they can receive [access tokens](../active-directory/develop/developer-glossary.md#access-token) from Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="ad633-114">Applications need to be [registered](../active-directory/develop/developer-glossary.md#application-registration) in your tenant before they can receive [access tokens](../active-directory/develop/developer-glossary.md#access-token) from Azure Active Directory.</span></span> <span data-ttu-id="ad633-115">App registration creates an [application id](../active-directory/develop/developer-glossary.md#application-id-client-id) for the app in your tenant.</span><span class="sxs-lookup"><span data-stu-id="ad633-115">App registration creates an [application id](../active-directory/develop/developer-glossary.md#application-id-client-id) for the app in your tenant.</span></span> 

<span data-ttu-id="ad633-116">Log in to the [Azure portal](https://portal.azure.com/) as the global administrator of your Azure AD B2C tenant.</span><span class="sxs-lookup"><span data-stu-id="ad633-116">Log in to the [Azure portal](https://portal.azure.com/) as the global administrator of your Azure AD B2C tenant.</span></span>

[!INCLUDE [active-directory-b2c-switch-b2c-tenant](../../includes/active-directory-b2c-switch-b2c-tenant.md)]

1. <span data-ttu-id="ad633-117">Choose **All services** in the top-left corner of the Azure portal, search for and select **Azure AD B2C**.</span><span class="sxs-lookup"><span data-stu-id="ad633-117">Choose **All services** in the top-left corner of the Azure portal, search for and select **Azure AD B2C**.</span></span> <span data-ttu-id="ad633-118">You should now be using the tenant that you created in the previous tutorial.</span><span class="sxs-lookup"><span data-stu-id="ad633-118">You should now be using the tenant that you created in the previous tutorial.</span></span> 

2. <span data-ttu-id="ad633-119">In the B2C settings, click **Applications** and then click **Add**.</span><span class="sxs-lookup"><span data-stu-id="ad633-119">In the B2C settings, click **Applications** and then click **Add**.</span></span> 

    <span data-ttu-id="ad633-120">To register the sample web app in your tenant, use the following settings:</span><span class="sxs-lookup"><span data-stu-id="ad633-120">To register the sample web app in your tenant, use the following settings:</span></span>

    ![Add a new app](media/active-directory-b2c-tutorials-web-app/web-app-registration.png)
    
    | <span data-ttu-id="ad633-122">Setting</span><span class="sxs-lookup"><span data-stu-id="ad633-122">Setting</span></span>      | <span data-ttu-id="ad633-123">Suggested value</span><span class="sxs-lookup"><span data-stu-id="ad633-123">Suggested value</span></span>  | <span data-ttu-id="ad633-124">Description</span><span class="sxs-lookup"><span data-stu-id="ad633-124">Description</span></span>                                        |
    | ------------ | ------- | -------------------------------------------------- |
    | <span data-ttu-id="ad633-125">**Name**</span><span class="sxs-lookup"><span data-stu-id="ad633-125">**Name**</span></span> | <span data-ttu-id="ad633-126">My Sample Web App</span><span class="sxs-lookup"><span data-stu-id="ad633-126">My Sample Web App</span></span> | <span data-ttu-id="ad633-127">Enter a **Name** that describes your app to consumers.</span><span class="sxs-lookup"><span data-stu-id="ad633-127">Enter a **Name** that describes your app to consumers.</span></span> | 
    | <span data-ttu-id="ad633-128">**Include web app / web API**</span><span class="sxs-lookup"><span data-stu-id="ad633-128">**Include web app / web API**</span></span> | <span data-ttu-id="ad633-129">Yes</span><span class="sxs-lookup"><span data-stu-id="ad633-129">Yes</span></span> | <span data-ttu-id="ad633-130">Select **Yes** for a web app.</span><span class="sxs-lookup"><span data-stu-id="ad633-130">Select **Yes** for a web app.</span></span> |
    | <span data-ttu-id="ad633-131">**Allow implicit flow**</span><span class="sxs-lookup"><span data-stu-id="ad633-131">**Allow implicit flow**</span></span> | <span data-ttu-id="ad633-132">Yes</span><span class="sxs-lookup"><span data-stu-id="ad633-132">Yes</span></span> | <span data-ttu-id="ad633-133">Select **Yes** since the app uses [OpenID Connect sign-in](active-directory-b2c-reference-oidc.md).</span><span class="sxs-lookup"><span data-stu-id="ad633-133">Select **Yes** since the app uses [OpenID Connect sign-in](active-directory-b2c-reference-oidc.md).</span></span> |
    | <span data-ttu-id="ad633-134">**Reply URL**</span><span class="sxs-lookup"><span data-stu-id="ad633-134">**Reply URL**</span></span> | `https://localhost:44316` | <span data-ttu-id="ad633-135">Reply URLs are endpoints where Azure AD B2C returns any tokens that your app requests.</span><span class="sxs-lookup"><span data-stu-id="ad633-135">Reply URLs are endpoints where Azure AD B2C returns any tokens that your app requests.</span></span> <span data-ttu-id="ad633-136">In this tutorial, the sample runs locally (localhost) and listens on port 44316.</span><span class="sxs-lookup"><span data-stu-id="ad633-136">In this tutorial, the sample runs locally (localhost) and listens on port 44316.</span></span> |
    | <span data-ttu-id="ad633-137">**Include native client**</span><span class="sxs-lookup"><span data-stu-id="ad633-137">**Include native client**</span></span> | <span data-ttu-id="ad633-138">No</span><span class="sxs-lookup"><span data-stu-id="ad633-138">No</span></span> | <span data-ttu-id="ad633-139">Since this is a web app and not a native client, select No.</span><span class="sxs-lookup"><span data-stu-id="ad633-139">Since this is a web app and not a native client, select No.</span></span> |
    
3. <span data-ttu-id="ad633-140">Click **Create** to register your app.</span><span class="sxs-lookup"><span data-stu-id="ad633-140">Click **Create** to register your app.</span></span>

<span data-ttu-id="ad633-141">Registered apps are displayed in the applications list for the Azure AD B2C tenant.</span><span class="sxs-lookup"><span data-stu-id="ad633-141">Registered apps are displayed in the applications list for the Azure AD B2C tenant.</span></span> <span data-ttu-id="ad633-142">Select your web app from the list.</span><span class="sxs-lookup"><span data-stu-id="ad633-142">Select your web app from the list.</span></span> <span data-ttu-id="ad633-143">The web app's property pane is displayed.</span><span class="sxs-lookup"><span data-stu-id="ad633-143">The web app's property pane is displayed.</span></span>

![Web app properties](./media/active-directory-b2c-tutorials-web-app/b2c-web-app-properties.png)

<span data-ttu-id="ad633-145">Make note of the **Application ID**.</span><span class="sxs-lookup"><span data-stu-id="ad633-145">Make note of the **Application ID**.</span></span> <span data-ttu-id="ad633-146">The ID uniquely identifies the app and is needed when configuring the app later in the tutorial.</span><span class="sxs-lookup"><span data-stu-id="ad633-146">The ID uniquely identifies the app and is needed when configuring the app later in the tutorial.</span></span>

### <a name="create-a-client-password"></a><span data-ttu-id="ad633-147">Create a client password</span><span class="sxs-lookup"><span data-stu-id="ad633-147">Create a client password</span></span>

<span data-ttu-id="ad633-148">Azure AD B2C uses OAuth2 authorization for [client applications](../active-directory/develop/developer-glossary.md#client-application).</span><span class="sxs-lookup"><span data-stu-id="ad633-148">Azure AD B2C uses OAuth2 authorization for [client applications](../active-directory/develop/developer-glossary.md#client-application).</span></span> <span data-ttu-id="ad633-149">Web apps are [confidential clients](../active-directory/develop/developer-glossary.md#web-client) and require a client ID or application ID and a client secret, client password, or application key.</span><span class="sxs-lookup"><span data-stu-id="ad633-149">Web apps are [confidential clients](../active-directory/develop/developer-glossary.md#web-client) and require a client ID or application ID and a client secret, client password, or application key.</span></span>

1. <span data-ttu-id="ad633-150">Select the Keys page for the registered web app and click **Generate key**.</span><span class="sxs-lookup"><span data-stu-id="ad633-150">Select the Keys page for the registered web app and click **Generate key**.</span></span>

2. <span data-ttu-id="ad633-151">Click **Save** to display the app key.</span><span class="sxs-lookup"><span data-stu-id="ad633-151">Click **Save** to display the app key.</span></span>

    ![app general keys page](media/active-directory-b2c-tutorials-web-app/app-general-keys-page.png)

<span data-ttu-id="ad633-153">The key is displayed once in the portal.</span><span class="sxs-lookup"><span data-stu-id="ad633-153">The key is displayed once in the portal.</span></span> <span data-ttu-id="ad633-154">It's important to copy and save the key value.</span><span class="sxs-lookup"><span data-stu-id="ad633-154">It's important to copy and save the key value.</span></span> <span data-ttu-id="ad633-155">You need this value for configuring your app.</span><span class="sxs-lookup"><span data-stu-id="ad633-155">You need this value for configuring your app.</span></span> <span data-ttu-id="ad633-156">Keep the key secure.</span><span class="sxs-lookup"><span data-stu-id="ad633-156">Keep the key secure.</span></span> <span data-ttu-id="ad633-157">Don't share the key publicly.</span><span class="sxs-lookup"><span data-stu-id="ad633-157">Don't share the key publicly.</span></span>

## <a name="create-policies"></a><span data-ttu-id="ad633-158">Create policies</span><span class="sxs-lookup"><span data-stu-id="ad633-158">Create policies</span></span>

<span data-ttu-id="ad633-159">An Azure AD B2C policy defines user workflows.</span><span class="sxs-lookup"><span data-stu-id="ad633-159">An Azure AD B2C policy defines user workflows.</span></span> <span data-ttu-id="ad633-160">For example, signing in, signing up, changing passwords, and editing profiles are common workflows.</span><span class="sxs-lookup"><span data-stu-id="ad633-160">For example, signing in, signing up, changing passwords, and editing profiles are common workflows.</span></span>

### <a name="create-a-sign-up-or-sign-in-policy"></a><span data-ttu-id="ad633-161">Create a sign-up or sign-in policy</span><span class="sxs-lookup"><span data-stu-id="ad633-161">Create a sign-up or sign-in policy</span></span>

<span data-ttu-id="ad633-162">To sign up users to access then sign in to the web app, create a **sign-up or sign-in policy**.</span><span class="sxs-lookup"><span data-stu-id="ad633-162">To sign up users to access then sign in to the web app, create a **sign-up or sign-in policy**.</span></span>

1. <span data-ttu-id="ad633-163">From the Azure AD B2C portal page, select **Sign-up or sign-in policies** and click **Add**.</span><span class="sxs-lookup"><span data-stu-id="ad633-163">From the Azure AD B2C portal page, select **Sign-up or sign-in policies** and click **Add**.</span></span>

    <span data-ttu-id="ad633-164">To configure your policy, use the following settings:</span><span class="sxs-lookup"><span data-stu-id="ad633-164">To configure your policy, use the following settings:</span></span>

    ![Add a sign-up or sign-in policy](media/active-directory-b2c-tutorials-web-app/add-susi-policy.png)

    | <span data-ttu-id="ad633-166">Setting</span><span class="sxs-lookup"><span data-stu-id="ad633-166">Setting</span></span>      | <span data-ttu-id="ad633-167">Suggested value</span><span class="sxs-lookup"><span data-stu-id="ad633-167">Suggested value</span></span>  | <span data-ttu-id="ad633-168">Description</span><span class="sxs-lookup"><span data-stu-id="ad633-168">Description</span></span>                                        |
    | ------------ | ------- | -------------------------------------------------- |
    | <span data-ttu-id="ad633-169">**Name**</span><span class="sxs-lookup"><span data-stu-id="ad633-169">**Name**</span></span> | <span data-ttu-id="ad633-170">SiUpIn</span><span class="sxs-lookup"><span data-stu-id="ad633-170">SiUpIn</span></span> | <span data-ttu-id="ad633-171">Enter a **Name** for the policy.</span><span class="sxs-lookup"><span data-stu-id="ad633-171">Enter a **Name** for the policy.</span></span> <span data-ttu-id="ad633-172">The policy name is prefixed with **b2c_1_**.</span><span class="sxs-lookup"><span data-stu-id="ad633-172">The policy name is prefixed with **b2c_1_**.</span></span> <span data-ttu-id="ad633-173">You use the full policy name **b2c_1_SiUpIn** in the sample code.</span><span class="sxs-lookup"><span data-stu-id="ad633-173">You use the full policy name **b2c_1_SiUpIn** in the sample code.</span></span> | 
    | <span data-ttu-id="ad633-174">**Identity provider**</span><span class="sxs-lookup"><span data-stu-id="ad633-174">**Identity provider**</span></span> | <span data-ttu-id="ad633-175">Email signup</span><span class="sxs-lookup"><span data-stu-id="ad633-175">Email signup</span></span> | <span data-ttu-id="ad633-176">The identity provider used to uniquely identify the user.</span><span class="sxs-lookup"><span data-stu-id="ad633-176">The identity provider used to uniquely identify the user.</span></span> |
    | <span data-ttu-id="ad633-177">**Sign up attributes**</span><span class="sxs-lookup"><span data-stu-id="ad633-177">**Sign up attributes**</span></span> | <span data-ttu-id="ad633-178">Display Name and Postal Code</span><span class="sxs-lookup"><span data-stu-id="ad633-178">Display Name and Postal Code</span></span> | <span data-ttu-id="ad633-179">Select attributes to be collected from the user during signup.</span><span class="sxs-lookup"><span data-stu-id="ad633-179">Select attributes to be collected from the user during signup.</span></span> |
    | <span data-ttu-id="ad633-180">**Application claims**</span><span class="sxs-lookup"><span data-stu-id="ad633-180">**Application claims**</span></span> | <span data-ttu-id="ad633-181">Display Name, Postal Code, User is new, User's Object ID</span><span class="sxs-lookup"><span data-stu-id="ad633-181">Display Name, Postal Code, User is new, User's Object ID</span></span> | <span data-ttu-id="ad633-182">Select [claims](../active-directory/develop/developer-glossary.md#claim) you want to be included in the [access token](../active-directory/develop/developer-glossary.md#access-token).</span><span class="sxs-lookup"><span data-stu-id="ad633-182">Select [claims](../active-directory/develop/developer-glossary.md#claim) you want to be included in the [access token](../active-directory/develop/developer-glossary.md#access-token).</span></span> |

2. <span data-ttu-id="ad633-183">Click **Create** to create your policy.</span><span class="sxs-lookup"><span data-stu-id="ad633-183">Click **Create** to create your policy.</span></span> 

### <a name="create-a-profile-editing-policy"></a><span data-ttu-id="ad633-184">Create a profile editing policy</span><span class="sxs-lookup"><span data-stu-id="ad633-184">Create a profile editing policy</span></span>

<span data-ttu-id="ad633-185">To allow users to reset their user profile information on their own, create a **profile editing policy**.</span><span class="sxs-lookup"><span data-stu-id="ad633-185">To allow users to reset their user profile information on their own, create a **profile editing policy**.</span></span>

1. <span data-ttu-id="ad633-186">From the Azure AD B2C portal page, select **Profile editing policies** and click **Add**.</span><span class="sxs-lookup"><span data-stu-id="ad633-186">From the Azure AD B2C portal page, select **Profile editing policies** and click **Add**.</span></span>

    <span data-ttu-id="ad633-187">To configure your policy, use the following settings:</span><span class="sxs-lookup"><span data-stu-id="ad633-187">To configure your policy, use the following settings:</span></span>

    | <span data-ttu-id="ad633-188">Setting</span><span class="sxs-lookup"><span data-stu-id="ad633-188">Setting</span></span>      | <span data-ttu-id="ad633-189">Suggested value</span><span class="sxs-lookup"><span data-stu-id="ad633-189">Suggested value</span></span>  | <span data-ttu-id="ad633-190">Description</span><span class="sxs-lookup"><span data-stu-id="ad633-190">Description</span></span>                                        |
    | ------------ | ------- | -------------------------------------------------- |
    | <span data-ttu-id="ad633-191">**Name**</span><span class="sxs-lookup"><span data-stu-id="ad633-191">**Name**</span></span> | <span data-ttu-id="ad633-192">SiPe</span><span class="sxs-lookup"><span data-stu-id="ad633-192">SiPe</span></span> | <span data-ttu-id="ad633-193">Enter a **Name** for the policy.</span><span class="sxs-lookup"><span data-stu-id="ad633-193">Enter a **Name** for the policy.</span></span> <span data-ttu-id="ad633-194">The policy name is prefixed with **b2c_1_**.</span><span class="sxs-lookup"><span data-stu-id="ad633-194">The policy name is prefixed with **b2c_1_**.</span></span> <span data-ttu-id="ad633-195">You use the full policy name **b2c_1_SiPe** in the sample code.</span><span class="sxs-lookup"><span data-stu-id="ad633-195">You use the full policy name **b2c_1_SiPe** in the sample code.</span></span> | 
    | <span data-ttu-id="ad633-196">**Identity provider**</span><span class="sxs-lookup"><span data-stu-id="ad633-196">**Identity provider**</span></span> | <span data-ttu-id="ad633-197">Local Account SignIn</span><span class="sxs-lookup"><span data-stu-id="ad633-197">Local Account SignIn</span></span> | <span data-ttu-id="ad633-198">The identity provider used to uniquely identify the user.</span><span class="sxs-lookup"><span data-stu-id="ad633-198">The identity provider used to uniquely identify the user.</span></span> |
    | <span data-ttu-id="ad633-199">**Profile attributes**</span><span class="sxs-lookup"><span data-stu-id="ad633-199">**Profile attributes**</span></span> | <span data-ttu-id="ad633-200">Display Name and Postal Code</span><span class="sxs-lookup"><span data-stu-id="ad633-200">Display Name and Postal Code</span></span> | <span data-ttu-id="ad633-201">Select attributes users can modify during profile edit.</span><span class="sxs-lookup"><span data-stu-id="ad633-201">Select attributes users can modify during profile edit.</span></span> |
    | <span data-ttu-id="ad633-202">**Application claims**</span><span class="sxs-lookup"><span data-stu-id="ad633-202">**Application claims**</span></span> | <span data-ttu-id="ad633-203">Display Name, Postal Code, User's Object ID</span><span class="sxs-lookup"><span data-stu-id="ad633-203">Display Name, Postal Code, User's Object ID</span></span> | <span data-ttu-id="ad633-204">Select [claims](../active-directory/develop/developer-glossary.md#claim) you want to be included in the [access token](../active-directory/develop/developer-glossary.md#access-token) after a successful profile edit.</span><span class="sxs-lookup"><span data-stu-id="ad633-204">Select [claims](../active-directory/develop/developer-glossary.md#claim) you want to be included in the [access token](../active-directory/develop/developer-glossary.md#access-token) after a successful profile edit.</span></span> |

2. <span data-ttu-id="ad633-205">Click **Create** to create your policy.</span><span class="sxs-lookup"><span data-stu-id="ad633-205">Click **Create** to create your policy.</span></span> 

### <a name="create-a-password-reset-policy"></a><span data-ttu-id="ad633-206">Create a password reset policy</span><span class="sxs-lookup"><span data-stu-id="ad633-206">Create a password reset policy</span></span>

<span data-ttu-id="ad633-207">To enable password reset on your application, you need to create a **password reset policy**.</span><span class="sxs-lookup"><span data-stu-id="ad633-207">To enable password reset on your application, you need to create a **password reset policy**.</span></span> <span data-ttu-id="ad633-208">This policy describes the consumer experience during password reset and the contents of tokens that the application receives on successful completion.</span><span class="sxs-lookup"><span data-stu-id="ad633-208">This policy describes the consumer experience during password reset and the contents of tokens that the application receives on successful completion.</span></span>

1. <span data-ttu-id="ad633-209">From the Azure AD B2C portal page, select **Password reset policies** and click **Add**.</span><span class="sxs-lookup"><span data-stu-id="ad633-209">From the Azure AD B2C portal page, select **Password reset policies** and click **Add**.</span></span>

    <span data-ttu-id="ad633-210">To configure your policy, use the following settings.</span><span class="sxs-lookup"><span data-stu-id="ad633-210">To configure your policy, use the following settings.</span></span>

    | <span data-ttu-id="ad633-211">Setting</span><span class="sxs-lookup"><span data-stu-id="ad633-211">Setting</span></span>      | <span data-ttu-id="ad633-212">Suggested value</span><span class="sxs-lookup"><span data-stu-id="ad633-212">Suggested value</span></span>  | <span data-ttu-id="ad633-213">Description</span><span class="sxs-lookup"><span data-stu-id="ad633-213">Description</span></span>                                        |
    | ------------ | ------- | -------------------------------------------------- |
    | <span data-ttu-id="ad633-214">**Name**</span><span class="sxs-lookup"><span data-stu-id="ad633-214">**Name**</span></span> | <span data-ttu-id="ad633-215">SSPR</span><span class="sxs-lookup"><span data-stu-id="ad633-215">SSPR</span></span> | <span data-ttu-id="ad633-216">Enter a **Name** for the policy.</span><span class="sxs-lookup"><span data-stu-id="ad633-216">Enter a **Name** for the policy.</span></span> <span data-ttu-id="ad633-217">The policy name is prefixed with **b2c_1_**.</span><span class="sxs-lookup"><span data-stu-id="ad633-217">The policy name is prefixed with **b2c_1_**.</span></span> <span data-ttu-id="ad633-218">You use the full policy name **b2c_1_SSPR** in the sample code.</span><span class="sxs-lookup"><span data-stu-id="ad633-218">You use the full policy name **b2c_1_SSPR** in the sample code.</span></span> | 
    | <span data-ttu-id="ad633-219">**Identity provider**</span><span class="sxs-lookup"><span data-stu-id="ad633-219">**Identity provider**</span></span> | <span data-ttu-id="ad633-220">Reset password using email address</span><span class="sxs-lookup"><span data-stu-id="ad633-220">Reset password using email address</span></span> | <span data-ttu-id="ad633-221">This is the identity provider used to uniquely identify the user.</span><span class="sxs-lookup"><span data-stu-id="ad633-221">This is the identity provider used to uniquely identify the user.</span></span> |
    | <span data-ttu-id="ad633-222">**Application claims**</span><span class="sxs-lookup"><span data-stu-id="ad633-222">**Application claims**</span></span> | <span data-ttu-id="ad633-223">User's Object ID</span><span class="sxs-lookup"><span data-stu-id="ad633-223">User's Object ID</span></span> | <span data-ttu-id="ad633-224">Select [claims](../active-directory/develop/developer-glossary.md#claim) you want to be included in the [access token](../active-directory/develop/developer-glossary.md#access-token) after a successful password reset.</span><span class="sxs-lookup"><span data-stu-id="ad633-224">Select [claims](../active-directory/develop/developer-glossary.md#claim) you want to be included in the [access token](../active-directory/develop/developer-glossary.md#access-token) after a successful password reset.</span></span> |

2. <span data-ttu-id="ad633-225">Click **Create** to create your policy.</span><span class="sxs-lookup"><span data-stu-id="ad633-225">Click **Create** to create your policy.</span></span> 

## <a name="update-web-app-code"></a><span data-ttu-id="ad633-226">Update web app code</span><span class="sxs-lookup"><span data-stu-id="ad633-226">Update web app code</span></span>

<span data-ttu-id="ad633-227">Now that you have a web app registered and policies created, you need to configure your app to use your Azure AD B2C tenant.</span><span class="sxs-lookup"><span data-stu-id="ad633-227">Now that you have a web app registered and policies created, you need to configure your app to use your Azure AD B2C tenant.</span></span> <span data-ttu-id="ad633-228">In this tutorial, you configure a sample web app you can download from GitHub.</span><span class="sxs-lookup"><span data-stu-id="ad633-228">In this tutorial, you configure a sample web app you can download from GitHub.</span></span> 

<span data-ttu-id="ad633-229">[Download a zip file](https://github.com/Azure-Samples/active-directory-b2c-dotnet-webapp-and-webapi/archive/master.zip) or clone the sample web app from GitHub.</span><span class="sxs-lookup"><span data-stu-id="ad633-229">[Download a zip file](https://github.com/Azure-Samples/active-directory-b2c-dotnet-webapp-and-webapi/archive/master.zip) or clone the sample web app from GitHub.</span></span> <span data-ttu-id="ad633-230">Make sure that you extract the sample file in a folder where the total character length of the path is less than 260.</span><span class="sxs-lookup"><span data-stu-id="ad633-230">Make sure that you extract the sample file in a folder where the total character length of the path is less than 260.</span></span>

```
git clone https://github.com/Azure-Samples/active-directory-b2c-dotnet-webapp-and-webapi.git
```

<span data-ttu-id="ad633-231">The sample ASP.NET web app is a simple task list app for creating and updating a to-do list.</span><span class="sxs-lookup"><span data-stu-id="ad633-231">The sample ASP.NET web app is a simple task list app for creating and updating a to-do list.</span></span> <span data-ttu-id="ad633-232">The app uses [Microsoft OWIN middleware components](https://docs.microsoft.com/aspnet/aspnet/overview/owin-and-katana/) to let users sign up to use the app in your Azure AD B2C tenant.</span><span class="sxs-lookup"><span data-stu-id="ad633-232">The app uses [Microsoft OWIN middleware components](https://docs.microsoft.com/aspnet/aspnet/overview/owin-and-katana/) to let users sign up to use the app in your Azure AD B2C tenant.</span></span> <span data-ttu-id="ad633-233">By creating an Azure AD B2C policy, users can use a social account or create an account to use as their identity to access the app.</span><span class="sxs-lookup"><span data-stu-id="ad633-233">By creating an Azure AD B2C policy, users can use a social account or create an account to use as their identity to access the app.</span></span> 

<span data-ttu-id="ad633-234">There are two projects in the sample solution:</span><span class="sxs-lookup"><span data-stu-id="ad633-234">There are two projects in the sample solution:</span></span>

<span data-ttu-id="ad633-235">**Web app sample app (TaskWebApp):** Web app to create and edit a task list.</span><span class="sxs-lookup"><span data-stu-id="ad633-235">**Web app sample app (TaskWebApp):** Web app to create and edit a task list.</span></span> <span data-ttu-id="ad633-236">The web app uses the **sign-up or sign-in** policy to sign up or sign in users.</span><span class="sxs-lookup"><span data-stu-id="ad633-236">The web app uses the **sign-up or sign-in** policy to sign up or sign in users.</span></span>

<span data-ttu-id="ad633-237">**Web API sample app (TaskService):** Web API that supports the create, read, update, and delete task list functionality.</span><span class="sxs-lookup"><span data-stu-id="ad633-237">**Web API sample app (TaskService):** Web API that supports the create, read, update, and delete task list functionality.</span></span> <span data-ttu-id="ad633-238">The web API is protected by Azure AD B2C and called by the web app.</span><span class="sxs-lookup"><span data-stu-id="ad633-238">The web API is protected by Azure AD B2C and called by the web app.</span></span>

<span data-ttu-id="ad633-239">You need to change the app to use the app registration in your tenant, which includes the application ID and the key that you previously recorded.</span><span class="sxs-lookup"><span data-stu-id="ad633-239">You need to change the app to use the app registration in your tenant, which includes the application ID and the key that you previously recorded.</span></span> <span data-ttu-id="ad633-240">You also need to configure the policies you created.</span><span class="sxs-lookup"><span data-stu-id="ad633-240">You also need to configure the policies you created.</span></span> <span data-ttu-id="ad633-241">The sample web app defines the configuration values as app settings in the Web.config file.</span><span class="sxs-lookup"><span data-stu-id="ad633-241">The sample web app defines the configuration values as app settings in the Web.config file.</span></span> <span data-ttu-id="ad633-242">To change the app settings:</span><span class="sxs-lookup"><span data-stu-id="ad633-242">To change the app settings:</span></span>

1. <span data-ttu-id="ad633-243">Open the **B2C-WebAPI-DotNet** solution in Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="ad633-243">Open the **B2C-WebAPI-DotNet** solution in Visual Studio.</span></span>

2. <span data-ttu-id="ad633-244">In the **TaskWebApp** web app project, open the **Web.config** file.</span><span class="sxs-lookup"><span data-stu-id="ad633-244">In the **TaskWebApp** web app project, open the **Web.config** file.</span></span> <span data-ttu-id="ad633-245">Replace the value for `ida:Tenant` with the name of the tenant that you created.</span><span class="sxs-lookup"><span data-stu-id="ad633-245">Replace the value for `ida:Tenant` with the name of the tenant that you created.</span></span> <span data-ttu-id="ad633-246">Replace the value for `ida:ClientId` with the application ID that you recorded.</span><span class="sxs-lookup"><span data-stu-id="ad633-246">Replace the value for `ida:ClientId` with the application ID that you recorded.</span></span> <span data-ttu-id="ad633-247">Replace the value of `ida:ClientSecret` with the key that you recorded.</span><span class="sxs-lookup"><span data-stu-id="ad633-247">Replace the value of `ida:ClientSecret` with the key that you recorded.</span></span>

3. <span data-ttu-id="ad633-248">In the **Web.config** file, replace the value for `ida:SignUpSignInPolicyId` with `b2c_1_SiUpIn`.</span><span class="sxs-lookup"><span data-stu-id="ad633-248">In the **Web.config** file, replace the value for `ida:SignUpSignInPolicyId` with `b2c_1_SiUpIn`.</span></span> <span data-ttu-id="ad633-249">Replace the value for `ida:EditProfilePolicyId` with `b2c_1_SiPe`.</span><span class="sxs-lookup"><span data-stu-id="ad633-249">Replace the value for `ida:EditProfilePolicyId` with `b2c_1_SiPe`.</span></span> <span data-ttu-id="ad633-250">Replace the value for `ida:ResetPasswordPolicyId` with `b2c_1_SSPR`.</span><span class="sxs-lookup"><span data-stu-id="ad633-250">Replace the value for `ida:ResetPasswordPolicyId` with `b2c_1_SSPR`.</span></span>

## <a name="run-the-sample-web-app"></a><span data-ttu-id="ad633-251">Run the sample web app</span><span class="sxs-lookup"><span data-stu-id="ad633-251">Run the sample web app</span></span>

<span data-ttu-id="ad633-252">In Solution Explorer, right-click on the **TaskWebApp** project and click **Set as StartUp Project**</span><span class="sxs-lookup"><span data-stu-id="ad633-252">In Solution Explorer, right-click on the **TaskWebApp** project and click **Set as StartUp Project**</span></span>

<span data-ttu-id="ad633-253">Press **F5** to start the web app.</span><span class="sxs-lookup"><span data-stu-id="ad633-253">Press **F5** to start the web app.</span></span> <span data-ttu-id="ad633-254">The default browser launches to the local web site address `https://localhost:44316/`.</span><span class="sxs-lookup"><span data-stu-id="ad633-254">The default browser launches to the local web site address `https://localhost:44316/`.</span></span> 

<span data-ttu-id="ad633-255">The sample app supports sign up, sign in, editing a profile, and password reset.</span><span class="sxs-lookup"><span data-stu-id="ad633-255">The sample app supports sign up, sign in, editing a profile, and password reset.</span></span> <span data-ttu-id="ad633-256">This tutorial highlights how a user signs up to use the app using an email address.</span><span class="sxs-lookup"><span data-stu-id="ad633-256">This tutorial highlights how a user signs up to use the app using an email address.</span></span> <span data-ttu-id="ad633-257">You can explore other scenarios on your own.</span><span class="sxs-lookup"><span data-stu-id="ad633-257">You can explore other scenarios on your own.</span></span>

### <a name="sign-up-using-an-email-address"></a><span data-ttu-id="ad633-258">Sign up using an email address</span><span class="sxs-lookup"><span data-stu-id="ad633-258">Sign up using an email address</span></span>

1. <span data-ttu-id="ad633-259">Click the **Sign up / Sign in** link in the top banner to sign up as a user of the web app.</span><span class="sxs-lookup"><span data-stu-id="ad633-259">Click the **Sign up / Sign in** link in the top banner to sign up as a user of the web app.</span></span> <span data-ttu-id="ad633-260">This uses the **b2c_1_SiUpIn** policy you defined in a previous step.</span><span class="sxs-lookup"><span data-stu-id="ad633-260">This uses the **b2c_1_SiUpIn** policy you defined in a previous step.</span></span>

2. <span data-ttu-id="ad633-261">Azure AD B2C presents a sign-in page with a sign-up link.</span><span class="sxs-lookup"><span data-stu-id="ad633-261">Azure AD B2C presents a sign-in page with a sign-up link.</span></span> <span data-ttu-id="ad633-262">Since you don't have an account yet, click the **Sign up now** link.</span><span class="sxs-lookup"><span data-stu-id="ad633-262">Since you don't have an account yet, click the **Sign up now** link.</span></span> 

3. <span data-ttu-id="ad633-263">The sign-up workflow presents a page to collect and verify the user's identity using an email address.</span><span class="sxs-lookup"><span data-stu-id="ad633-263">The sign-up workflow presents a page to collect and verify the user's identity using an email address.</span></span> <span data-ttu-id="ad633-264">The sign-up workflow also collects the user's password and the requested attributes defined in the policy.</span><span class="sxs-lookup"><span data-stu-id="ad633-264">The sign-up workflow also collects the user's password and the requested attributes defined in the policy.</span></span>

    <span data-ttu-id="ad633-265">Use a valid email address and validate using the verification code.</span><span class="sxs-lookup"><span data-stu-id="ad633-265">Use a valid email address and validate using the verification code.</span></span> <span data-ttu-id="ad633-266">Set a password.</span><span class="sxs-lookup"><span data-stu-id="ad633-266">Set a password.</span></span> <span data-ttu-id="ad633-267">Enter values for the requested attributes.</span><span class="sxs-lookup"><span data-stu-id="ad633-267">Enter values for the requested attributes.</span></span> 

    ![Sign-up workflow](media/active-directory-b2c-tutorials-web-app/sign-up-workflow.png)

4. <span data-ttu-id="ad633-269">Click **Create** to create a local account in the Azure AD B2C tenant.</span><span class="sxs-lookup"><span data-stu-id="ad633-269">Click **Create** to create a local account in the Azure AD B2C tenant.</span></span>

<span data-ttu-id="ad633-270">Now the user can use their email address to sign in and use the web app.</span><span class="sxs-lookup"><span data-stu-id="ad633-270">Now the user can use their email address to sign in and use the web app.</span></span>

## <a name="clean-up-resources"></a><span data-ttu-id="ad633-271">Clean up resources</span><span class="sxs-lookup"><span data-stu-id="ad633-271">Clean up resources</span></span>

<span data-ttu-id="ad633-272">You can use your Azure AD B2C tenant if you plan to try other Azure AD B2C tutorials.</span><span class="sxs-lookup"><span data-stu-id="ad633-272">You can use your Azure AD B2C tenant if you plan to try other Azure AD B2C tutorials.</span></span> <span data-ttu-id="ad633-273">When no longer needed, you can [delete your Azure AD B2C tenant](active-directory-b2c-faqs.md#how-do-i-delete-my-azure-ad-b2c-tenant).</span><span class="sxs-lookup"><span data-stu-id="ad633-273">When no longer needed, you can [delete your Azure AD B2C tenant](active-directory-b2c-faqs.md#how-do-i-delete-my-azure-ad-b2c-tenant).</span></span>

## <a name="next-steps"></a><span data-ttu-id="ad633-274">Next steps</span><span class="sxs-lookup"><span data-stu-id="ad633-274">Next steps</span></span>

<span data-ttu-id="ad633-275">In this tutorial, you learned how to create an Azure AD B2C tenant, create policies, and update the sample web app to use your Azure AD B2C tenant.</span><span class="sxs-lookup"><span data-stu-id="ad633-275">In this tutorial, you learned how to create an Azure AD B2C tenant, create policies, and update the sample web app to use your Azure AD B2C tenant.</span></span> <span data-ttu-id="ad633-276">Continue to the next tutorial to learn how to register, configure, and call a ASP.NET web API protected by your Azure AD B2C tenant.</span><span class="sxs-lookup"><span data-stu-id="ad633-276">Continue to the next tutorial to learn how to register, configure, and call a ASP.NET web API protected by your Azure AD B2C tenant.</span></span>

> [!div class="nextstepaction"]
> [<span data-ttu-id="ad633-277">Tutorial: Use Azure Active Directory B2C to protect an ASP.NET web API</span><span class="sxs-lookup"><span data-stu-id="ad633-277">Tutorial: Use Azure Active Directory B2C to protect an ASP.NET web API</span></span>](active-directory-b2c-tutorials-web-api.md)
