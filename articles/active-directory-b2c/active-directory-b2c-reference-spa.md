---
title: Single-page apps using implicit flow in Azure Active Directory B2C | Microsoft Docs
description: Learn how to build single-page apps directly by using OAuth 2.0 implicit flow with Azure Active Directory B2C.
services: active-directory-b2c
author: davidmu1
manager: mtillman
ms.service: active-directory
ms.workload: identity
ms.topic: conceptual
ms.date: 02/06/2017
ms.author: davidmu
ms.component: B2C
ms.openlocfilehash: b00eb1b2d25187dc50be53425ebae347edde33b4
ms.sourcegitcommit: d1451406a010fd3aa854dc8e5b77dc5537d8050e
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 09/13/2018
ms.locfileid: "44776951"
---
# <a name="azure-ad-b2c-single-page-app-sign-in-by-using-oauth-20-implicit-flow"></a><span data-ttu-id="eb07a-103">Azure AD B2C: Single-page app sign-in by using OAuth 2.0 implicit flow</span><span class="sxs-lookup"><span data-stu-id="eb07a-103">Azure AD B2C: Single-page app sign-in by using OAuth 2.0 implicit flow</span></span>

<span data-ttu-id="eb07a-104">Many modern apps have a single-page app front end that primarily is written in JavaScript.</span><span class="sxs-lookup"><span data-stu-id="eb07a-104">Many modern apps have a single-page app front end that primarily is written in JavaScript.</span></span> <span data-ttu-id="eb07a-105">Often, the app is written by using a framework like AngularJS, Ember.js, or Durandal.</span><span class="sxs-lookup"><span data-stu-id="eb07a-105">Often, the app is written by using a framework like AngularJS, Ember.js, or Durandal.</span></span> <span data-ttu-id="eb07a-106">Single-page apps and other JavaScript apps that run primarily in a browser have some additional challenges for authentication:</span><span class="sxs-lookup"><span data-stu-id="eb07a-106">Single-page apps and other JavaScript apps that run primarily in a browser have some additional challenges for authentication:</span></span>

* <span data-ttu-id="eb07a-107">The security characteristics of these apps are significantly different from traditional server-based web applications.</span><span class="sxs-lookup"><span data-stu-id="eb07a-107">The security characteristics of these apps are significantly different from traditional server-based web applications.</span></span>
* <span data-ttu-id="eb07a-108">Many authorization servers and identity providers do not support cross-origin resource sharing (CORS) requests.</span><span class="sxs-lookup"><span data-stu-id="eb07a-108">Many authorization servers and identity providers do not support cross-origin resource sharing (CORS) requests.</span></span>
* <span data-ttu-id="eb07a-109">Full-page browser redirects away from the app can be significantly invasive to the user experience.</span><span class="sxs-lookup"><span data-stu-id="eb07a-109">Full-page browser redirects away from the app can be significantly invasive to the user experience.</span></span>

<span data-ttu-id="eb07a-110">To support these applications, Azure Active Directory B2C (Azure AD B2C) uses the OAuth 2.0 implicit flow.</span><span class="sxs-lookup"><span data-stu-id="eb07a-110">To support these applications, Azure Active Directory B2C (Azure AD B2C) uses the OAuth 2.0 implicit flow.</span></span> <span data-ttu-id="eb07a-111">The OAuth 2.0 authorization implicit grant flow is described in [section 4.2 of the OAuth 2.0 specification](http://tools.ietf.org/html/rfc6749).</span><span class="sxs-lookup"><span data-stu-id="eb07a-111">The OAuth 2.0 authorization implicit grant flow is described in [section 4.2 of the OAuth 2.0 specification](http://tools.ietf.org/html/rfc6749).</span></span> <span data-ttu-id="eb07a-112">In implicit flow, the app receives tokens directly from the Azure Active Directory (Azure AD) authorize endpoint, without any server-to-server exchange.</span><span class="sxs-lookup"><span data-stu-id="eb07a-112">In implicit flow, the app receives tokens directly from the Azure Active Directory (Azure AD) authorize endpoint, without any server-to-server exchange.</span></span> <span data-ttu-id="eb07a-113">All authentication logic and session handling takes place entirely in the JavaScript client, without additional page redirects.</span><span class="sxs-lookup"><span data-stu-id="eb07a-113">All authentication logic and session handling takes place entirely in the JavaScript client, without additional page redirects.</span></span>

<span data-ttu-id="eb07a-114">Azure AD B2C extends the standard OAuth 2.0 implicit flow to more than simple authentication and authorization.</span><span class="sxs-lookup"><span data-stu-id="eb07a-114">Azure AD B2C extends the standard OAuth 2.0 implicit flow to more than simple authentication and authorization.</span></span> <span data-ttu-id="eb07a-115">Azure AD B2C introduces the [policy parameter](active-directory-b2c-reference-policies.md).</span><span class="sxs-lookup"><span data-stu-id="eb07a-115">Azure AD B2C introduces the [policy parameter](active-directory-b2c-reference-policies.md).</span></span> <span data-ttu-id="eb07a-116">With the policy parameter, you can use OAuth 2.0 to add user experiences to your app, such as sign-up, sign-in, and profile management.</span><span class="sxs-lookup"><span data-stu-id="eb07a-116">With the policy parameter, you can use OAuth 2.0 to add user experiences to your app, such as sign-up, sign-in, and profile management.</span></span> <span data-ttu-id="eb07a-117">In this article, we show you how to use the implicit flow and Azure AD to implement each of these experiences in your single-page applications.</span><span class="sxs-lookup"><span data-stu-id="eb07a-117">In this article, we show you how to use the implicit flow and Azure AD to implement each of these experiences in your single-page applications.</span></span> <span data-ttu-id="eb07a-118">To help you get started, take a look at our [Node.js](https://github.com/Azure-Samples/active-directory-b2c-javascript-singlepageapp-nodejs-webapi) and [Microsoft .NET](https://github.com/Azure-Samples/active-directory-b2c-javascript-singlepageapp-dotnet-webapi) samples.</span><span class="sxs-lookup"><span data-stu-id="eb07a-118">To help you get started, take a look at our [Node.js](https://github.com/Azure-Samples/active-directory-b2c-javascript-singlepageapp-nodejs-webapi) and [Microsoft .NET](https://github.com/Azure-Samples/active-directory-b2c-javascript-singlepageapp-dotnet-webapi) samples.</span></span>

<span data-ttu-id="eb07a-119">In the example HTTP requests in this article, we use our sample Azure AD B2C directory, **fabrikamb2c.onmicrosoft.com**.</span><span class="sxs-lookup"><span data-stu-id="eb07a-119">In the example HTTP requests in this article, we use our sample Azure AD B2C directory, **fabrikamb2c.onmicrosoft.com**.</span></span> <span data-ttu-id="eb07a-120">We also use our own sample application and policies.</span><span class="sxs-lookup"><span data-stu-id="eb07a-120">We also use our own sample application and policies.</span></span> <span data-ttu-id="eb07a-121">You can try the requests yourself by using these values, or you can replace them with your own values.</span><span class="sxs-lookup"><span data-stu-id="eb07a-121">You can try the requests yourself by using these values, or you can replace them with your own values.</span></span>
<span data-ttu-id="eb07a-122">Learn how to [get your own Azure AD B2C directory, application, and policies](#use-your-own-b2c-tenant).</span><span class="sxs-lookup"><span data-stu-id="eb07a-122">Learn how to [get your own Azure AD B2C directory, application, and policies](#use-your-own-b2c-tenant).</span></span>


## <a name="protocol-diagram"></a><span data-ttu-id="eb07a-123">Protocol diagram</span><span class="sxs-lookup"><span data-stu-id="eb07a-123">Protocol diagram</span></span>

<span data-ttu-id="eb07a-124">The implicit sign-in flow looks something like the following figure.</span><span class="sxs-lookup"><span data-stu-id="eb07a-124">The implicit sign-in flow looks something like the following figure.</span></span> <span data-ttu-id="eb07a-125">Each step is described in detail later in the article.</span><span class="sxs-lookup"><span data-stu-id="eb07a-125">Each step is described in detail later in the article.</span></span>

![OpenID Connect swimlanes](../media/active-directory-v2-flows/convergence_scenarios_implicit.png)

## <a name="send-authentication-requests"></a><span data-ttu-id="eb07a-127">Send authentication requests</span><span class="sxs-lookup"><span data-stu-id="eb07a-127">Send authentication requests</span></span>
<span data-ttu-id="eb07a-128">When your web app needs to authenticate the user and execute a policy, it directs the user to the `/authorize` endpoint.</span><span class="sxs-lookup"><span data-stu-id="eb07a-128">When your web app needs to authenticate the user and execute a policy, it directs the user to the `/authorize` endpoint.</span></span> <span data-ttu-id="eb07a-129">This is the interactive portion of the flow, where the user takes action, depending on the policy.</span><span class="sxs-lookup"><span data-stu-id="eb07a-129">This is the interactive portion of the flow, where the user takes action, depending on the policy.</span></span> <span data-ttu-id="eb07a-130">The user gets an ID token from the Azure AD endpoint.</span><span class="sxs-lookup"><span data-stu-id="eb07a-130">The user gets an ID token from the Azure AD endpoint.</span></span>

<span data-ttu-id="eb07a-131">In this request, the client indicates in the `scope` parameter the permissions that it needs to acquire from the user.</span><span class="sxs-lookup"><span data-stu-id="eb07a-131">In this request, the client indicates in the `scope` parameter the permissions that it needs to acquire from the user.</span></span> <span data-ttu-id="eb07a-132">In the `p` parameter, it indicates the policy to execute.</span><span class="sxs-lookup"><span data-stu-id="eb07a-132">In the `p` parameter, it indicates the policy to execute.</span></span> <span data-ttu-id="eb07a-133">The following three examples (with line breaks for readability) each use a different policy.</span><span class="sxs-lookup"><span data-stu-id="eb07a-133">The following three examples (with line breaks for readability) each use a different policy.</span></span> <span data-ttu-id="eb07a-134">To get a feel for how each request works, try pasting the request into a browser and running it.</span><span class="sxs-lookup"><span data-stu-id="eb07a-134">To get a feel for how each request works, try pasting the request into a browser and running it.</span></span>

### <a name="use-a-sign-in-policy"></a><span data-ttu-id="eb07a-135">Use a sign-in policy</span><span class="sxs-lookup"><span data-stu-id="eb07a-135">Use a sign-in policy</span></span>
```
GET https://fabrikamb2c.b2clogin.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/authorize?
client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6
&response_type=id_token+token
&redirect_uri=https%3A%2F%2Faadb2cplayground.azurewebsites.net%2F
&response_mode=fragment
&scope=openid%20offline_access
&state=arbitrary_data_you_can_receive_in_the_response
&nonce=12345
&p=b2c_1_sign_in
```

### <a name="use-a-sign-up-policy"></a><span data-ttu-id="eb07a-136">Use a sign-up policy</span><span class="sxs-lookup"><span data-stu-id="eb07a-136">Use a sign-up policy</span></span>
```
GET https://fabrikamb2c.b2clogin.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/authorize?
client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6
&response_type=id_token+token
&redirect_uri=https%3A%2F%2Faadb2cplayground.azurewebsites.net%2F
&response_mode=fragment
&scope=openid%20offline_access
&state=arbitrary_data_you_can_receive_in_the_response
&nonce=12345
&p=b2c_1_sign_up
```

### <a name="use-an-edit-profile-policy"></a><span data-ttu-id="eb07a-137">Use an edit-profile policy</span><span class="sxs-lookup"><span data-stu-id="eb07a-137">Use an edit-profile policy</span></span>
```
GET https://fabrikamb2c.b2clogin.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/authorize?
client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6
&response_type=id_token+token
&redirect_uri=https%3A%2F%2Faadb2cplayground.azurewebsites.net%2F
&response_mode=fragment
&scope=openid%20offline_access
&state=arbitrary_data_you_can_receive_in_the_response
&nonce=12345
&p=b2c_1_edit_profile
```

| <span data-ttu-id="eb07a-138">Parameter</span><span class="sxs-lookup"><span data-stu-id="eb07a-138">Parameter</span></span> | <span data-ttu-id="eb07a-139">Required?</span><span class="sxs-lookup"><span data-stu-id="eb07a-139">Required?</span></span> | <span data-ttu-id="eb07a-140">Description</span><span class="sxs-lookup"><span data-stu-id="eb07a-140">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="eb07a-141">client_id</span><span class="sxs-lookup"><span data-stu-id="eb07a-141">client_id</span></span> |<span data-ttu-id="eb07a-142">Required</span><span class="sxs-lookup"><span data-stu-id="eb07a-142">Required</span></span> |<span data-ttu-id="eb07a-143">The application ID assigned to your app in the [Azure portal](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="eb07a-143">The application ID assigned to your app in the [Azure portal](https://portal.azure.com).</span></span> |
| <span data-ttu-id="eb07a-144">response_type</span><span class="sxs-lookup"><span data-stu-id="eb07a-144">response_type</span></span> |<span data-ttu-id="eb07a-145">Required</span><span class="sxs-lookup"><span data-stu-id="eb07a-145">Required</span></span> |<span data-ttu-id="eb07a-146">Must include `id_token` for OpenID Connect sign-in.</span><span class="sxs-lookup"><span data-stu-id="eb07a-146">Must include `id_token` for OpenID Connect sign-in.</span></span> <span data-ttu-id="eb07a-147">It also can include the response type `token`.</span><span class="sxs-lookup"><span data-stu-id="eb07a-147">It also can include the response type `token`.</span></span> <span data-ttu-id="eb07a-148">If you use `token`, your app can immediately receive an access token from the authorize endpoint, without making a second request to the authorize endpoint.</span><span class="sxs-lookup"><span data-stu-id="eb07a-148">If you use `token`, your app can immediately receive an access token from the authorize endpoint, without making a second request to the authorize endpoint.</span></span>  <span data-ttu-id="eb07a-149">If you use the `token` response type, the `scope` parameter must contain a scope that indicates which resource to issue the token for.</span><span class="sxs-lookup"><span data-stu-id="eb07a-149">If you use the `token` response type, the `scope` parameter must contain a scope that indicates which resource to issue the token for.</span></span> |
| <span data-ttu-id="eb07a-150">redirect_uri</span><span class="sxs-lookup"><span data-stu-id="eb07a-150">redirect_uri</span></span> |<span data-ttu-id="eb07a-151">Recommended</span><span class="sxs-lookup"><span data-stu-id="eb07a-151">Recommended</span></span> |<span data-ttu-id="eb07a-152">The redirect URI of your app, where authentication responses can be sent and received by your app.</span><span class="sxs-lookup"><span data-stu-id="eb07a-152">The redirect URI of your app, where authentication responses can be sent and received by your app.</span></span> <span data-ttu-id="eb07a-153">It must exactly match one of the redirect URIs that you registered in the portal, except that it must be URL-encoded.</span><span class="sxs-lookup"><span data-stu-id="eb07a-153">It must exactly match one of the redirect URIs that you registered in the portal, except that it must be URL-encoded.</span></span> |
| <span data-ttu-id="eb07a-154">response_mode</span><span class="sxs-lookup"><span data-stu-id="eb07a-154">response_mode</span></span> |<span data-ttu-id="eb07a-155">Recommended</span><span class="sxs-lookup"><span data-stu-id="eb07a-155">Recommended</span></span> |<span data-ttu-id="eb07a-156">Specifies the method to use to send the resulting token back to your app.</span><span class="sxs-lookup"><span data-stu-id="eb07a-156">Specifies the method to use to send the resulting token back to your app.</span></span>  <span data-ttu-id="eb07a-157">For implicit flows, use `fragment`.</span><span class="sxs-lookup"><span data-stu-id="eb07a-157">For implicit flows, use `fragment`.</span></span> |
| <span data-ttu-id="eb07a-158">scope</span><span class="sxs-lookup"><span data-stu-id="eb07a-158">scope</span></span> |<span data-ttu-id="eb07a-159">Required</span><span class="sxs-lookup"><span data-stu-id="eb07a-159">Required</span></span> |<span data-ttu-id="eb07a-160">A space-separated list of scopes.</span><span class="sxs-lookup"><span data-stu-id="eb07a-160">A space-separated list of scopes.</span></span> <span data-ttu-id="eb07a-161">A single scope value indicates to Azure AD both of the permissions that are being requested.</span><span class="sxs-lookup"><span data-stu-id="eb07a-161">A single scope value indicates to Azure AD both of the permissions that are being requested.</span></span> <span data-ttu-id="eb07a-162">The `openid` scope indicates a permission to sign in the user and get data about the user in the form of ID tokens.</span><span class="sxs-lookup"><span data-stu-id="eb07a-162">The `openid` scope indicates a permission to sign in the user and get data about the user in the form of ID tokens.</span></span> <span data-ttu-id="eb07a-163">(We'll talk about this more later in the article.) The `offline_access` scope is optional for web apps.</span><span class="sxs-lookup"><span data-stu-id="eb07a-163">(We'll talk about this more later in the article.) The `offline_access` scope is optional for web apps.</span></span> <span data-ttu-id="eb07a-164">It indicates that your app needs a refresh token for long-lived access to resources.</span><span class="sxs-lookup"><span data-stu-id="eb07a-164">It indicates that your app needs a refresh token for long-lived access to resources.</span></span> |
| <span data-ttu-id="eb07a-165">state</span><span class="sxs-lookup"><span data-stu-id="eb07a-165">state</span></span> |<span data-ttu-id="eb07a-166">Recommended</span><span class="sxs-lookup"><span data-stu-id="eb07a-166">Recommended</span></span> |<span data-ttu-id="eb07a-167">A value included in the request that also is returned in the token response.</span><span class="sxs-lookup"><span data-stu-id="eb07a-167">A value included in the request that also is returned in the token response.</span></span> <span data-ttu-id="eb07a-168">It can be a string of any content that you want to use.</span><span class="sxs-lookup"><span data-stu-id="eb07a-168">It can be a string of any content that you want to use.</span></span> <span data-ttu-id="eb07a-169">Usually, a randomly generated, unique value is used, to prevent cross-site request forgery attacks.</span><span class="sxs-lookup"><span data-stu-id="eb07a-169">Usually, a randomly generated, unique value is used, to prevent cross-site request forgery attacks.</span></span> <span data-ttu-id="eb07a-170">The state is also used to encode information about the user's state in the app before the authentication request occurred, like the page they were on.</span><span class="sxs-lookup"><span data-stu-id="eb07a-170">The state is also used to encode information about the user's state in the app before the authentication request occurred, like the page they were on.</span></span> |
| <span data-ttu-id="eb07a-171">nonce</span><span class="sxs-lookup"><span data-stu-id="eb07a-171">nonce</span></span> |<span data-ttu-id="eb07a-172">Required</span><span class="sxs-lookup"><span data-stu-id="eb07a-172">Required</span></span> |<span data-ttu-id="eb07a-173">A value included in the request (generated by the app) that is included in the resulting ID token as a claim.</span><span class="sxs-lookup"><span data-stu-id="eb07a-173">A value included in the request (generated by the app) that is included in the resulting ID token as a claim.</span></span> <span data-ttu-id="eb07a-174">The app can then verify this value to mitigate token replay attacks.</span><span class="sxs-lookup"><span data-stu-id="eb07a-174">The app can then verify this value to mitigate token replay attacks.</span></span> <span data-ttu-id="eb07a-175">Usually, the value is a randomized, unique string that can be used to identify the origin of the request.</span><span class="sxs-lookup"><span data-stu-id="eb07a-175">Usually, the value is a randomized, unique string that can be used to identify the origin of the request.</span></span> |
| <span data-ttu-id="eb07a-176">p</span><span class="sxs-lookup"><span data-stu-id="eb07a-176">p</span></span> |<span data-ttu-id="eb07a-177">Required</span><span class="sxs-lookup"><span data-stu-id="eb07a-177">Required</span></span> |<span data-ttu-id="eb07a-178">The policy to execute.</span><span class="sxs-lookup"><span data-stu-id="eb07a-178">The policy to execute.</span></span> <span data-ttu-id="eb07a-179">It's the name of a policy that is created in your Azure AD B2C tenant.</span><span class="sxs-lookup"><span data-stu-id="eb07a-179">It's the name of a policy that is created in your Azure AD B2C tenant.</span></span> <span data-ttu-id="eb07a-180">The policy name value should begin with **b2c\_1\_**.</span><span class="sxs-lookup"><span data-stu-id="eb07a-180">The policy name value should begin with **b2c\_1\_**.</span></span> <span data-ttu-id="eb07a-181">For more information, see [Azure AD B2C built-in policies](active-directory-b2c-reference-policies.md).</span><span class="sxs-lookup"><span data-stu-id="eb07a-181">For more information, see [Azure AD B2C built-in policies](active-directory-b2c-reference-policies.md).</span></span> |
| <span data-ttu-id="eb07a-182">prompt</span><span class="sxs-lookup"><span data-stu-id="eb07a-182">prompt</span></span> |<span data-ttu-id="eb07a-183">Optional</span><span class="sxs-lookup"><span data-stu-id="eb07a-183">Optional</span></span> |<span data-ttu-id="eb07a-184">The type of user interaction that's required.</span><span class="sxs-lookup"><span data-stu-id="eb07a-184">The type of user interaction that's required.</span></span> <span data-ttu-id="eb07a-185">Currently, the only valid value is `login`.</span><span class="sxs-lookup"><span data-stu-id="eb07a-185">Currently, the only valid value is `login`.</span></span> <span data-ttu-id="eb07a-186">This forces the user to enter their credentials on that request.</span><span class="sxs-lookup"><span data-stu-id="eb07a-186">This forces the user to enter their credentials on that request.</span></span> <span data-ttu-id="eb07a-187">Single sign-on will not take effect.</span><span class="sxs-lookup"><span data-stu-id="eb07a-187">Single sign-on will not take effect.</span></span> |

<span data-ttu-id="eb07a-188">At this point, the user is asked to complete the policy's workflow.</span><span class="sxs-lookup"><span data-stu-id="eb07a-188">At this point, the user is asked to complete the policy's workflow.</span></span> <span data-ttu-id="eb07a-189">This might involve the user entering their username and password, signing in with a social identity, signing up for the directory, or any other number of steps.</span><span class="sxs-lookup"><span data-stu-id="eb07a-189">This might involve the user entering their username and password, signing in with a social identity, signing up for the directory, or any other number of steps.</span></span> <span data-ttu-id="eb07a-190">User actions depend on how the policy is defined.</span><span class="sxs-lookup"><span data-stu-id="eb07a-190">User actions depend on how the policy is defined.</span></span>

<span data-ttu-id="eb07a-191">After the user completes the policy, Azure AD returns a response to your app at the value you used for `redirect_uri`.</span><span class="sxs-lookup"><span data-stu-id="eb07a-191">After the user completes the policy, Azure AD returns a response to your app at the value you used for `redirect_uri`.</span></span> <span data-ttu-id="eb07a-192">It uses the method specified in the `response_mode` parameter.</span><span class="sxs-lookup"><span data-stu-id="eb07a-192">It uses the method specified in the `response_mode` parameter.</span></span> <span data-ttu-id="eb07a-193">The response is exactly the same for each of the user action scenarios, independent of the policy that was executed.</span><span class="sxs-lookup"><span data-stu-id="eb07a-193">The response is exactly the same for each of the user action scenarios, independent of the policy that was executed.</span></span>

### <a name="successful-response"></a><span data-ttu-id="eb07a-194">Successful response</span><span class="sxs-lookup"><span data-stu-id="eb07a-194">Successful response</span></span>
<span data-ttu-id="eb07a-195">A successful response that uses `response_mode=fragment` and `response_type=id_token+token` looks like the following, with line breaks for legibility:</span><span class="sxs-lookup"><span data-stu-id="eb07a-195">A successful response that uses `response_mode=fragment` and `response_type=id_token+token` looks like the following, with line breaks for legibility:</span></span>

```
GET https://aadb2cplayground.azurewebsites.net/#
access_token=eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...
&token_type=Bearer
&expires_in=3599
&scope="90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6 offline_access",
&id_token=eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...
&state=arbitrary_data_you_sent_earlier
```

| <span data-ttu-id="eb07a-196">Parameter</span><span class="sxs-lookup"><span data-stu-id="eb07a-196">Parameter</span></span> | <span data-ttu-id="eb07a-197">Description</span><span class="sxs-lookup"><span data-stu-id="eb07a-197">Description</span></span> |
| --- | --- |
| <span data-ttu-id="eb07a-198">access_token</span><span class="sxs-lookup"><span data-stu-id="eb07a-198">access_token</span></span> |<span data-ttu-id="eb07a-199">The access token that the app requested.</span><span class="sxs-lookup"><span data-stu-id="eb07a-199">The access token that the app requested.</span></span>  <span data-ttu-id="eb07a-200">The access token should not be decoded or otherwise inspected.</span><span class="sxs-lookup"><span data-stu-id="eb07a-200">The access token should not be decoded or otherwise inspected.</span></span> <span data-ttu-id="eb07a-201">It can be treated as an opaque string.</span><span class="sxs-lookup"><span data-stu-id="eb07a-201">It can be treated as an opaque string.</span></span> |
| <span data-ttu-id="eb07a-202">token_type</span><span class="sxs-lookup"><span data-stu-id="eb07a-202">token_type</span></span> |<span data-ttu-id="eb07a-203">The token type value.</span><span class="sxs-lookup"><span data-stu-id="eb07a-203">The token type value.</span></span> <span data-ttu-id="eb07a-204">The only type that Azure AD supports is Bearer.</span><span class="sxs-lookup"><span data-stu-id="eb07a-204">The only type that Azure AD supports is Bearer.</span></span> |
| <span data-ttu-id="eb07a-205">expires_in</span><span class="sxs-lookup"><span data-stu-id="eb07a-205">expires_in</span></span> |<span data-ttu-id="eb07a-206">The length of time that the access token is valid (in seconds).</span><span class="sxs-lookup"><span data-stu-id="eb07a-206">The length of time that the access token is valid (in seconds).</span></span> |
| <span data-ttu-id="eb07a-207">scope</span><span class="sxs-lookup"><span data-stu-id="eb07a-207">scope</span></span> |<span data-ttu-id="eb07a-208">The scopes that the token is valid for.</span><span class="sxs-lookup"><span data-stu-id="eb07a-208">The scopes that the token is valid for.</span></span> <span data-ttu-id="eb07a-209">You also can use scopes to cache tokens for later use.</span><span class="sxs-lookup"><span data-stu-id="eb07a-209">You also can use scopes to cache tokens for later use.</span></span> |
| <span data-ttu-id="eb07a-210">id_token</span><span class="sxs-lookup"><span data-stu-id="eb07a-210">id_token</span></span> |<span data-ttu-id="eb07a-211">The ID token that the app requested.</span><span class="sxs-lookup"><span data-stu-id="eb07a-211">The ID token that the app requested.</span></span> <span data-ttu-id="eb07a-212">You can use the ID token to verify the user's identity and begin a session with the user.</span><span class="sxs-lookup"><span data-stu-id="eb07a-212">You can use the ID token to verify the user's identity and begin a session with the user.</span></span> <span data-ttu-id="eb07a-213">For more information about ID tokens and their contents, see the [Azure AD B2C token reference](active-directory-b2c-reference-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="eb07a-213">For more information about ID tokens and their contents, see the [Azure AD B2C token reference](active-directory-b2c-reference-tokens.md).</span></span> |
| <span data-ttu-id="eb07a-214">state</span><span class="sxs-lookup"><span data-stu-id="eb07a-214">state</span></span> |<span data-ttu-id="eb07a-215">If a `state` parameter is included in the request, the same value should appear in the response.</span><span class="sxs-lookup"><span data-stu-id="eb07a-215">If a `state` parameter is included in the request, the same value should appear in the response.</span></span> <span data-ttu-id="eb07a-216">The app should verify that the `state` values in the request and response are identical.</span><span class="sxs-lookup"><span data-stu-id="eb07a-216">The app should verify that the `state` values in the request and response are identical.</span></span> |

### <a name="error-response"></a><span data-ttu-id="eb07a-217">Error response</span><span class="sxs-lookup"><span data-stu-id="eb07a-217">Error response</span></span>
<span data-ttu-id="eb07a-218">Error responses also can be sent to the redirect URI so that the app can handle them appropriately:</span><span class="sxs-lookup"><span data-stu-id="eb07a-218">Error responses also can be sent to the redirect URI so that the app can handle them appropriately:</span></span>

```
GET https://aadb2cplayground.azurewebsites.net/#
error=access_denied
&error_description=the+user+canceled+the+authentication
&state=arbitrary_data_you_can_receive_in_the_response
```

| <span data-ttu-id="eb07a-219">Parameter</span><span class="sxs-lookup"><span data-stu-id="eb07a-219">Parameter</span></span> | <span data-ttu-id="eb07a-220">Description</span><span class="sxs-lookup"><span data-stu-id="eb07a-220">Description</span></span> |
| --- | --- |
| <span data-ttu-id="eb07a-221">error</span><span class="sxs-lookup"><span data-stu-id="eb07a-221">error</span></span> |<span data-ttu-id="eb07a-222">An error code string used to classify types of errors that occur.</span><span class="sxs-lookup"><span data-stu-id="eb07a-222">An error code string used to classify types of errors that occur.</span></span> <span data-ttu-id="eb07a-223">You also can use the error code for error handling.</span><span class="sxs-lookup"><span data-stu-id="eb07a-223">You also can use the error code for error handling.</span></span> |
| <span data-ttu-id="eb07a-224">error_description</span><span class="sxs-lookup"><span data-stu-id="eb07a-224">error_description</span></span> |<span data-ttu-id="eb07a-225">A specific error message that can help you identify the root cause of an authentication error.</span><span class="sxs-lookup"><span data-stu-id="eb07a-225">A specific error message that can help you identify the root cause of an authentication error.</span></span> |
| <span data-ttu-id="eb07a-226">state</span><span class="sxs-lookup"><span data-stu-id="eb07a-226">state</span></span> |<span data-ttu-id="eb07a-227">See the full description in the preceding table.</span><span class="sxs-lookup"><span data-stu-id="eb07a-227">See the full description in the preceding table.</span></span> <span data-ttu-id="eb07a-228">If a `state` parameter is included in the request, the same value should appear in the response.</span><span class="sxs-lookup"><span data-stu-id="eb07a-228">If a `state` parameter is included in the request, the same value should appear in the response.</span></span> <span data-ttu-id="eb07a-229">The app should verify that the `state` values in the request and response are identical.</span><span class="sxs-lookup"><span data-stu-id="eb07a-229">The app should verify that the `state` values in the request and response are identical.</span></span>|

## <a name="validate-the-id-token"></a><span data-ttu-id="eb07a-230">Validate the ID token</span><span class="sxs-lookup"><span data-stu-id="eb07a-230">Validate the ID token</span></span>
<span data-ttu-id="eb07a-231">Receiving an ID token is not enough to authenticate the user.</span><span class="sxs-lookup"><span data-stu-id="eb07a-231">Receiving an ID token is not enough to authenticate the user.</span></span> <span data-ttu-id="eb07a-232">You must validate the ID token's signature, and verify the claims in the token per your app's requirements.</span><span class="sxs-lookup"><span data-stu-id="eb07a-232">You must validate the ID token's signature, and verify the claims in the token per your app's requirements.</span></span> <span data-ttu-id="eb07a-233">Azure AD B2C uses [JSON Web Tokens (JWTs)](http://self-issued.info/docs/draft-ietf-oauth-json-web-token.html) and public key cryptography to sign tokens and verify that they are valid.</span><span class="sxs-lookup"><span data-stu-id="eb07a-233">Azure AD B2C uses [JSON Web Tokens (JWTs)](http://self-issued.info/docs/draft-ietf-oauth-json-web-token.html) and public key cryptography to sign tokens and verify that they are valid.</span></span>

<span data-ttu-id="eb07a-234">Many open-source libraries are available for validating JWTs, depending on the language you prefer to use.</span><span class="sxs-lookup"><span data-stu-id="eb07a-234">Many open-source libraries are available for validating JWTs, depending on the language you prefer to use.</span></span> <span data-ttu-id="eb07a-235">Consider exploring available open-source libraries rather than implementing your own validation logic.</span><span class="sxs-lookup"><span data-stu-id="eb07a-235">Consider exploring available open-source libraries rather than implementing your own validation logic.</span></span> <span data-ttu-id="eb07a-236">You can use the information in this article to help you learn how to properly use those libraries.</span><span class="sxs-lookup"><span data-stu-id="eb07a-236">You can use the information in this article to help you learn how to properly use those libraries.</span></span>

<span data-ttu-id="eb07a-237">Azure AD B2C has an OpenID Connect metadata endpoint.</span><span class="sxs-lookup"><span data-stu-id="eb07a-237">Azure AD B2C has an OpenID Connect metadata endpoint.</span></span> <span data-ttu-id="eb07a-238">An app can use the endpoint to fetch information about Azure AD B2C at runtime.</span><span class="sxs-lookup"><span data-stu-id="eb07a-238">An app can use the endpoint to fetch information about Azure AD B2C at runtime.</span></span> <span data-ttu-id="eb07a-239">This information includes endpoints, token contents, and token signing keys.</span><span class="sxs-lookup"><span data-stu-id="eb07a-239">This information includes endpoints, token contents, and token signing keys.</span></span> <span data-ttu-id="eb07a-240">There is a JSON metadata document for each policy in your Azure AD B2C tenant.</span><span class="sxs-lookup"><span data-stu-id="eb07a-240">There is a JSON metadata document for each policy in your Azure AD B2C tenant.</span></span> <span data-ttu-id="eb07a-241">For example, the metadata document for the b2c_1_sign_in policy in the fabrikamb2c.onmicrosoft.com tenant is located at:</span><span class="sxs-lookup"><span data-stu-id="eb07a-241">For example, the metadata document for the b2c_1_sign_in policy in the fabrikamb2c.onmicrosoft.com tenant is located at:</span></span>

`https://fabrikamb2c.b2clogin.com/fabrikamb2c.onmicrosoft.com/v2.0/.well-known/openid-configuration?p=b2c_1_sign_in`

<span data-ttu-id="eb07a-242">One of the properties of this configuration document is the `jwks_uri`.</span><span class="sxs-lookup"><span data-stu-id="eb07a-242">One of the properties of this configuration document is the `jwks_uri`.</span></span> <span data-ttu-id="eb07a-243">The value for the same policy would be:</span><span class="sxs-lookup"><span data-stu-id="eb07a-243">The value for the same policy would be:</span></span>

`https://fabrikamb2c.b2clogin.com/fabrikamb2c.onmicrosoft.com/discovery/v2.0/keys?p=b2c_1_sign_in`

<span data-ttu-id="eb07a-244">To determine which policy was used to sign an ID token (and where to fetch the metadata from), you have two options.</span><span class="sxs-lookup"><span data-stu-id="eb07a-244">To determine which policy was used to sign an ID token (and where to fetch the metadata from), you have two options.</span></span> <span data-ttu-id="eb07a-245">First, the policy name is included in the `acr` claim in `id_token`.</span><span class="sxs-lookup"><span data-stu-id="eb07a-245">First, the policy name is included in the `acr` claim in `id_token`.</span></span> <span data-ttu-id="eb07a-246">For information about how to parse the claims from an ID token, see the [Azure AD B2C token reference](active-directory-b2c-reference-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="eb07a-246">For information about how to parse the claims from an ID token, see the [Azure AD B2C token reference](active-directory-b2c-reference-tokens.md).</span></span> <span data-ttu-id="eb07a-247">Your other option is to encode the policy in the value of the `state` parameter when you issue the request.</span><span class="sxs-lookup"><span data-stu-id="eb07a-247">Your other option is to encode the policy in the value of the `state` parameter when you issue the request.</span></span> <span data-ttu-id="eb07a-248">Then, decode the `state` parameter to determine which policy was used.</span><span class="sxs-lookup"><span data-stu-id="eb07a-248">Then, decode the `state` parameter to determine which policy was used.</span></span> <span data-ttu-id="eb07a-249">Either method is valid.</span><span class="sxs-lookup"><span data-stu-id="eb07a-249">Either method is valid.</span></span>

<span data-ttu-id="eb07a-250">After you've acquired the metadata document from the OpenID Connect metadata endpoint, you can use the RSA-256 public keys (located at this endpoint) to validate the signature of the ID token.</span><span class="sxs-lookup"><span data-stu-id="eb07a-250">After you've acquired the metadata document from the OpenID Connect metadata endpoint, you can use the RSA-256 public keys (located at this endpoint) to validate the signature of the ID token.</span></span> <span data-ttu-id="eb07a-251">There might be multiple keys listed at this endpoint at any given time, each identified by a `kid`.</span><span class="sxs-lookup"><span data-stu-id="eb07a-251">There might be multiple keys listed at this endpoint at any given time, each identified by a `kid`.</span></span> <span data-ttu-id="eb07a-252">The header of `id_token` also contains a `kid` claim.</span><span class="sxs-lookup"><span data-stu-id="eb07a-252">The header of `id_token` also contains a `kid` claim.</span></span> <span data-ttu-id="eb07a-253">It indicates which of these keys was used to sign the ID token.</span><span class="sxs-lookup"><span data-stu-id="eb07a-253">It indicates which of these keys was used to sign the ID token.</span></span> <span data-ttu-id="eb07a-254">For more information, including learning about [validating tokens](active-directory-b2c-reference-tokens.md#token-validation), see the [Azure AD B2C token reference](active-directory-b2c-reference-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="eb07a-254">For more information, including learning about [validating tokens](active-directory-b2c-reference-tokens.md#token-validation), see the [Azure AD B2C token reference](active-directory-b2c-reference-tokens.md).</span></span>
<!--TODO: Improve the information on this-->

<span data-ttu-id="eb07a-255">After you validate the signature of the ID token, several claims require verification.</span><span class="sxs-lookup"><span data-stu-id="eb07a-255">After you validate the signature of the ID token, several claims require verification.</span></span> <span data-ttu-id="eb07a-256">For example:</span><span class="sxs-lookup"><span data-stu-id="eb07a-256">For example:</span></span>

* <span data-ttu-id="eb07a-257">Validate the `nonce` claim to prevent token replay attacks.</span><span class="sxs-lookup"><span data-stu-id="eb07a-257">Validate the `nonce` claim to prevent token replay attacks.</span></span> <span data-ttu-id="eb07a-258">Its value should be what you specified in the sign-in request.</span><span class="sxs-lookup"><span data-stu-id="eb07a-258">Its value should be what you specified in the sign-in request.</span></span>
* <span data-ttu-id="eb07a-259">Validate the `aud` claim to ensure that the ID token was issued for your app.</span><span class="sxs-lookup"><span data-stu-id="eb07a-259">Validate the `aud` claim to ensure that the ID token was issued for your app.</span></span> <span data-ttu-id="eb07a-260">Its value should be the application ID of your app.</span><span class="sxs-lookup"><span data-stu-id="eb07a-260">Its value should be the application ID of your app.</span></span>
* <span data-ttu-id="eb07a-261">Validate the `iat` and `exp` claims to ensure that the ID token has not expired.</span><span class="sxs-lookup"><span data-stu-id="eb07a-261">Validate the `iat` and `exp` claims to ensure that the ID token has not expired.</span></span>

<span data-ttu-id="eb07a-262">Several more validations that you should perform are described in detail in the [OpenID Connect Core Spec](http://openid.net/specs/openid-connect-core-1_0.html). You might also want to validate additional claims, depending on your scenario.</span><span class="sxs-lookup"><span data-stu-id="eb07a-262">Several more validations that you should perform are described in detail in the [OpenID Connect Core Spec](http://openid.net/specs/openid-connect-core-1_0.html). You might also want to validate additional claims, depending on your scenario.</span></span> <span data-ttu-id="eb07a-263">Some common validations include:</span><span class="sxs-lookup"><span data-stu-id="eb07a-263">Some common validations include:</span></span>

* <span data-ttu-id="eb07a-264">Ensuring that the user or organization has signed up for the app.</span><span class="sxs-lookup"><span data-stu-id="eb07a-264">Ensuring that the user or organization has signed up for the app.</span></span>
* <span data-ttu-id="eb07a-265">Ensuring that the user has proper authorization and privileges.</span><span class="sxs-lookup"><span data-stu-id="eb07a-265">Ensuring that the user has proper authorization and privileges.</span></span>
* <span data-ttu-id="eb07a-266">Ensuring that a certain strength of authentication has occurred, such as by using Azure Multi-Factor Authentication.</span><span class="sxs-lookup"><span data-stu-id="eb07a-266">Ensuring that a certain strength of authentication has occurred, such as by using Azure Multi-Factor Authentication.</span></span>

<span data-ttu-id="eb07a-267">For more information about the claims in an ID token, see the [Azure AD B2C token reference](active-directory-b2c-reference-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="eb07a-267">For more information about the claims in an ID token, see the [Azure AD B2C token reference](active-directory-b2c-reference-tokens.md).</span></span>

<span data-ttu-id="eb07a-268">After you have completely validated the ID token, you can begin a session with the user.</span><span class="sxs-lookup"><span data-stu-id="eb07a-268">After you have completely validated the ID token, you can begin a session with the user.</span></span> <span data-ttu-id="eb07a-269">In your app, use the claims in the ID token to obtain information about the user.</span><span class="sxs-lookup"><span data-stu-id="eb07a-269">In your app, use the claims in the ID token to obtain information about the user.</span></span> <span data-ttu-id="eb07a-270">This information can be used for display, records, authorization, and so on.</span><span class="sxs-lookup"><span data-stu-id="eb07a-270">This information can be used for display, records, authorization, and so on.</span></span>

## <a name="get-access-tokens"></a><span data-ttu-id="eb07a-271">Get access tokens</span><span class="sxs-lookup"><span data-stu-id="eb07a-271">Get access tokens</span></span>
<span data-ttu-id="eb07a-272">If the only thing your web apps needs to do is execute policies, you can skip the next few sections.</span><span class="sxs-lookup"><span data-stu-id="eb07a-272">If the only thing your web apps needs to do is execute policies, you can skip the next few sections.</span></span> <span data-ttu-id="eb07a-273">The information in the following sections are applicable only to web apps that need to make authenticated calls to a web API, and which are protected by Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="eb07a-273">The information in the following sections are applicable only to web apps that need to make authenticated calls to a web API, and which are protected by Azure AD B2C.</span></span>

<span data-ttu-id="eb07a-274">Now that you've signed the user in to your single-page app, you can get access tokens for calling web APIs that are secured by Azure AD.</span><span class="sxs-lookup"><span data-stu-id="eb07a-274">Now that you've signed the user in to your single-page app, you can get access tokens for calling web APIs that are secured by Azure AD.</span></span> <span data-ttu-id="eb07a-275">Even if you have already received a token by using the `token` response type, you can use this method to acquire tokens for additional resources without redirecting the user to sign in again.</span><span class="sxs-lookup"><span data-stu-id="eb07a-275">Even if you have already received a token by using the `token` response type, you can use this method to acquire tokens for additional resources without redirecting the user to sign in again.</span></span>

<span data-ttu-id="eb07a-276">In a typical web app flow, you would do this by making a request to the `/token` endpoint.</span><span class="sxs-lookup"><span data-stu-id="eb07a-276">In a typical web app flow, you would do this by making a request to the `/token` endpoint.</span></span>  <span data-ttu-id="eb07a-277">However, the endpoint does not support CORS requests, so making AJAX calls to get and refresh tokens is not an option.</span><span class="sxs-lookup"><span data-stu-id="eb07a-277">However, the endpoint does not support CORS requests, so making AJAX calls to get and refresh tokens is not an option.</span></span> <span data-ttu-id="eb07a-278">Instead, you can use the implicit flow in a hidden HTML iframe element to get new tokens for other web APIs.</span><span class="sxs-lookup"><span data-stu-id="eb07a-278">Instead, you can use the implicit flow in a hidden HTML iframe element to get new tokens for other web APIs.</span></span> <span data-ttu-id="eb07a-279">Here's an example, with line breaks for legibility:</span><span class="sxs-lookup"><span data-stu-id="eb07a-279">Here's an example, with line breaks for legibility:</span></span>

```

https://fabrikamb2c.b2clogin.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/authorize?
client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6
&response_type=token
&redirect_uri=https%3A%2F%2Faadb2cplayground.azurewebsites.net%2F
&scope=https%3A%2F%2Fapi.contoso.com%2Ftasks.read
&response_mode=fragment
&state=arbitrary_data_you_can_receive_in_the_response
&nonce=12345
&prompt=none
&domain_hint=organizations
&login_hint=myuser@mycompany.com
&p=b2c_1_sign_in
```

| <span data-ttu-id="eb07a-280">Parameter</span><span class="sxs-lookup"><span data-stu-id="eb07a-280">Parameter</span></span> | <span data-ttu-id="eb07a-281">Required?</span><span class="sxs-lookup"><span data-stu-id="eb07a-281">Required?</span></span> | <span data-ttu-id="eb07a-282">Description</span><span class="sxs-lookup"><span data-stu-id="eb07a-282">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="eb07a-283">client_id</span><span class="sxs-lookup"><span data-stu-id="eb07a-283">client_id</span></span> |<span data-ttu-id="eb07a-284">Required</span><span class="sxs-lookup"><span data-stu-id="eb07a-284">Required</span></span> |<span data-ttu-id="eb07a-285">The application ID assigned to your app in the [Azure portal](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="eb07a-285">The application ID assigned to your app in the [Azure portal](https://portal.azure.com).</span></span> |
| <span data-ttu-id="eb07a-286">response_type</span><span class="sxs-lookup"><span data-stu-id="eb07a-286">response_type</span></span> |<span data-ttu-id="eb07a-287">Required</span><span class="sxs-lookup"><span data-stu-id="eb07a-287">Required</span></span> |<span data-ttu-id="eb07a-288">Must include `id_token` for OpenID Connect sign-in.</span><span class="sxs-lookup"><span data-stu-id="eb07a-288">Must include `id_token` for OpenID Connect sign-in.</span></span>  <span data-ttu-id="eb07a-289">It might also include the response type `token`.</span><span class="sxs-lookup"><span data-stu-id="eb07a-289">It might also include the response type `token`.</span></span> <span data-ttu-id="eb07a-290">If you use `token` here, your app can immediately receive an access token from the authorize endpoint, without making a second request to the authorize endpoint.</span><span class="sxs-lookup"><span data-stu-id="eb07a-290">If you use `token` here, your app can immediately receive an access token from the authorize endpoint, without making a second request to the authorize endpoint.</span></span> <span data-ttu-id="eb07a-291">If you use the `token` response type, the `scope` parameter must contain a scope that indicates which resource to issue the token for.</span><span class="sxs-lookup"><span data-stu-id="eb07a-291">If you use the `token` response type, the `scope` parameter must contain a scope that indicates which resource to issue the token for.</span></span> |
| <span data-ttu-id="eb07a-292">redirect_uri</span><span class="sxs-lookup"><span data-stu-id="eb07a-292">redirect_uri</span></span> |<span data-ttu-id="eb07a-293">Recommended</span><span class="sxs-lookup"><span data-stu-id="eb07a-293">Recommended</span></span> |<span data-ttu-id="eb07a-294">The redirect URI of your app, where authentication responses can be sent and received by your app.</span><span class="sxs-lookup"><span data-stu-id="eb07a-294">The redirect URI of your app, where authentication responses can be sent and received by your app.</span></span> <span data-ttu-id="eb07a-295">It must exactly match one of the redirect URIs you registered in the portal, except that it must be URL-encoded.</span><span class="sxs-lookup"><span data-stu-id="eb07a-295">It must exactly match one of the redirect URIs you registered in the portal, except that it must be URL-encoded.</span></span> |
| <span data-ttu-id="eb07a-296">scope</span><span class="sxs-lookup"><span data-stu-id="eb07a-296">scope</span></span> |<span data-ttu-id="eb07a-297">Required</span><span class="sxs-lookup"><span data-stu-id="eb07a-297">Required</span></span> |<span data-ttu-id="eb07a-298">A space-separated list of scopes.</span><span class="sxs-lookup"><span data-stu-id="eb07a-298">A space-separated list of scopes.</span></span>  <span data-ttu-id="eb07a-299">For getting tokens, include all scopes that you require for the intended resource.</span><span class="sxs-lookup"><span data-stu-id="eb07a-299">For getting tokens, include all scopes that you require for the intended resource.</span></span> |
| <span data-ttu-id="eb07a-300">response_mode</span><span class="sxs-lookup"><span data-stu-id="eb07a-300">response_mode</span></span> |<span data-ttu-id="eb07a-301">Recommended</span><span class="sxs-lookup"><span data-stu-id="eb07a-301">Recommended</span></span> |<span data-ttu-id="eb07a-302">Specifies the method that is used to send the resulting token back to your app.</span><span class="sxs-lookup"><span data-stu-id="eb07a-302">Specifies the method that is used to send the resulting token back to your app.</span></span>  <span data-ttu-id="eb07a-303">Can be `query`, `form_post`, or `fragment`.</span><span class="sxs-lookup"><span data-stu-id="eb07a-303">Can be `query`, `form_post`, or `fragment`.</span></span> |
| <span data-ttu-id="eb07a-304">state</span><span class="sxs-lookup"><span data-stu-id="eb07a-304">state</span></span> |<span data-ttu-id="eb07a-305">Recommended</span><span class="sxs-lookup"><span data-stu-id="eb07a-305">Recommended</span></span> |<span data-ttu-id="eb07a-306">A value included in the request that is returned in the token response.</span><span class="sxs-lookup"><span data-stu-id="eb07a-306">A value included in the request that is returned in the token response.</span></span>  <span data-ttu-id="eb07a-307">It can be a string of any content that you want to use.</span><span class="sxs-lookup"><span data-stu-id="eb07a-307">It can be a string of any content that you want to use.</span></span>  <span data-ttu-id="eb07a-308">Usually, a randomly generated, unique value is used, to prevent cross-site request forgery attacks.</span><span class="sxs-lookup"><span data-stu-id="eb07a-308">Usually, a randomly generated, unique value is used, to prevent cross-site request forgery attacks.</span></span>  <span data-ttu-id="eb07a-309">The state also is used to encode information about the user's state in the app before the authentication request occurred.</span><span class="sxs-lookup"><span data-stu-id="eb07a-309">The state also is used to encode information about the user's state in the app before the authentication request occurred.</span></span> <span data-ttu-id="eb07a-310">For example, the page or view the user was on.</span><span class="sxs-lookup"><span data-stu-id="eb07a-310">For example, the page or view the user was on.</span></span> |
| <span data-ttu-id="eb07a-311">nonce</span><span class="sxs-lookup"><span data-stu-id="eb07a-311">nonce</span></span> |<span data-ttu-id="eb07a-312">Required</span><span class="sxs-lookup"><span data-stu-id="eb07a-312">Required</span></span> |<span data-ttu-id="eb07a-313">A value included in the request, generated by the app, that is included in the resulting ID token as a claim.</span><span class="sxs-lookup"><span data-stu-id="eb07a-313">A value included in the request, generated by the app, that is included in the resulting ID token as a claim.</span></span>  <span data-ttu-id="eb07a-314">The app can then verify this value to mitigate token replay attacks.</span><span class="sxs-lookup"><span data-stu-id="eb07a-314">The app can then verify this value to mitigate token replay attacks.</span></span> <span data-ttu-id="eb07a-315">Usually, the value is a randomized, unique string that identifies the origin of the request.</span><span class="sxs-lookup"><span data-stu-id="eb07a-315">Usually, the value is a randomized, unique string that identifies the origin of the request.</span></span> |
| <span data-ttu-id="eb07a-316">prompt</span><span class="sxs-lookup"><span data-stu-id="eb07a-316">prompt</span></span> |<span data-ttu-id="eb07a-317">Required</span><span class="sxs-lookup"><span data-stu-id="eb07a-317">Required</span></span> |<span data-ttu-id="eb07a-318">To refresh and get tokens in a hidden iframe, use `prompt=none` to ensure that the iframe does not get stuck on the sign-in page, and returns immediately.</span><span class="sxs-lookup"><span data-stu-id="eb07a-318">To refresh and get tokens in a hidden iframe, use `prompt=none` to ensure that the iframe does not get stuck on the sign-in page, and returns immediately.</span></span> |
| <span data-ttu-id="eb07a-319">login_hint</span><span class="sxs-lookup"><span data-stu-id="eb07a-319">login_hint</span></span> |<span data-ttu-id="eb07a-320">Required</span><span class="sxs-lookup"><span data-stu-id="eb07a-320">Required</span></span> |<span data-ttu-id="eb07a-321">To refresh and get tokens in a hidden iframe, include the username of the user in this hint to distinguish between multiple sessions the user might have at a given  time.</span><span class="sxs-lookup"><span data-stu-id="eb07a-321">To refresh and get tokens in a hidden iframe, include the username of the user in this hint to distinguish between multiple sessions the user might have at a given  time.</span></span> <span data-ttu-id="eb07a-322">You can extract the username from an earlier sign-in by using the `preferred_username` claim.</span><span class="sxs-lookup"><span data-stu-id="eb07a-322">You can extract the username from an earlier sign-in by using the `preferred_username` claim.</span></span> |
| <span data-ttu-id="eb07a-323">domain_hint</span><span class="sxs-lookup"><span data-stu-id="eb07a-323">domain_hint</span></span> |<span data-ttu-id="eb07a-324">Required</span><span class="sxs-lookup"><span data-stu-id="eb07a-324">Required</span></span> |<span data-ttu-id="eb07a-325">Can be `consumers` or `organizations`.</span><span class="sxs-lookup"><span data-stu-id="eb07a-325">Can be `consumers` or `organizations`.</span></span>  <span data-ttu-id="eb07a-326">For refreshing and getting tokens in a hidden iframe, you must include the `domain_hint` value in the request.</span><span class="sxs-lookup"><span data-stu-id="eb07a-326">For refreshing and getting tokens in a hidden iframe, you must include the `domain_hint` value in the request.</span></span>  <span data-ttu-id="eb07a-327">Extract the `tid` claim from the ID token of an earlier sign-in to determine which value to use.</span><span class="sxs-lookup"><span data-stu-id="eb07a-327">Extract the `tid` claim from the ID token of an earlier sign-in to determine which value to use.</span></span>  <span data-ttu-id="eb07a-328">If the `tid` claim value is `9188040d-6c67-4c5b-b112-36a304b66dad`,  use `domain_hint=consumers`.</span><span class="sxs-lookup"><span data-stu-id="eb07a-328">If the `tid` claim value is `9188040d-6c67-4c5b-b112-36a304b66dad`,  use `domain_hint=consumers`.</span></span>  <span data-ttu-id="eb07a-329">Otherwise, use `domain_hint=organizations`.</span><span class="sxs-lookup"><span data-stu-id="eb07a-329">Otherwise, use `domain_hint=organizations`.</span></span> |

<span data-ttu-id="eb07a-330">By setting the `prompt=none` parameter, this request either succeeds or fails immediately, and returns to your application.</span><span class="sxs-lookup"><span data-stu-id="eb07a-330">By setting the `prompt=none` parameter, this request either succeeds or fails immediately, and returns to your application.</span></span>  <span data-ttu-id="eb07a-331">A successful response is sent to your app at the indicated redirect URI, by using the method specified in the `response_mode` parameter.</span><span class="sxs-lookup"><span data-stu-id="eb07a-331">A successful response is sent to your app at the indicated redirect URI, by using the method specified in the `response_mode` parameter.</span></span>

### <a name="successful-response"></a><span data-ttu-id="eb07a-332">Successful response</span><span class="sxs-lookup"><span data-stu-id="eb07a-332">Successful response</span></span>
<span data-ttu-id="eb07a-333">A successful response by using `response_mode=fragment` looks like this:</span><span class="sxs-lookup"><span data-stu-id="eb07a-333">A successful response by using `response_mode=fragment` looks like this:</span></span>

```
GET https://aadb2cplayground.azurewebsites.net/#
access_token=eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...
&state=arbitrary_data_you_sent_earlier
&token_type=Bearer
&expires_in=3599
&scope=https%3A%2F%2Fapi.contoso.com%2Ftasks.read
```

| <span data-ttu-id="eb07a-334">Parameter</span><span class="sxs-lookup"><span data-stu-id="eb07a-334">Parameter</span></span> | <span data-ttu-id="eb07a-335">Description</span><span class="sxs-lookup"><span data-stu-id="eb07a-335">Description</span></span> |
| --- | --- |
| <span data-ttu-id="eb07a-336">access_token</span><span class="sxs-lookup"><span data-stu-id="eb07a-336">access_token</span></span> |<span data-ttu-id="eb07a-337">The token that the app requested.</span><span class="sxs-lookup"><span data-stu-id="eb07a-337">The token that the app requested.</span></span> |
| <span data-ttu-id="eb07a-338">token_type</span><span class="sxs-lookup"><span data-stu-id="eb07a-338">token_type</span></span> |<span data-ttu-id="eb07a-339">The token type will always be Bearer.</span><span class="sxs-lookup"><span data-stu-id="eb07a-339">The token type will always be Bearer.</span></span> |
| <span data-ttu-id="eb07a-340">state</span><span class="sxs-lookup"><span data-stu-id="eb07a-340">state</span></span> |<span data-ttu-id="eb07a-341">If a `state` parameter is included in the request, the same value should appear in the response.</span><span class="sxs-lookup"><span data-stu-id="eb07a-341">If a `state` parameter is included in the request, the same value should appear in the response.</span></span> <span data-ttu-id="eb07a-342">The app should verify that the `state` values in the request and response are identical.</span><span class="sxs-lookup"><span data-stu-id="eb07a-342">The app should verify that the `state` values in the request and response are identical.</span></span> |
| <span data-ttu-id="eb07a-343">expires_in</span><span class="sxs-lookup"><span data-stu-id="eb07a-343">expires_in</span></span> |<span data-ttu-id="eb07a-344">How long the access token is valid (in seconds).</span><span class="sxs-lookup"><span data-stu-id="eb07a-344">How long the access token is valid (in seconds).</span></span> |
| <span data-ttu-id="eb07a-345">scope</span><span class="sxs-lookup"><span data-stu-id="eb07a-345">scope</span></span> |<span data-ttu-id="eb07a-346">The scopes that the access token is valid for.</span><span class="sxs-lookup"><span data-stu-id="eb07a-346">The scopes that the access token is valid for.</span></span> |

### <a name="error-response"></a><span data-ttu-id="eb07a-347">Error response</span><span class="sxs-lookup"><span data-stu-id="eb07a-347">Error response</span></span>
<span data-ttu-id="eb07a-348">Error responses also can be sent to the redirect URI so that the app can handle them appropriately.</span><span class="sxs-lookup"><span data-stu-id="eb07a-348">Error responses also can be sent to the redirect URI so that the app can handle them appropriately.</span></span>  <span data-ttu-id="eb07a-349">For `prompt=none`, an expected error looks like this:</span><span class="sxs-lookup"><span data-stu-id="eb07a-349">For `prompt=none`, an expected error looks like this:</span></span>

```
GET https://aadb2cplayground.azurewebsites.net/#
error=user_authentication_required
&error_description=the+request+could+not+be+completed+silently
```

| <span data-ttu-id="eb07a-350">Parameter</span><span class="sxs-lookup"><span data-stu-id="eb07a-350">Parameter</span></span> | <span data-ttu-id="eb07a-351">Description</span><span class="sxs-lookup"><span data-stu-id="eb07a-351">Description</span></span> |
| --- | --- |
| <span data-ttu-id="eb07a-352">error</span><span class="sxs-lookup"><span data-stu-id="eb07a-352">error</span></span> |<span data-ttu-id="eb07a-353">An error code string that can be used to classify types of errors that occur.</span><span class="sxs-lookup"><span data-stu-id="eb07a-353">An error code string that can be used to classify types of errors that occur.</span></span> <span data-ttu-id="eb07a-354">You also can use the string to react to errors.</span><span class="sxs-lookup"><span data-stu-id="eb07a-354">You also can use the string to react to errors.</span></span> |
| <span data-ttu-id="eb07a-355">error_description</span><span class="sxs-lookup"><span data-stu-id="eb07a-355">error_description</span></span> |<span data-ttu-id="eb07a-356">A specific error message that can help you identify the root cause of an authentication error.</span><span class="sxs-lookup"><span data-stu-id="eb07a-356">A specific error message that can help you identify the root cause of an authentication error.</span></span> |

<span data-ttu-id="eb07a-357">If you receive this error in the iframe request, the user must interactively sign in again to retrieve a new token.</span><span class="sxs-lookup"><span data-stu-id="eb07a-357">If you receive this error in the iframe request, the user must interactively sign in again to retrieve a new token.</span></span> <span data-ttu-id="eb07a-358">You can handle this in a way that makes sense for your application.</span><span class="sxs-lookup"><span data-stu-id="eb07a-358">You can handle this in a way that makes sense for your application.</span></span>

## <a name="refresh-tokens"></a><span data-ttu-id="eb07a-359">Refresh tokens</span><span class="sxs-lookup"><span data-stu-id="eb07a-359">Refresh tokens</span></span>
<span data-ttu-id="eb07a-360">ID tokens and access tokens both expire after a short period of time.</span><span class="sxs-lookup"><span data-stu-id="eb07a-360">ID tokens and access tokens both expire after a short period of time.</span></span> <span data-ttu-id="eb07a-361">Your app must be prepared to refresh these tokens periodically.</span><span class="sxs-lookup"><span data-stu-id="eb07a-361">Your app must be prepared to refresh these tokens periodically.</span></span>  <span data-ttu-id="eb07a-362">To refresh either type of token, perform the same hidden iframe request we used in an earlier example, by using the `prompt=none` parameter to control Azure AD steps.</span><span class="sxs-lookup"><span data-stu-id="eb07a-362">To refresh either type of token, perform the same hidden iframe request we used in an earlier example, by using the `prompt=none` parameter to control Azure AD steps.</span></span>  <span data-ttu-id="eb07a-363">To receive a new `id_token` value, be sure to use `response_type=id_token` and `scope=openid`, and a `nonce` parameter.</span><span class="sxs-lookup"><span data-stu-id="eb07a-363">To receive a new `id_token` value, be sure to use `response_type=id_token` and `scope=openid`, and a `nonce` parameter.</span></span>

## <a name="send-a-sign-out-request"></a><span data-ttu-id="eb07a-364">Send a sign-out request</span><span class="sxs-lookup"><span data-stu-id="eb07a-364">Send a sign-out request</span></span>
<span data-ttu-id="eb07a-365">When you want to sign the user out of the app, redirect the user to Azure AD to sign out. If you don't do this, the user might be able to reauthenticate to your app without entering their credentials again.</span><span class="sxs-lookup"><span data-stu-id="eb07a-365">When you want to sign the user out of the app, redirect the user to Azure AD to sign out. If you don't do this, the user might be able to reauthenticate to your app without entering their credentials again.</span></span> <span data-ttu-id="eb07a-366">This is because they will have a valid single sign-on session with Azure AD.</span><span class="sxs-lookup"><span data-stu-id="eb07a-366">This is because they will have a valid single sign-on session with Azure AD.</span></span>

<span data-ttu-id="eb07a-367">You can simply redirect the user to the `end_session_endpoint` that is listed in the same OpenID Connect metadata document described in [Validate the ID token](#validate-the-id-token).</span><span class="sxs-lookup"><span data-stu-id="eb07a-367">You can simply redirect the user to the `end_session_endpoint` that is listed in the same OpenID Connect metadata document described in [Validate the ID token](#validate-the-id-token).</span></span> <span data-ttu-id="eb07a-368">For example:</span><span class="sxs-lookup"><span data-stu-id="eb07a-368">For example:</span></span>

```
GET https://fabrikamb2c.b2clogin.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/logout?
p=b2c_1_sign_in
&post_logout_redirect_uri=https%3A%2F%2Faadb2cplayground.azurewebsites.net%2F
```

| <span data-ttu-id="eb07a-369">Parameter</span><span class="sxs-lookup"><span data-stu-id="eb07a-369">Parameter</span></span> | <span data-ttu-id="eb07a-370">Required?</span><span class="sxs-lookup"><span data-stu-id="eb07a-370">Required?</span></span> | <span data-ttu-id="eb07a-371">Description</span><span class="sxs-lookup"><span data-stu-id="eb07a-371">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="eb07a-372">p</span><span class="sxs-lookup"><span data-stu-id="eb07a-372">p</span></span> |<span data-ttu-id="eb07a-373">Required</span><span class="sxs-lookup"><span data-stu-id="eb07a-373">Required</span></span> |<span data-ttu-id="eb07a-374">The policy to use to sign the user out of your application.</span><span class="sxs-lookup"><span data-stu-id="eb07a-374">The policy to use to sign the user out of your application.</span></span> |
| <span data-ttu-id="eb07a-375">post_logout_redirect_uri</span><span class="sxs-lookup"><span data-stu-id="eb07a-375">post_logout_redirect_uri</span></span> |<span data-ttu-id="eb07a-376">Recommended</span><span class="sxs-lookup"><span data-stu-id="eb07a-376">Recommended</span></span> |<span data-ttu-id="eb07a-377">The URL that the user should be redirected to after successful sign-out. If it is not included, Azure AD B2C displays a generic message to the user.</span><span class="sxs-lookup"><span data-stu-id="eb07a-377">The URL that the user should be redirected to after successful sign-out. If it is not included, Azure AD B2C displays a generic message to the user.</span></span> |

> [!NOTE]
> <span data-ttu-id="eb07a-378">Directing the user to the `end_session_endpoint` clears some of the user's single sign-on state with Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="eb07a-378">Directing the user to the `end_session_endpoint` clears some of the user's single sign-on state with Azure AD B2C.</span></span> <span data-ttu-id="eb07a-379">However, it doesn't sign the user out of the user's social identity provider session.</span><span class="sxs-lookup"><span data-stu-id="eb07a-379">However, it doesn't sign the user out of the user's social identity provider session.</span></span> <span data-ttu-id="eb07a-380">If the user selects the same identify provider during a subsequent sign-in, the user is reauthenticated, without entering their credentials.</span><span class="sxs-lookup"><span data-stu-id="eb07a-380">If the user selects the same identify provider during a subsequent sign-in, the user is reauthenticated, without entering their credentials.</span></span> <span data-ttu-id="eb07a-381">If a user wants to sign out of your Azure AD B2C application, it does not necessarily mean they want to completely sign out of their Facebook account, for example.</span><span class="sxs-lookup"><span data-stu-id="eb07a-381">If a user wants to sign out of your Azure AD B2C application, it does not necessarily mean they want to completely sign out of their Facebook account, for example.</span></span> <span data-ttu-id="eb07a-382">However, for local accounts, the user's session will be ended properly.</span><span class="sxs-lookup"><span data-stu-id="eb07a-382">However, for local accounts, the user's session will be ended properly.</span></span>
> 
> 

## <a name="use-your-own-azure-ad-b2c-tenant"></a><span data-ttu-id="eb07a-383">Use your own Azure AD B2C tenant</span><span class="sxs-lookup"><span data-stu-id="eb07a-383">Use your own Azure AD B2C tenant</span></span>
<span data-ttu-id="eb07a-384">To try these requests yourself, complete the following three steps.</span><span class="sxs-lookup"><span data-stu-id="eb07a-384">To try these requests yourself, complete the following three steps.</span></span> <span data-ttu-id="eb07a-385">Replace the example values we use in this article with your own values:</span><span class="sxs-lookup"><span data-stu-id="eb07a-385">Replace the example values we use in this article with your own values:</span></span>

1. <span data-ttu-id="eb07a-386">[Create an Azure AD B2C tenant](active-directory-b2c-get-started.md).</span><span class="sxs-lookup"><span data-stu-id="eb07a-386">[Create an Azure AD B2C tenant](active-directory-b2c-get-started.md).</span></span> <span data-ttu-id="eb07a-387">Use the name of your tenant in the requests.</span><span class="sxs-lookup"><span data-stu-id="eb07a-387">Use the name of your tenant in the requests.</span></span>
2. <span data-ttu-id="eb07a-388">[Create an application](active-directory-b2c-app-registration.md) to obtain an application ID and a `redirect_uri` value.</span><span class="sxs-lookup"><span data-stu-id="eb07a-388">[Create an application](active-directory-b2c-app-registration.md) to obtain an application ID and a `redirect_uri` value.</span></span> <span data-ttu-id="eb07a-389">Include a web app or web API in your app.</span><span class="sxs-lookup"><span data-stu-id="eb07a-389">Include a web app or web API in your app.</span></span> <span data-ttu-id="eb07a-390">Optionally, you can create an application secret.</span><span class="sxs-lookup"><span data-stu-id="eb07a-390">Optionally, you can create an application secret.</span></span>
3. <span data-ttu-id="eb07a-391">[Create your policies](active-directory-b2c-reference-policies.md) to obtain your policy names.</span><span class="sxs-lookup"><span data-stu-id="eb07a-391">[Create your policies](active-directory-b2c-reference-policies.md) to obtain your policy names.</span></span>

## <a name="samples"></a><span data-ttu-id="eb07a-392">Samples</span><span class="sxs-lookup"><span data-stu-id="eb07a-392">Samples</span></span>

* [<span data-ttu-id="eb07a-393">Create a single-page app by using Node.js</span><span class="sxs-lookup"><span data-stu-id="eb07a-393">Create a single-page app by using Node.js</span></span>](https://github.com/Azure-Samples/active-directory-b2c-javascript-singlepageapp-nodejs-webapi)
* [<span data-ttu-id="eb07a-394">Create a single-page app by using .NET</span><span class="sxs-lookup"><span data-stu-id="eb07a-394">Create a single-page app by using .NET</span></span>](https://github.com/Azure-Samples/active-directory-b2c-javascript-singlepageapp-dotnet-webapi)

