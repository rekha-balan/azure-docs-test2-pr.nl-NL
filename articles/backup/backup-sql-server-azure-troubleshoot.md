---
title: Azure Backup troubleshooting guide for SQL Server VMs | Microsoft Docs
description: Troubleshooting information for backing up SQL Server VMs to Azure.
services: backup
documentationcenter: ''
author: markgalioto
manager: carmonm
editor: ''
keywords: ''
ms.assetid: ''
ms.service: backup
ms.workload: storage-backup-recovery
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 06/19/2018
ms.author: markgal;anuragm
ms.custom: ''
ms.openlocfilehash: 1c87382c2aae70b022fb391f80f7c75b0a4e5fe6
ms.sourcegitcommit: d1451406a010fd3aa854dc8e5b77dc5537d8050e
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 09/13/2018
ms.locfileid: "44867085"
---
# <a name="troubleshoot-back-up-sql-server-on-azure"></a><span data-ttu-id="ce2a6-103">Troubleshoot Back up SQL Server on Azure</span><span class="sxs-lookup"><span data-stu-id="ce2a6-103">Troubleshoot Back up SQL Server on Azure</span></span>

<span data-ttu-id="ce2a6-104">This article provides troubleshooting information for protecting SQL Server VMs on Azure (Preview).</span><span class="sxs-lookup"><span data-stu-id="ce2a6-104">This article provides troubleshooting information for protecting SQL Server VMs on Azure (Preview).</span></span>

## <a name="public-preview-limitations"></a><span data-ttu-id="ce2a6-105">Public Preview limitations</span><span class="sxs-lookup"><span data-stu-id="ce2a6-105">Public Preview limitations</span></span>

<span data-ttu-id="ce2a6-106">To view the Public Preview limitations, see the article, [Back up SQL Server database in Azure](backup-azure-sql-database.md#public-preview-limitations).</span><span class="sxs-lookup"><span data-stu-id="ce2a6-106">To view the Public Preview limitations, see the article, [Back up SQL Server database in Azure](backup-azure-sql-database.md#public-preview-limitations).</span></span>

## <a name="sql-server-permissions"></a><span data-ttu-id="ce2a6-107">SQL Server permissions</span><span class="sxs-lookup"><span data-stu-id="ce2a6-107">SQL Server permissions</span></span>

<span data-ttu-id="ce2a6-108">To configure protection for a SQL Server database on a virtual machine, the **AzureBackupWindowsWorkload** extension must be installed on that virtual machine.</span><span class="sxs-lookup"><span data-stu-id="ce2a6-108">To configure protection for a SQL Server database on a virtual machine, the **AzureBackupWindowsWorkload** extension must be installed on that virtual machine.</span></span> <span data-ttu-id="ce2a6-109">If you receive the error, **UserErrorSQLNoSysadminMembership**, it means your SQL Instance doesn't have the required backup permissions.</span><span class="sxs-lookup"><span data-stu-id="ce2a6-109">If you receive the error, **UserErrorSQLNoSysadminMembership**, it means your SQL Instance doesn't have the required backup permissions.</span></span> <span data-ttu-id="ce2a6-110">To fix this error, follow the steps in [Set permissions for non-marketplace SQL VMs](backup-azure-sql-database.md#set-permissions-for-non-marketplace-sql-vms).</span><span class="sxs-lookup"><span data-stu-id="ce2a6-110">To fix this error, follow the steps in [Set permissions for non-marketplace SQL VMs](backup-azure-sql-database.md#set-permissions-for-non-marketplace-sql-vms).</span></span>

## <a name="troubleshooting-errors"></a><span data-ttu-id="ce2a6-111">Troubleshooting Errors</span><span class="sxs-lookup"><span data-stu-id="ce2a6-111">Troubleshooting Errors</span></span>

<span data-ttu-id="ce2a6-112">Use the information in the following tables to troubleshoot issues and errors encountered while protecting SQL Server to Azure.</span><span class="sxs-lookup"><span data-stu-id="ce2a6-112">Use the information in the following tables to troubleshoot issues and errors encountered while protecting SQL Server to Azure.</span></span>

## <a name="backup-failures"></a><span data-ttu-id="ce2a6-113">Backup failures</span><span class="sxs-lookup"><span data-stu-id="ce2a6-113">Backup failures</span></span>

<span data-ttu-id="ce2a6-114">The following tables are organized by error code.</span><span class="sxs-lookup"><span data-stu-id="ce2a6-114">The following tables are organized by error code.</span></span>

### <a name="usererrorsqlpodoesnotsupportbackuptype"></a><span data-ttu-id="ce2a6-115">UserErrorSQLPODoesNotSupportBackupType</span><span class="sxs-lookup"><span data-stu-id="ce2a6-115">UserErrorSQLPODoesNotSupportBackupType</span></span>

| <span data-ttu-id="ce2a6-116">Error message</span><span class="sxs-lookup"><span data-stu-id="ce2a6-116">Error message</span></span> | <span data-ttu-id="ce2a6-117">Possible causes</span><span class="sxs-lookup"><span data-stu-id="ce2a6-117">Possible causes</span></span> | <span data-ttu-id="ce2a6-118">Recommended action</span><span class="sxs-lookup"><span data-stu-id="ce2a6-118">Recommended action</span></span> |
|---|---|---|
| <span data-ttu-id="ce2a6-119">This SQL database does not support the requested backup type.</span><span class="sxs-lookup"><span data-stu-id="ce2a6-119">This SQL database does not support the requested backup type.</span></span> | <span data-ttu-id="ce2a6-120">Occurs when the database recovery model doesn't allow the requested backup type.</span><span class="sxs-lookup"><span data-stu-id="ce2a6-120">Occurs when the database recovery model doesn't allow the requested backup type.</span></span> <span data-ttu-id="ce2a6-121">The error can happen in the following situations:</span><span class="sxs-lookup"><span data-stu-id="ce2a6-121">The error can happen in the following situations:</span></span> <br/><ul><li><span data-ttu-id="ce2a6-122">A database using a simple recovery model does not allow log backup.</span><span class="sxs-lookup"><span data-stu-id="ce2a6-122">A database using a simple recovery model does not allow log backup.</span></span></li><li><span data-ttu-id="ce2a6-123">Differential and log backups are not allowed for a Master database.</span><span class="sxs-lookup"><span data-stu-id="ce2a6-123">Differential and log backups are not allowed for a Master database.</span></span></li></ul><span data-ttu-id="ce2a6-124">For more detail, see the [SQL Recovery models](https://docs.microsoft.com/sql/relational-databases/backup-restore/recovery-models-sql-server) documentation.</span><span class="sxs-lookup"><span data-stu-id="ce2a6-124">For more detail, see the [SQL Recovery models](https://docs.microsoft.com/sql/relational-databases/backup-restore/recovery-models-sql-server) documentation.</span></span> | <span data-ttu-id="ce2a6-125">If the log backup fails for the DB in simple recovery model, try one of these options:</span><span class="sxs-lookup"><span data-stu-id="ce2a6-125">If the log backup fails for the DB in simple recovery model, try one of these options:</span></span><ul><li><span data-ttu-id="ce2a6-126">If the database is in simple recovery mode, disable log backups.</span><span class="sxs-lookup"><span data-stu-id="ce2a6-126">If the database is in simple recovery mode, disable log backups.</span></span></li><li><span data-ttu-id="ce2a6-127">Use the [SQL documentation](https://docs.microsoft.com/sql/relational-databases/backup-restore/view-or-change-the-recovery-model-of-a-database-sql-server) to change the database recovery model to Full or Bulk Logged.</span><span class="sxs-lookup"><span data-stu-id="ce2a6-127">Use the [SQL documentation](https://docs.microsoft.com/sql/relational-databases/backup-restore/view-or-change-the-recovery-model-of-a-database-sql-server) to change the database recovery model to Full or Bulk Logged.</span></span> </li><li> <span data-ttu-id="ce2a6-128">If you don't want to change the recovery model, and you have a standard policy to back up multiple databases that can't be changed, ignore the error.</span><span class="sxs-lookup"><span data-stu-id="ce2a6-128">If you don't want to change the recovery model, and you have a standard policy to back up multiple databases that can't be changed, ignore the error.</span></span> <span data-ttu-id="ce2a6-129">Your full and differential backups will work per schedule.</span><span class="sxs-lookup"><span data-stu-id="ce2a6-129">Your full and differential backups will work per schedule.</span></span> <span data-ttu-id="ce2a6-130">The log backups will be skipped, which is expected in this case.</span><span class="sxs-lookup"><span data-stu-id="ce2a6-130">The log backups will be skipped, which is expected in this case.</span></span></li></ul><span data-ttu-id="ce2a6-131">If it's a Master database and you have configured differential or log backup, use any of the following steps:</span><span class="sxs-lookup"><span data-stu-id="ce2a6-131">If it's a Master database and you have configured differential or log backup, use any of the following steps:</span></span><ul><li><span data-ttu-id="ce2a6-132">Use the portal to change the backup policy schedule for the Master database, to Full.</span><span class="sxs-lookup"><span data-stu-id="ce2a6-132">Use the portal to change the backup policy schedule for the Master database, to Full.</span></span></li><li><span data-ttu-id="ce2a6-133">If you have a standard policy to back up multiple databases that can't be changed, ignore the error.</span><span class="sxs-lookup"><span data-stu-id="ce2a6-133">If you have a standard policy to back up multiple databases that can't be changed, ignore the error.</span></span> <span data-ttu-id="ce2a6-134">Your full backup will work per schedule.</span><span class="sxs-lookup"><span data-stu-id="ce2a6-134">Your full backup will work per schedule.</span></span> <span data-ttu-id="ce2a6-135">Differential or log backups won't happen, which is expected in this case.</span><span class="sxs-lookup"><span data-stu-id="ce2a6-135">Differential or log backups won't happen, which is expected in this case.</span></span></li></ul> |
| <span data-ttu-id="ce2a6-136">Operation canceled as a conflicting operation was already running on the same database.</span><span class="sxs-lookup"><span data-stu-id="ce2a6-136">Operation canceled as a conflicting operation was already running on the same database.</span></span> | <span data-ttu-id="ce2a6-137">See the [blog entry about back up and restore limitations](https://blogs.msdn.microsoft.com/arvindsh/2008/12/30/concurrency-of-full-differential-and-log-backups-on-the-same-database) that run concurrently.</span><span class="sxs-lookup"><span data-stu-id="ce2a6-137">See the [blog entry about back up and restore limitations](https://blogs.msdn.microsoft.com/arvindsh/2008/12/30/concurrency-of-full-differential-and-log-backups-on-the-same-database) that run concurrently.</span></span>| [<span data-ttu-id="ce2a6-138">Use SQL Server Management Studio (SSMS) to monitor the backup jobs.</span><span class="sxs-lookup"><span data-stu-id="ce2a6-138">Use SQL Server Management Studio (SSMS) to monitor the backup jobs.</span></span>](backup-azure-sql-database.md#manage-azure-backup-operations-for-sql-on-azure-vms) <span data-ttu-id="ce2a6-139">Once the conflicting operation fails, restart the operation.</span><span class="sxs-lookup"><span data-stu-id="ce2a6-139">Once the conflicting operation fails, restart the operation.</span></span>|

### <a name="usererrorsqlpodoesnotexist"></a><span data-ttu-id="ce2a6-140">UserErrorSQLPODoesNotExist</span><span class="sxs-lookup"><span data-stu-id="ce2a6-140">UserErrorSQLPODoesNotExist</span></span>

| <span data-ttu-id="ce2a6-141">Error message</span><span class="sxs-lookup"><span data-stu-id="ce2a6-141">Error message</span></span> | <span data-ttu-id="ce2a6-142">Possible causes</span><span class="sxs-lookup"><span data-stu-id="ce2a6-142">Possible causes</span></span> | <span data-ttu-id="ce2a6-143">Recommended action</span><span class="sxs-lookup"><span data-stu-id="ce2a6-143">Recommended action</span></span> |
|---|---|---|
| <span data-ttu-id="ce2a6-144">SQL database does not exist.</span><span class="sxs-lookup"><span data-stu-id="ce2a6-144">SQL database does not exist.</span></span> | <span data-ttu-id="ce2a6-145">The database was either deleted or renamed.</span><span class="sxs-lookup"><span data-stu-id="ce2a6-145">The database was either deleted or renamed.</span></span> | <ul><li><span data-ttu-id="ce2a6-146">Check if the database was accidentally deleted or renamed.</span><span class="sxs-lookup"><span data-stu-id="ce2a6-146">Check if the database was accidentally deleted or renamed.</span></span></li><li><span data-ttu-id="ce2a6-147">If the database was accidentally deleted, to continue backups, restore the database to the original location.</span><span class="sxs-lookup"><span data-stu-id="ce2a6-147">If the database was accidentally deleted, to continue backups, restore the database to the original location.</span></span></li><li><span data-ttu-id="ce2a6-148">If you deleted the database and do not need future backups, then in the Recovery Services vault, click [stop backup with "Delete/Retain data"](backup-azure-sql-database.md#manage-azure-backup-operations-for-sql-on-azure-vms).</span><span class="sxs-lookup"><span data-stu-id="ce2a6-148">If you deleted the database and do not need future backups, then in the Recovery Services vault, click [stop backup with "Delete/Retain data"](backup-azure-sql-database.md#manage-azure-backup-operations-for-sql-on-azure-vms).</span></span></li>|

### <a name="usererrorsqllsnvalidationfailure"></a><span data-ttu-id="ce2a6-149">UserErrorSQLLSNValidationFailure</span><span class="sxs-lookup"><span data-stu-id="ce2a6-149">UserErrorSQLLSNValidationFailure</span></span>

| <span data-ttu-id="ce2a6-150">Error message</span><span class="sxs-lookup"><span data-stu-id="ce2a6-150">Error message</span></span> | <span data-ttu-id="ce2a6-151">Possible causes</span><span class="sxs-lookup"><span data-stu-id="ce2a6-151">Possible causes</span></span> | <span data-ttu-id="ce2a6-152">Recommended action</span><span class="sxs-lookup"><span data-stu-id="ce2a6-152">Recommended action</span></span> |
|---|---|---|
| <span data-ttu-id="ce2a6-153">Log chain is broken.</span><span class="sxs-lookup"><span data-stu-id="ce2a6-153">Log chain is broken.</span></span> | <span data-ttu-id="ce2a6-154">The database or the VM is backed up using another backup solution, which truncates the log chain.</span><span class="sxs-lookup"><span data-stu-id="ce2a6-154">The database or the VM is backed up using another backup solution, which truncates the log chain.</span></span>|<ul><li><span data-ttu-id="ce2a6-155">Check if another backup solution or script is in use.</span><span class="sxs-lookup"><span data-stu-id="ce2a6-155">Check if another backup solution or script is in use.</span></span> <span data-ttu-id="ce2a6-156">If so, stop the other backup solution.</span><span class="sxs-lookup"><span data-stu-id="ce2a6-156">If so, stop the other backup solution.</span></span> </li><li><span data-ttu-id="ce2a6-157">If the backup was an ad-hoc log backup, trigger a full backup to start a new log chain.</span><span class="sxs-lookup"><span data-stu-id="ce2a6-157">If the backup was an ad-hoc log backup, trigger a full backup to start a new log chain.</span></span> <span data-ttu-id="ce2a6-158">For scheduled log backups, no action is needed as Azure Backup service will automatically trigger a full backup to fix this issue.</span><span class="sxs-lookup"><span data-stu-id="ce2a6-158">For scheduled log backups, no action is needed as Azure Backup service will automatically trigger a full backup to fix this issue.</span></span></li>|

### <a name="usererroropeningsqlconnection"></a><span data-ttu-id="ce2a6-159">UserErrorOpeningSQLConnection</span><span class="sxs-lookup"><span data-stu-id="ce2a6-159">UserErrorOpeningSQLConnection</span></span>

| <span data-ttu-id="ce2a6-160">Error message</span><span class="sxs-lookup"><span data-stu-id="ce2a6-160">Error message</span></span> | <span data-ttu-id="ce2a6-161">Possible causes</span><span class="sxs-lookup"><span data-stu-id="ce2a6-161">Possible causes</span></span> | <span data-ttu-id="ce2a6-162">Recommended action</span><span class="sxs-lookup"><span data-stu-id="ce2a6-162">Recommended action</span></span> |
|---|---|---|
| <span data-ttu-id="ce2a6-163">Azure Backup is not able to connect to the SQL instance.</span><span class="sxs-lookup"><span data-stu-id="ce2a6-163">Azure Backup is not able to connect to the SQL instance.</span></span> | <span data-ttu-id="ce2a6-164">Azure Backup can't connect to the SQL Instance.</span><span class="sxs-lookup"><span data-stu-id="ce2a6-164">Azure Backup can't connect to the SQL Instance.</span></span> | <span data-ttu-id="ce2a6-165">Use the additional details in the Azure portal error menu to narrow down the root causes.</span><span class="sxs-lookup"><span data-stu-id="ce2a6-165">Use the additional details in the Azure portal error menu to narrow down the root causes.</span></span> <span data-ttu-id="ce2a6-166">Refer to [SQL backup troubleshooting](https://docs.microsoft.com/sql/database-engine/configure-windows/troubleshoot-connecting-to-the-sql-server-database-engine) to fix the error.</span><span class="sxs-lookup"><span data-stu-id="ce2a6-166">Refer to [SQL backup troubleshooting](https://docs.microsoft.com/sql/database-engine/configure-windows/troubleshoot-connecting-to-the-sql-server-database-engine) to fix the error.</span></span><br/><ul><li><span data-ttu-id="ce2a6-167">If the default SQL settings do not allow remote connections, change the settings.</span><span class="sxs-lookup"><span data-stu-id="ce2a6-167">If the default SQL settings do not allow remote connections, change the settings.</span></span> <span data-ttu-id="ce2a6-168">Refer to the below links for changing the settings.</span><span class="sxs-lookup"><span data-stu-id="ce2a6-168">Refer to the below links for changing the settings.</span></span><ul><li>[https://msdn.microsoft.com/library/bb326495.aspx](https://msdn.microsoft.com/library/bb326495.aspx)</li><li>[https://docs.microsoft.com/sql/relational-databases/errors-events/mssqlserver-2-database-engine-error](https://docs.microsoft.com/sql/relational-databases/errors-events/mssqlserver-2-database-engine-error)</li><li>[https://docs.microsoft.com/sql/relational-databases/errors-events/mssqlserver-53-database-engine-error](https://docs.microsoft.com/sql/relational-databases/errors-events/mssqlserver-53-database-engine-error)</li></ul></li></ul><ul><li><span data-ttu-id="ce2a6-169">If there are login issues, refer to the below links to fix it:</span><span class="sxs-lookup"><span data-stu-id="ce2a6-169">If there are login issues, refer to the below links to fix it:</span></span><ul><li>[https://docs.microsoft.com/sql/relational-databases/errors-events/mssqlserver-18456-database-engine-error](https://docs.microsoft.com/sql/relational-databases/errors-events/mssqlserver-18456-database-engine-error)</li><li>[https://docs.microsoft.com/sql/relational-databases/errors-events/mssqlserver-18452-database-engine-error](https://docs.microsoft.com/sql/relational-databases/errors-events/mssqlserver-18452-database-engine-error)</li></ul></li></ul> |

### <a name="usererrorparentfullbackupmissing"></a><span data-ttu-id="ce2a6-170">UserErrorParentFullBackupMissing</span><span class="sxs-lookup"><span data-stu-id="ce2a6-170">UserErrorParentFullBackupMissing</span></span>

| <span data-ttu-id="ce2a6-171">Error message</span><span class="sxs-lookup"><span data-stu-id="ce2a6-171">Error message</span></span> | <span data-ttu-id="ce2a6-172">Possible causes</span><span class="sxs-lookup"><span data-stu-id="ce2a6-172">Possible causes</span></span> | <span data-ttu-id="ce2a6-173">Recommended action</span><span class="sxs-lookup"><span data-stu-id="ce2a6-173">Recommended action</span></span> |
|---|---|---|
| <span data-ttu-id="ce2a6-174">First full backup is missing for this data source.</span><span class="sxs-lookup"><span data-stu-id="ce2a6-174">First full backup is missing for this data source.</span></span> | <span data-ttu-id="ce2a6-175">Full backup is missing for the database.</span><span class="sxs-lookup"><span data-stu-id="ce2a6-175">Full backup is missing for the database.</span></span> <span data-ttu-id="ce2a6-176">Log and differential backups parent to a full backup, so full backups must be taken before triggering differential or log backups.</span><span class="sxs-lookup"><span data-stu-id="ce2a6-176">Log and differential backups parent to a full backup, so full backups must be taken before triggering differential or log backups.</span></span> | <span data-ttu-id="ce2a6-177">Trigger an ad-hoc full backup.</span><span class="sxs-lookup"><span data-stu-id="ce2a6-177">Trigger an ad-hoc full backup.</span></span>   |

### <a name="usererrorbackupfailedastransactionlogisfull"></a><span data-ttu-id="ce2a6-178">UserErrorBackupFailedAsTransactionLogIsFull</span><span class="sxs-lookup"><span data-stu-id="ce2a6-178">UserErrorBackupFailedAsTransactionLogIsFull</span></span>

| <span data-ttu-id="ce2a6-179">Error message</span><span class="sxs-lookup"><span data-stu-id="ce2a6-179">Error message</span></span> | <span data-ttu-id="ce2a6-180">Possible causes</span><span class="sxs-lookup"><span data-stu-id="ce2a6-180">Possible causes</span></span> | <span data-ttu-id="ce2a6-181">Recommended action</span><span class="sxs-lookup"><span data-stu-id="ce2a6-181">Recommended action</span></span> |
|---|---|---|
| <span data-ttu-id="ce2a6-182">Cannot take backup as transaction log for the data source is full.</span><span class="sxs-lookup"><span data-stu-id="ce2a6-182">Cannot take backup as transaction log for the data source is full.</span></span> | <span data-ttu-id="ce2a6-183">The database transactional log space is full.</span><span class="sxs-lookup"><span data-stu-id="ce2a6-183">The database transactional log space is full.</span></span> | <span data-ttu-id="ce2a6-184">To fix this issue, refer to the [SQL documentation](https://docs.microsoft.com/sql/relational-databases/errors-events/mssqlserver-9002-database-engine-error).</span><span class="sxs-lookup"><span data-stu-id="ce2a6-184">To fix this issue, refer to the [SQL documentation](https://docs.microsoft.com/sql/relational-databases/errors-events/mssqlserver-9002-database-engine-error).</span></span> |
| <span data-ttu-id="ce2a6-185">This SQL database does not support the requested backup type.</span><span class="sxs-lookup"><span data-stu-id="ce2a6-185">This SQL database does not support the requested backup type.</span></span> | <span data-ttu-id="ce2a6-186">Always On AG secondary replicas don't support full and differential backups.</span><span class="sxs-lookup"><span data-stu-id="ce2a6-186">Always On AG secondary replicas don't support full and differential backups.</span></span> | <ul><li><span data-ttu-id="ce2a6-187">If you triggered an ad-hoc backup, trigger the backups on the primary node.</span><span class="sxs-lookup"><span data-stu-id="ce2a6-187">If you triggered an ad-hoc backup, trigger the backups on the primary node.</span></span></li><li><span data-ttu-id="ce2a6-188">If the backup was scheduled by policy, make sure the primary node is registered.</span><span class="sxs-lookup"><span data-stu-id="ce2a6-188">If the backup was scheduled by policy, make sure the primary node is registered.</span></span> <span data-ttu-id="ce2a6-189">To register the node, [follow the steps to discover a SQL Server database](backup-azure-sql-database.md#discover-sql-server-databases).</span><span class="sxs-lookup"><span data-stu-id="ce2a6-189">To register the node, [follow the steps to discover a SQL Server database](backup-azure-sql-database.md#discover-sql-server-databases).</span></span></li></ul> | 

## <a name="restore-failures"></a><span data-ttu-id="ce2a6-190">Restore failures</span><span class="sxs-lookup"><span data-stu-id="ce2a6-190">Restore failures</span></span>

<span data-ttu-id="ce2a6-191">The following error codes are shown when restore jobs fail.</span><span class="sxs-lookup"><span data-stu-id="ce2a6-191">The following error codes are shown when restore jobs fail.</span></span>

### <a name="usererrorcannotrestoreexistingdbwithoutforceoverwrite"></a><span data-ttu-id="ce2a6-192">UserErrorCannotRestoreExistingDBWithoutForceOverwrite</span><span class="sxs-lookup"><span data-stu-id="ce2a6-192">UserErrorCannotRestoreExistingDBWithoutForceOverwrite</span></span> 

| <span data-ttu-id="ce2a6-193">Error message</span><span class="sxs-lookup"><span data-stu-id="ce2a6-193">Error message</span></span> | <span data-ttu-id="ce2a6-194">Possible causes</span><span class="sxs-lookup"><span data-stu-id="ce2a6-194">Possible causes</span></span> | <span data-ttu-id="ce2a6-195">Recommended action</span><span class="sxs-lookup"><span data-stu-id="ce2a6-195">Recommended action</span></span> |
|---|---|---|
| <span data-ttu-id="ce2a6-196">Database with same name already exists at the target location</span><span class="sxs-lookup"><span data-stu-id="ce2a6-196">Database with same name already exists at the target location</span></span> | <span data-ttu-id="ce2a6-197">The target restore destination already has a database with same name.</span><span class="sxs-lookup"><span data-stu-id="ce2a6-197">The target restore destination already has a database with same name.</span></span>  | <ul><li><span data-ttu-id="ce2a6-198">Change the target database name</span><span class="sxs-lookup"><span data-stu-id="ce2a6-198">Change the target database name</span></span></li><li><span data-ttu-id="ce2a6-199">Or, use the force overwrite option in the restore page</span><span class="sxs-lookup"><span data-stu-id="ce2a6-199">Or, use the force overwrite option in the restore page</span></span></li> |

### <a name="usererrorrestorefaileddatabasecannotbeofflined"></a><span data-ttu-id="ce2a6-200">UserErrorRestoreFailedDatabaseCannotBeOfflined</span><span class="sxs-lookup"><span data-stu-id="ce2a6-200">UserErrorRestoreFailedDatabaseCannotBeOfflined</span></span>

| <span data-ttu-id="ce2a6-201">Error message</span><span class="sxs-lookup"><span data-stu-id="ce2a6-201">Error message</span></span> | <span data-ttu-id="ce2a6-202">Possible causes</span><span class="sxs-lookup"><span data-stu-id="ce2a6-202">Possible causes</span></span> | <span data-ttu-id="ce2a6-203">Recommended action</span><span class="sxs-lookup"><span data-stu-id="ce2a6-203">Recommended action</span></span> |
|---|---|---|
| <span data-ttu-id="ce2a6-204">Restore failed as the database could not be brought offline.</span><span class="sxs-lookup"><span data-stu-id="ce2a6-204">Restore failed as the database could not be brought offline.</span></span> | <span data-ttu-id="ce2a6-205">While doing a restore, target database needs to be brought offline.</span><span class="sxs-lookup"><span data-stu-id="ce2a6-205">While doing a restore, target database needs to be brought offline.</span></span> <span data-ttu-id="ce2a6-206">Azure Backup is not able to bring this data offline.</span><span class="sxs-lookup"><span data-stu-id="ce2a6-206">Azure Backup is not able to bring this data offline.</span></span> | <span data-ttu-id="ce2a6-207">Use the additional details in the Azure portal error menu to narrow down the root causes.</span><span class="sxs-lookup"><span data-stu-id="ce2a6-207">Use the additional details in the Azure portal error menu to narrow down the root causes.</span></span> <span data-ttu-id="ce2a6-208">For more information, see the [SQL documentation](https://docs.microsoft.com/sql/relational-databases/backup-restore/restore-a-database-backup-using-ssms).</span><span class="sxs-lookup"><span data-stu-id="ce2a6-208">For more information, see the [SQL documentation](https://docs.microsoft.com/sql/relational-databases/backup-restore/restore-a-database-backup-using-ssms).</span></span> |


###  <a name="usererrorcannotfindservercertificatewiththumbprint"></a><span data-ttu-id="ce2a6-209">UserErrorCannotFindServerCertificateWithThumbprint</span><span class="sxs-lookup"><span data-stu-id="ce2a6-209">UserErrorCannotFindServerCertificateWithThumbprint</span></span>

| <span data-ttu-id="ce2a6-210">Error message</span><span class="sxs-lookup"><span data-stu-id="ce2a6-210">Error message</span></span> | <span data-ttu-id="ce2a6-211">Possible causes</span><span class="sxs-lookup"><span data-stu-id="ce2a6-211">Possible causes</span></span> | <span data-ttu-id="ce2a6-212">Recommended action</span><span class="sxs-lookup"><span data-stu-id="ce2a6-212">Recommended action</span></span> |
|---|---|---|
| <span data-ttu-id="ce2a6-213">Cannot find the server certificate with thumbprint on the target.</span><span class="sxs-lookup"><span data-stu-id="ce2a6-213">Cannot find the server certificate with thumbprint on the target.</span></span> | <span data-ttu-id="ce2a6-214">The Master database on the destination instance doesn't have a valid encryption thumbprint.</span><span class="sxs-lookup"><span data-stu-id="ce2a6-214">The Master database on the destination instance doesn't have a valid encryption thumbprint.</span></span> | <span data-ttu-id="ce2a6-215">Import the valid certificate thumbprint used on the Source instance, to the target instance.</span><span class="sxs-lookup"><span data-stu-id="ce2a6-215">Import the valid certificate thumbprint used on the Source instance, to the target instance.</span></span> |

## <a name="registration-failures"></a><span data-ttu-id="ce2a6-216">Registration failures</span><span class="sxs-lookup"><span data-stu-id="ce2a6-216">Registration failures</span></span>

<span data-ttu-id="ce2a6-217">The following error codes are for registration failures.</span><span class="sxs-lookup"><span data-stu-id="ce2a6-217">The following error codes are for registration failures.</span></span>

### <a name="fabricsvcbackuppreferencecheckfailedusererror"></a><span data-ttu-id="ce2a6-218">FabricSvcBackupPreferenceCheckFailedUserError</span><span class="sxs-lookup"><span data-stu-id="ce2a6-218">FabricSvcBackupPreferenceCheckFailedUserError</span></span> 

| <span data-ttu-id="ce2a6-219">Error message</span><span class="sxs-lookup"><span data-stu-id="ce2a6-219">Error message</span></span> | <span data-ttu-id="ce2a6-220">Possible causes</span><span class="sxs-lookup"><span data-stu-id="ce2a6-220">Possible causes</span></span> | <span data-ttu-id="ce2a6-221">Recommended action</span><span class="sxs-lookup"><span data-stu-id="ce2a6-221">Recommended action</span></span> |
|---|---|---|
| <span data-ttu-id="ce2a6-222">Backup preference for SQL Always On Availability Group cannot be met as some nodes of the Availability Group are not registered.</span><span class="sxs-lookup"><span data-stu-id="ce2a6-222">Backup preference for SQL Always On Availability Group cannot be met as some nodes of the Availability Group are not registered.</span></span> | <span data-ttu-id="ce2a6-223">Nodes required to perform backups are not registered or are unreachable.</span><span class="sxs-lookup"><span data-stu-id="ce2a6-223">Nodes required to perform backups are not registered or are unreachable.</span></span> | <ul><li><span data-ttu-id="ce2a6-224">Ensure that all the nodes required to perform backups of this database are registered and healthy and then retry the operation.</span><span class="sxs-lookup"><span data-stu-id="ce2a6-224">Ensure that all the nodes required to perform backups of this database are registered and healthy and then retry the operation.</span></span></li><li><span data-ttu-id="ce2a6-225">Change SQL Always On Availability Group backup preference.</span><span class="sxs-lookup"><span data-stu-id="ce2a6-225">Change SQL Always On Availability Group backup preference.</span></span></li></ul> |

### <a name="vmnotinrunningstateusererror"></a><span data-ttu-id="ce2a6-226">VMNotInRunningStateUserError</span><span class="sxs-lookup"><span data-stu-id="ce2a6-226">VMNotInRunningStateUserError</span></span>

| <span data-ttu-id="ce2a6-227">Error message</span><span class="sxs-lookup"><span data-stu-id="ce2a6-227">Error message</span></span> | <span data-ttu-id="ce2a6-228">Possible causes</span><span class="sxs-lookup"><span data-stu-id="ce2a6-228">Possible causes</span></span> | <span data-ttu-id="ce2a6-229">Recommended action</span><span class="sxs-lookup"><span data-stu-id="ce2a6-229">Recommended action</span></span> |
|---|---|---|
| <span data-ttu-id="ce2a6-230">SQL server VM is either shutdown and not accessible to Azure Backup service.</span><span class="sxs-lookup"><span data-stu-id="ce2a6-230">SQL server VM is either shutdown and not accessible to Azure Backup service.</span></span> | <span data-ttu-id="ce2a6-231">VM is shut down</span><span class="sxs-lookup"><span data-stu-id="ce2a6-231">VM is shut down</span></span> | <span data-ttu-id="ce2a6-232">Ensure that the SQL server is running.</span><span class="sxs-lookup"><span data-stu-id="ce2a6-232">Ensure that the SQL server is running.</span></span> |

### <a name="guestagentstatusunavailableusererror"></a><span data-ttu-id="ce2a6-233">GuestAgentStatusUnavailableUserError</span><span class="sxs-lookup"><span data-stu-id="ce2a6-233">GuestAgentStatusUnavailableUserError</span></span>

| <span data-ttu-id="ce2a6-234">Error message</span><span class="sxs-lookup"><span data-stu-id="ce2a6-234">Error message</span></span> | <span data-ttu-id="ce2a6-235">Possible causes</span><span class="sxs-lookup"><span data-stu-id="ce2a6-235">Possible causes</span></span> | <span data-ttu-id="ce2a6-236">Recommended action</span><span class="sxs-lookup"><span data-stu-id="ce2a6-236">Recommended action</span></span> |
|---|---|---|
| <span data-ttu-id="ce2a6-237">Azure Backup service uses Azure VM guest agent for doing backup but guest agent is not available on the target server.</span><span class="sxs-lookup"><span data-stu-id="ce2a6-237">Azure Backup service uses Azure VM guest agent for doing backup but guest agent is not available on the target server.</span></span> | <span data-ttu-id="ce2a6-238">Guest agent is not enabled or is unhealthy</span><span class="sxs-lookup"><span data-stu-id="ce2a6-238">Guest agent is not enabled or is unhealthy</span></span> | <span data-ttu-id="ce2a6-239">[Install the VM guest agent](../virtual-machines/extensions/agent-windows.md) manually.</span><span class="sxs-lookup"><span data-stu-id="ce2a6-239">[Install the VM guest agent](../virtual-machines/extensions/agent-windows.md) manually.</span></span> |

## <a name="next-steps"></a><span data-ttu-id="ce2a6-240">Next steps</span><span class="sxs-lookup"><span data-stu-id="ce2a6-240">Next steps</span></span>

<span data-ttu-id="ce2a6-241">For more information about Azure Backup for SQL Server VMs (public preview), see [Azure Backup for SQL VMs (Public Preview)](../virtual-machines/windows/sql/virtual-machines-windows-sql-backup-recovery.md#azbackup).</span><span class="sxs-lookup"><span data-stu-id="ce2a6-241">For more information about Azure Backup for SQL Server VMs (public preview), see [Azure Backup for SQL VMs (Public Preview)](../virtual-machines/windows/sql/virtual-machines-windows-sql-backup-recovery.md#azbackup).</span></span>