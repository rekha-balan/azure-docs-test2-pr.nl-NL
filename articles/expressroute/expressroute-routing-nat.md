---
title: Routing requirements for ExpressRoute | Microsoft Docs
description: This page provides detailed requirements for configuring and managing routing for ExpressRoute circuits.
documentationcenter: na
services: expressroute
author: osamazia
manager: ganesr
editor: ''
ms.assetid: eaaf0393-d384-4496-9a5c-328e94c262a7
ms.service: expressroute
ms.devlang: na
ms.topic: get-started-article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 10/12/2016
ms.author: osamam
ms.openlocfilehash: c6f960a6087725eecbba92e56e62a1ac895f1808
ms.sourcegitcommit: 5b9d839c0c0a94b293fdafe1d6e5429506c07e05
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 08/02/2018
ms.locfileid: "44563378"
---
# <a name="expressroute-routing-requirements"></a><span data-ttu-id="50486-103">ExpressRoute routing requirements</span><span class="sxs-lookup"><span data-stu-id="50486-103">ExpressRoute routing requirements</span></span>
<span data-ttu-id="50486-104">To connect to Microsoft cloud services using ExpressRoute, you’ll need to set up and manage routing.</span><span class="sxs-lookup"><span data-stu-id="50486-104">To connect to Microsoft cloud services using ExpressRoute, you’ll need to set up and manage routing.</span></span> <span data-ttu-id="50486-105">Some connectivity providers offer setting up and managing routing as a managed service.</span><span class="sxs-lookup"><span data-stu-id="50486-105">Some connectivity providers offer setting up and managing routing as a managed service.</span></span> <span data-ttu-id="50486-106">Check with your connectivity provider to see if they offer this service.</span><span class="sxs-lookup"><span data-stu-id="50486-106">Check with your connectivity provider to see if they offer this service.</span></span> <span data-ttu-id="50486-107">If they don't, you must adhere to the following requirements.</span><span class="sxs-lookup"><span data-stu-id="50486-107">If they don't, you must adhere to the following requirements.</span></span> 

<span data-ttu-id="50486-108">Refer to the [Circuits and routing domains](expressroute-circuit-peerings.md) article for a description of the routing sessions that need to be set up in to facilitate connectivity.</span><span class="sxs-lookup"><span data-stu-id="50486-108">Refer to the [Circuits and routing domains](expressroute-circuit-peerings.md) article for a description of the routing sessions that need to be set up in to facilitate connectivity.</span></span>

> [!NOTE]
> <span data-ttu-id="50486-109">Microsoft does not support any router redundancy protocols (e.g., HSRP, VRRP) for high availability configurations.</span><span class="sxs-lookup"><span data-stu-id="50486-109">Microsoft does not support any router redundancy protocols (e.g., HSRP, VRRP) for high availability configurations.</span></span> <span data-ttu-id="50486-110">We rely on a redundant pair of BGP sessions per peering for high availability.</span><span class="sxs-lookup"><span data-stu-id="50486-110">We rely on a redundant pair of BGP sessions per peering for high availability.</span></span>
> 
> 

## <a name="ip-addresses-used-for-peerings"></a><span data-ttu-id="50486-111">IP addresses used for peerings</span><span class="sxs-lookup"><span data-stu-id="50486-111">IP addresses used for peerings</span></span>
<span data-ttu-id="50486-112">You need to reserve a few blocks of IP addresses to configure routing between your network and Microsoft's Enterprise edge (MSEEs) routers.</span><span class="sxs-lookup"><span data-stu-id="50486-112">You need to reserve a few blocks of IP addresses to configure routing between your network and Microsoft's Enterprise edge (MSEEs) routers.</span></span> <span data-ttu-id="50486-113">This section provides a list of requirements and describes the rules regarding how these IP addresses must be acquired and used.</span><span class="sxs-lookup"><span data-stu-id="50486-113">This section provides a list of requirements and describes the rules regarding how these IP addresses must be acquired and used.</span></span>

### <a name="ip-addresses-used-for-azure-private-peering"></a><span data-ttu-id="50486-114">IP addresses used for Azure private peering</span><span class="sxs-lookup"><span data-stu-id="50486-114">IP addresses used for Azure private peering</span></span>
<span data-ttu-id="50486-115">You can use either private IP addresses or public IP addresses to configure the peerings.</span><span class="sxs-lookup"><span data-stu-id="50486-115">You can use either private IP addresses or public IP addresses to configure the peerings.</span></span> <span data-ttu-id="50486-116">The address range used for configuring routes must not overlap with address ranges used to create virtual networks in Azure.</span><span class="sxs-lookup"><span data-stu-id="50486-116">The address range used for configuring routes must not overlap with address ranges used to create virtual networks in Azure.</span></span> 

* <span data-ttu-id="50486-117">You must reserve a /29 subnet or two /30 subnets for routing interfaces.</span><span class="sxs-lookup"><span data-stu-id="50486-117">You must reserve a /29 subnet or two /30 subnets for routing interfaces.</span></span>
* <span data-ttu-id="50486-118">The subnets used for routing can be either private IP addresses or public IP addresses.</span><span class="sxs-lookup"><span data-stu-id="50486-118">The subnets used for routing can be either private IP addresses or public IP addresses.</span></span>
* <span data-ttu-id="50486-119">The subnets must not conflict with the range reserved by the customer for use in the Microsoft cloud.</span><span class="sxs-lookup"><span data-stu-id="50486-119">The subnets must not conflict with the range reserved by the customer for use in the Microsoft cloud.</span></span>
* <span data-ttu-id="50486-120">If a /29 subnet is used, it will be split into two /30 subnets.</span><span class="sxs-lookup"><span data-stu-id="50486-120">If a /29 subnet is used, it will be split into two /30 subnets.</span></span> 
  * <span data-ttu-id="50486-121">The first /30 subnet will be used for the primary link and the second /30 subnet will be used for the secondary link.</span><span class="sxs-lookup"><span data-stu-id="50486-121">The first /30 subnet will be used for the primary link and the second /30 subnet will be used for the secondary link.</span></span>
  * <span data-ttu-id="50486-122">For each of the /30 subnets, you must use the first IP address of the /30 subnet on your router.</span><span class="sxs-lookup"><span data-stu-id="50486-122">For each of the /30 subnets, you must use the first IP address of the /30 subnet on your router.</span></span> <span data-ttu-id="50486-123">Microsoft will use the second IP address of the /30 subnet to set up a BGP session.</span><span class="sxs-lookup"><span data-stu-id="50486-123">Microsoft will use the second IP address of the /30 subnet to set up a BGP session.</span></span>
  * <span data-ttu-id="50486-124">You must set up both BGP sessions for our [availability SLA](https://azure.microsoft.com/support/legal/sla/) to be valid.</span><span class="sxs-lookup"><span data-stu-id="50486-124">You must set up both BGP sessions for our [availability SLA](https://azure.microsoft.com/support/legal/sla/) to be valid.</span></span>  

#### <a name="example-for-private-peering"></a><span data-ttu-id="50486-125">Example for private peering</span><span class="sxs-lookup"><span data-stu-id="50486-125">Example for private peering</span></span>
<span data-ttu-id="50486-126">If you choose to use a.b.c.d/29 to set up the peering, it will be split into two /30 subnets.</span><span class="sxs-lookup"><span data-stu-id="50486-126">If you choose to use a.b.c.d/29 to set up the peering, it will be split into two /30 subnets.</span></span> <span data-ttu-id="50486-127">In the example below, we will look at how the a.b.c.d/29 subnet is used.</span><span class="sxs-lookup"><span data-stu-id="50486-127">In the example below, we will look at how the a.b.c.d/29 subnet is used.</span></span> 

<span data-ttu-id="50486-128">a.b.c.d/29 will be split to a.b.c.d/30 and a.b.c.d+4/30 and passed down to Microsoft through the provisioning APIs.</span><span class="sxs-lookup"><span data-stu-id="50486-128">a.b.c.d/29 will be split to a.b.c.d/30 and a.b.c.d+4/30 and passed down to Microsoft through the provisioning APIs.</span></span> <span data-ttu-id="50486-129">You will use a.b.c.d+1 as the VRF IP for the Primary PE and Microsoft will consume a.b.c.d+2 as the VRF IP for the primary MSEE.</span><span class="sxs-lookup"><span data-stu-id="50486-129">You will use a.b.c.d+1 as the VRF IP for the Primary PE and Microsoft will consume a.b.c.d+2 as the VRF IP for the primary MSEE.</span></span> <span data-ttu-id="50486-130">You will use a.b.c.d+5 as the VRF IP for the secondary PE and Microsoft will use a.b.c.d+6 as the VRF IP for the secondary MSEE.</span><span class="sxs-lookup"><span data-stu-id="50486-130">You will use a.b.c.d+5 as the VRF IP for the secondary PE and Microsoft will use a.b.c.d+6 as the VRF IP for the secondary MSEE.</span></span>

<span data-ttu-id="50486-131">Consider a case where you select 192.168.100.128/29 to set up private peering.</span><span class="sxs-lookup"><span data-stu-id="50486-131">Consider a case where you select 192.168.100.128/29 to set up private peering.</span></span> <span data-ttu-id="50486-132">192.168.100.128/29 includes addresses from 192.168.100.128 to 192.168.100.135, among which:</span><span class="sxs-lookup"><span data-stu-id="50486-132">192.168.100.128/29 includes addresses from 192.168.100.128 to 192.168.100.135, among which:</span></span>

* <span data-ttu-id="50486-133">192.168.100.128/30 will be assigned to link1, with provider using 192.168.100.129 and Microsoft using 192.168.100.130.</span><span class="sxs-lookup"><span data-stu-id="50486-133">192.168.100.128/30 will be assigned to link1, with provider using 192.168.100.129 and Microsoft using 192.168.100.130.</span></span>
* <span data-ttu-id="50486-134">192.168.100.132/30 will be assigned to link2, with provider using 192.168.100.133 and Microsoft using 192.168.100.134.</span><span class="sxs-lookup"><span data-stu-id="50486-134">192.168.100.132/30 will be assigned to link2, with provider using 192.168.100.133 and Microsoft using 192.168.100.134.</span></span>

### <a name="ip-addresses-used-for-azure-public-and-microsoft-peering"></a><span data-ttu-id="50486-135">IP addresses used for Azure public and Microsoft peering</span><span class="sxs-lookup"><span data-stu-id="50486-135">IP addresses used for Azure public and Microsoft peering</span></span>
<span data-ttu-id="50486-136">You must use public IP addresses that you own for setting up the BGP sessions.</span><span class="sxs-lookup"><span data-stu-id="50486-136">You must use public IP addresses that you own for setting up the BGP sessions.</span></span> <span data-ttu-id="50486-137">Microsoft must be able to verify the ownership of the IP addresses through Routing Internet Registries and Internet Routing Registries.</span><span class="sxs-lookup"><span data-stu-id="50486-137">Microsoft must be able to verify the ownership of the IP addresses through Routing Internet Registries and Internet Routing Registries.</span></span> 

* <span data-ttu-id="50486-138">You must use a unique /29 subnet or two /30 subnets to set up the BGP peering for each peering per ExpressRoute circuit (if you have more than one).</span><span class="sxs-lookup"><span data-stu-id="50486-138">You must use a unique /29 subnet or two /30 subnets to set up the BGP peering for each peering per ExpressRoute circuit (if you have more than one).</span></span> 
* <span data-ttu-id="50486-139">If a /29 subnet is used, it will be split into two /30 subnets.</span><span class="sxs-lookup"><span data-stu-id="50486-139">If a /29 subnet is used, it will be split into two /30 subnets.</span></span> 
  * <span data-ttu-id="50486-140">The first /30 subnet will be used for the primary link and the second /30 subnet will be used for the secondary link.</span><span class="sxs-lookup"><span data-stu-id="50486-140">The first /30 subnet will be used for the primary link and the second /30 subnet will be used for the secondary link.</span></span>
  * <span data-ttu-id="50486-141">For each of the /30 subnets, you must use the first IP address of the /30 subnet on your router.</span><span class="sxs-lookup"><span data-stu-id="50486-141">For each of the /30 subnets, you must use the first IP address of the /30 subnet on your router.</span></span> <span data-ttu-id="50486-142">Microsoft will use the second IP address of the /30 subnet to set up a BGP session.</span><span class="sxs-lookup"><span data-stu-id="50486-142">Microsoft will use the second IP address of the /30 subnet to set up a BGP session.</span></span>
  * <span data-ttu-id="50486-143">You must set up both BGP sessions for our [availability SLA](https://azure.microsoft.com/support/legal/sla/) to be valid.</span><span class="sxs-lookup"><span data-stu-id="50486-143">You must set up both BGP sessions for our [availability SLA](https://azure.microsoft.com/support/legal/sla/) to be valid.</span></span>

## <a name="public-ip-address-requirement"></a><span data-ttu-id="50486-144">Public IP address requirement</span><span class="sxs-lookup"><span data-stu-id="50486-144">Public IP address requirement</span></span>
### <a name="private-peering"></a><span data-ttu-id="50486-145">Private Peering</span><span class="sxs-lookup"><span data-stu-id="50486-145">Private Peering</span></span>
<span data-ttu-id="50486-146">You can choose to use public or private IPv4 addresses for private peering.</span><span class="sxs-lookup"><span data-stu-id="50486-146">You can choose to use public or private IPv4 addresses for private peering.</span></span> <span data-ttu-id="50486-147">We provide end-to-end isolation of your traffic so overlapping of addresses with other customers is not possible in case of private peering.</span><span class="sxs-lookup"><span data-stu-id="50486-147">We provide end-to-end isolation of your traffic so overlapping of addresses with other customers is not possible in case of private peering.</span></span> <span data-ttu-id="50486-148">These addresses are not advertised to Internet.</span><span class="sxs-lookup"><span data-stu-id="50486-148">These addresses are not advertised to Internet.</span></span> 

### <a name="public-peering"></a><span data-ttu-id="50486-149">Public Peering</span><span class="sxs-lookup"><span data-stu-id="50486-149">Public Peering</span></span>
<span data-ttu-id="50486-150">The Azure public peering path enables you to connect to all services hosted in Azure over their public IP addresses.</span><span class="sxs-lookup"><span data-stu-id="50486-150">The Azure public peering path enables you to connect to all services hosted in Azure over their public IP addresses.</span></span> <span data-ttu-id="50486-151">These include services listed in the [ExpessRoute FAQ](expressroute-faqs.md) and any services hosted by ISVs on Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="50486-151">These include services listed in the [ExpessRoute FAQ](expressroute-faqs.md) and any services hosted by ISVs on Microsoft Azure.</span></span> <span data-ttu-id="50486-152">Connectivity to Microsoft Azure services on public peering is always initiated from your network into the Microsoft network.</span><span class="sxs-lookup"><span data-stu-id="50486-152">Connectivity to Microsoft Azure services on public peering is always initiated from your network into the Microsoft network.</span></span> <span data-ttu-id="50486-153">You must use Public IP addresses for the traffic destined to Microsoft network.</span><span class="sxs-lookup"><span data-stu-id="50486-153">You must use Public IP addresses for the traffic destined to Microsoft network.</span></span>

### <a name="microsoft-peering"></a><span data-ttu-id="50486-154">Microsoft Peering</span><span class="sxs-lookup"><span data-stu-id="50486-154">Microsoft Peering</span></span>
<span data-ttu-id="50486-155">The Microsoft peering path lets you connect to Microsoft cloud services that are not supported through the Azure public peering path.</span><span class="sxs-lookup"><span data-stu-id="50486-155">The Microsoft peering path lets you connect to Microsoft cloud services that are not supported through the Azure public peering path.</span></span> <span data-ttu-id="50486-156">The list of services includes Office 365 services, such as Exchange Online, SharePoint Online, Skype for Business, and CRM Online.</span><span class="sxs-lookup"><span data-stu-id="50486-156">The list of services includes Office 365 services, such as Exchange Online, SharePoint Online, Skype for Business, and CRM Online.</span></span> <span data-ttu-id="50486-157">Microsoft supports bi-directional connectivity on the Microsoft peering.</span><span class="sxs-lookup"><span data-stu-id="50486-157">Microsoft supports bi-directional connectivity on the Microsoft peering.</span></span> <span data-ttu-id="50486-158">Traffic destined to Microsoft cloud services must use valid public IPv4 addresses before they enter the Microsoft network.</span><span class="sxs-lookup"><span data-stu-id="50486-158">Traffic destined to Microsoft cloud services must use valid public IPv4 addresses before they enter the Microsoft network.</span></span>

<span data-ttu-id="50486-159">Make sure that your IP address and AS number are registered to you in one of the registries listed below.</span><span class="sxs-lookup"><span data-stu-id="50486-159">Make sure that your IP address and AS number are registered to you in one of the registries listed below.</span></span>

* [<span data-ttu-id="50486-160">ARIN</span><span class="sxs-lookup"><span data-stu-id="50486-160">ARIN</span></span>](https://www.arin.net/)
* [<span data-ttu-id="50486-161">APNIC</span><span class="sxs-lookup"><span data-stu-id="50486-161">APNIC</span></span>](https://www.apnic.net/)
* [<span data-ttu-id="50486-162">AFRINIC</span><span class="sxs-lookup"><span data-stu-id="50486-162">AFRINIC</span></span>](https://www.afrinic.net/)
* [<span data-ttu-id="50486-163">LACNIC</span><span class="sxs-lookup"><span data-stu-id="50486-163">LACNIC</span></span>](http://www.lacnic.net/)
* [<span data-ttu-id="50486-164">RIPENCC</span><span class="sxs-lookup"><span data-stu-id="50486-164">RIPENCC</span></span>](https://www.ripe.net/)
* [<span data-ttu-id="50486-165">RADB</span><span class="sxs-lookup"><span data-stu-id="50486-165">RADB</span></span>](http://www.radb.net/)
* [<span data-ttu-id="50486-166">ALTDB</span><span class="sxs-lookup"><span data-stu-id="50486-166">ALTDB</span></span>](http://altdb.net/)

> [!IMPORTANT]
> <span data-ttu-id="50486-167">Public IP addresses advertised to Microsoft over ExpressRoute must not be advertised to the Internet.</span><span class="sxs-lookup"><span data-stu-id="50486-167">Public IP addresses advertised to Microsoft over ExpressRoute must not be advertised to the Internet.</span></span> <span data-ttu-id="50486-168">This may break connectivity to other Microsoft services.</span><span class="sxs-lookup"><span data-stu-id="50486-168">This may break connectivity to other Microsoft services.</span></span> <span data-ttu-id="50486-169">However, Public IP addresses used by servers in your network that communicate with O365 endpoints within Microsoft may be advertised over ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="50486-169">However, Public IP addresses used by servers in your network that communicate with O365 endpoints within Microsoft may be advertised over ExpressRoute.</span></span> 
> 
> 

## <a name="dynamic-route-exchange"></a><span data-ttu-id="50486-170">Dynamic route exchange</span><span class="sxs-lookup"><span data-stu-id="50486-170">Dynamic route exchange</span></span>
<span data-ttu-id="50486-171">Routing exchange will be over eBGP protocol.</span><span class="sxs-lookup"><span data-stu-id="50486-171">Routing exchange will be over eBGP protocol.</span></span> <span data-ttu-id="50486-172">EBGP sessions are established between the MSEEs and your routers.</span><span class="sxs-lookup"><span data-stu-id="50486-172">EBGP sessions are established between the MSEEs and your routers.</span></span> <span data-ttu-id="50486-173">Authentication of BGP sessions is not a requirement.</span><span class="sxs-lookup"><span data-stu-id="50486-173">Authentication of BGP sessions is not a requirement.</span></span> <span data-ttu-id="50486-174">If required, an MD5 hash can be configured.</span><span class="sxs-lookup"><span data-stu-id="50486-174">If required, an MD5 hash can be configured.</span></span> <span data-ttu-id="50486-175">See the [Configure routing](expressroute-howto-routing-classic.md) and [Circuit provisioning workflows and circuit states](expressroute-workflows.md) for information about configuring BGP sessions.</span><span class="sxs-lookup"><span data-stu-id="50486-175">See the [Configure routing](expressroute-howto-routing-classic.md) and [Circuit provisioning workflows and circuit states](expressroute-workflows.md) for information about configuring BGP sessions.</span></span>

## <a name="autonomous-system-numbers"></a><span data-ttu-id="50486-176">Autonomous System numbers</span><span class="sxs-lookup"><span data-stu-id="50486-176">Autonomous System numbers</span></span>
<span data-ttu-id="50486-177">Microsoft will use AS 12076 for Azure public, Azure private and Microsoft peering.</span><span class="sxs-lookup"><span data-stu-id="50486-177">Microsoft will use AS 12076 for Azure public, Azure private and Microsoft peering.</span></span> <span data-ttu-id="50486-178">We have reserved ASNs from 65515 to 65520 for internal use.</span><span class="sxs-lookup"><span data-stu-id="50486-178">We have reserved ASNs from 65515 to 65520 for internal use.</span></span> <span data-ttu-id="50486-179">Both 16 and 32 bit AS numbers are supported.</span><span class="sxs-lookup"><span data-stu-id="50486-179">Both 16 and 32 bit AS numbers are supported.</span></span>

<span data-ttu-id="50486-180">There are no requirements around data transfer symmetry.</span><span class="sxs-lookup"><span data-stu-id="50486-180">There are no requirements around data transfer symmetry.</span></span> <span data-ttu-id="50486-181">The forward and return paths may traverse different router pairs.</span><span class="sxs-lookup"><span data-stu-id="50486-181">The forward and return paths may traverse different router pairs.</span></span> <span data-ttu-id="50486-182">Identical routes must be advertised from either sides across multiple circuit pairs belonging you.</span><span class="sxs-lookup"><span data-stu-id="50486-182">Identical routes must be advertised from either sides across multiple circuit pairs belonging you.</span></span> <span data-ttu-id="50486-183">Route metrics are not required to be identical.</span><span class="sxs-lookup"><span data-stu-id="50486-183">Route metrics are not required to be identical.</span></span>

## <a name="route-aggregation-and-prefix-limits"></a><span data-ttu-id="50486-184">Route aggregation and prefix limits</span><span class="sxs-lookup"><span data-stu-id="50486-184">Route aggregation and prefix limits</span></span>
<span data-ttu-id="50486-185">We support up to 4000 prefixes advertised to us through the Azure private peering.</span><span class="sxs-lookup"><span data-stu-id="50486-185">We support up to 4000 prefixes advertised to us through the Azure private peering.</span></span> <span data-ttu-id="50486-186">This can be increased up to 10,000 prefixes if the ExpressRoute premium add-on is enabled.</span><span class="sxs-lookup"><span data-stu-id="50486-186">This can be increased up to 10,000 prefixes if the ExpressRoute premium add-on is enabled.</span></span> <span data-ttu-id="50486-187">We accept up to 200 prefixes per BGP session for Azure public and Microsoft peering.</span><span class="sxs-lookup"><span data-stu-id="50486-187">We accept up to 200 prefixes per BGP session for Azure public and Microsoft peering.</span></span> 

<span data-ttu-id="50486-188">The BGP session will be dropped if the number of prefixes exceeds the limit.</span><span class="sxs-lookup"><span data-stu-id="50486-188">The BGP session will be dropped if the number of prefixes exceeds the limit.</span></span> <span data-ttu-id="50486-189">We will accept default routes on the private peering link only.</span><span class="sxs-lookup"><span data-stu-id="50486-189">We will accept default routes on the private peering link only.</span></span> <span data-ttu-id="50486-190">Provider must filter out default route and private IP addresses (RFC 1918) from the Azure public and Microsoft peering paths.</span><span class="sxs-lookup"><span data-stu-id="50486-190">Provider must filter out default route and private IP addresses (RFC 1918) from the Azure public and Microsoft peering paths.</span></span> 

## <a name="transit-routing-and-cross-region-routing"></a><span data-ttu-id="50486-191">Transit routing and cross-region routing</span><span class="sxs-lookup"><span data-stu-id="50486-191">Transit routing and cross-region routing</span></span>
<span data-ttu-id="50486-192">ExpressRoute cannot be configured as transit routers.</span><span class="sxs-lookup"><span data-stu-id="50486-192">ExpressRoute cannot be configured as transit routers.</span></span> <span data-ttu-id="50486-193">You will have to rely on your connectivity provider for transit routing services.</span><span class="sxs-lookup"><span data-stu-id="50486-193">You will have to rely on your connectivity provider for transit routing services.</span></span>

## <a name="advertising-default-routes"></a><span data-ttu-id="50486-194">Advertising default routes</span><span class="sxs-lookup"><span data-stu-id="50486-194">Advertising default routes</span></span>
<span data-ttu-id="50486-195">Default routes are permitted only on Azure private peering sessions.</span><span class="sxs-lookup"><span data-stu-id="50486-195">Default routes are permitted only on Azure private peering sessions.</span></span> <span data-ttu-id="50486-196">In such a case, we will route all traffic from the associated virtual networks to your network.</span><span class="sxs-lookup"><span data-stu-id="50486-196">In such a case, we will route all traffic from the associated virtual networks to your network.</span></span> <span data-ttu-id="50486-197">Advertising default routes into private peering will result in the internet path from Azure being blocked.</span><span class="sxs-lookup"><span data-stu-id="50486-197">Advertising default routes into private peering will result in the internet path from Azure being blocked.</span></span> <span data-ttu-id="50486-198">You must rely on your corporate edge to route traffic from and to the internet for services hosted in Azure.</span><span class="sxs-lookup"><span data-stu-id="50486-198">You must rely on your corporate edge to route traffic from and to the internet for services hosted in Azure.</span></span> 

 <span data-ttu-id="50486-199">To enable connectivity to other Azure services and infrastructure services, you must make sure one of the following items is in place:</span><span class="sxs-lookup"><span data-stu-id="50486-199">To enable connectivity to other Azure services and infrastructure services, you must make sure one of the following items is in place:</span></span>

* <span data-ttu-id="50486-200">Azure public peering is enabled to route traffic to public endpoints</span><span class="sxs-lookup"><span data-stu-id="50486-200">Azure public peering is enabled to route traffic to public endpoints</span></span>
* <span data-ttu-id="50486-201">You use user-defined routing to allow internet connectivity for every subnet requiring Internet connectivity.</span><span class="sxs-lookup"><span data-stu-id="50486-201">You use user-defined routing to allow internet connectivity for every subnet requiring Internet connectivity.</span></span>

> [!NOTE]
> <span data-ttu-id="50486-202">Advertising default routes will break Windows and other VM license activation.</span><span class="sxs-lookup"><span data-stu-id="50486-202">Advertising default routes will break Windows and other VM license activation.</span></span> <span data-ttu-id="50486-203">Follow instructions [here](http://blogs.msdn.com/b/mast/archive/2015/05/20/use-azure-custom-routes-to-enable-kms-activation-with-forced-tunneling.aspx) to work around this.</span><span class="sxs-lookup"><span data-stu-id="50486-203">Follow instructions [here](http://blogs.msdn.com/b/mast/archive/2015/05/20/use-azure-custom-routes-to-enable-kms-activation-with-forced-tunneling.aspx) to work around this.</span></span>
> 
> 

## <a name="support-for-bgp-communities-preview"></a><span data-ttu-id="50486-204">Support for BGP communities (Preview)</span><span class="sxs-lookup"><span data-stu-id="50486-204">Support for BGP communities (Preview)</span></span>
<span data-ttu-id="50486-205">This section provides an overview of how BGP communities will be used with ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="50486-205">This section provides an overview of how BGP communities will be used with ExpressRoute.</span></span> <span data-ttu-id="50486-206">Microsoft will advertise routes in the public and Microsoft peering paths with routes tagged with appropriate community values.</span><span class="sxs-lookup"><span data-stu-id="50486-206">Microsoft will advertise routes in the public and Microsoft peering paths with routes tagged with appropriate community values.</span></span> <span data-ttu-id="50486-207">The rationale for doing so and the details on community values are described below.</span><span class="sxs-lookup"><span data-stu-id="50486-207">The rationale for doing so and the details on community values are described below.</span></span> <span data-ttu-id="50486-208">Microsoft, however, will not honor any community values tagged to routes advertised to Microsoft.</span><span class="sxs-lookup"><span data-stu-id="50486-208">Microsoft, however, will not honor any community values tagged to routes advertised to Microsoft.</span></span>

<span data-ttu-id="50486-209">If you are connecting to Microsoft through ExpressRoute at any one peering location within a geopolitical region, you will have access to all Microsoft cloud services across all regions within the geopolitical boundary.</span><span class="sxs-lookup"><span data-stu-id="50486-209">If you are connecting to Microsoft through ExpressRoute at any one peering location within a geopolitical region, you will have access to all Microsoft cloud services across all regions within the geopolitical boundary.</span></span> 

<span data-ttu-id="50486-210">For example, if you connected to Microsoft in Amsterdam through ExpressRoute, you will have access to all Microsoft cloud services hosted in North Europe and West Europe.</span><span class="sxs-lookup"><span data-stu-id="50486-210">For example, if you connected to Microsoft in Amsterdam through ExpressRoute, you will have access to all Microsoft cloud services hosted in North Europe and West Europe.</span></span> 

<span data-ttu-id="50486-211">Refer to the [ExpressRoute partners and peering locations](expressroute-locations.md) page for a detailed list of geopolitical regions, associated Azure regions, and corresponding ExpressRoute peering locations.</span><span class="sxs-lookup"><span data-stu-id="50486-211">Refer to the [ExpressRoute partners and peering locations](expressroute-locations.md) page for a detailed list of geopolitical regions, associated Azure regions, and corresponding ExpressRoute peering locations.</span></span>

<span data-ttu-id="50486-212">You can purchase more than one ExpressRoute circuit per geopolitical region.</span><span class="sxs-lookup"><span data-stu-id="50486-212">You can purchase more than one ExpressRoute circuit per geopolitical region.</span></span> <span data-ttu-id="50486-213">Having multiple connections offers you significant benefits on high availability due to geo-redundancy.</span><span class="sxs-lookup"><span data-stu-id="50486-213">Having multiple connections offers you significant benefits on high availability due to geo-redundancy.</span></span> <span data-ttu-id="50486-214">In cases where you have multiple ExpressRoute circuits, you will receive the same set of prefixes advertised from Microsoft on the public peering and Microsoft peering paths.</span><span class="sxs-lookup"><span data-stu-id="50486-214">In cases where you have multiple ExpressRoute circuits, you will receive the same set of prefixes advertised from Microsoft on the public peering and Microsoft peering paths.</span></span> <span data-ttu-id="50486-215">This means you will have multiple paths from your network into Microsoft.</span><span class="sxs-lookup"><span data-stu-id="50486-215">This means you will have multiple paths from your network into Microsoft.</span></span> <span data-ttu-id="50486-216">This can potentially cause sub-optimal routing decisions to be made within your network.</span><span class="sxs-lookup"><span data-stu-id="50486-216">This can potentially cause sub-optimal routing decisions to be made within your network.</span></span> <span data-ttu-id="50486-217">As a result, you may experience sub-optimal connectivity experiences to different services.</span><span class="sxs-lookup"><span data-stu-id="50486-217">As a result, you may experience sub-optimal connectivity experiences to different services.</span></span> 

<span data-ttu-id="50486-218">Microsoft will tag prefixes advertised through public peering and Microsoft peering with appropriate BGP community values indicating the region the prefixes are hosted in.</span><span class="sxs-lookup"><span data-stu-id="50486-218">Microsoft will tag prefixes advertised through public peering and Microsoft peering with appropriate BGP community values indicating the region the prefixes are hosted in.</span></span> <span data-ttu-id="50486-219">You can rely on the community values to make appropriate routing decisions to offer [optimal routing to customers](expressroute-optimize-routing.md).</span><span class="sxs-lookup"><span data-stu-id="50486-219">You can rely on the community values to make appropriate routing decisions to offer [optimal routing to customers](expressroute-optimize-routing.md).</span></span>

| <span data-ttu-id="50486-220">**Geopolitical Region**</span><span class="sxs-lookup"><span data-stu-id="50486-220">**Geopolitical Region**</span></span> | <span data-ttu-id="50486-221">**Microsoft Azure region**</span><span class="sxs-lookup"><span data-stu-id="50486-221">**Microsoft Azure region**</span></span> | <span data-ttu-id="50486-222">**BGP community value**</span><span class="sxs-lookup"><span data-stu-id="50486-222">**BGP community value**</span></span> |
| --- | --- | --- |
| <span data-ttu-id="50486-223">**North America**</span><span class="sxs-lookup"><span data-stu-id="50486-223">**North America**</span></span> | | |
| <span data-ttu-id="50486-224">East US</span><span class="sxs-lookup"><span data-stu-id="50486-224">East US</span></span> |<span data-ttu-id="50486-225">12076:51004</span><span class="sxs-lookup"><span data-stu-id="50486-225">12076:51004</span></span> | |
| <span data-ttu-id="50486-226">East US 2</span><span class="sxs-lookup"><span data-stu-id="50486-226">East US 2</span></span> |<span data-ttu-id="50486-227">12076:51005</span><span class="sxs-lookup"><span data-stu-id="50486-227">12076:51005</span></span> | |
| <span data-ttu-id="50486-228">West US</span><span class="sxs-lookup"><span data-stu-id="50486-228">West US</span></span> |<span data-ttu-id="50486-229">12076:51006</span><span class="sxs-lookup"><span data-stu-id="50486-229">12076:51006</span></span> | |
| <span data-ttu-id="50486-230">West US 2</span><span class="sxs-lookup"><span data-stu-id="50486-230">West US 2</span></span> |<span data-ttu-id="50486-231">12076:51026</span><span class="sxs-lookup"><span data-stu-id="50486-231">12076:51026</span></span> | |
| <span data-ttu-id="50486-232">West Central US</span><span class="sxs-lookup"><span data-stu-id="50486-232">West Central US</span></span> |<span data-ttu-id="50486-233">12076:51027</span><span class="sxs-lookup"><span data-stu-id="50486-233">12076:51027</span></span> | |
| <span data-ttu-id="50486-234">North Central US</span><span class="sxs-lookup"><span data-stu-id="50486-234">North Central US</span></span> |<span data-ttu-id="50486-235">12076:51007</span><span class="sxs-lookup"><span data-stu-id="50486-235">12076:51007</span></span> | |
| <span data-ttu-id="50486-236">South Central US</span><span class="sxs-lookup"><span data-stu-id="50486-236">South Central US</span></span> |<span data-ttu-id="50486-237">12076:51008</span><span class="sxs-lookup"><span data-stu-id="50486-237">12076:51008</span></span> | |
| <span data-ttu-id="50486-238">Central US</span><span class="sxs-lookup"><span data-stu-id="50486-238">Central US</span></span> |<span data-ttu-id="50486-239">12076:51009</span><span class="sxs-lookup"><span data-stu-id="50486-239">12076:51009</span></span> | |
| <span data-ttu-id="50486-240">Canada Central</span><span class="sxs-lookup"><span data-stu-id="50486-240">Canada Central</span></span> |<span data-ttu-id="50486-241">12076:51020</span><span class="sxs-lookup"><span data-stu-id="50486-241">12076:51020</span></span> | |
| <span data-ttu-id="50486-242">Canada East</span><span class="sxs-lookup"><span data-stu-id="50486-242">Canada East</span></span> |<span data-ttu-id="50486-243">12076:51021</span><span class="sxs-lookup"><span data-stu-id="50486-243">12076:51021</span></span> | |
| <span data-ttu-id="50486-244">**South America**</span><span class="sxs-lookup"><span data-stu-id="50486-244">**South America**</span></span> | | |
| <span data-ttu-id="50486-245">Brazil South</span><span class="sxs-lookup"><span data-stu-id="50486-245">Brazil South</span></span> |<span data-ttu-id="50486-246">12076:51014</span><span class="sxs-lookup"><span data-stu-id="50486-246">12076:51014</span></span> | |
| <span data-ttu-id="50486-247">**Europe**</span><span class="sxs-lookup"><span data-stu-id="50486-247">**Europe**</span></span> | | |
| <span data-ttu-id="50486-248">North Europe</span><span class="sxs-lookup"><span data-stu-id="50486-248">North Europe</span></span> |<span data-ttu-id="50486-249">12076:51003</span><span class="sxs-lookup"><span data-stu-id="50486-249">12076:51003</span></span> | |
| <span data-ttu-id="50486-250">West Europe</span><span class="sxs-lookup"><span data-stu-id="50486-250">West Europe</span></span> |<span data-ttu-id="50486-251">12076:51002</span><span class="sxs-lookup"><span data-stu-id="50486-251">12076:51002</span></span> | |
| <span data-ttu-id="50486-252">**Asia Pacific**</span><span class="sxs-lookup"><span data-stu-id="50486-252">**Asia Pacific**</span></span> | | |
| <span data-ttu-id="50486-253">East Asia</span><span class="sxs-lookup"><span data-stu-id="50486-253">East Asia</span></span> |<span data-ttu-id="50486-254">12076:51010</span><span class="sxs-lookup"><span data-stu-id="50486-254">12076:51010</span></span> | |
| <span data-ttu-id="50486-255">Southeast Asia</span><span class="sxs-lookup"><span data-stu-id="50486-255">Southeast Asia</span></span> |<span data-ttu-id="50486-256">12076:51011</span><span class="sxs-lookup"><span data-stu-id="50486-256">12076:51011</span></span> | |
| <span data-ttu-id="50486-257">**Japan**</span><span class="sxs-lookup"><span data-stu-id="50486-257">**Japan**</span></span> | | |
| <span data-ttu-id="50486-258">Japan East</span><span class="sxs-lookup"><span data-stu-id="50486-258">Japan East</span></span> |<span data-ttu-id="50486-259">12076:51012</span><span class="sxs-lookup"><span data-stu-id="50486-259">12076:51012</span></span> | |
| <span data-ttu-id="50486-260">Japan West</span><span class="sxs-lookup"><span data-stu-id="50486-260">Japan West</span></span> |<span data-ttu-id="50486-261">12076:51013</span><span class="sxs-lookup"><span data-stu-id="50486-261">12076:51013</span></span> | |
| <span data-ttu-id="50486-262">**Australia**</span><span class="sxs-lookup"><span data-stu-id="50486-262">**Australia**</span></span> | | |
| <span data-ttu-id="50486-263">Australia East</span><span class="sxs-lookup"><span data-stu-id="50486-263">Australia East</span></span> |<span data-ttu-id="50486-264">12076:51015</span><span class="sxs-lookup"><span data-stu-id="50486-264">12076:51015</span></span> | |
| <span data-ttu-id="50486-265">Australia Southeast</span><span class="sxs-lookup"><span data-stu-id="50486-265">Australia Southeast</span></span> |<span data-ttu-id="50486-266">12076:51016</span><span class="sxs-lookup"><span data-stu-id="50486-266">12076:51016</span></span> | |
| <span data-ttu-id="50486-267">**India**</span><span class="sxs-lookup"><span data-stu-id="50486-267">**India**</span></span> | | |
| <span data-ttu-id="50486-268">India South</span><span class="sxs-lookup"><span data-stu-id="50486-268">India South</span></span> |<span data-ttu-id="50486-269">12076:51019</span><span class="sxs-lookup"><span data-stu-id="50486-269">12076:51019</span></span> | |
| <span data-ttu-id="50486-270">India West</span><span class="sxs-lookup"><span data-stu-id="50486-270">India West</span></span> |<span data-ttu-id="50486-271">12076:51018</span><span class="sxs-lookup"><span data-stu-id="50486-271">12076:51018</span></span> | |
| <span data-ttu-id="50486-272">India Central</span><span class="sxs-lookup"><span data-stu-id="50486-272">India Central</span></span> |<span data-ttu-id="50486-273">12076:51017</span><span class="sxs-lookup"><span data-stu-id="50486-273">12076:51017</span></span> | |

<span data-ttu-id="50486-274">All routes advertised from Microsoft will be tagged with the appropriate community value.</span><span class="sxs-lookup"><span data-stu-id="50486-274">All routes advertised from Microsoft will be tagged with the appropriate community value.</span></span> 

> [!IMPORTANT]
> <span data-ttu-id="50486-275">Global prefixes will be tagged with an appropriate community value and will be advertised only when ExpressRoute premium add-on is enabled.</span><span class="sxs-lookup"><span data-stu-id="50486-275">Global prefixes will be tagged with an appropriate community value and will be advertised only when ExpressRoute premium add-on is enabled.</span></span>
> 
> 

<span data-ttu-id="50486-276">In addition to the above, Microsoft will also tag prefixes based on the service they belong to.</span><span class="sxs-lookup"><span data-stu-id="50486-276">In addition to the above, Microsoft will also tag prefixes based on the service they belong to.</span></span> <span data-ttu-id="50486-277">This applies only to the Microsoft peering.</span><span class="sxs-lookup"><span data-stu-id="50486-277">This applies only to the Microsoft peering.</span></span> <span data-ttu-id="50486-278">The table below provides a mapping of service to BGP community value.</span><span class="sxs-lookup"><span data-stu-id="50486-278">The table below provides a mapping of service to BGP community value.</span></span>

| <span data-ttu-id="50486-279">**Service**</span><span class="sxs-lookup"><span data-stu-id="50486-279">**Service**</span></span> | <span data-ttu-id="50486-280">**BGP community value**</span><span class="sxs-lookup"><span data-stu-id="50486-280">**BGP community value**</span></span> |
| --- | --- |
| <span data-ttu-id="50486-281">**Exchange**</span><span class="sxs-lookup"><span data-stu-id="50486-281">**Exchange**</span></span> |<span data-ttu-id="50486-282">12076:5010</span><span class="sxs-lookup"><span data-stu-id="50486-282">12076:5010</span></span> |
| <span data-ttu-id="50486-283">**SharePoint**</span><span class="sxs-lookup"><span data-stu-id="50486-283">**SharePoint**</span></span> |<span data-ttu-id="50486-284">12076:5020</span><span class="sxs-lookup"><span data-stu-id="50486-284">12076:5020</span></span> |
| <span data-ttu-id="50486-285">**Skype For Business**</span><span class="sxs-lookup"><span data-stu-id="50486-285">**Skype For Business**</span></span> |<span data-ttu-id="50486-286">12076:5030</span><span class="sxs-lookup"><span data-stu-id="50486-286">12076:5030</span></span> |
| <span data-ttu-id="50486-287">**CRM Online**</span><span class="sxs-lookup"><span data-stu-id="50486-287">**CRM Online**</span></span> |<span data-ttu-id="50486-288">12076:5040</span><span class="sxs-lookup"><span data-stu-id="50486-288">12076:5040</span></span> |
| <span data-ttu-id="50486-289">**Other Office 365 Services**</span><span class="sxs-lookup"><span data-stu-id="50486-289">**Other Office 365 Services**</span></span> |<span data-ttu-id="50486-290">12076:5100</span><span class="sxs-lookup"><span data-stu-id="50486-290">12076:5100</span></span> |

> [!NOTE]
> <span data-ttu-id="50486-291">Microsoft does not honor any BGP community values that you set on the routes advertised to Microsoft.</span><span class="sxs-lookup"><span data-stu-id="50486-291">Microsoft does not honor any BGP community values that you set on the routes advertised to Microsoft.</span></span>
> 
> 

## <a name="next-steps"></a><span data-ttu-id="50486-292">Next steps</span><span class="sxs-lookup"><span data-stu-id="50486-292">Next steps</span></span>
* <span data-ttu-id="50486-293">Configure your ExpressRoute connection.</span><span class="sxs-lookup"><span data-stu-id="50486-293">Configure your ExpressRoute connection.</span></span>
  
  * <span data-ttu-id="50486-294">[Create an ExpressRoute circuit for the classic deployment model](expressroute-howto-circuit-classic.md) or [Create and modify an ExpressRoute circuit using Azure Resource Manager](expressroute-howto-circuit-arm.md)</span><span class="sxs-lookup"><span data-stu-id="50486-294">[Create an ExpressRoute circuit for the classic deployment model](expressroute-howto-circuit-classic.md) or [Create and modify an ExpressRoute circuit using Azure Resource Manager](expressroute-howto-circuit-arm.md)</span></span>
  * <span data-ttu-id="50486-295">[Configure routing for the classic deployment model](expressroute-howto-routing-classic.md) or [Configure routing for the Resource Manager deployment model](expressroute-howto-routing-arm.md)</span><span class="sxs-lookup"><span data-stu-id="50486-295">[Configure routing for the classic deployment model](expressroute-howto-routing-classic.md) or [Configure routing for the Resource Manager deployment model](expressroute-howto-routing-arm.md)</span></span>
  * <span data-ttu-id="50486-296">[Link a classic VNet to an ExpressRoute circuit](expressroute-howto-linkvnet-classic.md) or [Link a Resource Manager VNet to an ExpressRoute circuit](expressroute-howto-linkvnet-arm.md)</span><span class="sxs-lookup"><span data-stu-id="50486-296">[Link a classic VNet to an ExpressRoute circuit](expressroute-howto-linkvnet-classic.md) or [Link a Resource Manager VNet to an ExpressRoute circuit](expressroute-howto-linkvnet-arm.md)</span></span>

