---
title: Azure ExpressRoute for Cloud Solution Providers | Microsoft Docs
description: This article provides information for Cloud Service Providers that want to incorporate Azure services and ExpressRoute into their offerings.
documentationcenter: na
services: expressroute
author: richcar
manager: carmonm
editor: ''
ms.assetid: f6c5f8ee-40ba-41a1-ae31-67669ca419a6
ms.service: expressroute
ms.devlang: na
ms.topic: get-started-article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 10/10/2016
ms.author: richcar
ms.openlocfilehash: 9991da5d5ab6f43cc8c5ebf1672d7da0f1ad061e
ms.sourcegitcommit: d1451406a010fd3aa854dc8e5b77dc5537d8050e
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 09/13/2018
ms.locfileid: "44818277"
---
# <a name="expressroute-for-cloud-solution-providers-csp"></a><span data-ttu-id="223d9-103">ExpressRoute for Cloud Solution Providers (CSP)</span><span class="sxs-lookup"><span data-stu-id="223d9-103">ExpressRoute for Cloud Solution Providers (CSP)</span></span>
<span data-ttu-id="223d9-104">Microsoft provides hyper-scale services for traditional resellers and distributors (CSP) to be able to rapidly provision new services and solutions for your customers without the need to invest in developing these new services.</span><span class="sxs-lookup"><span data-stu-id="223d9-104">Microsoft provides hyper-scale services for traditional resellers and distributors (CSP) to be able to rapidly provision new services and solutions for your customers without the need to invest in developing these new services.</span></span> <span data-ttu-id="223d9-105">To allow the Cloud Solution Provider (CSP) the ability to directly manage these new services, Microsoft provides programs and APIs that allow the CSP to manage Microsoft Azure resources on behalf of your customers.</span><span class="sxs-lookup"><span data-stu-id="223d9-105">To allow the Cloud Solution Provider (CSP) the ability to directly manage these new services, Microsoft provides programs and APIs that allow the CSP to manage Microsoft Azure resources on behalf of your customers.</span></span> <span data-ttu-id="223d9-106">One of those resources is ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="223d9-106">One of those resources is ExpressRoute.</span></span> <span data-ttu-id="223d9-107">ExpressRoute allows the CSP to connect existing customer resources to Azure services.</span><span class="sxs-lookup"><span data-stu-id="223d9-107">ExpressRoute allows the CSP to connect existing customer resources to Azure services.</span></span> <span data-ttu-id="223d9-108">ExpressRoute is a high speed private communications link to services in Azure.</span><span class="sxs-lookup"><span data-stu-id="223d9-108">ExpressRoute is a high speed private communications link to services in Azure.</span></span> 

<span data-ttu-id="223d9-109">ExpressRoute is comprised of a pair of circuits for high availability that are attached to a single customer's subscription(s) and cannot be shared by multiple customers.</span><span class="sxs-lookup"><span data-stu-id="223d9-109">ExpressRoute is comprised of a pair of circuits for high availability that are attached to a single customer's subscription(s) and cannot be shared by multiple customers.</span></span> <span data-ttu-id="223d9-110">Each circuit should be terminated in a different router to maintain the high availability.</span><span class="sxs-lookup"><span data-stu-id="223d9-110">Each circuit should be terminated in a different router to maintain the high availability.</span></span>

> [!NOTE]
> <span data-ttu-id="223d9-111">There are bandwidth and connection caps on ExpressRoute which means that large/complex implementations will require multiple ExpressRoute circuits for a single customer.</span><span class="sxs-lookup"><span data-stu-id="223d9-111">There are bandwidth and connection caps on ExpressRoute which means that large/complex implementations will require multiple ExpressRoute circuits for a single customer.</span></span>
> 
> 

<span data-ttu-id="223d9-112">Microsoft Azure provides a growing number of services that you can offer to your customers.</span><span class="sxs-lookup"><span data-stu-id="223d9-112">Microsoft Azure provides a growing number of services that you can offer to your customers.</span></span> <span data-ttu-id="223d9-113">ExpressRoute helps you and your customers take advantage of these services by providing high speed low latency access to the Microsoft Azure environment.</span><span class="sxs-lookup"><span data-stu-id="223d9-113">ExpressRoute helps you and your customers take advantage of these services by providing high speed low latency access to the Microsoft Azure environment.</span></span>

## <a name="microsoft-azure-management"></a><span data-ttu-id="223d9-114">Microsoft Azure management</span><span class="sxs-lookup"><span data-stu-id="223d9-114">Microsoft Azure management</span></span>
<span data-ttu-id="223d9-115">Microsoft provides CSPs with APIs to manage the Azure customer subscriptions by allowing programmatic integration with your own service management systems.</span><span class="sxs-lookup"><span data-stu-id="223d9-115">Microsoft provides CSPs with APIs to manage the Azure customer subscriptions by allowing programmatic integration with your own service management systems.</span></span> <span data-ttu-id="223d9-116">Supported management capabilities can be found [here](https://msdn.microsoft.com/library/partnercenter/dn974944.aspx).</span><span class="sxs-lookup"><span data-stu-id="223d9-116">Supported management capabilities can be found [here](https://msdn.microsoft.com/library/partnercenter/dn974944.aspx).</span></span>

## <a name="microsoft-azure-resource-management"></a><span data-ttu-id="223d9-117">Microsoft Azure resource management</span><span class="sxs-lookup"><span data-stu-id="223d9-117">Microsoft Azure resource management</span></span>
<span data-ttu-id="223d9-118">The contract you have with your customer will determine how the subscription will be managed.</span><span class="sxs-lookup"><span data-stu-id="223d9-118">The contract you have with your customer will determine how the subscription will be managed.</span></span> <span data-ttu-id="223d9-119">The CSP can directly manage the creation and maintenance of resources or the customer can maintain control of the Microsoft Azure subscription and create the Azure resources as they need.</span><span class="sxs-lookup"><span data-stu-id="223d9-119">The CSP can directly manage the creation and maintenance of resources or the customer can maintain control of the Microsoft Azure subscription and create the Azure resources as they need.</span></span> <span data-ttu-id="223d9-120">If your customer manages the creation of resources in their Microsoft Azure subscription they will use one of two models: “*Connect-Through*” model, or “*Direct-To*” model.</span><span class="sxs-lookup"><span data-stu-id="223d9-120">If your customer manages the creation of resources in their Microsoft Azure subscription they will use one of two models: “*Connect-Through*” model, or “*Direct-To*” model.</span></span> <span data-ttu-id="223d9-121">These models are described in detail in the following sections.</span><span class="sxs-lookup"><span data-stu-id="223d9-121">These models are described in detail in the following sections.</span></span>  

### <a name="connect-through-model"></a><span data-ttu-id="223d9-122">Connect-through model</span><span class="sxs-lookup"><span data-stu-id="223d9-122">Connect-through model</span></span>
![alt text](./media/expressroute-for-cloud-solution-providers/connect-through.png)  

<span data-ttu-id="223d9-124">In the connect-through model, the CSP creates a direct connection between your datacenter and your customer’s Azure subscription.</span><span class="sxs-lookup"><span data-stu-id="223d9-124">In the connect-through model, the CSP creates a direct connection between your datacenter and your customer’s Azure subscription.</span></span> <span data-ttu-id="223d9-125">The direct connection is made using ExpressRoute, connecting your network with Azure.</span><span class="sxs-lookup"><span data-stu-id="223d9-125">The direct connection is made using ExpressRoute, connecting your network with Azure.</span></span> <span data-ttu-id="223d9-126">Then your customer connects to your network.</span><span class="sxs-lookup"><span data-stu-id="223d9-126">Then your customer connects to your network.</span></span> <span data-ttu-id="223d9-127">This scenario requires that the customer passes through the CSP network to access Azure services.</span><span class="sxs-lookup"><span data-stu-id="223d9-127">This scenario requires that the customer passes through the CSP network to access Azure services.</span></span> 

<span data-ttu-id="223d9-128">If your customer has other Azure subscriptions not managed by the you, they would use the public Internet or their own private connection to connect to those services provisioned under the non CSP subscription.</span><span class="sxs-lookup"><span data-stu-id="223d9-128">If your customer has other Azure subscriptions not managed by the you, they would use the public Internet or their own private connection to connect to those services provisioned under the non CSP subscription.</span></span> 

<span data-ttu-id="223d9-129">For CSP managing Azure services, it is assumed that the CSP has a previously established customer identity store which would then be replicated into Azure Active Directory for management of their CSP subscription through Administrate-On-Behalf-Of (AOBO).</span><span class="sxs-lookup"><span data-stu-id="223d9-129">For CSP managing Azure services, it is assumed that the CSP has a previously established customer identity store which would then be replicated into Azure Active Directory for management of their CSP subscription through Administrate-On-Behalf-Of (AOBO).</span></span> <span data-ttu-id="223d9-130">Key drivers for this scenario include where a given partner or service provider has an established relationship with the customer, the customer is consuming provider services currently or the partner has a desire to provide a combination of provider-hosted and Azure-hosted solutions to provide flexibility and address customer challenges which cannot be satisfied by CSP alone.</span><span class="sxs-lookup"><span data-stu-id="223d9-130">Key drivers for this scenario include where a given partner or service provider has an established relationship with the customer, the customer is consuming provider services currently or the partner has a desire to provide a combination of provider-hosted and Azure-hosted solutions to provide flexibility and address customer challenges which cannot be satisfied by CSP alone.</span></span> <span data-ttu-id="223d9-131">This model is illustrated in **Figure**, below.</span><span class="sxs-lookup"><span data-stu-id="223d9-131">This model is illustrated in **Figure**, below.</span></span>

![alt text](./media/expressroute-for-cloud-solution-providers/connect-through-model.png)

### <a name="connect-to-model"></a><span data-ttu-id="223d9-133">Connect-to model</span><span class="sxs-lookup"><span data-stu-id="223d9-133">Connect-to model</span></span>
![alt text](./media/expressroute-for-cloud-solution-providers/connect-to.png)

<span data-ttu-id="223d9-135">In the Connect-To model, the service provider creates a direct connection between their customer’s datacenter and the CSP provisioned Azure subscription using ExpressRoute over the customer’s (customer) network.</span><span class="sxs-lookup"><span data-stu-id="223d9-135">In the Connect-To model, the service provider creates a direct connection between their customer’s datacenter and the CSP provisioned Azure subscription using ExpressRoute over the customer’s (customer) network.</span></span>

> [!NOTE]
> <span data-ttu-id="223d9-136">For ExpressRoute the customer would need to create and maintain the ExpressRoute circuit.</span><span class="sxs-lookup"><span data-stu-id="223d9-136">For ExpressRoute the customer would need to create and maintain the ExpressRoute circuit.</span></span>  
> 
> 

<span data-ttu-id="223d9-137">This connectivity scenario requires that the customer connects directly through a customer network to access CSP-managed Azure subscription, using a direct network connection that is created, owned and managed either wholly or in part by the customer.</span><span class="sxs-lookup"><span data-stu-id="223d9-137">This connectivity scenario requires that the customer connects directly through a customer network to access CSP-managed Azure subscription, using a direct network connection that is created, owned and managed either wholly or in part by the customer.</span></span> <span data-ttu-id="223d9-138">For these customers it is assumed that the provider does not currently have a customer identity store established, and the provider would assist the customer in replicating their current identify store into Azure Active Directory for management of their subscription through AOBO.</span><span class="sxs-lookup"><span data-stu-id="223d9-138">For these customers it is assumed that the provider does not currently have a customer identity store established, and the provider would assist the customer in replicating their current identify store into Azure Active Directory for management of their subscription through AOBO.</span></span> <span data-ttu-id="223d9-139">Key drivers for this scenario include where a given partner or service provider has an established relationship with the customer, the customer is consuming provider services currently, or the partner has a desire to provide services that are based solely on Azure-hosted solutions without the need for an existing provider datacenter or infrastructure.</span><span class="sxs-lookup"><span data-stu-id="223d9-139">Key drivers for this scenario include where a given partner or service provider has an established relationship with the customer, the customer is consuming provider services currently, or the partner has a desire to provide services that are based solely on Azure-hosted solutions without the need for an existing provider datacenter or infrastructure.</span></span>

![alt text](./media/expressroute-for-cloud-solution-providers/connect-to-model.png)

<span data-ttu-id="223d9-141">The choice between these two option are based on your customer’s needs and your current need to provide Azure services.</span><span class="sxs-lookup"><span data-stu-id="223d9-141">The choice between these two option are based on your customer’s needs and your current need to provide Azure services.</span></span> <span data-ttu-id="223d9-142">The details of these models and the associated role-based access control, networking, and identity design patterns are covered in details in the following links:</span><span class="sxs-lookup"><span data-stu-id="223d9-142">The details of these models and the associated role-based access control, networking, and identity design patterns are covered in details in the following links:</span></span>

* <span data-ttu-id="223d9-143">**Role Based Access Control (RBAC)** – RBAC is based on Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="223d9-143">**Role Based Access Control (RBAC)** – RBAC is based on Azure Active Directory.</span></span>  <span data-ttu-id="223d9-144">For more information on Azure RBAC see [here](../role-based-access-control/role-assignments-portal.md).</span><span class="sxs-lookup"><span data-stu-id="223d9-144">For more information on Azure RBAC see [here](../role-based-access-control/role-assignments-portal.md).</span></span>
* <span data-ttu-id="223d9-145">**Networking** – Covers the various topics of networking in Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="223d9-145">**Networking** – Covers the various topics of networking in Microsoft Azure.</span></span>
* <span data-ttu-id="223d9-146">**Azure Active Directory (Azure AD)** – Azure AD provides the identity management for Microsoft Azure and 3rd party SaaS applications.</span><span class="sxs-lookup"><span data-stu-id="223d9-146">**Azure Active Directory (Azure AD)** – Azure AD provides the identity management for Microsoft Azure and 3rd party SaaS applications.</span></span> <span data-ttu-id="223d9-147">For more information about Azure AD see [here](https://azure.microsoft.com/documentation/services/active-directory/).</span><span class="sxs-lookup"><span data-stu-id="223d9-147">For more information about Azure AD see [here](https://azure.microsoft.com/documentation/services/active-directory/).</span></span>  

## <a name="network-speeds"></a><span data-ttu-id="223d9-148">Network speeds</span><span class="sxs-lookup"><span data-stu-id="223d9-148">Network speeds</span></span>
<span data-ttu-id="223d9-149">ExpressRoute supports network speeds from 50 Mb/s to 10Gb/s.</span><span class="sxs-lookup"><span data-stu-id="223d9-149">ExpressRoute supports network speeds from 50 Mb/s to 10Gb/s.</span></span> <span data-ttu-id="223d9-150">This allows customers to purchase the amount of network bandwidth needed for their unique environment.</span><span class="sxs-lookup"><span data-stu-id="223d9-150">This allows customers to purchase the amount of network bandwidth needed for their unique environment.</span></span>

> [!NOTE]
> <span data-ttu-id="223d9-151">Network bandwidth can be increased as needed without disrupting communications, but to reduce the network speed requires tearing down the circuit and recreating it at the lower network speed.</span><span class="sxs-lookup"><span data-stu-id="223d9-151">Network bandwidth can be increased as needed without disrupting communications, but to reduce the network speed requires tearing down the circuit and recreating it at the lower network speed.</span></span>  
> 
> 

<span data-ttu-id="223d9-152">ExpressRoute supports the connection of multiple vNets to a single ExpressRoute circuit for better utilization of the higher-speed connections.</span><span class="sxs-lookup"><span data-stu-id="223d9-152">ExpressRoute supports the connection of multiple vNets to a single ExpressRoute circuit for better utilization of the higher-speed connections.</span></span> <span data-ttu-id="223d9-153">A single ExpressRoute circuit can be shared among multiple Azure subscriptions owned by the same customer.</span><span class="sxs-lookup"><span data-stu-id="223d9-153">A single ExpressRoute circuit can be shared among multiple Azure subscriptions owned by the same customer.</span></span>

## <a name="configuring-expressroute"></a><span data-ttu-id="223d9-154">Configuring ExpressRoute</span><span class="sxs-lookup"><span data-stu-id="223d9-154">Configuring ExpressRoute</span></span>
<span data-ttu-id="223d9-155">ExpressRoute can be configured to support three types of traffic ([routing domains](#ExpressRoute-routing-domains)) over a single ExpressRoute circuit.</span><span class="sxs-lookup"><span data-stu-id="223d9-155">ExpressRoute can be configured to support three types of traffic ([routing domains](#ExpressRoute-routing-domains)) over a single ExpressRoute circuit.</span></span> <span data-ttu-id="223d9-156">This traffic is segregated into Microsoft peering, Azure public peering and private peering.</span><span class="sxs-lookup"><span data-stu-id="223d9-156">This traffic is segregated into Microsoft peering, Azure public peering and private peering.</span></span> <span data-ttu-id="223d9-157">You can choose one or all types of traffic to be sent over a single ExpressRoute circuit or use multiple ExpressRoute circuits depending on the size of the ExpressRoute circuit and isolation required by your customer.</span><span class="sxs-lookup"><span data-stu-id="223d9-157">You can choose one or all types of traffic to be sent over a single ExpressRoute circuit or use multiple ExpressRoute circuits depending on the size of the ExpressRoute circuit and isolation required by your customer.</span></span> <span data-ttu-id="223d9-158">The security posture of your customer may not allow public traffic and private traffic to traverse over the same circuit.</span><span class="sxs-lookup"><span data-stu-id="223d9-158">The security posture of your customer may not allow public traffic and private traffic to traverse over the same circuit.</span></span>

### <a name="connect-through-model"></a><span data-ttu-id="223d9-159">Connect-through model</span><span class="sxs-lookup"><span data-stu-id="223d9-159">Connect-through model</span></span>
<span data-ttu-id="223d9-160">In a connect-through configuration the you will be responsible for all of the networking underpinnings to connect your customers datacenter resources to the subscriptions hosted in Azure.</span><span class="sxs-lookup"><span data-stu-id="223d9-160">In a connect-through configuration the you will be responsible for all of the networking underpinnings to connect your customers datacenter resources to the subscriptions hosted in Azure.</span></span> <span data-ttu-id="223d9-161">Each of your customer's that want to use Azure capabilities will need their own ExpressRoute connection, which will be managed by the You.</span><span class="sxs-lookup"><span data-stu-id="223d9-161">Each of your customer's that want to use Azure capabilities will need their own ExpressRoute connection, which will be managed by the You.</span></span> <span data-ttu-id="223d9-162">The you will use the same methods the customer would use to procure the ExpressRoute circuit.</span><span class="sxs-lookup"><span data-stu-id="223d9-162">The you will use the same methods the customer would use to procure the ExpressRoute circuit.</span></span> <span data-ttu-id="223d9-163">The you will follow the same steps outlined in the article [ExpressRoute workflows](expressroute-workflows.md) for circuit provisioning and circuit states.</span><span class="sxs-lookup"><span data-stu-id="223d9-163">The you will follow the same steps outlined in the article [ExpressRoute workflows](expressroute-workflows.md) for circuit provisioning and circuit states.</span></span> <span data-ttu-id="223d9-164">The you will then configure the Border Gateway Protocol (BGP) routes to control the traffic flowing between the on-premises network and Azure vNet.</span><span class="sxs-lookup"><span data-stu-id="223d9-164">The you will then configure the Border Gateway Protocol (BGP) routes to control the traffic flowing between the on-premises network and Azure vNet.</span></span>

### <a name="connect-to-model"></a><span data-ttu-id="223d9-165">Connect-to model</span><span class="sxs-lookup"><span data-stu-id="223d9-165">Connect-to model</span></span>
<span data-ttu-id="223d9-166">In a connect-to configuration, your customer already has an existing connection to Azure or will initiate a connection to the internet service provider linking ExpressRoute from your customer’s own datacenter directly to Azure, instead of your datacenter.</span><span class="sxs-lookup"><span data-stu-id="223d9-166">In a connect-to configuration, your customer already has an existing connection to Azure or will initiate a connection to the internet service provider linking ExpressRoute from your customer’s own datacenter directly to Azure, instead of your datacenter.</span></span> <span data-ttu-id="223d9-167">To begin the provisioning process, your customer will follow the steps as described in the Connect-Through model, above.</span><span class="sxs-lookup"><span data-stu-id="223d9-167">To begin the provisioning process, your customer will follow the steps as described in the Connect-Through model, above.</span></span> <span data-ttu-id="223d9-168">Once the circuit has been established your customer will need to configure the on-premises routers to be able to access both your network and Azure vNets.</span><span class="sxs-lookup"><span data-stu-id="223d9-168">Once the circuit has been established your customer will need to configure the on-premises routers to be able to access both your network and Azure vNets.</span></span>

<span data-ttu-id="223d9-169">You can assist with setting up the connection and configuring the routes to allow the resources in your datacenter(s) to communicate with the client resources in your datacenter, or with the resources hosted in Azure.</span><span class="sxs-lookup"><span data-stu-id="223d9-169">You can assist with setting up the connection and configuring the routes to allow the resources in your datacenter(s) to communicate with the client resources in your datacenter, or with the resources hosted in Azure.</span></span>

## <a name="expressroute-routing-domains"></a><span data-ttu-id="223d9-170">ExpressRoute routing domains</span><span class="sxs-lookup"><span data-stu-id="223d9-170">ExpressRoute routing domains</span></span>
<span data-ttu-id="223d9-171">ExpressRoute offers three routing domains: public, private, and Microsoft peering.</span><span class="sxs-lookup"><span data-stu-id="223d9-171">ExpressRoute offers three routing domains: public, private, and Microsoft peering.</span></span> <span data-ttu-id="223d9-172">Each of the routing domains are configured with identical routers in active-active configuration for high availability.</span><span class="sxs-lookup"><span data-stu-id="223d9-172">Each of the routing domains are configured with identical routers in active-active configuration for high availability.</span></span> <span data-ttu-id="223d9-173">For more details on ExpressRoute routing domains look [here](expressroute-circuit-peerings.md).</span><span class="sxs-lookup"><span data-stu-id="223d9-173">For more details on ExpressRoute routing domains look [here](expressroute-circuit-peerings.md).</span></span>

<span data-ttu-id="223d9-174">You can define custom routes filters to allow only the route(s) you want to allow or need.</span><span class="sxs-lookup"><span data-stu-id="223d9-174">You can define custom routes filters to allow only the route(s) you want to allow or need.</span></span> <span data-ttu-id="223d9-175">For more information or to see how to make these changes see article: [Create and modify routing for an ExpressRoute circuit using PowerShell](expressroute-howto-routing-classic.md) for more details about routing filters.</span><span class="sxs-lookup"><span data-stu-id="223d9-175">For more information or to see how to make these changes see article: [Create and modify routing for an ExpressRoute circuit using PowerShell](expressroute-howto-routing-classic.md) for more details about routing filters.</span></span>

> [!NOTE]
> <span data-ttu-id="223d9-176">For Microsoft and Public Peering connectivity must be though a public IP address owned by the customer or CSP and must adhere to all defined rules.</span><span class="sxs-lookup"><span data-stu-id="223d9-176">For Microsoft and Public Peering connectivity must be though a public IP address owned by the customer or CSP and must adhere to all defined rules.</span></span> <span data-ttu-id="223d9-177">For more information, see the [ExpressRoute Prerequisites](expressroute-prerequisites.md) page.</span><span class="sxs-lookup"><span data-stu-id="223d9-177">For more information, see the [ExpressRoute Prerequisites](expressroute-prerequisites.md) page.</span></span>  
> 
> 

## <a name="routing"></a><span data-ttu-id="223d9-178">Routing</span><span class="sxs-lookup"><span data-stu-id="223d9-178">Routing</span></span>
<span data-ttu-id="223d9-179">ExpressRoute connects to the Azure networks through the Azure Virtual Network Gateway.</span><span class="sxs-lookup"><span data-stu-id="223d9-179">ExpressRoute connects to the Azure networks through the Azure Virtual Network Gateway.</span></span> <span data-ttu-id="223d9-180">Network gateways provide routing for Azure virtual networks.</span><span class="sxs-lookup"><span data-stu-id="223d9-180">Network gateways provide routing for Azure virtual networks.</span></span>

<span data-ttu-id="223d9-181">Creating Azure Virtual Networks also creates a default routing table for the vNet to direct traffic to/from the subnets of the vNet.</span><span class="sxs-lookup"><span data-stu-id="223d9-181">Creating Azure Virtual Networks also creates a default routing table for the vNet to direct traffic to/from the subnets of the vNet.</span></span> <span data-ttu-id="223d9-182">If the default route table is insufficient for the solution custom routes can be created to route outgoing traffic to custom appliances or to block routes to specific subnets or external networks.</span><span class="sxs-lookup"><span data-stu-id="223d9-182">If the default route table is insufficient for the solution custom routes can be created to route outgoing traffic to custom appliances or to block routes to specific subnets or external networks.</span></span>

### <a name="default-routing"></a><span data-ttu-id="223d9-183">Default routing</span><span class="sxs-lookup"><span data-stu-id="223d9-183">Default routing</span></span>
<span data-ttu-id="223d9-184">The default route table includes the following routes:</span><span class="sxs-lookup"><span data-stu-id="223d9-184">The default route table includes the following routes:</span></span>

* <span data-ttu-id="223d9-185">Routing within a subnet</span><span class="sxs-lookup"><span data-stu-id="223d9-185">Routing within a subnet</span></span>
* <span data-ttu-id="223d9-186">Subnet-to-subnet within the virtual network</span><span class="sxs-lookup"><span data-stu-id="223d9-186">Subnet-to-subnet within the virtual network</span></span>
* <span data-ttu-id="223d9-187">To the Internet</span><span class="sxs-lookup"><span data-stu-id="223d9-187">To the Internet</span></span>
* <span data-ttu-id="223d9-188">Virtual network-to-virtual network using VPN gateway</span><span class="sxs-lookup"><span data-stu-id="223d9-188">Virtual network-to-virtual network using VPN gateway</span></span>
* <span data-ttu-id="223d9-189">Virtual network-to-on-premises network using a VPN or ExpressRoute gateway</span><span class="sxs-lookup"><span data-stu-id="223d9-189">Virtual network-to-on-premises network using a VPN or ExpressRoute gateway</span></span>

![alt text](./media/expressroute-for-cloud-solution-providers/default-routing.png)  

### <a name="user-defined-routing-udr"></a><span data-ttu-id="223d9-191">User-defined routing (UDR)</span><span class="sxs-lookup"><span data-stu-id="223d9-191">User-defined routing (UDR)</span></span>
<span data-ttu-id="223d9-192">User-defined routes allow the control of traffic outbound from the assigned subnet to other subnets in the virtual network or over one of the other predefined gateways (ExpressRoute; internet or VPN).</span><span class="sxs-lookup"><span data-stu-id="223d9-192">User-defined routes allow the control of traffic outbound from the assigned subnet to other subnets in the virtual network or over one of the other predefined gateways (ExpressRoute; internet or VPN).</span></span> <span data-ttu-id="223d9-193">The default system routing table can be replaced with a user-defined routing table that replaces the default routing table with custom routes.</span><span class="sxs-lookup"><span data-stu-id="223d9-193">The default system routing table can be replaced with a user-defined routing table that replaces the default routing table with custom routes.</span></span> <span data-ttu-id="223d9-194">With user-defined routing, customers can create specific routes to appliances such as firewalls or intrusion detection appliances, or block access to specific subnets from the subnet hosting the user-defined route.</span><span class="sxs-lookup"><span data-stu-id="223d9-194">With user-defined routing, customers can create specific routes to appliances such as firewalls or intrusion detection appliances, or block access to specific subnets from the subnet hosting the user-defined route.</span></span> <span data-ttu-id="223d9-195">For an overview of User Defined Routes look [here](../virtual-network/virtual-networks-udr-overview.md).</span><span class="sxs-lookup"><span data-stu-id="223d9-195">For an overview of User Defined Routes look [here](../virtual-network/virtual-networks-udr-overview.md).</span></span> 

## <a name="security"></a><span data-ttu-id="223d9-196">Security</span><span class="sxs-lookup"><span data-stu-id="223d9-196">Security</span></span>
<span data-ttu-id="223d9-197">Depending on which model is in use, Connect-To or Connect-Through, your customer defines the security policies in their vNet or provides the security policy requirements to the CSP to define to their vNets.</span><span class="sxs-lookup"><span data-stu-id="223d9-197">Depending on which model is in use, Connect-To or Connect-Through, your customer defines the security policies in their vNet or provides the security policy requirements to the CSP to define to their vNets.</span></span> <span data-ttu-id="223d9-198">The following security criteria can be defined:</span><span class="sxs-lookup"><span data-stu-id="223d9-198">The following security criteria can be defined:</span></span>

1. <span data-ttu-id="223d9-199">**Customer Isolation** — The Azure platform provides customer isolation by storing Customer ID and vNet info in a secure database, which is used to encapsulate each customer’s traffic in a GRE tunnel.</span><span class="sxs-lookup"><span data-stu-id="223d9-199">**Customer Isolation** — The Azure platform provides customer isolation by storing Customer ID and vNet info in a secure database, which is used to encapsulate each customer’s traffic in a GRE tunnel.</span></span>
2. <span data-ttu-id="223d9-200">**Network Security Group (NSG)** rules are for defining allowed traffic into and out of the subnets within vNets in Azure.</span><span class="sxs-lookup"><span data-stu-id="223d9-200">**Network Security Group (NSG)** rules are for defining allowed traffic into and out of the subnets within vNets in Azure.</span></span> <span data-ttu-id="223d9-201">By default, the NSG contain Block rules to block traffic from the Internet to the vNet and Allow rules for traffic within a vNet.</span><span class="sxs-lookup"><span data-stu-id="223d9-201">By default, the NSG contain Block rules to block traffic from the Internet to the vNet and Allow rules for traffic within a vNet.</span></span> <span data-ttu-id="223d9-202">For more information about Network Security Groups look [here](https://azure.microsoft.com/blog/network-security-groups/).</span><span class="sxs-lookup"><span data-stu-id="223d9-202">For more information about Network Security Groups look [here](https://azure.microsoft.com/blog/network-security-groups/).</span></span>
3. <span data-ttu-id="223d9-203">**Force tunneling** —This is an option to redirect internet bound traffic originating in Azure to be redirected over the ExpressRoute connection to the on premises datacenter.</span><span class="sxs-lookup"><span data-stu-id="223d9-203">**Force tunneling** —This is an option to redirect internet bound traffic originating in Azure to be redirected over the ExpressRoute connection to the on premises datacenter.</span></span> <span data-ttu-id="223d9-204">For more information about Forced tunneling look [here](expressroute-routing.md#advertising-default-routes).</span><span class="sxs-lookup"><span data-stu-id="223d9-204">For more information about Forced tunneling look [here](expressroute-routing.md#advertising-default-routes).</span></span>  
4. <span data-ttu-id="223d9-205">**Encryption** — Even though the ExpressRoute circuits are dedicated to a specific customer, there is the possibility that the network provider could be breached, allowing an intruder to examine packet traffic.</span><span class="sxs-lookup"><span data-stu-id="223d9-205">**Encryption** — Even though the ExpressRoute circuits are dedicated to a specific customer, there is the possibility that the network provider could be breached, allowing an intruder to examine packet traffic.</span></span> <span data-ttu-id="223d9-206">To address this potential, a customer or CSP can encrypt traffic over the connection by defining IPSec tunnel-mode policies for all traffic flowing between the on premises resources and Azure resources (refer to the optional Tunnel mode IPSec for Customer 1 in Figure 5: ExpressRoute Security, above).</span><span class="sxs-lookup"><span data-stu-id="223d9-206">To address this potential, a customer or CSP can encrypt traffic over the connection by defining IPSec tunnel-mode policies for all traffic flowing between the on premises resources and Azure resources (refer to the optional Tunnel mode IPSec for Customer 1 in Figure 5: ExpressRoute Security, above).</span></span> <span data-ttu-id="223d9-207">The second option would be to use a firewall appliance at each the end point of the ExpressRoute circuit.</span><span class="sxs-lookup"><span data-stu-id="223d9-207">The second option would be to use a firewall appliance at each the end point of the ExpressRoute circuit.</span></span> <span data-ttu-id="223d9-208">This will require additional 3rd party firewall VMs/Appliances to be installed on both ends to encrypt the traffic over the ExpressRoute circuit.</span><span class="sxs-lookup"><span data-stu-id="223d9-208">This will require additional 3rd party firewall VMs/Appliances to be installed on both ends to encrypt the traffic over the ExpressRoute circuit.</span></span>

![alt text](./media/expressroute-for-cloud-solution-providers/expressroute-security.png)  

## <a name="next-steps"></a><span data-ttu-id="223d9-210">Next steps</span><span class="sxs-lookup"><span data-stu-id="223d9-210">Next steps</span></span>
<span data-ttu-id="223d9-211">The Cloud Solution Provider service provides you a way to increase your value to your customers without the need for expensive infrastructure and capability purchases, while maintaining your position as the primary outsourcing provider.</span><span class="sxs-lookup"><span data-stu-id="223d9-211">The Cloud Solution Provider service provides you a way to increase your value to your customers without the need for expensive infrastructure and capability purchases, while maintaining your position as the primary outsourcing provider.</span></span> <span data-ttu-id="223d9-212">Seamless integration with Microsoft Azure can be accomplished through the CSP API, allowing you to integrate management of Microsoft Azure within your existing management frameworks.</span><span class="sxs-lookup"><span data-stu-id="223d9-212">Seamless integration with Microsoft Azure can be accomplished through the CSP API, allowing you to integrate management of Microsoft Azure within your existing management frameworks.</span></span>  

<span data-ttu-id="223d9-213">Additional Information can be found at the following links:</span><span class="sxs-lookup"><span data-stu-id="223d9-213">Additional Information can be found at the following links:</span></span>

<span data-ttu-id="223d9-214">[Azure in Cloud Solution Provider program](https://docs.microsoft.com/azure/cloud-solution-provider).</span><span class="sxs-lookup"><span data-stu-id="223d9-214">[Azure in Cloud Solution Provider program](https://docs.microsoft.com/azure/cloud-solution-provider).</span></span>  
<span data-ttu-id="223d9-215">[Get ready to transact as a Cloud Solution Provider](https://partner.microsoft.com/en-us/solutions/cloud-reseller-pre-launch).</span><span class="sxs-lookup"><span data-stu-id="223d9-215">[Get ready to transact as a Cloud Solution Provider](https://partner.microsoft.com/en-us/solutions/cloud-reseller-pre-launch).</span></span>  
<span data-ttu-id="223d9-216">[Microsoft Cloud Solution Provider resources](https://partner.microsoft.com/en-us/solutions/cloud-reseller-resources).</span><span class="sxs-lookup"><span data-stu-id="223d9-216">[Microsoft Cloud Solution Provider resources](https://partner.microsoft.com/en-us/solutions/cloud-reseller-resources).</span></span>
