---
title: Cloud business continuity - database recovery - SQL Database | Microsoft Docs
description: Learn how Azure SQL Database supports cloud business continuity and database recovery and helps keep mission-critical cloud applications running.
keywords: business continuity,cloud business continuity,database disaster recovery,database recovery
services: sql-database
documentationcenter: ''
author: anosov1960
manager: jhubbard
editor: ''
ms.assetid: 18e5d3f1-bfe5-4089-b6fd-76988ab29822
ms.service: sql-database
ms.custom: business continuity
ms.devlang: NA
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 10/13/2016
ms.author: sashan
ms.openlocfilehash: 2ddbe1766a978f9849c310a72086f95cbb68cd83
ms.sourcegitcommit: 5b9d839c0c0a94b293fdafe1d6e5429506c07e05
ms.translationtype: HT
ms.contentlocale: nl-NL
ms.lasthandoff: 08/02/2018
ms.locfileid: "44552860"
---
# <a name="overview-of-business-continuity-with-azure-sql-database"></a><span data-ttu-id="7915e-104">Overview of business continuity with Azure SQL Database</span><span class="sxs-lookup"><span data-stu-id="7915e-104">Overview of business continuity with Azure SQL Database</span></span>
<span data-ttu-id="7915e-105">This overview describes the capabilities that Azure SQL Database provides for business continuity and disaster recovery.</span><span class="sxs-lookup"><span data-stu-id="7915e-105">This overview describes the capabilities that Azure SQL Database provides for business continuity and disaster recovery.</span></span> <span data-ttu-id="7915e-106">It provides options, recommendations, and tutorials for recovering from disruptive events that could cause data loss or cause your database and application to become unavailable.</span><span class="sxs-lookup"><span data-stu-id="7915e-106">It provides options, recommendations, and tutorials for recovering from disruptive events that could cause data loss or cause your database and application to become unavailable.</span></span> <span data-ttu-id="7915e-107">The discussion includes what to do when a user or application error affects data integrity, an Azure region has an outage, or your application requires maintenance.</span><span class="sxs-lookup"><span data-stu-id="7915e-107">The discussion includes what to do when a user or application error affects data integrity, an Azure region has an outage, or your application requires maintenance.</span></span>

## <a name="sql-database-features-that-you-can-use-to-provide-business-continuity"></a><span data-ttu-id="7915e-108">SQL Database features that you can use to provide business continuity</span><span class="sxs-lookup"><span data-stu-id="7915e-108">SQL Database features that you can use to provide business continuity</span></span>
<span data-ttu-id="7915e-109">SQL Database provides several business continuity features, including automated backups and optional database replication.</span><span class="sxs-lookup"><span data-stu-id="7915e-109">SQL Database provides several business continuity features, including automated backups and optional database replication.</span></span> <span data-ttu-id="7915e-110">Each has different characteristics for estimated recovery time (ERT) and potential data loss for recent transactions.</span><span class="sxs-lookup"><span data-stu-id="7915e-110">Each has different characteristics for estimated recovery time (ERT) and potential data loss for recent transactions.</span></span> <span data-ttu-id="7915e-111">Once you understand these options, you can choose among them - and, in most scenarios, use them together for different scenarios.</span><span class="sxs-lookup"><span data-stu-id="7915e-111">Once you understand these options, you can choose among them - and, in most scenarios, use them together for different scenarios.</span></span> <span data-ttu-id="7915e-112">As you develop your business continuity plan, you need to understand the maximum acceptable time before the application fully recovers after the disruptive event - this is your recovery time objective (RTO).</span><span class="sxs-lookup"><span data-stu-id="7915e-112">As you develop your business continuity plan, you need to understand the maximum acceptable time before the application fully recovers after the disruptive event - this is your recovery time objective (RTO).</span></span> <span data-ttu-id="7915e-113">You also need to understand the maximum amount of recent data updates (time interval) the application can tolerate losing when recovering after the disruptive event - the recovery point objective (RPO).</span><span class="sxs-lookup"><span data-stu-id="7915e-113">You also need to understand the maximum amount of recent data updates (time interval) the application can tolerate losing when recovering after the disruptive event - the recovery point objective (RPO).</span></span>

<span data-ttu-id="7915e-114">The following table compares the ERT and RPO for the three most common scenarios.</span><span class="sxs-lookup"><span data-stu-id="7915e-114">The following table compares the ERT and RPO for the three most common scenarios.</span></span>

| <span data-ttu-id="7915e-115">Capability</span><span class="sxs-lookup"><span data-stu-id="7915e-115">Capability</span></span> | <span data-ttu-id="7915e-116">Basic tier</span><span class="sxs-lookup"><span data-stu-id="7915e-116">Basic tier</span></span> | <span data-ttu-id="7915e-117">Standard tier</span><span class="sxs-lookup"><span data-stu-id="7915e-117">Standard tier</span></span> | <span data-ttu-id="7915e-118">Premium tier</span><span class="sxs-lookup"><span data-stu-id="7915e-118">Premium tier</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="7915e-119">Point in Time Restore from backup</span><span class="sxs-lookup"><span data-stu-id="7915e-119">Point in Time Restore from backup</span></span> |<span data-ttu-id="7915e-120">Any restore point within 7 days</span><span class="sxs-lookup"><span data-stu-id="7915e-120">Any restore point within 7 days</span></span> |<span data-ttu-id="7915e-121">Any restore point within 35 days</span><span class="sxs-lookup"><span data-stu-id="7915e-121">Any restore point within 35 days</span></span> |<span data-ttu-id="7915e-122">Any restore point within 35 days</span><span class="sxs-lookup"><span data-stu-id="7915e-122">Any restore point within 35 days</span></span> |
| <span data-ttu-id="7915e-123">Geo-Restore from geo-replicated backups</span><span class="sxs-lookup"><span data-stu-id="7915e-123">Geo-Restore from geo-replicated backups</span></span> |<span data-ttu-id="7915e-124">ERT < 12h, RPO < 1h</span><span class="sxs-lookup"><span data-stu-id="7915e-124">ERT < 12h, RPO < 1h</span></span> |<span data-ttu-id="7915e-125">ERT < 12h, RPO < 1h</span><span class="sxs-lookup"><span data-stu-id="7915e-125">ERT < 12h, RPO < 1h</span></span> |<span data-ttu-id="7915e-126">ERT < 12h, RPO < 1h</span><span class="sxs-lookup"><span data-stu-id="7915e-126">ERT < 12h, RPO < 1h</span></span> |
| <span data-ttu-id="7915e-127">Restore from Azure Backup Vault</span><span class="sxs-lookup"><span data-stu-id="7915e-127">Restore from Azure Backup Vault</span></span> |<span data-ttu-id="7915e-128">ERT < 12h, RPO < 1 wk</span><span class="sxs-lookup"><span data-stu-id="7915e-128">ERT < 12h, RPO < 1 wk</span></span> |<span data-ttu-id="7915e-129">ERT < 12h, RPO < 1 wk</span><span class="sxs-lookup"><span data-stu-id="7915e-129">ERT < 12h, RPO < 1 wk</span></span> |<span data-ttu-id="7915e-130">ERT < 12h, RPO < 1 wk</span><span class="sxs-lookup"><span data-stu-id="7915e-130">ERT < 12h, RPO < 1 wk</span></span> |
| <span data-ttu-id="7915e-131">Active Geo-Replication</span><span class="sxs-lookup"><span data-stu-id="7915e-131">Active Geo-Replication</span></span> |<span data-ttu-id="7915e-132">ERT < 30s, RPO < 5s</span><span class="sxs-lookup"><span data-stu-id="7915e-132">ERT < 30s, RPO < 5s</span></span> |<span data-ttu-id="7915e-133">ERT < 30s, RPO < 5s</span><span class="sxs-lookup"><span data-stu-id="7915e-133">ERT < 30s, RPO < 5s</span></span> |<span data-ttu-id="7915e-134">ERT < 30s, RPO < 5s</span><span class="sxs-lookup"><span data-stu-id="7915e-134">ERT < 30s, RPO < 5s</span></span> |

### <a name="use-database-backups-to-recover-a-database"></a><span data-ttu-id="7915e-135">Use database backups to recover a database</span><span class="sxs-lookup"><span data-stu-id="7915e-135">Use database backups to recover a database</span></span>
<span data-ttu-id="7915e-136">SQL Database automatically performs a combination of full database backups weekly, differential database backups hourly, and transaction log backups every five minutes to protect your business from data loss.</span><span class="sxs-lookup"><span data-stu-id="7915e-136">SQL Database automatically performs a combination of full database backups weekly, differential database backups hourly, and transaction log backups every five minutes to protect your business from data loss.</span></span> <span data-ttu-id="7915e-137">These backups are stored in geo-redundant storage for 35 days for databases in the Standard and Premium service tiers and seven days for databases in the Basic service tier - see [service tiers](sql-database-service-tiers.md) for more details on service tiers.</span><span class="sxs-lookup"><span data-stu-id="7915e-137">These backups are stored in geo-redundant storage for 35 days for databases in the Standard and Premium service tiers and seven days for databases in the Basic service tier - see [service tiers](sql-database-service-tiers.md) for more details on service tiers.</span></span> <span data-ttu-id="7915e-138">If the retention period for your service tier does not meet your business requirements, you can increase the retention period by [changing the service tier](sql-database-service-tiers.md).</span><span class="sxs-lookup"><span data-stu-id="7915e-138">If the retention period for your service tier does not meet your business requirements, you can increase the retention period by [changing the service tier](sql-database-service-tiers.md).</span></span> <span data-ttu-id="7915e-139">The full and differential database backups are also replicated to a [paired data center](../best-practices-availability-paired-regions.md) for protection against a data center outage.</span><span class="sxs-lookup"><span data-stu-id="7915e-139">The full and differential database backups are also replicated to a [paired data center](../best-practices-availability-paired-regions.md) for protection against a data center outage.</span></span> <span data-ttu-id="7915e-140">See [automatic database backups](sql-database-automated-backups.md) for more details.</span><span class="sxs-lookup"><span data-stu-id="7915e-140">See [automatic database backups](sql-database-automated-backups.md) for more details.</span></span>

<span data-ttu-id="7915e-141">If the built-in retention period is not sufficient for your application, you can extend it by configuring the Long-term retention policy for your database(s).</span><span class="sxs-lookup"><span data-stu-id="7915e-141">If the built-in retention period is not sufficient for your application, you can extend it by configuring the Long-term retention policy for your database(s).</span></span> <span data-ttu-id="7915e-142">For more information, see [Long-term retention](sql-database-long-term-retention.md).</span><span class="sxs-lookup"><span data-stu-id="7915e-142">For more information, see [Long-term retention](sql-database-long-term-retention.md).</span></span>

<span data-ttu-id="7915e-143">You can use these automatic database backups to recover a database from various disruptive events, both within your data center and to another data center.</span><span class="sxs-lookup"><span data-stu-id="7915e-143">You can use these automatic database backups to recover a database from various disruptive events, both within your data center and to another data center.</span></span> <span data-ttu-id="7915e-144">Using automatic database backups, the estimated time of recovery depends on several factors including the total number of databases recovering in the same region at the same time, the database size, the transaction log size, and network bandwidth.</span><span class="sxs-lookup"><span data-stu-id="7915e-144">Using automatic database backups, the estimated time of recovery depends on several factors including the total number of databases recovering in the same region at the same time, the database size, the transaction log size, and network bandwidth.</span></span> <span data-ttu-id="7915e-145">In most cases, the recovery time is less than 12 hours.</span><span class="sxs-lookup"><span data-stu-id="7915e-145">In most cases, the recovery time is less than 12 hours.</span></span> <span data-ttu-id="7915e-146">When recovering to another data region, the potential data loss is limited to 1 hour by the geo-redundant storage of hourly differential database backups.</span><span class="sxs-lookup"><span data-stu-id="7915e-146">When recovering to another data region, the potential data loss is limited to 1 hour by the geo-redundant storage of hourly differential database backups.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="7915e-147">To recover using automated backups, you must be a member of the SQL Server Contributor role or the subscription owner - see [RBAC: Built-in roles](../active-directory/role-based-access-built-in-roles.md).</span><span class="sxs-lookup"><span data-stu-id="7915e-147">To recover using automated backups, you must be a member of the SQL Server Contributor role or the subscription owner - see [RBAC: Built-in roles](../active-directory/role-based-access-built-in-roles.md).</span></span> <span data-ttu-id="7915e-148">You can recover using the Azure portal, PowerShell, or the REST API.</span><span class="sxs-lookup"><span data-stu-id="7915e-148">You can recover using the Azure portal, PowerShell, or the REST API.</span></span> <span data-ttu-id="7915e-149">You cannot use Transact-SQL.</span><span class="sxs-lookup"><span data-stu-id="7915e-149">You cannot use Transact-SQL.</span></span>
>
>

<span data-ttu-id="7915e-150">Use automated backups as your business continuity and recovery mechanism if your application:</span><span class="sxs-lookup"><span data-stu-id="7915e-150">Use automated backups as your business continuity and recovery mechanism if your application:</span></span>

* <span data-ttu-id="7915e-151">Is not considered mission critical.</span><span class="sxs-lookup"><span data-stu-id="7915e-151">Is not considered mission critical.</span></span>
* <span data-ttu-id="7915e-152">Doesn't have a binding SLA therefore the downtime of 24 hours or longer will not result in financial liability.</span><span class="sxs-lookup"><span data-stu-id="7915e-152">Doesn't have a binding SLA therefore the downtime of 24 hours or longer will not result in financial liability.</span></span>
* <span data-ttu-id="7915e-153">Has a low rate of data change (low transactions per hour) and losing up to an hour of change is an acceptable data loss.</span><span class="sxs-lookup"><span data-stu-id="7915e-153">Has a low rate of data change (low transactions per hour) and losing up to an hour of change is an acceptable data loss.</span></span>
* <span data-ttu-id="7915e-154">Is cost sensitive.</span><span class="sxs-lookup"><span data-stu-id="7915e-154">Is cost sensitive.</span></span>

<span data-ttu-id="7915e-155">If you need faster recovery, use [Active Geo-Replication](sql-database-geo-replication-overview.md) (discussed next).</span><span class="sxs-lookup"><span data-stu-id="7915e-155">If you need faster recovery, use [Active Geo-Replication](sql-database-geo-replication-overview.md) (discussed next).</span></span> <span data-ttu-id="7915e-156">If you need to be able to recover data from a period older than 35 days, consider archiving your database regularly to a BACPAC file (a compressed file containing your database schema and associated data) stored either in Azure blob storage or in another location of your choice.</span><span class="sxs-lookup"><span data-stu-id="7915e-156">If you need to be able to recover data from a period older than 35 days, consider archiving your database regularly to a BACPAC file (a compressed file containing your database schema and associated data) stored either in Azure blob storage or in another location of your choice.</span></span> <span data-ttu-id="7915e-157">For more information on how to create a transactionally consistent database archive, see [create a database copy](sql-database-copy.md) and [export the database copy](sql-database-export.md).</span><span class="sxs-lookup"><span data-stu-id="7915e-157">For more information on how to create a transactionally consistent database archive, see [create a database copy](sql-database-copy.md) and [export the database copy](sql-database-export.md).</span></span>

### <a name="use-active-geo-replication-and-auto-failover-groups-to-reduce-recovery-time-and-limit-data-loss-associated-with-a-recovery"></a><span data-ttu-id="7915e-158">Use Active Geo-Replication and auto-failover groups to reduce recovery time and limit data loss associated with a recovery</span><span class="sxs-lookup"><span data-stu-id="7915e-158">Use Active Geo-Replication and auto-failover groups to reduce recovery time and limit data loss associated with a recovery</span></span>
<span data-ttu-id="7915e-159">In addition to using database backups for database recovery in the event of a business disruption, you can use [Active Geo-Replication](sql-database-geo-replication-overview.md) to configure a database to have up to four readable secondary databases in the regions of your choice.</span><span class="sxs-lookup"><span data-stu-id="7915e-159">In addition to using database backups for database recovery in the event of a business disruption, you can use [Active Geo-Replication](sql-database-geo-replication-overview.md) to configure a database to have up to four readable secondary databases in the regions of your choice.</span></span> <span data-ttu-id="7915e-160">These secondary databases are kept synchronized with the primary database using an asynchronous replication mechanism.</span><span class="sxs-lookup"><span data-stu-id="7915e-160">These secondary databases are kept synchronized with the primary database using an asynchronous replication mechanism.</span></span> <span data-ttu-id="7915e-161">This feature is used to protect against business disruption in the event of a data center outage or during an application upgrade.</span><span class="sxs-lookup"><span data-stu-id="7915e-161">This feature is used to protect against business disruption in the event of a data center outage or during an application upgrade.</span></span> <span data-ttu-id="7915e-162">Active Geo-Replication can also be used to provide better query performance for read-only queries to geographically dispersed users.</span><span class="sxs-lookup"><span data-stu-id="7915e-162">Active Geo-Replication can also be used to provide better query performance for read-only queries to geographically dispersed users.</span></span>

<span data-ttu-id="7915e-163">To enable automated and transparent failover you should organize your geo-replicated databases into groups using the auto-failover group <link> feature of SQL Database.</span><span class="sxs-lookup"><span data-stu-id="7915e-163">To enable automated and transparent failover you should organize your geo-replicated databases into groups using the auto-failover group <link> feature of SQL Database.</span></span>

<span data-ttu-id="7915e-164">If the primary database goes offline unexpectedly or you need to take it offline for maintenance activities, you can quickly promote a secondary to become the primary (also called a failover) and configure applications to connect to the newly promoted primary.</span><span class="sxs-lookup"><span data-stu-id="7915e-164">If the primary database goes offline unexpectedly or you need to take it offline for maintenance activities, you can quickly promote a secondary to become the primary (also called a failover) and configure applications to connect to the newly promoted primary.</span></span> <span data-ttu-id="7915e-165">If your application is connecting to the databases using the failover group listener, you don’t need to change the SQL connection string configuration after failover.</span><span class="sxs-lookup"><span data-stu-id="7915e-165">If your application is connecting to the databases using the failover group listener, you don’t need to change the SQL connection string configuration after failover.</span></span> <span data-ttu-id="7915e-166">With a planned failover, there is no data loss.</span><span class="sxs-lookup"><span data-stu-id="7915e-166">With a planned failover, there is no data loss.</span></span> <span data-ttu-id="7915e-167">With an unplanned failover, there may be some small amount of data loss for very recent transactions due to the nature of asynchronous replication.</span><span class="sxs-lookup"><span data-stu-id="7915e-167">With an unplanned failover, there may be some small amount of data loss for very recent transactions due to the nature of asynchronous replication.</span></span> <span data-ttu-id="7915e-168">Using auto-failover groups, you can customize the failover policy to minimize the potential data loss.</span><span class="sxs-lookup"><span data-stu-id="7915e-168">Using auto-failover groups, you can customize the failover policy to minimize the potential data loss.</span></span> <span data-ttu-id="7915e-169">After a failover, you can later failback - either according to a plan or when the data center comes back online.</span><span class="sxs-lookup"><span data-stu-id="7915e-169">After a failover, you can later failback - either according to a plan or when the data center comes back online.</span></span> <span data-ttu-id="7915e-170">In all cases, users experience a small amount of downtime and need to reconnect.</span><span class="sxs-lookup"><span data-stu-id="7915e-170">In all cases, users experience a small amount of downtime and need to reconnect.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="7915e-171">To use Active Geo-Replication and auto-failover groups, you must either be the subscription owner or have administrative permissions in SQL Server.</span><span class="sxs-lookup"><span data-stu-id="7915e-171">To use Active Geo-Replication and auto-failover groups, you must either be the subscription owner or have administrative permissions in SQL Server.</span></span> <span data-ttu-id="7915e-172">You can configure and failover using the Azure portal, PowerShell, or the REST API using permissions on the subscription or using Transact-SQL using permissions within SQL Server.</span><span class="sxs-lookup"><span data-stu-id="7915e-172">You can configure and failover using the Azure portal, PowerShell, or the REST API using permissions on the subscription or using Transact-SQL using permissions within SQL Server.</span></span>
>
>

<span data-ttu-id="7915e-173">Use Active Geo-Replication if your application meets any of these criteria:</span><span class="sxs-lookup"><span data-stu-id="7915e-173">Use Active Geo-Replication if your application meets any of these criteria:</span></span>

* <span data-ttu-id="7915e-174">Is mission critical.</span><span class="sxs-lookup"><span data-stu-id="7915e-174">Is mission critical.</span></span>
* <span data-ttu-id="7915e-175">Has a service level agreement (SLA) that does not allow for 24 hours or more of downtime.</span><span class="sxs-lookup"><span data-stu-id="7915e-175">Has a service level agreement (SLA) that does not allow for 24 hours or more of downtime.</span></span>
* <span data-ttu-id="7915e-176">Downtime will result in financial liability.</span><span class="sxs-lookup"><span data-stu-id="7915e-176">Downtime will result in financial liability.</span></span>
* <span data-ttu-id="7915e-177">Has a high rate of data change is high and losing an hour of data is not acceptable.</span><span class="sxs-lookup"><span data-stu-id="7915e-177">Has a high rate of data change is high and losing an hour of data is not acceptable.</span></span>
* <span data-ttu-id="7915e-178">The additional cost of active geo-replication is lower than the potential financial liability and associated loss of business.</span><span class="sxs-lookup"><span data-stu-id="7915e-178">The additional cost of active geo-replication is lower than the potential financial liability and associated loss of business.</span></span>

>
> [!VIDEO https://channel9.msdn.com/Blogs/Azure/Azure-SQL-Database-protecting-important-DBs-from-regional-disasters-is-easy/player]
>

## <a name="recover-a-database-after-a-user-or-application-error"></a><span data-ttu-id="7915e-179">Recover a database after a user or application error</span><span class="sxs-lookup"><span data-stu-id="7915e-179">Recover a database after a user or application error</span></span>
<span data-ttu-id="7915e-180">\*No one is perfect!</span><span class="sxs-lookup"><span data-stu-id="7915e-180">\*No one is perfect!</span></span> <span data-ttu-id="7915e-181">A user might accidentally delete some data, inadvertently drop an important table, or even drop an entire database.</span><span class="sxs-lookup"><span data-stu-id="7915e-181">A user might accidentally delete some data, inadvertently drop an important table, or even drop an entire database.</span></span> <span data-ttu-id="7915e-182">Or, an application might accidentally overwrite good data with bad data due to an application defect.</span><span class="sxs-lookup"><span data-stu-id="7915e-182">Or, an application might accidentally overwrite good data with bad data due to an application defect.</span></span>

<span data-ttu-id="7915e-183">In this scenario, these are your recovery options.</span><span class="sxs-lookup"><span data-stu-id="7915e-183">In this scenario, these are your recovery options.</span></span>

### <a name="perform-a-point-in-time-restore"></a><span data-ttu-id="7915e-184">Perform a point-in-time restore</span><span class="sxs-lookup"><span data-stu-id="7915e-184">Perform a point-in-time restore</span></span>
<span data-ttu-id="7915e-185">You can use the automated backups to recover a copy of your database to a known good point in time, provided that time is within the database retention period.</span><span class="sxs-lookup"><span data-stu-id="7915e-185">You can use the automated backups to recover a copy of your database to a known good point in time, provided that time is within the database retention period.</span></span> <span data-ttu-id="7915e-186">After the database is restored, you can either replace the original database with the restored database or copy the needed data from the restored data into the original database.</span><span class="sxs-lookup"><span data-stu-id="7915e-186">After the database is restored, you can either replace the original database with the restored database or copy the needed data from the restored data into the original database.</span></span> <span data-ttu-id="7915e-187">If the database uses Active Geo-Replication, we recommend copying the required data from the restored copy into the original database.</span><span class="sxs-lookup"><span data-stu-id="7915e-187">If the database uses Active Geo-Replication, we recommend copying the required data from the restored copy into the original database.</span></span> <span data-ttu-id="7915e-188">If you replace the original database with the restored database, you will need to reconfigure and resynchronize Active Geo-Replication (which can take quite some time for a large database).</span><span class="sxs-lookup"><span data-stu-id="7915e-188">If you replace the original database with the restored database, you will need to reconfigure and resynchronize Active Geo-Replication (which can take quite some time for a large database).</span></span>

<span data-ttu-id="7915e-189">For more information and for detailed steps for restoring a database to a point in time using the Azure portal or using PowerShell, see [point-in-time restore](sql-database-recovery-using-backups.md#point-in-time-restore).</span><span class="sxs-lookup"><span data-stu-id="7915e-189">For more information and for detailed steps for restoring a database to a point in time using the Azure portal or using PowerShell, see [point-in-time restore](sql-database-recovery-using-backups.md#point-in-time-restore).</span></span> <span data-ttu-id="7915e-190">You cannot recover using Transact-SQL.</span><span class="sxs-lookup"><span data-stu-id="7915e-190">You cannot recover using Transact-SQL.</span></span>

### <a name="restore-a-deleted-database"></a><span data-ttu-id="7915e-191">Restore a deleted database</span><span class="sxs-lookup"><span data-stu-id="7915e-191">Restore a deleted database</span></span>
<span data-ttu-id="7915e-192">If the database is deleted but the logical server has not been deleted, you can restore the deleted database to the point at which it was deleted.</span><span class="sxs-lookup"><span data-stu-id="7915e-192">If the database is deleted but the logical server has not been deleted, you can restore the deleted database to the point at which it was deleted.</span></span> <span data-ttu-id="7915e-193">This restores a database backup to the same logical SQL server from which it was deleted.</span><span class="sxs-lookup"><span data-stu-id="7915e-193">This restores a database backup to the same logical SQL server from which it was deleted.</span></span> <span data-ttu-id="7915e-194">You can restore it using the original name or provide a new name or the restored database.</span><span class="sxs-lookup"><span data-stu-id="7915e-194">You can restore it using the original name or provide a new name or the restored database.</span></span>

<span data-ttu-id="7915e-195">For more information and for detailed steps for restoring a deleted database using the Azure portal or using PowerShell, see [restore a deleted database](sql-database-recovery-using-backups.md#deleted-database-restore).</span><span class="sxs-lookup"><span data-stu-id="7915e-195">For more information and for detailed steps for restoring a deleted database using the Azure portal or using PowerShell, see [restore a deleted database](sql-database-recovery-using-backups.md#deleted-database-restore).</span></span> <span data-ttu-id="7915e-196">You cannot restore using Transact-SQL.</span><span class="sxs-lookup"><span data-stu-id="7915e-196">You cannot restore using Transact-SQL.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="7915e-197">If the logical server is deleted, you cannot recover a deleted database.</span><span class="sxs-lookup"><span data-stu-id="7915e-197">If the logical server is deleted, you cannot recover a deleted database.</span></span>
>
>

### <a name="restore-from-azure-backup-vault"></a><span data-ttu-id="7915e-198">Restore from Azure Backup Vault</span><span class="sxs-lookup"><span data-stu-id="7915e-198">Restore from Azure Backup Vault</span></span>
<span data-ttu-id="7915e-199">If the data loss occurred outside the current retention period for automated backups and your database is configured for long term retention, you can restore from a weekly backup in Azure Backup Vault to a new database.</span><span class="sxs-lookup"><span data-stu-id="7915e-199">If the data loss occurred outside the current retention period for automated backups and your database is configured for long term retention, you can restore from a weekly backup in Azure Backup Vault to a new database.</span></span> <span data-ttu-id="7915e-200">At this point, you can either replace the original database with the restored database or copy the needed data from the restored database into the original database.</span><span class="sxs-lookup"><span data-stu-id="7915e-200">At this point, you can either replace the original database with the restored database or copy the needed data from the restored database into the original database.</span></span> <span data-ttu-id="7915e-201">If you need to retrieve an old version of your database prior to a major application upgrade, satisfy a request from auditors or a legal order, you can create a new database using a full backup saved in the Azure Backup Vault.</span><span class="sxs-lookup"><span data-stu-id="7915e-201">If you need to retrieve an old version of your database prior to a major application upgrade, satisfy a request from auditors or a legal order, you can create a new database using a full backup saved in the Azure Backup Vault.</span></span>  <span data-ttu-id="7915e-202">For more information, see [Long-term retention](sql-database-long-term-retention.md).</span><span class="sxs-lookup"><span data-stu-id="7915e-202">For more information, see [Long-term retention](sql-database-long-term-retention.md).</span></span>

## <a name="recover-a-database-to-another-region-from-an-azure-regional-data-center-outage"></a><span data-ttu-id="7915e-203">Recover a database to another region from an Azure regional data center outage</span><span class="sxs-lookup"><span data-stu-id="7915e-203">Recover a database to another region from an Azure regional data center outage</span></span>
<!-- Explain this scenario -->

<span data-ttu-id="7915e-204">Although rare, an Azure data center can have an outage.</span><span class="sxs-lookup"><span data-stu-id="7915e-204">Although rare, an Azure data center can have an outage.</span></span> <span data-ttu-id="7915e-205">When an outage occurs, it causes a business disruption that might only last a few minutes or might last for hours.</span><span class="sxs-lookup"><span data-stu-id="7915e-205">When an outage occurs, it causes a business disruption that might only last a few minutes or might last for hours.</span></span>

* <span data-ttu-id="7915e-206">One option is to wait for your database to come back online when the data center outage is over.</span><span class="sxs-lookup"><span data-stu-id="7915e-206">One option is to wait for your database to come back online when the data center outage is over.</span></span> <span data-ttu-id="7915e-207">This works for applications that can afford to have the database offline.</span><span class="sxs-lookup"><span data-stu-id="7915e-207">This works for applications that can afford to have the database offline.</span></span> <span data-ttu-id="7915e-208">For example, a development project or free trial you don't need to work on constantly.</span><span class="sxs-lookup"><span data-stu-id="7915e-208">For example, a development project or free trial you don't need to work on constantly.</span></span> <span data-ttu-id="7915e-209">When a data center has an outage, you won't know how long the outage will last, so this option only works if you don't need your database for a while.</span><span class="sxs-lookup"><span data-stu-id="7915e-209">When a data center has an outage, you won't know how long the outage will last, so this option only works if you don't need your database for a while.</span></span>
* <span data-ttu-id="7915e-210">Another option is to either failover to another data region if you are using Active Geo-Replication or the recover using geo-redundant database backups (Geo-Restore).</span><span class="sxs-lookup"><span data-stu-id="7915e-210">Another option is to either failover to another data region if you are using Active Geo-Replication or the recover using geo-redundant database backups (Geo-Restore).</span></span> <span data-ttu-id="7915e-211">Failover takes only a few seconds, while recovery from backups takes hours.</span><span class="sxs-lookup"><span data-stu-id="7915e-211">Failover takes only a few seconds, while recovery from backups takes hours.</span></span>

<span data-ttu-id="7915e-212">When you take action, how long it takes you to recover, and how much data loss you incur in the event of a data center outage depends upon how you decide to use the business continuity features discussed above in your application.</span><span class="sxs-lookup"><span data-stu-id="7915e-212">When you take action, how long it takes you to recover, and how much data loss you incur in the event of a data center outage depends upon how you decide to use the business continuity features discussed above in your application.</span></span> <span data-ttu-id="7915e-213">Indeed, you may choose to use a combination of database backups and Active Geo-Replication depending upon your application requirements.</span><span class="sxs-lookup"><span data-stu-id="7915e-213">Indeed, you may choose to use a combination of database backups and Active Geo-Replication depending upon your application requirements.</span></span> <span data-ttu-id="7915e-214">For a discussion of application design considerations for stand-alone databases and for elastic pools using these business continuity features, see [Design an application for cloud disaster recovery](sql-database-designing-cloud-solutions-for-disaster-recovery.md) and [Elastic Pool disaster recovery strategies](sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool.md).</span><span class="sxs-lookup"><span data-stu-id="7915e-214">For a discussion of application design considerations for stand-alone databases and for elastic pools using these business continuity features, see [Design an application for cloud disaster recovery](sql-database-designing-cloud-solutions-for-disaster-recovery.md) and [Elastic Pool disaster recovery strategies](sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool.md).</span></span>

<span data-ttu-id="7915e-215">The sections below provide an overview of the steps to recover using either database backups or Active Geo-Replication.</span><span class="sxs-lookup"><span data-stu-id="7915e-215">The sections below provide an overview of the steps to recover using either database backups or Active Geo-Replication.</span></span> <span data-ttu-id="7915e-216">For detailed steps including planning requirements, post recovery steps and information about how to simulate an outage to perform a disaster recovery drill, see [Recover a SQL Database from an outage](sql-database-disaster-recovery.md).</span><span class="sxs-lookup"><span data-stu-id="7915e-216">For detailed steps including planning requirements, post recovery steps and information about how to simulate an outage to perform a disaster recovery drill, see [Recover a SQL Database from an outage](sql-database-disaster-recovery.md).</span></span>

### <a name="prepare-for-an-outage"></a><span data-ttu-id="7915e-217">Prepare for an outage</span><span class="sxs-lookup"><span data-stu-id="7915e-217">Prepare for an outage</span></span>
<span data-ttu-id="7915e-218">Regardless of the business continuity feature you use, you must:</span><span class="sxs-lookup"><span data-stu-id="7915e-218">Regardless of the business continuity feature you use, you must:</span></span>

* <span data-ttu-id="7915e-219">Identify and prepare the target server, including server-level firewall rules, logins, and master database level permissions.</span><span class="sxs-lookup"><span data-stu-id="7915e-219">Identify and prepare the target server, including server-level firewall rules, logins, and master database level permissions.</span></span>
* <span data-ttu-id="7915e-220">Determine how to redirect clients and client applications to the new server</span><span class="sxs-lookup"><span data-stu-id="7915e-220">Determine how to redirect clients and client applications to the new server</span></span>
* <span data-ttu-id="7915e-221">Document other dependencies, such as auditing settings and alerts</span><span class="sxs-lookup"><span data-stu-id="7915e-221">Document other dependencies, such as auditing settings and alerts</span></span>

<span data-ttu-id="7915e-222">If you do not plan and prepare properly, bringing your applications online after a failover or a recovery takes additional time and likely also require troubleshooting at a time of stress - a bad combination.</span><span class="sxs-lookup"><span data-stu-id="7915e-222">If you do not plan and prepare properly, bringing your applications online after a failover or a recovery takes additional time and likely also require troubleshooting at a time of stress - a bad combination.</span></span>

### <a name="failover-to-a-geo-replicated-secondary-database"></a><span data-ttu-id="7915e-223">Failover to a geo-replicated secondary database</span><span class="sxs-lookup"><span data-stu-id="7915e-223">Failover to a geo-replicated secondary database</span></span>
<span data-ttu-id="7915e-224">If you are using Active Geo-Replication and auto-failover groups as your recovery mechanism, you can configure an automatic failover policy or use [manual failover](sql-database-disaster-recovery.md#failover-to-geo-replicated-secondary-database).</span><span class="sxs-lookup"><span data-stu-id="7915e-224">If you are using Active Geo-Replication and auto-failover groups as your recovery mechanism, you can configure an automatic failover policy or use [manual failover](sql-database-disaster-recovery.md#failover-to-geo-replicated-secondary-database).</span></span> <span data-ttu-id="7915e-225">Once initiated, the failover causes the secondary to become the new primary and ready to record new transactions and respond to queries - with minimal data loss for the data that had not yet been replicated.</span><span class="sxs-lookup"><span data-stu-id="7915e-225">Once initiated, the failover causes the secondary to become the new primary and ready to record new transactions and respond to queries - with minimal data loss for the data that had not yet been replicated.</span></span> <span data-ttu-id="7915e-226">For information on designing the failover process, see [Design an application for cloud disaster recovery](sql-database-designing-cloud-solutions-for-disaster-recovery.md).</span><span class="sxs-lookup"><span data-stu-id="7915e-226">For information on designing the failover process, see [Design an application for cloud disaster recovery](sql-database-designing-cloud-solutions-for-disaster-recovery.md).</span></span>

> [!NOTE]
> <span data-ttu-id="7915e-227">When the data center comes back online the old primaries automatically re-connect to the new primary and become secondary databases.</span><span class="sxs-lookup"><span data-stu-id="7915e-227">When the data center comes back online the old primaries automatically re-connect to the new primary and become secondary databases.</span></span> <span data-ttu-id="7915e-228">If you need to relocate the primary back to the original region you can initiate a planned failover manually (failback).</span><span class="sxs-lookup"><span data-stu-id="7915e-228">If you need to relocate the primary back to the original region you can initiate a planned failover manually (failback).</span></span>
>

### <a name="perform-a-geo-restore"></a><span data-ttu-id="7915e-229">Perform a Geo-Restore</span><span class="sxs-lookup"><span data-stu-id="7915e-229">Perform a Geo-Restore</span></span>
<span data-ttu-id="7915e-230">If you are using automated backups with geo-redundant storage replication as your recovery mechanism, [initiate a database recovery using Geo-Restore](sql-database-disaster-recovery.md#recover-using-geo-restore).</span><span class="sxs-lookup"><span data-stu-id="7915e-230">If you are using automated backups with geo-redundant storage replication as your recovery mechanism, [initiate a database recovery using Geo-Restore](sql-database-disaster-recovery.md#recover-using-geo-restore).</span></span> <span data-ttu-id="7915e-231">Recovery usually takes place within 12 hours - with data loss of up to one hour determined by when the last hourly differential backup with taken and replicated.</span><span class="sxs-lookup"><span data-stu-id="7915e-231">Recovery usually takes place within 12 hours - with data loss of up to one hour determined by when the last hourly differential backup with taken and replicated.</span></span> <span data-ttu-id="7915e-232">Until the recovery completes, the database is unable to record any transactions or respond to any queries.</span><span class="sxs-lookup"><span data-stu-id="7915e-232">Until the recovery completes, the database is unable to record any transactions or respond to any queries.</span></span>

> [!NOTE]
> <span data-ttu-id="7915e-233">If the data center comes back online before you switch your application over to the recovered database, you can simply cancel the recovery.</span><span class="sxs-lookup"><span data-stu-id="7915e-233">If the data center comes back online before you switch your application over to the recovered database, you can simply cancel the recovery.</span></span>  
>
>

### <a name="perform-post-failover--recovery-tasks"></a><span data-ttu-id="7915e-234">Perform post failover / recovery tasks</span><span class="sxs-lookup"><span data-stu-id="7915e-234">Perform post failover / recovery tasks</span></span>
<span data-ttu-id="7915e-235">After recovery from either recovery mechanism, you must perform the following additional tasks before your users and applications are back up and running:</span><span class="sxs-lookup"><span data-stu-id="7915e-235">After recovery from either recovery mechanism, you must perform the following additional tasks before your users and applications are back up and running:</span></span>

* <span data-ttu-id="7915e-236">Redirect clients and client applications to the new server and restored database</span><span class="sxs-lookup"><span data-stu-id="7915e-236">Redirect clients and client applications to the new server and restored database</span></span>
* <span data-ttu-id="7915e-237">Ensure appropriate server-level firewall rules are in place for users to connect (or use [database-level firewalls](sql-database-firewall-configure.md#creating-and-managing-firewall-rules))</span><span class="sxs-lookup"><span data-stu-id="7915e-237">Ensure appropriate server-level firewall rules are in place for users to connect (or use [database-level firewalls](sql-database-firewall-configure.md#creating-and-managing-firewall-rules))</span></span>
* <span data-ttu-id="7915e-238">Ensure appropriate logins and master database level permissions are in place (or use [contained users](https://msdn.microsoft.com/library/ff929188.aspx))</span><span class="sxs-lookup"><span data-stu-id="7915e-238">Ensure appropriate logins and master database level permissions are in place (or use [contained users](https://msdn.microsoft.com/library/ff929188.aspx))</span></span>
* <span data-ttu-id="7915e-239">Configure auditing, as appropriate</span><span class="sxs-lookup"><span data-stu-id="7915e-239">Configure auditing, as appropriate</span></span>
* <span data-ttu-id="7915e-240">Configure alerts, as appropriate</span><span class="sxs-lookup"><span data-stu-id="7915e-240">Configure alerts, as appropriate</span></span>

## <a name="upgrade-an-application-with-minimal-downtime"></a><span data-ttu-id="7915e-241">Upgrade an application with minimal downtime</span><span class="sxs-lookup"><span data-stu-id="7915e-241">Upgrade an application with minimal downtime</span></span>
<span data-ttu-id="7915e-242">Sometimes an application needs to be taken offline because of planned maintenance such as an application upgrade.</span><span class="sxs-lookup"><span data-stu-id="7915e-242">Sometimes an application needs to be taken offline because of planned maintenance such as an application upgrade.</span></span> <span data-ttu-id="7915e-243">[Manage application upgrades](sql-database-manage-application-rolling-upgrade.md) describes how to use Active Geo-Replication to enable rolling upgrades of your cloud application to minimize downtime during upgrades and provide a recovery path in the event something goes wrong.</span><span class="sxs-lookup"><span data-stu-id="7915e-243">[Manage application upgrades](sql-database-manage-application-rolling-upgrade.md) describes how to use Active Geo-Replication to enable rolling upgrades of your cloud application to minimize downtime during upgrades and provide a recovery path in the event something goes wrong.</span></span> <span data-ttu-id="7915e-244">This article looks at two different methods of orchestrating the upgrade process and discusses the benefits and trade-offs of each option.</span><span class="sxs-lookup"><span data-stu-id="7915e-244">This article looks at two different methods of orchestrating the upgrade process and discusses the benefits and trade-offs of each option.</span></span>

## <a name="next-steps"></a><span data-ttu-id="7915e-245">Next steps</span><span class="sxs-lookup"><span data-stu-id="7915e-245">Next steps</span></span>
<span data-ttu-id="7915e-246">For a discussion of application design considerations for stand-alone databases and for elastic pools, see [Design an application for cloud disaster recovery](sql-database-designing-cloud-solutions-for-disaster-recovery.md) and [Elastic Pool disaster recovery strategies](sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool.md).</span><span class="sxs-lookup"><span data-stu-id="7915e-246">For a discussion of application design considerations for stand-alone databases and for elastic pools, see [Design an application for cloud disaster recovery](sql-database-designing-cloud-solutions-for-disaster-recovery.md) and [Elastic Pool disaster recovery strategies](sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool.md).</span></span>
