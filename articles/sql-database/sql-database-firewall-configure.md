---
title: Azure SQL Database and Data Warehouse firewall rules | Microsoft Docs
description: Learn how to configure a SQL database and SQL Data Warehouse firewall with server-level firewall rules to manage access, and configure SQL Database database-level firewall rules.
keywords: server database firewall
services: sql-database
author: CarlRabeler
manager: craigg
ms.service: sql-database
ms.prod_service: sql-database, sql-data-warehouse
ms.custom: security
ms.topic: conceptual
ms.date: 09/07/2018
ms.author: carlrab
ms.openlocfilehash: 51b7a42e5b08c0fb40b3c9407d6da345db494214
ms.sourcegitcommit: d1451406a010fd3aa854dc8e5b77dc5537d8050e
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 09/13/2018
ms.locfileid: "44819564"
---
# <a name="azure-sql-database-and-sql-data-warehouse-firewall-rules"></a><span data-ttu-id="a8b2a-104">Azure SQL Database and SQL Data Warehouse firewall rules</span><span class="sxs-lookup"><span data-stu-id="a8b2a-104">Azure SQL Database and SQL Data Warehouse firewall rules</span></span> 

<span data-ttu-id="a8b2a-105">Microsoft Azure [SQL Database](sql-database-technical-overview.md) and [SQL Data Warehouse](../sql-data-warehouse/sql-data-warehouse-overview-what-is.md) provide a relational database service for Azure and other Internet-based applications.</span><span class="sxs-lookup"><span data-stu-id="a8b2a-105">Microsoft Azure [SQL Database](sql-database-technical-overview.md) and [SQL Data Warehouse](../sql-data-warehouse/sql-data-warehouse-overview-what-is.md) provide a relational database service for Azure and other Internet-based applications.</span></span> <span data-ttu-id="a8b2a-106">To help protect your data, firewalls prevent all access to your database server until you specify which computers have permission.</span><span class="sxs-lookup"><span data-stu-id="a8b2a-106">To help protect your data, firewalls prevent all access to your database server until you specify which computers have permission.</span></span> <span data-ttu-id="a8b2a-107">The firewall grants access to databases based on the originating IP address of each request.</span><span class="sxs-lookup"><span data-stu-id="a8b2a-107">The firewall grants access to databases based on the originating IP address of each request.</span></span>

> [!NOTE]
> <span data-ttu-id="a8b2a-108">This topic applies to Azure SQL server, and to both SQL Database and SQL Data Warehouse databases that are created on the Azure SQL server.</span><span class="sxs-lookup"><span data-stu-id="a8b2a-108">This topic applies to Azure SQL server, and to both SQL Database and SQL Data Warehouse databases that are created on the Azure SQL server.</span></span> <span data-ttu-id="a8b2a-109">For simplicity, SQL Database is used when referring to both SQL Database and SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="a8b2a-109">For simplicity, SQL Database is used when referring to both SQL Database and SQL Data Warehouse.</span></span>

#### <a name="virtual-network-rules-as-alternatives-to-ip-rules"></a><span data-ttu-id="a8b2a-110">Virtual network rules as alternatives to IP rules</span><span class="sxs-lookup"><span data-stu-id="a8b2a-110">Virtual network rules as alternatives to IP rules</span></span>

<span data-ttu-id="a8b2a-111">In addition to IP rules, the firewall also manages *virtual network rules*.</span><span class="sxs-lookup"><span data-stu-id="a8b2a-111">In addition to IP rules, the firewall also manages *virtual network rules*.</span></span> <span data-ttu-id="a8b2a-112">Virtual network rules are based on Virtual Network service endpoints.</span><span class="sxs-lookup"><span data-stu-id="a8b2a-112">Virtual network rules are based on Virtual Network service endpoints.</span></span> <span data-ttu-id="a8b2a-113">Virtual network rules might be preferable to IP rules in some cases.</span><span class="sxs-lookup"><span data-stu-id="a8b2a-113">Virtual network rules might be preferable to IP rules in some cases.</span></span> <span data-ttu-id="a8b2a-114">To learn more, see [Virtual Network service endpoints and rules for Azure SQL Database](sql-database-vnet-service-endpoint-rule-overview.md).</span><span class="sxs-lookup"><span data-stu-id="a8b2a-114">To learn more, see [Virtual Network service endpoints and rules for Azure SQL Database](sql-database-vnet-service-endpoint-rule-overview.md).</span></span>

## <a name="overview"></a><span data-ttu-id="a8b2a-115">Overview</span><span class="sxs-lookup"><span data-stu-id="a8b2a-115">Overview</span></span>

<span data-ttu-id="a8b2a-116">Initially, all Transact-SQL access to your Azure SQL server is blocked by the firewall.</span><span class="sxs-lookup"><span data-stu-id="a8b2a-116">Initially, all Transact-SQL access to your Azure SQL server is blocked by the firewall.</span></span> <span data-ttu-id="a8b2a-117">To begin using your Azure SQL server, you must specify one or more server-level firewall rules that enable access to your Azure SQL server.</span><span class="sxs-lookup"><span data-stu-id="a8b2a-117">To begin using your Azure SQL server, you must specify one or more server-level firewall rules that enable access to your Azure SQL server.</span></span> <span data-ttu-id="a8b2a-118">Use the firewall rules to specify which IP address ranges from the Internet are allowed, and whether Azure applications can attempt to connect to your Azure SQL server.</span><span class="sxs-lookup"><span data-stu-id="a8b2a-118">Use the firewall rules to specify which IP address ranges from the Internet are allowed, and whether Azure applications can attempt to connect to your Azure SQL server.</span></span>

<span data-ttu-id="a8b2a-119">To selectively grant access to just one of the databases in your Azure SQL server, you must create a database-level rule for the required database.</span><span class="sxs-lookup"><span data-stu-id="a8b2a-119">To selectively grant access to just one of the databases in your Azure SQL server, you must create a database-level rule for the required database.</span></span> <span data-ttu-id="a8b2a-120">Specify an IP address range for the database firewall rule that is beyond the IP address range specified in the server-level firewall rule, and ensure that the IP address of the client falls in the range specified in the database-level rule.</span><span class="sxs-lookup"><span data-stu-id="a8b2a-120">Specify an IP address range for the database firewall rule that is beyond the IP address range specified in the server-level firewall rule, and ensure that the IP address of the client falls in the range specified in the database-level rule.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="a8b2a-121">SQL Data Warehouse only supports server-level firewall rules and does not support database-level firewall rules.</span><span class="sxs-lookup"><span data-stu-id="a8b2a-121">SQL Data Warehouse only supports server-level firewall rules and does not support database-level firewall rules.</span></span>

<span data-ttu-id="a8b2a-122">Connection attempts from the Internet and Azure must first pass through the firewall before they can reach your Azure SQL server or SQL Database, as shown in the following diagram:</span><span class="sxs-lookup"><span data-stu-id="a8b2a-122">Connection attempts from the Internet and Azure must first pass through the firewall before they can reach your Azure SQL server or SQL Database, as shown in the following diagram:</span></span>

   ![Diagram describing firewall configuration.][1]

* <span data-ttu-id="a8b2a-124">**Server-level firewall rules:** These rules enable clients to access your entire Azure SQL server, that is, all the databases within the same logical server.</span><span class="sxs-lookup"><span data-stu-id="a8b2a-124">**Server-level firewall rules:** These rules enable clients to access your entire Azure SQL server, that is, all the databases within the same logical server.</span></span> <span data-ttu-id="a8b2a-125">These rules are stored in the **master** database.</span><span class="sxs-lookup"><span data-stu-id="a8b2a-125">These rules are stored in the **master** database.</span></span> <span data-ttu-id="a8b2a-126">Server-level firewall rules can be configured by using the portal or by using Transact-SQL statements.</span><span class="sxs-lookup"><span data-stu-id="a8b2a-126">Server-level firewall rules can be configured by using the portal or by using Transact-SQL statements.</span></span> <span data-ttu-id="a8b2a-127">To create server-level firewall rules using the Azure portal or PowerShell, you must be the subscription owner or a subscription contributor.</span><span class="sxs-lookup"><span data-stu-id="a8b2a-127">To create server-level firewall rules using the Azure portal or PowerShell, you must be the subscription owner or a subscription contributor.</span></span> <span data-ttu-id="a8b2a-128">To create a server-level firewall rule using Transact-SQL, you must connect to the SQL Database instance as the server-level principal login or the Azure Active Directory administrator (which means that a server-level firewall rule must first be created by a user with Azure-level permissions).</span><span class="sxs-lookup"><span data-stu-id="a8b2a-128">To create a server-level firewall rule using Transact-SQL, you must connect to the SQL Database instance as the server-level principal login or the Azure Active Directory administrator (which means that a server-level firewall rule must first be created by a user with Azure-level permissions).</span></span>
* <span data-ttu-id="a8b2a-129">**Database-level firewall rules:** These rules enable clients to access certain (secure) databases within the same logical server.</span><span class="sxs-lookup"><span data-stu-id="a8b2a-129">**Database-level firewall rules:** These rules enable clients to access certain (secure) databases within the same logical server.</span></span> <span data-ttu-id="a8b2a-130">You can create these rules for each database (including the **master** database) and they are stored in the individual databases.</span><span class="sxs-lookup"><span data-stu-id="a8b2a-130">You can create these rules for each database (including the **master** database) and they are stored in the individual databases.</span></span> <span data-ttu-id="a8b2a-131">Database-level firewall rules for master and user databases can only be created and managed by using Transact-SQL statements and only after you have configured the first server-level firewall.</span><span class="sxs-lookup"><span data-stu-id="a8b2a-131">Database-level firewall rules for master and user databases can only be created and managed by using Transact-SQL statements and only after you have configured the first server-level firewall.</span></span> <span data-ttu-id="a8b2a-132">If you specify an IP address range in the database-level firewall rule that is outside the range specified in the server-level firewall rule, only those clients that have IP addresses in the database-level range can access the database.</span><span class="sxs-lookup"><span data-stu-id="a8b2a-132">If you specify an IP address range in the database-level firewall rule that is outside the range specified in the server-level firewall rule, only those clients that have IP addresses in the database-level range can access the database.</span></span> <span data-ttu-id="a8b2a-133">You can have a maximum of 128 database-level firewall rules for a database.</span><span class="sxs-lookup"><span data-stu-id="a8b2a-133">You can have a maximum of 128 database-level firewall rules for a database.</span></span> <span data-ttu-id="a8b2a-134">For more information on configuring database-level firewall rules, see the example later in this article and see [sp_set_database_firewall_rule (Azure SQL Databases)](https://msdn.microsoft.com/library/dn270010.aspx).</span><span class="sxs-lookup"><span data-stu-id="a8b2a-134">For more information on configuring database-level firewall rules, see the example later in this article and see [sp_set_database_firewall_rule (Azure SQL Databases)](https://msdn.microsoft.com/library/dn270010.aspx).</span></span>

<span data-ttu-id="a8b2a-135">**Recommendation:** Microsoft recommends using database-level firewall rules whenever possible to enhance security and to make your database more portable.</span><span class="sxs-lookup"><span data-stu-id="a8b2a-135">**Recommendation:** Microsoft recommends using database-level firewall rules whenever possible to enhance security and to make your database more portable.</span></span> <span data-ttu-id="a8b2a-136">Use server-level firewall rules for administrators and when you have many databases that have the same access requirements and you don't want to spend time configuring each database individually.</span><span class="sxs-lookup"><span data-stu-id="a8b2a-136">Use server-level firewall rules for administrators and when you have many databases that have the same access requirements and you don't want to spend time configuring each database individually.</span></span>

> [!Important]
> <span data-ttu-id="a8b2a-137">Windows Azure SQL Database supports a maximum of 128 firewall rules.</span><span class="sxs-lookup"><span data-stu-id="a8b2a-137">Windows Azure SQL Database supports a maximum of 128 firewall rules.</span></span>
>

> [!Note]
> <span data-ttu-id="a8b2a-138">For information about portable databases in the context of business continuity, see [Authentication requirements for disaster recovery](sql-database-geo-replication-security-config.md).</span><span class="sxs-lookup"><span data-stu-id="a8b2a-138">For information about portable databases in the context of business continuity, see [Authentication requirements for disaster recovery](sql-database-geo-replication-security-config.md).</span></span>
>

### <a name="connecting-from-the-internet"></a><span data-ttu-id="a8b2a-139">Connecting from the Internet</span><span class="sxs-lookup"><span data-stu-id="a8b2a-139">Connecting from the Internet</span></span>

<span data-ttu-id="a8b2a-140">When a computer attempts to connect to your database server from the Internet, the firewall first checks the originating IP address of the request against the database-level firewall rules, for the database that the connection is requesting:</span><span class="sxs-lookup"><span data-stu-id="a8b2a-140">When a computer attempts to connect to your database server from the Internet, the firewall first checks the originating IP address of the request against the database-level firewall rules, for the database that the connection is requesting:</span></span>

* <span data-ttu-id="a8b2a-141">If the IP address of the request is within one of the ranges specified in the database-level firewall rules, the connection is granted to the SQL Database that contains the rule.</span><span class="sxs-lookup"><span data-stu-id="a8b2a-141">If the IP address of the request is within one of the ranges specified in the database-level firewall rules, the connection is granted to the SQL Database that contains the rule.</span></span>
* <span data-ttu-id="a8b2a-142">If the IP address of the request is not within one of the ranges specified in the database-level firewall rule, the server-level firewall rules are checked.</span><span class="sxs-lookup"><span data-stu-id="a8b2a-142">If the IP address of the request is not within one of the ranges specified in the database-level firewall rule, the server-level firewall rules are checked.</span></span> <span data-ttu-id="a8b2a-143">If the IP address of the request is within one of the ranges specified in the server-level firewall rules, the connection is granted.</span><span class="sxs-lookup"><span data-stu-id="a8b2a-143">If the IP address of the request is within one of the ranges specified in the server-level firewall rules, the connection is granted.</span></span> <span data-ttu-id="a8b2a-144">Server-level firewall rules apply to all SQL databases on the Azure SQL server.</span><span class="sxs-lookup"><span data-stu-id="a8b2a-144">Server-level firewall rules apply to all SQL databases on the Azure SQL server.</span></span>  
* <span data-ttu-id="a8b2a-145">If the IP address of the request is not within the ranges specified in any of the database-level or server-level firewall rules, the connection request fails.</span><span class="sxs-lookup"><span data-stu-id="a8b2a-145">If the IP address of the request is not within the ranges specified in any of the database-level or server-level firewall rules, the connection request fails.</span></span>

> [!NOTE]
> <span data-ttu-id="a8b2a-146">To access Azure SQL Database from your local computer, ensure the firewall on your network and local computer allows outgoing communication on TCP port 1433.</span><span class="sxs-lookup"><span data-stu-id="a8b2a-146">To access Azure SQL Database from your local computer, ensure the firewall on your network and local computer allows outgoing communication on TCP port 1433.</span></span>
> 

### <a name="connecting-from-azure"></a><span data-ttu-id="a8b2a-147">Connecting from Azure</span><span class="sxs-lookup"><span data-stu-id="a8b2a-147">Connecting from Azure</span></span>
<span data-ttu-id="a8b2a-148">To allow applications from Azure to connect to your Azure SQL server, Azure connections must be enabled.</span><span class="sxs-lookup"><span data-stu-id="a8b2a-148">To allow applications from Azure to connect to your Azure SQL server, Azure connections must be enabled.</span></span> <span data-ttu-id="a8b2a-149">When an application from Azure attempts to connect to your database server, the firewall verifies that Azure connections are allowed.</span><span class="sxs-lookup"><span data-stu-id="a8b2a-149">When an application from Azure attempts to connect to your database server, the firewall verifies that Azure connections are allowed.</span></span> <span data-ttu-id="a8b2a-150">A firewall setting with starting and ending address equal to 0.0.0.0 indicates these connections are allowed.</span><span class="sxs-lookup"><span data-stu-id="a8b2a-150">A firewall setting with starting and ending address equal to 0.0.0.0 indicates these connections are allowed.</span></span> <span data-ttu-id="a8b2a-151">If the connection attempt is not allowed, the request does not reach the Azure SQL Database server.</span><span class="sxs-lookup"><span data-stu-id="a8b2a-151">If the connection attempt is not allowed, the request does not reach the Azure SQL Database server.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="a8b2a-152">This option configures the firewall to allow all connections from Azure including connections from the subscriptions of other customers.</span><span class="sxs-lookup"><span data-stu-id="a8b2a-152">This option configures the firewall to allow all connections from Azure including connections from the subscriptions of other customers.</span></span> <span data-ttu-id="a8b2a-153">When selecting this option, make sure your login and user permissions limit access to only authorized users.</span><span class="sxs-lookup"><span data-stu-id="a8b2a-153">When selecting this option, make sure your login and user permissions limit access to only authorized users.</span></span>
> 

## <a name="creating-and-managing-firewall-rules"></a><span data-ttu-id="a8b2a-154">Creating and managing firewall rules</span><span class="sxs-lookup"><span data-stu-id="a8b2a-154">Creating and managing firewall rules</span></span>
<span data-ttu-id="a8b2a-155">The first server-level firewall setting can be created using the [Azure portal](https://portal.azure.com/) or programmatically using [Azure PowerShell](https://docs.microsoft.com/powershell/module/azurerm.sql), [Azure CLI](/cli/azure/sql/server/firewall-rule#az_sql_server_firewall_rule_create), or the [REST API](https://docs.microsoft.com/rest/api/sql/firewallrules).</span><span class="sxs-lookup"><span data-stu-id="a8b2a-155">The first server-level firewall setting can be created using the [Azure portal](https://portal.azure.com/) or programmatically using [Azure PowerShell](https://docs.microsoft.com/powershell/module/azurerm.sql), [Azure CLI](/cli/azure/sql/server/firewall-rule#az_sql_server_firewall_rule_create), or the [REST API](https://docs.microsoft.com/rest/api/sql/firewallrules).</span></span> <span data-ttu-id="a8b2a-156">Subsequent server-level firewall rules can be created and managed using these methods, and through Transact-SQL.</span><span class="sxs-lookup"><span data-stu-id="a8b2a-156">Subsequent server-level firewall rules can be created and managed using these methods, and through Transact-SQL.</span></span> 

> [!IMPORTANT]
> <span data-ttu-id="a8b2a-157">Database-level firewall rules can only be created and managed using Transact-SQL.</span><span class="sxs-lookup"><span data-stu-id="a8b2a-157">Database-level firewall rules can only be created and managed using Transact-SQL.</span></span> 
>

<span data-ttu-id="a8b2a-158">To improve performance, server-level firewall rules are temporarily cached at the database level.</span><span class="sxs-lookup"><span data-stu-id="a8b2a-158">To improve performance, server-level firewall rules are temporarily cached at the database level.</span></span> <span data-ttu-id="a8b2a-159">To refresh the cache, see [DBCC FLUSHAUTHCACHE](https://msdn.microsoft.com/library/mt627793.aspx).</span><span class="sxs-lookup"><span data-stu-id="a8b2a-159">To refresh the cache, see [DBCC FLUSHAUTHCACHE](https://msdn.microsoft.com/library/mt627793.aspx).</span></span> 

> [!TIP]
> <span data-ttu-id="a8b2a-160">You can use [SQL Database Auditing](sql-database-auditing.md) to audit server-level and database-level firewall changes.</span><span class="sxs-lookup"><span data-stu-id="a8b2a-160">You can use [SQL Database Auditing](sql-database-auditing.md) to audit server-level and database-level firewall changes.</span></span>
>

## <a name="manage-firewall-rules-using-the-azure-portal"></a><span data-ttu-id="a8b2a-161">Manage firewall rules using the Azure portal</span><span class="sxs-lookup"><span data-stu-id="a8b2a-161">Manage firewall rules using the Azure portal</span></span>

<span data-ttu-id="a8b2a-162">To set a server-level firewall rule in the Azure portal, you can either go to the Overview page for your Azure SQL database or the Overview page for your Azure Database logical server.</span><span class="sxs-lookup"><span data-stu-id="a8b2a-162">To set a server-level firewall rule in the Azure portal, you can either go to the Overview page for your Azure SQL database or the Overview page for your Azure Database logical server.</span></span>

> [!TIP]
> <span data-ttu-id="a8b2a-163">For a tutorial, see [Create a DB using the Azure portal](sql-database-get-started-portal.md).</span><span class="sxs-lookup"><span data-stu-id="a8b2a-163">For a tutorial, see [Create a DB using the Azure portal](sql-database-get-started-portal.md).</span></span>
>

<span data-ttu-id="a8b2a-164">**From database overview page**</span><span class="sxs-lookup"><span data-stu-id="a8b2a-164">**From database overview page**</span></span>

1. <span data-ttu-id="a8b2a-165">To set a server-level firewall rule from the database overview page, click **Set server firewall** on the toolbar as shown in the following image: The **Firewall settings** page for the SQL Database server opens.</span><span class="sxs-lookup"><span data-stu-id="a8b2a-165">To set a server-level firewall rule from the database overview page, click **Set server firewall** on the toolbar as shown in the following image: The **Firewall settings** page for the SQL Database server opens.</span></span>

      ![server firewall rule](./media/sql-database-get-started-portal/server-firewall-rule.png) 

2. <span data-ttu-id="a8b2a-167">Click **Add client IP** on the toolbar to add the IP address of the computer you are currently using and then click **Save**.</span><span class="sxs-lookup"><span data-stu-id="a8b2a-167">Click **Add client IP** on the toolbar to add the IP address of the computer you are currently using and then click **Save**.</span></span> <span data-ttu-id="a8b2a-168">A server-level firewall rule is created for your current IP address.</span><span class="sxs-lookup"><span data-stu-id="a8b2a-168">A server-level firewall rule is created for your current IP address.</span></span>

      ![set server firewall rule](./media/sql-database-get-started-portal/server-firewall-rule-set.png) 

<span data-ttu-id="a8b2a-170">**From server overview page**</span><span class="sxs-lookup"><span data-stu-id="a8b2a-170">**From server overview page**</span></span>

<span data-ttu-id="a8b2a-171">The overview page for your server opens, showing you the fully qualified server name (such as **mynewserver20170403.database.windows.net**) and provides options for further configuration.</span><span class="sxs-lookup"><span data-stu-id="a8b2a-171">The overview page for your server opens, showing you the fully qualified server name (such as **mynewserver20170403.database.windows.net**) and provides options for further configuration.</span></span>

1. <span data-ttu-id="a8b2a-172">To set a server-level rule from server overview page, click **Firewall** in the left-hand menu under Settings:</span><span class="sxs-lookup"><span data-stu-id="a8b2a-172">To set a server-level rule from server overview page, click **Firewall** in the left-hand menu under Settings:</span></span> 

2. <span data-ttu-id="a8b2a-173">Click **Add client IP** on the toolbar to add the IP address of the computer you are currently using and then click **Save**.</span><span class="sxs-lookup"><span data-stu-id="a8b2a-173">Click **Add client IP** on the toolbar to add the IP address of the computer you are currently using and then click **Save**.</span></span> <span data-ttu-id="a8b2a-174">A server-level firewall rule is created for your current IP address.</span><span class="sxs-lookup"><span data-stu-id="a8b2a-174">A server-level firewall rule is created for your current IP address.</span></span>

## <a name="manage-firewall-rules-using-transact-sql"></a><span data-ttu-id="a8b2a-175">Manage firewall rules using Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="a8b2a-175">Manage firewall rules using Transact-SQL</span></span>
| <span data-ttu-id="a8b2a-176">Catalog View or Stored Procedure</span><span class="sxs-lookup"><span data-stu-id="a8b2a-176">Catalog View or Stored Procedure</span></span> | <span data-ttu-id="a8b2a-177">Level</span><span class="sxs-lookup"><span data-stu-id="a8b2a-177">Level</span></span> | <span data-ttu-id="a8b2a-178">Description</span><span class="sxs-lookup"><span data-stu-id="a8b2a-178">Description</span></span> |
| --- | --- | --- |
| [<span data-ttu-id="a8b2a-179">sys.firewall_rules</span><span class="sxs-lookup"><span data-stu-id="a8b2a-179">sys.firewall_rules</span></span>](https://msdn.microsoft.com/library/dn269980.aspx) |<span data-ttu-id="a8b2a-180">Server</span><span class="sxs-lookup"><span data-stu-id="a8b2a-180">Server</span></span> |<span data-ttu-id="a8b2a-181">Displays the current server-level firewall rules</span><span class="sxs-lookup"><span data-stu-id="a8b2a-181">Displays the current server-level firewall rules</span></span> |
| [<span data-ttu-id="a8b2a-182">sp_set_firewall_rule</span><span class="sxs-lookup"><span data-stu-id="a8b2a-182">sp_set_firewall_rule</span></span>](https://msdn.microsoft.com/library/dn270017.aspx) |<span data-ttu-id="a8b2a-183">Server</span><span class="sxs-lookup"><span data-stu-id="a8b2a-183">Server</span></span> |<span data-ttu-id="a8b2a-184">Creates or updates server-level firewall rules</span><span class="sxs-lookup"><span data-stu-id="a8b2a-184">Creates or updates server-level firewall rules</span></span> |
| [<span data-ttu-id="a8b2a-185">sp_delete_firewall_rule</span><span class="sxs-lookup"><span data-stu-id="a8b2a-185">sp_delete_firewall_rule</span></span>](https://msdn.microsoft.com/library/dn270024.aspx) |<span data-ttu-id="a8b2a-186">Server</span><span class="sxs-lookup"><span data-stu-id="a8b2a-186">Server</span></span> |<span data-ttu-id="a8b2a-187">Removes server-level firewall rules</span><span class="sxs-lookup"><span data-stu-id="a8b2a-187">Removes server-level firewall rules</span></span> |
| [<span data-ttu-id="a8b2a-188">sys.database_firewall_rules</span><span class="sxs-lookup"><span data-stu-id="a8b2a-188">sys.database_firewall_rules</span></span>](https://msdn.microsoft.com/library/dn269982.aspx) |<span data-ttu-id="a8b2a-189">Database</span><span class="sxs-lookup"><span data-stu-id="a8b2a-189">Database</span></span> |<span data-ttu-id="a8b2a-190">Displays the current database-level firewall rules</span><span class="sxs-lookup"><span data-stu-id="a8b2a-190">Displays the current database-level firewall rules</span></span> |
| [<span data-ttu-id="a8b2a-191">sp_set_database_firewall_rule</span><span class="sxs-lookup"><span data-stu-id="a8b2a-191">sp_set_database_firewall_rule</span></span>](https://msdn.microsoft.com/library/dn270010.aspx) |<span data-ttu-id="a8b2a-192">Database</span><span class="sxs-lookup"><span data-stu-id="a8b2a-192">Database</span></span> |<span data-ttu-id="a8b2a-193">Creates or updates the database-level firewall rules</span><span class="sxs-lookup"><span data-stu-id="a8b2a-193">Creates or updates the database-level firewall rules</span></span> |
| [<span data-ttu-id="a8b2a-194">sp_delete_database_firewall_rule</span><span class="sxs-lookup"><span data-stu-id="a8b2a-194">sp_delete_database_firewall_rule</span></span>](https://msdn.microsoft.com/library/dn270030.aspx) |<span data-ttu-id="a8b2a-195">Databases</span><span class="sxs-lookup"><span data-stu-id="a8b2a-195">Databases</span></span> |<span data-ttu-id="a8b2a-196">Removes database-level firewall rules</span><span class="sxs-lookup"><span data-stu-id="a8b2a-196">Removes database-level firewall rules</span></span> |


<span data-ttu-id="a8b2a-197">The following examples review the existing rules, enable a range of IP addresses on the server Contoso, and deletes a firewall rule:</span><span class="sxs-lookup"><span data-stu-id="a8b2a-197">The following examples review the existing rules, enable a range of IP addresses on the server Contoso, and deletes a firewall rule:</span></span>
   
```sql
SELECT * FROM sys.firewall_rules ORDER BY name;
```
  
<span data-ttu-id="a8b2a-198">Next, add a firewall rule.</span><span class="sxs-lookup"><span data-stu-id="a8b2a-198">Next, add a firewall rule.</span></span>
   
```sql
EXECUTE sp_set_firewall_rule @name = N'ContosoFirewallRule',
   @start_ip_address = '192.168.1.1', @end_ip_address = '192.168.1.10'
```

<span data-ttu-id="a8b2a-199">To delete a server-level firewall rule, execute the sp_delete_firewall_rule stored procedure.</span><span class="sxs-lookup"><span data-stu-id="a8b2a-199">To delete a server-level firewall rule, execute the sp_delete_firewall_rule stored procedure.</span></span> <span data-ttu-id="a8b2a-200">The following example deletes the rule named ContosoFirewallRule:</span><span class="sxs-lookup"><span data-stu-id="a8b2a-200">The following example deletes the rule named ContosoFirewallRule:</span></span>
   
```sql
EXECUTE sp_delete_firewall_rule @name = N'ContosoFirewallRule'
```   

## <a name="manage-firewall-rules-using-azure-powershell"></a><span data-ttu-id="a8b2a-201">Manage firewall rules using Azure PowerShell</span><span class="sxs-lookup"><span data-stu-id="a8b2a-201">Manage firewall rules using Azure PowerShell</span></span>
| <span data-ttu-id="a8b2a-202">Cmdlet</span><span class="sxs-lookup"><span data-stu-id="a8b2a-202">Cmdlet</span></span> | <span data-ttu-id="a8b2a-203">Level</span><span class="sxs-lookup"><span data-stu-id="a8b2a-203">Level</span></span> | <span data-ttu-id="a8b2a-204">Description</span><span class="sxs-lookup"><span data-stu-id="a8b2a-204">Description</span></span> |
| --- | --- | --- |
| [<span data-ttu-id="a8b2a-205">Get-AzureRmSqlServerFirewallRule</span><span class="sxs-lookup"><span data-stu-id="a8b2a-205">Get-AzureRmSqlServerFirewallRule</span></span>](/powershell/module/azurerm.sql/get-azurermsqlserverfirewallrule) |<span data-ttu-id="a8b2a-206">Server</span><span class="sxs-lookup"><span data-stu-id="a8b2a-206">Server</span></span> |<span data-ttu-id="a8b2a-207">Returns the current server-level firewall rules</span><span class="sxs-lookup"><span data-stu-id="a8b2a-207">Returns the current server-level firewall rules</span></span> |
| [<span data-ttu-id="a8b2a-208">New-AzureRmSqlServerFirewallRule</span><span class="sxs-lookup"><span data-stu-id="a8b2a-208">New-AzureRmSqlServerFirewallRule</span></span>](/powershell/module/azurerm.sql/new-azurermsqlserverfirewallrule) |<span data-ttu-id="a8b2a-209">Server</span><span class="sxs-lookup"><span data-stu-id="a8b2a-209">Server</span></span> |<span data-ttu-id="a8b2a-210">Creates a new server-level firewall rule</span><span class="sxs-lookup"><span data-stu-id="a8b2a-210">Creates a new server-level firewall rule</span></span> |
| [<span data-ttu-id="a8b2a-211">Set-AzureRmSqlServerFirewallRule</span><span class="sxs-lookup"><span data-stu-id="a8b2a-211">Set-AzureRmSqlServerFirewallRule</span></span>](/powershell/module/azurerm.sql/set-azurermsqlserverfirewallrule) |<span data-ttu-id="a8b2a-212">Server</span><span class="sxs-lookup"><span data-stu-id="a8b2a-212">Server</span></span> |<span data-ttu-id="a8b2a-213">Updates the properties of an existing server-level firewall rule</span><span class="sxs-lookup"><span data-stu-id="a8b2a-213">Updates the properties of an existing server-level firewall rule</span></span> |
| [<span data-ttu-id="a8b2a-214">Remove-AzureRmSqlServerFirewallRule</span><span class="sxs-lookup"><span data-stu-id="a8b2a-214">Remove-AzureRmSqlServerFirewallRule</span></span>](/powershell/module/azurerm.sql/remove-azurermsqlserverfirewallrule) |<span data-ttu-id="a8b2a-215">Server</span><span class="sxs-lookup"><span data-stu-id="a8b2a-215">Server</span></span> |<span data-ttu-id="a8b2a-216">Removes server-level firewall rules</span><span class="sxs-lookup"><span data-stu-id="a8b2a-216">Removes server-level firewall rules</span></span> |


<span data-ttu-id="a8b2a-217">The following example sets a server-level firewall rule using PowerShell:</span><span class="sxs-lookup"><span data-stu-id="a8b2a-217">The following example sets a server-level firewall rule using PowerShell:</span></span>

```powershell
New-AzureRmSqlServerFirewallRule -ResourceGroupName "myResourceGroup" `
    -ServerName $servername `
    -FirewallRuleName "AllowSome" -StartIpAddress "0.0.0.0" -EndIpAddress "0.0.0.0"
```

> [!TIP]
> <span data-ttu-id="a8b2a-218">For PowerShell examples in the context of a quick start, see [Create DB - PowerShell](sql-database-powershell-samples.md) and [Create a single database and configure a firewall rule using PowerShell](scripts/sql-database-create-and-configure-database-powershell.md)</span><span class="sxs-lookup"><span data-stu-id="a8b2a-218">For PowerShell examples in the context of a quick start, see [Create DB - PowerShell](sql-database-powershell-samples.md) and [Create a single database and configure a firewall rule using PowerShell](scripts/sql-database-create-and-configure-database-powershell.md)</span></span>
>

## <a name="manage-firewall-rules-using-azure-cli"></a><span data-ttu-id="a8b2a-219">Manage firewall rules using Azure CLI</span><span class="sxs-lookup"><span data-stu-id="a8b2a-219">Manage firewall rules using Azure CLI</span></span>
| <span data-ttu-id="a8b2a-220">Cmdlet</span><span class="sxs-lookup"><span data-stu-id="a8b2a-220">Cmdlet</span></span> | <span data-ttu-id="a8b2a-221">Level</span><span class="sxs-lookup"><span data-stu-id="a8b2a-221">Level</span></span> | <span data-ttu-id="a8b2a-222">Description</span><span class="sxs-lookup"><span data-stu-id="a8b2a-222">Description</span></span> |
| --- | --- | --- |
|[<span data-ttu-id="a8b2a-223">az sql server firewall-rule create</span><span class="sxs-lookup"><span data-stu-id="a8b2a-223">az sql server firewall-rule create</span></span>](/cli/azure/sql/server/firewall-rule#az_sql_server_firewall_rule_create)|<span data-ttu-id="a8b2a-224">Server</span><span class="sxs-lookup"><span data-stu-id="a8b2a-224">Server</span></span>|<span data-ttu-id="a8b2a-225">Creates a server firewall rule</span><span class="sxs-lookup"><span data-stu-id="a8b2a-225">Creates a server firewall rule</span></span>|
|[<span data-ttu-id="a8b2a-226">az sql server firewall-rule list</span><span class="sxs-lookup"><span data-stu-id="a8b2a-226">az sql server firewall-rule list</span></span>](/cli/azure/sql/server/firewall-rule#az_sql_server_firewall_rule_list)|<span data-ttu-id="a8b2a-227">Server</span><span class="sxs-lookup"><span data-stu-id="a8b2a-227">Server</span></span>|<span data-ttu-id="a8b2a-228">Lists the firewall rules on a server</span><span class="sxs-lookup"><span data-stu-id="a8b2a-228">Lists the firewall rules on a server</span></span>|
|[<span data-ttu-id="a8b2a-229">az sql server firewall-rule show</span><span class="sxs-lookup"><span data-stu-id="a8b2a-229">az sql server firewall-rule show</span></span>](/cli/azure/sql/server/firewall-rule#az_sql_server_firewall_rule_show)|<span data-ttu-id="a8b2a-230">Server</span><span class="sxs-lookup"><span data-stu-id="a8b2a-230">Server</span></span>|<span data-ttu-id="a8b2a-231">Shows the detail of a firewall rule</span><span class="sxs-lookup"><span data-stu-id="a8b2a-231">Shows the detail of a firewall rule</span></span>|
|[<span data-ttu-id="a8b2a-232">az sql server firewall-rule update</span><span class="sxs-lookup"><span data-stu-id="a8b2a-232">az sql server firewall-rule update</span></span>](/cli/azure/sql/server/firewall-rule##az_sql_server_firewall_rule_update)|<span data-ttu-id="a8b2a-233">Server</span><span class="sxs-lookup"><span data-stu-id="a8b2a-233">Server</span></span>|<span data-ttu-id="a8b2a-234">Updates a firewall rule</span><span class="sxs-lookup"><span data-stu-id="a8b2a-234">Updates a firewall rule</span></span>|
|[<span data-ttu-id="a8b2a-235">az sql server firewall-rule delete</span><span class="sxs-lookup"><span data-stu-id="a8b2a-235">az sql server firewall-rule delete</span></span>](/cli/azure/sql/server/firewall-rule#az_sql_server_firewall_rule_delete)|<span data-ttu-id="a8b2a-236">Server</span><span class="sxs-lookup"><span data-stu-id="a8b2a-236">Server</span></span>|<span data-ttu-id="a8b2a-237">Deletes a firewall rule</span><span class="sxs-lookup"><span data-stu-id="a8b2a-237">Deletes a firewall rule</span></span>|

<span data-ttu-id="a8b2a-238">The following example sets a server-level firewall rule using the Azure CLI:</span><span class="sxs-lookup"><span data-stu-id="a8b2a-238">The following example sets a server-level firewall rule using the Azure CLI:</span></span> 

```azurecli-interactive
az sql server firewall-rule create --resource-group myResourceGroup --server $servername \
    -n AllowYourIp --start-ip-address 0.0.0.0 --end-ip-address 0.0.0.0
```

> [!TIP]
> <span data-ttu-id="a8b2a-239">For an Azure CLI example in the context of a quick start, see [Create DB - Azure CLI](sql-database-cli-samples.md) and [Create a single database and configure a firewall rule using the Azure CLI](scripts/sql-database-create-and-configure-database-cli.md)</span><span class="sxs-lookup"><span data-stu-id="a8b2a-239">For an Azure CLI example in the context of a quick start, see [Create DB - Azure CLI](sql-database-cli-samples.md) and [Create a single database and configure a firewall rule using the Azure CLI](scripts/sql-database-create-and-configure-database-cli.md)</span></span>
>

## <a name="manage-firewall-rules-using-rest-api"></a><span data-ttu-id="a8b2a-240">Manage firewall rules using REST API</span><span class="sxs-lookup"><span data-stu-id="a8b2a-240">Manage firewall rules using REST API</span></span>
| <span data-ttu-id="a8b2a-241">API</span><span class="sxs-lookup"><span data-stu-id="a8b2a-241">API</span></span> | <span data-ttu-id="a8b2a-242">Level</span><span class="sxs-lookup"><span data-stu-id="a8b2a-242">Level</span></span> | <span data-ttu-id="a8b2a-243">Description</span><span class="sxs-lookup"><span data-stu-id="a8b2a-243">Description</span></span> |
| --- | --- | --- |
| [<span data-ttu-id="a8b2a-244">List Firewall Rules</span><span class="sxs-lookup"><span data-stu-id="a8b2a-244">List Firewall Rules</span></span>](https://docs.microsoft.com/rest/api/sql/FirewallRules/ListByServer) |<span data-ttu-id="a8b2a-245">Server</span><span class="sxs-lookup"><span data-stu-id="a8b2a-245">Server</span></span> |<span data-ttu-id="a8b2a-246">Displays the current server-level firewall rules</span><span class="sxs-lookup"><span data-stu-id="a8b2a-246">Displays the current server-level firewall rules</span></span> |
| [<span data-ttu-id="a8b2a-247">Create or Update Firewall Rule</span><span class="sxs-lookup"><span data-stu-id="a8b2a-247">Create or Update Firewall Rule</span></span>](https://docs.microsoft.com/rest/api/sql/FirewallRules/CreateOrUpdate) |<span data-ttu-id="a8b2a-248">Server</span><span class="sxs-lookup"><span data-stu-id="a8b2a-248">Server</span></span> |<span data-ttu-id="a8b2a-249">Creates or updates server-level firewall rules</span><span class="sxs-lookup"><span data-stu-id="a8b2a-249">Creates or updates server-level firewall rules</span></span> |
| [<span data-ttu-id="a8b2a-250">Delete Firewall Rule</span><span class="sxs-lookup"><span data-stu-id="a8b2a-250">Delete Firewall Rule</span></span>](https://docs.microsoft.com/rest/api/sql/FirewallRules/Delete) |<span data-ttu-id="a8b2a-251">Server</span><span class="sxs-lookup"><span data-stu-id="a8b2a-251">Server</span></span> |<span data-ttu-id="a8b2a-252">Removes server-level firewall rules</span><span class="sxs-lookup"><span data-stu-id="a8b2a-252">Removes server-level firewall rules</span></span> |

## <a name="server-level-firewall-rule-versus-a-database-level-firewall-rule"></a><span data-ttu-id="a8b2a-253">Server-level firewall rule versus a database-level firewall rule</span><span class="sxs-lookup"><span data-stu-id="a8b2a-253">Server-level firewall rule versus a database-level firewall rule</span></span>
<span data-ttu-id="a8b2a-254">Q.</span><span class="sxs-lookup"><span data-stu-id="a8b2a-254">Q.</span></span> <span data-ttu-id="a8b2a-255">Should users of one database be fully isolated from another database?</span><span class="sxs-lookup"><span data-stu-id="a8b2a-255">Should users of one database be fully isolated from another database?</span></span>   
  <span data-ttu-id="a8b2a-256">If yes, grant access using database-level firewall rules.</span><span class="sxs-lookup"><span data-stu-id="a8b2a-256">If yes, grant access using database-level firewall rules.</span></span> <span data-ttu-id="a8b2a-257">This avoids using server-level firewall rules, which permit access through the firewall to all databases, reducing the depth of your defenses.</span><span class="sxs-lookup"><span data-stu-id="a8b2a-257">This avoids using server-level firewall rules, which permit access through the firewall to all databases, reducing the depth of your defenses.</span></span>   
 
<span data-ttu-id="a8b2a-258">Q.</span><span class="sxs-lookup"><span data-stu-id="a8b2a-258">Q.</span></span> <span data-ttu-id="a8b2a-259">Do users at the IP address’s need access to all databases?</span><span class="sxs-lookup"><span data-stu-id="a8b2a-259">Do users at the IP address’s need access to all databases?</span></span>   
  <span data-ttu-id="a8b2a-260">Use server-level firewall rules to reduce the number of times you must configure firewall rules.</span><span class="sxs-lookup"><span data-stu-id="a8b2a-260">Use server-level firewall rules to reduce the number of times you must configure firewall rules.</span></span>   

<span data-ttu-id="a8b2a-261">Q.</span><span class="sxs-lookup"><span data-stu-id="a8b2a-261">Q.</span></span> <span data-ttu-id="a8b2a-262">Does the person or team configuring the firewall rules only have access through the Azure portal, PowerShell, or the REST API?</span><span class="sxs-lookup"><span data-stu-id="a8b2a-262">Does the person or team configuring the firewall rules only have access through the Azure portal, PowerShell, or the REST API?</span></span>   
  <span data-ttu-id="a8b2a-263">You must use server-level firewall rules.</span><span class="sxs-lookup"><span data-stu-id="a8b2a-263">You must use server-level firewall rules.</span></span> <span data-ttu-id="a8b2a-264">Database-level firewall rules can only be configured using Transact-SQL.</span><span class="sxs-lookup"><span data-stu-id="a8b2a-264">Database-level firewall rules can only be configured using Transact-SQL.</span></span>  

<span data-ttu-id="a8b2a-265">Q.</span><span class="sxs-lookup"><span data-stu-id="a8b2a-265">Q.</span></span> <span data-ttu-id="a8b2a-266">Is the person or team configuring the firewall rules prohibited from having high-level permission at the database level?</span><span class="sxs-lookup"><span data-stu-id="a8b2a-266">Is the person or team configuring the firewall rules prohibited from having high-level permission at the database level?</span></span>   
  <span data-ttu-id="a8b2a-267">Use server-level firewall rules.</span><span class="sxs-lookup"><span data-stu-id="a8b2a-267">Use server-level firewall rules.</span></span> <span data-ttu-id="a8b2a-268">Configuring database-level firewall rules using Transact-SQL, requires at least `CONTROL DATABASE` permission at the database level.</span><span class="sxs-lookup"><span data-stu-id="a8b2a-268">Configuring database-level firewall rules using Transact-SQL, requires at least `CONTROL DATABASE` permission at the database level.</span></span>  

<span data-ttu-id="a8b2a-269">Q.</span><span class="sxs-lookup"><span data-stu-id="a8b2a-269">Q.</span></span> <span data-ttu-id="a8b2a-270">Is the person or team configuring or auditing the firewall rules, centrally managing firewall rules for many (perhaps 100s) of databases?</span><span class="sxs-lookup"><span data-stu-id="a8b2a-270">Is the person or team configuring or auditing the firewall rules, centrally managing firewall rules for many (perhaps 100s) of databases?</span></span>   
  <span data-ttu-id="a8b2a-271">This selection depends upon your needs and environment.</span><span class="sxs-lookup"><span data-stu-id="a8b2a-271">This selection depends upon your needs and environment.</span></span> <span data-ttu-id="a8b2a-272">Server-level firewall rules might be easier to configure, but scripting can configure rules at the database-level.</span><span class="sxs-lookup"><span data-stu-id="a8b2a-272">Server-level firewall rules might be easier to configure, but scripting can configure rules at the database-level.</span></span> <span data-ttu-id="a8b2a-273">And even if you use server-level firewall rules, you might need to audit the database-firewall rules, to see if users with `CONTROL` permission on the database have created database-level firewall rules.</span><span class="sxs-lookup"><span data-stu-id="a8b2a-273">And even if you use server-level firewall rules, you might need to audit the database-firewall rules, to see if users with `CONTROL` permission on the database have created database-level firewall rules.</span></span>   

<span data-ttu-id="a8b2a-274">Q.</span><span class="sxs-lookup"><span data-stu-id="a8b2a-274">Q.</span></span> <span data-ttu-id="a8b2a-275">Can I use a mix of both server-level and database-level firewall rules?</span><span class="sxs-lookup"><span data-stu-id="a8b2a-275">Can I use a mix of both server-level and database-level firewall rules?</span></span>   
  <span data-ttu-id="a8b2a-276">Yes.</span><span class="sxs-lookup"><span data-stu-id="a8b2a-276">Yes.</span></span> <span data-ttu-id="a8b2a-277">Some users, such as administrators might need server-level firewall rules.</span><span class="sxs-lookup"><span data-stu-id="a8b2a-277">Some users, such as administrators might need server-level firewall rules.</span></span> <span data-ttu-id="a8b2a-278">Other users, such as users of a database application, might need database-level firewall rules.</span><span class="sxs-lookup"><span data-stu-id="a8b2a-278">Other users, such as users of a database application, might need database-level firewall rules.</span></span>   

## <a name="troubleshooting-the-database-firewall"></a><span data-ttu-id="a8b2a-279">Troubleshooting the database firewall</span><span class="sxs-lookup"><span data-stu-id="a8b2a-279">Troubleshooting the database firewall</span></span>
<span data-ttu-id="a8b2a-280">Consider the following points when access to the Microsoft Azure SQL Database service does not behave as you expect:</span><span class="sxs-lookup"><span data-stu-id="a8b2a-280">Consider the following points when access to the Microsoft Azure SQL Database service does not behave as you expect:</span></span>

* <span data-ttu-id="a8b2a-281">**Local firewall configuration:** Before your computer can access Azure SQL Database, you may need to create a firewall exception on your computer for TCP port 1433.</span><span class="sxs-lookup"><span data-stu-id="a8b2a-281">**Local firewall configuration:** Before your computer can access Azure SQL Database, you may need to create a firewall exception on your computer for TCP port 1433.</span></span> <span data-ttu-id="a8b2a-282">If you are making connections inside the Azure cloud boundary, you may have to open additional ports.</span><span class="sxs-lookup"><span data-stu-id="a8b2a-282">If you are making connections inside the Azure cloud boundary, you may have to open additional ports.</span></span> <span data-ttu-id="a8b2a-283">For more information, see the **SQL Database: Outside vs inside** section of [Ports beyond 1433 for ADO.NET 4.5 and SQL Database](sql-database-develop-direct-route-ports-adonet-v12.md).</span><span class="sxs-lookup"><span data-stu-id="a8b2a-283">For more information, see the **SQL Database: Outside vs inside** section of [Ports beyond 1433 for ADO.NET 4.5 and SQL Database](sql-database-develop-direct-route-ports-adonet-v12.md).</span></span>
* <span data-ttu-id="a8b2a-284">**Network address translation (NAT):** Due to NAT, the IP address used by your computer to connect to Azure SQL Database may be different than the IP address shown in your computer IP configuration settings.</span><span class="sxs-lookup"><span data-stu-id="a8b2a-284">**Network address translation (NAT):** Due to NAT, the IP address used by your computer to connect to Azure SQL Database may be different than the IP address shown in your computer IP configuration settings.</span></span> <span data-ttu-id="a8b2a-285">To view the IP address your computer is using to connect to Azure, log in to the portal and navigate to the **Configure** tab on the server that hosts your database.</span><span class="sxs-lookup"><span data-stu-id="a8b2a-285">To view the IP address your computer is using to connect to Azure, log in to the portal and navigate to the **Configure** tab on the server that hosts your database.</span></span> <span data-ttu-id="a8b2a-286">Under the **Allowed IP Addresses** section, the **Current Client IP Address** is displayed.</span><span class="sxs-lookup"><span data-stu-id="a8b2a-286">Under the **Allowed IP Addresses** section, the **Current Client IP Address** is displayed.</span></span> <span data-ttu-id="a8b2a-287">Click **Add** to the **Allowed IP Addresses** to allow this computer to access the server.</span><span class="sxs-lookup"><span data-stu-id="a8b2a-287">Click **Add** to the **Allowed IP Addresses** to allow this computer to access the server.</span></span>
* <span data-ttu-id="a8b2a-288">**Changes to the allow list have not taken effect yet:** There may be as much as a five-minute delay for changes to the Azure SQL Database firewall configuration to take effect.</span><span class="sxs-lookup"><span data-stu-id="a8b2a-288">**Changes to the allow list have not taken effect yet:** There may be as much as a five-minute delay for changes to the Azure SQL Database firewall configuration to take effect.</span></span>
* <span data-ttu-id="a8b2a-289">**The login is not authorized or an incorrect password was used:** If a login does not have permissions on the Azure SQL Database server or the password used is incorrect, the connection to the Azure SQL Database server is denied.</span><span class="sxs-lookup"><span data-stu-id="a8b2a-289">**The login is not authorized or an incorrect password was used:** If a login does not have permissions on the Azure SQL Database server or the password used is incorrect, the connection to the Azure SQL Database server is denied.</span></span> <span data-ttu-id="a8b2a-290">Creating a firewall setting only provides clients with an opportunity to attempt connecting to your server; each client must provide the necessary security credentials.</span><span class="sxs-lookup"><span data-stu-id="a8b2a-290">Creating a firewall setting only provides clients with an opportunity to attempt connecting to your server; each client must provide the necessary security credentials.</span></span> <span data-ttu-id="a8b2a-291">For more information about preparing logins, see [Managing Databases, Logins, and Users in Azure SQL Database](sql-database-manage-logins.md).</span><span class="sxs-lookup"><span data-stu-id="a8b2a-291">For more information about preparing logins, see [Managing Databases, Logins, and Users in Azure SQL Database](sql-database-manage-logins.md).</span></span>
* <span data-ttu-id="a8b2a-292">**Dynamic IP address:** If you have an Internet connection with dynamic IP addressing and you are having trouble getting through the firewall, you could try one of the following solutions:</span><span class="sxs-lookup"><span data-stu-id="a8b2a-292">**Dynamic IP address:** If you have an Internet connection with dynamic IP addressing and you are having trouble getting through the firewall, you could try one of the following solutions:</span></span>
  
  * <span data-ttu-id="a8b2a-293">Ask your Internet Service Provider (ISP) for the IP address range assigned to your client computers that access the Azure SQL Database server, and then add the IP address range as a firewall rule.</span><span class="sxs-lookup"><span data-stu-id="a8b2a-293">Ask your Internet Service Provider (ISP) for the IP address range assigned to your client computers that access the Azure SQL Database server, and then add the IP address range as a firewall rule.</span></span>
  * <span data-ttu-id="a8b2a-294">Get static IP addressing instead for your client computers, and then add the IP addresses as firewall rules.</span><span class="sxs-lookup"><span data-stu-id="a8b2a-294">Get static IP addressing instead for your client computers, and then add the IP addresses as firewall rules.</span></span>

## <a name="next-steps"></a><span data-ttu-id="a8b2a-295">Next steps</span><span class="sxs-lookup"><span data-stu-id="a8b2a-295">Next steps</span></span>

- <span data-ttu-id="a8b2a-296">For a quick start on creating a database and a server-level firewall rule, see [Create an Azure SQL database](sql-database-get-started-portal.md).</span><span class="sxs-lookup"><span data-stu-id="a8b2a-296">For a quick start on creating a database and a server-level firewall rule, see [Create an Azure SQL database](sql-database-get-started-portal.md).</span></span>
- <span data-ttu-id="a8b2a-297">For help in connecting to an Azure SQL database from open source or third-party applications, see [Client quick-start code samples to SQL Database](https://msdn.microsoft.com/library/azure/ee336282.aspx).</span><span class="sxs-lookup"><span data-stu-id="a8b2a-297">For help in connecting to an Azure SQL database from open source or third-party applications, see [Client quick-start code samples to SQL Database](https://msdn.microsoft.com/library/azure/ee336282.aspx).</span></span>
- <span data-ttu-id="a8b2a-298">For information on additional ports that you may need to open, see the **SQL Database: Outside vs inside** section of [Ports beyond 1433 for ADO.NET 4.5 and SQL Database](sql-database-develop-direct-route-ports-adonet-v12.md)</span><span class="sxs-lookup"><span data-stu-id="a8b2a-298">For information on additional ports that you may need to open, see the **SQL Database: Outside vs inside** section of [Ports beyond 1433 for ADO.NET 4.5 and SQL Database](sql-database-develop-direct-route-ports-adonet-v12.md)</span></span>
- <span data-ttu-id="a8b2a-299">For an overview of Azure SQL Database security, see [Securing your database](sql-database-security-overview.md)</span><span class="sxs-lookup"><span data-stu-id="a8b2a-299">For an overview of Azure SQL Database security, see [Securing your database](sql-database-security-overview.md)</span></span>

<!--Image references-->
[1]: ./media/sql-database-firewall-configure/sqldb-firewall-1.png
