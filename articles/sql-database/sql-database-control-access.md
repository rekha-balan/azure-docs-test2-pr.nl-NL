---
title: Granting access to Azure SQL Database and SQL Data Warehouse | Microsoft Docs
description: Learn about granting access to Microsoft Azure SQL Database and SQL Data Warehouse.
services: sql-database
author: CarlRabeler
manager: craigg
ms.service: sql-database
ms.prod_service: sql-database, sql-data-warehouse
ms.custom: security
ms.topic: conceptual
ms.date: 06/13/2018
ms.author: carlrab
ms.openlocfilehash: 8113fb05d533b3b8aa253bf6cb944ba4877dff2d
ms.sourcegitcommit: d1451406a010fd3aa854dc8e5b77dc5537d8050e
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 09/13/2018
ms.locfileid: "44829153"
---
# <a name="azure-sql-database-and-sql-data-warehouse-access-control"></a><span data-ttu-id="56cda-103">Azure SQL Database and SQL Data Warehouse access control</span><span class="sxs-lookup"><span data-stu-id="56cda-103">Azure SQL Database and SQL Data Warehouse access control</span></span>
<span data-ttu-id="56cda-104">To provide security, Azure [SQL Database](sql-database-technical-overview.md) and [SQL Data Warehouse](../sql-data-warehouse/sql-data-warehouse-overview-what-is.md) control access with firewall rules limiting connectivity by IP address, authentication mechanisms requiring users to prove their identity, and authorization mechanisms limiting users to specific actions and data.</span><span class="sxs-lookup"><span data-stu-id="56cda-104">To provide security, Azure [SQL Database](sql-database-technical-overview.md) and [SQL Data Warehouse](../sql-data-warehouse/sql-data-warehouse-overview-what-is.md) control access with firewall rules limiting connectivity by IP address, authentication mechanisms requiring users to prove their identity, and authorization mechanisms limiting users to specific actions and data.</span></span> 

> [!IMPORTANT]
> <span data-ttu-id="56cda-105">For an overview of the SQL Database security features, see [SQL security overview](sql-database-security-overview.md).</span><span class="sxs-lookup"><span data-stu-id="56cda-105">For an overview of the SQL Database security features, see [SQL security overview](sql-database-security-overview.md).</span></span> <span data-ttu-id="56cda-106">For a tutorial, see [Secure your Azure SQL Database](sql-database-security-tutorial.md).</span><span class="sxs-lookup"><span data-stu-id="56cda-106">For a tutorial, see [Secure your Azure SQL Database](sql-database-security-tutorial.md).</span></span> <span data-ttu-id="56cda-107">For an overview of SQL Data Warehouse security features, see [SQL Data Warehouse security overview](../sql-data-warehouse/sql-data-warehouse-overview-manage-security.md)</span><span class="sxs-lookup"><span data-stu-id="56cda-107">For an overview of SQL Data Warehouse security features, see [SQL Data Warehouse security overview](../sql-data-warehouse/sql-data-warehouse-overview-manage-security.md)</span></span>

## <a name="firewall-and-firewall-rules"></a><span data-ttu-id="56cda-108">Firewall and firewall rules</span><span class="sxs-lookup"><span data-stu-id="56cda-108">Firewall and firewall rules</span></span>
<span data-ttu-id="56cda-109">Microsoft Azure SQL Database provides a relational database service for Azure and other Internet-based applications.</span><span class="sxs-lookup"><span data-stu-id="56cda-109">Microsoft Azure SQL Database provides a relational database service for Azure and other Internet-based applications.</span></span> <span data-ttu-id="56cda-110">To help protect your data, firewalls prevent all access to your database server until you specify which computers have permission.</span><span class="sxs-lookup"><span data-stu-id="56cda-110">To help protect your data, firewalls prevent all access to your database server until you specify which computers have permission.</span></span> <span data-ttu-id="56cda-111">The firewall grants access to databases based on the originating IP address of each request.</span><span class="sxs-lookup"><span data-stu-id="56cda-111">The firewall grants access to databases based on the originating IP address of each request.</span></span> <span data-ttu-id="56cda-112">For more information, see [Overview of Azure SQL Database firewall rules](sql-database-firewall-configure.md)</span><span class="sxs-lookup"><span data-stu-id="56cda-112">For more information, see [Overview of Azure SQL Database firewall rules](sql-database-firewall-configure.md)</span></span>

<span data-ttu-id="56cda-113">The Azure SQL Database service is only available through TCP port 1433.</span><span class="sxs-lookup"><span data-stu-id="56cda-113">The Azure SQL Database service is only available through TCP port 1433.</span></span> <span data-ttu-id="56cda-114">To access a SQL Database from your computer, ensure that your client computer firewall allows outgoing TCP communication on TCP port 1433.</span><span class="sxs-lookup"><span data-stu-id="56cda-114">To access a SQL Database from your computer, ensure that your client computer firewall allows outgoing TCP communication on TCP port 1433.</span></span> <span data-ttu-id="56cda-115">If not needed for other applications, block inbound connections on TCP port 1433.</span><span class="sxs-lookup"><span data-stu-id="56cda-115">If not needed for other applications, block inbound connections on TCP port 1433.</span></span> 

<span data-ttu-id="56cda-116">As part of the connection process, connections from Azure virtual machines are redirected to a different IP address and port, unique for each worker role.</span><span class="sxs-lookup"><span data-stu-id="56cda-116">As part of the connection process, connections from Azure virtual machines are redirected to a different IP address and port, unique for each worker role.</span></span> <span data-ttu-id="56cda-117">The port number is in the range from 11000 to 11999.</span><span class="sxs-lookup"><span data-stu-id="56cda-117">The port number is in the range from 11000 to 11999.</span></span> <span data-ttu-id="56cda-118">For more information about TCP ports, see [Ports beyond 1433 for ADO.NET 4.5 and SQL Database2](sql-database-develop-direct-route-ports-adonet-v12.md).</span><span class="sxs-lookup"><span data-stu-id="56cda-118">For more information about TCP ports, see [Ports beyond 1433 for ADO.NET 4.5 and SQL Database2](sql-database-develop-direct-route-ports-adonet-v12.md).</span></span>

## <a name="authentication"></a><span data-ttu-id="56cda-119">Authentication</span><span class="sxs-lookup"><span data-stu-id="56cda-119">Authentication</span></span>

<span data-ttu-id="56cda-120">SQL Database supports two types of authentication:</span><span class="sxs-lookup"><span data-stu-id="56cda-120">SQL Database supports two types of authentication:</span></span>

* <span data-ttu-id="56cda-121">**SQL Authentication**, which uses a username and password.</span><span class="sxs-lookup"><span data-stu-id="56cda-121">**SQL Authentication**, which uses a username and password.</span></span> <span data-ttu-id="56cda-122">When you created the logical server for your database, you specified a "server admin" login with a username and password.</span><span class="sxs-lookup"><span data-stu-id="56cda-122">When you created the logical server for your database, you specified a "server admin" login with a username and password.</span></span> <span data-ttu-id="56cda-123">Using these credentials, you can authenticate to any database on that server as the database owner, or "dbo."</span><span class="sxs-lookup"><span data-stu-id="56cda-123">Using these credentials, you can authenticate to any database on that server as the database owner, or "dbo."</span></span> 
* <span data-ttu-id="56cda-124">**Azure Active Directory Authentication**, which uses identities managed by Azure Active Directory and is supported for managed and integrated domains.</span><span class="sxs-lookup"><span data-stu-id="56cda-124">**Azure Active Directory Authentication**, which uses identities managed by Azure Active Directory and is supported for managed and integrated domains.</span></span> <span data-ttu-id="56cda-125">Use Active Directory authentication (integrated security) [whenever possible](https://docs.microsoft.com/sql/relational-databases/security/choose-an-authentication-mode).</span><span class="sxs-lookup"><span data-stu-id="56cda-125">Use Active Directory authentication (integrated security) [whenever possible](https://docs.microsoft.com/sql/relational-databases/security/choose-an-authentication-mode).</span></span> <span data-ttu-id="56cda-126">If you want to use Azure Active Directory Authentication, you must create another server admin called the "Azure AD admin," which is allowed to administer Azure AD users and groups.</span><span class="sxs-lookup"><span data-stu-id="56cda-126">If you want to use Azure Active Directory Authentication, you must create another server admin called the "Azure AD admin," which is allowed to administer Azure AD users and groups.</span></span> <span data-ttu-id="56cda-127">This admin can also perform all operations that a regular server admin can.</span><span class="sxs-lookup"><span data-stu-id="56cda-127">This admin can also perform all operations that a regular server admin can.</span></span> <span data-ttu-id="56cda-128">See [Connecting to SQL Database By Using Azure Active Directory Authentication](sql-database-aad-authentication.md) for a walkthrough of how to create an Azure AD admin to enable Azure Active Directory Authentication.</span><span class="sxs-lookup"><span data-stu-id="56cda-128">See [Connecting to SQL Database By Using Azure Active Directory Authentication](sql-database-aad-authentication.md) for a walkthrough of how to create an Azure AD admin to enable Azure Active Directory Authentication.</span></span>

<span data-ttu-id="56cda-129">The Database Engine closes connections that remain idle for more than 30 minutes.</span><span class="sxs-lookup"><span data-stu-id="56cda-129">The Database Engine closes connections that remain idle for more than 30 minutes.</span></span> <span data-ttu-id="56cda-130">The connection must login again before it can be used.</span><span class="sxs-lookup"><span data-stu-id="56cda-130">The connection must login again before it can be used.</span></span> <span data-ttu-id="56cda-131">Continuously active connections to SQL Database require reauthorization (performed by the database engine) at least every 10 hours.</span><span class="sxs-lookup"><span data-stu-id="56cda-131">Continuously active connections to SQL Database require reauthorization (performed by the database engine) at least every 10 hours.</span></span> <span data-ttu-id="56cda-132">The database engine attempts reauthorization using the originally submitted password and no user input is required.</span><span class="sxs-lookup"><span data-stu-id="56cda-132">The database engine attempts reauthorization using the originally submitted password and no user input is required.</span></span> <span data-ttu-id="56cda-133">For performance reasons, when a password is reset in SQL Database, the connection is not reauthenticated, even if the connection is reset due to connection pooling.</span><span class="sxs-lookup"><span data-stu-id="56cda-133">For performance reasons, when a password is reset in SQL Database, the connection is not reauthenticated, even if the connection is reset due to connection pooling.</span></span> <span data-ttu-id="56cda-134">This is different from the behavior of on-premises SQL Server.</span><span class="sxs-lookup"><span data-stu-id="56cda-134">This is different from the behavior of on-premises SQL Server.</span></span> <span data-ttu-id="56cda-135">If the password has been changed since the connection was initially authorized, the connection must be terminated and a new connection made using the new password.</span><span class="sxs-lookup"><span data-stu-id="56cda-135">If the password has been changed since the connection was initially authorized, the connection must be terminated and a new connection made using the new password.</span></span> <span data-ttu-id="56cda-136">A user with the `KILL DATABASE CONNECTION` permission can explicitly terminate a connection to SQL Database by using the [KILL](https://docs.microsoft.com/sql/t-sql/language-elements/kill-transact-sql) command.</span><span class="sxs-lookup"><span data-stu-id="56cda-136">A user with the `KILL DATABASE CONNECTION` permission can explicitly terminate a connection to SQL Database by using the [KILL](https://docs.microsoft.com/sql/t-sql/language-elements/kill-transact-sql) command.</span></span>

<span data-ttu-id="56cda-137">User accounts can be created in the master database and can be granted permissions in all databases on the server, or they can be created in the database itself (called contained users).</span><span class="sxs-lookup"><span data-stu-id="56cda-137">User accounts can be created in the master database and can be granted permissions in all databases on the server, or they can be created in the database itself (called contained users).</span></span> <span data-ttu-id="56cda-138">For information on creating and managing logins, see [Manage logins](sql-database-manage-logins.md).</span><span class="sxs-lookup"><span data-stu-id="56cda-138">For information on creating and managing logins, see [Manage logins](sql-database-manage-logins.md).</span></span> <span data-ttu-id="56cda-139">Use contained databases to enhance portability and scalability.</span><span class="sxs-lookup"><span data-stu-id="56cda-139">Use contained databases to enhance portability and scalability.</span></span> <span data-ttu-id="56cda-140">For more information on contained users, see [Contained Database Users - Making Your Database Portable](https://docs.microsoft.com/sql/relational-databases/security/contained-database-users-making-your-database-portable), [CREATE USER (Transact-SQL)](https://docs.microsoft.com/sql/t-sql/statements/create-user-transact-sql), and [Contained Databases](https://docs.microsoft.com/sql/relational-databases/databases/contained-databases).</span><span class="sxs-lookup"><span data-stu-id="56cda-140">For more information on contained users, see [Contained Database Users - Making Your Database Portable](https://docs.microsoft.com/sql/relational-databases/security/contained-database-users-making-your-database-portable), [CREATE USER (Transact-SQL)](https://docs.microsoft.com/sql/t-sql/statements/create-user-transact-sql), and [Contained Databases](https://docs.microsoft.com/sql/relational-databases/databases/contained-databases).</span></span>

<span data-ttu-id="56cda-141">As a best practice your application should use a dedicated account to authenticate -- this way you can limit the permissions granted to the application and reduce the risks of malicious activity in case your application code is vulnerable to a SQL injection attack.</span><span class="sxs-lookup"><span data-stu-id="56cda-141">As a best practice your application should use a dedicated account to authenticate -- this way you can limit the permissions granted to the application and reduce the risks of malicious activity in case your application code is vulnerable to a SQL injection attack.</span></span> <span data-ttu-id="56cda-142">The recommended approach is to create a [contained database user](https://docs.microsoft.com/sql/relational-databases/security/contained-database-users-making-your-database-portable), which allows your app to authenticate directly to the database.</span><span class="sxs-lookup"><span data-stu-id="56cda-142">The recommended approach is to create a [contained database user](https://docs.microsoft.com/sql/relational-databases/security/contained-database-users-making-your-database-portable), which allows your app to authenticate directly to the database.</span></span> 

## <a name="authorization"></a><span data-ttu-id="56cda-143">Authorization</span><span class="sxs-lookup"><span data-stu-id="56cda-143">Authorization</span></span>

<span data-ttu-id="56cda-144">Authorization refers to what a user can do within an Azure SQL Database, and this is controlled by your user account's database [role memberships](https://docs.microsoft.com/sql/relational-databases/security/authentication-access/database-level-roles) and [object-level permissions](https://docs.microsoft.com/sql/relational-databases/security/permissions-database-engine).</span><span class="sxs-lookup"><span data-stu-id="56cda-144">Authorization refers to what a user can do within an Azure SQL Database, and this is controlled by your user account's database [role memberships](https://docs.microsoft.com/sql/relational-databases/security/authentication-access/database-level-roles) and [object-level permissions](https://docs.microsoft.com/sql/relational-databases/security/permissions-database-engine).</span></span> <span data-ttu-id="56cda-145">As a best practice, you should grant users the least privileges necessary.</span><span class="sxs-lookup"><span data-stu-id="56cda-145">As a best practice, you should grant users the least privileges necessary.</span></span> <span data-ttu-id="56cda-146">The server admin account you are connecting with is a member of db_owner, which has authority to do anything within the database.</span><span class="sxs-lookup"><span data-stu-id="56cda-146">The server admin account you are connecting with is a member of db_owner, which has authority to do anything within the database.</span></span> <span data-ttu-id="56cda-147">Save this account for deploying schema upgrades and other management operations.</span><span class="sxs-lookup"><span data-stu-id="56cda-147">Save this account for deploying schema upgrades and other management operations.</span></span> <span data-ttu-id="56cda-148">Use the "ApplicationUser" account with more limited permissions to connect from your application to the database with the least privileges needed by your application.</span><span class="sxs-lookup"><span data-stu-id="56cda-148">Use the "ApplicationUser" account with more limited permissions to connect from your application to the database with the least privileges needed by your application.</span></span> <span data-ttu-id="56cda-149">For more information, see [Manage logins](sql-database-manage-logins.md).</span><span class="sxs-lookup"><span data-stu-id="56cda-149">For more information, see [Manage logins](sql-database-manage-logins.md).</span></span>

<span data-ttu-id="56cda-150">Typically, only administrators need access to the `master` database.</span><span class="sxs-lookup"><span data-stu-id="56cda-150">Typically, only administrators need access to the `master` database.</span></span> <span data-ttu-id="56cda-151">Routine access to each user database should be through non-administrator contained database users created in each database.</span><span class="sxs-lookup"><span data-stu-id="56cda-151">Routine access to each user database should be through non-administrator contained database users created in each database.</span></span> <span data-ttu-id="56cda-152">When you use contained database users, you do not need to create logins in the `master` database.</span><span class="sxs-lookup"><span data-stu-id="56cda-152">When you use contained database users, you do not need to create logins in the `master` database.</span></span> <span data-ttu-id="56cda-153">For more information, see [Contained Database Users - Making Your Database Portable](https://docs.microsoft.com/sql/relational-databases/security/contained-database-users-making-your-database-portable).</span><span class="sxs-lookup"><span data-stu-id="56cda-153">For more information, see [Contained Database Users - Making Your Database Portable](https://docs.microsoft.com/sql/relational-databases/security/contained-database-users-making-your-database-portable).</span></span>

<span data-ttu-id="56cda-154">You should familiarize yourself with the following features that can be used to limit or elevate permissions:</span><span class="sxs-lookup"><span data-stu-id="56cda-154">You should familiarize yourself with the following features that can be used to limit or elevate permissions:</span></span>   
* <span data-ttu-id="56cda-155">[Impersonation](https://docs.microsoft.com/dotnet/framework/data/adonet/sql/customizing-permissions-with-impersonation-in-sql-server) and [module-signing](https://docs.microsoft.com/dotnet/framework/data/adonet/sql/signing-stored-procedures-in-sql-server) can be used to securely elevate permissions temporarily.</span><span class="sxs-lookup"><span data-stu-id="56cda-155">[Impersonation](https://docs.microsoft.com/dotnet/framework/data/adonet/sql/customizing-permissions-with-impersonation-in-sql-server) and [module-signing](https://docs.microsoft.com/dotnet/framework/data/adonet/sql/signing-stored-procedures-in-sql-server) can be used to securely elevate permissions temporarily.</span></span>
* <span data-ttu-id="56cda-156">[Row-Level Security](https://docs.microsoft.com/sql/relational-databases/security/row-level-security) can be used limit which rows a user can access.</span><span class="sxs-lookup"><span data-stu-id="56cda-156">[Row-Level Security](https://docs.microsoft.com/sql/relational-databases/security/row-level-security) can be used limit which rows a user can access.</span></span>
* <span data-ttu-id="56cda-157">[Data Masking](sql-database-dynamic-data-masking-get-started.md) can be used to limit exposure of sensitive data.</span><span class="sxs-lookup"><span data-stu-id="56cda-157">[Data Masking](sql-database-dynamic-data-masking-get-started.md) can be used to limit exposure of sensitive data.</span></span>
* <span data-ttu-id="56cda-158">[Stored procedures](https://docs.microsoft.com/sql/relational-databases/stored-procedures/stored-procedures-database-engine) can be used to limit the actions that can be taken on the database.</span><span class="sxs-lookup"><span data-stu-id="56cda-158">[Stored procedures](https://docs.microsoft.com/sql/relational-databases/stored-procedures/stored-procedures-database-engine) can be used to limit the actions that can be taken on the database.</span></span>

## <a name="next-steps"></a><span data-ttu-id="56cda-159">Next steps</span><span class="sxs-lookup"><span data-stu-id="56cda-159">Next steps</span></span>

- <span data-ttu-id="56cda-160">For an overview of the SQL Database security features, see [SQL security overview](sql-database-security-overview.md).</span><span class="sxs-lookup"><span data-stu-id="56cda-160">For an overview of the SQL Database security features, see [SQL security overview](sql-database-security-overview.md).</span></span>
- <span data-ttu-id="56cda-161">To learn more about firewall rules, see [Firewall rules](sql-database-firewall-configure.md).</span><span class="sxs-lookup"><span data-stu-id="56cda-161">To learn more about firewall rules, see [Firewall rules](sql-database-firewall-configure.md).</span></span>
- <span data-ttu-id="56cda-162">To learn about users and logins, see [Manage logins](sql-database-manage-logins.md).</span><span class="sxs-lookup"><span data-stu-id="56cda-162">To learn about users and logins, see [Manage logins](sql-database-manage-logins.md).</span></span> 
- <span data-ttu-id="56cda-163">For a discussion of proactive monitoring, see [Database Auditing](sql-database-auditing.md) and [SQL Database Threat Detection](sql-database-threat-detection.md).</span><span class="sxs-lookup"><span data-stu-id="56cda-163">For a discussion of proactive monitoring, see [Database Auditing](sql-database-auditing.md) and [SQL Database Threat Detection](sql-database-threat-detection.md).</span></span>
- <span data-ttu-id="56cda-164">For a tutorial, see [Secure your Azure SQL Database](sql-database-security-tutorial.md).</span><span class="sxs-lookup"><span data-stu-id="56cda-164">For a tutorial, see [Secure your Azure SQL Database](sql-database-security-tutorial.md).</span></span>
