---
title: Monitoring database performance in Azure SQL Database | Microsoft Docs
description: Learn about the options for monitoring your database with Azure tools and dynamic management views.
keywords: database monitoring, cloud database performance
services: sql-database
documentationcenter: ''
author: CarlRabeler
manager: jhubbard
editor: ''
ms.assetid: a2e47475-c955-4a8d-a65c-cbef9a6d9b9f
ms.service: sql-database
ms.custom: monitor and tune
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: data-management
ms.date: 01/10/2017
ms.author: carlrab
ms.openlocfilehash: d1bb34a23816f7afce12981dab9e428dd97c51ac
ms.sourcegitcommit: 5b9d839c0c0a94b293fdafe1d6e5429506c07e05
ms.translationtype: HT
ms.contentlocale: nl-NL
ms.lasthandoff: 08/02/2018
ms.locfileid: "44562698"
---
# <a name="monitoring-database-performance-in-azure-sql-database"></a><span data-ttu-id="eb3f1-104">Monitoring database performance in Azure SQL Database</span><span class="sxs-lookup"><span data-stu-id="eb3f1-104">Monitoring database performance in Azure SQL Database</span></span>
<span data-ttu-id="eb3f1-105">Monitoring the performance of a SQL database in Azure starts with monitoring the resource utilization relative to the level of database performance you choose.</span><span class="sxs-lookup"><span data-stu-id="eb3f1-105">Monitoring the performance of a SQL database in Azure starts with monitoring the resource utilization relative to the level of database performance you choose.</span></span> <span data-ttu-id="eb3f1-106">Monitoring helps you  determine whether your database has excess capacity or is having trouble because resources are maxed out, and then decide whether it's time to adjust the performance level and [service tier](sql-database-service-tiers.md) of your database.</span><span class="sxs-lookup"><span data-stu-id="eb3f1-106">Monitoring helps you  determine whether your database has excess capacity or is having trouble because resources are maxed out, and then decide whether it's time to adjust the performance level and [service tier](sql-database-service-tiers.md) of your database.</span></span> <span data-ttu-id="eb3f1-107">You can monitor your database using graphical tools in the [Azure portal](https://portal.azure.com) or using SQL [dynamic management views](https://msdn.microsoft.com/library/ms188754.aspx).</span><span class="sxs-lookup"><span data-stu-id="eb3f1-107">You can monitor your database using graphical tools in the [Azure portal](https://portal.azure.com) or using SQL [dynamic management views](https://msdn.microsoft.com/library/ms188754.aspx).</span></span>

## <a name="monitor-databases-using-the-azure-portal"></a><span data-ttu-id="eb3f1-108">Monitor databases using the Azure portal</span><span class="sxs-lookup"><span data-stu-id="eb3f1-108">Monitor databases using the Azure portal</span></span>
<span data-ttu-id="eb3f1-109">In the [Azure portal](https://portal.azure.com/), you can monitor a single database’s utilization by selecting your database and clicking the **Monitoring** chart.</span><span class="sxs-lookup"><span data-stu-id="eb3f1-109">In the [Azure portal](https://portal.azure.com/), you can monitor a single database’s utilization by selecting your database and clicking the **Monitoring** chart.</span></span> <span data-ttu-id="eb3f1-110">This brings up a **Metric** window that you can change by clicking the **Edit chart** button.</span><span class="sxs-lookup"><span data-stu-id="eb3f1-110">This brings up a **Metric** window that you can change by clicking the **Edit chart** button.</span></span> <span data-ttu-id="eb3f1-111">Add the following metrics:</span><span class="sxs-lookup"><span data-stu-id="eb3f1-111">Add the following metrics:</span></span>

* <span data-ttu-id="eb3f1-112">CPU percentage</span><span class="sxs-lookup"><span data-stu-id="eb3f1-112">CPU percentage</span></span>
* <span data-ttu-id="eb3f1-113">DTU percentage</span><span class="sxs-lookup"><span data-stu-id="eb3f1-113">DTU percentage</span></span>
* <span data-ttu-id="eb3f1-114">Data IO percentage</span><span class="sxs-lookup"><span data-stu-id="eb3f1-114">Data IO percentage</span></span>
* <span data-ttu-id="eb3f1-115">Database size percentage</span><span class="sxs-lookup"><span data-stu-id="eb3f1-115">Database size percentage</span></span>

<span data-ttu-id="eb3f1-116">Once you’ve added these metrics, you can continue to view them in the **Monitoring** chart with more details on the **Metric** window.</span><span class="sxs-lookup"><span data-stu-id="eb3f1-116">Once you’ve added these metrics, you can continue to view them in the **Monitoring** chart with more details on the **Metric** window.</span></span> <span data-ttu-id="eb3f1-117">All four metrics show the average utilization percentage relative to the **DTU** of your database.</span><span class="sxs-lookup"><span data-stu-id="eb3f1-117">All four metrics show the average utilization percentage relative to the **DTU** of your database.</span></span> <span data-ttu-id="eb3f1-118">See the [service tiers](sql-database-service-tiers.md) article for details about DTUs.</span><span class="sxs-lookup"><span data-stu-id="eb3f1-118">See the [service tiers](sql-database-service-tiers.md) article for details about DTUs.</span></span>

![Service tier monitoring of database performance.](https://docstestmedia1.blob.core.windows.net/azure-media/articles/sql-database/media/sql-database-service-tiers/sqldb_service_tier_monitoring.png)

<span data-ttu-id="eb3f1-120">You can also configure alerts on the performance metrics.</span><span class="sxs-lookup"><span data-stu-id="eb3f1-120">You can also configure alerts on the performance metrics.</span></span> <span data-ttu-id="eb3f1-121">Click the **Add alert** button in the **Metric** window.</span><span class="sxs-lookup"><span data-stu-id="eb3f1-121">Click the **Add alert** button in the **Metric** window.</span></span> <span data-ttu-id="eb3f1-122">Follow the wizard to configure your alert.</span><span class="sxs-lookup"><span data-stu-id="eb3f1-122">Follow the wizard to configure your alert.</span></span> <span data-ttu-id="eb3f1-123">You have the option to alert if the metrics exceed a certain threshold or if the metric falls below a certain threshold.</span><span class="sxs-lookup"><span data-stu-id="eb3f1-123">You have the option to alert if the metrics exceed a certain threshold or if the metric falls below a certain threshold.</span></span>

<span data-ttu-id="eb3f1-124">For example, if you expect the workload on your database to grow, you can choose to configure an email alert whenever your database reaches 80% on any of the performance metrics.</span><span class="sxs-lookup"><span data-stu-id="eb3f1-124">For example, if you expect the workload on your database to grow, you can choose to configure an email alert whenever your database reaches 80% on any of the performance metrics.</span></span> <span data-ttu-id="eb3f1-125">You can use this as an early warning to figure out when you might have to switch to the next higher performance level.</span><span class="sxs-lookup"><span data-stu-id="eb3f1-125">You can use this as an early warning to figure out when you might have to switch to the next higher performance level.</span></span>

<span data-ttu-id="eb3f1-126">The performance metrics can also help you determine if you are able to downgrade to a lower performance level.</span><span class="sxs-lookup"><span data-stu-id="eb3f1-126">The performance metrics can also help you determine if you are able to downgrade to a lower performance level.</span></span> <span data-ttu-id="eb3f1-127">Assume you are using a Standard S2 database and all performance metrics show that the database on average does not use more than 10% at any given time.</span><span class="sxs-lookup"><span data-stu-id="eb3f1-127">Assume you are using a Standard S2 database and all performance metrics show that the database on average does not use more than 10% at any given time.</span></span> <span data-ttu-id="eb3f1-128">It is likely that the database will work well in Standard S1.</span><span class="sxs-lookup"><span data-stu-id="eb3f1-128">It is likely that the database will work well in Standard S1.</span></span> <span data-ttu-id="eb3f1-129">However, be aware of workloads that spike or fluctuate before making the decision to move to a lower performance level.</span><span class="sxs-lookup"><span data-stu-id="eb3f1-129">However, be aware of workloads that spike or fluctuate before making the decision to move to a lower performance level.</span></span>

## <a name="monitor-databases-using-dmvs"></a><span data-ttu-id="eb3f1-130">Monitor databases using DMVs</span><span class="sxs-lookup"><span data-stu-id="eb3f1-130">Monitor databases using DMVs</span></span>
<span data-ttu-id="eb3f1-131">The same metrics that are exposed in the portal are also available through system views: [sys.resource_stats](https://msdn.microsoft.com/library/dn269979.aspx) in the logical **master** database of your server, and [sys.dm_db_resource_stats](https://msdn.microsoft.com/library/dn800981.aspx) in the user database.</span><span class="sxs-lookup"><span data-stu-id="eb3f1-131">The same metrics that are exposed in the portal are also available through system views: [sys.resource_stats](https://msdn.microsoft.com/library/dn269979.aspx) in the logical **master** database of your server, and [sys.dm_db_resource_stats](https://msdn.microsoft.com/library/dn800981.aspx) in the user database.</span></span> <span data-ttu-id="eb3f1-132">Use **sys.resource_stats** if you need to monitor less granular data across a longer period of time.</span><span class="sxs-lookup"><span data-stu-id="eb3f1-132">Use **sys.resource_stats** if you need to monitor less granular data across a longer period of time.</span></span> <span data-ttu-id="eb3f1-133">Use **sys.dm_db_resource_stats** if you need to monitor more granular data within a smaller time frame.</span><span class="sxs-lookup"><span data-stu-id="eb3f1-133">Use **sys.dm_db_resource_stats** if you need to monitor more granular data within a smaller time frame.</span></span> <span data-ttu-id="eb3f1-134">For more information, see [Azure SQL Database Performance Guidance](sql-database-performance-guidance.md#monitor-resource-use).</span><span class="sxs-lookup"><span data-stu-id="eb3f1-134">For more information, see [Azure SQL Database Performance Guidance](sql-database-performance-guidance.md#monitor-resource-use).</span></span>

> [!NOTE]
> <span data-ttu-id="eb3f1-135">**sys.dm_db_resource_stats** returns an empty result set when used in Web and Business edition databases, which are retired.</span><span class="sxs-lookup"><span data-stu-id="eb3f1-135">**sys.dm_db_resource_stats** returns an empty result set when used in Web and Business edition databases, which are retired.</span></span>
>
>

<span data-ttu-id="eb3f1-136">For elastic pools, you can monitor individual databases in the pool with the techniques described in this section.</span><span class="sxs-lookup"><span data-stu-id="eb3f1-136">For elastic pools, you can monitor individual databases in the pool with the techniques described in this section.</span></span> <span data-ttu-id="eb3f1-137">But you can also monitor the pool as a whole.</span><span class="sxs-lookup"><span data-stu-id="eb3f1-137">But you can also monitor the pool as a whole.</span></span> <span data-ttu-id="eb3f1-138">For information, see [Monitor and manage an elastic pool](sql-database-elastic-pool-manage-portal.md).</span><span class="sxs-lookup"><span data-stu-id="eb3f1-138">For information, see [Monitor and manage an elastic pool](sql-database-elastic-pool-manage-portal.md).</span></span>

