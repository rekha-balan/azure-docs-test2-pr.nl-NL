---
title: Azure SQL Database elastic query overview | Microsoft Docs
description: Elastic query enables you to run a Transact-SQL query that spans multiple databases.
services: sql-database
manager: craigg
author: MladjoA
ms.service: sql-database
ms.custom: scale out apps
ms.topic: conceptual
ms.date: 07/03/2018
ms.author: mlandzic
ms.openlocfilehash: 52fce1cf1acb5e084c629c9cad6486d6a599b4fd
ms.sourcegitcommit: d1451406a010fd3aa854dc8e5b77dc5537d8050e
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 09/13/2018
ms.locfileid: "44788923"
---
# <a name="azure-sql-database-elastic-query-overview-preview"></a><span data-ttu-id="19142-103">Azure SQL Database elastic query overview (preview)</span><span class="sxs-lookup"><span data-stu-id="19142-103">Azure SQL Database elastic query overview (preview)</span></span>

<span data-ttu-id="19142-104">The elastic query feature (in preview) enables you to run a Transact-SQL query that spans multiple databases in Azure SQL Database.</span><span class="sxs-lookup"><span data-stu-id="19142-104">The elastic query feature (in preview) enables you to run a Transact-SQL query that spans multiple databases in Azure SQL Database.</span></span> <span data-ttu-id="19142-105">It allows you to perform cross-database queries to access remote tables, and to connect Microsoft and third-party tools (Excel, Power BI, Tableau, etc.) to query across data tiers with multiple databases.</span><span class="sxs-lookup"><span data-stu-id="19142-105">It allows you to perform cross-database queries to access remote tables, and to connect Microsoft and third-party tools (Excel, Power BI, Tableau, etc.) to query across data tiers with multiple databases.</span></span> <span data-ttu-id="19142-106">Using this feature, you can scale out queries to large data tiers in SQL Database and visualize the results in business intelligence (BI) reports.</span><span class="sxs-lookup"><span data-stu-id="19142-106">Using this feature, you can scale out queries to large data tiers in SQL Database and visualize the results in business intelligence (BI) reports.</span></span>

## <a name="why-use-elastic-queries"></a><span data-ttu-id="19142-107">Why use elastic queries</span><span class="sxs-lookup"><span data-stu-id="19142-107">Why use elastic queries</span></span>

### <a name="azure-sql-database"></a><span data-ttu-id="19142-108">Azure SQL Database</span><span class="sxs-lookup"><span data-stu-id="19142-108">Azure SQL Database</span></span>

<span data-ttu-id="19142-109">Query across Azure SQL databases completely in T-SQL.</span><span class="sxs-lookup"><span data-stu-id="19142-109">Query across Azure SQL databases completely in T-SQL.</span></span> <span data-ttu-id="19142-110">This allows for read-only querying of remote databases and provides an option for current on-premises SQL Server customers to migrate applications using three- and four-part names or linked server to SQL DB.</span><span class="sxs-lookup"><span data-stu-id="19142-110">This allows for read-only querying of remote databases and provides an option for current on-premises SQL Server customers to migrate applications using three- and four-part names or linked server to SQL DB.</span></span>

### <a name="available-on-standard-tier"></a><span data-ttu-id="19142-111">Available on standard tier</span><span class="sxs-lookup"><span data-stu-id="19142-111">Available on standard tier</span></span>

<span data-ttu-id="19142-112">Elastic query is supported on both Standard and Premium performance tier.</span><span class="sxs-lookup"><span data-stu-id="19142-112">Elastic query is supported on both Standard and Premium performance tier.</span></span> <span data-ttu-id="19142-113">See the section on Preview Limitations below on performance limitations for lower performance tiers.</span><span class="sxs-lookup"><span data-stu-id="19142-113">See the section on Preview Limitations below on performance limitations for lower performance tiers.</span></span>

### <a name="push-parameters-to-remote-databases"></a><span data-ttu-id="19142-114">Push parameters to remote databases</span><span class="sxs-lookup"><span data-stu-id="19142-114">Push parameters to remote databases</span></span>

<span data-ttu-id="19142-115">Elastic queries can now push SQL parameters to the remote databases for execution.</span><span class="sxs-lookup"><span data-stu-id="19142-115">Elastic queries can now push SQL parameters to the remote databases for execution.</span></span>

### <a name="stored-procedure-execution"></a><span data-ttu-id="19142-116">Stored procedure execution</span><span class="sxs-lookup"><span data-stu-id="19142-116">Stored procedure execution</span></span>

<span data-ttu-id="19142-117">Execute remote stored procedure calls or remote functions using [sp\_execute \_remote](https://msdn.microsoft.com/library/mt703714).</span><span class="sxs-lookup"><span data-stu-id="19142-117">Execute remote stored procedure calls or remote functions using [sp\_execute \_remote](https://msdn.microsoft.com/library/mt703714).</span></span>

### <a name="flexibility"></a><span data-ttu-id="19142-118">Flexibility</span><span class="sxs-lookup"><span data-stu-id="19142-118">Flexibility</span></span>

<span data-ttu-id="19142-119">External tables with elastic query can refer to remote tables with a different schema or table name.</span><span class="sxs-lookup"><span data-stu-id="19142-119">External tables with elastic query can refer to remote tables with a different schema or table name.</span></span>

## <a name="elastic-query-scenarios"></a><span data-ttu-id="19142-120">Elastic query scenarios</span><span class="sxs-lookup"><span data-stu-id="19142-120">Elastic query scenarios</span></span>

<span data-ttu-id="19142-121">The goal is to facilitate querying scenarios where multiple databases contribute rows into a single overall result.</span><span class="sxs-lookup"><span data-stu-id="19142-121">The goal is to facilitate querying scenarios where multiple databases contribute rows into a single overall result.</span></span> <span data-ttu-id="19142-122">The query can either be composed by the user or application directly, or indirectly through tools that are connected to the database.</span><span class="sxs-lookup"><span data-stu-id="19142-122">The query can either be composed by the user or application directly, or indirectly through tools that are connected to the database.</span></span> <span data-ttu-id="19142-123">This is especially useful when creating reports, using commercial BI or data integration tools, or any application that cannot be changed.</span><span class="sxs-lookup"><span data-stu-id="19142-123">This is especially useful when creating reports, using commercial BI or data integration tools, or any application that cannot be changed.</span></span> <span data-ttu-id="19142-124">With an elastic query, you can query across several databases using the familiar SQL Server connectivity experience in tools such as Excel, Power BI, Tableau, or Cognos.</span><span class="sxs-lookup"><span data-stu-id="19142-124">With an elastic query, you can query across several databases using the familiar SQL Server connectivity experience in tools such as Excel, Power BI, Tableau, or Cognos.</span></span>
<span data-ttu-id="19142-125">An elastic query allows easy access to an entire collection of databases through queries issued by SQL Server Management Studio or Visual Studio, and facilitates cross-database querying from Entity Framework or other ORM environments.</span><span class="sxs-lookup"><span data-stu-id="19142-125">An elastic query allows easy access to an entire collection of databases through queries issued by SQL Server Management Studio or Visual Studio, and facilitates cross-database querying from Entity Framework or other ORM environments.</span></span> <span data-ttu-id="19142-126">Figure 1 shows a scenario where an existing cloud application (which uses the [elastic database client library](sql-database-elastic-database-client-library.md)) builds on a scaled-out data tier, and an elastic query is used for cross-database reporting.</span><span class="sxs-lookup"><span data-stu-id="19142-126">Figure 1 shows a scenario where an existing cloud application (which uses the [elastic database client library](sql-database-elastic-database-client-library.md)) builds on a scaled-out data tier, and an elastic query is used for cross-database reporting.</span></span>

<span data-ttu-id="19142-127">**Figure 1** Elastic query used on scaled-out data tier</span><span class="sxs-lookup"><span data-stu-id="19142-127">**Figure 1** Elastic query used on scaled-out data tier</span></span>

![Elastic query used on scaled-out data tier][1]

<span data-ttu-id="19142-129">Customer scenarios for elastic query are characterized by the following topologies:</span><span class="sxs-lookup"><span data-stu-id="19142-129">Customer scenarios for elastic query are characterized by the following topologies:</span></span>

* <span data-ttu-id="19142-130">**Vertical partitioning - Cross-database queries** (Topology 1): The data is partitioned vertically between a number of databases in a data tier.</span><span class="sxs-lookup"><span data-stu-id="19142-130">**Vertical partitioning - Cross-database queries** (Topology 1): The data is partitioned vertically between a number of databases in a data tier.</span></span> <span data-ttu-id="19142-131">Typically, different sets of tables reside on different databases.</span><span class="sxs-lookup"><span data-stu-id="19142-131">Typically, different sets of tables reside on different databases.</span></span> <span data-ttu-id="19142-132">That means that the schema is different on different databases.</span><span class="sxs-lookup"><span data-stu-id="19142-132">That means that the schema is different on different databases.</span></span> <span data-ttu-id="19142-133">For instance, all tables for inventory are on one database while all accounting-related tables are on a second database.</span><span class="sxs-lookup"><span data-stu-id="19142-133">For instance, all tables for inventory are on one database while all accounting-related tables are on a second database.</span></span> <span data-ttu-id="19142-134">Common use cases with this topology require one to query across or to compile reports across tables in several databases.</span><span class="sxs-lookup"><span data-stu-id="19142-134">Common use cases with this topology require one to query across or to compile reports across tables in several databases.</span></span>
* <span data-ttu-id="19142-135">**Horizontal Partitioning - Sharding** (Topology 2): Data is partitioned horizontally to distribute rows across a scaled out data tier.</span><span class="sxs-lookup"><span data-stu-id="19142-135">**Horizontal Partitioning - Sharding** (Topology 2): Data is partitioned horizontally to distribute rows across a scaled out data tier.</span></span> <span data-ttu-id="19142-136">With this approach, the schema is identical on all participating databases.</span><span class="sxs-lookup"><span data-stu-id="19142-136">With this approach, the schema is identical on all participating databases.</span></span> <span data-ttu-id="19142-137">This approach is also called “sharding”.</span><span class="sxs-lookup"><span data-stu-id="19142-137">This approach is also called “sharding”.</span></span> <span data-ttu-id="19142-138">Sharding can be performed and managed using (1) the elastic database tools libraries or (2) self-sharding.</span><span class="sxs-lookup"><span data-stu-id="19142-138">Sharding can be performed and managed using (1) the elastic database tools libraries or (2) self-sharding.</span></span> <span data-ttu-id="19142-139">An elastic query is used to query or compile reports across many shards.</span><span class="sxs-lookup"><span data-stu-id="19142-139">An elastic query is used to query or compile reports across many shards.</span></span>

> [!NOTE]
> <span data-ttu-id="19142-140">Elastic query works best for reporting scenarios where most of the processing (filtering, aggregation) can be performed on the external source side.</span><span class="sxs-lookup"><span data-stu-id="19142-140">Elastic query works best for reporting scenarios where most of the processing (filtering, aggregation) can be performed on the external source side.</span></span> <span data-ttu-id="19142-141">It is not suitable for ETL operations where large amount of data is being transferred from remote database(s).</span><span class="sxs-lookup"><span data-stu-id="19142-141">It is not suitable for ETL operations where large amount of data is being transferred from remote database(s).</span></span> <span data-ttu-id="19142-142">For heavy reporting workloads or data warehousing scenarios with more complex queries, also consider using [Azure SQL Data Warehouse](https://azure.microsoft.com/services/sql-data-warehouse/).</span><span class="sxs-lookup"><span data-stu-id="19142-142">For heavy reporting workloads or data warehousing scenarios with more complex queries, also consider using [Azure SQL Data Warehouse](https://azure.microsoft.com/services/sql-data-warehouse/).</span></span>
>  

## <a name="vertical-partitioning---cross-database-queries"></a><span data-ttu-id="19142-143">Vertical partitioning - cross-database queries</span><span class="sxs-lookup"><span data-stu-id="19142-143">Vertical partitioning - cross-database queries</span></span>

<span data-ttu-id="19142-144">To begin coding, see [Getting started with cross-database query (vertical partitioning)](sql-database-elastic-query-getting-started-vertical.md).</span><span class="sxs-lookup"><span data-stu-id="19142-144">To begin coding, see [Getting started with cross-database query (vertical partitioning)](sql-database-elastic-query-getting-started-vertical.md).</span></span>

<span data-ttu-id="19142-145">An elastic query can be used to make data located in a SQL database available to other SQL databases.</span><span class="sxs-lookup"><span data-stu-id="19142-145">An elastic query can be used to make data located in a SQL database available to other SQL databases.</span></span> <span data-ttu-id="19142-146">This allows queries from one database to refer to tables in any other remote SQL database.</span><span class="sxs-lookup"><span data-stu-id="19142-146">This allows queries from one database to refer to tables in any other remote SQL database.</span></span> <span data-ttu-id="19142-147">The first step is to define an external data source for each remote database.</span><span class="sxs-lookup"><span data-stu-id="19142-147">The first step is to define an external data source for each remote database.</span></span> <span data-ttu-id="19142-148">The external data source is defined in the local database from which you want to gain access to tables located on the remote database.</span><span class="sxs-lookup"><span data-stu-id="19142-148">The external data source is defined in the local database from which you want to gain access to tables located on the remote database.</span></span> <span data-ttu-id="19142-149">No changes are necessary on the remote database.</span><span class="sxs-lookup"><span data-stu-id="19142-149">No changes are necessary on the remote database.</span></span> <span data-ttu-id="19142-150">For typical vertical partitioning scenarios where different databases have different schemas, elastic queries can be used to implement common use cases such as access to reference data and cross-database querying.</span><span class="sxs-lookup"><span data-stu-id="19142-150">For typical vertical partitioning scenarios where different databases have different schemas, elastic queries can be used to implement common use cases such as access to reference data and cross-database querying.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="19142-151">You must possess ALTER ANY EXTERNAL DATA SOURCE permission.</span><span class="sxs-lookup"><span data-stu-id="19142-151">You must possess ALTER ANY EXTERNAL DATA SOURCE permission.</span></span> <span data-ttu-id="19142-152">This permission is included with the ALTER DATABASE permission.</span><span class="sxs-lookup"><span data-stu-id="19142-152">This permission is included with the ALTER DATABASE permission.</span></span> <span data-ttu-id="19142-153">ALTER ANY EXTERNAL DATA SOURCE permissions are needed to refer to the underlying data source.</span><span class="sxs-lookup"><span data-stu-id="19142-153">ALTER ANY EXTERNAL DATA SOURCE permissions are needed to refer to the underlying data source.</span></span>
>

<span data-ttu-id="19142-154">**Reference data**: The topology is used for reference data management.</span><span class="sxs-lookup"><span data-stu-id="19142-154">**Reference data**: The topology is used for reference data management.</span></span> <span data-ttu-id="19142-155">In the figure below, two tables (T1 and T2) with reference data are kept on a dedicated database.</span><span class="sxs-lookup"><span data-stu-id="19142-155">In the figure below, two tables (T1 and T2) with reference data are kept on a dedicated database.</span></span> <span data-ttu-id="19142-156">Using an elastic query, you can now access tables T1 and T2 remotely from other databases, as shown in the figure.</span><span class="sxs-lookup"><span data-stu-id="19142-156">Using an elastic query, you can now access tables T1 and T2 remotely from other databases, as shown in the figure.</span></span> <span data-ttu-id="19142-157">Use topology 1 if reference tables are small or remote queries into reference table have selective predicates.</span><span class="sxs-lookup"><span data-stu-id="19142-157">Use topology 1 if reference tables are small or remote queries into reference table have selective predicates.</span></span>

<span data-ttu-id="19142-158">**Figure 2** Vertical partitioning - Using elastic query to query reference data</span><span class="sxs-lookup"><span data-stu-id="19142-158">**Figure 2** Vertical partitioning - Using elastic query to query reference data</span></span>

![Vertical partitioning - Using elastic query to query reference data][3]

<span data-ttu-id="19142-160">**Cross-database querying**: Elastic queries enable use cases that require querying across several SQL databases.</span><span class="sxs-lookup"><span data-stu-id="19142-160">**Cross-database querying**: Elastic queries enable use cases that require querying across several SQL databases.</span></span> <span data-ttu-id="19142-161">Figure 3 shows four different databases: CRM, Inventory, HR, and Products.</span><span class="sxs-lookup"><span data-stu-id="19142-161">Figure 3 shows four different databases: CRM, Inventory, HR, and Products.</span></span> <span data-ttu-id="19142-162">Queries performed in one of the databases also need access to one or all the other databases.</span><span class="sxs-lookup"><span data-stu-id="19142-162">Queries performed in one of the databases also need access to one or all the other databases.</span></span> <span data-ttu-id="19142-163">Using an elastic query, you can configure your database for this case by running a few simple DDL statements on each of the four databases.</span><span class="sxs-lookup"><span data-stu-id="19142-163">Using an elastic query, you can configure your database for this case by running a few simple DDL statements on each of the four databases.</span></span> <span data-ttu-id="19142-164">After this one-time configuration, access to a remote table is as simple as referring to a local table from your T-SQL queries or from your BI tools.</span><span class="sxs-lookup"><span data-stu-id="19142-164">After this one-time configuration, access to a remote table is as simple as referring to a local table from your T-SQL queries or from your BI tools.</span></span> <span data-ttu-id="19142-165">This approach is recommended if the remote queries do not return large results.</span><span class="sxs-lookup"><span data-stu-id="19142-165">This approach is recommended if the remote queries do not return large results.</span></span>

<span data-ttu-id="19142-166">**Figure 3** Vertical partitioning - Using elastic query to query across various databases</span><span class="sxs-lookup"><span data-stu-id="19142-166">**Figure 3** Vertical partitioning - Using elastic query to query across various databases</span></span>

![Vertical partitioning - Using elastic query to query across various databases][4]

<span data-ttu-id="19142-168">The following steps configure elastic database queries for vertical partitioning scenarios that require access to a table located on remote SQL databases with the same schema:</span><span class="sxs-lookup"><span data-stu-id="19142-168">The following steps configure elastic database queries for vertical partitioning scenarios that require access to a table located on remote SQL databases with the same schema:</span></span>

* <span data-ttu-id="19142-169">[CREATE MASTER KEY](https://msdn.microsoft.com/library/ms174382.aspx) mymasterkey</span><span class="sxs-lookup"><span data-stu-id="19142-169">[CREATE MASTER KEY](https://msdn.microsoft.com/library/ms174382.aspx) mymasterkey</span></span>
* <span data-ttu-id="19142-170">[CREATE DATABASE SCOPED CREDENTIAL](https://msdn.microsoft.com/library/mt270260.aspx) mycredential</span><span class="sxs-lookup"><span data-stu-id="19142-170">[CREATE DATABASE SCOPED CREDENTIAL](https://msdn.microsoft.com/library/mt270260.aspx) mycredential</span></span>
* <span data-ttu-id="19142-171">[CREATE/DROP EXTERNAL DATA SOURCE](https://msdn.microsoft.com/library/dn935022.aspx) mydatasource of type **RDBMS**</span><span class="sxs-lookup"><span data-stu-id="19142-171">[CREATE/DROP EXTERNAL DATA SOURCE](https://msdn.microsoft.com/library/dn935022.aspx) mydatasource of type **RDBMS**</span></span>
* <span data-ttu-id="19142-172">[CREATE/DROP EXTERNAL TABLE](https://msdn.microsoft.com/library/dn935021.aspx) mytable</span><span class="sxs-lookup"><span data-stu-id="19142-172">[CREATE/DROP EXTERNAL TABLE](https://msdn.microsoft.com/library/dn935021.aspx) mytable</span></span>

<span data-ttu-id="19142-173">After running the DDL statements, you can access the remote table “mytable” as though it were a local table.</span><span class="sxs-lookup"><span data-stu-id="19142-173">After running the DDL statements, you can access the remote table “mytable” as though it were a local table.</span></span> <span data-ttu-id="19142-174">Azure SQL Database automatically opens a connection to the remote database, processes your request on the remote database, and returns the results.</span><span class="sxs-lookup"><span data-stu-id="19142-174">Azure SQL Database automatically opens a connection to the remote database, processes your request on the remote database, and returns the results.</span></span>

## <a name="horizontal-partitioning---sharding"></a><span data-ttu-id="19142-175">Horizontal partitioning - sharding</span><span class="sxs-lookup"><span data-stu-id="19142-175">Horizontal partitioning - sharding</span></span>

<span data-ttu-id="19142-176">Using elastic query to perform reporting tasks over a sharded, that is, horizontally partitioned, data tier requires an [elastic database shard map](sql-database-elastic-scale-shard-map-management.md) to represent the databases of the data tier.</span><span class="sxs-lookup"><span data-stu-id="19142-176">Using elastic query to perform reporting tasks over a sharded, that is, horizontally partitioned, data tier requires an [elastic database shard map](sql-database-elastic-scale-shard-map-management.md) to represent the databases of the data tier.</span></span> <span data-ttu-id="19142-177">Typically, only a single shard map is used in this scenario and a dedicated database with elastic query capabilities (head node) serves as the entry point for reporting queries.</span><span class="sxs-lookup"><span data-stu-id="19142-177">Typically, only a single shard map is used in this scenario and a dedicated database with elastic query capabilities (head node) serves as the entry point for reporting queries.</span></span> <span data-ttu-id="19142-178">Only this dedicated database needs access to the shard map.</span><span class="sxs-lookup"><span data-stu-id="19142-178">Only this dedicated database needs access to the shard map.</span></span> <span data-ttu-id="19142-179">Figure 4 illustrates this topology and its configuration with the elastic query database and shard map.</span><span class="sxs-lookup"><span data-stu-id="19142-179">Figure 4 illustrates this topology and its configuration with the elastic query database and shard map.</span></span> <span data-ttu-id="19142-180">The databases in the data tier can be of any Azure SQL Database version or edition.</span><span class="sxs-lookup"><span data-stu-id="19142-180">The databases in the data tier can be of any Azure SQL Database version or edition.</span></span> <span data-ttu-id="19142-181">For more information about the elastic database client library and creating shard maps, see [Shard map management](sql-database-elastic-scale-shard-map-management.md).</span><span class="sxs-lookup"><span data-stu-id="19142-181">For more information about the elastic database client library and creating shard maps, see [Shard map management](sql-database-elastic-scale-shard-map-management.md).</span></span>

<span data-ttu-id="19142-182">**Figure 4** Horizontal partitioning - Using elastic query for reporting over sharded data tiers</span><span class="sxs-lookup"><span data-stu-id="19142-182">**Figure 4** Horizontal partitioning - Using elastic query for reporting over sharded data tiers</span></span>

![Horizontal partitioning - Using elastic query for reporting over sharded data tiers][5]

> [!NOTE]
> <span data-ttu-id="19142-184">Elastic Query Database (head node) can be separate database, or it can be the same database that hosts the shard map.</span><span class="sxs-lookup"><span data-stu-id="19142-184">Elastic Query Database (head node) can be separate database, or it can be the same database that hosts the shard map.</span></span>
> <span data-ttu-id="19142-185">Whatever configuration you choose, make sure that service and performance tier of that database is high enough to handle the expected  amount of login/query requests.</span><span class="sxs-lookup"><span data-stu-id="19142-185">Whatever configuration you choose, make sure that service and performance tier of that database is high enough to handle the expected  amount of login/query requests.</span></span>

<span data-ttu-id="19142-186">The following steps configure elastic database queries for horizontal partitioning scenarios that require access to a set of tables located on (typically) several remote SQL databases:</span><span class="sxs-lookup"><span data-stu-id="19142-186">The following steps configure elastic database queries for horizontal partitioning scenarios that require access to a set of tables located on (typically) several remote SQL databases:</span></span>

* <span data-ttu-id="19142-187">[CREATE MASTER KEY](https://msdn.microsoft.com/library/ms174382.aspx) mymasterkey</span><span class="sxs-lookup"><span data-stu-id="19142-187">[CREATE MASTER KEY](https://msdn.microsoft.com/library/ms174382.aspx) mymasterkey</span></span>
* <span data-ttu-id="19142-188">[CREATE DATABASE SCOPED CREDENTIAL](https://msdn.microsoft.com/library/mt270260.aspx) mycredential</span><span class="sxs-lookup"><span data-stu-id="19142-188">[CREATE DATABASE SCOPED CREDENTIAL](https://msdn.microsoft.com/library/mt270260.aspx) mycredential</span></span>
* <span data-ttu-id="19142-189">Create a [shard map](sql-database-elastic-scale-shard-map-management.md) representing your data tier using the elastic database client library.</span><span class="sxs-lookup"><span data-stu-id="19142-189">Create a [shard map](sql-database-elastic-scale-shard-map-management.md) representing your data tier using the elastic database client library.</span></span>
* <span data-ttu-id="19142-190">[CREATE/DROP EXTERNAL DATA SOURCE](https://msdn.microsoft.com/library/dn935022.aspx) mydatasource of type **SHARD_MAP_MANAGER**</span><span class="sxs-lookup"><span data-stu-id="19142-190">[CREATE/DROP EXTERNAL DATA SOURCE](https://msdn.microsoft.com/library/dn935022.aspx) mydatasource of type **SHARD_MAP_MANAGER**</span></span>
* <span data-ttu-id="19142-191">[CREATE/DROP EXTERNAL TABLE](https://msdn.microsoft.com/library/dn935021.aspx) mytable</span><span class="sxs-lookup"><span data-stu-id="19142-191">[CREATE/DROP EXTERNAL TABLE](https://msdn.microsoft.com/library/dn935021.aspx) mytable</span></span>

<span data-ttu-id="19142-192">Once you have performed these steps, you can access the horizontally partitioned table “mytable” as though it were a local table.</span><span class="sxs-lookup"><span data-stu-id="19142-192">Once you have performed these steps, you can access the horizontally partitioned table “mytable” as though it were a local table.</span></span> <span data-ttu-id="19142-193">Azure SQL Database automatically opens multiple parallel connections to the remote databases where the tables are physically stored, processes the requests on the remote databases, and returns the results.</span><span class="sxs-lookup"><span data-stu-id="19142-193">Azure SQL Database automatically opens multiple parallel connections to the remote databases where the tables are physically stored, processes the requests on the remote databases, and returns the results.</span></span>
<span data-ttu-id="19142-194">More information on the steps required for the horizontal partitioning scenario can be found in [elastic query for horizontal partitioning](sql-database-elastic-query-horizontal-partitioning.md).</span><span class="sxs-lookup"><span data-stu-id="19142-194">More information on the steps required for the horizontal partitioning scenario can be found in [elastic query for horizontal partitioning](sql-database-elastic-query-horizontal-partitioning.md).</span></span>

<span data-ttu-id="19142-195">To begin coding, see [Getting started with elastic query for horizontal partitioning (sharding)](sql-database-elastic-query-getting-started.md).</span><span class="sxs-lookup"><span data-stu-id="19142-195">To begin coding, see [Getting started with elastic query for horizontal partitioning (sharding)](sql-database-elastic-query-getting-started.md).</span></span>

## <a name="t-sql-querying"></a><span data-ttu-id="19142-196">T-SQL querying</span><span class="sxs-lookup"><span data-stu-id="19142-196">T-SQL querying</span></span>

<span data-ttu-id="19142-197">Once you have defined your external data sources and your external tables, you can use regular SQL Server connection strings to connect to the databases where you defined your external tables.</span><span class="sxs-lookup"><span data-stu-id="19142-197">Once you have defined your external data sources and your external tables, you can use regular SQL Server connection strings to connect to the databases where you defined your external tables.</span></span> <span data-ttu-id="19142-198">You can then run T-SQL statements over your external tables on that connection with the limitations outlined below.</span><span class="sxs-lookup"><span data-stu-id="19142-198">You can then run T-SQL statements over your external tables on that connection with the limitations outlined below.</span></span> <span data-ttu-id="19142-199">You can find more information and examples of T-SQL queries in the documentation topics for [horizontal partitioning](sql-database-elastic-query-horizontal-partitioning.md) and [vertical partitioning](sql-database-elastic-query-vertical-partitioning.md).</span><span class="sxs-lookup"><span data-stu-id="19142-199">You can find more information and examples of T-SQL queries in the documentation topics for [horizontal partitioning](sql-database-elastic-query-horizontal-partitioning.md) and [vertical partitioning](sql-database-elastic-query-vertical-partitioning.md).</span></span>

## <a name="connectivity-for-tools"></a><span data-ttu-id="19142-200">Connectivity for tools</span><span class="sxs-lookup"><span data-stu-id="19142-200">Connectivity for tools</span></span>

<span data-ttu-id="19142-201">You can use regular SQL Server connection strings to connect your applications and BI or data integration tools to databases that have external tables.</span><span class="sxs-lookup"><span data-stu-id="19142-201">You can use regular SQL Server connection strings to connect your applications and BI or data integration tools to databases that have external tables.</span></span> <span data-ttu-id="19142-202">Make sure that SQL Server is supported as a data source for your tool.</span><span class="sxs-lookup"><span data-stu-id="19142-202">Make sure that SQL Server is supported as a data source for your tool.</span></span> <span data-ttu-id="19142-203">Once connected, refer to the elastic query database and the external tables in that database just like you would do with any other SQL Server database that you connect to with your tool.</span><span class="sxs-lookup"><span data-stu-id="19142-203">Once connected, refer to the elastic query database and the external tables in that database just like you would do with any other SQL Server database that you connect to with your tool.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="19142-204">Authentication using Azure Active Directory with elastic queries is not currently supported.</span><span class="sxs-lookup"><span data-stu-id="19142-204">Authentication using Azure Active Directory with elastic queries is not currently supported.</span></span>

## <a name="cost"></a><span data-ttu-id="19142-205">Cost</span><span class="sxs-lookup"><span data-stu-id="19142-205">Cost</span></span>

<span data-ttu-id="19142-206">Elastic query is included into the cost of Azure SQL Database databases.</span><span class="sxs-lookup"><span data-stu-id="19142-206">Elastic query is included into the cost of Azure SQL Database databases.</span></span> <span data-ttu-id="19142-207">Note that topologies where your remote databases are in a different data center than the elastic query endpoint are supported, but data egress from remote databases is charged regularly [Azure rates](https://azure.microsoft.com/pricing/details/data-transfers/).</span><span class="sxs-lookup"><span data-stu-id="19142-207">Note that topologies where your remote databases are in a different data center than the elastic query endpoint are supported, but data egress from remote databases is charged regularly [Azure rates](https://azure.microsoft.com/pricing/details/data-transfers/).</span></span>

## <a name="preview-limitations"></a><span data-ttu-id="19142-208">Preview limitations</span><span class="sxs-lookup"><span data-stu-id="19142-208">Preview limitations</span></span>

* <span data-ttu-id="19142-209">Running your first elastic query can take up to a few minutes on the Standard performance tier.</span><span class="sxs-lookup"><span data-stu-id="19142-209">Running your first elastic query can take up to a few minutes on the Standard performance tier.</span></span> <span data-ttu-id="19142-210">This time is necessary to load the elastic query functionality; loading performance improves with higher performance tiers.</span><span class="sxs-lookup"><span data-stu-id="19142-210">This time is necessary to load the elastic query functionality; loading performance improves with higher performance tiers.</span></span>
* <span data-ttu-id="19142-211">Scripting of external data sources or external tables from SSMS or SSDT is not yet supported.</span><span class="sxs-lookup"><span data-stu-id="19142-211">Scripting of external data sources or external tables from SSMS or SSDT is not yet supported.</span></span>
* <span data-ttu-id="19142-212">Import/Export for SQL DB does not yet support external data sources and external tables.</span><span class="sxs-lookup"><span data-stu-id="19142-212">Import/Export for SQL DB does not yet support external data sources and external tables.</span></span> <span data-ttu-id="19142-213">If you need to use Import/Export, drop these objects before exporting and then re-create them after importing.</span><span class="sxs-lookup"><span data-stu-id="19142-213">If you need to use Import/Export, drop these objects before exporting and then re-create them after importing.</span></span>
* <span data-ttu-id="19142-214">Elastic query currently only supports read-only access to external tables.</span><span class="sxs-lookup"><span data-stu-id="19142-214">Elastic query currently only supports read-only access to external tables.</span></span> <span data-ttu-id="19142-215">You can, however, use full T-SQL functionality on the database where the external table is defined.</span><span class="sxs-lookup"><span data-stu-id="19142-215">You can, however, use full T-SQL functionality on the database where the external table is defined.</span></span> <span data-ttu-id="19142-216">This can be useful to, e.g., persist temporary results using, for example, SELECT <column_list> INTO <local_table>, or to define stored procedures on the elastic query database that refer to external tables.</span><span class="sxs-lookup"><span data-stu-id="19142-216">This can be useful to, e.g., persist temporary results using, for example, SELECT <column_list> INTO <local_table>, or to define stored procedures on the elastic query database that refer to external tables.</span></span>
* <span data-ttu-id="19142-217">Except for nvarchar(max), LOB types are not supported in external table definitions.</span><span class="sxs-lookup"><span data-stu-id="19142-217">Except for nvarchar(max), LOB types are not supported in external table definitions.</span></span> <span data-ttu-id="19142-218">As a workaround, you can create a view on the remote database that casts the LOB type into nvarchar(max), define your external table over the view instead of the base table and then cast it back into the original LOB type in your queries.</span><span class="sxs-lookup"><span data-stu-id="19142-218">As a workaround, you can create a view on the remote database that casts the LOB type into nvarchar(max), define your external table over the view instead of the base table and then cast it back into the original LOB type in your queries.</span></span>
* <span data-ttu-id="19142-219">Columns of nvarchar(max) data type in result set disable advanced batching technics used in Elastic Query implementation and may affect performance of query for an order of magnitude, or even two orders of magnitude in non-canonical use cases where large amount of non-aggregated data is being transferred as a result of query.</span><span class="sxs-lookup"><span data-stu-id="19142-219">Columns of nvarchar(max) data type in result set disable advanced batching technics used in Elastic Query implementation and may affect performance of query for an order of magnitude, or even two orders of magnitude in non-canonical use cases where large amount of non-aggregated data is being transferred as a result of query.</span></span>
* <span data-ttu-id="19142-220">Column statistics over external tables are currently not supported.</span><span class="sxs-lookup"><span data-stu-id="19142-220">Column statistics over external tables are currently not supported.</span></span> <span data-ttu-id="19142-221">Table statistics are supported, but need to be created manually.</span><span class="sxs-lookup"><span data-stu-id="19142-221">Table statistics are supported, but need to be created manually.</span></span>

## <a name="feedback"></a><span data-ttu-id="19142-222">Feedback</span><span class="sxs-lookup"><span data-stu-id="19142-222">Feedback</span></span>

<span data-ttu-id="19142-223">Share feedback on your experience with elastic queries with us below, on the MSDN forums, or on Stackoverflow.</span><span class="sxs-lookup"><span data-stu-id="19142-223">Share feedback on your experience with elastic queries with us below, on the MSDN forums, or on Stackoverflow.</span></span> <span data-ttu-id="19142-224">We are interested in all kinds of feedback about the service (defects, rough edges, feature gaps).</span><span class="sxs-lookup"><span data-stu-id="19142-224">We are interested in all kinds of feedback about the service (defects, rough edges, feature gaps).</span></span>

## <a name="next-steps"></a><span data-ttu-id="19142-225">Next steps</span><span class="sxs-lookup"><span data-stu-id="19142-225">Next steps</span></span>

* <span data-ttu-id="19142-226">For a vertical partitioning tutorial, see [Getting started with cross-database query (vertical partitioning)](sql-database-elastic-query-getting-started-vertical.md).</span><span class="sxs-lookup"><span data-stu-id="19142-226">For a vertical partitioning tutorial, see [Getting started with cross-database query (vertical partitioning)](sql-database-elastic-query-getting-started-vertical.md).</span></span>
* <span data-ttu-id="19142-227">For syntax and sample queries for vertically partitioned data, see [Querying vertically partitioned data)](sql-database-elastic-query-vertical-partitioning.md)</span><span class="sxs-lookup"><span data-stu-id="19142-227">For syntax and sample queries for vertically partitioned data, see [Querying vertically partitioned data)](sql-database-elastic-query-vertical-partitioning.md)</span></span>
* <span data-ttu-id="19142-228">For a horizontal partitioning (sharding) tutorial, see [Getting started with elastic query for horizontal partitioning (sharding)](sql-database-elastic-query-getting-started.md).</span><span class="sxs-lookup"><span data-stu-id="19142-228">For a horizontal partitioning (sharding) tutorial, see [Getting started with elastic query for horizontal partitioning (sharding)](sql-database-elastic-query-getting-started.md).</span></span>
* <span data-ttu-id="19142-229">For syntax and sample queries for horizontally partitioned data, see [Querying horizontally partitioned data)](sql-database-elastic-query-horizontal-partitioning.md)</span><span class="sxs-lookup"><span data-stu-id="19142-229">For syntax and sample queries for horizontally partitioned data, see [Querying horizontally partitioned data)](sql-database-elastic-query-horizontal-partitioning.md)</span></span>
* <span data-ttu-id="19142-230">See [sp\_execute \_remote](https://msdn.microsoft.com/library/mt703714) for a stored procedure that executes a Transact-SQL statement on a single remote Azure SQL Database or set of databases serving as shards in a horizontal partitioning scheme.</span><span class="sxs-lookup"><span data-stu-id="19142-230">See [sp\_execute \_remote](https://msdn.microsoft.com/library/mt703714) for a stored procedure that executes a Transact-SQL statement on a single remote Azure SQL Database or set of databases serving as shards in a horizontal partitioning scheme.</span></span>

<!--Image references-->
[1]: ./media/sql-database-elastic-query-overview/overview.png
[2]: ./media/sql-database-elastic-query-overview/topology1.png
[3]: ./media/sql-database-elastic-query-overview/vertpartrrefdata.png
[4]: ./media/sql-database-elastic-query-overview/verticalpartitioning.png
[5]: ./media/sql-database-elastic-query-overview/horizontalpartitioning.png

<!--anchors-->
