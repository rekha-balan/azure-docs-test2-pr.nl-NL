---
title: Exclude disks from protection by using Azure Site Recovery | Microsoft Docs
description: Describes why and how to exclude VM disks from replication for scenarios of VMware to Azure and Hyper-V to Azure.
services: site-recovery
documentationcenter: ''
author: nsoneji
manager: garavd
editor: ''
ms.assetid: ''
ms.service: site-recovery
ms.workload: backup-recovery
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: hero-article
ms.date: 1/24/2017
ms.author: nisoneji
ms.openlocfilehash: acbcef4a5bc44374ac3c4a400a8f6f38b8cfae1e
ms.sourcegitcommit: 5b9d839c0c0a94b293fdafe1d6e5429506c07e05
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 08/02/2018
ms.locfileid: "44549572"
---
# <a name="exclude-disks-from-replication"></a><span data-ttu-id="bfa93-103">Exclude disks from replication</span><span class="sxs-lookup"><span data-stu-id="bfa93-103">Exclude disks from replication</span></span>
<span data-ttu-id="bfa93-104">This article describes how to exclude disks from replication.</span><span class="sxs-lookup"><span data-stu-id="bfa93-104">This article describes how to exclude disks from replication.</span></span> <span data-ttu-id="bfa93-105">This exclusion can optimize the consumed replication bandwidth or optimize the target-side resources that such disks utilize.</span><span class="sxs-lookup"><span data-stu-id="bfa93-105">This exclusion can optimize the consumed replication bandwidth or optimize the target-side resources that such disks utilize.</span></span> <span data-ttu-id="bfa93-106">The feature is supported for scenarios of VMware to Azure and Hyper-V to Azure.</span><span class="sxs-lookup"><span data-stu-id="bfa93-106">The feature is supported for scenarios of VMware to Azure and Hyper-V to Azure.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="bfa93-107">Prerequisites</span><span class="sxs-lookup"><span data-stu-id="bfa93-107">Prerequisites</span></span>

<span data-ttu-id="bfa93-108">By default, all disks on a machine are replicated.</span><span class="sxs-lookup"><span data-stu-id="bfa93-108">By default, all disks on a machine are replicated.</span></span> <span data-ttu-id="bfa93-109">To exclude a disk from replication, you must manually install the Mobility service on the machine before you enable replication if you are replicating from VMware to Azure.</span><span class="sxs-lookup"><span data-stu-id="bfa93-109">To exclude a disk from replication, you must manually install the Mobility service on the machine before you enable replication if you are replicating from VMware to Azure.</span></span>


## <a name="why-exclude-disks-from-replication"></a><span data-ttu-id="bfa93-110">Why exclude disks from replication?</span><span class="sxs-lookup"><span data-stu-id="bfa93-110">Why exclude disks from replication?</span></span>
<span data-ttu-id="bfa93-111">Excluding disks from replication is often necessary because:</span><span class="sxs-lookup"><span data-stu-id="bfa93-111">Excluding disks from replication is often necessary because:</span></span>

- <span data-ttu-id="bfa93-112">The data that's churned on the excluded disk is not important or doesn’t need to be replicated.</span><span class="sxs-lookup"><span data-stu-id="bfa93-112">The data that's churned on the excluded disk is not important or doesn’t need to be replicated.</span></span>

- <span data-ttu-id="bfa93-113">You want to save storage and network resources by not replicating this churn.</span><span class="sxs-lookup"><span data-stu-id="bfa93-113">You want to save storage and network resources by not replicating this churn.</span></span>

## <a name="what-are-the-typical-scenarios"></a><span data-ttu-id="bfa93-114">What are the typical scenarios?</span><span class="sxs-lookup"><span data-stu-id="bfa93-114">What are the typical scenarios?</span></span>
<span data-ttu-id="bfa93-115">You can identify specific examples of data churn that are great candidates for exclusion.</span><span class="sxs-lookup"><span data-stu-id="bfa93-115">You can identify specific examples of data churn that are great candidates for exclusion.</span></span> <span data-ttu-id="bfa93-116">Examples might include writes to a paging file (pagefile.sys) and writes to the tempdb file of Microsoft SQL Server.</span><span class="sxs-lookup"><span data-stu-id="bfa93-116">Examples might include writes to a paging file (pagefile.sys) and writes to the tempdb file of Microsoft SQL Server.</span></span> <span data-ttu-id="bfa93-117">Depending on the workload and the storage subsystem, the paging file can register a significant amount of churn.</span><span class="sxs-lookup"><span data-stu-id="bfa93-117">Depending on the workload and the storage subsystem, the paging file can register a significant amount of churn.</span></span> <span data-ttu-id="bfa93-118">However, replicating this data from the primary site to Azure would be resource intensive.</span><span class="sxs-lookup"><span data-stu-id="bfa93-118">However, replicating this data from the primary site to Azure would be resource intensive.</span></span> <span data-ttu-id="bfa93-119">Thus, you can use the following steps to optimize replication of a virtual machine with a single virtual disk that has both the operating system and the paging file:</span><span class="sxs-lookup"><span data-stu-id="bfa93-119">Thus, you can use the following steps to optimize replication of a virtual machine with a single virtual disk that has both the operating system and the paging file:</span></span>

1. <span data-ttu-id="bfa93-120">Split the single virtual disk into two virtual disks.</span><span class="sxs-lookup"><span data-stu-id="bfa93-120">Split the single virtual disk into two virtual disks.</span></span> <span data-ttu-id="bfa93-121">One virtual disk has the operating system, and the other has the paging file.</span><span class="sxs-lookup"><span data-stu-id="bfa93-121">One virtual disk has the operating system, and the other has the paging file.</span></span>
2. <span data-ttu-id="bfa93-122">Exclude the paging file disk from replication.</span><span class="sxs-lookup"><span data-stu-id="bfa93-122">Exclude the paging file disk from replication.</span></span>

<span data-ttu-id="bfa93-123">Similarly, you can use the following steps to optimize a disk that has both the Microsoft SQL Server tempdb fie and the system database file:</span><span class="sxs-lookup"><span data-stu-id="bfa93-123">Similarly, you can use the following steps to optimize a disk that has both the Microsoft SQL Server tempdb fie and the system database file:</span></span>

1. <span data-ttu-id="bfa93-124">Keep the system database and tempdb on two different disks.</span><span class="sxs-lookup"><span data-stu-id="bfa93-124">Keep the system database and tempdb on two different disks.</span></span>
2. <span data-ttu-id="bfa93-125">Exclude the tempdb disk from replication.</span><span class="sxs-lookup"><span data-stu-id="bfa93-125">Exclude the tempdb disk from replication.</span></span>

## <a name="how-to-exclude-disks-from-replication"></a><span data-ttu-id="bfa93-126">How to exclude disks from replication?</span><span class="sxs-lookup"><span data-stu-id="bfa93-126">How to exclude disks from replication?</span></span>

### <a name="vmware-to-azure"></a><span data-ttu-id="bfa93-127">VMware to Azure</span><span class="sxs-lookup"><span data-stu-id="bfa93-127">VMware to Azure</span></span>
<span data-ttu-id="bfa93-128">Follow the [Enable replication](site-recovery-vmware-to-azure.md#enable-replication) workflow to protect a virtual machine from the Azure Site Recovery portal.</span><span class="sxs-lookup"><span data-stu-id="bfa93-128">Follow the [Enable replication](site-recovery-vmware-to-azure.md#enable-replication) workflow to protect a virtual machine from the Azure Site Recovery portal.</span></span> <span data-ttu-id="bfa93-129">In the fourth step of the workflow, use the **DISK TO REPLICATE** column to exclude disks from replication.</span><span class="sxs-lookup"><span data-stu-id="bfa93-129">In the fourth step of the workflow, use the **DISK TO REPLICATE** column to exclude disks from replication.</span></span> <span data-ttu-id="bfa93-130">By default, all disks are selected for replication.</span><span class="sxs-lookup"><span data-stu-id="bfa93-130">By default, all disks are selected for replication.</span></span> <span data-ttu-id="bfa93-131">Clear the check box of disks that you want to exclude from replication, and then complete the steps to enable replication.</span><span class="sxs-lookup"><span data-stu-id="bfa93-131">Clear the check box of disks that you want to exclude from replication, and then complete the steps to enable replication.</span></span>

![Exclude disks from replication and enable replication for VMware to Azure failback](https://docstestmedia1.blob.core.windows.net/azure-media/articles/site-recovery/media/site-recovery-exclude-disk/V2A-Enable-replication-Exclude-disk1.png)


>[!NOTE]
>
> * <span data-ttu-id="bfa93-133">You can exclude only disks that already have the Mobility service installed.</span><span class="sxs-lookup"><span data-stu-id="bfa93-133">You can exclude only disks that already have the Mobility service installed.</span></span> <span data-ttu-id="bfa93-134">You need to manually install the Mobility service, because the Mobility service is only installed by using the push mechanism after replication is enabled.</span><span class="sxs-lookup"><span data-stu-id="bfa93-134">You need to manually install the Mobility service, because the Mobility service is only installed by using the push mechanism after replication is enabled.</span></span>
> * <span data-ttu-id="bfa93-135">Only basic disks can be excluded from replication.</span><span class="sxs-lookup"><span data-stu-id="bfa93-135">Only basic disks can be excluded from replication.</span></span> <span data-ttu-id="bfa93-136">You can't exclude operating system or dynamic disks.</span><span class="sxs-lookup"><span data-stu-id="bfa93-136">You can't exclude operating system or dynamic disks.</span></span>
> * <span data-ttu-id="bfa93-137">After you enable replication, you can't add or remove disks for replication.</span><span class="sxs-lookup"><span data-stu-id="bfa93-137">After you enable replication, you can't add or remove disks for replication.</span></span> <span data-ttu-id="bfa93-138">If you want to add or exclude a disk, you need to disable protection for the machine and then enable it again.</span><span class="sxs-lookup"><span data-stu-id="bfa93-138">If you want to add or exclude a disk, you need to disable protection for the machine and then enable it again.</span></span>
> * <span data-ttu-id="bfa93-139">If you exclude a disk that's needed for an application to operate, after failover to Azure, you’ll need to create the disk manually in Azure so that the replicated application can run.</span><span class="sxs-lookup"><span data-stu-id="bfa93-139">If you exclude a disk that's needed for an application to operate, after failover to Azure, you’ll need to create the disk manually in Azure so that the replicated application can run.</span></span> <span data-ttu-id="bfa93-140">Alternatively, you can integrate Azure automation into a recovery plan to create the disk during failover of the machine.</span><span class="sxs-lookup"><span data-stu-id="bfa93-140">Alternatively, you can integrate Azure automation into a recovery plan to create the disk during failover of the machine.</span></span>
> * <span data-ttu-id="bfa93-141">Window virtual machine: Disks that you create manually in Azure are not failed back.</span><span class="sxs-lookup"><span data-stu-id="bfa93-141">Window virtual machine: Disks that you create manually in Azure are not failed back.</span></span> <span data-ttu-id="bfa93-142">For example, if you fail over three disks and create two disk directly in Azure Virtual Machines, only three disks that were failed over are failed back.</span><span class="sxs-lookup"><span data-stu-id="bfa93-142">For example, if you fail over three disks and create two disk directly in Azure Virtual Machines, only three disks that were failed over are failed back.</span></span> <span data-ttu-id="bfa93-143">You can't include disks that you created manually in failback or in reprotect from on-premises to Azure.</span><span class="sxs-lookup"><span data-stu-id="bfa93-143">You can't include disks that you created manually in failback or in reprotect from on-premises to Azure.</span></span>
> * <span data-ttu-id="bfa93-144">Linux virtual machine: Disks that you create manually in Azure are failed back.</span><span class="sxs-lookup"><span data-stu-id="bfa93-144">Linux virtual machine: Disks that you create manually in Azure are failed back.</span></span> <span data-ttu-id="bfa93-145">For example, if you fail over three disks and create two disks directly in Azure Virtual Machines, all five will be failed back.</span><span class="sxs-lookup"><span data-stu-id="bfa93-145">For example, if you fail over three disks and create two disks directly in Azure Virtual Machines, all five will be failed back.</span></span> <span data-ttu-id="bfa93-146">You can't exclude disks that were created manually from failback.</span><span class="sxs-lookup"><span data-stu-id="bfa93-146">You can't exclude disks that were created manually from failback.</span></span>
>

### <a name="hyper-v-to-azure"></a><span data-ttu-id="bfa93-147">Hyper-V to Azure</span><span class="sxs-lookup"><span data-stu-id="bfa93-147">Hyper-V to Azure</span></span>
<span data-ttu-id="bfa93-148">Follow the [Enable replication](site-recovery-hyper-v-site-to-azure.md#enable-replication) workflow to protect a virtual machine from the Azure Site Recovery portal.</span><span class="sxs-lookup"><span data-stu-id="bfa93-148">Follow the [Enable replication](site-recovery-hyper-v-site-to-azure.md#enable-replication) workflow to protect a virtual machine from the Azure Site Recovery portal.</span></span> <span data-ttu-id="bfa93-149">In the fourth step of the workflow, use the **DISK TO REPLICATE** column to exclude disks from replication.</span><span class="sxs-lookup"><span data-stu-id="bfa93-149">In the fourth step of the workflow, use the **DISK TO REPLICATE** column to exclude disks from replication.</span></span> <span data-ttu-id="bfa93-150">By default, all disks are selected for replication.</span><span class="sxs-lookup"><span data-stu-id="bfa93-150">By default, all disks are selected for replication.</span></span> <span data-ttu-id="bfa93-151">Clear the check box of disks that you want to exclude from replication, and then complete the steps to enable replication.</span><span class="sxs-lookup"><span data-stu-id="bfa93-151">Clear the check box of disks that you want to exclude from replication, and then complete the steps to enable replication.</span></span>

![Exclude disks from replication and enable replication for Hyper-V to Azure failback](https://docstestmedia1.blob.core.windows.net/azure-media/articles/site-recovery/media/site-recovery-vmm-to-azure/enable-replication6-with-exclude-disk.png)

>[!NOTE]
>
> * <span data-ttu-id="bfa93-153">You can exclude only basic disks from replication.</span><span class="sxs-lookup"><span data-stu-id="bfa93-153">You can exclude only basic disks from replication.</span></span> <span data-ttu-id="bfa93-154">You can't exclude operating system disks.</span><span class="sxs-lookup"><span data-stu-id="bfa93-154">You can't exclude operating system disks.</span></span> <span data-ttu-id="bfa93-155">We recommend that you do not exclude dynamic disks.</span><span class="sxs-lookup"><span data-stu-id="bfa93-155">We recommend that you do not exclude dynamic disks.</span></span> <span data-ttu-id="bfa93-156">Azure Site Recovery cannot identify which virtual hard disk (VHD) is basic or dynamic in the guest virtual machine.</span><span class="sxs-lookup"><span data-stu-id="bfa93-156">Azure Site Recovery cannot identify which virtual hard disk (VHD) is basic or dynamic in the guest virtual machine.</span></span>  <span data-ttu-id="bfa93-157">If all dependent dynamic volume disks are not excluded, the protected dynamic disk becomes a failed disk on a failover virtual machine, and the data on that disk is not accessible.</span><span class="sxs-lookup"><span data-stu-id="bfa93-157">If all dependent dynamic volume disks are not excluded, the protected dynamic disk becomes a failed disk on a failover virtual machine, and the data on that disk is not accessible.</span></span>
> * <span data-ttu-id="bfa93-158">After you enable replication, you can't add or remove disks for replication.</span><span class="sxs-lookup"><span data-stu-id="bfa93-158">After you enable replication, you can't add or remove disks for replication.</span></span> <span data-ttu-id="bfa93-159">If you want to add or exclude a disk, you need to disable protection for the virtual machine and then enable it again.</span><span class="sxs-lookup"><span data-stu-id="bfa93-159">If you want to add or exclude a disk, you need to disable protection for the virtual machine and then enable it again.</span></span>
> * <span data-ttu-id="bfa93-160">If you exclude a disk that's needed for an application to operate, after failover to Azure you’ll need to create the disk manually in Azure so that the replicated application can run.</span><span class="sxs-lookup"><span data-stu-id="bfa93-160">If you exclude a disk that's needed for an application to operate, after failover to Azure you’ll need to create the disk manually in Azure so that the replicated application can run.</span></span> <span data-ttu-id="bfa93-161">Alternatively, you can integrate Azure automation into a recovery plan to create the disk during failover of the machine.</span><span class="sxs-lookup"><span data-stu-id="bfa93-161">Alternatively, you can integrate Azure automation into a recovery plan to create the disk during failover of the machine.</span></span>
> * <span data-ttu-id="bfa93-162">Disks that you create manually in Azure will not be failed back.</span><span class="sxs-lookup"><span data-stu-id="bfa93-162">Disks that you create manually in Azure will not be failed back.</span></span> <span data-ttu-id="bfa93-163">For example, if you fail over three disks and create two disks directly in Azure Virtual Machines, only three disks that were failed over will be failed back from Azure to Hyper-V.</span><span class="sxs-lookup"><span data-stu-id="bfa93-163">For example, if you fail over three disks and create two disks directly in Azure Virtual Machines, only three disks that were failed over will be failed back from Azure to Hyper-V.</span></span> <span data-ttu-id="bfa93-164">You can't include disks that were created manually in failback or in reverse replication from Hyper-V to Azure.</span><span class="sxs-lookup"><span data-stu-id="bfa93-164">You can't include disks that were created manually in failback or in reverse replication from Hyper-V to Azure.</span></span>



## <a name="end-to-end-scenarios-of-exclude-disks"></a><span data-ttu-id="bfa93-165">End-to-end scenarios of exclude disks</span><span class="sxs-lookup"><span data-stu-id="bfa93-165">End-to-end scenarios of exclude disks</span></span>
<span data-ttu-id="bfa93-166">Let's consider two scenarios to understand the exclude disk feature:</span><span class="sxs-lookup"><span data-stu-id="bfa93-166">Let's consider two scenarios to understand the exclude disk feature:</span></span>

- <span data-ttu-id="bfa93-167">SQL Server tempdb disk</span><span class="sxs-lookup"><span data-stu-id="bfa93-167">SQL Server tempdb disk</span></span>
- <span data-ttu-id="bfa93-168">Paging file (pagefile.sys) disk</span><span class="sxs-lookup"><span data-stu-id="bfa93-168">Paging file (pagefile.sys) disk</span></span>

### <a name="exclude-the-sql-server-tempdb-disk"></a><span data-ttu-id="bfa93-169">Exclude the SQL Server tempdb disk</span><span class="sxs-lookup"><span data-stu-id="bfa93-169">Exclude the SQL Server tempdb disk</span></span>
<span data-ttu-id="bfa93-170">Let's consider a SQL Server virtual machine that has a tempdb that can be excluded.</span><span class="sxs-lookup"><span data-stu-id="bfa93-170">Let's consider a SQL Server virtual machine that has a tempdb that can be excluded.</span></span>

<span data-ttu-id="bfa93-171">The name of the virtual disk is SalesDB.</span><span class="sxs-lookup"><span data-stu-id="bfa93-171">The name of the virtual disk is SalesDB.</span></span>

<span data-ttu-id="bfa93-172">Disks on the source virtual machine are as follows:</span><span class="sxs-lookup"><span data-stu-id="bfa93-172">Disks on the source virtual machine are as follows:</span></span>


<span data-ttu-id="bfa93-173">**Disk name**</span><span class="sxs-lookup"><span data-stu-id="bfa93-173">**Disk name**</span></span> | <span data-ttu-id="bfa93-174">**Guest operating system disk#**</span><span class="sxs-lookup"><span data-stu-id="bfa93-174">**Guest operating system disk#**</span></span> | <span data-ttu-id="bfa93-175">**Drive letter**</span><span class="sxs-lookup"><span data-stu-id="bfa93-175">**Drive letter**</span></span> | <span data-ttu-id="bfa93-176">**Data type on the disk**</span><span class="sxs-lookup"><span data-stu-id="bfa93-176">**Data type on the disk**</span></span>
--- | --- | --- | ---
<span data-ttu-id="bfa93-177">DB-Disk0-OS</span><span class="sxs-lookup"><span data-stu-id="bfa93-177">DB-Disk0-OS</span></span> | <span data-ttu-id="bfa93-178">DISK0</span><span class="sxs-lookup"><span data-stu-id="bfa93-178">DISK0</span></span> | <span data-ttu-id="bfa93-179">C:\\</span><span class="sxs-lookup"><span data-stu-id="bfa93-179">C:\\</span></span> | <span data-ttu-id="bfa93-180">Operating system disk</span><span class="sxs-lookup"><span data-stu-id="bfa93-180">Operating system disk</span></span>
<span data-ttu-id="bfa93-181">DB-Disk1</span><span class="sxs-lookup"><span data-stu-id="bfa93-181">DB-Disk1</span></span>| <span data-ttu-id="bfa93-182">Disk1</span><span class="sxs-lookup"><span data-stu-id="bfa93-182">Disk1</span></span> | <span data-ttu-id="bfa93-183">D:\\</span><span class="sxs-lookup"><span data-stu-id="bfa93-183">D:\\</span></span> | <span data-ttu-id="bfa93-184">SQL system database and User Database1</span><span class="sxs-lookup"><span data-stu-id="bfa93-184">SQL system database and User Database1</span></span>
<span data-ttu-id="bfa93-185">DB-Disk2 (Excluded the disk from protection)</span><span class="sxs-lookup"><span data-stu-id="bfa93-185">DB-Disk2 (Excluded the disk from protection)</span></span> | <span data-ttu-id="bfa93-186">Disk2</span><span class="sxs-lookup"><span data-stu-id="bfa93-186">Disk2</span></span> | <span data-ttu-id="bfa93-187">E:\\</span><span class="sxs-lookup"><span data-stu-id="bfa93-187">E:\\</span></span> | <span data-ttu-id="bfa93-188">Temp files</span><span class="sxs-lookup"><span data-stu-id="bfa93-188">Temp files</span></span>
<span data-ttu-id="bfa93-189">DB-Disk3 (Excluded the disk from protection)</span><span class="sxs-lookup"><span data-stu-id="bfa93-189">DB-Disk3 (Excluded the disk from protection)</span></span> | <span data-ttu-id="bfa93-190">Disk3</span><span class="sxs-lookup"><span data-stu-id="bfa93-190">Disk3</span></span> | <span data-ttu-id="bfa93-191">F:\\</span><span class="sxs-lookup"><span data-stu-id="bfa93-191">F:\\</span></span> | <span data-ttu-id="bfa93-192">SQL tempdb database (folder path(F:\MSSQL\Data\) </br /> </br />Write down the folder path before failover.</span><span class="sxs-lookup"><span data-stu-id="bfa93-192">SQL tempdb database (folder path(F:\MSSQL\Data\) </br /> </br />Write down the folder path before failover.</span></span>
<span data-ttu-id="bfa93-193">DB-Disk4</span><span class="sxs-lookup"><span data-stu-id="bfa93-193">DB-Disk4</span></span> | <span data-ttu-id="bfa93-194">Disk4</span><span class="sxs-lookup"><span data-stu-id="bfa93-194">Disk4</span></span> |<span data-ttu-id="bfa93-195">G:\\</span><span class="sxs-lookup"><span data-stu-id="bfa93-195">G:\\</span></span> |<span data-ttu-id="bfa93-196">User Database2</span><span class="sxs-lookup"><span data-stu-id="bfa93-196">User Database2</span></span>

<span data-ttu-id="bfa93-197">Because data churn on two disks of the virtual machine is temporary, while you protect the SalesDB virtual machine, exclude Disk2 and Disk3 from replication.</span><span class="sxs-lookup"><span data-stu-id="bfa93-197">Because data churn on two disks of the virtual machine is temporary, while you protect the SalesDB virtual machine, exclude Disk2 and Disk3 from replication.</span></span> <span data-ttu-id="bfa93-198">Azure Site Recovery will not replicate those disks.</span><span class="sxs-lookup"><span data-stu-id="bfa93-198">Azure Site Recovery will not replicate those disks.</span></span> <span data-ttu-id="bfa93-199">On failover, those disks will not be present on the failover virtual machine on Azure.</span><span class="sxs-lookup"><span data-stu-id="bfa93-199">On failover, those disks will not be present on the failover virtual machine on Azure.</span></span>

<span data-ttu-id="bfa93-200">Disks on the Azure virtual machine after failover are as follows:</span><span class="sxs-lookup"><span data-stu-id="bfa93-200">Disks on the Azure virtual machine after failover are as follows:</span></span>

<span data-ttu-id="bfa93-201">**Guest operating system disk#**</span><span class="sxs-lookup"><span data-stu-id="bfa93-201">**Guest operating system disk#**</span></span> | <span data-ttu-id="bfa93-202">**Drive letter**</span><span class="sxs-lookup"><span data-stu-id="bfa93-202">**Drive letter**</span></span> | <span data-ttu-id="bfa93-203">**Data type on the disk**</span><span class="sxs-lookup"><span data-stu-id="bfa93-203">**Data type on the disk**</span></span>
--- | --- | ---
<span data-ttu-id="bfa93-204">DISK0</span><span class="sxs-lookup"><span data-stu-id="bfa93-204">DISK0</span></span> | <span data-ttu-id="bfa93-205">C:\\</span><span class="sxs-lookup"><span data-stu-id="bfa93-205">C:\\</span></span> | <span data-ttu-id="bfa93-206">Operating system disk</span><span class="sxs-lookup"><span data-stu-id="bfa93-206">Operating system disk</span></span>
<span data-ttu-id="bfa93-207">Disk1</span><span class="sxs-lookup"><span data-stu-id="bfa93-207">Disk1</span></span> | <span data-ttu-id="bfa93-208">E:\\</span><span class="sxs-lookup"><span data-stu-id="bfa93-208">E:\\</span></span> | <span data-ttu-id="bfa93-209">Temporary storage</br /> </br />Azure adds this disk and assigns the first available drive letter.</span><span class="sxs-lookup"><span data-stu-id="bfa93-209">Temporary storage</br /> </br />Azure adds this disk and assigns the first available drive letter.</span></span>
<span data-ttu-id="bfa93-210">Disk2</span><span class="sxs-lookup"><span data-stu-id="bfa93-210">Disk2</span></span> | <span data-ttu-id="bfa93-211">D:\\</span><span class="sxs-lookup"><span data-stu-id="bfa93-211">D:\\</span></span> | <span data-ttu-id="bfa93-212">SQL system database and User Database1</span><span class="sxs-lookup"><span data-stu-id="bfa93-212">SQL system database and User Database1</span></span>
<span data-ttu-id="bfa93-213">Disk3</span><span class="sxs-lookup"><span data-stu-id="bfa93-213">Disk3</span></span> | <span data-ttu-id="bfa93-214">G:\\</span><span class="sxs-lookup"><span data-stu-id="bfa93-214">G:\\</span></span> | <span data-ttu-id="bfa93-215">User Database2</span><span class="sxs-lookup"><span data-stu-id="bfa93-215">User Database2</span></span>

<span data-ttu-id="bfa93-216">Because Disk2 and Disk3 were excluded from the SalesDB virtual machine, E: is the first drive letter from the available list.</span><span class="sxs-lookup"><span data-stu-id="bfa93-216">Because Disk2 and Disk3 were excluded from the SalesDB virtual machine, E: is the first drive letter from the available list.</span></span> <span data-ttu-id="bfa93-217">Azure assigns E: to the temporary storage volume.</span><span class="sxs-lookup"><span data-stu-id="bfa93-217">Azure assigns E: to the temporary storage volume.</span></span> <span data-ttu-id="bfa93-218">For all the replicated disks, the drive letters remain the same.</span><span class="sxs-lookup"><span data-stu-id="bfa93-218">For all the replicated disks, the drive letters remain the same.</span></span>

<span data-ttu-id="bfa93-219">Disk3, which was the SQL tempdb disk (tempdb folder path F:\MSSQL\Data\), was excluded from replication.</span><span class="sxs-lookup"><span data-stu-id="bfa93-219">Disk3, which was the SQL tempdb disk (tempdb folder path F:\MSSQL\Data\), was excluded from replication.</span></span> <span data-ttu-id="bfa93-220">The disk is not available on the failover virtual machine.</span><span class="sxs-lookup"><span data-stu-id="bfa93-220">The disk is not available on the failover virtual machine.</span></span> <span data-ttu-id="bfa93-221">As a result, the SQL service is in a stopped state, and it needs the F:\MSSQL\Data path.</span><span class="sxs-lookup"><span data-stu-id="bfa93-221">As a result, the SQL service is in a stopped state, and it needs the F:\MSSQL\Data path.</span></span>

<span data-ttu-id="bfa93-222">There are two ways to create this path:</span><span class="sxs-lookup"><span data-stu-id="bfa93-222">There are two ways to create this path:</span></span>

- <span data-ttu-id="bfa93-223">Add a new disk and assign tempdb folder path.</span><span class="sxs-lookup"><span data-stu-id="bfa93-223">Add a new disk and assign tempdb folder path.</span></span>
- <span data-ttu-id="bfa93-224">Use an existing temporary storage disk for the tempdb folder path.</span><span class="sxs-lookup"><span data-stu-id="bfa93-224">Use an existing temporary storage disk for the tempdb folder path.</span></span>

#### <a name="add-a-new-disk"></a><span data-ttu-id="bfa93-225">Add a new disk:</span><span class="sxs-lookup"><span data-stu-id="bfa93-225">Add a new disk:</span></span>

1. <span data-ttu-id="bfa93-226">Write down the paths of SQL tempdb.mdf and tempdb.ldf before failover.</span><span class="sxs-lookup"><span data-stu-id="bfa93-226">Write down the paths of SQL tempdb.mdf and tempdb.ldf before failover.</span></span>
2. <span data-ttu-id="bfa93-227">From the Azure portal, add a new disk to the failover virtual machine with the same or more size as that of the source SQL tempdb disk (Disk3).</span><span class="sxs-lookup"><span data-stu-id="bfa93-227">From the Azure portal, add a new disk to the failover virtual machine with the same or more size as that of the source SQL tempdb disk (Disk3).</span></span>
3. <span data-ttu-id="bfa93-228">Sign in to the Azure virtual machine.</span><span class="sxs-lookup"><span data-stu-id="bfa93-228">Sign in to the Azure virtual machine.</span></span> <span data-ttu-id="bfa93-229">From the disk management (diskmgmt.msc) console, initialize and format the newly added disk.</span><span class="sxs-lookup"><span data-stu-id="bfa93-229">From the disk management (diskmgmt.msc) console, initialize and format the newly added disk.</span></span>
4. <span data-ttu-id="bfa93-230">Assign the same drive letter that was used by the SQL tempdb disk (F:).</span><span class="sxs-lookup"><span data-stu-id="bfa93-230">Assign the same drive letter that was used by the SQL tempdb disk (F:).</span></span>
5. <span data-ttu-id="bfa93-231">Create a tempdb folder on the F: volume (F:\MSSQL\Data).</span><span class="sxs-lookup"><span data-stu-id="bfa93-231">Create a tempdb folder on the F: volume (F:\MSSQL\Data).</span></span>
6. <span data-ttu-id="bfa93-232">Start the SQL service from the service console.</span><span class="sxs-lookup"><span data-stu-id="bfa93-232">Start the SQL service from the service console.</span></span>

#### <a name="use-an-existing-temporary-storage-disk-for-the-sql-tempdb-folder-path"></a><span data-ttu-id="bfa93-233">Use an existing temporary storage disk for the SQL tempdb folder path:</span><span class="sxs-lookup"><span data-stu-id="bfa93-233">Use an existing temporary storage disk for the SQL tempdb folder path:</span></span>

1. <span data-ttu-id="bfa93-234">Open a command prompt.</span><span class="sxs-lookup"><span data-stu-id="bfa93-234">Open a command prompt.</span></span>
2. <span data-ttu-id="bfa93-235">Run SQL Server in recovery mode from the command prompt.</span><span class="sxs-lookup"><span data-stu-id="bfa93-235">Run SQL Server in recovery mode from the command prompt.</span></span>

        Net start MSSQLSERVER /f / T3608

3. <span data-ttu-id="bfa93-236">Run the following sqlcmd to change the tempdb path to the new path.</span><span class="sxs-lookup"><span data-stu-id="bfa93-236">Run the following sqlcmd to change the tempdb path to the new path.</span></span>

        sqlcmd -A -S SalesDB        **Use your SQL DBname**
        USE master;     
        GO      
        ALTER DATABASE tempdb       
        MODIFY FILE (NAME = tempdev, FILENAME = 'E:\MSSQL\tempdata\tempdb.mdf');
        GO      
        ALTER DATABASE tempdb       
        MODIFY FILE (NAME = templog, FILENAME = 'E:\MSSQL\tempdata\templog.ldf');       
        GO


4. <span data-ttu-id="bfa93-237">Stop the Microsoft SQL Server service.</span><span class="sxs-lookup"><span data-stu-id="bfa93-237">Stop the Microsoft SQL Server service.</span></span>

        Net stop MSSQLSERVER
5. <span data-ttu-id="bfa93-238">Start the Microsoft SQL Server service.</span><span class="sxs-lookup"><span data-stu-id="bfa93-238">Start the Microsoft SQL Server service.</span></span>

        Net start MSSQLSERVER

<span data-ttu-id="bfa93-239">Refer to the following Azure guideline for temporary storage disk:</span><span class="sxs-lookup"><span data-stu-id="bfa93-239">Refer to the following Azure guideline for temporary storage disk:</span></span>

* [<span data-ttu-id="bfa93-240">Using SSDs in Azure VMs to store SQL Server TempDB and Buffer Pool Extensions</span><span class="sxs-lookup"><span data-stu-id="bfa93-240">Using SSDs in Azure VMs to store SQL Server TempDB and Buffer Pool Extensions</span></span>](https://blogs.technet.microsoft.com/dataplatforminsider/2014/09/25/using-ssds-in-azure-vms-to-store-sql-server-tempdb-and-buffer-pool-extensions/)
* [<span data-ttu-id="bfa93-241">Performance best practices for SQL Server in Azure Virtual Machines</span><span class="sxs-lookup"><span data-stu-id="bfa93-241">Performance best practices for SQL Server in Azure Virtual Machines</span></span>](https://docs.microsoft.com/azure/virtual-machines/windows/sql/virtual-machines-windows-sql-performance)

### <a name="failback-from-azure-to-an-on-premises-host"></a><span data-ttu-id="bfa93-242">Failback (from Azure to an on-premises host)</span><span class="sxs-lookup"><span data-stu-id="bfa93-242">Failback (from Azure to an on-premises host)</span></span>
<span data-ttu-id="bfa93-243">Now let's understand the disks that are replicated when you fail over from Azure to your on-premises VMware or Hyper-V host.</span><span class="sxs-lookup"><span data-stu-id="bfa93-243">Now let's understand the disks that are replicated when you fail over from Azure to your on-premises VMware or Hyper-V host.</span></span> <span data-ttu-id="bfa93-244">Disks that you create manually in Azure will not be replicated.</span><span class="sxs-lookup"><span data-stu-id="bfa93-244">Disks that you create manually in Azure will not be replicated.</span></span> <span data-ttu-id="bfa93-245">For example, if you fail over three disks and create two directly in Azure Virtual Machines, only three disks that were failed over will be failed back.</span><span class="sxs-lookup"><span data-stu-id="bfa93-245">For example, if you fail over three disks and create two directly in Azure Virtual Machines, only three disks that were failed over will be failed back.</span></span> <span data-ttu-id="bfa93-246">You can't include disks that were created manually in failback or in reprotect from on-premises to Azure.</span><span class="sxs-lookup"><span data-stu-id="bfa93-246">You can't include disks that were created manually in failback or in reprotect from on-premises to Azure.</span></span> <span data-ttu-id="bfa93-247">It also does not replicate the temporary storage disk to on-premises hosts.</span><span class="sxs-lookup"><span data-stu-id="bfa93-247">It also does not replicate the temporary storage disk to on-premises hosts.</span></span>

#### <a name="failback-to-original-location-recovery"></a><span data-ttu-id="bfa93-248">Failback to original location recovery</span><span class="sxs-lookup"><span data-stu-id="bfa93-248">Failback to original location recovery</span></span>

<span data-ttu-id="bfa93-249">In the previous example, the Azure virtual machine disk configuration is as follows:</span><span class="sxs-lookup"><span data-stu-id="bfa93-249">In the previous example, the Azure virtual machine disk configuration is as follows:</span></span>

<span data-ttu-id="bfa93-250">**Guest operating system disk#**</span><span class="sxs-lookup"><span data-stu-id="bfa93-250">**Guest operating system disk#**</span></span> | <span data-ttu-id="bfa93-251">**Drive letter**</span><span class="sxs-lookup"><span data-stu-id="bfa93-251">**Drive letter**</span></span> | <span data-ttu-id="bfa93-252">**Data type on the disk**</span><span class="sxs-lookup"><span data-stu-id="bfa93-252">**Data type on the disk**</span></span>
--- | --- | ---
<span data-ttu-id="bfa93-253">DISK0</span><span class="sxs-lookup"><span data-stu-id="bfa93-253">DISK0</span></span> | <span data-ttu-id="bfa93-254">C:\\</span><span class="sxs-lookup"><span data-stu-id="bfa93-254">C:\\</span></span> | <span data-ttu-id="bfa93-255">Operating system disk</span><span class="sxs-lookup"><span data-stu-id="bfa93-255">Operating system disk</span></span>
<span data-ttu-id="bfa93-256">Disk1</span><span class="sxs-lookup"><span data-stu-id="bfa93-256">Disk1</span></span> | <span data-ttu-id="bfa93-257">E:\\</span><span class="sxs-lookup"><span data-stu-id="bfa93-257">E:\\</span></span> | <span data-ttu-id="bfa93-258">Temporary storage</br /> </br />Azure adds this disk and assigns the first available drive letter.</span><span class="sxs-lookup"><span data-stu-id="bfa93-258">Temporary storage</br /> </br />Azure adds this disk and assigns the first available drive letter.</span></span>
<span data-ttu-id="bfa93-259">Disk2</span><span class="sxs-lookup"><span data-stu-id="bfa93-259">Disk2</span></span> | <span data-ttu-id="bfa93-260">D:\\</span><span class="sxs-lookup"><span data-stu-id="bfa93-260">D:\\</span></span> | <span data-ttu-id="bfa93-261">SQL system database and User Database1</span><span class="sxs-lookup"><span data-stu-id="bfa93-261">SQL system database and User Database1</span></span>
<span data-ttu-id="bfa93-262">Disk3</span><span class="sxs-lookup"><span data-stu-id="bfa93-262">Disk3</span></span> | <span data-ttu-id="bfa93-263">G:\\</span><span class="sxs-lookup"><span data-stu-id="bfa93-263">G:\\</span></span> | <span data-ttu-id="bfa93-264">User Database2</span><span class="sxs-lookup"><span data-stu-id="bfa93-264">User Database2</span></span>


#### <a name="vmware-to-azure"></a><span data-ttu-id="bfa93-265">VMware to Azure</span><span class="sxs-lookup"><span data-stu-id="bfa93-265">VMware to Azure</span></span>
<span data-ttu-id="bfa93-266">When failback is done to the original location, the failback virtual machine disk configuration does not have excluded disks.</span><span class="sxs-lookup"><span data-stu-id="bfa93-266">When failback is done to the original location, the failback virtual machine disk configuration does not have excluded disks.</span></span> <span data-ttu-id="bfa93-267">Disks that were excluded from VMware to Azure  will not be available on the failback virtual machine.</span><span class="sxs-lookup"><span data-stu-id="bfa93-267">Disks that were excluded from VMware to Azure  will not be available on the failback virtual machine.</span></span>

<span data-ttu-id="bfa93-268">After planned failover from Azure to on-premises VMware, disks on the VMWare virtual machine (original location) are as follows:</span><span class="sxs-lookup"><span data-stu-id="bfa93-268">After planned failover from Azure to on-premises VMware, disks on the VMWare virtual machine (original location) are as follows:</span></span>

<span data-ttu-id="bfa93-269">**Guest operating system disk#**</span><span class="sxs-lookup"><span data-stu-id="bfa93-269">**Guest operating system disk#**</span></span> | <span data-ttu-id="bfa93-270">**Drive letter**</span><span class="sxs-lookup"><span data-stu-id="bfa93-270">**Drive letter**</span></span> | <span data-ttu-id="bfa93-271">**Data type on the disk**</span><span class="sxs-lookup"><span data-stu-id="bfa93-271">**Data type on the disk**</span></span>
--- | --- | ---
<span data-ttu-id="bfa93-272">DISK0</span><span class="sxs-lookup"><span data-stu-id="bfa93-272">DISK0</span></span> | <span data-ttu-id="bfa93-273">C:\\</span><span class="sxs-lookup"><span data-stu-id="bfa93-273">C:\\</span></span> | <span data-ttu-id="bfa93-274">Operating system disk</span><span class="sxs-lookup"><span data-stu-id="bfa93-274">Operating system disk</span></span>
<span data-ttu-id="bfa93-275">Disk1</span><span class="sxs-lookup"><span data-stu-id="bfa93-275">Disk1</span></span> | <span data-ttu-id="bfa93-276">D:\\</span><span class="sxs-lookup"><span data-stu-id="bfa93-276">D:\\</span></span> | <span data-ttu-id="bfa93-277">SQL system database and User Database1</span><span class="sxs-lookup"><span data-stu-id="bfa93-277">SQL system database and User Database1</span></span>
<span data-ttu-id="bfa93-278">Disk2</span><span class="sxs-lookup"><span data-stu-id="bfa93-278">Disk2</span></span> | <span data-ttu-id="bfa93-279">G:\\</span><span class="sxs-lookup"><span data-stu-id="bfa93-279">G:\\</span></span> | <span data-ttu-id="bfa93-280">User Database2</span><span class="sxs-lookup"><span data-stu-id="bfa93-280">User Database2</span></span>

#### <a name="hyper-v-to-azure"></a><span data-ttu-id="bfa93-281">Hyper-V to Azure</span><span class="sxs-lookup"><span data-stu-id="bfa93-281">Hyper-V to Azure</span></span>
<span data-ttu-id="bfa93-282">When failback is to the original location, the failback virtual machine disk configuration remains the same as that of original virtual machine disk configuration for Hyper-V.</span><span class="sxs-lookup"><span data-stu-id="bfa93-282">When failback is to the original location, the failback virtual machine disk configuration remains the same as that of original virtual machine disk configuration for Hyper-V.</span></span> <span data-ttu-id="bfa93-283">Disks that were excluded from Hyper-V site to Azure are available on the failback virtual machine.</span><span class="sxs-lookup"><span data-stu-id="bfa93-283">Disks that were excluded from Hyper-V site to Azure are available on the failback virtual machine.</span></span>

<span data-ttu-id="bfa93-284">After planned failover from Azure to on-premises Hyper-V, disks on the Hyper-V virtual machine (original location) are as follows:</span><span class="sxs-lookup"><span data-stu-id="bfa93-284">After planned failover from Azure to on-premises Hyper-V, disks on the Hyper-V virtual machine (original location) are as follows:</span></span>

<span data-ttu-id="bfa93-285">**Disk Name**</span><span class="sxs-lookup"><span data-stu-id="bfa93-285">**Disk Name**</span></span> | <span data-ttu-id="bfa93-286">**Guest operating system disk#**</span><span class="sxs-lookup"><span data-stu-id="bfa93-286">**Guest operating system disk#**</span></span> | <span data-ttu-id="bfa93-287">**Drive letter**</span><span class="sxs-lookup"><span data-stu-id="bfa93-287">**Drive letter**</span></span> | <span data-ttu-id="bfa93-288">**Data type on the disk**</span><span class="sxs-lookup"><span data-stu-id="bfa93-288">**Data type on the disk**</span></span>
--- | --- | --- | ---
<span data-ttu-id="bfa93-289">DB-Disk0-OS</span><span class="sxs-lookup"><span data-stu-id="bfa93-289">DB-Disk0-OS</span></span> | <span data-ttu-id="bfa93-290">DISK0</span><span class="sxs-lookup"><span data-stu-id="bfa93-290">DISK0</span></span> |   <span data-ttu-id="bfa93-291">C:\\</span><span class="sxs-lookup"><span data-stu-id="bfa93-291">C:\\</span></span> | <span data-ttu-id="bfa93-292">Operating system disk</span><span class="sxs-lookup"><span data-stu-id="bfa93-292">Operating system disk</span></span>
<span data-ttu-id="bfa93-293">DB-Disk1</span><span class="sxs-lookup"><span data-stu-id="bfa93-293">DB-Disk1</span></span> | <span data-ttu-id="bfa93-294">Disk1</span><span class="sxs-lookup"><span data-stu-id="bfa93-294">Disk1</span></span> | <span data-ttu-id="bfa93-295">D:\\</span><span class="sxs-lookup"><span data-stu-id="bfa93-295">D:\\</span></span> | <span data-ttu-id="bfa93-296">SQL system database and User Database1</span><span class="sxs-lookup"><span data-stu-id="bfa93-296">SQL system database and User Database1</span></span>
<span data-ttu-id="bfa93-297">DB-Disk2 (Excluded disk)</span><span class="sxs-lookup"><span data-stu-id="bfa93-297">DB-Disk2 (Excluded disk)</span></span> | <span data-ttu-id="bfa93-298">Disk2</span><span class="sxs-lookup"><span data-stu-id="bfa93-298">Disk2</span></span> | <span data-ttu-id="bfa93-299">E:\\</span><span class="sxs-lookup"><span data-stu-id="bfa93-299">E:\\</span></span> | <span data-ttu-id="bfa93-300">Temp files</span><span class="sxs-lookup"><span data-stu-id="bfa93-300">Temp files</span></span>
<span data-ttu-id="bfa93-301">DB-Disk3 (Excluded disk)</span><span class="sxs-lookup"><span data-stu-id="bfa93-301">DB-Disk3 (Excluded disk)</span></span> | <span data-ttu-id="bfa93-302">Disk3</span><span class="sxs-lookup"><span data-stu-id="bfa93-302">Disk3</span></span> | <span data-ttu-id="bfa93-303">F:\\</span><span class="sxs-lookup"><span data-stu-id="bfa93-303">F:\\</span></span> | <span data-ttu-id="bfa93-304">SQL tempdb database (folder path(F:\MSSQL\Data\)</span><span class="sxs-lookup"><span data-stu-id="bfa93-304">SQL tempdb database (folder path(F:\MSSQL\Data\)</span></span>
<span data-ttu-id="bfa93-305">DB-Disk4</span><span class="sxs-lookup"><span data-stu-id="bfa93-305">DB-Disk4</span></span> | <span data-ttu-id="bfa93-306">Disk4</span><span class="sxs-lookup"><span data-stu-id="bfa93-306">Disk4</span></span> | <span data-ttu-id="bfa93-307">G:\\</span><span class="sxs-lookup"><span data-stu-id="bfa93-307">G:\\</span></span> | <span data-ttu-id="bfa93-308">User Database2</span><span class="sxs-lookup"><span data-stu-id="bfa93-308">User Database2</span></span>


#### <a name="exclude-the-paging-file-pagefilesys-disk"></a><span data-ttu-id="bfa93-309">Exclude the paging file (pagefile.sys) disk</span><span class="sxs-lookup"><span data-stu-id="bfa93-309">Exclude the paging file (pagefile.sys) disk</span></span>

<span data-ttu-id="bfa93-310">Let's consider a virtual machine that has a paging file disk that can be excluded.</span><span class="sxs-lookup"><span data-stu-id="bfa93-310">Let's consider a virtual machine that has a paging file disk that can be excluded.</span></span>
<span data-ttu-id="bfa93-311">There are two cases.</span><span class="sxs-lookup"><span data-stu-id="bfa93-311">There are two cases.</span></span>

#### <a name="case-1-the-paging-file-is-configured-on-the-d-drive"></a><span data-ttu-id="bfa93-312">Case 1: The paging file is configured on the D: drive</span><span class="sxs-lookup"><span data-stu-id="bfa93-312">Case 1: The paging file is configured on the D: drive</span></span>
<span data-ttu-id="bfa93-313">Here's the disk configuration:</span><span class="sxs-lookup"><span data-stu-id="bfa93-313">Here's the disk configuration:</span></span>


<span data-ttu-id="bfa93-314">**Disk name**</span><span class="sxs-lookup"><span data-stu-id="bfa93-314">**Disk name**</span></span> | <span data-ttu-id="bfa93-315">**Guest operating system disk#**</span><span class="sxs-lookup"><span data-stu-id="bfa93-315">**Guest operating system disk#**</span></span> | <span data-ttu-id="bfa93-316">**Drive letter**</span><span class="sxs-lookup"><span data-stu-id="bfa93-316">**Drive letter**</span></span> | <span data-ttu-id="bfa93-317">**Data type on the disk**</span><span class="sxs-lookup"><span data-stu-id="bfa93-317">**Data type on the disk**</span></span>
--- | --- | --- | ---
<span data-ttu-id="bfa93-318">DB-Disk0-OS</span><span class="sxs-lookup"><span data-stu-id="bfa93-318">DB-Disk0-OS</span></span> | <span data-ttu-id="bfa93-319">DISK0</span><span class="sxs-lookup"><span data-stu-id="bfa93-319">DISK0</span></span> | <span data-ttu-id="bfa93-320">C:\\</span><span class="sxs-lookup"><span data-stu-id="bfa93-320">C:\\</span></span> | <span data-ttu-id="bfa93-321">Operating system disk</span><span class="sxs-lookup"><span data-stu-id="bfa93-321">Operating system disk</span></span>
<span data-ttu-id="bfa93-322">DB-Disk1 (Excluded the disk from the protection)</span><span class="sxs-lookup"><span data-stu-id="bfa93-322">DB-Disk1 (Excluded the disk from the protection)</span></span> | <span data-ttu-id="bfa93-323">Disk1</span><span class="sxs-lookup"><span data-stu-id="bfa93-323">Disk1</span></span> | <span data-ttu-id="bfa93-324">D:\\</span><span class="sxs-lookup"><span data-stu-id="bfa93-324">D:\\</span></span> | <span data-ttu-id="bfa93-325">pagefile.sys</span><span class="sxs-lookup"><span data-stu-id="bfa93-325">pagefile.sys</span></span>
<span data-ttu-id="bfa93-326">DB-Disk2</span><span class="sxs-lookup"><span data-stu-id="bfa93-326">DB-Disk2</span></span> | <span data-ttu-id="bfa93-327">Disk2</span><span class="sxs-lookup"><span data-stu-id="bfa93-327">Disk2</span></span> | <span data-ttu-id="bfa93-328">E:\\</span><span class="sxs-lookup"><span data-stu-id="bfa93-328">E:\\</span></span> | <span data-ttu-id="bfa93-329">User data 1</span><span class="sxs-lookup"><span data-stu-id="bfa93-329">User data 1</span></span>
<span data-ttu-id="bfa93-330">DB-Disk3</span><span class="sxs-lookup"><span data-stu-id="bfa93-330">DB-Disk3</span></span> | <span data-ttu-id="bfa93-331">Disk3</span><span class="sxs-lookup"><span data-stu-id="bfa93-331">Disk3</span></span> | <span data-ttu-id="bfa93-332">F:\\</span><span class="sxs-lookup"><span data-stu-id="bfa93-332">F:\\</span></span> | <span data-ttu-id="bfa93-333">User data 2</span><span class="sxs-lookup"><span data-stu-id="bfa93-333">User data 2</span></span>

<span data-ttu-id="bfa93-334">Here are the paging file settings on the source virtual machine:</span><span class="sxs-lookup"><span data-stu-id="bfa93-334">Here are the paging file settings on the source virtual machine:</span></span>

![Paging file settings on source virtual machine](https://docstestmedia1.blob.core.windows.net/azure-media/articles/site-recovery/media/site-recovery-exclude-disk/pagefile-on-d-drive-sourceVM.png)


<span data-ttu-id="bfa93-336">After failover of the virtual machine from VMware to Azure or Hyper-V to Azure, disks on the Azure virtual machine are as follows:</span><span class="sxs-lookup"><span data-stu-id="bfa93-336">After failover of the virtual machine from VMware to Azure or Hyper-V to Azure, disks on the Azure virtual machine are as follows:</span></span>

<span data-ttu-id="bfa93-337">**Disk name**</span><span class="sxs-lookup"><span data-stu-id="bfa93-337">**Disk name**</span></span> | <span data-ttu-id="bfa93-338">**Guest operating system disk#**</span><span class="sxs-lookup"><span data-stu-id="bfa93-338">**Guest operating system disk#**</span></span> | <span data-ttu-id="bfa93-339">**Drive letter**</span><span class="sxs-lookup"><span data-stu-id="bfa93-339">**Drive letter**</span></span> | <span data-ttu-id="bfa93-340">**Data type on the disk**</span><span class="sxs-lookup"><span data-stu-id="bfa93-340">**Data type on the disk**</span></span>
--- | --- | --- | ---
<span data-ttu-id="bfa93-341">DB-Disk0-OS</span><span class="sxs-lookup"><span data-stu-id="bfa93-341">DB-Disk0-OS</span></span> | <span data-ttu-id="bfa93-342">DISK0</span><span class="sxs-lookup"><span data-stu-id="bfa93-342">DISK0</span></span> | <span data-ttu-id="bfa93-343">C:\\</span><span class="sxs-lookup"><span data-stu-id="bfa93-343">C:\\</span></span> | <span data-ttu-id="bfa93-344">Operating system disk</span><span class="sxs-lookup"><span data-stu-id="bfa93-344">Operating system disk</span></span>
<span data-ttu-id="bfa93-345">DB-Disk1</span><span class="sxs-lookup"><span data-stu-id="bfa93-345">DB-Disk1</span></span> | <span data-ttu-id="bfa93-346">Disk1</span><span class="sxs-lookup"><span data-stu-id="bfa93-346">Disk1</span></span> | <span data-ttu-id="bfa93-347">D:\\</span><span class="sxs-lookup"><span data-stu-id="bfa93-347">D:\\</span></span> | <span data-ttu-id="bfa93-348">Temporary storage</br /> </br />pagefile.sys</span><span class="sxs-lookup"><span data-stu-id="bfa93-348">Temporary storage</br /> </br />pagefile.sys</span></span>
<span data-ttu-id="bfa93-349">DB-Disk2</span><span class="sxs-lookup"><span data-stu-id="bfa93-349">DB-Disk2</span></span> | <span data-ttu-id="bfa93-350">Disk2</span><span class="sxs-lookup"><span data-stu-id="bfa93-350">Disk2</span></span> | <span data-ttu-id="bfa93-351">E:\\</span><span class="sxs-lookup"><span data-stu-id="bfa93-351">E:\\</span></span> | <span data-ttu-id="bfa93-352">User data 1</span><span class="sxs-lookup"><span data-stu-id="bfa93-352">User data 1</span></span>
<span data-ttu-id="bfa93-353">DB-Disk3</span><span class="sxs-lookup"><span data-stu-id="bfa93-353">DB-Disk3</span></span> | <span data-ttu-id="bfa93-354">Disk3</span><span class="sxs-lookup"><span data-stu-id="bfa93-354">Disk3</span></span> | <span data-ttu-id="bfa93-355">F:\\</span><span class="sxs-lookup"><span data-stu-id="bfa93-355">F:\\</span></span> | <span data-ttu-id="bfa93-356">User data 2</span><span class="sxs-lookup"><span data-stu-id="bfa93-356">User data 2</span></span>

<span data-ttu-id="bfa93-357">Because Disk1 (D:) was excluded, D: is the first drive letter from the available list.</span><span class="sxs-lookup"><span data-stu-id="bfa93-357">Because Disk1 (D:) was excluded, D: is the first drive letter from the available list.</span></span> <span data-ttu-id="bfa93-358">Azure assigns D: to the temporary storage volume.</span><span class="sxs-lookup"><span data-stu-id="bfa93-358">Azure assigns D: to the temporary storage volume.</span></span> <span data-ttu-id="bfa93-359">Because D: is available on the Azure virtual machine, the paging file setting of the virtual machine remains the same.</span><span class="sxs-lookup"><span data-stu-id="bfa93-359">Because D: is available on the Azure virtual machine, the paging file setting of the virtual machine remains the same.</span></span>

<span data-ttu-id="bfa93-360">Here are the paging file settings on the Azure virtual machine:</span><span class="sxs-lookup"><span data-stu-id="bfa93-360">Here are the paging file settings on the Azure virtual machine:</span></span>

![Paging file settings on Azure virtual machine](https://docstestmedia1.blob.core.windows.net/azure-media/articles/site-recovery/media/site-recovery-exclude-disk/pagefile-on-Azure-vm-after-failover.png)

#### <a name="case-2-the-paging-file-is-configured-on-another-drive-other-than-d-drive"></a><span data-ttu-id="bfa93-362">Case 2: The paging file is configured on another drive (other than D: drive)</span><span class="sxs-lookup"><span data-stu-id="bfa93-362">Case 2: The paging file is configured on another drive (other than D: drive)</span></span>

<span data-ttu-id="bfa93-363">Here's the source virtual machine disk configuration:</span><span class="sxs-lookup"><span data-stu-id="bfa93-363">Here's the source virtual machine disk configuration:</span></span>

<span data-ttu-id="bfa93-364">**Disk name**</span><span class="sxs-lookup"><span data-stu-id="bfa93-364">**Disk name**</span></span> | <span data-ttu-id="bfa93-365">**Guest operating system disk#**</span><span class="sxs-lookup"><span data-stu-id="bfa93-365">**Guest operating system disk#**</span></span> | <span data-ttu-id="bfa93-366">**Drive letter**</span><span class="sxs-lookup"><span data-stu-id="bfa93-366">**Drive letter**</span></span> | <span data-ttu-id="bfa93-367">**Data type on the disk**</span><span class="sxs-lookup"><span data-stu-id="bfa93-367">**Data type on the disk**</span></span>
--- | --- | --- | ---
<span data-ttu-id="bfa93-368">DB-Disk0-OS</span><span class="sxs-lookup"><span data-stu-id="bfa93-368">DB-Disk0-OS</span></span> | <span data-ttu-id="bfa93-369">DISK0</span><span class="sxs-lookup"><span data-stu-id="bfa93-369">DISK0</span></span> | <span data-ttu-id="bfa93-370">C:\\</span><span class="sxs-lookup"><span data-stu-id="bfa93-370">C:\\</span></span> | <span data-ttu-id="bfa93-371">Operating system disk</span><span class="sxs-lookup"><span data-stu-id="bfa93-371">Operating system disk</span></span>
<span data-ttu-id="bfa93-372">DB-Disk1 (Excluded the disk from protection)</span><span class="sxs-lookup"><span data-stu-id="bfa93-372">DB-Disk1 (Excluded the disk from protection)</span></span> | <span data-ttu-id="bfa93-373">Disk1</span><span class="sxs-lookup"><span data-stu-id="bfa93-373">Disk1</span></span> | <span data-ttu-id="bfa93-374">G:\\</span><span class="sxs-lookup"><span data-stu-id="bfa93-374">G:\\</span></span> | <span data-ttu-id="bfa93-375">pagefile.sys</span><span class="sxs-lookup"><span data-stu-id="bfa93-375">pagefile.sys</span></span>
<span data-ttu-id="bfa93-376">DB-Disk2</span><span class="sxs-lookup"><span data-stu-id="bfa93-376">DB-Disk2</span></span> | <span data-ttu-id="bfa93-377">Disk2</span><span class="sxs-lookup"><span data-stu-id="bfa93-377">Disk2</span></span> | <span data-ttu-id="bfa93-378">E:\\</span><span class="sxs-lookup"><span data-stu-id="bfa93-378">E:\\</span></span> | <span data-ttu-id="bfa93-379">User data 1</span><span class="sxs-lookup"><span data-stu-id="bfa93-379">User data 1</span></span>
<span data-ttu-id="bfa93-380">DB-Disk3</span><span class="sxs-lookup"><span data-stu-id="bfa93-380">DB-Disk3</span></span> | <span data-ttu-id="bfa93-381">Disk3</span><span class="sxs-lookup"><span data-stu-id="bfa93-381">Disk3</span></span> | <span data-ttu-id="bfa93-382">F:\\</span><span class="sxs-lookup"><span data-stu-id="bfa93-382">F:\\</span></span> | <span data-ttu-id="bfa93-383">User data 2</span><span class="sxs-lookup"><span data-stu-id="bfa93-383">User data 2</span></span>

<span data-ttu-id="bfa93-384">Here are the paging file settings on the on-premises virtual machine:</span><span class="sxs-lookup"><span data-stu-id="bfa93-384">Here are the paging file settings on the on-premises virtual machine:</span></span>

![Paging file settings on the on-premises virtual machine](https://docstestmedia1.blob.core.windows.net/azure-media/articles/site-recovery/media/site-recovery-exclude-disk/pagefile-on-g-drive-sourceVM.png)

<span data-ttu-id="bfa93-386">After failover of the virtual machine from VMware/Hyper-V to Azure, disks on the Azure virtual machine are as follows:</span><span class="sxs-lookup"><span data-stu-id="bfa93-386">After failover of the virtual machine from VMware/Hyper-V to Azure, disks on the Azure virtual machine are as follows:</span></span>

<span data-ttu-id="bfa93-387">**Disk name**</span><span class="sxs-lookup"><span data-stu-id="bfa93-387">**Disk name**</span></span>| <span data-ttu-id="bfa93-388">**Guest operating system disk#**</span><span class="sxs-lookup"><span data-stu-id="bfa93-388">**Guest operating system disk#**</span></span>| <span data-ttu-id="bfa93-389">**Drive letter**</span><span class="sxs-lookup"><span data-stu-id="bfa93-389">**Drive letter**</span></span> | <span data-ttu-id="bfa93-390">**Data type on the disk**</span><span class="sxs-lookup"><span data-stu-id="bfa93-390">**Data type on the disk**</span></span>
--- | --- | --- | ---
<span data-ttu-id="bfa93-391">DB-Disk0-OS</span><span class="sxs-lookup"><span data-stu-id="bfa93-391">DB-Disk0-OS</span></span> | <span data-ttu-id="bfa93-392">DISK0</span><span class="sxs-lookup"><span data-stu-id="bfa93-392">DISK0</span></span>  |<span data-ttu-id="bfa93-393">C:\\</span><span class="sxs-lookup"><span data-stu-id="bfa93-393">C:\\</span></span> |<span data-ttu-id="bfa93-394">Operating system disk</span><span class="sxs-lookup"><span data-stu-id="bfa93-394">Operating system disk</span></span>
<span data-ttu-id="bfa93-395">DB-Disk1</span><span class="sxs-lookup"><span data-stu-id="bfa93-395">DB-Disk1</span></span> | <span data-ttu-id="bfa93-396">Disk1</span><span class="sxs-lookup"><span data-stu-id="bfa93-396">Disk1</span></span> | <span data-ttu-id="bfa93-397">D:\\</span><span class="sxs-lookup"><span data-stu-id="bfa93-397">D:\\</span></span> | <span data-ttu-id="bfa93-398">Temporary storage</br /> </br />pagefile.sys</span><span class="sxs-lookup"><span data-stu-id="bfa93-398">Temporary storage</br /> </br />pagefile.sys</span></span>
<span data-ttu-id="bfa93-399">DB-Disk2</span><span class="sxs-lookup"><span data-stu-id="bfa93-399">DB-Disk2</span></span> | <span data-ttu-id="bfa93-400">Disk2</span><span class="sxs-lookup"><span data-stu-id="bfa93-400">Disk2</span></span> | <span data-ttu-id="bfa93-401">E:\\</span><span class="sxs-lookup"><span data-stu-id="bfa93-401">E:\\</span></span> | <span data-ttu-id="bfa93-402">User data 1</span><span class="sxs-lookup"><span data-stu-id="bfa93-402">User data 1</span></span>
<span data-ttu-id="bfa93-403">DB-Disk3</span><span class="sxs-lookup"><span data-stu-id="bfa93-403">DB-Disk3</span></span> | <span data-ttu-id="bfa93-404">Disk3</span><span class="sxs-lookup"><span data-stu-id="bfa93-404">Disk3</span></span> | <span data-ttu-id="bfa93-405">F:\\</span><span class="sxs-lookup"><span data-stu-id="bfa93-405">F:\\</span></span> | <span data-ttu-id="bfa93-406">User data 2</span><span class="sxs-lookup"><span data-stu-id="bfa93-406">User data 2</span></span>

<span data-ttu-id="bfa93-407">Because D: is the first drive letter from available the list, Azure assigns D: to the temporary storage volume.</span><span class="sxs-lookup"><span data-stu-id="bfa93-407">Because D: is the first drive letter from available the list, Azure assigns D: to the temporary storage volume.</span></span> <span data-ttu-id="bfa93-408">For all the replicated disks, the drive letter remains the same.</span><span class="sxs-lookup"><span data-stu-id="bfa93-408">For all the replicated disks, the drive letter remains the same.</span></span> <span data-ttu-id="bfa93-409">Because the G: disk is not available, the system will use the C: drive for the paging file.</span><span class="sxs-lookup"><span data-stu-id="bfa93-409">Because the G: disk is not available, the system will use the C: drive for the paging file.</span></span>

<span data-ttu-id="bfa93-410">Here are the paging file settings on the Azure virtual machine:</span><span class="sxs-lookup"><span data-stu-id="bfa93-410">Here are the paging file settings on the Azure virtual machine:</span></span>

![Paging file settings on Azure virtual machine](https://docstestmedia1.blob.core.windows.net/azure-media/articles/site-recovery/media/site-recovery-exclude-disk/pagefile-on-Azure-vm-after-failover-2.png)

## <a name="next-steps"></a><span data-ttu-id="bfa93-412">Next steps</span><span class="sxs-lookup"><span data-stu-id="bfa93-412">Next steps</span></span>
<span data-ttu-id="bfa93-413">After your deployment is set up and running, [learn more](site-recovery-failover.md) about different types of failover.</span><span class="sxs-lookup"><span data-stu-id="bfa93-413">After your deployment is set up and running, [learn more](site-recovery-failover.md) about different types of failover.</span></span>






