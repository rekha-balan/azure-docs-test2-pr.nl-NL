---
title: Replicate a multi-tier IIS-based web application using Azure Site Recovery | Microsoft Docs
description: Learn how to replicate IIS web farm virtual machines using Azure Site Recovery.
services: site-recovery
author: nsoneji
manager: gauravd
ms.service: site-recovery
ms.topic: article
ms.date: 07/06/2018
ms.author: nisoneji
ms.openlocfilehash: 830ced767a34302a635b9e685a2aee60c95fc81f
ms.sourcegitcommit: d1451406a010fd3aa854dc8e5b77dc5537d8050e
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 09/13/2018
ms.locfileid: "44776691"
---
# <a name="replicate-a-multi-tier-iis-based-web-application"></a><span data-ttu-id="a9855-103">Replicate a multi-tier IIS-based web application</span><span class="sxs-lookup"><span data-stu-id="a9855-103">Replicate a multi-tier IIS-based web application</span></span>

<span data-ttu-id="a9855-104">Application software is the engine of business productivity in an organization.</span><span class="sxs-lookup"><span data-stu-id="a9855-104">Application software is the engine of business productivity in an organization.</span></span> <span data-ttu-id="a9855-105">Various web applications can serve different purposes in an organization.</span><span class="sxs-lookup"><span data-stu-id="a9855-105">Various web applications can serve different purposes in an organization.</span></span> <span data-ttu-id="a9855-106">Some applications, like applications used for payroll processing, financial applications, and customer-facing websites, might be critical to an organization.</span><span class="sxs-lookup"><span data-stu-id="a9855-106">Some applications, like applications used for payroll processing, financial applications, and customer-facing websites, might be critical to an organization.</span></span> <span data-ttu-id="a9855-107">To prevent loss of productivity, it's important for the organization to have these applications continuously up and running.</span><span class="sxs-lookup"><span data-stu-id="a9855-107">To prevent loss of productivity, it's important for the organization to have these applications continuously up and running.</span></span> <span data-ttu-id="a9855-108">More importantly, having these applications consistently available can help prevent damage to the brand or image of the organization.</span><span class="sxs-lookup"><span data-stu-id="a9855-108">More importantly, having these applications consistently available can help prevent damage to the brand or image of the organization.</span></span>

<span data-ttu-id="a9855-109">Critical web applications are typically set up as multi-tier applications: the web, database, and application are on different tiers.</span><span class="sxs-lookup"><span data-stu-id="a9855-109">Critical web applications are typically set up as multi-tier applications: the web, database, and application are on different tiers.</span></span> <span data-ttu-id="a9855-110">In addition to being spread across various tiers, the applications might also use multiple servers in each tier to load balance the traffic.</span><span class="sxs-lookup"><span data-stu-id="a9855-110">In addition to being spread across various tiers, the applications might also use multiple servers in each tier to load balance the traffic.</span></span> <span data-ttu-id="a9855-111">Moreover, the mappings between various tiers and on the web server might be based on static IP addresses.</span><span class="sxs-lookup"><span data-stu-id="a9855-111">Moreover, the mappings between various tiers and on the web server might be based on static IP addresses.</span></span> <span data-ttu-id="a9855-112">On failover, some of these mappings need to be updated, especially if multiple websites are configured on the web server.</span><span class="sxs-lookup"><span data-stu-id="a9855-112">On failover, some of these mappings need to be updated, especially if multiple websites are configured on the web server.</span></span> <span data-ttu-id="a9855-113">If web applications use SSL, you must update certificate bindings.</span><span class="sxs-lookup"><span data-stu-id="a9855-113">If web applications use SSL, you must update certificate bindings.</span></span>

<span data-ttu-id="a9855-114">Traditional recovery methods that aren't based on replication involve backing up various configuration files, registry settings, bindings, custom components (COM or .NET), content, and certificates.</span><span class="sxs-lookup"><span data-stu-id="a9855-114">Traditional recovery methods that aren't based on replication involve backing up various configuration files, registry settings, bindings, custom components (COM or .NET), content, and certificates.</span></span> <span data-ttu-id="a9855-115">Files are recovered through a set of manual steps.</span><span class="sxs-lookup"><span data-stu-id="a9855-115">Files are recovered through a set of manual steps.</span></span> <span data-ttu-id="a9855-116">The traditional recovery methods of backing up and manually recovering files are cumbersome, error-prone, and not scalable.</span><span class="sxs-lookup"><span data-stu-id="a9855-116">The traditional recovery methods of backing up and manually recovering files are cumbersome, error-prone, and not scalable.</span></span> <span data-ttu-id="a9855-117">For example, you might easily forget to back up certificates.</span><span class="sxs-lookup"><span data-stu-id="a9855-117">For example, you might easily forget to back up certificates.</span></span> <span data-ttu-id="a9855-118">After failover, you're left with no choice but to buy new certificates for the server.</span><span class="sxs-lookup"><span data-stu-id="a9855-118">After failover, you're left with no choice but to buy new certificates for the server.</span></span>

<span data-ttu-id="a9855-119">A good disaster recovery solution supports modeling recovery plans for complex application architectures.</span><span class="sxs-lookup"><span data-stu-id="a9855-119">A good disaster recovery solution supports modeling recovery plans for complex application architectures.</span></span> <span data-ttu-id="a9855-120">You should also be able to add customized steps to the recovery plan to handle application mappings between tiers.</span><span class="sxs-lookup"><span data-stu-id="a9855-120">You should also be able to add customized steps to the recovery plan to handle application mappings between tiers.</span></span> <span data-ttu-id="a9855-121">If there is a disaster, application mappings provide a single-click, sure-shot solution that helps lead to a lower RTO.</span><span class="sxs-lookup"><span data-stu-id="a9855-121">If there is a disaster, application mappings provide a single-click, sure-shot solution that helps lead to a lower RTO.</span></span>

<span data-ttu-id="a9855-122">This article describes how to protect a web application that's based on Internet Information Services (IIS)  by using [Azure Site Recovery](site-recovery-overview.md).</span><span class="sxs-lookup"><span data-stu-id="a9855-122">This article describes how to protect a web application that's based on Internet Information Services (IIS)  by using [Azure Site Recovery](site-recovery-overview.md).</span></span> <span data-ttu-id="a9855-123">The article covers best practices for replicating a three-tier, IIS-based web application to Azure, how to do a disaster recovery drill, and how to fail over the application to Azure.</span><span class="sxs-lookup"><span data-stu-id="a9855-123">The article covers best practices for replicating a three-tier, IIS-based web application to Azure, how to do a disaster recovery drill, and how to fail over the application to Azure.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="a9855-124">Prerequisites</span><span class="sxs-lookup"><span data-stu-id="a9855-124">Prerequisites</span></span>

<span data-ttu-id="a9855-125">Before you begin, ensure that you know how to do the following tasks:</span><span class="sxs-lookup"><span data-stu-id="a9855-125">Before you begin, ensure that you know how to do the following tasks:</span></span>

* [<span data-ttu-id="a9855-126">Replicate a virtual machine to Azure</span><span class="sxs-lookup"><span data-stu-id="a9855-126">Replicate a virtual machine to Azure</span></span>](vmware-azure-tutorial.md)
* [<span data-ttu-id="a9855-127">Design a recovery network</span><span class="sxs-lookup"><span data-stu-id="a9855-127">Design a recovery network</span></span>](site-recovery-network-design.md)
* [<span data-ttu-id="a9855-128">Do a test failover to Azure</span><span class="sxs-lookup"><span data-stu-id="a9855-128">Do a test failover to Azure</span></span>](site-recovery-test-failover-to-azure.md)
* [<span data-ttu-id="a9855-129">Do a failover to Azure</span><span class="sxs-lookup"><span data-stu-id="a9855-129">Do a failover to Azure</span></span>](site-recovery-failover.md)
* [<span data-ttu-id="a9855-130">Replicate a domain controller</span><span class="sxs-lookup"><span data-stu-id="a9855-130">Replicate a domain controller</span></span>](site-recovery-active-directory.md)
* [<span data-ttu-id="a9855-131">Replicate SQL Server</span><span class="sxs-lookup"><span data-stu-id="a9855-131">Replicate SQL Server</span></span>](site-recovery-sql.md)

## <a name="deployment-patterns"></a><span data-ttu-id="a9855-132">Deployment patterns</span><span class="sxs-lookup"><span data-stu-id="a9855-132">Deployment patterns</span></span>
<span data-ttu-id="a9855-133">An IIS-based web application typically follows one of the following deployment patterns:</span><span class="sxs-lookup"><span data-stu-id="a9855-133">An IIS-based web application typically follows one of the following deployment patterns:</span></span>

<span data-ttu-id="a9855-134">**Deployment pattern 1**</span><span class="sxs-lookup"><span data-stu-id="a9855-134">**Deployment pattern 1**</span></span>

<span data-ttu-id="a9855-135">An IIS-based web farm with Application Request Routing (ARR), an IIS server, and SQL Server.</span><span class="sxs-lookup"><span data-stu-id="a9855-135">An IIS-based web farm with Application Request Routing (ARR), an IIS server, and SQL Server.</span></span>

![Diagram of an IIS-based web farm that has three tiers](./media/site-recovery-iis/deployment-pattern1.png)

<span data-ttu-id="a9855-137">**Deployment pattern 2**</span><span class="sxs-lookup"><span data-stu-id="a9855-137">**Deployment pattern 2**</span></span>

<span data-ttu-id="a9855-138">An IIS-based web farm with ARR, an IIS server, an application server, and SQL Server.</span><span class="sxs-lookup"><span data-stu-id="a9855-138">An IIS-based web farm with ARR, an IIS server, an application server, and SQL Server.</span></span>

![Diagram of an IIS-based web farm that has four tiers](./media/site-recovery-iis/deployment-pattern2.png)

## <a name="site-recovery-support"></a><span data-ttu-id="a9855-140">Site Recovery support</span><span class="sxs-lookup"><span data-stu-id="a9855-140">Site Recovery support</span></span>

<span data-ttu-id="a9855-141">For the examples in this article, we use VMware virtual machines with IIS 7.5 on Windows Server 2012 R2 Enterprise.</span><span class="sxs-lookup"><span data-stu-id="a9855-141">For the examples in this article, we use VMware virtual machines with IIS 7.5 on Windows Server 2012 R2 Enterprise.</span></span> <span data-ttu-id="a9855-142">Because Site Recovery replication isn't application-specific, the recommendations in this article are expected to apply in the scenarios listed in the following table, and for different versions of IIS.</span><span class="sxs-lookup"><span data-stu-id="a9855-142">Because Site Recovery replication isn't application-specific, the recommendations in this article are expected to apply in the scenarios listed in the following table, and for different versions of IIS.</span></span>

### <a name="source-and-target"></a><span data-ttu-id="a9855-143">Source and target</span><span class="sxs-lookup"><span data-stu-id="a9855-143">Source and target</span></span>

<span data-ttu-id="a9855-144">Scenario</span><span class="sxs-lookup"><span data-stu-id="a9855-144">Scenario</span></span> | <span data-ttu-id="a9855-145">To a secondary site</span><span class="sxs-lookup"><span data-stu-id="a9855-145">To a secondary site</span></span> | <span data-ttu-id="a9855-146">To Azure</span><span class="sxs-lookup"><span data-stu-id="a9855-146">To Azure</span></span>
--- | --- | ---
<span data-ttu-id="a9855-147">Hyper-V</span><span class="sxs-lookup"><span data-stu-id="a9855-147">Hyper-V</span></span> | <span data-ttu-id="a9855-148">Yes</span><span class="sxs-lookup"><span data-stu-id="a9855-148">Yes</span></span> | <span data-ttu-id="a9855-149">Yes</span><span class="sxs-lookup"><span data-stu-id="a9855-149">Yes</span></span>
<span data-ttu-id="a9855-150">VMware</span><span class="sxs-lookup"><span data-stu-id="a9855-150">VMware</span></span> | <span data-ttu-id="a9855-151">Yes</span><span class="sxs-lookup"><span data-stu-id="a9855-151">Yes</span></span> | <span data-ttu-id="a9855-152">Yes</span><span class="sxs-lookup"><span data-stu-id="a9855-152">Yes</span></span>
<span data-ttu-id="a9855-153">Physical server</span><span class="sxs-lookup"><span data-stu-id="a9855-153">Physical server</span></span> | <span data-ttu-id="a9855-154">No</span><span class="sxs-lookup"><span data-stu-id="a9855-154">No</span></span> | <span data-ttu-id="a9855-155">Yes</span><span class="sxs-lookup"><span data-stu-id="a9855-155">Yes</span></span>
<span data-ttu-id="a9855-156">Azure</span><span class="sxs-lookup"><span data-stu-id="a9855-156">Azure</span></span>|<span data-ttu-id="a9855-157">NA</span><span class="sxs-lookup"><span data-stu-id="a9855-157">NA</span></span>|<span data-ttu-id="a9855-158">Yes</span><span class="sxs-lookup"><span data-stu-id="a9855-158">Yes</span></span>

## <a name="replicate-virtual-machines"></a><span data-ttu-id="a9855-159">Replicate virtual machines</span><span class="sxs-lookup"><span data-stu-id="a9855-159">Replicate virtual machines</span></span>

<span data-ttu-id="a9855-160">To start replicating all the IIS web farm virtual machines to Azure, follow the guidance in [Test failover to Azure in Site Recovery](site-recovery-test-failover-to-azure.md).</span><span class="sxs-lookup"><span data-stu-id="a9855-160">To start replicating all the IIS web farm virtual machines to Azure, follow the guidance in [Test failover to Azure in Site Recovery](site-recovery-test-failover-to-azure.md).</span></span>

<span data-ttu-id="a9855-161">If you are using a static IP address, you can specify the IP address that you want the virtual machine to take.</span><span class="sxs-lookup"><span data-stu-id="a9855-161">If you are using a static IP address, you can specify the IP address that you want the virtual machine to take.</span></span> <span data-ttu-id="a9855-162">To set the IP address, go to  **Compute and Network settings** > **TARGET IP**.</span><span class="sxs-lookup"><span data-stu-id="a9855-162">To set the IP address, go to  **Compute and Network settings** > **TARGET IP**.</span></span>

![Screenshot that shows how to set the target IP in the Site Recovery Compute and Network pane](./media/site-recovery-active-directory/dns-target-ip.png)

## <a name="create-a-recovery-plan"></a><span data-ttu-id="a9855-164">Create a recovery plan</span><span class="sxs-lookup"><span data-stu-id="a9855-164">Create a recovery plan</span></span>
<span data-ttu-id="a9855-165">A recovery plan supports the sequencing of various tiers in a multi-tier application during a failover.</span><span class="sxs-lookup"><span data-stu-id="a9855-165">A recovery plan supports the sequencing of various tiers in a multi-tier application during a failover.</span></span> <span data-ttu-id="a9855-166">Sequencing helps maintain application consistency.</span><span class="sxs-lookup"><span data-stu-id="a9855-166">Sequencing helps maintain application consistency.</span></span> <span data-ttu-id="a9855-167">When you create a recovery plan for a multi-tier web application, complete the steps described in [Create a recovery plan by using Site Recovery](site-recovery-create-recovery-plans.md).</span><span class="sxs-lookup"><span data-stu-id="a9855-167">When you create a recovery plan for a multi-tier web application, complete the steps described in [Create a recovery plan by using Site Recovery](site-recovery-create-recovery-plans.md).</span></span>

### <a name="add-virtual-machines-to-failover-groups"></a><span data-ttu-id="a9855-168">Add virtual machines to failover groups</span><span class="sxs-lookup"><span data-stu-id="a9855-168">Add virtual machines to failover groups</span></span>
<span data-ttu-id="a9855-169">A typical multi-tier IIS web application consists of the following components:</span><span class="sxs-lookup"><span data-stu-id="a9855-169">A typical multi-tier IIS web application consists of the following components:</span></span>
* <span data-ttu-id="a9855-170">A database tier that has SQL virtual machines.</span><span class="sxs-lookup"><span data-stu-id="a9855-170">A database tier that has SQL virtual machines.</span></span>
* <span data-ttu-id="a9855-171">The web tier, which consists of an IIS server and an application tier.</span><span class="sxs-lookup"><span data-stu-id="a9855-171">The web tier, which consists of an IIS server and an application tier.</span></span> 

<span data-ttu-id="a9855-172">Add virtual machines to different groups based on the tier:</span><span class="sxs-lookup"><span data-stu-id="a9855-172">Add virtual machines to different groups based on the tier:</span></span>

1. <span data-ttu-id="a9855-173">Create a recovery plan.</span><span class="sxs-lookup"><span data-stu-id="a9855-173">Create a recovery plan.</span></span> <span data-ttu-id="a9855-174">Add the database tier virtual machines under Group 1.</span><span class="sxs-lookup"><span data-stu-id="a9855-174">Add the database tier virtual machines under Group 1.</span></span> <span data-ttu-id="a9855-175">This ensures that database tier virtual machines are shut down last and brought up first.</span><span class="sxs-lookup"><span data-stu-id="a9855-175">This ensures that database tier virtual machines are shut down last and brought up first.</span></span>
1. <span data-ttu-id="a9855-176">Add the application tier virtual machines under Group 2.</span><span class="sxs-lookup"><span data-stu-id="a9855-176">Add the application tier virtual machines under Group 2.</span></span> <span data-ttu-id="a9855-177">This ensures that application tier virtual machines are brought up after the database tier has been brought up.</span><span class="sxs-lookup"><span data-stu-id="a9855-177">This ensures that application tier virtual machines are brought up after the database tier has been brought up.</span></span>
1. <span data-ttu-id="a9855-178">Add the web tier virtual machines in Group 3.</span><span class="sxs-lookup"><span data-stu-id="a9855-178">Add the web tier virtual machines in Group 3.</span></span> <span data-ttu-id="a9855-179">This ensures that web tier virtual machines are brought up after the application tier has been brought up.</span><span class="sxs-lookup"><span data-stu-id="a9855-179">This ensures that web tier virtual machines are brought up after the application tier has been brought up.</span></span>
1. <span data-ttu-id="a9855-180">Add load balance virtual machines in Group 4.</span><span class="sxs-lookup"><span data-stu-id="a9855-180">Add load balance virtual machines in Group 4.</span></span> <span data-ttu-id="a9855-181">This ensures that load balance virtual machines are brought up after the web tier has been brought up.</span><span class="sxs-lookup"><span data-stu-id="a9855-181">This ensures that load balance virtual machines are brought up after the web tier has been brought up.</span></span>

<span data-ttu-id="a9855-182">For more information, see [Customize the recovery plan](site-recovery-runbook-automation.md#customize-the-recovery-plan).</span><span class="sxs-lookup"><span data-stu-id="a9855-182">For more information, see [Customize the recovery plan](site-recovery-runbook-automation.md#customize-the-recovery-plan).</span></span>


### <a name="add-a-script-to-the-recovery-plan"></a><span data-ttu-id="a9855-183">Add a script to the recovery plan</span><span class="sxs-lookup"><span data-stu-id="a9855-183">Add a script to the recovery plan</span></span>
<span data-ttu-id="a9855-184">For the IIS web farm to function correctly, you might need to do some operations on the Azure virtual machines post-failover or during a test failover.</span><span class="sxs-lookup"><span data-stu-id="a9855-184">For the IIS web farm to function correctly, you might need to do some operations on the Azure virtual machines post-failover or during a test failover.</span></span> <span data-ttu-id="a9855-185">You can automate some post-failover operations.</span><span class="sxs-lookup"><span data-stu-id="a9855-185">You can automate some post-failover operations.</span></span> <span data-ttu-id="a9855-186">For example, you can update the DNS entry, change a site binding, or change a connection string by adding corresponding scripts to the recovery plan.</span><span class="sxs-lookup"><span data-stu-id="a9855-186">For example, you can update the DNS entry, change a site binding, or change a connection string by adding corresponding scripts to the recovery plan.</span></span> <span data-ttu-id="a9855-187">[Add a VMM script to a recovery plan](site-recovery-how-to-add-vmmscript.md) describes how to set up automated tasks by using a script.</span><span class="sxs-lookup"><span data-stu-id="a9855-187">[Add a VMM script to a recovery plan](site-recovery-how-to-add-vmmscript.md) describes how to set up automated tasks by using a script.</span></span>

#### <a name="dns-update"></a><span data-ttu-id="a9855-188">DNS update</span><span class="sxs-lookup"><span data-stu-id="a9855-188">DNS update</span></span>
<span data-ttu-id="a9855-189">If DNS is configured for dynamic DNS update, virtual machines usually update the DNS with the new IP address when they start.</span><span class="sxs-lookup"><span data-stu-id="a9855-189">If DNS is configured for dynamic DNS update, virtual machines usually update the DNS with the new IP address when they start.</span></span> <span data-ttu-id="a9855-190">If you want to add an explicit step to update DNS with the new IP addresses of the virtual machines, add a [script to update IP in DNS](https://aka.ms/asr-dns-update) as a post-failover action on recovery plan groups.</span><span class="sxs-lookup"><span data-stu-id="a9855-190">If you want to add an explicit step to update DNS with the new IP addresses of the virtual machines, add a [script to update IP in DNS](https://aka.ms/asr-dns-update) as a post-failover action on recovery plan groups.</span></span>  

#### <a name="connection-string-in-an-applications-webconfig"></a><span data-ttu-id="a9855-191">Connection string in an application’s web.config</span><span class="sxs-lookup"><span data-stu-id="a9855-191">Connection string in an application’s web.config</span></span>
<span data-ttu-id="a9855-192">The connection string specifies the database that the website communicates with.</span><span class="sxs-lookup"><span data-stu-id="a9855-192">The connection string specifies the database that the website communicates with.</span></span> <span data-ttu-id="a9855-193">If the connection string carries the name of the database virtual machine, no further steps are needed post-failover.</span><span class="sxs-lookup"><span data-stu-id="a9855-193">If the connection string carries the name of the database virtual machine, no further steps are needed post-failover.</span></span> <span data-ttu-id="a9855-194">The application can automatically communicate with the database.</span><span class="sxs-lookup"><span data-stu-id="a9855-194">The application can automatically communicate with the database.</span></span> <span data-ttu-id="a9855-195">Also, if the IP address for the database virtual machine is retained, it doesn't be need to update the connection string.</span><span class="sxs-lookup"><span data-stu-id="a9855-195">Also, if the IP address for the database virtual machine is retained, it doesn't be need to update the connection string.</span></span> 

<span data-ttu-id="a9855-196">If the connection string refers to the database virtual machine by using an IP address, it needs to be updated post-failover.</span><span class="sxs-lookup"><span data-stu-id="a9855-196">If the connection string refers to the database virtual machine by using an IP address, it needs to be updated post-failover.</span></span> <span data-ttu-id="a9855-197">For example, the following connection string points to the database with the IP address 127.0.1.2:</span><span class="sxs-lookup"><span data-stu-id="a9855-197">For example, the following connection string points to the database with the IP address 127.0.1.2:</span></span>

        <?xml version="1.0" encoding="utf-8"?>
        <configuration>
        <connectionStrings>
        <add name="ConnStringDb1" connectionString="Data Source= 127.0.1.2\SqlExpress; Initial Catalog=TestDB1;Integrated Security=False;" />
        </connectionStrings>
        </configuration>

<span data-ttu-id="a9855-198">To update the connection string in the web tier, add an [IIS connection update script](https://aka.ms/asr-update-webtier-script-classic) after Group 3 in the recovery plan.</span><span class="sxs-lookup"><span data-stu-id="a9855-198">To update the connection string in the web tier, add an [IIS connection update script](https://aka.ms/asr-update-webtier-script-classic) after Group 3 in the recovery plan.</span></span>

#### <a name="site-bindings-for-the-application"></a><span data-ttu-id="a9855-199">Site bindings for the application</span><span class="sxs-lookup"><span data-stu-id="a9855-199">Site bindings for the application</span></span>
<span data-ttu-id="a9855-200">Every site consists of binding information.</span><span class="sxs-lookup"><span data-stu-id="a9855-200">Every site consists of binding information.</span></span> <span data-ttu-id="a9855-201">The binding information includes the type of binding, the IP address at which the IIS server listens to the requests for the site, the port number, and the host names for the site.</span><span class="sxs-lookup"><span data-stu-id="a9855-201">The binding information includes the type of binding, the IP address at which the IIS server listens to the requests for the site, the port number, and the host names for the site.</span></span> <span data-ttu-id="a9855-202">During the failover, you might need to update these bindings if there's a change in the IP address that's associated with them.</span><span class="sxs-lookup"><span data-stu-id="a9855-202">During the failover, you might need to update these bindings if there's a change in the IP address that's associated with them.</span></span>

> [!NOTE]
>
> <span data-ttu-id="a9855-203">If you set the site binding to **All unassigned**, you don't need to update this binding post-failover.</span><span class="sxs-lookup"><span data-stu-id="a9855-203">If you set the site binding to **All unassigned**, you don't need to update this binding post-failover.</span></span> <span data-ttu-id="a9855-204">Also, if the IP address associated with a site isn't changed post-failover, you don't need to update the site binding.</span><span class="sxs-lookup"><span data-stu-id="a9855-204">Also, if the IP address associated with a site isn't changed post-failover, you don't need to update the site binding.</span></span> <span data-ttu-id="a9855-205">(The retention of the IP address depends on the network architecture and subnets assigned to the primary and recovery sites.</span><span class="sxs-lookup"><span data-stu-id="a9855-205">(The retention of the IP address depends on the network architecture and subnets assigned to the primary and recovery sites.</span></span> <span data-ttu-id="a9855-206">Updating them might not be feasible for your organization.)</span><span class="sxs-lookup"><span data-stu-id="a9855-206">Updating them might not be feasible for your organization.)</span></span>

![Screenshot that shows setting the SSL binding](./media/site-recovery-iis/sslbinding.png)

<span data-ttu-id="a9855-208">If you associated the IP address with a site, update all site bindings with the new IP address.</span><span class="sxs-lookup"><span data-stu-id="a9855-208">If you associated the IP address with a site, update all site bindings with the new IP address.</span></span> <span data-ttu-id="a9855-209">To change the site bindings, add an [IIS web tier update script](https://aka.ms/asr-web-tier-update-runbook-classic) after Group 3 in the recovery plan.</span><span class="sxs-lookup"><span data-stu-id="a9855-209">To change the site bindings, add an [IIS web tier update script](https://aka.ms/asr-web-tier-update-runbook-classic) after Group 3 in the recovery plan.</span></span>

#### <a name="update-the-load-balancer-ip-address"></a><span data-ttu-id="a9855-210">Update the load balancer IP address</span><span class="sxs-lookup"><span data-stu-id="a9855-210">Update the load balancer IP address</span></span>
<span data-ttu-id="a9855-211">If you have an ARR virtual machine, to update the IP address, add an [IIS ARR  failover script](https://aka.ms/asr-iis-arrtier-failover-script-classic) after Group 4.</span><span class="sxs-lookup"><span data-stu-id="a9855-211">If you have an ARR virtual machine, to update the IP address, add an [IIS ARR  failover script](https://aka.ms/asr-iis-arrtier-failover-script-classic) after Group 4.</span></span>

#### <a name="ssl-certificate-binding-for-an-https-connection"></a><span data-ttu-id="a9855-212">SSL certificate binding for an HTTPS connection</span><span class="sxs-lookup"><span data-stu-id="a9855-212">SSL certificate binding for an HTTPS connection</span></span>
<span data-ttu-id="a9855-213">A website might have an associated SSL certificate that helps ensure a secure communication between the web server and the user’s browser.</span><span class="sxs-lookup"><span data-stu-id="a9855-213">A website might have an associated SSL certificate that helps ensure a secure communication between the web server and the user’s browser.</span></span> <span data-ttu-id="a9855-214">If the website has an HTTPS connection, and also has an associated HTTPS site binding to the IP address of the IIS server with an SSL certificate binding, you must add a new site binding  for the certificate with the IP address of the IIS virtual machine post-failover.</span><span class="sxs-lookup"><span data-stu-id="a9855-214">If the website has an HTTPS connection, and also has an associated HTTPS site binding to the IP address of the IIS server with an SSL certificate binding, you must add a new site binding  for the certificate with the IP address of the IIS virtual machine post-failover.</span></span>

<span data-ttu-id="a9855-215">The SSL certificate can be issued against these components:</span><span class="sxs-lookup"><span data-stu-id="a9855-215">The SSL certificate can be issued against these components:</span></span>

* <span data-ttu-id="a9855-216">The fully qualified domain name of the website.</span><span class="sxs-lookup"><span data-stu-id="a9855-216">The fully qualified domain name of the website.</span></span>
* <span data-ttu-id="a9855-217">The name of the server.</span><span class="sxs-lookup"><span data-stu-id="a9855-217">The name of the server.</span></span>
* <span data-ttu-id="a9855-218">A wildcard certificate for the domain name.</span><span class="sxs-lookup"><span data-stu-id="a9855-218">A wildcard certificate for the domain name.</span></span>  
* <span data-ttu-id="a9855-219">An IP address.</span><span class="sxs-lookup"><span data-stu-id="a9855-219">An IP address.</span></span> <span data-ttu-id="a9855-220">If the SSL certificate is issued against the IP address of the IIS server, another SSL certificate needs to be issued against the IP address of the IIS server on the Azure site.</span><span class="sxs-lookup"><span data-stu-id="a9855-220">If the SSL certificate is issued against the IP address of the IIS server, another SSL certificate needs to be issued against the IP address of the IIS server on the Azure site.</span></span> <span data-ttu-id="a9855-221">An additional SSL binding for this certificate needs to be created.</span><span class="sxs-lookup"><span data-stu-id="a9855-221">An additional SSL binding for this certificate needs to be created.</span></span> <span data-ttu-id="a9855-222">Because of this, we recommend not using an SSL certificate issued against the IP address.</span><span class="sxs-lookup"><span data-stu-id="a9855-222">Because of this, we recommend not using an SSL certificate issued against the IP address.</span></span> <span data-ttu-id="a9855-223">This option is less widely used and will soon be deprecated in accordance with new certificate authority/browser forum changes.</span><span class="sxs-lookup"><span data-stu-id="a9855-223">This option is less widely used and will soon be deprecated in accordance with new certificate authority/browser forum changes.</span></span>

#### <a name="update-the-dependency-between-the-web-tier-and-the-application-tier"></a><span data-ttu-id="a9855-224">Update the dependency between the web tier and the application tier</span><span class="sxs-lookup"><span data-stu-id="a9855-224">Update the dependency between the web tier and the application tier</span></span>
<span data-ttu-id="a9855-225">If you have an application-specific dependency that's based on the IP address of the virtual machines, you must update this dependency post-failover.</span><span class="sxs-lookup"><span data-stu-id="a9855-225">If you have an application-specific dependency that's based on the IP address of the virtual machines, you must update this dependency post-failover.</span></span>

## <a name="run-a-test-failover"></a><span data-ttu-id="a9855-226">Run a test failover</span><span class="sxs-lookup"><span data-stu-id="a9855-226">Run a test failover</span></span>

1. <span data-ttu-id="a9855-227">In the Azure portal, select your Recovery Services vault.</span><span class="sxs-lookup"><span data-stu-id="a9855-227">In the Azure portal, select your Recovery Services vault.</span></span>
2. <span data-ttu-id="a9855-228">Select the recovery plan that you created for the IIS web farm.</span><span class="sxs-lookup"><span data-stu-id="a9855-228">Select the recovery plan that you created for the IIS web farm.</span></span>
3. <span data-ttu-id="a9855-229">Select **Test Failover**.</span><span class="sxs-lookup"><span data-stu-id="a9855-229">Select **Test Failover**.</span></span>
4. <span data-ttu-id="a9855-230">To start the test failover process, select the recovery point and the Azure virtual network.</span><span class="sxs-lookup"><span data-stu-id="a9855-230">To start the test failover process, select the recovery point and the Azure virtual network.</span></span>
5. <span data-ttu-id="a9855-231">When the secondary environment is up, you can perform validations.</span><span class="sxs-lookup"><span data-stu-id="a9855-231">When the secondary environment is up, you can perform validations.</span></span>
6. <span data-ttu-id="a9855-232">When validations are complete, to clean the test failover environment, select **Validations complete**.</span><span class="sxs-lookup"><span data-stu-id="a9855-232">When validations are complete, to clean the test failover environment, select **Validations complete**.</span></span>

<span data-ttu-id="a9855-233">For more information, see [Test failover to Azure in Site Recovery](site-recovery-test-failover-to-azure.md).</span><span class="sxs-lookup"><span data-stu-id="a9855-233">For more information, see [Test failover to Azure in Site Recovery](site-recovery-test-failover-to-azure.md).</span></span>

## <a name="run-a-failover"></a><span data-ttu-id="a9855-234">Run a failover</span><span class="sxs-lookup"><span data-stu-id="a9855-234">Run a failover</span></span>

1. <span data-ttu-id="a9855-235">In the Azure portal, select your Recovery Services vault.</span><span class="sxs-lookup"><span data-stu-id="a9855-235">In the Azure portal, select your Recovery Services vault.</span></span>
1. <span data-ttu-id="a9855-236">Select the recovery plan that you created for the IIS web farm.</span><span class="sxs-lookup"><span data-stu-id="a9855-236">Select the recovery plan that you created for the IIS web farm.</span></span>
1. <span data-ttu-id="a9855-237">Select **Failover**.</span><span class="sxs-lookup"><span data-stu-id="a9855-237">Select **Failover**.</span></span>
1. <span data-ttu-id="a9855-238">To start the failover process, select the recovery point.</span><span class="sxs-lookup"><span data-stu-id="a9855-238">To start the failover process, select the recovery point.</span></span>

<span data-ttu-id="a9855-239">For more information, see [Failover in Site Recovery](site-recovery-failover.md).</span><span class="sxs-lookup"><span data-stu-id="a9855-239">For more information, see [Failover in Site Recovery](site-recovery-failover.md).</span></span>

## <a name="next-steps"></a><span data-ttu-id="a9855-240">Next steps</span><span class="sxs-lookup"><span data-stu-id="a9855-240">Next steps</span></span>
* <span data-ttu-id="a9855-241">Learn more about [replicating other applications](site-recovery-workload.md) by using Site Recovery.</span><span class="sxs-lookup"><span data-stu-id="a9855-241">Learn more about [replicating other applications](site-recovery-workload.md) by using Site Recovery.</span></span>
