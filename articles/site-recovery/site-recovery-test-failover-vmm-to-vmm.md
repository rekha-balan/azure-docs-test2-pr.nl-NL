---
title: Test Failover (VMM to VMM) in Site Recovery (Azure) | Microsoft Docs
description: Azure Site Recovery coordinates the replication, failover and recovery of virtual machines and physical servers. Learn about failover to Azure or a secondary datacenter.
services: site-recovery
documentationcenter: ''
author: prateek9us
manager: gauravd
editor: ''
ms.assetid: 44813a48-c680-4581-a92e-cecc57cc3b1e
ms.service: site-recovery
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: storage-backup-recovery
ms.date: 2/15/2017
ms.author: pratshar
ms.openlocfilehash: b7e70b6b73a61ae7b9a99bd37bb7bee6a74397a2
ms.sourcegitcommit: 5b9d839c0c0a94b293fdafe1d6e5429506c07e05
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 08/02/2018
ms.locfileid: "44563347"
---
# <a name="test-failover-vmm-to-vmm-in-site-recovery"></a><span data-ttu-id="ec053-104">Test Failover (VMM to VMM) in Site Recovery</span><span class="sxs-lookup"><span data-stu-id="ec053-104">Test Failover (VMM to VMM) in Site Recovery</span></span>
> [!div class="op_single_selector"]
> * [Test Failover to Azure](./site-recovery-test-failover-to-azure.md)
> * [Test Failover (VMM to VMM)](./site-recovery-test-failover-vmm-to-vmm.md)


<span data-ttu-id="ec053-107">This article provides information and instructions for doing a test failover or a DR drill of virtual machines and physical servers that are protected with Site Recovery using a VMM managed on-premises site as the recovery site.</span><span class="sxs-lookup"><span data-stu-id="ec053-107">This article provides information and instructions for doing a test failover or a DR drill of virtual machines and physical servers that are protected with Site Recovery using a VMM managed on-premises site as the recovery site.</span></span> 

<span data-ttu-id="ec053-108">Post any comments or questions at the bottom of this article, or on the [Azure Recovery Services Forum](https://social.msdn.microsoft.com/forums/azure/home?forum=hypervrecovmgr).</span><span class="sxs-lookup"><span data-stu-id="ec053-108">Post any comments or questions at the bottom of this article, or on the [Azure Recovery Services Forum](https://social.msdn.microsoft.com/forums/azure/home?forum=hypervrecovmgr).</span></span>

<span data-ttu-id="ec053-109">Test failover is run to validate your replication strategy or perform a disaster recovery drill without any data loss or downtime.</span><span class="sxs-lookup"><span data-stu-id="ec053-109">Test failover is run to validate your replication strategy or perform a disaster recovery drill without any data loss or downtime.</span></span> <span data-ttu-id="ec053-110">Doing a test failover doesn't have any impact on the ongoing replication or on your production environment.</span><span class="sxs-lookup"><span data-stu-id="ec053-110">Doing a test failover doesn't have any impact on the ongoing replication or on your production environment.</span></span> <span data-ttu-id="ec053-111">Test failover can be done either on a virtual machine or a [recovery plan](site-recovery-create-recovery-plans.md).</span><span class="sxs-lookup"><span data-stu-id="ec053-111">Test failover can be done either on a virtual machine or a [recovery plan](site-recovery-create-recovery-plans.md).</span></span> <span data-ttu-id="ec053-112">When triggering a test failover you need to specify the network to which test virtual machines would connect to.</span><span class="sxs-lookup"><span data-stu-id="ec053-112">When triggering a test failover you need to specify the network to which test virtual machines would connect to.</span></span> <span data-ttu-id="ec053-113">Once a test failover is triggered you can track progress in the **Jobs** page.</span><span class="sxs-lookup"><span data-stu-id="ec053-113">Once a test failover is triggered you can track progress in the **Jobs** page.</span></span>  


## <a name="preparing-infrastructure-for-test-failover"></a><span data-ttu-id="ec053-114">Preparing infrastructure for test failover</span><span class="sxs-lookup"><span data-stu-id="ec053-114">Preparing infrastructure for test failover</span></span>
* <span data-ttu-id="ec053-115">If you want to run a test failover using an existing network, prepare Active Directory, DHCP, and DNS in that network.</span><span class="sxs-lookup"><span data-stu-id="ec053-115">If you want to run a test failover using an existing network, prepare Active Directory, DHCP, and DNS in that network.</span></span>
* <span data-ttu-id="ec053-116">If you want to run a test failover using the option to create VM networks automatically, add manual step before Group-1 in the recovery plan you’re going to use for the test failover and then add the infrastructure resources to the automatically created network before running the test failover.</span><span class="sxs-lookup"><span data-stu-id="ec053-116">If you want to run a test failover using the option to create VM networks automatically, add manual step before Group-1 in the recovery plan you’re going to use for the test failover and then add the infrastructure resources to the automatically created network before running the test failover.</span></span>

### <a name="things-to-note"></a><span data-ttu-id="ec053-117">Things to note</span><span class="sxs-lookup"><span data-stu-id="ec053-117">Things to note</span></span>
* <span data-ttu-id="ec053-118">When replicating to a secondary site, the type of network used by the replica machine doesn’t need to match the type of logical network used for test failover, but some combinations might not work.</span><span class="sxs-lookup"><span data-stu-id="ec053-118">When replicating to a secondary site, the type of network used by the replica machine doesn’t need to match the type of logical network used for test failover, but some combinations might not work.</span></span> <span data-ttu-id="ec053-119">If the replica uses DHCP and VLAN-based isolation, the VM network for the replica doesn't need a static IP address pool.</span><span class="sxs-lookup"><span data-stu-id="ec053-119">If the replica uses DHCP and VLAN-based isolation, the VM network for the replica doesn't need a static IP address pool.</span></span> <span data-ttu-id="ec053-120">So using Windows Network Virtualization for the test failover wouldn't work because no address pools are available.</span><span class="sxs-lookup"><span data-stu-id="ec053-120">So using Windows Network Virtualization for the test failover wouldn't work because no address pools are available.</span></span> <span data-ttu-id="ec053-121">In addition test failover won't work if the replica network is No Isolation and the test network is Windows Network Virtualization.</span><span class="sxs-lookup"><span data-stu-id="ec053-121">In addition test failover won't work if the replica network is No Isolation and the test network is Windows Network Virtualization.</span></span> <span data-ttu-id="ec053-122">This is because the No Isolation network doesn't have the subnets required to create a Windows Network Virtualization network.</span><span class="sxs-lookup"><span data-stu-id="ec053-122">This is because the No Isolation network doesn't have the subnets required to create a Windows Network Virtualization network.</span></span>
* <span data-ttu-id="ec053-123">The way in which replica virtual machines are connected to mapped VM networks after failover depends on how the VM network is configured in the VMM console:</span><span class="sxs-lookup"><span data-stu-id="ec053-123">The way in which replica virtual machines are connected to mapped VM networks after failover depends on how the VM network is configured in the VMM console:</span></span>
  * <span data-ttu-id="ec053-124">**VM network configured with no isolation or VLAN isolation**—If DHCP is defined for the VM network, the replica virtual machine will be connected to the VLAN ID using the settings that are specified for the network site in the associated logical network.</span><span class="sxs-lookup"><span data-stu-id="ec053-124">**VM network configured with no isolation or VLAN isolation**—If DHCP is defined for the VM network, the replica virtual machine will be connected to the VLAN ID using the settings that are specified for the network site in the associated logical network.</span></span> <span data-ttu-id="ec053-125">The virtual machine will receive its IP address from the available DHCP server.</span><span class="sxs-lookup"><span data-stu-id="ec053-125">The virtual machine will receive its IP address from the available DHCP server.</span></span> <span data-ttu-id="ec053-126">You don't need a static IP address pool defined for the target VM network.</span><span class="sxs-lookup"><span data-stu-id="ec053-126">You don't need a static IP address pool defined for the target VM network.</span></span> <span data-ttu-id="ec053-127">If a static IP address pool is used for the VM network the replica virtual machine will be connected to the VLAN ID using the settings that are specified for the network site in the associated logical network.</span><span class="sxs-lookup"><span data-stu-id="ec053-127">If a static IP address pool is used for the VM network the replica virtual machine will be connected to the VLAN ID using the settings that are specified for the network site in the associated logical network.</span></span> <span data-ttu-id="ec053-128">The virtual machine will receive its IP address from the pool defined for the VM network.</span><span class="sxs-lookup"><span data-stu-id="ec053-128">The virtual machine will receive its IP address from the pool defined for the VM network.</span></span> <span data-ttu-id="ec053-129">If a static IP address pool isn't defined on the target VM network, IP address allocation will fail.</span><span class="sxs-lookup"><span data-stu-id="ec053-129">If a static IP address pool isn't defined on the target VM network, IP address allocation will fail.</span></span> <span data-ttu-id="ec053-130">The IP address pool should be created on both the source and target VMM servers that you are going to use for protection and recovery.</span><span class="sxs-lookup"><span data-stu-id="ec053-130">The IP address pool should be created on both the source and target VMM servers that you are going to use for protection and recovery.</span></span>
  * <span data-ttu-id="ec053-131">**VM network with Windows network virtualization**—If a VM network is configured with this setting a static pool should be defined for the target VM network, regardless of whether the source VM network is configured to use DHCP or a static IP address pool.</span><span class="sxs-lookup"><span data-stu-id="ec053-131">**VM network with Windows network virtualization**—If a VM network is configured with this setting a static pool should be defined for the target VM network, regardless of whether the source VM network is configured to use DHCP or a static IP address pool.</span></span> <span data-ttu-id="ec053-132">If you define DHCP, the target VMM server will act as a DHCP server and provide an IP address from the pool that is defined for the target VM network.</span><span class="sxs-lookup"><span data-stu-id="ec053-132">If you define DHCP, the target VMM server will act as a DHCP server and provide an IP address from the pool that is defined for the target VM network.</span></span> <span data-ttu-id="ec053-133">If use of a static IP address pool is defined for the source server, the target VMM server will allocate an IP address from the pool.</span><span class="sxs-lookup"><span data-stu-id="ec053-133">If use of a static IP address pool is defined for the source server, the target VMM server will allocate an IP address from the pool.</span></span> <span data-ttu-id="ec053-134">In both cases, IP address allocation will fail if a static IP address pool is not defined.</span><span class="sxs-lookup"><span data-stu-id="ec053-134">In both cases, IP address allocation will fail if a static IP address pool is not defined.</span></span>


### <a name="prepare-dhcp"></a><span data-ttu-id="ec053-135">Prepare DHCP</span><span class="sxs-lookup"><span data-stu-id="ec053-135">Prepare DHCP</span></span>
<span data-ttu-id="ec053-136">If the virtual machines involved in test failover use DHCP, a test DHCP server should be created within the isolated network that is created for the purpose of test failover.</span><span class="sxs-lookup"><span data-stu-id="ec053-136">If the virtual machines involved in test failover use DHCP, a test DHCP server should be created within the isolated network that is created for the purpose of test failover.</span></span>

### <a name="prepare-active-directory"></a><span data-ttu-id="ec053-137">Prepare Active Directory</span><span class="sxs-lookup"><span data-stu-id="ec053-137">Prepare Active Directory</span></span>
<span data-ttu-id="ec053-138">To run a test failover for application testing, you’ll need a copy of the production Active Directory environment in your test environment.</span><span class="sxs-lookup"><span data-stu-id="ec053-138">To run a test failover for application testing, you’ll need a copy of the production Active Directory environment in your test environment.</span></span> <span data-ttu-id="ec053-139">Go through [test failover considerations for active directory](site-recovery-active-directory.md#test-failover-considerations) section for more details.</span><span class="sxs-lookup"><span data-stu-id="ec053-139">Go through [test failover considerations for active directory](site-recovery-active-directory.md#test-failover-considerations) section for more details.</span></span> 

### <a name="prepare-dns"></a><span data-ttu-id="ec053-140">Prepare DNS</span><span class="sxs-lookup"><span data-stu-id="ec053-140">Prepare DNS</span></span>
<span data-ttu-id="ec053-141">Prepare a DNS server for the test failover as follows:</span><span class="sxs-lookup"><span data-stu-id="ec053-141">Prepare a DNS server for the test failover as follows:</span></span>

* <span data-ttu-id="ec053-142">**DHCP**—If virtual machines use DHCP, the IP address of the test DNS should be updated on the test DHCP server.</span><span class="sxs-lookup"><span data-stu-id="ec053-142">**DHCP**—If virtual machines use DHCP, the IP address of the test DNS should be updated on the test DHCP server.</span></span> <span data-ttu-id="ec053-143">If you’re using a network type of Windows Network Virtualization, the VMM server acts as the DHCP server.</span><span class="sxs-lookup"><span data-stu-id="ec053-143">If you’re using a network type of Windows Network Virtualization, the VMM server acts as the DHCP server.</span></span> <span data-ttu-id="ec053-144">Therefore, the IP address of DNS should be updated in the test failover network.</span><span class="sxs-lookup"><span data-stu-id="ec053-144">Therefore, the IP address of DNS should be updated in the test failover network.</span></span> <span data-ttu-id="ec053-145">In this case, the virtual machines will register themselves to the relevant DNS Server.</span><span class="sxs-lookup"><span data-stu-id="ec053-145">In this case, the virtual machines will register themselves to the relevant DNS Server.</span></span>
* <span data-ttu-id="ec053-146">**Static address**—If virtual machines use a static IP address, the IP address of the test DNS server should be updated in test failover network.</span><span class="sxs-lookup"><span data-stu-id="ec053-146">**Static address**—If virtual machines use a static IP address, the IP address of the test DNS server should be updated in test failover network.</span></span> <span data-ttu-id="ec053-147">You might need to update DNS with the IP address of the test virtual machines.</span><span class="sxs-lookup"><span data-stu-id="ec053-147">You might need to update DNS with the IP address of the test virtual machines.</span></span> <span data-ttu-id="ec053-148">You can use the following sample script for this purpose:</span><span class="sxs-lookup"><span data-stu-id="ec053-148">You can use the following sample script for this purpose:</span></span>

        Param(
        [string]$Zone,
        [string]$name,
        [string]$IP
        )
        $Record = Get-DnsServerResourceRecord -ZoneName $zone -Name $name
        $newrecord = $record.clone()
        $newrecord.RecordData[0].IPv4Address  =  $IP
        Set-DnsServerResourceRecord -zonename $zone -OldInputObject $record -NewInputObject $Newrecord



## <a name="run-a-test-failover"></a><span data-ttu-id="ec053-149">Run a test failover</span><span class="sxs-lookup"><span data-stu-id="ec053-149">Run a test failover</span></span>
<span data-ttu-id="ec053-150">This procedure describes how to run a test failover for a recovery plan.</span><span class="sxs-lookup"><span data-stu-id="ec053-150">This procedure describes how to run a test failover for a recovery plan.</span></span> <span data-ttu-id="ec053-151">Alternatively you can run the failover for a single virtual machine or physical server on the **Virtual Machines** tab.</span><span class="sxs-lookup"><span data-stu-id="ec053-151">Alternatively you can run the failover for a single virtual machine or physical server on the **Virtual Machines** tab.</span></span>

![Test Failover](https://docstestmedia1.blob.core.windows.net/azure-media/articles/site-recovery/media/site-recovery-test-failover-vmm-to-vmm/TestFailover.png)

1. <span data-ttu-id="ec053-153">Select **Recovery Plans** > *recoveryplan_name*.</span><span class="sxs-lookup"><span data-stu-id="ec053-153">Select **Recovery Plans** > *recoveryplan_name*.</span></span> <span data-ttu-id="ec053-154">Click **Failover** > **Test Failover**.</span><span class="sxs-lookup"><span data-stu-id="ec053-154">Click **Failover** > **Test Failover**.</span></span>
1. <span data-ttu-id="ec053-155">On the **Test Failover** blade, specify how virtual machines should be connected to networks after the test failover.</span><span class="sxs-lookup"><span data-stu-id="ec053-155">On the **Test Failover** blade, specify how virtual machines should be connected to networks after the test failover.</span></span> <span data-ttu-id="ec053-156">Look at [network options](#network-options-in-site-recovery) for more details.</span><span class="sxs-lookup"><span data-stu-id="ec053-156">Look at [network options](#network-options-in-site-recovery) for more details.</span></span>
1. <span data-ttu-id="ec053-157">Track failover progress on the **Jobs** tab.</span><span class="sxs-lookup"><span data-stu-id="ec053-157">Track failover progress on the **Jobs** tab.</span></span> 
1. <span data-ttu-id="ec053-158">After it's complete verify that the virtual machines start successfully.</span><span class="sxs-lookup"><span data-stu-id="ec053-158">After it's complete verify that the virtual machines start successfully.</span></span>
1. <span data-ttu-id="ec053-159">Once you're done, click on **Cleanup test failover** on the recovery plan.</span><span class="sxs-lookup"><span data-stu-id="ec053-159">Once you're done, click on **Cleanup test failover** on the recovery plan.</span></span> <span data-ttu-id="ec053-160">In **Notes** record and save any observations associated with the test failover.</span><span class="sxs-lookup"><span data-stu-id="ec053-160">In **Notes** record and save any observations associated with the test failover.</span></span> <span data-ttu-id="ec053-161">This will delete the virtual machines and networks that were created during test failover.</span><span class="sxs-lookup"><span data-stu-id="ec053-161">This will delete the virtual machines and networks that were created during test failover.</span></span> 


## <a name="network-options-in-site-recovery"></a><span data-ttu-id="ec053-162">Network options in Site Recovery</span><span class="sxs-lookup"><span data-stu-id="ec053-162">Network options in Site Recovery</span></span>

<span data-ttu-id="ec053-163">When you run a test failover you'll be asked to select network settings for test replica machines.</span><span class="sxs-lookup"><span data-stu-id="ec053-163">When you run a test failover you'll be asked to select network settings for test replica machines.</span></span> <span data-ttu-id="ec053-164">You have a number of options.</span><span class="sxs-lookup"><span data-stu-id="ec053-164">You have a number of options.</span></span>  

| <span data-ttu-id="ec053-165">**Test failover option**</span><span class="sxs-lookup"><span data-stu-id="ec053-165">**Test failover option**</span></span> | <span data-ttu-id="ec053-166">**Description**</span><span class="sxs-lookup"><span data-stu-id="ec053-166">**Description**</span></span> | <span data-ttu-id="ec053-167">**Failover check**</span><span class="sxs-lookup"><span data-stu-id="ec053-167">**Failover check**</span></span> | <span data-ttu-id="ec053-168">**Details**</span><span class="sxs-lookup"><span data-stu-id="ec053-168">**Details**</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="ec053-169">**Fail over to a secondary VMM site—without network**</span><span class="sxs-lookup"><span data-stu-id="ec053-169">**Fail over to a secondary VMM site—without network**</span></span> |<span data-ttu-id="ec053-170">Don't select a VM network</span><span class="sxs-lookup"><span data-stu-id="ec053-170">Don't select a VM network</span></span> |<span data-ttu-id="ec053-171">Failover checks that test machines are created.</span><span class="sxs-lookup"><span data-stu-id="ec053-171">Failover checks that test machines are created.</span></span><br/><br/><span data-ttu-id="ec053-172">The test virtual machine will be created on the same host as the host on which the replica virtual machine exists.</span><span class="sxs-lookup"><span data-stu-id="ec053-172">The test virtual machine will be created on the same host as the host on which the replica virtual machine exists.</span></span> <span data-ttu-id="ec053-173">It isn’t added to the cloud in which the replica virtual machine is located.</span><span class="sxs-lookup"><span data-stu-id="ec053-173">It isn’t added to the cloud in which the replica virtual machine is located.</span></span> |<p><span data-ttu-id="ec053-174">The failed over machine won’t be connected to any network.</span><span class="sxs-lookup"><span data-stu-id="ec053-174">The failed over machine won’t be connected to any network.</span></span><br/><br/><span data-ttu-id="ec053-175">The machine can be connected to a VM network after it has been created</span><span class="sxs-lookup"><span data-stu-id="ec053-175">The machine can be connected to a VM network after it has been created</span></span> |
| <span data-ttu-id="ec053-176">**Fail over to a secondary VMM site—with network**</span><span class="sxs-lookup"><span data-stu-id="ec053-176">**Fail over to a secondary VMM site—with network**</span></span> |<span data-ttu-id="ec053-177">Select an existing VM network a</span><span class="sxs-lookup"><span data-stu-id="ec053-177">Select an existing VM network a</span></span> |<span data-ttu-id="ec053-178">Failover checks that virtual machines are created</span><span class="sxs-lookup"><span data-stu-id="ec053-178">Failover checks that virtual machines are created</span></span> |<span data-ttu-id="ec053-179">The test virtual machine will be created on the same host as the host on which the replica virtual machine exists.</span><span class="sxs-lookup"><span data-stu-id="ec053-179">The test virtual machine will be created on the same host as the host on which the replica virtual machine exists.</span></span> <span data-ttu-id="ec053-180">It isn’t added to the cloud in which the replica virtual machine is located.</span><span class="sxs-lookup"><span data-stu-id="ec053-180">It isn’t added to the cloud in which the replica virtual machine is located.</span></span><br/><br/><span data-ttu-id="ec053-181">Create a VM network that's isolated from your production network</span><span class="sxs-lookup"><span data-stu-id="ec053-181">Create a VM network that's isolated from your production network</span></span><br/><br/><span data-ttu-id="ec053-182">If you're using a VLAN-based network we recommend you create a separate logical network (not used in production) in VMM for this purpose.</span><span class="sxs-lookup"><span data-stu-id="ec053-182">If you're using a VLAN-based network we recommend you create a separate logical network (not used in production) in VMM for this purpose.</span></span> <span data-ttu-id="ec053-183">This logical network is used to create VM networks for the purpose of test failover.</span><span class="sxs-lookup"><span data-stu-id="ec053-183">This logical network is used to create VM networks for the purpose of test failover.</span></span><br/><br/><span data-ttu-id="ec053-184">The logical network should be associated with at least one of the network adapters of all the Hyper-V servers hosting virtual machines.</span><span class="sxs-lookup"><span data-stu-id="ec053-184">The logical network should be associated with at least one of the network adapters of all the Hyper-V servers hosting virtual machines.</span></span><br/><br/><span data-ttu-id="ec053-185">For VLAN logical networks, the network sites you add to the logical network should be isolated.</span><span class="sxs-lookup"><span data-stu-id="ec053-185">For VLAN logical networks, the network sites you add to the logical network should be isolated.</span></span><br/><br/><span data-ttu-id="ec053-186">If you’re using a Windows Network Virtualization–based logical network, Azure Site Recovery automatically creates isolated VM networks.</span><span class="sxs-lookup"><span data-stu-id="ec053-186">If you’re using a Windows Network Virtualization–based logical network, Azure Site Recovery automatically creates isolated VM networks.</span></span> |
| <span data-ttu-id="ec053-187">**Fail over to a secondary VMM site—create a network**</span><span class="sxs-lookup"><span data-stu-id="ec053-187">**Fail over to a secondary VMM site—create a network**</span></span> |<span data-ttu-id="ec053-188">A temporary test network will be created automatically based on the setting you specify in **Logical Network** and its related network sites</span><span class="sxs-lookup"><span data-stu-id="ec053-188">A temporary test network will be created automatically based on the setting you specify in **Logical Network** and its related network sites</span></span> |<span data-ttu-id="ec053-189">Failover checks that virtual machines are created</span><span class="sxs-lookup"><span data-stu-id="ec053-189">Failover checks that virtual machines are created</span></span> |<span data-ttu-id="ec053-190">Use this option if the recovery plan uses more than one VM network.</span><span class="sxs-lookup"><span data-stu-id="ec053-190">Use this option if the recovery plan uses more than one VM network.</span></span> <span data-ttu-id="ec053-191">If you're using Windows Network Virtualization networks, this option can automatically create VM networks with the same settings (subnets and IP address pools) in the network of the replica virtual machine.</span><span class="sxs-lookup"><span data-stu-id="ec053-191">If you're using Windows Network Virtualization networks, this option can automatically create VM networks with the same settings (subnets and IP address pools) in the network of the replica virtual machine.</span></span> <span data-ttu-id="ec053-192">These VM networks are cleaned up automatically after the test failover is complete.</span><span class="sxs-lookup"><span data-stu-id="ec053-192">These VM networks are cleaned up automatically after the test failover is complete.</span></span></p><p><span data-ttu-id="ec053-193">The test virtual machine will be created on the same host as the host on which the replica virtual machine exists.</span><span class="sxs-lookup"><span data-stu-id="ec053-193">The test virtual machine will be created on the same host as the host on which the replica virtual machine exists.</span></span> <span data-ttu-id="ec053-194">It isn’t added to the cloud in which the replica virtual machine is located.</span><span class="sxs-lookup"><span data-stu-id="ec053-194">It isn’t added to the cloud in which the replica virtual machine is located.</span></span> |

> [!TIP]
> The IP address given to a virtual machine during test failover is same as the IP address it would receive when doing a planned or unplanned failover (presuming that the IP address is available in the test failover network. If the same IP address isn't available in the test failover network then virtual machine will receive another IP address available in the test failover network.
>
>


## <a name="test-failover-to-a-production-network-on-recovery-site"></a><span data-ttu-id="ec053-197">Test failover to a production network on recovery site</span><span class="sxs-lookup"><span data-stu-id="ec053-197">Test failover to a production network on recovery site</span></span> 
<span data-ttu-id="ec053-198">It is recommended that when you are doing a test failover you choose a network that is different from your production recovery site network that you provided in **Network mapping**.</span><span class="sxs-lookup"><span data-stu-id="ec053-198">It is recommended that when you are doing a test failover you choose a network that is different from your production recovery site network that you provided in **Network mapping**.</span></span> <span data-ttu-id="ec053-199">But if you really want to validate end to end network connectivity in a failed over virtual machine, please note the following points:</span><span class="sxs-lookup"><span data-stu-id="ec053-199">But if you really want to validate end to end network connectivity in a failed over virtual machine, please note the following points:</span></span>

1. <span data-ttu-id="ec053-200">Make sure that the primary virtual machine is shutdown when you are doing the test failover.</span><span class="sxs-lookup"><span data-stu-id="ec053-200">Make sure that the primary virtual machine is shutdown when you are doing the test failover.</span></span> <span data-ttu-id="ec053-201">If you don't do so there will be two virtual machines with the same identity running in the same network at the same time and that can lead to undesired consequences.</span><span class="sxs-lookup"><span data-stu-id="ec053-201">If you don't do so there will be two virtual machines with the same identity running in the same network at the same time and that can lead to undesired consequences.</span></span> 
1. <span data-ttu-id="ec053-202">Any changes that you make into the test failover virtual machines would be lost when you cleanup the test failover virtual machines.</span><span class="sxs-lookup"><span data-stu-id="ec053-202">Any changes that you make into the test failover virtual machines would be lost when you cleanup the test failover virtual machines.</span></span> <span data-ttu-id="ec053-203">These changes will not be replicated back to the primary virtual machine.</span><span class="sxs-lookup"><span data-stu-id="ec053-203">These changes will not be replicated back to the primary virtual machine.</span></span>
1. <span data-ttu-id="ec053-204">This way of doing testing leads to a downtime of your production application.</span><span class="sxs-lookup"><span data-stu-id="ec053-204">This way of doing testing leads to a downtime of your production application.</span></span> <span data-ttu-id="ec053-205">Users of the application should be asked to not to use the application when the DR drill is in progress.</span><span class="sxs-lookup"><span data-stu-id="ec053-205">Users of the application should be asked to not to use the application when the DR drill is in progress.</span></span>  


## <a name="next-steps"></a><span data-ttu-id="ec053-206">Next Steps</span><span class="sxs-lookup"><span data-stu-id="ec053-206">Next Steps</span></span>
<span data-ttu-id="ec053-207">Once you have successfully tried a test failover you can try doing a [failover](site-recovery-failover.md).</span><span class="sxs-lookup"><span data-stu-id="ec053-207">Once you have successfully tried a test failover you can try doing a [failover](site-recovery-failover.md).</span></span>

