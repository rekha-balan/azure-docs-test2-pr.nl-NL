---
title: Monitor cluster performance - Azure HDInsight
description: How to monitor an HDInsight cluster for capacity and performance.
services: hdinsight
author: maxluk
ms.reviewer: jasonh
ms.service: hdinsight
ms.custom: hdinsightactive
ms.topic: conceptual
ms.date: 09/27/2017
ms.author: maxluk
ms.openlocfilehash: 434b3ecf65aaa5ecea81f5a9773f1bc6e8f6f2be
ms.sourcegitcommit: d1451406a010fd3aa854dc8e5b77dc5537d8050e
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 09/13/2018
ms.locfileid: "44856328"
---
# <a name="monitor-cluster-performance"></a><span data-ttu-id="a15b7-103">Monitor cluster performance</span><span class="sxs-lookup"><span data-stu-id="a15b7-103">Monitor cluster performance</span></span>

<span data-ttu-id="a15b7-104">Monitoring the health and performance of an HDInsight cluster is essential for maintaining maximum performance and resource utilization.</span><span class="sxs-lookup"><span data-stu-id="a15b7-104">Monitoring the health and performance of an HDInsight cluster is essential for maintaining maximum performance and resource utilization.</span></span> <span data-ttu-id="a15b7-105">Monitoring can also help you address possible coding or cluster configuration errors.</span><span class="sxs-lookup"><span data-stu-id="a15b7-105">Monitoring can also help you address possible coding or cluster configuration errors.</span></span>

<span data-ttu-id="a15b7-106">The following sections describe how to optimize cluster loading, YARN queue efficiency, and storage accessibility.</span><span class="sxs-lookup"><span data-stu-id="a15b7-106">The following sections describe how to optimize cluster loading, YARN queue efficiency, and storage accessibility.</span></span>

## <a name="cluster-loading"></a><span data-ttu-id="a15b7-107">Cluster loading</span><span class="sxs-lookup"><span data-stu-id="a15b7-107">Cluster loading</span></span>

<span data-ttu-id="a15b7-108">Hadoop clusters should balance loading across the nodes of the cluster.</span><span class="sxs-lookup"><span data-stu-id="a15b7-108">Hadoop clusters should balance loading across the nodes of the cluster.</span></span> <span data-ttu-id="a15b7-109">This balancing prevents processing tasks from being constrained by RAM, CPU, or disk resources.</span><span class="sxs-lookup"><span data-stu-id="a15b7-109">This balancing prevents processing tasks from being constrained by RAM, CPU, or disk resources.</span></span>

<span data-ttu-id="a15b7-110">To get a high-level look at the nodes of your cluster and their loading, log in to the [Ambari Web UI](hdinsight-hadoop-manage-ambari.md), then select the **Hosts** tab. Your hosts are listed by their fully qualified domain names.</span><span class="sxs-lookup"><span data-stu-id="a15b7-110">To get a high-level look at the nodes of your cluster and their loading, log in to the [Ambari Web UI](hdinsight-hadoop-manage-ambari.md), then select the **Hosts** tab. Your hosts are listed by their fully qualified domain names.</span></span> <span data-ttu-id="a15b7-111">Each host's operating status is shown by a colored health indicator:</span><span class="sxs-lookup"><span data-stu-id="a15b7-111">Each host's operating status is shown by a colored health indicator:</span></span>

| <span data-ttu-id="a15b7-112">Color</span><span class="sxs-lookup"><span data-stu-id="a15b7-112">Color</span></span> | <span data-ttu-id="a15b7-113">Description</span><span class="sxs-lookup"><span data-stu-id="a15b7-113">Description</span></span> |
| --- | --- |
| <span data-ttu-id="a15b7-114">Red</span><span class="sxs-lookup"><span data-stu-id="a15b7-114">Red</span></span> | <span data-ttu-id="a15b7-115">At least one master component on the host is down.</span><span class="sxs-lookup"><span data-stu-id="a15b7-115">At least one master component on the host is down.</span></span> <span data-ttu-id="a15b7-116">Hover to see a tooltip that lists affected components.</span><span class="sxs-lookup"><span data-stu-id="a15b7-116">Hover to see a tooltip that lists affected components.</span></span> |
| <span data-ttu-id="a15b7-117">Orange</span><span class="sxs-lookup"><span data-stu-id="a15b7-117">Orange</span></span> | <span data-ttu-id="a15b7-118">At least one slave component on the host is down.</span><span class="sxs-lookup"><span data-stu-id="a15b7-118">At least one slave component on the host is down.</span></span> <span data-ttu-id="a15b7-119">Hover to see a tooltip that lists affected components.</span><span class="sxs-lookup"><span data-stu-id="a15b7-119">Hover to see a tooltip that lists affected components.</span></span> |
| <span data-ttu-id="a15b7-120">Yellow</span><span class="sxs-lookup"><span data-stu-id="a15b7-120">Yellow</span></span> | <span data-ttu-id="a15b7-121">Ambari Server has not received a heartbeat from the host for more than 3 minutes.</span><span class="sxs-lookup"><span data-stu-id="a15b7-121">Ambari Server has not received a heartbeat from the host for more than 3 minutes.</span></span> |
| <span data-ttu-id="a15b7-122">Green</span><span class="sxs-lookup"><span data-stu-id="a15b7-122">Green</span></span> | <span data-ttu-id="a15b7-123">Normal running state.</span><span class="sxs-lookup"><span data-stu-id="a15b7-123">Normal running state.</span></span> |

<span data-ttu-id="a15b7-124">You'll also see columns showing the number of cores and amount of RAM for each host, and the disk usage and load average.</span><span class="sxs-lookup"><span data-stu-id="a15b7-124">You'll also see columns showing the number of cores and amount of RAM for each host, and the disk usage and load average.</span></span>

![Hosts tab](./media/hdinsight-key-scenarios-to-monitor/hosts-tab.png)

<span data-ttu-id="a15b7-126">Select any of the host names for a detailed look at components running on that host and their metrics.</span><span class="sxs-lookup"><span data-stu-id="a15b7-126">Select any of the host names for a detailed look at components running on that host and their metrics.</span></span> <span data-ttu-id="a15b7-127">The metrics are shown as a selectable timeline of CPU usage, load, disk usage, memory usage, network usage, and numbers of processes.</span><span class="sxs-lookup"><span data-stu-id="a15b7-127">The metrics are shown as a selectable timeline of CPU usage, load, disk usage, memory usage, network usage, and numbers of processes.</span></span>

![Host details](./media/hdinsight-key-scenarios-to-monitor/host-details.png)

<span data-ttu-id="a15b7-129">See [Manage HDInsight clusters by using the Ambari Web UI](hdinsight-hadoop-manage-ambari.md) for details on setting alerts and viewing metrics.</span><span class="sxs-lookup"><span data-stu-id="a15b7-129">See [Manage HDInsight clusters by using the Ambari Web UI](hdinsight-hadoop-manage-ambari.md) for details on setting alerts and viewing metrics.</span></span>

## <a name="yarn-queue-configuration"></a><span data-ttu-id="a15b7-130">YARN queue configuration</span><span class="sxs-lookup"><span data-stu-id="a15b7-130">YARN queue configuration</span></span>

<span data-ttu-id="a15b7-131">Hadoop has various services running across its distributed platform.</span><span class="sxs-lookup"><span data-stu-id="a15b7-131">Hadoop has various services running across its distributed platform.</span></span> <span data-ttu-id="a15b7-132">YARN (Yet Another Resource Negotiator) coordinates these services, allocates cluster resources, and manages access to a common data set.</span><span class="sxs-lookup"><span data-stu-id="a15b7-132">YARN (Yet Another Resource Negotiator) coordinates these services, allocates cluster resources, and manages access to a common data set.</span></span>

<span data-ttu-id="a15b7-133">YARN divides the two responsibilities of the JobTracker, resource management and job scheduling/monitoring, into two daemons: a global ResourceManager, and a per-application ApplicationMaster (AM).</span><span class="sxs-lookup"><span data-stu-id="a15b7-133">YARN divides the two responsibilities of the JobTracker, resource management and job scheduling/monitoring, into two daemons: a global ResourceManager, and a per-application ApplicationMaster (AM).</span></span>

<span data-ttu-id="a15b7-134">The ResourceManager is a *pure scheduler*, and solely arbitrates available resources between all competing applications.</span><span class="sxs-lookup"><span data-stu-id="a15b7-134">The ResourceManager is a *pure scheduler*, and solely arbitrates available resources between all competing applications.</span></span> <span data-ttu-id="a15b7-135">The ResourceManager ensures that all resources are always in use, optimizing for various constants such as SLAs, capacity guarantees, and so forth.</span><span class="sxs-lookup"><span data-stu-id="a15b7-135">The ResourceManager ensures that all resources are always in use, optimizing for various constants such as SLAs, capacity guarantees, and so forth.</span></span> <span data-ttu-id="a15b7-136">The ApplicationMaster negotiates resources from the ResourceManager, and works with the NodeManager(s) to execute and monitor the containers and their resource consumption.</span><span class="sxs-lookup"><span data-stu-id="a15b7-136">The ApplicationMaster negotiates resources from the ResourceManager, and works with the NodeManager(s) to execute and monitor the containers and their resource consumption.</span></span>

<span data-ttu-id="a15b7-137">When multiple tenants share a large cluster, there is competition for the cluster's resources.</span><span class="sxs-lookup"><span data-stu-id="a15b7-137">When multiple tenants share a large cluster, there is competition for the cluster's resources.</span></span> <span data-ttu-id="a15b7-138">The CapacityScheduler is a pluggable scheduler that assists in resource sharing by queueing up requests.</span><span class="sxs-lookup"><span data-stu-id="a15b7-138">The CapacityScheduler is a pluggable scheduler that assists in resource sharing by queueing up requests.</span></span> <span data-ttu-id="a15b7-139">The CapacityScheduler also supports *hierarchical queues* to ensure that resources are shared between the sub-queues of an organization, before other applications' queues are allowed to use free resources.</span><span class="sxs-lookup"><span data-stu-id="a15b7-139">The CapacityScheduler also supports *hierarchical queues* to ensure that resources are shared between the sub-queues of an organization, before other applications' queues are allowed to use free resources.</span></span>

<span data-ttu-id="a15b7-140">YARN allows us to allocate resources to these queues, and shows you whether all of your available resources are assigned.</span><span class="sxs-lookup"><span data-stu-id="a15b7-140">YARN allows us to allocate resources to these queues, and shows you whether all of your available resources are assigned.</span></span> <span data-ttu-id="a15b7-141">To view information about your queues, log in to the Ambari Web UI, then select **YARN Queue Manager** from the top menu.</span><span class="sxs-lookup"><span data-stu-id="a15b7-141">To view information about your queues, log in to the Ambari Web UI, then select **YARN Queue Manager** from the top menu.</span></span>

![YARN Queue Manager](./media/hdinsight-key-scenarios-to-monitor/yarn-queue-manager.png)

<span data-ttu-id="a15b7-143">The YARN Queue Manager page shows a list of your queues on the left, along with the percentage of capacity assigned to each.</span><span class="sxs-lookup"><span data-stu-id="a15b7-143">The YARN Queue Manager page shows a list of your queues on the left, along with the percentage of capacity assigned to each.</span></span>

![YARN Queue Manager details page](./media/hdinsight-key-scenarios-to-monitor/yarn-queue-manager-details.png)

<span data-ttu-id="a15b7-145">For a more detailed look at your queues, from the Ambari dashboard, select the **YARN** service from the list on the left.</span><span class="sxs-lookup"><span data-stu-id="a15b7-145">For a more detailed look at your queues, from the Ambari dashboard, select the **YARN** service from the list on the left.</span></span> <span data-ttu-id="a15b7-146">Then under the **Quick Links** dropdown menu, select **ResourceManager UI** underneath your active node.</span><span class="sxs-lookup"><span data-stu-id="a15b7-146">Then under the **Quick Links** dropdown menu, select **ResourceManager UI** underneath your active node.</span></span>

![ResourceManager UI menu link](./media/hdinsight-key-scenarios-to-monitor/resource-manager-ui-menu.png)

<span data-ttu-id="a15b7-148">In the ResourceManager UI, select **Scheduler** from the left-hand menu.</span><span class="sxs-lookup"><span data-stu-id="a15b7-148">In the ResourceManager UI, select **Scheduler** from the left-hand menu.</span></span> <span data-ttu-id="a15b7-149">You see a list of your queues underneath *Application Queues*.</span><span class="sxs-lookup"><span data-stu-id="a15b7-149">You see a list of your queues underneath *Application Queues*.</span></span> <span data-ttu-id="a15b7-150">Here you can see the capacity used for each of your queues, how well the jobs are distributed between them, and whether any jobs are resource-constrained.</span><span class="sxs-lookup"><span data-stu-id="a15b7-150">Here you can see the capacity used for each of your queues, how well the jobs are distributed between them, and whether any jobs are resource-constrained.</span></span>

![ResourceManager UI menu link](./media/hdinsight-key-scenarios-to-monitor/resource-manager-ui.png)

## <a name="storage-throttling"></a><span data-ttu-id="a15b7-152">Storage throttling</span><span class="sxs-lookup"><span data-stu-id="a15b7-152">Storage throttling</span></span>

<span data-ttu-id="a15b7-153">A cluster's performance bottleneck can happen at the storage level.</span><span class="sxs-lookup"><span data-stu-id="a15b7-153">A cluster's performance bottleneck can happen at the storage level.</span></span> <span data-ttu-id="a15b7-154">This type of bottleneck is most often due to *blocking* input/output (IO) operations, which happen when your running tasks send more IO than the storage service can handle.</span><span class="sxs-lookup"><span data-stu-id="a15b7-154">This type of bottleneck is most often due to *blocking* input/output (IO) operations, which happen when your running tasks send more IO than the storage service can handle.</span></span> <span data-ttu-id="a15b7-155">This blocking creates a queue of IO requests waiting to be processed until after current IOs are processed.</span><span class="sxs-lookup"><span data-stu-id="a15b7-155">This blocking creates a queue of IO requests waiting to be processed until after current IOs are processed.</span></span> <span data-ttu-id="a15b7-156">The blocks are due to *storage throttling*, which is not a physical limit, but rather a limit imposed by the storage service by a service level agreement (SLA).</span><span class="sxs-lookup"><span data-stu-id="a15b7-156">The blocks are due to *storage throttling*, which is not a physical limit, but rather a limit imposed by the storage service by a service level agreement (SLA).</span></span> <span data-ttu-id="a15b7-157">This limit ensures that no single client or tenant can monopolize the service.</span><span class="sxs-lookup"><span data-stu-id="a15b7-157">This limit ensures that no single client or tenant can monopolize the service.</span></span> <span data-ttu-id="a15b7-158">The SLA limits the number of IOs per second (IOPS) for Azure Storage - for details, see [Azure Storage Scalability and Performance Targets](https://docs.microsoft.com/azure/storage/storage-scalability-targets).</span><span class="sxs-lookup"><span data-stu-id="a15b7-158">The SLA limits the number of IOs per second (IOPS) for Azure Storage - for details, see [Azure Storage Scalability and Performance Targets](https://docs.microsoft.com/azure/storage/storage-scalability-targets).</span></span>

<span data-ttu-id="a15b7-159">If you are using Azure Storage, for information on monitoring storage-related issues, including throttling, see [Monitor, diagnose, and troubleshoot Microsoft Azure Storage](https://docs.microsoft.com/azure/storage/storage-monitoring-diagnosing-troubleshooting).</span><span class="sxs-lookup"><span data-stu-id="a15b7-159">If you are using Azure Storage, for information on monitoring storage-related issues, including throttling, see [Monitor, diagnose, and troubleshoot Microsoft Azure Storage](https://docs.microsoft.com/azure/storage/storage-monitoring-diagnosing-troubleshooting).</span></span>

<span data-ttu-id="a15b7-160">If your cluster's backing store is Azure Data Lake Store (ADLS), your throttling is most likely due to bandwidth limits.</span><span class="sxs-lookup"><span data-stu-id="a15b7-160">If your cluster's backing store is Azure Data Lake Store (ADLS), your throttling is most likely due to bandwidth limits.</span></span> <span data-ttu-id="a15b7-161">Throttling in this case could be identified by observing throttling errors in task logs.</span><span class="sxs-lookup"><span data-stu-id="a15b7-161">Throttling in this case could be identified by observing throttling errors in task logs.</span></span> <span data-ttu-id="a15b7-162">For ADLS, see the throttling section for the appropriate service in these articles:</span><span class="sxs-lookup"><span data-stu-id="a15b7-162">For ADLS, see the throttling section for the appropriate service in these articles:</span></span>

* [<span data-ttu-id="a15b7-163">Performance tuning guidance for Hive on HDInsight and Azure Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="a15b7-163">Performance tuning guidance for Hive on HDInsight and Azure Data Lake Store</span></span>](../data-lake-store/data-lake-store-performance-tuning-hive.md)
* [<span data-ttu-id="a15b7-164">Performance tuning guidance for MapReduce on HDInsight and Azure Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="a15b7-164">Performance tuning guidance for MapReduce on HDInsight and Azure Data Lake Store</span></span>](../data-lake-store/data-lake-store-performance-tuning-mapreduce.md)
* [<span data-ttu-id="a15b7-165">Performance tuning guidance for Storm on HDInsight and Azure Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="a15b7-165">Performance tuning guidance for Storm on HDInsight and Azure Data Lake Store</span></span>](../data-lake-store/data-lake-store-performance-tuning-storm.md)

## <a name="next-steps"></a><span data-ttu-id="a15b7-166">Next steps</span><span class="sxs-lookup"><span data-stu-id="a15b7-166">Next steps</span></span>

<span data-ttu-id="a15b7-167">Visit the following links for more information about troubleshooting and monitoring your clusters:</span><span class="sxs-lookup"><span data-stu-id="a15b7-167">Visit the following links for more information about troubleshooting and monitoring your clusters:</span></span>

* [<span data-ttu-id="a15b7-168">Analyze HDInsight logs</span><span class="sxs-lookup"><span data-stu-id="a15b7-168">Analyze HDInsight logs</span></span>](hdinsight-debug-jobs.md)
* [<span data-ttu-id="a15b7-169">Debug apps with YARN logs</span><span class="sxs-lookup"><span data-stu-id="a15b7-169">Debug apps with YARN logs</span></span>](hdinsight-hadoop-access-yarn-app-logs-linux.md)
* [<span data-ttu-id="a15b7-170">Enable heap dumps for Hadoop services on Linux-based HDInsight</span><span class="sxs-lookup"><span data-stu-id="a15b7-170">Enable heap dumps for Hadoop services on Linux-based HDInsight</span></span>](hdinsight-hadoop-collect-debug-heap-dump-linux.md)
