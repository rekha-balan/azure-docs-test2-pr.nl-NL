---
title: Access Hadoop YARN application logs programmatically - Azure
description: Access application logs programmatically on a Hadoop cluster in HDInsight.
services: hdinsight
author: jasonwhowell
ms.reviewer: jasonh
ms.service: hdinsight
ms.topic: conceptual
ms.date: 05/25/2017
ms.author: jasonh
ROBOTS: NOINDEX
ms.openlocfilehash: e92f9f7bb49b0b7cc33c73a9c5eb2d0ca7532592
ms.sourcegitcommit: d1451406a010fd3aa854dc8e5b77dc5537d8050e
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 09/13/2018
ms.locfileid: "44818576"
---
# <a name="access-yarn-application-logs-on-windows-based-hdinsight"></a><span data-ttu-id="69c38-103">Access YARN application logs on Windows-based HDInsight</span><span class="sxs-lookup"><span data-stu-id="69c38-103">Access YARN application logs on Windows-based HDInsight</span></span>
<span data-ttu-id="69c38-104">This document explains how to access the logs for YARN applications that have finished on a Windows-based Hadoop cluster in Azure HDInsight</span><span class="sxs-lookup"><span data-stu-id="69c38-104">This document explains how to access the logs for YARN applications that have finished on a Windows-based Hadoop cluster in Azure HDInsight</span></span>

> [!IMPORTANT]
> <span data-ttu-id="69c38-105">The information in this document applies only to Windows-based HDInsight clusters.</span><span class="sxs-lookup"><span data-stu-id="69c38-105">The information in this document applies only to Windows-based HDInsight clusters.</span></span> <span data-ttu-id="69c38-106">Linux is the only operating system used on HDInsight version 3.4 or greater.</span><span class="sxs-lookup"><span data-stu-id="69c38-106">Linux is the only operating system used on HDInsight version 3.4 or greater.</span></span> <span data-ttu-id="69c38-107">For more information, see [HDInsight retirement on Windows](hdinsight-component-versioning.md#hdinsight-windows-retirement).</span><span class="sxs-lookup"><span data-stu-id="69c38-107">For more information, see [HDInsight retirement on Windows](hdinsight-component-versioning.md#hdinsight-windows-retirement).</span></span> <span data-ttu-id="69c38-108">For information on accessing YARN logs on Linux-based HDInsight clusters, see [Access YARN application logs on Linux-based Hadoop on HDInsight](hdinsight-hadoop-access-yarn-app-logs-linux.md)</span><span class="sxs-lookup"><span data-stu-id="69c38-108">For information on accessing YARN logs on Linux-based HDInsight clusters, see [Access YARN application logs on Linux-based Hadoop on HDInsight](hdinsight-hadoop-access-yarn-app-logs-linux.md)</span></span>
>


### <a name="prerequisites"></a><span data-ttu-id="69c38-109">Prerequisites</span><span class="sxs-lookup"><span data-stu-id="69c38-109">Prerequisites</span></span>
* <span data-ttu-id="69c38-110">A Windows-based HDInsight cluster.</span><span class="sxs-lookup"><span data-stu-id="69c38-110">A Windows-based HDInsight cluster.</span></span>  <span data-ttu-id="69c38-111">See [Create Windows-based Hadoop clusters in HDInsight](hdinsight-hadoop-provision-linux-clusters.md).</span><span class="sxs-lookup"><span data-stu-id="69c38-111">See [Create Windows-based Hadoop clusters in HDInsight](hdinsight-hadoop-provision-linux-clusters.md).</span></span>

## <a name="yarn-timeline-server"></a><span data-ttu-id="69c38-112">YARN Timeline Server</span><span class="sxs-lookup"><span data-stu-id="69c38-112">YARN Timeline Server</span></span>
<span data-ttu-id="69c38-113">The <a href="http://hadoop.apache.org/docs/r2.4.0/hadoop-yarn/hadoop-yarn-site/TimelineServer.html" target="_blank">YARN Timeline Server</a> provides generic information on completed applications as well as framework-specific application information through two different interfaces.</span><span class="sxs-lookup"><span data-stu-id="69c38-113">The <a href="http://hadoop.apache.org/docs/r2.4.0/hadoop-yarn/hadoop-yarn-site/TimelineServer.html" target="_blank">YARN Timeline Server</a> provides generic information on completed applications as well as framework-specific application information through two different interfaces.</span></span> <span data-ttu-id="69c38-114">Specifically:</span><span class="sxs-lookup"><span data-stu-id="69c38-114">Specifically:</span></span>

* <span data-ttu-id="69c38-115">Storage and retrieval of generic application information on HDInsight clusters has been enabled with version 3.1.1.374 or higher.</span><span class="sxs-lookup"><span data-stu-id="69c38-115">Storage and retrieval of generic application information on HDInsight clusters has been enabled with version 3.1.1.374 or higher.</span></span>
* <span data-ttu-id="69c38-116">The framework-specific application information component of the Timeline Server is not currently available on HDInsight clusters.</span><span class="sxs-lookup"><span data-stu-id="69c38-116">The framework-specific application information component of the Timeline Server is not currently available on HDInsight clusters.</span></span>

<span data-ttu-id="69c38-117">Generic information on applications includes the following sorts of data:</span><span class="sxs-lookup"><span data-stu-id="69c38-117">Generic information on applications includes the following sorts of data:</span></span>

* <span data-ttu-id="69c38-118">The application ID, a unique identifier of an application</span><span class="sxs-lookup"><span data-stu-id="69c38-118">The application ID, a unique identifier of an application</span></span>
* <span data-ttu-id="69c38-119">The user who started the application</span><span class="sxs-lookup"><span data-stu-id="69c38-119">The user who started the application</span></span>
* <span data-ttu-id="69c38-120">Information on attempts made to complete the application</span><span class="sxs-lookup"><span data-stu-id="69c38-120">Information on attempts made to complete the application</span></span>
* <span data-ttu-id="69c38-121">The containers used by any given application attempt</span><span class="sxs-lookup"><span data-stu-id="69c38-121">The containers used by any given application attempt</span></span>

<span data-ttu-id="69c38-122">On your HDInsight clusters, this information is stored by Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="69c38-122">On your HDInsight clusters, this information is stored by Azure Resource Manager.</span></span> <span data-ttu-id="69c38-123">The information is saved to the history store in the default storage for the cluster.</span><span class="sxs-lookup"><span data-stu-id="69c38-123">The information is saved to the history store in the default storage for the cluster.</span></span> <span data-ttu-id="69c38-124">This generic data on completed applications can be retrieved through a REST API:</span><span class="sxs-lookup"><span data-stu-id="69c38-124">This generic data on completed applications can be retrieved through a REST API:</span></span>

    GET on https://<cluster-dns-name>.azurehdinsight.net/ws/v1/applicationhistory/apps


## <a name="yarn-applications-and-logs"></a><span data-ttu-id="69c38-125">YARN applications and logs</span><span class="sxs-lookup"><span data-stu-id="69c38-125">YARN applications and logs</span></span>
<span data-ttu-id="69c38-126">YARN supports multiple programming models by decoupling resource management from application scheduling/monitoring.</span><span class="sxs-lookup"><span data-stu-id="69c38-126">YARN supports multiple programming models by decoupling resource management from application scheduling/monitoring.</span></span> <span data-ttu-id="69c38-127">YARN uses a global *ResourceManager* (RM), per-worker-node *NodeManagers* (NMs), and per-application *ApplicationMasters* (AMs).</span><span class="sxs-lookup"><span data-stu-id="69c38-127">YARN uses a global *ResourceManager* (RM), per-worker-node *NodeManagers* (NMs), and per-application *ApplicationMasters* (AMs).</span></span> <span data-ttu-id="69c38-128">The per-application AM negotiates resources (CPU, memory, disk, network) for running your application with the RM.</span><span class="sxs-lookup"><span data-stu-id="69c38-128">The per-application AM negotiates resources (CPU, memory, disk, network) for running your application with the RM.</span></span> <span data-ttu-id="69c38-129">The RM works with NMs to grant these resources, which are granted as *containers*.</span><span class="sxs-lookup"><span data-stu-id="69c38-129">The RM works with NMs to grant these resources, which are granted as *containers*.</span></span> <span data-ttu-id="69c38-130">The AM is responsible for tracking the progress of the containers assigned to it by the RM.</span><span class="sxs-lookup"><span data-stu-id="69c38-130">The AM is responsible for tracking the progress of the containers assigned to it by the RM.</span></span> <span data-ttu-id="69c38-131">An application may require many containers depending on the nature of the application.</span><span class="sxs-lookup"><span data-stu-id="69c38-131">An application may require many containers depending on the nature of the application.</span></span>

* <span data-ttu-id="69c38-132">Each application may consist of multiple *application attempts*.</span><span class="sxs-lookup"><span data-stu-id="69c38-132">Each application may consist of multiple *application attempts*.</span></span> 
* <span data-ttu-id="69c38-133">Containers are granted to a specific attempt of an application.</span><span class="sxs-lookup"><span data-stu-id="69c38-133">Containers are granted to a specific attempt of an application.</span></span> 
* <span data-ttu-id="69c38-134">A container provides the context for a basic unit of work.</span><span class="sxs-lookup"><span data-stu-id="69c38-134">A container provides the context for a basic unit of work.</span></span> 
* <span data-ttu-id="69c38-135">Work that is done within the context of a container is performed on the single worker node that the container was allocated to.</span><span class="sxs-lookup"><span data-stu-id="69c38-135">Work that is done within the context of a container is performed on the single worker node that the container was allocated to.</span></span> 

<span data-ttu-id="69c38-136">For more information, see [YARN Concepts][YARN-concepts].</span><span class="sxs-lookup"><span data-stu-id="69c38-136">For more information, see [YARN Concepts][YARN-concepts].</span></span>

<span data-ttu-id="69c38-137">Application logs (and the associated container logs) are critical in debugging problematic Hadoop applications.</span><span class="sxs-lookup"><span data-stu-id="69c38-137">Application logs (and the associated container logs) are critical in debugging problematic Hadoop applications.</span></span> <span data-ttu-id="69c38-138">YARN provides a nice framework for collecting, aggregating, and storing application logs with the [Log Aggregation][log-aggregation] feature.</span><span class="sxs-lookup"><span data-stu-id="69c38-138">YARN provides a nice framework for collecting, aggregating, and storing application logs with the [Log Aggregation][log-aggregation] feature.</span></span> <span data-ttu-id="69c38-139">The Log Aggregation feature makes accessing application logs more deterministic, as it aggregates logs across all containers on a worker node and stores them as one aggregated log file per worker node on the default file system after an application finishes.</span><span class="sxs-lookup"><span data-stu-id="69c38-139">The Log Aggregation feature makes accessing application logs more deterministic, as it aggregates logs across all containers on a worker node and stores them as one aggregated log file per worker node on the default file system after an application finishes.</span></span> <span data-ttu-id="69c38-140">Your application may use hundreds or thousands of containers, but logs for all containers run on a single worker node are aggregated to a single file, resulting in one file per worker node used by your application.</span><span class="sxs-lookup"><span data-stu-id="69c38-140">Your application may use hundreds or thousands of containers, but logs for all containers run on a single worker node are aggregated to a single file, resulting in one file per worker node used by your application.</span></span> <span data-ttu-id="69c38-141">Log Aggregation is enabled by default on HDInsight clusters (version 3.0 and above), and aggregated logs can be found in the default container of your cluster at the following location:</span><span class="sxs-lookup"><span data-stu-id="69c38-141">Log Aggregation is enabled by default on HDInsight clusters (version 3.0 and above), and aggregated logs can be found in the default container of your cluster at the following location:</span></span>

    wasb:///app-logs/<user>/logs/<applicationId>

<span data-ttu-id="69c38-142">In that location, *user* is the name of the user who started the application, and *applicationId* is the unique identifier of an application as assigned by the YARN RM.</span><span class="sxs-lookup"><span data-stu-id="69c38-142">In that location, *user* is the name of the user who started the application, and *applicationId* is the unique identifier of an application as assigned by the YARN RM.</span></span>

<span data-ttu-id="69c38-143">The aggregated logs are not directly readable, as they are written in a [TFile][T-file], [binary format][binary-format] indexed by container.</span><span class="sxs-lookup"><span data-stu-id="69c38-143">The aggregated logs are not directly readable, as they are written in a [TFile][T-file], [binary format][binary-format] indexed by container.</span></span> <span data-ttu-id="69c38-144">YARN provides CLI tools to dump these logs as plain text for applications or containers of interest.</span><span class="sxs-lookup"><span data-stu-id="69c38-144">YARN provides CLI tools to dump these logs as plain text for applications or containers of interest.</span></span> <span data-ttu-id="69c38-145">You can view these logs as plain text by running one of the following YARN commands directly on the cluster nodes (after connecting to it through RDP):</span><span class="sxs-lookup"><span data-stu-id="69c38-145">You can view these logs as plain text by running one of the following YARN commands directly on the cluster nodes (after connecting to it through RDP):</span></span>

    yarn logs -applicationId <applicationId> -appOwner <user-who-started-the-application>
    yarn logs -applicationId <applicationId> -appOwner <user-who-started-the-application> -containerId <containerId> -nodeAddress <worker-node-address>


## <a name="yarn-resourcemanager-ui"></a><span data-ttu-id="69c38-146">YARN ResourceManager UI</span><span class="sxs-lookup"><span data-stu-id="69c38-146">YARN ResourceManager UI</span></span>
<span data-ttu-id="69c38-147">The YARN ResourceManager UI runs on the cluster headnode, and can be accessed through the Azure portal dashboard:</span><span class="sxs-lookup"><span data-stu-id="69c38-147">The YARN ResourceManager UI runs on the cluster headnode, and can be accessed through the Azure portal dashboard:</span></span>

1. <span data-ttu-id="69c38-148">Sign in to [Azure portal](https://portal.azure.com/).</span><span class="sxs-lookup"><span data-stu-id="69c38-148">Sign in to [Azure portal](https://portal.azure.com/).</span></span>
2. <span data-ttu-id="69c38-149">On the left menu, click **Browse**, click **HDInsight Clusters**, click a Windows-based cluster that you want to access the YARN application logs.</span><span class="sxs-lookup"><span data-stu-id="69c38-149">On the left menu, click **Browse**, click **HDInsight Clusters**, click a Windows-based cluster that you want to access the YARN application logs.</span></span>
3. <span data-ttu-id="69c38-150">On the top menu, click **Dashboard**.</span><span class="sxs-lookup"><span data-stu-id="69c38-150">On the top menu, click **Dashboard**.</span></span> <span data-ttu-id="69c38-151">You see a page opened on a new browser tab called **HDInsight Query Console**.</span><span class="sxs-lookup"><span data-stu-id="69c38-151">You see a page opened on a new browser tab called **HDInsight Query Console**.</span></span>
4. <span data-ttu-id="69c38-152">From **HDInsight Query Console**, click **Yarn UI**.</span><span class="sxs-lookup"><span data-stu-id="69c38-152">From **HDInsight Query Console**, click **Yarn UI**.</span></span>

[YARN-timeline-server]:http://hadoop.apache.org/docs/r2.4.0/hadoop-yarn/hadoop-yarn-site/TimelineServer.html
[log-aggregation]:http://hortonworks.com/blog/simplifying-user-logs-management-and-access-in-yarn/
[T-file]:https://issues.apache.org/jira/secure/attachment/12396286/TFile%20Specification%2020081217.pdf
[binary-format]:https://issues.apache.org/jira/browse/HADOOP-3315
[YARN-concepts]:http://hortonworks.com/blog/apache-hadoop-yarn-concepts-and-applications/
