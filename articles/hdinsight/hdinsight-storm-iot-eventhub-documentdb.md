---
title: Process vehicle sensor data with Apache Storm on HDInsight | Microsoft Docs
description: Learn how to process vehicle sensor data from Event Hubs using Apache Storm on HDInsight. Add model data from DocumentDB, and store output to storage.
services: hdinsight,documentdb,notification-hubs
documentationcenter: ''
author: Blackmist
manager: jhubbard
editor: cgronlun
ms.assetid: 78980635-8bef-4c33-96c3-fae50e932e31
ms.service: hdinsight
ms.custom: hdinsightactive
ms.devlang: java
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: big-data
ms.date: 02/09/2017
ms.author: larryfr
ms.openlocfilehash: 1132148f1898d046d278f8f68c91f7c02914da1c
ms.sourcegitcommit: 5b9d839c0c0a94b293fdafe1d6e5429506c07e05
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 08/02/2018
ms.locfileid: "44662575"
---
# <a name="process-vehicle-sensor-data-from-azure-event-hubs-using-apache-storm-on-hdinsight"></a><span data-ttu-id="6e022-104">Process vehicle sensor data from Azure Event Hubs using Apache Storm on HDInsight</span><span class="sxs-lookup"><span data-stu-id="6e022-104">Process vehicle sensor data from Azure Event Hubs using Apache Storm on HDInsight</span></span>

<span data-ttu-id="6e022-105">Learn how to process vehicle sensor data from Azure Event Hubs using Apache Storm on HDInsight.</span><span class="sxs-lookup"><span data-stu-id="6e022-105">Learn how to process vehicle sensor data from Azure Event Hubs using Apache Storm on HDInsight.</span></span> <span data-ttu-id="6e022-106">This example reads sensor data from Azure Event Hubs, enriches the data by referencing data stored in Azure DocumentDB, and finally store the data into Azure Storage using the Hadoop File System (HDFS).</span><span class="sxs-lookup"><span data-stu-id="6e022-106">This example reads sensor data from Azure Event Hubs, enriches the data by referencing data stored in Azure DocumentDB, and finally store the data into Azure Storage using the Hadoop File System (HDFS).</span></span>

![HDInsight and the Internet of Things (IoT) architecture diagram](https://docstestmedia1.blob.core.windows.net/azure-media/articles/hdinsight/media/hdinsight-storm-iot-eventhub-documentdb/iot.png)

## <a name="overview"></a><span data-ttu-id="6e022-108">Overview</span><span class="sxs-lookup"><span data-stu-id="6e022-108">Overview</span></span>

<span data-ttu-id="6e022-109">Adding sensors to vehicles allows you to predict equipment problems based on historical data trends, as well as make improvements to future versions based on usage pattern analysis.</span><span class="sxs-lookup"><span data-stu-id="6e022-109">Adding sensors to vehicles allows you to predict equipment problems based on historical data trends, as well as make improvements to future versions based on usage pattern analysis.</span></span> <span data-ttu-id="6e022-110">While traditional MapReduce batch processing can be used for this analysis, you must be able to quickly and efficiently load the data from all vehicles into Hadoop before MapReduce processing can occur.</span><span class="sxs-lookup"><span data-stu-id="6e022-110">While traditional MapReduce batch processing can be used for this analysis, you must be able to quickly and efficiently load the data from all vehicles into Hadoop before MapReduce processing can occur.</span></span> <span data-ttu-id="6e022-111">Additionally, you may wish to do analysis for critical failure paths (engine temperature, brakes, etc.) in real time.</span><span class="sxs-lookup"><span data-stu-id="6e022-111">Additionally, you may wish to do analysis for critical failure paths (engine temperature, brakes, etc.) in real time.</span></span>

<span data-ttu-id="6e022-112">Azure Event Hubs are built to handle the massive volume of data generated by sensors, and Apache Storm on HDInsight can be used to load and process the data before storing it into HDFS (backed by Azure Storage) for additional MapReduce processing.</span><span class="sxs-lookup"><span data-stu-id="6e022-112">Azure Event Hubs are built to handle the massive volume of data generated by sensors, and Apache Storm on HDInsight can be used to load and process the data before storing it into HDFS (backed by Azure Storage) for additional MapReduce processing.</span></span>

## <a name="solution"></a><span data-ttu-id="6e022-113">Solution</span><span class="sxs-lookup"><span data-stu-id="6e022-113">Solution</span></span>

<span data-ttu-id="6e022-114">Telemetry data for engine temperature, ambient temperature, and vehicle speed is recorded by sensors, then sent to Event Hubs along with the car's Vehicle Identification Number (VIN) and a time stamp.</span><span class="sxs-lookup"><span data-stu-id="6e022-114">Telemetry data for engine temperature, ambient temperature, and vehicle speed is recorded by sensors, then sent to Event Hubs along with the car's Vehicle Identification Number (VIN) and a time stamp.</span></span> <span data-ttu-id="6e022-115">From there, a Storm Topology running on an Apache Storm on HDInsight cluster reads the data, processes it, and stores it into HDFS.</span><span class="sxs-lookup"><span data-stu-id="6e022-115">From there, a Storm Topology running on an Apache Storm on HDInsight cluster reads the data, processes it, and stores it into HDFS.</span></span>

<span data-ttu-id="6e022-116">During processing, the VIN is used to retrieve model information from Azure DocumentDB.</span><span class="sxs-lookup"><span data-stu-id="6e022-116">During processing, the VIN is used to retrieve model information from Azure DocumentDB.</span></span> <span data-ttu-id="6e022-117">This is added to the data stream before it is stored.</span><span class="sxs-lookup"><span data-stu-id="6e022-117">This is added to the data stream before it is stored.</span></span>

<span data-ttu-id="6e022-118">The components used in the Storm Topology are:</span><span class="sxs-lookup"><span data-stu-id="6e022-118">The components used in the Storm Topology are:</span></span>

* <span data-ttu-id="6e022-119">**EventHubSpout** - reads data from Azure Event Hubs</span><span class="sxs-lookup"><span data-stu-id="6e022-119">**EventHubSpout** - reads data from Azure Event Hubs</span></span>
* <span data-ttu-id="6e022-120">**TypeConversionBolt** - converts the JSON string from Event Hubs into a tuple containing the individual data values for engine temperature, ambient temperature, speed, VIN, and timestamp</span><span class="sxs-lookup"><span data-stu-id="6e022-120">**TypeConversionBolt** - converts the JSON string from Event Hubs into a tuple containing the individual data values for engine temperature, ambient temperature, speed, VIN, and timestamp</span></span>
* <span data-ttu-id="6e022-121">**DataReferencBolt** - looks up the vehicle model from DocumentDB using the VIN</span><span class="sxs-lookup"><span data-stu-id="6e022-121">**DataReferencBolt** - looks up the vehicle model from DocumentDB using the VIN</span></span>
* <span data-ttu-id="6e022-122">**WasbStoreBolt** - stores the data to HDFS (Azure Storage)</span><span class="sxs-lookup"><span data-stu-id="6e022-122">**WasbStoreBolt** - stores the data to HDFS (Azure Storage)</span></span>

<span data-ttu-id="6e022-123">The following is a diagram of this solution:</span><span class="sxs-lookup"><span data-stu-id="6e022-123">The following is a diagram of this solution:</span></span>

![storm topology](https://docstestmedia1.blob.core.windows.net/azure-media/articles/hdinsight/media/hdinsight-storm-iot-eventhub-documentdb/iottopology.png)

> [!NOTE]
> <span data-ttu-id="6e022-125">This is a simplified diagram, and each component in the solution may have multiple instances.</span><span class="sxs-lookup"><span data-stu-id="6e022-125">This is a simplified diagram, and each component in the solution may have multiple instances.</span></span> <span data-ttu-id="6e022-126">For example, the multiple instances of each component in the topology are distributed across the nodes in the Storm on HDInsight cluster.</span><span class="sxs-lookup"><span data-stu-id="6e022-126">For example, the multiple instances of each component in the topology are distributed across the nodes in the Storm on HDInsight cluster.</span></span>
> 
> 

## <a name="implementation"></a><span data-ttu-id="6e022-127">Implementation</span><span class="sxs-lookup"><span data-stu-id="6e022-127">Implementation</span></span>

<span data-ttu-id="6e022-128">A complete, automated solution for this scenario is available as part of the [HDInsight-Storm-Examples](https://github.com/hdinsight/hdinsight-storm-examples) repository on GitHub.</span><span class="sxs-lookup"><span data-stu-id="6e022-128">A complete, automated solution for this scenario is available as part of the [HDInsight-Storm-Examples](https://github.com/hdinsight/hdinsight-storm-examples) repository on GitHub.</span></span> <span data-ttu-id="6e022-129">To use this example, follow the steps in the [IoTExample README.MD](https://github.com/hdinsight/hdinsight-storm-examples/blob/master/IotExample/README.md).</span><span class="sxs-lookup"><span data-stu-id="6e022-129">To use this example, follow the steps in the [IoTExample README.MD](https://github.com/hdinsight/hdinsight-storm-examples/blob/master/IotExample/README.md).</span></span>

## <a name="next-steps"></a><span data-ttu-id="6e022-130">Next Steps</span><span class="sxs-lookup"><span data-stu-id="6e022-130">Next Steps</span></span>

<span data-ttu-id="6e022-131">For more example Storm topologies, see [Example topologies for Storm on HDInsight](hdinsight-storm-example-topology.md).</span><span class="sxs-lookup"><span data-stu-id="6e022-131">For more example Storm topologies, see [Example topologies for Storm on HDInsight](hdinsight-storm-example-topology.md).</span></span>



