---
title: Use SSH with HDInsight (Hadoop) from Windows, Linux, Unix, or OS X | Microsoft Docs
description: " You can access HDInsight using Secure Shell (SSH). This document provides information on using SSH to connect to with HDInsight from Windows, Linux, Unix, or OS X clients."
services: hdinsight
documentationcenter: ''
author: Blackmist
manager: jhubbard
editor: cgronlun
tags: azure-portal
ms.assetid: a6a16405-a4a7-4151-9bbf-ab26972216c5
ms.service: hdinsight
ms.devlang: na
ms.topic: get-started-article
ms.tgt_pltfrm: na
ms.workload: big-data
ms.date: 04/03/2017
ms.author: larryfr
ms.custom: H1Hack27Feb2017,hdinsightactive
ms.openlocfilehash: 2aaaa33abf2f453488055c28a256e52502016f14
ms.sourcegitcommit: 5b9d839c0c0a94b293fdafe1d6e5429506c07e05
ms.translationtype: HT
ms.contentlocale: nl-NL
ms.lasthandoff: 08/02/2018
ms.locfileid: "44564522"
---
# <a name="connect-to-hdinsight-hadoop-using-ssh"></a><span data-ttu-id="cc09c-104">Connect to HDInsight (Hadoop) using SSH</span><span class="sxs-lookup"><span data-stu-id="cc09c-104">Connect to HDInsight (Hadoop) using SSH</span></span>

<span data-ttu-id="cc09c-105">Learn how to use [Secure Shell (SSH)](https://en.wikipedia.org/wiki/Secure_Shell) to securely connect to HDInsight.</span><span class="sxs-lookup"><span data-stu-id="cc09c-105">Learn how to use [Secure Shell (SSH)](https://en.wikipedia.org/wiki/Secure_Shell) to securely connect to HDInsight.</span></span> <span data-ttu-id="cc09c-106">HDInsight can use Linux (Ubuntu) as the operating system for nodes within the cluster.</span><span class="sxs-lookup"><span data-stu-id="cc09c-106">HDInsight can use Linux (Ubuntu) as the operating system for nodes within the cluster.</span></span> <span data-ttu-id="cc09c-107">SSH can be used to connect to the head and edge nodes of a Linux-based cluster and run commands directly on those nodes.</span><span class="sxs-lookup"><span data-stu-id="cc09c-107">SSH can be used to connect to the head and edge nodes of a Linux-based cluster and run commands directly on those nodes.</span></span>

<span data-ttu-id="cc09c-108">The following table contains the address and port information needed when connecting to HDInsight using SSH:</span><span class="sxs-lookup"><span data-stu-id="cc09c-108">The following table contains the address and port information needed when connecting to HDInsight using SSH:</span></span>

| <span data-ttu-id="cc09c-109">Address</span><span class="sxs-lookup"><span data-stu-id="cc09c-109">Address</span></span> | <span data-ttu-id="cc09c-110">Port</span><span class="sxs-lookup"><span data-stu-id="cc09c-110">Port</span></span> | <span data-ttu-id="cc09c-111">Connects to...</span><span class="sxs-lookup"><span data-stu-id="cc09c-111">Connects to...</span></span> |
| ----- | ----- | ----- |
| `<clustername>-ed-ssh.azurehdinsight.net` | <span data-ttu-id="cc09c-112">22</span><span class="sxs-lookup"><span data-stu-id="cc09c-112">22</span></span> | <span data-ttu-id="cc09c-113">Edge node (R Server on HDInsight)</span><span class="sxs-lookup"><span data-stu-id="cc09c-113">Edge node (R Server on HDInsight)</span></span> |
| `<edgenodename>.<clustername>-ssh.azurehdinsight.net` | <span data-ttu-id="cc09c-114">22</span><span class="sxs-lookup"><span data-stu-id="cc09c-114">22</span></span> | <span data-ttu-id="cc09c-115">Edge node (any other cluster type, if an edge node exists)</span><span class="sxs-lookup"><span data-stu-id="cc09c-115">Edge node (any other cluster type, if an edge node exists)</span></span> |
| `<clustername>-ssh.azurehdinsight.net` | <span data-ttu-id="cc09c-116">22</span><span class="sxs-lookup"><span data-stu-id="cc09c-116">22</span></span> | <span data-ttu-id="cc09c-117">Primary headnode</span><span class="sxs-lookup"><span data-stu-id="cc09c-117">Primary headnode</span></span> |
| `<clustername>-ssh.azurehdinsight.net` | <span data-ttu-id="cc09c-118">23</span><span class="sxs-lookup"><span data-stu-id="cc09c-118">23</span></span> | <span data-ttu-id="cc09c-119">Secondary headnode</span><span class="sxs-lookup"><span data-stu-id="cc09c-119">Secondary headnode</span></span> |

> [!NOTE]
> <span data-ttu-id="cc09c-120">Replace `<edgenodename>` with the name of the edge node.</span><span class="sxs-lookup"><span data-stu-id="cc09c-120">Replace `<edgenodename>` with the name of the edge node.</span></span>
>
> <span data-ttu-id="cc09c-121">Replace `<clustername>` with the name of your HDInsight cluster.</span><span class="sxs-lookup"><span data-stu-id="cc09c-121">Replace `<clustername>` with the name of your HDInsight cluster.</span></span>
>
> <span data-ttu-id="cc09c-122">We recommend __always connecting to the edge node__ if you have one.</span><span class="sxs-lookup"><span data-stu-id="cc09c-122">We recommend __always connecting to the edge node__ if you have one.</span></span> <span data-ttu-id="cc09c-123">The head nodes host services that are critical to the health of the cluster.</span><span class="sxs-lookup"><span data-stu-id="cc09c-123">The head nodes host services that are critical to the health of the cluster.</span></span> <span data-ttu-id="cc09c-124">The edge node runs only what you put on it.</span><span class="sxs-lookup"><span data-stu-id="cc09c-124">The edge node runs only what you put on it.</span></span>
>
> <span data-ttu-id="cc09c-125">For more information on using edge nodes, see [Use edge nodes in HDInsight](hdinsight-apps-use-edge-node.md#access-an-edge-node).</span><span class="sxs-lookup"><span data-stu-id="cc09c-125">For more information on using edge nodes, see [Use edge nodes in HDInsight](hdinsight-apps-use-edge-node.md#access-an-edge-node).</span></span>

## <a name="ssh-clients"></a><span data-ttu-id="cc09c-126">SSH clients</span><span class="sxs-lookup"><span data-stu-id="cc09c-126">SSH clients</span></span>

<span data-ttu-id="cc09c-127">Most operating systems provide the `ssh` client.</span><span class="sxs-lookup"><span data-stu-id="cc09c-127">Most operating systems provide the `ssh` client.</span></span> <span data-ttu-id="cc09c-128">Microsoft Windows does not provide an SSH client by default.</span><span class="sxs-lookup"><span data-stu-id="cc09c-128">Microsoft Windows does not provide an SSH client by default.</span></span> <span data-ttu-id="cc09c-129">An SSH client for Windows is available in each of the following packages:</span><span class="sxs-lookup"><span data-stu-id="cc09c-129">An SSH client for Windows is available in each of the following packages:</span></span>

* <span data-ttu-id="cc09c-130">[Bash on Ubuntu on Windows 10](https://msdn.microsoft.com/commandline/wsl/about): The `ssh` command is provided through the Bash on Windows command line.</span><span class="sxs-lookup"><span data-stu-id="cc09c-130">[Bash on Ubuntu on Windows 10](https://msdn.microsoft.com/commandline/wsl/about): The `ssh` command is provided through the Bash on Windows command line.</span></span>

* <span data-ttu-id="cc09c-131">[Git (https://git-scm.com/)](https://git-scm.com/): The `ssh` command is provided through the GitBash command line.</span><span class="sxs-lookup"><span data-stu-id="cc09c-131">[Git (https://git-scm.com/)](https://git-scm.com/): The `ssh` command is provided through the GitBash command line.</span></span>

* <span data-ttu-id="cc09c-132">[GitHub Desktop (https://desktop.github.com/)](https://desktop.github.com/) The `ssh` command is provided through the Git Shell command line.</span><span class="sxs-lookup"><span data-stu-id="cc09c-132">[GitHub Desktop (https://desktop.github.com/)](https://desktop.github.com/) The `ssh` command is provided through the Git Shell command line.</span></span> <span data-ttu-id="cc09c-133">GitHub Desktop can be configured to use Bash, the Windows Command Prompt, or PowerShell as the command line for the Git Shell.</span><span class="sxs-lookup"><span data-stu-id="cc09c-133">GitHub Desktop can be configured to use Bash, the Windows Command Prompt, or PowerShell as the command line for the Git Shell.</span></span>

* <span data-ttu-id="cc09c-134">[OpenSSH (https://github.com/PowerShell/Win32-OpenSSH/wiki/Install-Win32-OpenSSH)](https://github.com/PowerShell/Win32-OpenSSH/wiki/Install-Win32-OpenSSH): The PowerShell team is porting OpenSSH to Windows, and provides test releases.</span><span class="sxs-lookup"><span data-stu-id="cc09c-134">[OpenSSH (https://github.com/PowerShell/Win32-OpenSSH/wiki/Install-Win32-OpenSSH)](https://github.com/PowerShell/Win32-OpenSSH/wiki/Install-Win32-OpenSSH): The PowerShell team is porting OpenSSH to Windows, and provides test releases.</span></span>

    > [!WARNING]
    > <span data-ttu-id="cc09c-135">The OpenSSH package includes the SSH server component, `sshd`.</span><span class="sxs-lookup"><span data-stu-id="cc09c-135">The OpenSSH package includes the SSH server component, `sshd`.</span></span> <span data-ttu-id="cc09c-136">This component starts an SSH server on your system, allowing others to connect to it.</span><span class="sxs-lookup"><span data-stu-id="cc09c-136">This component starts an SSH server on your system, allowing others to connect to it.</span></span> <span data-ttu-id="cc09c-137">Do not configure this component or open port 22 unless you want to host an SSH server on your system.</span><span class="sxs-lookup"><span data-stu-id="cc09c-137">Do not configure this component or open port 22 unless you want to host an SSH server on your system.</span></span> <span data-ttu-id="cc09c-138">It is not required to communicate with HDInsight.</span><span class="sxs-lookup"><span data-stu-id="cc09c-138">It is not required to communicate with HDInsight.</span></span>

<span data-ttu-id="cc09c-139">There are also several graphical SSH clients, such as [PuTTY (http://www.chiark.greenend.org.uk/~sgtatham/putty/)](http://www.chiark.greenend.org.uk/~sgtatham/putty/) and [MobaXterm (http://mobaxterm.mobatek.net/)](http://mobaxterm.mobatek.net/).</span><span class="sxs-lookup"><span data-stu-id="cc09c-139">There are also several graphical SSH clients, such as [PuTTY (http://www.chiark.greenend.org.uk/~sgtatham/putty/)](http://www.chiark.greenend.org.uk/~sgtatham/putty/) and [MobaXterm (http://mobaxterm.mobatek.net/)](http://mobaxterm.mobatek.net/).</span></span> <span data-ttu-id="cc09c-140">While these clients can be used to connect to HDInsight, the process of connecting to a server is different than using the `ssh` utility.</span><span class="sxs-lookup"><span data-stu-id="cc09c-140">While these clients can be used to connect to HDInsight, the process of connecting to a server is different than using the `ssh` utility.</span></span> <span data-ttu-id="cc09c-141">For more information, see the documentation of the graphical client you are using.</span><span class="sxs-lookup"><span data-stu-id="cc09c-141">For more information, see the documentation of the graphical client you are using.</span></span>

## <a id="sshkey"></a><span data-ttu-id="cc09c-142">Authentication: SSH Keys</span><span class="sxs-lookup"><span data-stu-id="cc09c-142">Authentication: SSH Keys</span></span>

<span data-ttu-id="cc09c-143">SSH keys use [Public-key cryptography](https://en.wikipedia.org/wiki/Public-key_cryptography) to secure the cluster.</span><span class="sxs-lookup"><span data-stu-id="cc09c-143">SSH keys use [Public-key cryptography](https://en.wikipedia.org/wiki/Public-key_cryptography) to secure the cluster.</span></span> <span data-ttu-id="cc09c-144">SSH keys are more secure than passwords, and provide an easy way to secure your HDInsight cluster.</span><span class="sxs-lookup"><span data-stu-id="cc09c-144">SSH keys are more secure than passwords, and provide an easy way to secure your HDInsight cluster.</span></span>

<span data-ttu-id="cc09c-145">If your SSH account is secured using a key, the client must provide the matching private key when you connect:</span><span class="sxs-lookup"><span data-stu-id="cc09c-145">If your SSH account is secured using a key, the client must provide the matching private key when you connect:</span></span>

* <span data-ttu-id="cc09c-146">Most clients can be configured to use a __default key__.</span><span class="sxs-lookup"><span data-stu-id="cc09c-146">Most clients can be configured to use a __default key__.</span></span> <span data-ttu-id="cc09c-147">For example, the `ssh` client looks for a private key at `~/.ssh/id_rsa` on Linux and Unix environments.</span><span class="sxs-lookup"><span data-stu-id="cc09c-147">For example, the `ssh` client looks for a private key at `~/.ssh/id_rsa` on Linux and Unix environments.</span></span>

* <span data-ttu-id="cc09c-148">You can specify the __path to a private key__.</span><span class="sxs-lookup"><span data-stu-id="cc09c-148">You can specify the __path to a private key__.</span></span> <span data-ttu-id="cc09c-149">With the `ssh` client, the `-i` parameter is used to specify the path to private key.</span><span class="sxs-lookup"><span data-stu-id="cc09c-149">With the `ssh` client, the `-i` parameter is used to specify the path to private key.</span></span> <span data-ttu-id="cc09c-150">For example, `ssh -i ~/.ssh/hdinsight sshuser@myedge.mycluster-ssh.azurehdinsight.net`.</span><span class="sxs-lookup"><span data-stu-id="cc09c-150">For example, `ssh -i ~/.ssh/hdinsight sshuser@myedge.mycluster-ssh.azurehdinsight.net`.</span></span>

* <span data-ttu-id="cc09c-151">If you have __multiple private keys__ for use with different servers, utilities such as [ssh-agent (https://en.wikipedia.org/wiki/Ssh-agent)](https://en.wikipedia.org/wiki/Ssh-agent) can be used to automatically select the key to use.</span><span class="sxs-lookup"><span data-stu-id="cc09c-151">If you have __multiple private keys__ for use with different servers, utilities such as [ssh-agent (https://en.wikipedia.org/wiki/Ssh-agent)](https://en.wikipedia.org/wiki/Ssh-agent) can be used to automatically select the key to use.</span></span>

> [!IMPORTANT]
>
> <span data-ttu-id="cc09c-152">If you secure your private key with a passphrase, you must enter the passphrase when using the key.</span><span class="sxs-lookup"><span data-stu-id="cc09c-152">If you secure your private key with a passphrase, you must enter the passphrase when using the key.</span></span> <span data-ttu-id="cc09c-153">Utilities such as `ssh-agent` can cache the password for your convenience.</span><span class="sxs-lookup"><span data-stu-id="cc09c-153">Utilities such as `ssh-agent` can cache the password for your convenience.</span></span>

### <a name="create-an-ssh-key-pair"></a><span data-ttu-id="cc09c-154">Create an SSH key pair</span><span class="sxs-lookup"><span data-stu-id="cc09c-154">Create an SSH key pair</span></span>

<span data-ttu-id="cc09c-155">Use the `ssh-keygen` command to create public and private key files.</span><span class="sxs-lookup"><span data-stu-id="cc09c-155">Use the `ssh-keygen` command to create public and private key files.</span></span> <span data-ttu-id="cc09c-156">The following command generates a 2048-bit RSA key pair that can be used with HDInsight:</span><span class="sxs-lookup"><span data-stu-id="cc09c-156">The following command generates a 2048-bit RSA key pair that can be used with HDInsight:</span></span>

    ssh-keygen -t rsa -b 2048

<span data-ttu-id="cc09c-157">You are prompted for information during the key creation process.</span><span class="sxs-lookup"><span data-stu-id="cc09c-157">You are prompted for information during the key creation process.</span></span> <span data-ttu-id="cc09c-158">For example, where the keys are stored or whether to use a passphrase.</span><span class="sxs-lookup"><span data-stu-id="cc09c-158">For example, where the keys are stored or whether to use a passphrase.</span></span> <span data-ttu-id="cc09c-159">After the process completes, two files are created; a public key and a private key.</span><span class="sxs-lookup"><span data-stu-id="cc09c-159">After the process completes, two files are created; a public key and a private key.</span></span>

* <span data-ttu-id="cc09c-160">The __public key__ is used to create an HDInsight cluster.</span><span class="sxs-lookup"><span data-stu-id="cc09c-160">The __public key__ is used to create an HDInsight cluster.</span></span> <span data-ttu-id="cc09c-161">The public key has an extension of `.pub`.</span><span class="sxs-lookup"><span data-stu-id="cc09c-161">The public key has an extension of `.pub`.</span></span>

* <span data-ttu-id="cc09c-162">The __private key__ is used to authenticate your client to the HDInsight cluster.</span><span class="sxs-lookup"><span data-stu-id="cc09c-162">The __private key__ is used to authenticate your client to the HDInsight cluster.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="cc09c-163">You can secure your keys using a passphrase.</span><span class="sxs-lookup"><span data-stu-id="cc09c-163">You can secure your keys using a passphrase.</span></span> <span data-ttu-id="cc09c-164">This is effectively a password on your private key.</span><span class="sxs-lookup"><span data-stu-id="cc09c-164">This is effectively a password on your private key.</span></span> <span data-ttu-id="cc09c-165">Even if someone obtains your private key, they must have the passphrase to use the key.</span><span class="sxs-lookup"><span data-stu-id="cc09c-165">Even if someone obtains your private key, they must have the passphrase to use the key.</span></span>

### <a name="create-hdinsight-using-the-public-key"></a><span data-ttu-id="cc09c-166">Create HDInsight using the public key</span><span class="sxs-lookup"><span data-stu-id="cc09c-166">Create HDInsight using the public key</span></span>

| <span data-ttu-id="cc09c-167">Creation method</span><span class="sxs-lookup"><span data-stu-id="cc09c-167">Creation method</span></span> | <span data-ttu-id="cc09c-168">How to use the public key</span><span class="sxs-lookup"><span data-stu-id="cc09c-168">How to use the public key</span></span> |
| ------- | ------- |
| <span data-ttu-id="cc09c-169">**Azure portal**</span><span class="sxs-lookup"><span data-stu-id="cc09c-169">**Azure portal**</span></span> | <span data-ttu-id="cc09c-170">Uncheck __Use same password as cluster login__, and then select __Public Key__ as the SSH authentication type.</span><span class="sxs-lookup"><span data-stu-id="cc09c-170">Uncheck __Use same password as cluster login__, and then select __Public Key__ as the SSH authentication type.</span></span> <span data-ttu-id="cc09c-171">Finally, select the public key file or paste the text contents of the file in the __SSH public key__ field.</span><span class="sxs-lookup"><span data-stu-id="cc09c-171">Finally, select the public key file or paste the text contents of the file in the __SSH public key__ field.</span></span></br><span data-ttu-id="cc09c-172">![SSH public key dialog in HDInsight cluster creation](https://docstestmedia1.blob.core.windows.net/azure-media/articles/hdinsight/media/hdinsight-hadoop-linux-use-ssh-unix/create-hdinsight-ssh-public-key.png)</span><span class="sxs-lookup"><span data-stu-id="cc09c-172">![SSH public key dialog in HDInsight cluster creation](https://docstestmedia1.blob.core.windows.net/azure-media/articles/hdinsight/media/hdinsight-hadoop-linux-use-ssh-unix/create-hdinsight-ssh-public-key.png)</span></span> |
| <span data-ttu-id="cc09c-173">**Azure PowerShell**</span><span class="sxs-lookup"><span data-stu-id="cc09c-173">**Azure PowerShell**</span></span> | <span data-ttu-id="cc09c-174">Use the `-SshPublicKey` parameter of the `New-AzureRmHdinsightCluster` cmdlet and pass the contents of the public key as a string.</span><span class="sxs-lookup"><span data-stu-id="cc09c-174">Use the `-SshPublicKey` parameter of the `New-AzureRmHdinsightCluster` cmdlet and pass the contents of the public key as a string.</span></span>|
| <span data-ttu-id="cc09c-175">**Azure CLI 1.0**</span><span class="sxs-lookup"><span data-stu-id="cc09c-175">**Azure CLI 1.0**</span></span> | <span data-ttu-id="cc09c-176">Use the `--sshPublicKey` parameter of the `azure hdinsight cluster create` command and pass the contents of the public key as a string.</span><span class="sxs-lookup"><span data-stu-id="cc09c-176">Use the `--sshPublicKey` parameter of the `azure hdinsight cluster create` command and pass the contents of the public key as a string.</span></span> |
| <span data-ttu-id="cc09c-177">**Resource Manager Template**</span><span class="sxs-lookup"><span data-stu-id="cc09c-177">**Resource Manager Template**</span></span> | <span data-ttu-id="cc09c-178">For an example of using SSH keys with a template, see [Deploy HDInsight on Linux with SSH key](https://azure.microsoft.com/resources/templates/101-hdinsight-linux-ssh-publickey/).</span><span class="sxs-lookup"><span data-stu-id="cc09c-178">For an example of using SSH keys with a template, see [Deploy HDInsight on Linux with SSH key](https://azure.microsoft.com/resources/templates/101-hdinsight-linux-ssh-publickey/).</span></span> <span data-ttu-id="cc09c-179">The `publicKeys` element in the [azuredeploy.json](https://github.com/Azure/azure-quickstart-templates/blob/master/101-hdinsight-linux-ssh-publickey/azuredeploy.json) file is used to pass the keys to Azure when creating the cluster.</span><span class="sxs-lookup"><span data-stu-id="cc09c-179">The `publicKeys` element in the [azuredeploy.json](https://github.com/Azure/azure-quickstart-templates/blob/master/101-hdinsight-linux-ssh-publickey/azuredeploy.json) file is used to pass the keys to Azure when creating the cluster.</span></span> |

## <a id="sshpassword"></a><span data-ttu-id="cc09c-180">Authentication: Password</span><span class="sxs-lookup"><span data-stu-id="cc09c-180">Authentication: Password</span></span>

<span data-ttu-id="cc09c-181">SSH accounts can be secured using a password.</span><span class="sxs-lookup"><span data-stu-id="cc09c-181">SSH accounts can be secured using a password.</span></span> <span data-ttu-id="cc09c-182">When you connect to HDInsight using SSH, you are prompted to enter the password.</span><span class="sxs-lookup"><span data-stu-id="cc09c-182">When you connect to HDInsight using SSH, you are prompted to enter the password.</span></span>

> [!WARNING]
> <span data-ttu-id="cc09c-183">We do not recommend using password authentication for SSH.</span><span class="sxs-lookup"><span data-stu-id="cc09c-183">We do not recommend using password authentication for SSH.</span></span> <span data-ttu-id="cc09c-184">Passwords can be guessed and are vulnerable to brute force attacks.</span><span class="sxs-lookup"><span data-stu-id="cc09c-184">Passwords can be guessed and are vulnerable to brute force attacks.</span></span> <span data-ttu-id="cc09c-185">Instead, we recommend that you use [SSH keys for authentication](#sshkey).</span><span class="sxs-lookup"><span data-stu-id="cc09c-185">Instead, we recommend that you use [SSH keys for authentication](#sshkey).</span></span>

### <a name="create-hdinsight-using-a-password"></a><span data-ttu-id="cc09c-186">Create HDInsight using a password</span><span class="sxs-lookup"><span data-stu-id="cc09c-186">Create HDInsight using a password</span></span>

| <span data-ttu-id="cc09c-187">Creation method</span><span class="sxs-lookup"><span data-stu-id="cc09c-187">Creation method</span></span> | <span data-ttu-id="cc09c-188">How to specify the password</span><span class="sxs-lookup"><span data-stu-id="cc09c-188">How to specify the password</span></span> |
| --------------- | ---------------- |
| <span data-ttu-id="cc09c-189">**Azure portal**</span><span class="sxs-lookup"><span data-stu-id="cc09c-189">**Azure portal**</span></span> | <span data-ttu-id="cc09c-190">By default, the SSH user account has the same password as the cluster login account.</span><span class="sxs-lookup"><span data-stu-id="cc09c-190">By default, the SSH user account has the same password as the cluster login account.</span></span> <span data-ttu-id="cc09c-191">To use a different password, uncheck __Use same password as cluster login__, and then enter the password in the __SSH password__ field.</span><span class="sxs-lookup"><span data-stu-id="cc09c-191">To use a different password, uncheck __Use same password as cluster login__, and then enter the password in the __SSH password__ field.</span></span></br><span data-ttu-id="cc09c-192">![SSH password dialog in HDInsight cluster creation](https://docstestmedia1.blob.core.windows.net/azure-media/articles/hdinsight/media/hdinsight-hadoop-linux-use-ssh-unix/create-hdinsight-ssh-password.png)</span><span class="sxs-lookup"><span data-stu-id="cc09c-192">![SSH password dialog in HDInsight cluster creation](https://docstestmedia1.blob.core.windows.net/azure-media/articles/hdinsight/media/hdinsight-hadoop-linux-use-ssh-unix/create-hdinsight-ssh-password.png)</span></span>|
| <span data-ttu-id="cc09c-193">**Azure PowerShell**</span><span class="sxs-lookup"><span data-stu-id="cc09c-193">**Azure PowerShell**</span></span> | <span data-ttu-id="cc09c-194">Use the `--SshCredential` parameter of the `New-AzureRmHdinsightCluster` cmdlet and pass a `PSCredential` object that contains the SSH user account name and password.</span><span class="sxs-lookup"><span data-stu-id="cc09c-194">Use the `--SshCredential` parameter of the `New-AzureRmHdinsightCluster` cmdlet and pass a `PSCredential` object that contains the SSH user account name and password.</span></span> |
| <span data-ttu-id="cc09c-195">**Azure CLI 1.0**</span><span class="sxs-lookup"><span data-stu-id="cc09c-195">**Azure CLI 1.0**</span></span> | <span data-ttu-id="cc09c-196">Use the `--sshPassword` parameter of the `azure hdinsight cluster create` command and provide the password value.</span><span class="sxs-lookup"><span data-stu-id="cc09c-196">Use the `--sshPassword` parameter of the `azure hdinsight cluster create` command and provide the password value.</span></span> |
| <span data-ttu-id="cc09c-197">**Resource Manager Template**</span><span class="sxs-lookup"><span data-stu-id="cc09c-197">**Resource Manager Template**</span></span> | <span data-ttu-id="cc09c-198">For an example of using a password with a template, see [Deploy HDInsight on Linux with SSH password](https://azure.microsoft.com/resources/templates/101-hdinsight-linux-ssh-password/).</span><span class="sxs-lookup"><span data-stu-id="cc09c-198">For an example of using a password with a template, see [Deploy HDInsight on Linux with SSH password](https://azure.microsoft.com/resources/templates/101-hdinsight-linux-ssh-password/).</span></span> <span data-ttu-id="cc09c-199">The `linuxOperatingSystemProfile` element in the [azuredeploy.json](https://github.com/Azure/azure-quickstart-templates/blob/master/101-hdinsight-linux-ssh-password/azuredeploy.json) file is used to pass the SSH account name and password to Azure when creating the cluster.</span><span class="sxs-lookup"><span data-stu-id="cc09c-199">The `linuxOperatingSystemProfile` element in the [azuredeploy.json](https://github.com/Azure/azure-quickstart-templates/blob/master/101-hdinsight-linux-ssh-password/azuredeploy.json) file is used to pass the SSH account name and password to Azure when creating the cluster.</span></span>|

### <a name="change-the-ssh-password"></a><span data-ttu-id="cc09c-200">Change the SSH password</span><span class="sxs-lookup"><span data-stu-id="cc09c-200">Change the SSH password</span></span>

<span data-ttu-id="cc09c-201">For information on changing the SSH user account password, see the __Change passwords__ section of the [Manage HDInsight](hdinsight-administer-use-portal-linux.md#change-passwords) document.</span><span class="sxs-lookup"><span data-stu-id="cc09c-201">For information on changing the SSH user account password, see the __Change passwords__ section of the [Manage HDInsight](hdinsight-administer-use-portal-linux.md#change-passwords) document.</span></span>

## <a id="domainjoined"></a><span data-ttu-id="cc09c-202">Authentication: Domain-joined HDInsight</span><span class="sxs-lookup"><span data-stu-id="cc09c-202">Authentication: Domain-joined HDInsight</span></span>

<span data-ttu-id="cc09c-203">If you are using a __domain-joined HDInsight cluster__, you must use the `kinit` command after connecting with SSH.</span><span class="sxs-lookup"><span data-stu-id="cc09c-203">If you are using a __domain-joined HDInsight cluster__, you must use the `kinit` command after connecting with SSH.</span></span> <span data-ttu-id="cc09c-204">This command prompts you for a domain user and password, and authenticates your session with the Azure Active Directory domain associated with the cluster.</span><span class="sxs-lookup"><span data-stu-id="cc09c-204">This command prompts you for a domain user and password, and authenticates your session with the Azure Active Directory domain associated with the cluster.</span></span>

<span data-ttu-id="cc09c-205">For more information, see [Configure domain-joined HDInsight](hdinsight-domain-joined-configure.md).</span><span class="sxs-lookup"><span data-stu-id="cc09c-205">For more information, see [Configure domain-joined HDInsight](hdinsight-domain-joined-configure.md).</span></span>

## <a name="connect-to-worker-and-zookeeper-nodes"></a><span data-ttu-id="cc09c-206">Connect to worker and Zookeeper nodes</span><span class="sxs-lookup"><span data-stu-id="cc09c-206">Connect to worker and Zookeeper nodes</span></span>

<span data-ttu-id="cc09c-207">The worker nodes and Zookeeper nodes are not directly accessible from the internet, but they can be accessed from the cluster head nodes or edge nodes.</span><span class="sxs-lookup"><span data-stu-id="cc09c-207">The worker nodes and Zookeeper nodes are not directly accessible from the internet, but they can be accessed from the cluster head nodes or edge nodes.</span></span> <span data-ttu-id="cc09c-208">The following are the general steps to connect to other nodes:</span><span class="sxs-lookup"><span data-stu-id="cc09c-208">The following are the general steps to connect to other nodes:</span></span>

1. <span data-ttu-id="cc09c-209">Use SSH to connect to a head or edge node:</span><span class="sxs-lookup"><span data-stu-id="cc09c-209">Use SSH to connect to a head or edge node:</span></span>

        ssh sshuser@myedge.mycluster-ssh.azurehdinsight.net

2. <span data-ttu-id="cc09c-210">From the SSH connection to the head or edge node, use the `ssh` command to connect to a worker node in the cluster:</span><span class="sxs-lookup"><span data-stu-id="cc09c-210">From the SSH connection to the head or edge node, use the `ssh` command to connect to a worker node in the cluster:</span></span>

        ssh sshuser@wn0-myhdi

    <span data-ttu-id="cc09c-211">To retrieve a list of the domain names of the nodes in the cluster, see the examples in the [Manage HDInsight by using the Ambari REST API](hdinsight-hadoop-manage-ambari-rest-api.md#example-get-the-fqdn-of-cluster-nodes) document.</span><span class="sxs-lookup"><span data-stu-id="cc09c-211">To retrieve a list of the domain names of the nodes in the cluster, see the examples in the [Manage HDInsight by using the Ambari REST API](hdinsight-hadoop-manage-ambari-rest-api.md#example-get-the-fqdn-of-cluster-nodes) document.</span></span>

<span data-ttu-id="cc09c-212">If the SSH account is secured using a __password__, you are asked to enter the password and the connection is established.</span><span class="sxs-lookup"><span data-stu-id="cc09c-212">If the SSH account is secured using a __password__, you are asked to enter the password and the connection is established.</span></span>

<span data-ttu-id="cc09c-213">If the SSH account is secured using __SSH keys__, you must make sure that your local environment is configured for SSH agent forwarding.</span><span class="sxs-lookup"><span data-stu-id="cc09c-213">If the SSH account is secured using __SSH keys__, you must make sure that your local environment is configured for SSH agent forwarding.</span></span>

> [!NOTE]
> <span data-ttu-id="cc09c-214">Another way to directly access all nodes in the cluster is to install HDInsight into an Azure Virtual Network.</span><span class="sxs-lookup"><span data-stu-id="cc09c-214">Another way to directly access all nodes in the cluster is to install HDInsight into an Azure Virtual Network.</span></span> <span data-ttu-id="cc09c-215">Then, you can join your remote machine to the same virtual network and directly access all nodes in the cluster.</span><span class="sxs-lookup"><span data-stu-id="cc09c-215">Then, you can join your remote machine to the same virtual network and directly access all nodes in the cluster.</span></span>
>
> <span data-ttu-id="cc09c-216">For more information, see [Use a virtual network with HDInsight](hdinsight-extend-hadoop-virtual-network.md).</span><span class="sxs-lookup"><span data-stu-id="cc09c-216">For more information, see [Use a virtual network with HDInsight](hdinsight-extend-hadoop-virtual-network.md).</span></span>

### <a name="configure-ssh-agent-forwarding"></a><span data-ttu-id="cc09c-217">Configure SSH agent forwarding</span><span class="sxs-lookup"><span data-stu-id="cc09c-217">Configure SSH agent forwarding</span></span>

> [!IMPORTANT]
> <span data-ttu-id="cc09c-218">The following steps assume a Linux/UNIX based system, and work with Bash on Windows 10.</span><span class="sxs-lookup"><span data-stu-id="cc09c-218">The following steps assume a Linux/UNIX based system, and work with Bash on Windows 10.</span></span> <span data-ttu-id="cc09c-219">If these steps do not work for your system, you may need to consult the documentation for your SSH client.</span><span class="sxs-lookup"><span data-stu-id="cc09c-219">If these steps do not work for your system, you may need to consult the documentation for your SSH client.</span></span>

1. <span data-ttu-id="cc09c-220">Using a text editor, open `~/.ssh/config`.</span><span class="sxs-lookup"><span data-stu-id="cc09c-220">Using a text editor, open `~/.ssh/config`.</span></span> <span data-ttu-id="cc09c-221">If this file doesn't exist, you can create it by entering `touch ~/.ssh/config` at a command line.</span><span class="sxs-lookup"><span data-stu-id="cc09c-221">If this file doesn't exist, you can create it by entering `touch ~/.ssh/config` at a command line.</span></span>

2. <span data-ttu-id="cc09c-222">Add the following text to the `config` file.</span><span class="sxs-lookup"><span data-stu-id="cc09c-222">Add the following text to the `config` file.</span></span>

        Host <edgenodename>.<clustername>-ssh.azurehdinsight.net
          ForwardAgent yes

    <span data-ttu-id="cc09c-223">Replace the __Host__ information with the address of the node you connect to using SSH.</span><span class="sxs-lookup"><span data-stu-id="cc09c-223">Replace the __Host__ information with the address of the node you connect to using SSH.</span></span> <span data-ttu-id="cc09c-224">The previous example uses the edge node.</span><span class="sxs-lookup"><span data-stu-id="cc09c-224">The previous example uses the edge node.</span></span> <span data-ttu-id="cc09c-225">This entry configures SSH agent forwarding for the specified node.</span><span class="sxs-lookup"><span data-stu-id="cc09c-225">This entry configures SSH agent forwarding for the specified node.</span></span>

3. <span data-ttu-id="cc09c-226">Test SSH agent forwarding by using the following command from the terminal:</span><span class="sxs-lookup"><span data-stu-id="cc09c-226">Test SSH agent forwarding by using the following command from the terminal:</span></span>

        echo "$SSH_AUTH_SOCK"

    <span data-ttu-id="cc09c-227">This command returns information similar to the following text:</span><span class="sxs-lookup"><span data-stu-id="cc09c-227">This command returns information similar to the following text:</span></span>

        /tmp/ssh-rfSUL1ldCldQ/agent.1792

    <span data-ttu-id="cc09c-228">If nothing is returned, then `ssh-agent` is not running.</span><span class="sxs-lookup"><span data-stu-id="cc09c-228">If nothing is returned, then `ssh-agent` is not running.</span></span> <span data-ttu-id="cc09c-229">See the agent startup scripts information at [Using ssh-agent with ssh (http://mah.everybody.org/docs/ssh)](http://mah.everybody.org/docs/ssh) or consult your SSH client documentation for specific steps on installing and configuring `ssh-agent`.</span><span class="sxs-lookup"><span data-stu-id="cc09c-229">See the agent startup scripts information at [Using ssh-agent with ssh (http://mah.everybody.org/docs/ssh)](http://mah.everybody.org/docs/ssh) or consult your SSH client documentation for specific steps on installing and configuring `ssh-agent`.</span></span>

4. <span data-ttu-id="cc09c-230">Once you have verified that **ssh-agent** is running, use the following to add your SSH private key to the agent:</span><span class="sxs-lookup"><span data-stu-id="cc09c-230">Once you have verified that **ssh-agent** is running, use the following to add your SSH private key to the agent:</span></span>

        ssh-add ~/.ssh/id_rsa

    <span data-ttu-id="cc09c-231">If your private key is stored in a different file, replace `~/.ssh/id_rsa` with the path to the file.</span><span class="sxs-lookup"><span data-stu-id="cc09c-231">If your private key is stored in a different file, replace `~/.ssh/id_rsa` with the path to the file.</span></span>

5. <span data-ttu-id="cc09c-232">Connect to the cluster edge node or head nodes using SSH.</span><span class="sxs-lookup"><span data-stu-id="cc09c-232">Connect to the cluster edge node or head nodes using SSH.</span></span> <span data-ttu-id="cc09c-233">Then use the SSH command to connect to a worker or zookeeper node.</span><span class="sxs-lookup"><span data-stu-id="cc09c-233">Then use the SSH command to connect to a worker or zookeeper node.</span></span> <span data-ttu-id="cc09c-234">The connection is established using the forwarded key.</span><span class="sxs-lookup"><span data-stu-id="cc09c-234">The connection is established using the forwarded key.</span></span>

## <a name="next-steps"></a><span data-ttu-id="cc09c-235">Next steps</span><span class="sxs-lookup"><span data-stu-id="cc09c-235">Next steps</span></span>

* [<span data-ttu-id="cc09c-236">Use SSH tunneling with HDInsight</span><span class="sxs-lookup"><span data-stu-id="cc09c-236">Use SSH tunneling with HDInsight</span></span>](hdinsight-linux-ambari-ssh-tunnel.md)
* [<span data-ttu-id="cc09c-237">Use a virtual network with HDInsight</span><span class="sxs-lookup"><span data-stu-id="cc09c-237">Use a virtual network with HDInsight</span></span>](hdinsight-extend-hadoop-virtual-network.md)
* [<span data-ttu-id="cc09c-238">Use edge nodes in HDInsight</span><span class="sxs-lookup"><span data-stu-id="cc09c-238">Use edge nodes in HDInsight</span></span>](hdinsight-apps-use-edge-node.md#access-an-edge-node)

