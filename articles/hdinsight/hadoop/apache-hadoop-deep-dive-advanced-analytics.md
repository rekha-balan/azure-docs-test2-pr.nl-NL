---
title: Deep dive - advanced analytics - Azure HDInsight
description: Learn how advanced analytics uses algorithms to process big data.
services: hdinsight
author: ashishthaps
ms.reviewer: jasonh
ms.service: hdinsight
ms.custom: hdinsightactive
ms.topic: conceptual
ms.date: 11/14/2017
ms.author: ashishth
ms.openlocfilehash: 40536aae15f2ae9fa5e186cdbea1f75f7d264437
ms.sourcegitcommit: d1451406a010fd3aa854dc8e5b77dc5537d8050e
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 09/13/2018
ms.locfileid: "44870367"
---
# <a name="deep-dive---advanced-analytics"></a><span data-ttu-id="4de88-103">Deep dive - advanced analytics</span><span class="sxs-lookup"><span data-stu-id="4de88-103">Deep dive - advanced analytics</span></span>

## <a name="what-is-advanced-analytics-for-hdinsight"></a><span data-ttu-id="4de88-104">What is advanced analytics for HDInsight?</span><span class="sxs-lookup"><span data-stu-id="4de88-104">What is advanced analytics for HDInsight?</span></span>

<span data-ttu-id="4de88-105">HDInsight provides the ability to obtain valuable insight from large amounts of structured, unstructured, and fast-moving data.</span><span class="sxs-lookup"><span data-stu-id="4de88-105">HDInsight provides the ability to obtain valuable insight from large amounts of structured, unstructured, and fast-moving data.</span></span> <span data-ttu-id="4de88-106">Advanced analytics is the use of highly scalable architectures, statistical and machine learning models, and intelligent dashboards to provide you with meaningful insights.</span><span class="sxs-lookup"><span data-stu-id="4de88-106">Advanced analytics is the use of highly scalable architectures, statistical and machine learning models, and intelligent dashboards to provide you with meaningful insights.</span></span> <span data-ttu-id="4de88-107">Machine learning, or *predictive analytics*, uses algorithms that identify and learn from relationships in your data to make predictions and guide your decisions.</span><span class="sxs-lookup"><span data-stu-id="4de88-107">Machine learning, or *predictive analytics*, uses algorithms that identify and learn from relationships in your data to make predictions and guide your decisions.</span></span>

## <a name="advanced-analytics-process"></a><span data-ttu-id="4de88-108">Advanced analytics process</span><span class="sxs-lookup"><span data-stu-id="4de88-108">Advanced analytics process</span></span>

![Process](./media/apache-hadoop-deep-dive-advanced-analytics/process.png)

<span data-ttu-id="4de88-110">After you've identified the business problem and have started collecting and processing your data, you need to create a model that represents the question you wish to predict.</span><span class="sxs-lookup"><span data-stu-id="4de88-110">After you've identified the business problem and have started collecting and processing your data, you need to create a model that represents the question you wish to predict.</span></span> <span data-ttu-id="4de88-111">Your model will use one or more machine learning algorithms to make the type of prediction that best fits your business needs.</span><span class="sxs-lookup"><span data-stu-id="4de88-111">Your model will use one or more machine learning algorithms to make the type of prediction that best fits your business needs.</span></span>  <span data-ttu-id="4de88-112">The majority of your data should be used to train your model, with the rest used to test or evaluate it.</span><span class="sxs-lookup"><span data-stu-id="4de88-112">The majority of your data should be used to train your model, with the rest used to test or evaluate it.</span></span> 

<span data-ttu-id="4de88-113">After you create, load, test, and evaluate your model, the next step is to deploy your model so that it begins supplying answers to your questions.</span><span class="sxs-lookup"><span data-stu-id="4de88-113">After you create, load, test, and evaluate your model, the next step is to deploy your model so that it begins supplying answers to your questions.</span></span> <span data-ttu-id="4de88-114">The last step is to monitor your model's performance and tune it as necessary.</span><span class="sxs-lookup"><span data-stu-id="4de88-114">The last step is to monitor your model's performance and tune it as necessary.</span></span> 

## <a name="common-types-of-algorithms"></a><span data-ttu-id="4de88-115">Common types of algorithms</span><span class="sxs-lookup"><span data-stu-id="4de88-115">Common types of algorithms</span></span>

<span data-ttu-id="4de88-116">Advanced analytics solutions provide a set of machine learning algorithms.</span><span class="sxs-lookup"><span data-stu-id="4de88-116">Advanced analytics solutions provide a set of machine learning algorithms.</span></span> <span data-ttu-id="4de88-117">Here is a summary of the categories of algorithms and associated common business use cases.</span><span class="sxs-lookup"><span data-stu-id="4de88-117">Here is a summary of the categories of algorithms and associated common business use cases.</span></span>

![Machine Learning Use Cases](./media/apache-hadoop-deep-dive-advanced-analytics/ml-use-cases.png)

<span data-ttu-id="4de88-119">Along with selecting the best-fitting algorithm(s), you need to consider whether or not you need to provide data for training.</span><span class="sxs-lookup"><span data-stu-id="4de88-119">Along with selecting the best-fitting algorithm(s), you need to consider whether or not you need to provide data for training.</span></span> <span data-ttu-id="4de88-120">Machine learning algorithms are categorized as follows:</span><span class="sxs-lookup"><span data-stu-id="4de88-120">Machine learning algorithms are categorized as follows:</span></span>

* <span data-ttu-id="4de88-121">Supervised - algorithm needs to be trained on a set of labeled data before it can provide results</span><span class="sxs-lookup"><span data-stu-id="4de88-121">Supervised - algorithm needs to be trained on a set of labeled data before it can provide results</span></span>
* <span data-ttu-id="4de88-122">Semi-supervised - algorithm can be augmented by extra targets through interactive query by a trainer, which were not available during initial stage of training</span><span class="sxs-lookup"><span data-stu-id="4de88-122">Semi-supervised - algorithm can be augmented by extra targets through interactive query by a trainer, which were not available during initial stage of training</span></span>
* <span data-ttu-id="4de88-123">Unsupervised - algorithm does not require training data</span><span class="sxs-lookup"><span data-stu-id="4de88-123">Unsupervised - algorithm does not require training data</span></span> 
* <span data-ttu-id="4de88-124">Reinforcement - algorithm uses software agents to determine ideal behavior within a specific context (often used in robotics)</span><span class="sxs-lookup"><span data-stu-id="4de88-124">Reinforcement - algorithm uses software agents to determine ideal behavior within a specific context (often used in robotics)</span></span>


| <span data-ttu-id="4de88-125">Algorithm Category</span><span class="sxs-lookup"><span data-stu-id="4de88-125">Algorithm Category</span></span>| <span data-ttu-id="4de88-126">Use</span><span class="sxs-lookup"><span data-stu-id="4de88-126">Use</span></span> | <span data-ttu-id="4de88-127">Learning Type</span><span class="sxs-lookup"><span data-stu-id="4de88-127">Learning Type</span></span> | <span data-ttu-id="4de88-128">Algorithms</span><span class="sxs-lookup"><span data-stu-id="4de88-128">Algorithms</span></span> |
| --- | --- | --- | -- |
| <span data-ttu-id="4de88-129">Classification</span><span class="sxs-lookup"><span data-stu-id="4de88-129">Classification</span></span> | <span data-ttu-id="4de88-130">Classify people or things into groups</span><span class="sxs-lookup"><span data-stu-id="4de88-130">Classify people or things into groups</span></span> | <span data-ttu-id="4de88-131">Supervised</span><span class="sxs-lookup"><span data-stu-id="4de88-131">Supervised</span></span> | <span data-ttu-id="4de88-132">Decision trees, Logistic regression, neural networks</span><span class="sxs-lookup"><span data-stu-id="4de88-132">Decision trees, Logistic regression, neural networks</span></span> |
| <span data-ttu-id="4de88-133">Clustering</span><span class="sxs-lookup"><span data-stu-id="4de88-133">Clustering</span></span> | <span data-ttu-id="4de88-134">Dividing a set of examples into homogenous groups</span><span class="sxs-lookup"><span data-stu-id="4de88-134">Dividing a set of examples into homogenous groups</span></span> | <span data-ttu-id="4de88-135">Unsupervised</span><span class="sxs-lookup"><span data-stu-id="4de88-135">Unsupervised</span></span> | <span data-ttu-id="4de88-136">K-means clustering</span><span class="sxs-lookup"><span data-stu-id="4de88-136">K-means clustering</span></span> |
| <span data-ttu-id="4de88-137">Pattern detection</span><span class="sxs-lookup"><span data-stu-id="4de88-137">Pattern detection</span></span> | <span data-ttu-id="4de88-138">Identify frequent associations in the data</span><span class="sxs-lookup"><span data-stu-id="4de88-138">Identify frequent associations in the data</span></span> | <span data-ttu-id="4de88-139">Unsupervised</span><span class="sxs-lookup"><span data-stu-id="4de88-139">Unsupervised</span></span> | <span data-ttu-id="4de88-140">Association rules</span><span class="sxs-lookup"><span data-stu-id="4de88-140">Association rules</span></span> |
| <span data-ttu-id="4de88-141">Regression</span><span class="sxs-lookup"><span data-stu-id="4de88-141">Regression</span></span> | <span data-ttu-id="4de88-142">Predict numerical outcomes</span><span class="sxs-lookup"><span data-stu-id="4de88-142">Predict numerical outcomes</span></span> | <span data-ttu-id="4de88-143">Supervised</span><span class="sxs-lookup"><span data-stu-id="4de88-143">Supervised</span></span> | <span data-ttu-id="4de88-144">Linear regression, neural networks</span><span class="sxs-lookup"><span data-stu-id="4de88-144">Linear regression, neural networks</span></span> |
| <span data-ttu-id="4de88-145">Reinforcement</span><span class="sxs-lookup"><span data-stu-id="4de88-145">Reinforcement</span></span> | <span data-ttu-id="4de88-146">Determine optimal behavior for robots</span><span class="sxs-lookup"><span data-stu-id="4de88-146">Determine optimal behavior for robots</span></span> | <span data-ttu-id="4de88-147">Reinforcement</span><span class="sxs-lookup"><span data-stu-id="4de88-147">Reinforcement</span></span> | <span data-ttu-id="4de88-148">Monte Carlo Simulations, DeepMind</span><span class="sxs-lookup"><span data-stu-id="4de88-148">Monte Carlo Simulations, DeepMind</span></span> |

## <a name="machine-learning-on-hdinsight"></a><span data-ttu-id="4de88-149">Machine learning on HDInsight</span><span class="sxs-lookup"><span data-stu-id="4de88-149">Machine learning on HDInsight</span></span>

<span data-ttu-id="4de88-150">HDInsight has several machine learning options for an advanced analytics workflow:</span><span class="sxs-lookup"><span data-stu-id="4de88-150">HDInsight has several machine learning options for an advanced analytics workflow:</span></span>

* [<span data-ttu-id="4de88-151">Machine Learning and Spark</span><span class="sxs-lookup"><span data-stu-id="4de88-151">Machine Learning and Spark</span></span>](#machine-learning-and-spark)
* [<span data-ttu-id="4de88-152">R and ML Services</span><span class="sxs-lookup"><span data-stu-id="4de88-152">R and ML Services</span></span>](#r-and-r-server)
* [<span data-ttu-id="4de88-153">Azure Machine Learning and Hive</span><span class="sxs-lookup"><span data-stu-id="4de88-153">Azure Machine Learning and Hive</span></span>](#azure-machine-learning-and-hive)
* [<span data-ttu-id="4de88-154">Spark and Deep learning</span><span class="sxs-lookup"><span data-stu-id="4de88-154">Spark and Deep learning</span></span>](#spark-and-deep-learning)

### <a name="machine-learning-and-spark"></a><span data-ttu-id="4de88-155">Machine Learning and Spark</span><span class="sxs-lookup"><span data-stu-id="4de88-155">Machine Learning and Spark</span></span>

<span data-ttu-id="4de88-156">[HDInsight Spark](../spark/apache-spark-overview.md) is an Azure-hosted offering of [Spark](http://spark.apache.org/), a unified, open source, parallel data processing framework that uses in-memory processing to boost Big Data analytics.</span><span class="sxs-lookup"><span data-stu-id="4de88-156">[HDInsight Spark](../spark/apache-spark-overview.md) is an Azure-hosted offering of [Spark](http://spark.apache.org/), a unified, open source, parallel data processing framework that uses in-memory processing to boost Big Data analytics.</span></span> <span data-ttu-id="4de88-157">The Spark processing engine is built for speed, ease of use, and sophisticated analytics.</span><span class="sxs-lookup"><span data-stu-id="4de88-157">The Spark processing engine is built for speed, ease of use, and sophisticated analytics.</span></span> <span data-ttu-id="4de88-158">Spark's in-memory distributed computation capabilities make it a good choice for the iterative algorithms used in machine learning and graph computations.</span><span class="sxs-lookup"><span data-stu-id="4de88-158">Spark's in-memory distributed computation capabilities make it a good choice for the iterative algorithms used in machine learning and graph computations.</span></span> 

<span data-ttu-id="4de88-159">There are three scalable machine learning libraries that bring algorithmic modeling capabilities to this distributed environment:</span><span class="sxs-lookup"><span data-stu-id="4de88-159">There are three scalable machine learning libraries that bring algorithmic modeling capabilities to this distributed environment:</span></span>

* <span data-ttu-id="4de88-160">[**MLlib**](https://spark.apache.org/docs/latest/ml-guide.html) - MLlib contains the original API built on top of Spark RDDs.</span><span class="sxs-lookup"><span data-stu-id="4de88-160">[**MLlib**](https://spark.apache.org/docs/latest/ml-guide.html) - MLlib contains the original API built on top of Spark RDDs.</span></span>
* <span data-ttu-id="4de88-161">[**SparkML**](https://spark.apache.org/docs/1.2.2/ml-guide.html) - SparkML is a newer package that provides a higher-level API built on top of Spark DataFrames for constructing ML pipelines.</span><span class="sxs-lookup"><span data-stu-id="4de88-161">[**SparkML**](https://spark.apache.org/docs/1.2.2/ml-guide.html) - SparkML is a newer package that provides a higher-level API built on top of Spark DataFrames for constructing ML pipelines.</span></span>
* <span data-ttu-id="4de88-162">[**MMLSpark**](https://github.com/Azure/mmlspark)  - The Microsoft Machine Learning library for Apache Spark (MMLSpark) is designed to make data scientists more productive on Spark, to increase the rate of experimentation, and to leverage cutting-edge machine learning techniques, including deep learning, on very large datasets.</span><span class="sxs-lookup"><span data-stu-id="4de88-162">[**MMLSpark**](https://github.com/Azure/mmlspark)  - The Microsoft Machine Learning library for Apache Spark (MMLSpark) is designed to make data scientists more productive on Spark, to increase the rate of experimentation, and to leverage cutting-edge machine learning techniques, including deep learning, on very large datasets.</span></span> <span data-ttu-id="4de88-163">The MMLSpark library simplifies common modeling tasks for building models in PySpark.</span><span class="sxs-lookup"><span data-stu-id="4de88-163">The MMLSpark library simplifies common modeling tasks for building models in PySpark.</span></span> 

### <a name="r-and-ml-services"></a><span data-ttu-id="4de88-164">R and ML Services</span><span class="sxs-lookup"><span data-stu-id="4de88-164">R and ML Services</span></span>

<span data-ttu-id="4de88-165">As part of HDInsight, you can create an HDInsight cluster with [ML Services](../r-server/r-server-overview.md) ready to be used with massive datasets and models.</span><span class="sxs-lookup"><span data-stu-id="4de88-165">As part of HDInsight, you can create an HDInsight cluster with [ML Services](../r-server/r-server-overview.md) ready to be used with massive datasets and models.</span></span> <span data-ttu-id="4de88-166">This new capability provides data scientists and statisticians with a familiar R interface that can scale on-demand through HDInsight, without the overhead of cluster setup and maintenance.</span><span class="sxs-lookup"><span data-stu-id="4de88-166">This new capability provides data scientists and statisticians with a familiar R interface that can scale on-demand through HDInsight, without the overhead of cluster setup and maintenance.</span></span>

### <a name="azure-machine-learning-and-hive"></a><span data-ttu-id="4de88-167">Azure Machine Learning and Hive</span><span class="sxs-lookup"><span data-stu-id="4de88-167">Azure Machine Learning and Hive</span></span>

<span data-ttu-id="4de88-168">[Azure Machine Learning Studio](https://studio.azureml.net/) provides tools to model predictive analytics, as well as a fully managed service you can use to deploy your predictive models as ready-to-consume web services.</span><span class="sxs-lookup"><span data-stu-id="4de88-168">[Azure Machine Learning Studio](https://studio.azureml.net/) provides tools to model predictive analytics, as well as a fully managed service you can use to deploy your predictive models as ready-to-consume web services.</span></span> <span data-ttu-id="4de88-169">Azure Machine Learning provides tools for creating complete predictive analytics solutions in the cloud to quickly create, test, operationalize, and manage predictive models.</span><span class="sxs-lookup"><span data-stu-id="4de88-169">Azure Machine Learning provides tools for creating complete predictive analytics solutions in the cloud to quickly create, test, operationalize, and manage predictive models.</span></span> <span data-ttu-id="4de88-170">Select from a large algorithm library, use a web-based studio for building models, and easily deploy your model as a web service.</span><span class="sxs-lookup"><span data-stu-id="4de88-170">Select from a large algorithm library, use a web-based studio for building models, and easily deploy your model as a web service.</span></span>

### <a name="spark-and-deep-learning"></a><span data-ttu-id="4de88-171">Spark and Deep learning</span><span class="sxs-lookup"><span data-stu-id="4de88-171">Spark and Deep learning</span></span>

<span data-ttu-id="4de88-172">[Deep learning](https://www.microsoft.com/research/group/dltc/) is a branch of machine learning that uses *deep neural networks* (DNNs), inspired by the biological processes of the human brain.</span><span class="sxs-lookup"><span data-stu-id="4de88-172">[Deep learning](https://www.microsoft.com/research/group/dltc/) is a branch of machine learning that uses *deep neural networks* (DNNs), inspired by the biological processes of the human brain.</span></span> <span data-ttu-id="4de88-173">Many researchers see deep learning as a promising approach for  artificial intelligence.</span><span class="sxs-lookup"><span data-stu-id="4de88-173">Many researchers see deep learning as a promising approach for  artificial intelligence.</span></span> <span data-ttu-id="4de88-174">Some examples of deep learning are spoken language translators, image recognition systems, and machine reasoning.</span><span class="sxs-lookup"><span data-stu-id="4de88-174">Some examples of deep learning are spoken language translators, image recognition systems, and machine reasoning.</span></span> <span data-ttu-id="4de88-175">To help advance its own work in deep learning, Microsoft has developed the free, easy-to-use, open-source [Microsoft Cognitive Toolkit](https://www.microsoft.com/en-us/cognitive-toolkit/).</span><span class="sxs-lookup"><span data-stu-id="4de88-175">To help advance its own work in deep learning, Microsoft has developed the free, easy-to-use, open-source [Microsoft Cognitive Toolkit](https://www.microsoft.com/en-us/cognitive-toolkit/).</span></span> <span data-ttu-id="4de88-176">The toolkit is being used extensively by a wide variety of Microsoft products, by companies worldwide with a need to deploy deep learning at scale, and by students interested in the latest algorithms and techniques.</span><span class="sxs-lookup"><span data-stu-id="4de88-176">The toolkit is being used extensively by a wide variety of Microsoft products, by companies worldwide with a need to deploy deep learning at scale, and by students interested in the latest algorithms and techniques.</span></span> 

## <a name="scenario---score-images-to-identify-patterns-in-urban-development"></a><span data-ttu-id="4de88-177">Scenario - Score Images to Identify Patterns in Urban Development</span><span class="sxs-lookup"><span data-stu-id="4de88-177">Scenario - Score Images to Identify Patterns in Urban Development</span></span>

<span data-ttu-id="4de88-178">Let's review an example of an advanced analytics machine learning pipeline using HDInsight.</span><span class="sxs-lookup"><span data-stu-id="4de88-178">Let's review an example of an advanced analytics machine learning pipeline using HDInsight.</span></span>

<span data-ttu-id="4de88-179">In this scenario you will see how DNNs produced in a deep learning framework, Microsoft’s Cognitive Toolkit (CNTK), can be operationalized for scoring large image collections stored in an Azure Blob Storage account using PySpark on an HDInsight Spark cluster.</span><span class="sxs-lookup"><span data-stu-id="4de88-179">In this scenario you will see how DNNs produced in a deep learning framework, Microsoft’s Cognitive Toolkit (CNTK), can be operationalized for scoring large image collections stored in an Azure Blob Storage account using PySpark on an HDInsight Spark cluster.</span></span> <span data-ttu-id="4de88-180">This approach is applied to a common DNN use case, aerial image classification, and can be used to identify recent patterns in urban development.</span><span class="sxs-lookup"><span data-stu-id="4de88-180">This approach is applied to a common DNN use case, aerial image classification, and can be used to identify recent patterns in urban development.</span></span>  <span data-ttu-id="4de88-181">You will use a pre-trained image classification model.</span><span class="sxs-lookup"><span data-stu-id="4de88-181">You will use a pre-trained image classification model.</span></span> <span data-ttu-id="4de88-182">The model is pre-trained on the [CIFAR-10 dataset](https://www.cs.toronto.edu/~kriz/cifar.html) and has been applied to 10,000 withheld images.</span><span class="sxs-lookup"><span data-stu-id="4de88-182">The model is pre-trained on the [CIFAR-10 dataset](https://www.cs.toronto.edu/~kriz/cifar.html) and has been applied to 10,000 withheld images.</span></span>

<span data-ttu-id="4de88-183">There are three key tasks in this advanced analytics scenario:</span><span class="sxs-lookup"><span data-stu-id="4de88-183">There are three key tasks in this advanced analytics scenario:</span></span>

1. <span data-ttu-id="4de88-184">Create an Azure HDInsight Hadoop cluster with an Apache Spark 2.1.0 distribution.</span><span class="sxs-lookup"><span data-stu-id="4de88-184">Create an Azure HDInsight Hadoop cluster with an Apache Spark 2.1.0 distribution.</span></span> 
2. <span data-ttu-id="4de88-185">Run a custom script to install Microsoft Cognitive Toolkit on all nodes of an Azure HDInsight Spark cluster.</span><span class="sxs-lookup"><span data-stu-id="4de88-185">Run a custom script to install Microsoft Cognitive Toolkit on all nodes of an Azure HDInsight Spark cluster.</span></span> 
3. <span data-ttu-id="4de88-186">Upload a pre-built Jupyter notebook to your HDInsight Spark cluster to apply a trained Microsoft Cognitive Toolkit deep learning model to files in an Azure Blob Storage Account using the Spark Python API (PySpark).</span><span class="sxs-lookup"><span data-stu-id="4de88-186">Upload a pre-built Jupyter notebook to your HDInsight Spark cluster to apply a trained Microsoft Cognitive Toolkit deep learning model to files in an Azure Blob Storage Account using the Spark Python API (PySpark).</span></span> 

<span data-ttu-id="4de88-187">This example uses the CIFAR-10 image set compiled and distributed by Alex Krizhevsky, Vinod Nair, and Geoffrey Hinton.</span><span class="sxs-lookup"><span data-stu-id="4de88-187">This example uses the CIFAR-10 image set compiled and distributed by Alex Krizhevsky, Vinod Nair, and Geoffrey Hinton.</span></span> <span data-ttu-id="4de88-188">The CIFAR-10 dataset contains 60,000 32×32 color images belonging to 10 mutually exclusive classes:</span><span class="sxs-lookup"><span data-stu-id="4de88-188">The CIFAR-10 dataset contains 60,000 32×32 color images belonging to 10 mutually exclusive classes:</span></span>

![Images](./media/apache-hadoop-deep-dive-advanced-analytics/ml-images.png)

<span data-ttu-id="4de88-190">For more details on the dataset, see Alex Krizhevsky’s [Learning Multiple Layers of Features from Tiny Images](https://www.cs.toronto.edu/~kriz/learning-features-2009-TR.pdf).</span><span class="sxs-lookup"><span data-stu-id="4de88-190">For more details on the dataset, see Alex Krizhevsky’s [Learning Multiple Layers of Features from Tiny Images](https://www.cs.toronto.edu/~kriz/learning-features-2009-TR.pdf).</span></span>

<span data-ttu-id="4de88-191">The dataset was partitioned into a training set of 50,000 images and a test set of 10,000 images.</span><span class="sxs-lookup"><span data-stu-id="4de88-191">The dataset was partitioned into a training set of 50,000 images and a test set of 10,000 images.</span></span> <span data-ttu-id="4de88-192">The first set was used to train a twenty-layer-deep convolutional residual network (ResNet) model using Microsoft Cognitive Toolkit by following [this tutorial](https://github.com/Microsoft/CNTK/tree/master/Examples/Image/Classification/ResNet) from the Cognitive Toolkit GitHub repository.</span><span class="sxs-lookup"><span data-stu-id="4de88-192">The first set was used to train a twenty-layer-deep convolutional residual network (ResNet) model using Microsoft Cognitive Toolkit by following [this tutorial](https://github.com/Microsoft/CNTK/tree/master/Examples/Image/Classification/ResNet) from the Cognitive Toolkit GitHub repository.</span></span> <span data-ttu-id="4de88-193">The remaining 10,000 images were used for testing the model’s accuracy.</span><span class="sxs-lookup"><span data-stu-id="4de88-193">The remaining 10,000 images were used for testing the model’s accuracy.</span></span> <span data-ttu-id="4de88-194">This is where distributed computing comes into play: the task of pre-processing and scoring the images is highly parallelizable.</span><span class="sxs-lookup"><span data-stu-id="4de88-194">This is where distributed computing comes into play: the task of pre-processing and scoring the images is highly parallelizable.</span></span> <span data-ttu-id="4de88-195">With the saved trained model in hand, we used:</span><span class="sxs-lookup"><span data-stu-id="4de88-195">With the saved trained model in hand, we used:</span></span>

* <span data-ttu-id="4de88-196">PySpark to distribute the images and trained model to the cluster’s worker nodes.</span><span class="sxs-lookup"><span data-stu-id="4de88-196">PySpark to distribute the images and trained model to the cluster’s worker nodes.</span></span>
* <span data-ttu-id="4de88-197">Python to pre-process the images on each node of the HDInsight Spark cluster.</span><span class="sxs-lookup"><span data-stu-id="4de88-197">Python to pre-process the images on each node of the HDInsight Spark cluster.</span></span>
* <span data-ttu-id="4de88-198">Cognitive Toolkit to load the model and score the pre-processed images on each node.</span><span class="sxs-lookup"><span data-stu-id="4de88-198">Cognitive Toolkit to load the model and score the pre-processed images on each node.</span></span>
* <span data-ttu-id="4de88-199">Jupyter Notebooks to run the PySpark script, aggregate the results, and use [Matplotlib](https://matplotlib.org/) to visualize the model performance.</span><span class="sxs-lookup"><span data-stu-id="4de88-199">Jupyter Notebooks to run the PySpark script, aggregate the results, and use [Matplotlib](https://matplotlib.org/) to visualize the model performance.</span></span>

<span data-ttu-id="4de88-200">The entire preprocessing/scoring of the 10,000 images takes less than one minute on a cluster with 4 worker nodes.</span><span class="sxs-lookup"><span data-stu-id="4de88-200">The entire preprocessing/scoring of the 10,000 images takes less than one minute on a cluster with 4 worker nodes.</span></span> <span data-ttu-id="4de88-201">The model accurately predicts the labels of ~9,100 (91%) images.</span><span class="sxs-lookup"><span data-stu-id="4de88-201">The model accurately predicts the labels of ~9,100 (91%) images.</span></span> <span data-ttu-id="4de88-202">A confusion matrix illustrates the most common classification errors.</span><span class="sxs-lookup"><span data-stu-id="4de88-202">A confusion matrix illustrates the most common classification errors.</span></span> <span data-ttu-id="4de88-203">For example, the matrix shows that mislabeling dogs as cats and vice versa occurs more frequently than for other label pairs.</span><span class="sxs-lookup"><span data-stu-id="4de88-203">For example, the matrix shows that mislabeling dogs as cats and vice versa occurs more frequently than for other label pairs.</span></span>

![Results](./media/apache-hadoop-deep-dive-advanced-analytics/ml-results.png)

### <a name="try-it-out"></a><span data-ttu-id="4de88-205">Try it Out!</span><span class="sxs-lookup"><span data-stu-id="4de88-205">Try it Out!</span></span>

<span data-ttu-id="4de88-206">Follow [this tutorial](../spark/apache-spark-microsoft-cognitive-toolkit.md) to implement this solution end-to-end: setup an HDInsight Spark cluster, install Cognitive Toolkit, and run the Jupyter Notebook that scores 10,000 CIFAR images.</span><span class="sxs-lookup"><span data-stu-id="4de88-206">Follow [this tutorial](../spark/apache-spark-microsoft-cognitive-toolkit.md) to implement this solution end-to-end: setup an HDInsight Spark cluster, install Cognitive Toolkit, and run the Jupyter Notebook that scores 10,000 CIFAR images.</span></span>

## <a name="next-steps"></a><span data-ttu-id="4de88-207">Next steps</span><span class="sxs-lookup"><span data-stu-id="4de88-207">Next steps</span></span>

<span data-ttu-id="4de88-208">Hive and Azure Machine Learning</span><span class="sxs-lookup"><span data-stu-id="4de88-208">Hive and Azure Machine Learning</span></span>

* [<span data-ttu-id="4de88-209">Hive and Azure Machine Learning end-to-end</span><span class="sxs-lookup"><span data-stu-id="4de88-209">Hive and Azure Machine Learning end-to-end</span></span>](../../machine-learning/team-data-science-process/hive-walkthrough.md)
* [<span data-ttu-id="4de88-210">Using an Azure HDInsight Hadoop Cluster on a 1 TB dataset</span><span class="sxs-lookup"><span data-stu-id="4de88-210">Using an Azure HDInsight Hadoop Cluster on a 1 TB dataset</span></span>](../../machine-learning/team-data-science-process/hive-criteo-walkthrough.md)

<span data-ttu-id="4de88-211">Spark and MLLib</span><span class="sxs-lookup"><span data-stu-id="4de88-211">Spark and MLLib</span></span>

* [<span data-ttu-id="4de88-212">Machine learning with Spark on HDInsight</span><span class="sxs-lookup"><span data-stu-id="4de88-212">Machine learning with Spark on HDInsight</span></span>](../../machine-learning/team-data-science-process/spark-overview.md)
* [<span data-ttu-id="4de88-213">Spark with Machine Learning: Use Spark in HDInsight for analyzing building temperature using HVAC data</span><span class="sxs-lookup"><span data-stu-id="4de88-213">Spark with Machine Learning: Use Spark in HDInsight for analyzing building temperature using HVAC data</span></span>](../spark/apache-spark-ipython-notebook-machine-learning.md)
* [<span data-ttu-id="4de88-214">Spark with Machine Learning: Use Spark in HDInsight to predict food inspection results</span><span class="sxs-lookup"><span data-stu-id="4de88-214">Spark with Machine Learning: Use Spark in HDInsight to predict food inspection results</span></span>](../spark/apache-spark-machine-learning-mllib-ipython.md)

<span data-ttu-id="4de88-215">Deep Learning, Cognitive Toolkit, and others</span><span class="sxs-lookup"><span data-stu-id="4de88-215">Deep Learning, Cognitive Toolkit, and others</span></span>

* [<span data-ttu-id="4de88-216">Embarrassingly parallel image classification, using Cognitive Toolkit and TensorFlow on Azure HDInsight Spark</span><span class="sxs-lookup"><span data-stu-id="4de88-216">Embarrassingly parallel image classification, using Cognitive Toolkit and TensorFlow on Azure HDInsight Spark</span></span>](https://blogs.technet.microsoft.com/machinelearning/2017/04/12/embarrassingly-parallel-image-classification-using-cognitive-toolkit-tensorflow-on-azure-hdinsight-spark/)
* [<span data-ttu-id="4de88-217">Data Science Azure Virtual Machine</span><span class="sxs-lookup"><span data-stu-id="4de88-217">Data Science Azure Virtual Machine</span></span>](../../machine-learning/data-science-virtual-machine/overview.md)
* [<span data-ttu-id="4de88-218">Introducing H2O.ai on Azure HDInsight</span><span class="sxs-lookup"><span data-stu-id="4de88-218">Introducing H2O.ai on Azure HDInsight</span></span>](https://azure.microsoft.com/blog/introducing-h2o-ai-with-on-azure-hdinsight-to-bring-the-most-robust-ai-platform-for-enterprises/)
