---
title: 'Connect an Azure virtual network to another VNet: Portal | Microsoft Docs'
description: Create a VPN gateway connection between VNets by using Resource Manager and the Azure portal.
services: vpn-gateway
documentationcenter: na
author: cherylmc
manager: timlt
editor: ''
tags: azure-resource-manager
ms.assetid: a7015cfc-764b-46a1-bfac-043d30a275df
ms.service: vpn-gateway
ms.devlang: na
ms.topic: hero-article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 04/11/2017
ms.author: cherylmc
ms.openlocfilehash: 4c1ec36ca04a308a22563a483ad46f165619367e
ms.sourcegitcommit: 5b9d839c0c0a94b293fdafe1d6e5429506c07e05
ms.translationtype: HT
ms.contentlocale: nl-NL
ms.lasthandoff: 08/02/2018
ms.locfileid: "44562740"
---
# <a name="configure-a-vnet-to-vnet-connection-using-the-azure-portal"></a><span data-ttu-id="fbed0-103">Configure a VNet-to-VNet connection using the Azure portal</span><span class="sxs-lookup"><span data-stu-id="fbed0-103">Configure a VNet-to-VNet connection using the Azure portal</span></span>

<span data-ttu-id="fbed0-104">Connecting a virtual network to another virtual network (VNet-to-VNet) is similar to connecting a VNet to an on-premises site location.</span><span class="sxs-lookup"><span data-stu-id="fbed0-104">Connecting a virtual network to another virtual network (VNet-to-VNet) is similar to connecting a VNet to an on-premises site location.</span></span> <span data-ttu-id="fbed0-105">Both connectivity types use a VPN gateway to provide a secure tunnel using IPsec/IKE.</span><span class="sxs-lookup"><span data-stu-id="fbed0-105">Both connectivity types use a VPN gateway to provide a secure tunnel using IPsec/IKE.</span></span> <span data-ttu-id="fbed0-106">You can even combine VNet-to-VNet communication with multi-site connection configurations.</span><span class="sxs-lookup"><span data-stu-id="fbed0-106">You can even combine VNet-to-VNet communication with multi-site connection configurations.</span></span> <span data-ttu-id="fbed0-107">This lets you establish network topologies that combine cross-premises connectivity with inter-virtual network connectivity.</span><span class="sxs-lookup"><span data-stu-id="fbed0-107">This lets you establish network topologies that combine cross-premises connectivity with inter-virtual network connectivity.</span></span>

![v2v diagram](https://docstestmedia1.blob.core.windows.net/azure-media/articles/vpn-gateway/media/vpn-gateway-howto-vnet-vnet-resource-manager-portal/v2vrmps.png)

<span data-ttu-id="fbed0-109">This article walks you through the steps to create a connection between VNets in the Resource Manager deployment model by using VPN Gateway and the Azure portal.</span><span class="sxs-lookup"><span data-stu-id="fbed0-109">This article walks you through the steps to create a connection between VNets in the Resource Manager deployment model by using VPN Gateway and the Azure portal.</span></span> <span data-ttu-id="fbed0-110">When you use the Azure portal to connect virtual networks, the VNets must be in the same subscription.</span><span class="sxs-lookup"><span data-stu-id="fbed0-110">When you use the Azure portal to connect virtual networks, the VNets must be in the same subscription.</span></span> <span data-ttu-id="fbed0-111">If your virtual networks are in different subscriptions, you can still connect them by using the [PowerShell](vpn-gateway-vnet-vnet-rm-ps.md) steps.</span><span class="sxs-lookup"><span data-stu-id="fbed0-111">If your virtual networks are in different subscriptions, you can still connect them by using the [PowerShell](vpn-gateway-vnet-vnet-rm-ps.md) steps.</span></span>

<span data-ttu-id="fbed0-112">[!INCLUDE [deployment models](../../includes/vpn-gateway-deployment-models-include.md)] If you want to create a VNet-to-VNet connection using a different deployment model, between different deployment models, or using a different deployment tool, you can select an option from following article dropdown list:</span><span class="sxs-lookup"><span data-stu-id="fbed0-112">[!INCLUDE [deployment models](../../includes/vpn-gateway-deployment-models-include.md)] If you want to create a VNet-to-VNet connection using a different deployment model, between different deployment models, or using a different deployment tool, you can select an option from following article dropdown list:</span></span>

> [!div class="op_single_selector"]
> * [Resource Manager - Azure portal](vpn-gateway-howto-vnet-vnet-resource-manager-portal.md)
> * [Resource Manager - PowerShell](vpn-gateway-vnet-vnet-rm-ps.md)
> * [Classic - Azure portal](vpn-gateway-howto-vnet-vnet-portal-classic.md)
> * [Connect different deployment models - Azure portal](vpn-gateway-connect-different-deployment-models-portal.md)
> * [Connect different deployment models - PowerShell](vpn-gateway-connect-different-deployment-models-powershell.md)
>
>

[!INCLUDE [vpn-gateway-vnetpeeringlink](../../includes/vpn-gateway-vnetpeeringlink-include.md)]


## <a name="about-vnet-to-vnet-connections"></a><span data-ttu-id="fbed0-118">About VNet-to-VNet connections</span><span class="sxs-lookup"><span data-stu-id="fbed0-118">About VNet-to-VNet connections</span></span>
<span data-ttu-id="fbed0-119">Connecting a virtual network to another virtual network (VNet-to-VNet) is similar to connecting a VNet to an on-premises site location.</span><span class="sxs-lookup"><span data-stu-id="fbed0-119">Connecting a virtual network to another virtual network (VNet-to-VNet) is similar to connecting a VNet to an on-premises site location.</span></span> <span data-ttu-id="fbed0-120">Both connectivity types use an Azure VPN gateway to provide a secure tunnel using IPsec/IKE.</span><span class="sxs-lookup"><span data-stu-id="fbed0-120">Both connectivity types use an Azure VPN gateway to provide a secure tunnel using IPsec/IKE.</span></span> <span data-ttu-id="fbed0-121">The VNets you connect can be in different regions, or in different subscriptions.</span><span class="sxs-lookup"><span data-stu-id="fbed0-121">The VNets you connect can be in different regions, or in different subscriptions.</span></span> <span data-ttu-id="fbed0-122">Note that if your VNets are in different subscriptions, you can't create the connection in the portal.</span><span class="sxs-lookup"><span data-stu-id="fbed0-122">Note that if your VNets are in different subscriptions, you can't create the connection in the portal.</span></span> <span data-ttu-id="fbed0-123">You can use [PowerShell](vpn-gateway-vnet-vnet-rm-ps.md).</span><span class="sxs-lookup"><span data-stu-id="fbed0-123">You can use [PowerShell](vpn-gateway-vnet-vnet-rm-ps.md).</span></span>

<span data-ttu-id="fbed0-124">You can even combine VNet-to-VNet communication with multi-site configurations.</span><span class="sxs-lookup"><span data-stu-id="fbed0-124">You can even combine VNet-to-VNet communication with multi-site configurations.</span></span> <span data-ttu-id="fbed0-125">This lets you establish network topologies that combine cross-premises connectivity with inter-virtual network connectivity, as shown in the following diagram:</span><span class="sxs-lookup"><span data-stu-id="fbed0-125">This lets you establish network topologies that combine cross-premises connectivity with inter-virtual network connectivity, as shown in the following diagram:</span></span>

<span data-ttu-id="fbed0-126">![About connections](https://docstestmedia1.blob.core.windows.net/azure-media/articles/vpn-gateway/media/vpn-gateway-howto-vnet-vnet-resource-manager-portal/aboutconnections.png "About connections")</span><span class="sxs-lookup"><span data-stu-id="fbed0-126">![About connections](https://docstestmedia1.blob.core.windows.net/azure-media/articles/vpn-gateway/media/vpn-gateway-howto-vnet-vnet-resource-manager-portal/aboutconnections.png "About connections")</span></span>

### <a name="why-connect-virtual-networks"></a><span data-ttu-id="fbed0-127">Why connect virtual networks?</span><span class="sxs-lookup"><span data-stu-id="fbed0-127">Why connect virtual networks?</span></span>
<span data-ttu-id="fbed0-128">You may want to connect virtual networks for the following reasons:</span><span class="sxs-lookup"><span data-stu-id="fbed0-128">You may want to connect virtual networks for the following reasons:</span></span>

* <span data-ttu-id="fbed0-129">**Cross region geo-redundancy and geo-presence**</span><span class="sxs-lookup"><span data-stu-id="fbed0-129">**Cross region geo-redundancy and geo-presence**</span></span>
  
  * <span data-ttu-id="fbed0-130">You can set up your own geo-replication or synchronization with secure connectivity without going over Internet-facing endpoints.</span><span class="sxs-lookup"><span data-stu-id="fbed0-130">You can set up your own geo-replication or synchronization with secure connectivity without going over Internet-facing endpoints.</span></span>
  * <span data-ttu-id="fbed0-131">With Azure Traffic Manager and Load Balancer, you can set up highly available workload with geo-redundancy across multiple Azure regions.</span><span class="sxs-lookup"><span data-stu-id="fbed0-131">With Azure Traffic Manager and Load Balancer, you can set up highly available workload with geo-redundancy across multiple Azure regions.</span></span> <span data-ttu-id="fbed0-132">One important example is to set up SQL Always On with Availability Groups spreading across multiple Azure regions.</span><span class="sxs-lookup"><span data-stu-id="fbed0-132">One important example is to set up SQL Always On with Availability Groups spreading across multiple Azure regions.</span></span>
* <span data-ttu-id="fbed0-133">**Regional multi-tier applications with isolation or administrative boundary**</span><span class="sxs-lookup"><span data-stu-id="fbed0-133">**Regional multi-tier applications with isolation or administrative boundary**</span></span>
  
  * <span data-ttu-id="fbed0-134">Within the same region, you can set up multi-tier applications with multiple virtual networks connected together due to isolation or administrative requirements.</span><span class="sxs-lookup"><span data-stu-id="fbed0-134">Within the same region, you can set up multi-tier applications with multiple virtual networks connected together due to isolation or administrative requirements.</span></span>

<span data-ttu-id="fbed0-135">For more information about VNet-to-VNet connections, see [VNet-to-VNet considerations](#faq) at the end of this article.</span><span class="sxs-lookup"><span data-stu-id="fbed0-135">For more information about VNet-to-VNet connections, see [VNet-to-VNet considerations](#faq) at the end of this article.</span></span>

### <a name="values"></a><span data-ttu-id="fbed0-136">Example settings</span><span class="sxs-lookup"><span data-stu-id="fbed0-136">Example settings</span></span>
<span data-ttu-id="fbed0-137">When using these steps as an exercise, you can use the sample configuration values.</span><span class="sxs-lookup"><span data-stu-id="fbed0-137">When using these steps as an exercise, you can use the sample configuration values.</span></span> <span data-ttu-id="fbed0-138">For example purposes, we use multiple address spaces for each VNet.</span><span class="sxs-lookup"><span data-stu-id="fbed0-138">For example purposes, we use multiple address spaces for each VNet.</span></span> <span data-ttu-id="fbed0-139">However, VNet-to-VNet configurations don't require multiple address spaces.</span><span class="sxs-lookup"><span data-stu-id="fbed0-139">However, VNet-to-VNet configurations don't require multiple address spaces.</span></span>

<span data-ttu-id="fbed0-140">**Values for TestVNet1:**</span><span class="sxs-lookup"><span data-stu-id="fbed0-140">**Values for TestVNet1:**</span></span>

* <span data-ttu-id="fbed0-141">VNet Name: TestVNet1</span><span class="sxs-lookup"><span data-stu-id="fbed0-141">VNet Name: TestVNet1</span></span>
* <span data-ttu-id="fbed0-142">Address space: 10.11.0.0/16</span><span class="sxs-lookup"><span data-stu-id="fbed0-142">Address space: 10.11.0.0/16</span></span>
  * <span data-ttu-id="fbed0-143">Subnet name: FrontEnd</span><span class="sxs-lookup"><span data-stu-id="fbed0-143">Subnet name: FrontEnd</span></span>
  * <span data-ttu-id="fbed0-144">Subnet address range: 10.11.0.0/24</span><span class="sxs-lookup"><span data-stu-id="fbed0-144">Subnet address range: 10.11.0.0/24</span></span>
* <span data-ttu-id="fbed0-145">Resource Group: TestRG1</span><span class="sxs-lookup"><span data-stu-id="fbed0-145">Resource Group: TestRG1</span></span>
* <span data-ttu-id="fbed0-146">Location: East US</span><span class="sxs-lookup"><span data-stu-id="fbed0-146">Location: East US</span></span>
* <span data-ttu-id="fbed0-147">Address Space: 10.12.0.0/16</span><span class="sxs-lookup"><span data-stu-id="fbed0-147">Address Space: 10.12.0.0/16</span></span>
  * <span data-ttu-id="fbed0-148">Subnet name: BackEnd</span><span class="sxs-lookup"><span data-stu-id="fbed0-148">Subnet name: BackEnd</span></span>
  * <span data-ttu-id="fbed0-149">Subnet address range: 10.12.0.0/24</span><span class="sxs-lookup"><span data-stu-id="fbed0-149">Subnet address range: 10.12.0.0/24</span></span>
* <span data-ttu-id="fbed0-150">Gateway Subnet name: GatewaySubnet (this will auto-fill in the portal)</span><span class="sxs-lookup"><span data-stu-id="fbed0-150">Gateway Subnet name: GatewaySubnet (this will auto-fill in the portal)</span></span>
  * <span data-ttu-id="fbed0-151">Gateway Subnet address range: 10.11.255.0/27</span><span class="sxs-lookup"><span data-stu-id="fbed0-151">Gateway Subnet address range: 10.11.255.0/27</span></span>
* <span data-ttu-id="fbed0-152">DNS Server: Use the IP address of your DNS Server</span><span class="sxs-lookup"><span data-stu-id="fbed0-152">DNS Server: Use the IP address of your DNS Server</span></span>
* <span data-ttu-id="fbed0-153">Virtual Network Gateway Name: TestVNet1GW</span><span class="sxs-lookup"><span data-stu-id="fbed0-153">Virtual Network Gateway Name: TestVNet1GW</span></span>
* <span data-ttu-id="fbed0-154">Gateway Type: VPN</span><span class="sxs-lookup"><span data-stu-id="fbed0-154">Gateway Type: VPN</span></span>
* <span data-ttu-id="fbed0-155">VPN type: Route-based</span><span class="sxs-lookup"><span data-stu-id="fbed0-155">VPN type: Route-based</span></span>
* <span data-ttu-id="fbed0-156">SKU: Select the Gateway SKU you want to use</span><span class="sxs-lookup"><span data-stu-id="fbed0-156">SKU: Select the Gateway SKU you want to use</span></span>
* <span data-ttu-id="fbed0-157">Public IP address name: TestVNet1GWIP</span><span class="sxs-lookup"><span data-stu-id="fbed0-157">Public IP address name: TestVNet1GWIP</span></span>
* <span data-ttu-id="fbed0-158">Connection values:</span><span class="sxs-lookup"><span data-stu-id="fbed0-158">Connection values:</span></span>
  * <span data-ttu-id="fbed0-159">Name: TestVNet1toTestVNet4</span><span class="sxs-lookup"><span data-stu-id="fbed0-159">Name: TestVNet1toTestVNet4</span></span>
  * <span data-ttu-id="fbed0-160">Shared key: You can create the shared key yourself.</span><span class="sxs-lookup"><span data-stu-id="fbed0-160">Shared key: You can create the shared key yourself.</span></span> <span data-ttu-id="fbed0-161">For this example, we'll use abc123.</span><span class="sxs-lookup"><span data-stu-id="fbed0-161">For this example, we'll use abc123.</span></span> <span data-ttu-id="fbed0-162">The important thing is that when you create the connection between the VNets, the value must match.</span><span class="sxs-lookup"><span data-stu-id="fbed0-162">The important thing is that when you create the connection between the VNets, the value must match.</span></span>

<span data-ttu-id="fbed0-163">**Values for TestVNet4:**</span><span class="sxs-lookup"><span data-stu-id="fbed0-163">**Values for TestVNet4:**</span></span>

* <span data-ttu-id="fbed0-164">VNet Name: TestVNet4</span><span class="sxs-lookup"><span data-stu-id="fbed0-164">VNet Name: TestVNet4</span></span>
* <span data-ttu-id="fbed0-165">Address space: 10.41.0.0/16</span><span class="sxs-lookup"><span data-stu-id="fbed0-165">Address space: 10.41.0.0/16</span></span>
  * <span data-ttu-id="fbed0-166">Subnet name: FrontEnd</span><span class="sxs-lookup"><span data-stu-id="fbed0-166">Subnet name: FrontEnd</span></span>
  * <span data-ttu-id="fbed0-167">Subnet address range: 10.41.0.0/24</span><span class="sxs-lookup"><span data-stu-id="fbed0-167">Subnet address range: 10.41.0.0/24</span></span>
* <span data-ttu-id="fbed0-168">Resource Group: TestRG1</span><span class="sxs-lookup"><span data-stu-id="fbed0-168">Resource Group: TestRG1</span></span>
* <span data-ttu-id="fbed0-169">Location: West US</span><span class="sxs-lookup"><span data-stu-id="fbed0-169">Location: West US</span></span>
* <span data-ttu-id="fbed0-170">Address Space: 10.42.0.0/16</span><span class="sxs-lookup"><span data-stu-id="fbed0-170">Address Space: 10.42.0.0/16</span></span>
  * <span data-ttu-id="fbed0-171">Subnet name: BackEnd</span><span class="sxs-lookup"><span data-stu-id="fbed0-171">Subnet name: BackEnd</span></span>
  * <span data-ttu-id="fbed0-172">Subnet address range: 10.42.0.0/24</span><span class="sxs-lookup"><span data-stu-id="fbed0-172">Subnet address range: 10.42.0.0/24</span></span>
* <span data-ttu-id="fbed0-173">GatewaySubnet name: GatewaySubnet (this will auto-fill in the portal)</span><span class="sxs-lookup"><span data-stu-id="fbed0-173">GatewaySubnet name: GatewaySubnet (this will auto-fill in the portal)</span></span>
  * <span data-ttu-id="fbed0-174">GatewaySubnet address range: 10.41.255.0/27</span><span class="sxs-lookup"><span data-stu-id="fbed0-174">GatewaySubnet address range: 10.41.255.0/27</span></span>
* <span data-ttu-id="fbed0-175">DNS Server: Use the IP address of your DNS Server</span><span class="sxs-lookup"><span data-stu-id="fbed0-175">DNS Server: Use the IP address of your DNS Server</span></span>
* <span data-ttu-id="fbed0-176">Virtual Network Gateway Name: TestVNet4GW</span><span class="sxs-lookup"><span data-stu-id="fbed0-176">Virtual Network Gateway Name: TestVNet4GW</span></span>
* <span data-ttu-id="fbed0-177">Gateway Type: VPN</span><span class="sxs-lookup"><span data-stu-id="fbed0-177">Gateway Type: VPN</span></span>
* <span data-ttu-id="fbed0-178">VPN type: Route-based</span><span class="sxs-lookup"><span data-stu-id="fbed0-178">VPN type: Route-based</span></span>
* <span data-ttu-id="fbed0-179">SKU: Select the Gateway SKU you want to use</span><span class="sxs-lookup"><span data-stu-id="fbed0-179">SKU: Select the Gateway SKU you want to use</span></span>
* <span data-ttu-id="fbed0-180">Public IP address name: TestVNet4GWIP</span><span class="sxs-lookup"><span data-stu-id="fbed0-180">Public IP address name: TestVNet4GWIP</span></span>
* <span data-ttu-id="fbed0-181">Connection values:</span><span class="sxs-lookup"><span data-stu-id="fbed0-181">Connection values:</span></span>
  * <span data-ttu-id="fbed0-182">Name: TestVNet4toTestVNet1</span><span class="sxs-lookup"><span data-stu-id="fbed0-182">Name: TestVNet4toTestVNet1</span></span>
  * <span data-ttu-id="fbed0-183">Shared key: You can create the shared key yourself.</span><span class="sxs-lookup"><span data-stu-id="fbed0-183">Shared key: You can create the shared key yourself.</span></span> <span data-ttu-id="fbed0-184">For this example, we'll use abc123.</span><span class="sxs-lookup"><span data-stu-id="fbed0-184">For this example, we'll use abc123.</span></span> <span data-ttu-id="fbed0-185">The important thing is that when you create the connection between the VNets, the value must match.</span><span class="sxs-lookup"><span data-stu-id="fbed0-185">The important thing is that when you create the connection between the VNets, the value must match.</span></span>

## <a name="CreatVNet"></a><span data-ttu-id="fbed0-186">1. Create and configure TestVNet1</span><span class="sxs-lookup"><span data-stu-id="fbed0-186">1. Create and configure TestVNet1</span></span>
<span data-ttu-id="fbed0-187">If you already have a VNet, verify that the settings are compatible with your VPN gateway design.</span><span class="sxs-lookup"><span data-stu-id="fbed0-187">If you already have a VNet, verify that the settings are compatible with your VPN gateway design.</span></span> <span data-ttu-id="fbed0-188">Pay particular attention to any subnets that may overlap with other networks.</span><span class="sxs-lookup"><span data-stu-id="fbed0-188">Pay particular attention to any subnets that may overlap with other networks.</span></span> <span data-ttu-id="fbed0-189">If you have overlapping subnets, your connection won't work properly.</span><span class="sxs-lookup"><span data-stu-id="fbed0-189">If you have overlapping subnets, your connection won't work properly.</span></span> <span data-ttu-id="fbed0-190">If your VNet is configured with the correct settings, you can begin the steps in the [Specify a DNS server](#dns) section.</span><span class="sxs-lookup"><span data-stu-id="fbed0-190">If your VNet is configured with the correct settings, you can begin the steps in the [Specify a DNS server](#dns) section.</span></span>

### <a name="to-create-a-virtual-network"></a><span data-ttu-id="fbed0-191">To create a virtual network</span><span class="sxs-lookup"><span data-stu-id="fbed0-191">To create a virtual network</span></span>
[!INCLUDE [vpn-gateway-basic-vnet-rm-portal](../../includes/vpn-gateway-basic-vnet-rm-portal-include.md)]

## <a name="subnets"></a><span data-ttu-id="fbed0-192">2. Add additional address space and create subnets</span><span class="sxs-lookup"><span data-stu-id="fbed0-192">2. Add additional address space and create subnets</span></span>
<span data-ttu-id="fbed0-193">You can add additional address space and create subnets once your VNet has been created.</span><span class="sxs-lookup"><span data-stu-id="fbed0-193">You can add additional address space and create subnets once your VNet has been created.</span></span>

[!INCLUDE [vpn-gateway-additional-address-space](../../includes/vpn-gateway-additional-address-space-include.md)]

## <a name="gatewaysubnet"></a><span data-ttu-id="fbed0-194">3. Create a gateway subnet</span><span class="sxs-lookup"><span data-stu-id="fbed0-194">3. Create a gateway subnet</span></span>
<span data-ttu-id="fbed0-195">Before connecting your virtual network to a gateway, you first need to create the gateway subnet for the virtual network to which you want to connect.</span><span class="sxs-lookup"><span data-stu-id="fbed0-195">Before connecting your virtual network to a gateway, you first need to create the gateway subnet for the virtual network to which you want to connect.</span></span> <span data-ttu-id="fbed0-196">If possible, it's best to create a gateway subnet using a CIDR block of /28 or /27 in order to provide enough IP addresses to accommodate additional future configuration requirements.</span><span class="sxs-lookup"><span data-stu-id="fbed0-196">If possible, it's best to create a gateway subnet using a CIDR block of /28 or /27 in order to provide enough IP addresses to accommodate additional future configuration requirements.</span></span>

<span data-ttu-id="fbed0-197">If you are creating this configuration as an exercise, refer to these [Example settings](#values) when creating your gateway subnet.</span><span class="sxs-lookup"><span data-stu-id="fbed0-197">If you are creating this configuration as an exercise, refer to these [Example settings](#values) when creating your gateway subnet.</span></span>

[!INCLUDE [vpn-gateway-no-nsg](../../includes/vpn-gateway-no-nsg-include.md)]

### <a name="to-create-a-gateway-subnet"></a><span data-ttu-id="fbed0-198">To create a gateway subnet</span><span class="sxs-lookup"><span data-stu-id="fbed0-198">To create a gateway subnet</span></span>
[!INCLUDE [vpn-gateway-add-gwsubnet-rm-portal](../../includes/vpn-gateway-add-gwsubnet-rm-portal-include.md)]

## <a name="DNSServer"></a><span data-ttu-id="fbed0-199">4. Specify a DNS server (optional)</span><span class="sxs-lookup"><span data-stu-id="fbed0-199">4. Specify a DNS server (optional)</span></span>
<span data-ttu-id="fbed0-200">DNS is not required for VNet-to-VNet connections.</span><span class="sxs-lookup"><span data-stu-id="fbed0-200">DNS is not required for VNet-to-VNet connections.</span></span> <span data-ttu-id="fbed0-201">However, if you want to have name resolution for resources that are deployed to your virtual network, you should specify a DNS server.</span><span class="sxs-lookup"><span data-stu-id="fbed0-201">However, if you want to have name resolution for resources that are deployed to your virtual network, you should specify a DNS server.</span></span> <span data-ttu-id="fbed0-202">This setting lets you specify the DNS server that you want to use for name resolution for this virtual network.</span><span class="sxs-lookup"><span data-stu-id="fbed0-202">This setting lets you specify the DNS server that you want to use for name resolution for this virtual network.</span></span> <span data-ttu-id="fbed0-203">It does not create a DNS server.</span><span class="sxs-lookup"><span data-stu-id="fbed0-203">It does not create a DNS server.</span></span>

[!INCLUDE [vpn-gateway-add-dns-rm-portal](../../includes/vpn-gateway-add-dns-rm-portal-include.md)]

## <a name="VNetGateway"></a><span data-ttu-id="fbed0-204">5. Create a virtual network gateway</span><span class="sxs-lookup"><span data-stu-id="fbed0-204">5. Create a virtual network gateway</span></span>
<span data-ttu-id="fbed0-205">In this step, you create the virtual network gateway for your VNet.</span><span class="sxs-lookup"><span data-stu-id="fbed0-205">In this step, you create the virtual network gateway for your VNet.</span></span> <span data-ttu-id="fbed0-206">Creating a gateway can often take 45 minutes or more, depending on the selected gateway SKU.</span><span class="sxs-lookup"><span data-stu-id="fbed0-206">Creating a gateway can often take 45 minutes or more, depending on the selected gateway SKU.</span></span> <span data-ttu-id="fbed0-207">If you are creating this configuration as an exercise, you can refer to the [Example settings](#values).</span><span class="sxs-lookup"><span data-stu-id="fbed0-207">If you are creating this configuration as an exercise, you can refer to the [Example settings](#values).</span></span>

### <a name="to-create-a-virtual-network-gateway"></a><span data-ttu-id="fbed0-208">To create a virtual network gateway</span><span class="sxs-lookup"><span data-stu-id="fbed0-208">To create a virtual network gateway</span></span>
[!INCLUDE [vpn-gateway-add-gw-rm-portal](../../includes/vpn-gateway-add-gw-rm-portal-include.md)]

## <a name="CreateTestVNet4"></a><span data-ttu-id="fbed0-209">6. Create and configure TestVNet4</span><span class="sxs-lookup"><span data-stu-id="fbed0-209">6. Create and configure TestVNet4</span></span>
<span data-ttu-id="fbed0-210">Once you've configured TestVNet1, create TestVNet4 by repeating the previous steps, replacing the values with those of TestVNet4.</span><span class="sxs-lookup"><span data-stu-id="fbed0-210">Once you've configured TestVNet1, create TestVNet4 by repeating the previous steps, replacing the values with those of TestVNet4.</span></span> <span data-ttu-id="fbed0-211">You don't need to wait until the virtual network gateway for TestVNet1 has finished creating before configuring TestVNet4.</span><span class="sxs-lookup"><span data-stu-id="fbed0-211">You don't need to wait until the virtual network gateway for TestVNet1 has finished creating before configuring TestVNet4.</span></span> <span data-ttu-id="fbed0-212">If you are using your own values, make sure that the address spaces don't overlap with any of the VNets that you want to connect to.</span><span class="sxs-lookup"><span data-stu-id="fbed0-212">If you are using your own values, make sure that the address spaces don't overlap with any of the VNets that you want to connect to.</span></span>

## <a name="TestVNet1Connection"></a><span data-ttu-id="fbed0-213">7. Configure the TestVNet1 connection</span><span class="sxs-lookup"><span data-stu-id="fbed0-213">7. Configure the TestVNet1 connection</span></span>
<span data-ttu-id="fbed0-214">When the virtual network gateways for both TestVNet1 and TestVNet4 have completed, you can create your virtual network gateway connections.</span><span class="sxs-lookup"><span data-stu-id="fbed0-214">When the virtual network gateways for both TestVNet1 and TestVNet4 have completed, you can create your virtual network gateway connections.</span></span> <span data-ttu-id="fbed0-215">In this section, you will create a connection from VNet1 to VNet4.</span><span class="sxs-lookup"><span data-stu-id="fbed0-215">In this section, you will create a connection from VNet1 to VNet4.</span></span> <span data-ttu-id="fbed0-216">These steps work only for VNets in the same subscription.</span><span class="sxs-lookup"><span data-stu-id="fbed0-216">These steps work only for VNets in the same subscription.</span></span> <span data-ttu-id="fbed0-217">If your VNets are in different subscriptions, you must use PowerShell to make the connection.</span><span class="sxs-lookup"><span data-stu-id="fbed0-217">If your VNets are in different subscriptions, you must use PowerShell to make the connection.</span></span> <span data-ttu-id="fbed0-218">See the [PowerShell](vpn-gateway-vnet-vnet-rm-ps.md) article.</span><span class="sxs-lookup"><span data-stu-id="fbed0-218">See the [PowerShell](vpn-gateway-vnet-vnet-rm-ps.md) article.</span></span>

1. <span data-ttu-id="fbed0-219">In **All resources**, navigate to the virtual network gateway for your VNet.</span><span class="sxs-lookup"><span data-stu-id="fbed0-219">In **All resources**, navigate to the virtual network gateway for your VNet.</span></span> <span data-ttu-id="fbed0-220">For example, **TestVNet1GW**.</span><span class="sxs-lookup"><span data-stu-id="fbed0-220">For example, **TestVNet1GW**.</span></span> <span data-ttu-id="fbed0-221">Click **TestVNet1GW** to open the virtual network gateway blade.</span><span class="sxs-lookup"><span data-stu-id="fbed0-221">Click **TestVNet1GW** to open the virtual network gateway blade.</span></span>
   
    <span data-ttu-id="fbed0-222">![Connections blade](https://docstestmedia1.blob.core.windows.net/azure-media/articles/vpn-gateway/media/vpn-gateway-howto-vnet-vnet-resource-manager-portal/settings_connection.png "Connections blade")</span><span class="sxs-lookup"><span data-stu-id="fbed0-222">![Connections blade](https://docstestmedia1.blob.core.windows.net/azure-media/articles/vpn-gateway/media/vpn-gateway-howto-vnet-vnet-resource-manager-portal/settings_connection.png "Connections blade")</span></span>
2. <span data-ttu-id="fbed0-223">Click **+Add** to open the **Add connection** blade.</span><span class="sxs-lookup"><span data-stu-id="fbed0-223">Click **+Add** to open the **Add connection** blade.</span></span>
3. <span data-ttu-id="fbed0-224">On the **Add connection** blade, in the name field, type a name for your connection.</span><span class="sxs-lookup"><span data-stu-id="fbed0-224">On the **Add connection** blade, in the name field, type a name for your connection.</span></span> <span data-ttu-id="fbed0-225">For example, **TestVNet1toTestVNet4**.</span><span class="sxs-lookup"><span data-stu-id="fbed0-225">For example, **TestVNet1toTestVNet4**.</span></span>
   
    <span data-ttu-id="fbed0-226">![Connection name](https://docstestmedia1.blob.core.windows.net/azure-media/articles/vpn-gateway/media/vpn-gateway-howto-vnet-vnet-resource-manager-portal/v1tov4.png "Connection name")</span><span class="sxs-lookup"><span data-stu-id="fbed0-226">![Connection name](https://docstestmedia1.blob.core.windows.net/azure-media/articles/vpn-gateway/media/vpn-gateway-howto-vnet-vnet-resource-manager-portal/v1tov4.png "Connection name")</span></span>
4. <span data-ttu-id="fbed0-227">For **Connection type**.</span><span class="sxs-lookup"><span data-stu-id="fbed0-227">For **Connection type**.</span></span> <span data-ttu-id="fbed0-228">select **VNet-to-VNet** from the dropdown.</span><span class="sxs-lookup"><span data-stu-id="fbed0-228">select **VNet-to-VNet** from the dropdown.</span></span>
5. <span data-ttu-id="fbed0-229">The **First virtual network gateway** field value is automatically filled in because you are creating this connection from the specified virtual network gateway.</span><span class="sxs-lookup"><span data-stu-id="fbed0-229">The **First virtual network gateway** field value is automatically filled in because you are creating this connection from the specified virtual network gateway.</span></span>
6. <span data-ttu-id="fbed0-230">The **Second virtual network gateway** field is the virtual network gateway of the VNet that you want to create a connection to.</span><span class="sxs-lookup"><span data-stu-id="fbed0-230">The **Second virtual network gateway** field is the virtual network gateway of the VNet that you want to create a connection to.</span></span> <span data-ttu-id="fbed0-231">Click **Choose another virtual network gateway** to open the **Choose virtual network gateway** blade.</span><span class="sxs-lookup"><span data-stu-id="fbed0-231">Click **Choose another virtual network gateway** to open the **Choose virtual network gateway** blade.</span></span>
   
    <span data-ttu-id="fbed0-232">![Add connection](https://docstestmedia1.blob.core.windows.net/azure-media/articles/vpn-gateway/media/vpn-gateway-howto-vnet-vnet-resource-manager-portal/add_connection.png "Add a connection")</span><span class="sxs-lookup"><span data-stu-id="fbed0-232">![Add connection](https://docstestmedia1.blob.core.windows.net/azure-media/articles/vpn-gateway/media/vpn-gateway-howto-vnet-vnet-resource-manager-portal/add_connection.png "Add a connection")</span></span>
7. <span data-ttu-id="fbed0-233">View the virtual network gateways that are listed on this blade.</span><span class="sxs-lookup"><span data-stu-id="fbed0-233">View the virtual network gateways that are listed on this blade.</span></span> <span data-ttu-id="fbed0-234">Notice that only virtual network gateways that are in your subscription are listed.</span><span class="sxs-lookup"><span data-stu-id="fbed0-234">Notice that only virtual network gateways that are in your subscription are listed.</span></span> <span data-ttu-id="fbed0-235">If you want to connect to a virtual network gateway that is not in your subscription, please use the [PowerShell article](vpn-gateway-vnet-vnet-rm-ps.md).</span><span class="sxs-lookup"><span data-stu-id="fbed0-235">If you want to connect to a virtual network gateway that is not in your subscription, please use the [PowerShell article](vpn-gateway-vnet-vnet-rm-ps.md).</span></span> 
8. <span data-ttu-id="fbed0-236">Click the virtual network gateway that you want to connect to.</span><span class="sxs-lookup"><span data-stu-id="fbed0-236">Click the virtual network gateway that you want to connect to.</span></span>
9. <span data-ttu-id="fbed0-237">In the **Shared key** field, type a shared key for your connection.</span><span class="sxs-lookup"><span data-stu-id="fbed0-237">In the **Shared key** field, type a shared key for your connection.</span></span> <span data-ttu-id="fbed0-238">You can generate or create this key yourself.</span><span class="sxs-lookup"><span data-stu-id="fbed0-238">You can generate or create this key yourself.</span></span> <span data-ttu-id="fbed0-239">In a site-to-site connection, the key you use would be exactly the same for your on-premises device and your virtual network gateway connection.</span><span class="sxs-lookup"><span data-stu-id="fbed0-239">In a site-to-site connection, the key you use would be exactly the same for your on-premises device and your virtual network gateway connection.</span></span> <span data-ttu-id="fbed0-240">The concept is similar here, except that rather than connecting to a VPN device, you are connecting to another virtual network gateway.</span><span class="sxs-lookup"><span data-stu-id="fbed0-240">The concept is similar here, except that rather than connecting to a VPN device, you are connecting to another virtual network gateway.</span></span>
   
    <span data-ttu-id="fbed0-241">![Shared key](https://docstestmedia1.blob.core.windows.net/azure-media/articles/vpn-gateway/media/vpn-gateway-howto-vnet-vnet-resource-manager-portal/sharedkey.png "Shared key")</span><span class="sxs-lookup"><span data-stu-id="fbed0-241">![Shared key](https://docstestmedia1.blob.core.windows.net/azure-media/articles/vpn-gateway/media/vpn-gateway-howto-vnet-vnet-resource-manager-portal/sharedkey.png "Shared key")</span></span>
10. <span data-ttu-id="fbed0-242">Click **OK** at the bottom of the blade to save your changes.</span><span class="sxs-lookup"><span data-stu-id="fbed0-242">Click **OK** at the bottom of the blade to save your changes.</span></span>

## <a name="TestVNet4Connection"></a><span data-ttu-id="fbed0-243">8. Configure the TestVNet4 connection</span><span class="sxs-lookup"><span data-stu-id="fbed0-243">8. Configure the TestVNet4 connection</span></span>
<span data-ttu-id="fbed0-244">Next, create a connection from TestVNet4 to TestVNet1.</span><span class="sxs-lookup"><span data-stu-id="fbed0-244">Next, create a connection from TestVNet4 to TestVNet1.</span></span> <span data-ttu-id="fbed0-245">Use the same method that you used to create the connection from TestVNet1 to TestVNet4.</span><span class="sxs-lookup"><span data-stu-id="fbed0-245">Use the same method that you used to create the connection from TestVNet1 to TestVNet4.</span></span> <span data-ttu-id="fbed0-246">Make sure that you use the same shared key.</span><span class="sxs-lookup"><span data-stu-id="fbed0-246">Make sure that you use the same shared key.</span></span>

## <a name="VerifyConnection"></a><span data-ttu-id="fbed0-247">9. Verify your connection</span><span class="sxs-lookup"><span data-stu-id="fbed0-247">9. Verify your connection</span></span>
<span data-ttu-id="fbed0-248">Verify the connection.</span><span class="sxs-lookup"><span data-stu-id="fbed0-248">Verify the connection.</span></span> <span data-ttu-id="fbed0-249">For each virtual network gateway, do the following:</span><span class="sxs-lookup"><span data-stu-id="fbed0-249">For each virtual network gateway, do the following:</span></span>

1. <span data-ttu-id="fbed0-250">Locate the blade for the virtual network gateway.</span><span class="sxs-lookup"><span data-stu-id="fbed0-250">Locate the blade for the virtual network gateway.</span></span> <span data-ttu-id="fbed0-251">For example, **TestVNet4GW**.</span><span class="sxs-lookup"><span data-stu-id="fbed0-251">For example, **TestVNet4GW**.</span></span> 
2. <span data-ttu-id="fbed0-252">On the virtual network gateway blade, click **Connections** to view the connections blade for the virtual network gateway.</span><span class="sxs-lookup"><span data-stu-id="fbed0-252">On the virtual network gateway blade, click **Connections** to view the connections blade for the virtual network gateway.</span></span>

<span data-ttu-id="fbed0-253">View the connections and verify the status.</span><span class="sxs-lookup"><span data-stu-id="fbed0-253">View the connections and verify the status.</span></span> <span data-ttu-id="fbed0-254">Once the connection is created, you will see **Succeeded** and **Connected** as the Status values.</span><span class="sxs-lookup"><span data-stu-id="fbed0-254">Once the connection is created, you will see **Succeeded** and **Connected** as the Status values.</span></span>

<span data-ttu-id="fbed0-255">![Succeeded](https://docstestmedia1.blob.core.windows.net/azure-media/articles/vpn-gateway/media/vpn-gateway-howto-vnet-vnet-resource-manager-portal/connected.png "Succeeded")</span><span class="sxs-lookup"><span data-stu-id="fbed0-255">![Succeeded](https://docstestmedia1.blob.core.windows.net/azure-media/articles/vpn-gateway/media/vpn-gateway-howto-vnet-vnet-resource-manager-portal/connected.png "Succeeded")</span></span>

<span data-ttu-id="fbed0-256">You can double-click each connection separately to view more information about the connection.</span><span class="sxs-lookup"><span data-stu-id="fbed0-256">You can double-click each connection separately to view more information about the connection.</span></span>

<span data-ttu-id="fbed0-257">![Essentials](https://docstestmedia1.blob.core.windows.net/azure-media/articles/vpn-gateway/media/vpn-gateway-howto-vnet-vnet-resource-manager-portal/essentials.png "Essentials")</span><span class="sxs-lookup"><span data-stu-id="fbed0-257">![Essentials](https://docstestmedia1.blob.core.windows.net/azure-media/articles/vpn-gateway/media/vpn-gateway-howto-vnet-vnet-resource-manager-portal/essentials.png "Essentials")</span></span>

## <a name="faq"></a><span data-ttu-id="fbed0-258">VNet-to-VNet considerations</span><span class="sxs-lookup"><span data-stu-id="fbed0-258">VNet-to-VNet considerations</span></span>
<span data-ttu-id="fbed0-259">View the FAQ details for additional information about VNet-to-VNet connections.</span><span class="sxs-lookup"><span data-stu-id="fbed0-259">View the FAQ details for additional information about VNet-to-VNet connections.</span></span>

[!INCLUDE [vpn-gateway-vnet-vnet-faq](../../includes/vpn-gateway-vnet-vnet-faq-include.md)]

## <a name="next-steps"></a><span data-ttu-id="fbed0-260">Next steps</span><span class="sxs-lookup"><span data-stu-id="fbed0-260">Next steps</span></span>
<span data-ttu-id="fbed0-261">Once your connection is complete, you can add virtual machines to your virtual networks.</span><span class="sxs-lookup"><span data-stu-id="fbed0-261">Once your connection is complete, you can add virtual machines to your virtual networks.</span></span> <span data-ttu-id="fbed0-262">See the [Virtual Machines documentation](https://docs.microsoft.com/azure/#pivot=services&panel=Compute) for more information.</span><span class="sxs-lookup"><span data-stu-id="fbed0-262">See the [Virtual Machines documentation](https://docs.microsoft.com/azure/#pivot=services&panel=Compute) for more information.</span></span>








