---
title: 'Connect a computer to an Azure virtual network using Point-to-Site: Portal | Microsoft Docs'
description: Securely connect to your Azure Virtual Network by creating a Point-to-Site VPN gateway connection using Resource Manager and the Azure portal.
services: vpn-gateway
documentationcenter: na
author: cherylmc
manager: timlt
editor: ''
tags: azure-resource-manager
ms.assetid: a15ad327-e236-461f-a18e-6dbedbf74943
ms.service: vpn-gateway
ms.devlang: na
ms.topic: hero-article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 04/10/2017
ms.author: cherylmc
ms.openlocfilehash: cfd9a3a41e418485c2ef0974ae1b4dc504793c10
ms.sourcegitcommit: 5b9d839c0c0a94b293fdafe1d6e5429506c07e05
ms.translationtype: HT
ms.contentlocale: nl-NL
ms.lasthandoff: 08/02/2018
ms.locfileid: "44554484"
---
# <a name="configure-a-point-to-site-connection-to-a-vnet-using-the-azure-portal"></a><span data-ttu-id="3f988-103">Configure a Point-to-Site connection to a VNet using the Azure portal</span><span class="sxs-lookup"><span data-stu-id="3f988-103">Configure a Point-to-Site connection to a VNet using the Azure portal</span></span>
> [!div class="op_single_selector"]
> * [Resource Manager - Azure Portal](vpn-gateway-howto-point-to-site-resource-manager-portal.md)
> * [Resource Manager - PowerShell](vpn-gateway-howto-point-to-site-rm-ps.md)
> * [Classic - Azure Portal](vpn-gateway-howto-point-to-site-classic-azure-portal.md)
> 
> 

<span data-ttu-id="3f988-107">A Point-to-Site (P2S) configuration lets you create a secure connection from an individual client computer to a virtual network.</span><span class="sxs-lookup"><span data-stu-id="3f988-107">A Point-to-Site (P2S) configuration lets you create a secure connection from an individual client computer to a virtual network.</span></span> <span data-ttu-id="3f988-108">P2S is a VPN connection over SSTP (Secure Socket Tunneling Protocol).</span><span class="sxs-lookup"><span data-stu-id="3f988-108">P2S is a VPN connection over SSTP (Secure Socket Tunneling Protocol).</span></span> <span data-ttu-id="3f988-109">Point-to-Site connections are useful when you want to connect to your VNet from a remote location, such as from home or a conference, or when you only have a few clients that need to connect to a virtual network.</span><span class="sxs-lookup"><span data-stu-id="3f988-109">Point-to-Site connections are useful when you want to connect to your VNet from a remote location, such as from home or a conference, or when you only have a few clients that need to connect to a virtual network.</span></span> <span data-ttu-id="3f988-110">P2S connections do not require a VPN device or a public-facing IP address.</span><span class="sxs-lookup"><span data-stu-id="3f988-110">P2S connections do not require a VPN device or a public-facing IP address.</span></span> <span data-ttu-id="3f988-111">You establish the VPN connection from the client computer.</span><span class="sxs-lookup"><span data-stu-id="3f988-111">You establish the VPN connection from the client computer.</span></span>

<span data-ttu-id="3f988-112">This article walks you through creating a VNet with a Point-to-Site connection using the Azure portal.</span><span class="sxs-lookup"><span data-stu-id="3f988-112">This article walks you through creating a VNet with a Point-to-Site connection using the Azure portal.</span></span> <span data-ttu-id="3f988-113">For more information about Point-to-Site connections, see the [Point-to-Site FAQ](#faq) at the end of this article.</span><span class="sxs-lookup"><span data-stu-id="3f988-113">For more information about Point-to-Site connections, see the [Point-to-Site FAQ](#faq) at the end of this article.</span></span>

### <a name="deployment-models-and-methods-for-p2s-connections"></a><span data-ttu-id="3f988-114">Deployment models and methods for P2S connections</span><span class="sxs-lookup"><span data-stu-id="3f988-114">Deployment models and methods for P2S connections</span></span>
[!INCLUDE [deployment models](../../includes/vpn-gateway-deployment-models-include.md)]

<span data-ttu-id="3f988-115">The following table shows the two deployment models and available deployment methods for P2S configurations.</span><span class="sxs-lookup"><span data-stu-id="3f988-115">The following table shows the two deployment models and available deployment methods for P2S configurations.</span></span> <span data-ttu-id="3f988-116">When an article with configuration steps is available, we link directly to it from this table.</span><span class="sxs-lookup"><span data-stu-id="3f988-116">When an article with configuration steps is available, we link directly to it from this table.</span></span>

[!INCLUDE [vpn-gateway-clasic-rm](../../includes/vpn-gateway-table-point-to-site-include.md)]

## <a name="basic-workflow"></a><span data-ttu-id="3f988-117">Basic workflow</span><span class="sxs-lookup"><span data-stu-id="3f988-117">Basic workflow</span></span>
![Point-to-Site-diagram](https://docstestmedia1.blob.core.windows.net/azure-media/articles/vpn-gateway/media/vpn-gateway-howto-point-to-site-resource-manager-portal/point-to-site-connection-diagram.png)

### <a name="example"></a><span data-ttu-id="3f988-119">Example values</span><span class="sxs-lookup"><span data-stu-id="3f988-119">Example values</span></span>
* <span data-ttu-id="3f988-120">**Name: VNet1**</span><span class="sxs-lookup"><span data-stu-id="3f988-120">**Name: VNet1**</span></span>
* <span data-ttu-id="3f988-121">**Address space: 192.168.0.0/16**</span><span class="sxs-lookup"><span data-stu-id="3f988-121">**Address space: 192.168.0.0/16**</span></span><br><span data-ttu-id="3f988-122">For this example, we use only one address space.</span><span class="sxs-lookup"><span data-stu-id="3f988-122">For this example, we use only one address space.</span></span> <span data-ttu-id="3f988-123">You can have more than one address space for your VNet.</span><span class="sxs-lookup"><span data-stu-id="3f988-123">You can have more than one address space for your VNet.</span></span>
* <span data-ttu-id="3f988-124">**Subnet name: FrontEnd**</span><span class="sxs-lookup"><span data-stu-id="3f988-124">**Subnet name: FrontEnd**</span></span>
* <span data-ttu-id="3f988-125">**Subnet address range: 192.168.1.0/24**</span><span class="sxs-lookup"><span data-stu-id="3f988-125">**Subnet address range: 192.168.1.0/24**</span></span>
* <span data-ttu-id="3f988-126">**Subscription:** If you have more than one subscription, verify that you are using the correct one.</span><span class="sxs-lookup"><span data-stu-id="3f988-126">**Subscription:** If you have more than one subscription, verify that you are using the correct one.</span></span>
* <span data-ttu-id="3f988-127">**Resource Group: TestRG**</span><span class="sxs-lookup"><span data-stu-id="3f988-127">**Resource Group: TestRG**</span></span>
* <span data-ttu-id="3f988-128">**Location: East US**</span><span class="sxs-lookup"><span data-stu-id="3f988-128">**Location: East US**</span></span>
* <span data-ttu-id="3f988-129">**GatewaySubnet: 192.168.200.0/24**</span><span class="sxs-lookup"><span data-stu-id="3f988-129">**GatewaySubnet: 192.168.200.0/24**</span></span>
* <span data-ttu-id="3f988-130">**Virtual network gateway name: VNet1GW**</span><span class="sxs-lookup"><span data-stu-id="3f988-130">**Virtual network gateway name: VNet1GW**</span></span>
* <span data-ttu-id="3f988-131">**Gateway type: VPN**</span><span class="sxs-lookup"><span data-stu-id="3f988-131">**Gateway type: VPN**</span></span>
* <span data-ttu-id="3f988-132">**VPN type: Route-based**</span><span class="sxs-lookup"><span data-stu-id="3f988-132">**VPN type: Route-based**</span></span>
* <span data-ttu-id="3f988-133">**Public IP address: VNet1GWpip**</span><span class="sxs-lookup"><span data-stu-id="3f988-133">**Public IP address: VNet1GWpip**</span></span>
* <span data-ttu-id="3f988-134">**Connection type: Point-to-site**</span><span class="sxs-lookup"><span data-stu-id="3f988-134">**Connection type: Point-to-site**</span></span>
* <span data-ttu-id="3f988-135">**Client address pool: 172.16.201.0/24**</span><span class="sxs-lookup"><span data-stu-id="3f988-135">**Client address pool: 172.16.201.0/24**</span></span><br><span data-ttu-id="3f988-136">VPN clients that connect to the VNet using this Point-to-Site connection receive an IP address from the client address pool.</span><span class="sxs-lookup"><span data-stu-id="3f988-136">VPN clients that connect to the VNet using this Point-to-Site connection receive an IP address from the client address pool.</span></span>

## <a name="createvnet"></a><span data-ttu-id="3f988-137">Part 1 - Create a virtual network</span><span class="sxs-lookup"><span data-stu-id="3f988-137">Part 1 - Create a virtual network</span></span>
<span data-ttu-id="3f988-138">Before beginning, verify that you have an Azure subscription.</span><span class="sxs-lookup"><span data-stu-id="3f988-138">Before beginning, verify that you have an Azure subscription.</span></span> <span data-ttu-id="3f988-139">If you don't already have an Azure subscription, you can activate your [MSDN subscriber benefits](https://azure.microsoft.com/pricing/member-offers/msdn-benefits-details) or sign up for a [free account](https://azure.microsoft.com/pricing/free-trial).</span><span class="sxs-lookup"><span data-stu-id="3f988-139">If you don't already have an Azure subscription, you can activate your [MSDN subscriber benefits](https://azure.microsoft.com/pricing/member-offers/msdn-benefits-details) or sign up for a [free account](https://azure.microsoft.com/pricing/free-trial).</span></span> <span data-ttu-id="3f988-140">If you are creating this configuration as an exercise, you can refer to the [example values](#example).</span><span class="sxs-lookup"><span data-stu-id="3f988-140">If you are creating this configuration as an exercise, you can refer to the [example values](#example).</span></span>

[!INCLUDE [vpn-gateway-basic-vnet-rm-portal](../../includes/vpn-gateway-basic-vnet-rm-portal-include.md)]

## <a name="address"></a><span data-ttu-id="3f988-141">Part 2 - Specify address space and subnets</span><span class="sxs-lookup"><span data-stu-id="3f988-141">Part 2 - Specify address space and subnets</span></span>
<span data-ttu-id="3f988-142">You can add additional address space and subnets to your VNet once it has been created.</span><span class="sxs-lookup"><span data-stu-id="3f988-142">You can add additional address space and subnets to your VNet once it has been created.</span></span>

[!INCLUDE [vpn-gateway-additional-address-space](../../includes/vpn-gateway-additional-address-space-include.md)]

## <a name="gatewaysubnet"></a><span data-ttu-id="3f988-143">Part 3 - Add a gateway subnet</span><span class="sxs-lookup"><span data-stu-id="3f988-143">Part 3 - Add a gateway subnet</span></span>

<span data-ttu-id="3f988-144">Before connecting your virtual network to a gateway, you first need to create the gateway subnet for the virtual network to which you want to connect.</span><span class="sxs-lookup"><span data-stu-id="3f988-144">Before connecting your virtual network to a gateway, you first need to create the gateway subnet for the virtual network to which you want to connect.</span></span> <span data-ttu-id="3f988-145">The gateway services use the IP addresses specified in the gateway subnet.</span><span class="sxs-lookup"><span data-stu-id="3f988-145">The gateway services use the IP addresses specified in the gateway subnet.</span></span> <span data-ttu-id="3f988-146">If possible, create a gateway subnet using a CIDR block of /28 or /27 to provide enough IP addresses to accommodate additional future configuration requirements.</span><span class="sxs-lookup"><span data-stu-id="3f988-146">If possible, create a gateway subnet using a CIDR block of /28 or /27 to provide enough IP addresses to accommodate additional future configuration requirements.</span></span>

<span data-ttu-id="3f988-147">The screenshots in this section are provided as a reference example.</span><span class="sxs-lookup"><span data-stu-id="3f988-147">The screenshots in this section are provided as a reference example.</span></span> <span data-ttu-id="3f988-148">Be sure to use the GatewaySubnet address range that corresponds with the required values for your configuration.</span><span class="sxs-lookup"><span data-stu-id="3f988-148">Be sure to use the GatewaySubnet address range that corresponds with the required values for your configuration.</span></span>

###<a name="to-create-a-gateway-subnet"></a><span data-ttu-id="3f988-149">To create a gateway subnet</span><span class="sxs-lookup"><span data-stu-id="3f988-149">To create a gateway subnet</span></span>

[!INCLUDE [vpn-gateway-add-gwsubnet-rm-portal](../../includes/vpn-gateway-add-gwsubnet-rm-portal-include.md)]

## <a name="dns"></a><span data-ttu-id="3f988-150">Part 4 - Specify a DNS server (optional)</span><span class="sxs-lookup"><span data-stu-id="3f988-150">Part 4 - Specify a DNS server (optional)</span></span>

<span data-ttu-id="3f988-151">DNS is not required for a Point-to-Site connection.</span><span class="sxs-lookup"><span data-stu-id="3f988-151">DNS is not required for a Point-to-Site connection.</span></span> <span data-ttu-id="3f988-152">However, if you want to have name resolution for resources that are deployed to your virtual network, you should specify a DNS server.</span><span class="sxs-lookup"><span data-stu-id="3f988-152">However, if you want to have name resolution for resources that are deployed to your virtual network, you should specify a DNS server.</span></span> <span data-ttu-id="3f988-153">This setting lets you specify the DNS server that you want to use for name resolution for this virtual network.</span><span class="sxs-lookup"><span data-stu-id="3f988-153">This setting lets you specify the DNS server that you want to use for name resolution for this virtual network.</span></span> <span data-ttu-id="3f988-154">It does not create a DNS server.</span><span class="sxs-lookup"><span data-stu-id="3f988-154">It does not create a DNS server.</span></span>

[!INCLUDE [vpn-gateway-add-dns-rm-portal](../../includes/vpn-gateway-add-dns-rm-portal-include.md)]

## <a name="creategw"></a><span data-ttu-id="3f988-155">Part 5 - Create a virtual network gateway</span><span class="sxs-lookup"><span data-stu-id="3f988-155">Part 5 - Create a virtual network gateway</span></span>
<span data-ttu-id="3f988-156">Point-to-site connections require the following settings:</span><span class="sxs-lookup"><span data-stu-id="3f988-156">Point-to-site connections require the following settings:</span></span>

* <span data-ttu-id="3f988-157">Gateway type: VPN</span><span class="sxs-lookup"><span data-stu-id="3f988-157">Gateway type: VPN</span></span>
* <span data-ttu-id="3f988-158">VPN type: Route-based</span><span class="sxs-lookup"><span data-stu-id="3f988-158">VPN type: Route-based</span></span>

### <a name="to-create-a-virtual-network-gateway"></a><span data-ttu-id="3f988-159">To create a virtual network gateway</span><span class="sxs-lookup"><span data-stu-id="3f988-159">To create a virtual network gateway</span></span>
[!INCLUDE [vpn-gateway-add-gw-rm-portal](../../includes/vpn-gateway-add-gw-rm-portal-include.md)]

## <a name="generatecert"></a><span data-ttu-id="3f988-160">Part 6 - Generate certificates</span><span class="sxs-lookup"><span data-stu-id="3f988-160">Part 6 - Generate certificates</span></span>

<span data-ttu-id="3f988-161">Certificates are used by Azure to authenticate VPN clients for Point-to-Site VPNs.</span><span class="sxs-lookup"><span data-stu-id="3f988-161">Certificates are used by Azure to authenticate VPN clients for Point-to-Site VPNs.</span></span> <span data-ttu-id="3f988-162">After creating the root certificate, you export the public certificate data (not the private key) as a Base-64 encoded X.509 .cer file.</span><span class="sxs-lookup"><span data-stu-id="3f988-162">After creating the root certificate, you export the public certificate data (not the private key) as a Base-64 encoded X.509 .cer file.</span></span> <span data-ttu-id="3f988-163">You then upload the public certificate data from the root certificate to Azure.</span><span class="sxs-lookup"><span data-stu-id="3f988-163">You then upload the public certificate data from the root certificate to Azure.</span></span>

<span data-ttu-id="3f988-164">Each client computer that connects to a VNet using Point-to-Site must have a client certificate installed.</span><span class="sxs-lookup"><span data-stu-id="3f988-164">Each client computer that connects to a VNet using Point-to-Site must have a client certificate installed.</span></span> <span data-ttu-id="3f988-165">The client certificate is generated from the root certificate and installed on each client computer.</span><span class="sxs-lookup"><span data-stu-id="3f988-165">The client certificate is generated from the root certificate and installed on each client computer.</span></span> <span data-ttu-id="3f988-166">If a valid client certificate is not installed and the client tries to connect to the VNet, authentication fails.</span><span class="sxs-lookup"><span data-stu-id="3f988-166">If a valid client certificate is not installed and the client tries to connect to the VNet, authentication fails.</span></span>

### <a name="getcer"></a><span data-ttu-id="3f988-167">Step 1 - Obtain the .cer file for the root certificate</span><span class="sxs-lookup"><span data-stu-id="3f988-167">Step 1 - Obtain the .cer file for the root certificate</span></span>

#### <a name="enterprise-certificate"></a><span data-ttu-id="3f988-168">Enterprise certificate</span><span class="sxs-lookup"><span data-stu-id="3f988-168">Enterprise certificate</span></span>
 
<span data-ttu-id="3f988-169">If you are using an enterprise solution, you can use your existing certificate chain.</span><span class="sxs-lookup"><span data-stu-id="3f988-169">If you are using an enterprise solution, you can use your existing certificate chain.</span></span> <span data-ttu-id="3f988-170">Obtain the .cer file for the root certificate that you want to use.</span><span class="sxs-lookup"><span data-stu-id="3f988-170">Obtain the .cer file for the root certificate that you want to use.</span></span>

#### <a name="self-signed-root-certificate"></a><span data-ttu-id="3f988-171">Self-signed root certificate</span><span class="sxs-lookup"><span data-stu-id="3f988-171">Self-signed root certificate</span></span>

<span data-ttu-id="3f988-172">If you are not using an enterprise certificate solution, you need to create a self-signed root certificate.</span><span class="sxs-lookup"><span data-stu-id="3f988-172">If you are not using an enterprise certificate solution, you need to create a self-signed root certificate.</span></span> <span data-ttu-id="3f988-173">To create a self-signed root certificate that contains the necessary fields for P2S authentication, you can use PowerShell.</span><span class="sxs-lookup"><span data-stu-id="3f988-173">To create a self-signed root certificate that contains the necessary fields for P2S authentication, you can use PowerShell.</span></span> <span data-ttu-id="3f988-174">[Create a self-signed root certificate for Point-to-Site connections using PowerShell](vpn-gateway-certificates-point-to-site.md) walks you through the steps to create a self-signed root certificate.</span><span class="sxs-lookup"><span data-stu-id="3f988-174">[Create a self-signed root certificate for Point-to-Site connections using PowerShell](vpn-gateway-certificates-point-to-site.md) walks you through the steps to create a self-signed root certificate.</span></span>

> [!NOTE]
> Previously, makecert was the recommended method to create self-signed root certificates and generate client certificates for Point-to-Site connections. You can now use PowerShell to create these certificates. One benefit of using PowerShell is the ability to create SHA-2 certificates. See [Create a self-signed root certificate for Point-to-Site connections using PowerShell](vpn-gateway-certificates-point-to-site.md) for the required values.
>
>


#### <a name="to-export-the-public-key-for-a-self-signed-root-certificate"></a><span data-ttu-id="3f988-179">To export the public key for a self-signed root certificate</span><span class="sxs-lookup"><span data-stu-id="3f988-179">To export the public key for a self-signed root certificate</span></span>

<span data-ttu-id="3f988-180">Point-to-Site connections require the public key (.cer) to be uploaded to Azure.</span><span class="sxs-lookup"><span data-stu-id="3f988-180">Point-to-Site connections require the public key (.cer) to be uploaded to Azure.</span></span> <span data-ttu-id="3f988-181">The following steps help you export the .cer file for your self-signed root certificate.</span><span class="sxs-lookup"><span data-stu-id="3f988-181">The following steps help you export the .cer file for your self-signed root certificate.</span></span>

1. <span data-ttu-id="3f988-182">To obtain a .cer file from the certificate, open **Manage user certificates**.</span><span class="sxs-lookup"><span data-stu-id="3f988-182">To obtain a .cer file from the certificate, open **Manage user certificates**.</span></span>
2. <span data-ttu-id="3f988-183">Locate the 'P2SRootCert' self-signed root certificate in 'Certificates - Current User\Personal\Certificates', and right-click.</span><span class="sxs-lookup"><span data-stu-id="3f988-183">Locate the 'P2SRootCert' self-signed root certificate in 'Certificates - Current User\Personal\Certificates', and right-click.</span></span> <span data-ttu-id="3f988-184">Click **All Tasks**, and then click **Export** to open the **Certificate Export Wizard**.</span><span class="sxs-lookup"><span data-stu-id="3f988-184">Click **All Tasks**, and then click **Export** to open the **Certificate Export Wizard**.</span></span>
3. <span data-ttu-id="3f988-185">In the Wizard, click **Next**.</span><span class="sxs-lookup"><span data-stu-id="3f988-185">In the Wizard, click **Next**.</span></span> <span data-ttu-id="3f988-186">Select **No, do not export the private key**, and then click **Next**.</span><span class="sxs-lookup"><span data-stu-id="3f988-186">Select **No, do not export the private key**, and then click **Next**.</span></span>
4. <span data-ttu-id="3f988-187">On the **Export File Format** page, select **Base-64 encoded X.509 (.CER).**, then click **Next**.</span><span class="sxs-lookup"><span data-stu-id="3f988-187">On the **Export File Format** page, select **Base-64 encoded X.509 (.CER).**, then click **Next**.</span></span> 
5. <span data-ttu-id="3f988-188">On the **File to Export** page, Browse to 'C:', create a subdirectory called 'cert' and select it.</span><span class="sxs-lookup"><span data-stu-id="3f988-188">On the **File to Export** page, Browse to 'C:', create a subdirectory called 'cert' and select it.</span></span> <span data-ttu-id="3f988-189">Name the certificate file 'P2SRootCert.cer', then click **Save**.</span><span class="sxs-lookup"><span data-stu-id="3f988-189">Name the certificate file 'P2SRootCert.cer', then click **Save**.</span></span> 
6. <span data-ttu-id="3f988-190">Click **Next**, then **Finish** to export the certificate.</span><span class="sxs-lookup"><span data-stu-id="3f988-190">Click **Next**, then **Finish** to export the certificate.</span></span> <span data-ttu-id="3f988-191">**The export was successful** appears.</span><span class="sxs-lookup"><span data-stu-id="3f988-191">**The export was successful** appears.</span></span> <span data-ttu-id="3f988-192">Click **OK** to close the wizard.</span><span class="sxs-lookup"><span data-stu-id="3f988-192">Click **OK** to close the wizard.</span></span>

### <a name="generateclientcert"></a><span data-ttu-id="3f988-193">Step 2 - Generate a client certificate</span><span class="sxs-lookup"><span data-stu-id="3f988-193">Step 2 - Generate a client certificate</span></span>
<span data-ttu-id="3f988-194">You can either generate a unique certificate for each client, or you can use the same certificate on multiple clients.</span><span class="sxs-lookup"><span data-stu-id="3f988-194">You can either generate a unique certificate for each client, or you can use the same certificate on multiple clients.</span></span> <span data-ttu-id="3f988-195">The advantage to generating unique client certificates is the ability to revoke a single certificate.</span><span class="sxs-lookup"><span data-stu-id="3f988-195">The advantage to generating unique client certificates is the ability to revoke a single certificate.</span></span> <span data-ttu-id="3f988-196">Otherwise, if everyone is using the same client certificate and you need to revoke it, you have to generate and install new certificates for all the clients that use that certificate to authenticate.</span><span class="sxs-lookup"><span data-stu-id="3f988-196">Otherwise, if everyone is using the same client certificate and you need to revoke it, you have to generate and install new certificates for all the clients that use that certificate to authenticate.</span></span>

#### <a name="enterprise-certificate"></a><span data-ttu-id="3f988-197">Enterprise certificate</span><span class="sxs-lookup"><span data-stu-id="3f988-197">Enterprise certificate</span></span>
- <span data-ttu-id="3f988-198">If you are using an enterprise certificate solution, generate a client certificate with the common name value format 'name@yourdomain.com', rather than the 'domain name\username' format.</span><span class="sxs-lookup"><span data-stu-id="3f988-198">If you are using an enterprise certificate solution, generate a client certificate with the common name value format 'name@yourdomain.com', rather than the 'domain name\username' format.</span></span>
- <span data-ttu-id="3f988-199">Make sure the client certificate is based on the 'User' certificate template that has 'Client Authentication' as the first item in the use list, rather than Smart Card Logon, etc. You can check the certificate by double-clicking the client certificate and viewing **Details > Enhanced Key Usage**.</span><span class="sxs-lookup"><span data-stu-id="3f988-199">Make sure the client certificate is based on the 'User' certificate template that has 'Client Authentication' as the first item in the use list, rather than Smart Card Logon, etc. You can check the certificate by double-clicking the client certificate and viewing **Details > Enhanced Key Usage**.</span></span>

#### <a name="self-signed-root-certificate"></a><span data-ttu-id="3f988-200">Self-signed root certificate</span><span class="sxs-lookup"><span data-stu-id="3f988-200">Self-signed root certificate</span></span> 
<span data-ttu-id="3f988-201">If you are using a self-signed root certificate, see [Generate a client certificate using PowerShell](vpn-gateway-certificates-point-to-site.md#clientcert) for steps to generate a client certificate that is compatible with Point-to-Site connections.</span><span class="sxs-lookup"><span data-stu-id="3f988-201">If you are using a self-signed root certificate, see [Generate a client certificate using PowerShell](vpn-gateway-certificates-point-to-site.md#clientcert) for steps to generate a client certificate that is compatible with Point-to-Site connections.</span></span>


### <a name="exportclientcert"></a><span data-ttu-id="3f988-202">Step 3 - Export the client certificate</span><span class="sxs-lookup"><span data-stu-id="3f988-202">Step 3 - Export the client certificate</span></span>
<span data-ttu-id="3f988-203">If you generate a client certificate from a self-signed root certificate using the [PowerShell](vpn-gateway-certificates-point-to-site.md#clientcert) instructions, it's automatically installed on the computer that you used to generate it.</span><span class="sxs-lookup"><span data-stu-id="3f988-203">If you generate a client certificate from a self-signed root certificate using the [PowerShell](vpn-gateway-certificates-point-to-site.md#clientcert) instructions, it's automatically installed on the computer that you used to generate it.</span></span> <span data-ttu-id="3f988-204">If you want to install a client certificate on another client computer, you need to export it.</span><span class="sxs-lookup"><span data-stu-id="3f988-204">If you want to install a client certificate on another client computer, you need to export it.</span></span>
 
1. <span data-ttu-id="3f988-205">To export a client certificate, open **Manage user certificates**.</span><span class="sxs-lookup"><span data-stu-id="3f988-205">To export a client certificate, open **Manage user certificates**.</span></span> <span data-ttu-id="3f988-206">Right-click the client certificate that you want to export, click **all tasks**, and then click **export** to open the **Certificate Export Wizard**.</span><span class="sxs-lookup"><span data-stu-id="3f988-206">Right-click the client certificate that you want to export, click **all tasks**, and then click **export** to open the **Certificate Export Wizard**.</span></span>
2. <span data-ttu-id="3f988-207">In the Wizard, click **Next**, then select **Yes, export the private key**, and then click **Next**.</span><span class="sxs-lookup"><span data-stu-id="3f988-207">In the Wizard, click **Next**, then select **Yes, export the private key**, and then click **Next**.</span></span>
3. <span data-ttu-id="3f988-208">On the **Export File Format** page, leave the defaults selected.</span><span class="sxs-lookup"><span data-stu-id="3f988-208">On the **Export File Format** page, leave the defaults selected.</span></span> <span data-ttu-id="3f988-209">Make sure **Include all certificates in the certification path if possible** is selected to also export the required root certificate information.</span><span class="sxs-lookup"><span data-stu-id="3f988-209">Make sure **Include all certificates in the certification path if possible** is selected to also export the required root certificate information.</span></span> <span data-ttu-id="3f988-210">Then, click **Next**.</span><span class="sxs-lookup"><span data-stu-id="3f988-210">Then, click **Next**.</span></span>
4. <span data-ttu-id="3f988-211">On the **Security** page, you must protect the private key.</span><span class="sxs-lookup"><span data-stu-id="3f988-211">On the **Security** page, you must protect the private key.</span></span> <span data-ttu-id="3f988-212">If you select to use a password, make sure to record or remember the password that you set for this certificate.</span><span class="sxs-lookup"><span data-stu-id="3f988-212">If you select to use a password, make sure to record or remember the password that you set for this certificate.</span></span> <span data-ttu-id="3f988-213">Then, click **Next**.</span><span class="sxs-lookup"><span data-stu-id="3f988-213">Then, click **Next**.</span></span>
5. <span data-ttu-id="3f988-214">On the **File to Export**, **Browse** to the location to which you want to export the certificate.</span><span class="sxs-lookup"><span data-stu-id="3f988-214">On the **File to Export**, **Browse** to the location to which you want to export the certificate.</span></span> <span data-ttu-id="3f988-215">For **File name**, name the certificate file.</span><span class="sxs-lookup"><span data-stu-id="3f988-215">For **File name**, name the certificate file.</span></span> <span data-ttu-id="3f988-216">Then, click **Next**.</span><span class="sxs-lookup"><span data-stu-id="3f988-216">Then, click **Next**.</span></span>
6. <span data-ttu-id="3f988-217">Click **Finish** to export the certificate.</span><span class="sxs-lookup"><span data-stu-id="3f988-217">Click **Finish** to export the certificate.</span></span>   

## <a name="addresspool"></a><span data-ttu-id="3f988-218">Part 7 - Add the client address pool</span><span class="sxs-lookup"><span data-stu-id="3f988-218">Part 7 - Add the client address pool</span></span>
1. <span data-ttu-id="3f988-219">Once the virtual network gateway has been created, navigate to the **Settings** section of the virtual network gateway blade.</span><span class="sxs-lookup"><span data-stu-id="3f988-219">Once the virtual network gateway has been created, navigate to the **Settings** section of the virtual network gateway blade.</span></span> <span data-ttu-id="3f988-220">In the **Settings** section, click **Point-to-site configuration** to open the **Configuration** blade.</span><span class="sxs-lookup"><span data-stu-id="3f988-220">In the **Settings** section, click **Point-to-site configuration** to open the **Configuration** blade.</span></span>
   
    ![Point-to-Site blade](https://docstestmedia1.blob.core.windows.net/azure-media/articles/vpn-gateway/media/vpn-gateway-howto-point-to-site-resource-manager-portal/configuration.png)
2. <span data-ttu-id="3f988-222">**Address pool** is the pool of IP addresses from which clients that connect receive an IP address.</span><span class="sxs-lookup"><span data-stu-id="3f988-222">**Address pool** is the pool of IP addresses from which clients that connect receive an IP address.</span></span> <span data-ttu-id="3f988-223">Add the address pool, and then click **Save**.</span><span class="sxs-lookup"><span data-stu-id="3f988-223">Add the address pool, and then click **Save**.</span></span>
   
    ![Client address pool](https://docstestmedia1.blob.core.windows.net/azure-media/articles/vpn-gateway/media/vpn-gateway-howto-point-to-site-resource-manager-portal/ipaddresspool.png)

## <a name="uploadfile"></a><span data-ttu-id="3f988-225">Part 8 - Upload the root certificate .cer file</span><span class="sxs-lookup"><span data-stu-id="3f988-225">Part 8 - Upload the root certificate .cer file</span></span>
<span data-ttu-id="3f988-226">After the gateway has been created, you can upload the .cer file for a trusted root certificate to Azure.</span><span class="sxs-lookup"><span data-stu-id="3f988-226">After the gateway has been created, you can upload the .cer file for a trusted root certificate to Azure.</span></span> <span data-ttu-id="3f988-227">You can upload files for up to 20 root certificates.</span><span class="sxs-lookup"><span data-stu-id="3f988-227">You can upload files for up to 20 root certificates.</span></span> <span data-ttu-id="3f988-228">You do not upload the private key for the root certificate to Azure.</span><span class="sxs-lookup"><span data-stu-id="3f988-228">You do not upload the private key for the root certificate to Azure.</span></span> <span data-ttu-id="3f988-229">Once the .cer file is uploaded, Azure uses it to authenticate clients that connect to the virtual network.</span><span class="sxs-lookup"><span data-stu-id="3f988-229">Once the .cer file is uploaded, Azure uses it to authenticate clients that connect to the virtual network.</span></span>

1. <span data-ttu-id="3f988-230">Certificates are added on the **Point-to-site configuration** blade in the **Root certificate** section.</span><span class="sxs-lookup"><span data-stu-id="3f988-230">Certificates are added on the **Point-to-site configuration** blade in the **Root certificate** section.</span></span>  
2. <span data-ttu-id="3f988-231">Make sure that you exported the root certificate as a Base-64 encoded X.509 (.cer) file.</span><span class="sxs-lookup"><span data-stu-id="3f988-231">Make sure that you exported the root certificate as a Base-64 encoded X.509 (.cer) file.</span></span> <span data-ttu-id="3f988-232">You need to export the certificate in this format so you can open the certificate with text editor.</span><span class="sxs-lookup"><span data-stu-id="3f988-232">You need to export the certificate in this format so you can open the certificate with text editor.</span></span>
3. <span data-ttu-id="3f988-233">Open the certificate with a text editor, such as Notepad.</span><span class="sxs-lookup"><span data-stu-id="3f988-233">Open the certificate with a text editor, such as Notepad.</span></span> <span data-ttu-id="3f988-234">Copy only the following section as one continuous line:</span><span class="sxs-lookup"><span data-stu-id="3f988-234">Copy only the following section as one continuous line:</span></span>
   
    ![Certificate data](https://docstestmedia1.blob.core.windows.net/azure-media/articles/vpn-gateway/media/vpn-gateway-howto-point-to-site-resource-manager-portal/copycert.png)

    > [!NOTE]
    > When copying the certificate data, make sure that you copy the text as one continuous line without carriage returns or line feeds. You may need to modify your view in the text editor to 'Show Symbol/Show all characters' to see the carriage returns and line feeds.                                                                                                                                                                            
    >
    >

4. <span data-ttu-id="3f988-238">Paste the certificate data into the **Public Certificate Data** field.</span><span class="sxs-lookup"><span data-stu-id="3f988-238">Paste the certificate data into the **Public Certificate Data** field.</span></span> <span data-ttu-id="3f988-239">**Name** the certificate, and then click **Save**.</span><span class="sxs-lookup"><span data-stu-id="3f988-239">**Name** the certificate, and then click **Save**.</span></span> <span data-ttu-id="3f988-240">You can add up to 20 trusted root certificates.</span><span class="sxs-lookup"><span data-stu-id="3f988-240">You can add up to 20 trusted root certificates.</span></span>
   
    ![Certificate upload](https://docstestmedia1.blob.core.windows.net/azure-media/articles/vpn-gateway/media/vpn-gateway-howto-point-to-site-resource-manager-portal/rootcertupload.png)

## <a name="clientconfig"></a><span data-ttu-id="3f988-242">Part 9 - Download and install the VPN client configuration package</span><span class="sxs-lookup"><span data-stu-id="3f988-242">Part 9 - Download and install the VPN client configuration package</span></span>
<span data-ttu-id="3f988-243">Clients connecting to Azure using P2S must have both a client certificate, and a VPN client configuration package installed.</span><span class="sxs-lookup"><span data-stu-id="3f988-243">Clients connecting to Azure using P2S must have both a client certificate, and a VPN client configuration package installed.</span></span> <span data-ttu-id="3f988-244">VPN client configuration packages are available for Windows clients.</span><span class="sxs-lookup"><span data-stu-id="3f988-244">VPN client configuration packages are available for Windows clients.</span></span> 

<span data-ttu-id="3f988-245">The VPN client package contains information to configure the VPN client software that is built into Windows.</span><span class="sxs-lookup"><span data-stu-id="3f988-245">The VPN client package contains information to configure the VPN client software that is built into Windows.</span></span> <span data-ttu-id="3f988-246">The configuration is specific to the VPN that you want to connect to.</span><span class="sxs-lookup"><span data-stu-id="3f988-246">The configuration is specific to the VPN that you want to connect to.</span></span> <span data-ttu-id="3f988-247">The package does not install additional software.</span><span class="sxs-lookup"><span data-stu-id="3f988-247">The package does not install additional software.</span></span>

<span data-ttu-id="3f988-248">You can use the same VPN client configuration package on each client computer, as long as the version matches the architecture for the client.</span><span class="sxs-lookup"><span data-stu-id="3f988-248">You can use the same VPN client configuration package on each client computer, as long as the version matches the architecture for the client.</span></span>

### <a name="step-1---download-the-client-configuration-package"></a><span data-ttu-id="3f988-249">Step 1 - Download the client configuration package</span><span class="sxs-lookup"><span data-stu-id="3f988-249">Step 1 - Download the client configuration package</span></span>

1. <span data-ttu-id="3f988-250">On the **Point-to-site configuration** blade, click **Download VPN client** to open the **Download VPN client** blade.</span><span class="sxs-lookup"><span data-stu-id="3f988-250">On the **Point-to-site configuration** blade, click **Download VPN client** to open the **Download VPN client** blade.</span></span> <span data-ttu-id="3f988-251">It takes a minute or two for the package to generate.</span><span class="sxs-lookup"><span data-stu-id="3f988-251">It takes a minute or two for the package to generate.</span></span>
   
    ![VPN client download 1](https://docstestmedia1.blob.core.windows.net/azure-media/articles/vpn-gateway/media/vpn-gateway-howto-point-to-site-resource-manager-portal/downloadvpnclient1.png)
2. <span data-ttu-id="3f988-253">Select the correct package for your client, and then click **Download**.</span><span class="sxs-lookup"><span data-stu-id="3f988-253">Select the correct package for your client, and then click **Download**.</span></span> <span data-ttu-id="3f988-254">Save the configuration package file.</span><span class="sxs-lookup"><span data-stu-id="3f988-254">Save the configuration package file.</span></span> <span data-ttu-id="3f988-255">You install the VPN client configuration package on each client computer that connects to the virtual network.</span><span class="sxs-lookup"><span data-stu-id="3f988-255">You install the VPN client configuration package on each client computer that connects to the virtual network.</span></span>

    ![VPN client download 2](https://docstestmedia1.blob.core.windows.net/azure-media/articles/vpn-gateway/media/vpn-gateway-howto-point-to-site-resource-manager-portal/vpnclient.png)

### <a name="step-2---install-the-client-configuration-package"></a><span data-ttu-id="3f988-257">Step 2 - Install the client configuration package</span><span class="sxs-lookup"><span data-stu-id="3f988-257">Step 2 - Install the client configuration package</span></span>

1. <span data-ttu-id="3f988-258">Copy the configuration file locally to the computer that you want to connect to your virtual network.</span><span class="sxs-lookup"><span data-stu-id="3f988-258">Copy the configuration file locally to the computer that you want to connect to your virtual network.</span></span> 
2. <span data-ttu-id="3f988-259">Double-click the .exe file to install the package on the client computer.</span><span class="sxs-lookup"><span data-stu-id="3f988-259">Double-click the .exe file to install the package on the client computer.</span></span> <span data-ttu-id="3f988-260">Because you created the configuration package, it is not signed and you may see a warning.</span><span class="sxs-lookup"><span data-stu-id="3f988-260">Because you created the configuration package, it is not signed and you may see a warning.</span></span> <span data-ttu-id="3f988-261">If you get a Windows SmartScreen popup, click **More info** (on the left), then **Run anyway** to install the package.</span><span class="sxs-lookup"><span data-stu-id="3f988-261">If you get a Windows SmartScreen popup, click **More info** (on the left), then **Run anyway** to install the package.</span></span>
3. <span data-ttu-id="3f988-262">Install the package on the client computer.</span><span class="sxs-lookup"><span data-stu-id="3f988-262">Install the package on the client computer.</span></span> <span data-ttu-id="3f988-263">If you get a Windows SmartScreen popup, click **More info** (on the left), then **Run anyway** to install the package.</span><span class="sxs-lookup"><span data-stu-id="3f988-263">If you get a Windows SmartScreen popup, click **More info** (on the left), then **Run anyway** to install the package.</span></span>
4. <span data-ttu-id="3f988-264">On the client computer, navigate to **Network Settings** and click **VPN**.</span><span class="sxs-lookup"><span data-stu-id="3f988-264">On the client computer, navigate to **Network Settings** and click **VPN**.</span></span> <span data-ttu-id="3f988-265">The VPN connection shows the name of the virtual network that it connects to.</span><span class="sxs-lookup"><span data-stu-id="3f988-265">The VPN connection shows the name of the virtual network that it connects to.</span></span>


## <a name="installclientcert"></a><span data-ttu-id="3f988-266">Part 10 - Install an exported client certificate</span><span class="sxs-lookup"><span data-stu-id="3f988-266">Part 10 - Install an exported client certificate</span></span>

<span data-ttu-id="3f988-267">If you want to create a P2S connection from a client computer other than the one you used to generate the client certificates, you need to install a client certificate.</span><span class="sxs-lookup"><span data-stu-id="3f988-267">If you want to create a P2S connection from a client computer other than the one you used to generate the client certificates, you need to install a client certificate.</span></span> <span data-ttu-id="3f988-268">When installing a client certificate, you need the password that was created when the client certificate was exported.</span><span class="sxs-lookup"><span data-stu-id="3f988-268">When installing a client certificate, you need the password that was created when the client certificate was exported.</span></span>

1. <span data-ttu-id="3f988-269">Locate and copy the *.pfx* file to the client computer.</span><span class="sxs-lookup"><span data-stu-id="3f988-269">Locate and copy the *.pfx* file to the client computer.</span></span> <span data-ttu-id="3f988-270">On the client computer, double-click the *.pfx* file to install.</span><span class="sxs-lookup"><span data-stu-id="3f988-270">On the client computer, double-click the *.pfx* file to install.</span></span> <span data-ttu-id="3f988-271">Leave the **Store Location** as **Current User**, and then click **Next**.</span><span class="sxs-lookup"><span data-stu-id="3f988-271">Leave the **Store Location** as **Current User**, and then click **Next**.</span></span>
2. <span data-ttu-id="3f988-272">On the **File** to import page, don't make any changes.</span><span class="sxs-lookup"><span data-stu-id="3f988-272">On the **File** to import page, don't make any changes.</span></span> <span data-ttu-id="3f988-273">Click **Next**.</span><span class="sxs-lookup"><span data-stu-id="3f988-273">Click **Next**.</span></span>
3. <span data-ttu-id="3f988-274">On the **Private key protection** page, input the password for the certificate, or verify that the security principal is correct, and then click **Next**.</span><span class="sxs-lookup"><span data-stu-id="3f988-274">On the **Private key protection** page, input the password for the certificate, or verify that the security principal is correct, and then click **Next**.</span></span>
4. <span data-ttu-id="3f988-275">On the **Certificate Store** page, leave the default location, and then click **Next**.</span><span class="sxs-lookup"><span data-stu-id="3f988-275">On the **Certificate Store** page, leave the default location, and then click **Next**.</span></span>
5. <span data-ttu-id="3f988-276">Click **Finish**.</span><span class="sxs-lookup"><span data-stu-id="3f988-276">Click **Finish**.</span></span> <span data-ttu-id="3f988-277">On the **Security Warning** for the certificate installation, click **Yes**.</span><span class="sxs-lookup"><span data-stu-id="3f988-277">On the **Security Warning** for the certificate installation, click **Yes**.</span></span> <span data-ttu-id="3f988-278">You can feel comfortable clicking 'Yes' because you generated the certificate.</span><span class="sxs-lookup"><span data-stu-id="3f988-278">You can feel comfortable clicking 'Yes' because you generated the certificate.</span></span> <span data-ttu-id="3f988-279">The certificate is now successfully imported.</span><span class="sxs-lookup"><span data-stu-id="3f988-279">The certificate is now successfully imported.</span></span>

## <a name="connect"></a><span data-ttu-id="3f988-280">Part 11 - Connect to Azure</span><span class="sxs-lookup"><span data-stu-id="3f988-280">Part 11 - Connect to Azure</span></span>
 
 1. <span data-ttu-id="3f988-281">To connect to your VNet, on the client computer, navigate to VPN connections and locate the VPN connection that you created.</span><span class="sxs-lookup"><span data-stu-id="3f988-281">To connect to your VNet, on the client computer, navigate to VPN connections and locate the VPN connection that you created.</span></span> <span data-ttu-id="3f988-282">It is named the same name as your virtual network.</span><span class="sxs-lookup"><span data-stu-id="3f988-282">It is named the same name as your virtual network.</span></span> <span data-ttu-id="3f988-283">Click **Connect**.</span><span class="sxs-lookup"><span data-stu-id="3f988-283">Click **Connect**.</span></span> <span data-ttu-id="3f988-284">A pop-up message may appear that refers to using the certificate.</span><span class="sxs-lookup"><span data-stu-id="3f988-284">A pop-up message may appear that refers to using the certificate.</span></span> <span data-ttu-id="3f988-285">Click **Continue** to use elevated privileges.</span><span class="sxs-lookup"><span data-stu-id="3f988-285">Click **Continue** to use elevated privileges.</span></span>

2. <span data-ttu-id="3f988-286">On the **Connection** status page, click **Connect** to start the connection.</span><span class="sxs-lookup"><span data-stu-id="3f988-286">On the **Connection** status page, click **Connect** to start the connection.</span></span> <span data-ttu-id="3f988-287">If you see a **Select Certificate** screen, verify that the client certificate showing is the one that you want to use to connect.</span><span class="sxs-lookup"><span data-stu-id="3f988-287">If you see a **Select Certificate** screen, verify that the client certificate showing is the one that you want to use to connect.</span></span> <span data-ttu-id="3f988-288">If it is not, use the drop-down arrow to select the correct certificate, and then click **OK**.</span><span class="sxs-lookup"><span data-stu-id="3f988-288">If it is not, use the drop-down arrow to select the correct certificate, and then click **OK**.</span></span>
   
    ![VPN client connects to Azure](https://docstestmedia1.blob.core.windows.net/azure-media/articles/vpn-gateway/media/vpn-gateway-howto-point-to-site-resource-manager-portal/clientconnect.png)
3. <span data-ttu-id="3f988-290">Your connection is established.</span><span class="sxs-lookup"><span data-stu-id="3f988-290">Your connection is established.</span></span>
   
    ![Connection established](https://docstestmedia1.blob.core.windows.net/azure-media/articles/vpn-gateway/media/vpn-gateway-howto-point-to-site-resource-manager-portal/connected.png)

<span data-ttu-id="3f988-292">If you are having trouble connecting, check the following items:</span><span class="sxs-lookup"><span data-stu-id="3f988-292">If you are having trouble connecting, check the following items:</span></span>

- <span data-ttu-id="3f988-293">Open **Manage user certificates** and navigate to **Trusted Root Certification Authorities\Certificates**.</span><span class="sxs-lookup"><span data-stu-id="3f988-293">Open **Manage user certificates** and navigate to **Trusted Root Certification Authorities\Certificates**.</span></span> <span data-ttu-id="3f988-294">Verify that the root certificate is listed.</span><span class="sxs-lookup"><span data-stu-id="3f988-294">Verify that the root certificate is listed.</span></span> <span data-ttu-id="3f988-295">The root certificate must be present in order for authentication to work.</span><span class="sxs-lookup"><span data-stu-id="3f988-295">The root certificate must be present in order for authentication to work.</span></span> <span data-ttu-id="3f988-296">When you export a client certificate .pfx using the default value 'Include all certificates in the certification path if possible', the root certificate information is also exported.</span><span class="sxs-lookup"><span data-stu-id="3f988-296">When you export a client certificate .pfx using the default value 'Include all certificates in the certification path if possible', the root certificate information is also exported.</span></span> <span data-ttu-id="3f988-297">When you install the client certificate, the root certificate is then also installed on the client computer.</span><span class="sxs-lookup"><span data-stu-id="3f988-297">When you install the client certificate, the root certificate is then also installed on the client computer.</span></span> 

- <span data-ttu-id="3f988-298">If you are using a certificate that was issued using an Enterprise CA solution and are having trouble authenticating, check the authentication order on the client certificate.</span><span class="sxs-lookup"><span data-stu-id="3f988-298">If you are using a certificate that was issued using an Enterprise CA solution and are having trouble authenticating, check the authentication order on the client certificate.</span></span> <span data-ttu-id="3f988-299">You can check the authentication list order by double-clicking the client certificate, and going to **Details > Enhanced Key Usage**.</span><span class="sxs-lookup"><span data-stu-id="3f988-299">You can check the authentication list order by double-clicking the client certificate, and going to **Details > Enhanced Key Usage**.</span></span> <span data-ttu-id="3f988-300">Make sure the list shows 'Client Authentication' as the first item.</span><span class="sxs-lookup"><span data-stu-id="3f988-300">Make sure the list shows 'Client Authentication' as the first item.</span></span> <span data-ttu-id="3f988-301">If not, you need to issue a client certificate based on the User template that has Client Authentication as the first item in the list.</span><span class="sxs-lookup"><span data-stu-id="3f988-301">If not, you need to issue a client certificate based on the User template that has Client Authentication as the first item in the list.</span></span>


## <a name="verify"></a><span data-ttu-id="3f988-302">Part 12 - Verify your connection</span><span class="sxs-lookup"><span data-stu-id="3f988-302">Part 12 - Verify your connection</span></span>
1. <span data-ttu-id="3f988-303">To verify that your VPN connection is active, open an elevated command prompt, and run *ipconfig/all*.</span><span class="sxs-lookup"><span data-stu-id="3f988-303">To verify that your VPN connection is active, open an elevated command prompt, and run *ipconfig/all*.</span></span>
2. <span data-ttu-id="3f988-304">View the results.</span><span class="sxs-lookup"><span data-stu-id="3f988-304">View the results.</span></span> <span data-ttu-id="3f988-305">Notice that the IP address you received is one of the addresses within the Point-to-Site VPN Client Address Pool that you specified in your configuration.</span><span class="sxs-lookup"><span data-stu-id="3f988-305">Notice that the IP address you received is one of the addresses within the Point-to-Site VPN Client Address Pool that you specified in your configuration.</span></span> <span data-ttu-id="3f988-306">The results are similar to this example:</span><span class="sxs-lookup"><span data-stu-id="3f988-306">The results are similar to this example:</span></span>
   
        PPP adapter VNet1:
            Connection-specific DNS Suffix .:
            Description.....................: VNet1
            Physical Address................:
            DHCP Enabled....................: No
            Autoconfiguration Enabled.......: Yes
            IPv4 Address....................: 172.16.201.3(Preferred)
            Subnet Mask.....................: 255.255.255.255
            Default Gateway.................:
            NetBIOS over Tcpip..............: Enabled


<span data-ttu-id="3f988-307">If you are having trouble connecting to a virtual machine over P2S, use 'ipconfig' to check the IPv4 address assigned to the Ethernet adapter on the computer from which you are connecting.</span><span class="sxs-lookup"><span data-stu-id="3f988-307">If you are having trouble connecting to a virtual machine over P2S, use 'ipconfig' to check the IPv4 address assigned to the Ethernet adapter on the computer from which you are connecting.</span></span> <span data-ttu-id="3f988-308">If the IP address is within the address range of the VNet that you are connecting to, or within the address range of your VPNClientAddressPool, this is referred to as an overlapping address space.</span><span class="sxs-lookup"><span data-stu-id="3f988-308">If the IP address is within the address range of the VNet that you are connecting to, or within the address range of your VPNClientAddressPool, this is referred to as an overlapping address space.</span></span> <span data-ttu-id="3f988-309">When your address space overlaps in this way, the network traffic doesn't reach Azure, it stays on the local network.</span><span class="sxs-lookup"><span data-stu-id="3f988-309">When your address space overlaps in this way, the network traffic doesn't reach Azure, it stays on the local network.</span></span> <span data-ttu-id="3f988-310">If your network address spaces don't overlap and you still can't connect to your VM, see [Troubleshoot Remote Desktop connections to a VM](../virtual-machines/windows/troubleshoot-rdp-connection.md).</span><span class="sxs-lookup"><span data-stu-id="3f988-310">If your network address spaces don't overlap and you still can't connect to your VM, see [Troubleshoot Remote Desktop connections to a VM](../virtual-machines/windows/troubleshoot-rdp-connection.md).</span></span>

## <a name="add"></a><span data-ttu-id="3f988-311">Add or remove trusted root certificates</span><span class="sxs-lookup"><span data-stu-id="3f988-311">Add or remove trusted root certificates</span></span>
<span data-ttu-id="3f988-312">You can add and remove trusted root certificates from Azure.</span><span class="sxs-lookup"><span data-stu-id="3f988-312">You can add and remove trusted root certificates from Azure.</span></span> <span data-ttu-id="3f988-313">When you remove a trusted certificate, the client certificates that were generated from the root certificate can't connect to Azure via Point-to-Site.</span><span class="sxs-lookup"><span data-stu-id="3f988-313">When you remove a trusted certificate, the client certificates that were generated from the root certificate can't connect to Azure via Point-to-Site.</span></span> <span data-ttu-id="3f988-314">If you want clients to connect, you need to install a new client certificate that is generated from a certificate that is trusted in Azure.</span><span class="sxs-lookup"><span data-stu-id="3f988-314">If you want clients to connect, you need to install a new client certificate that is generated from a certificate that is trusted in Azure.</span></span>

### <a name="to-add-a-trusted-root-certificate"></a><span data-ttu-id="3f988-315">To add a trusted root certificate</span><span class="sxs-lookup"><span data-stu-id="3f988-315">To add a trusted root certificate</span></span>

<span data-ttu-id="3f988-316">You can add up to 20 trusted root certificate .cer files to Azure.</span><span class="sxs-lookup"><span data-stu-id="3f988-316">You can add up to 20 trusted root certificate .cer files to Azure.</span></span> <span data-ttu-id="3f988-317">For instructions, see the section [Upload a trusted root certificate](#uploadfile) in this article.</span><span class="sxs-lookup"><span data-stu-id="3f988-317">For instructions, see the section [Upload a trusted root certificate](#uploadfile) in this article.</span></span>

### <a name="to-remove-a-trusted-root-certificate"></a><span data-ttu-id="3f988-318">To remove a trusted root certificate</span><span class="sxs-lookup"><span data-stu-id="3f988-318">To remove a trusted root certificate</span></span>

1. <span data-ttu-id="3f988-319">To remove a trusted root certificate, navigate to the **Point-to-site configuration** blade for your virtual network gateway.</span><span class="sxs-lookup"><span data-stu-id="3f988-319">To remove a trusted root certificate, navigate to the **Point-to-site configuration** blade for your virtual network gateway.</span></span>
2. <span data-ttu-id="3f988-320">In the **Root certificate** section of the blade, locate the certificate that you want to remove.</span><span class="sxs-lookup"><span data-stu-id="3f988-320">In the **Root certificate** section of the blade, locate the certificate that you want to remove.</span></span>
3. <span data-ttu-id="3f988-321">Click the ellipsis next to the certificate, and then click 'Remove'.</span><span class="sxs-lookup"><span data-stu-id="3f988-321">Click the ellipsis next to the certificate, and then click 'Remove'.</span></span>

## <a name="revokeclient"></a><span data-ttu-id="3f988-322">Revoke a client certificate</span><span class="sxs-lookup"><span data-stu-id="3f988-322">Revoke a client certificate</span></span>
<span data-ttu-id="3f988-323">You can revoke client certificates.</span><span class="sxs-lookup"><span data-stu-id="3f988-323">You can revoke client certificates.</span></span> <span data-ttu-id="3f988-324">The certificate revocation list allows you to selectively deny Point-to-Site connectivity based on individual client certificates.</span><span class="sxs-lookup"><span data-stu-id="3f988-324">The certificate revocation list allows you to selectively deny Point-to-Site connectivity based on individual client certificates.</span></span> <span data-ttu-id="3f988-325">This differs from removing a trusted root certificate.</span><span class="sxs-lookup"><span data-stu-id="3f988-325">This differs from removing a trusted root certificate.</span></span> <span data-ttu-id="3f988-326">If you remove a trusted root certificate .cer from Azure, it revokes the access for all client certificates generated/signed by the revoked root certificate.</span><span class="sxs-lookup"><span data-stu-id="3f988-326">If you remove a trusted root certificate .cer from Azure, it revokes the access for all client certificates generated/signed by the revoked root certificate.</span></span> <span data-ttu-id="3f988-327">Revoking a client certificate, rather than the root certificate, allows the other certificates that were generated from the root certificate to continue to be used for authentication.</span><span class="sxs-lookup"><span data-stu-id="3f988-327">Revoking a client certificate, rather than the root certificate, allows the other certificates that were generated from the root certificate to continue to be used for authentication.</span></span>

<span data-ttu-id="3f988-328">The common practice is to use the root certificate to manage access at team or organization levels, while using revoked client certificates for fine-grained access control on individual users.</span><span class="sxs-lookup"><span data-stu-id="3f988-328">The common practice is to use the root certificate to manage access at team or organization levels, while using revoked client certificates for fine-grained access control on individual users.</span></span>

### <a name="to-revoke-a-client-certificate"></a><span data-ttu-id="3f988-329">To revoke a client certificate</span><span class="sxs-lookup"><span data-stu-id="3f988-329">To revoke a client certificate</span></span>

<span data-ttu-id="3f988-330">You can revoke a client certificate by adding the thumbprint to the revocation list.</span><span class="sxs-lookup"><span data-stu-id="3f988-330">You can revoke a client certificate by adding the thumbprint to the revocation list.</span></span>

1. <span data-ttu-id="3f988-331">Retrieve the client certificate thumbprint.</span><span class="sxs-lookup"><span data-stu-id="3f988-331">Retrieve the client certificate thumbprint.</span></span> <span data-ttu-id="3f988-332">For more information, see [How to retrieve the Thumbprint of a Certificate](https://msdn.microsoft.com/library/ms734695.aspx).</span><span class="sxs-lookup"><span data-stu-id="3f988-332">For more information, see [How to retrieve the Thumbprint of a Certificate](https://msdn.microsoft.com/library/ms734695.aspx).</span></span>
2. <span data-ttu-id="3f988-333">Copy the information to a text editor and remove all spaces so that it is a continuous string.</span><span class="sxs-lookup"><span data-stu-id="3f988-333">Copy the information to a text editor and remove all spaces so that it is a continuous string.</span></span>
3. <span data-ttu-id="3f988-334">Navigate to the virtual network gateway **Point-to-site-configuration** blade.</span><span class="sxs-lookup"><span data-stu-id="3f988-334">Navigate to the virtual network gateway **Point-to-site-configuration** blade.</span></span> <span data-ttu-id="3f988-335">This is the same blade that you used to [upload a trusted root certificate](#uploadfile).</span><span class="sxs-lookup"><span data-stu-id="3f988-335">This is the same blade that you used to [upload a trusted root certificate](#uploadfile).</span></span>
4. <span data-ttu-id="3f988-336">In the **Revoked certificates** section, input a friendly name for the certificate (it doesn't have to be the certificate CN).</span><span class="sxs-lookup"><span data-stu-id="3f988-336">In the **Revoked certificates** section, input a friendly name for the certificate (it doesn't have to be the certificate CN).</span></span>
5. <span data-ttu-id="3f988-337">Copy and paste the thumbprint string to the **Thumbprint** field.</span><span class="sxs-lookup"><span data-stu-id="3f988-337">Copy and paste the thumbprint string to the **Thumbprint** field.</span></span>
6. <span data-ttu-id="3f988-338">The thumbprint will validate is automatically added to the revocation list.</span><span class="sxs-lookup"><span data-stu-id="3f988-338">The thumbprint will validate is automatically added to the revocation list.</span></span> <span data-ttu-id="3f988-339">A message appears on the screen that the list is updating.</span><span class="sxs-lookup"><span data-stu-id="3f988-339">A message appears on the screen that the list is updating.</span></span> 
7. <span data-ttu-id="3f988-340">After updating has completed, the certificate can no longer be used to connect.</span><span class="sxs-lookup"><span data-stu-id="3f988-340">After updating has completed, the certificate can no longer be used to connect.</span></span> <span data-ttu-id="3f988-341">Clients that try to connect using this certificate receive a message saying that the certificate is no longer valid.</span><span class="sxs-lookup"><span data-stu-id="3f988-341">Clients that try to connect using this certificate receive a message saying that the certificate is no longer valid.</span></span>

## <a name="faq"></a><span data-ttu-id="3f988-342">Point-to-Site FAQ</span><span class="sxs-lookup"><span data-stu-id="3f988-342">Point-to-Site FAQ</span></span>

[!INCLUDE [Point-to-Site FAQ](../../includes/vpn-gateway-point-to-site-faq-include.md)]

## <a name="next-steps"></a><span data-ttu-id="3f988-343">Next steps</span><span class="sxs-lookup"><span data-stu-id="3f988-343">Next steps</span></span>
<span data-ttu-id="3f988-344">Once your connection is complete, you can add virtual machines to your virtual networks.</span><span class="sxs-lookup"><span data-stu-id="3f988-344">Once your connection is complete, you can add virtual machines to your virtual networks.</span></span> <span data-ttu-id="3f988-345">For more information, see [Virtual Machines](https://docs.microsoft.com/azure/#pivot=services&panel=Compute).</span><span class="sxs-lookup"><span data-stu-id="3f988-345">For more information, see [Virtual Machines](https://docs.microsoft.com/azure/#pivot=services&panel=Compute).</span></span> <span data-ttu-id="3f988-346">To understand more about networking and virtual machines, see [Azure and Linux VM network overview](../virtual-machines/linux/azure-vm-network-overview.md).</span><span class="sxs-lookup"><span data-stu-id="3f988-346">To understand more about networking and virtual machines, see [Azure and Linux VM network overview](../virtual-machines/linux/azure-vm-network-overview.md).</span></span>











