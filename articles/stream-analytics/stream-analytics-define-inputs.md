---
title: 'Data connection: Data stream inputs from an event stream | Microsoft Docs'
description: Learn about setting up a data connection to Stream Analytics called 'inputs'. Inputs include a data stream from events, and also reference data.
keywords: data stream, data connection, event stream
services: stream-analytics
documentationcenter: ''
author: jeffstokes72
manager: jhubbard
editor: cgronlun
ms.assetid: 8155823c-9dd8-4a6b-8393-34452d299b68
ms.service: stream-analytics
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: data-services
ms.date: 03/28/2017
ms.author: jeffstok
ms.openlocfilehash: 2c87bc43eabdf9adbf90e95933f7198454249f77
ms.sourcegitcommit: 5b9d839c0c0a94b293fdafe1d6e5429506c07e05
ms.translationtype: HT
ms.contentlocale: nl-NL
ms.lasthandoff: 08/02/2018
ms.locfileid: "44549131"
---
# <a name="data-connection-learn-about-data-stream-inputs-from-events-to-stream-analytics"></a><span data-ttu-id="1274b-105">Data connection: Learn about data stream inputs from events to Stream Analytics</span><span class="sxs-lookup"><span data-stu-id="1274b-105">Data connection: Learn about data stream inputs from events to Stream Analytics</span></span>
<span data-ttu-id="1274b-106">The data connection to Stream Analytics is a data stream of events from a data source.</span><span class="sxs-lookup"><span data-stu-id="1274b-106">The data connection to Stream Analytics is a data stream of events from a data source.</span></span> <span data-ttu-id="1274b-107">This is called an "input."</span><span class="sxs-lookup"><span data-stu-id="1274b-107">This is called an "input."</span></span> <span data-ttu-id="1274b-108">Stream Analytics has first-class integration with Azure data stream sources Event Hub, IoT Hub, and Blob storage that can be from the same or different Azure subscription as your analytics job.</span><span class="sxs-lookup"><span data-stu-id="1274b-108">Stream Analytics has first-class integration with Azure data stream sources Event Hub, IoT Hub, and Blob storage that can be from the same or different Azure subscription as your analytics job.</span></span>

## <a name="data-input-types-data-stream-and-reference-data"></a><span data-ttu-id="1274b-109">Data input types: Data stream and reference data</span><span class="sxs-lookup"><span data-stu-id="1274b-109">Data input types: Data stream and reference data</span></span>
<span data-ttu-id="1274b-110">As data is pushed to a data source, it is consumed by the Stream Analytics job and processed in real time.</span><span class="sxs-lookup"><span data-stu-id="1274b-110">As data is pushed to a data source, it is consumed by the Stream Analytics job and processed in real time.</span></span> <span data-ttu-id="1274b-111">Inputs are divided into two distinct types: data stream inputs and reference data inputs.</span><span class="sxs-lookup"><span data-stu-id="1274b-111">Inputs are divided into two distinct types: data stream inputs and reference data inputs.</span></span>

### <a name="data-stream-inputs"></a><span data-ttu-id="1274b-112">Data stream inputs</span><span class="sxs-lookup"><span data-stu-id="1274b-112">Data stream inputs</span></span>
<span data-ttu-id="1274b-113">A data stream is unbounded sequence of events coming over time.</span><span class="sxs-lookup"><span data-stu-id="1274b-113">A data stream is unbounded sequence of events coming over time.</span></span> <span data-ttu-id="1274b-114">Stream Analytics jobs must include at least one data stream input to be consumed and transformed by the job.</span><span class="sxs-lookup"><span data-stu-id="1274b-114">Stream Analytics jobs must include at least one data stream input to be consumed and transformed by the job.</span></span> <span data-ttu-id="1274b-115">Blob storage, Event Hubs, and IoT Hubs are supported as data stream input sources.</span><span class="sxs-lookup"><span data-stu-id="1274b-115">Blob storage, Event Hubs, and IoT Hubs are supported as data stream input sources.</span></span> <span data-ttu-id="1274b-116">Event Hubs are used to collect event streams from multiple devices and services, such as social media activity feeds, stock trade information or data from sensors.</span><span class="sxs-lookup"><span data-stu-id="1274b-116">Event Hubs are used to collect event streams from multiple devices and services, such as social media activity feeds, stock trade information or data from sensors.</span></span> <span data-ttu-id="1274b-117">IoT Hubs are optimized to collect data from connected devices in Internet of Things (IoT) scenarios.</span><span class="sxs-lookup"><span data-stu-id="1274b-117">IoT Hubs are optimized to collect data from connected devices in Internet of Things (IoT) scenarios.</span></span>  <span data-ttu-id="1274b-118">Blob storage can be used as an input source for ingesting bulk data as a stream.</span><span class="sxs-lookup"><span data-stu-id="1274b-118">Blob storage can be used as an input source for ingesting bulk data as a stream.</span></span>  

### <a name="reference-data"></a><span data-ttu-id="1274b-119">Reference data</span><span class="sxs-lookup"><span data-stu-id="1274b-119">Reference data</span></span>
<span data-ttu-id="1274b-120">Stream Analytics supports a second type of input known as reference data.</span><span class="sxs-lookup"><span data-stu-id="1274b-120">Stream Analytics supports a second type of input known as reference data.</span></span> <span data-ttu-id="1274b-121">This is auxiliary data which is either static or slowly changing over time and is typically used for performing correlation and look-ups.</span><span class="sxs-lookup"><span data-stu-id="1274b-121">This is auxiliary data which is either static or slowly changing over time and is typically used for performing correlation and look-ups.</span></span> <span data-ttu-id="1274b-122">Azure Blob storage is currently the only supported input source for reference data.</span><span class="sxs-lookup"><span data-stu-id="1274b-122">Azure Blob storage is currently the only supported input source for reference data.</span></span> <span data-ttu-id="1274b-123">Reference data source blobs are limited to 100MB in size.</span><span class="sxs-lookup"><span data-stu-id="1274b-123">Reference data source blobs are limited to 100MB in size.</span></span>
<span data-ttu-id="1274b-124">To learn how to create reference data inputs, see [Use Reference Data](stream-analytics-use-reference-data.md)</span><span class="sxs-lookup"><span data-stu-id="1274b-124">To learn how to create reference data inputs, see [Use Reference Data](stream-analytics-use-reference-data.md)</span></span>  

## <a name="create-a-data-stream-input-with-an-event-hub"></a><span data-ttu-id="1274b-125">Create a data stream input with an Event Hub</span><span class="sxs-lookup"><span data-stu-id="1274b-125">Create a data stream input with an Event Hub</span></span>
<span data-ttu-id="1274b-126">[Azure Event Hubs](https://azure.microsoft.com/services/event-hubs/) are highly scalable publish-subscribe event ingestor.</span><span class="sxs-lookup"><span data-stu-id="1274b-126">[Azure Event Hubs](https://azure.microsoft.com/services/event-hubs/) are highly scalable publish-subscribe event ingestor.</span></span> <span data-ttu-id="1274b-127">It can collect millions of events per second, so that you can process and analyze the massive amounts of data produced by your connected devices and applications.</span><span class="sxs-lookup"><span data-stu-id="1274b-127">It can collect millions of events per second, so that you can process and analyze the massive amounts of data produced by your connected devices and applications.</span></span> <span data-ttu-id="1274b-128">It is one of the most commonly used inputs for Stream Analytics.</span><span class="sxs-lookup"><span data-stu-id="1274b-128">It is one of the most commonly used inputs for Stream Analytics.</span></span> <span data-ttu-id="1274b-129">Event Hubs and Stream Analytics together provide customers an end to end solution for real time analytics.</span><span class="sxs-lookup"><span data-stu-id="1274b-129">Event Hubs and Stream Analytics together provide customers an end to end solution for real time analytics.</span></span> <span data-ttu-id="1274b-130">Event Hubs allow customers to feed events into Azure in real time, and Stream Analytics jobs can process them in real time.</span><span class="sxs-lookup"><span data-stu-id="1274b-130">Event Hubs allow customers to feed events into Azure in real time, and Stream Analytics jobs can process them in real time.</span></span> <span data-ttu-id="1274b-131">For example, customers can send web clicks, sensor readings, online log events to Event Hubs, and create Stream Analytics jobs to use Event Hubs as the input data streams for real time filtering, aggregating and correlation.</span><span class="sxs-lookup"><span data-stu-id="1274b-131">For example, customers can send web clicks, sensor readings, online log events to Event Hubs, and create Stream Analytics jobs to use Event Hubs as the input data streams for real time filtering, aggregating and correlation.</span></span>

<span data-ttu-id="1274b-132">It is important to note that the default timestamp of events coming from Event Hubs in Stream Analytics is the timestamp that the event arrived in Event Hub which is EventEnqueuedUtcTime.</span><span class="sxs-lookup"><span data-stu-id="1274b-132">It is important to note that the default timestamp of events coming from Event Hubs in Stream Analytics is the timestamp that the event arrived in Event Hub which is EventEnqueuedUtcTime.</span></span> <span data-ttu-id="1274b-133">To process the data as a stream using a timestamp in the event payload, the [TIMESTAMP BY](https://msdn.microsoft.com/library/azure/dn834998.aspx) keyword must be used.</span><span class="sxs-lookup"><span data-stu-id="1274b-133">To process the data as a stream using a timestamp in the event payload, the [TIMESTAMP BY](https://msdn.microsoft.com/library/azure/dn834998.aspx) keyword must be used.</span></span>

### <a name="consumer-groups"></a><span data-ttu-id="1274b-134">Consumer groups</span><span class="sxs-lookup"><span data-stu-id="1274b-134">Consumer groups</span></span>
<span data-ttu-id="1274b-135">Each Stream Analytics Event Hub input should be configured to have its own consumer group.</span><span class="sxs-lookup"><span data-stu-id="1274b-135">Each Stream Analytics Event Hub input should be configured to have its own consumer group.</span></span> <span data-ttu-id="1274b-136">When a job contains a self-join or multiple inputs, some input may be read by more than one reader downstream, which impacts the number of readers in a single consumer group.</span><span class="sxs-lookup"><span data-stu-id="1274b-136">When a job contains a self-join or multiple inputs, some input may be read by more than one reader downstream, which impacts the number of readers in a single consumer group.</span></span> <span data-ttu-id="1274b-137">To avoid exceeding Event Hub limit of 5 readers per consumer group per partition, it is a best practice to designate a consumer group for each Stream Analytics job.</span><span class="sxs-lookup"><span data-stu-id="1274b-137">To avoid exceeding Event Hub limit of 5 readers per consumer group per partition, it is a best practice to designate a consumer group for each Stream Analytics job.</span></span> <span data-ttu-id="1274b-138">Note that there is also a limit of 20 consumer groups per Event Hub.</span><span class="sxs-lookup"><span data-stu-id="1274b-138">Note that there is also a limit of 20 consumer groups per Event Hub.</span></span> <span data-ttu-id="1274b-139">For details, see the [Event Hubs Programming Guide](../event-hubs/event-hubs-programming-guide.md).</span><span class="sxs-lookup"><span data-stu-id="1274b-139">For details, see the [Event Hubs Programming Guide](../event-hubs/event-hubs-programming-guide.md).</span></span>

### <a name="configure-event-hub-as-an-input-data-stream"></a><span data-ttu-id="1274b-140">Configure Event Hub as an input data stream</span><span class="sxs-lookup"><span data-stu-id="1274b-140">Configure Event Hub as an input data stream</span></span>
<span data-ttu-id="1274b-141">The table below explains each property in the Event Hub input tab with its description:</span><span class="sxs-lookup"><span data-stu-id="1274b-141">The table below explains each property in the Event Hub input tab with its description:</span></span>

| <span data-ttu-id="1274b-142">PROPERTY NAME</span><span class="sxs-lookup"><span data-stu-id="1274b-142">PROPERTY NAME</span></span> | <span data-ttu-id="1274b-143">DESCRIPTION</span><span class="sxs-lookup"><span data-stu-id="1274b-143">DESCRIPTION</span></span> |
| --- | --- |
| <span data-ttu-id="1274b-144">Input Alias</span><span class="sxs-lookup"><span data-stu-id="1274b-144">Input Alias</span></span> |<span data-ttu-id="1274b-145">A friendly name that will be used in the job query to reference this input</span><span class="sxs-lookup"><span data-stu-id="1274b-145">A friendly name that will be used in the job query to reference this input</span></span> |
| <span data-ttu-id="1274b-146">Service Bus Namespace</span><span class="sxs-lookup"><span data-stu-id="1274b-146">Service Bus Namespace</span></span> |<span data-ttu-id="1274b-147">A Service Bus namespace is a container for a set of messaging entities.</span><span class="sxs-lookup"><span data-stu-id="1274b-147">A Service Bus namespace is a container for a set of messaging entities.</span></span> <span data-ttu-id="1274b-148">When you created a new Event Hub, you also created a Service Bus namespace.</span><span class="sxs-lookup"><span data-stu-id="1274b-148">When you created a new Event Hub, you also created a Service Bus namespace.</span></span> |
| <span data-ttu-id="1274b-149">Event Hub</span><span class="sxs-lookup"><span data-stu-id="1274b-149">Event Hub</span></span> |<span data-ttu-id="1274b-150">The name of your Event Hub input.</span><span class="sxs-lookup"><span data-stu-id="1274b-150">The name of your Event Hub input.</span></span> |
| <span data-ttu-id="1274b-151">Event Hub Policy Name</span><span class="sxs-lookup"><span data-stu-id="1274b-151">Event Hub Policy Name</span></span> |<span data-ttu-id="1274b-152">The shared access policy, which can be created on the Event Hub Configure tab. Each shared access policy will have a name, permissions that you set, and access keys.</span><span class="sxs-lookup"><span data-stu-id="1274b-152">The shared access policy, which can be created on the Event Hub Configure tab. Each shared access policy will have a name, permissions that you set, and access keys.</span></span> |
| <span data-ttu-id="1274b-153">Event Hub Policy Key</span><span class="sxs-lookup"><span data-stu-id="1274b-153">Event Hub Policy Key</span></span> |<span data-ttu-id="1274b-154">The Shared Access key used to authenticate access to the Service Bus namespace.</span><span class="sxs-lookup"><span data-stu-id="1274b-154">The Shared Access key used to authenticate access to the Service Bus namespace.</span></span> |
| <span data-ttu-id="1274b-155">Event Hub Consumer Group (Optional)</span><span class="sxs-lookup"><span data-stu-id="1274b-155">Event Hub Consumer Group (Optional)</span></span> |<span data-ttu-id="1274b-156">The Consumer Group to ingest data from the Event Hub.</span><span class="sxs-lookup"><span data-stu-id="1274b-156">The Consumer Group to ingest data from the Event Hub.</span></span> <span data-ttu-id="1274b-157">If not specified, Stream Analytics jobs will use the Default Consumer Group to ingest data from the Event Hub.</span><span class="sxs-lookup"><span data-stu-id="1274b-157">If not specified, Stream Analytics jobs will use the Default Consumer Group to ingest data from the Event Hub.</span></span> <span data-ttu-id="1274b-158">It is recommended to use a distinct consumer Group for each Stream Analytics job.</span><span class="sxs-lookup"><span data-stu-id="1274b-158">It is recommended to use a distinct consumer Group for each Stream Analytics job.</span></span> |
| <span data-ttu-id="1274b-159">Event Serialization Format</span><span class="sxs-lookup"><span data-stu-id="1274b-159">Event Serialization Format</span></span> |<span data-ttu-id="1274b-160">To make sure your queries work the way you expect, Stream Analytics needs to know which serialization format (JSON, CSV, or Avro) you're using for incoming data streams.</span><span class="sxs-lookup"><span data-stu-id="1274b-160">To make sure your queries work the way you expect, Stream Analytics needs to know which serialization format (JSON, CSV, or Avro) you're using for incoming data streams.</span></span> |
| <span data-ttu-id="1274b-161">Encoding</span><span class="sxs-lookup"><span data-stu-id="1274b-161">Encoding</span></span> |<span data-ttu-id="1274b-162">UTF-8 is the only supported encoding format at this time.</span><span class="sxs-lookup"><span data-stu-id="1274b-162">UTF-8 is the only supported encoding format at this time.</span></span> |

<span data-ttu-id="1274b-163">When your data is coming from an Event Hub source, you can access to few metadata fields in your Stream Analytics query.</span><span class="sxs-lookup"><span data-stu-id="1274b-163">When your data is coming from an Event Hub source, you can access to few metadata fields in your Stream Analytics query.</span></span> <span data-ttu-id="1274b-164">The table below lists the fields and their description.</span><span class="sxs-lookup"><span data-stu-id="1274b-164">The table below lists the fields and their description.</span></span>

| <span data-ttu-id="1274b-165">PROPERTY</span><span class="sxs-lookup"><span data-stu-id="1274b-165">PROPERTY</span></span> | <span data-ttu-id="1274b-166">DESCRIPTION</span><span class="sxs-lookup"><span data-stu-id="1274b-166">DESCRIPTION</span></span> |
| --- | --- |
| <span data-ttu-id="1274b-167">EventProcessedUtcTime</span><span class="sxs-lookup"><span data-stu-id="1274b-167">EventProcessedUtcTime</span></span> |<span data-ttu-id="1274b-168">The date and time that the event was processed by Stream Analytics.</span><span class="sxs-lookup"><span data-stu-id="1274b-168">The date and time that the event was processed by Stream Analytics.</span></span> |
| <span data-ttu-id="1274b-169">EventEnqueuedUtcTime</span><span class="sxs-lookup"><span data-stu-id="1274b-169">EventEnqueuedUtcTime</span></span> |<span data-ttu-id="1274b-170">The date and time that the event was received by Event Hubs.</span><span class="sxs-lookup"><span data-stu-id="1274b-170">The date and time that the event was received by Event Hubs.</span></span> |
| <span data-ttu-id="1274b-171">PartitionId</span><span class="sxs-lookup"><span data-stu-id="1274b-171">PartitionId</span></span> |<span data-ttu-id="1274b-172">The zero-based partition ID for the input adapter.</span><span class="sxs-lookup"><span data-stu-id="1274b-172">The zero-based partition ID for the input adapter.</span></span> |

<span data-ttu-id="1274b-173">For example, you may write a query like the following:</span><span class="sxs-lookup"><span data-stu-id="1274b-173">For example, you may write a query like the following:</span></span>

````
SELECT
    EventProcessedUtcTime,
    EventEnqueuedUtcTime,
    PartitionId
FROM Input
````

## <a name="create-an-iot-hub-data-stream-input"></a><span data-ttu-id="1274b-174">Create an IoT Hub data stream input</span><span class="sxs-lookup"><span data-stu-id="1274b-174">Create an IoT Hub data stream input</span></span>
<span data-ttu-id="1274b-175">Azure Iot Hub is a highly scalable publish-subscribe event ingestor optimized for IoT scenarios.</span><span class="sxs-lookup"><span data-stu-id="1274b-175">Azure Iot Hub is a highly scalable publish-subscribe event ingestor optimized for IoT scenarios.</span></span>
<span data-ttu-id="1274b-176">It is important to note that the default timestamp of events coming from IoT Hubs in Stream Analytics is the timestamp that the event arrived in IoT Hub which is EventEnqueuedUtcTime.</span><span class="sxs-lookup"><span data-stu-id="1274b-176">It is important to note that the default timestamp of events coming from IoT Hubs in Stream Analytics is the timestamp that the event arrived in IoT Hub which is EventEnqueuedUtcTime.</span></span> <span data-ttu-id="1274b-177">To process the data as a stream using a timestamp in the event payload, the [TIMESTAMP BY](https://msdn.microsoft.com/library/azure/dn834998.aspx) keyword must be used.</span><span class="sxs-lookup"><span data-stu-id="1274b-177">To process the data as a stream using a timestamp in the event payload, the [TIMESTAMP BY](https://msdn.microsoft.com/library/azure/dn834998.aspx) keyword must be used.</span></span>

> [!NOTE]
> <span data-ttu-id="1274b-178">Only messages sent with a DeviceClient property can be processed.</span><span class="sxs-lookup"><span data-stu-id="1274b-178">Only messages sent with a DeviceClient property can be processed.</span></span>
> 
> 

### <a name="consumer-groups"></a><span data-ttu-id="1274b-179">Consumer groups</span><span class="sxs-lookup"><span data-stu-id="1274b-179">Consumer groups</span></span>
<span data-ttu-id="1274b-180">Each Stream Analytics IoT Hub input should be configured to have its own consumer group.</span><span class="sxs-lookup"><span data-stu-id="1274b-180">Each Stream Analytics IoT Hub input should be configured to have its own consumer group.</span></span> <span data-ttu-id="1274b-181">When a job contains a self-join or multiple inputs, some input may be read by more than one reader downstream, which impacts the number of readers in a single consumer group.</span><span class="sxs-lookup"><span data-stu-id="1274b-181">When a job contains a self-join or multiple inputs, some input may be read by more than one reader downstream, which impacts the number of readers in a single consumer group.</span></span> <span data-ttu-id="1274b-182">To avoid exceeding IoT Hub limit of 5 readers per consumer group per partition, it is a best practice to designate a consumer group for each Stream Analytics job.</span><span class="sxs-lookup"><span data-stu-id="1274b-182">To avoid exceeding IoT Hub limit of 5 readers per consumer group per partition, it is a best practice to designate a consumer group for each Stream Analytics job.</span></span>

### <a name="configure-iot-hub-as-an-data-stream-input"></a><span data-ttu-id="1274b-183">Configure IoT Hub as an data stream input</span><span class="sxs-lookup"><span data-stu-id="1274b-183">Configure IoT Hub as an data stream input</span></span>
<span data-ttu-id="1274b-184">The table below explains each property in the IoT Hub input tab with its description:</span><span class="sxs-lookup"><span data-stu-id="1274b-184">The table below explains each property in the IoT Hub input tab with its description:</span></span>

| <span data-ttu-id="1274b-185">PROPERTY NAME</span><span class="sxs-lookup"><span data-stu-id="1274b-185">PROPERTY NAME</span></span> | <span data-ttu-id="1274b-186">DESCRIPTION</span><span class="sxs-lookup"><span data-stu-id="1274b-186">DESCRIPTION</span></span> |
| --- | --- |
| <span data-ttu-id="1274b-187">Input Alias</span><span class="sxs-lookup"><span data-stu-id="1274b-187">Input Alias</span></span> |<span data-ttu-id="1274b-188">A friendly name that will be used in the job query to reference this input.</span><span class="sxs-lookup"><span data-stu-id="1274b-188">A friendly name that will be used in the job query to reference this input.</span></span> |
| <span data-ttu-id="1274b-189">IoT Hub</span><span class="sxs-lookup"><span data-stu-id="1274b-189">IoT Hub</span></span> |<span data-ttu-id="1274b-190">An IoT Hub is a container for a set of messaging entities.</span><span class="sxs-lookup"><span data-stu-id="1274b-190">An IoT Hub is a container for a set of messaging entities.</span></span> |
| <span data-ttu-id="1274b-191">Endpoint</span><span class="sxs-lookup"><span data-stu-id="1274b-191">Endpoint</span></span> |<span data-ttu-id="1274b-192">The name of your IoT Hub endpoint.</span><span class="sxs-lookup"><span data-stu-id="1274b-192">The name of your IoT Hub endpoint.</span></span> |
| <span data-ttu-id="1274b-193">Shared Access Policy Name</span><span class="sxs-lookup"><span data-stu-id="1274b-193">Shared Access Policy Name</span></span> |<span data-ttu-id="1274b-194">The shared access policy to give access to the IoT Hub.</span><span class="sxs-lookup"><span data-stu-id="1274b-194">The shared access policy to give access to the IoT Hub.</span></span> <span data-ttu-id="1274b-195">Each shared access policy will have a name, permissions that you set, and access keys.</span><span class="sxs-lookup"><span data-stu-id="1274b-195">Each shared access policy will have a name, permissions that you set, and access keys.</span></span> |
| <span data-ttu-id="1274b-196">Shared Access Policy Key</span><span class="sxs-lookup"><span data-stu-id="1274b-196">Shared Access Policy Key</span></span> |<span data-ttu-id="1274b-197">The Shared Access key used to authenticate access to the IoT Hub.</span><span class="sxs-lookup"><span data-stu-id="1274b-197">The Shared Access key used to authenticate access to the IoT Hub.</span></span> |
| <span data-ttu-id="1274b-198">Consumer Group (Optional)</span><span class="sxs-lookup"><span data-stu-id="1274b-198">Consumer Group (Optional)</span></span> |<span data-ttu-id="1274b-199">The Consumer Group to ingest data from the IoT Hub.</span><span class="sxs-lookup"><span data-stu-id="1274b-199">The Consumer Group to ingest data from the IoT Hub.</span></span> <span data-ttu-id="1274b-200">If not specified, Stream Analytics jobs will use the Default Consumer Group to ingest data from the IoT Hub.</span><span class="sxs-lookup"><span data-stu-id="1274b-200">If not specified, Stream Analytics jobs will use the Default Consumer Group to ingest data from the IoT Hub.</span></span> <span data-ttu-id="1274b-201">It is recommended to use a distinct consumer Group for each Stream Analytics job.</span><span class="sxs-lookup"><span data-stu-id="1274b-201">It is recommended to use a distinct consumer Group for each Stream Analytics job.</span></span> |
| <span data-ttu-id="1274b-202">Event Serialization Format</span><span class="sxs-lookup"><span data-stu-id="1274b-202">Event Serialization Format</span></span> |<span data-ttu-id="1274b-203">To make sure your queries work the way you expect, Stream Analytics needs to know which serialization format (JSON, CSV, or Avro) you're using for incoming data streams.</span><span class="sxs-lookup"><span data-stu-id="1274b-203">To make sure your queries work the way you expect, Stream Analytics needs to know which serialization format (JSON, CSV, or Avro) you're using for incoming data streams.</span></span> |
| <span data-ttu-id="1274b-204">Encoding</span><span class="sxs-lookup"><span data-stu-id="1274b-204">Encoding</span></span> |<span data-ttu-id="1274b-205">UTF-8 is the only supported encoding format at this time.</span><span class="sxs-lookup"><span data-stu-id="1274b-205">UTF-8 is the only supported encoding format at this time.</span></span> |

<span data-ttu-id="1274b-206">When your data is coming from an IoT Hub source, you can access to few metadata fields in your Stream Analytics query.</span><span class="sxs-lookup"><span data-stu-id="1274b-206">When your data is coming from an IoT Hub source, you can access to few metadata fields in your Stream Analytics query.</span></span> <span data-ttu-id="1274b-207">The table below lists the fields and their description.</span><span class="sxs-lookup"><span data-stu-id="1274b-207">The table below lists the fields and their description.</span></span>

| <span data-ttu-id="1274b-208">PROPERTY</span><span class="sxs-lookup"><span data-stu-id="1274b-208">PROPERTY</span></span> | <span data-ttu-id="1274b-209">DESCRIPTION</span><span class="sxs-lookup"><span data-stu-id="1274b-209">DESCRIPTION</span></span> |
| --- | --- |
| <span data-ttu-id="1274b-210">EventProcessedUtcTime</span><span class="sxs-lookup"><span data-stu-id="1274b-210">EventProcessedUtcTime</span></span> |<span data-ttu-id="1274b-211">The date and time that the event was processed.</span><span class="sxs-lookup"><span data-stu-id="1274b-211">The date and time that the event was processed.</span></span> |
| <span data-ttu-id="1274b-212">EventEnqueuedUtcTime</span><span class="sxs-lookup"><span data-stu-id="1274b-212">EventEnqueuedUtcTime</span></span> |<span data-ttu-id="1274b-213">The date and time that the event was received by the IoT Hub.</span><span class="sxs-lookup"><span data-stu-id="1274b-213">The date and time that the event was received by the IoT Hub.</span></span> |
| <span data-ttu-id="1274b-214">PartitionId</span><span class="sxs-lookup"><span data-stu-id="1274b-214">PartitionId</span></span> |<span data-ttu-id="1274b-215">The zero-based partition ID for the input adapter.</span><span class="sxs-lookup"><span data-stu-id="1274b-215">The zero-based partition ID for the input adapter.</span></span> |
| <span data-ttu-id="1274b-216">IoTHub.MessageId</span><span class="sxs-lookup"><span data-stu-id="1274b-216">IoTHub.MessageId</span></span> |<span data-ttu-id="1274b-217">Used to correlate two-way communication in IoT Hub.</span><span class="sxs-lookup"><span data-stu-id="1274b-217">Used to correlate two-way communication in IoT Hub.</span></span> |
| <span data-ttu-id="1274b-218">IoTHub.CorrelationId</span><span class="sxs-lookup"><span data-stu-id="1274b-218">IoTHub.CorrelationId</span></span> |<span data-ttu-id="1274b-219">Used in message responses and feedback in IoT Hub.</span><span class="sxs-lookup"><span data-stu-id="1274b-219">Used in message responses and feedback in IoT Hub.</span></span> |
| <span data-ttu-id="1274b-220">IoTHub.ConnectionDeviceId</span><span class="sxs-lookup"><span data-stu-id="1274b-220">IoTHub.ConnectionDeviceId</span></span> |<span data-ttu-id="1274b-221">The authenticated id used to send this message, stamped on servicebound messages by IoT Hub.</span><span class="sxs-lookup"><span data-stu-id="1274b-221">The authenticated id used to send this message, stamped on servicebound messages by IoT Hub.</span></span> |
| <span data-ttu-id="1274b-222">IoTHub.ConnectionDeviceGenerationId</span><span class="sxs-lookup"><span data-stu-id="1274b-222">IoTHub.ConnectionDeviceGenerationId</span></span> |<span data-ttu-id="1274b-223">The generationId of the authenticated device used to send this message, Stamped on servicebound messages by IoT Hub.</span><span class="sxs-lookup"><span data-stu-id="1274b-223">The generationId of the authenticated device used to send this message, Stamped on servicebound messages by IoT Hub.</span></span> |
| <span data-ttu-id="1274b-224">IoTHub.EnqueuedTime</span><span class="sxs-lookup"><span data-stu-id="1274b-224">IoTHub.EnqueuedTime</span></span> |<span data-ttu-id="1274b-225">Time when the message was received by IoT Hub.</span><span class="sxs-lookup"><span data-stu-id="1274b-225">Time when the message was received by IoT Hub.</span></span> |
| <span data-ttu-id="1274b-226">IoTHub.StreamId</span><span class="sxs-lookup"><span data-stu-id="1274b-226">IoTHub.StreamId</span></span> |<span data-ttu-id="1274b-227">Custom event property added by the sender device.</span><span class="sxs-lookup"><span data-stu-id="1274b-227">Custom event property added by the sender device.</span></span> |

## <a name="create-a-blob-storage-data-stream-input"></a><span data-ttu-id="1274b-228">Create a Blob storage data stream input</span><span class="sxs-lookup"><span data-stu-id="1274b-228">Create a Blob storage data stream input</span></span>
<span data-ttu-id="1274b-229">For scenarios with large amounts of unstructured data to store in the cloud, Blob storage offers a cost-effective and scalable solution.</span><span class="sxs-lookup"><span data-stu-id="1274b-229">For scenarios with large amounts of unstructured data to store in the cloud, Blob storage offers a cost-effective and scalable solution.</span></span> <span data-ttu-id="1274b-230">Data in [Blob storage](https://azure.microsoft.com/services/storage/blobs/) is generally considered data “at rest” but it can be processed as a data stream by Stream Analytics.</span><span class="sxs-lookup"><span data-stu-id="1274b-230">Data in [Blob storage](https://azure.microsoft.com/services/storage/blobs/) is generally considered data “at rest” but it can be processed as a data stream by Stream Analytics.</span></span> <span data-ttu-id="1274b-231">One common scenario for Blob storage inputs with Stream Analytics is log processing, where telemetry is captured from a system and needs to be parsed and processed to extract meaningful data.</span><span class="sxs-lookup"><span data-stu-id="1274b-231">One common scenario for Blob storage inputs with Stream Analytics is log processing, where telemetry is captured from a system and needs to be parsed and processed to extract meaningful data.</span></span>

<span data-ttu-id="1274b-232">It is important to note that the default timestamp of Blob storage events in Stream Analytics is the timestamp that the blob was last modified which *isBlobLastModifiedUtcTime*.</span><span class="sxs-lookup"><span data-stu-id="1274b-232">It is important to note that the default timestamp of Blob storage events in Stream Analytics is the timestamp that the blob was last modified which *isBlobLastModifiedUtcTime*.</span></span> <span data-ttu-id="1274b-233">To process the data as a stream using a timestamp in the event payload, the [TIMESTAMP BY](https://msdn.microsoft.com/library/azure/dn834998.aspx) keyword must be used.</span><span class="sxs-lookup"><span data-stu-id="1274b-233">To process the data as a stream using a timestamp in the event payload, the [TIMESTAMP BY](https://msdn.microsoft.com/library/azure/dn834998.aspx) keyword must be used.</span></span>

<span data-ttu-id="1274b-234">Also note that CSV formatted inputs **require** a header row to define fields for the data set.</span><span class="sxs-lookup"><span data-stu-id="1274b-234">Also note that CSV formatted inputs **require** a header row to define fields for the data set.</span></span> <span data-ttu-id="1274b-235">Further header row fields must all be **unique**.</span><span class="sxs-lookup"><span data-stu-id="1274b-235">Further header row fields must all be **unique**.</span></span>

> [!NOTE]
> <span data-ttu-id="1274b-236">Stream Analytics does not support adding content to an existing blob.</span><span class="sxs-lookup"><span data-stu-id="1274b-236">Stream Analytics does not support adding content to an existing blob.</span></span> <span data-ttu-id="1274b-237">Stream Analytics will only view a blob once and any changes done after this read will not be processed.</span><span class="sxs-lookup"><span data-stu-id="1274b-237">Stream Analytics will only view a blob once and any changes done after this read will not be processed.</span></span> <span data-ttu-id="1274b-238">The best practice is to upload all the data once and not add any additional events to the blob store.</span><span class="sxs-lookup"><span data-stu-id="1274b-238">The best practice is to upload all the data once and not add any additional events to the blob store.</span></span>
> 
> 

<span data-ttu-id="1274b-239">The table below explains each property in the Blob storage input tab with its description:</span><span class="sxs-lookup"><span data-stu-id="1274b-239">The table below explains each property in the Blob storage input tab with its description:</span></span>

<table>
<tbody>
<tr>
<td><span data-ttu-id="1274b-240">PROPERTY NAME</span><span class="sxs-lookup"><span data-stu-id="1274b-240">PROPERTY NAME</span></span></td>
<td><span data-ttu-id="1274b-241">DESCRIPTION</span><span class="sxs-lookup"><span data-stu-id="1274b-241">DESCRIPTION</span></span></td>
</tr>
<tr>
<td><span data-ttu-id="1274b-242">Input Alias</span><span class="sxs-lookup"><span data-stu-id="1274b-242">Input Alias</span></span></td>
<td><span data-ttu-id="1274b-243">A friendly name that will be used in the job query to reference this input.</span><span class="sxs-lookup"><span data-stu-id="1274b-243">A friendly name that will be used in the job query to reference this input.</span></span></td>
</tr>
<tr>
<td><span data-ttu-id="1274b-244">Storage Account</span><span class="sxs-lookup"><span data-stu-id="1274b-244">Storage Account</span></span></td>
<td><span data-ttu-id="1274b-245">The name of the storage account where your blob files are located.</span><span class="sxs-lookup"><span data-stu-id="1274b-245">The name of the storage account where your blob files are located.</span></span></td>
</tr>
<tr>
<td><span data-ttu-id="1274b-246">Storage Account Key</span><span class="sxs-lookup"><span data-stu-id="1274b-246">Storage Account Key</span></span></td>
<td><span data-ttu-id="1274b-247">The secret key associated with the storage account.</span><span class="sxs-lookup"><span data-stu-id="1274b-247">The secret key associated with the storage account.</span></span></td>
</tr>
<tr>
<td><span data-ttu-id="1274b-248">Storage Container</span><span class="sxs-lookup"><span data-stu-id="1274b-248">Storage Container</span></span>
</td>
<td><span data-ttu-id="1274b-249">Containers provide a logical grouping for blobs stored in the Microsoft Azure Blob service.</span><span class="sxs-lookup"><span data-stu-id="1274b-249">Containers provide a logical grouping for blobs stored in the Microsoft Azure Blob service.</span></span> <span data-ttu-id="1274b-250">When you upload a blob to the Blob service, you must specify a container for that blob.</span><span class="sxs-lookup"><span data-stu-id="1274b-250">When you upload a blob to the Blob service, you must specify a container for that blob.</span></span></td>
</tr>
<tr>
<td><span data-ttu-id="1274b-251">Path Prefix Pattern [optional]</span><span class="sxs-lookup"><span data-stu-id="1274b-251">Path Prefix Pattern [optional]</span></span></td>
<td><span data-ttu-id="1274b-252">The file path used to locate your blobs within the specified container.</span><span class="sxs-lookup"><span data-stu-id="1274b-252">The file path used to locate your blobs within the specified container.</span></span>
<span data-ttu-id="1274b-253">Within the path, you may choose to specify one or more instances of the following 3 variables:</span><span class="sxs-lookup"><span data-stu-id="1274b-253">Within the path, you may choose to specify one or more instances of the following 3 variables:</span></span><BR><span data-ttu-id="1274b-254">{date}, {time},</span><span class="sxs-lookup"><span data-stu-id="1274b-254">{date}, {time},</span></span><BR><span data-ttu-id="1274b-255">{partition}</span><span class="sxs-lookup"><span data-stu-id="1274b-255">{partition}</span></span><BR><span data-ttu-id="1274b-256">Example 1: cluster1/logs/{date}/{time}/{partition}</span><span class="sxs-lookup"><span data-stu-id="1274b-256">Example 1: cluster1/logs/{date}/{time}/{partition}</span></span><BR><span data-ttu-id="1274b-257">Example 2: cluster1/logs/{date}</span><span class="sxs-lookup"><span data-stu-id="1274b-257">Example 2: cluster1/logs/{date}</span></span><P><span data-ttu-id="1274b-258">Note that "\*" is not an allowed value for pathprefix.</span><span class="sxs-lookup"><span data-stu-id="1274b-258">Note that "\*" is not an allowed value for pathprefix.</span></span> <span data-ttu-id="1274b-259">Only valid <a HREF="https://msdn.microsoft.com/library/azure/dd135715.aspx">Azure blob characters</a> are allowed.</span><span class="sxs-lookup"><span data-stu-id="1274b-259">Only valid <a HREF="https://msdn.microsoft.com/library/azure/dd135715.aspx">Azure blob characters</a> are allowed.</span></span></td>
</tr>
<tr>
<td><span data-ttu-id="1274b-260">Date Format [optional]</span><span class="sxs-lookup"><span data-stu-id="1274b-260">Date Format [optional]</span></span></td>
<td><span data-ttu-id="1274b-261">If the date token is used in the prefix path, you can select the date format in which your files are organized.</span><span class="sxs-lookup"><span data-stu-id="1274b-261">If the date token is used in the prefix path, you can select the date format in which your files are organized.</span></span> <span data-ttu-id="1274b-262">Example: YYYY/MM/DD</span><span class="sxs-lookup"><span data-stu-id="1274b-262">Example: YYYY/MM/DD</span></span></td>
</tr>
<tr>
<td><span data-ttu-id="1274b-263">Time Format [optional]</span><span class="sxs-lookup"><span data-stu-id="1274b-263">Time Format [optional]</span></span></td>
<td><span data-ttu-id="1274b-264">If the time token is used in the prefix path, specify the time format in which your files are organized.</span><span class="sxs-lookup"><span data-stu-id="1274b-264">If the time token is used in the prefix path, specify the time format in which your files are organized.</span></span> <span data-ttu-id="1274b-265">Currently the only supported value is HH.</span><span class="sxs-lookup"><span data-stu-id="1274b-265">Currently the only supported value is HH.</span></span></td>
</tr>
<tr>
<td><span data-ttu-id="1274b-266">Event Serialization Format</span><span class="sxs-lookup"><span data-stu-id="1274b-266">Event Serialization Format</span></span></td>
<td><span data-ttu-id="1274b-267">To make sure your queries work the way you expect, Stream Analytics needs to know which serialization format (JSON, CSV, or Avro) you're using for incoming data streams.</span><span class="sxs-lookup"><span data-stu-id="1274b-267">To make sure your queries work the way you expect, Stream Analytics needs to know which serialization format (JSON, CSV, or Avro) you're using for incoming data streams.</span></span></td>
</tr>
<tr>
<td><span data-ttu-id="1274b-268">Encoding</span><span class="sxs-lookup"><span data-stu-id="1274b-268">Encoding</span></span></td>
<td><span data-ttu-id="1274b-269">For CSV and JSON, UTF-8 is the only supported encoding format at this time.</span><span class="sxs-lookup"><span data-stu-id="1274b-269">For CSV and JSON, UTF-8 is the only supported encoding format at this time.</span></span></td>
</tr>
<tr>
<td><span data-ttu-id="1274b-270">Delimiter</span><span class="sxs-lookup"><span data-stu-id="1274b-270">Delimiter</span></span></td>
<td><span data-ttu-id="1274b-271">Stream Analytics supports a number of common delimiters for serializing data in CSV format.</span><span class="sxs-lookup"><span data-stu-id="1274b-271">Stream Analytics supports a number of common delimiters for serializing data in CSV format.</span></span> <span data-ttu-id="1274b-272">Supported values are comma, semicolon, space, tab and vertical bar.</span><span class="sxs-lookup"><span data-stu-id="1274b-272">Supported values are comma, semicolon, space, tab and vertical bar.</span></span></td>
</tr>
</tbody>
</table>

<span data-ttu-id="1274b-273">When your data is coming from a Blob storage source, you can access a few metadata fields in your Stream Analytics query.</span><span class="sxs-lookup"><span data-stu-id="1274b-273">When your data is coming from a Blob storage source, you can access a few metadata fields in your Stream Analytics query.</span></span> <span data-ttu-id="1274b-274">The table below lists the fields and their description.</span><span class="sxs-lookup"><span data-stu-id="1274b-274">The table below lists the fields and their description.</span></span>

| <span data-ttu-id="1274b-275">PROPERTY</span><span class="sxs-lookup"><span data-stu-id="1274b-275">PROPERTY</span></span> | <span data-ttu-id="1274b-276">DESCRIPTION</span><span class="sxs-lookup"><span data-stu-id="1274b-276">DESCRIPTION</span></span> |
| --- | --- |
| <span data-ttu-id="1274b-277">BlobName</span><span class="sxs-lookup"><span data-stu-id="1274b-277">BlobName</span></span> |<span data-ttu-id="1274b-278">The name of the input blob that the event came from.</span><span class="sxs-lookup"><span data-stu-id="1274b-278">The name of the input blob that the event came from.</span></span> |
| <span data-ttu-id="1274b-279">EventProcessedUtcTime</span><span class="sxs-lookup"><span data-stu-id="1274b-279">EventProcessedUtcTime</span></span> |<span data-ttu-id="1274b-280">The date and time that the event was processed by Stream Analytics.</span><span class="sxs-lookup"><span data-stu-id="1274b-280">The date and time that the event was processed by Stream Analytics.</span></span> |
| <span data-ttu-id="1274b-281">BlobLastModifiedUtcTime</span><span class="sxs-lookup"><span data-stu-id="1274b-281">BlobLastModifiedUtcTime</span></span> |<span data-ttu-id="1274b-282">The date and time that the blob was last modified.</span><span class="sxs-lookup"><span data-stu-id="1274b-282">The date and time that the blob was last modified.</span></span> |
| <span data-ttu-id="1274b-283">PartitionId</span><span class="sxs-lookup"><span data-stu-id="1274b-283">PartitionId</span></span> |<span data-ttu-id="1274b-284">The zero-based partition ID for the input adapter.</span><span class="sxs-lookup"><span data-stu-id="1274b-284">The zero-based partition ID for the input adapter.</span></span> |

<span data-ttu-id="1274b-285">For example, you may write a query like the following:</span><span class="sxs-lookup"><span data-stu-id="1274b-285">For example, you may write a query like the following:</span></span>

````
SELECT
    BlobName,
    EventProcessedUtcTime,
    BlobLastModifiedUtcTime
FROM Input
````


## <a name="get-help"></a><span data-ttu-id="1274b-286">Get help</span><span class="sxs-lookup"><span data-stu-id="1274b-286">Get help</span></span>
<span data-ttu-id="1274b-287">For further assistance, try our [Azure Stream Analytics forum](https://social.msdn.microsoft.com/Forums/en-US/home?forum=AzureStreamAnalytics)</span><span class="sxs-lookup"><span data-stu-id="1274b-287">For further assistance, try our [Azure Stream Analytics forum](https://social.msdn.microsoft.com/Forums/en-US/home?forum=AzureStreamAnalytics)</span></span>

## <a name="next-steps"></a><span data-ttu-id="1274b-288">Next steps</span><span class="sxs-lookup"><span data-stu-id="1274b-288">Next steps</span></span>
<span data-ttu-id="1274b-289">You've learned about data connection options in Azure for your Stream Analytics jobs.</span><span class="sxs-lookup"><span data-stu-id="1274b-289">You've learned about data connection options in Azure for your Stream Analytics jobs.</span></span> <span data-ttu-id="1274b-290">To learn more about Stream Analytics, see:</span><span class="sxs-lookup"><span data-stu-id="1274b-290">To learn more about Stream Analytics, see:</span></span>

* [<span data-ttu-id="1274b-291">Get started using Azure Stream Analytics</span><span class="sxs-lookup"><span data-stu-id="1274b-291">Get started using Azure Stream Analytics</span></span>](stream-analytics-get-started.md)
* [<span data-ttu-id="1274b-292">Scale Azure Stream Analytics jobs</span><span class="sxs-lookup"><span data-stu-id="1274b-292">Scale Azure Stream Analytics jobs</span></span>](stream-analytics-scale-jobs.md)
* [<span data-ttu-id="1274b-293">Azure Stream Analytics Query Language Reference</span><span class="sxs-lookup"><span data-stu-id="1274b-293">Azure Stream Analytics Query Language Reference</span></span>](https://msdn.microsoft.com/library/azure/dn834998.aspx)
* [<span data-ttu-id="1274b-294">Azure Stream Analytics Management REST API Reference</span><span class="sxs-lookup"><span data-stu-id="1274b-294">Azure Stream Analytics Management REST API Reference</span></span>](https://msdn.microsoft.com/library/azure/dn835031.aspx)

<!--Link references-->
[stream.analytics.developer.guide]: ../stream-analytics-developer-guide.md
[stream.analytics.scale.jobs]: stream-analytics-scale-jobs.md
[stream.analytics.introduction]: stream-analytics-introduction.md
[stream.analytics.get.started]: stream-analytics-get-started.md
[stream.analytics.query.language.reference]: http://go.microsoft.com/fwlink/?LinkID=513299
[stream.analytics.rest.api.reference]: http://go.microsoft.com/fwlink/?LinkId=517301
