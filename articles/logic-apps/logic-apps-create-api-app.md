---
title: Create an API for Logic Apps
description: Creating a custom API to use with Logic Apps
author: jeffhollan
manager: anneta
editor: ''
services: logic-apps
documentationcenter: ''
ms.assetid: bd229179-7199-4aab-bae0-1baf072c7659
ms.service: logic-apps
ms.workload: integration
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 10/18/2016
ms.author: jehollan
ms.openlocfilehash: 3fd558835fb36ef70ac97419727b5133d0741d7e
ms.sourcegitcommit: 5b9d839c0c0a94b293fdafe1d6e5429506c07e05
ms.translationtype: HT
ms.contentlocale: nl-NL
ms.lasthandoff: 08/02/2018
ms.locfileid: "44549361"
---
# <a name="creating-a-custom-api-to-use-with-logic-apps"></a><span data-ttu-id="83588-103">Creating a custom API to use with Logic Apps</span><span class="sxs-lookup"><span data-stu-id="83588-103">Creating a custom API to use with Logic Apps</span></span>
<span data-ttu-id="83588-104">If you want to extend the Logic Apps platform, there are many ways you can call into APIs or systems that aren't available as one of our many out-of-the-box connectors.</span><span class="sxs-lookup"><span data-stu-id="83588-104">If you want to extend the Logic Apps platform, there are many ways you can call into APIs or systems that aren't available as one of our many out-of-the-box connectors.</span></span>  <span data-ttu-id="83588-105">One of those ways to create an API App you can call from within a Logic App workflow.</span><span class="sxs-lookup"><span data-stu-id="83588-105">One of those ways to create an API App you can call from within a Logic App workflow.</span></span>

## <a name="helpful-tools"></a><span data-ttu-id="83588-106">Helpful Tools</span><span class="sxs-lookup"><span data-stu-id="83588-106">Helpful Tools</span></span>
<span data-ttu-id="83588-107">For APIs to work best with Logic Apps, we recommend generating a [swagger](http://swagger.io) doc detailing the supported operations and parameters for your API.</span><span class="sxs-lookup"><span data-stu-id="83588-107">For APIs to work best with Logic Apps, we recommend generating a [swagger](http://swagger.io) doc detailing the supported operations and parameters for your API.</span></span>  <span data-ttu-id="83588-108">There are many libraries (like [Swashbuckle](https://github.com/domaindrivendev/Swashbuckle)) that will automatically generate the swagger for you.</span><span class="sxs-lookup"><span data-stu-id="83588-108">There are many libraries (like [Swashbuckle](https://github.com/domaindrivendev/Swashbuckle)) that will automatically generate the swagger for you.</span></span>  <span data-ttu-id="83588-109">You can also use [TRex](https://github.com/nihaue/TRex) to help annotate the swagger to work well with Logic Apps (display names, property types, etc.).</span><span class="sxs-lookup"><span data-stu-id="83588-109">You can also use [TRex](https://github.com/nihaue/TRex) to help annotate the swagger to work well with Logic Apps (display names, property types, etc.).</span></span>  <span data-ttu-id="83588-110">For some samples of API Apps built for Logic Apps, be sure to check out our [GitHub repository](http://github.com/logicappsio) or [blog](http://aka.ms/logicappsblog).</span><span class="sxs-lookup"><span data-stu-id="83588-110">For some samples of API Apps built for Logic Apps, be sure to check out our [GitHub repository](http://github.com/logicappsio) or [blog](http://aka.ms/logicappsblog).</span></span>

## <a name="actions"></a><span data-ttu-id="83588-111">Actions</span><span class="sxs-lookup"><span data-stu-id="83588-111">Actions</span></span>
<span data-ttu-id="83588-112">The basic action for a Logic App is a controller that will accept an HTTP Request and return a response (usually 200).</span><span class="sxs-lookup"><span data-stu-id="83588-112">The basic action for a Logic App is a controller that will accept an HTTP Request and return a response (usually 200).</span></span>  <span data-ttu-id="83588-113">However there are different patterns you can follow to extend actions based on your needs.</span><span class="sxs-lookup"><span data-stu-id="83588-113">However there are different patterns you can follow to extend actions based on your needs.</span></span>

<span data-ttu-id="83588-114">By default the Logic App engine will timeout a request after 1 minute.</span><span class="sxs-lookup"><span data-stu-id="83588-114">By default the Logic App engine will timeout a request after 1 minute.</span></span>  <span data-ttu-id="83588-115">However, you can have your API execute on actions that take longer, and have the engine wait for completion, by following either an async or webhook pattern detailed below.</span><span class="sxs-lookup"><span data-stu-id="83588-115">However, you can have your API execute on actions that take longer, and have the engine wait for completion, by following either an async or webhook pattern detailed below.</span></span>

<span data-ttu-id="83588-116">For standard actions, simply write an HTTP request method in your API which is exposed via swagger.</span><span class="sxs-lookup"><span data-stu-id="83588-116">For standard actions, simply write an HTTP request method in your API which is exposed via swagger.</span></span>  <span data-ttu-id="83588-117">You can see samples of API apps that work with Logic Apps in our [GitHub repository](https://github.com/logicappsio).</span><span class="sxs-lookup"><span data-stu-id="83588-117">You can see samples of API apps that work with Logic Apps in our [GitHub repository](https://github.com/logicappsio).</span></span>  <span data-ttu-id="83588-118">Below are ways to accomplish common patterns with a custom connector.</span><span class="sxs-lookup"><span data-stu-id="83588-118">Below are ways to accomplish common patterns with a custom connector.</span></span>

### <a name="long-running-actions---async-pattern"></a><span data-ttu-id="83588-119">Long Running Actions - Async Pattern</span><span class="sxs-lookup"><span data-stu-id="83588-119">Long Running Actions - Async Pattern</span></span>
<span data-ttu-id="83588-120">When running a long step or task, the first thing you need to do is make sure the engine knows you haven’t timed out. You also need to communicate with the engine how it will know when you are finished with the task, and finally, you need to return relevant data to the engine so it can continue with the workflow.</span><span class="sxs-lookup"><span data-stu-id="83588-120">When running a long step or task, the first thing you need to do is make sure the engine knows you haven’t timed out. You also need to communicate with the engine how it will know when you are finished with the task, and finally, you need to return relevant data to the engine so it can continue with the workflow.</span></span> <span data-ttu-id="83588-121">You can complete that via an API by following the flow below.</span><span class="sxs-lookup"><span data-stu-id="83588-121">You can complete that via an API by following the flow below.</span></span> <span data-ttu-id="83588-122">These steps are from the point-of-view of the custom API:</span><span class="sxs-lookup"><span data-stu-id="83588-122">These steps are from the point-of-view of the custom API:</span></span>

1. <span data-ttu-id="83588-123">When a request is received, immediately return a response (before work is done).</span><span class="sxs-lookup"><span data-stu-id="83588-123">When a request is received, immediately return a response (before work is done).</span></span> <span data-ttu-id="83588-124">This response will be a `202 ACCEPTED` response, letting the engine know you got the data, accepted the payload, and are now processing.</span><span class="sxs-lookup"><span data-stu-id="83588-124">This response will be a `202 ACCEPTED` response, letting the engine know you got the data, accepted the payload, and are now processing.</span></span> <span data-ttu-id="83588-125">The 202 response should contain the following headers:</span><span class="sxs-lookup"><span data-stu-id="83588-125">The 202 response should contain the following headers:</span></span> 
   
   * <span data-ttu-id="83588-126">`location` header (required): This is an absolute path to the URL Logic Apps can use to check the status of the job.</span><span class="sxs-lookup"><span data-stu-id="83588-126">`location` header (required): This is an absolute path to the URL Logic Apps can use to check the status of the job.</span></span>
   * <span data-ttu-id="83588-127">`retry-after` (optional, will default to 20 for actions).</span><span class="sxs-lookup"><span data-stu-id="83588-127">`retry-after` (optional, will default to 20 for actions).</span></span> <span data-ttu-id="83588-128">This is the number of seconds the engine should wait before polling the location header URL to check status.</span><span class="sxs-lookup"><span data-stu-id="83588-128">This is the number of seconds the engine should wait before polling the location header URL to check status.</span></span>
2. <span data-ttu-id="83588-129">When a job status is checked, perform the following checks:</span><span class="sxs-lookup"><span data-stu-id="83588-129">When a job status is checked, perform the following checks:</span></span> 
   
   * <span data-ttu-id="83588-130">If the job is done: return a `200 OK` response, with the response payload.</span><span class="sxs-lookup"><span data-stu-id="83588-130">If the job is done: return a `200 OK` response, with the response payload.</span></span>
   * <span data-ttu-id="83588-131">If the job is still processing: return another `202 ACCEPTED` response, with the same headers as the initial response</span><span class="sxs-lookup"><span data-stu-id="83588-131">If the job is still processing: return another `202 ACCEPTED` response, with the same headers as the initial response</span></span>

<span data-ttu-id="83588-132">This pattern allows you to run extremely long tasks within a thread of your custom API, but keep an active connection alive with the Logic Apps engine so it doesn’t timeout or continue before work is completed.</span><span class="sxs-lookup"><span data-stu-id="83588-132">This pattern allows you to run extremely long tasks within a thread of your custom API, but keep an active connection alive with the Logic Apps engine so it doesn’t timeout or continue before work is completed.</span></span> <span data-ttu-id="83588-133">When adding this into your Logic App, it’s important to note you do not need do anything in your definition for the Logic App to continue to poll and check the status.</span><span class="sxs-lookup"><span data-stu-id="83588-133">When adding this into your Logic App, it’s important to note you do not need do anything in your definition for the Logic App to continue to poll and check the status.</span></span> <span data-ttu-id="83588-134">As soon as the engine sees a 202 ACCEPTED response with a valid location header, it will honor the async pattern and continue to poll the location header until a non-202 is returned.</span><span class="sxs-lookup"><span data-stu-id="83588-134">As soon as the engine sees a 202 ACCEPTED response with a valid location header, it will honor the async pattern and continue to poll the location header until a non-202 is returned.</span></span>

<span data-ttu-id="83588-135">You can see a sample of this pattern in GitHub [here](https://github.com/jeffhollan/LogicAppsAsyncResponseSample)</span><span class="sxs-lookup"><span data-stu-id="83588-135">You can see a sample of this pattern in GitHub [here](https://github.com/jeffhollan/LogicAppsAsyncResponseSample)</span></span>

### <a name="webhook-actions"></a><span data-ttu-id="83588-136">Webhook Actions</span><span class="sxs-lookup"><span data-stu-id="83588-136">Webhook Actions</span></span>
<span data-ttu-id="83588-137">During your workflow, you can have the Logic App pause and wait for a "callback" to continue.</span><span class="sxs-lookup"><span data-stu-id="83588-137">During your workflow, you can have the Logic App pause and wait for a "callback" to continue.</span></span>  <span data-ttu-id="83588-138">This callback comes in the form of an HTTP POST.</span><span class="sxs-lookup"><span data-stu-id="83588-138">This callback comes in the form of an HTTP POST.</span></span>  <span data-ttu-id="83588-139">To implement this pattern, you need to provide two endpoints on your controller: subscribe and unsubscribe.</span><span class="sxs-lookup"><span data-stu-id="83588-139">To implement this pattern, you need to provide two endpoints on your controller: subscribe and unsubscribe.</span></span>

<span data-ttu-id="83588-140">On 'subscribe', the Logic App will create and register a callback URL which your API can store and callback with ready as an HTTP POST.</span><span class="sxs-lookup"><span data-stu-id="83588-140">On 'subscribe', the Logic App will create and register a callback URL which your API can store and callback with ready as an HTTP POST.</span></span>  <span data-ttu-id="83588-141">Any content/headers will be passed into the Logic App and can be used within the remainder of the workflow.</span><span class="sxs-lookup"><span data-stu-id="83588-141">Any content/headers will be passed into the Logic App and can be used within the remainder of the workflow.</span></span>  <span data-ttu-id="83588-142">The Logic App engine will call the subscribe point on execution as soon as it hits that step.</span><span class="sxs-lookup"><span data-stu-id="83588-142">The Logic App engine will call the subscribe point on execution as soon as it hits that step.</span></span>

<span data-ttu-id="83588-143">If the run was cancelled, the Logic App engine will make a call to the 'unsubscribe' endpoint.</span><span class="sxs-lookup"><span data-stu-id="83588-143">If the run was cancelled, the Logic App engine will make a call to the 'unsubscribe' endpoint.</span></span>  <span data-ttu-id="83588-144">Your API can then unregister the callback URL as needed.</span><span class="sxs-lookup"><span data-stu-id="83588-144">Your API can then unregister the callback URL as needed.</span></span>

<span data-ttu-id="83588-145">Currently the Logic App Designer doesn't support discovering a webhook endpoint through swagger, so to use this type of action you must add the "Webhook" action and specify the URL, headers, and body of your request.</span><span class="sxs-lookup"><span data-stu-id="83588-145">Currently the Logic App Designer doesn't support discovering a webhook endpoint through swagger, so to use this type of action you must add the "Webhook" action and specify the URL, headers, and body of your request.</span></span>  <span data-ttu-id="83588-146">You can use the `@listCallbackUrl()` workflow function in any of those fields as needed to pass in the callback URL.</span><span class="sxs-lookup"><span data-stu-id="83588-146">You can use the `@listCallbackUrl()` workflow function in any of those fields as needed to pass in the callback URL.</span></span>

<span data-ttu-id="83588-147">You can see a sample of a webhook pattern in GitHub [here](https://github.com/jeffhollan/LogicAppTriggersExample/blob/master/LogicAppTriggers/Controllers/WebhookTriggerController.cs)</span><span class="sxs-lookup"><span data-stu-id="83588-147">You can see a sample of a webhook pattern in GitHub [here](https://github.com/jeffhollan/LogicAppTriggersExample/blob/master/LogicAppTriggers/Controllers/WebhookTriggerController.cs)</span></span>

## <a name="triggers"></a><span data-ttu-id="83588-148">Triggers</span><span class="sxs-lookup"><span data-stu-id="83588-148">Triggers</span></span>
<span data-ttu-id="83588-149">In addition to actions, you can have your custom API act as a trigger to a Logic App.</span><span class="sxs-lookup"><span data-stu-id="83588-149">In addition to actions, you can have your custom API act as a trigger to a Logic App.</span></span>  <span data-ttu-id="83588-150">There are two patterns you can follow below to trigger a Logic App:</span><span class="sxs-lookup"><span data-stu-id="83588-150">There are two patterns you can follow below to trigger a Logic App:</span></span>

### <a name="polling-triggers"></a><span data-ttu-id="83588-151">Polling Triggers</span><span class="sxs-lookup"><span data-stu-id="83588-151">Polling Triggers</span></span>
<span data-ttu-id="83588-152">Polling triggers act much like the Long Running Async actions above.</span><span class="sxs-lookup"><span data-stu-id="83588-152">Polling triggers act much like the Long Running Async actions above.</span></span>  <span data-ttu-id="83588-153">The Logic App engine will call the trigger endpoint after a certain period of time elapsed (dependent on SKU, 15 seconds for Premium, 1 minute for Standard, and 1 hour for Free).</span><span class="sxs-lookup"><span data-stu-id="83588-153">The Logic App engine will call the trigger endpoint after a certain period of time elapsed (dependent on SKU, 15 seconds for Premium, 1 minute for Standard, and 1 hour for Free).</span></span>

<span data-ttu-id="83588-154">If there is no data available, the trigger returns a `202 ACCEPTED` response, with a `location` and `retry-after` header.</span><span class="sxs-lookup"><span data-stu-id="83588-154">If there is no data available, the trigger returns a `202 ACCEPTED` response, with a `location` and `retry-after` header.</span></span>  <span data-ttu-id="83588-155">However, for triggers it is recommended the `location` header contains a query parameter of `triggerState`.</span><span class="sxs-lookup"><span data-stu-id="83588-155">However, for triggers it is recommended the `location` header contains a query parameter of `triggerState`.</span></span>  <span data-ttu-id="83588-156">This is some identifier for your API to know when the last time the Logic App fired.</span><span class="sxs-lookup"><span data-stu-id="83588-156">This is some identifier for your API to know when the last time the Logic App fired.</span></span>  <span data-ttu-id="83588-157">If there is data available, the trigger returns a `200 OK` response with the content payload.</span><span class="sxs-lookup"><span data-stu-id="83588-157">If there is data available, the trigger returns a `200 OK` response with the content payload.</span></span>  <span data-ttu-id="83588-158">This will fire the Logic App.</span><span class="sxs-lookup"><span data-stu-id="83588-158">This will fire the Logic App.</span></span>

<span data-ttu-id="83588-159">For example if I was polling to see if a file was available, you could build a polling trigger that would do the following:</span><span class="sxs-lookup"><span data-stu-id="83588-159">For example if I was polling to see if a file was available, you could build a polling trigger that would do the following:</span></span>

* <span data-ttu-id="83588-160">If a request was received with no triggerState the API would return a `202 ACCEPTED` with a `location` header that has a triggerState of the current time and a `retry-after` of 15.</span><span class="sxs-lookup"><span data-stu-id="83588-160">If a request was received with no triggerState the API would return a `202 ACCEPTED` with a `location` header that has a triggerState of the current time and a `retry-after` of 15.</span></span>
* <span data-ttu-id="83588-161">If a request was received with a triggerState:</span><span class="sxs-lookup"><span data-stu-id="83588-161">If a request was received with a triggerState:</span></span>
  * <span data-ttu-id="83588-162">Check to see if any files were added after the triggerState DateTime.</span><span class="sxs-lookup"><span data-stu-id="83588-162">Check to see if any files were added after the triggerState DateTime.</span></span> 
  * <span data-ttu-id="83588-163">If there is 1 file, return a `200 OK` response with the content payload, increment the triggerState to the DateTime of the file I returned, and set the `retry-after` to 15.</span><span class="sxs-lookup"><span data-stu-id="83588-163">If there is 1 file, return a `200 OK` response with the content payload, increment the triggerState to the DateTime of the file I returned, and set the `retry-after` to 15.</span></span>
  * <span data-ttu-id="83588-164">If there are multiple files, I can return 1 at a time with a `200 OK`, increment my triggerState in the `location` header, and set `retry-after` to 0.</span><span class="sxs-lookup"><span data-stu-id="83588-164">If there are multiple files, I can return 1 at a time with a `200 OK`, increment my triggerState in the `location` header, and set `retry-after` to 0.</span></span>  <span data-ttu-id="83588-165">This will let the engine know there is more data available and it will immediately request it at the `location` header specified.</span><span class="sxs-lookup"><span data-stu-id="83588-165">This will let the engine know there is more data available and it will immediately request it at the `location` header specified.</span></span>
  * <span data-ttu-id="83588-166">If there are no files available, return a `202 ACCEPTED` response, and leave the `location` triggerState the same.</span><span class="sxs-lookup"><span data-stu-id="83588-166">If there are no files available, return a `202 ACCEPTED` response, and leave the `location` triggerState the same.</span></span>  <span data-ttu-id="83588-167">Set `retry-after` to 15.</span><span class="sxs-lookup"><span data-stu-id="83588-167">Set `retry-after` to 15.</span></span>

<span data-ttu-id="83588-168">You can see a sample of a polling trigger in GitHub [here](https://github.com/jeffhollan/LogicAppTriggersExample/tree/master/LogicAppTriggers)</span><span class="sxs-lookup"><span data-stu-id="83588-168">You can see a sample of a polling trigger in GitHub [here](https://github.com/jeffhollan/LogicAppTriggersExample/tree/master/LogicAppTriggers)</span></span>

### <a name="webhook-triggers"></a><span data-ttu-id="83588-169">Webhook Triggers</span><span class="sxs-lookup"><span data-stu-id="83588-169">Webhook Triggers</span></span>
<span data-ttu-id="83588-170">Webhook triggers act much like Webhook Actions above.</span><span class="sxs-lookup"><span data-stu-id="83588-170">Webhook triggers act much like Webhook Actions above.</span></span>  <span data-ttu-id="83588-171">The Logic App engine will call the 'subscribe' endpoint whenever a webhook trigger is added and saved.</span><span class="sxs-lookup"><span data-stu-id="83588-171">The Logic App engine will call the 'subscribe' endpoint whenever a webhook trigger is added and saved.</span></span>  <span data-ttu-id="83588-172">Your API can register the webhook URL and call it via HTTP POST whenever data is available.</span><span class="sxs-lookup"><span data-stu-id="83588-172">Your API can register the webhook URL and call it via HTTP POST whenever data is available.</span></span>  <span data-ttu-id="83588-173">The content payload and headers will be passed into the Logic App run.</span><span class="sxs-lookup"><span data-stu-id="83588-173">The content payload and headers will be passed into the Logic App run.</span></span>

<span data-ttu-id="83588-174">If a webhook trigger is ever deleted (either the Logic App entirely, or just the webhook trigger), the engine will make a call to the 'unsubscribe' URL where your API can unregister the callback URL and stop any processes as needed.</span><span class="sxs-lookup"><span data-stu-id="83588-174">If a webhook trigger is ever deleted (either the Logic App entirely, or just the webhook trigger), the engine will make a call to the 'unsubscribe' URL where your API can unregister the callback URL and stop any processes as needed.</span></span>

<span data-ttu-id="83588-175">Currently the Logic App Designer doesn't support discovering a webhook trigger through swagger, so to use this type of action you must add the "Webhook" trigger and specify the URL, headers, and body of your request.</span><span class="sxs-lookup"><span data-stu-id="83588-175">Currently the Logic App Designer doesn't support discovering a webhook trigger through swagger, so to use this type of action you must add the "Webhook" trigger and specify the URL, headers, and body of your request.</span></span>  <span data-ttu-id="83588-176">You can use the `@listCallbackUrl()` workflow function in any of those fields as needed to pass in the callback URL.</span><span class="sxs-lookup"><span data-stu-id="83588-176">You can use the `@listCallbackUrl()` workflow function in any of those fields as needed to pass in the callback URL.</span></span>

<span data-ttu-id="83588-177">You can see a sample of a webhook trigger in GitHub [here](https://github.com/jeffhollan/LogicAppTriggersExample/tree/master/LogicAppTriggers)</span><span class="sxs-lookup"><span data-stu-id="83588-177">You can see a sample of a webhook trigger in GitHub [here](https://github.com/jeffhollan/LogicAppTriggersExample/tree/master/LogicAppTriggers)</span></span>

## <a name="publish-custom-connectors-to-azure"></a><span data-ttu-id="83588-178">Publish custom connectors to Azure</span><span class="sxs-lookup"><span data-stu-id="83588-178">Publish custom connectors to Azure</span></span>

<span data-ttu-id="83588-179">To make your custom API Apps public and available to use in Azure, submit your nominations to the [Microsoft Azure Certified program](https://azure.microsoft.com/marketplace/programs/certified/logic-apps/).</span><span class="sxs-lookup"><span data-stu-id="83588-179">To make your custom API Apps public and available to use in Azure, submit your nominations to the [Microsoft Azure Certified program](https://azure.microsoft.com/marketplace/programs/certified/logic-apps/).</span></span>
