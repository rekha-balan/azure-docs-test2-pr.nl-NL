---
title: Azure networking infrastructure guidelines - Linux | Microsoft Docs
description: Learn about the key design and implementation guidelines for deploying virtual networking in Azure infrastructure services.
documentationcenter: ''
services: virtual-machines-linux
author: iainfoulds
manager: timlt
editor: ''
tags: azure-resource-manager
ms.assetid: a7ebd5da-3c62-45e8-ad90-6c73a37ebeb1
ms.service: virtual-machines-linux
ms.workload: infrastructure-services
ms.tgt_pltfrm: vm-linux
ms.devlang: na
ms.topic: article
ms.date: 03/17/2017
ms.author: iainfou
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: 3f7af27c3fa836d75eec8fdc92e12dd498d9a9f7
ms.sourcegitcommit: 5b9d839c0c0a94b293fdafe1d6e5429506c07e05
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 08/02/2018
ms.locfileid: "44661591"
---
# <a name="azure-networking-infrastructure-guidelines-for-linux-vms"></a><span data-ttu-id="4d275-103">Azure networking infrastructure guidelines for Linux VMs</span><span class="sxs-lookup"><span data-stu-id="4d275-103">Azure networking infrastructure guidelines for Linux VMs</span></span>

[!INCLUDE [virtual-machines-linux-infrastructure-guidelines-intro](../../../includes/virtual-machines-linux-infrastructure-guidelines-intro.md)]

<span data-ttu-id="4d275-104">This article focuses on understanding the required planning steps for virtual networking within Azure and connectivity between existing on-prem environments.</span><span class="sxs-lookup"><span data-stu-id="4d275-104">This article focuses on understanding the required planning steps for virtual networking within Azure and connectivity between existing on-prem environments.</span></span>

## <a name="implementation-guidelines-for-virtual-networks"></a><span data-ttu-id="4d275-105">Implementation guidelines for virtual networks</span><span class="sxs-lookup"><span data-stu-id="4d275-105">Implementation guidelines for virtual networks</span></span>
<span data-ttu-id="4d275-106">Decisions:</span><span class="sxs-lookup"><span data-stu-id="4d275-106">Decisions:</span></span>

* <span data-ttu-id="4d275-107">What type of virtual network do you need to host your IT workload or infrastructure (cloud-only or cross-premises)?</span><span class="sxs-lookup"><span data-stu-id="4d275-107">What type of virtual network do you need to host your IT workload or infrastructure (cloud-only or cross-premises)?</span></span>
* <span data-ttu-id="4d275-108">For cross-premises virtual networks, how much address space do you need to host the subnets and VMs now and for reasonable expansion in the future?</span><span class="sxs-lookup"><span data-stu-id="4d275-108">For cross-premises virtual networks, how much address space do you need to host the subnets and VMs now and for reasonable expansion in the future?</span></span>
* <span data-ttu-id="4d275-109">Are you going to create centralized virtual networks or create individual virtual networks for each resource group?</span><span class="sxs-lookup"><span data-stu-id="4d275-109">Are you going to create centralized virtual networks or create individual virtual networks for each resource group?</span></span>

<span data-ttu-id="4d275-110">Tasks:</span><span class="sxs-lookup"><span data-stu-id="4d275-110">Tasks:</span></span>

* <span data-ttu-id="4d275-111">Define the address space for the virtual networks to be created.</span><span class="sxs-lookup"><span data-stu-id="4d275-111">Define the address space for the virtual networks to be created.</span></span>
* <span data-ttu-id="4d275-112">Define the set of subnets and the address space for each.</span><span class="sxs-lookup"><span data-stu-id="4d275-112">Define the set of subnets and the address space for each.</span></span>
* <span data-ttu-id="4d275-113">For cross-premises virtual networks, define the set of local network address spaces for the on-premises locations that the VMs in the virtual network need to reach.</span><span class="sxs-lookup"><span data-stu-id="4d275-113">For cross-premises virtual networks, define the set of local network address spaces for the on-premises locations that the VMs in the virtual network need to reach.</span></span>
* <span data-ttu-id="4d275-114">Work with on-premises networking team to ensure the appropriate routing is configured when creating cross-premises virtual networks.</span><span class="sxs-lookup"><span data-stu-id="4d275-114">Work with on-premises networking team to ensure the appropriate routing is configured when creating cross-premises virtual networks.</span></span>
* <span data-ttu-id="4d275-115">Create the virtual network using your naming convention.</span><span class="sxs-lookup"><span data-stu-id="4d275-115">Create the virtual network using your naming convention.</span></span>

## <a name="virtual-networks"></a><span data-ttu-id="4d275-116">Virtual networks</span><span class="sxs-lookup"><span data-stu-id="4d275-116">Virtual networks</span></span>
<span data-ttu-id="4d275-117">Virtual networks are necessary to support communications between virtual machines (VMs).</span><span class="sxs-lookup"><span data-stu-id="4d275-117">Virtual networks are necessary to support communications between virtual machines (VMs).</span></span> <span data-ttu-id="4d275-118">You can define subnets, custom IP address, DNS settings, security filtering, and load balancing, as with physical networks.</span><span class="sxs-lookup"><span data-stu-id="4d275-118">You can define subnets, custom IP address, DNS settings, security filtering, and load balancing, as with physical networks.</span></span> <span data-ttu-id="4d275-119">By using a [VPN Gateway](../../vpn-gateway/vpn-gateway-about-vpngateways.md) or [Express Route circuit](../../expressroute/expressroute-introduction.md), you can connect Azure virtual networks to your on-premises networks.</span><span class="sxs-lookup"><span data-stu-id="4d275-119">By using a [VPN Gateway](../../vpn-gateway/vpn-gateway-about-vpngateways.md) or [Express Route circuit](../../expressroute/expressroute-introduction.md), you can connect Azure virtual networks to your on-premises networks.</span></span> <span data-ttu-id="4d275-120">You can read more about [virtual networks and their components](../../virtual-network/virtual-networks-overview.md).</span><span class="sxs-lookup"><span data-stu-id="4d275-120">You can read more about [virtual networks and their components](../../virtual-network/virtual-networks-overview.md).</span></span>

<span data-ttu-id="4d275-121">By using Resource Groups, you have flexibility in how you design your virtual networking components.</span><span class="sxs-lookup"><span data-stu-id="4d275-121">By using Resource Groups, you have flexibility in how you design your virtual networking components.</span></span> <span data-ttu-id="4d275-122">VMs can connect to virtual networks outside of their own resource group.</span><span class="sxs-lookup"><span data-stu-id="4d275-122">VMs can connect to virtual networks outside of their own resource group.</span></span> <span data-ttu-id="4d275-123">A common design approach would be to create centralized resource groups that contain your core networking infrastructure that can be managed by a common team.</span><span class="sxs-lookup"><span data-stu-id="4d275-123">A common design approach would be to create centralized resource groups that contain your core networking infrastructure that can be managed by a common team.</span></span> <span data-ttu-id="4d275-124">VMs and their applications deployed to separate resource groups.</span><span class="sxs-lookup"><span data-stu-id="4d275-124">VMs and their applications deployed to separate resource groups.</span></span> <span data-ttu-id="4d275-125">This approach allows application owners access to the resource group that contains their VMs without opening up access to the configuration of the wider virtual networking resources.</span><span class="sxs-lookup"><span data-stu-id="4d275-125">This approach allows application owners access to the resource group that contains their VMs without opening up access to the configuration of the wider virtual networking resources.</span></span>

## <a name="site-connectivity"></a><span data-ttu-id="4d275-126">Site connectivity</span><span class="sxs-lookup"><span data-stu-id="4d275-126">Site connectivity</span></span>
### <a name="cloud-only-virtual-networks"></a><span data-ttu-id="4d275-127">Cloud-only virtual networks</span><span class="sxs-lookup"><span data-stu-id="4d275-127">Cloud-only virtual networks</span></span>
<span data-ttu-id="4d275-128">If on-premises users and computers do not require ongoing connectivity to VMs in an Azure virtual network, your virtual network design is straight forward:</span><span class="sxs-lookup"><span data-stu-id="4d275-128">If on-premises users and computers do not require ongoing connectivity to VMs in an Azure virtual network, your virtual network design is straight forward:</span></span>

![Basic cloud-only virtual network diagram](https://docstestmedia1.blob.core.windows.net/azure-media/articles/virtual-machines/linux/media/infrastructure-networking-guidelines/vnet01.png)

<span data-ttu-id="4d275-130">This approach is typically for Internet-facing workloads, such as an Internet-based web server.</span><span class="sxs-lookup"><span data-stu-id="4d275-130">This approach is typically for Internet-facing workloads, such as an Internet-based web server.</span></span> <span data-ttu-id="4d275-131">You can manage these VMs using SSH or point-to-site VPN connections.</span><span class="sxs-lookup"><span data-stu-id="4d275-131">You can manage these VMs using SSH or point-to-site VPN connections.</span></span>

<span data-ttu-id="4d275-132">Because they do not connect to your on-premises network, Azure-only virtual networks can use any portion of the private IP address space.</span><span class="sxs-lookup"><span data-stu-id="4d275-132">Because they do not connect to your on-premises network, Azure-only virtual networks can use any portion of the private IP address space.</span></span> <span data-ttu-id="4d275-133">The address space can be the same private space that is in use on-premises.</span><span class="sxs-lookup"><span data-stu-id="4d275-133">The address space can be the same private space that is in use on-premises.</span></span>

### <a name="cross-premises-virtual-networks"></a><span data-ttu-id="4d275-134">Cross-premises virtual networks</span><span class="sxs-lookup"><span data-stu-id="4d275-134">Cross-premises virtual networks</span></span>
<span data-ttu-id="4d275-135">If on-premises users and computers require ongoing connectivity to VMs in an Azure virtual network, create a cross-premises virtual network.</span><span class="sxs-lookup"><span data-stu-id="4d275-135">If on-premises users and computers require ongoing connectivity to VMs in an Azure virtual network, create a cross-premises virtual network.</span></span> <span data-ttu-id="4d275-136">Connect the virtual network to your on-premises network with an ExpressRoute or site-to-site VPN connection.</span><span class="sxs-lookup"><span data-stu-id="4d275-136">Connect the virtual network to your on-premises network with an ExpressRoute or site-to-site VPN connection.</span></span>

![Cross-premises virtual network diagram](https://docstestmedia1.blob.core.windows.net/azure-media/articles/virtual-machines/linux/media/infrastructure-networking-guidelines/vnet02.png)

<span data-ttu-id="4d275-138">In this configuration, the Azure virtual network is essentially a cloud-based extension of your on-premises network.</span><span class="sxs-lookup"><span data-stu-id="4d275-138">In this configuration, the Azure virtual network is essentially a cloud-based extension of your on-premises network.</span></span>

<span data-ttu-id="4d275-139">Because they connect to your on-premises network, cross-premises virtual networks must use a portion of the address space used by your organization that is unique.</span><span class="sxs-lookup"><span data-stu-id="4d275-139">Because they connect to your on-premises network, cross-premises virtual networks must use a portion of the address space used by your organization that is unique.</span></span> <span data-ttu-id="4d275-140">In the same way that different corporate locations are assigned a specific IP subnet, Azure becomes another location as you extend out your network.</span><span class="sxs-lookup"><span data-stu-id="4d275-140">In the same way that different corporate locations are assigned a specific IP subnet, Azure becomes another location as you extend out your network.</span></span>

<span data-ttu-id="4d275-141">To allow packets to travel from your cross-premises virtual network to your on-premises network, you must configure the set of relevant on-premises address prefixes as part of the local network definition for the virtual network.</span><span class="sxs-lookup"><span data-stu-id="4d275-141">To allow packets to travel from your cross-premises virtual network to your on-premises network, you must configure the set of relevant on-premises address prefixes as part of the local network definition for the virtual network.</span></span> <span data-ttu-id="4d275-142">Depending on the address space of the virtual network and the set of relevant on-premises locations, there can be many address prefixes in the local network.</span><span class="sxs-lookup"><span data-stu-id="4d275-142">Depending on the address space of the virtual network and the set of relevant on-premises locations, there can be many address prefixes in the local network.</span></span>

<span data-ttu-id="4d275-143">You can convert a cloud-only virtual network to a cross-premises virtual network, but it most likely requires you to re-IP your virtual network address space and Azure resources.</span><span class="sxs-lookup"><span data-stu-id="4d275-143">You can convert a cloud-only virtual network to a cross-premises virtual network, but it most likely requires you to re-IP your virtual network address space and Azure resources.</span></span> <span data-ttu-id="4d275-144">Therefore, carefully consider if a virtual network needs to be connected to your on-premises network when you assign an IP subnet.</span><span class="sxs-lookup"><span data-stu-id="4d275-144">Therefore, carefully consider if a virtual network needs to be connected to your on-premises network when you assign an IP subnet.</span></span>

## <a name="subnets"></a><span data-ttu-id="4d275-145">Subnets</span><span class="sxs-lookup"><span data-stu-id="4d275-145">Subnets</span></span>
<span data-ttu-id="4d275-146">Subnets allow you to organize resources that are related, either logically (for example, one subnet for VMs associated to the same application), or physically (for example, one subnet per resource group).</span><span class="sxs-lookup"><span data-stu-id="4d275-146">Subnets allow you to organize resources that are related, either logically (for example, one subnet for VMs associated to the same application), or physically (for example, one subnet per resource group).</span></span> <span data-ttu-id="4d275-147">You can also employ subnet isolation techniques for added security.</span><span class="sxs-lookup"><span data-stu-id="4d275-147">You can also employ subnet isolation techniques for added security.</span></span>

<span data-ttu-id="4d275-148">For cross-premises virtual networks, you should design subnets with the same conventions that you use for on-premises resources.</span><span class="sxs-lookup"><span data-stu-id="4d275-148">For cross-premises virtual networks, you should design subnets with the same conventions that you use for on-premises resources.</span></span> <span data-ttu-id="4d275-149">**Azure always uses the first three IP addresses of the address space for each subnet**.</span><span class="sxs-lookup"><span data-stu-id="4d275-149">**Azure always uses the first three IP addresses of the address space for each subnet**.</span></span> <span data-ttu-id="4d275-150">To determine the number of addresses needed for the subnet, start by counting the number of VMs that you need now.</span><span class="sxs-lookup"><span data-stu-id="4d275-150">To determine the number of addresses needed for the subnet, start by counting the number of VMs that you need now.</span></span> <span data-ttu-id="4d275-151">Estimate for future growth, and then use the following table to determine the size of the subnet.</span><span class="sxs-lookup"><span data-stu-id="4d275-151">Estimate for future growth, and then use the following table to determine the size of the subnet.</span></span>

| <span data-ttu-id="4d275-152">Number of VMs needed</span><span class="sxs-lookup"><span data-stu-id="4d275-152">Number of VMs needed</span></span> | <span data-ttu-id="4d275-153">Number of host bits needed</span><span class="sxs-lookup"><span data-stu-id="4d275-153">Number of host bits needed</span></span> | <span data-ttu-id="4d275-154">Size of the subnet</span><span class="sxs-lookup"><span data-stu-id="4d275-154">Size of the subnet</span></span> |
| --- | --- | --- |
| <span data-ttu-id="4d275-155">1–3</span><span class="sxs-lookup"><span data-stu-id="4d275-155">1–3</span></span> |<span data-ttu-id="4d275-156">3</span><span class="sxs-lookup"><span data-stu-id="4d275-156">3</span></span> |<span data-ttu-id="4d275-157">/29</span><span class="sxs-lookup"><span data-stu-id="4d275-157">/29</span></span> |
| <span data-ttu-id="4d275-158">4–11</span><span class="sxs-lookup"><span data-stu-id="4d275-158">4–11</span></span> |<span data-ttu-id="4d275-159">4</span><span class="sxs-lookup"><span data-stu-id="4d275-159">4</span></span> |<span data-ttu-id="4d275-160">/28</span><span class="sxs-lookup"><span data-stu-id="4d275-160">/28</span></span> |
| <span data-ttu-id="4d275-161">12–27</span><span class="sxs-lookup"><span data-stu-id="4d275-161">12–27</span></span> |<span data-ttu-id="4d275-162">5</span><span class="sxs-lookup"><span data-stu-id="4d275-162">5</span></span> |<span data-ttu-id="4d275-163">/27</span><span class="sxs-lookup"><span data-stu-id="4d275-163">/27</span></span> |
| <span data-ttu-id="4d275-164">28–59</span><span class="sxs-lookup"><span data-stu-id="4d275-164">28–59</span></span> |<span data-ttu-id="4d275-165">6</span><span class="sxs-lookup"><span data-stu-id="4d275-165">6</span></span> |<span data-ttu-id="4d275-166">/26</span><span class="sxs-lookup"><span data-stu-id="4d275-166">/26</span></span> |
| <span data-ttu-id="4d275-167">60–123</span><span class="sxs-lookup"><span data-stu-id="4d275-167">60–123</span></span> |<span data-ttu-id="4d275-168">7</span><span class="sxs-lookup"><span data-stu-id="4d275-168">7</span></span> |<span data-ttu-id="4d275-169">/25</span><span class="sxs-lookup"><span data-stu-id="4d275-169">/25</span></span> |

> [!NOTE]
> <span data-ttu-id="4d275-170">For normal on-premises subnets, the maximum number of host addresses for a subnet with n host bits is 2<sup>n</sup> – 2.</span><span class="sxs-lookup"><span data-stu-id="4d275-170">For normal on-premises subnets, the maximum number of host addresses for a subnet with n host bits is 2<sup>n</sup> – 2.</span></span> <span data-ttu-id="4d275-171">For an Azure subnet, the maximum number of host addresses for a subnet with n host bits is 2<sup>n</sup> – 5 (2 plus 3 for the addresses that Azure uses on each subnet).</span><span class="sxs-lookup"><span data-stu-id="4d275-171">For an Azure subnet, the maximum number of host addresses for a subnet with n host bits is 2<sup>n</sup> – 5 (2 plus 3 for the addresses that Azure uses on each subnet).</span></span>
> 
> 

<span data-ttu-id="4d275-172">If you choose a subnet size that is too small, you have to re-IP and redeploy the VMs in the subnet.</span><span class="sxs-lookup"><span data-stu-id="4d275-172">If you choose a subnet size that is too small, you have to re-IP and redeploy the VMs in the subnet.</span></span>

## <a name="network-security-groups"></a><span data-ttu-id="4d275-173">Network Security Groups</span><span class="sxs-lookup"><span data-stu-id="4d275-173">Network Security Groups</span></span>
<span data-ttu-id="4d275-174">You can apply filtering rules to the traffic that flows through your virtual networks by using Network Security Groups.</span><span class="sxs-lookup"><span data-stu-id="4d275-174">You can apply filtering rules to the traffic that flows through your virtual networks by using Network Security Groups.</span></span> <span data-ttu-id="4d275-175">You can build granular filtering rules to secure your virtual networking environment, controlling inbound and outbound traffic, source and destination IP ranges, allowed ports, etc. Network Security Groups can be applied to subnets within a virtual network or directly to a given virtual network interface.</span><span class="sxs-lookup"><span data-stu-id="4d275-175">You can build granular filtering rules to secure your virtual networking environment, controlling inbound and outbound traffic, source and destination IP ranges, allowed ports, etc. Network Security Groups can be applied to subnets within a virtual network or directly to a given virtual network interface.</span></span> <span data-ttu-id="4d275-176">It is recommended to have some level of Network Security Group filtering traffic on your virtual networks.</span><span class="sxs-lookup"><span data-stu-id="4d275-176">It is recommended to have some level of Network Security Group filtering traffic on your virtual networks.</span></span> <span data-ttu-id="4d275-177">You can read more about [Network Security Groups](../../virtual-network/virtual-networks-nsg.md).</span><span class="sxs-lookup"><span data-stu-id="4d275-177">You can read more about [Network Security Groups](../../virtual-network/virtual-networks-nsg.md).</span></span>

## <a name="additional-network-components"></a><span data-ttu-id="4d275-178">Additional network components</span><span class="sxs-lookup"><span data-stu-id="4d275-178">Additional network components</span></span>
<span data-ttu-id="4d275-179">As with an on-premises physical networking infrastructure, Azure virtual networking can contain more than just subnets and IP addressing.</span><span class="sxs-lookup"><span data-stu-id="4d275-179">As with an on-premises physical networking infrastructure, Azure virtual networking can contain more than just subnets and IP addressing.</span></span> <span data-ttu-id="4d275-180">As you design your application infrastructure, you may want to incorporate some of these additional components:</span><span class="sxs-lookup"><span data-stu-id="4d275-180">As you design your application infrastructure, you may want to incorporate some of these additional components:</span></span>

* <span data-ttu-id="4d275-181">[VPN gateways](../../vpn-gateway/vpn-gateway-about-vpngateways.md) - connect Azure virtual networks to other Azure virtual networks, or connect to on-premises networks through a Site-to-Site VPN connection.</span><span class="sxs-lookup"><span data-stu-id="4d275-181">[VPN gateways](../../vpn-gateway/vpn-gateway-about-vpngateways.md) - connect Azure virtual networks to other Azure virtual networks, or connect to on-premises networks through a Site-to-Site VPN connection.</span></span> <span data-ttu-id="4d275-182">Implement Express Route connections for dedicated, secure connections.</span><span class="sxs-lookup"><span data-stu-id="4d275-182">Implement Express Route connections for dedicated, secure connections.</span></span> <span data-ttu-id="4d275-183">You can also provide users direct access with Point-to-Site VPN connections.</span><span class="sxs-lookup"><span data-stu-id="4d275-183">You can also provide users direct access with Point-to-Site VPN connections.</span></span>
* <span data-ttu-id="4d275-184">[Load balancer](../../load-balancer/load-balancer-overview.md) - provides load balancing of traffic for both external and internal traffic as desired.</span><span class="sxs-lookup"><span data-stu-id="4d275-184">[Load balancer](../../load-balancer/load-balancer-overview.md) - provides load balancing of traffic for both external and internal traffic as desired.</span></span>
* <span data-ttu-id="4d275-185">[Application Gateway](../../application-gateway/application-gateway-introduction.md) - HTTP load-balancing at the application layer, providing some additional benefits for web applications rather than deploying the Azure load balancer.</span><span class="sxs-lookup"><span data-stu-id="4d275-185">[Application Gateway](../../application-gateway/application-gateway-introduction.md) - HTTP load-balancing at the application layer, providing some additional benefits for web applications rather than deploying the Azure load balancer.</span></span>
* <span data-ttu-id="4d275-186">[Traffic Manager](../../traffic-manager/traffic-manager-overview.md) - DNS-based traffic distribution to direct end-users to the closest available application endpoint, allowing you to host your application out of Azure datacenters in different regions.</span><span class="sxs-lookup"><span data-stu-id="4d275-186">[Traffic Manager](../../traffic-manager/traffic-manager-overview.md) - DNS-based traffic distribution to direct end-users to the closest available application endpoint, allowing you to host your application out of Azure datacenters in different regions.</span></span>

## <a name="next-steps"></a><span data-ttu-id="4d275-187">Next steps</span><span class="sxs-lookup"><span data-stu-id="4d275-187">Next steps</span></span>
[!INCLUDE [virtual-machines-linux-infrastructure-guidelines-next-steps](../../../includes/virtual-machines-linux-infrastructure-guidelines-next-steps.md)]



