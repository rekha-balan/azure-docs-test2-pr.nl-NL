---
title: Monitoring a Linux VM with a VM extension | Microsoft Docs
description: Learn how to use the Linux Diagnostic Extension to monitor the performance and diagnostic data of a Linux VM in Azure.
services: virtual-machines-linux
documentationcenter: ''
author: NingKuang
manager: timlt
editor: ''
tags: azure-service-management
ms.assetid: f54a11c5-5a0e-40ff-af6c-e60bd464058b
ms.service: virtual-machines-linux
ms.workload: infrastructure-services
ms.tgt_pltfrm: vm-linux
ms.devlang: na
ms.topic: article
ms.date: 12/15/2015
ms.author: Ning
ms.openlocfilehash: 9d6b7e7d2bdfbbd834ad9b25f2d8e274292b9b7b
ms.sourcegitcommit: 5b9d839c0c0a94b293fdafe1d6e5429506c07e05
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 08/02/2018
ms.locfileid: "44552735"
---
# <a name="use-the-linux-diagnostic-extension-to-monitor-the-performance-and-diagnostic-data-of-a-linux-vm"></a><span data-ttu-id="a75cb-103">Use the Linux Diagnostic Extension to monitor the performance and diagnostic data of a Linux VM</span><span class="sxs-lookup"><span data-stu-id="a75cb-103">Use the Linux Diagnostic Extension to monitor the performance and diagnostic data of a Linux VM</span></span>
## <a name="introduction"></a><span data-ttu-id="a75cb-104">Introduction</span><span class="sxs-lookup"><span data-stu-id="a75cb-104">Introduction</span></span>
<span data-ttu-id="a75cb-105">(**Note**: The Linux Diagnostic Extension is open-sourced on [GitHub](https://github.com/Azure/azure-linux-extensions/tree/master/Diagnostic) where the most current information on the extension is first published.</span><span class="sxs-lookup"><span data-stu-id="a75cb-105">(**Note**: The Linux Diagnostic Extension is open-sourced on [GitHub](https://github.com/Azure/azure-linux-extensions/tree/master/Diagnostic) where the most current information on the extension is first published.</span></span> <span data-ttu-id="a75cb-106">You might want to check the [GitHub page](https://github.com/Azure/azure-linux-extensions/tree/master/Diagnostic) first.)</span><span class="sxs-lookup"><span data-stu-id="a75cb-106">You might want to check the [GitHub page](https://github.com/Azure/azure-linux-extensions/tree/master/Diagnostic) first.)</span></span>

<span data-ttu-id="a75cb-107">The Linux Diagnostic Extension helps a user monitor the Linux VMs that are running on Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="a75cb-107">The Linux Diagnostic Extension helps a user monitor the Linux VMs that are running on Microsoft Azure.</span></span> <span data-ttu-id="a75cb-108">It has the following capabilities:</span><span class="sxs-lookup"><span data-stu-id="a75cb-108">It has the following capabilities:</span></span>

* <span data-ttu-id="a75cb-109">Collects and uploads the system performance information from the Linux VM to the user's storage table, including diagnostic and syslog information.</span><span class="sxs-lookup"><span data-stu-id="a75cb-109">Collects and uploads the system performance information from the Linux VM to the user's storage table, including diagnostic and syslog information.</span></span>
* <span data-ttu-id="a75cb-110">Enables users to customize the data metrics that will be collected and uploaded.</span><span class="sxs-lookup"><span data-stu-id="a75cb-110">Enables users to customize the data metrics that will be collected and uploaded.</span></span>
* <span data-ttu-id="a75cb-111">Enables users to upload specified log files to a designated storage table.</span><span class="sxs-lookup"><span data-stu-id="a75cb-111">Enables users to upload specified log files to a designated storage table.</span></span>

<span data-ttu-id="a75cb-112">In the current version 2.3, the data includes:</span><span class="sxs-lookup"><span data-stu-id="a75cb-112">In the current version 2.3, the data includes:</span></span>

* <span data-ttu-id="a75cb-113">All Linux Rsyslog logs, including system, security, and application logs.</span><span class="sxs-lookup"><span data-stu-id="a75cb-113">All Linux Rsyslog logs, including system, security, and application logs.</span></span>
* <span data-ttu-id="a75cb-114">All system data that's specified on [the System Center Cross Platform Solutions site](https://scx.codeplex.com/wikipage?title=xplatproviders).</span><span class="sxs-lookup"><span data-stu-id="a75cb-114">All system data that's specified on [the System Center Cross Platform Solutions site](https://scx.codeplex.com/wikipage?title=xplatproviders).</span></span>
* <span data-ttu-id="a75cb-115">User-specified log files.</span><span class="sxs-lookup"><span data-stu-id="a75cb-115">User-specified log files.</span></span>

<span data-ttu-id="a75cb-116">This extension works with both the classic and Resource Manager deployment models.</span><span class="sxs-lookup"><span data-stu-id="a75cb-116">This extension works with both the classic and Resource Manager deployment models.</span></span>

### <a name="current-version-of-the-extension-and-deprecation-of-old-versions"></a><span data-ttu-id="a75cb-117">Current version of the extension and deprecation of old versions</span><span class="sxs-lookup"><span data-stu-id="a75cb-117">Current version of the extension and deprecation of old versions</span></span>
<span data-ttu-id="a75cb-118">The latest version of the extension is **2.3**, and **any old versions (2.0, 2.1, and 2.2) will be deprecated and unpublished by end of this year (2016)**.</span><span class="sxs-lookup"><span data-stu-id="a75cb-118">The latest version of the extension is **2.3**, and **any old versions (2.0, 2.1, and 2.2) will be deprecated and unpublished by end of this year (2016)**.</span></span> <span data-ttu-id="a75cb-119">If you installed the Linux Diagnostic extension with automatic minor version upgrade disabled, it's strongly recommended that you uninstall the extension and reinstall it with automatic minor version upgrade enabled.</span><span class="sxs-lookup"><span data-stu-id="a75cb-119">If you installed the Linux Diagnostic extension with automatic minor version upgrade disabled, it's strongly recommended that you uninstall the extension and reinstall it with automatic minor version upgrade enabled.</span></span> <span data-ttu-id="a75cb-120">On classic (ASM) VMs, you can achieve this by specifying '2.\*' as the version if you are installing the extension through Azure XPLAT CLI or Powershell.</span><span class="sxs-lookup"><span data-stu-id="a75cb-120">On classic (ASM) VMs, you can achieve this by specifying '2.\*' as the version if you are installing the extension through Azure XPLAT CLI or Powershell.</span></span> <span data-ttu-id="a75cb-121">On ARM VMs, you can achieve this by including '"autoUpgradeMinorVersion": true' in the VM deployment template.</span><span class="sxs-lookup"><span data-stu-id="a75cb-121">On ARM VMs, you can achieve this by including '"autoUpgradeMinorVersion": true' in the VM deployment template.</span></span> <span data-ttu-id="a75cb-122">Also, any new installation of the extension should have the auto minor version upgrade option turned on.</span><span class="sxs-lookup"><span data-stu-id="a75cb-122">Also, any new installation of the extension should have the auto minor version upgrade option turned on.</span></span>

## <a name="enable-the-extension"></a><span data-ttu-id="a75cb-123">Enable the extension</span><span class="sxs-lookup"><span data-stu-id="a75cb-123">Enable the extension</span></span>
<span data-ttu-id="a75cb-124">You can enable this extension by using the [Azure portal](https://portal.azure.com/#), Azure PowerShell, or Azure CLI scripts.</span><span class="sxs-lookup"><span data-stu-id="a75cb-124">You can enable this extension by using the [Azure portal](https://portal.azure.com/#), Azure PowerShell, or Azure CLI scripts.</span></span>

<span data-ttu-id="a75cb-125">To view and configure the system and performance data directly from the Azure portal, follow [these steps on the Azure blog](https://azure.microsoft.com/en-us/blog/windows-azure-virtual-machine-monitoring-with-wad-extension/).</span><span class="sxs-lookup"><span data-stu-id="a75cb-125">To view and configure the system and performance data directly from the Azure portal, follow [these steps on the Azure blog](https://azure.microsoft.com/en-us/blog/windows-azure-virtual-machine-monitoring-with-wad-extension/).</span></span>

<span data-ttu-id="a75cb-126">This article focuses on how to enable and configure the extension by using Azure CLI commands.</span><span class="sxs-lookup"><span data-stu-id="a75cb-126">This article focuses on how to enable and configure the extension by using Azure CLI commands.</span></span> <span data-ttu-id="a75cb-127">This allows you to read and view the data directly from the storage table.</span><span class="sxs-lookup"><span data-stu-id="a75cb-127">This allows you to read and view the data directly from the storage table.</span></span>

<span data-ttu-id="a75cb-128">Note that the configuration methods that are described here won't work for the Azure portal.</span><span class="sxs-lookup"><span data-stu-id="a75cb-128">Note that the configuration methods that are described here won't work for the Azure portal.</span></span> <span data-ttu-id="a75cb-129">To view and configure the system and performance data directly from the Azure portal, the extension must be enabled through the portal.</span><span class="sxs-lookup"><span data-stu-id="a75cb-129">To view and configure the system and performance data directly from the Azure portal, the extension must be enabled through the portal.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="a75cb-130">Prerequisites</span><span class="sxs-lookup"><span data-stu-id="a75cb-130">Prerequisites</span></span>
* <span data-ttu-id="a75cb-131">**Azure Linux Agent version 2.0.6 or later**.</span><span class="sxs-lookup"><span data-stu-id="a75cb-131">**Azure Linux Agent version 2.0.6 or later**.</span></span>
  <span data-ttu-id="a75cb-132">Note that most Azure VM Linux gallery images include version 2.0.6 or later.</span><span class="sxs-lookup"><span data-stu-id="a75cb-132">Note that most Azure VM Linux gallery images include version 2.0.6 or later.</span></span> <span data-ttu-id="a75cb-133">You can run **WAAgent -version** to confirm which version is installed on the VM.</span><span class="sxs-lookup"><span data-stu-id="a75cb-133">You can run **WAAgent -version** to confirm which version is installed on the VM.</span></span> <span data-ttu-id="a75cb-134">If the VM is running a version that's earlier than 2.0.6, you can follow [these instructions on GitHub](https://github.com/Azure/WALinuxAgent "instructions") to update it.</span><span class="sxs-lookup"><span data-stu-id="a75cb-134">If the VM is running a version that's earlier than 2.0.6, you can follow [these instructions on GitHub](https://github.com/Azure/WALinuxAgent "instructions") to update it.</span></span>
* <span data-ttu-id="a75cb-135">**Azure CLI**.</span><span class="sxs-lookup"><span data-stu-id="a75cb-135">**Azure CLI**.</span></span> <span data-ttu-id="a75cb-136">Follow [this guidance for installing CLI](../../../cli-install-nodejs.md) to set up the Azure CLI environment on your machine.</span><span class="sxs-lookup"><span data-stu-id="a75cb-136">Follow [this guidance for installing CLI](../../../cli-install-nodejs.md) to set up the Azure CLI environment on your machine.</span></span> <span data-ttu-id="a75cb-137">After Azure CLI is installed, you can use the **azure** command from your command-line interface (Bash, Terminal, or command prompt) to access the Azure CLI commands.</span><span class="sxs-lookup"><span data-stu-id="a75cb-137">After Azure CLI is installed, you can use the **azure** command from your command-line interface (Bash, Terminal, or command prompt) to access the Azure CLI commands.</span></span> <span data-ttu-id="a75cb-138">For example:</span><span class="sxs-lookup"><span data-stu-id="a75cb-138">For example:</span></span>
  
  * <span data-ttu-id="a75cb-139">Run **azure vm extension set --help** for detailed help information.</span><span class="sxs-lookup"><span data-stu-id="a75cb-139">Run **azure vm extension set --help** for detailed help information.</span></span>
  * <span data-ttu-id="a75cb-140">Run **azure login** to sign in to Azure.</span><span class="sxs-lookup"><span data-stu-id="a75cb-140">Run **azure login** to sign in to Azure.</span></span>
  * <span data-ttu-id="a75cb-141">Run **azure vm list** to list all the virtual machines that you have on Azure.</span><span class="sxs-lookup"><span data-stu-id="a75cb-141">Run **azure vm list** to list all the virtual machines that you have on Azure.</span></span>
* <span data-ttu-id="a75cb-142">A storage account to store the data.</span><span class="sxs-lookup"><span data-stu-id="a75cb-142">A storage account to store the data.</span></span> <span data-ttu-id="a75cb-143">You will need a storage account name that was created previously and an access key to upload the data to your storage.</span><span class="sxs-lookup"><span data-stu-id="a75cb-143">You will need a storage account name that was created previously and an access key to upload the data to your storage.</span></span>

## <a name="use-the-azure-cli-command-to-enable-the-linux-diagnostic-extension"></a><span data-ttu-id="a75cb-144">Use the Azure CLI command to enable the Linux Diagnostic Extension</span><span class="sxs-lookup"><span data-stu-id="a75cb-144">Use the Azure CLI command to enable the Linux Diagnostic Extension</span></span>
### <a name="scenario-1-enable-the-extension-with-the-default-data-set"></a><span data-ttu-id="a75cb-145">Scenario 1.</span><span class="sxs-lookup"><span data-stu-id="a75cb-145">Scenario 1.</span></span> <span data-ttu-id="a75cb-146">Enable the extension with the default data set</span><span class="sxs-lookup"><span data-stu-id="a75cb-146">Enable the extension with the default data set</span></span>
<span data-ttu-id="a75cb-147">In version 2.3 or later, the default data that will be collected includes:</span><span class="sxs-lookup"><span data-stu-id="a75cb-147">In version 2.3 or later, the default data that will be collected includes:</span></span>

* <span data-ttu-id="a75cb-148">All Rsyslog information (including system, security, and application logs).</span><span class="sxs-lookup"><span data-stu-id="a75cb-148">All Rsyslog information (including system, security, and application logs).</span></span>  
* <span data-ttu-id="a75cb-149">A core set of basis system data.</span><span class="sxs-lookup"><span data-stu-id="a75cb-149">A core set of basis system data.</span></span> <span data-ttu-id="a75cb-150">Note that the full data set is described on the [System Center Cross Platform Solutions site](https://scx.codeplex.com/wikipage?title=xplatproviders).</span><span class="sxs-lookup"><span data-stu-id="a75cb-150">Note that the full data set is described on the [System Center Cross Platform Solutions site](https://scx.codeplex.com/wikipage?title=xplatproviders).</span></span>
  <span data-ttu-id="a75cb-151">If you want to enable extra data, continue with the steps in Scenarios 2 and 3.</span><span class="sxs-lookup"><span data-stu-id="a75cb-151">If you want to enable extra data, continue with the steps in Scenarios 2 and 3.</span></span>

<span data-ttu-id="a75cb-152">Step 1.</span><span class="sxs-lookup"><span data-stu-id="a75cb-152">Step 1.</span></span> <span data-ttu-id="a75cb-153">Create a file named PrivateConfig.json with the following content:</span><span class="sxs-lookup"><span data-stu-id="a75cb-153">Create a file named PrivateConfig.json with the following content:</span></span>

    {
        "storageAccountName" : "the storage account to receive data",
        "storageAccountKey" : "the key of the account"
    }

<span data-ttu-id="a75cb-154">Step 2.</span><span class="sxs-lookup"><span data-stu-id="a75cb-154">Step 2.</span></span> <span data-ttu-id="a75cb-155">Run \**azure vm extension set vm_name LinuxDiagnostic Microsoft.OSTCExtensions 2.*</span><span class="sxs-lookup"><span data-stu-id="a75cb-155">Run \**azure vm extension set vm_name LinuxDiagnostic Microsoft.OSTCExtensions 2.*</span></span> <span data-ttu-id="a75cb-156">--private-config-path PrivateConfig.json\*\*.</span><span class="sxs-lookup"><span data-stu-id="a75cb-156">--private-config-path PrivateConfig.json\*\*.</span></span>

### <a name="scenario-2-customize-the-performance-monitor-metrics"></a><span data-ttu-id="a75cb-157">Scenario 2.</span><span class="sxs-lookup"><span data-stu-id="a75cb-157">Scenario 2.</span></span> <span data-ttu-id="a75cb-158">Customize the performance monitor metrics</span><span class="sxs-lookup"><span data-stu-id="a75cb-158">Customize the performance monitor metrics</span></span>
<span data-ttu-id="a75cb-159">This section describes how to customize the performance and diagnostic data table.</span><span class="sxs-lookup"><span data-stu-id="a75cb-159">This section describes how to customize the performance and diagnostic data table.</span></span>

<span data-ttu-id="a75cb-160">Step 1.</span><span class="sxs-lookup"><span data-stu-id="a75cb-160">Step 1.</span></span> <span data-ttu-id="a75cb-161">Create a file named PrivateConfig.json with the content that was described in Scenario 1.</span><span class="sxs-lookup"><span data-stu-id="a75cb-161">Create a file named PrivateConfig.json with the content that was described in Scenario 1.</span></span> <span data-ttu-id="a75cb-162">Also create a file named PublicConfig.json.</span><span class="sxs-lookup"><span data-stu-id="a75cb-162">Also create a file named PublicConfig.json.</span></span> <span data-ttu-id="a75cb-163">Specify the particular data you want to collect.</span><span class="sxs-lookup"><span data-stu-id="a75cb-163">Specify the particular data you want to collect.</span></span>

<span data-ttu-id="a75cb-164">For all supported providers and variables, reference the [System Center Cross Platform Solutions site](https://scx.codeplex.com/wikipage?title=xplatproviders).</span><span class="sxs-lookup"><span data-stu-id="a75cb-164">For all supported providers and variables, reference the [System Center Cross Platform Solutions site](https://scx.codeplex.com/wikipage?title=xplatproviders).</span></span> <span data-ttu-id="a75cb-165">You can have multiple queries and store them in multiple tables by appending more queries to the script.</span><span class="sxs-lookup"><span data-stu-id="a75cb-165">You can have multiple queries and store them in multiple tables by appending more queries to the script.</span></span>

<span data-ttu-id="a75cb-166">By default, the Rsyslog data is always collected.</span><span class="sxs-lookup"><span data-stu-id="a75cb-166">By default, the Rsyslog data is always collected.</span></span>

    {
          "perfCfg":
          [
              {
                  "query" : "SELECT PercentAvailableMemory, AvailableMemory, UsedMemory ,PercentUsedSwap FROM SCX_MemoryStatisticalInformation",
                  "table" : "LinuxMemory"
              }
          ]
    }


<span data-ttu-id="a75cb-167">Step 2.</span><span class="sxs-lookup"><span data-stu-id="a75cb-167">Step 2.</span></span> <span data-ttu-id="a75cb-168">Run **azure vm extension set vm_name LinuxDiagnostic Microsoft.OSTCExtensions '2.\*' --private-config-path PrivateConfig.json --public-config-path PublicConfig.json**.</span><span class="sxs-lookup"><span data-stu-id="a75cb-168">Run **azure vm extension set vm_name LinuxDiagnostic Microsoft.OSTCExtensions '2.\*' --private-config-path PrivateConfig.json --public-config-path PublicConfig.json**.</span></span>

### <a name="scenario-3-upload-your-own-log-files"></a><span data-ttu-id="a75cb-169">Scenario 3.</span><span class="sxs-lookup"><span data-stu-id="a75cb-169">Scenario 3.</span></span> <span data-ttu-id="a75cb-170">Upload your own log files</span><span class="sxs-lookup"><span data-stu-id="a75cb-170">Upload your own log files</span></span>
<span data-ttu-id="a75cb-171">This section describes how to collect and upload specific log files to your storage account.</span><span class="sxs-lookup"><span data-stu-id="a75cb-171">This section describes how to collect and upload specific log files to your storage account.</span></span> <span data-ttu-id="a75cb-172">You need to specify both the path to your log file and the name of the table where you want to store your log.</span><span class="sxs-lookup"><span data-stu-id="a75cb-172">You need to specify both the path to your log file and the name of the table where you want to store your log.</span></span> <span data-ttu-id="a75cb-173">You can create multiple log files by adding multiple file/table entries to the script.</span><span class="sxs-lookup"><span data-stu-id="a75cb-173">You can create multiple log files by adding multiple file/table entries to the script.</span></span>

<span data-ttu-id="a75cb-174">Step 1.</span><span class="sxs-lookup"><span data-stu-id="a75cb-174">Step 1.</span></span> <span data-ttu-id="a75cb-175">Create a file named PrivateConfig.json with the content that was described in Scenario 1.</span><span class="sxs-lookup"><span data-stu-id="a75cb-175">Create a file named PrivateConfig.json with the content that was described in Scenario 1.</span></span> <span data-ttu-id="a75cb-176">Then create another file named PublicConfig.json with the following content:</span><span class="sxs-lookup"><span data-stu-id="a75cb-176">Then create another file named PublicConfig.json with the following content:</span></span>

    {
        "fileCfg" :
        [
            {
                "file" : "/var/log/mysql.err",
                "table" : "mysqlerr"
             }
        ]
    }


<span data-ttu-id="a75cb-177">Step 2.</span><span class="sxs-lookup"><span data-stu-id="a75cb-177">Step 2.</span></span> <span data-ttu-id="a75cb-178">Run **azure vm extension set vm_name LinuxDiagnostic Microsoft.OSTCExtensions '2.\*' --private-config-path PrivateConfig.json --public-config-path PublicConfig.json**.</span><span class="sxs-lookup"><span data-stu-id="a75cb-178">Run **azure vm extension set vm_name LinuxDiagnostic Microsoft.OSTCExtensions '2.\*' --private-config-path PrivateConfig.json --public-config-path PublicConfig.json**.</span></span>

<span data-ttu-id="a75cb-179">Note that with this setting on the extension versions prior to 2.3, all logs written to `/var/log/mysql.err` might be duplicated to `/var/log/syslog` (or `/var/log/messages` depending on the Linux distro) as well.</span><span class="sxs-lookup"><span data-stu-id="a75cb-179">Note that with this setting on the extension versions prior to 2.3, all logs written to `/var/log/mysql.err` might be duplicated to `/var/log/syslog` (or `/var/log/messages` depending on the Linux distro) as well.</span></span> <span data-ttu-id="a75cb-180">If you'd like to avoid this duplicate logging, you can exclude logging of `local6` facility logs in your rsyslog configuration.</span><span class="sxs-lookup"><span data-stu-id="a75cb-180">If you'd like to avoid this duplicate logging, you can exclude logging of `local6` facility logs in your rsyslog configuration.</span></span> <span data-ttu-id="a75cb-181">It depends on the Linux distro, but on an Ubuntu 14.04 system, the file to modify is `/etc/rsyslog.d/50-default.conf` and you can replace the line `*.*;auth,authpriv.none -/var/log/syslog` to `*.*;auth,authpriv,local6.none -/var/log/syslog`.</span><span class="sxs-lookup"><span data-stu-id="a75cb-181">It depends on the Linux distro, but on an Ubuntu 14.04 system, the file to modify is `/etc/rsyslog.d/50-default.conf` and you can replace the line `*.*;auth,authpriv.none -/var/log/syslog` to `*.*;auth,authpriv,local6.none -/var/log/syslog`.</span></span> <span data-ttu-id="a75cb-182">This issue is fixed in the latest hotfix release of 2.3 (2.3.9007), so if you have the extension version 2.3, this issue should not happen.</span><span class="sxs-lookup"><span data-stu-id="a75cb-182">This issue is fixed in the latest hotfix release of 2.3 (2.3.9007), so if you have the extension version 2.3, this issue should not happen.</span></span> <span data-ttu-id="a75cb-183">If it still does even after restarting your VM, please contact us and help us troubleshoot why the latest hotfix version is not installed automatically.</span><span class="sxs-lookup"><span data-stu-id="a75cb-183">If it still does even after restarting your VM, please contact us and help us troubleshoot why the latest hotfix version is not installed automatically.</span></span>

### <a name="scenario-4-stop-the-extension-from-collecting-any-logs"></a><span data-ttu-id="a75cb-184">Scenario 4.</span><span class="sxs-lookup"><span data-stu-id="a75cb-184">Scenario 4.</span></span> <span data-ttu-id="a75cb-185">Stop the extension from collecting any logs</span><span class="sxs-lookup"><span data-stu-id="a75cb-185">Stop the extension from collecting any logs</span></span>
<span data-ttu-id="a75cb-186">This section describes how to stop the extension from collecting logs.</span><span class="sxs-lookup"><span data-stu-id="a75cb-186">This section describes how to stop the extension from collecting logs.</span></span> <span data-ttu-id="a75cb-187">Note that the monitoring agent process will be still up and running even with this reconfiguration.</span><span class="sxs-lookup"><span data-stu-id="a75cb-187">Note that the monitoring agent process will be still up and running even with this reconfiguration.</span></span> <span data-ttu-id="a75cb-188">If you'd like to stop the monitoring agent process completely, you can do so by disabling the extension.</span><span class="sxs-lookup"><span data-stu-id="a75cb-188">If you'd like to stop the monitoring agent process completely, you can do so by disabling the extension.</span></span> <span data-ttu-id="a75cb-189">The command to disable the extension is **azure vm extension set --disable <vm_name> LinuxDiagnostic Microsoft.OSTCExtensions '2.\*'**.</span><span class="sxs-lookup"><span data-stu-id="a75cb-189">The command to disable the extension is **azure vm extension set --disable <vm_name> LinuxDiagnostic Microsoft.OSTCExtensions '2.\*'**.</span></span>

<span data-ttu-id="a75cb-190">Step 1.</span><span class="sxs-lookup"><span data-stu-id="a75cb-190">Step 1.</span></span> <span data-ttu-id="a75cb-191">Create a file named PrivateConfig.json with the content that was described in Scenario 1.</span><span class="sxs-lookup"><span data-stu-id="a75cb-191">Create a file named PrivateConfig.json with the content that was described in Scenario 1.</span></span> <span data-ttu-id="a75cb-192">Create another file named PublicConfig.json with the following content:</span><span class="sxs-lookup"><span data-stu-id="a75cb-192">Create another file named PublicConfig.json with the following content:</span></span>

    {
        "perfCfg" : [],
        "enableSyslog" : "false"
    }


<span data-ttu-id="a75cb-193">Step 2.</span><span class="sxs-lookup"><span data-stu-id="a75cb-193">Step 2.</span></span> <span data-ttu-id="a75cb-194">Run **azure vm extension set vm_name LinuxDiagnostic Microsoft.OSTCExtensions '2.\*' --private-config-path PrivateConfig.json --public-config-path PublicConfig.json**.</span><span class="sxs-lookup"><span data-stu-id="a75cb-194">Run **azure vm extension set vm_name LinuxDiagnostic Microsoft.OSTCExtensions '2.\*' --private-config-path PrivateConfig.json --public-config-path PublicConfig.json**.</span></span>

## <a name="review-your-data"></a><span data-ttu-id="a75cb-195">Review your data</span><span class="sxs-lookup"><span data-stu-id="a75cb-195">Review your data</span></span>
<span data-ttu-id="a75cb-196">The performance and diagnostic data are stored in an Azure Storage table.</span><span class="sxs-lookup"><span data-stu-id="a75cb-196">The performance and diagnostic data are stored in an Azure Storage table.</span></span> <span data-ttu-id="a75cb-197">Review [How to use Azure Table Storage from Ruby](../../../storage/storage-ruby-how-to-use-table-storage.md) to learn how to access the data in the storage table by using Azure CLI scripts.</span><span class="sxs-lookup"><span data-stu-id="a75cb-197">Review [How to use Azure Table Storage from Ruby](../../../storage/storage-ruby-how-to-use-table-storage.md) to learn how to access the data in the storage table by using Azure CLI scripts.</span></span>

<span data-ttu-id="a75cb-198">In addition, you can use following UI tools to access the data:</span><span class="sxs-lookup"><span data-stu-id="a75cb-198">In addition, you can use following UI tools to access the data:</span></span>

1. <span data-ttu-id="a75cb-199">Visual Studio Server Explorer.</span><span class="sxs-lookup"><span data-stu-id="a75cb-199">Visual Studio Server Explorer.</span></span> <span data-ttu-id="a75cb-200">Go to your storage account.</span><span class="sxs-lookup"><span data-stu-id="a75cb-200">Go to your storage account.</span></span> <span data-ttu-id="a75cb-201">After the VM runs for about five minutes, you'll see the four default tables: “LinuxCpu”, ”LinuxDisk”, ”LinuxMemory”, and ”Linuxsyslog”.</span><span class="sxs-lookup"><span data-stu-id="a75cb-201">After the VM runs for about five minutes, you'll see the four default tables: “LinuxCpu”, ”LinuxDisk”, ”LinuxMemory”, and ”Linuxsyslog”.</span></span> <span data-ttu-id="a75cb-202">Double-click the table names to view the data.</span><span class="sxs-lookup"><span data-stu-id="a75cb-202">Double-click the table names to view the data.</span></span>
2. <span data-ttu-id="a75cb-203">[Azure Storage Explorer](https://azurestorageexplorer.codeplex.com/ "Azure Storage Explorer").</span><span class="sxs-lookup"><span data-stu-id="a75cb-203">[Azure Storage Explorer](https://azurestorageexplorer.codeplex.com/ "Azure Storage Explorer").</span></span>

![image](https://docstestmedia1.blob.core.windows.net/azure-media/articles/virtual-machines/linux/classic/media/diagnostic-extension/no1.png)

<span data-ttu-id="a75cb-205">If you've enabled fileCfg or perfCfg (as described in Scenarios 2 and 3), you can use Visual Studio Server Explorer and Azure Storage Explorer to view non-default data.</span><span class="sxs-lookup"><span data-stu-id="a75cb-205">If you've enabled fileCfg or perfCfg (as described in Scenarios 2 and 3), you can use Visual Studio Server Explorer and Azure Storage Explorer to view non-default data.</span></span>

## <a name="known-issues"></a><span data-ttu-id="a75cb-206">Known issues</span><span class="sxs-lookup"><span data-stu-id="a75cb-206">Known issues</span></span>
* <span data-ttu-id="a75cb-207">In the current version (2.3) of the Linux Diagnostic Extension, the Rsyslog information and customer-specified log file can only be accessed via scripting.</span><span class="sxs-lookup"><span data-stu-id="a75cb-207">In the current version (2.3) of the Linux Diagnostic Extension, the Rsyslog information and customer-specified log file can only be accessed via scripting.</span></span>


