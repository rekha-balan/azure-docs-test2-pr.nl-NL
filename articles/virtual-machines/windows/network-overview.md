---
title: Virtual networks and Windows virtual machines in Azure | Microsoft Docs
description: Learn about networking as it relates to the basics of creating Windows virtual machines in Azure.
services: virtual-machines-windows
documentationcenter: ''
author: davidmu1
manager: timlt
editor: tysonn
tags: azure-resource-manager
ms.assetid: 5493e9f7-7d45-4e98-be9a-657a53708746
ms.service: virtual-machines-windows
ms.workload: infrastructure-services
ms.tgt_pltfrm: vm-windows
ms.devlang: na
ms.topic: get-started-article
ms.date: 03/01/2017
ms.author: davidmu
ms.openlocfilehash: 1398ec09932b03ba30b6a56b1c523dc652a6cae3
ms.sourcegitcommit: 5b9d839c0c0a94b293fdafe1d6e5429506c07e05
ms.translationtype: HT
ms.contentlocale: nl-NL
ms.lasthandoff: 08/02/2018
ms.locfileid: "44540686"
---
# <a name="virtual-networks-and-windows-virtual-machines-in-azure"></a><span data-ttu-id="33672-103">Virtual networks and Windows virtual machines in Azure</span><span class="sxs-lookup"><span data-stu-id="33672-103">Virtual networks and Windows virtual machines in Azure</span></span> 

<span data-ttu-id="33672-104">When you create an Azure virtual machine (VM), you must create a [virtual network](../../virtual-network/virtual-networks-overview.md) (VNet) or use an existing VNet.</span><span class="sxs-lookup"><span data-stu-id="33672-104">When you create an Azure virtual machine (VM), you must create a [virtual network](../../virtual-network/virtual-networks-overview.md) (VNet) or use an existing VNet.</span></span> <span data-ttu-id="33672-105">You also need to decide how your VMs are intended to be accessed on the VNet.</span><span class="sxs-lookup"><span data-stu-id="33672-105">You also need to decide how your VMs are intended to be accessed on the VNet.</span></span> <span data-ttu-id="33672-106">It is important to [plan before creating resources](../../virtual-network/virtual-network-vnet-plan-design-arm.md) and make sure that you understand the [limits of networking resources](../../azure-subscription-service-limits.md#networking-limits).</span><span class="sxs-lookup"><span data-stu-id="33672-106">It is important to [plan before creating resources](../../virtual-network/virtual-network-vnet-plan-design-arm.md) and make sure that you understand the [limits of networking resources](../../azure-subscription-service-limits.md#networking-limits).</span></span>

<span data-ttu-id="33672-107">In the following figure, VMs are represented as web servers and database servers.</span><span class="sxs-lookup"><span data-stu-id="33672-107">In the following figure, VMs are represented as web servers and database servers.</span></span> <span data-ttu-id="33672-108">Each set of VMs are assigned to separate subnets in the VNet.</span><span class="sxs-lookup"><span data-stu-id="33672-108">Each set of VMs are assigned to separate subnets in the VNet.</span></span>

![Azure virtual network](https://docstestmedia1.blob.core.windows.net/azure-media/articles/virtual-machines/windows/media/network-overview/vnetoverview.png)

<span data-ttu-id="33672-110">You can either create a VNet before you create a VM or you can create the VNet when creating a VM.</span><span class="sxs-lookup"><span data-stu-id="33672-110">You can either create a VNet before you create a VM or you can create the VNet when creating a VM.</span></span> <span data-ttu-id="33672-111">You must either create a VNet yourself or one is created for you when you create a VM.</span><span class="sxs-lookup"><span data-stu-id="33672-111">You must either create a VNet yourself or one is created for you when you create a VM.</span></span>

<span data-ttu-id="33672-112">You create these resources to support communication with a VM:</span><span class="sxs-lookup"><span data-stu-id="33672-112">You create these resources to support communication with a VM:</span></span>

- <span data-ttu-id="33672-113">Network interfaces</span><span class="sxs-lookup"><span data-stu-id="33672-113">Network interfaces</span></span>
- <span data-ttu-id="33672-114">IP addresses</span><span class="sxs-lookup"><span data-stu-id="33672-114">IP addresses</span></span>
- <span data-ttu-id="33672-115">Virtual network and subnets</span><span class="sxs-lookup"><span data-stu-id="33672-115">Virtual network and subnets</span></span>

<span data-ttu-id="33672-116">In addition to those basic resources, you should also consider these optional resources:</span><span class="sxs-lookup"><span data-stu-id="33672-116">In addition to those basic resources, you should also consider these optional resources:</span></span>

- <span data-ttu-id="33672-117">Network security groups</span><span class="sxs-lookup"><span data-stu-id="33672-117">Network security groups</span></span>
- <span data-ttu-id="33672-118">Load balancers</span><span class="sxs-lookup"><span data-stu-id="33672-118">Load balancers</span></span> 

## <a name="network-interfaces"></a><span data-ttu-id="33672-119">Network interfaces</span><span class="sxs-lookup"><span data-stu-id="33672-119">Network interfaces</span></span>

<span data-ttu-id="33672-120">A [network interface (NIC)](../../virtual-network/virtual-network-network-interface.md) is the interconnection between a VM and a virtual network (VNet).</span><span class="sxs-lookup"><span data-stu-id="33672-120">A [network interface (NIC)](../../virtual-network/virtual-network-network-interface.md) is the interconnection between a VM and a virtual network (VNet).</span></span> <span data-ttu-id="33672-121">A VM must have at least one NIC, but can have more than one, depending on the size of the VM you create.</span><span class="sxs-lookup"><span data-stu-id="33672-121">A VM must have at least one NIC, but can have more than one, depending on the size of the VM you create.</span></span> <span data-ttu-id="33672-122">Learn about how many NICs each VM size supports in [Sizes for virtual machines in Azure](sizes.md).</span><span class="sxs-lookup"><span data-stu-id="33672-122">Learn about how many NICs each VM size supports in [Sizes for virtual machines in Azure](sizes.md).</span></span> 

<span data-ttu-id="33672-123">If you want to create a VM with more than one NIC, you must create the VM with at least two.</span><span class="sxs-lookup"><span data-stu-id="33672-123">If you want to create a VM with more than one NIC, you must create the VM with at least two.</span></span>  <span data-ttu-id="33672-124">After creation you can add additional NICs up to the number supported by the VM size, but you cannot add additional NICs to a VM only created with one, regardless of how many NICs the VM size supports.</span><span class="sxs-lookup"><span data-stu-id="33672-124">After creation you can add additional NICs up to the number supported by the VM size, but you cannot add additional NICs to a VM only created with one, regardless of how many NICs the VM size supports.</span></span> 

<span data-ttu-id="33672-125">If the VM is added to an availability set, all VMs within the availability set must have one or multiple NICs.</span><span class="sxs-lookup"><span data-stu-id="33672-125">If the VM is added to an availability set, all VMs within the availability set must have one or multiple NICs.</span></span> <span data-ttu-id="33672-126">VMs with more than one NIC aren’t required to have the same number of NICs, but they must all have at least two.</span><span class="sxs-lookup"><span data-stu-id="33672-126">VMs with more than one NIC aren’t required to have the same number of NICs, but they must all have at least two.</span></span>

<span data-ttu-id="33672-127">Each NIC attached to a VM must exist in the same location and subscription as the VM.</span><span class="sxs-lookup"><span data-stu-id="33672-127">Each NIC attached to a VM must exist in the same location and subscription as the VM.</span></span> <span data-ttu-id="33672-128">Each NIC must be connected to a VNet that exists in the same Azure location and subscription as the NIC.</span><span class="sxs-lookup"><span data-stu-id="33672-128">Each NIC must be connected to a VNet that exists in the same Azure location and subscription as the NIC.</span></span> <span data-ttu-id="33672-129">After a NIC is created, you can change the subnet it's connected to, but you cannot change the VNet it's connected to.</span><span class="sxs-lookup"><span data-stu-id="33672-129">After a NIC is created, you can change the subnet it's connected to, but you cannot change the VNet it's connected to.</span></span>  <span data-ttu-id="33672-130">Each NIC attached to a VM is assigned a MAC address that doesn’t change until the VM is deleted.</span><span class="sxs-lookup"><span data-stu-id="33672-130">Each NIC attached to a VM is assigned a MAC address that doesn’t change until the VM is deleted.</span></span>

<span data-ttu-id="33672-131">This table lists the methods that you can use to create a network interface.</span><span class="sxs-lookup"><span data-stu-id="33672-131">This table lists the methods that you can use to create a network interface.</span></span>

| <span data-ttu-id="33672-132">Method</span><span class="sxs-lookup"><span data-stu-id="33672-132">Method</span></span> | <span data-ttu-id="33672-133">Description</span><span class="sxs-lookup"><span data-stu-id="33672-133">Description</span></span> |
| ------ | ----------- |
| <span data-ttu-id="33672-134">Azure portal</span><span class="sxs-lookup"><span data-stu-id="33672-134">Azure portal</span></span> | <span data-ttu-id="33672-135">When you create a VM in the Azure portal, a network interface is automatically created for you (you cannot use a NIC you create separately).</span><span class="sxs-lookup"><span data-stu-id="33672-135">When you create a VM in the Azure portal, a network interface is automatically created for you (you cannot use a NIC you create separately).</span></span> <span data-ttu-id="33672-136">The portal creates a VM with only one NIC.</span><span class="sxs-lookup"><span data-stu-id="33672-136">The portal creates a VM with only one NIC.</span></span> <span data-ttu-id="33672-137">If you want to create a VM with more than one NIC, you must create it with a different method.</span><span class="sxs-lookup"><span data-stu-id="33672-137">If you want to create a VM with more than one NIC, you must create it with a different method.</span></span> |
| [<span data-ttu-id="33672-138">Azure PowerShell</span><span class="sxs-lookup"><span data-stu-id="33672-138">Azure PowerShell</span></span>](../../virtual-network/virtual-network-deploy-multinic-arm-ps.md) | <span data-ttu-id="33672-139">Use [New-AzureRmNetworkInterface](https://docs.microsoft.com/powershell/resourcemanager/AzureRM.Network/v1.0.13/New-AzureRmNetworkInterface) with the **-PublicIpAddressId** parameter to provide the identifer of the public IP address that you previously created.</span><span class="sxs-lookup"><span data-stu-id="33672-139">Use [New-AzureRmNetworkInterface](https://docs.microsoft.com/powershell/resourcemanager/AzureRM.Network/v1.0.13/New-AzureRmNetworkInterface) with the **-PublicIpAddressId** parameter to provide the identifer of the public IP address that you previously created.</span></span> |
| [<span data-ttu-id="33672-140">Azure CLI</span><span class="sxs-lookup"><span data-stu-id="33672-140">Azure CLI</span></span>](../../virtual-network/virtual-network-deploy-multinic-arm-cli.md) | <span data-ttu-id="33672-141">To provide the identifer of the public IP address that you previously created, use [az network nic create](https://docs.microsoft.com/cli/azure/network/nic#create) with the **--public-ip-address** parameter.</span><span class="sxs-lookup"><span data-stu-id="33672-141">To provide the identifer of the public IP address that you previously created, use [az network nic create](https://docs.microsoft.com/cli/azure/network/nic#create) with the **--public-ip-address** parameter.</span></span> |
| [<span data-ttu-id="33672-142">Template</span><span class="sxs-lookup"><span data-stu-id="33672-142">Template</span></span>](../../virtual-network/virtual-network-deploy-multinic-arm-template.md) | <span data-ttu-id="33672-143">Use [Network Interface in a Virtual Network with Public IP Address](https://github.com/Azure/azure-quickstart-templates/tree/master/101-nic-publicip-dns-vnet) as a guide for deploying a network interface using a template.</span><span class="sxs-lookup"><span data-stu-id="33672-143">Use [Network Interface in a Virtual Network with Public IP Address](https://github.com/Azure/azure-quickstart-templates/tree/master/101-nic-publicip-dns-vnet) as a guide for deploying a network interface using a template.</span></span> |

## <a name="ip-addresses"></a><span data-ttu-id="33672-144">IP addresses</span><span class="sxs-lookup"><span data-stu-id="33672-144">IP addresses</span></span> 

<span data-ttu-id="33672-145">You can assign these types of [IP addresses](../../virtual-network/virtual-network-ip-addresses-overview-arm.md) to a NIC in Azure:</span><span class="sxs-lookup"><span data-stu-id="33672-145">You can assign these types of [IP addresses](../../virtual-network/virtual-network-ip-addresses-overview-arm.md) to a NIC in Azure:</span></span>

- <span data-ttu-id="33672-146">**Public IP addresses** - Used to communicate inbound and outbound (without network address translation (NAT)) with the Internet and other Azure resources not connected to a VNet.</span><span class="sxs-lookup"><span data-stu-id="33672-146">**Public IP addresses** - Used to communicate inbound and outbound (without network address translation (NAT)) with the Internet and other Azure resources not connected to a VNet.</span></span> <span data-ttu-id="33672-147">Assigning a public IP address to a NIC is optional.</span><span class="sxs-lookup"><span data-stu-id="33672-147">Assigning a public IP address to a NIC is optional.</span></span> <span data-ttu-id="33672-148">Public IP addresses have a nominal charge and there's a maximum number that can be used per subscription.</span><span class="sxs-lookup"><span data-stu-id="33672-148">Public IP addresses have a nominal charge and there's a maximum number that can be used per subscription.</span></span>
- <span data-ttu-id="33672-149">**Private IP addresses** - Used for communication within a VNet, your on-premises network, and the Internet (with NAT).</span><span class="sxs-lookup"><span data-stu-id="33672-149">**Private IP addresses** - Used for communication within a VNet, your on-premises network, and the Internet (with NAT).</span></span> <span data-ttu-id="33672-150">You must assign at least one private IP address to a VM.</span><span class="sxs-lookup"><span data-stu-id="33672-150">You must assign at least one private IP address to a VM.</span></span> <span data-ttu-id="33672-151">To learn more about NAT in Azure, read [Understanding outbound connections in Azure](../../load-balancer/load-balancer-outbound-connections.md).</span><span class="sxs-lookup"><span data-stu-id="33672-151">To learn more about NAT in Azure, read [Understanding outbound connections in Azure](../../load-balancer/load-balancer-outbound-connections.md).</span></span>

<span data-ttu-id="33672-152">You can assign public IP addresses to VMs or internet-facing load balancers.</span><span class="sxs-lookup"><span data-stu-id="33672-152">You can assign public IP addresses to VMs or internet-facing load balancers.</span></span> <span data-ttu-id="33672-153">You can assign private IP addresses to VMs and internal load balancers.</span><span class="sxs-lookup"><span data-stu-id="33672-153">You can assign private IP addresses to VMs and internal load balancers.</span></span> <span data-ttu-id="33672-154">You assign IP addresses to a VM using a network interface.</span><span class="sxs-lookup"><span data-stu-id="33672-154">You assign IP addresses to a VM using a network interface.</span></span>

<span data-ttu-id="33672-155">There are two methods in which an IP address is allocated to a resource - dynamic or static.</span><span class="sxs-lookup"><span data-stu-id="33672-155">There are two methods in which an IP address is allocated to a resource - dynamic or static.</span></span> <span data-ttu-id="33672-156">The default allocation method is dynamic, where an IP address is not allocated when it's created.</span><span class="sxs-lookup"><span data-stu-id="33672-156">The default allocation method is dynamic, where an IP address is not allocated when it's created.</span></span> <span data-ttu-id="33672-157">Instead, the IP address is allocated when you create a VM or start a stopped VM.</span><span class="sxs-lookup"><span data-stu-id="33672-157">Instead, the IP address is allocated when you create a VM or start a stopped VM.</span></span> <span data-ttu-id="33672-158">The IP address is released when you stop or delete the VM.</span><span class="sxs-lookup"><span data-stu-id="33672-158">The IP address is released when you stop or delete the VM.</span></span> 

<span data-ttu-id="33672-159">To ensure the IP address for the VM remains the same, you can set the allocation method explicitly to static.</span><span class="sxs-lookup"><span data-stu-id="33672-159">To ensure the IP address for the VM remains the same, you can set the allocation method explicitly to static.</span></span> <span data-ttu-id="33672-160">In this case, an IP address is assigned immediately.</span><span class="sxs-lookup"><span data-stu-id="33672-160">In this case, an IP address is assigned immediately.</span></span> <span data-ttu-id="33672-161">It is released only when you delete the VM or change its allocation method to dynamic.</span><span class="sxs-lookup"><span data-stu-id="33672-161">It is released only when you delete the VM or change its allocation method to dynamic.</span></span>
    
<span data-ttu-id="33672-162">This table lists the methods that you can use to create an IP address.</span><span class="sxs-lookup"><span data-stu-id="33672-162">This table lists the methods that you can use to create an IP address.</span></span>

| <span data-ttu-id="33672-163">Method</span><span class="sxs-lookup"><span data-stu-id="33672-163">Method</span></span> | <span data-ttu-id="33672-164">Description</span><span class="sxs-lookup"><span data-stu-id="33672-164">Description</span></span> |
| ------ | ----------- |
| [<span data-ttu-id="33672-165">Azure portal</span><span class="sxs-lookup"><span data-stu-id="33672-165">Azure portal</span></span>](../../virtual-network/virtual-network-deploy-static-pip-arm-portal.md) | <span data-ttu-id="33672-166">By default, public IP addresses are dynamic and the address associated to them may change when the VM is stopped or deleted.</span><span class="sxs-lookup"><span data-stu-id="33672-166">By default, public IP addresses are dynamic and the address associated to them may change when the VM is stopped or deleted.</span></span> <span data-ttu-id="33672-167">To guarantee that the VM always uses the same public IP address, create a static public IP address.</span><span class="sxs-lookup"><span data-stu-id="33672-167">To guarantee that the VM always uses the same public IP address, create a static public IP address.</span></span> <span data-ttu-id="33672-168">By default, the portal assigns a dynamic private IP address to a NIC when creating a VM.</span><span class="sxs-lookup"><span data-stu-id="33672-168">By default, the portal assigns a dynamic private IP address to a NIC when creating a VM.</span></span> <span data-ttu-id="33672-169">You can change this to static after the VM is created.</span><span class="sxs-lookup"><span data-stu-id="33672-169">You can change this to static after the VM is created.</span></span>|
| [<span data-ttu-id="33672-170">Azure PowerShell</span><span class="sxs-lookup"><span data-stu-id="33672-170">Azure PowerShell</span></span>](../../virtual-network/virtual-network-deploy-static-pip-arm-ps.md) | <span data-ttu-id="33672-171">You use [New-AzureRmPublicIpAddress](https://docs.microsoft.com/powershell/resourcemanager/AzureRM.Network/v1.0.13/New-AzureRmPublicIpAddress) with the **-AllocationMethod** parameter as Dynamic or Static.</span><span class="sxs-lookup"><span data-stu-id="33672-171">You use [New-AzureRmPublicIpAddress](https://docs.microsoft.com/powershell/resourcemanager/AzureRM.Network/v1.0.13/New-AzureRmPublicIpAddress) with the **-AllocationMethod** parameter as Dynamic or Static.</span></span> |
| [<span data-ttu-id="33672-172">Azure CLI</span><span class="sxs-lookup"><span data-stu-id="33672-172">Azure CLI</span></span>](../../virtual-network/virtual-network-deploy-static-pip-arm-cli.md) | <span data-ttu-id="33672-173">You use [az network public-ip create](https://docs.microsoft.com/cli/azure/network/public-ip#create) with the **--allocation-method** parameter as Dynamic or Static.</span><span class="sxs-lookup"><span data-stu-id="33672-173">You use [az network public-ip create](https://docs.microsoft.com/cli/azure/network/public-ip#create) with the **--allocation-method** parameter as Dynamic or Static.</span></span> |
| [<span data-ttu-id="33672-174">Template</span><span class="sxs-lookup"><span data-stu-id="33672-174">Template</span></span>](../../virtual-network/virtual-network-deploy-static-pip-arm-template.md) | <span data-ttu-id="33672-175">Use [Network Interface in a Virtual Network with Public IP Address](https://github.com/Azure/azure-quickstart-templates/tree/master/101-nic-publicip-dns-vnet) as a guide for deploying a public IP address using a template.</span><span class="sxs-lookup"><span data-stu-id="33672-175">Use [Network Interface in a Virtual Network with Public IP Address](https://github.com/Azure/azure-quickstart-templates/tree/master/101-nic-publicip-dns-vnet) as a guide for deploying a public IP address using a template.</span></span> |

<span data-ttu-id="33672-176">After you create a public IP address, you can associate it with a VM by assigning it to a NIC.</span><span class="sxs-lookup"><span data-stu-id="33672-176">After you create a public IP address, you can associate it with a VM by assigning it to a NIC.</span></span>

## <a name="virtual-network-and-subnets"></a><span data-ttu-id="33672-177">Virtual network and subnets</span><span class="sxs-lookup"><span data-stu-id="33672-177">Virtual network and subnets</span></span>

<span data-ttu-id="33672-178">A subnet is a range of IP addresses in the VNet.</span><span class="sxs-lookup"><span data-stu-id="33672-178">A subnet is a range of IP addresses in the VNet.</span></span> <span data-ttu-id="33672-179">You can divide a VNet into multiple subnets for organization and security.</span><span class="sxs-lookup"><span data-stu-id="33672-179">You can divide a VNet into multiple subnets for organization and security.</span></span> <span data-ttu-id="33672-180">Each NIC in a VM is connected to one subnet in one VNet.</span><span class="sxs-lookup"><span data-stu-id="33672-180">Each NIC in a VM is connected to one subnet in one VNet.</span></span> <span data-ttu-id="33672-181">NICs connected to subnets (same or different) within a VNet can communicate with each other without any extra configuration.</span><span class="sxs-lookup"><span data-stu-id="33672-181">NICs connected to subnets (same or different) within a VNet can communicate with each other without any extra configuration.</span></span>

<span data-ttu-id="33672-182">When you set up a VNet, you specify the topology, including the available address spaces and subnets.</span><span class="sxs-lookup"><span data-stu-id="33672-182">When you set up a VNet, you specify the topology, including the available address spaces and subnets.</span></span> <span data-ttu-id="33672-183">If the VNet is to be connected to other VNets or on-premises networks, you must select address ranges that don't overlap.</span><span class="sxs-lookup"><span data-stu-id="33672-183">If the VNet is to be connected to other VNets or on-premises networks, you must select address ranges that don't overlap.</span></span> <span data-ttu-id="33672-184">The IP addresses are private and can't be accessed from the Internet, which was true only for the non-routeable IP addresses such as 10.0.0.0/8, 172.16.0.0/12, or 192.168.0.0/16.</span><span class="sxs-lookup"><span data-stu-id="33672-184">The IP addresses are private and can't be accessed from the Internet, which was true only for the non-routeable IP addresses such as 10.0.0.0/8, 172.16.0.0/12, or 192.168.0.0/16.</span></span> <span data-ttu-id="33672-185">Now, Azure treats any address range as part of the private VNet IP address space that is only reachable within the VNet, within interconnected VNets, and from your on-premises location.</span><span class="sxs-lookup"><span data-stu-id="33672-185">Now, Azure treats any address range as part of the private VNet IP address space that is only reachable within the VNet, within interconnected VNets, and from your on-premises location.</span></span> 

<span data-ttu-id="33672-186">If you work within an organization in which someone else is responsible for the internal networks, you should talk to that person before selecting your address space.</span><span class="sxs-lookup"><span data-stu-id="33672-186">If you work within an organization in which someone else is responsible for the internal networks, you should talk to that person before selecting your address space.</span></span> <span data-ttu-id="33672-187">Make sure there is no overlap and let them know the space you want to use so they don’t try to use the same range of IP addresses.</span><span class="sxs-lookup"><span data-stu-id="33672-187">Make sure there is no overlap and let them know the space you want to use so they don’t try to use the same range of IP addresses.</span></span> 

<span data-ttu-id="33672-188">By default, there is no security boundary between subnets, so VMs in each of these subnets can talk to one another.</span><span class="sxs-lookup"><span data-stu-id="33672-188">By default, there is no security boundary between subnets, so VMs in each of these subnets can talk to one another.</span></span> <span data-ttu-id="33672-189">However, you can set up Network Security Groups (NSGs), which allow you to control the traffic flow to and from subnets and to and from VMs.</span><span class="sxs-lookup"><span data-stu-id="33672-189">However, you can set up Network Security Groups (NSGs), which allow you to control the traffic flow to and from subnets and to and from VMs.</span></span> 

<span data-ttu-id="33672-190">This table lists the methods that you can use to create a VNet and subnets.</span><span class="sxs-lookup"><span data-stu-id="33672-190">This table lists the methods that you can use to create a VNet and subnets.</span></span> 

| <span data-ttu-id="33672-191">Method</span><span class="sxs-lookup"><span data-stu-id="33672-191">Method</span></span> | <span data-ttu-id="33672-192">Description</span><span class="sxs-lookup"><span data-stu-id="33672-192">Description</span></span> |
| ------ | ----------- |
| [<span data-ttu-id="33672-193">Azure portal</span><span class="sxs-lookup"><span data-stu-id="33672-193">Azure portal</span></span>](../../virtual-network/virtual-networks-create-vnet-arm-pportal.md) | <span data-ttu-id="33672-194">If you let Azure create a VNet when you create a VM, the name is a combination of the resource group name that contains the VNet and **-vnet**.</span><span class="sxs-lookup"><span data-stu-id="33672-194">If you let Azure create a VNet when you create a VM, the name is a combination of the resource group name that contains the VNet and **-vnet**.</span></span> <span data-ttu-id="33672-195">The address space is 10.0.0.0/24, the required subnet name is **default**, and the subnet address range is 10.0.0.0/24.</span><span class="sxs-lookup"><span data-stu-id="33672-195">The address space is 10.0.0.0/24, the required subnet name is **default**, and the subnet address range is 10.0.0.0/24.</span></span> |
| [<span data-ttu-id="33672-196">Azure PowerShell</span><span class="sxs-lookup"><span data-stu-id="33672-196">Azure PowerShell</span></span>](../../virtual-network/virtual-networks-create-vnet-arm-ps.md) | <span data-ttu-id="33672-197">You use [New-AzureRmVirtualNetworkSubnetConfig](https://docs.microsoft.com/powershell/resourcemanager/AzureRM.Network/v1.0.13/New-AzureRmVirtualNetworkSubnetConfig) and [New-AzureRmVirtualNetwork](https://docs.microsoft.com/powershell/resourcemanager/AzureRM.Network/v1.0.13/New-AzureRmVirtualNetwork) to create a subnet and a VNet.</span><span class="sxs-lookup"><span data-stu-id="33672-197">You use [New-AzureRmVirtualNetworkSubnetConfig](https://docs.microsoft.com/powershell/resourcemanager/AzureRM.Network/v1.0.13/New-AzureRmVirtualNetworkSubnetConfig) and [New-AzureRmVirtualNetwork](https://docs.microsoft.com/powershell/resourcemanager/AzureRM.Network/v1.0.13/New-AzureRmVirtualNetwork) to create a subnet and a VNet.</span></span> <span data-ttu-id="33672-198">You can also use [Add-AzureRmVirtualNetworkSubnetConfig](https://docs.microsoft.com/powershell/resourcemanager/AzureRM.Network/v1.0.13/Add-AzureRmVirtualNetworkSubnetConfig) to add a subnet to an existing VNet.</span><span class="sxs-lookup"><span data-stu-id="33672-198">You can also use [Add-AzureRmVirtualNetworkSubnetConfig](https://docs.microsoft.com/powershell/resourcemanager/AzureRM.Network/v1.0.13/Add-AzureRmVirtualNetworkSubnetConfig) to add a subnet to an existing VNet.</span></span> |
| [<span data-ttu-id="33672-199">Azure CLI</span><span class="sxs-lookup"><span data-stu-id="33672-199">Azure CLI</span></span>](../../virtual-network/virtual-networks-create-vnet-arm-cli.md) | <span data-ttu-id="33672-200">The subnet and the VNet are created at the same time.</span><span class="sxs-lookup"><span data-stu-id="33672-200">The subnet and the VNet are created at the same time.</span></span> <span data-ttu-id="33672-201">Provide a **--subnet-name** parameter to [az network vnet create](https://docs.microsoft.com/cli/azure/network/vnet#create) with the subnet name.</span><span class="sxs-lookup"><span data-stu-id="33672-201">Provide a **--subnet-name** parameter to [az network vnet create](https://docs.microsoft.com/cli/azure/network/vnet#create) with the subnet name.</span></span> |
| [<span data-ttu-id="33672-202">Template</span><span class="sxs-lookup"><span data-stu-id="33672-202">Template</span></span>](../../virtual-network/virtual-networks-create-vnet-arm-template-click.md) | <span data-ttu-id="33672-203">The easiest way to create a VNet and subnets is to download an existing template, such as [Virtual Network with two Subnets](https://github.com/Azure/azure-quickstart-templates/tree/master/101-vnet-two-subnets), and modify it for your needs.</span><span class="sxs-lookup"><span data-stu-id="33672-203">The easiest way to create a VNet and subnets is to download an existing template, such as [Virtual Network with two Subnets](https://github.com/Azure/azure-quickstart-templates/tree/master/101-vnet-two-subnets), and modify it for your needs.</span></span> |

## <a name="network-security-groups"></a><span data-ttu-id="33672-204">Network security groups</span><span class="sxs-lookup"><span data-stu-id="33672-204">Network security groups</span></span>

<span data-ttu-id="33672-205">A [network security group (NSG)](../../virtual-network/virtual-networks-nsg.md) contains a list of Access Control List (ACL) rules that allow or deny network traffic to subnets, NICs, or both.</span><span class="sxs-lookup"><span data-stu-id="33672-205">A [network security group (NSG)](../../virtual-network/virtual-networks-nsg.md) contains a list of Access Control List (ACL) rules that allow or deny network traffic to subnets, NICs, or both.</span></span> <span data-ttu-id="33672-206">NSGs can be associated with either subnets or individual NICs connected to a subnet.</span><span class="sxs-lookup"><span data-stu-id="33672-206">NSGs can be associated with either subnets or individual NICs connected to a subnet.</span></span> <span data-ttu-id="33672-207">When an NSG is associated with a subnet, the ACL rules apply to all the VMs in that subnet.</span><span class="sxs-lookup"><span data-stu-id="33672-207">When an NSG is associated with a subnet, the ACL rules apply to all the VMs in that subnet.</span></span> <span data-ttu-id="33672-208">In addition, traffic to an individual NIC can be restricted by associating an NSG directly to a NIC.</span><span class="sxs-lookup"><span data-stu-id="33672-208">In addition, traffic to an individual NIC can be restricted by associating an NSG directly to a NIC.</span></span>

<span data-ttu-id="33672-209">NSGs contain two sets of rules: inbound and outbound.</span><span class="sxs-lookup"><span data-stu-id="33672-209">NSGs contain two sets of rules: inbound and outbound.</span></span> <span data-ttu-id="33672-210">The priority for a rule must be unique within each set.</span><span class="sxs-lookup"><span data-stu-id="33672-210">The priority for a rule must be unique within each set.</span></span> <span data-ttu-id="33672-211">Each rule has properties of protocol, source and destination port ranges, address prefixes, direction of traffic, priority, and access type.</span><span class="sxs-lookup"><span data-stu-id="33672-211">Each rule has properties of protocol, source and destination port ranges, address prefixes, direction of traffic, priority, and access type.</span></span> 

<span data-ttu-id="33672-212">All NSGs contain a set of default rules.</span><span class="sxs-lookup"><span data-stu-id="33672-212">All NSGs contain a set of default rules.</span></span> <span data-ttu-id="33672-213">The default rules cannot be deleted, but because they are assigned the lowest priority, they can be overridden by the rules that you create.</span><span class="sxs-lookup"><span data-stu-id="33672-213">The default rules cannot be deleted, but because they are assigned the lowest priority, they can be overridden by the rules that you create.</span></span> 

<span data-ttu-id="33672-214">When you associate an NSG to a NIC, the network access rules in the NSG are applied only to that NIC.</span><span class="sxs-lookup"><span data-stu-id="33672-214">When you associate an NSG to a NIC, the network access rules in the NSG are applied only to that NIC.</span></span> <span data-ttu-id="33672-215">If an NSG is applied to a single NIC on a multi-NIC VM, it does not affect traffic to the other NICs.</span><span class="sxs-lookup"><span data-stu-id="33672-215">If an NSG is applied to a single NIC on a multi-NIC VM, it does not affect traffic to the other NICs.</span></span> <span data-ttu-id="33672-216">You can associate different NSGs to a NIC (or VM, depending on the deployment model) and the subnet that a NIC or VM is bound to.</span><span class="sxs-lookup"><span data-stu-id="33672-216">You can associate different NSGs to a NIC (or VM, depending on the deployment model) and the subnet that a NIC or VM is bound to.</span></span> <span data-ttu-id="33672-217">Priority is given based on the direction of traffic.</span><span class="sxs-lookup"><span data-stu-id="33672-217">Priority is given based on the direction of traffic.</span></span>

<span data-ttu-id="33672-218">Be sure to [plan](../../virtual-network/virtual-networks-nsg.md#planning) your NSGs when you plan your VMs and VNet.</span><span class="sxs-lookup"><span data-stu-id="33672-218">Be sure to [plan](../../virtual-network/virtual-networks-nsg.md#planning) your NSGs when you plan your VMs and VNet.</span></span>

<span data-ttu-id="33672-219">This table lists the methods that you can use to create a network security group.</span><span class="sxs-lookup"><span data-stu-id="33672-219">This table lists the methods that you can use to create a network security group.</span></span>

| <span data-ttu-id="33672-220">Method</span><span class="sxs-lookup"><span data-stu-id="33672-220">Method</span></span> | <span data-ttu-id="33672-221">Description</span><span class="sxs-lookup"><span data-stu-id="33672-221">Description</span></span> |
| ------ | ----------- |
| [<span data-ttu-id="33672-222">Azure portal</span><span class="sxs-lookup"><span data-stu-id="33672-222">Azure portal</span></span>](../../virtual-network/virtual-networks-create-nsg-arm-pportal.md) | <span data-ttu-id="33672-223">When you create a VM in the Azure portal, an NSG is automatically created and associated to the NIC the portal creates.</span><span class="sxs-lookup"><span data-stu-id="33672-223">When you create a VM in the Azure portal, an NSG is automatically created and associated to the NIC the portal creates.</span></span> <span data-ttu-id="33672-224">The name of the NSG is a combination of the name of the VM and **-nsg**.</span><span class="sxs-lookup"><span data-stu-id="33672-224">The name of the NSG is a combination of the name of the VM and **-nsg**.</span></span> <span data-ttu-id="33672-225">This NSG contains one inbound rule with a priority of 1000, service set to RDP, the protocol set to TCP, port set to 3389, and action set to Allow.</span><span class="sxs-lookup"><span data-stu-id="33672-225">This NSG contains one inbound rule with a priority of 1000, service set to RDP, the protocol set to TCP, port set to 3389, and action set to Allow.</span></span> <span data-ttu-id="33672-226">If you want to allow any other inbound traffic to the VM, you must add additional rules to the NSG.</span><span class="sxs-lookup"><span data-stu-id="33672-226">If you want to allow any other inbound traffic to the VM, you must add additional rules to the NSG.</span></span> |
| [<span data-ttu-id="33672-227">Azure PowerShell</span><span class="sxs-lookup"><span data-stu-id="33672-227">Azure PowerShell</span></span>](../../virtual-network/virtual-networks-create-nsg-arm-ps.md) | <span data-ttu-id="33672-228">Use [New-AzureRmNetworkSecurityRuleConfig](https://docs.microsoft.com/powershell/resourcemanager/AzureRM.Network/v1.0.13/New-AzureRmNetworkSecurityRuleConfig) and provide the required rule information.</span><span class="sxs-lookup"><span data-stu-id="33672-228">Use [New-AzureRmNetworkSecurityRuleConfig](https://docs.microsoft.com/powershell/resourcemanager/AzureRM.Network/v1.0.13/New-AzureRmNetworkSecurityRuleConfig) and provide the required rule information.</span></span> <span data-ttu-id="33672-229">Use [New-AzureRmNetworkSecurityGroup](https://docs.microsoft.com/powershell/resourcemanager/AzureRM.Network/v1.0.13/New-AzureRmNetworkSecurityGroup) to create the NSG.</span><span class="sxs-lookup"><span data-stu-id="33672-229">Use [New-AzureRmNetworkSecurityGroup](https://docs.microsoft.com/powershell/resourcemanager/AzureRM.Network/v1.0.13/New-AzureRmNetworkSecurityGroup) to create the NSG.</span></span> <span data-ttu-id="33672-230">Use [Set-AzureRmVirtualNetworkSubnetConfig](https://docs.microsoft.com/powershell/resourcemanager/AzureRM.Network/v1.0.13/Set-AzureRmVirtualNetworkSubnetConfig) to configure the NSG for the subnet.</span><span class="sxs-lookup"><span data-stu-id="33672-230">Use [Set-AzureRmVirtualNetworkSubnetConfig](https://docs.microsoft.com/powershell/resourcemanager/AzureRM.Network/v1.0.13/Set-AzureRmVirtualNetworkSubnetConfig) to configure the NSG for the subnet.</span></span> <span data-ttu-id="33672-231">Use [Set-AzureRmVirtualNetwork](https://docs.microsoft.com/powershell/resourcemanager/AzureRM.Network/v1.0.13/Set-AzureRmVirtualNetwork?redirectedfrom=msdn) to add the NSG to the VNet.</span><span class="sxs-lookup"><span data-stu-id="33672-231">Use [Set-AzureRmVirtualNetwork](https://docs.microsoft.com/powershell/resourcemanager/AzureRM.Network/v1.0.13/Set-AzureRmVirtualNetwork?redirectedfrom=msdn) to add the NSG to the VNet.</span></span> |
| [<span data-ttu-id="33672-232">Azure CLI</span><span class="sxs-lookup"><span data-stu-id="33672-232">Azure CLI</span></span>](../../virtual-network/virtual-networks-create-nsg-arm-cli.md) | <span data-ttu-id="33672-233">Use [az network nsg create](https://docs.microsoft.com/cli/azure/network/nsg#create) to initially create the NSG.</span><span class="sxs-lookup"><span data-stu-id="33672-233">Use [az network nsg create](https://docs.microsoft.com/cli/azure/network/nsg#create) to initially create the NSG.</span></span> <span data-ttu-id="33672-234">Use [az network nsg rule create](https://docs.microsoft.com/cli/azure/network/nsg/rule#create) to add rules to the NSG.</span><span class="sxs-lookup"><span data-stu-id="33672-234">Use [az network nsg rule create](https://docs.microsoft.com/cli/azure/network/nsg/rule#create) to add rules to the NSG.</span></span> <span data-ttu-id="33672-235">Use [az network vnet subnet update](https://docs.microsoft.com/en-us/cli/azure/network/vnet/subnet#update) to add the NSG to the subnet.</span><span class="sxs-lookup"><span data-stu-id="33672-235">Use [az network vnet subnet update](https://docs.microsoft.com/en-us/cli/azure/network/vnet/subnet#update) to add the NSG to the subnet.</span></span> |
| [<span data-ttu-id="33672-236">Template</span><span class="sxs-lookup"><span data-stu-id="33672-236">Template</span></span>](../../virtual-network/virtual-networks-create-nsg-arm-template.md) | <span data-ttu-id="33672-237">Use [Create a Network Security Group](https://github.com/Azure/azure-quickstart-templates/tree/master/101-security-group-create) as a guide for deploying a network security group using a template.</span><span class="sxs-lookup"><span data-stu-id="33672-237">Use [Create a Network Security Group](https://github.com/Azure/azure-quickstart-templates/tree/master/101-security-group-create) as a guide for deploying a network security group using a template.</span></span> |

## <a name="load-balancers"></a><span data-ttu-id="33672-238">Load balancers</span><span class="sxs-lookup"><span data-stu-id="33672-238">Load balancers</span></span>

<span data-ttu-id="33672-239">[Azure Load Balancer](../../load-balancer/load-balancer-overview.md) delivers high availability and network performance to your applications.</span><span class="sxs-lookup"><span data-stu-id="33672-239">[Azure Load Balancer](../../load-balancer/load-balancer-overview.md) delivers high availability and network performance to your applications.</span></span> <span data-ttu-id="33672-240">A load balancer can be configured to [balance incoming Internet traffic](../../load-balancer/load-balancer-internet-overview.md) to VMs or [balance traffic between VMs in a VNet](../../load-balancer/load-balancer-internal-overview.md).</span><span class="sxs-lookup"><span data-stu-id="33672-240">A load balancer can be configured to [balance incoming Internet traffic](../../load-balancer/load-balancer-internet-overview.md) to VMs or [balance traffic between VMs in a VNet](../../load-balancer/load-balancer-internal-overview.md).</span></span> <span data-ttu-id="33672-241">A load balancer can also balance traffic between on-premises computers and VMs in a cross-premises network, or forward external traffic to a specific VM.</span><span class="sxs-lookup"><span data-stu-id="33672-241">A load balancer can also balance traffic between on-premises computers and VMs in a cross-premises network, or forward external traffic to a specific VM.</span></span>

<span data-ttu-id="33672-242">The load balancer maps incoming and outgoing traffic between the public IP address and port on the load balancer and the private IP address and port of the VM.</span><span class="sxs-lookup"><span data-stu-id="33672-242">The load balancer maps incoming and outgoing traffic between the public IP address and port on the load balancer and the private IP address and port of the VM.</span></span>

<span data-ttu-id="33672-243">When you create a load balancer, you must also consider these configuration elements:</span><span class="sxs-lookup"><span data-stu-id="33672-243">When you create a load balancer, you must also consider these configuration elements:</span></span>

- <span data-ttu-id="33672-244">**Front-end IP configuration** – A load balancer can include one or more front-end IP addresses, otherwise known as virtual IPs (VIPs).</span><span class="sxs-lookup"><span data-stu-id="33672-244">**Front-end IP configuration** – A load balancer can include one or more front-end IP addresses, otherwise known as virtual IPs (VIPs).</span></span> <span data-ttu-id="33672-245">These IP addresses serve as ingress for the traffic.</span><span class="sxs-lookup"><span data-stu-id="33672-245">These IP addresses serve as ingress for the traffic.</span></span>
- <span data-ttu-id="33672-246">**Back-end address pool** – IP addresses that are associated with the NIC to which load is distributed.</span><span class="sxs-lookup"><span data-stu-id="33672-246">**Back-end address pool** – IP addresses that are associated with the NIC to which load is distributed.</span></span>
- <span data-ttu-id="33672-247">**NAT rules** - Defines how inbound traffic flows through the front-end IP and distributed to the back-end IP.</span><span class="sxs-lookup"><span data-stu-id="33672-247">**NAT rules** - Defines how inbound traffic flows through the front-end IP and distributed to the back-end IP.</span></span>
- <span data-ttu-id="33672-248">**Load balancer rules** - Maps a given front-end IP and port combination to a set of back-end IP addresses and port combination.</span><span class="sxs-lookup"><span data-stu-id="33672-248">**Load balancer rules** - Maps a given front-end IP and port combination to a set of back-end IP addresses and port combination.</span></span> <span data-ttu-id="33672-249">A single load balancer can have multiple load balancing rules.</span><span class="sxs-lookup"><span data-stu-id="33672-249">A single load balancer can have multiple load balancing rules.</span></span> <span data-ttu-id="33672-250">Each rule is a combination of a front-end IP and port and back-end IP and port associated with VMs.</span><span class="sxs-lookup"><span data-stu-id="33672-250">Each rule is a combination of a front-end IP and port and back-end IP and port associated with VMs.</span></span>
- <span data-ttu-id="33672-251">**[Probes](../../load-balancer/load-balancer-custom-probe-overview.md)** - Monitors the health of VMs.</span><span class="sxs-lookup"><span data-stu-id="33672-251">**[Probes](../../load-balancer/load-balancer-custom-probe-overview.md)** - Monitors the health of VMs.</span></span> <span data-ttu-id="33672-252">When a probe fails to respond, the load balancer stops sending new connections to the unhealthy VM.</span><span class="sxs-lookup"><span data-stu-id="33672-252">When a probe fails to respond, the load balancer stops sending new connections to the unhealthy VM.</span></span> <span data-ttu-id="33672-253">The existing connections are not affected, and new connections are sent to healthy VMs.</span><span class="sxs-lookup"><span data-stu-id="33672-253">The existing connections are not affected, and new connections are sent to healthy VMs.</span></span>

<span data-ttu-id="33672-254">This table lists the methods that you can use to create an internet-facing load balancer.</span><span class="sxs-lookup"><span data-stu-id="33672-254">This table lists the methods that you can use to create an internet-facing load balancer.</span></span>

| <span data-ttu-id="33672-255">Method</span><span class="sxs-lookup"><span data-stu-id="33672-255">Method</span></span> | <span data-ttu-id="33672-256">Description</span><span class="sxs-lookup"><span data-stu-id="33672-256">Description</span></span> |
| ------ | ----------- |
| <span data-ttu-id="33672-257">Azure portal</span><span class="sxs-lookup"><span data-stu-id="33672-257">Azure portal</span></span> | <span data-ttu-id="33672-258">You can't currently create an internet-facing load balancer using the Azure portal.</span><span class="sxs-lookup"><span data-stu-id="33672-258">You can't currently create an internet-facing load balancer using the Azure portal.</span></span> |
| [<span data-ttu-id="33672-259">Azure PowerShell</span><span class="sxs-lookup"><span data-stu-id="33672-259">Azure PowerShell</span></span>](../../load-balancer/load-balancer-get-started-internet-arm-ps.md) | <span data-ttu-id="33672-260">To provide the identifer of the public IP address that you previously created, use [New-AzureRmLoadBalancerFrontendIpConfig](https://docs.microsoft.com/powershell/resourcemanager/AzureRM.Network/v1.0.13/New-AzureRmLoadBalancerFrontendIpConfig) with the **-PublicIpAddress** parameter.</span><span class="sxs-lookup"><span data-stu-id="33672-260">To provide the identifer of the public IP address that you previously created, use [New-AzureRmLoadBalancerFrontendIpConfig](https://docs.microsoft.com/powershell/resourcemanager/AzureRM.Network/v1.0.13/New-AzureRmLoadBalancerFrontendIpConfig) with the **-PublicIpAddress** parameter.</span></span> <span data-ttu-id="33672-261">Use [New-AzureRmLoadBalancerBackendAddressPoolConfig](https://docs.microsoft.com/powershell/resourcemanager/AzureRM.Network/v1.0.13/New-AzureRmLoadBalancerBackendAddressPoolConfig) to create the configuration of the back-end address pool.</span><span class="sxs-lookup"><span data-stu-id="33672-261">Use [New-AzureRmLoadBalancerBackendAddressPoolConfig](https://docs.microsoft.com/powershell/resourcemanager/AzureRM.Network/v1.0.13/New-AzureRmLoadBalancerBackendAddressPoolConfig) to create the configuration of the back-end address pool.</span></span> <span data-ttu-id="33672-262">Use [New-AzureRmLoadBalancerInboundNatRuleConfig](https://docs.microsoft.com/powershell/resourcemanager/AzureRM.Network/v1.0.13/New-AzureRmLoadBalancerInboundNatRuleConfig) to create inbound NAT rules associated with the front-end IP configuration that you created.</span><span class="sxs-lookup"><span data-stu-id="33672-262">Use [New-AzureRmLoadBalancerInboundNatRuleConfig](https://docs.microsoft.com/powershell/resourcemanager/AzureRM.Network/v1.0.13/New-AzureRmLoadBalancerInboundNatRuleConfig) to create inbound NAT rules associated with the front-end IP configuration that you created.</span></span> <span data-ttu-id="33672-263">Use [New-AzureRmLoadBalancerProbeConfig](https://docs.microsoft.com/powershell/resourcemanager/AzureRM.Network/v1.0.13/New-AzureRmLoadBalancerProbeConfig) to create the probes that you need.</span><span class="sxs-lookup"><span data-stu-id="33672-263">Use [New-AzureRmLoadBalancerProbeConfig](https://docs.microsoft.com/powershell/resourcemanager/AzureRM.Network/v1.0.13/New-AzureRmLoadBalancerProbeConfig) to create the probes that you need.</span></span> <span data-ttu-id="33672-264">Use [New-AzureRmLoadBalancerRuleConfig](https://docs.microsoft.com/powershell/resourcemanager/AzureRM.Network/v1.0.13/New-AzureRmLoadBalancerRuleConfig) to create the load balancer configuration.</span><span class="sxs-lookup"><span data-stu-id="33672-264">Use [New-AzureRmLoadBalancerRuleConfig](https://docs.microsoft.com/powershell/resourcemanager/AzureRM.Network/v1.0.13/New-AzureRmLoadBalancerRuleConfig) to create the load balancer configuration.</span></span> <span data-ttu-id="33672-265">Use [New-AzureRmLoadBalancer](https://docs.microsoft.com/powershell/resourcemanager/AzureRM.Network/v1.0.13/New-AzureRmLoadBalancer) to create the load balancer.</span><span class="sxs-lookup"><span data-stu-id="33672-265">Use [New-AzureRmLoadBalancer](https://docs.microsoft.com/powershell/resourcemanager/AzureRM.Network/v1.0.13/New-AzureRmLoadBalancer) to create the load balancer.</span></span>|
| [<span data-ttu-id="33672-266">Azure CLI</span><span class="sxs-lookup"><span data-stu-id="33672-266">Azure CLI</span></span>](../../load-balancer/load-balancer-get-started-internet-arm-cli.md) | <span data-ttu-id="33672-267">Use [az network lb create](https://docs.microsoft.com/cli/azure/network/lb#create) to create the initial load balancer configuration.</span><span class="sxs-lookup"><span data-stu-id="33672-267">Use [az network lb create](https://docs.microsoft.com/cli/azure/network/lb#create) to create the initial load balancer configuration.</span></span> <span data-ttu-id="33672-268">Use [az network lb frontend-ip create](https://docs.microsoft.com/cli/azure/network/lb/frontend-ip#create) to add the public IP address that you previously created.</span><span class="sxs-lookup"><span data-stu-id="33672-268">Use [az network lb frontend-ip create](https://docs.microsoft.com/cli/azure/network/lb/frontend-ip#create) to add the public IP address that you previously created.</span></span> <span data-ttu-id="33672-269">Use [az network lb address-pool create](https://docs.microsoft.com/cli/azure/network/lb/address-pool#create) to add the configuration of the back-end address pool.</span><span class="sxs-lookup"><span data-stu-id="33672-269">Use [az network lb address-pool create](https://docs.microsoft.com/cli/azure/network/lb/address-pool#create) to add the configuration of the back-end address pool.</span></span> <span data-ttu-id="33672-270">Use [az network lb inbound-nat-rule create](https://docs.microsoft.com/cli/azure/network/lb/inbound-nat-rule#create) to add NAT rules.</span><span class="sxs-lookup"><span data-stu-id="33672-270">Use [az network lb inbound-nat-rule create](https://docs.microsoft.com/cli/azure/network/lb/inbound-nat-rule#create) to add NAT rules.</span></span> <span data-ttu-id="33672-271">Use [az network lb rule create](https://docs.microsoft.com/cli/azure/network/lb/rule#create) to add the load balancer rules.</span><span class="sxs-lookup"><span data-stu-id="33672-271">Use [az network lb rule create](https://docs.microsoft.com/cli/azure/network/lb/rule#create) to add the load balancer rules.</span></span> <span data-ttu-id="33672-272">Use [az network lb probe create](https://docs.microsoft.com/cli/azure/network/lb/probe#create) to add the probes.</span><span class="sxs-lookup"><span data-stu-id="33672-272">Use [az network lb probe create](https://docs.microsoft.com/cli/azure/network/lb/probe#create) to add the probes.</span></span> |
| [<span data-ttu-id="33672-273">Template</span><span class="sxs-lookup"><span data-stu-id="33672-273">Template</span></span>](../../load-balancer/load-balancer-get-started-internet-arm-template.md) | <span data-ttu-id="33672-274">Use [2 VMs in a Load Balancer and configure NAT rules on the LB](https://github.com/Azure/azure-quickstart-templates/tree/master/201-2-vms-loadbalancer-natrules) as a guide for deploying a load balancer using a template.</span><span class="sxs-lookup"><span data-stu-id="33672-274">Use [2 VMs in a Load Balancer and configure NAT rules on the LB](https://github.com/Azure/azure-quickstart-templates/tree/master/201-2-vms-loadbalancer-natrules) as a guide for deploying a load balancer using a template.</span></span> |
    
<span data-ttu-id="33672-275">This table lists the methods that you can use to create an internal load balancer.</span><span class="sxs-lookup"><span data-stu-id="33672-275">This table lists the methods that you can use to create an internal load balancer.</span></span>

| <span data-ttu-id="33672-276">Method</span><span class="sxs-lookup"><span data-stu-id="33672-276">Method</span></span> | <span data-ttu-id="33672-277">Description</span><span class="sxs-lookup"><span data-stu-id="33672-277">Description</span></span> |
| ------ | ----------- |
| <span data-ttu-id="33672-278">Azure portal</span><span class="sxs-lookup"><span data-stu-id="33672-278">Azure portal</span></span> | <span data-ttu-id="33672-279">You can't currently create an internal load balancer using the Azure portal.</span><span class="sxs-lookup"><span data-stu-id="33672-279">You can't currently create an internal load balancer using the Azure portal.</span></span> |
| [<span data-ttu-id="33672-280">Azure PowerShell</span><span class="sxs-lookup"><span data-stu-id="33672-280">Azure PowerShell</span></span>](../../load-balancer/load-balancer-get-started-ilb-arm-ps.md) | <span data-ttu-id="33672-281">To provide a private IP address in the network subnet, use [New-AzureRmLoadBalancerFrontendIpConfig](https://docs.microsoft.com/powershell/resourcemanager/AzureRM.Network/v1.0.13/New-AzureRmLoadBalancerFrontendIpConfig) with the **-PrivateIpAddress** parameter.</span><span class="sxs-lookup"><span data-stu-id="33672-281">To provide a private IP address in the network subnet, use [New-AzureRmLoadBalancerFrontendIpConfig](https://docs.microsoft.com/powershell/resourcemanager/AzureRM.Network/v1.0.13/New-AzureRmLoadBalancerFrontendIpConfig) with the **-PrivateIpAddress** parameter.</span></span> <span data-ttu-id="33672-282">Use [New-AzureRmLoadBalancerBackendAddressPoolConfig](https://docs.microsoft.com/powershell/resourcemanager/AzureRM.Network/v1.0.13/New-AzureRmLoadBalancerBackendAddressPoolConfig) to create the configuration of the back-end address pool.</span><span class="sxs-lookup"><span data-stu-id="33672-282">Use [New-AzureRmLoadBalancerBackendAddressPoolConfig](https://docs.microsoft.com/powershell/resourcemanager/AzureRM.Network/v1.0.13/New-AzureRmLoadBalancerBackendAddressPoolConfig) to create the configuration of the back-end address pool.</span></span> <span data-ttu-id="33672-283">Use [New-AzureRmLoadBalancerInboundNatRuleConfig](https://docs.microsoft.com/powershell/resourcemanager/AzureRM.Network/v1.0.13/New-AzureRmLoadBalancerInboundNatRuleConfig) to create inbound NAT rules associated with the front-end IP configuration that you created.</span><span class="sxs-lookup"><span data-stu-id="33672-283">Use [New-AzureRmLoadBalancerInboundNatRuleConfig](https://docs.microsoft.com/powershell/resourcemanager/AzureRM.Network/v1.0.13/New-AzureRmLoadBalancerInboundNatRuleConfig) to create inbound NAT rules associated with the front-end IP configuration that you created.</span></span> <span data-ttu-id="33672-284">Use [New-AzureRmLoadBalancerProbeConfig](https://docs.microsoft.com/powershell/resourcemanager/AzureRM.Network/v1.0.13/New-AzureRmLoadBalancerProbeConfig) to create the probes that you need.</span><span class="sxs-lookup"><span data-stu-id="33672-284">Use [New-AzureRmLoadBalancerProbeConfig](https://docs.microsoft.com/powershell/resourcemanager/AzureRM.Network/v1.0.13/New-AzureRmLoadBalancerProbeConfig) to create the probes that you need.</span></span> <span data-ttu-id="33672-285">Use [New-AzureRmLoadBalancerRuleConfig](https://docs.microsoft.com/powershell/resourcemanager/AzureRM.Network/v1.0.13/New-AzureRmLoadBalancerRuleConfig) to create the load balancer configuration.</span><span class="sxs-lookup"><span data-stu-id="33672-285">Use [New-AzureRmLoadBalancerRuleConfig](https://docs.microsoft.com/powershell/resourcemanager/AzureRM.Network/v1.0.13/New-AzureRmLoadBalancerRuleConfig) to create the load balancer configuration.</span></span> <span data-ttu-id="33672-286">Use [New-AzureRmLoadBalancer](https://docs.microsoft.com/powershell/resourcemanager/AzureRM.Network/v1.0.13/New-AzureRmLoadBalancer) to create the load balancer.</span><span class="sxs-lookup"><span data-stu-id="33672-286">Use [New-AzureRmLoadBalancer](https://docs.microsoft.com/powershell/resourcemanager/AzureRM.Network/v1.0.13/New-AzureRmLoadBalancer) to create the load balancer.</span></span>|
| [<span data-ttu-id="33672-287">Azure CLI</span><span class="sxs-lookup"><span data-stu-id="33672-287">Azure CLI</span></span>](../../load-balancer/load-balancer-get-started-ilb-arm-cli.md) | <span data-ttu-id="33672-288">Use the [az network lb create](https://docs.microsoft.com/cli/azure/network/lb#create) command to create the initial load balancer configuration.</span><span class="sxs-lookup"><span data-stu-id="33672-288">Use the [az network lb create](https://docs.microsoft.com/cli/azure/network/lb#create) command to create the initial load balancer configuration.</span></span> <span data-ttu-id="33672-289">To define the private IP address, use [az network lb frontend-ip create](https://docs.microsoft.com/cli/azure/network/lb/frontend-ip#create) with the **--private-ip-address** parameter.</span><span class="sxs-lookup"><span data-stu-id="33672-289">To define the private IP address, use [az network lb frontend-ip create](https://docs.microsoft.com/cli/azure/network/lb/frontend-ip#create) with the **--private-ip-address** parameter.</span></span> <span data-ttu-id="33672-290">Use [az network lb address-pool create](https://docs.microsoft.com/cli/azure/network/lb/address-pool#create) to add the configuration of the back-end address pool.</span><span class="sxs-lookup"><span data-stu-id="33672-290">Use [az network lb address-pool create](https://docs.microsoft.com/cli/azure/network/lb/address-pool#create) to add the configuration of the back-end address pool.</span></span> <span data-ttu-id="33672-291">Use [az network lb inbound-nat-rule create](https://docs.microsoft.com/cli/azure/network/lb/inbound-nat-rule#create) to add NAT rules.</span><span class="sxs-lookup"><span data-stu-id="33672-291">Use [az network lb inbound-nat-rule create](https://docs.microsoft.com/cli/azure/network/lb/inbound-nat-rule#create) to add NAT rules.</span></span> <span data-ttu-id="33672-292">Use [az network lb rule create](https://docs.microsoft.com/cli/azure/network/lb/rule#create) to add the load balancer rules.</span><span class="sxs-lookup"><span data-stu-id="33672-292">Use [az network lb rule create](https://docs.microsoft.com/cli/azure/network/lb/rule#create) to add the load balancer rules.</span></span> <span data-ttu-id="33672-293">Use [az network lb probe create](https://docs.microsoft.com/cli/azure/network/lb/probe#create) to add the probes.</span><span class="sxs-lookup"><span data-stu-id="33672-293">Use [az network lb probe create](https://docs.microsoft.com/cli/azure/network/lb/probe#create) to add the probes.</span></span>|
| [<span data-ttu-id="33672-294">Template</span><span class="sxs-lookup"><span data-stu-id="33672-294">Template</span></span>](../../load-balancer/load-balancer-get-started-ilb-arm-template.md) | <span data-ttu-id="33672-295">Use [2 VMs in a Load Balancer and configure NAT rules on the LB](https://github.com/Azure/azure-quickstart-templates/tree/master/201-2-vms-internal-load-balancer) as a guide for deploying a load balancer using a template.</span><span class="sxs-lookup"><span data-stu-id="33672-295">Use [2 VMs in a Load Balancer and configure NAT rules on the LB](https://github.com/Azure/azure-quickstart-templates/tree/master/201-2-vms-internal-load-balancer) as a guide for deploying a load balancer using a template.</span></span> |

## <a name="vms"></a><span data-ttu-id="33672-296">VMs</span><span class="sxs-lookup"><span data-stu-id="33672-296">VMs</span></span>

<span data-ttu-id="33672-297">VMs can be created in the same VNet and they can connect to each other using private IP addresses.</span><span class="sxs-lookup"><span data-stu-id="33672-297">VMs can be created in the same VNet and they can connect to each other using private IP addresses.</span></span> <span data-ttu-id="33672-298">They can connect even if they are in different subnets without the need to configure a gateway or use public IP addresses.</span><span class="sxs-lookup"><span data-stu-id="33672-298">They can connect even if they are in different subnets without the need to configure a gateway or use public IP addresses.</span></span> <span data-ttu-id="33672-299">To put VMs into a VNet, you create the VNet and then as you create each VM, you assign it to the VNet and subnet.</span><span class="sxs-lookup"><span data-stu-id="33672-299">To put VMs into a VNet, you create the VNet and then as you create each VM, you assign it to the VNet and subnet.</span></span> <span data-ttu-id="33672-300">VMs acquire their network settings during deployment or startup.</span><span class="sxs-lookup"><span data-stu-id="33672-300">VMs acquire their network settings during deployment or startup.</span></span>  

<span data-ttu-id="33672-301">VMs are assigned an IP address when they are deployed.</span><span class="sxs-lookup"><span data-stu-id="33672-301">VMs are assigned an IP address when they are deployed.</span></span> <span data-ttu-id="33672-302">If you deploy multiple VMs into a VNet or subnet, they are assigned IP addresses as they boot up.</span><span class="sxs-lookup"><span data-stu-id="33672-302">If you deploy multiple VMs into a VNet or subnet, they are assigned IP addresses as they boot up.</span></span> <span data-ttu-id="33672-303">A dynamic IP address (DIP) is the internal IP address associated with a VM.</span><span class="sxs-lookup"><span data-stu-id="33672-303">A dynamic IP address (DIP) is the internal IP address associated with a VM.</span></span> <span data-ttu-id="33672-304">You can allocate a static DIP to a VM.</span><span class="sxs-lookup"><span data-stu-id="33672-304">You can allocate a static DIP to a VM.</span></span> <span data-ttu-id="33672-305">If you allocate a static DIP, you should consider using a specific subnet to avoid accidentally reusing a static DIP for another VM.</span><span class="sxs-lookup"><span data-stu-id="33672-305">If you allocate a static DIP, you should consider using a specific subnet to avoid accidentally reusing a static DIP for another VM.</span></span>  

<span data-ttu-id="33672-306">If you create a VM and later want to migrate it into a VNet, it is not a simple configuration change.</span><span class="sxs-lookup"><span data-stu-id="33672-306">If you create a VM and later want to migrate it into a VNet, it is not a simple configuration change.</span></span> <span data-ttu-id="33672-307">You must redeploy the VM into the VNet.</span><span class="sxs-lookup"><span data-stu-id="33672-307">You must redeploy the VM into the VNet.</span></span> <span data-ttu-id="33672-308">The easiest way to redeploy is to delete the VM, but not any disks attached to it, and then re-create the VM using the original disks in the VNet.</span><span class="sxs-lookup"><span data-stu-id="33672-308">The easiest way to redeploy is to delete the VM, but not any disks attached to it, and then re-create the VM using the original disks in the VNet.</span></span> 

<span data-ttu-id="33672-309">This table lists the methods that you can use to create a VM in a VNet.</span><span class="sxs-lookup"><span data-stu-id="33672-309">This table lists the methods that you can use to create a VM in a VNet.</span></span>

| <span data-ttu-id="33672-310">Method</span><span class="sxs-lookup"><span data-stu-id="33672-310">Method</span></span> | <span data-ttu-id="33672-311">Description</span><span class="sxs-lookup"><span data-stu-id="33672-311">Description</span></span> |
| ------ | ----------- |
| [<span data-ttu-id="33672-312">Azure portal</span><span class="sxs-lookup"><span data-stu-id="33672-312">Azure portal</span></span>](../virtual-machines-windows-hero-tutorial.md) | <span data-ttu-id="33672-313">Uses the default network settings that were previously mentioned to create a VM with a single NIC.</span><span class="sxs-lookup"><span data-stu-id="33672-313">Uses the default network settings that were previously mentioned to create a VM with a single NIC.</span></span> <span data-ttu-id="33672-314">To create a VM with multiple NICs, you must use a different method.</span><span class="sxs-lookup"><span data-stu-id="33672-314">To create a VM with multiple NICs, you must use a different method.</span></span> |
| [<span data-ttu-id="33672-315">Azure PowerShell</span><span class="sxs-lookup"><span data-stu-id="33672-315">Azure PowerShell</span></span>](../virtual-machines-windows-ps-create.md) | <span data-ttu-id="33672-316">Includes the use of [Add-AzureRmVMNetworkInterface](https://docs.microsoft.com/powershell/resourcemanager/azurerm.compute/v1.3.4/Add-AzureRmVMNetworkInterface) to add the NIC that you previously created to the VM configuration.</span><span class="sxs-lookup"><span data-stu-id="33672-316">Includes the use of [Add-AzureRmVMNetworkInterface](https://docs.microsoft.com/powershell/resourcemanager/azurerm.compute/v1.3.4/Add-AzureRmVMNetworkInterface) to add the NIC that you previously created to the VM configuration.</span></span> |
| [<span data-ttu-id="33672-317">Template</span><span class="sxs-lookup"><span data-stu-id="33672-317">Template</span></span>](ps-template.md) | <span data-ttu-id="33672-318">Use [Very simple deployment of a Windows VM](https://github.com/Azure/azure-quickstart-templates/tree/master/101-vm-simple-windows) as a guide for deploying a VM using a template.</span><span class="sxs-lookup"><span data-stu-id="33672-318">Use [Very simple deployment of a Windows VM](https://github.com/Azure/azure-quickstart-templates/tree/master/101-vm-simple-windows) as a guide for deploying a VM using a template.</span></span> |

## <a name="next-steps"></a><span data-ttu-id="33672-319">Next steps</span><span class="sxs-lookup"><span data-stu-id="33672-319">Next steps</span></span>

- <span data-ttu-id="33672-320">Learn how to configure [user-defined routes and IP forwarding](../../virtual-network/virtual-networks-udr-overview.md).</span><span class="sxs-lookup"><span data-stu-id="33672-320">Learn how to configure [user-defined routes and IP forwarding](../../virtual-network/virtual-networks-udr-overview.md).</span></span> 
- <span data-ttu-id="33672-321">Learn how to configure [VNet to VNet connections](../../vpn-gateway/vpn-gateway-vnet-vnet-rm-ps.md).</span><span class="sxs-lookup"><span data-stu-id="33672-321">Learn how to configure [VNet to VNet connections](../../vpn-gateway/vpn-gateway-vnet-vnet-rm-ps.md).</span></span>
- <span data-ttu-id="33672-322">Learn how to [Troubleshoot routes](../../virtual-network/virtual-network-routes-troubleshoot-portal.md).</span><span class="sxs-lookup"><span data-stu-id="33672-322">Learn how to [Troubleshoot routes](../../virtual-network/virtual-network-routes-troubleshoot-portal.md).</span></span>

