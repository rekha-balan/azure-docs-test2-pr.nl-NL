---
title: Backup and Restore for SQL Server | Microsoft Docs
description: Describes backup and restore considerations for SQL Server databases running on Azure Virtual Machines.
services: virtual-machines-windows
documentationcenter: na
author: rothja
manager: jhubbard
editor: ''
tags: azure-resource-management
ms.assetid: 95a89072-0edf-49b5-88ed-584891c0e066
ms.service: virtual-machines-sql
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: vm-windows-sql-server
ms.workload: iaas-sql-server
ms.date: 11/15/2016
ms.author: jroth
ms.openlocfilehash: f05ef18fb33942883ba164985721ce2d4f79d3fa
ms.sourcegitcommit: 5b9d839c0c0a94b293fdafe1d6e5429506c07e05
ms.translationtype: HT
ms.contentlocale: nl-NL
ms.lasthandoff: 08/02/2018
ms.locfileid: "44552648"
---
# <a name="backup-and-restore-for-sql-server-in-azure-virtual-machines"></a><span data-ttu-id="193d5-103">Backup and Restore for SQL Server in Azure Virtual Machines</span><span class="sxs-lookup"><span data-stu-id="193d5-103">Backup and Restore for SQL Server in Azure Virtual Machines</span></span>
## <a name="overview"></a><span data-ttu-id="193d5-104">Overview</span><span class="sxs-lookup"><span data-stu-id="193d5-104">Overview</span></span>
<span data-ttu-id="193d5-105">Azure Storage maintains 3 copies of every Azure VM disk to guarantee protection against data loss or physical data corruption.</span><span class="sxs-lookup"><span data-stu-id="193d5-105">Azure Storage maintains 3 copies of every Azure VM disk to guarantee protection against data loss or physical data corruption.</span></span> <span data-ttu-id="193d5-106">Thus, unlike on-premises, you don't need to worry about these.</span><span class="sxs-lookup"><span data-stu-id="193d5-106">Thus, unlike on-premises, you don't need to worry about these.</span></span> <span data-ttu-id="193d5-107">However, you should still backup your SQL Server databases to protect against application or user errors (e.g inserting wrong data or deleting a table) and being able to restore to a point in time.</span><span class="sxs-lookup"><span data-stu-id="193d5-107">However, you should still backup your SQL Server databases to protect against application or user errors (e.g inserting wrong data or deleting a table) and being able to restore to a point in time.</span></span>

[!INCLUDE [learn-about-deployment-models](../../../../includes/learn-about-deployment-models-both-include.md)]

<span data-ttu-id="193d5-108">For SQL Server running in Azure VMs, you can use native backup and restore techniques using attached disks for the destination of the backup files.</span><span class="sxs-lookup"><span data-stu-id="193d5-108">For SQL Server running in Azure VMs, you can use native backup and restore techniques using attached disks for the destination of the backup files.</span></span> <span data-ttu-id="193d5-109">However, there is a limit to the number of disks you can attach to an Azure virtual machine, based on the [size of the virtual machine](../sizes.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="193d5-109">However, there is a limit to the number of disks you can attach to an Azure virtual machine, based on the [size of the virtual machine](../sizes.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span></span> <span data-ttu-id="193d5-110">There is also the overhead of disk management to consider.</span><span class="sxs-lookup"><span data-stu-id="193d5-110">There is also the overhead of disk management to consider.</span></span>

<span data-ttu-id="193d5-111">Beginning with SQL Server 2014, you can back up and restore to Microsoft Azure Blob storage.</span><span class="sxs-lookup"><span data-stu-id="193d5-111">Beginning with SQL Server 2014, you can back up and restore to Microsoft Azure Blob storage.</span></span> <span data-ttu-id="193d5-112">SQL Server 2016 also provides enhancements for this option.</span><span class="sxs-lookup"><span data-stu-id="193d5-112">SQL Server 2016 also provides enhancements for this option.</span></span> <span data-ttu-id="193d5-113">In addition, for database files stored in Microsoft Azure Blob storage, SQL Server 2016 provides an option for nearly instantaneous backups and for rapid restores using Azure snapshots.</span><span class="sxs-lookup"><span data-stu-id="193d5-113">In addition, for database files stored in Microsoft Azure Blob storage, SQL Server 2016 provides an option for nearly instantaneous backups and for rapid restores using Azure snapshots.</span></span> <span data-ttu-id="193d5-114">This article provides an overview of these options, and additional information can be found at [SQL Server Backup and Restore with Microsoft Azure Blob Storage Service](https://msdn.microsoft.com/library/jj919148.aspx).</span><span class="sxs-lookup"><span data-stu-id="193d5-114">This article provides an overview of these options, and additional information can be found at [SQL Server Backup and Restore with Microsoft Azure Blob Storage Service](https://msdn.microsoft.com/library/jj919148.aspx).</span></span>

> [!NOTE]
> <span data-ttu-id="193d5-115">For a discussion of the options for backing up very large databases, see [Multi-Terabyte SQL Server Database Backup Strategies for Azure Virtual Machines](http://blogs.msdn.com/b/igorpag/archive/2015/07/28/multi-terabyte-sql-server-database-backup-strategies-for-azure-virtual-machines.aspx).</span><span class="sxs-lookup"><span data-stu-id="193d5-115">For a discussion of the options for backing up very large databases, see [Multi-Terabyte SQL Server Database Backup Strategies for Azure Virtual Machines](http://blogs.msdn.com/b/igorpag/archive/2015/07/28/multi-terabyte-sql-server-database-backup-strategies-for-azure-virtual-machines.aspx).</span></span>
> 
> 

<span data-ttu-id="193d5-116">The sections below include information specific to the different versions of SQL Server supported in an Azure virtual machine.</span><span class="sxs-lookup"><span data-stu-id="193d5-116">The sections below include information specific to the different versions of SQL Server supported in an Azure virtual machine.</span></span>

## <a name="sql-server-virtual-machines"></a><span data-ttu-id="193d5-117">SQL Server Virtual Machines</span><span class="sxs-lookup"><span data-stu-id="193d5-117">SQL Server Virtual Machines</span></span>
<span data-ttu-id="193d5-118">When your SQL Server instance is running on an Azure Virtual Machine, your database files already reside on data disks in Azure.</span><span class="sxs-lookup"><span data-stu-id="193d5-118">When your SQL Server instance is running on an Azure Virtual Machine, your database files already reside on data disks in Azure.</span></span> <span data-ttu-id="193d5-119">These disks live in Azure Blob storage.</span><span class="sxs-lookup"><span data-stu-id="193d5-119">These disks live in Azure Blob storage.</span></span> <span data-ttu-id="193d5-120">So the reasons for backing up your database and the approaches you take change slightly.</span><span class="sxs-lookup"><span data-stu-id="193d5-120">So the reasons for backing up your database and the approaches you take change slightly.</span></span> <span data-ttu-id="193d5-121">Consider the following.</span><span class="sxs-lookup"><span data-stu-id="193d5-121">Consider the following.</span></span> 

* <span data-ttu-id="193d5-122">You no longer need to perform database backups to provide protection against hardware or media failure because Microsoft Azure provides this protection as part of the Microsoft Azure service.</span><span class="sxs-lookup"><span data-stu-id="193d5-122">You no longer need to perform database backups to provide protection against hardware or media failure because Microsoft Azure provides this protection as part of the Microsoft Azure service.</span></span>
* <span data-ttu-id="193d5-123">You still need to perform database backups to provide protection against user errors, or for archival purposes, regulatory reasons, or administrative purposes.</span><span class="sxs-lookup"><span data-stu-id="193d5-123">You still need to perform database backups to provide protection against user errors, or for archival purposes, regulatory reasons, or administrative purposes.</span></span>
* <span data-ttu-id="193d5-124">You can store the backup file directly in Azure.</span><span class="sxs-lookup"><span data-stu-id="193d5-124">You can store the backup file directly in Azure.</span></span> <span data-ttu-id="193d5-125">For more information, see the following sections that provide guidance for the different versions of SQL Server.</span><span class="sxs-lookup"><span data-stu-id="193d5-125">For more information, see the following sections that provide guidance for the different versions of SQL Server.</span></span>

## <a name="sql-server-2016"></a><span data-ttu-id="193d5-126">SQL Server 2016</span><span class="sxs-lookup"><span data-stu-id="193d5-126">SQL Server 2016</span></span>
<span data-ttu-id="193d5-127">Microsoft SQL Server 2016 supports [backup and restore with Azure blobs](https://msdn.microsoft.com/library/jj919148.aspx) features found in SQL Server 2014.</span><span class="sxs-lookup"><span data-stu-id="193d5-127">Microsoft SQL Server 2016 supports [backup and restore with Azure blobs](https://msdn.microsoft.com/library/jj919148.aspx) features found in SQL Server 2014.</span></span> <span data-ttu-id="193d5-128">But it also includes the following enhancements:</span><span class="sxs-lookup"><span data-stu-id="193d5-128">But it also includes the following enhancements:</span></span>

| <span data-ttu-id="193d5-129">2016 Enhancement</span><span class="sxs-lookup"><span data-stu-id="193d5-129">2016 Enhancement</span></span> | <span data-ttu-id="193d5-130">Details</span><span class="sxs-lookup"><span data-stu-id="193d5-130">Details</span></span> |
| --- | --- |
| <span data-ttu-id="193d5-131">**Striping**</span><span class="sxs-lookup"><span data-stu-id="193d5-131">**Striping**</span></span> |<span data-ttu-id="193d5-132">When backing up to Microsoft Azure blob storage, SQL Server 2016 supports backing up to multiple blobs to enable backing up large databases, up to a maximum of 12.8 TB.</span><span class="sxs-lookup"><span data-stu-id="193d5-132">When backing up to Microsoft Azure blob storage, SQL Server 2016 supports backing up to multiple blobs to enable backing up large databases, up to a maximum of 12.8 TB.</span></span> |
| <span data-ttu-id="193d5-133">**Snapshot Backup**</span><span class="sxs-lookup"><span data-stu-id="193d5-133">**Snapshot Backup**</span></span> |<span data-ttu-id="193d5-134">Through the use of Azure snapshots, SQL Server File-Snapshot Backup provides nearly instantaneous backups and rapid restores for database files stored using the Azure Blob storage service.</span><span class="sxs-lookup"><span data-stu-id="193d5-134">Through the use of Azure snapshots, SQL Server File-Snapshot Backup provides nearly instantaneous backups and rapid restores for database files stored using the Azure Blob storage service.</span></span> <span data-ttu-id="193d5-135">This capability enables you to simplify your backup and restore policies.</span><span class="sxs-lookup"><span data-stu-id="193d5-135">This capability enables you to simplify your backup and restore policies.</span></span> <span data-ttu-id="193d5-136">File-snapshot backup also supports point in time restore.</span><span class="sxs-lookup"><span data-stu-id="193d5-136">File-snapshot backup also supports point in time restore.</span></span> <span data-ttu-id="193d5-137">For more information, see [Snapshot Backups for Database Files in Azure](https://msdn.microsoft.com/library/mt169363%28v=sql.130%29.aspx).</span><span class="sxs-lookup"><span data-stu-id="193d5-137">For more information, see [Snapshot Backups for Database Files in Azure](https://msdn.microsoft.com/library/mt169363%28v=sql.130%29.aspx).</span></span> |
| <span data-ttu-id="193d5-138">**Managed Backup Scheduling**</span><span class="sxs-lookup"><span data-stu-id="193d5-138">**Managed Backup Scheduling**</span></span> |<span data-ttu-id="193d5-139">SQL Server Managed Backup to Azure now supports custom schedules.</span><span class="sxs-lookup"><span data-stu-id="193d5-139">SQL Server Managed Backup to Azure now supports custom schedules.</span></span> <span data-ttu-id="193d5-140">For more information, see [SQL Server Managed Backup to Microsoft Azure](https://msdn.microsoft.com/library/dn449496.aspx).</span><span class="sxs-lookup"><span data-stu-id="193d5-140">For more information, see [SQL Server Managed Backup to Microsoft Azure](https://msdn.microsoft.com/library/dn449496.aspx).</span></span> |

<span data-ttu-id="193d5-141">For a tutorial of the capabilities of SQL Server 2016 when using Azure Blob storage, see [Tutorial: Using the Microsoft Azure Blob storage service with SQL Server 2016 databases](https://msdn.microsoft.com/library/dn466438.aspx).</span><span class="sxs-lookup"><span data-stu-id="193d5-141">For a tutorial of the capabilities of SQL Server 2016 when using Azure Blob storage, see [Tutorial: Using the Microsoft Azure Blob storage service with SQL Server 2016 databases](https://msdn.microsoft.com/library/dn466438.aspx).</span></span>

## <a name="sql-server-2014"></a><span data-ttu-id="193d5-142">SQL Server 2014</span><span class="sxs-lookup"><span data-stu-id="193d5-142">SQL Server 2014</span></span>
<span data-ttu-id="193d5-143">SQL Server 2014 includes the following enhancements:</span><span class="sxs-lookup"><span data-stu-id="193d5-143">SQL Server 2014 includes the following enhancements:</span></span>

1. <span data-ttu-id="193d5-144">**Backup and Restore to Azure**:</span><span class="sxs-lookup"><span data-stu-id="193d5-144">**Backup and Restore to Azure**:</span></span>
   
   * <span data-ttu-id="193d5-145">*SQL Server Backup to URL* now has support in SQL Server Management Studio.</span><span class="sxs-lookup"><span data-stu-id="193d5-145">*SQL Server Backup to URL* now has support in SQL Server Management Studio.</span></span> <span data-ttu-id="193d5-146">The option to back up to Azure is now available when using Backup or Restore task, or maintenance plan wizard in SQL Server Management Studio.</span><span class="sxs-lookup"><span data-stu-id="193d5-146">The option to back up to Azure is now available when using Backup or Restore task, or maintenance plan wizard in SQL Server Management Studio.</span></span> <span data-ttu-id="193d5-147">For more information, see [SQL Server Backup to URL](https://msdn.microsoft.com/library/jj919148%28v=sql.120%29.aspx).</span><span class="sxs-lookup"><span data-stu-id="193d5-147">For more information, see [SQL Server Backup to URL](https://msdn.microsoft.com/library/jj919148%28v=sql.120%29.aspx).</span></span>
   * <span data-ttu-id="193d5-148">*SQL Server Managed Backup to Azure* has new functionality that enables automated backup management.</span><span class="sxs-lookup"><span data-stu-id="193d5-148">*SQL Server Managed Backup to Azure* has new functionality that enables automated backup management.</span></span> <span data-ttu-id="193d5-149">This is especially useful for automating backup management for SQL Server 2014 instances running on an Azure Machine.</span><span class="sxs-lookup"><span data-stu-id="193d5-149">This is especially useful for automating backup management for SQL Server 2014 instances running on an Azure Machine.</span></span> <span data-ttu-id="193d5-150">For more information, see [SQL Server Managed Backup to Microsoft Azure](https://msdn.microsoft.com/library/dn449496%28v=sql.120%29.aspx).</span><span class="sxs-lookup"><span data-stu-id="193d5-150">For more information, see [SQL Server Managed Backup to Microsoft Azure](https://msdn.microsoft.com/library/dn449496%28v=sql.120%29.aspx).</span></span>
   * <span data-ttu-id="193d5-151">*Automated Backup* provides additional automation to automatically enable *SQL Server Managed Backup to Azure* on all existing and new databases for a SQL Server VM in Azure.</span><span class="sxs-lookup"><span data-stu-id="193d5-151">*Automated Backup* provides additional automation to automatically enable *SQL Server Managed Backup to Azure* on all existing and new databases for a SQL Server VM in Azure.</span></span> <span data-ttu-id="193d5-152">For more information, see [Automated Backup for SQL Server in Azure Virtual Machines](virtual-machines-windows-sql-automated-backup.md).</span><span class="sxs-lookup"><span data-stu-id="193d5-152">For more information, see [Automated Backup for SQL Server in Azure Virtual Machines](virtual-machines-windows-sql-automated-backup.md).</span></span>
   * <span data-ttu-id="193d5-153">For an overview of all the options for SQL Server 2014 Backup to Azure, see [SQL Server Backup and Restore with Microsoft Azure Blob Storage Service](https://msdn.microsoft.com/library/jj919148%28v=sql.120%29.aspx).</span><span class="sxs-lookup"><span data-stu-id="193d5-153">For an overview of all the options for SQL Server 2014 Backup to Azure, see [SQL Server Backup and Restore with Microsoft Azure Blob Storage Service](https://msdn.microsoft.com/library/jj919148%28v=sql.120%29.aspx).</span></span>
2. <span data-ttu-id="193d5-154">**Encryption**: SQL Server 2014 supports encrypting data when creating a backup.</span><span class="sxs-lookup"><span data-stu-id="193d5-154">**Encryption**: SQL Server 2014 supports encrypting data when creating a backup.</span></span> <span data-ttu-id="193d5-155">It supports several encryption algorithms and the use osf a certificate or asymmetric key.</span><span class="sxs-lookup"><span data-stu-id="193d5-155">It supports several encryption algorithms and the use osf a certificate or asymmetric key.</span></span> <span data-ttu-id="193d5-156">For more information, see [Backup Encryption](https://msdn.microsoft.com/library/dn449489%28v=sql.120%29.aspx).</span><span class="sxs-lookup"><span data-stu-id="193d5-156">For more information, see [Backup Encryption](https://msdn.microsoft.com/library/dn449489%28v=sql.120%29.aspx).</span></span>

## <a name="sql-server-2012"></a><span data-ttu-id="193d5-157">SQL Server 2012</span><span class="sxs-lookup"><span data-stu-id="193d5-157">SQL Server 2012</span></span>
<span data-ttu-id="193d5-158">For detailed information on SQL Server Backup and Restore in SQL Server 2012, see [Backup and Restore of SQL Server Databases (SQL Server 2012)](https://msdn.microsoft.com/library/ms187048%28v=sql.110%29.aspx).</span><span class="sxs-lookup"><span data-stu-id="193d5-158">For detailed information on SQL Server Backup and Restore in SQL Server 2012, see [Backup and Restore of SQL Server Databases (SQL Server 2012)](https://msdn.microsoft.com/library/ms187048%28v=sql.110%29.aspx).</span></span>

<span data-ttu-id="193d5-159">Starting in SQL Server 2012 SP1 Cumulative Update 2, you can back up to and restore from the Azure Blob Storage service.</span><span class="sxs-lookup"><span data-stu-id="193d5-159">Starting in SQL Server 2012 SP1 Cumulative Update 2, you can back up to and restore from the Azure Blob Storage service.</span></span> <span data-ttu-id="193d5-160">This enhancement can be used to back up SQL Server databases on a SQL Server running on an Azure Virtual Machine or an on-premises instance.</span><span class="sxs-lookup"><span data-stu-id="193d5-160">This enhancement can be used to back up SQL Server databases on a SQL Server running on an Azure Virtual Machine or an on-premises instance.</span></span> <span data-ttu-id="193d5-161">For more information, see [SQL Server Backup and Restore with Azure Blob Storage Service](https://msdn.microsoft.com/library/jj919148%28v=sql.110%29.aspx).</span><span class="sxs-lookup"><span data-stu-id="193d5-161">For more information, see [SQL Server Backup and Restore with Azure Blob Storage Service](https://msdn.microsoft.com/library/jj919148%28v=sql.110%29.aspx).</span></span>

<span data-ttu-id="193d5-162">Some of the benefits of using the Azure Blob storage service include the ability to bypass the 16 disk limit for attached disks, ease of management, the direct availability of the backup file to another instance of SQL Server instance running on an Azure virtual machine, or an on-premises instance for migration or disaster recovery purposes.</span><span class="sxs-lookup"><span data-stu-id="193d5-162">Some of the benefits of using the Azure Blob storage service include the ability to bypass the 16 disk limit for attached disks, ease of management, the direct availability of the backup file to another instance of SQL Server instance running on an Azure virtual machine, or an on-premises instance for migration or disaster recovery purposes.</span></span> <span data-ttu-id="193d5-163">For a full list of benefits to using an Azure blob storage service for SQL Server backups, see the *Benefits* section in [SQL Server Backup and Restore with Azure Blob Storage Service](https://msdn.microsoft.com/library/jj919148%28v=sql.110%29.aspx).</span><span class="sxs-lookup"><span data-stu-id="193d5-163">For a full list of benefits to using an Azure blob storage service for SQL Server backups, see the *Benefits* section in [SQL Server Backup and Restore with Azure Blob Storage Service](https://msdn.microsoft.com/library/jj919148%28v=sql.110%29.aspx).</span></span>

<span data-ttu-id="193d5-164">For Best Practice recommendations and troubleshooting information, see [Backup and Restore Best Practices (Azure Blob Storage Service)](https://msdn.microsoft.com/library/jj919149%28v=sql.110%29.aspx).</span><span class="sxs-lookup"><span data-stu-id="193d5-164">For Best Practice recommendations and troubleshooting information, see [Backup and Restore Best Practices (Azure Blob Storage Service)](https://msdn.microsoft.com/library/jj919149%28v=sql.110%29.aspx).</span></span>

## <a name="sql-server-2008"></a><span data-ttu-id="193d5-165">SQL Server 2008</span><span class="sxs-lookup"><span data-stu-id="193d5-165">SQL Server 2008</span></span>
<span data-ttu-id="193d5-166">For SQL Server Backup and Restore in SQL Server 2008 R2, see [Backing up and Restoring Databases in SQL Server (SQL Server 2008 R2)](https://msdn.microsoft.com/library/ms187048%28v=sql.105%29.aspx).</span><span class="sxs-lookup"><span data-stu-id="193d5-166">For SQL Server Backup and Restore in SQL Server 2008 R2, see [Backing up and Restoring Databases in SQL Server (SQL Server 2008 R2)](https://msdn.microsoft.com/library/ms187048%28v=sql.105%29.aspx).</span></span>

<span data-ttu-id="193d5-167">For SQL Server Backup and Restore in SQL Server 2008, see [Backing up and Restoring Databases in SQL Server (SQL Server 2008)](https://msdn.microsoft.com/library/ms187048%28v=sql.100%29.aspx).</span><span class="sxs-lookup"><span data-stu-id="193d5-167">For SQL Server Backup and Restore in SQL Server 2008, see [Backing up and Restoring Databases in SQL Server (SQL Server 2008)](https://msdn.microsoft.com/library/ms187048%28v=sql.100%29.aspx).</span></span>

## <a name="next-steps"></a><span data-ttu-id="193d5-168">Next steps</span><span class="sxs-lookup"><span data-stu-id="193d5-168">Next steps</span></span>
<span data-ttu-id="193d5-169">If you are planning your deployment of SQL Server in an Azure VM, you can find provisioning guidance in the following tutorial: [Provisioning a SQL Server Virtual Machine on Azure with Azure Resource Manager](virtual-machines-windows-portal-sql-server-provision.md).</span><span class="sxs-lookup"><span data-stu-id="193d5-169">If you are planning your deployment of SQL Server in an Azure VM, you can find provisioning guidance in the following tutorial: [Provisioning a SQL Server Virtual Machine on Azure with Azure Resource Manager](virtual-machines-windows-portal-sql-server-provision.md).</span></span>

<span data-ttu-id="193d5-170">Although backup and restore can be used to migrate your data, there are potentially easier data migration paths to SQL Server on an Azure VM.</span><span class="sxs-lookup"><span data-stu-id="193d5-170">Although backup and restore can be used to migrate your data, there are potentially easier data migration paths to SQL Server on an Azure VM.</span></span> <span data-ttu-id="193d5-171">For a full discussion of migration options and recommendations, see [Migrating a Database to SQL Server on an Azure VM](virtual-machines-windows-migrate-sql.md).</span><span class="sxs-lookup"><span data-stu-id="193d5-171">For a full discussion of migration options and recommendations, see [Migrating a Database to SQL Server on an Azure VM](virtual-machines-windows-migrate-sql.md).</span></span>

<span data-ttu-id="193d5-172">Review other [resources for running SQL Server in Azure Virtual Machines](virtual-machines-windows-sql-server-iaas-overview.md).</span><span class="sxs-lookup"><span data-stu-id="193d5-172">Review other [resources for running SQL Server in Azure Virtual Machines](virtual-machines-windows-sql-server-iaas-overview.md).</span></span>

