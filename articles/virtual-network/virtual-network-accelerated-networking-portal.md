---
title: Accelerated networking for a virtual machine - Portal | Microsoft Docs
description: Learn how to configure Accelerated Networking for an Azure virtual machine using the Azure Portal.
services: virtual-network
documentationcenter: na
author: jimdial
manager: timlt
editor: ''
tags: azure-resource-manager
ms.assetid: af4515c6-4377-4d4a-a104-18fe1348252c
ms.service: virtual-network
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 09/26/2016
ms.author: jdial
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: 99d20e821cf5ff602cb6759f39eda6a0acd84a3a
ms.sourcegitcommit: 5b9d839c0c0a94b293fdafe1d6e5429506c07e05
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 08/02/2018
ms.locfileid: "44553934"
---
# <a name="accelerated-networking-for-a-virtual-machine-using-the-azure-portal"></a><span data-ttu-id="aa0a4-103">Accelerated networking for a virtual machine using the Azure portal</span><span class="sxs-lookup"><span data-stu-id="aa0a4-103">Accelerated networking for a virtual machine using the Azure portal</span></span>
> [!div class="op_single_selector"]
> * [Azure Portal](virtual-network-accelerated-networking-portal.md)
> * [PowerShell](virtual-network-accelerated-networking-powershell.md)
> 
> 

<span data-ttu-id="aa0a4-106">Accelerated Networking enables Single Root I/O Virtualization (SR-IOV) to a virtual machine (VM), greatly improving its networking performance.</span><span class="sxs-lookup"><span data-stu-id="aa0a4-106">Accelerated Networking enables Single Root I/O Virtualization (SR-IOV) to a virtual machine (VM), greatly improving its networking performance.</span></span> <span data-ttu-id="aa0a4-107">This high-performance path bypasses the host from the datapath reducing latency, jitter, and CPU utilization for use with the most demanding network workloads on supported VM types.</span><span class="sxs-lookup"><span data-stu-id="aa0a4-107">This high-performance path bypasses the host from the datapath reducing latency, jitter, and CPU utilization for use with the most demanding network workloads on supported VM types.</span></span> <span data-ttu-id="aa0a4-108">This article explains how to use the Azure Portal to configure Accelerated Networking in the Azure Resource Manager deployment model.</span><span class="sxs-lookup"><span data-stu-id="aa0a4-108">This article explains how to use the Azure Portal to configure Accelerated Networking in the Azure Resource Manager deployment model.</span></span> <span data-ttu-id="aa0a4-109">You can also create a VM with Accelerated Networking using Azure PowerShell.</span><span class="sxs-lookup"><span data-stu-id="aa0a4-109">You can also create a VM with Accelerated Networking using Azure PowerShell.</span></span> <span data-ttu-id="aa0a4-110">To learn how, click the PowerShell box at the top of this article.</span><span class="sxs-lookup"><span data-stu-id="aa0a4-110">To learn how, click the PowerShell box at the top of this article.</span></span>

<span data-ttu-id="aa0a4-111">The following picture shows communication between two virtual machines (VM) with and without Accelerated Networking:</span><span class="sxs-lookup"><span data-stu-id="aa0a4-111">The following picture shows communication between two virtual machines (VM) with and without Accelerated Networking:</span></span>

![Comparison](https://docstestmedia1.blob.core.windows.net/azure-media/articles/virtual-network/media/virtual-network-accelerated-networking-portal/image1.png)

<span data-ttu-id="aa0a4-113">Without Accelerated Networking, all networking traffic in and out of the VM must traverse the host and the virtual switch.</span><span class="sxs-lookup"><span data-stu-id="aa0a4-113">Without Accelerated Networking, all networking traffic in and out of the VM must traverse the host and the virtual switch.</span></span> <span data-ttu-id="aa0a4-114">The virtual switch provides all policy enforcement, such as network security groups, access control lists, isolation, and other network virtualized services to network traffic.</span><span class="sxs-lookup"><span data-stu-id="aa0a4-114">The virtual switch provides all policy enforcement, such as network security groups, access control lists, isolation, and other network virtualized services to network traffic.</span></span> <span data-ttu-id="aa0a4-115">To learn more, read the [Hyper-V Network Virtualization and Virtual Switch](https://technet.microsoft.com/library/jj945275.aspx) article.</span><span class="sxs-lookup"><span data-stu-id="aa0a4-115">To learn more, read the [Hyper-V Network Virtualization and Virtual Switch](https://technet.microsoft.com/library/jj945275.aspx) article.</span></span>

<span data-ttu-id="aa0a4-116">With Accelerated Networking, network traffic arrives at the network card (NIC) and is then forwarded to the VM.</span><span class="sxs-lookup"><span data-stu-id="aa0a4-116">With Accelerated Networking, network traffic arrives at the network card (NIC) and is then forwarded to the VM.</span></span> <span data-ttu-id="aa0a4-117">All network policies that the virtual switch applies without Accelerated Networking are offloaded and applied in hardware.</span><span class="sxs-lookup"><span data-stu-id="aa0a4-117">All network policies that the virtual switch applies without Accelerated Networking are offloaded and applied in hardware.</span></span> <span data-ttu-id="aa0a4-118">Applying policy in hardware enables the NIC to forward network traffic directly to the VM, bypassing the host and the virtual switch, while maintaining all the policy it applied in the host.</span><span class="sxs-lookup"><span data-stu-id="aa0a4-118">Applying policy in hardware enables the NIC to forward network traffic directly to the VM, bypassing the host and the virtual switch, while maintaining all the policy it applied in the host.</span></span>

<span data-ttu-id="aa0a4-119">The benefits of Accelerated Networking only apply to the VM that it is enabled on.</span><span class="sxs-lookup"><span data-stu-id="aa0a4-119">The benefits of Accelerated Networking only apply to the VM that it is enabled on.</span></span> <span data-ttu-id="aa0a4-120">For the best results, it is ideal to enable this feature on at least two VMs connected to the same VNet.</span><span class="sxs-lookup"><span data-stu-id="aa0a4-120">For the best results, it is ideal to enable this feature on at least two VMs connected to the same VNet.</span></span> <span data-ttu-id="aa0a4-121">When communicating across VNets or connecting on-premises, this feature has a minimal impact to overall latency.</span><span class="sxs-lookup"><span data-stu-id="aa0a4-121">When communicating across VNets or connecting on-premises, this feature has a minimal impact to overall latency.</span></span>

[!INCLUDE [virtual-network-preview](../../includes/virtual-network-preview.md)]

## <a name="benefits"></a><span data-ttu-id="aa0a4-122">Benefits</span><span class="sxs-lookup"><span data-stu-id="aa0a4-122">Benefits</span></span>
* <span data-ttu-id="aa0a4-123">**Lower Latency / Higher packets per second (pps):** Removing the virtual switch from the datapath removes the time packets spend in the host for policy processing and increases the number of packets that can be processed inside the VM.</span><span class="sxs-lookup"><span data-stu-id="aa0a4-123">**Lower Latency / Higher packets per second (pps):** Removing the virtual switch from the datapath removes the time packets spend in the host for policy processing and increases the number of packets that can be processed inside the VM.</span></span>
* <span data-ttu-id="aa0a4-124">**Reduced jitter:** Virtual switch processing depends on the amount of policy that needs to be applied and the workload of the CPU that is doing the processing.</span><span class="sxs-lookup"><span data-stu-id="aa0a4-124">**Reduced jitter:** Virtual switch processing depends on the amount of policy that needs to be applied and the workload of the CPU that is doing the processing.</span></span> <span data-ttu-id="aa0a4-125">Offloading the policy enforcement to the hardware removes that variability by delivering packets directly to the VM, removing the host to VM communication and all software interrupts and context switches.</span><span class="sxs-lookup"><span data-stu-id="aa0a4-125">Offloading the policy enforcement to the hardware removes that variability by delivering packets directly to the VM, removing the host to VM communication and all software interrupts and context switches.</span></span>
* <span data-ttu-id="aa0a4-126">**Decreased CPU utilization:** Bypassing the virtual switch in the host leads to less CPU utilization for processing network traffic.</span><span class="sxs-lookup"><span data-stu-id="aa0a4-126">**Decreased CPU utilization:** Bypassing the virtual switch in the host leads to less CPU utilization for processing network traffic.</span></span>

## <a name="limitations"></a><span data-ttu-id="aa0a4-127">Limitations</span><span class="sxs-lookup"><span data-stu-id="aa0a4-127">Limitations</span></span>
<span data-ttu-id="aa0a4-128">The following limitations exist when using this capability:</span><span class="sxs-lookup"><span data-stu-id="aa0a4-128">The following limitations exist when using this capability:</span></span>

* <span data-ttu-id="aa0a4-129">**Network interface creation:** Accelerated networking can only be enabled for a new network interface.</span><span class="sxs-lookup"><span data-stu-id="aa0a4-129">**Network interface creation:** Accelerated networking can only be enabled for a new network interface.</span></span>  <span data-ttu-id="aa0a4-130">It cannot be enabled on an existing network interface.</span><span class="sxs-lookup"><span data-stu-id="aa0a4-130">It cannot be enabled on an existing network interface.</span></span>
* <span data-ttu-id="aa0a4-131">**VM creation:** A network interface with accelerated networking enabled can only be attached to a VM when the VM is created.</span><span class="sxs-lookup"><span data-stu-id="aa0a4-131">**VM creation:** A network interface with accelerated networking enabled can only be attached to a VM when the VM is created.</span></span> <span data-ttu-id="aa0a4-132">The network interface cannot be attached to an existing VM.</span><span class="sxs-lookup"><span data-stu-id="aa0a4-132">The network interface cannot be attached to an existing VM.</span></span>
* <span data-ttu-id="aa0a4-133">**Regions:** Offered in the West Central US and West Europe Azure regions only.</span><span class="sxs-lookup"><span data-stu-id="aa0a4-133">**Regions:** Offered in the West Central US and West Europe Azure regions only.</span></span> <span data-ttu-id="aa0a4-134">The set of regions will expand in the future.</span><span class="sxs-lookup"><span data-stu-id="aa0a4-134">The set of regions will expand in the future.</span></span>
* <span data-ttu-id="aa0a4-135">**Supported operating system:** Microsoft Windows Server 2012 R2 and Windows Server 2016 Technical Preview 5.</span><span class="sxs-lookup"><span data-stu-id="aa0a4-135">**Supported operating system:** Microsoft Windows Server 2012 R2 and Windows Server 2016 Technical Preview 5.</span></span> <span data-ttu-id="aa0a4-136">Linux and Windows Server 2012 support will be added soon.</span><span class="sxs-lookup"><span data-stu-id="aa0a4-136">Linux and Windows Server 2012 support will be added soon.</span></span>
* <span data-ttu-id="aa0a4-137">**VM Size:** Standard_D15_v2 and Standard_DS15_v2 are the only supported VM instance sizes.</span><span class="sxs-lookup"><span data-stu-id="aa0a4-137">**VM Size:** Standard_D15_v2 and Standard_DS15_v2 are the only supported VM instance sizes.</span></span> <span data-ttu-id="aa0a4-138">For more information, see the [Windows VM sizes](../virtual-machines/windows/sizes.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json) article.</span><span class="sxs-lookup"><span data-stu-id="aa0a4-138">For more information, see the [Windows VM sizes](../virtual-machines/windows/sizes.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json) article.</span></span> <span data-ttu-id="aa0a4-139">The set of supported VM instance sizes will expand in the future.</span><span class="sxs-lookup"><span data-stu-id="aa0a4-139">The set of supported VM instance sizes will expand in the future.</span></span>

<span data-ttu-id="aa0a4-140">Changes to these limitations will be announced through the [Azure Virtual Networking updates](https://azure.microsoft.com/updates/accelerated-networking-in-preview) page.</span><span class="sxs-lookup"><span data-stu-id="aa0a4-140">Changes to these limitations will be announced through the [Azure Virtual Networking updates](https://azure.microsoft.com/updates/accelerated-networking-in-preview) page.</span></span>

## <a name="create-a-windows-vm-with-accelerated-networking"></a><span data-ttu-id="aa0a4-141">Create a Windows VM with Accelerated Networking</span><span class="sxs-lookup"><span data-stu-id="aa0a4-141">Create a Windows VM with Accelerated Networking</span></span>
1. <span data-ttu-id="aa0a4-142">Register for the preview by sending an email to [Accelerated Networking Subscriptions](mailto:axnpreview@microsoft.com?subject=Request%20to%20enable%20subscription%20%3csubscription%20id%3e) with your subscription ID and intended use.</span><span class="sxs-lookup"><span data-stu-id="aa0a4-142">Register for the preview by sending an email to [Accelerated Networking Subscriptions](mailto:axnpreview@microsoft.com?subject=Request%20to%20enable%20subscription%20%3csubscription%20id%3e) with your subscription ID and intended use.</span></span> <span data-ttu-id="aa0a4-143">Do not complete the remaining steps until after you receive an e-mail notifying you that you've been accepted into the preview.</span><span class="sxs-lookup"><span data-stu-id="aa0a4-143">Do not complete the remaining steps until after you receive an e-mail notifying you that you've been accepted into the preview.</span></span>
2. <span data-ttu-id="aa0a4-144">Login to the Azure Portal at http://portal.azure.com.</span><span class="sxs-lookup"><span data-stu-id="aa0a4-144">Login to the Azure Portal at http://portal.azure.com.</span></span>
3. <span data-ttu-id="aa0a4-145">Create a VM by completing the steps in the [Create a Windows VM](../virtual-machines/virtual-machines-windows-hero-tutorial.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json) article selecting the following options:</span><span class="sxs-lookup"><span data-stu-id="aa0a4-145">Create a VM by completing the steps in the [Create a Windows VM](../virtual-machines/virtual-machines-windows-hero-tutorial.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json) article selecting the following options:</span></span>
   
   * <span data-ttu-id="aa0a4-146">Select an operating system listed in the Limitations section of this article.</span><span class="sxs-lookup"><span data-stu-id="aa0a4-146">Select an operating system listed in the Limitations section of this article.</span></span>
   * <span data-ttu-id="aa0a4-147">Select a location (region) listed in the Limitations section of this article.</span><span class="sxs-lookup"><span data-stu-id="aa0a4-147">Select a location (region) listed in the Limitations section of this article.</span></span>
   * <span data-ttu-id="aa0a4-148">Select a VM size listed in the Limitations section of this article.</span><span class="sxs-lookup"><span data-stu-id="aa0a4-148">Select a VM size listed in the Limitations section of this article.</span></span> <span data-ttu-id="aa0a4-149">If one of the supported sizes isn't listed, click **View all** in the **Choose a size** blade to select a size from an expanded list.</span><span class="sxs-lookup"><span data-stu-id="aa0a4-149">If one of the supported sizes isn't listed, click **View all** in the **Choose a size** blade to select a size from an expanded list.</span></span>
   * <span data-ttu-id="aa0a4-150">In the **Settings** blade, click *Enabled* for **Accelerated networking**, as shown in the following picture:</span><span class="sxs-lookup"><span data-stu-id="aa0a4-150">In the **Settings** blade, click *Enabled* for **Accelerated networking**, as shown in the following picture:</span></span>
     
       ![Settings](https://docstestmedia1.blob.core.windows.net/azure-media/articles/virtual-network/media/virtual-network-accelerated-networking-portal/image3.png)
     
     > [!NOTE]
     > The Accelerated Networking option will only be visible if you've:
     > 
     > * Been accepted into the preview
     > * Selected supported operating system, location, and VM sizes mentioned in the Limitations section of this article.
     > 
     > 
4. <span data-ttu-id="aa0a4-155">Once the VM is created, download the [Accelerated Networking driver](https://gallery.technet.microsoft.com/Azure-Accelerated-471b5d84), connect and login to the VM, and run the driver installer inside the VM.</span><span class="sxs-lookup"><span data-stu-id="aa0a4-155">Once the VM is created, download the [Accelerated Networking driver](https://gallery.technet.microsoft.com/Azure-Accelerated-471b5d84), connect and login to the VM, and run the driver installer inside the VM.</span></span>
5. <span data-ttu-id="aa0a4-156">Right-click the Windows button and click **Device Manager**.</span><span class="sxs-lookup"><span data-stu-id="aa0a4-156">Right-click the Windows button and click **Device Manager**.</span></span> <span data-ttu-id="aa0a4-157">Verify that the **Mellanox ConnectX-3 Virtual Function Ethernet Adapter** appears under the **Network** option when expanded, as shown in the following picture:</span><span class="sxs-lookup"><span data-stu-id="aa0a4-157">Verify that the **Mellanox ConnectX-3 Virtual Function Ethernet Adapter** appears under the **Network** option when expanded, as shown in the following picture:</span></span>
   
    ![Device Manager](https://docstestmedia1.blob.core.windows.net/azure-media/articles/virtual-network/media/virtual-network-accelerated-networking-portal/image2.png)




