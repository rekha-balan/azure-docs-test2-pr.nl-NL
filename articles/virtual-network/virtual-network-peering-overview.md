---
title: Azure Virtual Network peering | Microsoft Docs
description: Learn about virtual network peering in Azure.
services: virtual-network
documentationcenter: na
author: NarayanAnnamalai
manager: jefco
editor: tysonn
ms.assetid: eb0ba07d-5fee-4db0-b1cb-a569b7060d2a
ms.service: virtual-network
ms.devlang: na
ms.topic: get-started-article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 10/17/2016
ms.author: narayan
ms.openlocfilehash: c669cff15a9383e2e2b9ad9c20a053db7f979447
ms.sourcegitcommit: 5b9d839c0c0a94b293fdafe1d6e5429506c07e05
ms.translationtype: HT
ms.contentlocale: nl-NL
ms.lasthandoff: 08/02/2018
ms.locfileid: "44555558"
---
# <a name="virtual-network-peering"></a><span data-ttu-id="dc35a-103">Virtual network peering</span><span class="sxs-lookup"><span data-stu-id="dc35a-103">Virtual network peering</span></span>
<span data-ttu-id="dc35a-104">Virtual network (VNet) peering enables you to connect two VNets in the same region through the Azure backbone network.</span><span class="sxs-lookup"><span data-stu-id="dc35a-104">Virtual network (VNet) peering enables you to connect two VNets in the same region through the Azure backbone network.</span></span> <span data-ttu-id="dc35a-105">Once peered, the two VNets appear as one for connectivity purposes.</span><span class="sxs-lookup"><span data-stu-id="dc35a-105">Once peered, the two VNets appear as one for connectivity purposes.</span></span> <span data-ttu-id="dc35a-106">The two VNets are still managed as separate resources, but virtual machines (VM) in the peered VNets can communicate with each other directly by using private IP addresses.</span><span class="sxs-lookup"><span data-stu-id="dc35a-106">The two VNets are still managed as separate resources, but virtual machines (VM) in the peered VNets can communicate with each other directly by using private IP addresses.</span></span>

<span data-ttu-id="dc35a-107">The traffic between VMs in the peered VNets is routed through the Azure infrastructure, much like traffic is routed between VMs in the same VNet.</span><span class="sxs-lookup"><span data-stu-id="dc35a-107">The traffic between VMs in the peered VNets is routed through the Azure infrastructure, much like traffic is routed between VMs in the same VNet.</span></span> <span data-ttu-id="dc35a-108">Some of the benefits of using VNet peering include:</span><span class="sxs-lookup"><span data-stu-id="dc35a-108">Some of the benefits of using VNet peering include:</span></span>

* <span data-ttu-id="dc35a-109">A low-latency, high-bandwidth connection between resources in different VNets.</span><span class="sxs-lookup"><span data-stu-id="dc35a-109">A low-latency, high-bandwidth connection between resources in different VNets.</span></span>
* <span data-ttu-id="dc35a-110">The ability to use resources such as network appliances and VPN gateways as transit points in a peered VNet.</span><span class="sxs-lookup"><span data-stu-id="dc35a-110">The ability to use resources such as network appliances and VPN gateways as transit points in a peered VNet.</span></span>
* <span data-ttu-id="dc35a-111">The ability to peer two VNets created through the Azure Resource Manager deployment model or to peer one VNet created through Resource Manager to a VNet created through the classic deployment model.</span><span class="sxs-lookup"><span data-stu-id="dc35a-111">The ability to peer two VNets created through the Azure Resource Manager deployment model or to peer one VNet created through Resource Manager to a VNet created through the classic deployment model.</span></span> <span data-ttu-id="dc35a-112">Read the [Understand Azure deployment models](../azure-resource-manager/resource-manager-deployment-model.md) article to learn more about the differences between the two Azure deployment models.</span><span class="sxs-lookup"><span data-stu-id="dc35a-112">Read the [Understand Azure deployment models](../azure-resource-manager/resource-manager-deployment-model.md) article to learn more about the differences between the two Azure deployment models.</span></span>

<span data-ttu-id="dc35a-113">Requirements and key aspects of VNet peering:</span><span class="sxs-lookup"><span data-stu-id="dc35a-113">Requirements and key aspects of VNet peering:</span></span>

* <span data-ttu-id="dc35a-114">The peered VNets must exist in the same Azure region.</span><span class="sxs-lookup"><span data-stu-id="dc35a-114">The peered VNets must exist in the same Azure region.</span></span>
* <span data-ttu-id="dc35a-115">The peered VNets must have non-overlapping IP address spaces.</span><span class="sxs-lookup"><span data-stu-id="dc35a-115">The peered VNets must have non-overlapping IP address spaces.</span></span>
* <span data-ttu-id="dc35a-116">VNet peering is between two VNets, but there is no derived transitive relationship across peerings.</span><span class="sxs-lookup"><span data-stu-id="dc35a-116">VNet peering is between two VNets, but there is no derived transitive relationship across peerings.</span></span> <span data-ttu-id="dc35a-117">For example, if VNetA is peered with VNetB, and VNetB is peered with VNetC, VNetA is *not* peered to VNetC.</span><span class="sxs-lookup"><span data-stu-id="dc35a-117">For example, if VNetA is peered with VNetB, and VNetB is peered with VNetC, VNetA is *not* peered to VNetC.</span></span>
* <span data-ttu-id="dc35a-118">You can peer VNets that exist in two different subscriptions as long a privileged user of both subscriptions authorizes the peering and the subscriptions are associated to the same Active Directory tenant.</span><span class="sxs-lookup"><span data-stu-id="dc35a-118">You can peer VNets that exist in two different subscriptions as long a privileged user of both subscriptions authorizes the peering and the subscriptions are associated to the same Active Directory tenant.</span></span>
* <span data-ttu-id="dc35a-119">VNets can be peered if both are created through the Resource Manager deployment model or if one is created through the Resource Manager deployment model and the other is created through the classic deployment model.</span><span class="sxs-lookup"><span data-stu-id="dc35a-119">VNets can be peered if both are created through the Resource Manager deployment model or if one is created through the Resource Manager deployment model and the other is created through the classic deployment model.</span></span> <span data-ttu-id="dc35a-120">Two VNets created through the classic deployment model cannot be peered to each other however.</span><span class="sxs-lookup"><span data-stu-id="dc35a-120">Two VNets created through the classic deployment model cannot be peered to each other however.</span></span> <span data-ttu-id="dc35a-121">When peering VNets created through different deployment models, the VNets must both exist in  the *same* subscription.</span><span class="sxs-lookup"><span data-stu-id="dc35a-121">When peering VNets created through different deployment models, the VNets must both exist in  the *same* subscription.</span></span> <span data-ttu-id="dc35a-122">The ability to peer VNets created through different deployment models that exist in *different* subscriptions is in **preview** release.</span><span class="sxs-lookup"><span data-stu-id="dc35a-122">The ability to peer VNets created through different deployment models that exist in *different* subscriptions is in **preview** release.</span></span> <span data-ttu-id="dc35a-123">Read the [Create a virtual network peering using Powershell](virtual-networks-create-vnetpeering-arm-ps.md) article for further details.</span><span class="sxs-lookup"><span data-stu-id="dc35a-123">Read the [Create a virtual network peering using Powershell](virtual-networks-create-vnetpeering-arm-ps.md) article for further details.</span></span>
* <span data-ttu-id="dc35a-124">Though the communication between VMs in peered VNets has no additional bandwidth restrictions, there is a maximum network bandwidth depending on the VM size that still applies.</span><span class="sxs-lookup"><span data-stu-id="dc35a-124">Though the communication between VMs in peered VNets has no additional bandwidth restrictions, there is a maximum network bandwidth depending on the VM size that still applies.</span></span> <span data-ttu-id="dc35a-125">To learn more about maximum network bandwidth for different VM sizes, read the [Windows](../virtual-machines/windows/sizes.md) or [Linux](../virtual-machines/linux/sizes.md) VM sizes articles.</span><span class="sxs-lookup"><span data-stu-id="dc35a-125">To learn more about maximum network bandwidth for different VM sizes, read the [Windows](../virtual-machines/windows/sizes.md) or [Linux](../virtual-machines/linux/sizes.md) VM sizes articles.</span></span>

![Basic VNet peering](https://docstestmedia1.blob.core.windows.net/azure-media/articles/virtual-network/media/virtual-networks-peering-overview/figure01.png)

## <a name="connectivity"></a><span data-ttu-id="dc35a-127">Connectivity</span><span class="sxs-lookup"><span data-stu-id="dc35a-127">Connectivity</span></span>
<span data-ttu-id="dc35a-128">After two VNets are peered, VMs or Cloud Services roles in the VNet can directly connect with other resources connected to the peered VNet.</span><span class="sxs-lookup"><span data-stu-id="dc35a-128">After two VNets are peered, VMs or Cloud Services roles in the VNet can directly connect with other resources connected to the peered VNet.</span></span> <span data-ttu-id="dc35a-129">The two VNets have full IP-level connectivity.</span><span class="sxs-lookup"><span data-stu-id="dc35a-129">The two VNets have full IP-level connectivity.</span></span>

<span data-ttu-id="dc35a-130">The network latency for a round trip between two VMs in peered VNets is the same as for a round trip within a single VNet.</span><span class="sxs-lookup"><span data-stu-id="dc35a-130">The network latency for a round trip between two VMs in peered VNets is the same as for a round trip within a single VNet.</span></span> <span data-ttu-id="dc35a-131">The network throughput is based on the bandwidth that's allowed for the VM proportionate to its size.</span><span class="sxs-lookup"><span data-stu-id="dc35a-131">The network throughput is based on the bandwidth that's allowed for the VM proportionate to its size.</span></span> <span data-ttu-id="dc35a-132">There isn't any additional restriction on bandwidth within the peering.</span><span class="sxs-lookup"><span data-stu-id="dc35a-132">There isn't any additional restriction on bandwidth within the peering.</span></span>

<span data-ttu-id="dc35a-133">The traffic between the VMs in peered VNets is routed directly through the Azure back-end infrastructure and not through a gateway.</span><span class="sxs-lookup"><span data-stu-id="dc35a-133">The traffic between the VMs in peered VNets is routed directly through the Azure back-end infrastructure and not through a gateway.</span></span>

<span data-ttu-id="dc35a-134">VMs connected to a VNet can access the internal load-balanced (ILB) endpoints in the peered VNet.</span><span class="sxs-lookup"><span data-stu-id="dc35a-134">VMs connected to a VNet can access the internal load-balanced (ILB) endpoints in the peered VNet.</span></span> <span data-ttu-id="dc35a-135">Network security groups (NSGs) can be applied in either VNet to block access to other VNets or subnets, if desired.</span><span class="sxs-lookup"><span data-stu-id="dc35a-135">Network security groups (NSGs) can be applied in either VNet to block access to other VNets or subnets, if desired.</span></span>

<span data-ttu-id="dc35a-136">When configuring peering, you can either open or close the NSG rules between the VNets.</span><span class="sxs-lookup"><span data-stu-id="dc35a-136">When configuring peering, you can either open or close the NSG rules between the VNets.</span></span> <span data-ttu-id="dc35a-137">If you open full connectivity between peered VNets (which is the default option), you can apply NSGs to specific subnets or VMs to block or deny specific access.</span><span class="sxs-lookup"><span data-stu-id="dc35a-137">If you open full connectivity between peered VNets (which is the default option), you can apply NSGs to specific subnets or VMs to block or deny specific access.</span></span> <span data-ttu-id="dc35a-138">Read the [Network security groups](virtual-networks-nsg.md) article to learn more about NSGs.</span><span class="sxs-lookup"><span data-stu-id="dc35a-138">Read the [Network security groups](virtual-networks-nsg.md) article to learn more about NSGs.</span></span>

<span data-ttu-id="dc35a-139">Azure-provided internal DNS name resolution for VMs doesn't work across peered VNets.</span><span class="sxs-lookup"><span data-stu-id="dc35a-139">Azure-provided internal DNS name resolution for VMs doesn't work across peered VNets.</span></span> <span data-ttu-id="dc35a-140">VMs have internal DNS names that are resolvable only within the local VNet.</span><span class="sxs-lookup"><span data-stu-id="dc35a-140">VMs have internal DNS names that are resolvable only within the local VNet.</span></span> <span data-ttu-id="dc35a-141">You can however, configure VMs connected to peered VNets as DNS servers for a VNet.</span><span class="sxs-lookup"><span data-stu-id="dc35a-141">You can however, configure VMs connected to peered VNets as DNS servers for a VNet.</span></span> <span data-ttu-id="dc35a-142">Read the [Name resolution using your own DNS server](virtual-networks-name-resolution-for-vms-and-role-instances.md#name-resolution-using-your-own-dns-server) article for further details.</span><span class="sxs-lookup"><span data-stu-id="dc35a-142">Read the [Name resolution using your own DNS server](virtual-networks-name-resolution-for-vms-and-role-instances.md#name-resolution-using-your-own-dns-server) article for further details.</span></span>

## <a name="service-chaining"></a><span data-ttu-id="dc35a-143">Service chaining</span><span class="sxs-lookup"><span data-stu-id="dc35a-143">Service chaining</span></span>
<span data-ttu-id="dc35a-144">You can configure user-defined routes (UDR) that point to VMs in peered VNets as the "next hop" IP address, as shown in the diagram later in this article.</span><span class="sxs-lookup"><span data-stu-id="dc35a-144">You can configure user-defined routes (UDR) that point to VMs in peered VNets as the "next hop" IP address, as shown in the diagram later in this article.</span></span> <span data-ttu-id="dc35a-145">This enables service chaining, which enables you to direct traffic from one VNet to a virtual appliance that's running in a peered VNet through UDRs.</span><span class="sxs-lookup"><span data-stu-id="dc35a-145">This enables service chaining, which enables you to direct traffic from one VNet to a virtual appliance that's running in a peered VNet through UDRs.</span></span>

<span data-ttu-id="dc35a-146">You can also effectively build hub-and-spoke type environments, where the hub can host infrastructure components such as a network virtual appliance.</span><span class="sxs-lookup"><span data-stu-id="dc35a-146">You can also effectively build hub-and-spoke type environments, where the hub can host infrastructure components such as a network virtual appliance.</span></span> <span data-ttu-id="dc35a-147">All the spoke VNets can then peer with it, as well as a subset of traffic to appliances that are running in the hub VNet.</span><span class="sxs-lookup"><span data-stu-id="dc35a-147">All the spoke VNets can then peer with it, as well as a subset of traffic to appliances that are running in the hub VNet.</span></span> <span data-ttu-id="dc35a-148">In short, VNet peering enables the next hop IP address on the UDR to be the IP address of a VM in the peered VNet.</span><span class="sxs-lookup"><span data-stu-id="dc35a-148">In short, VNet peering enables the next hop IP address on the UDR to be the IP address of a VM in the peered VNet.</span></span> <span data-ttu-id="dc35a-149">Read the [user-defined routes](virtual-networks-udr-overview.md) article for additional information about UDRs.</span><span class="sxs-lookup"><span data-stu-id="dc35a-149">Read the [user-defined routes](virtual-networks-udr-overview.md) article for additional information about UDRs.</span></span>

## <a name="gateways-and-on-premises-connectivity"></a><span data-ttu-id="dc35a-150">Gateways and on-premises connectivity</span><span class="sxs-lookup"><span data-stu-id="dc35a-150">Gateways and on-premises connectivity</span></span>
<span data-ttu-id="dc35a-151">Each VNet, regardless of whether it is peered with another VNet, can still have its own gateway and use it to connect to an on-premises network.</span><span class="sxs-lookup"><span data-stu-id="dc35a-151">Each VNet, regardless of whether it is peered with another VNet, can still have its own gateway and use it to connect to an on-premises network.</span></span> <span data-ttu-id="dc35a-152">Users can also configure [VNet-to-VNet connections](../vpn-gateway/vpn-gateway-vnet-vnet-rm-ps.md) by using gateways, even though the VNets are peered.</span><span class="sxs-lookup"><span data-stu-id="dc35a-152">Users can also configure [VNet-to-VNet connections](../vpn-gateway/vpn-gateway-vnet-vnet-rm-ps.md) by using gateways, even though the VNets are peered.</span></span>

<span data-ttu-id="dc35a-153">When both options for VNet interconnectivity are configured, the traffic between the VNets flows through the peering configuration (that is, through the Azure backbone).</span><span class="sxs-lookup"><span data-stu-id="dc35a-153">When both options for VNet interconnectivity are configured, the traffic between the VNets flows through the peering configuration (that is, through the Azure backbone).</span></span>

<span data-ttu-id="dc35a-154">When VNets are peered, users can also configure the gateway in the peered VNet as a transit point to an on-premises network.</span><span class="sxs-lookup"><span data-stu-id="dc35a-154">When VNets are peered, users can also configure the gateway in the peered VNet as a transit point to an on-premises network.</span></span> <span data-ttu-id="dc35a-155">In this case, the VNet that is using a remote gateway cannot have its own gateway.</span><span class="sxs-lookup"><span data-stu-id="dc35a-155">In this case, the VNet that is using a remote gateway cannot have its own gateway.</span></span> <span data-ttu-id="dc35a-156">A VNet can have only one gateway.</span><span class="sxs-lookup"><span data-stu-id="dc35a-156">A VNet can have only one gateway.</span></span> <span data-ttu-id="dc35a-157">The gateway can be either a local or remote gateway (in the peered VNet), as shown in the following picture:</span><span class="sxs-lookup"><span data-stu-id="dc35a-157">The gateway can be either a local or remote gateway (in the peered VNet), as shown in the following picture:</span></span>

![VNet peering transit](https://docstestmedia1.blob.core.windows.net/azure-media/articles/virtual-network/media/virtual-networks-peering-overview/figure02.png)

<span data-ttu-id="dc35a-159">Gateway transit is not supported in the peering relationship between VNets created through different deployment models.</span><span class="sxs-lookup"><span data-stu-id="dc35a-159">Gateway transit is not supported in the peering relationship between VNets created through different deployment models.</span></span> <span data-ttu-id="dc35a-160">Both VNets in the peering relationship must have been created through Resource Manager for a gateway transit to work.</span><span class="sxs-lookup"><span data-stu-id="dc35a-160">Both VNets in the peering relationship must have been created through Resource Manager for a gateway transit to work.</span></span>

<span data-ttu-id="dc35a-161">When the VNets that are sharing a single Azure ExpressRoute connection are peered, the traffic between them goes through the peering relationship (that is, through the Azure backbone network).</span><span class="sxs-lookup"><span data-stu-id="dc35a-161">When the VNets that are sharing a single Azure ExpressRoute connection are peered, the traffic between them goes through the peering relationship (that is, through the Azure backbone network).</span></span> <span data-ttu-id="dc35a-162">You can still use local gateways in each VNet to connect to the on-premises circuit.</span><span class="sxs-lookup"><span data-stu-id="dc35a-162">You can still use local gateways in each VNet to connect to the on-premises circuit.</span></span> <span data-ttu-id="dc35a-163">Alternatively, you can use a shared gateway and configure transit for on-premises connectivity.</span><span class="sxs-lookup"><span data-stu-id="dc35a-163">Alternatively, you can use a shared gateway and configure transit for on-premises connectivity.</span></span>

## <a name="provisioning"></a><span data-ttu-id="dc35a-164">Provisioning</span><span class="sxs-lookup"><span data-stu-id="dc35a-164">Provisioning</span></span>
<span data-ttu-id="dc35a-165">VNet peering is a privileged operation.</span><span class="sxs-lookup"><span data-stu-id="dc35a-165">VNet peering is a privileged operation.</span></span> <span data-ttu-id="dc35a-166">It’s a separate function under the VirtualNetworks namespace.</span><span class="sxs-lookup"><span data-stu-id="dc35a-166">It’s a separate function under the VirtualNetworks namespace.</span></span> <span data-ttu-id="dc35a-167">A user can be given specific rights to authorize peering.</span><span class="sxs-lookup"><span data-stu-id="dc35a-167">A user can be given specific rights to authorize peering.</span></span> <span data-ttu-id="dc35a-168">A user who has read-write access to the virtual network inherits these rights automatically.</span><span class="sxs-lookup"><span data-stu-id="dc35a-168">A user who has read-write access to the virtual network inherits these rights automatically.</span></span>

<span data-ttu-id="dc35a-169">A user who is either an admin or a privileged user of the peering ability can initiate a peering operation on another VNet.</span><span class="sxs-lookup"><span data-stu-id="dc35a-169">A user who is either an admin or a privileged user of the peering ability can initiate a peering operation on another VNet.</span></span> <span data-ttu-id="dc35a-170">If there is a matching request for peering on the other side, and if other requirements are met, the peering will be established.</span><span class="sxs-lookup"><span data-stu-id="dc35a-170">If there is a matching request for peering on the other side, and if other requirements are met, the peering will be established.</span></span>

<span data-ttu-id="dc35a-171">Refer to the articles in the [Next steps](#next-steps) section of this article to learn how to establish VNet peering between two VNets.</span><span class="sxs-lookup"><span data-stu-id="dc35a-171">Refer to the articles in the [Next steps](#next-steps) section of this article to learn how to establish VNet peering between two VNets.</span></span>

## <a name="limits"></a><span data-ttu-id="dc35a-172">Limits</span><span class="sxs-lookup"><span data-stu-id="dc35a-172">Limits</span></span>
<span data-ttu-id="dc35a-173">There are limits on the number of peerings that are allowed for a single virtual network.</span><span class="sxs-lookup"><span data-stu-id="dc35a-173">There are limits on the number of peerings that are allowed for a single virtual network.</span></span> <span data-ttu-id="dc35a-174">Refer to [Azure networking limits](../azure-subscription-service-limits.md#networking-limits) for more information.</span><span class="sxs-lookup"><span data-stu-id="dc35a-174">Refer to [Azure networking limits](../azure-subscription-service-limits.md#networking-limits) for more information.</span></span>

## <a name="pricing"></a><span data-ttu-id="dc35a-175">Pricing</span><span class="sxs-lookup"><span data-stu-id="dc35a-175">Pricing</span></span>
<span data-ttu-id="dc35a-176">There is a nominal charge for ingress and egress traffic that utilizes a VNet peering.</span><span class="sxs-lookup"><span data-stu-id="dc35a-176">There is a nominal charge for ingress and egress traffic that utilizes a VNet peering.</span></span> <span data-ttu-id="dc35a-177">For more information, refer to the [pricing page](https://azure.microsoft.com/pricing/details/virtual-network).</span><span class="sxs-lookup"><span data-stu-id="dc35a-177">For more information, refer to the [pricing page](https://azure.microsoft.com/pricing/details/virtual-network).</span></span>

## <a name="next-steps"></a><span data-ttu-id="dc35a-178">Next steps</span><span class="sxs-lookup"><span data-stu-id="dc35a-178">Next steps</span></span>
<span data-ttu-id="dc35a-179">Learn how to create a VNet peering using:</span><span class="sxs-lookup"><span data-stu-id="dc35a-179">Learn how to create a VNet peering using:</span></span>

* [<span data-ttu-id="dc35a-180">The Azure portal</span><span class="sxs-lookup"><span data-stu-id="dc35a-180">The Azure portal</span></span>](virtual-networks-create-vnetpeering-arm-portal.md)
* [<span data-ttu-id="dc35a-181">Azure PowerShell</span><span class="sxs-lookup"><span data-stu-id="dc35a-181">Azure PowerShell</span></span>](virtual-networks-create-vnetpeering-arm-ps.md)
* [<span data-ttu-id="dc35a-182">An Azure Resource Manager template</span><span class="sxs-lookup"><span data-stu-id="dc35a-182">An Azure Resource Manager template</span></span>](virtual-networks-create-vnetpeering-arm-template-click.md)


