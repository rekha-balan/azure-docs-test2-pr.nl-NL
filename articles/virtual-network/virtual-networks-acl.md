---
title: What is a Network Access Control List (ACL)?
description: Learn about ACLs
services: virtual-network
documentationcenter: na
author: jimdial
manager: carmonm
editor: tysonn
ms.assetid: 83d66c84-8f6b-4388-8767-cd2de3e72d76
ms.service: virtual-network
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 03/15/2016
ms.author: jdial
ms.openlocfilehash: a0ed35dd7529b87f894bb3e62d4902014def3797
ms.sourcegitcommit: 5b9d839c0c0a94b293fdafe1d6e5429506c07e05
ms.translationtype: HT
ms.contentlocale: nl-NL
ms.lasthandoff: 08/02/2018
ms.locfileid: "44564432"
---
# <a name="what-is-an-endpoint-access-control-list-acls"></a><span data-ttu-id="b3ea8-103">What is an endpoint Access Control List (ACLs)?</span><span class="sxs-lookup"><span data-stu-id="b3ea8-103">What is an endpoint Access Control List (ACLs)?</span></span>
<span data-ttu-id="b3ea8-104">An endpoint Access Control List (ACL) is a security enhancement available for your Azure deployment.</span><span class="sxs-lookup"><span data-stu-id="b3ea8-104">An endpoint Access Control List (ACL) is a security enhancement available for your Azure deployment.</span></span> <span data-ttu-id="b3ea8-105">An ACL provides the ability to selectively permit or deny traffic for a virtual machine endpoint.</span><span class="sxs-lookup"><span data-stu-id="b3ea8-105">An ACL provides the ability to selectively permit or deny traffic for a virtual machine endpoint.</span></span> <span data-ttu-id="b3ea8-106">This packet filtering capability provides an additional layer of security.</span><span class="sxs-lookup"><span data-stu-id="b3ea8-106">This packet filtering capability provides an additional layer of security.</span></span> <span data-ttu-id="b3ea8-107">You can specify network ACLs for endpoints only.</span><span class="sxs-lookup"><span data-stu-id="b3ea8-107">You can specify network ACLs for endpoints only.</span></span> <span data-ttu-id="b3ea8-108">You can't specify an ACL for a virtual network or a specific subnet contained in a virtual network.</span><span class="sxs-lookup"><span data-stu-id="b3ea8-108">You can't specify an ACL for a virtual network or a specific subnet contained in a virtual network.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="b3ea8-109">It is recommended to use Network Security Groups (NSGs) instead of ACLs whenever possible.</span><span class="sxs-lookup"><span data-stu-id="b3ea8-109">It is recommended to use Network Security Groups (NSGs) instead of ACLs whenever possible.</span></span> <span data-ttu-id="b3ea8-110">To learn more about NSGs, see [What is a Network Security Group?](virtual-networks-nsg.md).</span><span class="sxs-lookup"><span data-stu-id="b3ea8-110">To learn more about NSGs, see [What is a Network Security Group?](virtual-networks-nsg.md).</span></span>
> 
> 

<span data-ttu-id="b3ea8-111">ACLs can be configured by using either PowerShell or the Management Portal.</span><span class="sxs-lookup"><span data-stu-id="b3ea8-111">ACLs can be configured by using either PowerShell or the Management Portal.</span></span> <span data-ttu-id="b3ea8-112">To configure a network ACL by using PowerShell, see [Managing Access Control Lists (ACLs) for Endpoints by using PowerShell](virtual-networks-acl-powershell.md).</span><span class="sxs-lookup"><span data-stu-id="b3ea8-112">To configure a network ACL by using PowerShell, see [Managing Access Control Lists (ACLs) for Endpoints by using PowerShell](virtual-networks-acl-powershell.md).</span></span> <span data-ttu-id="b3ea8-113">To configure a network ACL by using the Management Portal, see [How to Set Up Endpoints to a Virtual Machine](../virtual-machines/windows/classic/setup-endpoints.md?toc=%2fazure%2fvirtual-machines%2fwindows%2fclassic%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="b3ea8-113">To configure a network ACL by using the Management Portal, see [How to Set Up Endpoints to a Virtual Machine](../virtual-machines/windows/classic/setup-endpoints.md?toc=%2fazure%2fvirtual-machines%2fwindows%2fclassic%2ftoc.json).</span></span>

<span data-ttu-id="b3ea8-114">Using Network ACLs, you can do the following:</span><span class="sxs-lookup"><span data-stu-id="b3ea8-114">Using Network ACLs, you can do the following:</span></span>

* <span data-ttu-id="b3ea8-115">Selectively permit or deny incoming traffic based on remote subnet IPv4 address range to a virtual machine input endpoint.</span><span class="sxs-lookup"><span data-stu-id="b3ea8-115">Selectively permit or deny incoming traffic based on remote subnet IPv4 address range to a virtual machine input endpoint.</span></span>
* <span data-ttu-id="b3ea8-116">Blacklist IP addresses</span><span class="sxs-lookup"><span data-stu-id="b3ea8-116">Blacklist IP addresses</span></span>
* <span data-ttu-id="b3ea8-117">Create multiple rules per virtual machine endpoint</span><span class="sxs-lookup"><span data-stu-id="b3ea8-117">Create multiple rules per virtual machine endpoint</span></span>
* <span data-ttu-id="b3ea8-118">Specify up to 50 ACL rules per virtual machine endpoint</span><span class="sxs-lookup"><span data-stu-id="b3ea8-118">Specify up to 50 ACL rules per virtual machine endpoint</span></span>
* <span data-ttu-id="b3ea8-119">Use rule ordering to ensure the correct set of rules are applied on a given virtual machine endpoint (lowest to highest)</span><span class="sxs-lookup"><span data-stu-id="b3ea8-119">Use rule ordering to ensure the correct set of rules are applied on a given virtual machine endpoint (lowest to highest)</span></span>
* <span data-ttu-id="b3ea8-120">Specify an ACL for a specific remote subnet IPv4 address.</span><span class="sxs-lookup"><span data-stu-id="b3ea8-120">Specify an ACL for a specific remote subnet IPv4 address.</span></span>

## <a name="how-acls-work"></a><span data-ttu-id="b3ea8-121">How ACLs work</span><span class="sxs-lookup"><span data-stu-id="b3ea8-121">How ACLs work</span></span>
<span data-ttu-id="b3ea8-122">An ACL is an object that contains a list of rules.</span><span class="sxs-lookup"><span data-stu-id="b3ea8-122">An ACL is an object that contains a list of rules.</span></span> <span data-ttu-id="b3ea8-123">When you create an ACL and apply it to a virtual machine endpoint, packet filtering takes place on the host node of your VM.</span><span class="sxs-lookup"><span data-stu-id="b3ea8-123">When you create an ACL and apply it to a virtual machine endpoint, packet filtering takes place on the host node of your VM.</span></span> <span data-ttu-id="b3ea8-124">This means the traffic from remote IP addresses is filtered by the host node for matching ACL rules instead of on your VM.</span><span class="sxs-lookup"><span data-stu-id="b3ea8-124">This means the traffic from remote IP addresses is filtered by the host node for matching ACL rules instead of on your VM.</span></span> <span data-ttu-id="b3ea8-125">This prevents your VM from spending the precious CPU cycles on packet filtering.</span><span class="sxs-lookup"><span data-stu-id="b3ea8-125">This prevents your VM from spending the precious CPU cycles on packet filtering.</span></span>

<span data-ttu-id="b3ea8-126">When a virtual machine is created, a default ACL is put in place to block all incoming traffic.</span><span class="sxs-lookup"><span data-stu-id="b3ea8-126">When a virtual machine is created, a default ACL is put in place to block all incoming traffic.</span></span> <span data-ttu-id="b3ea8-127">However, if an endpoint is created for (port 3389), then the default ACL is modified to allow all inbound traffic for that endpoint.</span><span class="sxs-lookup"><span data-stu-id="b3ea8-127">However, if an endpoint is created for (port 3389), then the default ACL is modified to allow all inbound traffic for that endpoint.</span></span> <span data-ttu-id="b3ea8-128">Inbound traffic from any remote subnet is then allowed to that endpoint and no firewall provisioning is required.</span><span class="sxs-lookup"><span data-stu-id="b3ea8-128">Inbound traffic from any remote subnet is then allowed to that endpoint and no firewall provisioning is required.</span></span> <span data-ttu-id="b3ea8-129">All other ports are blocked for inbound traffic unless endpoints are created for those ports.</span><span class="sxs-lookup"><span data-stu-id="b3ea8-129">All other ports are blocked for inbound traffic unless endpoints are created for those ports.</span></span> <span data-ttu-id="b3ea8-130">Outbound traffic is allowed by default.</span><span class="sxs-lookup"><span data-stu-id="b3ea8-130">Outbound traffic is allowed by default.</span></span>

<span data-ttu-id="b3ea8-131">**Example Default ACL table**</span><span class="sxs-lookup"><span data-stu-id="b3ea8-131">**Example Default ACL table**</span></span>

| <span data-ttu-id="b3ea8-132">**Rule #**</span><span class="sxs-lookup"><span data-stu-id="b3ea8-132">**Rule #**</span></span> | <span data-ttu-id="b3ea8-133">**Remote Subnet**</span><span class="sxs-lookup"><span data-stu-id="b3ea8-133">**Remote Subnet**</span></span> | <span data-ttu-id="b3ea8-134">**Endpoint**</span><span class="sxs-lookup"><span data-stu-id="b3ea8-134">**Endpoint**</span></span> | <span data-ttu-id="b3ea8-135">**Permit/Deny**</span><span class="sxs-lookup"><span data-stu-id="b3ea8-135">**Permit/Deny**</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="b3ea8-136">100</span><span class="sxs-lookup"><span data-stu-id="b3ea8-136">100</span></span> |<span data-ttu-id="b3ea8-137">0.0.0.0/0</span><span class="sxs-lookup"><span data-stu-id="b3ea8-137">0.0.0.0/0</span></span> |<span data-ttu-id="b3ea8-138">3389</span><span class="sxs-lookup"><span data-stu-id="b3ea8-138">3389</span></span> |<span data-ttu-id="b3ea8-139">Permit</span><span class="sxs-lookup"><span data-stu-id="b3ea8-139">Permit</span></span> |

## <a name="permit-and-deny"></a><span data-ttu-id="b3ea8-140">Permit and deny</span><span class="sxs-lookup"><span data-stu-id="b3ea8-140">Permit and deny</span></span>
<span data-ttu-id="b3ea8-141">You can selectively permit or deny network traffic for a virtual machine input endpoint by creating rules that specify "permit" or "deny".</span><span class="sxs-lookup"><span data-stu-id="b3ea8-141">You can selectively permit or deny network traffic for a virtual machine input endpoint by creating rules that specify "permit" or "deny".</span></span> <span data-ttu-id="b3ea8-142">It's important to note that by default, when an endpoint is created, all traffic is permitted to the endpoint.</span><span class="sxs-lookup"><span data-stu-id="b3ea8-142">It's important to note that by default, when an endpoint is created, all traffic is permitted to the endpoint.</span></span> <span data-ttu-id="b3ea8-143">For that reason, it's important to understand how to create permit/deny rules and place them in the proper order of precedence if you want granular control over the network traffic that you choose to allow to reach the virtual machine endpoint.</span><span class="sxs-lookup"><span data-stu-id="b3ea8-143">For that reason, it's important to understand how to create permit/deny rules and place them in the proper order of precedence if you want granular control over the network traffic that you choose to allow to reach the virtual machine endpoint.</span></span>

<span data-ttu-id="b3ea8-144">Points to consider:</span><span class="sxs-lookup"><span data-stu-id="b3ea8-144">Points to consider:</span></span>

1. <span data-ttu-id="b3ea8-145">**No ACL –** By default when an endpoint is created, we permit all for the endpoint.</span><span class="sxs-lookup"><span data-stu-id="b3ea8-145">**No ACL –** By default when an endpoint is created, we permit all for the endpoint.</span></span>
2. <span data-ttu-id="b3ea8-146">**Permit -** When you add one or more "permit" ranges, you are denying all other ranges by default.</span><span class="sxs-lookup"><span data-stu-id="b3ea8-146">**Permit -** When you add one or more "permit" ranges, you are denying all other ranges by default.</span></span> <span data-ttu-id="b3ea8-147">Only packets from the permitted IP range will be able to communicate with the virtual machine endpoint.</span><span class="sxs-lookup"><span data-stu-id="b3ea8-147">Only packets from the permitted IP range will be able to communicate with the virtual machine endpoint.</span></span>
3. <span data-ttu-id="b3ea8-148">**Deny -** When you add one or more "deny" ranges, you are permitting all other ranges of traffic by default.</span><span class="sxs-lookup"><span data-stu-id="b3ea8-148">**Deny -** When you add one or more "deny" ranges, you are permitting all other ranges of traffic by default.</span></span>
4. <span data-ttu-id="b3ea8-149">**Combination of Permit and Deny -** You can use a combination of "permit" and "deny" when you want to carve out a specific IP range to be permitted or denied.</span><span class="sxs-lookup"><span data-stu-id="b3ea8-149">**Combination of Permit and Deny -** You can use a combination of "permit" and "deny" when you want to carve out a specific IP range to be permitted or denied.</span></span>

## <a name="rules-and-rule-precedence"></a><span data-ttu-id="b3ea8-150">Rules and rule precedence</span><span class="sxs-lookup"><span data-stu-id="b3ea8-150">Rules and rule precedence</span></span>
<span data-ttu-id="b3ea8-151">Network ACLs can be set up on specific virtual machine endpoints.</span><span class="sxs-lookup"><span data-stu-id="b3ea8-151">Network ACLs can be set up on specific virtual machine endpoints.</span></span> <span data-ttu-id="b3ea8-152">For example, you can specify a network ACL for an RDP endpoint created on a virtual machine which locks down access for certain IP addresses.</span><span class="sxs-lookup"><span data-stu-id="b3ea8-152">For example, you can specify a network ACL for an RDP endpoint created on a virtual machine which locks down access for certain IP addresses.</span></span> <span data-ttu-id="b3ea8-153">The table below shows a way to grant access to public virtual IPs (VIPs) of a certain range to permit access for RDP.</span><span class="sxs-lookup"><span data-stu-id="b3ea8-153">The table below shows a way to grant access to public virtual IPs (VIPs) of a certain range to permit access for RDP.</span></span> <span data-ttu-id="b3ea8-154">All other remote IPs are denied.</span><span class="sxs-lookup"><span data-stu-id="b3ea8-154">All other remote IPs are denied.</span></span> <span data-ttu-id="b3ea8-155">We follow a *lowest takes precedence* rule order.</span><span class="sxs-lookup"><span data-stu-id="b3ea8-155">We follow a *lowest takes precedence* rule order.</span></span>

### <a name="multiple-rules"></a><span data-ttu-id="b3ea8-156">Multiple rules</span><span class="sxs-lookup"><span data-stu-id="b3ea8-156">Multiple rules</span></span>
<span data-ttu-id="b3ea8-157">In the example below, if you want to allow access to the RDP endpoint only from two public IPv4 address ranges (65.0.0.0/8, and 159.0.0.0/8), you can achieve this by specifying two *Permit* rules.</span><span class="sxs-lookup"><span data-stu-id="b3ea8-157">In the example below, if you want to allow access to the RDP endpoint only from two public IPv4 address ranges (65.0.0.0/8, and 159.0.0.0/8), you can achieve this by specifying two *Permit* rules.</span></span> <span data-ttu-id="b3ea8-158">In this case, since RDP is created by default for a virtual machine, you may want to lock down access to the RDP port based on a remote subnet.</span><span class="sxs-lookup"><span data-stu-id="b3ea8-158">In this case, since RDP is created by default for a virtual machine, you may want to lock down access to the RDP port based on a remote subnet.</span></span> <span data-ttu-id="b3ea8-159">The example below shows a way to grant access to public virtual IPs (VIPs) of a certain range to permit access for RDP.</span><span class="sxs-lookup"><span data-stu-id="b3ea8-159">The example below shows a way to grant access to public virtual IPs (VIPs) of a certain range to permit access for RDP.</span></span> <span data-ttu-id="b3ea8-160">All other remote IPs are denied.</span><span class="sxs-lookup"><span data-stu-id="b3ea8-160">All other remote IPs are denied.</span></span> <span data-ttu-id="b3ea8-161">This works because network ACLs can be set up for a specific virtual machine endpoint and access is denied by default.</span><span class="sxs-lookup"><span data-stu-id="b3ea8-161">This works because network ACLs can be set up for a specific virtual machine endpoint and access is denied by default.</span></span>

<span data-ttu-id="b3ea8-162">**Example – Multiple rules**</span><span class="sxs-lookup"><span data-stu-id="b3ea8-162">**Example – Multiple rules**</span></span>

| <span data-ttu-id="b3ea8-163">**Rule #**</span><span class="sxs-lookup"><span data-stu-id="b3ea8-163">**Rule #**</span></span> | <span data-ttu-id="b3ea8-164">**Remote Subnet**</span><span class="sxs-lookup"><span data-stu-id="b3ea8-164">**Remote Subnet**</span></span> | <span data-ttu-id="b3ea8-165">**Endpoint**</span><span class="sxs-lookup"><span data-stu-id="b3ea8-165">**Endpoint**</span></span> | <span data-ttu-id="b3ea8-166">**Permit/Deny**</span><span class="sxs-lookup"><span data-stu-id="b3ea8-166">**Permit/Deny**</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="b3ea8-167">100</span><span class="sxs-lookup"><span data-stu-id="b3ea8-167">100</span></span> |<span data-ttu-id="b3ea8-168">65.0.0.0/8</span><span class="sxs-lookup"><span data-stu-id="b3ea8-168">65.0.0.0/8</span></span> |<span data-ttu-id="b3ea8-169">3389</span><span class="sxs-lookup"><span data-stu-id="b3ea8-169">3389</span></span> |<span data-ttu-id="b3ea8-170">Permit</span><span class="sxs-lookup"><span data-stu-id="b3ea8-170">Permit</span></span> |
| <span data-ttu-id="b3ea8-171">200</span><span class="sxs-lookup"><span data-stu-id="b3ea8-171">200</span></span> |<span data-ttu-id="b3ea8-172">159.0.0.0/8</span><span class="sxs-lookup"><span data-stu-id="b3ea8-172">159.0.0.0/8</span></span> |<span data-ttu-id="b3ea8-173">3389</span><span class="sxs-lookup"><span data-stu-id="b3ea8-173">3389</span></span> |<span data-ttu-id="b3ea8-174">Permit</span><span class="sxs-lookup"><span data-stu-id="b3ea8-174">Permit</span></span> |

### <a name="rule-order"></a><span data-ttu-id="b3ea8-175">Rule order</span><span class="sxs-lookup"><span data-stu-id="b3ea8-175">Rule order</span></span>
<span data-ttu-id="b3ea8-176">Because multiple rules can be specified for an endpoint, there must be a way to organize rules in order to determine which rule takes precedence.</span><span class="sxs-lookup"><span data-stu-id="b3ea8-176">Because multiple rules can be specified for an endpoint, there must be a way to organize rules in order to determine which rule takes precedence.</span></span> <span data-ttu-id="b3ea8-177">The rule order specifies precedence.</span><span class="sxs-lookup"><span data-stu-id="b3ea8-177">The rule order specifies precedence.</span></span> <span data-ttu-id="b3ea8-178">Network ACLs follow a *lowest takes precedence* rule order.</span><span class="sxs-lookup"><span data-stu-id="b3ea8-178">Network ACLs follow a *lowest takes precedence* rule order.</span></span> <span data-ttu-id="b3ea8-179">In the example below, the endpoint on port 80 is selectively granted access to only certain IP address ranges.</span><span class="sxs-lookup"><span data-stu-id="b3ea8-179">In the example below, the endpoint on port 80 is selectively granted access to only certain IP address ranges.</span></span> <span data-ttu-id="b3ea8-180">To configure this, we have a deny rule (Rule \# 100) for addresses in the 175.1.0.1/24 space.</span><span class="sxs-lookup"><span data-stu-id="b3ea8-180">To configure this, we have a deny rule (Rule \# 100) for addresses in the 175.1.0.1/24 space.</span></span> <span data-ttu-id="b3ea8-181">A second rule is then specified with precedence 200 that permits access to all other addresses under 175.0.0.0/8.</span><span class="sxs-lookup"><span data-stu-id="b3ea8-181">A second rule is then specified with precedence 200 that permits access to all other addresses under 175.0.0.0/8.</span></span>

<span data-ttu-id="b3ea8-182">**Example – Rule precedence**</span><span class="sxs-lookup"><span data-stu-id="b3ea8-182">**Example – Rule precedence**</span></span>

| <span data-ttu-id="b3ea8-183">**Rule #**</span><span class="sxs-lookup"><span data-stu-id="b3ea8-183">**Rule #**</span></span> | <span data-ttu-id="b3ea8-184">**Remote Subnet**</span><span class="sxs-lookup"><span data-stu-id="b3ea8-184">**Remote Subnet**</span></span> | <span data-ttu-id="b3ea8-185">**Endpoint**</span><span class="sxs-lookup"><span data-stu-id="b3ea8-185">**Endpoint**</span></span> | <span data-ttu-id="b3ea8-186">**Permit/Deny**</span><span class="sxs-lookup"><span data-stu-id="b3ea8-186">**Permit/Deny**</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="b3ea8-187">100</span><span class="sxs-lookup"><span data-stu-id="b3ea8-187">100</span></span> |<span data-ttu-id="b3ea8-188">175.1.0.1/24</span><span class="sxs-lookup"><span data-stu-id="b3ea8-188">175.1.0.1/24</span></span> |<span data-ttu-id="b3ea8-189">80</span><span class="sxs-lookup"><span data-stu-id="b3ea8-189">80</span></span> |<span data-ttu-id="b3ea8-190">Deny</span><span class="sxs-lookup"><span data-stu-id="b3ea8-190">Deny</span></span> |
| <span data-ttu-id="b3ea8-191">200</span><span class="sxs-lookup"><span data-stu-id="b3ea8-191">200</span></span> |<span data-ttu-id="b3ea8-192">175.0.0.0/8</span><span class="sxs-lookup"><span data-stu-id="b3ea8-192">175.0.0.0/8</span></span> |<span data-ttu-id="b3ea8-193">80</span><span class="sxs-lookup"><span data-stu-id="b3ea8-193">80</span></span> |<span data-ttu-id="b3ea8-194">Permit</span><span class="sxs-lookup"><span data-stu-id="b3ea8-194">Permit</span></span> |

## <a name="network-acls-and-load-balanced-sets"></a><span data-ttu-id="b3ea8-195">Network ACLs and load balanced sets</span><span class="sxs-lookup"><span data-stu-id="b3ea8-195">Network ACLs and load balanced sets</span></span>
<span data-ttu-id="b3ea8-196">Network ACLs can be specified on a Load balanced set (LB Set) endpoint.</span><span class="sxs-lookup"><span data-stu-id="b3ea8-196">Network ACLs can be specified on a Load balanced set (LB Set) endpoint.</span></span> <span data-ttu-id="b3ea8-197">If an ACL is specified for a LB Set, the Network ACL is applied to all Virtual Machines in that LB Set.</span><span class="sxs-lookup"><span data-stu-id="b3ea8-197">If an ACL is specified for a LB Set, the Network ACL is applied to all Virtual Machines in that LB Set.</span></span> <span data-ttu-id="b3ea8-198">For example, if a LB Set is created with "Port 80" and the LB Set contains 3 VMs, the Network ACL created on endpoint "Port 80" of one VM will automatically apply to the other VMs.</span><span class="sxs-lookup"><span data-stu-id="b3ea8-198">For example, if a LB Set is created with "Port 80" and the LB Set contains 3 VMs, the Network ACL created on endpoint "Port 80" of one VM will automatically apply to the other VMs.</span></span>

![Network ACLs and load balanced sets](https://docstestmedia1.blob.core.windows.net/azure-media/articles/virtual-network/media/virtual-networks-acl/IC674733.png)

## <a name="next-steps"></a><span data-ttu-id="b3ea8-200">Next Steps</span><span class="sxs-lookup"><span data-stu-id="b3ea8-200">Next Steps</span></span>
[<span data-ttu-id="b3ea8-201">How to manage Access Control Lists (ACLs) for Endpoints by using PowerShell</span><span class="sxs-lookup"><span data-stu-id="b3ea8-201">How to manage Access Control Lists (ACLs) for Endpoints by using PowerShell</span></span>](virtual-networks-acl-powershell.md)


