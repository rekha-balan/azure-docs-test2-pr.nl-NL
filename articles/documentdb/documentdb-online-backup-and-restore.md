---
title: Online backup and restore with DocumentDB | Microsoft Docs
description: Learn how to perform automatic backup and restore of NoSQL databases with Azure DocumentDB.
keywords: backup and restore, online backup
services: documentdb
documentationcenter: ''
author: RahulPrasad16
manager: jhubbard
editor: monicar
ms.assetid: 98eade4a-7ef4-4667-b167-6603ecd80b79
ms.service: documentdb
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: multiple
ms.topic: article
ms.date: 02/06/2017
ms.author: raprasa
ms.openlocfilehash: 9f10100d6edc4ead227ea467000f393f9af3cb7b
ms.sourcegitcommit: 5b9d839c0c0a94b293fdafe1d6e5429506c07e05
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 08/02/2018
ms.locfileid: "44564529"
---
# <a name="automatic-online-backup-and-restore-with-documentdb"></a><span data-ttu-id="44545-104">Automatic online backup and restore with DocumentDB</span><span class="sxs-lookup"><span data-stu-id="44545-104">Automatic online backup and restore with DocumentDB</span></span>
<span data-ttu-id="44545-105">Azure DocumentDB automatically takes backups of all your data at regular intervals.</span><span class="sxs-lookup"><span data-stu-id="44545-105">Azure DocumentDB automatically takes backups of all your data at regular intervals.</span></span> <span data-ttu-id="44545-106">The automatic backups are taken without affecting the performance or availability of your NoSQL database operations.</span><span class="sxs-lookup"><span data-stu-id="44545-106">The automatic backups are taken without affecting the performance or availability of your NoSQL database operations.</span></span> <span data-ttu-id="44545-107">All your backups are stored separately in another storage service, and those backups are globally replicated for resiliency against regional disasters.</span><span class="sxs-lookup"><span data-stu-id="44545-107">All your backups are stored separately in another storage service, and those backups are globally replicated for resiliency against regional disasters.</span></span> <span data-ttu-id="44545-108">The automatic backups are intended for scenarios when you accidentally delete your DocumentDB collection and later require data recovery or a disaster recovery solution.</span><span class="sxs-lookup"><span data-stu-id="44545-108">The automatic backups are intended for scenarios when you accidentally delete your DocumentDB collection and later require data recovery or a disaster recovery solution.</span></span>  

<span data-ttu-id="44545-109">This article starts with a quick recap of the data redundancy and availability in DocumentDB, and then discusses backups.</span><span class="sxs-lookup"><span data-stu-id="44545-109">This article starts with a quick recap of the data redundancy and availability in DocumentDB, and then discusses backups.</span></span> 

## <a name="high-availability-with-documentdb---a-recap"></a><span data-ttu-id="44545-110">High availability with DocumentDB - a recap</span><span class="sxs-lookup"><span data-stu-id="44545-110">High availability with DocumentDB - a recap</span></span>
<span data-ttu-id="44545-111">DocumentDB is designed to be [globally distributed](documentdb-distribute-data-globally.md) – it allows you to scale throughput across multiple Azure regions along with policy driven failover and transparent multi-homing APIs.</span><span class="sxs-lookup"><span data-stu-id="44545-111">DocumentDB is designed to be [globally distributed](documentdb-distribute-data-globally.md) – it allows you to scale throughput across multiple Azure regions along with policy driven failover and transparent multi-homing APIs.</span></span> <span data-ttu-id="44545-112">As a database system offering [99.99% availability SLAs](https://azure.microsoft.com/support/legal/sla/documentdb/v1_1/), all the writes in DocumentDB are durably committed to local disks by a quorum of replicas within a local data center before acknowledging to the client.</span><span class="sxs-lookup"><span data-stu-id="44545-112">As a database system offering [99.99% availability SLAs](https://azure.microsoft.com/support/legal/sla/documentdb/v1_1/), all the writes in DocumentDB are durably committed to local disks by a quorum of replicas within a local data center before acknowledging to the client.</span></span> <span data-ttu-id="44545-113">Note that the high availability of DocumentDB relies on local storage and does not depend on any external storage technologies.</span><span class="sxs-lookup"><span data-stu-id="44545-113">Note that the high availability of DocumentDB relies on local storage and does not depend on any external storage technologies.</span></span> <span data-ttu-id="44545-114">Additionally, if your database account is associated with more than one Azure region, your writes are replicated across other regions as well.</span><span class="sxs-lookup"><span data-stu-id="44545-114">Additionally, if your database account is associated with more than one Azure region, your writes are replicated across other regions as well.</span></span> <span data-ttu-id="44545-115">To scale your throughput and access data at low latencies, you can have as many read regions associated with your database account as you like.</span><span class="sxs-lookup"><span data-stu-id="44545-115">To scale your throughput and access data at low latencies, you can have as many read regions associated with your database account as you like.</span></span> <span data-ttu-id="44545-116">In each read region, the (replicated) data is durably persisted across a replica set.</span><span class="sxs-lookup"><span data-stu-id="44545-116">In each read region, the (replicated) data is durably persisted across a replica set.</span></span>  

<span data-ttu-id="44545-117">As illustrated in the following diagram, a single DocumentDB collection is [horizontally partitioned](documentdb-partition-data.md).</span><span class="sxs-lookup"><span data-stu-id="44545-117">As illustrated in the following diagram, a single DocumentDB collection is [horizontally partitioned](documentdb-partition-data.md).</span></span> <span data-ttu-id="44545-118">A “partition” is denoted by a circle in the following diagram, and each partition is made highly available via a replica set.</span><span class="sxs-lookup"><span data-stu-id="44545-118">A “partition” is denoted by a circle in the following diagram, and each partition is made highly available via a replica set.</span></span> <span data-ttu-id="44545-119">This is the local distribution within a single Azure region (denoted by the X axis).</span><span class="sxs-lookup"><span data-stu-id="44545-119">This is the local distribution within a single Azure region (denoted by the X axis).</span></span> <span data-ttu-id="44545-120">Further, each partition (with its corresponding replica set) is then globally distributed across multiple regions associated with your database account (for example, in this illustration the three regions – East US, West US and Central India).</span><span class="sxs-lookup"><span data-stu-id="44545-120">Further, each partition (with its corresponding replica set) is then globally distributed across multiple regions associated with your database account (for example, in this illustration the three regions – East US, West US and Central India).</span></span> <span data-ttu-id="44545-121">The “partition set” is a globally distributed entity comprising of multiple copies of your data in each region (denoted by the Y axis).</span><span class="sxs-lookup"><span data-stu-id="44545-121">The “partition set” is a globally distributed entity comprising of multiple copies of your data in each region (denoted by the Y axis).</span></span> <span data-ttu-id="44545-122">You can assign priority to the regions associated with your database account and DocumentDB will transparently failover to the next region in case of disaster.</span><span class="sxs-lookup"><span data-stu-id="44545-122">You can assign priority to the regions associated with your database account and DocumentDB will transparently failover to the next region in case of disaster.</span></span> <span data-ttu-id="44545-123">You can also manually simulate failover to test the end-to-end availability of your application.</span><span class="sxs-lookup"><span data-stu-id="44545-123">You can also manually simulate failover to test the end-to-end availability of your application.</span></span>  

<span data-ttu-id="44545-124">The following image illustrates the high degree of redundancy with DocumentDB.</span><span class="sxs-lookup"><span data-stu-id="44545-124">The following image illustrates the high degree of redundancy with DocumentDB.</span></span>

![High degree of redundancy with DocumentDB](https://docstestmedia1.blob.core.windows.net/azure-media/articles/documentdb/media/documentdb-online-backup-and-restore/azure-documentdb-nosql-database-redundancy.png)

![High degree of redundancy with DocumentDB](https://docstestmedia1.blob.core.windows.net/azure-media/articles/documentdb/media/documentdb-online-backup-and-restore/azure-documentdb-nosql-database-global-distribution.png)

## <a name="full-automatic-online-backups"></a><span data-ttu-id="44545-127">Full, automatic, online backups</span><span class="sxs-lookup"><span data-stu-id="44545-127">Full, automatic, online backups</span></span>
<span data-ttu-id="44545-128">Oops, I deleted my collection or database!</span><span class="sxs-lookup"><span data-stu-id="44545-128">Oops, I deleted my collection or database!</span></span> <span data-ttu-id="44545-129">With DocumentDB, not only your data, but the backups of your data are also made highly redundant and resilient to regional disasters.</span><span class="sxs-lookup"><span data-stu-id="44545-129">With DocumentDB, not only your data, but the backups of your data are also made highly redundant and resilient to regional disasters.</span></span> <span data-ttu-id="44545-130">These automated backups are currently taken approximately every four hours and latest 2 backups are stored at all times.</span><span class="sxs-lookup"><span data-stu-id="44545-130">These automated backups are currently taken approximately every four hours and latest 2 backups are stored at all times.</span></span> <span data-ttu-id="44545-131">If the data is accidently dropped or corrupted, please [contact Azure support](https://azure.microsoft.com/support/options/) within 8 hours.</span><span class="sxs-lookup"><span data-stu-id="44545-131">If the data is accidently dropped or corrupted, please [contact Azure support](https://azure.microsoft.com/support/options/) within 8 hours.</span></span> 

<span data-ttu-id="44545-132">The backups are taken without affecting the performance or availability of your database operations.</span><span class="sxs-lookup"><span data-stu-id="44545-132">The backups are taken without affecting the performance or availability of your database operations.</span></span> <span data-ttu-id="44545-133">DocumentDB takes the backup in the background without consuming your provisioned RUs or affecting the performance and without affecting the availability of your NoSQL database.</span><span class="sxs-lookup"><span data-stu-id="44545-133">DocumentDB takes the backup in the background without consuming your provisioned RUs or affecting the performance and without affecting the availability of your NoSQL database.</span></span> 

<span data-ttu-id="44545-134">Unlike your data that is stored inside DocumentDB, the automatic backups are stored in Azure Blob Storage service.</span><span class="sxs-lookup"><span data-stu-id="44545-134">Unlike your data that is stored inside DocumentDB, the automatic backups are stored in Azure Blob Storage service.</span></span> <span data-ttu-id="44545-135">To guarantee the low latency/efficient upload, the snapshot of your backup is uploaded to an instance of Azure Blob storage in the same region as the current write region of your DocumentDB database account.</span><span class="sxs-lookup"><span data-stu-id="44545-135">To guarantee the low latency/efficient upload, the snapshot of your backup is uploaded to an instance of Azure Blob storage in the same region as the current write region of your DocumentDB database account.</span></span> <span data-ttu-id="44545-136">For resiliency against regional disaster, each snapshot of your backup data in Azure Blob Storage is again replicated via geo-redundant storage (GRS) to another region.</span><span class="sxs-lookup"><span data-stu-id="44545-136">For resiliency against regional disaster, each snapshot of your backup data in Azure Blob Storage is again replicated via geo-redundant storage (GRS) to another region.</span></span> <span data-ttu-id="44545-137">The following diagram shows that the entire DocumentDB collection (with all three primary partitions in West US, in this example) is backed up in a remote Azure Blob Storage account in West US and then GRS replicated to East US.</span><span class="sxs-lookup"><span data-stu-id="44545-137">The following diagram shows that the entire DocumentDB collection (with all three primary partitions in West US, in this example) is backed up in a remote Azure Blob Storage account in West US and then GRS replicated to East US.</span></span> 

<span data-ttu-id="44545-138">The following image illustrates periodic full backups of all DocumentDB entities in GRS Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="44545-138">The following image illustrates periodic full backups of all DocumentDB entities in GRS Azure Storage.</span></span>

![Periodic full backups of all DocumentDB entities in GRS Azure Storage](https://docstestmedia1.blob.core.windows.net/azure-media/articles/documentdb/media/documentdb-online-backup-and-restore/azure-documentdb-nosql-database-automatic-backup.png)

## <a name="retention-period-for-a-given-snapshot"></a><span data-ttu-id="44545-140">Retention period for a given snapshot</span><span class="sxs-lookup"><span data-stu-id="44545-140">Retention period for a given snapshot</span></span>
<span data-ttu-id="44545-141">As described above, we periodically take snapshots of your data and per our compliance regulations, we retain the latest snapshot up to 90 days before it eventually gets purged.</span><span class="sxs-lookup"><span data-stu-id="44545-141">As described above, we periodically take snapshots of your data and per our compliance regulations, we retain the latest snapshot up to 90 days before it eventually gets purged.</span></span> <span data-ttu-id="44545-142">If a collection or account is deleted, DocumentDB stores the last backup for 90 days.</span><span class="sxs-lookup"><span data-stu-id="44545-142">If a collection or account is deleted, DocumentDB stores the last backup for 90 days.</span></span>

## <a name="restore-database-from-the-online-backup"></a><span data-ttu-id="44545-143">Restore database from the online backup</span><span class="sxs-lookup"><span data-stu-id="44545-143">Restore database from the online backup</span></span>
<span data-ttu-id="44545-144">In case you accidentally delete your data, you can [file a support ticket](https://portal.azure.com/?#blade/Microsoft_Azure_Support/HelpAndSupportBlade) or [call Azure support](https://azure.microsoft.com/support/options/) to restore the data from the last automatic backup.</span><span class="sxs-lookup"><span data-stu-id="44545-144">In case you accidentally delete your data, you can [file a support ticket](https://portal.azure.com/?#blade/Microsoft_Azure_Support/HelpAndSupportBlade) or [call Azure support](https://azure.microsoft.com/support/options/) to restore the data from the last automatic backup.</span></span> <span data-ttu-id="44545-145">For a specific snapshot of your backup to be restored, DocumentDB requires that the data was at least available with us for the duration of the backup cycle for that snapshot.</span><span class="sxs-lookup"><span data-stu-id="44545-145">For a specific snapshot of your backup to be restored, DocumentDB requires that the data was at least available with us for the duration of the backup cycle for that snapshot.</span></span>

## <a name="next-steps"></a><span data-ttu-id="44545-146">Next steps</span><span class="sxs-lookup"><span data-stu-id="44545-146">Next steps</span></span>
<span data-ttu-id="44545-147">To replicate your NoSQL database in multiple data centers, see [distribute your data globally with DocumentDB](documentdb-distribute-data-globally.md).</span><span class="sxs-lookup"><span data-stu-id="44545-147">To replicate your NoSQL database in multiple data centers, see [distribute your data globally with DocumentDB](documentdb-distribute-data-globally.md).</span></span> 

<span data-ttu-id="44545-148">To file contact Azure Support, [file a ticket from the Azure portal](https://portal.azure.com/?#blade/Microsoft_Azure_Support/HelpAndSupportBlade).</span><span class="sxs-lookup"><span data-stu-id="44545-148">To file contact Azure Support, [file a ticket from the Azure portal](https://portal.azure.com/?#blade/Microsoft_Azure_Support/HelpAndSupportBlade).</span></span>




