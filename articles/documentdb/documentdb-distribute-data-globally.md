---
title: Distribute data globally with DocumentDB | Microsoft Docs
description: Learn about planet-scale geo-replication, failover, and data recovery using global databases from Azure DocumentDB, a fully managed NoSQL database service.
services: documentdb
documentationcenter: ''
author: arramac
manager: jhubbard
editor: ''
ms.assetid: ba5ad0cc-aa1f-4f40-aee9-3364af070725
ms.service: documentdb
ms.devlang: multiple
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 03/14/2017
ms.author: arramac
ms.openlocfilehash: e7262d968091df8ae73a7408f1df236542ad207f
ms.sourcegitcommit: 5b9d839c0c0a94b293fdafe1d6e5429506c07e05
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 08/02/2018
ms.locfileid: "44672251"
---
# <a name="documentdb---a-globally-distributed-database-service-on-azure"></a><span data-ttu-id="0165c-103">DocumentDB - a globally distributed database service on Azure</span><span class="sxs-lookup"><span data-stu-id="0165c-103">DocumentDB - a globally distributed database service on Azure</span></span>
<span data-ttu-id="0165c-104">Azure is ubiquitous - it has a global footprint across 30+ geographical regions and is continuously expanding.</span><span class="sxs-lookup"><span data-stu-id="0165c-104">Azure is ubiquitous - it has a global footprint across 30+ geographical regions and is continuously expanding.</span></span> <span data-ttu-id="0165c-105">With its worldwide presence, one of the differentiated capabilities Azure offers to its developers is the ability to build, deploy, and manage globally distributed applications easily.</span><span class="sxs-lookup"><span data-stu-id="0165c-105">With its worldwide presence, one of the differentiated capabilities Azure offers to its developers is the ability to build, deploy, and manage globally distributed applications easily.</span></span> <span data-ttu-id="0165c-106">DocumentDB is Microsoft's multi-tenant, globally distributed database system designed to enable developers to build planet scale applications.</span><span class="sxs-lookup"><span data-stu-id="0165c-106">DocumentDB is Microsoft's multi-tenant, globally distributed database system designed to enable developers to build planet scale applications.</span></span> <span data-ttu-id="0165c-107">DocumentDB allows you to elastically scale both, throughput and storage across any number of geographical regions.</span><span class="sxs-lookup"><span data-stu-id="0165c-107">DocumentDB allows you to elastically scale both, throughput and storage across any number of geographical regions.</span></span> <span data-ttu-id="0165c-108">The service offers guaranteed low latency at P99, 99.99% high availability, predictable throughput, and [multiple well-defined consistency models](documentdb-consistency-levels.md) – all backed by comprehensive SLAs.</span><span class="sxs-lookup"><span data-stu-id="0165c-108">The service offers guaranteed low latency at P99, 99.99% high availability, predictable throughput, and [multiple well-defined consistency models](documentdb-consistency-levels.md) – all backed by comprehensive SLAs.</span></span> <span data-ttu-id="0165c-109">By virtue of its [schema-agnostic and write optimized database engine](http://www.vldb.org/pvldb/vol8/p1668-shukla.pdf), by default DocumentDB is capable of automatically indexing all the data it ingests and serve [SQL](documentdb-sql-query.md), [MongoDB](documentdb-protocol-mongodb.md), and [JavaScript language-integrated queries](documentdb-programming.md#javascript-language-integrated-query-api) in a scale-independent manner.</span><span class="sxs-lookup"><span data-stu-id="0165c-109">By virtue of its [schema-agnostic and write optimized database engine](http://www.vldb.org/pvldb/vol8/p1668-shukla.pdf), by default DocumentDB is capable of automatically indexing all the data it ingests and serve [SQL](documentdb-sql-query.md), [MongoDB](documentdb-protocol-mongodb.md), and [JavaScript language-integrated queries](documentdb-programming.md#javascript-language-integrated-query-api) in a scale-independent manner.</span></span> <span data-ttu-id="0165c-110">As a cloud service, DocumentDB is carefully engineered with multi-tenancy and global distribution from the ground up.</span><span class="sxs-lookup"><span data-stu-id="0165c-110">As a cloud service, DocumentDB is carefully engineered with multi-tenancy and global distribution from the ground up.</span></span>

<span data-ttu-id="0165c-111">**A single DocumentDB collection partitioned and distributed across three Azure regions**</span><span class="sxs-lookup"><span data-stu-id="0165c-111">**A single DocumentDB collection partitioned and distributed across three Azure regions**</span></span>

![Azure DocumentDB collection partitioned and distributed across three regions](https://docstestmedia1.blob.core.windows.net/azure-media/articles/documentdb/media/documentdb-distribute-data-globally/documentdb-global-apps.png)

<span data-ttu-id="0165c-113">As we have learned while building DocumentDB, adding global distribution cannot be an afterthought - it cannot be "bolted-on" atop a "single site" database system.</span><span class="sxs-lookup"><span data-stu-id="0165c-113">As we have learned while building DocumentDB, adding global distribution cannot be an afterthought - it cannot be "bolted-on" atop a "single site" database system.</span></span> <span data-ttu-id="0165c-114">The capabilities offered by a globally distributed database span beyond that of traditional geographical disaster recovery (Geo-DR) offered by "single-site" databases.</span><span class="sxs-lookup"><span data-stu-id="0165c-114">The capabilities offered by a globally distributed database span beyond that of traditional geographical disaster recovery (Geo-DR) offered by "single-site" databases.</span></span> <span data-ttu-id="0165c-115">Single site databases offering Geo-DR capability are a strict subset of globally distributed databases.</span><span class="sxs-lookup"><span data-stu-id="0165c-115">Single site databases offering Geo-DR capability are a strict subset of globally distributed databases.</span></span> 

<span data-ttu-id="0165c-116">With DocumentDB's turnkey global distribution, developers do not have to build their own replication scaffolding by employing either the Lambda pattern (for example, [AWS DynamoDB replication](https://github.com/awslabs/dynamodb-cross-region-library/blob/master/README.md)) over the database log or by doing "double writes" across multiple regions.</span><span class="sxs-lookup"><span data-stu-id="0165c-116">With DocumentDB's turnkey global distribution, developers do not have to build their own replication scaffolding by employing either the Lambda pattern (for example, [AWS DynamoDB replication](https://github.com/awslabs/dynamodb-cross-region-library/blob/master/README.md)) over the database log or by doing "double writes" across multiple regions.</span></span> <span data-ttu-id="0165c-117">We do not recommend these approaches since it is impossible to ensure correctness of such approaches and provide sound SLAs.</span><span class="sxs-lookup"><span data-stu-id="0165c-117">We do not recommend these approaches since it is impossible to ensure correctness of such approaches and provide sound SLAs.</span></span> 

<span data-ttu-id="0165c-118">In this article, we provide an overview of DocumentDB's global distribution capabilities.</span><span class="sxs-lookup"><span data-stu-id="0165c-118">In this article, we provide an overview of DocumentDB's global distribution capabilities.</span></span> <span data-ttu-id="0165c-119">We also describe DocumentDB's unique approach to providing comprehensive SLAs.</span><span class="sxs-lookup"><span data-stu-id="0165c-119">We also describe DocumentDB's unique approach to providing comprehensive SLAs.</span></span> 

## <a id="EnableGlobalDistribution"></a><span data-ttu-id="0165c-120">Enabling turn-key global distribution</span><span class="sxs-lookup"><span data-stu-id="0165c-120">Enabling turn-key global distribution</span></span>
<span data-ttu-id="0165c-121">DocumentDB provides the following capabilities to enable you to easily write planet scale applications.</span><span class="sxs-lookup"><span data-stu-id="0165c-121">DocumentDB provides the following capabilities to enable you to easily write planet scale applications.</span></span> <span data-ttu-id="0165c-122">These capabilities are available via DocumentDB's resource provider-based [REST APIs](https://docs.microsoft.com/rest/api/documentdbresourceprovider/) as well as, the Azure portal.</span><span class="sxs-lookup"><span data-stu-id="0165c-122">These capabilities are available via DocumentDB's resource provider-based [REST APIs](https://docs.microsoft.com/rest/api/documentdbresourceprovider/) as well as, the Azure portal.</span></span>

### <a id="RegionalPresence"></a><span data-ttu-id="0165c-123">Ubiquitous regional presence</span><span class="sxs-lookup"><span data-stu-id="0165c-123">Ubiquitous regional presence</span></span> 
<span data-ttu-id="0165c-124">Azure is constantly growing its geographical presence by bringing new regions online.</span><span class="sxs-lookup"><span data-stu-id="0165c-124">Azure is constantly growing its geographical presence by bringing new regions online.</span></span> <span data-ttu-id="0165c-125">DocumentDB is available in all new Azure regions by default.</span><span class="sxs-lookup"><span data-stu-id="0165c-125">DocumentDB is available in all new Azure regions by default.</span></span> <span data-ttu-id="0165c-126">This allows you to associate a geographical region with your DocumentDB database account as soon as Azure opens the new region for business.</span><span class="sxs-lookup"><span data-stu-id="0165c-126">This allows you to associate a geographical region with your DocumentDB database account as soon as Azure opens the new region for business.</span></span>

<span data-ttu-id="0165c-127">**DocumentDB is available in all Azure regions by default**</span><span class="sxs-lookup"><span data-stu-id="0165c-127">**DocumentDB is available in all Azure regions by default**</span></span>

![DocumentDB available on all Azure regions](https://docstestmedia1.blob.core.windows.net/azure-media/articles/documentdb/media/documentdb-distribute-data-globally/azure-regions.png)

### <a id="UnlimitedRegionsPerAccount"></a><span data-ttu-id="0165c-129">Associating an unlimited number of regions with your DocumentDB database account</span><span class="sxs-lookup"><span data-stu-id="0165c-129">Associating an unlimited number of regions with your DocumentDB database account</span></span>
<span data-ttu-id="0165c-130">DocumentDB allows you to associate any number of Azure regions with your DocumentDB database account.</span><span class="sxs-lookup"><span data-stu-id="0165c-130">DocumentDB allows you to associate any number of Azure regions with your DocumentDB database account.</span></span> <span data-ttu-id="0165c-131">Outside of geo-fencing restrictions (for example, China, Germany), there are no limitations on the number of regions that can be associated with your DocumentDB database account.</span><span class="sxs-lookup"><span data-stu-id="0165c-131">Outside of geo-fencing restrictions (for example, China, Germany), there are no limitations on the number of regions that can be associated with your DocumentDB database account.</span></span> <span data-ttu-id="0165c-132">The following figure shows a database account configured to span across 21 Azure regions.</span><span class="sxs-lookup"><span data-stu-id="0165c-132">The following figure shows a database account configured to span across 21 Azure regions.</span></span>  

<span data-ttu-id="0165c-133">**A tenant's DocumentDB database account spanning 21 Azure regions**</span><span class="sxs-lookup"><span data-stu-id="0165c-133">**A tenant's DocumentDB database account spanning 21 Azure regions**</span></span>

![DocumentDB database account spanning 21 Azure regions](https://docstestmedia1.blob.core.windows.net/azure-media/articles/documentdb/media/documentdb-distribute-data-globally/documentdb-spanning-regions.png)

### <a id="PolicyBasedGeoFencing"></a><span data-ttu-id="0165c-135">Policy-based geo-fencing</span><span class="sxs-lookup"><span data-stu-id="0165c-135">Policy-based geo-fencing</span></span>
<span data-ttu-id="0165c-136">DocumentDB is designed to have policy-based geo-fencing capabilities.</span><span class="sxs-lookup"><span data-stu-id="0165c-136">DocumentDB is designed to have policy-based geo-fencing capabilities.</span></span> <span data-ttu-id="0165c-137">Geo-fencing is an important component to ensure data governance and compliance restrictions and may prevent associating a specific region with your account.</span><span class="sxs-lookup"><span data-stu-id="0165c-137">Geo-fencing is an important component to ensure data governance and compliance restrictions and may prevent associating a specific region with your account.</span></span> <span data-ttu-id="0165c-138">Examples of geo-fencing include (but are not restricted to), scoping global distribution to the regions within a sovereign cloud (for example, China and Germany), or within a government taxation boundary (for example, Australia).</span><span class="sxs-lookup"><span data-stu-id="0165c-138">Examples of geo-fencing include (but are not restricted to), scoping global distribution to the regions within a sovereign cloud (for example, China and Germany), or within a government taxation boundary (for example, Australia).</span></span> <span data-ttu-id="0165c-139">The policies are controlled using the metadata of your Azure subscription.</span><span class="sxs-lookup"><span data-stu-id="0165c-139">The policies are controlled using the metadata of your Azure subscription.</span></span>

### <a id="DynamicallyAddRegions"></a><span data-ttu-id="0165c-140">Dynamically add and remove regions</span><span class="sxs-lookup"><span data-stu-id="0165c-140">Dynamically add and remove regions</span></span>
<span data-ttu-id="0165c-141">DocumentDB allows you to add (associate) or remove (dissociate) regions to your database account at any point in time (see [preceding figure](#UnlimitedRegionsPerAccount)).</span><span class="sxs-lookup"><span data-stu-id="0165c-141">DocumentDB allows you to add (associate) or remove (dissociate) regions to your database account at any point in time (see [preceding figure](#UnlimitedRegionsPerAccount)).</span></span> <span data-ttu-id="0165c-142">By virtue of replicating data across partitions in parallel, DocumentDB ensures that when a new region comes online, DocumentDB is available within 30 minutes anywhere in the world for up to 100 TBs.</span><span class="sxs-lookup"><span data-stu-id="0165c-142">By virtue of replicating data across partitions in parallel, DocumentDB ensures that when a new region comes online, DocumentDB is available within 30 minutes anywhere in the world for up to 100 TBs.</span></span> 

### <a id="FailoverPriorities"></a><span data-ttu-id="0165c-143">Failover priorities</span><span class="sxs-lookup"><span data-stu-id="0165c-143">Failover priorities</span></span>
<span data-ttu-id="0165c-144">To control exact sequence of regional failovers when there is a multi-regional outage, DocumentDB enables you to associate the priority to various regions associated with the database account (see the following figure).</span><span class="sxs-lookup"><span data-stu-id="0165c-144">To control exact sequence of regional failovers when there is a multi-regional outage, DocumentDB enables you to associate the priority to various regions associated with the database account (see the following figure).</span></span> <span data-ttu-id="0165c-145">DocumentDB ensures that the automatic failover sequence occurs in the priority order you specified.</span><span class="sxs-lookup"><span data-stu-id="0165c-145">DocumentDB ensures that the automatic failover sequence occurs in the priority order you specified.</span></span>

<span data-ttu-id="0165c-146">**A tenant of DocumentDB can configure the failover priority order (right pane) for regions associated with a database account**</span><span class="sxs-lookup"><span data-stu-id="0165c-146">**A tenant of DocumentDB can configure the failover priority order (right pane) for regions associated with a database account**</span></span>

![Configuring failover priorities with Azure DocumentDB](https://docstestmedia1.blob.core.windows.net/azure-media/articles/documentdb/media/documentdb-distribute-data-globally/documentdb-failover-priorities.png)

### <a id="OfflineRegions"></a><span data-ttu-id="0165c-148">Dynamically taking a region "offline"</span><span class="sxs-lookup"><span data-stu-id="0165c-148">Dynamically taking a region "offline"</span></span>
<span data-ttu-id="0165c-149">DocumentDB enables you to take your database account offline in a specific region and bring it back online later.</span><span class="sxs-lookup"><span data-stu-id="0165c-149">DocumentDB enables you to take your database account offline in a specific region and bring it back online later.</span></span> <span data-ttu-id="0165c-150">Regions marked offline do not actively participate in replication and are not part of the failover sequence.</span><span class="sxs-lookup"><span data-stu-id="0165c-150">Regions marked offline do not actively participate in replication and are not part of the failover sequence.</span></span> <span data-ttu-id="0165c-151">This enables you to freeze the last known good database image in one of the read regions before rolling out potentially risky upgrades to your application.</span><span class="sxs-lookup"><span data-stu-id="0165c-151">This enables you to freeze the last known good database image in one of the read regions before rolling out potentially risky upgrades to your application.</span></span>

### <a id="ConsistencyLevels"></a><span data-ttu-id="0165c-152">Multiple, well-defined consistency models for globally replicated databases</span><span class="sxs-lookup"><span data-stu-id="0165c-152">Multiple, well-defined consistency models for globally replicated databases</span></span>
<span data-ttu-id="0165c-153">DocumentDB exposes [multiple well-defined consistency levels](documentdb-consistency-levels.md) backed by SLAs.</span><span class="sxs-lookup"><span data-stu-id="0165c-153">DocumentDB exposes [multiple well-defined consistency levels](documentdb-consistency-levels.md) backed by SLAs.</span></span> <span data-ttu-id="0165c-154">You can choose a specific consistency model (from the available list of options) depending on the workload/scenarios.</span><span class="sxs-lookup"><span data-stu-id="0165c-154">You can choose a specific consistency model (from the available list of options) depending on the workload/scenarios.</span></span> 

### <a id="TunableConsistency"></a><span data-ttu-id="0165c-155">Tunable consistency for globally replicated databases</span><span class="sxs-lookup"><span data-stu-id="0165c-155">Tunable consistency for globally replicated databases</span></span>
<span data-ttu-id="0165c-156">DocumentDB allows you to programmatically override and relax the default consistency choice on a per request basis, at runtime.</span><span class="sxs-lookup"><span data-stu-id="0165c-156">DocumentDB allows you to programmatically override and relax the default consistency choice on a per request basis, at runtime.</span></span> 

### <a id="DynamicallyConfigurableReadWriteRegions"></a><span data-ttu-id="0165c-157">Dynamically configurable read and write regions</span><span class="sxs-lookup"><span data-stu-id="0165c-157">Dynamically configurable read and write regions</span></span>
<span data-ttu-id="0165c-158">DocumentDB enables you to configure the regions (associated with the database) for "read", "write" or "read/write" regions.</span><span class="sxs-lookup"><span data-stu-id="0165c-158">DocumentDB enables you to configure the regions (associated with the database) for "read", "write" or "read/write" regions.</span></span> 

### <a id="ElasticallyScaleThroughput"></a><span data-ttu-id="0165c-159">Elastically scaling throughput across Azure regions</span><span class="sxs-lookup"><span data-stu-id="0165c-159">Elastically scaling throughput across Azure regions</span></span>
<span data-ttu-id="0165c-160">You can elastically scale a DocumentDB collection by provisioning throughput programmatically.</span><span class="sxs-lookup"><span data-stu-id="0165c-160">You can elastically scale a DocumentDB collection by provisioning throughput programmatically.</span></span> <span data-ttu-id="0165c-161">The throughput is applied to all the regions the collection is distributed in.</span><span class="sxs-lookup"><span data-stu-id="0165c-161">The throughput is applied to all the regions the collection is distributed in.</span></span>

### <a id="GeoLocalReadsAndWrites"></a><span data-ttu-id="0165c-162">Geo-local reads and writes</span><span class="sxs-lookup"><span data-stu-id="0165c-162">Geo-local reads and writes</span></span>
<span data-ttu-id="0165c-163">The key benefit of a globally distributed database is to offer low latency access to the data anywhere in the world.</span><span class="sxs-lookup"><span data-stu-id="0165c-163">The key benefit of a globally distributed database is to offer low latency access to the data anywhere in the world.</span></span> <span data-ttu-id="0165c-164">DocumentDB offers low latency guarantees at P99 for various database operations.</span><span class="sxs-lookup"><span data-stu-id="0165c-164">DocumentDB offers low latency guarantees at P99 for various database operations.</span></span> <span data-ttu-id="0165c-165">It ensures that all reads are routed to the closest local read region.</span><span class="sxs-lookup"><span data-stu-id="0165c-165">It ensures that all reads are routed to the closest local read region.</span></span> <span data-ttu-id="0165c-166">To serve a read request, the quorum local to the region in which the read is issued is used; the same applies to the writes.</span><span class="sxs-lookup"><span data-stu-id="0165c-166">To serve a read request, the quorum local to the region in which the read is issued is used; the same applies to the writes.</span></span> <span data-ttu-id="0165c-167">A write is acknowledged only after a majority of replicas has durably committed the write locally but without being gated on remote replicas to acknowledge the writes.</span><span class="sxs-lookup"><span data-stu-id="0165c-167">A write is acknowledged only after a majority of replicas has durably committed the write locally but without being gated on remote replicas to acknowledge the writes.</span></span> <span data-ttu-id="0165c-168">Put differently, the replication protocol of DocumentDB operates under the assumption that the read and write quorums are always local to the read and write regions, respectively, in which the request is issued.</span><span class="sxs-lookup"><span data-stu-id="0165c-168">Put differently, the replication protocol of DocumentDB operates under the assumption that the read and write quorums are always local to the read and write regions, respectively, in which the request is issued.</span></span>

### <a id="ManualFailover"></a><span data-ttu-id="0165c-169">Manually initiate regional failover</span><span class="sxs-lookup"><span data-stu-id="0165c-169">Manually initiate regional failover</span></span>
<span data-ttu-id="0165c-170">DocumentDB allows you to trigger the failover of the database account to validate the *end to end* availability properties of the entire application (beyond the database).</span><span class="sxs-lookup"><span data-stu-id="0165c-170">DocumentDB allows you to trigger the failover of the database account to validate the *end to end* availability properties of the entire application (beyond the database).</span></span> <span data-ttu-id="0165c-171">Since both the safety and liveness properties of the failure detection and leader election are guaranteed, DocumentDB guarantees *zero-data-loss* for a tenant-initiated manual failover operation.</span><span class="sxs-lookup"><span data-stu-id="0165c-171">Since both the safety and liveness properties of the failure detection and leader election are guaranteed, DocumentDB guarantees *zero-data-loss* for a tenant-initiated manual failover operation.</span></span>

### <a id="AutomaticFailover"></a><span data-ttu-id="0165c-172">Automatic failover</span><span class="sxs-lookup"><span data-stu-id="0165c-172">Automatic failover</span></span>
<span data-ttu-id="0165c-173">DocumentDB supports automatic failover in case of one or more regional outages.</span><span class="sxs-lookup"><span data-stu-id="0165c-173">DocumentDB supports automatic failover in case of one or more regional outages.</span></span> <span data-ttu-id="0165c-174">During a regional failover, DocumentDB maintains its read latency, uptime availability, consistency, and throughput SLAs.</span><span class="sxs-lookup"><span data-stu-id="0165c-174">During a regional failover, DocumentDB maintains its read latency, uptime availability, consistency, and throughput SLAs.</span></span> <span data-ttu-id="0165c-175">DocumentDB provides an upper bound on the duration of an automatic failover operation to complete.</span><span class="sxs-lookup"><span data-stu-id="0165c-175">DocumentDB provides an upper bound on the duration of an automatic failover operation to complete.</span></span> <span data-ttu-id="0165c-176">This is the window of potential data loss during the regional outage.</span><span class="sxs-lookup"><span data-stu-id="0165c-176">This is the window of potential data loss during the regional outage.</span></span>

### <a id="GranularFailover"></a><span data-ttu-id="0165c-177">Designed for different failover granularities</span><span class="sxs-lookup"><span data-stu-id="0165c-177">Designed for different failover granularities</span></span>
<span data-ttu-id="0165c-178">Currently the automatic and manual failover capabilities are exposed at the granularity of the database account.</span><span class="sxs-lookup"><span data-stu-id="0165c-178">Currently the automatic and manual failover capabilities are exposed at the granularity of the database account.</span></span> <span data-ttu-id="0165c-179">Note, internally DocumentDB is designed to offer *automatic* failover at finer granularity of a database, collection, or even a partition (of a collection owning a range of keys).</span><span class="sxs-lookup"><span data-stu-id="0165c-179">Note, internally DocumentDB is designed to offer *automatic* failover at finer granularity of a database, collection, or even a partition (of a collection owning a range of keys).</span></span> 

### <a id="MultiHomingAPIs"></a><span data-ttu-id="0165c-180">Multi-homing APIs in DocumentDB</span><span class="sxs-lookup"><span data-stu-id="0165c-180">Multi-homing APIs in DocumentDB</span></span>
<span data-ttu-id="0165c-181">DocumentDB allows you to interact with the database using either logical (region agnostic) or physical (region-specific) endpoints.</span><span class="sxs-lookup"><span data-stu-id="0165c-181">DocumentDB allows you to interact with the database using either logical (region agnostic) or physical (region-specific) endpoints.</span></span> <span data-ttu-id="0165c-182">Using logical endpoints ensures that the application can transparently be multi-homed in case of failover.</span><span class="sxs-lookup"><span data-stu-id="0165c-182">Using logical endpoints ensures that the application can transparently be multi-homed in case of failover.</span></span> <span data-ttu-id="0165c-183">The latter, physical endpoints, provide fine-grained control to the application to redirect reads and writes to specific regions.</span><span class="sxs-lookup"><span data-stu-id="0165c-183">The latter, physical endpoints, provide fine-grained control to the application to redirect reads and writes to specific regions.</span></span>

### <a id="ReadPreferencesAPIforMongoDB"></a> <span data-ttu-id="0165c-184">Configurable read preferences in API for MongoDB</span><span class="sxs-lookup"><span data-stu-id="0165c-184">Configurable read preferences in API for MongoDB</span></span>
<span data-ttu-id="0165c-185">API for MongoDB enables you to specify your collection's read preference for a globally distributed database.</span><span class="sxs-lookup"><span data-stu-id="0165c-185">API for MongoDB enables you to specify your collection's read preference for a globally distributed database.</span></span> <span data-ttu-id="0165c-186">For both low latency reads and global high availability, we recommend setting your collection's read preference to *nearest*.</span><span class="sxs-lookup"><span data-stu-id="0165c-186">For both low latency reads and global high availability, we recommend setting your collection's read preference to *nearest*.</span></span> <span data-ttu-id="0165c-187">A read preference of *nearest* is configured to read from the closest region.</span><span class="sxs-lookup"><span data-stu-id="0165c-187">A read preference of *nearest* is configured to read from the closest region.</span></span>

```csharp
var collection = database.GetCollection<BsonDocument>(collectionName);
collection = collection.WithReadPreference(new ReadPreference(ReadPreferenceMode.Nearest));
```

<span data-ttu-id="0165c-188">For applications with a primary read/write region and a secondary region for disaster recovery (DR) scenarios, we recommend setting your collection's read preference to *secondary preferred*.</span><span class="sxs-lookup"><span data-stu-id="0165c-188">For applications with a primary read/write region and a secondary region for disaster recovery (DR) scenarios, we recommend setting your collection's read preference to *secondary preferred*.</span></span> <span data-ttu-id="0165c-189">A read preference of *secondary preferred* is configured to read from the secondary region when the primary region is unavailable.</span><span class="sxs-lookup"><span data-stu-id="0165c-189">A read preference of *secondary preferred* is configured to read from the secondary region when the primary region is unavailable.</span></span>

```csharp
var collection = database.GetCollection<BsonDocument>(collectionName);
collection = collection.WithReadPreference(new ReadPreference(ReadPreferenceMode.SecondaryPreferred));
```

<span data-ttu-id="0165c-190">Lastly, if you would like to manually specify your read regions.</span><span class="sxs-lookup"><span data-stu-id="0165c-190">Lastly, if you would like to manually specify your read regions.</span></span> <span data-ttu-id="0165c-191">You can set the region Tag within your read preference.</span><span class="sxs-lookup"><span data-stu-id="0165c-191">You can set the region Tag within your read preference.</span></span>

```csharp
var collection = database.GetCollection<BsonDocument>(collectionName);
var tag = new Tag("region", "Southeast Asia");
collection = collection.WithReadPreference(new ReadPreference(ReadPreferenceMode.Secondary, new[] { new TagSet(new[] { tag }) }));
```

### <a id="TransparentSchemaMigration"></a><span data-ttu-id="0165c-192">Transparent and consistent database schema and index migration</span><span class="sxs-lookup"><span data-stu-id="0165c-192">Transparent and consistent database schema and index migration</span></span> 
<span data-ttu-id="0165c-193">DocumentDB is fully [schema agnostic](http://www.vldb.org/pvldb/vol8/p1668-shukla.pdf).</span><span class="sxs-lookup"><span data-stu-id="0165c-193">DocumentDB is fully [schema agnostic](http://www.vldb.org/pvldb/vol8/p1668-shukla.pdf).</span></span> <span data-ttu-id="0165c-194">The unique design of its database engine allows it to automatically and synchronously index all of the data it ingests without requiring any schema or secondary indices from you.</span><span class="sxs-lookup"><span data-stu-id="0165c-194">The unique design of its database engine allows it to automatically and synchronously index all of the data it ingests without requiring any schema or secondary indices from you.</span></span> <span data-ttu-id="0165c-195">This enables you to iterate your globally distributed application rapidly without worrying about database schema and index migration or coordinating multi-phase application rollouts of schema changes.</span><span class="sxs-lookup"><span data-stu-id="0165c-195">This enables you to iterate your globally distributed application rapidly without worrying about database schema and index migration or coordinating multi-phase application rollouts of schema changes.</span></span> <span data-ttu-id="0165c-196">DocumentDB guarantees that any changes to indexing policies explicitly made by you does not result into degradation of either performance or availability.</span><span class="sxs-lookup"><span data-stu-id="0165c-196">DocumentDB guarantees that any changes to indexing policies explicitly made by you does not result into degradation of either performance or availability.</span></span>  

### <a id="ComprehensiveSLAs"></a><span data-ttu-id="0165c-197">Comprehensive SLAs (beyond just high availability)</span><span class="sxs-lookup"><span data-stu-id="0165c-197">Comprehensive SLAs (beyond just high availability)</span></span>
<span data-ttu-id="0165c-198">As a globally distributed database service, DocumentDB offers well-defined SLA for **data-loss**, **availability**, **latency at P99**, **throughput** and **consistency** for the database as a whole, regardless of the number of regions associated with the database.</span><span class="sxs-lookup"><span data-stu-id="0165c-198">As a globally distributed database service, DocumentDB offers well-defined SLA for **data-loss**, **availability**, **latency at P99**, **throughput** and **consistency** for the database as a whole, regardless of the number of regions associated with the database.</span></span>  

## <a id="LatencyGuarantees"></a><span data-ttu-id="0165c-199">Latency guarantees</span><span class="sxs-lookup"><span data-stu-id="0165c-199">Latency guarantees</span></span>
<span data-ttu-id="0165c-200">The key benefit of a globally distributed database service like DocumentDB is to offer low latency access to your data anywhere in the world.</span><span class="sxs-lookup"><span data-stu-id="0165c-200">The key benefit of a globally distributed database service like DocumentDB is to offer low latency access to your data anywhere in the world.</span></span> <span data-ttu-id="0165c-201">DocumentDB offers guaranteed low latency at P99 for various database operations.</span><span class="sxs-lookup"><span data-stu-id="0165c-201">DocumentDB offers guaranteed low latency at P99 for various database operations.</span></span> <span data-ttu-id="0165c-202">The replication protocol that DocumentDB employs ensures that the database operations (ideally, both reads and writes) are always performed in the region local to that of the client.</span><span class="sxs-lookup"><span data-stu-id="0165c-202">The replication protocol that DocumentDB employs ensures that the database operations (ideally, both reads and writes) are always performed in the region local to that of the client.</span></span> <span data-ttu-id="0165c-203">The latency SLA of DocumentDB includes P99 for both reads, (synchronously) indexed writes and queries for various request and response sizes.</span><span class="sxs-lookup"><span data-stu-id="0165c-203">The latency SLA of DocumentDB includes P99 for both reads, (synchronously) indexed writes and queries for various request and response sizes.</span></span> <span data-ttu-id="0165c-204">The latency guarantees for writes include durable majority quorum commits within the local datacenter.</span><span class="sxs-lookup"><span data-stu-id="0165c-204">The latency guarantees for writes include durable majority quorum commits within the local datacenter.</span></span>

### <a id="LatencyAndConsistency"></a><span data-ttu-id="0165c-205">Latency's relationship with consistency</span><span class="sxs-lookup"><span data-stu-id="0165c-205">Latency's relationship with consistency</span></span> 
<span data-ttu-id="0165c-206">For a globally distributed service to offer strong consistency in a globally distributed setup, it needs to synchronously replicate the writes or synchronous perform cross-region reads – the speed of light and the wide area network reliability dictate that strong consistency results in high latencies and low availability of database operations.</span><span class="sxs-lookup"><span data-stu-id="0165c-206">For a globally distributed service to offer strong consistency in a globally distributed setup, it needs to synchronously replicate the writes or synchronous perform cross-region reads – the speed of light and the wide area network reliability dictate that strong consistency results in high latencies and low availability of database operations.</span></span> <span data-ttu-id="0165c-207">Hence, in order to offer guaranteed low latencies at P99 and 99.99 availability, the service must employ asynchronous replication.</span><span class="sxs-lookup"><span data-stu-id="0165c-207">Hence, in order to offer guaranteed low latencies at P99 and 99.99 availability, the service must employ asynchronous replication.</span></span> <span data-ttu-id="0165c-208">This in-turn requires that the service must also offer [well-defined, relaxed consistency choice(s)](documentdb-consistency-levels.md) – weaker than strong (to offer low latency and availability guarantees) and ideally stronger than "eventual" consistency (to offer an intuitive programming model).</span><span class="sxs-lookup"><span data-stu-id="0165c-208">This in-turn requires that the service must also offer [well-defined, relaxed consistency choice(s)](documentdb-consistency-levels.md) – weaker than strong (to offer low latency and availability guarantees) and ideally stronger than "eventual" consistency (to offer an intuitive programming model).</span></span>

<span data-ttu-id="0165c-209">DocumentDB ensures that a read operation is not required to contact replicas across multiple regions to deliver the specific consistency level guarantee.</span><span class="sxs-lookup"><span data-stu-id="0165c-209">DocumentDB ensures that a read operation is not required to contact replicas across multiple regions to deliver the specific consistency level guarantee.</span></span> <span data-ttu-id="0165c-210">Likewise, it ensures that a write operation does not get blocked while the data is being replicated across all the regions (i.e. writes are asynchronously replicated across regions).</span><span class="sxs-lookup"><span data-stu-id="0165c-210">Likewise, it ensures that a write operation does not get blocked while the data is being replicated across all the regions (i.e. writes are asynchronously replicated across regions).</span></span> <span data-ttu-id="0165c-211">For multi-region database accounts multiple relaxed consistency levels are available.</span><span class="sxs-lookup"><span data-stu-id="0165c-211">For multi-region database accounts multiple relaxed consistency levels are available.</span></span> 

### <a id="LatencyAndAvailability"></a><span data-ttu-id="0165c-212">Latency's relationship with availability</span><span class="sxs-lookup"><span data-stu-id="0165c-212">Latency's relationship with availability</span></span> 
<span data-ttu-id="0165c-213">Latency and availability are the two sides of the same coin.</span><span class="sxs-lookup"><span data-stu-id="0165c-213">Latency and availability are the two sides of the same coin.</span></span> <span data-ttu-id="0165c-214">We talk about latency of the operation in steady state and availability, in the face of failures.</span><span class="sxs-lookup"><span data-stu-id="0165c-214">We talk about latency of the operation in steady state and availability, in the face of failures.</span></span> <span data-ttu-id="0165c-215">From the application standpoint, a slow running database operation is indistinguishable from a database that is unavailable.</span><span class="sxs-lookup"><span data-stu-id="0165c-215">From the application standpoint, a slow running database operation is indistinguishable from a database that is unavailable.</span></span> 

<span data-ttu-id="0165c-216">To distinguish high latency from unavailability, DocumentDB provides an absolute upper bound on latency of various database operations.</span><span class="sxs-lookup"><span data-stu-id="0165c-216">To distinguish high latency from unavailability, DocumentDB provides an absolute upper bound on latency of various database operations.</span></span> <span data-ttu-id="0165c-217">If the database operation takes longer than the upper bound to complete, DocumentDB returns a timeout error.</span><span class="sxs-lookup"><span data-stu-id="0165c-217">If the database operation takes longer than the upper bound to complete, DocumentDB returns a timeout error.</span></span> <span data-ttu-id="0165c-218">The DocumentDB availability SLA ensures that the timeouts are counted against the availability SLA.</span><span class="sxs-lookup"><span data-stu-id="0165c-218">The DocumentDB availability SLA ensures that the timeouts are counted against the availability SLA.</span></span> 

### <a id="LatencyAndThroughput"></a><span data-ttu-id="0165c-219">Latency's relationship with throughput</span><span class="sxs-lookup"><span data-stu-id="0165c-219">Latency's relationship with throughput</span></span>
<span data-ttu-id="0165c-220">DocumentDB does not make you choose between latency and throughput.</span><span class="sxs-lookup"><span data-stu-id="0165c-220">DocumentDB does not make you choose between latency and throughput.</span></span> <span data-ttu-id="0165c-221">It honors the SLA for both latency at P99 and deliver the throughput that you have provisioned.</span><span class="sxs-lookup"><span data-stu-id="0165c-221">It honors the SLA for both latency at P99 and deliver the throughput that you have provisioned.</span></span> 

## <a id="ConsistencyGuarantees"></a><span data-ttu-id="0165c-222">Consistency guarantees</span><span class="sxs-lookup"><span data-stu-id="0165c-222">Consistency guarantees</span></span>
<span data-ttu-id="0165c-223">While the [strong consistency model](http://cs.brown.edu/~mph/HerlihyW90/p463-herlihy.pdf) is the gold standard of programmability, it comes at the steep price of high latency (in steady state) and loss of availability (in the face of failures).</span><span class="sxs-lookup"><span data-stu-id="0165c-223">While the [strong consistency model](http://cs.brown.edu/~mph/HerlihyW90/p463-herlihy.pdf) is the gold standard of programmability, it comes at the steep price of high latency (in steady state) and loss of availability (in the face of failures).</span></span> 

<span data-ttu-id="0165c-224">DocumentDB offers a well-defined programming model to you to reason about replicated data's consistency.</span><span class="sxs-lookup"><span data-stu-id="0165c-224">DocumentDB offers a well-defined programming model to you to reason about replicated data's consistency.</span></span> <span data-ttu-id="0165c-225">In order to enable you to build multi-homed applications, the consistency models exposed by DocumentDB are designed to be region-agnostic and not depend on the region from where the reads and writes are served.</span><span class="sxs-lookup"><span data-stu-id="0165c-225">In order to enable you to build multi-homed applications, the consistency models exposed by DocumentDB are designed to be region-agnostic and not depend on the region from where the reads and writes are served.</span></span> 

<span data-ttu-id="0165c-226">DocumentDB's consistency SLA guarantees that 100% of read requests will meet the consistency guarantee for the consistency level requested by you (either the default consistency level on the database account or the overridden value on the request).</span><span class="sxs-lookup"><span data-stu-id="0165c-226">DocumentDB's consistency SLA guarantees that 100% of read requests will meet the consistency guarantee for the consistency level requested by you (either the default consistency level on the database account or the overridden value on the request).</span></span> <span data-ttu-id="0165c-227">A read request is considered to have met the consistency SLA if all the consistency guarantees associated with the consistency level are satisfied.</span><span class="sxs-lookup"><span data-stu-id="0165c-227">A read request is considered to have met the consistency SLA if all the consistency guarantees associated with the consistency level are satisfied.</span></span> <span data-ttu-id="0165c-228">The following table captures the consistency guarantees that correspond to specific consistency levels offered by DocumentDB.</span><span class="sxs-lookup"><span data-stu-id="0165c-228">The following table captures the consistency guarantees that correspond to specific consistency levels offered by DocumentDB.</span></span>

<span data-ttu-id="0165c-229">**Consistency guarantees associated with a given consistency level in DocumentDB**</span><span class="sxs-lookup"><span data-stu-id="0165c-229">**Consistency guarantees associated with a given consistency level in DocumentDB**</span></span>

<table>
    <tr>
        <td><span data-ttu-id="0165c-230"><strong>Consistency Level</strong></span><span class="sxs-lookup"><span data-stu-id="0165c-230"><strong>Consistency Level</strong></span></span></td>
        <td><span data-ttu-id="0165c-231"><strong>Consistency Characteristics</strong></span><span class="sxs-lookup"><span data-stu-id="0165c-231"><strong>Consistency Characteristics</strong></span></span></td>
        <td><span data-ttu-id="0165c-232"><strong>SLA</strong></span><span class="sxs-lookup"><span data-stu-id="0165c-232"><strong>SLA</strong></span></span></td>
    </tr>
    <tr>
        <td rowspan="3"><span data-ttu-id="0165c-233">Session</span><span class="sxs-lookup"><span data-stu-id="0165c-233">Session</span></span></td>
        <td><span data-ttu-id="0165c-234">Read your own write</span><span class="sxs-lookup"><span data-stu-id="0165c-234">Read your own write</span></span></td>
        <td><span data-ttu-id="0165c-235">100%</span><span class="sxs-lookup"><span data-stu-id="0165c-235">100%</span></span></td>
    </tr>
    <tr>
        <td><span data-ttu-id="0165c-236">Monotonic read</span><span class="sxs-lookup"><span data-stu-id="0165c-236">Monotonic read</span></span></td>
        <td><span data-ttu-id="0165c-237">100%</span><span class="sxs-lookup"><span data-stu-id="0165c-237">100%</span></span></td>
    </tr>
    <tr>
        <td><span data-ttu-id="0165c-238">Consistent prefix</span><span class="sxs-lookup"><span data-stu-id="0165c-238">Consistent prefix</span></span></td>
        <td><span data-ttu-id="0165c-239">100%</span><span class="sxs-lookup"><span data-stu-id="0165c-239">100%</span></span></td>
    </tr>
    <tr>
        <td rowspan="3"><span data-ttu-id="0165c-240">Bounded staleness</span><span class="sxs-lookup"><span data-stu-id="0165c-240">Bounded staleness</span></span></td>
        <td><span data-ttu-id="0165c-241">Monotonic read (within a region)</span><span class="sxs-lookup"><span data-stu-id="0165c-241">Monotonic read (within a region)</span></span></td>
        <td><span data-ttu-id="0165c-242">100%</span><span class="sxs-lookup"><span data-stu-id="0165c-242">100%</span></span></td>
    </tr>
    <tr>
        <td><span data-ttu-id="0165c-243">Consistent prefix</span><span class="sxs-lookup"><span data-stu-id="0165c-243">Consistent prefix</span></span></td>
        <td><span data-ttu-id="0165c-244">100%</span><span class="sxs-lookup"><span data-stu-id="0165c-244">100%</span></span></td>
    </tr>
    <tr>
        <td><span data-ttu-id="0165c-245">Staleness bound &lt; K,T</span><span class="sxs-lookup"><span data-stu-id="0165c-245">Staleness bound &lt; K,T</span></span></td>
        <td><span data-ttu-id="0165c-246">100%</span><span class="sxs-lookup"><span data-stu-id="0165c-246">100%</span></span></td>
    </tr>
    <tr>
        <td><span data-ttu-id="0165c-247">Eventual</span><span class="sxs-lookup"><span data-stu-id="0165c-247">Eventual</span></span></td>
        <td><span data-ttu-id="0165c-248">Consistent prefix</span><span class="sxs-lookup"><span data-stu-id="0165c-248">Consistent prefix</span></span></td>
        <td><span data-ttu-id="0165c-249">100%</span><span class="sxs-lookup"><span data-stu-id="0165c-249">100%</span></span></td>
    </tr>
    <tr>
        <td><span data-ttu-id="0165c-250">Strong</span><span class="sxs-lookup"><span data-stu-id="0165c-250">Strong</span></span></td>
        <td><span data-ttu-id="0165c-251">Linearizable</span><span class="sxs-lookup"><span data-stu-id="0165c-251">Linearizable</span></span></td>
        <td><span data-ttu-id="0165c-252">100%</span><span class="sxs-lookup"><span data-stu-id="0165c-252">100%</span></span></td>
    </tr>
</table>

### <a id="ConsistencyAndAvailability"></a><span data-ttu-id="0165c-253">Consistency's relationship with availability</span><span class="sxs-lookup"><span data-stu-id="0165c-253">Consistency's relationship with availability</span></span>
<span data-ttu-id="0165c-254">The [impossibility result](http://www.glassbeam.com/sites/all/themes/glassbeam/images/blog/10.1.1.67.6951.pdf) of the [CAP theorem](https://people.eecs.berkeley.edu/~brewer/cs262b-2004/PODC-keynote.pdf) proves that it is indeed impossible for the system to remain available and offer linearizable consistency in the face of failures.</span><span class="sxs-lookup"><span data-stu-id="0165c-254">The [impossibility result](http://www.glassbeam.com/sites/all/themes/glassbeam/images/blog/10.1.1.67.6951.pdf) of the [CAP theorem](https://people.eecs.berkeley.edu/~brewer/cs262b-2004/PODC-keynote.pdf) proves that it is indeed impossible for the system to remain available and offer linearizable consistency in the face of failures.</span></span> <span data-ttu-id="0165c-255">The database service must choose to be either CP or AP - CP systems forgo availability in favor of linearizable consistency while the AP systems forgo [linearizable consistency](http://cs.brown.edu/~mph/HerlihyW90/p463-herlihy.pdf) in favor of availability.</span><span class="sxs-lookup"><span data-stu-id="0165c-255">The database service must choose to be either CP or AP - CP systems forgo availability in favor of linearizable consistency while the AP systems forgo [linearizable consistency](http://cs.brown.edu/~mph/HerlihyW90/p463-herlihy.pdf) in favor of availability.</span></span> <span data-ttu-id="0165c-256">DocumentDB never violates the requested consistency level, which formally makes it a CP system.</span><span class="sxs-lookup"><span data-stu-id="0165c-256">DocumentDB never violates the requested consistency level, which formally makes it a CP system.</span></span> <span data-ttu-id="0165c-257">However, in practice consistency is not an all or nothing proposition – there are multiple well-defined consistency models along the consistency spectrum between linearizable and eventual consistency.</span><span class="sxs-lookup"><span data-stu-id="0165c-257">However, in practice consistency is not an all or nothing proposition – there are multiple well-defined consistency models along the consistency spectrum between linearizable and eventual consistency.</span></span> <span data-ttu-id="0165c-258">In DocumentDB, we have tried to identify several of the relaxed consistency models with real world applicability and an intuitive programming model.</span><span class="sxs-lookup"><span data-stu-id="0165c-258">In DocumentDB, we have tried to identify several of the relaxed consistency models with real world applicability and an intuitive programming model.</span></span> <span data-ttu-id="0165c-259">DocumentDB navigates the consistency-availability tradeoffs by offering 99.99 availability SLA along with [multiple relaxed yet well-defined consistency levels](documentdb-consistency-levels.md).</span><span class="sxs-lookup"><span data-stu-id="0165c-259">DocumentDB navigates the consistency-availability tradeoffs by offering 99.99 availability SLA along with [multiple relaxed yet well-defined consistency levels](documentdb-consistency-levels.md).</span></span> 

### <a id="ConsistencyAndAvailability"></a><span data-ttu-id="0165c-260">Consistency's relationship with latency</span><span class="sxs-lookup"><span data-stu-id="0165c-260">Consistency's relationship with latency</span></span>
<span data-ttu-id="0165c-261">A more comprehensive variation of CAP was proposed by Prof. Daniel Abadi and it is called [PACELC](http://cs-www.cs.yale.edu/homes/dna/papers/abadi-pacelc.pdf), which also accounts for latency and consistency tradeoffs in steady state.</span><span class="sxs-lookup"><span data-stu-id="0165c-261">A more comprehensive variation of CAP was proposed by Prof. Daniel Abadi and it is called [PACELC](http://cs-www.cs.yale.edu/homes/dna/papers/abadi-pacelc.pdf), which also accounts for latency and consistency tradeoffs in steady state.</span></span> <span data-ttu-id="0165c-262">It states that in steady state, the database system must choose between consistency and latency.</span><span class="sxs-lookup"><span data-stu-id="0165c-262">It states that in steady state, the database system must choose between consistency and latency.</span></span> <span data-ttu-id="0165c-263">With multiple relaxed consistency models (backed by asynchronous replication and local read, write quorums), DocumentDB ensures that all reads and writes are local to the read and write regions respectively.</span><span class="sxs-lookup"><span data-stu-id="0165c-263">With multiple relaxed consistency models (backed by asynchronous replication and local read, write quorums), DocumentDB ensures that all reads and writes are local to the read and write regions respectively.</span></span>  <span data-ttu-id="0165c-264">This allows DocumentDB to offer low latency guarantees within the region for the consistency levels.</span><span class="sxs-lookup"><span data-stu-id="0165c-264">This allows DocumentDB to offer low latency guarantees within the region for the consistency levels.</span></span>  

### <a id="ConsistencyAndThroughput"></a><span data-ttu-id="0165c-265">Consistency's relationship with throughput</span><span class="sxs-lookup"><span data-stu-id="0165c-265">Consistency's relationship with throughput</span></span>
<span data-ttu-id="0165c-266">Since the implementation of a specific consistency model depends on the choice of a [quorum type](http://cs.brown.edu/~mph/HerlihyW90/p463-herlihy.pdf), the throughput also varies based on the choice of consistency.</span><span class="sxs-lookup"><span data-stu-id="0165c-266">Since the implementation of a specific consistency model depends on the choice of a [quorum type](http://cs.brown.edu/~mph/HerlihyW90/p463-herlihy.pdf), the throughput also varies based on the choice of consistency.</span></span> <span data-ttu-id="0165c-267">For instance, in DocumentDB, the throughput with strongly consistent reads is roughly half to that of eventually consistent reads.</span><span class="sxs-lookup"><span data-stu-id="0165c-267">For instance, in DocumentDB, the throughput with strongly consistent reads is roughly half to that of eventually consistent reads.</span></span> 
 
<span data-ttu-id="0165c-268">**Relationship of read capacity for a specific consistency level in DocumentDB**</span><span class="sxs-lookup"><span data-stu-id="0165c-268">**Relationship of read capacity for a specific consistency level in DocumentDB**</span></span>

![Relationship between consistency and throughput](https://docstestmedia1.blob.core.windows.net/azure-media/articles/documentdb/media/documentdb-distribute-data-globally/consistency-and-throughput.png)

## <a id="ThroughputGuarantees"></a><span data-ttu-id="0165c-270">Throughput guarantees</span><span class="sxs-lookup"><span data-stu-id="0165c-270">Throughput guarantees</span></span> 
<span data-ttu-id="0165c-271">DocumentDB allows you to scale throughput (as well as, storage), elastically across different regions depending on the demand.</span><span class="sxs-lookup"><span data-stu-id="0165c-271">DocumentDB allows you to scale throughput (as well as, storage), elastically across different regions depending on the demand.</span></span> 

<span data-ttu-id="0165c-272">**A single DocumentDB collection partitioned (across three shards) and then distributed across three Azure regions**</span><span class="sxs-lookup"><span data-stu-id="0165c-272">**A single DocumentDB collection partitioned (across three shards) and then distributed across three Azure regions**</span></span>

![Azure DocumentDB distributed and partitioned collections](https://docstestmedia1.blob.core.windows.net/azure-media/articles/documentdb/media/documentdb-distribute-data-globally/documentdb-throughput.png)

<span data-ttu-id="0165c-274">A DocumentDB collection gets distributed using two dimensions – within a region and then across regions.</span><span class="sxs-lookup"><span data-stu-id="0165c-274">A DocumentDB collection gets distributed using two dimensions – within a region and then across regions.</span></span> <span data-ttu-id="0165c-275">Here's how:</span><span class="sxs-lookup"><span data-stu-id="0165c-275">Here's how:</span></span> 

* <span data-ttu-id="0165c-276">Within a single region, a DocumentDB collection is scaled out in terms of resource partitions.</span><span class="sxs-lookup"><span data-stu-id="0165c-276">Within a single region, a DocumentDB collection is scaled out in terms of resource partitions.</span></span> <span data-ttu-id="0165c-277">Each resource partition manages a set of keys and is strongly consistent and highly available by virtue of state machine replication among a set of replicas.</span><span class="sxs-lookup"><span data-stu-id="0165c-277">Each resource partition manages a set of keys and is strongly consistent and highly available by virtue of state machine replication among a set of replicas.</span></span> <span data-ttu-id="0165c-278">DocumentDB is a fully resource governed system where a resource partition is responsible for delivering its share of throughput for the budget of system resources allocated to it.</span><span class="sxs-lookup"><span data-stu-id="0165c-278">DocumentDB is a fully resource governed system where a resource partition is responsible for delivering its share of throughput for the budget of system resources allocated to it.</span></span> <span data-ttu-id="0165c-279">The scaling of a DocumentDB collection is completely transparent – DocumentDB manages the resource partitions and splits and merges it as needed.</span><span class="sxs-lookup"><span data-stu-id="0165c-279">The scaling of a DocumentDB collection is completely transparent – DocumentDB manages the resource partitions and splits and merges it as needed.</span></span> 
* <span data-ttu-id="0165c-280">Each of the resource partitions is then distributed across multiple regions.</span><span class="sxs-lookup"><span data-stu-id="0165c-280">Each of the resource partitions is then distributed across multiple regions.</span></span> <span data-ttu-id="0165c-281">Resource partitions owning the same set of keys across various regions form partition set (see [preceding figure](#ThroughputGuarantees)).</span><span class="sxs-lookup"><span data-stu-id="0165c-281">Resource partitions owning the same set of keys across various regions form partition set (see [preceding figure](#ThroughputGuarantees)).</span></span>  <span data-ttu-id="0165c-282">Resource partitions within a partition set are coordinated using state machine replication across the multiple regions.</span><span class="sxs-lookup"><span data-stu-id="0165c-282">Resource partitions within a partition set are coordinated using state machine replication across the multiple regions.</span></span> <span data-ttu-id="0165c-283">Depending on the consistency level configured, the resource partitions within a partition set are configured dynamically using different topologies (for example, star, daisy-chain, tree etc.).</span><span class="sxs-lookup"><span data-stu-id="0165c-283">Depending on the consistency level configured, the resource partitions within a partition set are configured dynamically using different topologies (for example, star, daisy-chain, tree etc.).</span></span> 

<span data-ttu-id="0165c-284">By virtue of a highly responsive partition management, load balancing and strict resource governance, DocumentDB allows you to elastically scale throughput across multiple Azure regions on a DocumentDB collection.</span><span class="sxs-lookup"><span data-stu-id="0165c-284">By virtue of a highly responsive partition management, load balancing and strict resource governance, DocumentDB allows you to elastically scale throughput across multiple Azure regions on a DocumentDB collection.</span></span> <span data-ttu-id="0165c-285">Changing throughput on a collection is a runtime operation in DocumentDB - like with other database operations DocumentDB guarantees the absolute upper bound on latency for your request to change the throughput.</span><span class="sxs-lookup"><span data-stu-id="0165c-285">Changing throughput on a collection is a runtime operation in DocumentDB - like with other database operations DocumentDB guarantees the absolute upper bound on latency for your request to change the throughput.</span></span> <span data-ttu-id="0165c-286">As an example, the following figure shows a customer's collection with elastically provisioned throughput (ranging from 1M-10M requests/sec across two regions) based on the demand.</span><span class="sxs-lookup"><span data-stu-id="0165c-286">As an example, the following figure shows a customer's collection with elastically provisioned throughput (ranging from 1M-10M requests/sec across two regions) based on the demand.</span></span>
 
<span data-ttu-id="0165c-287">**A customer's collection with elastically provisioned throughput (1M-10M requests/sec)**</span><span class="sxs-lookup"><span data-stu-id="0165c-287">**A customer's collection with elastically provisioned throughput (1M-10M requests/sec)**</span></span>

![Azure DocumentDB elastically provisioned throughput](https://docstestmedia1.blob.core.windows.net/azure-media/articles/documentdb/media/documentdb-distribute-data-globally/documentdb-elastic-throughput.png)

### <a id="ThroughputAndConsistency"></a><span data-ttu-id="0165c-289">Throughput's relationship with consistency</span><span class="sxs-lookup"><span data-stu-id="0165c-289">Throughput's relationship with consistency</span></span> 
<span data-ttu-id="0165c-290">Same as [Consistency's relationship with throughput](#ConsistencyAndThroughput).</span><span class="sxs-lookup"><span data-stu-id="0165c-290">Same as [Consistency's relationship with throughput](#ConsistencyAndThroughput).</span></span>

### <a id="ThroughputAndAvailability"></a><span data-ttu-id="0165c-291">Throughput's relationship with availability</span><span class="sxs-lookup"><span data-stu-id="0165c-291">Throughput's relationship with availability</span></span>
<span data-ttu-id="0165c-292">DocumentDB continues to maintain its availability when the changes are made to the throughput.</span><span class="sxs-lookup"><span data-stu-id="0165c-292">DocumentDB continues to maintain its availability when the changes are made to the throughput.</span></span> <span data-ttu-id="0165c-293">DocumentDB transparently manages partitions (for example, split, merge, clone operations) and ensures that the operations do not degrade performance or availability, while the application elastically increases or decreases throughput.</span><span class="sxs-lookup"><span data-stu-id="0165c-293">DocumentDB transparently manages partitions (for example, split, merge, clone operations) and ensures that the operations do not degrade performance or availability, while the application elastically increases or decreases throughput.</span></span> 

## <a id="AvailabilityGuarantees"></a><span data-ttu-id="0165c-294">Availability guarantees</span><span class="sxs-lookup"><span data-stu-id="0165c-294">Availability guarantees</span></span>
<span data-ttu-id="0165c-295">DocumentDB offers a 99.99% uptime availability SLA for each of the data and control plane operations.</span><span class="sxs-lookup"><span data-stu-id="0165c-295">DocumentDB offers a 99.99% uptime availability SLA for each of the data and control plane operations.</span></span> <span data-ttu-id="0165c-296">As described earlier, DocumentDB's availability guarantees include an absolute upper bound on latency for every data and control plane operations.</span><span class="sxs-lookup"><span data-stu-id="0165c-296">As described earlier, DocumentDB's availability guarantees include an absolute upper bound on latency for every data and control plane operations.</span></span> <span data-ttu-id="0165c-297">The availability guarantees are steadfast and do not change with the number of regions or geographical distance between regions.</span><span class="sxs-lookup"><span data-stu-id="0165c-297">The availability guarantees are steadfast and do not change with the number of regions or geographical distance between regions.</span></span> <span data-ttu-id="0165c-298">Availability guarantees apply with both manual as well as, automatic failover.</span><span class="sxs-lookup"><span data-stu-id="0165c-298">Availability guarantees apply with both manual as well as, automatic failover.</span></span> <span data-ttu-id="0165c-299">DocumentDB offers transparent multi-homing APIs that ensure that your application can operate against logical endpoints and can transparently route the requests to the new region in case of failover.</span><span class="sxs-lookup"><span data-stu-id="0165c-299">DocumentDB offers transparent multi-homing APIs that ensure that your application can operate against logical endpoints and can transparently route the requests to the new region in case of failover.</span></span> <span data-ttu-id="0165c-300">Put differently, your application does not need to be redeployed upon regional failover and the availability SLAs are maintained.</span><span class="sxs-lookup"><span data-stu-id="0165c-300">Put differently, your application does not need to be redeployed upon regional failover and the availability SLAs are maintained.</span></span>

### <a id="AvailabilityAndConsistency"></a><span data-ttu-id="0165c-301">Availability's relationship with consistency, latency, and throughput</span><span class="sxs-lookup"><span data-stu-id="0165c-301">Availability's relationship with consistency, latency, and throughput</span></span>
<span data-ttu-id="0165c-302">Availability’s relationship with consistency, latency, and throughput is described in  [Consistency's relationship with availability](#ConsistencyAndAvailability), [Latency's relationship with availability](#LatencyAndAvailability) and [Throughput's relationship with availability](#ThroughputAndAvailability).</span><span class="sxs-lookup"><span data-stu-id="0165c-302">Availability’s relationship with consistency, latency, and throughput is described in  [Consistency's relationship with availability](#ConsistencyAndAvailability), [Latency's relationship with availability](#LatencyAndAvailability) and [Throughput's relationship with availability](#ThroughputAndAvailability).</span></span> 

## <a id="GuaranteesAgainstDataLoss"></a><span data-ttu-id="0165c-303">Guarantees and system behavior for "data loss"</span><span class="sxs-lookup"><span data-stu-id="0165c-303">Guarantees and system behavior for "data loss"</span></span>
<span data-ttu-id="0165c-304">In DocumentDB, each partition (of a collection) is made highly available by a number of replicas, which are spread across at least 10-20 fault domains.</span><span class="sxs-lookup"><span data-stu-id="0165c-304">In DocumentDB, each partition (of a collection) is made highly available by a number of replicas, which are spread across at least 10-20 fault domains.</span></span> <span data-ttu-id="0165c-305">All writes are synchronously and durably committed by a majority quorum of replicas before they are acknowledged to the client.</span><span class="sxs-lookup"><span data-stu-id="0165c-305">All writes are synchronously and durably committed by a majority quorum of replicas before they are acknowledged to the client.</span></span> <span data-ttu-id="0165c-306">Asynchronous replication is applied with coordination across partitions spread across multiple regions.</span><span class="sxs-lookup"><span data-stu-id="0165c-306">Asynchronous replication is applied with coordination across partitions spread across multiple regions.</span></span> <span data-ttu-id="0165c-307">DocumentDB guarantees that there is no data loss for a tenant-initiated manual failover.</span><span class="sxs-lookup"><span data-stu-id="0165c-307">DocumentDB guarantees that there is no data loss for a tenant-initiated manual failover.</span></span> <span data-ttu-id="0165c-308">During automatic failover, DocumentDB guarantees an upper bound of the configured bounded staleness interval on the data loss window as part of its SLA.</span><span class="sxs-lookup"><span data-stu-id="0165c-308">During automatic failover, DocumentDB guarantees an upper bound of the configured bounded staleness interval on the data loss window as part of its SLA.</span></span>

## <a id="CustomerFacingSLAMetrics"></a><span data-ttu-id="0165c-309">Customer facing SLA Metrics</span><span class="sxs-lookup"><span data-stu-id="0165c-309">Customer facing SLA Metrics</span></span>
<span data-ttu-id="0165c-310">DocumentDB transparently exposes the throughput, latency, consistency and availability metrics.</span><span class="sxs-lookup"><span data-stu-id="0165c-310">DocumentDB transparently exposes the throughput, latency, consistency and availability metrics.</span></span> <span data-ttu-id="0165c-311">These metrics are accessible programmatically and via the Azure portal (see following figure).</span><span class="sxs-lookup"><span data-stu-id="0165c-311">These metrics are accessible programmatically and via the Azure portal (see following figure).</span></span> <span data-ttu-id="0165c-312">You can also set up alerts on various thresholds using Azure Application Insights.</span><span class="sxs-lookup"><span data-stu-id="0165c-312">You can also set up alerts on various thresholds using Azure Application Insights.</span></span>
 
<span data-ttu-id="0165c-313">**Consistency, Latency, Throughput, and Availability metrics are transparently available to each tenant**</span><span class="sxs-lookup"><span data-stu-id="0165c-313">**Consistency, Latency, Throughput, and Availability metrics are transparently available to each tenant**</span></span>

![Azure DocumentDB customer-visible SLA metrics](https://docstestmedia1.blob.core.windows.net/azure-media/articles/documentdb/media/documentdb-distribute-data-globally/documentdb-customer-slas.png)

## <a id="Next Steps"></a><span data-ttu-id="0165c-315">Next Steps</span><span class="sxs-lookup"><span data-stu-id="0165c-315">Next Steps</span></span>
* <span data-ttu-id="0165c-316">To implement global replication on your DocumentDB account using the Azure portal, see [How to perform DocumentDB global database replication using the Azure portal](documentdb-portal-global-replication.md).</span><span class="sxs-lookup"><span data-stu-id="0165c-316">To implement global replication on your DocumentDB account using the Azure portal, see [How to perform DocumentDB global database replication using the Azure portal](documentdb-portal-global-replication.md).</span></span>
* <span data-ttu-id="0165c-317">To learn about how to implement multi-master architectures with DocumentDB, see [Multi-master database architectures with Azure DocumentDB](documentdb-multi-region-writers.md).</span><span class="sxs-lookup"><span data-stu-id="0165c-317">To learn about how to implement multi-master architectures with DocumentDB, see [Multi-master database architectures with Azure DocumentDB](documentdb-multi-region-writers.md).</span></span>
* <span data-ttu-id="0165c-318">To learn more about how automatic and manual failovers work in DocumentDB, see [Regional Failovers in Azure DocumentDB](documentdb-regional-failovers.md).</span><span class="sxs-lookup"><span data-stu-id="0165c-318">To learn more about how automatic and manual failovers work in DocumentDB, see [Regional Failovers in Azure DocumentDB](documentdb-regional-failovers.md).</span></span>

## <a id="References"></a><span data-ttu-id="0165c-319">References</span><span class="sxs-lookup"><span data-stu-id="0165c-319">References</span></span>
1. <span data-ttu-id="0165c-320">Eric Brewer.</span><span class="sxs-lookup"><span data-stu-id="0165c-320">Eric Brewer.</span></span> [<span data-ttu-id="0165c-321">Towards Robust Distributed Systems</span><span class="sxs-lookup"><span data-stu-id="0165c-321">Towards Robust Distributed Systems</span></span>](https://people.eecs.berkeley.edu/~brewer/cs262b-2004/PODC-keynote.pdf)
2. <span data-ttu-id="0165c-322">Eric Brewer.</span><span class="sxs-lookup"><span data-stu-id="0165c-322">Eric Brewer.</span></span> [<span data-ttu-id="0165c-323">CAP Twelve Years Later – How the rules have changed</span><span class="sxs-lookup"><span data-stu-id="0165c-323">CAP Twelve Years Later – How the rules have changed</span></span>](http://informatik.unibas.ch/fileadmin/Lectures/HS2012/CS341/workshops/reportsAndSlides/PresentationKevinUrban.pdf)
3. <span data-ttu-id="0165c-324">Gilbert, Lynch.</span><span class="sxs-lookup"><span data-stu-id="0165c-324">Gilbert, Lynch.</span></span><span data-ttu-id="0165c-325"> - [Brewer&#39;s Conjecture and Feasibility of Consistent, Available, Partition Tolerant Web Services](http://www.glassbeam.com/sites/all/themes/glassbeam/images/blog/10.1.1.67.6951.pdf)</span><span class="sxs-lookup"><span data-stu-id="0165c-325"> - [Brewer&#39;s Conjecture and Feasibility of Consistent, Available, Partition Tolerant Web Services](http://www.glassbeam.com/sites/all/themes/glassbeam/images/blog/10.1.1.67.6951.pdf)</span></span>
4. <span data-ttu-id="0165c-326">Daniel Abadi.</span><span class="sxs-lookup"><span data-stu-id="0165c-326">Daniel Abadi.</span></span> [<span data-ttu-id="0165c-327">Consistency Tradeoffs in Modern Distributed Database Systems Design</span><span class="sxs-lookup"><span data-stu-id="0165c-327">Consistency Tradeoffs in Modern Distributed Database Systems Design</span></span>](http://cs-www.cs.yale.edu/homes/dna/papers/abadi-pacelc.pdf)
5. <span data-ttu-id="0165c-328">Martin Kleppmann.</span><span class="sxs-lookup"><span data-stu-id="0165c-328">Martin Kleppmann.</span></span> [<span data-ttu-id="0165c-329">Please stop calling databases CP or AP</span><span class="sxs-lookup"><span data-stu-id="0165c-329">Please stop calling databases CP or AP</span></span>](https://martin.kleppmann.com/2015/05/11/please-stop-calling-databases-cp-or-ap.html)
6. <span data-ttu-id="0165c-330">Peter Bailis et al. [Probabilistic Bounded Staleness (PBS) for Practical Partial Quorums](http://vldb.org/pvldb/vol5/p776_peterbailis_vldb2012.pdf)</span><span class="sxs-lookup"><span data-stu-id="0165c-330">Peter Bailis et al. [Probabilistic Bounded Staleness (PBS) for Practical Partial Quorums](http://vldb.org/pvldb/vol5/p776_peterbailis_vldb2012.pdf)</span></span>
7. <span data-ttu-id="0165c-331">Naor and Wool.</span><span class="sxs-lookup"><span data-stu-id="0165c-331">Naor and Wool.</span></span> [<span data-ttu-id="0165c-332">Load, Capacity and Availability in Quorum Systems</span><span class="sxs-lookup"><span data-stu-id="0165c-332">Load, Capacity and Availability in Quorum Systems</span></span>](http://www.cs.utexas.edu/~lorenzo/corsi/cs395t/04S/notes/naor98load.pdf)
8. <span data-ttu-id="0165c-333">Herlihy and Wing.</span><span class="sxs-lookup"><span data-stu-id="0165c-333">Herlihy and Wing.</span></span> [<span data-ttu-id="0165c-334">Lineralizability: A correctness condition for concurrent objects</span><span class="sxs-lookup"><span data-stu-id="0165c-334">Lineralizability: A correctness condition for concurrent objects</span></span>](http://cs.brown.edu/~mph/HerlihyW90/p463-herlihy.pdf)
9. [<span data-ttu-id="0165c-335">Azure DocumentDB SLA</span><span class="sxs-lookup"><span data-stu-id="0165c-335">Azure DocumentDB SLA</span></span>](https://azure.microsoft.com/support/legal/sla/documentdb/v1_1/)








