---
title: Credential assets in Azure Automation | Microsoft Docs
description: Credential assets in Azure Automation contain security credentials that can be used to authenticate to resources accessed by the runbook or DSC configuration. This article describes how to create credential assets and use them in a runbook or DSC configuration.
services: automation
documentationcenter: ''
author: mgoedtel
manager: carmonm
editor: tysonn
ms.assetid: 3209bf73-c208-425e-82b6-df49860546dd
ms.service: automation
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 04/14/2017
ms.author: bwren
ms.openlocfilehash: 7d04853df4e30b44ab1316053543f94fa59f762d
ms.sourcegitcommit: 5b9d839c0c0a94b293fdafe1d6e5429506c07e05
ms.translationtype: HT
ms.contentlocale: nl-NL
ms.lasthandoff: 08/02/2018
ms.locfileid: "44553061"
---
# <a name="credential-assets-in-azure-automation"></a><span data-ttu-id="e87f7-104">Credential assets in Azure Automation</span><span class="sxs-lookup"><span data-stu-id="e87f7-104">Credential assets in Azure Automation</span></span>
<span data-ttu-id="e87f7-105">An Automation credential asset holds a [PSCredential](http://msdn.microsoft.com/library/system.management.automation.pscredential)  object which contains security credentials such as a username and password.</span><span class="sxs-lookup"><span data-stu-id="e87f7-105">An Automation credential asset holds a [PSCredential](http://msdn.microsoft.com/library/system.management.automation.pscredential)  object which contains security credentials such as a username and password.</span></span> <span data-ttu-id="e87f7-106">Runbooks and DSC configurations may use cmdlets that accept a PSCredential object for authentication, or they may extract the username and password of the PSCredential object to provide to some application or service requiring authentication.</span><span class="sxs-lookup"><span data-stu-id="e87f7-106">Runbooks and DSC configurations may use cmdlets that accept a PSCredential object for authentication, or they may extract the username and password of the PSCredential object to provide to some application or service requiring authentication.</span></span> <span data-ttu-id="e87f7-107">The properties for a credential are stored securely in Azure Automation and can be accessed in the runbook or DSC configuration with the [Get-AutomationPSCredential](http://msdn.microsoft.com/library/system.management.automation.pscredential.aspx) activity.</span><span class="sxs-lookup"><span data-stu-id="e87f7-107">The properties for a credential are stored securely in Azure Automation and can be accessed in the runbook or DSC configuration with the [Get-AutomationPSCredential](http://msdn.microsoft.com/library/system.management.automation.pscredential.aspx) activity.</span></span>

> [!NOTE]
> <span data-ttu-id="e87f7-108">Secure assets in Azure Automation include credentials, certificates, connections, and encrypted variables.</span><span class="sxs-lookup"><span data-stu-id="e87f7-108">Secure assets in Azure Automation include credentials, certificates, connections, and encrypted variables.</span></span> <span data-ttu-id="e87f7-109">These assets are encrypted and stored in the Azure Automation using a unique key that is generated for each automation account.</span><span class="sxs-lookup"><span data-stu-id="e87f7-109">These assets are encrypted and stored in the Azure Automation using a unique key that is generated for each automation account.</span></span> <span data-ttu-id="e87f7-110">This key is encrypted by a master certificate and stored in Azure Automation.</span><span class="sxs-lookup"><span data-stu-id="e87f7-110">This key is encrypted by a master certificate and stored in Azure Automation.</span></span> <span data-ttu-id="e87f7-111">Before storing a secure asset, the key for the automation account is decrypted using the master certificate and then used to encrypt the asset.</span><span class="sxs-lookup"><span data-stu-id="e87f7-111">Before storing a secure asset, the key for the automation account is decrypted using the master certificate and then used to encrypt the asset.</span></span>  

## <a name="windows-powershell-cmdlets"></a><span data-ttu-id="e87f7-112">Windows PowerShell cmdlets</span><span class="sxs-lookup"><span data-stu-id="e87f7-112">Windows PowerShell cmdlets</span></span>
<span data-ttu-id="e87f7-113">The cmdlets in the following table are used to create and manage automation credential assets with Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="e87f7-113">The cmdlets in the following table are used to create and manage automation credential assets with Windows PowerShell.</span></span>  <span data-ttu-id="e87f7-114">They ship as part of the [Azure PowerShell module](/powershell/azureps-cmdlets-docs) which is available for use in Automation runbooks and DSC configurations.</span><span class="sxs-lookup"><span data-stu-id="e87f7-114">They ship as part of the [Azure PowerShell module](/powershell/azureps-cmdlets-docs) which is available for use in Automation runbooks and DSC configurations.</span></span>

| <span data-ttu-id="e87f7-115">Cmdlets</span><span class="sxs-lookup"><span data-stu-id="e87f7-115">Cmdlets</span></span> | <span data-ttu-id="e87f7-116">Description</span><span class="sxs-lookup"><span data-stu-id="e87f7-116">Description</span></span> |
|:--- |:--- |
| [<span data-ttu-id="e87f7-117">Get-AzureAutomationCredential</span><span class="sxs-lookup"><span data-stu-id="e87f7-117">Get-AzureAutomationCredential</span></span>](http://msdn.microsoft.com/library/dn913781.aspx) |<span data-ttu-id="e87f7-118">Retrieves information about a credential asset.</span><span class="sxs-lookup"><span data-stu-id="e87f7-118">Retrieves information about a credential asset.</span></span> <span data-ttu-id="e87f7-119">You can only retrieve the credential itself from **Get-AutomationPSCredential** activity.</span><span class="sxs-lookup"><span data-stu-id="e87f7-119">You can only retrieve the credential itself from **Get-AutomationPSCredential** activity.</span></span> |
| [<span data-ttu-id="e87f7-120">New-AzureAutomationCredential</span><span class="sxs-lookup"><span data-stu-id="e87f7-120">New-AzureAutomationCredential</span></span>](http://msdn.microsoft.com/library/azure/jj554330.aspx) |<span data-ttu-id="e87f7-121">Creates a new Automation credential.</span><span class="sxs-lookup"><span data-stu-id="e87f7-121">Creates a new Automation credential.</span></span> |
| [<span data-ttu-id="e87f7-122">Remove- AzureAutomationCredential</span><span class="sxs-lookup"><span data-stu-id="e87f7-122">Remove- AzureAutomationCredential</span></span>](http://msdn.microsoft.com/library/azure/jj554330.aspx) |<span data-ttu-id="e87f7-123">Removes an Automation credential.</span><span class="sxs-lookup"><span data-stu-id="e87f7-123">Removes an Automation credential.</span></span> |
| [<span data-ttu-id="e87f7-124">Set- AzureAutomationCredential</span><span class="sxs-lookup"><span data-stu-id="e87f7-124">Set- AzureAutomationCredential</span></span>](http://msdn.microsoft.com/library/azure/jj554330.aspx) |<span data-ttu-id="e87f7-125">Sets the properties for an existing Automation credential.</span><span class="sxs-lookup"><span data-stu-id="e87f7-125">Sets the properties for an existing Automation credential.</span></span> |

## <a name="runbook-activities"></a><span data-ttu-id="e87f7-126">Runbook activities</span><span class="sxs-lookup"><span data-stu-id="e87f7-126">Runbook activities</span></span>
<span data-ttu-id="e87f7-127">The activities in the following table are used to access credentials in a runbook and DSC configurations.</span><span class="sxs-lookup"><span data-stu-id="e87f7-127">The activities in the following table are used to access credentials in a runbook and DSC configurations.</span></span>

| <span data-ttu-id="e87f7-128">Activities</span><span class="sxs-lookup"><span data-stu-id="e87f7-128">Activities</span></span> | <span data-ttu-id="e87f7-129">Description</span><span class="sxs-lookup"><span data-stu-id="e87f7-129">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="e87f7-130">Get-AutomationPSCredential</span><span class="sxs-lookup"><span data-stu-id="e87f7-130">Get-AutomationPSCredential</span></span> |<span data-ttu-id="e87f7-131">Gets a credential to use in a runbook or DSC configuration.</span><span class="sxs-lookup"><span data-stu-id="e87f7-131">Gets a credential to use in a runbook or DSC configuration.</span></span> <span data-ttu-id="e87f7-132">Returns a [System.Management.Automation.PSCredential](http://msdn.microsoft.com/library/system.management.automation.pscredential) object.</span><span class="sxs-lookup"><span data-stu-id="e87f7-132">Returns a [System.Management.Automation.PSCredential](http://msdn.microsoft.com/library/system.management.automation.pscredential) object.</span></span> |

> [!NOTE]
> <span data-ttu-id="e87f7-133">You should avoid using variables in the –Name parameter of Get-AutomationPSCredential since this can complicate discovering dependencies between runbooks or DSC configurations, and credential assets at design time.</span><span class="sxs-lookup"><span data-stu-id="e87f7-133">You should avoid using variables in the –Name parameter of Get-AutomationPSCredential since this can complicate discovering dependencies between runbooks or DSC configurations, and credential assets at design time.</span></span>
> 
> 

## <a name="creating-a-new-credential-asset"></a><span data-ttu-id="e87f7-134">Creating a new credential asset</span><span class="sxs-lookup"><span data-stu-id="e87f7-134">Creating a new credential asset</span></span>

### <a name="to-create-a-new-credential-asset-with-the-azure-portal"></a><span data-ttu-id="e87f7-135">To create a new credential asset with the Azure portal</span><span class="sxs-lookup"><span data-stu-id="e87f7-135">To create a new credential asset with the Azure portal</span></span>
1. <span data-ttu-id="e87f7-136">From your automation account, click the **Assets** part to open the **Assets** blade.</span><span class="sxs-lookup"><span data-stu-id="e87f7-136">From your automation account, click the **Assets** part to open the **Assets** blade.</span></span>
2. <span data-ttu-id="e87f7-137">Click the **Credentials** part to open the **Credentials** blade.</span><span class="sxs-lookup"><span data-stu-id="e87f7-137">Click the **Credentials** part to open the **Credentials** blade.</span></span>
3. <span data-ttu-id="e87f7-138">Click **Add a credential** at the top of the blade.</span><span class="sxs-lookup"><span data-stu-id="e87f7-138">Click **Add a credential** at the top of the blade.</span></span>
4. <span data-ttu-id="e87f7-139">Complete the form and click **Create** to save the new credential.</span><span class="sxs-lookup"><span data-stu-id="e87f7-139">Complete the form and click **Create** to save the new credential.</span></span>

### <a name="to-create-a-new-credential-asset-with-windows-powershell"></a><span data-ttu-id="e87f7-140">To create a new credential asset with Windows PowerShell</span><span class="sxs-lookup"><span data-stu-id="e87f7-140">To create a new credential asset with Windows PowerShell</span></span>
<span data-ttu-id="e87f7-141">The following sample commands show how to create a new automation credential.</span><span class="sxs-lookup"><span data-stu-id="e87f7-141">The following sample commands show how to create a new automation credential.</span></span> <span data-ttu-id="e87f7-142">A PSCredential object is first created with the name and password and then used to create the credential asset.</span><span class="sxs-lookup"><span data-stu-id="e87f7-142">A PSCredential object is first created with the name and password and then used to create the credential asset.</span></span> <span data-ttu-id="e87f7-143">Alternatively, you could use the **Get-Credential** cmdlet to be prompted to type in a name and password.</span><span class="sxs-lookup"><span data-stu-id="e87f7-143">Alternatively, you could use the **Get-Credential** cmdlet to be prompted to type in a name and password.</span></span>

    $user = "MyDomain\MyUser"
    $pw = ConvertTo-SecureString "PassWord!" -AsPlainText -Force
    $cred = New-Object –TypeName System.Management.Automation.PSCredential –ArgumentList $user, $pw
    New-AzureAutomationCredential -AutomationAccountName "MyAutomationAccount" -Name "MyCredential" -Value $cred

### <a name="to-create-a-new-credential-asset-with-the-azure-classic-portal"></a><span data-ttu-id="e87f7-144">To create a new credential asset with the Azure classic portal</span><span class="sxs-lookup"><span data-stu-id="e87f7-144">To create a new credential asset with the Azure classic portal</span></span>
1. <span data-ttu-id="e87f7-145">From your automation account, click **Assets** at the top of the window.</span><span class="sxs-lookup"><span data-stu-id="e87f7-145">From your automation account, click **Assets** at the top of the window.</span></span>
2. <span data-ttu-id="e87f7-146">At the bottom of the window, click **Add Setting**.</span><span class="sxs-lookup"><span data-stu-id="e87f7-146">At the bottom of the window, click **Add Setting**.</span></span>
3. <span data-ttu-id="e87f7-147">Click **Add Credential**.</span><span class="sxs-lookup"><span data-stu-id="e87f7-147">Click **Add Credential**.</span></span>
4. <span data-ttu-id="e87f7-148">In the **Credential Type** dropdown, select **PowerShell Credential**.</span><span class="sxs-lookup"><span data-stu-id="e87f7-148">In the **Credential Type** dropdown, select **PowerShell Credential**.</span></span>
5. <span data-ttu-id="e87f7-149">Complete the wizard and click the checkbox to save the new credential.</span><span class="sxs-lookup"><span data-stu-id="e87f7-149">Complete the wizard and click the checkbox to save the new credential.</span></span>

## <a name="using-a-powershell-credential"></a><span data-ttu-id="e87f7-150">Using a PowerShell credential</span><span class="sxs-lookup"><span data-stu-id="e87f7-150">Using a PowerShell credential</span></span>
<span data-ttu-id="e87f7-151">You retrieve a credential asset in a runbook or DSC configuration with the **Get-AutomationPSCredential** activity.</span><span class="sxs-lookup"><span data-stu-id="e87f7-151">You retrieve a credential asset in a runbook or DSC configuration with the **Get-AutomationPSCredential** activity.</span></span> <span data-ttu-id="e87f7-152">This returns a [PSCredential object](http://msdn.microsoft.com/library/system.management.automation.pscredential.aspx) that you can use with an activity or cmdlet that requires a PSCredential parameter.</span><span class="sxs-lookup"><span data-stu-id="e87f7-152">This returns a [PSCredential object](http://msdn.microsoft.com/library/system.management.automation.pscredential.aspx) that you can use with an activity or cmdlet that requires a PSCredential parameter.</span></span> <span data-ttu-id="e87f7-153">You can also retrieve the properties of the credential object to use individually.</span><span class="sxs-lookup"><span data-stu-id="e87f7-153">You can also retrieve the properties of the credential object to use individually.</span></span> <span data-ttu-id="e87f7-154">The object has a property for the username and the secure password, or you can use the **GetNetworkCredential** method to return a [NetworkCredential](http://msdn.microsoft.com/library/system.net.networkcredential.aspx) object that will provide an unsecured version of the password.</span><span class="sxs-lookup"><span data-stu-id="e87f7-154">The object has a property for the username and the secure password, or you can use the **GetNetworkCredential** method to return a [NetworkCredential](http://msdn.microsoft.com/library/system.net.networkcredential.aspx) object that will provide an unsecured version of the password.</span></span>

### <a name="textual-runbook-sample"></a><span data-ttu-id="e87f7-155">Textual runbook sample</span><span class="sxs-lookup"><span data-stu-id="e87f7-155">Textual runbook sample</span></span>
<span data-ttu-id="e87f7-156">The following sample commands show how to use a PowerShell credential in a runbook.</span><span class="sxs-lookup"><span data-stu-id="e87f7-156">The following sample commands show how to use a PowerShell credential in a runbook.</span></span> <span data-ttu-id="e87f7-157">In this example, the credential is retrieved and its username and password assigned to variables.</span><span class="sxs-lookup"><span data-stu-id="e87f7-157">In this example, the credential is retrieved and its username and password assigned to variables.</span></span>

    $myCredential = Get-AutomationPSCredential -Name 'MyCredential'
    $userName = $myCredential.UserName
    $securePassword = $myCredential.Password
    $password = $myCredential.GetNetworkCredential().Password


### <a name="graphical-runbook-sample"></a><span data-ttu-id="e87f7-158">Graphical runbook sample</span><span class="sxs-lookup"><span data-stu-id="e87f7-158">Graphical runbook sample</span></span>
<span data-ttu-id="e87f7-159">You add a **Get-AutomationPSCredential** activity to a graphical runbook by right-clicking on the credential in the Library pane of the graphical editor and selecting **Add to canvas**.</span><span class="sxs-lookup"><span data-stu-id="e87f7-159">You add a **Get-AutomationPSCredential** activity to a graphical runbook by right-clicking on the credential in the Library pane of the graphical editor and selecting **Add to canvas**.</span></span>

![Add credential to canvas](https://docstestmedia1.blob.core.windows.net/azure-media/articles/automation/media/automation-credentials/credential-add-canvas.png)

<span data-ttu-id="e87f7-161">The following image shows an example of using a credential in a graphical runbook.</span><span class="sxs-lookup"><span data-stu-id="e87f7-161">The following image shows an example of using a credential in a graphical runbook.</span></span>  <span data-ttu-id="e87f7-162">In this case, it is being used to provide authentication for a runbook to Azure resources as described in [Authenticate Runbooks with Azure AD User account](automation-create-aduser-account.md).</span><span class="sxs-lookup"><span data-stu-id="e87f7-162">In this case, it is being used to provide authentication for a runbook to Azure resources as described in [Authenticate Runbooks with Azure AD User account](automation-create-aduser-account.md).</span></span>  <span data-ttu-id="e87f7-163">The first activity retrieves the credential that has access to the Azure subscription.</span><span class="sxs-lookup"><span data-stu-id="e87f7-163">The first activity retrieves the credential that has access to the Azure subscription.</span></span>  <span data-ttu-id="e87f7-164">The **Add-AzureAccount** activity then uses this credential to provide authentication for any activities that come after it.</span><span class="sxs-lookup"><span data-stu-id="e87f7-164">The **Add-AzureAccount** activity then uses this credential to provide authentication for any activities that come after it.</span></span>  <span data-ttu-id="e87f7-165">A [pipeline link](automation-graphical-authoring-intro.md#links-and-workflow) is here since **Get-AutomationPSCredential** is expecting a single object.</span><span class="sxs-lookup"><span data-stu-id="e87f7-165">A [pipeline link](automation-graphical-authoring-intro.md#links-and-workflow) is here since **Get-AutomationPSCredential** is expecting a single object.</span></span>  

![Add credential to canvas](https://docstestmedia1.blob.core.windows.net/azure-media/articles/automation/media/automation-credentials/get-credential.png)

## <a name="using-a-powershell-credential-in-dsc"></a><span data-ttu-id="e87f7-167">Using a PowerShell credential in DSC</span><span class="sxs-lookup"><span data-stu-id="e87f7-167">Using a PowerShell credential in DSC</span></span>
<span data-ttu-id="e87f7-168">While DSC configurations in Azure Automation can reference credential assets using **Get-AutomationPSCredential**, credential assets can also be passed in via parameters, if desired.</span><span class="sxs-lookup"><span data-stu-id="e87f7-168">While DSC configurations in Azure Automation can reference credential assets using **Get-AutomationPSCredential**, credential assets can also be passed in via parameters, if desired.</span></span> <span data-ttu-id="e87f7-169">For more information, see [Compiling configurations in Azure Automation DSC](automation-dsc-compile.md#credential-assets).</span><span class="sxs-lookup"><span data-stu-id="e87f7-169">For more information, see [Compiling configurations in Azure Automation DSC](automation-dsc-compile.md#credential-assets).</span></span>

## <a name="next-steps"></a><span data-ttu-id="e87f7-170">Next Steps</span><span class="sxs-lookup"><span data-stu-id="e87f7-170">Next Steps</span></span>
* <span data-ttu-id="e87f7-171">To learn more about links in graphical authoring, see [Links in graphical authoring](automation-graphical-authoring-intro.md#links-and-workflow)</span><span class="sxs-lookup"><span data-stu-id="e87f7-171">To learn more about links in graphical authoring, see [Links in graphical authoring](automation-graphical-authoring-intro.md#links-and-workflow)</span></span>
* <span data-ttu-id="e87f7-172">To understand the different authentication methods with Automation, see [Azure Automation Security](automation-security-overview.md)</span><span class="sxs-lookup"><span data-stu-id="e87f7-172">To understand the different authentication methods with Automation, see [Azure Automation Security](automation-security-overview.md)</span></span>
* <span data-ttu-id="e87f7-173">To get started with Graphical runbooks, see [My first graphical runbook](automation-first-runbook-graphical.md)</span><span class="sxs-lookup"><span data-stu-id="e87f7-173">To get started with Graphical runbooks, see [My first graphical runbook](automation-first-runbook-graphical.md)</span></span>
* <span data-ttu-id="e87f7-174">To get started with PowerShell workflow runbooks, see [My first PowerShell workflow runbook](automation-first-runbook-textual.md)</span><span class="sxs-lookup"><span data-stu-id="e87f7-174">To get started with PowerShell workflow runbooks, see [My first PowerShell workflow runbook](automation-first-runbook-textual.md)</span></span> 



