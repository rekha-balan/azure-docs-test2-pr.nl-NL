---
title: Runbook execution in Azure Automation | Microsoft Docs
description: Describes the details of how a runbook in Azure Automation is processed.
services: automation
documentationcenter: ''
author: mgoedtel
manager: jwhit
editor: tysonn
ms.assetid: d10c8ce2-2c0b-4ea7-ba3c-d20e09b2c9ca
ms.service: automation
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 11/02/2016
ms.author: bwren
ms.openlocfilehash: e15d755c30839d92037ced6182d90cf69bd04c80
ms.sourcegitcommit: 5b9d839c0c0a94b293fdafe1d6e5429506c07e05
ms.translationtype: HT
ms.contentlocale: nl-NL
ms.lasthandoff: 08/02/2018
ms.locfileid: "44660858"
---
# <a name="runbook-execution-in-azure-automation"></a><span data-ttu-id="b45ce-103">Runbook execution in Azure Automation</span><span class="sxs-lookup"><span data-stu-id="b45ce-103">Runbook execution in Azure Automation</span></span>
<span data-ttu-id="b45ce-104">When you start a runbook in Azure Automation, a job is created.</span><span class="sxs-lookup"><span data-stu-id="b45ce-104">When you start a runbook in Azure Automation, a job is created.</span></span> <span data-ttu-id="b45ce-105">A job is a single execution instance of a runbook.</span><span class="sxs-lookup"><span data-stu-id="b45ce-105">A job is a single execution instance of a runbook.</span></span> <span data-ttu-id="b45ce-106">An Azure Automation worker is assigned to run each job.</span><span class="sxs-lookup"><span data-stu-id="b45ce-106">An Azure Automation worker is assigned to run each job.</span></span> <span data-ttu-id="b45ce-107">While workers are shared by multiple Azure accounts, jobs from different Automation accounts are isolated from one another.</span><span class="sxs-lookup"><span data-stu-id="b45ce-107">While workers are shared by multiple Azure accounts, jobs from different Automation accounts are isolated from one another.</span></span> <span data-ttu-id="b45ce-108">You do not have control over which worker will service the request for your job.</span><span class="sxs-lookup"><span data-stu-id="b45ce-108">You do not have control over which worker will service the request for your job.</span></span>  <span data-ttu-id="b45ce-109">A single runbook can have multiple jobs running at one time.</span><span class="sxs-lookup"><span data-stu-id="b45ce-109">A single runbook can have multiple jobs running at one time.</span></span> <span data-ttu-id="b45ce-110">When you view the list of runbooks in the Azure portal, it will list the status of the last job that was started for each runbook.</span><span class="sxs-lookup"><span data-stu-id="b45ce-110">When you view the list of runbooks in the Azure portal, it will list the status of the last job that was started for each runbook.</span></span> <span data-ttu-id="b45ce-111">You can view the list of jobs for each runbook in order to track the status of each.</span><span class="sxs-lookup"><span data-stu-id="b45ce-111">You can view the list of jobs for each runbook in order to track the status of each.</span></span> <span data-ttu-id="b45ce-112">For a description of the different job statuses, see [Job Statuses](#job-statuses).</span><span class="sxs-lookup"><span data-stu-id="b45ce-112">For a description of the different job statuses, see [Job Statuses](#job-statuses).</span></span>

<span data-ttu-id="b45ce-113">The following diagram shows the lifecycle of a runbook job for [Graphical runbooks](automation-runbook-types.md#graphical-runbooks) and [PowerShell Workflow runbooks](automation-runbook-types.md#powershell-workflow-runbooks).</span><span class="sxs-lookup"><span data-stu-id="b45ce-113">The following diagram shows the lifecycle of a runbook job for [Graphical runbooks](automation-runbook-types.md#graphical-runbooks) and [PowerShell Workflow runbooks](automation-runbook-types.md#powershell-workflow-runbooks).</span></span>

![Job Statuses - PowerShell Workflow](https://docstestmedia1.blob.core.windows.net/azure-media/articles/automation/media/automation-runbook-execution/job-statuses.png)

<span data-ttu-id="b45ce-115">The following diagram shows the lifecycle of a runbook job for [PowerShell runbooks](automation-runbook-types.md#powershell-runbooks).</span><span class="sxs-lookup"><span data-stu-id="b45ce-115">The following diagram shows the lifecycle of a runbook job for [PowerShell runbooks](automation-runbook-types.md#powershell-runbooks).</span></span>

![Job Statuses - PowerShell Script](https://docstestmedia1.blob.core.windows.net/azure-media/articles/automation/media/automation-runbook-execution/job-statuses-script.png)

<span data-ttu-id="b45ce-117">Your jobs will have access to your Azure resources by making a connection to your Azure subscription.</span><span class="sxs-lookup"><span data-stu-id="b45ce-117">Your jobs will have access to your Azure resources by making a connection to your Azure subscription.</span></span> <span data-ttu-id="b45ce-118">They will only have access to resources in your data center if those resources are accessible from the public cloud.</span><span class="sxs-lookup"><span data-stu-id="b45ce-118">They will only have access to resources in your data center if those resources are accessible from the public cloud.</span></span>

## <a name="job-statuses"></a><span data-ttu-id="b45ce-119">Job statuses</span><span class="sxs-lookup"><span data-stu-id="b45ce-119">Job statuses</span></span>
<span data-ttu-id="b45ce-120">The following table describes the different statuses that are possible for a job.</span><span class="sxs-lookup"><span data-stu-id="b45ce-120">The following table describes the different statuses that are possible for a job.</span></span>

| <span data-ttu-id="b45ce-121">Status</span><span class="sxs-lookup"><span data-stu-id="b45ce-121">Status</span></span> | <span data-ttu-id="b45ce-122">Description</span><span class="sxs-lookup"><span data-stu-id="b45ce-122">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="b45ce-123">Completed</span><span class="sxs-lookup"><span data-stu-id="b45ce-123">Completed</span></span> |<span data-ttu-id="b45ce-124">The job completed successfully.</span><span class="sxs-lookup"><span data-stu-id="b45ce-124">The job completed successfully.</span></span> |
| <span data-ttu-id="b45ce-125">Failed</span><span class="sxs-lookup"><span data-stu-id="b45ce-125">Failed</span></span> |<span data-ttu-id="b45ce-126">For [Graphical and PowerShell Workflow runbooks](automation-runbook-types.md), the runbook failed to compile.</span><span class="sxs-lookup"><span data-stu-id="b45ce-126">For [Graphical and PowerShell Workflow runbooks](automation-runbook-types.md), the runbook failed to compile.</span></span>  <span data-ttu-id="b45ce-127">For [PowerShell Script runbooks](automation-runbook-types.md), the runbook failed to start or the job encountered an exception.</span><span class="sxs-lookup"><span data-stu-id="b45ce-127">For [PowerShell Script runbooks](automation-runbook-types.md), the runbook failed to start or the job encountered an exception.</span></span> |
| <span data-ttu-id="b45ce-128">Failed, waiting for resources</span><span class="sxs-lookup"><span data-stu-id="b45ce-128">Failed, waiting for resources</span></span> |<span data-ttu-id="b45ce-129">The job failed because it reached the [fair share](#fairshare) limit three times and started from the same checkpoint or from the start of the runbook each time.</span><span class="sxs-lookup"><span data-stu-id="b45ce-129">The job failed because it reached the [fair share](#fairshare) limit three times and started from the same checkpoint or from the start of the runbook each time.</span></span> |
| <span data-ttu-id="b45ce-130">Queued</span><span class="sxs-lookup"><span data-stu-id="b45ce-130">Queued</span></span> |<span data-ttu-id="b45ce-131">The job is waiting for resources on an Automation worker to come available so that it can be started.</span><span class="sxs-lookup"><span data-stu-id="b45ce-131">The job is waiting for resources on an Automation worker to come available so that it can be started.</span></span> |
| <span data-ttu-id="b45ce-132">Starting</span><span class="sxs-lookup"><span data-stu-id="b45ce-132">Starting</span></span> |<span data-ttu-id="b45ce-133">The job has been assigned to a worker, and the system is in the process of starting it.</span><span class="sxs-lookup"><span data-stu-id="b45ce-133">The job has been assigned to a worker, and the system is in the process of starting it.</span></span> |
| <span data-ttu-id="b45ce-134">Resuming</span><span class="sxs-lookup"><span data-stu-id="b45ce-134">Resuming</span></span> |<span data-ttu-id="b45ce-135">The system is in the process of resuming the job after it was suspended.</span><span class="sxs-lookup"><span data-stu-id="b45ce-135">The system is in the process of resuming the job after it was suspended.</span></span> |
| <span data-ttu-id="b45ce-136">Running</span><span class="sxs-lookup"><span data-stu-id="b45ce-136">Running</span></span> |<span data-ttu-id="b45ce-137">The job is running.</span><span class="sxs-lookup"><span data-stu-id="b45ce-137">The job is running.</span></span> |
| <span data-ttu-id="b45ce-138">Running, waiting for resources</span><span class="sxs-lookup"><span data-stu-id="b45ce-138">Running, waiting for resources</span></span> |<span data-ttu-id="b45ce-139">The job has been unloaded because it reached the [fair share](#fairshare) limit.</span><span class="sxs-lookup"><span data-stu-id="b45ce-139">The job has been unloaded because it reached the [fair share](#fairshare) limit.</span></span> <span data-ttu-id="b45ce-140">It will resume shortly from its last checkpoint.</span><span class="sxs-lookup"><span data-stu-id="b45ce-140">It will resume shortly from its last checkpoint.</span></span> |
| <span data-ttu-id="b45ce-141">Stopped</span><span class="sxs-lookup"><span data-stu-id="b45ce-141">Stopped</span></span> |<span data-ttu-id="b45ce-142">The job was stopped by the user before it was completed.</span><span class="sxs-lookup"><span data-stu-id="b45ce-142">The job was stopped by the user before it was completed.</span></span> |
| <span data-ttu-id="b45ce-143">Stopping</span><span class="sxs-lookup"><span data-stu-id="b45ce-143">Stopping</span></span> |<span data-ttu-id="b45ce-144">The system is in the process of stopping the job.</span><span class="sxs-lookup"><span data-stu-id="b45ce-144">The system is in the process of stopping the job.</span></span> |
| <span data-ttu-id="b45ce-145">Suspended</span><span class="sxs-lookup"><span data-stu-id="b45ce-145">Suspended</span></span> |<span data-ttu-id="b45ce-146">The job was suspended by the user, by the system, or by a command in the runbook.</span><span class="sxs-lookup"><span data-stu-id="b45ce-146">The job was suspended by the user, by the system, or by a command in the runbook.</span></span> <span data-ttu-id="b45ce-147">A job that is suspended can be started again and will resume from its last checkpoint or from the beginning of the runbook if it has no checkpoints.</span><span class="sxs-lookup"><span data-stu-id="b45ce-147">A job that is suspended can be started again and will resume from its last checkpoint or from the beginning of the runbook if it has no checkpoints.</span></span> <span data-ttu-id="b45ce-148">The runbook will only be suspended by the system in the case of an exception.</span><span class="sxs-lookup"><span data-stu-id="b45ce-148">The runbook will only be suspended by the system in the case of an exception.</span></span> <span data-ttu-id="b45ce-149">By default, ErrorActionPreference is set to **Continue** meaning that the job will keep running on an error.</span><span class="sxs-lookup"><span data-stu-id="b45ce-149">By default, ErrorActionPreference is set to **Continue** meaning that the job will keep running on an error.</span></span> <span data-ttu-id="b45ce-150">If this preference variable is set to **Stop** then the job will suspend on an error.</span><span class="sxs-lookup"><span data-stu-id="b45ce-150">If this preference variable is set to **Stop** then the job will suspend on an error.</span></span>  <span data-ttu-id="b45ce-151">Applies to [Graphical and PowerShell Workflow runbooks](automation-runbook-types.md) only.</span><span class="sxs-lookup"><span data-stu-id="b45ce-151">Applies to [Graphical and PowerShell Workflow runbooks](automation-runbook-types.md) only.</span></span> |
| <span data-ttu-id="b45ce-152">Suspending</span><span class="sxs-lookup"><span data-stu-id="b45ce-152">Suspending</span></span> |<span data-ttu-id="b45ce-153">The system is attempting to suspend the job at the request of the user.</span><span class="sxs-lookup"><span data-stu-id="b45ce-153">The system is attempting to suspend the job at the request of the user.</span></span> <span data-ttu-id="b45ce-154">The runbook must reach its next checkpoint before it can be suspended.</span><span class="sxs-lookup"><span data-stu-id="b45ce-154">The runbook must reach its next checkpoint before it can be suspended.</span></span> <span data-ttu-id="b45ce-155">If it has already passed its last checkpoint, then it will complete before it can be suspended.</span><span class="sxs-lookup"><span data-stu-id="b45ce-155">If it has already passed its last checkpoint, then it will complete before it can be suspended.</span></span>  <span data-ttu-id="b45ce-156">Applies to [Graphical and PowerShell Workflow runbooks](automation-runbook-types.md) only.</span><span class="sxs-lookup"><span data-stu-id="b45ce-156">Applies to [Graphical and PowerShell Workflow runbooks](automation-runbook-types.md) only.</span></span> |

## <a name="viewing-job-status-from-the-azure-portal"></a><span data-ttu-id="b45ce-157">Viewing job status from the Azure portal</span><span class="sxs-lookup"><span data-stu-id="b45ce-157">Viewing job status from the Azure portal</span></span>
<span data-ttu-id="b45ce-158">You can view a summarized status of all runbook jobs or drill into details of a specific runbook job in the Azure portal or by configuring integration with your Microsoft Operations Management Suite (OMS) Log Analytics workspace to forward runbook job status and job streams.</span><span class="sxs-lookup"><span data-stu-id="b45ce-158">You can view a summarized status of all runbook jobs or drill into details of a specific runbook job in the Azure portal or by configuring integration with your Microsoft Operations Management Suite (OMS) Log Analytics workspace to forward runbook job status and job streams.</span></span>  <span data-ttu-id="b45ce-159">For more information about integrating with OMS Log Analytics, see [Forward job status and job streams from Automation to Log Analytics (OMS)](automation-manage-send-joblogs-log-analytics.md).</span><span class="sxs-lookup"><span data-stu-id="b45ce-159">For more information about integrating with OMS Log Analytics, see [Forward job status and job streams from Automation to Log Analytics (OMS)](automation-manage-send-joblogs-log-analytics.md).</span></span>  

### <a name="automation-runbook-jobs-summary"></a><span data-ttu-id="b45ce-160">Automation runbook jobs summary</span><span class="sxs-lookup"><span data-stu-id="b45ce-160">Automation runbook jobs summary</span></span>
<span data-ttu-id="b45ce-161">From the Automation account blade, you can see a summary of all of the runbook jobs for a selected Automation account under **Job Statistics** tile.</span><span class="sxs-lookup"><span data-stu-id="b45ce-161">From the Automation account blade, you can see a summary of all of the runbook jobs for a selected Automation account under **Job Statistics** tile.</span></span><br><br> <span data-ttu-id="b45ce-162">![Job Statistics tile](https://docstestmedia1.blob.core.windows.net/azure-media/articles/automation/media/automation-runbook-execution/automation-account-job-status-summary.png).</span><span class="sxs-lookup"><span data-stu-id="b45ce-162">![Job Statistics tile](https://docstestmedia1.blob.core.windows.net/azure-media/articles/automation/media/automation-runbook-execution/automation-account-job-status-summary.png).</span></span><br> <span data-ttu-id="b45ce-163">This tile displays a count and graphical representation of the job status for all jobs executed.</span><span class="sxs-lookup"><span data-stu-id="b45ce-163">This tile displays a count and graphical representation of the job status for all jobs executed.</span></span>  

<span data-ttu-id="b45ce-164">Clicking on the tile will present the **Jobs** blade, which includes a summarized list of all jobs executed, with status, job execution start and completion times.</span><span class="sxs-lookup"><span data-stu-id="b45ce-164">Clicking on the tile will present the **Jobs** blade, which includes a summarized list of all jobs executed, with status, job execution start and completion times.</span></span><br><br> <span data-ttu-id="b45ce-165">![Automation account Jobs blade](https://docstestmedia1.blob.core.windows.net/azure-media/articles/automation/media/automation-runbook-execution/automation-account-jobs-status-blade.png)</span><span class="sxs-lookup"><span data-stu-id="b45ce-165">![Automation account Jobs blade](https://docstestmedia1.blob.core.windows.net/azure-media/articles/automation/media/automation-runbook-execution/automation-account-jobs-status-blade.png)</span></span><br><br>  <span data-ttu-id="b45ce-166">You can filter the list of jobs by selecting **Filter jobs** on the **Jobs** blade and filter on a specific runbook, job status, or from the drop-down list, the date/time range to search within.</span><span class="sxs-lookup"><span data-stu-id="b45ce-166">You can filter the list of jobs by selecting **Filter jobs** on the **Jobs** blade and filter on a specific runbook, job status, or from the drop-down list, the date/time range to search within.</span></span><br><br> <span data-ttu-id="b45ce-167">![Filter Job status](https://docstestmedia1.blob.core.windows.net/azure-media/articles/automation/media/automation-runbook-execution/automation-account-jobs-filter.png)</span><span class="sxs-lookup"><span data-stu-id="b45ce-167">![Filter Job status](https://docstestmedia1.blob.core.windows.net/azure-media/articles/automation/media/automation-runbook-execution/automation-account-jobs-filter.png)</span></span>

<span data-ttu-id="b45ce-168">Alternatively, you can view job summary details for a specific runbook by selecting that runbook from the **Runbooks** blade in your Automation account, and then select the **Jobs** tile.</span><span class="sxs-lookup"><span data-stu-id="b45ce-168">Alternatively, you can view job summary details for a specific runbook by selecting that runbook from the **Runbooks** blade in your Automation account, and then select the **Jobs** tile.</span></span>  <span data-ttu-id="b45ce-169">This will present the **Jobs** blade, and from there you can click on the job record to view its detail and output.</span><span class="sxs-lookup"><span data-stu-id="b45ce-169">This will present the **Jobs** blade, and from there you can click on the job record to view its detail and output.</span></span><br><br> <span data-ttu-id="b45ce-170">![Automation account Jobs blade](https://docstestmedia1.blob.core.windows.net/azure-media/articles/automation/media/automation-runbook-execution/automation-runbook-job-summary-blade.png)</span><span class="sxs-lookup"><span data-stu-id="b45ce-170">![Automation account Jobs blade](https://docstestmedia1.blob.core.windows.net/azure-media/articles/automation/media/automation-runbook-execution/automation-runbook-job-summary-blade.png)</span></span><br> 

### <a name="job-summary"></a><span data-ttu-id="b45ce-171">Job Summary</span><span class="sxs-lookup"><span data-stu-id="b45ce-171">Job Summary</span></span>
<span data-ttu-id="b45ce-172">You can view a list of all of the jobs that have been created for a particular runbook and their most recent status.</span><span class="sxs-lookup"><span data-stu-id="b45ce-172">You can view a list of all of the jobs that have been created for a particular runbook and their most recent status.</span></span> <span data-ttu-id="b45ce-173">You can filter this list by job status and the range of dates for the last change to the job.</span><span class="sxs-lookup"><span data-stu-id="b45ce-173">You can filter this list by job status and the range of dates for the last change to the job.</span></span> <span data-ttu-id="b45ce-174">Click on the name of a job to view its detailed information and its output.</span><span class="sxs-lookup"><span data-stu-id="b45ce-174">Click on the name of a job to view its detailed information and its output.</span></span> <span data-ttu-id="b45ce-175">The detailed view of the job includes the values for the runbook parameters that were provided to that job.</span><span class="sxs-lookup"><span data-stu-id="b45ce-175">The detailed view of the job includes the values for the runbook parameters that were provided to that job.</span></span>

<span data-ttu-id="b45ce-176">You can use the following steps to view the jobs for a runbook.</span><span class="sxs-lookup"><span data-stu-id="b45ce-176">You can use the following steps to view the jobs for a runbook.</span></span>

1. <span data-ttu-id="b45ce-177">In the Azure Management Portal, select **Automation** and then then click the name of an automation account.</span><span class="sxs-lookup"><span data-stu-id="b45ce-177">In the Azure Management Portal, select **Automation** and then then click the name of an automation account.</span></span>
2. <span data-ttu-id="b45ce-178">Click the name of a runbook.</span><span class="sxs-lookup"><span data-stu-id="b45ce-178">Click the name of a runbook.</span></span>
3. <span data-ttu-id="b45ce-179">Select the **Jobs** tab.</span><span class="sxs-lookup"><span data-stu-id="b45ce-179">Select the **Jobs** tab.</span></span>
4. <span data-ttu-id="b45ce-180">Click on the **Job Created** column for a job to view its detail and output.</span><span class="sxs-lookup"><span data-stu-id="b45ce-180">Click on the **Job Created** column for a job to view its detail and output.</span></span>

## <a name="retrieving-job-status-using-windows-powershell"></a><span data-ttu-id="b45ce-181">Retrieving job status using Windows PowerShell</span><span class="sxs-lookup"><span data-stu-id="b45ce-181">Retrieving job status using Windows PowerShell</span></span>
<span data-ttu-id="b45ce-182">You can use the [Get-AzureRmAutomationJob](https://msdn.microsoft.com/library/mt619440.aspx) to retrieve the jobs created for a runbook and the details of a particular job.</span><span class="sxs-lookup"><span data-stu-id="b45ce-182">You can use the [Get-AzureRmAutomationJob](https://msdn.microsoft.com/library/mt619440.aspx) to retrieve the jobs created for a runbook and the details of a particular job.</span></span> <span data-ttu-id="b45ce-183">If you start a runbook with Windows PowerShell using [Start-AzureRmAutomationRunbook](https://msdn.microsoft.com/library/mt603661.aspx), then it will return the resulting job.</span><span class="sxs-lookup"><span data-stu-id="b45ce-183">If you start a runbook with Windows PowerShell using [Start-AzureRmAutomationRunbook](https://msdn.microsoft.com/library/mt603661.aspx), then it will return the resulting job.</span></span> <span data-ttu-id="b45ce-184">Use [Get-AzureRmAutomationJob](https://msdn.microsoft.com/library/mt619440.aspx)Output to get a job’s output.</span><span class="sxs-lookup"><span data-stu-id="b45ce-184">Use [Get-AzureRmAutomationJob](https://msdn.microsoft.com/library/mt619440.aspx)Output to get a job’s output.</span></span>

<span data-ttu-id="b45ce-185">The following sample commands retrieve the last job for a sample runbook and displays its status, the values provided for the runbook parameters, and the output from the job.</span><span class="sxs-lookup"><span data-stu-id="b45ce-185">The following sample commands retrieve the last job for a sample runbook and displays its status, the values provided for the runbook parameters, and the output from the job.</span></span>

    $job = (Get-AzureRmAutomationJob –AutomationAccountName "MyAutomationAccount" `
    –RunbookName "Test-Runbook" -ResourceGroupName "ResourceGroup01" | sort LastModifiedDate –desc)[0]
    $job.Status
    $job.JobParameters
    Get-AzureRmAutomationJobOutput -ResourceGroupName "ResourceGroup01" `
    –AutomationAccountName "MyAutomationAcct" -Id $job.JobId –Stream Output

## <a name="fair-share"></a><span data-ttu-id="b45ce-186">Fair share</span><span class="sxs-lookup"><span data-stu-id="b45ce-186">Fair share</span></span>
<span data-ttu-id="b45ce-187">In order to share resources among all runbooks in the cloud, Azure Automation will temporarily unload any job after it has been running for 3 hours.</span><span class="sxs-lookup"><span data-stu-id="b45ce-187">In order to share resources among all runbooks in the cloud, Azure Automation will temporarily unload any job after it has been running for 3 hours.</span></span>  <span data-ttu-id="b45ce-188">[Graphical](automation-runbook-types.md#graphical-runbooks) and [PowerShell Workflow](automation-runbook-types.md#powershell-workflow-runbooks) runbooks will be resumed from their last [checkpoint](http://technet.microsoft.com/library/dn469257.aspx#bk_Checkpoints).</span><span class="sxs-lookup"><span data-stu-id="b45ce-188">[Graphical](automation-runbook-types.md#graphical-runbooks) and [PowerShell Workflow](automation-runbook-types.md#powershell-workflow-runbooks) runbooks will be resumed from their last [checkpoint](http://technet.microsoft.com/library/dn469257.aspx#bk_Checkpoints).</span></span> <span data-ttu-id="b45ce-189">During this time, the job will show a status of Running, Waiting for Resources.</span><span class="sxs-lookup"><span data-stu-id="b45ce-189">During this time, the job will show a status of Running, Waiting for Resources.</span></span> <span data-ttu-id="b45ce-190">If the runbook has no checkpoints or the job had not reached the first checkpoint before being unloaded, then it will restart from the beginning.</span><span class="sxs-lookup"><span data-stu-id="b45ce-190">If the runbook has no checkpoints or the job had not reached the first checkpoint before being unloaded, then it will restart from the beginning.</span></span>  <span data-ttu-id="b45ce-191">[PowerShell](automation-runbook-types.md#powershell-runbooks) runbooks are always restarted from the beginning since they don't support checkpoints.</span><span class="sxs-lookup"><span data-stu-id="b45ce-191">[PowerShell](automation-runbook-types.md#powershell-runbooks) runbooks are always restarted from the beginning since they don't support checkpoints.</span></span>

<span data-ttu-id="b45ce-192">If the runbook restarts from the same checkpoint or from the beginning of the runbook three consecutive times, it will be terminated with a status of Failed, waiting for resources.</span><span class="sxs-lookup"><span data-stu-id="b45ce-192">If the runbook restarts from the same checkpoint or from the beginning of the runbook three consecutive times, it will be terminated with a status of Failed, waiting for resources.</span></span> <span data-ttu-id="b45ce-193">This is to protect from runbooks running indefinitely without completing, as they are not able to make it to the next checkpoint without being unloaded again.</span><span class="sxs-lookup"><span data-stu-id="b45ce-193">This is to protect from runbooks running indefinitely without completing, as they are not able to make it to the next checkpoint without being unloaded again.</span></span> <span data-ttu-id="b45ce-194">In this case, you will receive the following exception with the failure.</span><span class="sxs-lookup"><span data-stu-id="b45ce-194">In this case, you will receive the following exception with the failure.</span></span>

<span data-ttu-id="b45ce-195">*The job cannot continue running because it was repeatedly evicted from the same checkpoint. Please make sure your Runbook does not perform lengthy operations without persisting its state.*</span><span class="sxs-lookup"><span data-stu-id="b45ce-195">*The job cannot continue running because it was repeatedly evicted from the same checkpoint. Please make sure your Runbook does not perform lengthy operations without persisting its state.*</span></span>

<span data-ttu-id="b45ce-196">When you create a runbook, you should ensure that the time to run any activities between two checkpoints will not exceed 3 hours.</span><span class="sxs-lookup"><span data-stu-id="b45ce-196">When you create a runbook, you should ensure that the time to run any activities between two checkpoints will not exceed 3 hours.</span></span> <span data-ttu-id="b45ce-197">You may need to add checkpoints to your runbook to ensure that it does not reach this 3 hour limit or break up long running operations.</span><span class="sxs-lookup"><span data-stu-id="b45ce-197">You may need to add checkpoints to your runbook to ensure that it does not reach this 3 hour limit or break up long running operations.</span></span> <span data-ttu-id="b45ce-198">For example, your runbook might perform a reindex on a large SQL database.</span><span class="sxs-lookup"><span data-stu-id="b45ce-198">For example, your runbook might perform a reindex on a large SQL database.</span></span> <span data-ttu-id="b45ce-199">If this single operation does not complete within the fair share limit, then the job will be unloaded and restarted from the beginning.</span><span class="sxs-lookup"><span data-stu-id="b45ce-199">If this single operation does not complete within the fair share limit, then the job will be unloaded and restarted from the beginning.</span></span> <span data-ttu-id="b45ce-200">In this case, you should break up the reindex operation into multiple steps, such as reindexing one table at a time, and then insert a checkpoint after each operation so that the job could resume after the last operation to complete.</span><span class="sxs-lookup"><span data-stu-id="b45ce-200">In this case, you should break up the reindex operation into multiple steps, such as reindexing one table at a time, and then insert a checkpoint after each operation so that the job could resume after the last operation to complete.</span></span>

## <a name="next-steps"></a><span data-ttu-id="b45ce-201">Next steps</span><span class="sxs-lookup"><span data-stu-id="b45ce-201">Next steps</span></span>
* <span data-ttu-id="b45ce-202">To learn more about the different methods that can be used to start a runbook in Azure Automation, see [Starting a runbook in Azure Automation](automation-starting-a-runbook.md)</span><span class="sxs-lookup"><span data-stu-id="b45ce-202">To learn more about the different methods that can be used to start a runbook in Azure Automation, see [Starting a runbook in Azure Automation](automation-starting-a-runbook.md)</span></span>







