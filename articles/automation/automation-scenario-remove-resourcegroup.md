---
title: Automate removal of resource groups with Azure Automation
description: PowerShell Workflow version of an Azure Automation scenario including runbooks to remove all resource groups in your subscription.
services: automation
ms.service: automation
ms.component: process-automation
author: georgewallace
ms.author: gwallace
ms.date: 03/19/2018
ms.topic: conceptual
manager: carmonm
ms.openlocfilehash: f0ec42a1e62c4aa35bb6bdffce0acf00a971cb7d
ms.sourcegitcommit: d1451406a010fd3aa854dc8e5b77dc5537d8050e
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 09/13/2018
ms.locfileid: "44800181"
---
# <a name="azure-automation-scenario---automate-removal-of-resource-groups"></a><span data-ttu-id="2687d-103">Azure Automation scenario - automate removal of resource groups</span><span class="sxs-lookup"><span data-stu-id="2687d-103">Azure Automation scenario - automate removal of resource groups</span></span>
<span data-ttu-id="2687d-104">Many customers create more than one resource group.</span><span class="sxs-lookup"><span data-stu-id="2687d-104">Many customers create more than one resource group.</span></span> <span data-ttu-id="2687d-105">Some might be used for managing production applications, and others might be used as development, testing, and staging environments.</span><span class="sxs-lookup"><span data-stu-id="2687d-105">Some might be used for managing production applications, and others might be used as development, testing, and staging environments.</span></span> <span data-ttu-id="2687d-106">Automating the deployment of these resources is one thing, but being able to decommission a resource group with a click of the button is another.</span><span class="sxs-lookup"><span data-stu-id="2687d-106">Automating the deployment of these resources is one thing, but being able to decommission a resource group with a click of the button is another.</span></span> <span data-ttu-id="2687d-107">You can streamline this common management task by using Azure Automation.</span><span class="sxs-lookup"><span data-stu-id="2687d-107">You can streamline this common management task by using Azure Automation.</span></span> <span data-ttu-id="2687d-108">This is helpful if you are working with an Azure subscription that has a spending limit through a member offer like MSDN or the Microsoft Partner Network Cloud Essentials program.</span><span class="sxs-lookup"><span data-stu-id="2687d-108">This is helpful if you are working with an Azure subscription that has a spending limit through a member offer like MSDN or the Microsoft Partner Network Cloud Essentials program.</span></span>

<span data-ttu-id="2687d-109">This scenario is based on a PowerShell runbook and is designed to remove one or more resource groups that you specify from your subscription.</span><span class="sxs-lookup"><span data-stu-id="2687d-109">This scenario is based on a PowerShell runbook and is designed to remove one or more resource groups that you specify from your subscription.</span></span> <span data-ttu-id="2687d-110">The default setting of the runbook is to test before proceeding.</span><span class="sxs-lookup"><span data-stu-id="2687d-110">The default setting of the runbook is to test before proceeding.</span></span> <span data-ttu-id="2687d-111">This ensures that you don't accidentally delete the resource group before you're ready to complete this procedure.</span><span class="sxs-lookup"><span data-stu-id="2687d-111">This ensures that you don't accidentally delete the resource group before you're ready to complete this procedure.</span></span>   

## <a name="getting-the-scenario"></a><span data-ttu-id="2687d-112">Getting the scenario</span><span class="sxs-lookup"><span data-stu-id="2687d-112">Getting the scenario</span></span>
<span data-ttu-id="2687d-113">This scenario consists of a PowerShell runbook that you can download from the [PowerShell Gallery](https://www.powershellgallery.com/packages/Remove-ResourceGroup/1.0/DisplayScript).</span><span class="sxs-lookup"><span data-stu-id="2687d-113">This scenario consists of a PowerShell runbook that you can download from the [PowerShell Gallery](https://www.powershellgallery.com/packages/Remove-ResourceGroup/1.0/DisplayScript).</span></span> <span data-ttu-id="2687d-114">You can also import it directly from the [Runbook Gallery](automation-runbook-gallery.md) in the Azure portal.</span><span class="sxs-lookup"><span data-stu-id="2687d-114">You can also import it directly from the [Runbook Gallery](automation-runbook-gallery.md) in the Azure portal.</span></span><br><br>

| <span data-ttu-id="2687d-115">Runbook</span><span class="sxs-lookup"><span data-stu-id="2687d-115">Runbook</span></span> | <span data-ttu-id="2687d-116">Description</span><span class="sxs-lookup"><span data-stu-id="2687d-116">Description</span></span> |
| --- | --- |
| <span data-ttu-id="2687d-117">Remove-ResourceGroup</span><span class="sxs-lookup"><span data-stu-id="2687d-117">Remove-ResourceGroup</span></span> |<span data-ttu-id="2687d-118">Removes one or more Azure resource groups and associated resources from the subscription.</span><span class="sxs-lookup"><span data-stu-id="2687d-118">Removes one or more Azure resource groups and associated resources from the subscription.</span></span> |

<br>
<span data-ttu-id="2687d-119">The following input parameters are defined for this runbook:</span><span class="sxs-lookup"><span data-stu-id="2687d-119">The following input parameters are defined for this runbook:</span></span>

| <span data-ttu-id="2687d-120">Parameter</span><span class="sxs-lookup"><span data-stu-id="2687d-120">Parameter</span></span> | <span data-ttu-id="2687d-121">Description</span><span class="sxs-lookup"><span data-stu-id="2687d-121">Description</span></span> |
| --- | --- |
| <span data-ttu-id="2687d-122">NameFilter (Required)</span><span class="sxs-lookup"><span data-stu-id="2687d-122">NameFilter (Required)</span></span> |<span data-ttu-id="2687d-123">Specifies a name filter to limit the resource groups that you intend on deleting.</span><span class="sxs-lookup"><span data-stu-id="2687d-123">Specifies a name filter to limit the resource groups that you intend on deleting.</span></span> <span data-ttu-id="2687d-124">You can pass multiple values using a comma-separated list.</span><span class="sxs-lookup"><span data-stu-id="2687d-124">You can pass multiple values using a comma-separated list.</span></span><br><span data-ttu-id="2687d-125">The filter is not case-sensitive and matches any resource group that contains the string.</span><span class="sxs-lookup"><span data-stu-id="2687d-125">The filter is not case-sensitive and matches any resource group that contains the string.</span></span> |
| <span data-ttu-id="2687d-126">PreviewMode (Optional)</span><span class="sxs-lookup"><span data-stu-id="2687d-126">PreviewMode (Optional)</span></span> |<span data-ttu-id="2687d-127">Executes the runbook to see which resource groups would be deleted, but takes no action.</span><span class="sxs-lookup"><span data-stu-id="2687d-127">Executes the runbook to see which resource groups would be deleted, but takes no action.</span></span><br><span data-ttu-id="2687d-128">The default is **true** to help avoid accidental deletion of one or more resource groups passed to the runbook.</span><span class="sxs-lookup"><span data-stu-id="2687d-128">The default is **true** to help avoid accidental deletion of one or more resource groups passed to the runbook.</span></span> |

## <a name="install-and-configure-this-scenario"></a><span data-ttu-id="2687d-129">Install and configure this scenario</span><span class="sxs-lookup"><span data-stu-id="2687d-129">Install and configure this scenario</span></span>
### <a name="prerequisites"></a><span data-ttu-id="2687d-130">Prerequisites</span><span class="sxs-lookup"><span data-stu-id="2687d-130">Prerequisites</span></span>
<span data-ttu-id="2687d-131">This runbook authenticates using the [Azure Run As account](automation-sec-configure-azure-runas-account.md).</span><span class="sxs-lookup"><span data-stu-id="2687d-131">This runbook authenticates using the [Azure Run As account](automation-sec-configure-azure-runas-account.md).</span></span>    

### <a name="install-and-publish-the-runbooks"></a><span data-ttu-id="2687d-132">Install and publish the runbooks</span><span class="sxs-lookup"><span data-stu-id="2687d-132">Install and publish the runbooks</span></span>
<span data-ttu-id="2687d-133">After you download the runbook, you can import it by using the procedure in [Importing runbook procedures](automation-creating-importing-runbook.md#importing-a-runbook-from-a-file-into-azure-automation).</span><span class="sxs-lookup"><span data-stu-id="2687d-133">After you download the runbook, you can import it by using the procedure in [Importing runbook procedures](automation-creating-importing-runbook.md#importing-a-runbook-from-a-file-into-azure-automation).</span></span> <span data-ttu-id="2687d-134">Publish the runbook after it has been successfully imported into your Automation account.</span><span class="sxs-lookup"><span data-stu-id="2687d-134">Publish the runbook after it has been successfully imported into your Automation account.</span></span>

## <a name="using-the-runbook"></a><span data-ttu-id="2687d-135">Using the runbook</span><span class="sxs-lookup"><span data-stu-id="2687d-135">Using the runbook</span></span>
<span data-ttu-id="2687d-136">The following steps walk you through the execution of this runbook and help you become familiar with how it works.</span><span class="sxs-lookup"><span data-stu-id="2687d-136">The following steps walk you through the execution of this runbook and help you become familiar with how it works.</span></span> <span data-ttu-id="2687d-137">You are testing the runbook in this example, not actually deleting the resource group.</span><span class="sxs-lookup"><span data-stu-id="2687d-137">You are testing the runbook in this example, not actually deleting the resource group.</span></span>  

1. <span data-ttu-id="2687d-138">From the Azure portal, open your Automation account and click **Runbooks**.</span><span class="sxs-lookup"><span data-stu-id="2687d-138">From the Azure portal, open your Automation account and click **Runbooks**.</span></span>
2. <span data-ttu-id="2687d-139">Select the **Remove-ResourceGroup** runbook and click **Start**.</span><span class="sxs-lookup"><span data-stu-id="2687d-139">Select the **Remove-ResourceGroup** runbook and click **Start**.</span></span>
3. <span data-ttu-id="2687d-140">When you start the runbook, the **Start Runbook** page opens and you can configure the parameters.</span><span class="sxs-lookup"><span data-stu-id="2687d-140">When you start the runbook, the **Start Runbook** page opens and you can configure the parameters.</span></span> <span data-ttu-id="2687d-141">Enter the names of resource groups in your subscription that you can use for testing and causes no harm if accidentally deleted.</span><span class="sxs-lookup"><span data-stu-id="2687d-141">Enter the names of resource groups in your subscription that you can use for testing and causes no harm if accidentally deleted.</span></span>

   > [!NOTE]
   > <span data-ttu-id="2687d-142">Make sure **Previewmode** is set to **true** to avoid deleting the selected resource groups.</span><span class="sxs-lookup"><span data-stu-id="2687d-142">Make sure **Previewmode** is set to **true** to avoid deleting the selected resource groups.</span></span> <span data-ttu-id="2687d-143">This runbook does not remove the resource group that contains the Automation account that is running this runbook.</span><span class="sxs-lookup"><span data-stu-id="2687d-143">This runbook does not remove the resource group that contains the Automation account that is running this runbook.</span></span>  
   >
   >
1. <span data-ttu-id="2687d-144">After you have configured all the parameter values, click **OK**, and the runbook will be queued for execution.</span><span class="sxs-lookup"><span data-stu-id="2687d-144">After you have configured all the parameter values, click **OK**, and the runbook will be queued for execution.</span></span>  

<span data-ttu-id="2687d-145">To view the details of the **Remove-ResourceGroup** runbook job in the Azure portal, under **Resource**, select **Jobs** in the runbook.</span><span class="sxs-lookup"><span data-stu-id="2687d-145">To view the details of the **Remove-ResourceGroup** runbook job in the Azure portal, under **Resource**, select **Jobs** in the runbook.</span></span> <span data-ttu-id="2687d-146">Select, the job you want to view.</span><span class="sxs-lookup"><span data-stu-id="2687d-146">Select, the job you want to view.</span></span> <span data-ttu-id="2687d-147">The job summary displays the input parameters and the output stream in addition to general information about the job and any exceptions that occurred.</span><span class="sxs-lookup"><span data-stu-id="2687d-147">The job summary displays the input parameters and the output stream in addition to general information about the job and any exceptions that occurred.</span></span><br> <span data-ttu-id="2687d-148">![Remove-ResourceGroup runbook job status](media/automation-scenario-remove-resourcegroup/remove-resourcegroup-runbook-job-status.png).</span><span class="sxs-lookup"><span data-stu-id="2687d-148">![Remove-ResourceGroup runbook job status](media/automation-scenario-remove-resourcegroup/remove-resourcegroup-runbook-job-status.png).</span></span>

<span data-ttu-id="2687d-149">The **Job Summary** includes messages from the output, warning, and error streams.</span><span class="sxs-lookup"><span data-stu-id="2687d-149">The **Job Summary** includes messages from the output, warning, and error streams.</span></span> <span data-ttu-id="2687d-150">Select **Output** to view detailed results from the runbook execution.</span><span class="sxs-lookup"><span data-stu-id="2687d-150">Select **Output** to view detailed results from the runbook execution.</span></span><br> <span data-ttu-id="2687d-151">![Remove-ResourceGroup runbook output results](media/automation-scenario-remove-resourcegroup/remove-resourcegroup-runbook-job-output.png)</span><span class="sxs-lookup"><span data-stu-id="2687d-151">![Remove-ResourceGroup runbook output results](media/automation-scenario-remove-resourcegroup/remove-resourcegroup-runbook-job-output.png)</span></span>

## <a name="next-steps"></a><span data-ttu-id="2687d-152">Next steps</span><span class="sxs-lookup"><span data-stu-id="2687d-152">Next steps</span></span>
* <span data-ttu-id="2687d-153">To get started creating your own runbook, see [Creating or importing a runbook in Azure Automation](automation-creating-importing-runbook.md).</span><span class="sxs-lookup"><span data-stu-id="2687d-153">To get started creating your own runbook, see [Creating or importing a runbook in Azure Automation](automation-creating-importing-runbook.md).</span></span>
* <span data-ttu-id="2687d-154">To get started with PowerShell Workflow runbooks, see [My first PowerShell Workflow runbook](automation-first-runbook-textual.md).</span><span class="sxs-lookup"><span data-stu-id="2687d-154">To get started with PowerShell Workflow runbooks, see [My first PowerShell Workflow runbook](automation-first-runbook-textual.md).</span></span>
