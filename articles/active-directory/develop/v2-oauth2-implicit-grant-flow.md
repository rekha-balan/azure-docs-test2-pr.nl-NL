---
title: Secure single page applications using the Azure AD v2.0 implicit flow | Microsoft Docs
description: Building web applications using Azure AD's v2.0 implementation of the implicit flow for single page apps.
services: active-directory
documentationcenter: ''
author: CelesteDG
manager: mtillman
editor: ''
ms.assetid: 3605931f-dc24-4910-bb50-5375defec6a8
ms.service: active-directory
ms.component: develop
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 04/22/2018
ms.author: celested
ms.reviewer: hirsin
ms.custom: aaddev
ms.openlocfilehash: 7954a4eebaf25e2a22e5a39721098ac8db1ed8dd
ms.sourcegitcommit: d1451406a010fd3aa854dc8e5b77dc5537d8050e
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 09/13/2018
ms.locfileid: "44855801"
---
# <a name="v20-protocols---spas-using-the-implicit-flow"></a><span data-ttu-id="b5411-103">v2.0 Protocols - SPAs using the implicit flow</span><span class="sxs-lookup"><span data-stu-id="b5411-103">v2.0 Protocols - SPAs using the implicit flow</span></span>
<span data-ttu-id="b5411-104">With the v2.0 endpoint, you can sign users into your single page apps with both personal and work/school accounts from Microsoft.</span><span class="sxs-lookup"><span data-stu-id="b5411-104">With the v2.0 endpoint, you can sign users into your single page apps with both personal and work/school accounts from Microsoft.</span></span> <span data-ttu-id="b5411-105">Single page and other JavaScript apps that run primarily in a browser face a few interesting challenges when it comes to authentication:</span><span class="sxs-lookup"><span data-stu-id="b5411-105">Single page and other JavaScript apps that run primarily in a browser face a few interesting challenges when it comes to authentication:</span></span>

* <span data-ttu-id="b5411-106">The security characteristics of these apps are significantly different from traditional server-based web applications.</span><span class="sxs-lookup"><span data-stu-id="b5411-106">The security characteristics of these apps are significantly different from traditional server-based web applications.</span></span>
* <span data-ttu-id="b5411-107">Many authorization servers & identity providers do not support CORS requests.</span><span class="sxs-lookup"><span data-stu-id="b5411-107">Many authorization servers & identity providers do not support CORS requests.</span></span>
* <span data-ttu-id="b5411-108">Full page browser redirects away from the app become particularly invasive to the user experience.</span><span class="sxs-lookup"><span data-stu-id="b5411-108">Full page browser redirects away from the app become particularly invasive to the user experience.</span></span>

<span data-ttu-id="b5411-109">For these applications (think: AngularJS, Ember.js, React.js, etc) Azure AD supports the OAuth 2.0 Implicit Grant flow.</span><span class="sxs-lookup"><span data-stu-id="b5411-109">For these applications (think: AngularJS, Ember.js, React.js, etc) Azure AD supports the OAuth 2.0 Implicit Grant flow.</span></span> <span data-ttu-id="b5411-110">The implicit flow is described in the [OAuth 2.0 Specification](http://tools.ietf.org/html/rfc6749#section-4.2).</span><span class="sxs-lookup"><span data-stu-id="b5411-110">The implicit flow is described in the [OAuth 2.0 Specification](http://tools.ietf.org/html/rfc6749#section-4.2).</span></span> <span data-ttu-id="b5411-111">Its primary benefit is that it allows the app to get tokens from Azure AD without performing a backend server credential exchange.</span><span class="sxs-lookup"><span data-stu-id="b5411-111">Its primary benefit is that it allows the app to get tokens from Azure AD without performing a backend server credential exchange.</span></span> <span data-ttu-id="b5411-112">This allows the app to sign in the user, maintain session, and get tokens to other web APIs all within the client JavaScript code.</span><span class="sxs-lookup"><span data-stu-id="b5411-112">This allows the app to sign in the user, maintain session, and get tokens to other web APIs all within the client JavaScript code.</span></span> <span data-ttu-id="b5411-113">There are a few important security considerations to take into account when using the implicit flow - specifically around [client](http://tools.ietf.org/html/rfc6749#section-10.3) and [user impersonation](http://tools.ietf.org/html/rfc6749#section-10.3).</span><span class="sxs-lookup"><span data-stu-id="b5411-113">There are a few important security considerations to take into account when using the implicit flow - specifically around [client](http://tools.ietf.org/html/rfc6749#section-10.3) and [user impersonation](http://tools.ietf.org/html/rfc6749#section-10.3).</span></span>

<span data-ttu-id="b5411-114">If you want to use the implicit flow and Azure AD to add authentication to your JavaScript app, we recommend you use our open source JavaScript library, [adal.js](https://github.com/AzureAD/azure-activedirectory-library-for-js).</span><span class="sxs-lookup"><span data-stu-id="b5411-114">If you want to use the implicit flow and Azure AD to add authentication to your JavaScript app, we recommend you use our open source JavaScript library, [adal.js](https://github.com/AzureAD/azure-activedirectory-library-for-js).</span></span> <span data-ttu-id="b5411-115">There are few AngularJS tutorials available [here](active-directory-appmodel-v2-overview.md#getting-started) to help you get started.</span><span class="sxs-lookup"><span data-stu-id="b5411-115">There are few AngularJS tutorials available [here](active-directory-appmodel-v2-overview.md#getting-started) to help you get started.</span></span> 

<span data-ttu-id="b5411-116">However, if you would prefer not to use a library in your single page app and send protocol messages yourself, follow the general steps below.</span><span class="sxs-lookup"><span data-stu-id="b5411-116">However, if you would prefer not to use a library in your single page app and send protocol messages yourself, follow the general steps below.</span></span>

> [!NOTE]
> <span data-ttu-id="b5411-117">Not all Azure Active Directory scenarios & features are supported by the v2.0 endpoint.</span><span class="sxs-lookup"><span data-stu-id="b5411-117">Not all Azure Active Directory scenarios & features are supported by the v2.0 endpoint.</span></span> <span data-ttu-id="b5411-118">To determine if you should use the v2.0 endpoint, read about [v2.0 limitations](active-directory-v2-limitations.md).</span><span class="sxs-lookup"><span data-stu-id="b5411-118">To determine if you should use the v2.0 endpoint, read about [v2.0 limitations](active-directory-v2-limitations.md).</span></span>
> 
> 

## <a name="protocol-diagram"></a><span data-ttu-id="b5411-119">Protocol diagram</span><span class="sxs-lookup"><span data-stu-id="b5411-119">Protocol diagram</span></span>
<span data-ttu-id="b5411-120">The entire implicit sign-in flow looks something like this - each of the steps are described in detail below.</span><span class="sxs-lookup"><span data-stu-id="b5411-120">The entire implicit sign-in flow looks something like this - each of the steps are described in detail below.</span></span>

![OpenId Connect Swimlanes](./media/v2-oauth2-implicit-grant-flow/convergence_scenarios_implicit.png)

## <a name="send-the-sign-in-request"></a><span data-ttu-id="b5411-122">Send the sign-in request</span><span class="sxs-lookup"><span data-stu-id="b5411-122">Send the sign-in request</span></span>
<span data-ttu-id="b5411-123">To initially sign the user into your app, you can send an [OpenID Connect](v2-protocols-oidc.md) authorization request and get an `id_token` from the v2.0 endpoint:</span><span class="sxs-lookup"><span data-stu-id="b5411-123">To initially sign the user into your app, you can send an [OpenID Connect](v2-protocols-oidc.md) authorization request and get an `id_token` from the v2.0 endpoint:</span></span>

> [!IMPORTANT]
> <span data-ttu-id="b5411-124">In order to succesfully request an ID token, the app registration in the [registration portal](https://apps.dev.microsoft.com) must have the **[Implicit grant](v2-oauth2-implicit-grant-flow.md)** enabled for the Web client.</span><span class="sxs-lookup"><span data-stu-id="b5411-124">In order to succesfully request an ID token, the app registration in the [registration portal](https://apps.dev.microsoft.com) must have the **[Implicit grant](v2-oauth2-implicit-grant-flow.md)** enabled for the Web client.</span></span> <span data-ttu-id="b5411-125">If it is not enabled, an `unsupported_response` error will be returned: "The provided value for the input parameter 'response_type' is not allowed for this client.</span><span class="sxs-lookup"><span data-stu-id="b5411-125">If it is not enabled, an `unsupported_response` error will be returned: "The provided value for the input parameter 'response_type' is not allowed for this client.</span></span> <span data-ttu-id="b5411-126">Expected value is 'code'"</span><span class="sxs-lookup"><span data-stu-id="b5411-126">Expected value is 'code'"</span></span>

```
// Line breaks for legibility only

https://login.microsoftonline.com/{tenant}/oauth2/v2.0/authorize?
client_id=6731de76-14a6-49ae-97bc-6eba6914391e
&response_type=id_token+token
&redirect_uri=http%3A%2F%2Flocalhost%2Fmyapp%2F
&scope=openid%20https%3A%2F%2Fgraph.microsoft.com%2Fmail.read
&response_mode=fragment
&state=12345
&nonce=678910
```

> [!TIP]
> <span data-ttu-id="b5411-127">Click the link below to execute this request!</span><span class="sxs-lookup"><span data-stu-id="b5411-127">Click the link below to execute this request!</span></span> <span data-ttu-id="b5411-128">After signing in, your browser should be redirected to `https://localhost/myapp/` with a `id_token` in the address bar.</span><span class="sxs-lookup"><span data-stu-id="b5411-128">After signing in, your browser should be redirected to `https://localhost/myapp/` with a `id_token` in the address bar.</span></span>
> <span data-ttu-id="b5411-129"><a href="https://login.microsoftonline.com/common/oauth2/v2.0/authorize?client_id=6731de76-14a6-49ae-97bc-6eba6914391e&response_type=id_token+token&redirect_uri=http%3A%2F%2Flocalhost%2Fmyapp%2F&scope=openid%20https%3A%2F%2Fgraph.microsoft.com%2Fmail.read&response_mode=fragment&state=12345&nonce=678910" target="_blank">https://login.microsoftonline.com/common/oauth2/v2.0/authorize...</a></span><span class="sxs-lookup"><span data-stu-id="b5411-129"><a href="https://login.microsoftonline.com/common/oauth2/v2.0/authorize?client_id=6731de76-14a6-49ae-97bc-6eba6914391e&response_type=id_token+token&redirect_uri=http%3A%2F%2Flocalhost%2Fmyapp%2F&scope=openid%20https%3A%2F%2Fgraph.microsoft.com%2Fmail.read&response_mode=fragment&state=12345&nonce=678910" target="_blank">https://login.microsoftonline.com/common/oauth2/v2.0/authorize...</a></span></span>
> 
> 

| <span data-ttu-id="b5411-130">Parameter</span><span class="sxs-lookup"><span data-stu-id="b5411-130">Parameter</span></span> |  | <span data-ttu-id="b5411-131">Description</span><span class="sxs-lookup"><span data-stu-id="b5411-131">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="b5411-132">tenant</span><span class="sxs-lookup"><span data-stu-id="b5411-132">tenant</span></span> |<span data-ttu-id="b5411-133">required</span><span class="sxs-lookup"><span data-stu-id="b5411-133">required</span></span> |<span data-ttu-id="b5411-134">The `{tenant}` value in the path of the request can be used to control who can sign into the application.</span><span class="sxs-lookup"><span data-stu-id="b5411-134">The `{tenant}` value in the path of the request can be used to control who can sign into the application.</span></span> <span data-ttu-id="b5411-135">The allowed values are `common`, `organizations`, `consumers`, and tenant identifiers.</span><span class="sxs-lookup"><span data-stu-id="b5411-135">The allowed values are `common`, `organizations`, `consumers`, and tenant identifiers.</span></span> <span data-ttu-id="b5411-136">For more detail, see [protocol basics](active-directory-v2-protocols.md#endpoints).</span><span class="sxs-lookup"><span data-stu-id="b5411-136">For more detail, see [protocol basics](active-directory-v2-protocols.md#endpoints).</span></span> |
| <span data-ttu-id="b5411-137">client_id</span><span class="sxs-lookup"><span data-stu-id="b5411-137">client_id</span></span> |<span data-ttu-id="b5411-138">required</span><span class="sxs-lookup"><span data-stu-id="b5411-138">required</span></span> |<span data-ttu-id="b5411-139">The Application Id that the registration portal ([apps.dev.microsoft.com](https://apps.dev.microsoft.com/?referrer=https://azure.microsoft.com/documentation/articles&deeplink=/appList)) assigned your app.</span><span class="sxs-lookup"><span data-stu-id="b5411-139">The Application Id that the registration portal ([apps.dev.microsoft.com](https://apps.dev.microsoft.com/?referrer=https://azure.microsoft.com/documentation/articles&deeplink=/appList)) assigned your app.</span></span> |
| <span data-ttu-id="b5411-140">response_type</span><span class="sxs-lookup"><span data-stu-id="b5411-140">response_type</span></span> |<span data-ttu-id="b5411-141">required</span><span class="sxs-lookup"><span data-stu-id="b5411-141">required</span></span> |<span data-ttu-id="b5411-142">Must include `id_token` for OpenID Connect sign-in.</span><span class="sxs-lookup"><span data-stu-id="b5411-142">Must include `id_token` for OpenID Connect sign-in.</span></span> <span data-ttu-id="b5411-143">It may also include the response_type `token`.</span><span class="sxs-lookup"><span data-stu-id="b5411-143">It may also include the response_type `token`.</span></span> <span data-ttu-id="b5411-144">Using `token` here will allow your app to receive an access token immediately from the authorize endpoint without having to make a second request to the authorize endpoint.</span><span class="sxs-lookup"><span data-stu-id="b5411-144">Using `token` here will allow your app to receive an access token immediately from the authorize endpoint without having to make a second request to the authorize endpoint.</span></span> <span data-ttu-id="b5411-145">If you use the `token` response_type, the `scope` parameter must contain a scope indicating which resource to issue the token for.</span><span class="sxs-lookup"><span data-stu-id="b5411-145">If you use the `token` response_type, the `scope` parameter must contain a scope indicating which resource to issue the token for.</span></span> |
| <span data-ttu-id="b5411-146">redirect_uri</span><span class="sxs-lookup"><span data-stu-id="b5411-146">redirect_uri</span></span> |<span data-ttu-id="b5411-147">recommended</span><span class="sxs-lookup"><span data-stu-id="b5411-147">recommended</span></span> |<span data-ttu-id="b5411-148">The redirect_uri of your app, where authentication responses can be sent and received by your app.</span><span class="sxs-lookup"><span data-stu-id="b5411-148">The redirect_uri of your app, where authentication responses can be sent and received by your app.</span></span> <span data-ttu-id="b5411-149">It must exactly match one of the redirect_uris you registered in the portal, except it must be url encoded.</span><span class="sxs-lookup"><span data-stu-id="b5411-149">It must exactly match one of the redirect_uris you registered in the portal, except it must be url encoded.</span></span> |
| <span data-ttu-id="b5411-150">scope</span><span class="sxs-lookup"><span data-stu-id="b5411-150">scope</span></span> |<span data-ttu-id="b5411-151">required</span><span class="sxs-lookup"><span data-stu-id="b5411-151">required</span></span> |<span data-ttu-id="b5411-152">A space-separated list of scopes.</span><span class="sxs-lookup"><span data-stu-id="b5411-152">A space-separated list of scopes.</span></span> <span data-ttu-id="b5411-153">For OpenID Connect, it must include the scope `openid`, which translates to the "Sign you in" permission in the consent UI.</span><span class="sxs-lookup"><span data-stu-id="b5411-153">For OpenID Connect, it must include the scope `openid`, which translates to the "Sign you in" permission in the consent UI.</span></span> <span data-ttu-id="b5411-154">Optionally you may also want to include the `email` or `profile` [scopes](v2-permissions-and-consent.md) for gaining access to additional user data.</span><span class="sxs-lookup"><span data-stu-id="b5411-154">Optionally you may also want to include the `email` or `profile` [scopes](v2-permissions-and-consent.md) for gaining access to additional user data.</span></span> <span data-ttu-id="b5411-155">You may also include other scopes in this request for requesting consent to various resources.</span><span class="sxs-lookup"><span data-stu-id="b5411-155">You may also include other scopes in this request for requesting consent to various resources.</span></span> |
| <span data-ttu-id="b5411-156">response_mode</span><span class="sxs-lookup"><span data-stu-id="b5411-156">response_mode</span></span> |<span data-ttu-id="b5411-157">recommended</span><span class="sxs-lookup"><span data-stu-id="b5411-157">recommended</span></span> |<span data-ttu-id="b5411-158">Specifies the method that should be used to send the resulting token back to your app.</span><span class="sxs-lookup"><span data-stu-id="b5411-158">Specifies the method that should be used to send the resulting token back to your app.</span></span> <span data-ttu-id="b5411-159">Should be `fragment` for the implicit flow.</span><span class="sxs-lookup"><span data-stu-id="b5411-159">Should be `fragment` for the implicit flow.</span></span> |
| <span data-ttu-id="b5411-160">state</span><span class="sxs-lookup"><span data-stu-id="b5411-160">state</span></span> |<span data-ttu-id="b5411-161">recommended</span><span class="sxs-lookup"><span data-stu-id="b5411-161">recommended</span></span> |<span data-ttu-id="b5411-162">A value included in the request that will also be returned in the token response.</span><span class="sxs-lookup"><span data-stu-id="b5411-162">A value included in the request that will also be returned in the token response.</span></span> <span data-ttu-id="b5411-163">It can be a string of any content that you wish.</span><span class="sxs-lookup"><span data-stu-id="b5411-163">It can be a string of any content that you wish.</span></span> <span data-ttu-id="b5411-164">A randomly generated unique value is typically used for [preventing cross-site request forgery attacks](http://tools.ietf.org/html/rfc6749#section-10.12).</span><span class="sxs-lookup"><span data-stu-id="b5411-164">A randomly generated unique value is typically used for [preventing cross-site request forgery attacks](http://tools.ietf.org/html/rfc6749#section-10.12).</span></span> <span data-ttu-id="b5411-165">The state is also used to encode information about the user's state in the app before the authentication request occurred, such as the page or view they were on.</span><span class="sxs-lookup"><span data-stu-id="b5411-165">The state is also used to encode information about the user's state in the app before the authentication request occurred, such as the page or view they were on.</span></span> |
| <span data-ttu-id="b5411-166">nonce</span><span class="sxs-lookup"><span data-stu-id="b5411-166">nonce</span></span> |<span data-ttu-id="b5411-167">required</span><span class="sxs-lookup"><span data-stu-id="b5411-167">required</span></span> |<span data-ttu-id="b5411-168">A value included in the request, generated by the app, that will be included in the resulting id_token as a claim.</span><span class="sxs-lookup"><span data-stu-id="b5411-168">A value included in the request, generated by the app, that will be included in the resulting id_token as a claim.</span></span> <span data-ttu-id="b5411-169">The app can then verify this value to mitigate token replay attacks.</span><span class="sxs-lookup"><span data-stu-id="b5411-169">The app can then verify this value to mitigate token replay attacks.</span></span> <span data-ttu-id="b5411-170">The value is typically a randomized, unique string that can be used to identify the origin of the request.</span><span class="sxs-lookup"><span data-stu-id="b5411-170">The value is typically a randomized, unique string that can be used to identify the origin of the request.</span></span> |
| <span data-ttu-id="b5411-171">prompt</span><span class="sxs-lookup"><span data-stu-id="b5411-171">prompt</span></span> |<span data-ttu-id="b5411-172">optional</span><span class="sxs-lookup"><span data-stu-id="b5411-172">optional</span></span> |<span data-ttu-id="b5411-173">Indicates the type of user interaction that is required.</span><span class="sxs-lookup"><span data-stu-id="b5411-173">Indicates the type of user interaction that is required.</span></span> <span data-ttu-id="b5411-174">The only valid values at this time are 'login', 'none', and 'consent'.</span><span class="sxs-lookup"><span data-stu-id="b5411-174">The only valid values at this time are 'login', 'none', and 'consent'.</span></span> <span data-ttu-id="b5411-175">`prompt=login` will force the user to enter their credentials on that request, negating single-sign on.</span><span class="sxs-lookup"><span data-stu-id="b5411-175">`prompt=login` will force the user to enter their credentials on that request, negating single-sign on.</span></span> <span data-ttu-id="b5411-176">`prompt=none` is the opposite - it will ensure that the user is not presented with any interactive prompt whatsoever.</span><span class="sxs-lookup"><span data-stu-id="b5411-176">`prompt=none` is the opposite - it will ensure that the user is not presented with any interactive prompt whatsoever.</span></span> <span data-ttu-id="b5411-177">If the request cannot be completed silently via single-sign on, the v2.0 endpoint will return an error.</span><span class="sxs-lookup"><span data-stu-id="b5411-177">If the request cannot be completed silently via single-sign on, the v2.0 endpoint will return an error.</span></span> <span data-ttu-id="b5411-178">`prompt=consent` will trigger the OAuth consent dialog after the user signs in, asking the user to grant permissions to the app.</span><span class="sxs-lookup"><span data-stu-id="b5411-178">`prompt=consent` will trigger the OAuth consent dialog after the user signs in, asking the user to grant permissions to the app.</span></span> |
| <span data-ttu-id="b5411-179">login_hint</span><span class="sxs-lookup"><span data-stu-id="b5411-179">login_hint</span></span> |<span data-ttu-id="b5411-180">optional</span><span class="sxs-lookup"><span data-stu-id="b5411-180">optional</span></span> |<span data-ttu-id="b5411-181">Can be used to pre-fill the username/email address field of the sign in page for the user, if you know their username ahead of time.</span><span class="sxs-lookup"><span data-stu-id="b5411-181">Can be used to pre-fill the username/email address field of the sign in page for the user, if you know their username ahead of time.</span></span> <span data-ttu-id="b5411-182">Often apps will use this parameter during re-authentication, having already extracted the username from a previous sign-in using the `preferred_username` claim.</span><span class="sxs-lookup"><span data-stu-id="b5411-182">Often apps will use this parameter during re-authentication, having already extracted the username from a previous sign-in using the `preferred_username` claim.</span></span> |
| <span data-ttu-id="b5411-183">domain_hint</span><span class="sxs-lookup"><span data-stu-id="b5411-183">domain_hint</span></span> |<span data-ttu-id="b5411-184">optional</span><span class="sxs-lookup"><span data-stu-id="b5411-184">optional</span></span> |<span data-ttu-id="b5411-185">Can be one of `consumers` or `organizations`.</span><span class="sxs-lookup"><span data-stu-id="b5411-185">Can be one of `consumers` or `organizations`.</span></span> <span data-ttu-id="b5411-186">If included, it will skip the email-based discovery process that user goes through on the v2.0 sign in page, leading to a slightly more streamlined user experience.</span><span class="sxs-lookup"><span data-stu-id="b5411-186">If included, it will skip the email-based discovery process that user goes through on the v2.0 sign in page, leading to a slightly more streamlined user experience.</span></span> <span data-ttu-id="b5411-187">Often apps will use this parameter during re-authentication, by extracting the `tid` claim from the id_token.</span><span class="sxs-lookup"><span data-stu-id="b5411-187">Often apps will use this parameter during re-authentication, by extracting the `tid` claim from the id_token.</span></span> <span data-ttu-id="b5411-188">If the `tid` claim value is `9188040d-6c67-4c5b-b112-36a304b66dad` (the Microsoft Account consumer tenant), you should use `domain_hint=consumers`.</span><span class="sxs-lookup"><span data-stu-id="b5411-188">If the `tid` claim value is `9188040d-6c67-4c5b-b112-36a304b66dad` (the Microsoft Account consumer tenant), you should use `domain_hint=consumers`.</span></span> <span data-ttu-id="b5411-189">Otherwise, use `domain_hint=organizations`.</span><span class="sxs-lookup"><span data-stu-id="b5411-189">Otherwise, use `domain_hint=organizations`.</span></span> |


<span data-ttu-id="b5411-190">At this point, the user will be asked to enter their credentials and complete the authentication.</span><span class="sxs-lookup"><span data-stu-id="b5411-190">At this point, the user will be asked to enter their credentials and complete the authentication.</span></span> <span data-ttu-id="b5411-191">The v2.0 endpoint will also ensure that the user has consented to the permissions indicated in the `scope` query parameter.</span><span class="sxs-lookup"><span data-stu-id="b5411-191">The v2.0 endpoint will also ensure that the user has consented to the permissions indicated in the `scope` query parameter.</span></span> <span data-ttu-id="b5411-192">If the user has not consented to any of those permissions, it will ask the user to consent to the required permissions.</span><span class="sxs-lookup"><span data-stu-id="b5411-192">If the user has not consented to any of those permissions, it will ask the user to consent to the required permissions.</span></span> <span data-ttu-id="b5411-193">Details of [permissions, consent, and multi-tenant apps are provided here](v2-permissions-and-consent.md).</span><span class="sxs-lookup"><span data-stu-id="b5411-193">Details of [permissions, consent, and multi-tenant apps are provided here](v2-permissions-and-consent.md).</span></span>

<span data-ttu-id="b5411-194">Once the user authenticates and grants consent, the v2.0 endpoint will return a response to your app at the indicated `redirect_uri`, using the method specified in the `response_mode` parameter.</span><span class="sxs-lookup"><span data-stu-id="b5411-194">Once the user authenticates and grants consent, the v2.0 endpoint will return a response to your app at the indicated `redirect_uri`, using the method specified in the `response_mode` parameter.</span></span>

#### <a name="successful-response"></a><span data-ttu-id="b5411-195">Successful response</span><span class="sxs-lookup"><span data-stu-id="b5411-195">Successful response</span></span>
<span data-ttu-id="b5411-196">A successful response using `response_mode=fragment` and `response_type=id_token+token` looks like the following, with line breaks for legibility:</span><span class="sxs-lookup"><span data-stu-id="b5411-196">A successful response using `response_mode=fragment` and `response_type=id_token+token` looks like the following, with line breaks for legibility:</span></span>

```
GET https://localhost/myapp/#
access_token=eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...
&token_type=Bearer
&expires_in=3599
&scope=https%3a%2f%2fgraph.microsoft.com%2fmail.read 
&id_token=eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...
&state=12345
```

| <span data-ttu-id="b5411-197">Parameter</span><span class="sxs-lookup"><span data-stu-id="b5411-197">Parameter</span></span> | <span data-ttu-id="b5411-198">Description</span><span class="sxs-lookup"><span data-stu-id="b5411-198">Description</span></span> |
| --- | --- |
| <span data-ttu-id="b5411-199">access_token</span><span class="sxs-lookup"><span data-stu-id="b5411-199">access_token</span></span> |<span data-ttu-id="b5411-200">Included if `response_type` includes `token`.</span><span class="sxs-lookup"><span data-stu-id="b5411-200">Included if `response_type` includes `token`.</span></span> <span data-ttu-id="b5411-201">The access token that the app requested, in this case for the Microsoft Graph.</span><span class="sxs-lookup"><span data-stu-id="b5411-201">The access token that the app requested, in this case for the Microsoft Graph.</span></span> <span data-ttu-id="b5411-202">The access token should not be decoded or otherwise inspected, it can be treated as an opaque string.</span><span class="sxs-lookup"><span data-stu-id="b5411-202">The access token should not be decoded or otherwise inspected, it can be treated as an opaque string.</span></span> |
| <span data-ttu-id="b5411-203">token_type</span><span class="sxs-lookup"><span data-stu-id="b5411-203">token_type</span></span> |<span data-ttu-id="b5411-204">Included if `response_type` includes `token`.</span><span class="sxs-lookup"><span data-stu-id="b5411-204">Included if `response_type` includes `token`.</span></span> <span data-ttu-id="b5411-205">Will always be `Bearer`.</span><span class="sxs-lookup"><span data-stu-id="b5411-205">Will always be `Bearer`.</span></span> |
| <span data-ttu-id="b5411-206">expires_in</span><span class="sxs-lookup"><span data-stu-id="b5411-206">expires_in</span></span> |<span data-ttu-id="b5411-207">Included if `response_type` includes `token`.</span><span class="sxs-lookup"><span data-stu-id="b5411-207">Included if `response_type` includes `token`.</span></span> <span data-ttu-id="b5411-208">Indicates the number of seconds the token is valid, for caching purposes.</span><span class="sxs-lookup"><span data-stu-id="b5411-208">Indicates the number of seconds the token is valid, for caching purposes.</span></span> |
| <span data-ttu-id="b5411-209">scope</span><span class="sxs-lookup"><span data-stu-id="b5411-209">scope</span></span> |<span data-ttu-id="b5411-210">Included if `response_type` includes `token`.</span><span class="sxs-lookup"><span data-stu-id="b5411-210">Included if `response_type` includes `token`.</span></span> <span data-ttu-id="b5411-211">Indicates the scope(s) for which the access_token will be valid.</span><span class="sxs-lookup"><span data-stu-id="b5411-211">Indicates the scope(s) for which the access_token will be valid.</span></span> |
| <span data-ttu-id="b5411-212">id_token</span><span class="sxs-lookup"><span data-stu-id="b5411-212">id_token</span></span> |<span data-ttu-id="b5411-213">The id_token that the app requested.</span><span class="sxs-lookup"><span data-stu-id="b5411-213">The id_token that the app requested.</span></span> <span data-ttu-id="b5411-214">You can use the id_token to verify the user's identity and begin a session with the user.</span><span class="sxs-lookup"><span data-stu-id="b5411-214">You can use the id_token to verify the user's identity and begin a session with the user.</span></span> <span data-ttu-id="b5411-215">More details on id_tokens and their contents is included in the [v2.0 endpoint token reference](v2-id-and-access-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="b5411-215">More details on id_tokens and their contents is included in the [v2.0 endpoint token reference](v2-id-and-access-tokens.md).</span></span> |
| <span data-ttu-id="b5411-216">state</span><span class="sxs-lookup"><span data-stu-id="b5411-216">state</span></span> |<span data-ttu-id="b5411-217">If a state parameter is included in the request, the same value should appear in the response.</span><span class="sxs-lookup"><span data-stu-id="b5411-217">If a state parameter is included in the request, the same value should appear in the response.</span></span> <span data-ttu-id="b5411-218">The app should verify that the state values in the request and response are identical.</span><span class="sxs-lookup"><span data-stu-id="b5411-218">The app should verify that the state values in the request and response are identical.</span></span> |

#### <a name="error-response"></a><span data-ttu-id="b5411-219">Error response</span><span class="sxs-lookup"><span data-stu-id="b5411-219">Error response</span></span>
<span data-ttu-id="b5411-220">Error responses may also be sent to the `redirect_uri` so the app can handle them appropriately:</span><span class="sxs-lookup"><span data-stu-id="b5411-220">Error responses may also be sent to the `redirect_uri` so the app can handle them appropriately:</span></span>

```
GET https://localhost/myapp/#
error=access_denied
&error_description=the+user+canceled+the+authentication
```

| <span data-ttu-id="b5411-221">Parameter</span><span class="sxs-lookup"><span data-stu-id="b5411-221">Parameter</span></span> | <span data-ttu-id="b5411-222">Description</span><span class="sxs-lookup"><span data-stu-id="b5411-222">Description</span></span> |
| --- | --- |
| <span data-ttu-id="b5411-223">error</span><span class="sxs-lookup"><span data-stu-id="b5411-223">error</span></span> |<span data-ttu-id="b5411-224">An error code string that can be used to classify types of errors that occur, and can be used to react to errors.</span><span class="sxs-lookup"><span data-stu-id="b5411-224">An error code string that can be used to classify types of errors that occur, and can be used to react to errors.</span></span> |
| <span data-ttu-id="b5411-225">error_description</span><span class="sxs-lookup"><span data-stu-id="b5411-225">error_description</span></span> |<span data-ttu-id="b5411-226">A specific error message that can help a developer identify the root cause of an authentication error.</span><span class="sxs-lookup"><span data-stu-id="b5411-226">A specific error message that can help a developer identify the root cause of an authentication error.</span></span> |

## <a name="validate-the-idtoken"></a><span data-ttu-id="b5411-227">Validate the id_token</span><span class="sxs-lookup"><span data-stu-id="b5411-227">Validate the id_token</span></span>
<span data-ttu-id="b5411-228">Just receiving an id_token is not sufficient to authenticate the user; you must validate the id_token's signature and verify the claims in the token per your app's requirements.</span><span class="sxs-lookup"><span data-stu-id="b5411-228">Just receiving an id_token is not sufficient to authenticate the user; you must validate the id_token's signature and verify the claims in the token per your app's requirements.</span></span> <span data-ttu-id="b5411-229">The v2.0 endpoint uses [JSON Web Tokens (JWTs)](http://self-issued.info/docs/draft-ietf-oauth-json-web-token.html) and public key cryptography to sign tokens and verify that they are valid.</span><span class="sxs-lookup"><span data-stu-id="b5411-229">The v2.0 endpoint uses [JSON Web Tokens (JWTs)](http://self-issued.info/docs/draft-ietf-oauth-json-web-token.html) and public key cryptography to sign tokens and verify that they are valid.</span></span>

<span data-ttu-id="b5411-230">You can choose to validate the `id_token` in client code, but a common practice is to send the `id_token` to a backend server and perform the validation there.</span><span class="sxs-lookup"><span data-stu-id="b5411-230">You can choose to validate the `id_token` in client code, but a common practice is to send the `id_token` to a backend server and perform the validation there.</span></span> <span data-ttu-id="b5411-231">Once you've validated the signature of the id_token, there are a few claims you will be required to verify.</span><span class="sxs-lookup"><span data-stu-id="b5411-231">Once you've validated the signature of the id_token, there are a few claims you will be required to verify.</span></span> <span data-ttu-id="b5411-232">See the [v2.0 token reference](v2-id-and-access-tokens.md) for more information, including [Validating Tokens](v2-id-and-access-tokens.md#validating-tokens) and [Important Information About Signing Key Rollover](v2-id-and-access-tokens.md#validating-tokens).</span><span class="sxs-lookup"><span data-stu-id="b5411-232">See the [v2.0 token reference](v2-id-and-access-tokens.md) for more information, including [Validating Tokens](v2-id-and-access-tokens.md#validating-tokens) and [Important Information About Signing Key Rollover](v2-id-and-access-tokens.md#validating-tokens).</span></span> <span data-ttu-id="b5411-233">We recommend making use of a library for parsing and validating tokens - there is at least one available for most languages and platforms.</span><span class="sxs-lookup"><span data-stu-id="b5411-233">We recommend making use of a library for parsing and validating tokens - there is at least one available for most languages and platforms.</span></span>
<!--TODO: Improve the information on this-->

<span data-ttu-id="b5411-234">You may also wish to validate additional claims depending on your scenario.</span><span class="sxs-lookup"><span data-stu-id="b5411-234">You may also wish to validate additional claims depending on your scenario.</span></span> <span data-ttu-id="b5411-235">Some common validations include:</span><span class="sxs-lookup"><span data-stu-id="b5411-235">Some common validations include:</span></span>

* <span data-ttu-id="b5411-236">Ensuring the user/organization has signed up for the app.</span><span class="sxs-lookup"><span data-stu-id="b5411-236">Ensuring the user/organization has signed up for the app.</span></span>
* <span data-ttu-id="b5411-237">Ensuring the user has proper authorization/privileges</span><span class="sxs-lookup"><span data-stu-id="b5411-237">Ensuring the user has proper authorization/privileges</span></span>
* <span data-ttu-id="b5411-238">Ensuring a certain strength of authentication has occurred, such as multi-factor authentication.</span><span class="sxs-lookup"><span data-stu-id="b5411-238">Ensuring a certain strength of authentication has occurred, such as multi-factor authentication.</span></span>

<span data-ttu-id="b5411-239">For more information on the claims in an id_token, see the [v2.0 endpoint token reference](v2-id-and-access-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="b5411-239">For more information on the claims in an id_token, see the [v2.0 endpoint token reference](v2-id-and-access-tokens.md).</span></span>

<span data-ttu-id="b5411-240">Once you have completely validated the id_token, you can begin a session with the user and use the claims in the id_token to obtain information about the user in your app.</span><span class="sxs-lookup"><span data-stu-id="b5411-240">Once you have completely validated the id_token, you can begin a session with the user and use the claims in the id_token to obtain information about the user in your app.</span></span> <span data-ttu-id="b5411-241">This information can be used for display, records, authorizations, etc.</span><span class="sxs-lookup"><span data-stu-id="b5411-241">This information can be used for display, records, authorizations, etc.</span></span>

## <a name="get-access-tokens"></a><span data-ttu-id="b5411-242">Get access tokens</span><span class="sxs-lookup"><span data-stu-id="b5411-242">Get access tokens</span></span>
<span data-ttu-id="b5411-243">Now that you've signed the user into your single page app, you can get access tokens for calling web APIs secured by Azure AD, such as the [Microsoft Graph](https://graph.microsoft.io).</span><span class="sxs-lookup"><span data-stu-id="b5411-243">Now that you've signed the user into your single page app, you can get access tokens for calling web APIs secured by Azure AD, such as the [Microsoft Graph](https://graph.microsoft.io).</span></span> <span data-ttu-id="b5411-244">Even if you already received a token using the `token` response_type, you can use this method to acquire tokens to additional resources without having to redirect the user to sign in again.</span><span class="sxs-lookup"><span data-stu-id="b5411-244">Even if you already received a token using the `token` response_type, you can use this method to acquire tokens to additional resources without having to redirect the user to sign in again.</span></span>

<span data-ttu-id="b5411-245">In the normal OpenID Connect/OAuth flow, you would do this by making a request to the v2.0 `/token` endpoint.</span><span class="sxs-lookup"><span data-stu-id="b5411-245">In the normal OpenID Connect/OAuth flow, you would do this by making a request to the v2.0 `/token` endpoint.</span></span> <span data-ttu-id="b5411-246">However, the v2.0 endpoint does not support CORS requests, so making AJAX calls to get and refresh tokens is out of the question.</span><span class="sxs-lookup"><span data-stu-id="b5411-246">However, the v2.0 endpoint does not support CORS requests, so making AJAX calls to get and refresh tokens is out of the question.</span></span> <span data-ttu-id="b5411-247">Instead, you can use the implicit flow in a hidden iframe to get new tokens for other web APIs:</span><span class="sxs-lookup"><span data-stu-id="b5411-247">Instead, you can use the implicit flow in a hidden iframe to get new tokens for other web APIs:</span></span> 

```
// Line breaks for legibility only

https://login.microsoftonline.com/{tenant}/oauth2/v2.0/authorize?
client_id=6731de76-14a6-49ae-97bc-6eba6914391e
&response_type=token
&redirect_uri=http%3A%2F%2Flocalhost%2Fmyapp%2F
&scope=https%3A%2F%2Fgraph.microsoft.com%2Fmail.read&response_mode=fragment
&state=12345&nonce=678910
&prompt=none
&domain_hint=organizations
&login_hint=myuser@mycompany.com
```

> [!TIP]
> <span data-ttu-id="b5411-248">Try copy & pasting the below request into a browser tab!</span><span class="sxs-lookup"><span data-stu-id="b5411-248">Try copy & pasting the below request into a browser tab!</span></span> <span data-ttu-id="b5411-249">(Don't forget to replace the `domain_hint` and the `login_hint` values with the correct values for your user)</span><span class="sxs-lookup"><span data-stu-id="b5411-249">(Don't forget to replace the `domain_hint` and the `login_hint` values with the correct values for your user)</span></span>
> 
> 

```
https://login.microsoftonline.com/common/oauth2/v2.0/authorize?client_id=6731de76-14a6-49ae-97bc-6eba6914391e&response_type=token&redirect_uri=http%3A%2F%2Flocalhost%2Fmyapp%2F&scope=https%3A%2F%2Fgraph.microsoft.com%2Fmail.read&response_mode=fragment&state=12345&nonce=678910&prompt=none&domain_hint={{consumers-or-organizations}}&login_hint={{your-username}}
```

| <span data-ttu-id="b5411-250">Parameter</span><span class="sxs-lookup"><span data-stu-id="b5411-250">Parameter</span></span> |  | <span data-ttu-id="b5411-251">Description</span><span class="sxs-lookup"><span data-stu-id="b5411-251">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="b5411-252">tenant</span><span class="sxs-lookup"><span data-stu-id="b5411-252">tenant</span></span> |<span data-ttu-id="b5411-253">required</span><span class="sxs-lookup"><span data-stu-id="b5411-253">required</span></span> |<span data-ttu-id="b5411-254">The `{tenant}` value in the path of the request can be used to control who can sign into the application.</span><span class="sxs-lookup"><span data-stu-id="b5411-254">The `{tenant}` value in the path of the request can be used to control who can sign into the application.</span></span> <span data-ttu-id="b5411-255">The allowed values are `common`, `organizations`, `consumers`, and tenant identifiers.</span><span class="sxs-lookup"><span data-stu-id="b5411-255">The allowed values are `common`, `organizations`, `consumers`, and tenant identifiers.</span></span> <span data-ttu-id="b5411-256">For more detail, see [protocol basics](active-directory-v2-protocols.md#endpoints).</span><span class="sxs-lookup"><span data-stu-id="b5411-256">For more detail, see [protocol basics](active-directory-v2-protocols.md#endpoints).</span></span> |
| <span data-ttu-id="b5411-257">client_id</span><span class="sxs-lookup"><span data-stu-id="b5411-257">client_id</span></span> |<span data-ttu-id="b5411-258">required</span><span class="sxs-lookup"><span data-stu-id="b5411-258">required</span></span> |<span data-ttu-id="b5411-259">The Application ID that the registration portal ([apps.dev.microsoft.com](https://apps.dev.microsoft.com/?referrer=https://azure.microsoft.com/documentation/articles&deeplink=/appList)) assigned your app.</span><span class="sxs-lookup"><span data-stu-id="b5411-259">The Application ID that the registration portal ([apps.dev.microsoft.com](https://apps.dev.microsoft.com/?referrer=https://azure.microsoft.com/documentation/articles&deeplink=/appList)) assigned your app.</span></span> |
| <span data-ttu-id="b5411-260">response_type</span><span class="sxs-lookup"><span data-stu-id="b5411-260">response_type</span></span> |<span data-ttu-id="b5411-261">required</span><span class="sxs-lookup"><span data-stu-id="b5411-261">required</span></span> |<span data-ttu-id="b5411-262">Must include `id_token` for OpenID Connect sign-in.</span><span class="sxs-lookup"><span data-stu-id="b5411-262">Must include `id_token` for OpenID Connect sign-in.</span></span> <span data-ttu-id="b5411-263">It may also include other response_types, such as `code`.</span><span class="sxs-lookup"><span data-stu-id="b5411-263">It may also include other response_types, such as `code`.</span></span> |
| <span data-ttu-id="b5411-264">redirect_uri</span><span class="sxs-lookup"><span data-stu-id="b5411-264">redirect_uri</span></span> |<span data-ttu-id="b5411-265">recommended</span><span class="sxs-lookup"><span data-stu-id="b5411-265">recommended</span></span> |<span data-ttu-id="b5411-266">The redirect_uri of your app, where authentication responses can be sent and received by your app.</span><span class="sxs-lookup"><span data-stu-id="b5411-266">The redirect_uri of your app, where authentication responses can be sent and received by your app.</span></span> <span data-ttu-id="b5411-267">It must exactly match one of the redirect_uris you registered in the portal, except it must be url encoded.</span><span class="sxs-lookup"><span data-stu-id="b5411-267">It must exactly match one of the redirect_uris you registered in the portal, except it must be url encoded.</span></span> |
| <span data-ttu-id="b5411-268">scope</span><span class="sxs-lookup"><span data-stu-id="b5411-268">scope</span></span> |<span data-ttu-id="b5411-269">required</span><span class="sxs-lookup"><span data-stu-id="b5411-269">required</span></span> |<span data-ttu-id="b5411-270">A space-separated list of scopes.</span><span class="sxs-lookup"><span data-stu-id="b5411-270">A space-separated list of scopes.</span></span> <span data-ttu-id="b5411-271">For getting tokens, include all [scopes](v2-permissions-and-consent.md) you require for the resource of interest.</span><span class="sxs-lookup"><span data-stu-id="b5411-271">For getting tokens, include all [scopes](v2-permissions-and-consent.md) you require for the resource of interest.</span></span> |
| <span data-ttu-id="b5411-272">response_mode</span><span class="sxs-lookup"><span data-stu-id="b5411-272">response_mode</span></span> |<span data-ttu-id="b5411-273">recommended</span><span class="sxs-lookup"><span data-stu-id="b5411-273">recommended</span></span> |<span data-ttu-id="b5411-274">Specifies the method that should be used to send the resulting token back to your app.</span><span class="sxs-lookup"><span data-stu-id="b5411-274">Specifies the method that should be used to send the resulting token back to your app.</span></span> <span data-ttu-id="b5411-275">Can be one of `query`, `form_post`, or `fragment`.</span><span class="sxs-lookup"><span data-stu-id="b5411-275">Can be one of `query`, `form_post`, or `fragment`.</span></span> |
| <span data-ttu-id="b5411-276">state</span><span class="sxs-lookup"><span data-stu-id="b5411-276">state</span></span> |<span data-ttu-id="b5411-277">recommended</span><span class="sxs-lookup"><span data-stu-id="b5411-277">recommended</span></span> |<span data-ttu-id="b5411-278">A value included in the request that will also be returned in the token response.</span><span class="sxs-lookup"><span data-stu-id="b5411-278">A value included in the request that will also be returned in the token response.</span></span> <span data-ttu-id="b5411-279">It can be a string of any content that you wish.</span><span class="sxs-lookup"><span data-stu-id="b5411-279">It can be a string of any content that you wish.</span></span> <span data-ttu-id="b5411-280">A randomly generated unique value is typically used for preventing cross-site request forgery attacks.</span><span class="sxs-lookup"><span data-stu-id="b5411-280">A randomly generated unique value is typically used for preventing cross-site request forgery attacks.</span></span> <span data-ttu-id="b5411-281">The state is also used to encode information about the user's state in the app before the authentication request occurred, such as the page or view they were on.</span><span class="sxs-lookup"><span data-stu-id="b5411-281">The state is also used to encode information about the user's state in the app before the authentication request occurred, such as the page or view they were on.</span></span> |
| <span data-ttu-id="b5411-282">nonce</span><span class="sxs-lookup"><span data-stu-id="b5411-282">nonce</span></span> |<span data-ttu-id="b5411-283">required</span><span class="sxs-lookup"><span data-stu-id="b5411-283">required</span></span> |<span data-ttu-id="b5411-284">A value included in the request, generated by the app, that will be included in the resulting id_token as a claim.</span><span class="sxs-lookup"><span data-stu-id="b5411-284">A value included in the request, generated by the app, that will be included in the resulting id_token as a claim.</span></span> <span data-ttu-id="b5411-285">The app can then verify this value to mitigate token replay attacks.</span><span class="sxs-lookup"><span data-stu-id="b5411-285">The app can then verify this value to mitigate token replay attacks.</span></span> <span data-ttu-id="b5411-286">The value is typically a randomized, unique string that can be used to identify the origin of the request.</span><span class="sxs-lookup"><span data-stu-id="b5411-286">The value is typically a randomized, unique string that can be used to identify the origin of the request.</span></span> |
| <span data-ttu-id="b5411-287">prompt</span><span class="sxs-lookup"><span data-stu-id="b5411-287">prompt</span></span> |<span data-ttu-id="b5411-288">required</span><span class="sxs-lookup"><span data-stu-id="b5411-288">required</span></span> |<span data-ttu-id="b5411-289">For refreshing & getting tokens in a hidden iframe, you should use `prompt=none` to ensure that the iframe does not hang on the v2.0 sign in page, and returns immediately.</span><span class="sxs-lookup"><span data-stu-id="b5411-289">For refreshing & getting tokens in a hidden iframe, you should use `prompt=none` to ensure that the iframe does not hang on the v2.0 sign in page, and returns immediately.</span></span> |
| <span data-ttu-id="b5411-290">login_hint</span><span class="sxs-lookup"><span data-stu-id="b5411-290">login_hint</span></span> |<span data-ttu-id="b5411-291">required</span><span class="sxs-lookup"><span data-stu-id="b5411-291">required</span></span> |<span data-ttu-id="b5411-292">For refreshing & getting tokens in a hidden iframe, you must include the username of the user in this hint in order to distinguish between multiple sessions the user may have at a given point in time.</span><span class="sxs-lookup"><span data-stu-id="b5411-292">For refreshing & getting tokens in a hidden iframe, you must include the username of the user in this hint in order to distinguish between multiple sessions the user may have at a given point in time.</span></span> <span data-ttu-id="b5411-293">You can extract the username from a previous sign-in using the `preferred_username` claim.</span><span class="sxs-lookup"><span data-stu-id="b5411-293">You can extract the username from a previous sign-in using the `preferred_username` claim.</span></span> |
| <span data-ttu-id="b5411-294">domain_hint</span><span class="sxs-lookup"><span data-stu-id="b5411-294">domain_hint</span></span> |<span data-ttu-id="b5411-295">required</span><span class="sxs-lookup"><span data-stu-id="b5411-295">required</span></span> |<span data-ttu-id="b5411-296">Can be one of `consumers` or `organizations`.</span><span class="sxs-lookup"><span data-stu-id="b5411-296">Can be one of `consumers` or `organizations`.</span></span> <span data-ttu-id="b5411-297">For refreshing & getting tokens in a hidden iframe, you must include the domain_hint in the request.</span><span class="sxs-lookup"><span data-stu-id="b5411-297">For refreshing & getting tokens in a hidden iframe, you must include the domain_hint in the request.</span></span> <span data-ttu-id="b5411-298">You should extract the `tid` claim from the id_token of a previous sign-in to determine which value to use.</span><span class="sxs-lookup"><span data-stu-id="b5411-298">You should extract the `tid` claim from the id_token of a previous sign-in to determine which value to use.</span></span> <span data-ttu-id="b5411-299">If the `tid` claim value is `9188040d-6c67-4c5b-b112-36a304b66dad`, you should use `domain_hint=consumers`.</span><span class="sxs-lookup"><span data-stu-id="b5411-299">If the `tid` claim value is `9188040d-6c67-4c5b-b112-36a304b66dad`, you should use `domain_hint=consumers`.</span></span> <span data-ttu-id="b5411-300">Otherwise, use `domain_hint=organizations`.</span><span class="sxs-lookup"><span data-stu-id="b5411-300">Otherwise, use `domain_hint=organizations`.</span></span> |

<span data-ttu-id="b5411-301">Thanks to the `prompt=none` parameter, this request will either succeed or fail immediately and return to your application.</span><span class="sxs-lookup"><span data-stu-id="b5411-301">Thanks to the `prompt=none` parameter, this request will either succeed or fail immediately and return to your application.</span></span> <span data-ttu-id="b5411-302">A successful response will be sent to your app at the indicated `redirect_uri`, using the method specified in the `response_mode` parameter.</span><span class="sxs-lookup"><span data-stu-id="b5411-302">A successful response will be sent to your app at the indicated `redirect_uri`, using the method specified in the `response_mode` parameter.</span></span>

#### <a name="successful-response"></a><span data-ttu-id="b5411-303">Successful response</span><span class="sxs-lookup"><span data-stu-id="b5411-303">Successful response</span></span>
<span data-ttu-id="b5411-304">A successful response using `response_mode=fragment` looks like:</span><span class="sxs-lookup"><span data-stu-id="b5411-304">A successful response using `response_mode=fragment` looks like:</span></span>

```
GET https://localhost/myapp/#
access_token=eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...
&state=12345
&token_type=Bearer
&expires_in=3599
&scope=https%3A%2F%2Fgraph.windows.net%2Fdirectory.read
```

| <span data-ttu-id="b5411-305">Parameter</span><span class="sxs-lookup"><span data-stu-id="b5411-305">Parameter</span></span> | <span data-ttu-id="b5411-306">Description</span><span class="sxs-lookup"><span data-stu-id="b5411-306">Description</span></span> |
| --- | --- |
| <span data-ttu-id="b5411-307">access_token</span><span class="sxs-lookup"><span data-stu-id="b5411-307">access_token</span></span> |<span data-ttu-id="b5411-308">The token that the app requested.</span><span class="sxs-lookup"><span data-stu-id="b5411-308">The token that the app requested.</span></span> |
| <span data-ttu-id="b5411-309">token_type</span><span class="sxs-lookup"><span data-stu-id="b5411-309">token_type</span></span> |<span data-ttu-id="b5411-310">Will always be `Bearer`.</span><span class="sxs-lookup"><span data-stu-id="b5411-310">Will always be `Bearer`.</span></span> |
| <span data-ttu-id="b5411-311">state</span><span class="sxs-lookup"><span data-stu-id="b5411-311">state</span></span> |<span data-ttu-id="b5411-312">If a state parameter is included in the request, the same value should appear in the response.</span><span class="sxs-lookup"><span data-stu-id="b5411-312">If a state parameter is included in the request, the same value should appear in the response.</span></span> <span data-ttu-id="b5411-313">The  app should verify that the state values in the request and response are identical.</span><span class="sxs-lookup"><span data-stu-id="b5411-313">The  app should verify that the state values in the request and response are identical.</span></span> |
| <span data-ttu-id="b5411-314">expires_in</span><span class="sxs-lookup"><span data-stu-id="b5411-314">expires_in</span></span> |<span data-ttu-id="b5411-315">How long the access token is valid (in seconds).</span><span class="sxs-lookup"><span data-stu-id="b5411-315">How long the access token is valid (in seconds).</span></span> |
| <span data-ttu-id="b5411-316">scope</span><span class="sxs-lookup"><span data-stu-id="b5411-316">scope</span></span> |<span data-ttu-id="b5411-317">The scopes that the access token is valid for.</span><span class="sxs-lookup"><span data-stu-id="b5411-317">The scopes that the access token is valid for.</span></span> |

#### <a name="error-response"></a><span data-ttu-id="b5411-318">Error response</span><span class="sxs-lookup"><span data-stu-id="b5411-318">Error response</span></span>
<span data-ttu-id="b5411-319">Error responses may also be sent to the `redirect_uri` so the app can handle them appropriately.</span><span class="sxs-lookup"><span data-stu-id="b5411-319">Error responses may also be sent to the `redirect_uri` so the app can handle them appropriately.</span></span> <span data-ttu-id="b5411-320">In the case of `prompt=none`, an expected error will be:</span><span class="sxs-lookup"><span data-stu-id="b5411-320">In the case of `prompt=none`, an expected error will be:</span></span>

```
GET https://localhost/myapp/#
error=user_authentication_required
&error_description=the+request+could+not+be+completed+silently
```

| <span data-ttu-id="b5411-321">Parameter</span><span class="sxs-lookup"><span data-stu-id="b5411-321">Parameter</span></span> | <span data-ttu-id="b5411-322">Description</span><span class="sxs-lookup"><span data-stu-id="b5411-322">Description</span></span> |
| --- | --- |
| <span data-ttu-id="b5411-323">error</span><span class="sxs-lookup"><span data-stu-id="b5411-323">error</span></span> |<span data-ttu-id="b5411-324">An error code string that can be used to classify types of errors that occur, and can be used to react to errors.</span><span class="sxs-lookup"><span data-stu-id="b5411-324">An error code string that can be used to classify types of errors that occur, and can be used to react to errors.</span></span> |
| <span data-ttu-id="b5411-325">error_description</span><span class="sxs-lookup"><span data-stu-id="b5411-325">error_description</span></span> |<span data-ttu-id="b5411-326">A specific error message that can help a developer identify the root cause of an authentication error.</span><span class="sxs-lookup"><span data-stu-id="b5411-326">A specific error message that can help a developer identify the root cause of an authentication error.</span></span> |

<span data-ttu-id="b5411-327">If you receive this error in the iframe request, the user must interactively sign in again to retrieve a new token.</span><span class="sxs-lookup"><span data-stu-id="b5411-327">If you receive this error in the iframe request, the user must interactively sign in again to retrieve a new token.</span></span> <span data-ttu-id="b5411-328">You can choose to handle this case in whatever way makes sense for your application.</span><span class="sxs-lookup"><span data-stu-id="b5411-328">You can choose to handle this case in whatever way makes sense for your application.</span></span>

## <a name="validating-access-tokens"></a><span data-ttu-id="b5411-329">Validating access tokens</span><span class="sxs-lookup"><span data-stu-id="b5411-329">Validating access tokens</span></span>

<span data-ttu-id="b5411-330">Once you receive an access_token, make sure to validate the signature of the token as well as the following claims.</span><span class="sxs-lookup"><span data-stu-id="b5411-330">Once you receive an access_token, make sure to validate the signature of the token as well as the following claims.</span></span> <span data-ttu-id="b5411-331">You may also choose to validate additional claims based on your scenario.</span><span class="sxs-lookup"><span data-stu-id="b5411-331">You may also choose to validate additional claims based on your scenario.</span></span> 

* <span data-ttu-id="b5411-332">**audience** claim, to ensure that the token was intended to be given to your app</span><span class="sxs-lookup"><span data-stu-id="b5411-332">**audience** claim, to ensure that the token was intended to be given to your app</span></span>
* <span data-ttu-id="b5411-333">**issuer** claim, to verify that the token was issued to your app by the v2.0 endpoint</span><span class="sxs-lookup"><span data-stu-id="b5411-333">**issuer** claim, to verify that the token was issued to your app by the v2.0 endpoint</span></span>
* <span data-ttu-id="b5411-334">**not before** and **expiration time** claims, to verify that the token has not expired</span><span class="sxs-lookup"><span data-stu-id="b5411-334">**not before** and **expiration time** claims, to verify that the token has not expired</span></span>

<span data-ttu-id="b5411-335">For more information about the claims present in the access token, see the [v2.0 endpoint token reference](v2-id-and-access-tokens.md)</span><span class="sxs-lookup"><span data-stu-id="b5411-335">For more information about the claims present in the access token, see the [v2.0 endpoint token reference](v2-id-and-access-tokens.md)</span></span>

## <a name="refreshing-tokens"></a><span data-ttu-id="b5411-336">Refreshing tokens</span><span class="sxs-lookup"><span data-stu-id="b5411-336">Refreshing tokens</span></span>
<span data-ttu-id="b5411-337">The implicit grant does not provide refresh tokens.</span><span class="sxs-lookup"><span data-stu-id="b5411-337">The implicit grant does not provide refresh tokens.</span></span> <span data-ttu-id="b5411-338">Both `id_token`s and `access_token`s will expire after a short period of time, so your app must be prepared to refresh these tokens periodically.</span><span class="sxs-lookup"><span data-stu-id="b5411-338">Both `id_token`s and `access_token`s will expire after a short period of time, so your app must be prepared to refresh these tokens periodically.</span></span> <span data-ttu-id="b5411-339">To refresh either type of token, you can perform the same hidden iframe request from above using the `prompt=none` parameter to control Azure AD's behavior.</span><span class="sxs-lookup"><span data-stu-id="b5411-339">To refresh either type of token, you can perform the same hidden iframe request from above using the `prompt=none` parameter to control Azure AD's behavior.</span></span> <span data-ttu-id="b5411-340">If you want to receive a new `id_token`, be sure to use `response_type=id_token` and `scope=openid`, as well as a `nonce` parameter.</span><span class="sxs-lookup"><span data-stu-id="b5411-340">If you want to receive a new `id_token`, be sure to use `response_type=id_token` and `scope=openid`, as well as a `nonce` parameter.</span></span>

## <a name="send-a-sign-out-request"></a><span data-ttu-id="b5411-341">Send a sign out request</span><span class="sxs-lookup"><span data-stu-id="b5411-341">Send a sign out request</span></span>
<span data-ttu-id="b5411-342">The OpenIdConnect `end_session_endpoint` allows your app to send a request to the v2.0 endpoint to end a user's session and clear cookies set by the v2.0 endpoint.</span><span class="sxs-lookup"><span data-stu-id="b5411-342">The OpenIdConnect `end_session_endpoint` allows your app to send a request to the v2.0 endpoint to end a user's session and clear cookies set by the v2.0 endpoint.</span></span> <span data-ttu-id="b5411-343">To fully sign a user out of a web application, your app should end its own session with the user (usually by clearing a token cache or dropping cookies), and then redirect the browser to:</span><span class="sxs-lookup"><span data-stu-id="b5411-343">To fully sign a user out of a web application, your app should end its own session with the user (usually by clearing a token cache or dropping cookies), and then redirect the browser to:</span></span>

```
https://login.microsoftonline.com/{tenant}/oauth2/v2.0/logout?post_logout_redirect_uri=https://localhost/myapp/
```

| <span data-ttu-id="b5411-344">Parameter</span><span class="sxs-lookup"><span data-stu-id="b5411-344">Parameter</span></span> |  | <span data-ttu-id="b5411-345">Description</span><span class="sxs-lookup"><span data-stu-id="b5411-345">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="b5411-346">tenant</span><span class="sxs-lookup"><span data-stu-id="b5411-346">tenant</span></span> |<span data-ttu-id="b5411-347">required</span><span class="sxs-lookup"><span data-stu-id="b5411-347">required</span></span> |<span data-ttu-id="b5411-348">The `{tenant}` value in the path of the request can be used to control who can sign into the application.</span><span class="sxs-lookup"><span data-stu-id="b5411-348">The `{tenant}` value in the path of the request can be used to control who can sign into the application.</span></span> <span data-ttu-id="b5411-349">The allowed values are `common`, `organizations`, `consumers`, and tenant identifiers.</span><span class="sxs-lookup"><span data-stu-id="b5411-349">The allowed values are `common`, `organizations`, `consumers`, and tenant identifiers.</span></span> <span data-ttu-id="b5411-350">For more detail, see [protocol basics](active-directory-v2-protocols.md#endpoints).</span><span class="sxs-lookup"><span data-stu-id="b5411-350">For more detail, see [protocol basics](active-directory-v2-protocols.md#endpoints).</span></span> |
| <span data-ttu-id="b5411-351">post_logout_redirect_uri</span><span class="sxs-lookup"><span data-stu-id="b5411-351">post_logout_redirect_uri</span></span> | <span data-ttu-id="b5411-352">recommended</span><span class="sxs-lookup"><span data-stu-id="b5411-352">recommended</span></span> | <span data-ttu-id="b5411-353">The URL that the user should be returned to after logout completes.</span><span class="sxs-lookup"><span data-stu-id="b5411-353">The URL that the user should be returned to after logout completes.</span></span> <span data-ttu-id="b5411-354">This value must match one of the redirect URIs registered for the application.</span><span class="sxs-lookup"><span data-stu-id="b5411-354">This value must match one of the redirect URIs registered for the application.</span></span> <span data-ttu-id="b5411-355">If not included, the user will be shown a generic message by the v2.0 endpoint.</span><span class="sxs-lookup"><span data-stu-id="b5411-355">If not included, the user will be shown a generic message by the v2.0 endpoint.</span></span> |
