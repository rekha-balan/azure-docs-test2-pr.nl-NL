---
title: Authenticate with Azure AD and get a JWT Token using OAuth 2.0
description: Example code showing how to authenticate with Azure Active Directory using OAuth 2.0 to access secured web applications and web APIs in your organization.
services: active-directory
author: rloutlaw
manager: angerobe
editor: ''
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 06/12/2018
ms.author: routlaw
ms.custom: aaddev
ms.openlocfilehash: eb26101229ad60abae7a8a84f8dfa496488e84ba
ms.sourcegitcommit: d1451406a010fd3aa854dc8e5b77dc5537d8050e
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 09/13/2018
ms.locfileid: "44868006"
---
# <a name="request-an-access-token-using-oauth-20-to-access-web-apis-and-applications-secured-by-azure-active-directory"></a><span data-ttu-id="f5a59-103">Request an access token using OAuth 2.0 to access web APIs and applications secured by Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="f5a59-103">Request an access token using OAuth 2.0 to access web APIs and applications secured by Azure Active Directory</span></span>

<span data-ttu-id="f5a59-104">This article shows how to get a JSON Web Token (JWT) to access resources secured by Azure AD.</span><span class="sxs-lookup"><span data-stu-id="f5a59-104">This article shows how to get a JSON Web Token (JWT) to access resources secured by Azure AD.</span></span> <span data-ttu-id="f5a59-105">It assumes that you have an [authorization token](/azure/active-directory/develop/active-directory-protocols-oauth-code#request-an-authorization-code) either from user-granted permission or through a [service principal](/azure/active-directory/develop/active-directory-application-objects).</span><span class="sxs-lookup"><span data-stu-id="f5a59-105">It assumes that you have an [authorization token](/azure/active-directory/develop/active-directory-protocols-oauth-code#request-an-authorization-code) either from user-granted permission or through a [service principal](/azure/active-directory/develop/active-directory-application-objects).</span></span>

## <a name="build-the-request"></a><span data-ttu-id="f5a59-106">Build the request</span><span class="sxs-lookup"><span data-stu-id="f5a59-106">Build the request</span></span>

<span data-ttu-id="f5a59-107">Use the following `POST` HTTP request to get a JWT to access a specific application or API secured by Azure AD.</span><span class="sxs-lookup"><span data-stu-id="f5a59-107">Use the following `POST` HTTP request to get a JWT to access a specific application or API secured by Azure AD.</span></span>

```http
POST https://{tenant}/oauth2/v2.0/token?client_id={client-id}
&scope={scope}
&code=OAAABAAAAiL9Kn2Z27UubvWFPbm0gLWQJVzCTE9UkP3pSx1aXxUjq3n8b2JRLk4OxVXr...
&redirect_uri=http%3A%2F%2Flocalhost%2Fmyapp%2F
&grant_type=authorization_code
&client_secret=JqQX2PNo9bpM0uEihUPzyrh   
```

### <a name="request-headers"></a><span data-ttu-id="f5a59-108">Request headers</span><span class="sxs-lookup"><span data-stu-id="f5a59-108">Request headers</span></span>

<span data-ttu-id="f5a59-109">The following headers are required:</span><span class="sxs-lookup"><span data-stu-id="f5a59-109">The following headers are required:</span></span>

|<span data-ttu-id="f5a59-110">Request header</span><span class="sxs-lookup"><span data-stu-id="f5a59-110">Request header</span></span>|<span data-ttu-id="f5a59-111">Description</span><span class="sxs-lookup"><span data-stu-id="f5a59-111">Description</span></span>|  
|--------------------|-----------------|  
| <span data-ttu-id="f5a59-112">*Host:*</span><span class="sxs-lookup"><span data-stu-id="f5a59-112">*Host:*</span></span> | https://login.microsoftonline.com |
| <span data-ttu-id="f5a59-113">*Content-Type:*</span><span class="sxs-lookup"><span data-stu-id="f5a59-113">*Content-Type:*</span></span>| <span data-ttu-id="f5a59-114">application/x-www-form-urlencoded</span><span class="sxs-lookup"><span data-stu-id="f5a59-114">application/x-www-form-urlencoded</span></span> |
 

### <a name="uri-parameters"></a><span data-ttu-id="f5a59-115">URI parameters</span><span class="sxs-lookup"><span data-stu-id="f5a59-115">URI parameters</span></span>

| <span data-ttu-id="f5a59-116">Parameter</span><span class="sxs-lookup"><span data-stu-id="f5a59-116">Parameter</span></span>     |                       | <span data-ttu-id="f5a59-117">Description</span><span class="sxs-lookup"><span data-stu-id="f5a59-117">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                |
|---------------|-----------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="f5a59-118">tenant</span><span class="sxs-lookup"><span data-stu-id="f5a59-118">tenant</span></span>        | <span data-ttu-id="f5a59-119">required</span><span class="sxs-lookup"><span data-stu-id="f5a59-119">required</span></span>              | <span data-ttu-id="f5a59-120">The `{tenant}` value in the path of the request can be used to control who can sign into the application.</span><span class="sxs-lookup"><span data-stu-id="f5a59-120">The `{tenant}` value in the path of the request can be used to control who can sign into the application.</span></span> <span data-ttu-id="f5a59-121">The allowed values are `common`, `organizations`, `consumers`, and tenant identifiers.</span><span class="sxs-lookup"><span data-stu-id="f5a59-121">The allowed values are `common`, `organizations`, `consumers`, and tenant identifiers.</span></span> <span data-ttu-id="f5a59-122">For more detail, see [protocol basics](active-directory-v2-protocols.md#endpoints).</span><span class="sxs-lookup"><span data-stu-id="f5a59-122">For more detail, see [protocol basics](active-directory-v2-protocols.md#endpoints).</span></span>                                                                                                                                                   |
| <span data-ttu-id="f5a59-123">client_id</span><span class="sxs-lookup"><span data-stu-id="f5a59-123">client_id</span></span>     | <span data-ttu-id="f5a59-124">required</span><span class="sxs-lookup"><span data-stu-id="f5a59-124">required</span></span>              | <span data-ttu-id="f5a59-125">The Application ID that the registration portal ([apps.dev.microsoft.com](https://apps.dev.microsoft.com/?referrer=https://azure.microsoft.com/documentation/articles&deeplink=/appList)) assigned your app.</span><span class="sxs-lookup"><span data-stu-id="f5a59-125">The Application ID that the registration portal ([apps.dev.microsoft.com](https://apps.dev.microsoft.com/?referrer=https://azure.microsoft.com/documentation/articles&deeplink=/appList)) assigned your app.</span></span>                                                                                                                                                                                                                             |
| <span data-ttu-id="f5a59-126">grant_type</span><span class="sxs-lookup"><span data-stu-id="f5a59-126">grant_type</span></span>    | <span data-ttu-id="f5a59-127">required</span><span class="sxs-lookup"><span data-stu-id="f5a59-127">required</span></span>              | <span data-ttu-id="f5a59-128">Must be `authorization_code` for the authorization code flow.</span><span class="sxs-lookup"><span data-stu-id="f5a59-128">Must be `authorization_code` for the authorization code flow.</span></span>                                                                                                                                                                                                                                                                                                                                                                            |
| <span data-ttu-id="f5a59-129">scope</span><span class="sxs-lookup"><span data-stu-id="f5a59-129">scope</span></span>         | <span data-ttu-id="f5a59-130">required</span><span class="sxs-lookup"><span data-stu-id="f5a59-130">required</span></span>              | <span data-ttu-id="f5a59-131">A space-separated list of scopes.</span><span class="sxs-lookup"><span data-stu-id="f5a59-131">A space-separated list of scopes.</span></span> <span data-ttu-id="f5a59-132">The scopes requested in this leg must be equivalent to or a subset of the scopes in the call to `/authorize`.</span><span class="sxs-lookup"><span data-stu-id="f5a59-132">The scopes requested in this leg must be equivalent to or a subset of the scopes in the call to `/authorize`.</span></span> <span data-ttu-id="f5a59-133">If the scopes specified in this request span multiple resource server, then the v2.0 endpoint will return a token for the resource specified in the first scope.</span><span class="sxs-lookup"><span data-stu-id="f5a59-133">If the scopes specified in this request span multiple resource server, then the v2.0 endpoint will return a token for the resource specified in the first scope.</span></span> <span data-ttu-id="f5a59-134">For a more detailed explanation of scopes, refer to [permissions, consent, and scopes](v2-permissions-and-consent.md).</span><span class="sxs-lookup"><span data-stu-id="f5a59-134">For a more detailed explanation of scopes, refer to [permissions, consent, and scopes](v2-permissions-and-consent.md).</span></span> |
| <span data-ttu-id="f5a59-135">code</span><span class="sxs-lookup"><span data-stu-id="f5a59-135">code</span></span>          | <span data-ttu-id="f5a59-136">required</span><span class="sxs-lookup"><span data-stu-id="f5a59-136">required</span></span>              | <span data-ttu-id="f5a59-137">The authorization_code that you acquired in the call to `/authorize`</span><span class="sxs-lookup"><span data-stu-id="f5a59-137">The authorization_code that you acquired in the call to `/authorize`</span></span>                                                                                                                                                                                                                                                                                                                                                                |
| <span data-ttu-id="f5a59-138">redirect_uri</span><span class="sxs-lookup"><span data-stu-id="f5a59-138">redirect_uri</span></span>  | <span data-ttu-id="f5a59-139">required</span><span class="sxs-lookup"><span data-stu-id="f5a59-139">required</span></span>              | <span data-ttu-id="f5a59-140">The same redirect_uri value that was used to acquire the authorization_code.</span><span class="sxs-lookup"><span data-stu-id="f5a59-140">The same redirect_uri value that was used to acquire the authorization_code.</span></span>                                                                                                                                                                                                                                                                                                                                                             |
| <span data-ttu-id="f5a59-141">client_secret</span><span class="sxs-lookup"><span data-stu-id="f5a59-141">client_secret</span></span> | <span data-ttu-id="f5a59-142">required for web apps</span><span class="sxs-lookup"><span data-stu-id="f5a59-142">required for web apps</span></span> | <span data-ttu-id="f5a59-143">The application secret that you created in the app registration portal for your app.</span><span class="sxs-lookup"><span data-stu-id="f5a59-143">The application secret that you created in the app registration portal for your app.</span></span> <span data-ttu-id="f5a59-144">Do not use in a native app, because client_secrets cannot be reliably stored on devices.</span><span class="sxs-lookup"><span data-stu-id="f5a59-144">Do not use in a native app, because client_secrets cannot be reliably stored on devices.</span></span> <span data-ttu-id="f5a59-145">It is required for web apps and web APIs, which have the ability to store the client_secret securely on the server side.</span><span class="sxs-lookup"><span data-stu-id="f5a59-145">It is required for web apps and web APIs, which have the ability to store the client_secret securely on the server side.</span></span>  <span data-ttu-id="f5a59-146">Client secrets must be URL-encoded before being sent.</span><span class="sxs-lookup"><span data-stu-id="f5a59-146">Client secrets must be URL-encoded before being sent.</span></span>                                                                                 |
| <span data-ttu-id="f5a59-147">code_verifier</span><span class="sxs-lookup"><span data-stu-id="f5a59-147">code_verifier</span></span> | <span data-ttu-id="f5a59-148">optional</span><span class="sxs-lookup"><span data-stu-id="f5a59-148">optional</span></span>              | <span data-ttu-id="f5a59-149">The same code_verifier that was used to obtain the authorization_code.</span><span class="sxs-lookup"><span data-stu-id="f5a59-149">The same code_verifier that was used to obtain the authorization_code.</span></span> <span data-ttu-id="f5a59-150">Required if PKCE was used in the authorization code grant request.</span><span class="sxs-lookup"><span data-stu-id="f5a59-150">Required if PKCE was used in the authorization code grant request.</span></span> <span data-ttu-id="f5a59-151">For more information, see the [PKCE RFC](https://tools.ietf.org/html/rfc7636)</span><span class="sxs-lookup"><span data-stu-id="f5a59-151">For more information, see the [PKCE RFC](https://tools.ietf.org/html/rfc7636)</span></span>                                                                                                                                                                                                                                                                                             |
## <a name="handle-the-response"></a><span data-ttu-id="f5a59-152">Handle the response</span><span class="sxs-lookup"><span data-stu-id="f5a59-152">Handle the response</span></span>

<span data-ttu-id="f5a59-153">A successful token response will contain a JWT token and will look like:</span><span class="sxs-lookup"><span data-stu-id="f5a59-153">A successful token response will contain a JWT token and will look like:</span></span>

```json
{
    "access_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...",
    "token_type": "Bearer",
    "expires_in": 3599,
    "scope": "https%3A%2F%2Fgraph.microsoft.com%2Fmail.read",
    "refresh_token": "AwABAAAAvPM1KaPlrEqdFSBzjqfTGAMxZGUTdM0t4B4...",
    "id_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJub25lIn0.eyJhdWQiOiIyZDRkMTFhMi1mODE0LTQ2YTctOD...",
}
```
| <span data-ttu-id="f5a59-154">Parameter</span><span class="sxs-lookup"><span data-stu-id="f5a59-154">Parameter</span></span>     | <span data-ttu-id="f5a59-155">Description</span><span class="sxs-lookup"><span data-stu-id="f5a59-155">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                              |
|---------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="f5a59-156">access_token</span><span class="sxs-lookup"><span data-stu-id="f5a59-156">access_token</span></span>  | <span data-ttu-id="f5a59-157">The requested access token.</span><span class="sxs-lookup"><span data-stu-id="f5a59-157">The requested access token.</span></span> <span data-ttu-id="f5a59-158">The  app can use this token to authenticate to the secured resource, such as a web API.</span><span class="sxs-lookup"><span data-stu-id="f5a59-158">The  app can use this token to authenticate to the secured resource, such as a web API.</span></span>                                                                                                                                                                                                                                                                                                                                    |
| <span data-ttu-id="f5a59-159">token_type</span><span class="sxs-lookup"><span data-stu-id="f5a59-159">token_type</span></span>    | <span data-ttu-id="f5a59-160">Indicates the token type value.</span><span class="sxs-lookup"><span data-stu-id="f5a59-160">Indicates the token type value.</span></span> <span data-ttu-id="f5a59-161">The only type that Azure AD supports is Bearer</span><span class="sxs-lookup"><span data-stu-id="f5a59-161">The only type that Azure AD supports is Bearer</span></span>                                                                                                                                                                                                                                                                                                                                                                           |
| <span data-ttu-id="f5a59-162">expires_in</span><span class="sxs-lookup"><span data-stu-id="f5a59-162">expires_in</span></span>    | <span data-ttu-id="f5a59-163">How long the access token is valid (in seconds).</span><span class="sxs-lookup"><span data-stu-id="f5a59-163">How long the access token is valid (in seconds).</span></span>                                                                                                                                                                                                                                                                                                                                                                                                       |
| <span data-ttu-id="f5a59-164">scope</span><span class="sxs-lookup"><span data-stu-id="f5a59-164">scope</span></span>         | <span data-ttu-id="f5a59-165">The scopes that the access_token is valid for.</span><span class="sxs-lookup"><span data-stu-id="f5a59-165">The scopes that the access_token is valid for.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                         |
| <span data-ttu-id="f5a59-166">refresh_token</span><span class="sxs-lookup"><span data-stu-id="f5a59-166">refresh_token</span></span> | <span data-ttu-id="f5a59-167">An OAuth 2.0 refresh token.</span><span class="sxs-lookup"><span data-stu-id="f5a59-167">An OAuth 2.0 refresh token.</span></span> <span data-ttu-id="f5a59-168">The  app can use this token acquire additional access tokens after the current access token expires.</span><span class="sxs-lookup"><span data-stu-id="f5a59-168">The  app can use this token acquire additional access tokens after the current access token expires.</span></span> <span data-ttu-id="f5a59-169">Refresh_tokens are long-lived, and can be used to retain access to resources for extended periods of time.</span><span class="sxs-lookup"><span data-stu-id="f5a59-169">Refresh_tokens are long-lived, and can be used to retain access to resources for extended periods of time.</span></span> <span data-ttu-id="f5a59-170">For more detail, refer to the [v2.0 token reference](v2-id-and-access-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="f5a59-170">For more detail, refer to the [v2.0 token reference](v2-id-and-access-tokens.md).</span></span> <br> <span data-ttu-id="f5a59-171">**Note:** Only provided if `offline_access` scope was requested.</span><span class="sxs-lookup"><span data-stu-id="f5a59-171">**Note:** Only provided if `offline_access` scope was requested.</span></span>                                               |
| <span data-ttu-id="f5a59-172">id_token</span><span class="sxs-lookup"><span data-stu-id="f5a59-172">id_token</span></span>      | <span data-ttu-id="f5a59-173">An unsigned JSON Web Token (JWT).</span><span class="sxs-lookup"><span data-stu-id="f5a59-173">An unsigned JSON Web Token (JWT).</span></span> <span data-ttu-id="f5a59-174">The  app can decode the segments of this token to request information about the user who signed in.</span><span class="sxs-lookup"><span data-stu-id="f5a59-174">The  app can decode the segments of this token to request information about the user who signed in.</span></span> <span data-ttu-id="f5a59-175">The  app can cache the values and display them, but it should not rely on them for any authorization or security boundaries.</span><span class="sxs-lookup"><span data-stu-id="f5a59-175">The  app can cache the values and display them, but it should not rely on them for any authorization or security boundaries.</span></span> <span data-ttu-id="f5a59-176">For more information about id_tokens, see the [v2.0 endpoint token reference](v2-id-and-access-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="f5a59-176">For more information about id_tokens, see the [v2.0 endpoint token reference](v2-id-and-access-tokens.md).</span></span> <br> <span data-ttu-id="f5a59-177">**Note:** Only provided if `openid` scope was requested.</span><span class="sxs-lookup"><span data-stu-id="f5a59-177">**Note:** Only provided if `openid` scope was requested.</span></span> |



