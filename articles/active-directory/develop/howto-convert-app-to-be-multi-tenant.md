---
title: How to build an app that can sign in any Azure AD user
description: Shows how to build a multi-tenant application which can sign in a user from any Azure Active Directory tenant.
services: active-directory
documentationcenter: ''
author: CelesteDG
manager: mtillman
editor: ''
ms.assetid: 35af95cb-ced3-46ad-b01d-5d2f6fd064a3
ms.service: active-directory
ms.component: develop
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: identity
ms.date: 04/27/2018
ms.author: celested
ms.reviewer: elisol
ms.custom: aaddev
ms.openlocfilehash: d2ed90b0bb1d2ef7b830c9394628872e1a775f9e
ms.sourcegitcommit: d1451406a010fd3aa854dc8e5b77dc5537d8050e
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 09/13/2018
ms.locfileid: "44856701"
---
# <a name="how-to-sign-in-any-azure-active-directory-user-using-the-multi-tenant-application-pattern"></a><span data-ttu-id="2943d-103">How to sign in any Azure Active Directory user using the multi-tenant application pattern</span><span class="sxs-lookup"><span data-stu-id="2943d-103">How to sign in any Azure Active Directory user using the multi-tenant application pattern</span></span>
<span data-ttu-id="2943d-104">If you offer a Software as a Service application to many organizations, you can configure your application to accept sign-ins from any Azure Active Directory (AD) tenant.</span><span class="sxs-lookup"><span data-stu-id="2943d-104">If you offer a Software as a Service application to many organizations, you can configure your application to accept sign-ins from any Azure Active Directory (AD) tenant.</span></span> <span data-ttu-id="2943d-105">This configuration is called making your application multi-tenant.</span><span class="sxs-lookup"><span data-stu-id="2943d-105">This configuration is called making your application multi-tenant.</span></span> <span data-ttu-id="2943d-106">Users in any Azure AD tenant will be able to sign in to your application after consenting to use their account with your application.</span><span class="sxs-lookup"><span data-stu-id="2943d-106">Users in any Azure AD tenant will be able to sign in to your application after consenting to use their account with your application.</span></span> 

<span data-ttu-id="2943d-107">If you have an existing application that has its own account system, or supports other kinds of sign-ins from other cloud providers, adding Azure AD sign-in from any tenant is simple.</span><span class="sxs-lookup"><span data-stu-id="2943d-107">If you have an existing application that has its own account system, or supports other kinds of sign-ins from other cloud providers, adding Azure AD sign-in from any tenant is simple.</span></span> <span data-ttu-id="2943d-108">Just register your app, add sign-in code via OAuth2, OpenID Connect, or SAML, and put a ["Sign In with Microsoft" button][AAD-App-Branding] in your application.</span><span class="sxs-lookup"><span data-stu-id="2943d-108">Just register your app, add sign-in code via OAuth2, OpenID Connect, or SAML, and put a ["Sign In with Microsoft" button][AAD-App-Branding] in your application.</span></span>

> [!NOTE] 
> <span data-ttu-id="2943d-109">This article assumes you’re already familiar with building a single tenant application for Azure AD.</span><span class="sxs-lookup"><span data-stu-id="2943d-109">This article assumes you’re already familiar with building a single tenant application for Azure AD.</span></span> <span data-ttu-id="2943d-110">If you’re not, you should start with one of the quickstarts on the [developer guide homepage][AAD-Dev-Guide].</span><span class="sxs-lookup"><span data-stu-id="2943d-110">If you’re not, you should start with one of the quickstarts on the [developer guide homepage][AAD-Dev-Guide].</span></span>

<span data-ttu-id="2943d-111">There are four simple steps to convert your application into an Azure AD multi-tenant app:</span><span class="sxs-lookup"><span data-stu-id="2943d-111">There are four simple steps to convert your application into an Azure AD multi-tenant app:</span></span>

1. [<span data-ttu-id="2943d-112">Update your application registration to be multi-tenant</span><span class="sxs-lookup"><span data-stu-id="2943d-112">Update your application registration to be multi-tenant</span></span>](#update-registration-to-be-multi-tenant)
2. [<span data-ttu-id="2943d-113">Update your code to send requests to the /common endpoint</span><span class="sxs-lookup"><span data-stu-id="2943d-113">Update your code to send requests to the /common endpoint</span></span>](#update-your-code-to-send-requests-to-common)
3. [<span data-ttu-id="2943d-114">Update your code to handle multiple issuer values</span><span class="sxs-lookup"><span data-stu-id="2943d-114">Update your code to handle multiple issuer values</span></span>](#update-your-code-to-handle-multiple-issuer-values)
4. [<span data-ttu-id="2943d-115">Understand user and admin consent and make appropriate code changes</span><span class="sxs-lookup"><span data-stu-id="2943d-115">Understand user and admin consent and make appropriate code changes</span></span>](#understanding-user-and-admin-consent)

<span data-ttu-id="2943d-116">Let’s look at each step in detail.</span><span class="sxs-lookup"><span data-stu-id="2943d-116">Let’s look at each step in detail.</span></span> <span data-ttu-id="2943d-117">You can also jump straight to [this list of multi-tenant samples][AAD-Samples-MT].</span><span class="sxs-lookup"><span data-stu-id="2943d-117">You can also jump straight to [this list of multi-tenant samples][AAD-Samples-MT].</span></span>

## <a name="update-registration-to-be-multi-tenant"></a><span data-ttu-id="2943d-118">Update registration to be multi-tenant</span><span class="sxs-lookup"><span data-stu-id="2943d-118">Update registration to be multi-tenant</span></span>
<span data-ttu-id="2943d-119">By default, web app/API registrations in Azure AD are single tenant.</span><span class="sxs-lookup"><span data-stu-id="2943d-119">By default, web app/API registrations in Azure AD are single tenant.</span></span> <span data-ttu-id="2943d-120">You can make your registration multi-tenant by finding the **Multi-Tenanted** switch on the **Properties** pane of your application registration in the [Azure portal][AZURE-portal] and setting it to **Yes**.</span><span class="sxs-lookup"><span data-stu-id="2943d-120">You can make your registration multi-tenant by finding the **Multi-Tenanted** switch on the **Properties** pane of your application registration in the [Azure portal][AZURE-portal] and setting it to **Yes**.</span></span>

<span data-ttu-id="2943d-121">Before an application can be made multi-tenant, Azure AD requires the App ID URI of the application to be globally unique.</span><span class="sxs-lookup"><span data-stu-id="2943d-121">Before an application can be made multi-tenant, Azure AD requires the App ID URI of the application to be globally unique.</span></span> <span data-ttu-id="2943d-122">The App ID URI is one of the ways an application is identified in protocol messages.</span><span class="sxs-lookup"><span data-stu-id="2943d-122">The App ID URI is one of the ways an application is identified in protocol messages.</span></span> <span data-ttu-id="2943d-123">For a single tenant application, it is sufficient for the App ID URI to be unique within that tenant.</span><span class="sxs-lookup"><span data-stu-id="2943d-123">For a single tenant application, it is sufficient for the App ID URI to be unique within that tenant.</span></span> <span data-ttu-id="2943d-124">For a multi-tenant application, it must be globally unique so Azure AD can find the application across all tenants.</span><span class="sxs-lookup"><span data-stu-id="2943d-124">For a multi-tenant application, it must be globally unique so Azure AD can find the application across all tenants.</span></span> <span data-ttu-id="2943d-125">Global uniqueness is enforced by requiring the App ID URI to have a host name that matches a verified domain of the Azure AD tenant.</span><span class="sxs-lookup"><span data-stu-id="2943d-125">Global uniqueness is enforced by requiring the App ID URI to have a host name that matches a verified domain of the Azure AD tenant.</span></span> <span data-ttu-id="2943d-126">By default, apps created via the Azure portal have a globally unique App ID URI set on app creation, but you can change this value.</span><span class="sxs-lookup"><span data-stu-id="2943d-126">By default, apps created via the Azure portal have a globally unique App ID URI set on app creation, but you can change this value.</span></span>

<span data-ttu-id="2943d-127">For example, if the name of your tenant was contoso.onmicrosoft.com then a valid App ID URI would be `https://contoso.onmicrosoft.com/myapp`.</span><span class="sxs-lookup"><span data-stu-id="2943d-127">For example, if the name of your tenant was contoso.onmicrosoft.com then a valid App ID URI would be `https://contoso.onmicrosoft.com/myapp`.</span></span> <span data-ttu-id="2943d-128">If your tenant had a verified domain of `contoso.com`, then a valid App ID URI would also be `https://contoso.com/myapp`.</span><span class="sxs-lookup"><span data-stu-id="2943d-128">If your tenant had a verified domain of `contoso.com`, then a valid App ID URI would also be `https://contoso.com/myapp`.</span></span> <span data-ttu-id="2943d-129">If the App ID URI doesn’t follow this pattern, setting an application as multi-tenant fails.</span><span class="sxs-lookup"><span data-stu-id="2943d-129">If the App ID URI doesn’t follow this pattern, setting an application as multi-tenant fails.</span></span>

> [!NOTE] 
> <span data-ttu-id="2943d-130">Native client registrations as well as [v2 applications](./active-directory-appmodel-v2-overview.md) are multi-tenant by default.</span><span class="sxs-lookup"><span data-stu-id="2943d-130">Native client registrations as well as [v2 applications](./active-directory-appmodel-v2-overview.md) are multi-tenant by default.</span></span> <span data-ttu-id="2943d-131">You don’t need to take any action to make these application registrations multi-tenant.</span><span class="sxs-lookup"><span data-stu-id="2943d-131">You don’t need to take any action to make these application registrations multi-tenant.</span></span>

## <a name="update-your-code-to-send-requests-to-common"></a><span data-ttu-id="2943d-132">Update your code to send requests to /common</span><span class="sxs-lookup"><span data-stu-id="2943d-132">Update your code to send requests to /common</span></span>
<span data-ttu-id="2943d-133">In a single tenant application, sign-in requests are sent to the tenant’s sign-in endpoint.</span><span class="sxs-lookup"><span data-stu-id="2943d-133">In a single tenant application, sign-in requests are sent to the tenant’s sign-in endpoint.</span></span> <span data-ttu-id="2943d-134">For example, for contoso.onmicrosoft.com the endpoint would be: `https://login.microsoftonline.com/contoso.onmicrosoft.com`</span><span class="sxs-lookup"><span data-stu-id="2943d-134">For example, for contoso.onmicrosoft.com the endpoint would be: `https://login.microsoftonline.com/contoso.onmicrosoft.com`</span></span>

<span data-ttu-id="2943d-135">Requests sent to a tenant’s endpoint can sign in users (or guests) in that tenant to applications in that tenant.</span><span class="sxs-lookup"><span data-stu-id="2943d-135">Requests sent to a tenant’s endpoint can sign in users (or guests) in that tenant to applications in that tenant.</span></span> <span data-ttu-id="2943d-136">With a multi-tenant application, the application doesn’t know up front what tenant the user is from, so you can’t send requests to a tenant’s endpoint.</span><span class="sxs-lookup"><span data-stu-id="2943d-136">With a multi-tenant application, the application doesn’t know up front what tenant the user is from, so you can’t send requests to a tenant’s endpoint.</span></span> <span data-ttu-id="2943d-137">Instead, requests are sent to an endpoint that multiplexes across all Azure AD tenants: `https://login.microsoftonline.com/common`</span><span class="sxs-lookup"><span data-stu-id="2943d-137">Instead, requests are sent to an endpoint that multiplexes across all Azure AD tenants: `https://login.microsoftonline.com/common`</span></span>

<span data-ttu-id="2943d-138">When Azure AD receives a request on the /common endpoint, it signs the user in and, as a consequence, discovers which tenant the user is from.</span><span class="sxs-lookup"><span data-stu-id="2943d-138">When Azure AD receives a request on the /common endpoint, it signs the user in and, as a consequence, discovers which tenant the user is from.</span></span> <span data-ttu-id="2943d-139">The /common endpoint works with all of the authentication protocols supported by Azure AD:  OpenID Connect, OAuth 2.0, SAML 2.0, and WS-Federation.</span><span class="sxs-lookup"><span data-stu-id="2943d-139">The /common endpoint works with all of the authentication protocols supported by Azure AD:  OpenID Connect, OAuth 2.0, SAML 2.0, and WS-Federation.</span></span>

<span data-ttu-id="2943d-140">The sign-in response to the application then contains a token representing the user.</span><span class="sxs-lookup"><span data-stu-id="2943d-140">The sign-in response to the application then contains a token representing the user.</span></span> <span data-ttu-id="2943d-141">The issuer value in the token tells an application what tenant the user is from.</span><span class="sxs-lookup"><span data-stu-id="2943d-141">The issuer value in the token tells an application what tenant the user is from.</span></span> <span data-ttu-id="2943d-142">When a response returns from the /common endpoint, the issuer value in the token corresponds to the user’s tenant.</span><span class="sxs-lookup"><span data-stu-id="2943d-142">When a response returns from the /common endpoint, the issuer value in the token corresponds to the user’s tenant.</span></span> 

> [!IMPORTANT]
> <span data-ttu-id="2943d-143">The /common endpoint is not a tenant and is not an issuer, it’s just a multiplexer.</span><span class="sxs-lookup"><span data-stu-id="2943d-143">The /common endpoint is not a tenant and is not an issuer, it’s just a multiplexer.</span></span> <span data-ttu-id="2943d-144">When using /common, the logic in your application to validate tokens needs to be updated to take this into account.</span><span class="sxs-lookup"><span data-stu-id="2943d-144">When using /common, the logic in your application to validate tokens needs to be updated to take this into account.</span></span> 

## <a name="update-your-code-to-handle-multiple-issuer-values"></a><span data-ttu-id="2943d-145">Update your code to handle multiple issuer values</span><span class="sxs-lookup"><span data-stu-id="2943d-145">Update your code to handle multiple issuer values</span></span>
<span data-ttu-id="2943d-146">Web applications and web APIs receive and validate tokens from Azure AD.</span><span class="sxs-lookup"><span data-stu-id="2943d-146">Web applications and web APIs receive and validate tokens from Azure AD.</span></span> 

> [!NOTE]
> <span data-ttu-id="2943d-147">While native client applications request and receive tokens from Azure AD, they do so to send them to APIs, where they are validated.</span><span class="sxs-lookup"><span data-stu-id="2943d-147">While native client applications request and receive tokens from Azure AD, they do so to send them to APIs, where they are validated.</span></span> <span data-ttu-id="2943d-148">Native applications do not validate tokens and must treat them as opaque.</span><span class="sxs-lookup"><span data-stu-id="2943d-148">Native applications do not validate tokens and must treat them as opaque.</span></span>

<span data-ttu-id="2943d-149">Let’s look at how an application validates tokens it receives from Azure AD.</span><span class="sxs-lookup"><span data-stu-id="2943d-149">Let’s look at how an application validates tokens it receives from Azure AD.</span></span> <span data-ttu-id="2943d-150">A single tenant application normally takes an endpoint value like:</span><span class="sxs-lookup"><span data-stu-id="2943d-150">A single tenant application normally takes an endpoint value like:</span></span>

    https://login.microsoftonline.com/contoso.onmicrosoft.com

<span data-ttu-id="2943d-151">and uses it to construct a metadata URL (in this case, OpenID Connect) like:</span><span class="sxs-lookup"><span data-stu-id="2943d-151">and uses it to construct a metadata URL (in this case, OpenID Connect) like:</span></span>

    https://login.microsoftonline.com/contoso.onmicrosoft.com/.well-known/openid-configuration

<span data-ttu-id="2943d-152">to download two critical pieces of information that are used to validate tokens:  the tenant’s signing keys and issuer value.</span><span class="sxs-lookup"><span data-stu-id="2943d-152">to download two critical pieces of information that are used to validate tokens:  the tenant’s signing keys and issuer value.</span></span> <span data-ttu-id="2943d-153">Each Azure AD tenant has a unique issuer value of the form:</span><span class="sxs-lookup"><span data-stu-id="2943d-153">Each Azure AD tenant has a unique issuer value of the form:</span></span>

    https://sts.windows.net/31537af4-6d77-4bb9-a681-d2394888ea26/

<span data-ttu-id="2943d-154">where the GUID value is the rename-safe version of the tenant ID of the tenant.</span><span class="sxs-lookup"><span data-stu-id="2943d-154">where the GUID value is the rename-safe version of the tenant ID of the tenant.</span></span> <span data-ttu-id="2943d-155">If you select the preceding metadata link for `contoso.onmicrosoft.com`, you can see this issuer value in the document.</span><span class="sxs-lookup"><span data-stu-id="2943d-155">If you select the preceding metadata link for `contoso.onmicrosoft.com`, you can see this issuer value in the document.</span></span>

<span data-ttu-id="2943d-156">When a single tenant application validates a token, it checks the signature of the token against the signing keys from the metadata document.</span><span class="sxs-lookup"><span data-stu-id="2943d-156">When a single tenant application validates a token, it checks the signature of the token against the signing keys from the metadata document.</span></span> <span data-ttu-id="2943d-157">This test allows it to make sure the issuer value in the token matches the one that was found in the metadata document.</span><span class="sxs-lookup"><span data-stu-id="2943d-157">This test allows it to make sure the issuer value in the token matches the one that was found in the metadata document.</span></span>

<span data-ttu-id="2943d-158">Because the /common endpoint doesn’t correspond to a tenant and isn’t an issuer, when you examine the issuer value in the metadata for /common it has a templated URL instead of an actual value:</span><span class="sxs-lookup"><span data-stu-id="2943d-158">Because the /common endpoint doesn’t correspond to a tenant and isn’t an issuer, when you examine the issuer value in the metadata for /common it has a templated URL instead of an actual value:</span></span>

    https://sts.windows.net/{tenantid}/

<span data-ttu-id="2943d-159">Therefore, a multi-tenant application can’t validate tokens just by matching the issuer value in the metadata with the `issuer` value in the token.</span><span class="sxs-lookup"><span data-stu-id="2943d-159">Therefore, a multi-tenant application can’t validate tokens just by matching the issuer value in the metadata with the `issuer` value in the token.</span></span> <span data-ttu-id="2943d-160">A multi-tenant application needs logic to decide which issuer values are valid and which are not based on the tenant ID portion of the issuer value.</span><span class="sxs-lookup"><span data-stu-id="2943d-160">A multi-tenant application needs logic to decide which issuer values are valid and which are not based on the tenant ID portion of the issuer value.</span></span> 

<span data-ttu-id="2943d-161">For example, if a multi-tenant application only allows sign-in from specific tenants who have signed up for their service, then it must check either the issuer value or the `tid` claim value in the token to make sure that tenant is in their list of subscribers.</span><span class="sxs-lookup"><span data-stu-id="2943d-161">For example, if a multi-tenant application only allows sign-in from specific tenants who have signed up for their service, then it must check either the issuer value or the `tid` claim value in the token to make sure that tenant is in their list of subscribers.</span></span> <span data-ttu-id="2943d-162">If a multi-tenant application only deals with individuals and doesn’t make any access decisions based on tenants, then it can ignore the issuer value altogether.</span><span class="sxs-lookup"><span data-stu-id="2943d-162">If a multi-tenant application only deals with individuals and doesn’t make any access decisions based on tenants, then it can ignore the issuer value altogether.</span></span>

<span data-ttu-id="2943d-163">In the [multi-tenant samples][AAD-Samples-MT], issuer validation is disabled to enable any Azure AD tenant to sign in.</span><span class="sxs-lookup"><span data-stu-id="2943d-163">In the [multi-tenant samples][AAD-Samples-MT], issuer validation is disabled to enable any Azure AD tenant to sign in.</span></span>

## <a name="understanding-user-and-admin-consent"></a><span data-ttu-id="2943d-164">Understanding user and admin consent</span><span class="sxs-lookup"><span data-stu-id="2943d-164">Understanding user and admin consent</span></span>
<span data-ttu-id="2943d-165">For a user to sign in to an application in Azure AD, the application must be represented in the user’s tenant.</span><span class="sxs-lookup"><span data-stu-id="2943d-165">For a user to sign in to an application in Azure AD, the application must be represented in the user’s tenant.</span></span> <span data-ttu-id="2943d-166">This allows the organization to do things like apply unique policies when users from their tenant sign in to the application.</span><span class="sxs-lookup"><span data-stu-id="2943d-166">This allows the organization to do things like apply unique policies when users from their tenant sign in to the application.</span></span> <span data-ttu-id="2943d-167">For a single tenant application, this registration is simple; it’s the one that happens when you register the application in the [Azure portal][AZURE-portal].</span><span class="sxs-lookup"><span data-stu-id="2943d-167">For a single tenant application, this registration is simple; it’s the one that happens when you register the application in the [Azure portal][AZURE-portal].</span></span>

<span data-ttu-id="2943d-168">For a multi-tenant application, the initial registration for the application lives in the Azure AD tenant used by the developer.</span><span class="sxs-lookup"><span data-stu-id="2943d-168">For a multi-tenant application, the initial registration for the application lives in the Azure AD tenant used by the developer.</span></span> <span data-ttu-id="2943d-169">When a user from a different tenant signs in to the application for the first time, Azure AD asks them to consent to the permissions requested by the application.</span><span class="sxs-lookup"><span data-stu-id="2943d-169">When a user from a different tenant signs in to the application for the first time, Azure AD asks them to consent to the permissions requested by the application.</span></span> <span data-ttu-id="2943d-170">If they consent, then a representation of the application called a *service principal* is created in the user’s tenant, and sign-in can continue.</span><span class="sxs-lookup"><span data-stu-id="2943d-170">If they consent, then a representation of the application called a *service principal* is created in the user’s tenant, and sign-in can continue.</span></span> <span data-ttu-id="2943d-171">A delegation is also created in the directory that records the user’s consent to the application.</span><span class="sxs-lookup"><span data-stu-id="2943d-171">A delegation is also created in the directory that records the user’s consent to the application.</span></span> <span data-ttu-id="2943d-172">For details on the application's Application and ServicePrincipal objects, and how they relate to each other, see [Application Objects and Service Principal Objects][AAD-App-SP-Objects].</span><span class="sxs-lookup"><span data-stu-id="2943d-172">For details on the application's Application and ServicePrincipal objects, and how they relate to each other, see [Application Objects and Service Principal Objects][AAD-App-SP-Objects].</span></span>

![Consent to single-tier app][Consent-Single-Tier] 

<span data-ttu-id="2943d-174">This consent experience is affected by the permissions requested by the application.</span><span class="sxs-lookup"><span data-stu-id="2943d-174">This consent experience is affected by the permissions requested by the application.</span></span> <span data-ttu-id="2943d-175">Azure AD supports two kinds of permissions, app-only and delegated.</span><span class="sxs-lookup"><span data-stu-id="2943d-175">Azure AD supports two kinds of permissions, app-only and delegated.</span></span>

* <span data-ttu-id="2943d-176">A delegated permission grants an application the ability to act as a signed in user for a subset of the things the user can do.</span><span class="sxs-lookup"><span data-stu-id="2943d-176">A delegated permission grants an application the ability to act as a signed in user for a subset of the things the user can do.</span></span> <span data-ttu-id="2943d-177">For example, you can grant an application the delegated permission to read the signed in user’s calendar.</span><span class="sxs-lookup"><span data-stu-id="2943d-177">For example, you can grant an application the delegated permission to read the signed in user’s calendar.</span></span>
* <span data-ttu-id="2943d-178">An app-only permission is granted directly to the identity of the application.</span><span class="sxs-lookup"><span data-stu-id="2943d-178">An app-only permission is granted directly to the identity of the application.</span></span> <span data-ttu-id="2943d-179">For example, you can grant an application the app-only permission to read the list of users in a tenant, regardless of who is signed in to the application.</span><span class="sxs-lookup"><span data-stu-id="2943d-179">For example, you can grant an application the app-only permission to read the list of users in a tenant, regardless of who is signed in to the application.</span></span>

<span data-ttu-id="2943d-180">Some permissions can be consented to by a regular user, while others require a tenant administrator’s consent.</span><span class="sxs-lookup"><span data-stu-id="2943d-180">Some permissions can be consented to by a regular user, while others require a tenant administrator’s consent.</span></span> 

### <a name="admin-consent"></a><span data-ttu-id="2943d-181">Admin consent</span><span class="sxs-lookup"><span data-stu-id="2943d-181">Admin consent</span></span>
<span data-ttu-id="2943d-182">App-only permissions always require a tenant administrator’s consent.</span><span class="sxs-lookup"><span data-stu-id="2943d-182">App-only permissions always require a tenant administrator’s consent.</span></span> <span data-ttu-id="2943d-183">If your application requests an app-only permission and a user tries to sign in to the application, an error message is displayed saying the user isn’t able to consent.</span><span class="sxs-lookup"><span data-stu-id="2943d-183">If your application requests an app-only permission and a user tries to sign in to the application, an error message is displayed saying the user isn’t able to consent.</span></span>

<span data-ttu-id="2943d-184">Certain delegated permissions also require a tenant administrator’s consent.</span><span class="sxs-lookup"><span data-stu-id="2943d-184">Certain delegated permissions also require a tenant administrator’s consent.</span></span> <span data-ttu-id="2943d-185">For example, the ability to write back to Azure AD as the signed in user requires a tenant administrator’s consent.</span><span class="sxs-lookup"><span data-stu-id="2943d-185">For example, the ability to write back to Azure AD as the signed in user requires a tenant administrator’s consent.</span></span> <span data-ttu-id="2943d-186">Like app-only permissions, if an ordinary user tries to sign in to an application that requests a delegated permission that requires administrator consent, your application receives an error.</span><span class="sxs-lookup"><span data-stu-id="2943d-186">Like app-only permissions, if an ordinary user tries to sign in to an application that requests a delegated permission that requires administrator consent, your application receives an error.</span></span> <span data-ttu-id="2943d-187">Whether a permission requires admin consent is determined by the developer that published the resource, and can be found in the documentation for the resource.</span><span class="sxs-lookup"><span data-stu-id="2943d-187">Whether a permission requires admin consent is determined by the developer that published the resource, and can be found in the documentation for the resource.</span></span> <span data-ttu-id="2943d-188">The permissions documentation for the [Azure AD Graph API][AAD-Graph-Perm-Scopes] and [Microsoft Graph API][MSFT-Graph-permision-scopes] indicate which permissions require admin consent.</span><span class="sxs-lookup"><span data-stu-id="2943d-188">The permissions documentation for the [Azure AD Graph API][AAD-Graph-Perm-Scopes] and [Microsoft Graph API][MSFT-Graph-permision-scopes] indicate which permissions require admin consent.</span></span>

<span data-ttu-id="2943d-189">If your application uses permissions that require admin consent, you need to have a gesture such as a button or link where the admin can initiate the action.</span><span class="sxs-lookup"><span data-stu-id="2943d-189">If your application uses permissions that require admin consent, you need to have a gesture such as a button or link where the admin can initiate the action.</span></span> <span data-ttu-id="2943d-190">The request your application sends for this action is the usual OAuth2/OpenID Connect authorization request that also includes the `prompt=admin_consent` query string parameter.</span><span class="sxs-lookup"><span data-stu-id="2943d-190">The request your application sends for this action is the usual OAuth2/OpenID Connect authorization request that also includes the `prompt=admin_consent` query string parameter.</span></span> <span data-ttu-id="2943d-191">Once the admin has consented and the service principal is created in the customer’s tenant, subsequent sign-in requests do not need the `prompt=admin_consent` parameter.</span><span class="sxs-lookup"><span data-stu-id="2943d-191">Once the admin has consented and the service principal is created in the customer’s tenant, subsequent sign-in requests do not need the `prompt=admin_consent` parameter.</span></span> <span data-ttu-id="2943d-192">Since the administrator has decided the requested permissions are acceptable, no other users in the tenant are prompted for consent from that point forward.</span><span class="sxs-lookup"><span data-stu-id="2943d-192">Since the administrator has decided the requested permissions are acceptable, no other users in the tenant are prompted for consent from that point forward.</span></span>

<span data-ttu-id="2943d-193">A tenant administrator can disable the ability for regular users to consent to applications.</span><span class="sxs-lookup"><span data-stu-id="2943d-193">A tenant administrator can disable the ability for regular users to consent to applications.</span></span> <span data-ttu-id="2943d-194">If this capability is disabled, admin consent is always required for the application to be used in the tenant.</span><span class="sxs-lookup"><span data-stu-id="2943d-194">If this capability is disabled, admin consent is always required for the application to be used in the tenant.</span></span> <span data-ttu-id="2943d-195">If you want to test your application with end user consent disabled, you can find the configuration switch in the [Azure portal][AZURE-portal] in the **[User settings](https://portal.azure.com/#blade/Microsoft_AAD_IAM/StartboardApplicationsMenuBlade/UserSettings/menuId/)** section under **Enterprise applications**.</span><span class="sxs-lookup"><span data-stu-id="2943d-195">If you want to test your application with end user consent disabled, you can find the configuration switch in the [Azure portal][AZURE-portal] in the **[User settings](https://portal.azure.com/#blade/Microsoft_AAD_IAM/StartboardApplicationsMenuBlade/UserSettings/menuId/)** section under **Enterprise applications**.</span></span>

<span data-ttu-id="2943d-196">The `prompt=admin_consent` parameter can also be used by applications that request permissions that do not require admin consent.</span><span class="sxs-lookup"><span data-stu-id="2943d-196">The `prompt=admin_consent` parameter can also be used by applications that request permissions that do not require admin consent.</span></span> <span data-ttu-id="2943d-197">An example of when this would be used is if the application requires an experience where the tenant admin “signs up” one time, and no other users are prompted for consent from that point on.</span><span class="sxs-lookup"><span data-stu-id="2943d-197">An example of when this would be used is if the application requires an experience where the tenant admin “signs up” one time, and no other users are prompted for consent from that point on.</span></span>

<span data-ttu-id="2943d-198">If an application requires admin consent and an admin signs in without the `prompt=admin_consent` parameter being sent, when the admin successfully consents to the application it will apply **only for their user account**.</span><span class="sxs-lookup"><span data-stu-id="2943d-198">If an application requires admin consent and an admin signs in without the `prompt=admin_consent` parameter being sent, when the admin successfully consents to the application it will apply **only for their user account**.</span></span> <span data-ttu-id="2943d-199">Regular users will still not be able to sign in or consent to the application.</span><span class="sxs-lookup"><span data-stu-id="2943d-199">Regular users will still not be able to sign in or consent to the application.</span></span> <span data-ttu-id="2943d-200">This feature is useful if you want to give the tenant administrator the ability to explore your application before allowing other users access.</span><span class="sxs-lookup"><span data-stu-id="2943d-200">This feature is useful if you want to give the tenant administrator the ability to explore your application before allowing other users access.</span></span>

> [!NOTE]
> <span data-ttu-id="2943d-201">Some applications want an experience where regular users are able to consent initially, and later the application can involve the administrator and request permissions that require admin consent.</span><span class="sxs-lookup"><span data-stu-id="2943d-201">Some applications want an experience where regular users are able to consent initially, and later the application can involve the administrator and request permissions that require admin consent.</span></span> <span data-ttu-id="2943d-202">There is no way to do this with a v1 application registration in Azure AD today; however, using the v2 endpoint allows applications to request permissions at runtime instead of at registration time, which enables this scenario.</span><span class="sxs-lookup"><span data-stu-id="2943d-202">There is no way to do this with a v1 application registration in Azure AD today; however, using the v2 endpoint allows applications to request permissions at runtime instead of at registration time, which enables this scenario.</span></span> <span data-ttu-id="2943d-203">For more information, see the [v2 endpoint][AAD-V2-Dev-Guide].</span><span class="sxs-lookup"><span data-stu-id="2943d-203">For more information, see the [v2 endpoint][AAD-V2-Dev-Guide].</span></span>

### <a name="consent-and-multi-tier-applications"></a><span data-ttu-id="2943d-204">Consent and multi-tier applications</span><span class="sxs-lookup"><span data-stu-id="2943d-204">Consent and multi-tier applications</span></span>
<span data-ttu-id="2943d-205">Your application may have multiple tiers, each represented by its own registration in Azure AD.</span><span class="sxs-lookup"><span data-stu-id="2943d-205">Your application may have multiple tiers, each represented by its own registration in Azure AD.</span></span> <span data-ttu-id="2943d-206">For example, a native application that calls a web API, or a web application that calls a web API.</span><span class="sxs-lookup"><span data-stu-id="2943d-206">For example, a native application that calls a web API, or a web application that calls a web API.</span></span> <span data-ttu-id="2943d-207">In both of these cases, the client (native app or web app) requests permissions to call the resource (web API).</span><span class="sxs-lookup"><span data-stu-id="2943d-207">In both of these cases, the client (native app or web app) requests permissions to call the resource (web API).</span></span> <span data-ttu-id="2943d-208">For the client to be successfully consented into a customer’s tenant, all resources to which it requests permissions must already exist in the customer’s tenant.</span><span class="sxs-lookup"><span data-stu-id="2943d-208">For the client to be successfully consented into a customer’s tenant, all resources to which it requests permissions must already exist in the customer’s tenant.</span></span> <span data-ttu-id="2943d-209">If this condition isn’t met, Azure AD returns an error that the resource must be added first.</span><span class="sxs-lookup"><span data-stu-id="2943d-209">If this condition isn’t met, Azure AD returns an error that the resource must be added first.</span></span>

<span data-ttu-id="2943d-210">**Multiple tiers in a single tenant**</span><span class="sxs-lookup"><span data-stu-id="2943d-210">**Multiple tiers in a single tenant**</span></span>

<span data-ttu-id="2943d-211">This can be a problem if your logical application consists of two or more application registrations, for example a separate client and resource.</span><span class="sxs-lookup"><span data-stu-id="2943d-211">This can be a problem if your logical application consists of two or more application registrations, for example a separate client and resource.</span></span> <span data-ttu-id="2943d-212">How do you get the resource into the customer tenant first?</span><span class="sxs-lookup"><span data-stu-id="2943d-212">How do you get the resource into the customer tenant first?</span></span> <span data-ttu-id="2943d-213">Azure AD covers this case by enabling client and resource to be consented in a single step.</span><span class="sxs-lookup"><span data-stu-id="2943d-213">Azure AD covers this case by enabling client and resource to be consented in a single step.</span></span> <span data-ttu-id="2943d-214">The user sees the sum total of the permissions requested by both the client and resource on the consent page.</span><span class="sxs-lookup"><span data-stu-id="2943d-214">The user sees the sum total of the permissions requested by both the client and resource on the consent page.</span></span> <span data-ttu-id="2943d-215">To enable this behavior, the resource’s application registration must include the client’s App ID as a `knownClientApplications` in its [application manifest][AAD-App-Manifest].</span><span class="sxs-lookup"><span data-stu-id="2943d-215">To enable this behavior, the resource’s application registration must include the client’s App ID as a `knownClientApplications` in its [application manifest][AAD-App-Manifest].</span></span> <span data-ttu-id="2943d-216">For example:</span><span class="sxs-lookup"><span data-stu-id="2943d-216">For example:</span></span>

    knownClientApplications": ["94da0930-763f-45c7-8d26-04d5938baab2"]

<span data-ttu-id="2943d-217">This is demonstrated in a multi-tier native client calling web API sample in the [Related content](#related-content) section at the end of this article.</span><span class="sxs-lookup"><span data-stu-id="2943d-217">This is demonstrated in a multi-tier native client calling web API sample in the [Related content](#related-content) section at the end of this article.</span></span> <span data-ttu-id="2943d-218">The following diagram provides an overview of consent for a multi-tier app registered in a single tenant.</span><span class="sxs-lookup"><span data-stu-id="2943d-218">The following diagram provides an overview of consent for a multi-tier app registered in a single tenant.</span></span>

![Consent to multi-tier known client app][Consent-Multi-Tier-Known-Client] 

<span data-ttu-id="2943d-220">**Multiple tiers in multiple tenants**</span><span class="sxs-lookup"><span data-stu-id="2943d-220">**Multiple tiers in multiple tenants**</span></span>

<span data-ttu-id="2943d-221">A similar case happens if the different tiers of an application are registered in different tenants.</span><span class="sxs-lookup"><span data-stu-id="2943d-221">A similar case happens if the different tiers of an application are registered in different tenants.</span></span> <span data-ttu-id="2943d-222">For example, consider the case of building a native client application that calls the Office 365 Exchange Online API.</span><span class="sxs-lookup"><span data-stu-id="2943d-222">For example, consider the case of building a native client application that calls the Office 365 Exchange Online API.</span></span> <span data-ttu-id="2943d-223">To develop the native application, and later for the native application to run in a customer’s tenant, the Exchange Online service principal must be present.</span><span class="sxs-lookup"><span data-stu-id="2943d-223">To develop the native application, and later for the native application to run in a customer’s tenant, the Exchange Online service principal must be present.</span></span> <span data-ttu-id="2943d-224">In this case, the developer and customer must purchase Exchange Online for the service principal to be created in their tenants.</span><span class="sxs-lookup"><span data-stu-id="2943d-224">In this case, the developer and customer must purchase Exchange Online for the service principal to be created in their tenants.</span></span> 

<span data-ttu-id="2943d-225">In the case of an API built by an organization other than Microsoft, the developer of the API needs to provide a way for their customers to consent the application into their customers' tenants.</span><span class="sxs-lookup"><span data-stu-id="2943d-225">In the case of an API built by an organization other than Microsoft, the developer of the API needs to provide a way for their customers to consent the application into their customers' tenants.</span></span> <span data-ttu-id="2943d-226">The recommended design is for the third party developer to build the API such that it can also function as a web client to implement sign-up.</span><span class="sxs-lookup"><span data-stu-id="2943d-226">The recommended design is for the third party developer to build the API such that it can also function as a web client to implement sign-up.</span></span> <span data-ttu-id="2943d-227">To do this:</span><span class="sxs-lookup"><span data-stu-id="2943d-227">To do this:</span></span>

1. <span data-ttu-id="2943d-228">Follow the earlier sections to ensure the API implements the multi-tenant application registration/code requirements.</span><span class="sxs-lookup"><span data-stu-id="2943d-228">Follow the earlier sections to ensure the API implements the multi-tenant application registration/code requirements.</span></span>
2. <span data-ttu-id="2943d-229">In addition to exposing the API's scopes/roles, make sure the registration includes the "Sign in and read user profile" Azure AD permission (provided by default).</span><span class="sxs-lookup"><span data-stu-id="2943d-229">In addition to exposing the API's scopes/roles, make sure the registration includes the "Sign in and read user profile" Azure AD permission (provided by default).</span></span>
3. <span data-ttu-id="2943d-230">Implement a sign-in/sign-up page in the web client, following the [admin consent](#admin-consent) guidance discussed earlier.</span><span class="sxs-lookup"><span data-stu-id="2943d-230">Implement a sign-in/sign-up page in the web client, following the [admin consent](#admin-consent) guidance discussed earlier.</span></span>
4. <span data-ttu-id="2943d-231">Once the user consents to the application, the service principal and consent delegation links are created in their tenant, and the native application can get tokens for the API.</span><span class="sxs-lookup"><span data-stu-id="2943d-231">Once the user consents to the application, the service principal and consent delegation links are created in their tenant, and the native application can get tokens for the API.</span></span>

<span data-ttu-id="2943d-232">The following diagram provides an overview of consent for a multi-tier app registered in different tenants.</span><span class="sxs-lookup"><span data-stu-id="2943d-232">The following diagram provides an overview of consent for a multi-tier app registered in different tenants.</span></span>

![Consent to multi-tier multi-party app][Consent-Multi-Tier-Multi-Party] 

### <a name="revoking-consent"></a><span data-ttu-id="2943d-234">Revoking consent</span><span class="sxs-lookup"><span data-stu-id="2943d-234">Revoking consent</span></span>
<span data-ttu-id="2943d-235">Users and administrators can revoke consent to your application at any time:</span><span class="sxs-lookup"><span data-stu-id="2943d-235">Users and administrators can revoke consent to your application at any time:</span></span>

* <span data-ttu-id="2943d-236">Users revoke access to individual applications by removing them from their [Access Panel Applications][AAD-Access-Panel] list.</span><span class="sxs-lookup"><span data-stu-id="2943d-236">Users revoke access to individual applications by removing them from their [Access Panel Applications][AAD-Access-Panel] list.</span></span>
* <span data-ttu-id="2943d-237">Administrators revoke access to applications by removing them from Azure AD using the [Enterprise applications](https://portal.azure.com/#blade/Microsoft_AAD_IAM/StartboardApplicationsMenuBlade/AllApps) section of the [Azure portal][AZURE-portal].</span><span class="sxs-lookup"><span data-stu-id="2943d-237">Administrators revoke access to applications by removing them from Azure AD using the [Enterprise applications](https://portal.azure.com/#blade/Microsoft_AAD_IAM/StartboardApplicationsMenuBlade/AllApps) section of the [Azure portal][AZURE-portal].</span></span>

<span data-ttu-id="2943d-238">If an administrator consents to an application for all users in a tenant, users cannot revoke access individually.</span><span class="sxs-lookup"><span data-stu-id="2943d-238">If an administrator consents to an application for all users in a tenant, users cannot revoke access individually.</span></span> <span data-ttu-id="2943d-239">Only the administrator can revoke access, and only for the whole application.</span><span class="sxs-lookup"><span data-stu-id="2943d-239">Only the administrator can revoke access, and only for the whole application.</span></span>

## <a name="multi-tenant-applications-and-caching-access-tokens"></a><span data-ttu-id="2943d-240">Multi-tenant applications and caching access tokens</span><span class="sxs-lookup"><span data-stu-id="2943d-240">Multi-tenant applications and caching access tokens</span></span>
<span data-ttu-id="2943d-241">Multi-tenant applications can also get access tokens to call APIs that are protected by Azure AD.</span><span class="sxs-lookup"><span data-stu-id="2943d-241">Multi-tenant applications can also get access tokens to call APIs that are protected by Azure AD.</span></span> <span data-ttu-id="2943d-242">A common error when using the Active Directory Authentication Library (ADAL) with a multi-tenant application is to initially request a token for a user using /common, receive a response, then request a subsequent token for that same user also using /common.</span><span class="sxs-lookup"><span data-stu-id="2943d-242">A common error when using the Active Directory Authentication Library (ADAL) with a multi-tenant application is to initially request a token for a user using /common, receive a response, then request a subsequent token for that same user also using /common.</span></span> <span data-ttu-id="2943d-243">Because the response from Azure AD comes from a tenant, not /common, ADAL caches the token as being from the tenant.</span><span class="sxs-lookup"><span data-stu-id="2943d-243">Because the response from Azure AD comes from a tenant, not /common, ADAL caches the token as being from the tenant.</span></span> <span data-ttu-id="2943d-244">The subsequent call to /common to get an access token for the user misses the cache entry, and the user is prompted to sign in again.</span><span class="sxs-lookup"><span data-stu-id="2943d-244">The subsequent call to /common to get an access token for the user misses the cache entry, and the user is prompted to sign in again.</span></span> <span data-ttu-id="2943d-245">To avoid missing the cache, make sure subsequent calls for an already signed in user are made to the tenant’s endpoint.</span><span class="sxs-lookup"><span data-stu-id="2943d-245">To avoid missing the cache, make sure subsequent calls for an already signed in user are made to the tenant’s endpoint.</span></span>

## <a name="next-steps"></a><span data-ttu-id="2943d-246">Next steps</span><span class="sxs-lookup"><span data-stu-id="2943d-246">Next steps</span></span>
<span data-ttu-id="2943d-247">In this article, you learned how to build an application that can sign in a user from any Azure AD tenant.</span><span class="sxs-lookup"><span data-stu-id="2943d-247">In this article, you learned how to build an application that can sign in a user from any Azure AD tenant.</span></span> <span data-ttu-id="2943d-248">After enabling Single Sign-On (SSO) between your app and Azure AD, you can also update your application to access APIs exposed by Microsoft resources like Office 365.</span><span class="sxs-lookup"><span data-stu-id="2943d-248">After enabling Single Sign-On (SSO) between your app and Azure AD, you can also update your application to access APIs exposed by Microsoft resources like Office 365.</span></span> <span data-ttu-id="2943d-249">This lets you offer a personalized experience in your application, such as showing contextual information to the users, like their profile picture or their next calendar appointment.</span><span class="sxs-lookup"><span data-stu-id="2943d-249">This lets you offer a personalized experience in your application, such as showing contextual information to the users, like their profile picture or their next calendar appointment.</span></span> <span data-ttu-id="2943d-250">To learn more about making API calls to Azure AD and Office 365 services like Exchange, SharePoint, OneDrive, OneNote, Planner, Excel, and more, visit [Microsoft Graph API][MSFT-Graph-overview].</span><span class="sxs-lookup"><span data-stu-id="2943d-250">To learn more about making API calls to Azure AD and Office 365 services like Exchange, SharePoint, OneDrive, OneNote, Planner, Excel, and more, visit [Microsoft Graph API][MSFT-Graph-overview].</span></span>

## <a name="related-content"></a><span data-ttu-id="2943d-251">Related content</span><span class="sxs-lookup"><span data-stu-id="2943d-251">Related content</span></span>
* <span data-ttu-id="2943d-252">[Multi-tenant application samples][AAD-Samples-MT]</span><span class="sxs-lookup"><span data-stu-id="2943d-252">[Multi-tenant application samples][AAD-Samples-MT]</span></span>
* <span data-ttu-id="2943d-253">[Branding guidelines for applications][AAD-App-Branding]</span><span class="sxs-lookup"><span data-stu-id="2943d-253">[Branding guidelines for applications][AAD-App-Branding]</span></span>
* <span data-ttu-id="2943d-254">[Application objects and service principal objects][AAD-App-SP-Objects]</span><span class="sxs-lookup"><span data-stu-id="2943d-254">[Application objects and service principal objects][AAD-App-SP-Objects]</span></span>
* <span data-ttu-id="2943d-255">[Integrating applications with Azure Active Directory][AAD-Integrating-Apps]</span><span class="sxs-lookup"><span data-stu-id="2943d-255">[Integrating applications with Azure Active Directory][AAD-Integrating-Apps]</span></span>
* <span data-ttu-id="2943d-256">[Overview of the Consent Framework][AAD-Consent-Overview]</span><span class="sxs-lookup"><span data-stu-id="2943d-256">[Overview of the Consent Framework][AAD-Consent-Overview]</span></span>
* <span data-ttu-id="2943d-257">[Microsoft Graph API permission scopes][MSFT-Graph-permision-scopes]</span><span class="sxs-lookup"><span data-stu-id="2943d-257">[Microsoft Graph API permission scopes][MSFT-Graph-permision-scopes]</span></span>
* <span data-ttu-id="2943d-258">[Azure AD Graph API permission scopes][AAD-Graph-Perm-Scopes]</span><span class="sxs-lookup"><span data-stu-id="2943d-258">[Azure AD Graph API permission scopes][AAD-Graph-Perm-Scopes]</span></span>

<!--Reference style links IN USE -->
[AAD-Access-Panel]:  https://myapps.microsoft.com
[AAD-App-Branding]:howto-add-branding-in-azure-ad-apps.md
[AAD-App-Manifest]:reference-azure-ad-app-manifest.md
[AAD-App-SP-Objects]:app-objects-and-service-principals.md
[AAD-Auth-Scenarios]:authentication-scenarios.md
[AAD-Consent-Overview]:quickstart-v1-integrate-apps-with-azure-ad.md#overview-of-the-consent-framework
[AAD-Dev-Guide]:azure-ad-developers-guide.md
[AAD-Graph-Overview]: https://azure.microsoft.com/documentation/articles/active-directory-graph-api/
[AAD-Graph-Perm-Scopes]: https://msdn.microsoft.com/library/azure/ad/graph/howto/azure-ad-graph-api-permission-scopes
[AAD-Integrating-Apps]:quickstart-v1-integrate-apps-with-azure-ad.md
[AAD-Samples-MT]: https://azure.microsoft.com/documentation/samples/?service=active-directory&term=multitenant
[AAD-Why-To-Integrate]: ./active-directory-how-to-integrate.md
[AZURE-portal]: https://portal.azure.com
[MSFT-Graph-overview]: https://graph.microsoft.io/en-us/docs/overview/overview
[MSFT-Graph-permision-scopes]: https://developer.microsoft.com/en-us/graph/docs/concepts/permissions_reference

<!--Image references-->
[AAD-Sign-In]: ./media/active-directory-devhowto-multi-tenant-overview/sign-in-with-microsoft-light.png
[Consent-Single-Tier]: ./media/active-directory-devhowto-multi-tenant-overview/consent-flow-single-tier.png
[Consent-Multi-Tier-Known-Client]: ./media/active-directory-devhowto-multi-tenant-overview/consent-flow-multi-tier-known-clients.png
[Consent-Multi-Tier-Multi-Party]: ./media/active-directory-devhowto-multi-tenant-overview/consent-flow-multi-tier-multi-party.png

<!--Reference style links -->
[AAD-App-Manifest]:reference-azure-ad-app-manifest.md
[AAD-App-SP-Objects]:app-objects-and-service-principals.md
[AAD-Auth-Scenarios]:authentication-scenarios.md
[AAD-Integrating-Apps]:quickstart-v1-integrate-apps-with-azure-ad.md
[AAD-Dev-Guide]:azure-ad-developers-guide.md
[AAD-Graph-Perm-Scopes]: https://msdn.microsoft.com/library/azure/ad/graph/howto/azure-ad-graph-api-permission-scopes
[AAD-Graph-App-Entity]: https://msdn.microsoft.com/Library/Azure/Ad/Graph/api/entity-and-complex-type-reference#application-entity
[AAD-Graph-Sp-Entity]: https://msdn.microsoft.com/Library/Azure/Ad/Graph/api/entity-and-complex-type-reference#serviceprincipal-entity
[AAD-Graph-User-Entity]: https://msdn.microsoft.com/Library/Azure/Ad/Graph/api/entity-and-complex-type-reference#user-entity
[AAD-How-To-Integrate]: ./active-directory-how-to-integrate.md
[AAD-Security-Token-Claims]: ./active-directory-authentication-scenarios/#claims-in-azure-ad-security-tokens
[AAD-Tokens-Claims]:v1-id-and-access-tokens.md
[AAD-V2-Dev-Guide]: ../active-directory-appmodel-v2-overview.md
[AZURE-portal]: https://portal.azure.com
[Duyshant-Role-Blog]: http://www.dushyantgill.com/blog/2014/12/10/roles-based-access-control-in-cloud-applications-using-azure-ad/
[JWT]: https://tools.ietf.org/html/draft-ietf-oauth-json-web-token-32
[O365-Perm-Ref]: https://msdn.microsoft.com/office/office365/howto/application-manifest
[OAuth2-Access-Token-Scopes]: https://tools.ietf.org/html/rfc6749#section-3.3
[OAuth2-AuthZ-Code-Grant-Flow]: https://msdn.microsoft.com/library/azure/dn645542.aspx
[OAuth2-AuthZ-Grant-Types]: https://tools.ietf.org/html/rfc6749#section-1.3 
[OAuth2-Client-Types]: https://tools.ietf.org/html/rfc6749#section-2.1
[OAuth2-Role-Def]: https://tools.ietf.org/html/rfc6749#page-6
[OpenIDConnect]: http://openid.net/specs/openid-connect-core-1_0.html
[OpenIDConnect-ID-Token]: http://openid.net/specs/openid-connect-core-1_0.html#IDToken














