---
title: Azure AD v2.0 OAuth Authorization Code Flow | Microsoft Docs
description: Building web applications using Azure AD's implementation of the OAuth 2.0 authentication protocol.
services: active-directory
documentationcenter: ''
author: CelesteDG
manager: mtillman
editor: ''
ms.assetid: ae1d7d86-7098-468c-aa32-20df0a10ee3d
ms.service: active-directory
ms.component: develop
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/23/2018
ms.author: celested
ms.reviewer: hirsin
ms.custom: aaddev
ms.openlocfilehash: 3fb6cad6243bd6cd0b6a09827d590f7097550e31
ms.sourcegitcommit: d1451406a010fd3aa854dc8e5b77dc5537d8050e
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 09/13/2018
ms.locfileid: "44856706"
---
# <a name="v20-protocols---oauth-20-authorization-code-flow"></a><span data-ttu-id="17159-103">v2.0 Protocols - OAuth 2.0 Authorization Code Flow</span><span class="sxs-lookup"><span data-stu-id="17159-103">v2.0 Protocols - OAuth 2.0 Authorization Code Flow</span></span>
<span data-ttu-id="17159-104">The OAuth 2.0 authorization code grant can be used in apps that are installed on a device to gain access to protected resources, such as web APIs.</span><span class="sxs-lookup"><span data-stu-id="17159-104">The OAuth 2.0 authorization code grant can be used in apps that are installed on a device to gain access to protected resources, such as web APIs.</span></span> <span data-ttu-id="17159-105">Using the app model v2.0 's implementation of OAuth 2.0, you can add sign in and API access to your mobile and desktop apps.</span><span class="sxs-lookup"><span data-stu-id="17159-105">Using the app model v2.0 's implementation of OAuth 2.0, you can add sign in and API access to your mobile and desktop apps.</span></span> <span data-ttu-id="17159-106">This guide is language-independent, and describes how to send and receive HTTP messages without using any of the [Azure open-source authentication libraries](active-directory-authentication-libraries.md).</span><span class="sxs-lookup"><span data-stu-id="17159-106">This guide is language-independent, and describes how to send and receive HTTP messages without using any of the [Azure open-source authentication libraries](active-directory-authentication-libraries.md).</span></span>

> [!NOTE]
> <span data-ttu-id="17159-107">Not all Azure Active Directory scenarios & features are supported by the v2.0 endpoint.</span><span class="sxs-lookup"><span data-stu-id="17159-107">Not all Azure Active Directory scenarios & features are supported by the v2.0 endpoint.</span></span> <span data-ttu-id="17159-108">To determine if you should use the v2.0 endpoint, read about [v2.0 limitations](active-directory-v2-limitations.md).</span><span class="sxs-lookup"><span data-stu-id="17159-108">To determine if you should use the v2.0 endpoint, read about [v2.0 limitations](active-directory-v2-limitations.md).</span></span>
> 
> 

<span data-ttu-id="17159-109">The OAuth 2.0 authorization code flow is described in [section 4.1 of the OAuth 2.0 specification](http://tools.ietf.org/html/rfc6749).</span><span class="sxs-lookup"><span data-stu-id="17159-109">The OAuth 2.0 authorization code flow is described in [section 4.1 of the OAuth 2.0 specification](http://tools.ietf.org/html/rfc6749).</span></span> <span data-ttu-id="17159-110">It is used to perform authentication and authorization in the majority of app types, including [web apps](v2-app-types.md#web-apps) and [natively installed  apps](v2-app-types.md#mobile-and-native-apps).</span><span class="sxs-lookup"><span data-stu-id="17159-110">It is used to perform authentication and authorization in the majority of app types, including [web apps](v2-app-types.md#web-apps) and [natively installed  apps](v2-app-types.md#mobile-and-native-apps).</span></span> <span data-ttu-id="17159-111">The flow enables apps to securely acquire access_tokens that can be used to access resources secured by the v2.0 endpoint.</span><span class="sxs-lookup"><span data-stu-id="17159-111">The flow enables apps to securely acquire access_tokens that can be used to access resources secured by the v2.0 endpoint.</span></span> 

## <a name="protocol-diagram"></a><span data-ttu-id="17159-112">Protocol diagram</span><span class="sxs-lookup"><span data-stu-id="17159-112">Protocol diagram</span></span>
<span data-ttu-id="17159-113">At a high level, the entire authentication flow for a native/mobile application looks a bit like this:</span><span class="sxs-lookup"><span data-stu-id="17159-113">At a high level, the entire authentication flow for a native/mobile application looks a bit like this:</span></span>

![OAuth Auth Code Flow](./media/v2-oauth2-auth-code-flow/convergence_scenarios_native.png)

## <a name="request-an-authorization-code"></a><span data-ttu-id="17159-115">Request an authorization code</span><span class="sxs-lookup"><span data-stu-id="17159-115">Request an authorization code</span></span>
<span data-ttu-id="17159-116">The authorization code flow begins with the client directing the user to the `/authorize` endpoint.</span><span class="sxs-lookup"><span data-stu-id="17159-116">The authorization code flow begins with the client directing the user to the `/authorize` endpoint.</span></span> <span data-ttu-id="17159-117">In this request, the client indicates the permissions it needs to acquire from the user:</span><span class="sxs-lookup"><span data-stu-id="17159-117">In this request, the client indicates the permissions it needs to acquire from the user:</span></span>

```
// Line breaks for legibility only

https://login.microsoftonline.com/{tenant}/oauth2/v2.0/authorize?
client_id=6731de76-14a6-49ae-97bc-6eba6914391e
&response_type=code
&redirect_uri=http%3A%2F%2Flocalhost%2Fmyapp%2F
&response_mode=query
&scope=openid%20offline_access%20https%3A%2F%2Fgraph.microsoft.com%2Fmail.read
&state=12345
```

> [!TIP]
> <span data-ttu-id="17159-118">Click the link below to execute this request!</span><span class="sxs-lookup"><span data-stu-id="17159-118">Click the link below to execute this request!</span></span> <span data-ttu-id="17159-119">After signing in, your browser should be redirected to `https://localhost/myapp/` with a `code` in the address bar.</span><span class="sxs-lookup"><span data-stu-id="17159-119">After signing in, your browser should be redirected to `https://localhost/myapp/` with a `code` in the address bar.</span></span>
> <span data-ttu-id="17159-120"><a href="https://login.microsoftonline.com/common/oauth2/v2.0/authorize?client_id=6731de76-14a6-49ae-97bc-6eba6914391e&response_type=code&redirect_uri=http%3A%2F%2Flocalhost%2Fmyapp%2F&response_mode=query&scope=openid%20offline_access%20https%3A%2F%2Fgraph.microsoft.com%2Fmail.read&state=12345" target="_blank">https://login.microsoftonline.com/common/oauth2/v2.0/authorize...</a></span><span class="sxs-lookup"><span data-stu-id="17159-120"><a href="https://login.microsoftonline.com/common/oauth2/v2.0/authorize?client_id=6731de76-14a6-49ae-97bc-6eba6914391e&response_type=code&redirect_uri=http%3A%2F%2Flocalhost%2Fmyapp%2F&response_mode=query&scope=openid%20offline_access%20https%3A%2F%2Fgraph.microsoft.com%2Fmail.read&state=12345" target="_blank">https://login.microsoftonline.com/common/oauth2/v2.0/authorize...</a></span></span>
> 
> 

| <span data-ttu-id="17159-121">Parameter</span><span class="sxs-lookup"><span data-stu-id="17159-121">Parameter</span></span>             |             | <span data-ttu-id="17159-122">Description</span><span class="sxs-lookup"><span data-stu-id="17159-122">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
|-----------------------|-------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="17159-123">tenant</span><span class="sxs-lookup"><span data-stu-id="17159-123">tenant</span></span>                | <span data-ttu-id="17159-124">required</span><span class="sxs-lookup"><span data-stu-id="17159-124">required</span></span>    | <span data-ttu-id="17159-125">The `{tenant}` value in the path of the request can be used to control who can sign into the application.</span><span class="sxs-lookup"><span data-stu-id="17159-125">The `{tenant}` value in the path of the request can be used to control who can sign into the application.</span></span> <span data-ttu-id="17159-126">The allowed values are `common`, `organizations`, `consumers`, and tenant identifiers.</span><span class="sxs-lookup"><span data-stu-id="17159-126">The allowed values are `common`, `organizations`, `consumers`, and tenant identifiers.</span></span> <span data-ttu-id="17159-127">For more detail, see [protocol basics](active-directory-v2-protocols.md#endpoints).</span><span class="sxs-lookup"><span data-stu-id="17159-127">For more detail, see [protocol basics](active-directory-v2-protocols.md#endpoints).</span></span>                                                                                                                                                                                                                                                                                                                    |
| <span data-ttu-id="17159-128">client_id</span><span class="sxs-lookup"><span data-stu-id="17159-128">client_id</span></span>             | <span data-ttu-id="17159-129">required</span><span class="sxs-lookup"><span data-stu-id="17159-129">required</span></span>    | <span data-ttu-id="17159-130">The Application ID that the registration portal ([apps.dev.microsoft.com](https://apps.dev.microsoft.com/?referrer=https://azure.microsoft.com/documentation/articles&deeplink=/appList)) assigned your app.</span><span class="sxs-lookup"><span data-stu-id="17159-130">The Application ID that the registration portal ([apps.dev.microsoft.com](https://apps.dev.microsoft.com/?referrer=https://azure.microsoft.com/documentation/articles&deeplink=/appList)) assigned your app.</span></span>  |
| <span data-ttu-id="17159-131">response_type</span><span class="sxs-lookup"><span data-stu-id="17159-131">response_type</span></span>         | <span data-ttu-id="17159-132">required</span><span class="sxs-lookup"><span data-stu-id="17159-132">required</span></span>    | <span data-ttu-id="17159-133">Must include `code` for the authorization code flow.</span><span class="sxs-lookup"><span data-stu-id="17159-133">Must include `code` for the authorization code flow.</span></span>       |
| <span data-ttu-id="17159-134">redirect_uri</span><span class="sxs-lookup"><span data-stu-id="17159-134">redirect_uri</span></span>          | <span data-ttu-id="17159-135">recommended</span><span class="sxs-lookup"><span data-stu-id="17159-135">recommended</span></span> | <span data-ttu-id="17159-136">The redirect_uri of your app, where authentication responses can be sent and received by your app.</span><span class="sxs-lookup"><span data-stu-id="17159-136">The redirect_uri of your app, where authentication responses can be sent and received by your app.</span></span> <span data-ttu-id="17159-137">It must exactly match one of the redirect_uris you registered in the portal, except it must be url encoded.</span><span class="sxs-lookup"><span data-stu-id="17159-137">It must exactly match one of the redirect_uris you registered in the portal, except it must be url encoded.</span></span> <span data-ttu-id="17159-138">For native & mobile apps, you should use the default value of `https://login.microsoftonline.com/common/oauth2/nativeclient`.</span><span class="sxs-lookup"><span data-stu-id="17159-138">For native & mobile apps, you should use the default value of `https://login.microsoftonline.com/common/oauth2/nativeclient`.</span></span>   |
| <span data-ttu-id="17159-139">scope</span><span class="sxs-lookup"><span data-stu-id="17159-139">scope</span></span>                 | <span data-ttu-id="17159-140">required</span><span class="sxs-lookup"><span data-stu-id="17159-140">required</span></span>    | <span data-ttu-id="17159-141">A space-separated list of [scopes](v2-permissions-and-consent.md) that you want the user to consent to.</span><span class="sxs-lookup"><span data-stu-id="17159-141">A space-separated list of [scopes](v2-permissions-and-consent.md) that you want the user to consent to.</span></span>           |
| <span data-ttu-id="17159-142">response_mode</span><span class="sxs-lookup"><span data-stu-id="17159-142">response_mode</span></span>         | <span data-ttu-id="17159-143">recommended</span><span class="sxs-lookup"><span data-stu-id="17159-143">recommended</span></span> | <span data-ttu-id="17159-144">Specifies the method that should be used to send the resulting token back to your app.</span><span class="sxs-lookup"><span data-stu-id="17159-144">Specifies the method that should be used to send the resulting token back to your app.</span></span> <span data-ttu-id="17159-145">Can be `query`, `fragment`, or `form_post`.</span><span class="sxs-lookup"><span data-stu-id="17159-145">Can be `query`, `fragment`, or `form_post`.</span></span> <span data-ttu-id="17159-146">`query` provides the code as a query string parameter on your redirect URI.</span><span class="sxs-lookup"><span data-stu-id="17159-146">`query` provides the code as a query string parameter on your redirect URI.</span></span> <span data-ttu-id="17159-147">If you're requesting an ID token using the implicit flow, you cannot use `query` as specified in the [OpenID spec](https://openid.net/specs/oauth-v2-multiple-response-types-1_0.html#Combinations). If you're requesting just the code, you can use `query`, `fragment`, or `form_post`.</span><span class="sxs-lookup"><span data-stu-id="17159-147">If you're requesting an ID token using the implicit flow, you cannot use `query` as specified in the [OpenID spec](https://openid.net/specs/oauth-v2-multiple-response-types-1_0.html#Combinations). If you're requesting just the code, you can use `query`, `fragment`, or `form_post`.</span></span> <span data-ttu-id="17159-148">`form_post` executes a POST containing the code to your redirect URI.</span><span class="sxs-lookup"><span data-stu-id="17159-148">`form_post` executes a POST containing the code to your redirect URI.</span></span> <span data-ttu-id="17159-149">For more info, see [OpenID Connect protocol](https://docs.microsoft.com/azure/active-directory/develop/active-directory-protocols-openid-connect-code).</span><span class="sxs-lookup"><span data-stu-id="17159-149">For more info, see [OpenID Connect protocol](https://docs.microsoft.com/azure/active-directory/develop/active-directory-protocols-openid-connect-code).</span></span>  |
| <span data-ttu-id="17159-150">state</span><span class="sxs-lookup"><span data-stu-id="17159-150">state</span></span>                 | <span data-ttu-id="17159-151">recommended</span><span class="sxs-lookup"><span data-stu-id="17159-151">recommended</span></span> | <span data-ttu-id="17159-152">A value included in the request that will also be returned in the token response.</span><span class="sxs-lookup"><span data-stu-id="17159-152">A value included in the request that will also be returned in the token response.</span></span> <span data-ttu-id="17159-153">It can be a string of any content that you wish.</span><span class="sxs-lookup"><span data-stu-id="17159-153">It can be a string of any content that you wish.</span></span> <span data-ttu-id="17159-154">A randomly generated unique value is typically used for [preventing cross-site request forgery attacks](http://tools.ietf.org/html/rfc6749#section-10.12).</span><span class="sxs-lookup"><span data-stu-id="17159-154">A randomly generated unique value is typically used for [preventing cross-site request forgery attacks](http://tools.ietf.org/html/rfc6749#section-10.12).</span></span> <span data-ttu-id="17159-155">The value can also encode information about the user's state in the app before the authentication request occurred, such as the page or view they were on.</span><span class="sxs-lookup"><span data-stu-id="17159-155">The value can also encode information about the user's state in the app before the authentication request occurred, such as the page or view they were on.</span></span> |
| <span data-ttu-id="17159-156">prompt</span><span class="sxs-lookup"><span data-stu-id="17159-156">prompt</span></span>                | <span data-ttu-id="17159-157">optional</span><span class="sxs-lookup"><span data-stu-id="17159-157">optional</span></span>    | <span data-ttu-id="17159-158">Indicates the type of user interaction that is required.</span><span class="sxs-lookup"><span data-stu-id="17159-158">Indicates the type of user interaction that is required.</span></span> <span data-ttu-id="17159-159">The only valid values at this time are 'login', 'none', and 'consent'.</span><span class="sxs-lookup"><span data-stu-id="17159-159">The only valid values at this time are 'login', 'none', and 'consent'.</span></span> <span data-ttu-id="17159-160">`prompt=login` will force the user to enter their credentials on that request, negating single-sign on.</span><span class="sxs-lookup"><span data-stu-id="17159-160">`prompt=login` will force the user to enter their credentials on that request, negating single-sign on.</span></span> <span data-ttu-id="17159-161">`prompt=none` is the opposite - it will ensure that the user is not presented with any interactive prompt whatsoever.</span><span class="sxs-lookup"><span data-stu-id="17159-161">`prompt=none` is the opposite - it will ensure that the user is not presented with any interactive prompt whatsoever.</span></span> <span data-ttu-id="17159-162">If the request cannot be completed silently via single-sign on, the v2.0 endpoint will return an `interaction_required` error.</span><span class="sxs-lookup"><span data-stu-id="17159-162">If the request cannot be completed silently via single-sign on, the v2.0 endpoint will return an `interaction_required` error.</span></span> <span data-ttu-id="17159-163">`prompt=consent` will trigger the OAuth consent dialog after the user signs in, asking the user to grant permissions to the app.</span><span class="sxs-lookup"><span data-stu-id="17159-163">`prompt=consent` will trigger the OAuth consent dialog after the user signs in, asking the user to grant permissions to the app.</span></span> |
| <span data-ttu-id="17159-164">login_hint</span><span class="sxs-lookup"><span data-stu-id="17159-164">login_hint</span></span>            | <span data-ttu-id="17159-165">optional</span><span class="sxs-lookup"><span data-stu-id="17159-165">optional</span></span>    | <span data-ttu-id="17159-166">Can be used to pre-fill the username/email address field of the sign-in page for the user, if you know their username ahead of time.</span><span class="sxs-lookup"><span data-stu-id="17159-166">Can be used to pre-fill the username/email address field of the sign-in page for the user, if you know their username ahead of time.</span></span> <span data-ttu-id="17159-167">Often apps will use this parameter during re-authentication, having already extracted the username from a previous sign-in using the `preferred_username` claim.</span><span class="sxs-lookup"><span data-stu-id="17159-167">Often apps will use this parameter during re-authentication, having already extracted the username from a previous sign-in using the `preferred_username` claim.</span></span>                                                                                                                                                                                                                                                                                                    |
| <span data-ttu-id="17159-168">domain_hint</span><span class="sxs-lookup"><span data-stu-id="17159-168">domain_hint</span></span>           | <span data-ttu-id="17159-169">optional</span><span class="sxs-lookup"><span data-stu-id="17159-169">optional</span></span>    | <span data-ttu-id="17159-170">Can be one of `consumers` or `organizations`.</span><span class="sxs-lookup"><span data-stu-id="17159-170">Can be one of `consumers` or `organizations`.</span></span> <span data-ttu-id="17159-171">If included, it will skip the email-based discovery process that user goes through on the v2.0 sign-in page, leading to a slightly more streamlined user experience.</span><span class="sxs-lookup"><span data-stu-id="17159-171">If included, it will skip the email-based discovery process that user goes through on the v2.0 sign-in page, leading to a slightly more streamlined user experience.</span></span> <span data-ttu-id="17159-172">Often apps will use this parameter during re-authentication, by extracting the `tid` from a previous sign-in.</span><span class="sxs-lookup"><span data-stu-id="17159-172">Often apps will use this parameter during re-authentication, by extracting the `tid` from a previous sign-in.</span></span> <span data-ttu-id="17159-173">If the `tid` claim value is `9188040d-6c67-4c5b-b112-36a304b66dad`, you should use `domain_hint=consumers`.</span><span class="sxs-lookup"><span data-stu-id="17159-173">If the `tid` claim value is `9188040d-6c67-4c5b-b112-36a304b66dad`, you should use `domain_hint=consumers`.</span></span> <span data-ttu-id="17159-174">Otherwise, use `domain_hint=organizations`.</span><span class="sxs-lookup"><span data-stu-id="17159-174">Otherwise, use `domain_hint=organizations`.</span></span>                                                                                                              |
| <span data-ttu-id="17159-175">code_challenge_method</span><span class="sxs-lookup"><span data-stu-id="17159-175">code_challenge_method</span></span> | <span data-ttu-id="17159-176">optional</span><span class="sxs-lookup"><span data-stu-id="17159-176">optional</span></span>    | <span data-ttu-id="17159-177">The method used to encode the `code_verifier` for the `code_challenge` parameter.</span><span class="sxs-lookup"><span data-stu-id="17159-177">The method used to encode the `code_verifier` for the `code_challenge` parameter.</span></span> <span data-ttu-id="17159-178">Can be one of `plain` or `S256`.</span><span class="sxs-lookup"><span data-stu-id="17159-178">Can be one of `plain` or `S256`.</span></span> <span data-ttu-id="17159-179">If excluded, `code_challenge` is assumed to be plaintext if `code_challenge` is included.</span><span class="sxs-lookup"><span data-stu-id="17159-179">If excluded, `code_challenge` is assumed to be plaintext if `code_challenge` is included.</span></span> <span data-ttu-id="17159-180">Azure AAD v2.0 supports both `plain` and `S256`.</span><span class="sxs-lookup"><span data-stu-id="17159-180">Azure AAD v2.0 supports both `plain` and `S256`.</span></span> <span data-ttu-id="17159-181">For more information, see the [PKCE RFC](https://tools.ietf.org/html/rfc7636).</span><span class="sxs-lookup"><span data-stu-id="17159-181">For more information, see the [PKCE RFC](https://tools.ietf.org/html/rfc7636).</span></span> |
| <span data-ttu-id="17159-182">code_challenge</span><span class="sxs-lookup"><span data-stu-id="17159-182">code_challenge</span></span>        | <span data-ttu-id="17159-183">optional</span><span class="sxs-lookup"><span data-stu-id="17159-183">optional</span></span>    | <span data-ttu-id="17159-184">Used to secure authorization code grants via Proof Key for Code Exchange (PKCE) from a native client.</span><span class="sxs-lookup"><span data-stu-id="17159-184">Used to secure authorization code grants via Proof Key for Code Exchange (PKCE) from a native client.</span></span> <span data-ttu-id="17159-185">Required if `code_challenge_method` is included.</span><span class="sxs-lookup"><span data-stu-id="17159-185">Required if `code_challenge_method` is included.</span></span> <span data-ttu-id="17159-186">For more information, see the [PKCE RFC](https://tools.ietf.org/html/rfc7636).</span><span class="sxs-lookup"><span data-stu-id="17159-186">For more information, see the [PKCE RFC](https://tools.ietf.org/html/rfc7636).</span></span>                                                                                                                                                                                                                                                                                                                                                                    |

<span data-ttu-id="17159-187">At this point, the user will be asked to enter their credentials and complete the authentication.</span><span class="sxs-lookup"><span data-stu-id="17159-187">At this point, the user will be asked to enter their credentials and complete the authentication.</span></span> <span data-ttu-id="17159-188">The v2.0 endpoint will also ensure that the user has consented to the permissions indicated in the `scope` query parameter.</span><span class="sxs-lookup"><span data-stu-id="17159-188">The v2.0 endpoint will also ensure that the user has consented to the permissions indicated in the `scope` query parameter.</span></span> <span data-ttu-id="17159-189">If the user has not consented to any of those permissions, it will ask the user to consent to the required permissions.</span><span class="sxs-lookup"><span data-stu-id="17159-189">If the user has not consented to any of those permissions, it will ask the user to consent to the required permissions.</span></span> <span data-ttu-id="17159-190">Details of [permissions, consent, and multi-tenant apps are provided here](v2-permissions-and-consent.md).</span><span class="sxs-lookup"><span data-stu-id="17159-190">Details of [permissions, consent, and multi-tenant apps are provided here](v2-permissions-and-consent.md).</span></span>

<span data-ttu-id="17159-191">Once the user authenticates and grants consent, the v2.0 endpoint will return a response to your app at the indicated `redirect_uri`, using the method specified in the `response_mode` parameter.</span><span class="sxs-lookup"><span data-stu-id="17159-191">Once the user authenticates and grants consent, the v2.0 endpoint will return a response to your app at the indicated `redirect_uri`, using the method specified in the `response_mode` parameter.</span></span>

#### <a name="successful-response"></a><span data-ttu-id="17159-192">Successful response</span><span class="sxs-lookup"><span data-stu-id="17159-192">Successful response</span></span>
<span data-ttu-id="17159-193">A successful response using `response_mode=query` looks like:</span><span class="sxs-lookup"><span data-stu-id="17159-193">A successful response using `response_mode=query` looks like:</span></span>

```
GET https://login.microsoftonline.com/common/oauth2/nativeclient?
code=AwABAAAAvPM1KaPlrEqdFSBzjqfTGBCmLdgfSTLEMPGYuNHSUYBrq...
&state=12345
```

| <span data-ttu-id="17159-194">Parameter</span><span class="sxs-lookup"><span data-stu-id="17159-194">Parameter</span></span> | <span data-ttu-id="17159-195">Description</span><span class="sxs-lookup"><span data-stu-id="17159-195">Description</span></span>                                                                                                                                                                                                                        |
|-----------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="17159-196">code</span><span class="sxs-lookup"><span data-stu-id="17159-196">code</span></span>      | <span data-ttu-id="17159-197">The authorization_code that the app requested.</span><span class="sxs-lookup"><span data-stu-id="17159-197">The authorization_code that the app requested.</span></span> <span data-ttu-id="17159-198">The app can use the authorization code to request an access token for the target resource.</span><span class="sxs-lookup"><span data-stu-id="17159-198">The app can use the authorization code to request an access token for the target resource.</span></span> <span data-ttu-id="17159-199">Authorization_codes are very short lived, typically they expire after about 10 minutes.</span><span class="sxs-lookup"><span data-stu-id="17159-199">Authorization_codes are very short lived, typically they expire after about 10 minutes.</span></span> |
| <span data-ttu-id="17159-200">state</span><span class="sxs-lookup"><span data-stu-id="17159-200">state</span></span>     | <span data-ttu-id="17159-201">If a state parameter is included in the request, the same value should appear in the response.</span><span class="sxs-lookup"><span data-stu-id="17159-201">If a state parameter is included in the request, the same value should appear in the response.</span></span> <span data-ttu-id="17159-202">The app should verify that the state values in the request and response are identical.</span><span class="sxs-lookup"><span data-stu-id="17159-202">The app should verify that the state values in the request and response are identical.</span></span>                                            |

#### <a name="error-response"></a><span data-ttu-id="17159-203">Error response</span><span class="sxs-lookup"><span data-stu-id="17159-203">Error response</span></span>
<span data-ttu-id="17159-204">Error responses may also be sent to the `redirect_uri` so the app can handle them appropriately:</span><span class="sxs-lookup"><span data-stu-id="17159-204">Error responses may also be sent to the `redirect_uri` so the app can handle them appropriately:</span></span>

```
GET https://login.microsoftonline.com/common/oauth2/nativeclient?
error=access_denied
&error_description=the+user+canceled+the+authentication
```

| <span data-ttu-id="17159-205">Parameter</span><span class="sxs-lookup"><span data-stu-id="17159-205">Parameter</span></span>         | <span data-ttu-id="17159-206">Description</span><span class="sxs-lookup"><span data-stu-id="17159-206">Description</span></span>                                                                                                       |
|-------------------|-------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="17159-207">error</span><span class="sxs-lookup"><span data-stu-id="17159-207">error</span></span>             | <span data-ttu-id="17159-208">An error code string that can be used to classify types of errors that occur, and can be used to react to errors.</span><span class="sxs-lookup"><span data-stu-id="17159-208">An error code string that can be used to classify types of errors that occur, and can be used to react to errors.</span></span> |
| <span data-ttu-id="17159-209">error_description</span><span class="sxs-lookup"><span data-stu-id="17159-209">error_description</span></span> | <span data-ttu-id="17159-210">A specific error message that can help a developer identify the root cause of an authentication error.</span><span class="sxs-lookup"><span data-stu-id="17159-210">A specific error message that can help a developer identify the root cause of an authentication error.</span></span>          |

#### <a name="error-codes-for-authorization-endpoint-errors"></a><span data-ttu-id="17159-211">Error codes for authorization endpoint errors</span><span class="sxs-lookup"><span data-stu-id="17159-211">Error codes for authorization endpoint errors</span></span>
<span data-ttu-id="17159-212">The following table describes the various error codes that can be returned in the `error` parameter of the error response.</span><span class="sxs-lookup"><span data-stu-id="17159-212">The following table describes the various error codes that can be returned in the `error` parameter of the error response.</span></span>

| <span data-ttu-id="17159-213">Error Code</span><span class="sxs-lookup"><span data-stu-id="17159-213">Error Code</span></span>                | <span data-ttu-id="17159-214">Description</span><span class="sxs-lookup"><span data-stu-id="17159-214">Description</span></span>                                                                                                           | <span data-ttu-id="17159-215">Client Action</span><span class="sxs-lookup"><span data-stu-id="17159-215">Client Action</span></span>                                                                                                                                                                                                                               |
|---------------------------|-----------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="17159-216">invalid_request</span><span class="sxs-lookup"><span data-stu-id="17159-216">invalid_request</span></span>           | <span data-ttu-id="17159-217">Protocol error, such as a missing required parameter.</span><span class="sxs-lookup"><span data-stu-id="17159-217">Protocol error, such as a missing required parameter.</span></span>                                                               | <span data-ttu-id="17159-218">Fix and resubmit the request.</span><span class="sxs-lookup"><span data-stu-id="17159-218">Fix and resubmit the request.</span></span> <span data-ttu-id="17159-219">This is a development error typically caught during initial testing.</span><span class="sxs-lookup"><span data-stu-id="17159-219">This is a development error typically caught during initial testing.</span></span>                                                                                                                                     |
| <span data-ttu-id="17159-220">unauthorized_client</span><span class="sxs-lookup"><span data-stu-id="17159-220">unauthorized_client</span></span>       | <span data-ttu-id="17159-221">The client application is not permitted to request an authorization code.</span><span class="sxs-lookup"><span data-stu-id="17159-221">The client application is not permitted to request an authorization code.</span></span>                                           | <span data-ttu-id="17159-222">This error usually occurs when the client application is not registered in Azure AD or is not added to the user's Azure AD tenant.</span><span class="sxs-lookup"><span data-stu-id="17159-222">This error usually occurs when the client application is not registered in Azure AD or is not added to the user's Azure AD tenant.</span></span> <span data-ttu-id="17159-223">The application can prompt the user with instruction for installing the application and adding it to Azure AD.</span><span class="sxs-lookup"><span data-stu-id="17159-223">The application can prompt the user with instruction for installing the application and adding it to Azure AD.</span></span> |
| <span data-ttu-id="17159-224">access_denied</span><span class="sxs-lookup"><span data-stu-id="17159-224">access_denied</span></span>             | <span data-ttu-id="17159-225">Resource owner denied consent</span><span class="sxs-lookup"><span data-stu-id="17159-225">Resource owner denied consent</span></span>                                                                                         | <span data-ttu-id="17159-226">The client application can notify the user that it cannot proceed unless the user consents.</span><span class="sxs-lookup"><span data-stu-id="17159-226">The client application can notify the user that it cannot proceed unless the user consents.</span></span>                                                                                                                                               |
| <span data-ttu-id="17159-227">unsupported_response_type</span><span class="sxs-lookup"><span data-stu-id="17159-227">unsupported_response_type</span></span> | <span data-ttu-id="17159-228">The authorization server does not support the response type in the request.</span><span class="sxs-lookup"><span data-stu-id="17159-228">The authorization server does not support the response type in the request.</span></span>                                         | <span data-ttu-id="17159-229">Fix and resubmit the request.</span><span class="sxs-lookup"><span data-stu-id="17159-229">Fix and resubmit the request.</span></span> <span data-ttu-id="17159-230">This is a development error is typically caught during initial testing.</span><span class="sxs-lookup"><span data-stu-id="17159-230">This is a development error is typically caught during initial testing.</span></span>                                                                                                                                     |
| <span data-ttu-id="17159-231">server_error</span><span class="sxs-lookup"><span data-stu-id="17159-231">server_error</span></span>              | <span data-ttu-id="17159-232">The server encountered an unexpected error.</span><span class="sxs-lookup"><span data-stu-id="17159-232">The server encountered an unexpected error.</span></span>                                                                         | <span data-ttu-id="17159-233">Retry the request.</span><span class="sxs-lookup"><span data-stu-id="17159-233">Retry the request.</span></span> <span data-ttu-id="17159-234">These errors can result from temporary conditions.</span><span class="sxs-lookup"><span data-stu-id="17159-234">These errors can result from temporary conditions.</span></span> <span data-ttu-id="17159-235">The client application might explain to the user that its response is delayed  to a temporary error.</span><span class="sxs-lookup"><span data-stu-id="17159-235">The client application might explain to the user that its response is delayed  to a temporary error.</span></span>                                                                |
| <span data-ttu-id="17159-236">temporarily_unavailable</span><span class="sxs-lookup"><span data-stu-id="17159-236">temporarily_unavailable</span></span>   | <span data-ttu-id="17159-237">The server is temporarily too busy to handle the request.</span><span class="sxs-lookup"><span data-stu-id="17159-237">The server is temporarily too busy to handle the request.</span></span>                                                           | <span data-ttu-id="17159-238">Retry the request.</span><span class="sxs-lookup"><span data-stu-id="17159-238">Retry the request.</span></span> <span data-ttu-id="17159-239">The client application might explain to the user that its response is delayed due to a temporary condition.</span><span class="sxs-lookup"><span data-stu-id="17159-239">The client application might explain to the user that its response is delayed due to a temporary condition.</span></span>                                                                                                               |
| <span data-ttu-id="17159-240">invalid_resource</span><span class="sxs-lookup"><span data-stu-id="17159-240">invalid_resource</span></span>          | <span data-ttu-id="17159-241">The target resource is invalid because it does not exist, Azure AD cannot find it, or it is not correctly configured.</span><span class="sxs-lookup"><span data-stu-id="17159-241">The target resource is invalid because it does not exist, Azure AD cannot find it, or it is not correctly configured.</span></span> | <span data-ttu-id="17159-242">This error indicates the resource, if it exists, has not been configured in the tenant.</span><span class="sxs-lookup"><span data-stu-id="17159-242">This error indicates the resource, if it exists, has not been configured in the tenant.</span></span> <span data-ttu-id="17159-243">The application can prompt the user with instruction for installing the application and adding it to Azure AD.</span><span class="sxs-lookup"><span data-stu-id="17159-243">The application can prompt the user with instruction for installing the application and adding it to Azure AD.</span></span>                                          |
|<span data-ttu-id="17159-244">login_required</span><span class="sxs-lookup"><span data-stu-id="17159-244">login_required</span></span>             | <span data-ttu-id="17159-245">Too many or no users found</span><span class="sxs-lookup"><span data-stu-id="17159-245">Too many or no users found</span></span> | <span data-ttu-id="17159-246">The client requested silent authentication (`prompt=none`), but a single user could not found.</span><span class="sxs-lookup"><span data-stu-id="17159-246">The client requested silent authentication (`prompt=none`), but a single user could not found.</span></span> <span data-ttu-id="17159-247">This may mean there are multiple users active in the session, or no users.</span><span class="sxs-lookup"><span data-stu-id="17159-247">This may mean there are multiple users active in the session, or no users.</span></span> <span data-ttu-id="17159-248">This takes into account the tenant chosen (for example, if there are 2 AAD accounts active and one MSA, and `consumers` is chosen, silent authentication will work).</span><span class="sxs-lookup"><span data-stu-id="17159-248">This takes into account the tenant chosen (for example, if there are 2 AAD accounts active and one MSA, and `consumers` is chosen, silent authentication will work).</span></span> |
|<span data-ttu-id="17159-249">interaction_required</span><span class="sxs-lookup"><span data-stu-id="17159-249">interaction_required</span></span>       | <span data-ttu-id="17159-250">The request requires user interaction.</span><span class="sxs-lookup"><span data-stu-id="17159-250">The request requires user interaction.</span></span> | <span data-ttu-id="17159-251">An additional authentication step or consent is required.</span><span class="sxs-lookup"><span data-stu-id="17159-251">An additional authentication step or consent is required.</span></span> <span data-ttu-id="17159-252">Retry the request without `prompt=none`.</span><span class="sxs-lookup"><span data-stu-id="17159-252">Retry the request without `prompt=none`.</span></span> |

## <a name="request-an-access-token"></a><span data-ttu-id="17159-253">Request an access token</span><span class="sxs-lookup"><span data-stu-id="17159-253">Request an access token</span></span>
<span data-ttu-id="17159-254">Now that you've acquired an authorization_code and have been granted permission by the user, you can redeem the `code` for an `access_token` to the desired resource.</span><span class="sxs-lookup"><span data-stu-id="17159-254">Now that you've acquired an authorization_code and have been granted permission by the user, you can redeem the `code` for an `access_token` to the desired resource.</span></span> <span data-ttu-id="17159-255">Do this by sending a `POST` request to the `/token` endpoint:</span><span class="sxs-lookup"><span data-stu-id="17159-255">Do this by sending a `POST` request to the `/token` endpoint:</span></span>

```
// Line breaks for legibility only

POST /{tenant}/oauth2/v2.0/token HTTP/1.1
Host: https://login.microsoftonline.com
Content-Type: application/x-www-form-urlencoded

client_id=6731de76-14a6-49ae-97bc-6eba6914391e
&scope=https%3A%2F%2Fgraph.microsoft.com%2Fmail.read
&code=OAAABAAAAiL9Kn2Z27UubvWFPbm0gLWQJVzCTE9UkP3pSx1aXxUjq3n8b2JRLk4OxVXr...
&redirect_uri=http%3A%2F%2Flocalhost%2Fmyapp%2F
&grant_type=authorization_code
&client_secret=JqQX2PNo9bpM0uEihUPzyrh    // NOTE: Only required for web apps
```

> [!TIP]
> <span data-ttu-id="17159-256">Try executing this request in Postman!</span><span class="sxs-lookup"><span data-stu-id="17159-256">Try executing this request in Postman!</span></span> <span data-ttu-id="17159-257">(Don't forget to replace the `code`) [![Run in Postman](./media/v2-oauth2-auth-code-flow/runInPostman.png)](https://app.getpostman.com/run-collection/8f5715ec514865a07e6a)</span><span class="sxs-lookup"><span data-stu-id="17159-257">(Don't forget to replace the `code`) [![Run in Postman](./media/v2-oauth2-auth-code-flow/runInPostman.png)](https://app.getpostman.com/run-collection/8f5715ec514865a07e6a)</span></span>
> 
> 

| <span data-ttu-id="17159-258">Parameter</span><span class="sxs-lookup"><span data-stu-id="17159-258">Parameter</span></span>     |                       | <span data-ttu-id="17159-259">Description</span><span class="sxs-lookup"><span data-stu-id="17159-259">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                |
|---------------|-----------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="17159-260">tenant</span><span class="sxs-lookup"><span data-stu-id="17159-260">tenant</span></span>        | <span data-ttu-id="17159-261">required</span><span class="sxs-lookup"><span data-stu-id="17159-261">required</span></span>              | <span data-ttu-id="17159-262">The `{tenant}` value in the path of the request can be used to control who can sign into the application.</span><span class="sxs-lookup"><span data-stu-id="17159-262">The `{tenant}` value in the path of the request can be used to control who can sign into the application.</span></span> <span data-ttu-id="17159-263">The allowed values are `common`, `organizations`, `consumers`, and tenant identifiers.</span><span class="sxs-lookup"><span data-stu-id="17159-263">The allowed values are `common`, `organizations`, `consumers`, and tenant identifiers.</span></span> <span data-ttu-id="17159-264">For more detail, see [protocol basics](active-directory-v2-protocols.md#endpoints).</span><span class="sxs-lookup"><span data-stu-id="17159-264">For more detail, see [protocol basics](active-directory-v2-protocols.md#endpoints).</span></span>                                                                                                                                                   |
| <span data-ttu-id="17159-265">client_id</span><span class="sxs-lookup"><span data-stu-id="17159-265">client_id</span></span>     | <span data-ttu-id="17159-266">required</span><span class="sxs-lookup"><span data-stu-id="17159-266">required</span></span>              | <span data-ttu-id="17159-267">The Application ID that the registration portal ([apps.dev.microsoft.com](https://apps.dev.microsoft.com/?referrer=https://azure.microsoft.com/documentation/articles&deeplink=/appList)) assigned your app.</span><span class="sxs-lookup"><span data-stu-id="17159-267">The Application ID that the registration portal ([apps.dev.microsoft.com](https://apps.dev.microsoft.com/?referrer=https://azure.microsoft.com/documentation/articles&deeplink=/appList)) assigned your app.</span></span>                                                                                                                                                                                                                             |
| <span data-ttu-id="17159-268">grant_type</span><span class="sxs-lookup"><span data-stu-id="17159-268">grant_type</span></span>    | <span data-ttu-id="17159-269">required</span><span class="sxs-lookup"><span data-stu-id="17159-269">required</span></span>              | <span data-ttu-id="17159-270">Must be `authorization_code` for the authorization code flow.</span><span class="sxs-lookup"><span data-stu-id="17159-270">Must be `authorization_code` for the authorization code flow.</span></span>                                                                                                                                                                                                                                                                                                                                                                            |
| <span data-ttu-id="17159-271">scope</span><span class="sxs-lookup"><span data-stu-id="17159-271">scope</span></span>         | <span data-ttu-id="17159-272">required</span><span class="sxs-lookup"><span data-stu-id="17159-272">required</span></span>              | <span data-ttu-id="17159-273">A space-separated list of scopes.</span><span class="sxs-lookup"><span data-stu-id="17159-273">A space-separated list of scopes.</span></span> <span data-ttu-id="17159-274">The scopes requested in this leg must be equivalent to or a subset of the scopes requested in the first leg.</span><span class="sxs-lookup"><span data-stu-id="17159-274">The scopes requested in this leg must be equivalent to or a subset of the scopes requested in the first leg.</span></span> <span data-ttu-id="17159-275">If the scopes specified in this request span multiple resource server, then the v2.0 endpoint will return a token for the resource specified in the first scope.</span><span class="sxs-lookup"><span data-stu-id="17159-275">If the scopes specified in this request span multiple resource server, then the v2.0 endpoint will return a token for the resource specified in the first scope.</span></span> <span data-ttu-id="17159-276">For a more detailed explanation of scopes, refer to [permissions, consent, and scopes](v2-permissions-and-consent.md).</span><span class="sxs-lookup"><span data-stu-id="17159-276">For a more detailed explanation of scopes, refer to [permissions, consent, and scopes](v2-permissions-and-consent.md).</span></span> |
| <span data-ttu-id="17159-277">code</span><span class="sxs-lookup"><span data-stu-id="17159-277">code</span></span>          | <span data-ttu-id="17159-278">required</span><span class="sxs-lookup"><span data-stu-id="17159-278">required</span></span>              | <span data-ttu-id="17159-279">The authorization_code that you acquired in the first leg of the flow.</span><span class="sxs-lookup"><span data-stu-id="17159-279">The authorization_code that you acquired in the first leg of the flow.</span></span>                                                                                                                                                                                                                                                                                                                                                                   |
| <span data-ttu-id="17159-280">redirect_uri</span><span class="sxs-lookup"><span data-stu-id="17159-280">redirect_uri</span></span>  | <span data-ttu-id="17159-281">required</span><span class="sxs-lookup"><span data-stu-id="17159-281">required</span></span>              | <span data-ttu-id="17159-282">The same redirect_uri value that was used to acquire the authorization_code.</span><span class="sxs-lookup"><span data-stu-id="17159-282">The same redirect_uri value that was used to acquire the authorization_code.</span></span>                                                                                                                                                                                                                                                                                                                                                             |
| <span data-ttu-id="17159-283">client_secret</span><span class="sxs-lookup"><span data-stu-id="17159-283">client_secret</span></span> | <span data-ttu-id="17159-284">required for web apps</span><span class="sxs-lookup"><span data-stu-id="17159-284">required for web apps</span></span> | <span data-ttu-id="17159-285">The application secret that you created in the app registration portal for your app.</span><span class="sxs-lookup"><span data-stu-id="17159-285">The application secret that you created in the app registration portal for your app.</span></span> <span data-ttu-id="17159-286">It should not be used in a native app, because client_secrets cannot be reliably stored on devices.</span><span class="sxs-lookup"><span data-stu-id="17159-286">It should not be used in a native app, because client_secrets cannot be reliably stored on devices.</span></span> <span data-ttu-id="17159-287">It is required for web apps and web APIs, which have the ability to store the client_secret securely on the server side.</span><span class="sxs-lookup"><span data-stu-id="17159-287">It is required for web apps and web APIs, which have the ability to store the client_secret securely on the server side.</span></span>  <span data-ttu-id="17159-288">The client secret must be URL-encoded before being sent.</span><span class="sxs-lookup"><span data-stu-id="17159-288">The client secret must be URL-encoded before being sent.</span></span>                                                                                                                    |
| <span data-ttu-id="17159-289">code_verifier</span><span class="sxs-lookup"><span data-stu-id="17159-289">code_verifier</span></span> | <span data-ttu-id="17159-290">optional</span><span class="sxs-lookup"><span data-stu-id="17159-290">optional</span></span>              | <span data-ttu-id="17159-291">The same code_verifier that was used to obtain the authorization_code.</span><span class="sxs-lookup"><span data-stu-id="17159-291">The same code_verifier that was used to obtain the authorization_code.</span></span> <span data-ttu-id="17159-292">Required if PKCE was used in the authorization code grant request.</span><span class="sxs-lookup"><span data-stu-id="17159-292">Required if PKCE was used in the authorization code grant request.</span></span> <span data-ttu-id="17159-293">For more information, see the [PKCE RFC](https://tools.ietf.org/html/rfc7636)</span><span class="sxs-lookup"><span data-stu-id="17159-293">For more information, see the [PKCE RFC](https://tools.ietf.org/html/rfc7636)</span></span>                                                                                                                                                                                                                                                                                             |
#### <a name="successful-response"></a><span data-ttu-id="17159-294">Successful response</span><span class="sxs-lookup"><span data-stu-id="17159-294">Successful response</span></span>
<span data-ttu-id="17159-295">A successful token response will look like:</span><span class="sxs-lookup"><span data-stu-id="17159-295">A successful token response will look like:</span></span>

```json
{
    "access_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...",
    "token_type": "Bearer",
    "expires_in": 3599,
    "scope": "https%3A%2F%2Fgraph.microsoft.com%2Fmail.read",
    "refresh_token": "AwABAAAAvPM1KaPlrEqdFSBzjqfTGAMxZGUTdM0t4B4...",
    "id_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJub25lIn0.eyJhdWQiOiIyZDRkMTFhMi1mODE0LTQ2YTctOD...",
}
```
| <span data-ttu-id="17159-296">Parameter</span><span class="sxs-lookup"><span data-stu-id="17159-296">Parameter</span></span>     | <span data-ttu-id="17159-297">Description</span><span class="sxs-lookup"><span data-stu-id="17159-297">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                              |
|---------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="17159-298">access_token</span><span class="sxs-lookup"><span data-stu-id="17159-298">access_token</span></span>  | <span data-ttu-id="17159-299">The requested access token.</span><span class="sxs-lookup"><span data-stu-id="17159-299">The requested access token.</span></span> <span data-ttu-id="17159-300">The  app can use this token to authenticate to the secured resource, such as a web API.</span><span class="sxs-lookup"><span data-stu-id="17159-300">The  app can use this token to authenticate to the secured resource, such as a web API.</span></span>                                                                                                                                                                                                                                                                                                                                    |
| <span data-ttu-id="17159-301">token_type</span><span class="sxs-lookup"><span data-stu-id="17159-301">token_type</span></span>    | <span data-ttu-id="17159-302">Indicates the token type value.</span><span class="sxs-lookup"><span data-stu-id="17159-302">Indicates the token type value.</span></span> <span data-ttu-id="17159-303">The only type that Azure AD supports is Bearer</span><span class="sxs-lookup"><span data-stu-id="17159-303">The only type that Azure AD supports is Bearer</span></span>                                                                                                                                                                                                                                                                                                                                                                           |
| <span data-ttu-id="17159-304">expires_in</span><span class="sxs-lookup"><span data-stu-id="17159-304">expires_in</span></span>    | <span data-ttu-id="17159-305">How long the access token is valid (in seconds).</span><span class="sxs-lookup"><span data-stu-id="17159-305">How long the access token is valid (in seconds).</span></span>                                                                                                                                                                                                                                                                                                                                                                                                       |
| <span data-ttu-id="17159-306">scope</span><span class="sxs-lookup"><span data-stu-id="17159-306">scope</span></span>         | <span data-ttu-id="17159-307">The scopes that the access_token is valid for.</span><span class="sxs-lookup"><span data-stu-id="17159-307">The scopes that the access_token is valid for.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                         |
| <span data-ttu-id="17159-308">refresh_token</span><span class="sxs-lookup"><span data-stu-id="17159-308">refresh_token</span></span> | <span data-ttu-id="17159-309">An OAuth 2.0 refresh token.</span><span class="sxs-lookup"><span data-stu-id="17159-309">An OAuth 2.0 refresh token.</span></span> <span data-ttu-id="17159-310">The  app can use this token acquire additional access tokens after the current access token expires.</span><span class="sxs-lookup"><span data-stu-id="17159-310">The  app can use this token acquire additional access tokens after the current access token expires.</span></span> <span data-ttu-id="17159-311">Refresh_tokens are long-lived, and can be used to retain access to resources for extended periods of time.</span><span class="sxs-lookup"><span data-stu-id="17159-311">Refresh_tokens are long-lived, and can be used to retain access to resources for extended periods of time.</span></span> <span data-ttu-id="17159-312">For more detail, refer to the [v2.0 token reference](v2-id-and-access-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="17159-312">For more detail, refer to the [v2.0 token reference](v2-id-and-access-tokens.md).</span></span> <br> <span data-ttu-id="17159-313">**Note:** Only provided if `offline_access` scope was requested.</span><span class="sxs-lookup"><span data-stu-id="17159-313">**Note:** Only provided if `offline_access` scope was requested.</span></span>                                               |
| <span data-ttu-id="17159-314">id_token</span><span class="sxs-lookup"><span data-stu-id="17159-314">id_token</span></span>      | <span data-ttu-id="17159-315">An unsigned JSON Web Token (JWT).</span><span class="sxs-lookup"><span data-stu-id="17159-315">An unsigned JSON Web Token (JWT).</span></span> <span data-ttu-id="17159-316">The  app can base64Url decode the segments of this token to request information about the user who signed in.</span><span class="sxs-lookup"><span data-stu-id="17159-316">The  app can base64Url decode the segments of this token to request information about the user who signed in.</span></span> <span data-ttu-id="17159-317">The  app can cache the values and display them, but it should not rely on them for any authorization or security boundaries.</span><span class="sxs-lookup"><span data-stu-id="17159-317">The  app can cache the values and display them, but it should not rely on them for any authorization or security boundaries.</span></span> <span data-ttu-id="17159-318">For more information about id_tokens, see the [v2.0 endpoint token reference](v2-id-and-access-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="17159-318">For more information about id_tokens, see the [v2.0 endpoint token reference](v2-id-and-access-tokens.md).</span></span> <br> <span data-ttu-id="17159-319">**Note:** Only provided if `openid` scope was requested.</span><span class="sxs-lookup"><span data-stu-id="17159-319">**Note:** Only provided if `openid` scope was requested.</span></span> |
#### <a name="error-response"></a><span data-ttu-id="17159-320">Error response</span><span class="sxs-lookup"><span data-stu-id="17159-320">Error response</span></span>
<span data-ttu-id="17159-321">Error responses will look like:</span><span class="sxs-lookup"><span data-stu-id="17159-321">Error responses will look like:</span></span>

```json
{
  "error": "invalid_scope",
  "error_description": "AADSTS70011: The provided value for the input parameter 'scope' is not valid. The scope https://foo.microsoft.com/mail.read is not valid.\r\nTrace ID: 255d1aef-8c98-452f-ac51-23d051240864\r\nCorrelation ID: fb3d2015-bc17-4bb9-bb85-30c5cf1aaaa7\r\nTimestamp: 2016-01-09 02:02:12Z",
  "error_codes": [
    70011
  ],
  "timestamp": "2016-01-09 02:02:12Z",
  "trace_id": "255d1aef-8c98-452f-ac51-23d051240864",
  "correlation_id": "fb3d2015-bc17-4bb9-bb85-30c5cf1aaaa7"
}
```

| <span data-ttu-id="17159-322">Parameter</span><span class="sxs-lookup"><span data-stu-id="17159-322">Parameter</span></span>         | <span data-ttu-id="17159-323">Description</span><span class="sxs-lookup"><span data-stu-id="17159-323">Description</span></span>                                                                                                       |
|-------------------|-------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="17159-324">error</span><span class="sxs-lookup"><span data-stu-id="17159-324">error</span></span>             | <span data-ttu-id="17159-325">An error code string that can be used to classify types of errors that occur, and can be used to react to errors.</span><span class="sxs-lookup"><span data-stu-id="17159-325">An error code string that can be used to classify types of errors that occur, and can be used to react to errors.</span></span> |
| <span data-ttu-id="17159-326">error_description</span><span class="sxs-lookup"><span data-stu-id="17159-326">error_description</span></span> | <span data-ttu-id="17159-327">A specific error message that can help a developer identify the root cause of an authentication error.</span><span class="sxs-lookup"><span data-stu-id="17159-327">A specific error message that can help a developer identify the root cause of an authentication error.</span></span>          |
| <span data-ttu-id="17159-328">error_codes</span><span class="sxs-lookup"><span data-stu-id="17159-328">error_codes</span></span>       | <span data-ttu-id="17159-329">A list of STS-specific error codes that can help in diagnostics.</span><span class="sxs-lookup"><span data-stu-id="17159-329">A list of STS-specific error codes that can help in diagnostics.</span></span>                                                |
| <span data-ttu-id="17159-330">timestamp</span><span class="sxs-lookup"><span data-stu-id="17159-330">timestamp</span></span>         | <span data-ttu-id="17159-331">The time at which the error occurred.</span><span class="sxs-lookup"><span data-stu-id="17159-331">The time at which the error occurred.</span></span>                                                                           |
| <span data-ttu-id="17159-332">trace_id</span><span class="sxs-lookup"><span data-stu-id="17159-332">trace_id</span></span>          | <span data-ttu-id="17159-333">A unique identifier for the request that can help in diagnostics.</span><span class="sxs-lookup"><span data-stu-id="17159-333">A unique identifier for the request that can help in diagnostics.</span></span>                                               |
| <span data-ttu-id="17159-334">correlation_id</span><span class="sxs-lookup"><span data-stu-id="17159-334">correlation_id</span></span>    | <span data-ttu-id="17159-335">A unique identifier for the request that can help in diagnostics across components.</span><span class="sxs-lookup"><span data-stu-id="17159-335">A unique identifier for the request that can help in diagnostics across components.</span></span>                             |

#### <a name="error-codes-for-token-endpoint-errors"></a><span data-ttu-id="17159-336">Error codes for token endpoint errors</span><span class="sxs-lookup"><span data-stu-id="17159-336">Error codes for token endpoint errors</span></span>
| <span data-ttu-id="17159-337">Error Code</span><span class="sxs-lookup"><span data-stu-id="17159-337">Error Code</span></span>              | <span data-ttu-id="17159-338">Description</span><span class="sxs-lookup"><span data-stu-id="17159-338">Description</span></span>                                                                                                           | <span data-ttu-id="17159-339">Client Action</span><span class="sxs-lookup"><span data-stu-id="17159-339">Client Action</span></span>                                                                                                                                                                                                                               |
|-------------------------|-----------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="17159-340">invalid_request</span><span class="sxs-lookup"><span data-stu-id="17159-340">invalid_request</span></span>         | <span data-ttu-id="17159-341">Protocol error, such as a missing required parameter.</span><span class="sxs-lookup"><span data-stu-id="17159-341">Protocol error, such as a missing required parameter.</span></span>                                                               | <span data-ttu-id="17159-342">Fix and resubmit the request</span><span class="sxs-lookup"><span data-stu-id="17159-342">Fix and resubmit the request</span></span>                                                                                                                                                                                                                |
| <span data-ttu-id="17159-343">invalid_grant</span><span class="sxs-lookup"><span data-stu-id="17159-343">invalid_grant</span></span>           | <span data-ttu-id="17159-344">The authorization code or PKCE code verifier is invalid or has expired.</span><span class="sxs-lookup"><span data-stu-id="17159-344">The authorization code or PKCE code verifier is invalid or has expired.</span></span>                                             | <span data-ttu-id="17159-345">Try a new request to the `/authorize` endpoint and verify that the code_verifier parameter was correct.</span><span class="sxs-lookup"><span data-stu-id="17159-345">Try a new request to the `/authorize` endpoint and verify that the code_verifier parameter was correct.</span></span>                                                                                                                                   |
| <span data-ttu-id="17159-346">unauthorized_client</span><span class="sxs-lookup"><span data-stu-id="17159-346">unauthorized_client</span></span>     | <span data-ttu-id="17159-347">The authenticated client is not authorized to use this authorization grant type.</span><span class="sxs-lookup"><span data-stu-id="17159-347">The authenticated client is not authorized to use this authorization grant type.</span></span>                                     | <span data-ttu-id="17159-348">This usually occurs when the client application is not registered in Azure AD or is not added to the user's Azure AD tenant.</span><span class="sxs-lookup"><span data-stu-id="17159-348">This usually occurs when the client application is not registered in Azure AD or is not added to the user's Azure AD tenant.</span></span> <span data-ttu-id="17159-349">The application can prompt the user with instruction for installing the application and adding it to Azure AD.</span><span class="sxs-lookup"><span data-stu-id="17159-349">The application can prompt the user with instruction for installing the application and adding it to Azure AD.</span></span> |
| <span data-ttu-id="17159-350">invalid_client</span><span class="sxs-lookup"><span data-stu-id="17159-350">invalid_client</span></span>          | <span data-ttu-id="17159-351">Client authentication failed.</span><span class="sxs-lookup"><span data-stu-id="17159-351">Client authentication failed.</span></span>                                                                                        | <span data-ttu-id="17159-352">The client credentials are not valid.</span><span class="sxs-lookup"><span data-stu-id="17159-352">The client credentials are not valid.</span></span> <span data-ttu-id="17159-353">To fix, the application administrator updates the credentials.</span><span class="sxs-lookup"><span data-stu-id="17159-353">To fix, the application administrator updates the credentials.</span></span>                                                                                                                                       |
| <span data-ttu-id="17159-354">unsupported_grant_type</span><span class="sxs-lookup"><span data-stu-id="17159-354">unsupported_grant_type</span></span>  | <span data-ttu-id="17159-355">The authorization server does not support the authorization grant type.</span><span class="sxs-lookup"><span data-stu-id="17159-355">The authorization server does not support the authorization grant type.</span></span>                                              | <span data-ttu-id="17159-356">Change the grant type in the request.</span><span class="sxs-lookup"><span data-stu-id="17159-356">Change the grant type in the request.</span></span> <span data-ttu-id="17159-357">This type of error should occur only during development and be detected during initial testing.</span><span class="sxs-lookup"><span data-stu-id="17159-357">This type of error should occur only during development and be detected during initial testing.</span></span>                                                                                                      |
| <span data-ttu-id="17159-358">invalid_resource</span><span class="sxs-lookup"><span data-stu-id="17159-358">invalid_resource</span></span>        | <span data-ttu-id="17159-359">The target resource is invalid because it does not exist, Azure AD cannot find it, or it is not correctly configured.</span><span class="sxs-lookup"><span data-stu-id="17159-359">The target resource is invalid because it does not exist, Azure AD cannot find it, or it is not correctly configured.</span></span> | <span data-ttu-id="17159-360">This indicates the resource, if it exists, has not been configured in the tenant.</span><span class="sxs-lookup"><span data-stu-id="17159-360">This indicates the resource, if it exists, has not been configured in the tenant.</span></span> <span data-ttu-id="17159-361">The application can prompt the user with instruction for installing the application and adding it to Azure AD.</span><span class="sxs-lookup"><span data-stu-id="17159-361">The application can prompt the user with instruction for installing the application and adding it to Azure AD.</span></span>                                           |
| <span data-ttu-id="17159-362">interaction_required</span><span class="sxs-lookup"><span data-stu-id="17159-362">interaction_required</span></span>    | <span data-ttu-id="17159-363">The request requires user interaction.</span><span class="sxs-lookup"><span data-stu-id="17159-363">The request requires user interaction.</span></span> <span data-ttu-id="17159-364">For example, an additional authentication step is required.</span><span class="sxs-lookup"><span data-stu-id="17159-364">For example, an additional authentication step is required.</span></span>                   | <span data-ttu-id="17159-365">Retry the request with the same resource.</span><span class="sxs-lookup"><span data-stu-id="17159-365">Retry the request with the same resource.</span></span>                                                                                                                                                                                                  |
| <span data-ttu-id="17159-366">temporarily_unavailable</span><span class="sxs-lookup"><span data-stu-id="17159-366">temporarily_unavailable</span></span> | <span data-ttu-id="17159-367">The server is temporarily too busy to handle the request.</span><span class="sxs-lookup"><span data-stu-id="17159-367">The server is temporarily too busy to handle the request.</span></span>                                                            | <span data-ttu-id="17159-368">Retry the request.</span><span class="sxs-lookup"><span data-stu-id="17159-368">Retry the request.</span></span> <span data-ttu-id="17159-369">The client application might explain to the user that its response is delayed due to a temporary condition.</span><span class="sxs-lookup"><span data-stu-id="17159-369">The client application might explain to the user that its response is delayed due to a temporary condition.</span></span>                                                                                                                |

## <a name="use-the-access-token"></a><span data-ttu-id="17159-370">Use the access token</span><span class="sxs-lookup"><span data-stu-id="17159-370">Use the access token</span></span>
<span data-ttu-id="17159-371">Now that you've successfully acquired an `access_token`, you can use the token in requests to Web APIs by including it in the `Authorization` header:</span><span class="sxs-lookup"><span data-stu-id="17159-371">Now that you've successfully acquired an `access_token`, you can use the token in requests to Web APIs by including it in the `Authorization` header:</span></span>

> [!TIP]
> <span data-ttu-id="17159-372">Execute this request in Postman!</span><span class="sxs-lookup"><span data-stu-id="17159-372">Execute this request in Postman!</span></span> <span data-ttu-id="17159-373">(Replace the `Authorization` header first) [![Run in Postman](./media/v2-oauth2-auth-code-flow/runInPostman.png)](https://app.getpostman.com/run-collection/8f5715ec514865a07e6a)</span><span class="sxs-lookup"><span data-stu-id="17159-373">(Replace the `Authorization` header first) [![Run in Postman](./media/v2-oauth2-auth-code-flow/runInPostman.png)](https://app.getpostman.com/run-collection/8f5715ec514865a07e6a)</span></span>
> 
> 

```
GET /v1.0/me/messages
Host: https://graph.microsoft.com
Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...
```

## <a name="refresh-the-access-token"></a><span data-ttu-id="17159-374">Refresh the access token</span><span class="sxs-lookup"><span data-stu-id="17159-374">Refresh the access token</span></span>
<span data-ttu-id="17159-375">Access_tokens are short lived, and you must refresh them after they expire to continue accessing resources.</span><span class="sxs-lookup"><span data-stu-id="17159-375">Access_tokens are short lived, and you must refresh them after they expire to continue accessing resources.</span></span> <span data-ttu-id="17159-376">You can do so by submitting another `POST` request to the `/token` endpoint, this time providing the `refresh_token` instead of the `code`:</span><span class="sxs-lookup"><span data-stu-id="17159-376">You can do so by submitting another `POST` request to the `/token` endpoint, this time providing the `refresh_token` instead of the `code`:</span></span>

```
// Line breaks for legibility only

POST /{tenant}/oauth2/v2.0/token HTTP/1.1
Host: https://login.microsoftonline.com
Content-Type: application/x-www-form-urlencoded

client_id=6731de76-14a6-49ae-97bc-6eba6914391e
&scope=https%3A%2F%2Fgraph.microsoft.com%2Fmail.read
&refresh_token=OAAABAAAAiL9Kn2Z27UubvWFPbm0gLWQJVzCTE9UkP3pSx1aXxUjq...
&redirect_uri=http%3A%2F%2Flocalhost%2Fmyapp%2F
&grant_type=refresh_token
&client_secret=JqQX2PNo9bpM0uEihUPzyrh      // NOTE: Only required for web apps
```

> [!TIP]
> <span data-ttu-id="17159-377">Try executing this request in Postman!</span><span class="sxs-lookup"><span data-stu-id="17159-377">Try executing this request in Postman!</span></span> <span data-ttu-id="17159-378">(Don't forget to replace the `refresh_token`) [![Run in Postman](./media/v2-oauth2-auth-code-flow/runInPostman.png)](https://app.getpostman.com/run-collection/8f5715ec514865a07e6a)</span><span class="sxs-lookup"><span data-stu-id="17159-378">(Don't forget to replace the `refresh_token`) [![Run in Postman](./media/v2-oauth2-auth-code-flow/runInPostman.png)](https://app.getpostman.com/run-collection/8f5715ec514865a07e6a)</span></span>
> 
> 

| <span data-ttu-id="17159-379">Parameter</span><span class="sxs-lookup"><span data-stu-id="17159-379">Parameter</span></span>     |                       | <span data-ttu-id="17159-380">Description</span><span class="sxs-lookup"><span data-stu-id="17159-380">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
|---------------|-----------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="17159-381">tenant</span><span class="sxs-lookup"><span data-stu-id="17159-381">tenant</span></span>        | <span data-ttu-id="17159-382">required</span><span class="sxs-lookup"><span data-stu-id="17159-382">required</span></span>              | <span data-ttu-id="17159-383">The `{tenant}` value in the path of the request can be used to control who can sign into the application.</span><span class="sxs-lookup"><span data-stu-id="17159-383">The `{tenant}` value in the path of the request can be used to control who can sign into the application.</span></span> <span data-ttu-id="17159-384">The allowed values are `common`, `organizations`, `consumers`, and tenant identifiers.</span><span class="sxs-lookup"><span data-stu-id="17159-384">The allowed values are `common`, `organizations`, `consumers`, and tenant identifiers.</span></span> <span data-ttu-id="17159-385">For more detail, see [protocol basics](active-directory-v2-protocols.md#endpoints).</span><span class="sxs-lookup"><span data-stu-id="17159-385">For more detail, see [protocol basics](active-directory-v2-protocols.md#endpoints).</span></span>                                                                                                                                                                                  |
| <span data-ttu-id="17159-386">client_id</span><span class="sxs-lookup"><span data-stu-id="17159-386">client_id</span></span>     | <span data-ttu-id="17159-387">required</span><span class="sxs-lookup"><span data-stu-id="17159-387">required</span></span>              | <span data-ttu-id="17159-388">The Application ID that the registration portal ([apps.dev.microsoft.com](https://apps.dev.microsoft.com/?referrer=https://azure.microsoft.com/documentation/articles&deeplink=/appList)) assigned your app.</span><span class="sxs-lookup"><span data-stu-id="17159-388">The Application ID that the registration portal ([apps.dev.microsoft.com](https://apps.dev.microsoft.com/?referrer=https://azure.microsoft.com/documentation/articles&deeplink=/appList)) assigned your app.</span></span>                                                                                                                                                                                                                                                            |
| <span data-ttu-id="17159-389">grant_type</span><span class="sxs-lookup"><span data-stu-id="17159-389">grant_type</span></span>    | <span data-ttu-id="17159-390">required</span><span class="sxs-lookup"><span data-stu-id="17159-390">required</span></span>              | <span data-ttu-id="17159-391">Must be `refresh_token` for this leg of the authorization code flow.</span><span class="sxs-lookup"><span data-stu-id="17159-391">Must be `refresh_token` for this leg of the authorization code flow.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                    |
| <span data-ttu-id="17159-392">scope</span><span class="sxs-lookup"><span data-stu-id="17159-392">scope</span></span>         | <span data-ttu-id="17159-393">required</span><span class="sxs-lookup"><span data-stu-id="17159-393">required</span></span>              | <span data-ttu-id="17159-394">A space-separated list of scopes.</span><span class="sxs-lookup"><span data-stu-id="17159-394">A space-separated list of scopes.</span></span> <span data-ttu-id="17159-395">The scopes requested in this leg must be equivalent to or a subset of the scopes requested in the original authorization_code request leg.</span><span class="sxs-lookup"><span data-stu-id="17159-395">The scopes requested in this leg must be equivalent to or a subset of the scopes requested in the original authorization_code request leg.</span></span> <span data-ttu-id="17159-396">If the scopes specified in this request span multiple resource server, then the v2.0 endpoint will return a token for the resource specified in the first scope.</span><span class="sxs-lookup"><span data-stu-id="17159-396">If the scopes specified in this request span multiple resource server, then the v2.0 endpoint will return a token for the resource specified in the first scope.</span></span> <span data-ttu-id="17159-397">For a more detailed explanation of scopes, refer to [permissions, consent, and scopes](v2-permissions-and-consent.md).</span><span class="sxs-lookup"><span data-stu-id="17159-397">For a more detailed explanation of scopes, refer to [permissions, consent, and scopes](v2-permissions-and-consent.md).</span></span> |
| <span data-ttu-id="17159-398">refresh_token</span><span class="sxs-lookup"><span data-stu-id="17159-398">refresh_token</span></span> | <span data-ttu-id="17159-399">required</span><span class="sxs-lookup"><span data-stu-id="17159-399">required</span></span>              | <span data-ttu-id="17159-400">The refresh_token that you acquired in the second leg of the flow.</span><span class="sxs-lookup"><span data-stu-id="17159-400">The refresh_token that you acquired in the second leg of the flow.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                      |
| <span data-ttu-id="17159-401">redirect_uri</span><span class="sxs-lookup"><span data-stu-id="17159-401">redirect_uri</span></span>  | <span data-ttu-id="17159-402">required</span><span class="sxs-lookup"><span data-stu-id="17159-402">required</span></span>              | <span data-ttu-id="17159-403">The same redirect_uri value that was used to acquire the authorization_code.</span><span class="sxs-lookup"><span data-stu-id="17159-403">The same redirect_uri value that was used to acquire the authorization_code.</span></span>                                                                                                                                                                                                                                                                                                                                                                                            |
| <span data-ttu-id="17159-404">client_secret</span><span class="sxs-lookup"><span data-stu-id="17159-404">client_secret</span></span> | <span data-ttu-id="17159-405">required for web apps</span><span class="sxs-lookup"><span data-stu-id="17159-405">required for web apps</span></span> | <span data-ttu-id="17159-406">The application secret that you created in the app registration portal for your app.</span><span class="sxs-lookup"><span data-stu-id="17159-406">The application secret that you created in the app registration portal for your app.</span></span> <span data-ttu-id="17159-407">It should not be used in a native  app, because client_secrets cannot be reliably stored on devices.</span><span class="sxs-lookup"><span data-stu-id="17159-407">It should not be used in a native  app, because client_secrets cannot be reliably stored on devices.</span></span> <span data-ttu-id="17159-408">It is required for web apps and web APIs, which have the ability to store the client_secret securely on the server side.</span><span class="sxs-lookup"><span data-stu-id="17159-408">It is required for web apps and web APIs, which have the ability to store the client_secret securely on the server side.</span></span>                                                                                                                                                    |

#### <a name="successful-response"></a><span data-ttu-id="17159-409">Successful response</span><span class="sxs-lookup"><span data-stu-id="17159-409">Successful response</span></span>
<span data-ttu-id="17159-410">A successful token response will look like:</span><span class="sxs-lookup"><span data-stu-id="17159-410">A successful token response will look like:</span></span>

```json
{
    "access_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...",
    "token_type": "Bearer",
    "expires_in": 3599,
    "scope": "https%3A%2F%2Fgraph.microsoft.com%2Fmail.read",
    "refresh_token": "AwABAAAAvPM1KaPlrEqdFSBzjqfTGAMxZGUTdM0t4B4...",
    "id_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJub25lIn0.eyJhdWQiOiIyZDRkMTFhMi1mODE0LTQ2YTctOD...",
}
```
| <span data-ttu-id="17159-411">Parameter</span><span class="sxs-lookup"><span data-stu-id="17159-411">Parameter</span></span>     | <span data-ttu-id="17159-412">Description</span><span class="sxs-lookup"><span data-stu-id="17159-412">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                              |
|---------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="17159-413">access_token</span><span class="sxs-lookup"><span data-stu-id="17159-413">access_token</span></span>  | <span data-ttu-id="17159-414">The requested access token.</span><span class="sxs-lookup"><span data-stu-id="17159-414">The requested access token.</span></span> <span data-ttu-id="17159-415">The  app can use this token to authenticate to the secured resource, such as a web API.</span><span class="sxs-lookup"><span data-stu-id="17159-415">The  app can use this token to authenticate to the secured resource, such as a web API.</span></span>                                                                                                                                                                                                                                                                                                                                     |
| <span data-ttu-id="17159-416">token_type</span><span class="sxs-lookup"><span data-stu-id="17159-416">token_type</span></span>    | <span data-ttu-id="17159-417">Indicates the token type value.</span><span class="sxs-lookup"><span data-stu-id="17159-417">Indicates the token type value.</span></span> <span data-ttu-id="17159-418">The only type that Azure AD supports is Bearer</span><span class="sxs-lookup"><span data-stu-id="17159-418">The only type that Azure AD supports is Bearer</span></span>                                                                                                                                                                                                                                                                                                                                                                           |
| <span data-ttu-id="17159-419">expires_in</span><span class="sxs-lookup"><span data-stu-id="17159-419">expires_in</span></span>    | <span data-ttu-id="17159-420">How long the access token is valid (in seconds).</span><span class="sxs-lookup"><span data-stu-id="17159-420">How long the access token is valid (in seconds).</span></span>                                                                                                                                                                                                                                                                                                                                                                                                        |
| <span data-ttu-id="17159-421">scope</span><span class="sxs-lookup"><span data-stu-id="17159-421">scope</span></span>         | <span data-ttu-id="17159-422">The scopes that the access_token is valid for.</span><span class="sxs-lookup"><span data-stu-id="17159-422">The scopes that the access_token is valid for.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                          |
| <span data-ttu-id="17159-423">refresh_token</span><span class="sxs-lookup"><span data-stu-id="17159-423">refresh_token</span></span> | <span data-ttu-id="17159-424">A new OAuth 2.0 refresh token.</span><span class="sxs-lookup"><span data-stu-id="17159-424">A new OAuth 2.0 refresh token.</span></span> <span data-ttu-id="17159-425">You should replace the old refresh token with this newly acquired refresh token to ensure your refresh tokens remain valid for as long as possible.</span><span class="sxs-lookup"><span data-stu-id="17159-425">You should replace the old refresh token with this newly acquired refresh token to ensure your refresh tokens remain valid for as long as possible.</span></span> <br> <span data-ttu-id="17159-426">**Note:** Only provided if `offline_access` scope was requested.</span><span class="sxs-lookup"><span data-stu-id="17159-426">**Note:** Only provided if `offline_access` scope was requested.</span></span>                                                                                                                                                                                                |
| <span data-ttu-id="17159-427">id_token</span><span class="sxs-lookup"><span data-stu-id="17159-427">id_token</span></span>      | <span data-ttu-id="17159-428">An unsigned JSON Web Token (JWT).</span><span class="sxs-lookup"><span data-stu-id="17159-428">An unsigned JSON Web Token (JWT).</span></span> <span data-ttu-id="17159-429">The  app can base64Url decode the segments of this token to request information about the user who signed in.</span><span class="sxs-lookup"><span data-stu-id="17159-429">The  app can base64Url decode the segments of this token to request information about the user who signed in.</span></span> <span data-ttu-id="17159-430">The  app can cache the values and display them, but it should not rely on them for any authorization or security boundaries.</span><span class="sxs-lookup"><span data-stu-id="17159-430">The  app can cache the values and display them, but it should not rely on them for any authorization or security boundaries.</span></span> <span data-ttu-id="17159-431">For more information about id_tokens, see the [v2.0 endpoint token reference](v2-id-and-access-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="17159-431">For more information about id_tokens, see the [v2.0 endpoint token reference](v2-id-and-access-tokens.md).</span></span> <br> <span data-ttu-id="17159-432">**Note:** Only provided if `openid` scope was requested.</span><span class="sxs-lookup"><span data-stu-id="17159-432">**Note:** Only provided if `openid` scope was requested.</span></span> |

#### <a name="error-response"></a><span data-ttu-id="17159-433">Error response</span><span class="sxs-lookup"><span data-stu-id="17159-433">Error response</span></span>

```json
{
  "error": "invalid_scope",
  "error_description": "AADSTS70011: The provided value for the input parameter 'scope' is not valid. The scope https://foo.microsoft.com/mail.read is not valid.\r\nTrace ID: 255d1aef-8c98-452f-ac51-23d051240864\r\nCorrelation ID: fb3d2015-bc17-4bb9-bb85-30c5cf1aaaa7\r\nTimestamp: 2016-01-09 02:02:12Z",
  "error_codes": [
    70011
  ],
  "timestamp": "2016-01-09 02:02:12Z",
  "trace_id": "255d1aef-8c98-452f-ac51-23d051240864",
  "correlation_id": "fb3d2015-bc17-4bb9-bb85-30c5cf1aaaa7"
}
```

| <span data-ttu-id="17159-434">Parameter</span><span class="sxs-lookup"><span data-stu-id="17159-434">Parameter</span></span>         | <span data-ttu-id="17159-435">Description</span><span class="sxs-lookup"><span data-stu-id="17159-435">Description</span></span>                                                                                                       |
|-------------------|-------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="17159-436">error</span><span class="sxs-lookup"><span data-stu-id="17159-436">error</span></span>             | <span data-ttu-id="17159-437">An error code string that can be used to classify types of errors that occur, and can be used to react to errors.</span><span class="sxs-lookup"><span data-stu-id="17159-437">An error code string that can be used to classify types of errors that occur, and can be used to react to errors.</span></span> |
| <span data-ttu-id="17159-438">error_description</span><span class="sxs-lookup"><span data-stu-id="17159-438">error_description</span></span> | <span data-ttu-id="17159-439">A specific error message that can help a developer identify the root cause of an authentication error.</span><span class="sxs-lookup"><span data-stu-id="17159-439">A specific error message that can help a developer identify the root cause of an authentication error.</span></span>           |
| <span data-ttu-id="17159-440">error_codes</span><span class="sxs-lookup"><span data-stu-id="17159-440">error_codes</span></span> |<span data-ttu-id="17159-441">A list of STS-specific error codes that can help in diagnostics.</span><span class="sxs-lookup"><span data-stu-id="17159-441">A list of STS-specific error codes that can help in diagnostics.</span></span> |
| <span data-ttu-id="17159-442">timestamp</span><span class="sxs-lookup"><span data-stu-id="17159-442">timestamp</span></span> |<span data-ttu-id="17159-443">The time at which the error occurred.</span><span class="sxs-lookup"><span data-stu-id="17159-443">The time at which the error occurred.</span></span> |
| <span data-ttu-id="17159-444">trace_id</span><span class="sxs-lookup"><span data-stu-id="17159-444">trace_id</span></span> |<span data-ttu-id="17159-445">A unique identifier for the request that can help in diagnostics.</span><span class="sxs-lookup"><span data-stu-id="17159-445">A unique identifier for the request that can help in diagnostics.</span></span> |
| <span data-ttu-id="17159-446">correlation_id</span><span class="sxs-lookup"><span data-stu-id="17159-446">correlation_id</span></span> |<span data-ttu-id="17159-447">A unique identifier for the request that can help in diagnostics across components.</span><span class="sxs-lookup"><span data-stu-id="17159-447">A unique identifier for the request that can help in diagnostics across components.</span></span> |

<span data-ttu-id="17159-448">For a description of the error codes and the recommended client action, see [Error codes for token endpoint errors](#error-codes-for-token-endpoint-errors).</span><span class="sxs-lookup"><span data-stu-id="17159-448">For a description of the error codes and the recommended client action, see [Error codes for token endpoint errors](#error-codes-for-token-endpoint-errors).</span></span>
