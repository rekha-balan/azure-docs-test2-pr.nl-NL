---
title: FAQs and known issues with managed identities for Azure resources
description: Known issues with managed identities for Azure resources.
services: active-directory
documentationcenter: ''
author: daveba
manager: mtillman
editor: ''
ms.assetid: 2097381a-a7ec-4e3b-b4ff-5d2fb17403b6
ms.service: active-directory
ms.component: msi
ms.devlang: ''
ms.topic: conceptual
ms.tgt_pltfrm: ''
ms.workload: identity
ms.date: 12/12/2017
ms.author: daveba
ms.openlocfilehash: 2a759aea4288af2e90335b47244408d6a537e24b
ms.sourcegitcommit: d1451406a010fd3aa854dc8e5b77dc5537d8050e
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 09/13/2018
ms.locfileid: "44869203"
---
# <a name="faqs-and-known-issues-with-managed-identities-for-azure-resources"></a><span data-ttu-id="c37e9-103">FAQs and known issues with managed identities for Azure resources</span><span class="sxs-lookup"><span data-stu-id="c37e9-103">FAQs and known issues with managed identities for Azure resources</span></span>

[!INCLUDE [preview-notice](../../../includes/active-directory-msi-preview-notice.md)]

## <a name="frequently-asked-questions-faqs"></a><span data-ttu-id="c37e9-104">Frequently Asked Questions (FAQs)</span><span class="sxs-lookup"><span data-stu-id="c37e9-104">Frequently Asked Questions (FAQs)</span></span>

> [!NOTE]
> <span data-ttu-id="c37e9-105">Managed identities for Azure resources is the new name for the service formerly known as Managed Service Identity (MSI).</span><span class="sxs-lookup"><span data-stu-id="c37e9-105">Managed identities for Azure resources is the new name for the service formerly known as Managed Service Identity (MSI).</span></span>

### <a name="does-managed-identities-for-azure-resources-work-with-azure-cloud-services"></a><span data-ttu-id="c37e9-106">Does managed identities for Azure resources work with Azure Cloud Services?</span><span class="sxs-lookup"><span data-stu-id="c37e9-106">Does managed identities for Azure resources work with Azure Cloud Services?</span></span>

<span data-ttu-id="c37e9-107">No, there are no plans to support managed identities for Azure resources in Azure Cloud Services.</span><span class="sxs-lookup"><span data-stu-id="c37e9-107">No, there are no plans to support managed identities for Azure resources in Azure Cloud Services.</span></span>

### <a name="does-managed-identities-for-azure-resources-work-with-the-active-directory-authentication-library-adal-or-the-microsoft-authentication-library-msal"></a><span data-ttu-id="c37e9-108">Does managed identities for Azure resources work with the Active Directory Authentication Library (ADAL) or the Microsoft Authentication Library (MSAL)?</span><span class="sxs-lookup"><span data-stu-id="c37e9-108">Does managed identities for Azure resources work with the Active Directory Authentication Library (ADAL) or the Microsoft Authentication Library (MSAL)?</span></span>

<span data-ttu-id="c37e9-109">No, managed identities for Azure resources is not yet integrated with ADAL or MSAL.</span><span class="sxs-lookup"><span data-stu-id="c37e9-109">No, managed identities for Azure resources is not yet integrated with ADAL or MSAL.</span></span> <span data-ttu-id="c37e9-110">For details on acquiring a token for managed identities for Azure resources using the REST endpoint, see [How to use managed identities for Azure resources on an Azure VM to acquire an access token ](how-to-use-vm-token.md).</span><span class="sxs-lookup"><span data-stu-id="c37e9-110">For details on acquiring a token for managed identities for Azure resources using the REST endpoint, see [How to use managed identities for Azure resources on an Azure VM to acquire an access token ](how-to-use-vm-token.md).</span></span>

### <a name="what-is-the-security-boundary-of-managed-identities-for-azure-resources"></a><span data-ttu-id="c37e9-111">What is the security boundary of managed identities for Azure resources?</span><span class="sxs-lookup"><span data-stu-id="c37e9-111">What is the security boundary of managed identities for Azure resources?</span></span>

<span data-ttu-id="c37e9-112">The security boundary of the identity is the resource to which it is attached to.</span><span class="sxs-lookup"><span data-stu-id="c37e9-112">The security boundary of the identity is the resource to which it is attached to.</span></span> <span data-ttu-id="c37e9-113">For example, the security boundary for a Virtual Machine with managed identities for Azure resources enabled, is the Virtual Machine.</span><span class="sxs-lookup"><span data-stu-id="c37e9-113">For example, the security boundary for a Virtual Machine with managed identities for Azure resources enabled, is the Virtual Machine.</span></span> <span data-ttu-id="c37e9-114">Any code running on that VM, is able to call the managed identities for Azure resources endpoint and request tokens.</span><span class="sxs-lookup"><span data-stu-id="c37e9-114">Any code running on that VM, is able to call the managed identities for Azure resources endpoint and request tokens.</span></span> <span data-ttu-id="c37e9-115">It is the similar experience with other resources that support managed identities for Azure resources.</span><span class="sxs-lookup"><span data-stu-id="c37e9-115">It is the similar experience with other resources that support managed identities for Azure resources.</span></span>

### <a name="should-i-use-the-managed-identities-for-azure-resources-vm-imds-endpoint-or-the-vm-extension-endpoint"></a><span data-ttu-id="c37e9-116">Should I use the managed identities for Azure resources VM IMDS endpoint or the VM extension endpoint?</span><span class="sxs-lookup"><span data-stu-id="c37e9-116">Should I use the managed identities for Azure resources VM IMDS endpoint or the VM extension endpoint?</span></span>

<span data-ttu-id="c37e9-117">When using managed identities for Azure resources with VMs, we encourage using the managed identities for Azure resources IMDS endpoint.</span><span class="sxs-lookup"><span data-stu-id="c37e9-117">When using managed identities for Azure resources with VMs, we encourage using the managed identities for Azure resources IMDS endpoint.</span></span> <span data-ttu-id="c37e9-118">The Azure Instance Metadata Service is a REST Endpoint accessible to all IaaS VMs created via the Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="c37e9-118">The Azure Instance Metadata Service is a REST Endpoint accessible to all IaaS VMs created via the Azure Resource Manager.</span></span> <span data-ttu-id="c37e9-119">Some of the benefits of using managed identities for Azure resources over IMDS are:</span><span class="sxs-lookup"><span data-stu-id="c37e9-119">Some of the benefits of using managed identities for Azure resources over IMDS are:</span></span>

1. <span data-ttu-id="c37e9-120">All Azure IaaS supported operating systems can use managed identities for Azure resources over IMDS.</span><span class="sxs-lookup"><span data-stu-id="c37e9-120">All Azure IaaS supported operating systems can use managed identities for Azure resources over IMDS.</span></span> 
2. <span data-ttu-id="c37e9-121">No longer need to install an extension on your VM to enable managed identities for Azure resources.</span><span class="sxs-lookup"><span data-stu-id="c37e9-121">No longer need to install an extension on your VM to enable managed identities for Azure resources.</span></span> 
3. <span data-ttu-id="c37e9-122">The certificates used by managed identities for Azure resources are no longer present in the VM.</span><span class="sxs-lookup"><span data-stu-id="c37e9-122">The certificates used by managed identities for Azure resources are no longer present in the VM.</span></span> 
4. <span data-ttu-id="c37e9-123">The IMDS endpoint is a well-known non-routable IP address, only available from within the VM.</span><span class="sxs-lookup"><span data-stu-id="c37e9-123">The IMDS endpoint is a well-known non-routable IP address, only available from within the VM.</span></span> 

<span data-ttu-id="c37e9-124">The managed identities for Azure resources VM extension is still available to be used today; however, moving forward we will default to using the IMDS endpoint.</span><span class="sxs-lookup"><span data-stu-id="c37e9-124">The managed identities for Azure resources VM extension is still available to be used today; however, moving forward we will default to using the IMDS endpoint.</span></span> <span data-ttu-id="c37e9-125">The managed identities for Azure resources VM extension will be deprecated in January 2019.</span><span class="sxs-lookup"><span data-stu-id="c37e9-125">The managed identities for Azure resources VM extension will be deprecated in January 2019.</span></span> 

<span data-ttu-id="c37e9-126">For more information on Azure Instance Metadata Service, see [IMDS documentation](https://docs.microsoft.com/azure/virtual-machines/windows/instance-metadata-service)</span><span class="sxs-lookup"><span data-stu-id="c37e9-126">For more information on Azure Instance Metadata Service, see [IMDS documentation](https://docs.microsoft.com/azure/virtual-machines/windows/instance-metadata-service)</span></span>

### <a name="what-are-the-supported-linux-distributions"></a><span data-ttu-id="c37e9-127">What are the supported Linux distributions?</span><span class="sxs-lookup"><span data-stu-id="c37e9-127">What are the supported Linux distributions?</span></span>

<span data-ttu-id="c37e9-128">All Linux distributions supported by Azure IaaS can be used with managed identities for Azure resources via the IMDS endpoint.</span><span class="sxs-lookup"><span data-stu-id="c37e9-128">All Linux distributions supported by Azure IaaS can be used with managed identities for Azure resources via the IMDS endpoint.</span></span> 

<span data-ttu-id="c37e9-129">Note: The managed identities for Azure resources VM Extension (planned for deprecation in January 2019) only supports the following Linux distributions:</span><span class="sxs-lookup"><span data-stu-id="c37e9-129">Note: The managed identities for Azure resources VM Extension (planned for deprecation in January 2019) only supports the following Linux distributions:</span></span>
- <span data-ttu-id="c37e9-130">CoreOS Stable</span><span class="sxs-lookup"><span data-stu-id="c37e9-130">CoreOS Stable</span></span>
- <span data-ttu-id="c37e9-131">CentOS 7.1</span><span class="sxs-lookup"><span data-stu-id="c37e9-131">CentOS 7.1</span></span>
- <span data-ttu-id="c37e9-132">Red Hat 7.2</span><span class="sxs-lookup"><span data-stu-id="c37e9-132">Red Hat 7.2</span></span>
- <span data-ttu-id="c37e9-133">Ubuntu 15.04</span><span class="sxs-lookup"><span data-stu-id="c37e9-133">Ubuntu 15.04</span></span>
- <span data-ttu-id="c37e9-134">Ubuntu 16.04</span><span class="sxs-lookup"><span data-stu-id="c37e9-134">Ubuntu 16.04</span></span>

<span data-ttu-id="c37e9-135">Other Linux distributions are currently not supported and extension might fail on unsupported distributions.</span><span class="sxs-lookup"><span data-stu-id="c37e9-135">Other Linux distributions are currently not supported and extension might fail on unsupported distributions.</span></span>

<span data-ttu-id="c37e9-136">The extension works on CentOS 6.9.</span><span class="sxs-lookup"><span data-stu-id="c37e9-136">The extension works on CentOS 6.9.</span></span> <span data-ttu-id="c37e9-137">However, due to lack of system support in 6.9, the extension will not auto restart if crashed or stopped.</span><span class="sxs-lookup"><span data-stu-id="c37e9-137">However, due to lack of system support in 6.9, the extension will not auto restart if crashed or stopped.</span></span> <span data-ttu-id="c37e9-138">It restarts when the VM restarts.</span><span class="sxs-lookup"><span data-stu-id="c37e9-138">It restarts when the VM restarts.</span></span> <span data-ttu-id="c37e9-139">To restart the extension manually, see [How do you restart the managed identities for Azure resources extension?](#how-do-you-restart-the-managed-identities-for-Azure-resources-extension)</span><span class="sxs-lookup"><span data-stu-id="c37e9-139">To restart the extension manually, see [How do you restart the managed identities for Azure resources extension?](#how-do-you-restart-the-managed-identities-for-Azure-resources-extension)</span></span>

### <a name="how-do-you-restart-the-managed-identities-for-azure-resources-extension"></a><span data-ttu-id="c37e9-140">How do you restart the managed identities for Azure resources extension?</span><span class="sxs-lookup"><span data-stu-id="c37e9-140">How do you restart the managed identities for Azure resources extension?</span></span>
<span data-ttu-id="c37e9-141">On Windows and certain versions of Linux, if the extension stops, the following cmdlet may be used to manually restart it:</span><span class="sxs-lookup"><span data-stu-id="c37e9-141">On Windows and certain versions of Linux, if the extension stops, the following cmdlet may be used to manually restart it:</span></span>

```powershell
Set-AzureRmVMExtension -Name <extension name>  -Type <extension Type>  -Location <location> -Publisher Microsoft.ManagedIdentity -VMName <vm name> -ResourceGroupName <resource group name> -ForceRerun <Any string different from any last value used>
```

<span data-ttu-id="c37e9-142">Where:</span><span class="sxs-lookup"><span data-stu-id="c37e9-142">Where:</span></span> 
- <span data-ttu-id="c37e9-143">Extension name and type for Windows is: ManagedIdentityExtensionForWindows</span><span class="sxs-lookup"><span data-stu-id="c37e9-143">Extension name and type for Windows is: ManagedIdentityExtensionForWindows</span></span>
- <span data-ttu-id="c37e9-144">Extension name and type for Linux is: ManagedIdentityExtensionForLinux</span><span class="sxs-lookup"><span data-stu-id="c37e9-144">Extension name and type for Linux is: ManagedIdentityExtensionForLinux</span></span>

## <a name="known-issues"></a><span data-ttu-id="c37e9-145">Known issues</span><span class="sxs-lookup"><span data-stu-id="c37e9-145">Known issues</span></span>

### <a name="automation-script-fails-when-attempting-schema-export-for-managed-identities-for-azure-resources-extension"></a><span data-ttu-id="c37e9-146">"Automation script" fails when attempting schema export for managed identities for Azure resources extension</span><span class="sxs-lookup"><span data-stu-id="c37e9-146">"Automation script" fails when attempting schema export for managed identities for Azure resources extension</span></span>

<span data-ttu-id="c37e9-147">When managed identities for Azure resources is enabled on a VM, the following error is shown when attempting to use the “Automation script” feature for the VM, or its resource group:</span><span class="sxs-lookup"><span data-stu-id="c37e9-147">When managed identities for Azure resources is enabled on a VM, the following error is shown when attempting to use the “Automation script” feature for the VM, or its resource group:</span></span>

![Managed identities for Azure resources automation script export error](./media/msi-known-issues/automation-script-export-error.png)

<span data-ttu-id="c37e9-149">The managed identities for Azure resources VM extension (planned for deprecation in January 2019) does not currently support the ability to export its schema to a resource group template.</span><span class="sxs-lookup"><span data-stu-id="c37e9-149">The managed identities for Azure resources VM extension (planned for deprecation in January 2019) does not currently support the ability to export its schema to a resource group template.</span></span> <span data-ttu-id="c37e9-150">As a result, the generated template does not show configuration parameters to enable managed identities for Azure resources on the resource.</span><span class="sxs-lookup"><span data-stu-id="c37e9-150">As a result, the generated template does not show configuration parameters to enable managed identities for Azure resources on the resource.</span></span> <span data-ttu-id="c37e9-151">These sections can be added manually by following the examples in [Configure managed identities for Azure resources on an Azure VM using a templates](qs-configure-template-windows-vm.md).</span><span class="sxs-lookup"><span data-stu-id="c37e9-151">These sections can be added manually by following the examples in [Configure managed identities for Azure resources on an Azure VM using a templates](qs-configure-template-windows-vm.md).</span></span>

<span data-ttu-id="c37e9-152">When the schema export functionality becomes available for the managed identities for Azure resources VM extension (planned for deprecation in January 2019), it will be listed in [Exporting Resource Groups that contain VM extensions](../../virtual-machines/extensions/export-templates.md#supported-virtual-machine-extensions).</span><span class="sxs-lookup"><span data-stu-id="c37e9-152">When the schema export functionality becomes available for the managed identities for Azure resources VM extension (planned for deprecation in January 2019), it will be listed in [Exporting Resource Groups that contain VM extensions](../../virtual-machines/extensions/export-templates.md#supported-virtual-machine-extensions).</span></span>

### <a name="configuration-blade-does-not-appear-in-the-azure-portal"></a><span data-ttu-id="c37e9-153">Configuration blade does not appear in the Azure portal</span><span class="sxs-lookup"><span data-stu-id="c37e9-153">Configuration blade does not appear in the Azure portal</span></span>

<span data-ttu-id="c37e9-154">If the VM Configuration blade does not appear on your VM, then managed identities for Azure resources has not been enabled in the portal in your region yet.</span><span class="sxs-lookup"><span data-stu-id="c37e9-154">If the VM Configuration blade does not appear on your VM, then managed identities for Azure resources has not been enabled in the portal in your region yet.</span></span>  <span data-ttu-id="c37e9-155">Check again later.</span><span class="sxs-lookup"><span data-stu-id="c37e9-155">Check again later.</span></span>  <span data-ttu-id="c37e9-156">You can also enable managed identities for Azure resources for your VM using [PowerShell](qs-configure-powershell-windows-vm.md) or the [Azure CLI](qs-configure-cli-windows-vm.md).</span><span class="sxs-lookup"><span data-stu-id="c37e9-156">You can also enable managed identities for Azure resources for your VM using [PowerShell](qs-configure-powershell-windows-vm.md) or the [Azure CLI](qs-configure-cli-windows-vm.md).</span></span>

### <a name="cannot-assign-access-to-virtual-machines-in-the-access-control-iam-blade"></a><span data-ttu-id="c37e9-157">Cannot assign access to virtual machines in the Access Control (IAM) blade</span><span class="sxs-lookup"><span data-stu-id="c37e9-157">Cannot assign access to virtual machines in the Access Control (IAM) blade</span></span>

<span data-ttu-id="c37e9-158">If **Virtual Machine** does not appear in the Azure portal as a choice for **Assign access to** in **Access Control (IAM)** > **Add permissions**, then managed identities for Azure resources has not been enabled in the portal in your region yet.</span><span class="sxs-lookup"><span data-stu-id="c37e9-158">If **Virtual Machine** does not appear in the Azure portal as a choice for **Assign access to** in **Access Control (IAM)** > **Add permissions**, then managed identities for Azure resources has not been enabled in the portal in your region yet.</span></span> <span data-ttu-id="c37e9-159">Check again later.</span><span class="sxs-lookup"><span data-stu-id="c37e9-159">Check again later.</span></span>  <span data-ttu-id="c37e9-160">You can still select the identity for the VM for the role assignment by searching for the managed identities for Azure resources Service Principal.</span><span class="sxs-lookup"><span data-stu-id="c37e9-160">You can still select the identity for the VM for the role assignment by searching for the managed identities for Azure resources Service Principal.</span></span>  <span data-ttu-id="c37e9-161">Enter the name of the VM in the **Select** field, and the Service Principal appears in the search result.</span><span class="sxs-lookup"><span data-stu-id="c37e9-161">Enter the name of the VM in the **Select** field, and the Service Principal appears in the search result.</span></span>

### <a name="vm-fails-to-start-after-being-moved-from-resource-group-or-subscription"></a><span data-ttu-id="c37e9-162">VM fails to start after being moved from resource group or subscription</span><span class="sxs-lookup"><span data-stu-id="c37e9-162">VM fails to start after being moved from resource group or subscription</span></span>

<span data-ttu-id="c37e9-163">If you move a VM in the running state, it continues to run during the move.</span><span class="sxs-lookup"><span data-stu-id="c37e9-163">If you move a VM in the running state, it continues to run during the move.</span></span> <span data-ttu-id="c37e9-164">However, after the move, if the VM is stopped and restarted, it will fail to start.</span><span class="sxs-lookup"><span data-stu-id="c37e9-164">However, after the move, if the VM is stopped and restarted, it will fail to start.</span></span> <span data-ttu-id="c37e9-165">This issue happens because the VM is not updating the reference to the managed identities for Azure resources identity and continues to point to it in the old resource group.</span><span class="sxs-lookup"><span data-stu-id="c37e9-165">This issue happens because the VM is not updating the reference to the managed identities for Azure resources identity and continues to point to it in the old resource group.</span></span>

<span data-ttu-id="c37e9-166">**Workaround**</span><span class="sxs-lookup"><span data-stu-id="c37e9-166">**Workaround**</span></span> 
 
<span data-ttu-id="c37e9-167">Trigger an update on the VM so it can get correct values for the managed identities for Azure resources.</span><span class="sxs-lookup"><span data-stu-id="c37e9-167">Trigger an update on the VM so it can get correct values for the managed identities for Azure resources.</span></span> <span data-ttu-id="c37e9-168">You can do a VM property change to update the reference to the managed identities for Azure resources identity.</span><span class="sxs-lookup"><span data-stu-id="c37e9-168">You can do a VM property change to update the reference to the managed identities for Azure resources identity.</span></span> <span data-ttu-id="c37e9-169">For example, you can set a new tag value on the VM with the following command:</span><span class="sxs-lookup"><span data-stu-id="c37e9-169">For example, you can set a new tag value on the VM with the following command:</span></span>

```azurecli-interactive
 az  vm update -n <VM Name> -g <Resource Group> --set tags.fixVM=1
```
 
<span data-ttu-id="c37e9-170">This command sets a new tag "fixVM" with a value of 1 on the VM.</span><span class="sxs-lookup"><span data-stu-id="c37e9-170">This command sets a new tag "fixVM" with a value of 1 on the VM.</span></span> 
 
<span data-ttu-id="c37e9-171">By setting this property, the VM updates with the correct managed identities for Azure resources resource URI, and then you should be able to start the VM.</span><span class="sxs-lookup"><span data-stu-id="c37e9-171">By setting this property, the VM updates with the correct managed identities for Azure resources resource URI, and then you should be able to start the VM.</span></span> 
 
<span data-ttu-id="c37e9-172">Once the VM is started, the tag can be removed by using following command:</span><span class="sxs-lookup"><span data-stu-id="c37e9-172">Once the VM is started, the tag can be removed by using following command:</span></span>

```azurecli-interactive
az vm update -n <VM Name> -g <Resource Group> --remove tags.fixVM
```

## <a name="known-issues-with-user-assigned-identities"></a><span data-ttu-id="c37e9-173">Known issues with user-assigned Identities</span><span class="sxs-lookup"><span data-stu-id="c37e9-173">Known issues with user-assigned Identities</span></span>

- <span data-ttu-id="c37e9-174">user-assigned Identity assignments are only available for VM and VMSS.</span><span class="sxs-lookup"><span data-stu-id="c37e9-174">user-assigned Identity assignments are only available for VM and VMSS.</span></span> <span data-ttu-id="c37e9-175">IMPORTANT: user-assigned Identity assignments will change in the upcoming months.</span><span class="sxs-lookup"><span data-stu-id="c37e9-175">IMPORTANT: user-assigned Identity assignments will change in the upcoming months.</span></span>
- <span data-ttu-id="c37e9-176">Duplicate user-assigned Identities on the same VM/VMSS, will cause the VM/VMSS to fail.</span><span class="sxs-lookup"><span data-stu-id="c37e9-176">Duplicate user-assigned Identities on the same VM/VMSS, will cause the VM/VMSS to fail.</span></span> <span data-ttu-id="c37e9-177">This includes identities that are added with different casing.</span><span class="sxs-lookup"><span data-stu-id="c37e9-177">This includes identities that are added with different casing.</span></span> <span data-ttu-id="c37e9-178">e.g. MyUserAssignedIdentity and myuserassignedidentity.</span><span class="sxs-lookup"><span data-stu-id="c37e9-178">e.g. MyUserAssignedIdentity and myuserassignedidentity.</span></span> 
- <span data-ttu-id="c37e9-179">Provisioning of the VM extension (planned for deprecation in January 2019) to a VM might fail due to DNS lookup failures.</span><span class="sxs-lookup"><span data-stu-id="c37e9-179">Provisioning of the VM extension (planned for deprecation in January 2019) to a VM might fail due to DNS lookup failures.</span></span> <span data-ttu-id="c37e9-180">Restart the VM, and try again.</span><span class="sxs-lookup"><span data-stu-id="c37e9-180">Restart the VM, and try again.</span></span> 
- <span data-ttu-id="c37e9-181">Adding a 'non-existent' user-assigned identity will cause the VM to fail.</span><span class="sxs-lookup"><span data-stu-id="c37e9-181">Adding a 'non-existent' user-assigned identity will cause the VM to fail.</span></span> 
- <span data-ttu-id="c37e9-182">Creating a user-assigned identity with special characters (i.e. underscore) in the name, is not supported.</span><span class="sxs-lookup"><span data-stu-id="c37e9-182">Creating a user-assigned identity with special characters (i.e. underscore) in the name, is not supported.</span></span>
- <span data-ttu-id="c37e9-183">user-assigned identity names are restricted to 24 characters for end to end scenario.</span><span class="sxs-lookup"><span data-stu-id="c37e9-183">user-assigned identity names are restricted to 24 characters for end to end scenario.</span></span> <span data-ttu-id="c37e9-184">user-assigned identities with names longer than 24 characters will fail to be assigned.</span><span class="sxs-lookup"><span data-stu-id="c37e9-184">user-assigned identities with names longer than 24 characters will fail to be assigned.</span></span>
- <span data-ttu-id="c37e9-185">If using the managed identity virtual machine extension (planned for deprecation in January 2019), the supported limit is 32 user-assigned managed identities.</span><span class="sxs-lookup"><span data-stu-id="c37e9-185">If using the managed identity virtual machine extension (planned for deprecation in January 2019), the supported limit is 32 user-assigned managed identities.</span></span> <span data-ttu-id="c37e9-186">Without the managed identity virtual machine extension, the supported limit is 512.</span><span class="sxs-lookup"><span data-stu-id="c37e9-186">Without the managed identity virtual machine extension, the supported limit is 512.</span></span>  
- <span data-ttu-id="c37e9-187">When adding a second user-assigned identity, the clientID might not be available to requests tokens for the VM extension.</span><span class="sxs-lookup"><span data-stu-id="c37e9-187">When adding a second user-assigned identity, the clientID might not be available to requests tokens for the VM extension.</span></span> <span data-ttu-id="c37e9-188">As a mitigation, restart the managed identities for Azure resources VM extension with the following two bash commands:</span><span class="sxs-lookup"><span data-stu-id="c37e9-188">As a mitigation, restart the managed identities for Azure resources VM extension with the following two bash commands:</span></span>
 - `sudo bash -c "/var/lib/waagent/Microsoft.ManagedIdentity.ManagedIdentityExtensionForLinux-1.0.0.8/msi-extension-handler disable"`
 - `sudo bash -c "/var/lib/waagent/Microsoft.ManagedIdentity.ManagedIdentityExtensionForLinux-1.0.0.8/msi-extension-handler enable"`
- <span data-ttu-id="c37e9-189">When a VM has a user-assigned identity but no system-assigned identity, the portal UI will show managed identities for Azure resources as disabled.</span><span class="sxs-lookup"><span data-stu-id="c37e9-189">When a VM has a user-assigned identity but no system-assigned identity, the portal UI will show managed identities for Azure resources as disabled.</span></span> <span data-ttu-id="c37e9-190">To enable the system-assigned identity, use an Azure Resource Manager template, an Azure CLI, or an SDK.</span><span class="sxs-lookup"><span data-stu-id="c37e9-190">To enable the system-assigned identity, use an Azure Resource Manager template, an Azure CLI, or an SDK.</span></span>
