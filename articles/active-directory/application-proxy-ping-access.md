---
title: PingAccess for Azure AD Application Proxy | Microsoft Docs
description: Publish applications with PingAccess and App Proxy to support header-based authentication.
services: active-directory
documentationcenter: ''
author: kgremban
manager: femila
ms.assetid: ''
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 03/21/2017
ms.author: kgremban
ms.openlocfilehash: d2c74af80fe6342979a123231e711542d12719e4
ms.sourcegitcommit: 5b9d839c0c0a94b293fdafe1d6e5429506c07e05
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 08/02/2018
ms.locfileid: "44669442"
---
# <a name="publish-applications-that-support-header-based-authentication-with-pingaccess-for-azure-ad"></a><span data-ttu-id="980ef-103">Publish applications that support header-based authentication with PingAccess for Azure AD</span><span class="sxs-lookup"><span data-stu-id="980ef-103">Publish applications that support header-based authentication with PingAccess for Azure AD</span></span>

<span data-ttu-id="980ef-104">Azure Active Directory Application Proxy and PingAccess have partnered together to provide Azure Active Directory customers with access to even more applications.</span><span class="sxs-lookup"><span data-stu-id="980ef-104">Azure Active Directory Application Proxy and PingAccess have partnered together to provide Azure Active Directory customers with access to even more applications.</span></span> <span data-ttu-id="980ef-105">PingAccess expands the [existing Application Proxy offerings](active-directory-application-proxy-get-started.md) to include remote access to applications that use headers for authentication.</span><span class="sxs-lookup"><span data-stu-id="980ef-105">PingAccess expands the [existing Application Proxy offerings](active-directory-application-proxy-get-started.md) to include remote access to applications that use headers for authentication.</span></span> 

## <a name="what-is-pingaccess-for-azure-ad"></a><span data-ttu-id="980ef-106">What is PingAccess for Azure AD?</span><span class="sxs-lookup"><span data-stu-id="980ef-106">What is PingAccess for Azure AD?</span></span>

<span data-ttu-id="980ef-107">To give your users access to apps that use headers for authentication, you publish the app for remote access in both Application Proxy and PingAccess.</span><span class="sxs-lookup"><span data-stu-id="980ef-107">To give your users access to apps that use headers for authentication, you publish the app for remote access in both Application Proxy and PingAccess.</span></span> <span data-ttu-id="980ef-108">Application Proxy treats these apps like any other, using Azure AD to authenticate access and then passing traffic through the connector service.</span><span class="sxs-lookup"><span data-stu-id="980ef-108">Application Proxy treats these apps like any other, using Azure AD to authenticate access and then passing traffic through the connector service.</span></span> <span data-ttu-id="980ef-109">PingAccess sits in front of the apps and translates the access token from Azure AD into a header so that the application receives the authentication in the format it can read.</span><span class="sxs-lookup"><span data-stu-id="980ef-109">PingAccess sits in front of the apps and translates the access token from Azure AD into a header so that the application receives the authentication in the format it can read.</span></span> 

<span data-ttu-id="980ef-110">Your users won’t notice anything different when they sign in to use your corporate apps.</span><span class="sxs-lookup"><span data-stu-id="980ef-110">Your users won’t notice anything different when they sign in to use your corporate apps.</span></span> <span data-ttu-id="980ef-111">They can still work from anywhere on any device.</span><span class="sxs-lookup"><span data-stu-id="980ef-111">They can still work from anywhere on any device.</span></span> <span data-ttu-id="980ef-112">When your users are at the office, neither Application Proxy nor PingAccess intercept the traffic, so your users get the same experience as always.</span><span class="sxs-lookup"><span data-stu-id="980ef-112">When your users are at the office, neither Application Proxy nor PingAccess intercept the traffic, so your users get the same experience as always.</span></span>

<span data-ttu-id="980ef-113">Since the Application Proxy connectors direct remote traffic to all apps regardless of their authentication type, they’ll continue to load balance automatically, as well.</span><span class="sxs-lookup"><span data-stu-id="980ef-113">Since the Application Proxy connectors direct remote traffic to all apps regardless of their authentication type, they’ll continue to load balance automatically, as well.</span></span> 

## <a name="how-do-i-get-access"></a><span data-ttu-id="980ef-114">How do I get access?</span><span class="sxs-lookup"><span data-stu-id="980ef-114">How do I get access?</span></span>

<span data-ttu-id="980ef-115">Since this scenario is offered through a partnership between Azure Active Directory and PingAccess, you need licenses for both services.</span><span class="sxs-lookup"><span data-stu-id="980ef-115">Since this scenario is offered through a partnership between Azure Active Directory and PingAccess, you need licenses for both services.</span></span> <span data-ttu-id="980ef-116">Azure Active Directory Premium subscriptions come with a starter PingAccess license so that you can configure up to 20 applications with this flow.</span><span class="sxs-lookup"><span data-stu-id="980ef-116">Azure Active Directory Premium subscriptions come with a starter PingAccess license so that you can configure up to 20 applications with this flow.</span></span> 

<span data-ttu-id="980ef-117">For more information, see [Azure Active Directory editions](active-directory-editions.md).</span><span class="sxs-lookup"><span data-stu-id="980ef-117">For more information, see [Azure Active Directory editions](active-directory-editions.md).</span></span>

## <a name="publish-your-first-application"></a><span data-ttu-id="980ef-118">Publish your first application</span><span class="sxs-lookup"><span data-stu-id="980ef-118">Publish your first application</span></span>

<span data-ttu-id="980ef-119">This article is intended for people who are publishing an app with this scenario for the first time.</span><span class="sxs-lookup"><span data-stu-id="980ef-119">This article is intended for people who are publishing an app with this scenario for the first time.</span></span> <span data-ttu-id="980ef-120">It walks through how to get started with both Application and PingAccess, in addition to the publishing steps.</span><span class="sxs-lookup"><span data-stu-id="980ef-120">It walks through how to get started with both Application and PingAccess, in addition to the publishing steps.</span></span> <span data-ttu-id="980ef-121">If you’ve already configured both services but want a refresher on the publishing steps, you can skip the two registration sections.</span><span class="sxs-lookup"><span data-stu-id="980ef-121">If you’ve already configured both services but want a refresher on the publishing steps, you can skip the two registration sections.</span></span>

>[!NOTE]
><span data-ttu-id="980ef-122">Since this scenario is a partnership between Azure AD and PingAccess, some of the instructions exist on the Ping Identity site.</span><span class="sxs-lookup"><span data-stu-id="980ef-122">Since this scenario is a partnership between Azure AD and PingAccess, some of the instructions exist on the Ping Identity site.</span></span> 

### <a name="install-an-application-proxy-connector"></a><span data-ttu-id="980ef-123">Install an Application Proxy connector</span><span class="sxs-lookup"><span data-stu-id="980ef-123">Install an Application Proxy connector</span></span>

<span data-ttu-id="980ef-124">If you already have Application Proxy enabled, and have a connector installed, you can skip these steps.</span><span class="sxs-lookup"><span data-stu-id="980ef-124">If you already have Application Proxy enabled, and have a connector installed, you can skip these steps.</span></span>

<span data-ttu-id="980ef-125">The Application Proxy connector is a Windows Server service that directs the traffic from your remote employees to your published apps.</span><span class="sxs-lookup"><span data-stu-id="980ef-125">The Application Proxy connector is a Windows Server service that directs the traffic from your remote employees to your published apps.</span></span> <span data-ttu-id="980ef-126">For more detailed installation instructions, see [Enable Application Proxy in the Azure portal](active-directory-application-proxy-enable.md).</span><span class="sxs-lookup"><span data-stu-id="980ef-126">For more detailed installation instructions, see [Enable Application Proxy in the Azure portal](active-directory-application-proxy-enable.md).</span></span>

1. <span data-ttu-id="980ef-127">Sign in to the [Azure portal](https://portal.azure.com) as a global administrator.</span><span class="sxs-lookup"><span data-stu-id="980ef-127">Sign in to the [Azure portal](https://portal.azure.com) as a global administrator.</span></span> 
2. <span data-ttu-id="980ef-128">Select **Azure Active Directory** > **Application proxy**.</span><span class="sxs-lookup"><span data-stu-id="980ef-128">Select **Azure Active Directory** > **Application proxy**.</span></span>
3. <span data-ttu-id="980ef-129">Select **Download Connector** to start the Application Proxy connector download.</span><span class="sxs-lookup"><span data-stu-id="980ef-129">Select **Download Connector** to start the Application Proxy connector download.</span></span> <span data-ttu-id="980ef-130">Follow the installation instructions.</span><span class="sxs-lookup"><span data-stu-id="980ef-130">Follow the installation instructions.</span></span> 
4. <span data-ttu-id="980ef-131">Downloading the connector should automatically enable Application Proxy for your directory, but if not you can select **Enable Application Proxy**.</span><span class="sxs-lookup"><span data-stu-id="980ef-131">Downloading the connector should automatically enable Application Proxy for your directory, but if not you can select **Enable Application Proxy**.</span></span> 

![Enable Application Proxy and download the connector](https://docstestmedia1.blob.core.windows.net/azure-media/articles/active-directory/media/application-proxy-ping-access/install-connector.png)

### <a name="add-your-app-to-azure-ad-with-application-proxy"></a><span data-ttu-id="980ef-133">Add your app to Azure AD with Application Proxy</span><span class="sxs-lookup"><span data-stu-id="980ef-133">Add your app to Azure AD with Application Proxy</span></span>

<span data-ttu-id="980ef-134">There are two parts to this section.</span><span class="sxs-lookup"><span data-stu-id="980ef-134">There are two parts to this section.</span></span> <span data-ttu-id="980ef-135">First, you need to publish the app to Azure AD.</span><span class="sxs-lookup"><span data-stu-id="980ef-135">First, you need to publish the app to Azure AD.</span></span> <span data-ttu-id="980ef-136">Then, you need to collect some information about that app that you can use during the PingAccess steps.</span><span class="sxs-lookup"><span data-stu-id="980ef-136">Then, you need to collect some information about that app that you can use during the PingAccess steps.</span></span> 

#### <a name="publish-the-app"></a><span data-ttu-id="980ef-137">Publish the app</span><span class="sxs-lookup"><span data-stu-id="980ef-137">Publish the app</span></span>

1. <span data-ttu-id="980ef-138">If you didn't in the last section, sign in to the [Azure portal](https://portal.azure.com) as a global administrator.</span><span class="sxs-lookup"><span data-stu-id="980ef-138">If you didn't in the last section, sign in to the [Azure portal](https://portal.azure.com) as a global administrator.</span></span> 
2. <span data-ttu-id="980ef-139">Select **Azure Active Directory** > **Enterprise applications**.</span><span class="sxs-lookup"><span data-stu-id="980ef-139">Select **Azure Active Directory** > **Enterprise applications**.</span></span> 
3. <span data-ttu-id="980ef-140">Select **Add** at the top of the blade.</span><span class="sxs-lookup"><span data-stu-id="980ef-140">Select **Add** at the top of the blade.</span></span> 
4. <span data-ttu-id="980ef-141">Select **On-premises application**.</span><span class="sxs-lookup"><span data-stu-id="980ef-141">Select **On-premises application**.</span></span>
5. <span data-ttu-id="980ef-142">Fill out the required fields with information about your new app.</span><span class="sxs-lookup"><span data-stu-id="980ef-142">Fill out the required fields with information about your new app.</span></span> <span data-ttu-id="980ef-143">Use the following guidance for the settings:</span><span class="sxs-lookup"><span data-stu-id="980ef-143">Use the following guidance for the settings:</span></span>
  - <span data-ttu-id="980ef-144">**Internal URL**: Normally you provide the URL that takes you to the app’s sign in page when you’re on the corporate network.</span><span class="sxs-lookup"><span data-stu-id="980ef-144">**Internal URL**: Normally you provide the URL that takes you to the app’s sign in page when you’re on the corporate network.</span></span> <span data-ttu-id="980ef-145">For this partnership the connector needs to treat the PingAccess proxy as the front page of the app.</span><span class="sxs-lookup"><span data-stu-id="980ef-145">For this partnership the connector needs to treat the PingAccess proxy as the front page of the app.</span></span> <span data-ttu-id="980ef-146">Use this format: `https://<host name of your PA server>:<port>/<App path name>`.</span><span class="sxs-lookup"><span data-stu-id="980ef-146">Use this format: `https://<host name of your PA server>:<port>/<App path name>`.</span></span> <span data-ttu-id="980ef-147">The port is 3000 by default, but you can configure it in PingAccess.</span><span class="sxs-lookup"><span data-stu-id="980ef-147">The port is 3000 by default, but you can configure it in PingAccess.</span></span>
  - <span data-ttu-id="980ef-148">**Pre-authentication method**: Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="980ef-148">**Pre-authentication method**: Azure Active Directory</span></span>
  - <span data-ttu-id="980ef-149">**Translate URL in Headers**: No</span><span class="sxs-lookup"><span data-stu-id="980ef-149">**Translate URL in Headers**: No</span></span>
6. <span data-ttu-id="980ef-150">Select **Add** at the bottom of the blade.</span><span class="sxs-lookup"><span data-stu-id="980ef-150">Select **Add** at the bottom of the blade.</span></span> <span data-ttu-id="980ef-151">Your application is added, and the quick start menu opens.</span><span class="sxs-lookup"><span data-stu-id="980ef-151">Your application is added, and the quick start menu opens.</span></span> 
7. <span data-ttu-id="980ef-152">In the quick start menu, select **Assign a user for testing**, and add at least one user to the application.</span><span class="sxs-lookup"><span data-stu-id="980ef-152">In the quick start menu, select **Assign a user for testing**, and add at least one user to the application.</span></span> <span data-ttu-id="980ef-153">Make sure this test account has access to the on-premises application.</span><span class="sxs-lookup"><span data-stu-id="980ef-153">Make sure this test account has access to the on-premises application.</span></span> 
8. <span data-ttu-id="980ef-154">Select **Assign** to save the test user assignment.</span><span class="sxs-lookup"><span data-stu-id="980ef-154">Select **Assign** to save the test user assignment.</span></span> 
9. <span data-ttu-id="980ef-155">On the app management blade, select **Single sign-on**.</span><span class="sxs-lookup"><span data-stu-id="980ef-155">On the app management blade, select **Single sign-on**.</span></span> 
10. <span data-ttu-id="980ef-156">Choose **Header-based sign-on** from the drop-down menu.</span><span class="sxs-lookup"><span data-stu-id="980ef-156">Choose **Header-based sign-on** from the drop-down menu.</span></span> <span data-ttu-id="980ef-157">Select **Save**.</span><span class="sxs-lookup"><span data-stu-id="980ef-157">Select **Save**.</span></span>

  ![Select header-based sign-on](https://docstestmedia1.blob.core.windows.net/azure-media/articles/active-directory/media/application-proxy-ping-access/sso-header.PNG)

11. <span data-ttu-id="980ef-159">Close the Enterprise applications blade or scroll all the way to the left to return to the Azure Active Directory menu.</span><span class="sxs-lookup"><span data-stu-id="980ef-159">Close the Enterprise applications blade or scroll all the way to the left to return to the Azure Active Directory menu.</span></span> 
12. <span data-ttu-id="980ef-160">Select **App registrations**.</span><span class="sxs-lookup"><span data-stu-id="980ef-160">Select **App registrations**.</span></span>
13. <span data-ttu-id="980ef-161">Select the app you just added, then **Reply URLs**.</span><span class="sxs-lookup"><span data-stu-id="980ef-161">Select the app you just added, then **Reply URLs**.</span></span> 
14. <span data-ttu-id="980ef-162">Check to see if the external URL that you assigned to your app in step 5 is in the Reply URLs list.</span><span class="sxs-lookup"><span data-stu-id="980ef-162">Check to see if the external URL that you assigned to your app in step 5 is in the Reply URLs list.</span></span> <span data-ttu-id="980ef-163">If it’s not, add it now.</span><span class="sxs-lookup"><span data-stu-id="980ef-163">If it’s not, add it now.</span></span> 
15. <span data-ttu-id="980ef-164">On the app settings blade, select **Required permissions**.</span><span class="sxs-lookup"><span data-stu-id="980ef-164">On the app settings blade, select **Required permissions**.</span></span> 
16. <span data-ttu-id="980ef-165">Select **Add**.</span><span class="sxs-lookup"><span data-stu-id="980ef-165">Select **Add**.</span></span> <span data-ttu-id="980ef-166">For the API, choose **Windows Azure Active Directory**, then **Select**.</span><span class="sxs-lookup"><span data-stu-id="980ef-166">For the API, choose **Windows Azure Active Directory**, then **Select**.</span></span> <span data-ttu-id="980ef-167">For the permissions, choose **Read and write all applications** and **Sign in and read user profile**, then **Select** and **Done**.</span><span class="sxs-lookup"><span data-stu-id="980ef-167">For the permissions, choose **Read and write all applications** and **Sign in and read user profile**, then **Select** and **Done**.</span></span>  

  ![Select permissions](https://docstestmedia1.blob.core.windows.net/azure-media/articles/active-directory/media/application-proxy-ping-access/select-permissions.png) 

#### <a name="collect-information-for-the-pingaccess-steps"></a><span data-ttu-id="980ef-169">Collect information for the PingAccess steps</span><span class="sxs-lookup"><span data-stu-id="980ef-169">Collect information for the PingAccess steps</span></span>

1. <span data-ttu-id="980ef-170">Still on your app settings blade, select **Properties**.</span><span class="sxs-lookup"><span data-stu-id="980ef-170">Still on your app settings blade, select **Properties**.</span></span> <span data-ttu-id="980ef-171">Save the **Application Id** value.</span><span class="sxs-lookup"><span data-stu-id="980ef-171">Save the **Application Id** value.</span></span> <span data-ttu-id="980ef-172">This is used for the client ID when you configure PingAccess.</span><span class="sxs-lookup"><span data-stu-id="980ef-172">This is used for the client ID when you configure PingAccess.</span></span>
2. <span data-ttu-id="980ef-173">On the app settings blade, select **Keys**.</span><span class="sxs-lookup"><span data-stu-id="980ef-173">On the app settings blade, select **Keys**.</span></span> 
3. <span data-ttu-id="980ef-174">Create a key by entering a key description and choosing an expiration date from the drop-down menu.</span><span class="sxs-lookup"><span data-stu-id="980ef-174">Create a key by entering a key description and choosing an expiration date from the drop-down menu.</span></span> 
4. <span data-ttu-id="980ef-175">Select **Save**.</span><span class="sxs-lookup"><span data-stu-id="980ef-175">Select **Save**.</span></span> <span data-ttu-id="980ef-176">A GUID appears in the **Value** field.</span><span class="sxs-lookup"><span data-stu-id="980ef-176">A GUID appears in the **Value** field.</span></span> 

  <span data-ttu-id="980ef-177">Save this value now, as you won’t be able to see it again after you close this window.</span><span class="sxs-lookup"><span data-stu-id="980ef-177">Save this value now, as you won’t be able to see it again after you close this window.</span></span> 

5. <span data-ttu-id="980ef-178">Close the App registrations blade or scroll all the way to the left to return to the Azure Active Directory menu.</span><span class="sxs-lookup"><span data-stu-id="980ef-178">Close the App registrations blade or scroll all the way to the left to return to the Azure Active Directory menu.</span></span>
6. <span data-ttu-id="980ef-179">Select **Properties**.</span><span class="sxs-lookup"><span data-stu-id="980ef-179">Select **Properties**.</span></span>
7. <span data-ttu-id="980ef-180">Save the **Directory ID** GUID.</span><span class="sxs-lookup"><span data-stu-id="980ef-180">Save the **Directory ID** GUID.</span></span> 

### <a name="download-pingaccess-and-configure-your-app"></a><span data-ttu-id="980ef-181">Download PingAccess and configure your app</span><span class="sxs-lookup"><span data-stu-id="980ef-181">Download PingAccess and configure your app</span></span>

<span data-ttu-id="980ef-182">The detailed steps for the PingAccess part of this scenario continue in the Ping Identity documentation, [Configure PingAccess for Azure AD](https://docs.pingidentity.com/bundle/paaad_m_ConfigurePAforMSAzureADSolution_paaad43/page/pa_c_PAAzureSolutionOverview.html).</span><span class="sxs-lookup"><span data-stu-id="980ef-182">The detailed steps for the PingAccess part of this scenario continue in the Ping Identity documentation, [Configure PingAccess for Azure AD](https://docs.pingidentity.com/bundle/paaad_m_ConfigurePAforMSAzureADSolution_paaad43/page/pa_c_PAAzureSolutionOverview.html).</span></span>

<span data-ttu-id="980ef-183">Those steps walk you through the process of getting a PingAccess account if you don't already have one, installing the PingAccess Server, and creating an Azure AD OIDC Provider connection with the Directory ID that you copied from the Azure portal.</span><span class="sxs-lookup"><span data-stu-id="980ef-183">Those steps walk you through the process of getting a PingAccess account if you don't already have one, installing the PingAccess Server, and creating an Azure AD OIDC Provider connection with the Directory ID that you copied from the Azure portal.</span></span> <span data-ttu-id="980ef-184">Then, you use the Application ID and Key values to create a Web Session on PingAccess.</span><span class="sxs-lookup"><span data-stu-id="980ef-184">Then, you use the Application ID and Key values to create a Web Session on PingAccess.</span></span> <span data-ttu-id="980ef-185">After that, you can set up identity mapping and create a virtual host, site, and application.</span><span class="sxs-lookup"><span data-stu-id="980ef-185">After that, you can set up identity mapping and create a virtual host, site, and application.</span></span>

### <a name="test-your-app"></a><span data-ttu-id="980ef-186">Test your app</span><span class="sxs-lookup"><span data-stu-id="980ef-186">Test your app</span></span>

<span data-ttu-id="980ef-187">When you've completed all these steps, your app should be up and running.</span><span class="sxs-lookup"><span data-stu-id="980ef-187">When you've completed all these steps, your app should be up and running.</span></span> <span data-ttu-id="980ef-188">To test it, open a browser and navigate to the external URL that you created when you published the app in Azure.</span><span class="sxs-lookup"><span data-stu-id="980ef-188">To test it, open a browser and navigate to the external URL that you created when you published the app in Azure.</span></span> <span data-ttu-id="980ef-189">Sign in with the test account that you assigned to the app.</span><span class="sxs-lookup"><span data-stu-id="980ef-189">Sign in with the test account that you assigned to the app.</span></span> 

## <a name="next-steps"></a><span data-ttu-id="980ef-190">Next steps</span><span class="sxs-lookup"><span data-stu-id="980ef-190">Next steps</span></span>

- [<span data-ttu-id="980ef-191">Troubleshoot Application Proxy</span><span class="sxs-lookup"><span data-stu-id="980ef-191">Troubleshoot Application Proxy</span></span>](active-directory-application-proxy-troubleshoot.md)



