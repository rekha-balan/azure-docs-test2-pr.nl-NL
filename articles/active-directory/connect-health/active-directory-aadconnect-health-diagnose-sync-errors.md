---
title: Azure AD Connect Health - Diagnose duplicated attribute synchronization errors | Microsoft Docs
description: This document describes the diagnosis process of duplicated attribute synchronization errors and a potential fix of the orphaned object scenarios directly from the Azure portal.
services: active-directory
documentationcenter: ''
author: zhiweiw
manager: maheshu
editor: billmath
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 05/11/2018
ms.author: zhiweiw
ms.openlocfilehash: 3659572f46ae82d39a6c53246db2b6a536be32c8
ms.sourcegitcommit: d1451406a010fd3aa854dc8e5b77dc5537d8050e
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 09/13/2018
ms.locfileid: "44857964"
---
# <a name="diagnose-and-remediate-duplicated-attribute-sync-errors"></a><span data-ttu-id="6efe8-103">Diagnose and remediate duplicated attribute sync errors</span><span class="sxs-lookup"><span data-stu-id="6efe8-103">Diagnose and remediate duplicated attribute sync errors</span></span>

## <a name="overview"></a><span data-ttu-id="6efe8-104">Overview</span><span class="sxs-lookup"><span data-stu-id="6efe8-104">Overview</span></span>
<span data-ttu-id="6efe8-105">Taking one step farther to highlight sync errors, Azure Active Directory (Azure AD) Connect Health introduces self-service remediation.</span><span class="sxs-lookup"><span data-stu-id="6efe8-105">Taking one step farther to highlight sync errors, Azure Active Directory (Azure AD) Connect Health introduces self-service remediation.</span></span> <span data-ttu-id="6efe8-106">It troubleshoots duplicated attribute sync errors and fixes objects that are orphaned from Azure AD.</span><span class="sxs-lookup"><span data-stu-id="6efe8-106">It troubleshoots duplicated attribute sync errors and fixes objects that are orphaned from Azure AD.</span></span>
<span data-ttu-id="6efe8-107">The diagnosis feature has these benefits:</span><span class="sxs-lookup"><span data-stu-id="6efe8-107">The diagnosis feature has these benefits:</span></span>
- <span data-ttu-id="6efe8-108">It provides a diagnostic procedure that narrows down duplicated attribute sync errors.</span><span class="sxs-lookup"><span data-stu-id="6efe8-108">It provides a diagnostic procedure that narrows down duplicated attribute sync errors.</span></span> <span data-ttu-id="6efe8-109">And it gives specific fixes.</span><span class="sxs-lookup"><span data-stu-id="6efe8-109">And it gives specific fixes.</span></span>
- <span data-ttu-id="6efe8-110">It applies a fix for dedicated scenarios from Azure AD to resolve the error in a single step.</span><span class="sxs-lookup"><span data-stu-id="6efe8-110">It applies a fix for dedicated scenarios from Azure AD to resolve the error in a single step.</span></span>
- <span data-ttu-id="6efe8-111">No upgrade or configuration is required to enable this feature.</span><span class="sxs-lookup"><span data-stu-id="6efe8-111">No upgrade or configuration is required to enable this feature.</span></span>
<span data-ttu-id="6efe8-112">For more information about Azure AD, see [Identity synchronization and duplicate attribute resiliency](https://aka.ms/dupattributeresdocs).</span><span class="sxs-lookup"><span data-stu-id="6efe8-112">For more information about Azure AD, see [Identity synchronization and duplicate attribute resiliency](https://aka.ms/dupattributeresdocs).</span></span>

## <a name="problems"></a><span data-ttu-id="6efe8-113">Problems</span><span class="sxs-lookup"><span data-stu-id="6efe8-113">Problems</span></span>
### <a name="a-common-scenario"></a><span data-ttu-id="6efe8-114">A common scenario</span><span class="sxs-lookup"><span data-stu-id="6efe8-114">A common scenario</span></span>
<span data-ttu-id="6efe8-115">When **QuarantinedAttributeValueMustBeUnique** and **AttributeValueMustBeUnique** sync errors happen, it's common to see a **UserPrincipalName** or **Proxy Addresses** conflict in Azure AD.</span><span class="sxs-lookup"><span data-stu-id="6efe8-115">When **QuarantinedAttributeValueMustBeUnique** and **AttributeValueMustBeUnique** sync errors happen, it's common to see a **UserPrincipalName** or **Proxy Addresses** conflict in Azure AD.</span></span> <span data-ttu-id="6efe8-116">You might solve the sync errors by updating the conflicting source object from the on-premises side.</span><span class="sxs-lookup"><span data-stu-id="6efe8-116">You might solve the sync errors by updating the conflicting source object from the on-premises side.</span></span> <span data-ttu-id="6efe8-117">The sync error will be resolved after the next sync. For example, this image indicates that two users have a conflict of their **UserPrincipalName**.</span><span class="sxs-lookup"><span data-stu-id="6efe8-117">The sync error will be resolved after the next sync. For example, this image indicates that two users have a conflict of their **UserPrincipalName**.</span></span> <span data-ttu-id="6efe8-118">Both are **Joe.J@contoso.com**.</span><span class="sxs-lookup"><span data-stu-id="6efe8-118">Both are **Joe.J@contoso.com**.</span></span> <span data-ttu-id="6efe8-119">The conflicting objects are quarantined in Azure AD.</span><span class="sxs-lookup"><span data-stu-id="6efe8-119">The conflicting objects are quarantined in Azure AD.</span></span>

![Diagnose sync error common scenario](./media/active-directory-aadconnect-health-sync-iidfix/IIdFixCommonCase.png)

### <a name="orphaned-object-scenario"></a><span data-ttu-id="6efe8-121">Orphaned object scenario</span><span class="sxs-lookup"><span data-stu-id="6efe8-121">Orphaned object scenario</span></span>
<span data-ttu-id="6efe8-122">Occasionally, you might find that an existing user loses the **Source Anchor**.</span><span class="sxs-lookup"><span data-stu-id="6efe8-122">Occasionally, you might find that an existing user loses the **Source Anchor**.</span></span> <span data-ttu-id="6efe8-123">The deletion of the source object happened in on-premises Active Directory.</span><span class="sxs-lookup"><span data-stu-id="6efe8-123">The deletion of the source object happened in on-premises Active Directory.</span></span> <span data-ttu-id="6efe8-124">But the change of deletion signal never got synchronized to Azure AD.</span><span class="sxs-lookup"><span data-stu-id="6efe8-124">But the change of deletion signal never got synchronized to Azure AD.</span></span> <span data-ttu-id="6efe8-125">This loss happens for reasons like sync engine issues or domain migration.</span><span class="sxs-lookup"><span data-stu-id="6efe8-125">This loss happens for reasons like sync engine issues or domain migration.</span></span> <span data-ttu-id="6efe8-126">When the same object gets restored or recreated, logically, an existing user should be the user to sync from the **Source Anchor**.</span><span class="sxs-lookup"><span data-stu-id="6efe8-126">When the same object gets restored or recreated, logically, an existing user should be the user to sync from the **Source Anchor**.</span></span> 

<span data-ttu-id="6efe8-127">When an existing user is a cloud-only object, you can also see the conflicting user synchronized to Azure AD.</span><span class="sxs-lookup"><span data-stu-id="6efe8-127">When an existing user is a cloud-only object, you can also see the conflicting user synchronized to Azure AD.</span></span> <span data-ttu-id="6efe8-128">The user can't be matched in sync to the existing object.</span><span class="sxs-lookup"><span data-stu-id="6efe8-128">The user can't be matched in sync to the existing object.</span></span> <span data-ttu-id="6efe8-129">There's no direct way to remap the **Source Anchor**.</span><span class="sxs-lookup"><span data-stu-id="6efe8-129">There's no direct way to remap the **Source Anchor**.</span></span> <span data-ttu-id="6efe8-130">See more about the [existing knowledge base](https://support.microsoft.com/help/2647098).</span><span class="sxs-lookup"><span data-stu-id="6efe8-130">See more about the [existing knowledge base](https://support.microsoft.com/help/2647098).</span></span> 

<span data-ttu-id="6efe8-131">As an example, the existing object in Azure AD preserves the license of Joe.</span><span class="sxs-lookup"><span data-stu-id="6efe8-131">As an example, the existing object in Azure AD preserves the license of Joe.</span></span> <span data-ttu-id="6efe8-132">A newly synchronized object with a different **Source Anchor** occurs in a duplicated attribute state in Azure AD.</span><span class="sxs-lookup"><span data-stu-id="6efe8-132">A newly synchronized object with a different **Source Anchor** occurs in a duplicated attribute state in Azure AD.</span></span> <span data-ttu-id="6efe8-133">Changes for Joe in on-premises Active Directory won't be applied to Joe’s original user (existing object) in Azure AD.</span><span class="sxs-lookup"><span data-stu-id="6efe8-133">Changes for Joe in on-premises Active Directory won't be applied to Joe’s original user (existing object) in Azure AD.</span></span>  

![Diagnose sync error orphaned object scenario](./media/active-directory-aadconnect-health-sync-iidfix/IIdFixOrphanedCase.png)

## <a name="diagnostic-and-troubleshooting-steps-in-connect-health"></a><span data-ttu-id="6efe8-135">Diagnostic and troubleshooting steps in Connect Health</span><span class="sxs-lookup"><span data-stu-id="6efe8-135">Diagnostic and troubleshooting steps in Connect Health</span></span> 
<span data-ttu-id="6efe8-136">The diagnose feature supports user objects with the following duplicated attributes:</span><span class="sxs-lookup"><span data-stu-id="6efe8-136">The diagnose feature supports user objects with the following duplicated attributes:</span></span>

| <span data-ttu-id="6efe8-137">Attribute name</span><span class="sxs-lookup"><span data-stu-id="6efe8-137">Attribute name</span></span> | <span data-ttu-id="6efe8-138">Synchronization error types</span><span class="sxs-lookup"><span data-stu-id="6efe8-138">Synchronization error types</span></span>|
| ------------------ | -----------------|
| <span data-ttu-id="6efe8-139">UserPrincipalName</span><span class="sxs-lookup"><span data-stu-id="6efe8-139">UserPrincipalName</span></span> | <span data-ttu-id="6efe8-140">QuarantinedAttributeValueMustBeUnique or AttributeValueMustBeUnique</span><span class="sxs-lookup"><span data-stu-id="6efe8-140">QuarantinedAttributeValueMustBeUnique or AttributeValueMustBeUnique</span></span> | 
| <span data-ttu-id="6efe8-141">ProxyAddresses</span><span class="sxs-lookup"><span data-stu-id="6efe8-141">ProxyAddresses</span></span> | <span data-ttu-id="6efe8-142">QuarantinedAttributeValueMustBeUnique or AttributeValueMustBeUnique</span><span class="sxs-lookup"><span data-stu-id="6efe8-142">QuarantinedAttributeValueMustBeUnique or AttributeValueMustBeUnique</span></span> | 
| <span data-ttu-id="6efe8-143">SipProxyAddress</span><span class="sxs-lookup"><span data-stu-id="6efe8-143">SipProxyAddress</span></span> | <span data-ttu-id="6efe8-144">AttributeValueMustBeUnique</span><span class="sxs-lookup"><span data-stu-id="6efe8-144">AttributeValueMustBeUnique</span></span> | 
| <span data-ttu-id="6efe8-145">OnPremiseSecurityIdentifier</span><span class="sxs-lookup"><span data-stu-id="6efe8-145">OnPremiseSecurityIdentifier</span></span> |  <span data-ttu-id="6efe8-146">AttributeValueMustBeUnique</span><span class="sxs-lookup"><span data-stu-id="6efe8-146">AttributeValueMustBeUnique</span></span> |

>[!IMPORTANT]
> <span data-ttu-id="6efe8-147">To access this feature, **Global Admin** permission, or **Contributor** permission from the RBAC settings, is required.</span><span class="sxs-lookup"><span data-stu-id="6efe8-147">To access this feature, **Global Admin** permission, or **Contributor** permission from the RBAC settings, is required.</span></span>
>

<span data-ttu-id="6efe8-148">Follow the steps from the Azure portal to narrow down the sync error details and provide more specific solutions:</span><span class="sxs-lookup"><span data-stu-id="6efe8-148">Follow the steps from the Azure portal to narrow down the sync error details and provide more specific solutions:</span></span>

![Sync error diagnosis steps](./media/active-directory-aadconnect-health-sync-iidfix/IIdFixSteps.png)

<span data-ttu-id="6efe8-150">From the Azure portal, take a few steps to identify specific fixable scenarios:</span><span class="sxs-lookup"><span data-stu-id="6efe8-150">From the Azure portal, take a few steps to identify specific fixable scenarios:</span></span>  
1.  <span data-ttu-id="6efe8-151">Check the **Diagnose status** column.</span><span class="sxs-lookup"><span data-stu-id="6efe8-151">Check the **Diagnose status** column.</span></span> <span data-ttu-id="6efe8-152">The status shows if there's a possible way to fix a sync error directly from Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="6efe8-152">The status shows if there's a possible way to fix a sync error directly from Azure Active Directory.</span></span> <span data-ttu-id="6efe8-153">In other words, a troubleshooting flow exists that can narrow down the error case and potentially fix it.</span><span class="sxs-lookup"><span data-stu-id="6efe8-153">In other words, a troubleshooting flow exists that can narrow down the error case and potentially fix it.</span></span>
| <span data-ttu-id="6efe8-154">Status</span><span class="sxs-lookup"><span data-stu-id="6efe8-154">Status</span></span> | <span data-ttu-id="6efe8-155">What does it mean?</span><span class="sxs-lookup"><span data-stu-id="6efe8-155">What does it mean?</span></span> |
| ------------------ | -----------------|
| <span data-ttu-id="6efe8-156">Not Started</span><span class="sxs-lookup"><span data-stu-id="6efe8-156">Not Started</span></span> | <span data-ttu-id="6efe8-157">You haven't visited this diagnosis process.</span><span class="sxs-lookup"><span data-stu-id="6efe8-157">You haven't visited this diagnosis process.</span></span> <span data-ttu-id="6efe8-158">Depending on the diagnostic result, there's a potential way to fix the sync error directly from the portal.</span><span class="sxs-lookup"><span data-stu-id="6efe8-158">Depending on the diagnostic result, there's a potential way to fix the sync error directly from the portal.</span></span> |
| <span data-ttu-id="6efe8-159">Manual Fix Required</span><span class="sxs-lookup"><span data-stu-id="6efe8-159">Manual Fix Required</span></span> | <span data-ttu-id="6efe8-160">The error doesn't fit the criteria of available fixes from the portal.</span><span class="sxs-lookup"><span data-stu-id="6efe8-160">The error doesn't fit the criteria of available fixes from the portal.</span></span> <span data-ttu-id="6efe8-161">Either conflicting object types aren't users, or you already went through the diagnostic steps, and no fix resolution was available from the portal.</span><span class="sxs-lookup"><span data-stu-id="6efe8-161">Either conflicting object types aren't users, or you already went through the diagnostic steps, and no fix resolution was available from the portal.</span></span> <span data-ttu-id="6efe8-162">In the latter case, a fix from the on-premises side is still one of the solutions.</span><span class="sxs-lookup"><span data-stu-id="6efe8-162">In the latter case, a fix from the on-premises side is still one of the solutions.</span></span> <span data-ttu-id="6efe8-163">[Read more about on-premises fixes](https://support.microsoft.com/help/2647098).</span><span class="sxs-lookup"><span data-stu-id="6efe8-163">[Read more about on-premises fixes](https://support.microsoft.com/help/2647098).</span></span> | 
| <span data-ttu-id="6efe8-164">Pending Sync</span><span class="sxs-lookup"><span data-stu-id="6efe8-164">Pending Sync</span></span> | <span data-ttu-id="6efe8-165">A fix was applied.</span><span class="sxs-lookup"><span data-stu-id="6efe8-165">A fix was applied.</span></span> <span data-ttu-id="6efe8-166">The portal is waiting for the next sync cycle to clear the error.</span><span class="sxs-lookup"><span data-stu-id="6efe8-166">The portal is waiting for the next sync cycle to clear the error.</span></span> |
  >[!IMPORTANT]
  > <span data-ttu-id="6efe8-167">The diagnostic status column will reset after each sync cycle.</span><span class="sxs-lookup"><span data-stu-id="6efe8-167">The diagnostic status column will reset after each sync cycle.</span></span> 
  >

2.  <span data-ttu-id="6efe8-168">Select the **Diagnose** button under the error details.</span><span class="sxs-lookup"><span data-stu-id="6efe8-168">Select the **Diagnose** button under the error details.</span></span> <span data-ttu-id="6efe8-169">You'll answer a few questions and identify the sync error details.</span><span class="sxs-lookup"><span data-stu-id="6efe8-169">You'll answer a few questions and identify the sync error details.</span></span> <span data-ttu-id="6efe8-170">Answers to the questions help identify an orphaned object case.</span><span class="sxs-lookup"><span data-stu-id="6efe8-170">Answers to the questions help identify an orphaned object case.</span></span>

3.  <span data-ttu-id="6efe8-171">If a **Close** button appears at the end of the diagnostics, there's no quick fix available from the portal based on your answers.</span><span class="sxs-lookup"><span data-stu-id="6efe8-171">If a **Close** button appears at the end of the diagnostics, there's no quick fix available from the portal based on your answers.</span></span> <span data-ttu-id="6efe8-172">Refer to the solution shown in the last step.</span><span class="sxs-lookup"><span data-stu-id="6efe8-172">Refer to the solution shown in the last step.</span></span> <span data-ttu-id="6efe8-173">Fixes from on-premises are still the solutions.</span><span class="sxs-lookup"><span data-stu-id="6efe8-173">Fixes from on-premises are still the solutions.</span></span> <span data-ttu-id="6efe8-174">Select the **Close** button.</span><span class="sxs-lookup"><span data-stu-id="6efe8-174">Select the **Close** button.</span></span> <span data-ttu-id="6efe8-175">The status of the current sync error switches to **Manual fix required**.</span><span class="sxs-lookup"><span data-stu-id="6efe8-175">The status of the current sync error switches to **Manual fix required**.</span></span> <span data-ttu-id="6efe8-176">The status stays during the current sync cycle.</span><span class="sxs-lookup"><span data-stu-id="6efe8-176">The status stays during the current sync cycle.</span></span>

4.  <span data-ttu-id="6efe8-177">After an orphaned object case is identified, you can fix the duplicated attributes sync errors directly from the portal.</span><span class="sxs-lookup"><span data-stu-id="6efe8-177">After an orphaned object case is identified, you can fix the duplicated attributes sync errors directly from the portal.</span></span> <span data-ttu-id="6efe8-178">To trigger the process, select the **Apply Fix** button.</span><span class="sxs-lookup"><span data-stu-id="6efe8-178">To trigger the process, select the **Apply Fix** button.</span></span> <span data-ttu-id="6efe8-179">The status of the current sync error updates to **Pending sync**.</span><span class="sxs-lookup"><span data-stu-id="6efe8-179">The status of the current sync error updates to **Pending sync**.</span></span>

5.  <span data-ttu-id="6efe8-180">After the next sync cycle, the error should be removed from the list.</span><span class="sxs-lookup"><span data-stu-id="6efe8-180">After the next sync cycle, the error should be removed from the list.</span></span>

## <a name="how-to-answer-the-diagnosis-questions"></a><span data-ttu-id="6efe8-181">How to answer the diagnosis questions</span><span class="sxs-lookup"><span data-stu-id="6efe8-181">How to answer the diagnosis questions</span></span> 
### <a name="does-the-user-exist-in-your-on-premises-active-directory"></a><span data-ttu-id="6efe8-182">Does the user exist in your on-premises Active Directory?</span><span class="sxs-lookup"><span data-stu-id="6efe8-182">Does the user exist in your on-premises Active Directory?</span></span>

<span data-ttu-id="6efe8-183">This question tries to identify the source object of the existing user from on-premises Active Directory.</span><span class="sxs-lookup"><span data-stu-id="6efe8-183">This question tries to identify the source object of the existing user from on-premises Active Directory.</span></span>  
1.  <span data-ttu-id="6efe8-184">Check if Azure Active Directory has an object with the provided **UserPrincipalName**.</span><span class="sxs-lookup"><span data-stu-id="6efe8-184">Check if Azure Active Directory has an object with the provided **UserPrincipalName**.</span></span> <span data-ttu-id="6efe8-185">If not, answer **No**.</span><span class="sxs-lookup"><span data-stu-id="6efe8-185">If not, answer **No**.</span></span>
2.  <span data-ttu-id="6efe8-186">If it does, check whether the object is still in scope for syncing.</span><span class="sxs-lookup"><span data-stu-id="6efe8-186">If it does, check whether the object is still in scope for syncing.</span></span>  
  - <span data-ttu-id="6efe8-187">Search in the Azure AD connector space by using the DN.</span><span class="sxs-lookup"><span data-stu-id="6efe8-187">Search in the Azure AD connector space by using the DN.</span></span>
  - <span data-ttu-id="6efe8-188">If the object is found in the **Pending Add** state, answer **No**.</span><span class="sxs-lookup"><span data-stu-id="6efe8-188">If the object is found in the **Pending Add** state, answer **No**.</span></span> <span data-ttu-id="6efe8-189">Azure AD Connect can't connect the object to the right Azure AD object.</span><span class="sxs-lookup"><span data-stu-id="6efe8-189">Azure AD Connect can't connect the object to the right Azure AD object.</span></span>
  - <span data-ttu-id="6efe8-190">If the object isn't found, answer **Yes**.</span><span class="sxs-lookup"><span data-stu-id="6efe8-190">If the object isn't found, answer **Yes**.</span></span>

<span data-ttu-id="6efe8-191">In these examples, the question tries to identify whether **Joe Jackson** still exists in on-premises Active Directory.</span><span class="sxs-lookup"><span data-stu-id="6efe8-191">In these examples, the question tries to identify whether **Joe Jackson** still exists in on-premises Active Directory.</span></span>
<span data-ttu-id="6efe8-192">For the **common scenario**, both users **Joe Johnson** and **Joe Jackson** are present in on-premises Active Directory.</span><span class="sxs-lookup"><span data-stu-id="6efe8-192">For the **common scenario**, both users **Joe Johnson** and **Joe Jackson** are present in on-premises Active Directory.</span></span> <span data-ttu-id="6efe8-193">The quarantined objects are two different users.</span><span class="sxs-lookup"><span data-stu-id="6efe8-193">The quarantined objects are two different users.</span></span>

![Diagnose sync error common scenario](./media/active-directory-aadconnect-health-sync-iidfix/IIdFixCommonCase.png)

<span data-ttu-id="6efe8-195">For the **orphaned object scenario**, only the single user **Joe Johnson** is present in on-premises Active Directory:</span><span class="sxs-lookup"><span data-stu-id="6efe8-195">For the **orphaned object scenario**, only the single user **Joe Johnson** is present in on-premises Active Directory:</span></span>

![Diagnose sync error orphaned object *does user exist* scenario](./media/active-directory-aadconnect-health-sync-iidfix/IIdFixOrphanedCase.png)

### <a name="do-both-of-these-accounts-belong-to-the-same-user"></a><span data-ttu-id="6efe8-197">Do both of these accounts belong to the same user?</span><span class="sxs-lookup"><span data-stu-id="6efe8-197">Do both of these accounts belong to the same user?</span></span>
<span data-ttu-id="6efe8-198">This question checks an incoming conflicting user and the existing user object in Azure AD to see if they belong to the same user.</span><span class="sxs-lookup"><span data-stu-id="6efe8-198">This question checks an incoming conflicting user and the existing user object in Azure AD to see if they belong to the same user.</span></span>  
1.  <span data-ttu-id="6efe8-199">The conflicting object is newly synced to Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="6efe8-199">The conflicting object is newly synced to Azure Active Directory.</span></span> <span data-ttu-id="6efe8-200">Compare the objects' attributes:</span><span class="sxs-lookup"><span data-stu-id="6efe8-200">Compare the objects' attributes:</span></span>  
  - <span data-ttu-id="6efe8-201">Display Name</span><span class="sxs-lookup"><span data-stu-id="6efe8-201">Display Name</span></span>
  - <span data-ttu-id="6efe8-202">User Principal Name</span><span class="sxs-lookup"><span data-stu-id="6efe8-202">User Principal Name</span></span>
  - <span data-ttu-id="6efe8-203">Object ID</span><span class="sxs-lookup"><span data-stu-id="6efe8-203">Object ID</span></span>
2.  <span data-ttu-id="6efe8-204">If Azure AD fails to compare them, check whether Active Directory has objects with the provided **UserPrincipalNames**.</span><span class="sxs-lookup"><span data-stu-id="6efe8-204">If Azure AD fails to compare them, check whether Active Directory has objects with the provided **UserPrincipalNames**.</span></span> <span data-ttu-id="6efe8-205">Answer **No** if you find both.</span><span class="sxs-lookup"><span data-stu-id="6efe8-205">Answer **No** if you find both.</span></span>

<span data-ttu-id="6efe8-206">In the following example, the two objects belong to the same user **Joe Johnson**.</span><span class="sxs-lookup"><span data-stu-id="6efe8-206">In the following example, the two objects belong to the same user **Joe Johnson**.</span></span>

![Diagnose sync error orphaned object *same user* scenario](./media/active-directory-aadconnect-health-sync-iidfix/IIdFixOrphanedCase.png)


## <a name="what-happens-after-the-fix-is-applied-in-the-orphaned-object-scenario"></a><span data-ttu-id="6efe8-208">What happens after the fix is applied in the orphaned object scenario</span><span class="sxs-lookup"><span data-stu-id="6efe8-208">What happens after the fix is applied in the orphaned object scenario</span></span>
<span data-ttu-id="6efe8-209">Based on the answers to the preceding questions, you'll see the **Apply Fix** button when there's a fix available from Azure AD.</span><span class="sxs-lookup"><span data-stu-id="6efe8-209">Based on the answers to the preceding questions, you'll see the **Apply Fix** button when there's a fix available from Azure AD.</span></span> <span data-ttu-id="6efe8-210">In this case, the on-premises object is syncing with an unexpected Azure AD object.</span><span class="sxs-lookup"><span data-stu-id="6efe8-210">In this case, the on-premises object is syncing with an unexpected Azure AD object.</span></span> <span data-ttu-id="6efe8-211">The two objects are mapped by using the **Source Anchor**.</span><span class="sxs-lookup"><span data-stu-id="6efe8-211">The two objects are mapped by using the **Source Anchor**.</span></span> <span data-ttu-id="6efe8-212">The **Apply Fix** change takes these or similar steps:</span><span class="sxs-lookup"><span data-stu-id="6efe8-212">The **Apply Fix** change takes these or similar steps:</span></span>
1. <span data-ttu-id="6efe8-213">Updates the **Source Anchor** to the correct object in Azure AD.</span><span class="sxs-lookup"><span data-stu-id="6efe8-213">Updates the **Source Anchor** to the correct object in Azure AD.</span></span>
2. <span data-ttu-id="6efe8-214">Deletes the conflicting object in Azure AD if it's present.</span><span class="sxs-lookup"><span data-stu-id="6efe8-214">Deletes the conflicting object in Azure AD if it's present.</span></span>

![Diagnose sync error after the fix](./media/active-directory-aadconnect-health-sync-iidfix/IIdFixAfterFix.png)

>[!IMPORTANT]
> <span data-ttu-id="6efe8-216">The **Apply Fix** change applies only to orphaned object cases.</span><span class="sxs-lookup"><span data-stu-id="6efe8-216">The **Apply Fix** change applies only to orphaned object cases.</span></span>
>

<span data-ttu-id="6efe8-217">After the preceding steps, the user can access the original resource, which is a link to an existing object.</span><span class="sxs-lookup"><span data-stu-id="6efe8-217">After the preceding steps, the user can access the original resource, which is a link to an existing object.</span></span> <span data-ttu-id="6efe8-218">The **Diagnose status** value in the list view updates to **Pending Sync**. The sync error will be resolved after the next sync. Connect Health will no longer show the resolved sync error in the list view.</span><span class="sxs-lookup"><span data-stu-id="6efe8-218">The **Diagnose status** value in the list view updates to **Pending Sync**. The sync error will be resolved after the next sync. Connect Health will no longer show the resolved sync error in the list view.</span></span>

## <a name="failures-and-error-messages"></a><span data-ttu-id="6efe8-219">Failures and error messages</span><span class="sxs-lookup"><span data-stu-id="6efe8-219">Failures and error messages</span></span>
<span data-ttu-id="6efe8-220">**User with conflicting attribute is soft deleted in the Azure Active Directory. Ensure the user is hard deleted before retry.**</span><span class="sxs-lookup"><span data-stu-id="6efe8-220">**User with conflicting attribute is soft deleted in the Azure Active Directory. Ensure the user is hard deleted before retry.**</span></span>  
<span data-ttu-id="6efe8-221">The user with conflicting attribute in Azure AD should be cleaned before you can apply fix.</span><span class="sxs-lookup"><span data-stu-id="6efe8-221">The user with conflicting attribute in Azure AD should be cleaned before you can apply fix.</span></span> <span data-ttu-id="6efe8-222">Check out [how to delete the user permanently in Azure AD](https://docs.microsoft.com/azure/active-directory/fundamentals/active-directory-users-restore) before retrying the fix.</span><span class="sxs-lookup"><span data-stu-id="6efe8-222">Check out [how to delete the user permanently in Azure AD](https://docs.microsoft.com/azure/active-directory/fundamentals/active-directory-users-restore) before retrying the fix.</span></span> <span data-ttu-id="6efe8-223">The user will also be automatically deleted permanently after 30 days in soft deleted state.</span><span class="sxs-lookup"><span data-stu-id="6efe8-223">The user will also be automatically deleted permanently after 30 days in soft deleted state.</span></span> 

<span data-ttu-id="6efe8-224">**Updating source anchor to cloud-based user in your tenant is not supported.**</span><span class="sxs-lookup"><span data-stu-id="6efe8-224">**Updating source anchor to cloud-based user in your tenant is not supported.**</span></span>  
<span data-ttu-id="6efe8-225">Cloud-based user in Azure AD should not have source anchor.</span><span class="sxs-lookup"><span data-stu-id="6efe8-225">Cloud-based user in Azure AD should not have source anchor.</span></span> <span data-ttu-id="6efe8-226">Updating source anchor is not supported in this case.</span><span class="sxs-lookup"><span data-stu-id="6efe8-226">Updating source anchor is not supported in this case.</span></span> <span data-ttu-id="6efe8-227">Manual fix is required from on premises.</span><span class="sxs-lookup"><span data-stu-id="6efe8-227">Manual fix is required from on premises.</span></span> 

## <a name="faq"></a><span data-ttu-id="6efe8-228">FAQ</span><span class="sxs-lookup"><span data-stu-id="6efe8-228">FAQ</span></span>
<span data-ttu-id="6efe8-229">**Q.**</span><span class="sxs-lookup"><span data-stu-id="6efe8-229">**Q.**</span></span> <span data-ttu-id="6efe8-230">What happens if execution of the **Apply Fix** fails?</span><span class="sxs-lookup"><span data-stu-id="6efe8-230">What happens if execution of the **Apply Fix** fails?</span></span>  
<span data-ttu-id="6efe8-231">**A.**</span><span class="sxs-lookup"><span data-stu-id="6efe8-231">**A.**</span></span> <span data-ttu-id="6efe8-232">If execution fails, it's possible that Azure AD Connect is running an export error.</span><span class="sxs-lookup"><span data-stu-id="6efe8-232">If execution fails, it's possible that Azure AD Connect is running an export error.</span></span> <span data-ttu-id="6efe8-233">Refresh the portal page and retry after the next sync. The default sync cycle is 30 minutes.</span><span class="sxs-lookup"><span data-stu-id="6efe8-233">Refresh the portal page and retry after the next sync. The default sync cycle is 30 minutes.</span></span> 


<span data-ttu-id="6efe8-234">**Q.**</span><span class="sxs-lookup"><span data-stu-id="6efe8-234">**Q.**</span></span> <span data-ttu-id="6efe8-235">What if the **existing object** should be the object to be deleted?</span><span class="sxs-lookup"><span data-stu-id="6efe8-235">What if the **existing object** should be the object to be deleted?</span></span>  
<span data-ttu-id="6efe8-236">**A.**</span><span class="sxs-lookup"><span data-stu-id="6efe8-236">**A.**</span></span> <span data-ttu-id="6efe8-237">If the **existing object** should be deleted, the process doesn't involve a change of **Source Anchor**.</span><span class="sxs-lookup"><span data-stu-id="6efe8-237">If the **existing object** should be deleted, the process doesn't involve a change of **Source Anchor**.</span></span> <span data-ttu-id="6efe8-238">Usually, you can fix it from on-premises Active Directory.</span><span class="sxs-lookup"><span data-stu-id="6efe8-238">Usually, you can fix it from on-premises Active Directory.</span></span> 


<span data-ttu-id="6efe8-239">**Q.**</span><span class="sxs-lookup"><span data-stu-id="6efe8-239">**Q.**</span></span> <span data-ttu-id="6efe8-240">What permission does a user need to apply the fix?</span><span class="sxs-lookup"><span data-stu-id="6efe8-240">What permission does a user need to apply the fix?</span></span>  
<span data-ttu-id="6efe8-241">**A.**</span><span class="sxs-lookup"><span data-stu-id="6efe8-241">**A.**</span></span> <span data-ttu-id="6efe8-242">**Global Admin**, or **Contributor** from the RBAC settings, has permission to access the diagnostic and troubleshooting process.</span><span class="sxs-lookup"><span data-stu-id="6efe8-242">**Global Admin**, or **Contributor** from the RBAC settings, has permission to access the diagnostic and troubleshooting process.</span></span>


<span data-ttu-id="6efe8-243">**Q.**</span><span class="sxs-lookup"><span data-stu-id="6efe8-243">**Q.**</span></span> <span data-ttu-id="6efe8-244">Do I have to configure Azure AD Connect or update the Azure AD Connect Health agent for this feature?</span><span class="sxs-lookup"><span data-stu-id="6efe8-244">Do I have to configure Azure AD Connect or update the Azure AD Connect Health agent for this feature?</span></span>  
<span data-ttu-id="6efe8-245">**A.**</span><span class="sxs-lookup"><span data-stu-id="6efe8-245">**A.**</span></span> <span data-ttu-id="6efe8-246">No, the diagnosis process is a complete cloud-based feature.</span><span class="sxs-lookup"><span data-stu-id="6efe8-246">No, the diagnosis process is a complete cloud-based feature.</span></span>


<span data-ttu-id="6efe8-247">**Q.**</span><span class="sxs-lookup"><span data-stu-id="6efe8-247">**Q.**</span></span> <span data-ttu-id="6efe8-248">If the existing object is soft deleted, will the diagnosis process make the object active again?</span><span class="sxs-lookup"><span data-stu-id="6efe8-248">If the existing object is soft deleted, will the diagnosis process make the object active again?</span></span>  
<span data-ttu-id="6efe8-249">**A.**</span><span class="sxs-lookup"><span data-stu-id="6efe8-249">**A.**</span></span> <span data-ttu-id="6efe8-250">No, the fix won't update object attributes other than **Source Anchor**.</span><span class="sxs-lookup"><span data-stu-id="6efe8-250">No, the fix won't update object attributes other than **Source Anchor**.</span></span>
