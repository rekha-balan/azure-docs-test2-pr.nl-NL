---
title: Can't Access this Corporate Application error when using an Application Proxy application | Microsoft Docs
description: How to resolve common access issues with Azure AD Application Proxy applications.
services: active-directory
documentationcenter: ''
author: barbkess
manager: mtillman
ms.assetid: ''
ms.service: active-directory
ms.component: app-mgmt
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: conceptual
ms.date: 05/21/2018
ms.author: barbkess
ms.reviewer: asteen
ms.openlocfilehash: 2af5ed294c4a53e38690991f1f65b3f7d2f46c73
ms.sourcegitcommit: d1451406a010fd3aa854dc8e5b77dc5537d8050e
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 09/13/2018
ms.locfileid: "44968875"
---
# <a name="cant-access-this-corporate-application-error-when-using-an-application-proxy-application"></a><span data-ttu-id="d9991-103">"Can't Access this Corporate Application" error when using an Application Proxy application</span><span class="sxs-lookup"><span data-stu-id="d9991-103">"Can't Access this Corporate Application" error when using an Application Proxy application</span></span>

<span data-ttu-id="d9991-104">This article helps you troubleshoot common issues for the "This corporate app can't be accessed" error on an Azure AD Application Proxy application.</span><span class="sxs-lookup"><span data-stu-id="d9991-104">This article helps you troubleshoot common issues for the "This corporate app can't be accessed" error on an Azure AD Application Proxy application.</span></span>

## <a name="overview"></a><span data-ttu-id="d9991-105">Overview</span><span class="sxs-lookup"><span data-stu-id="d9991-105">Overview</span></span>
<span data-ttu-id="d9991-106">When you see this error, find the status code on the error page.</span><span class="sxs-lookup"><span data-stu-id="d9991-106">When you see this error, find the status code on the error page.</span></span> <span data-ttu-id="d9991-107">That code is likely one of the following status codes:</span><span class="sxs-lookup"><span data-stu-id="d9991-107">That code is likely one of the following status codes:</span></span>

-   <span data-ttu-id="d9991-108">**Gateway Timeout**: The Application Proxy service is unable to reach the connector.</span><span class="sxs-lookup"><span data-stu-id="d9991-108">**Gateway Timeout**: The Application Proxy service is unable to reach the connector.</span></span> <span data-ttu-id="d9991-109">This error typically indicates a problem with the connector assignment, connector itself, or the networking rules around the connector.</span><span class="sxs-lookup"><span data-stu-id="d9991-109">This error typically indicates a problem with the connector assignment, connector itself, or the networking rules around the connector.</span></span>

-   <span data-ttu-id="d9991-110">**Bad Gateway**: The connector is unable to reach the backend application.</span><span class="sxs-lookup"><span data-stu-id="d9991-110">**Bad Gateway**: The connector is unable to reach the backend application.</span></span> <span data-ttu-id="d9991-111">This error could indicate a misconfiguration of the application.</span><span class="sxs-lookup"><span data-stu-id="d9991-111">This error could indicate a misconfiguration of the application.</span></span>

-   <span data-ttu-id="d9991-112">**Forbidden**: The user is not authorized to access the application.</span><span class="sxs-lookup"><span data-stu-id="d9991-112">**Forbidden**: The user is not authorized to access the application.</span></span> <span data-ttu-id="d9991-113">This error can happen either when the user is not assigned to the application in Azure Active Directory, or if on the backend the user does not have permission to access the application.</span><span class="sxs-lookup"><span data-stu-id="d9991-113">This error can happen either when the user is not assigned to the application in Azure Active Directory, or if on the backend the user does not have permission to access the application.</span></span>

<span data-ttu-id="d9991-114">To find the code, look at the text at the bottom left of the error message for the “Status Code” field.</span><span class="sxs-lookup"><span data-stu-id="d9991-114">To find the code, look at the text at the bottom left of the error message for the “Status Code” field.</span></span> <span data-ttu-id="d9991-115">Also look for any additional tips at the bottom of the page.</span><span class="sxs-lookup"><span data-stu-id="d9991-115">Also look for any additional tips at the bottom of the page.</span></span>

   ![Gateway timeout error](./media/application-proxy-sign-in-bad-gateway-timeout-error/connection-problem.png)

<span data-ttu-id="d9991-117">For details on how to troubleshoot the root cause of these errors and more details on suggested fixes, see the corresponding section below.</span><span class="sxs-lookup"><span data-stu-id="d9991-117">For details on how to troubleshoot the root cause of these errors and more details on suggested fixes, see the corresponding section below.</span></span>

## <a name="gateway-timeout-errors"></a><span data-ttu-id="d9991-118">Gateway Timeout errors</span><span class="sxs-lookup"><span data-stu-id="d9991-118">Gateway Timeout errors</span></span>

<span data-ttu-id="d9991-119">A gateway timeout occurs when the service tries to reach the connector and is unable to within the timeout window.</span><span class="sxs-lookup"><span data-stu-id="d9991-119">A gateway timeout occurs when the service tries to reach the connector and is unable to within the timeout window.</span></span> <span data-ttu-id="d9991-120">This error is typically caused by an application assigned to a Connector Group with no working connectors, or some ports required by the Connector are not open.</span><span class="sxs-lookup"><span data-stu-id="d9991-120">This error is typically caused by an application assigned to a Connector Group with no working connectors, or some ports required by the Connector are not open.</span></span>


## <a name="bad-gateway-errors"></a><span data-ttu-id="d9991-121">Bad Gateway errors</span><span class="sxs-lookup"><span data-stu-id="d9991-121">Bad Gateway errors</span></span>

<span data-ttu-id="d9991-122">A bad gateway error indicates that the connector is unable to reach the backend application.</span><span class="sxs-lookup"><span data-stu-id="d9991-122">A bad gateway error indicates that the connector is unable to reach the backend application.</span></span> <span data-ttu-id="d9991-123">make sure that you have published the correct application.</span><span class="sxs-lookup"><span data-stu-id="d9991-123">make sure that you have published the correct application.</span></span> <span data-ttu-id="d9991-124">Common mistakes that cause this error are:</span><span class="sxs-lookup"><span data-stu-id="d9991-124">Common mistakes that cause this error are:</span></span>

-   <span data-ttu-id="d9991-125">A typo or mistake in the internal URL</span><span class="sxs-lookup"><span data-stu-id="d9991-125">A typo or mistake in the internal URL</span></span>

-   <span data-ttu-id="d9991-126">Not publishing the root of the application.</span><span class="sxs-lookup"><span data-stu-id="d9991-126">Not publishing the root of the application.</span></span> <span data-ttu-id="d9991-127">For example, publishing <http://expenses/reimbursement> but trying to access <http://expenses></span><span class="sxs-lookup"><span data-stu-id="d9991-127">For example, publishing <http://expenses/reimbursement> but trying to access <http://expenses></span></span>

-   <span data-ttu-id="d9991-128">Problems with the Kerberos Constrained Delegation (KCD) configuration</span><span class="sxs-lookup"><span data-stu-id="d9991-128">Problems with the Kerberos Constrained Delegation (KCD) configuration</span></span>

-   <span data-ttu-id="d9991-129">Problems with the backend application</span><span class="sxs-lookup"><span data-stu-id="d9991-129">Problems with the backend application</span></span>

## <a name="forbidden-errors"></a><span data-ttu-id="d9991-130">Forbidden errors</span><span class="sxs-lookup"><span data-stu-id="d9991-130">Forbidden errors</span></span>

<span data-ttu-id="d9991-131">If you see a forbidden error, the user has not been assigned to the application.</span><span class="sxs-lookup"><span data-stu-id="d9991-131">If you see a forbidden error, the user has not been assigned to the application.</span></span> <span data-ttu-id="d9991-132">This error could be either in Azure Active Directory or on the backend application.</span><span class="sxs-lookup"><span data-stu-id="d9991-132">This error could be either in Azure Active Directory or on the backend application.</span></span>

<span data-ttu-id="d9991-133">To learn how to assign users to the application in Azure, see the [configuration documentation](https://docs.microsoft.com/azure/active-directory/application-proxy-publish-azure-portal#add-a-test-user).</span><span class="sxs-lookup"><span data-stu-id="d9991-133">To learn how to assign users to the application in Azure, see the [configuration documentation](https://docs.microsoft.com/azure/active-directory/application-proxy-publish-azure-portal#add-a-test-user).</span></span>

<span data-ttu-id="d9991-134">If you confirm the user is assigned to the application in Azure, check the user configuration in the backend application.</span><span class="sxs-lookup"><span data-stu-id="d9991-134">If you confirm the user is assigned to the application in Azure, check the user configuration in the backend application.</span></span> <span data-ttu-id="d9991-135">If you are using Kerberos Constrained Delegation/Integrated Windows Authentication, see the KCD Troubleshoot page for guidelines.</span><span class="sxs-lookup"><span data-stu-id="d9991-135">If you are using Kerberos Constrained Delegation/Integrated Windows Authentication, see the KCD Troubleshoot page for guidelines.</span></span>

## <a name="check-the-applications-internal-url"></a><span data-ttu-id="d9991-136">Check the application's internal URL</span><span class="sxs-lookup"><span data-stu-id="d9991-136">Check the application's internal URL</span></span>

<span data-ttu-id="d9991-137">As a first quick step, double check and fix the internal URL by opening the application through **Enterprise Applications**, then selecting the **Application Proxy** menu.</span><span class="sxs-lookup"><span data-stu-id="d9991-137">As a first quick step, double check and fix the internal URL by opening the application through **Enterprise Applications**, then selecting the **Application Proxy** menu.</span></span> <span data-ttu-id="d9991-138">Verify the internal URL is the one used from your on-prem network to access the application.</span><span class="sxs-lookup"><span data-stu-id="d9991-138">Verify the internal URL is the one used from your on-prem network to access the application.</span></span>

## <a name="check-the-application-is-assigned-to-a-working-connector-group"></a><span data-ttu-id="d9991-139">Check the application is assigned to a working Connector Group</span><span class="sxs-lookup"><span data-stu-id="d9991-139">Check the application is assigned to a working Connector Group</span></span>

<span data-ttu-id="d9991-140">To verify the application is assigned to a working Connector Group:</span><span class="sxs-lookup"><span data-stu-id="d9991-140">To verify the application is assigned to a working Connector Group:</span></span>

1.  <span data-ttu-id="d9991-141">Open the application in the portal by going to **Azure Active Directory**, clicking on **Enterprise Applications**, then **All Applications.**</span><span class="sxs-lookup"><span data-stu-id="d9991-141">Open the application in the portal by going to **Azure Active Directory**, clicking on **Enterprise Applications**, then **All Applications.**</span></span> <span data-ttu-id="d9991-142">Open the application, then select **Application Proxy** from the left menu.</span><span class="sxs-lookup"><span data-stu-id="d9991-142">Open the application, then select **Application Proxy** from the left menu.</span></span>

2.  <span data-ttu-id="d9991-143">Look at the Connector Group field.</span><span class="sxs-lookup"><span data-stu-id="d9991-143">Look at the Connector Group field.</span></span> <span data-ttu-id="d9991-144">If there are no active connectors in the group, you see a warning.</span><span class="sxs-lookup"><span data-stu-id="d9991-144">If there are no active connectors in the group, you see a warning.</span></span> <span data-ttu-id="d9991-145">If you don’t see any warnings, move on to “verify all required ports are whitelisted”.</span><span class="sxs-lookup"><span data-stu-id="d9991-145">If you don’t see any warnings, move on to “verify all required ports are whitelisted”.</span></span>

3.  <span data-ttu-id="d9991-146">If the wrong Connector Group is showing, use the drop-down to select the correct group, and confirm you no longer see any warnings.</span><span class="sxs-lookup"><span data-stu-id="d9991-146">If the wrong Connector Group is showing, use the drop-down to select the correct group, and confirm you no longer see any warnings.</span></span> <span data-ttu-id="d9991-147">If the intended Connector Group is showing, click the warning message to open the page with Connector management.</span><span class="sxs-lookup"><span data-stu-id="d9991-147">If the intended Connector Group is showing, click the warning message to open the page with Connector management.</span></span>

4.  <span data-ttu-id="d9991-148">From here, there are a few ways to drill in further:</span><span class="sxs-lookup"><span data-stu-id="d9991-148">From here, there are a few ways to drill in further:</span></span>

  * <span data-ttu-id="d9991-149">Move an active Connector into the group: If you have an active Connector that should belong to this group and has line of sight to the target backend application, you can move the Connector into the assigned group.</span><span class="sxs-lookup"><span data-stu-id="d9991-149">Move an active Connector into the group: If you have an active Connector that should belong to this group and has line of sight to the target backend application, you can move the Connector into the assigned group.</span></span> <span data-ttu-id="d9991-150">To do so, click the Connector.</span><span class="sxs-lookup"><span data-stu-id="d9991-150">To do so, click the Connector.</span></span> <span data-ttu-id="d9991-151">In the “Connector Group” field, use the drop-down to select the correct group, and click save.</span><span class="sxs-lookup"><span data-stu-id="d9991-151">In the “Connector Group” field, use the drop-down to select the correct group, and click save.</span></span>

  * <span data-ttu-id="d9991-152">Download a new Connector for that group: From this page, you can get the link to [download a new Connector](https://download.msappproxy.net/Subscription/d3c8b69d-6bf7-42be-a529-3fe9c2e70c90/Connector/Download).</span><span class="sxs-lookup"><span data-stu-id="d9991-152">Download a new Connector for that group: From this page, you can get the link to [download a new Connector](https://download.msappproxy.net/Subscription/d3c8b69d-6bf7-42be-a529-3fe9c2e70c90/Connector/Download).</span></span> <span data-ttu-id="d9991-153">Install the Connector on a machine with direct line of sight to the backend application.</span><span class="sxs-lookup"><span data-stu-id="d9991-153">Install the Connector on a machine with direct line of sight to the backend application.</span></span> <span data-ttu-id="d9991-154">Typicall, the Connector is installed on the same server as the application.</span><span class="sxs-lookup"><span data-stu-id="d9991-154">Typicall, the Connector is installed on the same server as the application.</span></span> <span data-ttu-id="d9991-155">Use the download Connector link to download a connector onto the target machine.</span><span class="sxs-lookup"><span data-stu-id="d9991-155">Use the download Connector link to download a connector onto the target machine.</span></span> <span data-ttu-id="d9991-156">Next, click the Connector, and use the “Connector Group” drop-down to make sure it belongs to the right group.</span><span class="sxs-lookup"><span data-stu-id="d9991-156">Next, click the Connector, and use the “Connector Group” drop-down to make sure it belongs to the right group.</span></span>

  * <span data-ttu-id="d9991-157">Investigate an inactive Connector: If a connector shows as inactive, it is unable to reach the service.</span><span class="sxs-lookup"><span data-stu-id="d9991-157">Investigate an inactive Connector: If a connector shows as inactive, it is unable to reach the service.</span></span> <span data-ttu-id="d9991-158">This error is typically due to some required ports being blocked.</span><span class="sxs-lookup"><span data-stu-id="d9991-158">This error is typically due to some required ports being blocked.</span></span> <span data-ttu-id="d9991-159">To solve this issue, move on to “verify all required ports are whitelisted.”</span><span class="sxs-lookup"><span data-stu-id="d9991-159">To solve this issue, move on to “verify all required ports are whitelisted.”</span></span>

<span data-ttu-id="d9991-160">After using these steps to ensure the application is assigned to a group with working Connectors, test the application again.</span><span class="sxs-lookup"><span data-stu-id="d9991-160">After using these steps to ensure the application is assigned to a group with working Connectors, test the application again.</span></span> <span data-ttu-id="d9991-161">If it is still not working, continue to the next section.</span><span class="sxs-lookup"><span data-stu-id="d9991-161">If it is still not working, continue to the next section.</span></span>

## <a name="check-all-required-ports-are-whitelisted"></a><span data-ttu-id="d9991-162">Check all required ports are whitelisted</span><span class="sxs-lookup"><span data-stu-id="d9991-162">Check all required ports are whitelisted</span></span>

<span data-ttu-id="d9991-163">To verify that all required ports are open, see the documentation on opening ports.</span><span class="sxs-lookup"><span data-stu-id="d9991-163">To verify that all required ports are open, see the documentation on opening ports.</span></span> <span data-ttu-id="d9991-164">If all the required ports are open, move to the next section.</span><span class="sxs-lookup"><span data-stu-id="d9991-164">If all the required ports are open, move to the next section.</span></span>

## <a name="check-for-other-connector-errors"></a><span data-ttu-id="d9991-165">Check for other Connector Errors</span><span class="sxs-lookup"><span data-stu-id="d9991-165">Check for other Connector Errors</span></span>

<span data-ttu-id="d9991-166">If none of the above resolve the issue, the next step is to look for issues or errors with the Connector itself.</span><span class="sxs-lookup"><span data-stu-id="d9991-166">If none of the above resolve the issue, the next step is to look for issues or errors with the Connector itself.</span></span> <span data-ttu-id="d9991-167">You can see some common errors in the [Troubleshoot document](https://docs.microsoft.com/azure/active-directory/active-directory-application-proxy-troubleshoot#connector-errors).</span><span class="sxs-lookup"><span data-stu-id="d9991-167">You can see some common errors in the [Troubleshoot document](https://docs.microsoft.com/azure/active-directory/active-directory-application-proxy-troubleshoot#connector-errors).</span></span> 

<span data-ttu-id="d9991-168">You can also look directly at the Connector logs to identify any errors.</span><span class="sxs-lookup"><span data-stu-id="d9991-168">You can also look directly at the Connector logs to identify any errors.</span></span> <span data-ttu-id="d9991-169">Many of the error messages share specific recommendations for fixes.</span><span class="sxs-lookup"><span data-stu-id="d9991-169">Many of the error messages share specific recommendations for fixes.</span></span> <span data-ttu-id="d9991-170">To view the logs, see the [connectors documentation](application-proxy-connectors.md#under-the-hood).</span><span class="sxs-lookup"><span data-stu-id="d9991-170">To view the logs, see the [connectors documentation](application-proxy-connectors.md#under-the-hood).</span></span>

## <a name="additional-resolutions"></a><span data-ttu-id="d9991-171">Additional Resolutions</span><span class="sxs-lookup"><span data-stu-id="d9991-171">Additional Resolutions</span></span>

<span data-ttu-id="d9991-172">If the above didn’t fix the problem, there are a few different possible causes.</span><span class="sxs-lookup"><span data-stu-id="d9991-172">If the above didn’t fix the problem, there are a few different possible causes.</span></span> <span data-ttu-id="d9991-173">To identify the issue:</span><span class="sxs-lookup"><span data-stu-id="d9991-173">To identify the issue:</span></span>

<span data-ttu-id="d9991-174">If your application is configured to use Integrated Windows Authentication (IWA), test the application without single sign-on.</span><span class="sxs-lookup"><span data-stu-id="d9991-174">If your application is configured to use Integrated Windows Authentication (IWA), test the application without single sign-on.</span></span> <span data-ttu-id="d9991-175">If not, move to the next paragraph.</span><span class="sxs-lookup"><span data-stu-id="d9991-175">If not, move to the next paragraph.</span></span> <span data-ttu-id="d9991-176">To check the application without single sign-on, open your application through **Enterprise Applications,** and go to the **Single Sign-On** menu.</span><span class="sxs-lookup"><span data-stu-id="d9991-176">To check the application without single sign-on, open your application through **Enterprise Applications,** and go to the **Single Sign-On** menu.</span></span> <span data-ttu-id="d9991-177">Change the drop-down from “Integrated Windows Authentication” to “Azure AD single sign-on disabled”.</span><span class="sxs-lookup"><span data-stu-id="d9991-177">Change the drop-down from “Integrated Windows Authentication” to “Azure AD single sign-on disabled”.</span></span> 

<span data-ttu-id="d9991-178">Now open a browser and try to access the application again.</span><span class="sxs-lookup"><span data-stu-id="d9991-178">Now open a browser and try to access the application again.</span></span> <span data-ttu-id="d9991-179">You should be prompted for authentication and get into the application.</span><span class="sxs-lookup"><span data-stu-id="d9991-179">You should be prompted for authentication and get into the application.</span></span> <span data-ttu-id="d9991-180">If you are able to authenticate, the problem is with the Kerberos Constrained Delegation (KCD) configuration that enables the single sign-on.</span><span class="sxs-lookup"><span data-stu-id="d9991-180">If you are able to authenticate, the problem is with the Kerberos Constrained Delegation (KCD) configuration that enables the single sign-on.</span></span> <span data-ttu-id="d9991-181">For more information, see the KCD Troubleshoot page.</span><span class="sxs-lookup"><span data-stu-id="d9991-181">For more information, see the KCD Troubleshoot page.</span></span>

<span data-ttu-id="d9991-182">If you continue to see the error, go to the machine where the Connector is installed, open a browser and attempt to reach the internal URL used for the application.</span><span class="sxs-lookup"><span data-stu-id="d9991-182">If you continue to see the error, go to the machine where the Connector is installed, open a browser and attempt to reach the internal URL used for the application.</span></span> <span data-ttu-id="d9991-183">The Connector acts like another client from the same machine.</span><span class="sxs-lookup"><span data-stu-id="d9991-183">The Connector acts like another client from the same machine.</span></span> <span data-ttu-id="d9991-184">If you can’t reach the application, investigate why that machine is unable to reach the application, or use a connector on a server that is able to access the application.</span><span class="sxs-lookup"><span data-stu-id="d9991-184">If you can’t reach the application, investigate why that machine is unable to reach the application, or use a connector on a server that is able to access the application.</span></span>

<span data-ttu-id="d9991-185">If you can reach the application from that machine, to look for issues or errors with the Connector itself.</span><span class="sxs-lookup"><span data-stu-id="d9991-185">If you can reach the application from that machine, to look for issues or errors with the Connector itself.</span></span> <span data-ttu-id="d9991-186">You can see some common errors in the [Troubleshoot document](application-proxy-troubleshoot.md#connector-errors).</span><span class="sxs-lookup"><span data-stu-id="d9991-186">You can see some common errors in the [Troubleshoot document](application-proxy-troubleshoot.md#connector-errors).</span></span> <span data-ttu-id="d9991-187">You can also look directly at the Connector logs to identify any errors.</span><span class="sxs-lookup"><span data-stu-id="d9991-187">You can also look directly at the Connector logs to identify any errors.</span></span> <span data-ttu-id="d9991-188">Many of our error messages be able to share more specific recommendations for fixes.</span><span class="sxs-lookup"><span data-stu-id="d9991-188">Many of our error messages be able to share more specific recommendations for fixes.</span></span> <span data-ttu-id="d9991-189">To learn how to view the logs, see [our connectors documentation](application-proxy-connectors.md#under-the-hood).</span><span class="sxs-lookup"><span data-stu-id="d9991-189">To learn how to view the logs, see [our connectors documentation](application-proxy-connectors.md#under-the-hood).</span></span>

## <a name="next-steps"></a><span data-ttu-id="d9991-190">Next steps</span><span class="sxs-lookup"><span data-stu-id="d9991-190">Next steps</span></span>
[<span data-ttu-id="d9991-191">Understand Azure AD Application Proxy connectors</span><span class="sxs-lookup"><span data-stu-id="d9991-191">Understand Azure AD Application Proxy connectors</span></span>](application-proxy-connectors.md)
