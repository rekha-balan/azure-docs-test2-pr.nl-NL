---
title: Understand Azure AD Application Proxy connectors | Microsoft Docs
description: Covers the basics about Azure AD Application Proxy connectors.
services: active-directory
documentationcenter: ''
author: barbkess
manager: mtillman
ms.service: active-directory
ms.component: app-mgmt
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: conceptual
ms.date: 06/28/2018
ms.author: barbkess
ms.reviewer: harshja
ms.custom: it-pro
ms.openlocfilehash: 23bf9d5fb26ee3a0f224f7a8acc2b0539a5c1607
ms.sourcegitcommit: d1451406a010fd3aa854dc8e5b77dc5537d8050e
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 09/13/2018
ms.locfileid: "44865147"
---
# <a name="understand-azure-ad-application-proxy-connectors"></a><span data-ttu-id="e49ec-103">Understand Azure AD Application Proxy connectors</span><span class="sxs-lookup"><span data-stu-id="e49ec-103">Understand Azure AD Application Proxy connectors</span></span>

<span data-ttu-id="e49ec-104">Connectors are what make Azure AD Application Proxy possible.</span><span class="sxs-lookup"><span data-stu-id="e49ec-104">Connectors are what make Azure AD Application Proxy possible.</span></span> <span data-ttu-id="e49ec-105">They are simple, easy to deploy and maintain, and super powerful.</span><span class="sxs-lookup"><span data-stu-id="e49ec-105">They are simple, easy to deploy and maintain, and super powerful.</span></span> <span data-ttu-id="e49ec-106">This article discusses what connectors are, how they work, and some suggestions for how to optimize your deployment.</span><span class="sxs-lookup"><span data-stu-id="e49ec-106">This article discusses what connectors are, how they work, and some suggestions for how to optimize your deployment.</span></span> 

## <a name="what-is-an-application-proxy-connector"></a><span data-ttu-id="e49ec-107">What is an Application Proxy connector?</span><span class="sxs-lookup"><span data-stu-id="e49ec-107">What is an Application Proxy connector?</span></span>

<span data-ttu-id="e49ec-108">Connectors are lightweight agents that sit on-premises and facilitate the outbound connection to the Application Proxy service.</span><span class="sxs-lookup"><span data-stu-id="e49ec-108">Connectors are lightweight agents that sit on-premises and facilitate the outbound connection to the Application Proxy service.</span></span> <span data-ttu-id="e49ec-109">Connectors must be installed on a Windows Server that has access to the backend application.</span><span class="sxs-lookup"><span data-stu-id="e49ec-109">Connectors must be installed on a Windows Server that has access to the backend application.</span></span> <span data-ttu-id="e49ec-110">You can organize connectors into connector groups, with each group handling traffic to specific applications.</span><span class="sxs-lookup"><span data-stu-id="e49ec-110">You can organize connectors into connector groups, with each group handling traffic to specific applications.</span></span> <span data-ttu-id="e49ec-111">Connectors load-balance automatically, and can help to optimize your network structure.</span><span class="sxs-lookup"><span data-stu-id="e49ec-111">Connectors load-balance automatically, and can help to optimize your network structure.</span></span> 

## <a name="requirements-and-deployment"></a><span data-ttu-id="e49ec-112">Requirements and deployment</span><span class="sxs-lookup"><span data-stu-id="e49ec-112">Requirements and deployment</span></span>

<span data-ttu-id="e49ec-113">To deploy Application Proxy successfully, you need at least one connector, but we recommend two or more for greater resiliency.</span><span class="sxs-lookup"><span data-stu-id="e49ec-113">To deploy Application Proxy successfully, you need at least one connector, but we recommend two or more for greater resiliency.</span></span> <span data-ttu-id="e49ec-114">Install the connector on a Windows Server 2012 R2 or 2016 machine.</span><span class="sxs-lookup"><span data-stu-id="e49ec-114">Install the connector on a Windows Server 2012 R2 or 2016 machine.</span></span> <span data-ttu-id="e49ec-115">The connector needs to be able to communicate with the Application Proxy service as well as the on-premises applications that you publish.</span><span class="sxs-lookup"><span data-stu-id="e49ec-115">The connector needs to be able to communicate with the Application Proxy service as well as the on-premises applications that you publish.</span></span> 

<span data-ttu-id="e49ec-116">For more information about the network requirements for the connector server, see [Get started with Application Proxy and install a connector](application-proxy-enable.md).</span><span class="sxs-lookup"><span data-stu-id="e49ec-116">For more information about the network requirements for the connector server, see [Get started with Application Proxy and install a connector](application-proxy-enable.md).</span></span>

## <a name="maintenance"></a><span data-ttu-id="e49ec-117">Maintenance</span><span class="sxs-lookup"><span data-stu-id="e49ec-117">Maintenance</span></span>
<span data-ttu-id="e49ec-118">The connectors and the service take care of all the high availability tasks.</span><span class="sxs-lookup"><span data-stu-id="e49ec-118">The connectors and the service take care of all the high availability tasks.</span></span> <span data-ttu-id="e49ec-119">They can be added or removed dynamically.</span><span class="sxs-lookup"><span data-stu-id="e49ec-119">They can be added or removed dynamically.</span></span> <span data-ttu-id="e49ec-120">Each time a new request arrives it is routed to one of the connectors that is currently available.</span><span class="sxs-lookup"><span data-stu-id="e49ec-120">Each time a new request arrives it is routed to one of the connectors that is currently available.</span></span> <span data-ttu-id="e49ec-121">If a connector is temporarily not available, it doesn't respond to this traffic.</span><span class="sxs-lookup"><span data-stu-id="e49ec-121">If a connector is temporarily not available, it doesn't respond to this traffic.</span></span>

<span data-ttu-id="e49ec-122">The connectors are stateless and have no configuration data on the machine.</span><span class="sxs-lookup"><span data-stu-id="e49ec-122">The connectors are stateless and have no configuration data on the machine.</span></span> <span data-ttu-id="e49ec-123">The only data they store is the settings for connecting the service and its authentication certificate.</span><span class="sxs-lookup"><span data-stu-id="e49ec-123">The only data they store is the settings for connecting the service and its authentication certificate.</span></span> <span data-ttu-id="e49ec-124">When they connect to the service, they pull all the required configuration data and refresh it every couple of minutes.</span><span class="sxs-lookup"><span data-stu-id="e49ec-124">When they connect to the service, they pull all the required configuration data and refresh it every couple of minutes.</span></span>

<span data-ttu-id="e49ec-125">Connectors also poll the server to find out whether there is a newer version of the connector.</span><span class="sxs-lookup"><span data-stu-id="e49ec-125">Connectors also poll the server to find out whether there is a newer version of the connector.</span></span> <span data-ttu-id="e49ec-126">If one is found, the connectors update themselves.</span><span class="sxs-lookup"><span data-stu-id="e49ec-126">If one is found, the connectors update themselves.</span></span>

<span data-ttu-id="e49ec-127">You can monitor your connectors from the machine they are running on, using either the event log and performance counters.</span><span class="sxs-lookup"><span data-stu-id="e49ec-127">You can monitor your connectors from the machine they are running on, using either the event log and performance counters.</span></span> <span data-ttu-id="e49ec-128">Or you can view their status from the Application Proxy page of the Azure portal:</span><span class="sxs-lookup"><span data-stu-id="e49ec-128">Or you can view their status from the Application Proxy page of the Azure portal:</span></span>

 ![AzureAD Application Proxy Connectors](./media/application-proxy-connectors/app-proxy-connectors.png)

<span data-ttu-id="e49ec-130">You don't have to manually delete connectors that are unused.</span><span class="sxs-lookup"><span data-stu-id="e49ec-130">You don't have to manually delete connectors that are unused.</span></span> <span data-ttu-id="e49ec-131">When a connector is running, it remains active as it connects to the service.</span><span class="sxs-lookup"><span data-stu-id="e49ec-131">When a connector is running, it remains active as it connects to the service.</span></span> <span data-ttu-id="e49ec-132">Unused connectors are tagged as _inactive_ and are removed after 10 days of inactivity.</span><span class="sxs-lookup"><span data-stu-id="e49ec-132">Unused connectors are tagged as _inactive_ and are removed after 10 days of inactivity.</span></span> <span data-ttu-id="e49ec-133">If you do want to uninstall a connector, though, uninstall both the Connector service and the Updater service from the server.</span><span class="sxs-lookup"><span data-stu-id="e49ec-133">If you do want to uninstall a connector, though, uninstall both the Connector service and the Updater service from the server.</span></span> <span data-ttu-id="e49ec-134">Restart your computer to fully remove the service.</span><span class="sxs-lookup"><span data-stu-id="e49ec-134">Restart your computer to fully remove the service.</span></span>

## <a name="automatic-updates"></a><span data-ttu-id="e49ec-135">Automatic updates</span><span class="sxs-lookup"><span data-stu-id="e49ec-135">Automatic updates</span></span>

<span data-ttu-id="e49ec-136">Azure AD provides automatic updates for all the connectors that you deploy.</span><span class="sxs-lookup"><span data-stu-id="e49ec-136">Azure AD provides automatic updates for all the connectors that you deploy.</span></span> <span data-ttu-id="e49ec-137">As long as the Application Proxy Connector Updater service is running, your connectors update automatically.</span><span class="sxs-lookup"><span data-stu-id="e49ec-137">As long as the Application Proxy Connector Updater service is running, your connectors update automatically.</span></span> <span data-ttu-id="e49ec-138">If you don’t see the Connector Updater service on your server, you need to [reinstall your connector](application-proxy-enable.md) to get any updates.</span><span class="sxs-lookup"><span data-stu-id="e49ec-138">If you don’t see the Connector Updater service on your server, you need to [reinstall your connector](application-proxy-enable.md) to get any updates.</span></span> 

<span data-ttu-id="e49ec-139">If you don't want to wait for an automatic update to come to your connector, you can perform a manual upgrade.</span><span class="sxs-lookup"><span data-stu-id="e49ec-139">If you don't want to wait for an automatic update to come to your connector, you can perform a manual upgrade.</span></span> <span data-ttu-id="e49ec-140">Go to the [connector download page](https://download.msappproxy.net/subscription/d3c8b69d-6bf7-42be-a529-3fe9c2e70c90/connector/download) on the server where your connector is located and select **Download**.</span><span class="sxs-lookup"><span data-stu-id="e49ec-140">Go to the [connector download page](https://download.msappproxy.net/subscription/d3c8b69d-6bf7-42be-a529-3fe9c2e70c90/connector/download) on the server where your connector is located and select **Download**.</span></span> <span data-ttu-id="e49ec-141">This process kicks off an upgrade for the local connector.</span><span class="sxs-lookup"><span data-stu-id="e49ec-141">This process kicks off an upgrade for the local connector.</span></span> 

<span data-ttu-id="e49ec-142">For tenants with multiple connectors, the automatic updates target one connector at a time in each group to prevent downtime in your environment.</span><span class="sxs-lookup"><span data-stu-id="e49ec-142">For tenants with multiple connectors, the automatic updates target one connector at a time in each group to prevent downtime in your environment.</span></span> 

<span data-ttu-id="e49ec-143">You may experience downtime when your connector updates if:</span><span class="sxs-lookup"><span data-stu-id="e49ec-143">You may experience downtime when your connector updates if:</span></span>  
- <span data-ttu-id="e49ec-144">You only have one connector.</span><span class="sxs-lookup"><span data-stu-id="e49ec-144">You only have one connector.</span></span> <span data-ttu-id="e49ec-145">To avoid this downtime and improve high availability, we recommend you install a second connector and [create a connector group](application-proxy-connector-groups.md).</span><span class="sxs-lookup"><span data-stu-id="e49ec-145">To avoid this downtime and improve high availability, we recommend you install a second connector and [create a connector group](application-proxy-connector-groups.md).</span></span>  
- <span data-ttu-id="e49ec-146">A connector was in the middle of a transaction when the update began.</span><span class="sxs-lookup"><span data-stu-id="e49ec-146">A connector was in the middle of a transaction when the update began.</span></span> <span data-ttu-id="e49ec-147">Although the initial transaction is lost, your browser should automatically retry the operation or you can refresh your page.</span><span class="sxs-lookup"><span data-stu-id="e49ec-147">Although the initial transaction is lost, your browser should automatically retry the operation or you can refresh your page.</span></span> <span data-ttu-id="e49ec-148">When the request is resent, the traffic is routed to a backup connector.</span><span class="sxs-lookup"><span data-stu-id="e49ec-148">When the request is resent, the traffic is routed to a backup connector.</span></span>

## <a name="creating-connector-groups"></a><span data-ttu-id="e49ec-149">Creating connector groups</span><span class="sxs-lookup"><span data-stu-id="e49ec-149">Creating connector groups</span></span>

<span data-ttu-id="e49ec-150">Connector groups enable you to assign specific connectors to serve specific applications.</span><span class="sxs-lookup"><span data-stu-id="e49ec-150">Connector groups enable you to assign specific connectors to serve specific applications.</span></span> <span data-ttu-id="e49ec-151">You can group a number of connectors together, and then assign each application to a group.</span><span class="sxs-lookup"><span data-stu-id="e49ec-151">You can group a number of connectors together, and then assign each application to a group.</span></span> 

<span data-ttu-id="e49ec-152">Connector groups make it easier to manage large deployments.</span><span class="sxs-lookup"><span data-stu-id="e49ec-152">Connector groups make it easier to manage large deployments.</span></span> <span data-ttu-id="e49ec-153">They also improve latency for tenants that have applications hosted in different regions, because you can create location-based connector groups to serve only local applications.</span><span class="sxs-lookup"><span data-stu-id="e49ec-153">They also improve latency for tenants that have applications hosted in different regions, because you can create location-based connector groups to serve only local applications.</span></span> 

<span data-ttu-id="e49ec-154">To learn more about connector groups, see [Publish applications on separate networks and locations using connector groups](application-proxy-connector-groups.md).</span><span class="sxs-lookup"><span data-stu-id="e49ec-154">To learn more about connector groups, see [Publish applications on separate networks and locations using connector groups](application-proxy-connector-groups.md).</span></span>

## <a name="capacity-planning"></a><span data-ttu-id="e49ec-155">Capacity Planning</span><span class="sxs-lookup"><span data-stu-id="e49ec-155">Capacity Planning</span></span> 

<span data-ttu-id="e49ec-156">While connectors will automatically load balance within a connector group, it is also important to make sure you have planned enough capacity between connectors to handle the expected traffic volume.</span><span class="sxs-lookup"><span data-stu-id="e49ec-156">While connectors will automatically load balance within a connector group, it is also important to make sure you have planned enough capacity between connectors to handle the expected traffic volume.</span></span> <span data-ttu-id="e49ec-157">In general, the more users you have, the larger a machine you will need.</span><span class="sxs-lookup"><span data-stu-id="e49ec-157">In general, the more users you have, the larger a machine you will need.</span></span> <span data-ttu-id="e49ec-158">Below is a table giving an outline of the volume different machines can handle.</span><span class="sxs-lookup"><span data-stu-id="e49ec-158">Below is a table giving an outline of the volume different machines can handle.</span></span> <span data-ttu-id="e49ec-159">Please note it is all based on expected Transactions Per Second (TPS) rather than by user since usage patterns vary and cannot be used to predict load.</span><span class="sxs-lookup"><span data-stu-id="e49ec-159">Please note it is all based on expected Transactions Per Second (TPS) rather than by user since usage patterns vary and cannot be used to predict load.</span></span>  <span data-ttu-id="e49ec-160">Also note that there will be some differences based on the size of the responses and the backend application response time - larger response sizes and slower response times will result in a lower Max TPS.</span><span class="sxs-lookup"><span data-stu-id="e49ec-160">Also note that there will be some differences based on the size of the responses and the backend application response time - larger response sizes and slower response times will result in a lower Max TPS.</span></span>

|<span data-ttu-id="e49ec-161">Cores</span><span class="sxs-lookup"><span data-stu-id="e49ec-161">Cores</span></span>|<span data-ttu-id="e49ec-162">RAM</span><span class="sxs-lookup"><span data-stu-id="e49ec-162">RAM</span></span>|<span data-ttu-id="e49ec-163">Expected Latency (MS)-P99</span><span class="sxs-lookup"><span data-stu-id="e49ec-163">Expected Latency (MS)-P99</span></span>|<span data-ttu-id="e49ec-164">Max TPS</span><span class="sxs-lookup"><span data-stu-id="e49ec-164">Max TPS</span></span>|
| ----- | ----- | ----- | ----- |
|<span data-ttu-id="e49ec-165">2</span><span class="sxs-lookup"><span data-stu-id="e49ec-165">2</span></span>|<span data-ttu-id="e49ec-166">8</span><span class="sxs-lookup"><span data-stu-id="e49ec-166">8</span></span>|<span data-ttu-id="e49ec-167">325</span><span class="sxs-lookup"><span data-stu-id="e49ec-167">325</span></span>|<span data-ttu-id="e49ec-168">586</span><span class="sxs-lookup"><span data-stu-id="e49ec-168">586</span></span>|
|<span data-ttu-id="e49ec-169">4</span><span class="sxs-lookup"><span data-stu-id="e49ec-169">4</span></span>|<span data-ttu-id="e49ec-170">16</span><span class="sxs-lookup"><span data-stu-id="e49ec-170">16</span></span>|<span data-ttu-id="e49ec-171">320</span><span class="sxs-lookup"><span data-stu-id="e49ec-171">320</span></span>|<span data-ttu-id="e49ec-172">1150</span><span class="sxs-lookup"><span data-stu-id="e49ec-172">1150</span></span>|
|<span data-ttu-id="e49ec-173">8</span><span class="sxs-lookup"><span data-stu-id="e49ec-173">8</span></span>|<span data-ttu-id="e49ec-174">32</span><span class="sxs-lookup"><span data-stu-id="e49ec-174">32</span></span>|<span data-ttu-id="e49ec-175">270</span><span class="sxs-lookup"><span data-stu-id="e49ec-175">270</span></span>|<span data-ttu-id="e49ec-176">1190</span><span class="sxs-lookup"><span data-stu-id="e49ec-176">1190</span></span>|
|<span data-ttu-id="e49ec-177">16</span><span class="sxs-lookup"><span data-stu-id="e49ec-177">16</span></span>|<span data-ttu-id="e49ec-178">64</span><span class="sxs-lookup"><span data-stu-id="e49ec-178">64</span></span>|<span data-ttu-id="e49ec-179">245</span><span class="sxs-lookup"><span data-stu-id="e49ec-179">245</span></span>|<span data-ttu-id="e49ec-180">1200\*</span><span class="sxs-lookup"><span data-stu-id="e49ec-180">1200\*</span></span>|
<span data-ttu-id="e49ec-181">\* This machine had a connection limit of 800.</span><span class="sxs-lookup"><span data-stu-id="e49ec-181">\* This machine had a connection limit of 800.</span></span> <span data-ttu-id="e49ec-182">For all other machines we used the default 200 connection limit.</span><span class="sxs-lookup"><span data-stu-id="e49ec-182">For all other machines we used the default 200 connection limit.</span></span>
 
>[!NOTE]
><span data-ttu-id="e49ec-183">There is not much difference in the maximum TPS between 4, 8, and 16 core machines.</span><span class="sxs-lookup"><span data-stu-id="e49ec-183">There is not much difference in the maximum TPS between 4, 8, and 16 core machines.</span></span> <span data-ttu-id="e49ec-184">The main difference between those is in the expected latency.</span><span class="sxs-lookup"><span data-stu-id="e49ec-184">The main difference between those is in the expected latency.</span></span>  

## <a name="security-and-networking"></a><span data-ttu-id="e49ec-185">Security and networking</span><span class="sxs-lookup"><span data-stu-id="e49ec-185">Security and networking</span></span>

<span data-ttu-id="e49ec-186">Connectors can be installed anywhere on the network that allows them to send requests to the Application Proxy service.</span><span class="sxs-lookup"><span data-stu-id="e49ec-186">Connectors can be installed anywhere on the network that allows them to send requests to the Application Proxy service.</span></span> <span data-ttu-id="e49ec-187">What's important is that the computer running the connector also has access to your apps.</span><span class="sxs-lookup"><span data-stu-id="e49ec-187">What's important is that the computer running the connector also has access to your apps.</span></span> <span data-ttu-id="e49ec-188">You can install connectors inside of your corporate network or on a virtual machine that runs in the cloud.</span><span class="sxs-lookup"><span data-stu-id="e49ec-188">You can install connectors inside of your corporate network or on a virtual machine that runs in the cloud.</span></span> <span data-ttu-id="e49ec-189">Connectors can run within a demilitarized zone (DMZ), but it's not necessary because all traffic is outbound so your network stays secure.</span><span class="sxs-lookup"><span data-stu-id="e49ec-189">Connectors can run within a demilitarized zone (DMZ), but it's not necessary because all traffic is outbound so your network stays secure.</span></span>

<span data-ttu-id="e49ec-190">Connectors only send outbound requests.</span><span class="sxs-lookup"><span data-stu-id="e49ec-190">Connectors only send outbound requests.</span></span> <span data-ttu-id="e49ec-191">The outbound traffic is sent to the Application Proxy service and to the published applications.</span><span class="sxs-lookup"><span data-stu-id="e49ec-191">The outbound traffic is sent to the Application Proxy service and to the published applications.</span></span> <span data-ttu-id="e49ec-192">You don't have to open inbound ports because traffic flows both ways once a session is established.</span><span class="sxs-lookup"><span data-stu-id="e49ec-192">You don't have to open inbound ports because traffic flows both ways once a session is established.</span></span> <span data-ttu-id="e49ec-193">You don't have to set up load balancing between the connectors or configure inbound access through your firewalls.</span><span class="sxs-lookup"><span data-stu-id="e49ec-193">You don't have to set up load balancing between the connectors or configure inbound access through your firewalls.</span></span> 

<span data-ttu-id="e49ec-194">For more information about configuring outbound firewall rules, see [Work with existing on-premises proxy servers](application-proxy-configure-connectors-with-proxy-servers.md).</span><span class="sxs-lookup"><span data-stu-id="e49ec-194">For more information about configuring outbound firewall rules, see [Work with existing on-premises proxy servers](application-proxy-configure-connectors-with-proxy-servers.md).</span></span>


## <a name="performance-and-scalability"></a><span data-ttu-id="e49ec-195">Performance and scalability</span><span class="sxs-lookup"><span data-stu-id="e49ec-195">Performance and scalability</span></span>

<span data-ttu-id="e49ec-196">Scale for the Application Proxy service is transparent, but scale is a factor for connectors.</span><span class="sxs-lookup"><span data-stu-id="e49ec-196">Scale for the Application Proxy service is transparent, but scale is a factor for connectors.</span></span> <span data-ttu-id="e49ec-197">You need to have enough connectors to handle peak traffic.</span><span class="sxs-lookup"><span data-stu-id="e49ec-197">You need to have enough connectors to handle peak traffic.</span></span> <span data-ttu-id="e49ec-198">However, you don't need to configure load balancing because all connectors within a connector group automatically load balance.</span><span class="sxs-lookup"><span data-stu-id="e49ec-198">However, you don't need to configure load balancing because all connectors within a connector group automatically load balance.</span></span>

<span data-ttu-id="e49ec-199">Since connectors are stateless, they are not affected by the number of users or sessions.</span><span class="sxs-lookup"><span data-stu-id="e49ec-199">Since connectors are stateless, they are not affected by the number of users or sessions.</span></span> <span data-ttu-id="e49ec-200">Instead, they respond to the number of requests and their payload size.</span><span class="sxs-lookup"><span data-stu-id="e49ec-200">Instead, they respond to the number of requests and their payload size.</span></span> <span data-ttu-id="e49ec-201">With standard web traffic, an average machine can handle a couple thousand requests per second.</span><span class="sxs-lookup"><span data-stu-id="e49ec-201">With standard web traffic, an average machine can handle a couple thousand requests per second.</span></span> <span data-ttu-id="e49ec-202">The specific capacity depends on the exact machine characteristics.</span><span class="sxs-lookup"><span data-stu-id="e49ec-202">The specific capacity depends on the exact machine characteristics.</span></span> 

<span data-ttu-id="e49ec-203">The connector performance is bound by CPU and networking.</span><span class="sxs-lookup"><span data-stu-id="e49ec-203">The connector performance is bound by CPU and networking.</span></span> <span data-ttu-id="e49ec-204">CPU performance is needed for SSL encryption and decryption, while networking is important to get fast connectivity to the applications and the online service in Azure.</span><span class="sxs-lookup"><span data-stu-id="e49ec-204">CPU performance is needed for SSL encryption and decryption, while networking is important to get fast connectivity to the applications and the online service in Azure.</span></span>

<span data-ttu-id="e49ec-205">In contrast, memory is less of an issue for connectors.</span><span class="sxs-lookup"><span data-stu-id="e49ec-205">In contrast, memory is less of an issue for connectors.</span></span> <span data-ttu-id="e49ec-206">The online service takes care of much of the processing and all unauthenticated traffic.</span><span class="sxs-lookup"><span data-stu-id="e49ec-206">The online service takes care of much of the processing and all unauthenticated traffic.</span></span> <span data-ttu-id="e49ec-207">Everything that can be done in the cloud is done in the cloud.</span><span class="sxs-lookup"><span data-stu-id="e49ec-207">Everything that can be done in the cloud is done in the cloud.</span></span> 

<span data-ttu-id="e49ec-208">The load balancing happens between connectors of a given connector group.</span><span class="sxs-lookup"><span data-stu-id="e49ec-208">The load balancing happens between connectors of a given connector group.</span></span> <span data-ttu-id="e49ec-209">We do a variation of a round-robin to determine which connector in the group serves a particular request.</span><span class="sxs-lookup"><span data-stu-id="e49ec-209">We do a variation of a round-robin to determine which connector in the group serves a particular request.</span></span> <span data-ttu-id="e49ec-210">If for any reason that connector or machine becomes unavailable, the traffic will start going to another connector in the group.</span><span class="sxs-lookup"><span data-stu-id="e49ec-210">If for any reason that connector or machine becomes unavailable, the traffic will start going to another connector in the group.</span></span> <span data-ttu-id="e49ec-211">This resiliency is also why we recommend having multiple connectors.</span><span class="sxs-lookup"><span data-stu-id="e49ec-211">This resiliency is also why we recommend having multiple connectors.</span></span>

<span data-ttu-id="e49ec-212">Another factor that affects performance is the quality of the networking between the connectors, including:</span><span class="sxs-lookup"><span data-stu-id="e49ec-212">Another factor that affects performance is the quality of the networking between the connectors, including:</span></span> 

* <span data-ttu-id="e49ec-213">**The online service**: Slow or high-latency connections to the Application Proxy service in Azure influence the connector performance.</span><span class="sxs-lookup"><span data-stu-id="e49ec-213">**The online service**: Slow or high-latency connections to the Application Proxy service in Azure influence the connector performance.</span></span> <span data-ttu-id="e49ec-214">For the best performance, connect your organization to Azure with Express Route.</span><span class="sxs-lookup"><span data-stu-id="e49ec-214">For the best performance, connect your organization to Azure with Express Route.</span></span> <span data-ttu-id="e49ec-215">Otherwise, have your networking team ensure that connections to Azure are handled as efficiently as possible.</span><span class="sxs-lookup"><span data-stu-id="e49ec-215">Otherwise, have your networking team ensure that connections to Azure are handled as efficiently as possible.</span></span> 
* <span data-ttu-id="e49ec-216">**The backend applications**: In some cases, there are additional proxies between the connector and the backend applications that can slow or prevent connections.</span><span class="sxs-lookup"><span data-stu-id="e49ec-216">**The backend applications**: In some cases, there are additional proxies between the connector and the backend applications that can slow or prevent connections.</span></span> <span data-ttu-id="e49ec-217">To troubleshoot this scenario, open a browser from the connector server and try to access the application.</span><span class="sxs-lookup"><span data-stu-id="e49ec-217">To troubleshoot this scenario, open a browser from the connector server and try to access the application.</span></span> <span data-ttu-id="e49ec-218">If you run the connectors in Azure but the applications are on-premises, the experience might not be what your users expect.</span><span class="sxs-lookup"><span data-stu-id="e49ec-218">If you run the connectors in Azure but the applications are on-premises, the experience might not be what your users expect.</span></span>
* <span data-ttu-id="e49ec-219">**The domain controllers**: If the connectors perform SSO using Kerberos Constrained Delegation, they contact the domain controllers before sending the request to the backend.</span><span class="sxs-lookup"><span data-stu-id="e49ec-219">**The domain controllers**: If the connectors perform SSO using Kerberos Constrained Delegation, they contact the domain controllers before sending the request to the backend.</span></span> <span data-ttu-id="e49ec-220">The connectors have a cache of Kerberos tickets, but in a busy environment the responsiveness of the domain controllers can affect performance.</span><span class="sxs-lookup"><span data-stu-id="e49ec-220">The connectors have a cache of Kerberos tickets, but in a busy environment the responsiveness of the domain controllers can affect performance.</span></span> <span data-ttu-id="e49ec-221">This issue is more common for connectors that run in Azure but communicate with domain controllers that are on-premises.</span><span class="sxs-lookup"><span data-stu-id="e49ec-221">This issue is more common for connectors that run in Azure but communicate with domain controllers that are on-premises.</span></span> 

<span data-ttu-id="e49ec-222">For more information about optimizing your network, see [Network topology considerations when using Azure Active Directory Application Proxy](application-proxy-network-topology.md).</span><span class="sxs-lookup"><span data-stu-id="e49ec-222">For more information about optimizing your network, see [Network topology considerations when using Azure Active Directory Application Proxy](application-proxy-network-topology.md).</span></span>

## <a name="domain-joining"></a><span data-ttu-id="e49ec-223">Domain joining</span><span class="sxs-lookup"><span data-stu-id="e49ec-223">Domain joining</span></span>

<span data-ttu-id="e49ec-224">Connectors can run on a machine that is not domain-joined.</span><span class="sxs-lookup"><span data-stu-id="e49ec-224">Connectors can run on a machine that is not domain-joined.</span></span> <span data-ttu-id="e49ec-225">However, if you want single sign-on (SSO) to applications that use Integrated Windows Authentication (IWA), you need a domain-joined machine.</span><span class="sxs-lookup"><span data-stu-id="e49ec-225">However, if you want single sign-on (SSO) to applications that use Integrated Windows Authentication (IWA), you need a domain-joined machine.</span></span> <span data-ttu-id="e49ec-226">In this case, the connector machines must be joined to a domain that can perform [Kerberos](https://web.mit.edu/kerberos) Constrained Delegation on behalf of the users for the published applications.</span><span class="sxs-lookup"><span data-stu-id="e49ec-226">In this case, the connector machines must be joined to a domain that can perform [Kerberos](https://web.mit.edu/kerberos) Constrained Delegation on behalf of the users for the published applications.</span></span>

<span data-ttu-id="e49ec-227">Connectors can also be joined to domains or forests that have a partial trust, or to read-only domain controllers.</span><span class="sxs-lookup"><span data-stu-id="e49ec-227">Connectors can also be joined to domains or forests that have a partial trust, or to read-only domain controllers.</span></span>

## <a name="connector-deployments-on-hardened-environments"></a><span data-ttu-id="e49ec-228">Connector deployments on hardened environments</span><span class="sxs-lookup"><span data-stu-id="e49ec-228">Connector deployments on hardened environments</span></span>

<span data-ttu-id="e49ec-229">Usually, connector deployment is straightforward and requires no special configuration.</span><span class="sxs-lookup"><span data-stu-id="e49ec-229">Usually, connector deployment is straightforward and requires no special configuration.</span></span> <span data-ttu-id="e49ec-230">However, there are some unique conditions that should be considered:</span><span class="sxs-lookup"><span data-stu-id="e49ec-230">However, there are some unique conditions that should be considered:</span></span>

* <span data-ttu-id="e49ec-231">Organizations that limit the outbound traffic must [open required ports](application-proxy-enable.md#open-your-ports).</span><span class="sxs-lookup"><span data-stu-id="e49ec-231">Organizations that limit the outbound traffic must [open required ports](application-proxy-enable.md#open-your-ports).</span></span>
* <span data-ttu-id="e49ec-232">FIPS-compliant machines might be required to change their configuration to allow the connector processes to generate and store a certificate.</span><span class="sxs-lookup"><span data-stu-id="e49ec-232">FIPS-compliant machines might be required to change their configuration to allow the connector processes to generate and store a certificate.</span></span>
* <span data-ttu-id="e49ec-233">Organizations that lock down their environment based on the processes that issue the networking requests have to make sure that both connector services are enabled to access all required ports and IPs.</span><span class="sxs-lookup"><span data-stu-id="e49ec-233">Organizations that lock down their environment based on the processes that issue the networking requests have to make sure that both connector services are enabled to access all required ports and IPs.</span></span>
* <span data-ttu-id="e49ec-234">In some cases, outbound forward proxies may break the two-way certificate authentication and cause the communication to fail.</span><span class="sxs-lookup"><span data-stu-id="e49ec-234">In some cases, outbound forward proxies may break the two-way certificate authentication and cause the communication to fail.</span></span>

## <a name="connector-authentication"></a><span data-ttu-id="e49ec-235">Connector authentication</span><span class="sxs-lookup"><span data-stu-id="e49ec-235">Connector authentication</span></span>

<span data-ttu-id="e49ec-236">To provide a secure service, connectors have to authenticate toward the service, and the service has to authenticate toward the connector.</span><span class="sxs-lookup"><span data-stu-id="e49ec-236">To provide a secure service, connectors have to authenticate toward the service, and the service has to authenticate toward the connector.</span></span> <span data-ttu-id="e49ec-237">This authentication is done using client and server certificates when the connectors initiate the connection.</span><span class="sxs-lookup"><span data-stu-id="e49ec-237">This authentication is done using client and server certificates when the connectors initiate the connection.</span></span> <span data-ttu-id="e49ec-238">This way the administrator’s username and password are not stored on the connector machine.</span><span class="sxs-lookup"><span data-stu-id="e49ec-238">This way the administrator’s username and password are not stored on the connector machine.</span></span>

<span data-ttu-id="e49ec-239">The certificates used are specific to the Application Proxy service.</span><span class="sxs-lookup"><span data-stu-id="e49ec-239">The certificates used are specific to the Application Proxy service.</span></span> <span data-ttu-id="e49ec-240">They get created during the initial registration and are automatically renewed by the connectors every couple of months.</span><span class="sxs-lookup"><span data-stu-id="e49ec-240">They get created during the initial registration and are automatically renewed by the connectors every couple of months.</span></span> 

<span data-ttu-id="e49ec-241">If a connector is not connected to the service for several months, its certificates may be outdated.</span><span class="sxs-lookup"><span data-stu-id="e49ec-241">If a connector is not connected to the service for several months, its certificates may be outdated.</span></span> <span data-ttu-id="e49ec-242">In this case, uninstall and reinstall the connector to trigger registration.</span><span class="sxs-lookup"><span data-stu-id="e49ec-242">In this case, uninstall and reinstall the connector to trigger registration.</span></span> <span data-ttu-id="e49ec-243">You can run the following PowerShell commands:</span><span class="sxs-lookup"><span data-stu-id="e49ec-243">You can run the following PowerShell commands:</span></span>

```
Import-module AppProxyPSModule
Register-AppProxyConnector
```

## <a name="under-the-hood"></a><span data-ttu-id="e49ec-244">Under the hood</span><span class="sxs-lookup"><span data-stu-id="e49ec-244">Under the hood</span></span>

<span data-ttu-id="e49ec-245">Connectors are based on Windows Server Web Application Proxy, so they have most of the same management tools including Windows Event Logs</span><span class="sxs-lookup"><span data-stu-id="e49ec-245">Connectors are based on Windows Server Web Application Proxy, so they have most of the same management tools including Windows Event Logs</span></span>

 ![Manage event logs with the Event Viewer](./media/application-proxy-connectors/event-view-window.png)

<span data-ttu-id="e49ec-247">and Windows performance counters.</span><span class="sxs-lookup"><span data-stu-id="e49ec-247">and Windows performance counters.</span></span> 

 ![Add counters to the connector with the Performance Monitor](./media/application-proxy-connectors/performance-monitor.png)

<span data-ttu-id="e49ec-249">The connectors have both admin and session logs.</span><span class="sxs-lookup"><span data-stu-id="e49ec-249">The connectors have both admin and session logs.</span></span> <span data-ttu-id="e49ec-250">The admin logs include key events and their errors.</span><span class="sxs-lookup"><span data-stu-id="e49ec-250">The admin logs include key events and their errors.</span></span> <span data-ttu-id="e49ec-251">The session logs include all the transactions and their processing details.</span><span class="sxs-lookup"><span data-stu-id="e49ec-251">The session logs include all the transactions and their processing details.</span></span> 

<span data-ttu-id="e49ec-252">To see the logs, go to the Event Viewer, open the **View** menu, and enable **Show analytic and debug logs**.</span><span class="sxs-lookup"><span data-stu-id="e49ec-252">To see the logs, go to the Event Viewer, open the **View** menu, and enable **Show analytic and debug logs**.</span></span> <span data-ttu-id="e49ec-253">Then, enable them to start collecting events.</span><span class="sxs-lookup"><span data-stu-id="e49ec-253">Then, enable them to start collecting events.</span></span> <span data-ttu-id="e49ec-254">These logs do not appear in Web Application Proxy in Windows Server 2012 R2, as the connectors are based on a more recent version.</span><span class="sxs-lookup"><span data-stu-id="e49ec-254">These logs do not appear in Web Application Proxy in Windows Server 2012 R2, as the connectors are based on a more recent version.</span></span>

<span data-ttu-id="e49ec-255">You can examine the state of the service in the Services window.</span><span class="sxs-lookup"><span data-stu-id="e49ec-255">You can examine the state of the service in the Services window.</span></span> <span data-ttu-id="e49ec-256">The connector comprises two Windows Services: the actual connector, and the updater.</span><span class="sxs-lookup"><span data-stu-id="e49ec-256">The connector comprises two Windows Services: the actual connector, and the updater.</span></span> <span data-ttu-id="e49ec-257">Both of them must run all the time.</span><span class="sxs-lookup"><span data-stu-id="e49ec-257">Both of them must run all the time.</span></span>

 ![AzureAD Services Local](./media/application-proxy-connectors/aad-connector-services.png)

## <a name="next-steps"></a><span data-ttu-id="e49ec-259">Next steps</span><span class="sxs-lookup"><span data-stu-id="e49ec-259">Next steps</span></span>


* [<span data-ttu-id="e49ec-260">Publish applications on separate networks and locations using connector groups</span><span class="sxs-lookup"><span data-stu-id="e49ec-260">Publish applications on separate networks and locations using connector groups</span></span>](application-proxy-connector-groups.md)
* [<span data-ttu-id="e49ec-261">Work with existing on-premises proxy servers</span><span class="sxs-lookup"><span data-stu-id="e49ec-261">Work with existing on-premises proxy servers</span></span>](application-proxy-configure-connectors-with-proxy-servers.md)
* [<span data-ttu-id="e49ec-262">Troubleshoot Application Proxy and connector errors</span><span class="sxs-lookup"><span data-stu-id="e49ec-262">Troubleshoot Application Proxy and connector errors</span></span>](application-proxy-troubleshoot.md)
* [<span data-ttu-id="e49ec-263">How to silently install the Azure AD Application Proxy Connector</span><span class="sxs-lookup"><span data-stu-id="e49ec-263">How to silently install the Azure AD Application Proxy Connector</span></span>](application-proxy-register-connector-powershell.md)

