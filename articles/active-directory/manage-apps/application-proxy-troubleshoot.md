---
title: Troubleshoot Application Proxy | Microsoft Docs
description: Covers how to troubleshoot errors in Azure AD Application Proxy.
services: active-directory
documentationcenter: ''
author: barbkess
manager: mtillman
ms.service: active-directory
ms.component: app-mgmt
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: conceptual
ms.date: 06/26/2018
ms.author: barbkess
ms.reviewer: harshja
ms.custom: H1Hack27Feb2017; it-pro
ms.openlocfilehash: aa7962e3659618b8c5a4f161d667c5e90477acc9
ms.sourcegitcommit: d1451406a010fd3aa854dc8e5b77dc5537d8050e
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 09/13/2018
ms.locfileid: "44855620"
---
# <a name="troubleshoot-application-proxy-problems-and-error-messages"></a><span data-ttu-id="cf8bd-103">Troubleshoot Application Proxy problems and error messages</span><span class="sxs-lookup"><span data-stu-id="cf8bd-103">Troubleshoot Application Proxy problems and error messages</span></span>
<span data-ttu-id="cf8bd-104">If errors occur in accessing a published application or in publishing applications, check the following options to see if Microsoft Azure AD Application Proxy is working correctly:</span><span class="sxs-lookup"><span data-stu-id="cf8bd-104">If errors occur in accessing a published application or in publishing applications, check the following options to see if Microsoft Azure AD Application Proxy is working correctly:</span></span>

* <span data-ttu-id="cf8bd-105">Open the Windows Services console and verify that the **Microsoft AAD Application Proxy Connector** service is enabled and running.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-105">Open the Windows Services console and verify that the **Microsoft AAD Application Proxy Connector** service is enabled and running.</span></span> <span data-ttu-id="cf8bd-106">You may also want to look at the Application Proxy service properties page, as shown in the following image:</span><span class="sxs-lookup"><span data-stu-id="cf8bd-106">You may also want to look at the Application Proxy service properties page, as shown in the following image:</span></span>  
  <span data-ttu-id="cf8bd-107">![Microsoft AAD Application Proxy Connector Properties window screenshot](./media/application-proxy-troubleshoot/connectorproperties.png)</span><span class="sxs-lookup"><span data-stu-id="cf8bd-107">![Microsoft AAD Application Proxy Connector Properties window screenshot](./media/application-proxy-troubleshoot/connectorproperties.png)</span></span>
* <span data-ttu-id="cf8bd-108">Open Event Viewer and look for Application Proxy connector events in **Applications and Services Logs** > **Microsoft** > **AadApplicationProxy** > **Connector** > **Admin**.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-108">Open Event Viewer and look for Application Proxy connector events in **Applications and Services Logs** > **Microsoft** > **AadApplicationProxy** > **Connector** > **Admin**.</span></span>
* <span data-ttu-id="cf8bd-109">If needed, more detailed logs are available by [turning on the Application Proxy connector session logs](application-proxy-connectors.md#under-the-hood).</span><span class="sxs-lookup"><span data-stu-id="cf8bd-109">If needed, more detailed logs are available by [turning on the Application Proxy connector session logs](application-proxy-connectors.md#under-the-hood).</span></span>

<span data-ttu-id="cf8bd-110">For more information about the Azure AD Troubleshooting tool, see [Troubleshooting tool to validate connector networking prerequisites](https://blogs.technet.microsoft.com/applicationproxyblog/2015/09/03/troubleshooting-tool-to-validate-connector-networking-prerequisites).</span><span class="sxs-lookup"><span data-stu-id="cf8bd-110">For more information about the Azure AD Troubleshooting tool, see [Troubleshooting tool to validate connector networking prerequisites](https://blogs.technet.microsoft.com/applicationproxyblog/2015/09/03/troubleshooting-tool-to-validate-connector-networking-prerequisites).</span></span>

## <a name="the-page-is-not-rendered-correctly"></a><span data-ttu-id="cf8bd-111">The page is not rendered correctly</span><span class="sxs-lookup"><span data-stu-id="cf8bd-111">The page is not rendered correctly</span></span>
<span data-ttu-id="cf8bd-112">You may have problems with your application rendering or functioning incorrectly without receiving specific error messages.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-112">You may have problems with your application rendering or functioning incorrectly without receiving specific error messages.</span></span> <span data-ttu-id="cf8bd-113">This can occur if you published the article path, but the application requires content that exists outside that path.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-113">This can occur if you published the article path, but the application requires content that exists outside that path.</span></span>

<span data-ttu-id="cf8bd-114">For example, if you publish the path https://yourapp/app but the application calls images in https://yourapp/media, they won't be rendered.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-114">For example, if you publish the path https://yourapp/app but the application calls images in https://yourapp/media, they won't be rendered.</span></span> <span data-ttu-id="cf8bd-115">Make sure that you publish the application using the highest level path you need to include all relevant content.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-115">Make sure that you publish the application using the highest level path you need to include all relevant content.</span></span> <span data-ttu-id="cf8bd-116">In this example, it would be http://yourapp/.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-116">In this example, it would be http://yourapp/.</span></span>

<span data-ttu-id="cf8bd-117">If you change your path to include referenced content, but still need users to land on a deeper link in the path, see the blog post [Setting the right link for Application Proxy applications in the Azure AD access panel and Office 365 app launcher](https://blogs.technet.microsoft.com/applicationproxyblog/2016/04/06/setting-the-right-link-for-application-proxy-applications-in-the-azure-ad-access-panel-and-office-365-app-launcher/).</span><span class="sxs-lookup"><span data-stu-id="cf8bd-117">If you change your path to include referenced content, but still need users to land on a deeper link in the path, see the blog post [Setting the right link for Application Proxy applications in the Azure AD access panel and Office 365 app launcher](https://blogs.technet.microsoft.com/applicationproxyblog/2016/04/06/setting-the-right-link-for-application-proxy-applications-in-the-azure-ad-access-panel-and-office-365-app-launcher/).</span></span>

## <a name="connector-errors"></a><span data-ttu-id="cf8bd-118">Connector errors</span><span class="sxs-lookup"><span data-stu-id="cf8bd-118">Connector errors</span></span>

<span data-ttu-id="cf8bd-119">If registration fails during the Connector wizard installation, there are two ways to view the reason for the failure.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-119">If registration fails during the Connector wizard installation, there are two ways to view the reason for the failure.</span></span> <span data-ttu-id="cf8bd-120">Either look in the event log under **Applications and Services Logs\Microsoft\AadApplicationProxy\Connector\Admin**, or run the following Windows PowerShell command:</span><span class="sxs-lookup"><span data-stu-id="cf8bd-120">Either look in the event log under **Applications and Services Logs\Microsoft\AadApplicationProxy\Connector\Admin**, or run the following Windows PowerShell command:</span></span>

    Get-EventLog application –source “Microsoft AAD Application Proxy Connector” –EntryType “Error” –Newest 1

<span data-ttu-id="cf8bd-121">Once you find the Connector error from the event log, use this table of common errors to resolve the problem:</span><span class="sxs-lookup"><span data-stu-id="cf8bd-121">Once you find the Connector error from the event log, use this table of common errors to resolve the problem:</span></span>

| <span data-ttu-id="cf8bd-122">Error</span><span class="sxs-lookup"><span data-stu-id="cf8bd-122">Error</span></span> | <span data-ttu-id="cf8bd-123">Recommended steps</span><span class="sxs-lookup"><span data-stu-id="cf8bd-123">Recommended steps</span></span> |
| ----- | ----------------- |
| <span data-ttu-id="cf8bd-124">Connector registration failed: Make sure you enabled Application Proxy in the Azure Management Portal and that you entered your Active Directory user name and password correctly.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-124">Connector registration failed: Make sure you enabled Application Proxy in the Azure Management Portal and that you entered your Active Directory user name and password correctly.</span></span> <span data-ttu-id="cf8bd-125">Error: 'One or more errors occurred.'</span><span class="sxs-lookup"><span data-stu-id="cf8bd-125">Error: 'One or more errors occurred.'</span></span> | <span data-ttu-id="cf8bd-126">If you closed the registration window without signing in to Azure AD, run the Connector wizard again and register the Connector.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-126">If you closed the registration window without signing in to Azure AD, run the Connector wizard again and register the Connector.</span></span> <br><br> <span data-ttu-id="cf8bd-127">If the registration window opens and then immediately closes without allowing you to log in, you will probably get this error.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-127">If the registration window opens and then immediately closes without allowing you to log in, you will probably get this error.</span></span> <span data-ttu-id="cf8bd-128">This error occurs when there is a networking error on your system.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-128">This error occurs when there is a networking error on your system.</span></span> <span data-ttu-id="cf8bd-129">Make sure that it is possible to connect from a browser to a public website and that the ports are open as specified in [Application Proxy prerequisites](application-proxy-enable.md).</span><span class="sxs-lookup"><span data-stu-id="cf8bd-129">Make sure that it is possible to connect from a browser to a public website and that the ports are open as specified in [Application Proxy prerequisites](application-proxy-enable.md).</span></span> |
| <span data-ttu-id="cf8bd-130">Clear error is presented in the registration window.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-130">Clear error is presented in the registration window.</span></span> <span data-ttu-id="cf8bd-131">Cannot proceed</span><span class="sxs-lookup"><span data-stu-id="cf8bd-131">Cannot proceed</span></span> | <span data-ttu-id="cf8bd-132">If you see this error and then the window closes, you entered the wrong username or password.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-132">If you see this error and then the window closes, you entered the wrong username or password.</span></span> <span data-ttu-id="cf8bd-133">Try again.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-133">Try again.</span></span> |
| <span data-ttu-id="cf8bd-134">Connector registration failed: Make sure you enabled Application Proxy in the Azure Management Portal and that you entered your Active Directory user name and password correctly.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-134">Connector registration failed: Make sure you enabled Application Proxy in the Azure Management Portal and that you entered your Active Directory user name and password correctly.</span></span> <span data-ttu-id="cf8bd-135">Error: 'AADSTS50059: No tenant-identifying information found in either the request or implied by any provided credentials and search by service principal URI has failed.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-135">Error: 'AADSTS50059: No tenant-identifying information found in either the request or implied by any provided credentials and search by service principal URI has failed.</span></span> | <span data-ttu-id="cf8bd-136">You are trying to sign in using a Microsoft Account and not a domain that is part of the organization ID of the directory you are trying to access.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-136">You are trying to sign in using a Microsoft Account and not a domain that is part of the organization ID of the directory you are trying to access.</span></span> <span data-ttu-id="cf8bd-137">Make sure that the admin is part of the same domain name as the tenant domain, for example, if the Azure AD domain is contoso.com, the admin should be admin@contoso.com.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-137">Make sure that the admin is part of the same domain name as the tenant domain, for example, if the Azure AD domain is contoso.com, the admin should be admin@contoso.com.</span></span> |
| <span data-ttu-id="cf8bd-138">Failed to retrieve the current execution policy for running PowerShell scripts.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-138">Failed to retrieve the current execution policy for running PowerShell scripts.</span></span> | <span data-ttu-id="cf8bd-139">If the Connector installation fails, check to make sure that PowerShell execution policy is not disabled.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-139">If the Connector installation fails, check to make sure that PowerShell execution policy is not disabled.</span></span> <br><br><span data-ttu-id="cf8bd-140">1. Open the Group Policy Editor.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-140">1. Open the Group Policy Editor.</span></span><br><span data-ttu-id="cf8bd-141">2. Go to **Computer Configuration** > **Administrative Templates** > **Windows Components** > **Windows PowerShell** and double-click **Turn on Script Execution**.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-141">2. Go to **Computer Configuration** > **Administrative Templates** > **Windows Components** > **Windows PowerShell** and double-click **Turn on Script Execution**.</span></span><br><span data-ttu-id="cf8bd-142">3. The execution policy can be set to either **Not Configured** or **Enabled**.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-142">3. The execution policy can be set to either **Not Configured** or **Enabled**.</span></span> <span data-ttu-id="cf8bd-143">If set to **Enabled**, make sure that under Options, the Execution Policy is set to either **Allow local scripts and remote signed scripts** or to **Allow all scripts**.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-143">If set to **Enabled**, make sure that under Options, the Execution Policy is set to either **Allow local scripts and remote signed scripts** or to **Allow all scripts**.</span></span> |
| <span data-ttu-id="cf8bd-144">Connector failed to download the configuration.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-144">Connector failed to download the configuration.</span></span> | <span data-ttu-id="cf8bd-145">The Connector’s client certificate, which is used for authentication, expired.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-145">The Connector’s client certificate, which is used for authentication, expired.</span></span> <span data-ttu-id="cf8bd-146">This may also occur if you have the Connector installed behind a proxy.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-146">This may also occur if you have the Connector installed behind a proxy.</span></span> <span data-ttu-id="cf8bd-147">In this case, the Connector cannot access the Internet and will not be able to provide applications to remote users.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-147">In this case, the Connector cannot access the Internet and will not be able to provide applications to remote users.</span></span> <span data-ttu-id="cf8bd-148">Renew trust manually using the `Register-AppProxyConnector` cmdlet in Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-148">Renew trust manually using the `Register-AppProxyConnector` cmdlet in Windows PowerShell.</span></span> <span data-ttu-id="cf8bd-149">If your Connector is behind a proxy, it is necessary to grant Internet access to the Connector accounts “network services” and “local system.”</span><span class="sxs-lookup"><span data-stu-id="cf8bd-149">If your Connector is behind a proxy, it is necessary to grant Internet access to the Connector accounts “network services” and “local system.”</span></span> <span data-ttu-id="cf8bd-150">This can be accomplished either by granting them access to the Proxy or by setting them to bypass the proxy.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-150">This can be accomplished either by granting them access to the Proxy or by setting them to bypass the proxy.</span></span> |
| <span data-ttu-id="cf8bd-151">Connector registration failed: Make sure you are a Global Administrator of your Active Directory to register the Connector.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-151">Connector registration failed: Make sure you are a Global Administrator of your Active Directory to register the Connector.</span></span> <span data-ttu-id="cf8bd-152">Error: 'The registration request was denied.'</span><span class="sxs-lookup"><span data-stu-id="cf8bd-152">Error: 'The registration request was denied.'</span></span> | <span data-ttu-id="cf8bd-153">The alias you're trying to log in with isn't an admin on this domain.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-153">The alias you're trying to log in with isn't an admin on this domain.</span></span> <span data-ttu-id="cf8bd-154">Your Connector is always installed for the directory that owns the user’s domain.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-154">Your Connector is always installed for the directory that owns the user’s domain.</span></span> <span data-ttu-id="cf8bd-155">Make sure that the admin account you are trying to sign in with has global permissions to the Azure AD tenant.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-155">Make sure that the admin account you are trying to sign in with has global permissions to the Azure AD tenant.</span></span> |

## <a name="kerberos-errors"></a><span data-ttu-id="cf8bd-156">Kerberos errors</span><span class="sxs-lookup"><span data-stu-id="cf8bd-156">Kerberos errors</span></span>

<span data-ttu-id="cf8bd-157">This table covers the more common errors that come from Kerberos setup and configuration, and includes suggestions for resolution.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-157">This table covers the more common errors that come from Kerberos setup and configuration, and includes suggestions for resolution.</span></span>

| <span data-ttu-id="cf8bd-158">Error</span><span class="sxs-lookup"><span data-stu-id="cf8bd-158">Error</span></span> | <span data-ttu-id="cf8bd-159">Recommended steps</span><span class="sxs-lookup"><span data-stu-id="cf8bd-159">Recommended steps</span></span> |
| ----- | ----------------- |
| <span data-ttu-id="cf8bd-160">Failed to retrieve the current execution policy for running PowerShell scripts.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-160">Failed to retrieve the current execution policy for running PowerShell scripts.</span></span> | <span data-ttu-id="cf8bd-161">If the Connector installation fails, check to make sure that PowerShell execution policy is not disabled.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-161">If the Connector installation fails, check to make sure that PowerShell execution policy is not disabled.</span></span><br><br><span data-ttu-id="cf8bd-162">1. Open the Group Policy Editor.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-162">1. Open the Group Policy Editor.</span></span><br><span data-ttu-id="cf8bd-163">2. Go to **Computer Configuration** > **Administrative Templates** > **Windows Components** > **Windows PowerShell** and double-click **Turn on Script Execution**.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-163">2. Go to **Computer Configuration** > **Administrative Templates** > **Windows Components** > **Windows PowerShell** and double-click **Turn on Script Execution**.</span></span><br><span data-ttu-id="cf8bd-164">3. The execution policy can be set to either **Not Configured** or **Enabled**.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-164">3. The execution policy can be set to either **Not Configured** or **Enabled**.</span></span> <span data-ttu-id="cf8bd-165">If set to **Enabled**, make sure that under Options, the Execution Policy is set to either **Allow local scripts and remote signed scripts** or to **Allow all scripts**.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-165">If set to **Enabled**, make sure that under Options, the Execution Policy is set to either **Allow local scripts and remote signed scripts** or to **Allow all scripts**.</span></span> |
| <span data-ttu-id="cf8bd-166">12008 - Azure AD exceeded the maximum number of permitted Kerberos authentication attempts to the backend server.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-166">12008 - Azure AD exceeded the maximum number of permitted Kerberos authentication attempts to the backend server.</span></span> | <span data-ttu-id="cf8bd-167">This error may indicate incorrect configuration between Azure AD and the backend application server, or a problem in time and date configuration on both machines.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-167">This error may indicate incorrect configuration between Azure AD and the backend application server, or a problem in time and date configuration on both machines.</span></span> <span data-ttu-id="cf8bd-168">The backend server declined the Kerberos ticket created by Azure AD.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-168">The backend server declined the Kerberos ticket created by Azure AD.</span></span> <span data-ttu-id="cf8bd-169">Verify that Azure AD and the backend application server are configured correctly.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-169">Verify that Azure AD and the backend application server are configured correctly.</span></span> <span data-ttu-id="cf8bd-170">Make sure that the time and date configuration on the Azure AD and the backend application server are synchronized.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-170">Make sure that the time and date configuration on the Azure AD and the backend application server are synchronized.</span></span> |
| <span data-ttu-id="cf8bd-171">13016 - Azure AD cannot retrieve a Kerberos ticket on behalf of the user because there is no UPN in the edge token or in the access cookie.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-171">13016 - Azure AD cannot retrieve a Kerberos ticket on behalf of the user because there is no UPN in the edge token or in the access cookie.</span></span> | <span data-ttu-id="cf8bd-172">There is a problem with the STS configuration.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-172">There is a problem with the STS configuration.</span></span> <span data-ttu-id="cf8bd-173">Fix the UPN claim configuration in the STS.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-173">Fix the UPN claim configuration in the STS.</span></span> |
| <span data-ttu-id="cf8bd-174">13019 - Azure AD cannot retrieve a Kerberos ticket on behalf of the user because of the following general API error.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-174">13019 - Azure AD cannot retrieve a Kerberos ticket on behalf of the user because of the following general API error.</span></span> | <span data-ttu-id="cf8bd-175">This event may indicate incorrect configuration between Azure AD and the domain controller server, or a problem in time and date configuration on both machines.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-175">This event may indicate incorrect configuration between Azure AD and the domain controller server, or a problem in time and date configuration on both machines.</span></span> <span data-ttu-id="cf8bd-176">The domain controller declined the Kerberos ticket created by Azure AD.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-176">The domain controller declined the Kerberos ticket created by Azure AD.</span></span> <span data-ttu-id="cf8bd-177">Verify that Azure AD and the backend application server are configured correctly, especially the SPN configuration.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-177">Verify that Azure AD and the backend application server are configured correctly, especially the SPN configuration.</span></span> <span data-ttu-id="cf8bd-178">Make sure the Azure AD is domain joined to the same domain as the domain controller to ensure that the domain controller establishes trust with Azure AD.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-178">Make sure the Azure AD is domain joined to the same domain as the domain controller to ensure that the domain controller establishes trust with Azure AD.</span></span> <span data-ttu-id="cf8bd-179">Make sure that the time and date configuration on the Azure AD and the domain controller are synchronized.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-179">Make sure that the time and date configuration on the Azure AD and the domain controller are synchronized.</span></span> |
| <span data-ttu-id="cf8bd-180">13020 - Azure AD cannot retrieve a Kerberos ticket on behalf of the user because the backend server SPN is not defined.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-180">13020 - Azure AD cannot retrieve a Kerberos ticket on behalf of the user because the backend server SPN is not defined.</span></span> | <span data-ttu-id="cf8bd-181">This event may indicate incorrect configuration between Azure AD and the domain controller server, or a problem in time and date configuration on both machines.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-181">This event may indicate incorrect configuration between Azure AD and the domain controller server, or a problem in time and date configuration on both machines.</span></span> <span data-ttu-id="cf8bd-182">The domain controller declined the Kerberos ticket created by Azure AD.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-182">The domain controller declined the Kerberos ticket created by Azure AD.</span></span> <span data-ttu-id="cf8bd-183">Verify that Azure AD and the backend application server are configured correctly, especially the SPN configuration.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-183">Verify that Azure AD and the backend application server are configured correctly, especially the SPN configuration.</span></span> <span data-ttu-id="cf8bd-184">Make sure the Azure AD is domain joined to the same domain as the domain controller to ensure that the domain controller establishes trust with Azure AD.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-184">Make sure the Azure AD is domain joined to the same domain as the domain controller to ensure that the domain controller establishes trust with Azure AD.</span></span> <span data-ttu-id="cf8bd-185">Make sure that the time and date configuration on the Azure AD and the domain controller are synchronized.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-185">Make sure that the time and date configuration on the Azure AD and the domain controller are synchronized.</span></span> |
| <span data-ttu-id="cf8bd-186">13022 - Azure AD cannot authenticate the user because the backend server responds to Kerberos authentication attempts with an HTTP 401 error.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-186">13022 - Azure AD cannot authenticate the user because the backend server responds to Kerberos authentication attempts with an HTTP 401 error.</span></span> | <span data-ttu-id="cf8bd-187">This event may indicate incorrect configuration between Azure AD and the backend application server, or a problem in time and date configuration on both machines.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-187">This event may indicate incorrect configuration between Azure AD and the backend application server, or a problem in time and date configuration on both machines.</span></span> <span data-ttu-id="cf8bd-188">The backend server declined the Kerberos ticket created by Azure AD.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-188">The backend server declined the Kerberos ticket created by Azure AD.</span></span> <span data-ttu-id="cf8bd-189">Verify that Azure AD and the backend application server are configured correctly.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-189">Verify that Azure AD and the backend application server are configured correctly.</span></span> <span data-ttu-id="cf8bd-190">Make sure that the time and date configuration on the Azure AD and the backend application server are synchronized.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-190">Make sure that the time and date configuration on the Azure AD and the backend application server are synchronized.</span></span> <span data-ttu-id="cf8bd-191">For more information, see [Troubleshoot Kerberos Constrained Delegation Configurations for Application Proxy](application-proxy-back-end-kerberos-constrained-delegation-how-to.md).</span><span class="sxs-lookup"><span data-stu-id="cf8bd-191">For more information, see [Troubleshoot Kerberos Constrained Delegation Configurations for Application Proxy](application-proxy-back-end-kerberos-constrained-delegation-how-to.md).</span></span>  |

## <a name="end-user-errors"></a><span data-ttu-id="cf8bd-192">End-user errors</span><span class="sxs-lookup"><span data-stu-id="cf8bd-192">End-user errors</span></span>

<span data-ttu-id="cf8bd-193">This list covers errors that your end users might encounter when they try to access the app and fail.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-193">This list covers errors that your end users might encounter when they try to access the app and fail.</span></span> 

| <span data-ttu-id="cf8bd-194">Error</span><span class="sxs-lookup"><span data-stu-id="cf8bd-194">Error</span></span> | <span data-ttu-id="cf8bd-195">Recommended steps</span><span class="sxs-lookup"><span data-stu-id="cf8bd-195">Recommended steps</span></span> |
| ----- | ----------------- |
| <span data-ttu-id="cf8bd-196">The website cannot display the page.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-196">The website cannot display the page.</span></span> | <span data-ttu-id="cf8bd-197">Your user may get this error when trying to access the app you published if the application is an IWA application.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-197">Your user may get this error when trying to access the app you published if the application is an IWA application.</span></span> <span data-ttu-id="cf8bd-198">The defined SPN for this application may be incorrect.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-198">The defined SPN for this application may be incorrect.</span></span> <span data-ttu-id="cf8bd-199">For IWA apps, make sure that the SPN configured for this application is correct.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-199">For IWA apps, make sure that the SPN configured for this application is correct.</span></span> |
| <span data-ttu-id="cf8bd-200">The website cannot display the page.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-200">The website cannot display the page.</span></span> | <span data-ttu-id="cf8bd-201">Your user may get this error when trying to access the app you published if the application is an OWA application.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-201">Your user may get this error when trying to access the app you published if the application is an OWA application.</span></span> <span data-ttu-id="cf8bd-202">This could be caused by one of the following:</span><span class="sxs-lookup"><span data-stu-id="cf8bd-202">This could be caused by one of the following:</span></span><br><li><span data-ttu-id="cf8bd-203">The defined SPN for this application is incorrect.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-203">The defined SPN for this application is incorrect.</span></span> <span data-ttu-id="cf8bd-204">Make sure that the SPN configured for this application is correct.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-204">Make sure that the SPN configured for this application is correct.</span></span></li><li><span data-ttu-id="cf8bd-205">The user who tried to access the application is using a Microsoft account rather than the proper corporate account to sign in, or the user is a guest user.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-205">The user who tried to access the application is using a Microsoft account rather than the proper corporate account to sign in, or the user is a guest user.</span></span> <span data-ttu-id="cf8bd-206">Make sure the user signs in using their corporate account that matches the domain of the published application.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-206">Make sure the user signs in using their corporate account that matches the domain of the published application.</span></span> <span data-ttu-id="cf8bd-207">Microsoft Account users and guest cannot access IWA applications.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-207">Microsoft Account users and guest cannot access IWA applications.</span></span></li><li><span data-ttu-id="cf8bd-208">The user who tried to access the application is not properly defined for this application on the on-prem side.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-208">The user who tried to access the application is not properly defined for this application on the on-prem side.</span></span> <span data-ttu-id="cf8bd-209">Make sure that this user has the proper permissions as defined for this backend application on the on-prem machine.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-209">Make sure that this user has the proper permissions as defined for this backend application on the on-prem machine.</span></span> |
| <span data-ttu-id="cf8bd-210">This corporate app can’t be accessed.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-210">This corporate app can’t be accessed.</span></span> <span data-ttu-id="cf8bd-211">You are not authorized to access this application.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-211">You are not authorized to access this application.</span></span> <span data-ttu-id="cf8bd-212">Authorization failed.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-212">Authorization failed.</span></span> <span data-ttu-id="cf8bd-213">Make sure to assign the user with access to this application.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-213">Make sure to assign the user with access to this application.</span></span> | <span data-ttu-id="cf8bd-214">Your users may get this error when trying to access the app you published if they use Microsoft accounts instead of their corporate account to sign in.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-214">Your users may get this error when trying to access the app you published if they use Microsoft accounts instead of their corporate account to sign in.</span></span> <span data-ttu-id="cf8bd-215">Guest users may also get this error.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-215">Guest users may also get this error.</span></span> <span data-ttu-id="cf8bd-216">Microsoft Account users and guests cannot access IWA applications.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-216">Microsoft Account users and guests cannot access IWA applications.</span></span> <span data-ttu-id="cf8bd-217">Make sure the user signs in using their corporate account that matches the domain of the published application.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-217">Make sure the user signs in using their corporate account that matches the domain of the published application.</span></span><br><br><span data-ttu-id="cf8bd-218">You may not have assigned the user for this application.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-218">You may not have assigned the user for this application.</span></span> <span data-ttu-id="cf8bd-219">Go to the **Application** tab, and under **Users and Groups**, assign this user or user group to this application.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-219">Go to the **Application** tab, and under **Users and Groups**, assign this user or user group to this application.</span></span> |
| <span data-ttu-id="cf8bd-220">This corporate app can’t be accessed right now.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-220">This corporate app can’t be accessed right now.</span></span> <span data-ttu-id="cf8bd-221">Please try again later…The connector timed out.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-221">Please try again later…The connector timed out.</span></span> | <span data-ttu-id="cf8bd-222">Your users may get this error when trying to access the app you published if they are not properly defined for this application on the on-prem side.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-222">Your users may get this error when trying to access the app you published if they are not properly defined for this application on the on-prem side.</span></span> <span data-ttu-id="cf8bd-223">Make sure that your users have the proper permissions as defined for this backend application on the on-prem machine.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-223">Make sure that your users have the proper permissions as defined for this backend application on the on-prem machine.</span></span> |
| <span data-ttu-id="cf8bd-224">This corporate app can’t be accessed.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-224">This corporate app can’t be accessed.</span></span> <span data-ttu-id="cf8bd-225">You are not authorized to access this application.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-225">You are not authorized to access this application.</span></span> <span data-ttu-id="cf8bd-226">Authorization failed.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-226">Authorization failed.</span></span> <span data-ttu-id="cf8bd-227">Make sure that the user has a license for Azure Active Directory Premium or Basic.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-227">Make sure that the user has a license for Azure Active Directory Premium or Basic.</span></span> | <span data-ttu-id="cf8bd-228">Your users may get this error when trying to access the app you published if they weren't explicitly assigned with a Premium/Basic license by the subscriber’s administrator.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-228">Your users may get this error when trying to access the app you published if they weren't explicitly assigned with a Premium/Basic license by the subscriber’s administrator.</span></span> <span data-ttu-id="cf8bd-229">Go to the subscriber’s Active Directory **Licenses** tab and make sure that this user or user group is assigned a Premium or Basic license.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-229">Go to the subscriber’s Active Directory **Licenses** tab and make sure that this user or user group is assigned a Premium or Basic license.</span></span> |

## <a name="my-error-wasnt-listed-here"></a><span data-ttu-id="cf8bd-230">My error wasn't listed here</span><span class="sxs-lookup"><span data-stu-id="cf8bd-230">My error wasn't listed here</span></span>

<span data-ttu-id="cf8bd-231">If you encounter an error or problem with Azure AD Application Proxy that isn't listed in this troubleshooting guide, we'd like to hear about it.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-231">If you encounter an error or problem with Azure AD Application Proxy that isn't listed in this troubleshooting guide, we'd like to hear about it.</span></span> <span data-ttu-id="cf8bd-232">Send an email to our [feedback team](mailto:aadapfeedback@microsoft.com) with the details of the error you encountered.</span><span class="sxs-lookup"><span data-stu-id="cf8bd-232">Send an email to our [feedback team](mailto:aadapfeedback@microsoft.com) with the details of the error you encountered.</span></span>

## <a name="see-also"></a><span data-ttu-id="cf8bd-233">See also</span><span class="sxs-lookup"><span data-stu-id="cf8bd-233">See also</span></span>
* [<span data-ttu-id="cf8bd-234">Enable Application Proxy for Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="cf8bd-234">Enable Application Proxy for Azure Active Directory</span></span>](application-proxy-enable.md)
* [<span data-ttu-id="cf8bd-235">Publish applications with Application Proxy</span><span class="sxs-lookup"><span data-stu-id="cf8bd-235">Publish applications with Application Proxy</span></span>](application-proxy-publish-azure-portal.md)
* [<span data-ttu-id="cf8bd-236">Enable single sign-on</span><span class="sxs-lookup"><span data-stu-id="cf8bd-236">Enable single sign-on</span></span>](application-proxy-configure-single-sign-on-with-kcd.md)
* [<span data-ttu-id="cf8bd-237">Enable conditional access</span><span class="sxs-lookup"><span data-stu-id="cf8bd-237">Enable conditional access</span></span>](application-proxy-integrate-with-sharepoint-server.md)


<!--Image references-->
[1]: ./media/application-proxy-troubleshoot/connectorproperties.png
[2]: ./media/active-directory-application-proxy-troubleshoot/sessionlog.png
