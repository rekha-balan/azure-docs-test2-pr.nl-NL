---
title: Troubleshoot error codes for the Azure MFA NPS extension | Microsoft Docs
description: Get help resolving issues with the NPS extension for Azure Multi-Factor Authentication
services: multi-factor-authentication
ms.service: active-directory
ms.component: authentication
ms.topic: conceptual
ms.date: 07/11/2018
ms.author: joflore
author: MicrosoftGuyJFlo
manager: mtillman
ms.reviewer: michmcla
ms.openlocfilehash: 4097fab5610bf4bee6c14c65d3b45e0de818a0cc
ms.sourcegitcommit: d1451406a010fd3aa854dc8e5b77dc5537d8050e
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 09/13/2018
ms.locfileid: "44856724"
---
# <a name="resolve-error-messages-from-the-nps-extension-for-azure-multi-factor-authentication"></a><span data-ttu-id="c77e5-103">Resolve error messages from the NPS extension for Azure Multi-Factor Authentication</span><span class="sxs-lookup"><span data-stu-id="c77e5-103">Resolve error messages from the NPS extension for Azure Multi-Factor Authentication</span></span>

<span data-ttu-id="c77e5-104">If you encounter errors with the NPS extension for Azure Multi-Factor Authentication, use this article to reach a resolution faster.</span><span class="sxs-lookup"><span data-stu-id="c77e5-104">If you encounter errors with the NPS extension for Azure Multi-Factor Authentication, use this article to reach a resolution faster.</span></span> 

## <a name="troubleshooting-steps-for-common-errors"></a><span data-ttu-id="c77e5-105">Troubleshooting steps for common errors</span><span class="sxs-lookup"><span data-stu-id="c77e5-105">Troubleshooting steps for common errors</span></span>

| <span data-ttu-id="c77e5-106">Error code</span><span class="sxs-lookup"><span data-stu-id="c77e5-106">Error code</span></span> | <span data-ttu-id="c77e5-107">Troubleshooting steps</span><span class="sxs-lookup"><span data-stu-id="c77e5-107">Troubleshooting steps</span></span> |
| ---------- | --------------------- |
| <span data-ttu-id="c77e5-108">**CONTACT_SUPPORT**</span><span class="sxs-lookup"><span data-stu-id="c77e5-108">**CONTACT_SUPPORT**</span></span> | <span data-ttu-id="c77e5-109">[Contact support](#contact-microsoft-support), and mention the list of steps for collecting logs.</span><span class="sxs-lookup"><span data-stu-id="c77e5-109">[Contact support](#contact-microsoft-support), and mention the list of steps for collecting logs.</span></span> <span data-ttu-id="c77e5-110">Provide as much information as you can about what happened before the error, including tenant id, and user principal name (UPN).</span><span class="sxs-lookup"><span data-stu-id="c77e5-110">Provide as much information as you can about what happened before the error, including tenant id, and user principal name (UPN).</span></span> |
| <span data-ttu-id="c77e5-111">**CLIENT_CERT_INSTALL_ERROR**</span><span class="sxs-lookup"><span data-stu-id="c77e5-111">**CLIENT_CERT_INSTALL_ERROR**</span></span> | <span data-ttu-id="c77e5-112">There may be an issue with how the client certificate was installed or associated with your tenant.</span><span class="sxs-lookup"><span data-stu-id="c77e5-112">There may be an issue with how the client certificate was installed or associated with your tenant.</span></span> <span data-ttu-id="c77e5-113">Follow the instructions in [Troubleshooting the MFA NPS extension](howto-mfa-nps-extension.md#troubleshooting) to investigate client cert problems.</span><span class="sxs-lookup"><span data-stu-id="c77e5-113">Follow the instructions in [Troubleshooting the MFA NPS extension](howto-mfa-nps-extension.md#troubleshooting) to investigate client cert problems.</span></span> |
| <span data-ttu-id="c77e5-114">**ESTS_TOKEN_ERROR**</span><span class="sxs-lookup"><span data-stu-id="c77e5-114">**ESTS_TOKEN_ERROR**</span></span> | <span data-ttu-id="c77e5-115">Follow the instructions in [Troubleshooting the MFA NPS extension](howto-mfa-nps-extension.md#troubleshooting) to investigate client cert and ADAL token problems.</span><span class="sxs-lookup"><span data-stu-id="c77e5-115">Follow the instructions in [Troubleshooting the MFA NPS extension](howto-mfa-nps-extension.md#troubleshooting) to investigate client cert and ADAL token problems.</span></span> |
| <span data-ttu-id="c77e5-116">**HTTPS_COMMUNICATION_ERROR**</span><span class="sxs-lookup"><span data-stu-id="c77e5-116">**HTTPS_COMMUNICATION_ERROR**</span></span> | <span data-ttu-id="c77e5-117">The NPS server is unable to receive responses from Azure MFA.</span><span class="sxs-lookup"><span data-stu-id="c77e5-117">The NPS server is unable to receive responses from Azure MFA.</span></span> <span data-ttu-id="c77e5-118">Verify that your firewalls are open bidirectionally for traffic to and from https://adnotifications.windowsazure.com</span><span class="sxs-lookup"><span data-stu-id="c77e5-118">Verify that your firewalls are open bidirectionally for traffic to and from https://adnotifications.windowsazure.com</span></span> |
| <span data-ttu-id="c77e5-119">**HTTP_CONNECT_ERROR**</span><span class="sxs-lookup"><span data-stu-id="c77e5-119">**HTTP_CONNECT_ERROR**</span></span> | <span data-ttu-id="c77e5-120">On the server that runs the NPS extension, verify that you can reach  https://adnotifications.windowsazure.com and https://login.microsoftonline.com/.</span><span class="sxs-lookup"><span data-stu-id="c77e5-120">On the server that runs the NPS extension, verify that you can reach  https://adnotifications.windowsazure.com and https://login.microsoftonline.com/.</span></span> <span data-ttu-id="c77e5-121">If those sites don't load, troubleshoot connectivity on that server.</span><span class="sxs-lookup"><span data-stu-id="c77e5-121">If those sites don't load, troubleshoot connectivity on that server.</span></span> |
| <span data-ttu-id="c77e5-122">**REGISTRY_CONFIG_ERROR**</span><span class="sxs-lookup"><span data-stu-id="c77e5-122">**REGISTRY_CONFIG_ERROR**</span></span> | <span data-ttu-id="c77e5-123">A key is missing in the registry for the application, which may be because the [PowerShell script](howto-mfa-nps-extension.md#install-the-nps-extension) wasn't run after installation.</span><span class="sxs-lookup"><span data-stu-id="c77e5-123">A key is missing in the registry for the application, which may be because the [PowerShell script](howto-mfa-nps-extension.md#install-the-nps-extension) wasn't run after installation.</span></span> <span data-ttu-id="c77e5-124">The error message should include the missing key.</span><span class="sxs-lookup"><span data-stu-id="c77e5-124">The error message should include the missing key.</span></span> <span data-ttu-id="c77e5-125">Make sure you have the key under HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\AzureMfa.</span><span class="sxs-lookup"><span data-stu-id="c77e5-125">Make sure you have the key under HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\AzureMfa.</span></span> |
| <span data-ttu-id="c77e5-126">**REQUEST_FORMAT_ERROR**</span><span class="sxs-lookup"><span data-stu-id="c77e5-126">**REQUEST_FORMAT_ERROR**</span></span> <br> <span data-ttu-id="c77e5-127">Radius Request missing mandatory Radius userName\Identifier attribute.Verify that NPS is receiving RADIUS requests</span><span class="sxs-lookup"><span data-stu-id="c77e5-127">Radius Request missing mandatory Radius userName\Identifier attribute.Verify that NPS is receiving RADIUS requests</span></span> | <span data-ttu-id="c77e5-128">This error usually reflects an installation issue.</span><span class="sxs-lookup"><span data-stu-id="c77e5-128">This error usually reflects an installation issue.</span></span> <span data-ttu-id="c77e5-129">The NPS extension must be installed in NPS servers that can receive RADIUS requests.</span><span class="sxs-lookup"><span data-stu-id="c77e5-129">The NPS extension must be installed in NPS servers that can receive RADIUS requests.</span></span> <span data-ttu-id="c77e5-130">NPS servers that are installed as dependencies for services like RDG and RRAS don't receive radius requests.</span><span class="sxs-lookup"><span data-stu-id="c77e5-130">NPS servers that are installed as dependencies for services like RDG and RRAS don't receive radius requests.</span></span> <span data-ttu-id="c77e5-131">NPS Extension does not work when installed over such installations and errors out since it cannot read the details from the authentication request.</span><span class="sxs-lookup"><span data-stu-id="c77e5-131">NPS Extension does not work when installed over such installations and errors out since it cannot read the details from the authentication request.</span></span> |
| <span data-ttu-id="c77e5-132">**REQUEST_MISSING_CODE**</span><span class="sxs-lookup"><span data-stu-id="c77e5-132">**REQUEST_MISSING_CODE**</span></span> | <span data-ttu-id="c77e5-133">Make sure that the password encryption protocol between the NPS and NAS servers supports the secondary authentication method that you're using.</span><span class="sxs-lookup"><span data-stu-id="c77e5-133">Make sure that the password encryption protocol between the NPS and NAS servers supports the secondary authentication method that you're using.</span></span> <span data-ttu-id="c77e5-134">**PAP** supports all the authentication methods of Azure MFA in the cloud: phone call, one-way text message, mobile app notification, and mobile app verification code.</span><span class="sxs-lookup"><span data-stu-id="c77e5-134">**PAP** supports all the authentication methods of Azure MFA in the cloud: phone call, one-way text message, mobile app notification, and mobile app verification code.</span></span> <span data-ttu-id="c77e5-135">**CHAPV2** and **EAP** support phone call and mobile app notification.</span><span class="sxs-lookup"><span data-stu-id="c77e5-135">**CHAPV2** and **EAP** support phone call and mobile app notification.</span></span> |
| <span data-ttu-id="c77e5-136">**USERNAME_CANONICALIZATION_ERROR**</span><span class="sxs-lookup"><span data-stu-id="c77e5-136">**USERNAME_CANONICALIZATION_ERROR**</span></span> | <span data-ttu-id="c77e5-137">Verify that the user is present in your on-premises Active Directory instance, and that the NPS Service has permissions to access the directory.</span><span class="sxs-lookup"><span data-stu-id="c77e5-137">Verify that the user is present in your on-premises Active Directory instance, and that the NPS Service has permissions to access the directory.</span></span> <span data-ttu-id="c77e5-138">If you are using cross-forest trusts, [contact support](#contact-microsoft-support) for further help.</span><span class="sxs-lookup"><span data-stu-id="c77e5-138">If you are using cross-forest trusts, [contact support](#contact-microsoft-support) for further help.</span></span> |


   

### <a name="alternate-login-id-errors"></a><span data-ttu-id="c77e5-139">Alternate login ID errors</span><span class="sxs-lookup"><span data-stu-id="c77e5-139">Alternate login ID errors</span></span>

| <span data-ttu-id="c77e5-140">Error code</span><span class="sxs-lookup"><span data-stu-id="c77e5-140">Error code</span></span> | <span data-ttu-id="c77e5-141">Error message</span><span class="sxs-lookup"><span data-stu-id="c77e5-141">Error message</span></span> | <span data-ttu-id="c77e5-142">Troubleshooting steps</span><span class="sxs-lookup"><span data-stu-id="c77e5-142">Troubleshooting steps</span></span> |
| ---------- | ------------- | --------------------- |
| <span data-ttu-id="c77e5-143">**ALTERNATE_LOGIN_ID_ERROR**</span><span class="sxs-lookup"><span data-stu-id="c77e5-143">**ALTERNATE_LOGIN_ID_ERROR**</span></span> | <span data-ttu-id="c77e5-144">Error: userObjectSid lookup failed</span><span class="sxs-lookup"><span data-stu-id="c77e5-144">Error: userObjectSid lookup failed</span></span> | <span data-ttu-id="c77e5-145">Verify that the user exists in your on-premises Active Directory instance.</span><span class="sxs-lookup"><span data-stu-id="c77e5-145">Verify that the user exists in your on-premises Active Directory instance.</span></span> <span data-ttu-id="c77e5-146">If you are using cross-forest trusts, [contact support](#contact-microsoft-support) for further help.</span><span class="sxs-lookup"><span data-stu-id="c77e5-146">If you are using cross-forest trusts, [contact support](#contact-microsoft-support) for further help.</span></span> |
| <span data-ttu-id="c77e5-147">**ALTERNATE_LOGIN_ID_ERROR**</span><span class="sxs-lookup"><span data-stu-id="c77e5-147">**ALTERNATE_LOGIN_ID_ERROR**</span></span> | <span data-ttu-id="c77e5-148">Error: Alternate LoginId lookup failed</span><span class="sxs-lookup"><span data-stu-id="c77e5-148">Error: Alternate LoginId lookup failed</span></span> | <span data-ttu-id="c77e5-149">Verify that LDAP_ALTERNATE_LOGINID_ATTRIBUTE is set to a [valid active directory attribute](https://msdn.microsoft.com/library/ms675090(v=vs.85).aspx).</span><span class="sxs-lookup"><span data-stu-id="c77e5-149">Verify that LDAP_ALTERNATE_LOGINID_ATTRIBUTE is set to a [valid active directory attribute](https://msdn.microsoft.com/library/ms675090(v=vs.85).aspx).</span></span> <br><br> <span data-ttu-id="c77e5-150">If LDAP_FORCE_GLOBAL_CATALOG is set to True, or LDAP_LOOKUP_FORESTS is configured with a non-empty value, verify that you have configured a Global Catalog and that the AlternateLoginId attribute is added to it.</span><span class="sxs-lookup"><span data-stu-id="c77e5-150">If LDAP_FORCE_GLOBAL_CATALOG is set to True, or LDAP_LOOKUP_FORESTS is configured with a non-empty value, verify that you have configured a Global Catalog and that the AlternateLoginId attribute is added to it.</span></span> <br><br> <span data-ttu-id="c77e5-151">If LDAP_LOOKUP_FORESTS is configured with a non-empty value, verify that the value is correct.</span><span class="sxs-lookup"><span data-stu-id="c77e5-151">If LDAP_LOOKUP_FORESTS is configured with a non-empty value, verify that the value is correct.</span></span> <span data-ttu-id="c77e5-152">If there is more than one forest name, the names must be separated with semi-colons, not spaces.</span><span class="sxs-lookup"><span data-stu-id="c77e5-152">If there is more than one forest name, the names must be separated with semi-colons, not spaces.</span></span> <br><br> <span data-ttu-id="c77e5-153">If these steps don't fix the problem, [contact support](#contact-microsoft-support) for more help.</span><span class="sxs-lookup"><span data-stu-id="c77e5-153">If these steps don't fix the problem, [contact support](#contact-microsoft-support) for more help.</span></span> |
| <span data-ttu-id="c77e5-154">**ALTERNATE_LOGIN_ID_ERROR**</span><span class="sxs-lookup"><span data-stu-id="c77e5-154">**ALTERNATE_LOGIN_ID_ERROR**</span></span> | <span data-ttu-id="c77e5-155">Error: Alternate LoginId value is empty</span><span class="sxs-lookup"><span data-stu-id="c77e5-155">Error: Alternate LoginId value is empty</span></span> | <span data-ttu-id="c77e5-156">Verify that the AlternateLoginId attribute is configured for the user.</span><span class="sxs-lookup"><span data-stu-id="c77e5-156">Verify that the AlternateLoginId attribute is configured for the user.</span></span> |


## <a name="errors-your-users-may-encounter"></a><span data-ttu-id="c77e5-157">Errors your users may encounter</span><span class="sxs-lookup"><span data-stu-id="c77e5-157">Errors your users may encounter</span></span>

| <span data-ttu-id="c77e5-158">Error code</span><span class="sxs-lookup"><span data-stu-id="c77e5-158">Error code</span></span> | <span data-ttu-id="c77e5-159">Error message</span><span class="sxs-lookup"><span data-stu-id="c77e5-159">Error message</span></span> | <span data-ttu-id="c77e5-160">Troubleshooting steps</span><span class="sxs-lookup"><span data-stu-id="c77e5-160">Troubleshooting steps</span></span> |
| ---------- | ------------- | --------------------- |
| <span data-ttu-id="c77e5-161">**AccessDenied**</span><span class="sxs-lookup"><span data-stu-id="c77e5-161">**AccessDenied**</span></span> | <span data-ttu-id="c77e5-162">Caller tenant does not have access permissions to do authentication for the user</span><span class="sxs-lookup"><span data-stu-id="c77e5-162">Caller tenant does not have access permissions to do authentication for the user</span></span> | <span data-ttu-id="c77e5-163">Check whether the tenant domain and the domain of the user principal name (UPN) are the same.</span><span class="sxs-lookup"><span data-stu-id="c77e5-163">Check whether the tenant domain and the domain of the user principal name (UPN) are the same.</span></span> <span data-ttu-id="c77e5-164">For example, make sure that user@contoso.com is trying to authenticate to the Contoso tenant.</span><span class="sxs-lookup"><span data-stu-id="c77e5-164">For example, make sure that user@contoso.com is trying to authenticate to the Contoso tenant.</span></span> <span data-ttu-id="c77e5-165">The UPN represents a valid user for the tenant in Azure.</span><span class="sxs-lookup"><span data-stu-id="c77e5-165">The UPN represents a valid user for the tenant in Azure.</span></span> |
| <span data-ttu-id="c77e5-166">**AuthenticationMethodNotConfigured**</span><span class="sxs-lookup"><span data-stu-id="c77e5-166">**AuthenticationMethodNotConfigured**</span></span> | <span data-ttu-id="c77e5-167">The specified authentication method was not configured for the user</span><span class="sxs-lookup"><span data-stu-id="c77e5-167">The specified authentication method was not configured for the user</span></span> | <span data-ttu-id="c77e5-168">Have the user add or verify their verification methods according to the instructions in [Manage your settings for two-step verification](../user-help/multi-factor-authentication-end-user-manage-settings.md).</span><span class="sxs-lookup"><span data-stu-id="c77e5-168">Have the user add or verify their verification methods according to the instructions in [Manage your settings for two-step verification](../user-help/multi-factor-authentication-end-user-manage-settings.md).</span></span> |
| <span data-ttu-id="c77e5-169">**AuthenticationMethodNotSupported**</span><span class="sxs-lookup"><span data-stu-id="c77e5-169">**AuthenticationMethodNotSupported**</span></span> | <span data-ttu-id="c77e5-170">Specified authentication method is not supported.</span><span class="sxs-lookup"><span data-stu-id="c77e5-170">Specified authentication method is not supported.</span></span> | <span data-ttu-id="c77e5-171">Collect all your logs that include this error, and [contact support](#contact-microsoft-support).</span><span class="sxs-lookup"><span data-stu-id="c77e5-171">Collect all your logs that include this error, and [contact support](#contact-microsoft-support).</span></span> <span data-ttu-id="c77e5-172">When you contact support, provide the username and the secondary verification method that triggered the error.</span><span class="sxs-lookup"><span data-stu-id="c77e5-172">When you contact support, provide the username and the secondary verification method that triggered the error.</span></span> |
| <span data-ttu-id="c77e5-173">**BecAccessDenied**</span><span class="sxs-lookup"><span data-stu-id="c77e5-173">**BecAccessDenied**</span></span> | <span data-ttu-id="c77e5-174">MSODS Bec call returned access denied, probably the username is not defined in the tenant</span><span class="sxs-lookup"><span data-stu-id="c77e5-174">MSODS Bec call returned access denied, probably the username is not defined in the tenant</span></span> | <span data-ttu-id="c77e5-175">The user is present in Active Directory on-premises but is not synced into Azure AD by AD Connect.</span><span class="sxs-lookup"><span data-stu-id="c77e5-175">The user is present in Active Directory on-premises but is not synced into Azure AD by AD Connect.</span></span> <span data-ttu-id="c77e5-176">Or, the user is missing for the tenant.</span><span class="sxs-lookup"><span data-stu-id="c77e5-176">Or, the user is missing for the tenant.</span></span> <span data-ttu-id="c77e5-177">Add the user to Azure AD and have them add their verification methods according to the instructions in [Manage your settings for two-step verification](../user-help/multi-factor-authentication-end-user-manage-settings.md).</span><span class="sxs-lookup"><span data-stu-id="c77e5-177">Add the user to Azure AD and have them add their verification methods according to the instructions in [Manage your settings for two-step verification](../user-help/multi-factor-authentication-end-user-manage-settings.md).</span></span> |
| <span data-ttu-id="c77e5-178">**InvalidFormat** or **StrongAuthenticationServiceInvalidParameter**</span><span class="sxs-lookup"><span data-stu-id="c77e5-178">**InvalidFormat** or **StrongAuthenticationServiceInvalidParameter**</span></span> | <span data-ttu-id="c77e5-179">The phone number is in an unrecognizable format</span><span class="sxs-lookup"><span data-stu-id="c77e5-179">The phone number is in an unrecognizable format</span></span> | <span data-ttu-id="c77e5-180">Have the user correct their verification phone numbers.</span><span class="sxs-lookup"><span data-stu-id="c77e5-180">Have the user correct their verification phone numbers.</span></span> |
| <span data-ttu-id="c77e5-181">**InvalidSession**</span><span class="sxs-lookup"><span data-stu-id="c77e5-181">**InvalidSession**</span></span> | <span data-ttu-id="c77e5-182">The specified session is invalid or may have expired</span><span class="sxs-lookup"><span data-stu-id="c77e5-182">The specified session is invalid or may have expired</span></span> | <span data-ttu-id="c77e5-183">The session has taken more than three minutes to complete.</span><span class="sxs-lookup"><span data-stu-id="c77e5-183">The session has taken more than three minutes to complete.</span></span> <span data-ttu-id="c77e5-184">Verify that the user is entering the verification code, or responding to the app notification, within three minutes of initiating the authentication request.</span><span class="sxs-lookup"><span data-stu-id="c77e5-184">Verify that the user is entering the verification code, or responding to the app notification, within three minutes of initiating the authentication request.</span></span> <span data-ttu-id="c77e5-185">If that doesn't fix the problem, check that there are no network latencies between client, NAS Server, NPS Server, and the Azure MFA endpoint.</span><span class="sxs-lookup"><span data-stu-id="c77e5-185">If that doesn't fix the problem, check that there are no network latencies between client, NAS Server, NPS Server, and the Azure MFA endpoint.</span></span>  |
| <span data-ttu-id="c77e5-186">**NoDefaultAuthenticationMethodIsConfigured**</span><span class="sxs-lookup"><span data-stu-id="c77e5-186">**NoDefaultAuthenticationMethodIsConfigured**</span></span> | <span data-ttu-id="c77e5-187">No default authentication method was configured for the user</span><span class="sxs-lookup"><span data-stu-id="c77e5-187">No default authentication method was configured for the user</span></span> | <span data-ttu-id="c77e5-188">Have the user add or verify their verification methods according to the instructions in [Manage your settings for two-step verification](../user-help/multi-factor-authentication-end-user-manage-settings.md).</span><span class="sxs-lookup"><span data-stu-id="c77e5-188">Have the user add or verify their verification methods according to the instructions in [Manage your settings for two-step verification](../user-help/multi-factor-authentication-end-user-manage-settings.md).</span></span> <span data-ttu-id="c77e5-189">Verify that the user has chosen a default authentication method, and configured that method for their account.</span><span class="sxs-lookup"><span data-stu-id="c77e5-189">Verify that the user has chosen a default authentication method, and configured that method for their account.</span></span> |
| <span data-ttu-id="c77e5-190">**OathCodePinIncorrect**</span><span class="sxs-lookup"><span data-stu-id="c77e5-190">**OathCodePinIncorrect**</span></span> | <span data-ttu-id="c77e5-191">Wrong code and pin entered.</span><span class="sxs-lookup"><span data-stu-id="c77e5-191">Wrong code and pin entered.</span></span> | <span data-ttu-id="c77e5-192">This error is not expected in the NPS extension.</span><span class="sxs-lookup"><span data-stu-id="c77e5-192">This error is not expected in the NPS extension.</span></span> <span data-ttu-id="c77e5-193">If your user encounters this, [contact support](#contact-microsoft-support) for troubleshooting help.</span><span class="sxs-lookup"><span data-stu-id="c77e5-193">If your user encounters this, [contact support](#contact-microsoft-support) for troubleshooting help.</span></span> |
| <span data-ttu-id="c77e5-194">**ProofDataNotFound**</span><span class="sxs-lookup"><span data-stu-id="c77e5-194">**ProofDataNotFound**</span></span> | <span data-ttu-id="c77e5-195">Proof data was not configured for the specified authentication method.</span><span class="sxs-lookup"><span data-stu-id="c77e5-195">Proof data was not configured for the specified authentication method.</span></span> | <span data-ttu-id="c77e5-196">Have the user try a different verification method, or add a new verification methods according to the instructions in [Manage your settings for two-step verification](../user-help/multi-factor-authentication-end-user-manage-settings.md).</span><span class="sxs-lookup"><span data-stu-id="c77e5-196">Have the user try a different verification method, or add a new verification methods according to the instructions in [Manage your settings for two-step verification](../user-help/multi-factor-authentication-end-user-manage-settings.md).</span></span> <span data-ttu-id="c77e5-197">If the user continues to see this error after you confirmed that their verification method is set up correctly, [contact support](#contact-microsoft-support).</span><span class="sxs-lookup"><span data-stu-id="c77e5-197">If the user continues to see this error after you confirmed that their verification method is set up correctly, [contact support](#contact-microsoft-support).</span></span> |
| <span data-ttu-id="c77e5-198">**SMSAuthFailedWrongCodePinEntered**</span><span class="sxs-lookup"><span data-stu-id="c77e5-198">**SMSAuthFailedWrongCodePinEntered**</span></span> | <span data-ttu-id="c77e5-199">Wrong code and pin entered.</span><span class="sxs-lookup"><span data-stu-id="c77e5-199">Wrong code and pin entered.</span></span> <span data-ttu-id="c77e5-200">(OneWaySMS)</span><span class="sxs-lookup"><span data-stu-id="c77e5-200">(OneWaySMS)</span></span> | <span data-ttu-id="c77e5-201">This error is not expected in the NPS extension.</span><span class="sxs-lookup"><span data-stu-id="c77e5-201">This error is not expected in the NPS extension.</span></span> <span data-ttu-id="c77e5-202">If your user encounters this, [contact support](#contact-microsoft-support) for troubleshooting help.</span><span class="sxs-lookup"><span data-stu-id="c77e5-202">If your user encounters this, [contact support](#contact-microsoft-support) for troubleshooting help.</span></span> |
| <span data-ttu-id="c77e5-203">**TenantIsBlocked**</span><span class="sxs-lookup"><span data-stu-id="c77e5-203">**TenantIsBlocked**</span></span> | <span data-ttu-id="c77e5-204">Tenant is blocked</span><span class="sxs-lookup"><span data-stu-id="c77e5-204">Tenant is blocked</span></span> | <span data-ttu-id="c77e5-205">[Contact support](#contact-microsoft-support) with Directory ID from the Azure AD properties page in the Azure portal.</span><span class="sxs-lookup"><span data-stu-id="c77e5-205">[Contact support](#contact-microsoft-support) with Directory ID from the Azure AD properties page in the Azure portal.</span></span> |
| <span data-ttu-id="c77e5-206">**UserNotFound**</span><span class="sxs-lookup"><span data-stu-id="c77e5-206">**UserNotFound**</span></span> | <span data-ttu-id="c77e5-207">The specified user was not found</span><span class="sxs-lookup"><span data-stu-id="c77e5-207">The specified user was not found</span></span> | <span data-ttu-id="c77e5-208">The tenant is no longer visible as active in Azure AD.</span><span class="sxs-lookup"><span data-stu-id="c77e5-208">The tenant is no longer visible as active in Azure AD.</span></span> <span data-ttu-id="c77e5-209">Check that your subscription is active and you have the required first party apps.</span><span class="sxs-lookup"><span data-stu-id="c77e5-209">Check that your subscription is active and you have the required first party apps.</span></span> <span data-ttu-id="c77e5-210">Also make sure the tenant in the certificate subject is as expected and the cert is still valid and registered under the service principal.</span><span class="sxs-lookup"><span data-stu-id="c77e5-210">Also make sure the tenant in the certificate subject is as expected and the cert is still valid and registered under the service principal.</span></span> |

## <a name="messages-your-users-may-encounter-that-arent-errors"></a><span data-ttu-id="c77e5-211">Messages your users may encounter that aren't errors</span><span class="sxs-lookup"><span data-stu-id="c77e5-211">Messages your users may encounter that aren't errors</span></span>

<span data-ttu-id="c77e5-212">Sometimes, your users may get messages from Multi-Factor Authentication because their authentication request failed.</span><span class="sxs-lookup"><span data-stu-id="c77e5-212">Sometimes, your users may get messages from Multi-Factor Authentication because their authentication request failed.</span></span> <span data-ttu-id="c77e5-213">These aren't errors in the product of configuration, but are intentional warnings explaining why an authentication request was denied.</span><span class="sxs-lookup"><span data-stu-id="c77e5-213">These aren't errors in the product of configuration, but are intentional warnings explaining why an authentication request was denied.</span></span>

| <span data-ttu-id="c77e5-214">Error code</span><span class="sxs-lookup"><span data-stu-id="c77e5-214">Error code</span></span> | <span data-ttu-id="c77e5-215">Error message</span><span class="sxs-lookup"><span data-stu-id="c77e5-215">Error message</span></span> | <span data-ttu-id="c77e5-216">Recommended steps</span><span class="sxs-lookup"><span data-stu-id="c77e5-216">Recommended steps</span></span> | 
| ---------- | ------------- | ----------------- |
| <span data-ttu-id="c77e5-217">**OathCodeIncorrect**</span><span class="sxs-lookup"><span data-stu-id="c77e5-217">**OathCodeIncorrect**</span></span> | <span data-ttu-id="c77e5-218">Wrong code entered\OATH Code Incorrect</span><span class="sxs-lookup"><span data-stu-id="c77e5-218">Wrong code entered\OATH Code Incorrect</span></span> | <span data-ttu-id="c77e5-219">Not an error,User has entered wrong code.</span><span class="sxs-lookup"><span data-stu-id="c77e5-219">Not an error,User has entered wrong code.</span></span> | <span data-ttu-id="c77e5-220">The user entered the wrong code.</span><span class="sxs-lookup"><span data-stu-id="c77e5-220">The user entered the wrong code.</span></span> <span data-ttu-id="c77e5-221">Have them try again by requesting a new code or signing in again.</span><span class="sxs-lookup"><span data-stu-id="c77e5-221">Have them try again by requesting a new code or signing in again.</span></span> | 
| <span data-ttu-id="c77e5-222">**SMSAuthFailedMaxAllowedCodeRetryReached**</span><span class="sxs-lookup"><span data-stu-id="c77e5-222">**SMSAuthFailedMaxAllowedCodeRetryReached**</span></span> | <span data-ttu-id="c77e5-223">Maximum allowed code retry reached</span><span class="sxs-lookup"><span data-stu-id="c77e5-223">Maximum allowed code retry reached</span></span> | <span data-ttu-id="c77e5-224">The user failed the verification challenge too many times.</span><span class="sxs-lookup"><span data-stu-id="c77e5-224">The user failed the verification challenge too many times.</span></span> <span data-ttu-id="c77e5-225">Depending on your settings, they may need to be unblocked by an admin now.</span><span class="sxs-lookup"><span data-stu-id="c77e5-225">Depending on your settings, they may need to be unblocked by an admin now.</span></span>  |
| <span data-ttu-id="c77e5-226">**SMSAuthFailedWrongCodeEntered**</span><span class="sxs-lookup"><span data-stu-id="c77e5-226">**SMSAuthFailedWrongCodeEntered**</span></span> | <span data-ttu-id="c77e5-227">Wrong code entered/Text Message OTP Incorrect</span><span class="sxs-lookup"><span data-stu-id="c77e5-227">Wrong code entered/Text Message OTP Incorrect</span></span> | <span data-ttu-id="c77e5-228">The user entered the wrong code.</span><span class="sxs-lookup"><span data-stu-id="c77e5-228">The user entered the wrong code.</span></span> <span data-ttu-id="c77e5-229">Have them try again by requesting a new code or signing in again.</span><span class="sxs-lookup"><span data-stu-id="c77e5-229">Have them try again by requesting a new code or signing in again.</span></span> |

## <a name="errors-that-require-support"></a><span data-ttu-id="c77e5-230">Errors that require support</span><span class="sxs-lookup"><span data-stu-id="c77e5-230">Errors that require support</span></span>

<span data-ttu-id="c77e5-231">If you encounter one of these errors, we recommend that you [contact support](#contact-microsoft-support) for diagnostic help.</span><span class="sxs-lookup"><span data-stu-id="c77e5-231">If you encounter one of these errors, we recommend that you [contact support](#contact-microsoft-support) for diagnostic help.</span></span> <span data-ttu-id="c77e5-232">There's no standard set of steps that can address these errors.</span><span class="sxs-lookup"><span data-stu-id="c77e5-232">There's no standard set of steps that can address these errors.</span></span> <span data-ttu-id="c77e5-233">When you do contact support, be sure to include as much information as possible about the steps that led to an error, and your tenant information.</span><span class="sxs-lookup"><span data-stu-id="c77e5-233">When you do contact support, be sure to include as much information as possible about the steps that led to an error, and your tenant information.</span></span>

| <span data-ttu-id="c77e5-234">Error code</span><span class="sxs-lookup"><span data-stu-id="c77e5-234">Error code</span></span> | <span data-ttu-id="c77e5-235">Error message</span><span class="sxs-lookup"><span data-stu-id="c77e5-235">Error message</span></span> |
| ---------- | ------------- |
| <span data-ttu-id="c77e5-236">**InvalidParameter**</span><span class="sxs-lookup"><span data-stu-id="c77e5-236">**InvalidParameter**</span></span> | <span data-ttu-id="c77e5-237">Request must not be null</span><span class="sxs-lookup"><span data-stu-id="c77e5-237">Request must not be null</span></span> |
| <span data-ttu-id="c77e5-238">**InvalidParameter**</span><span class="sxs-lookup"><span data-stu-id="c77e5-238">**InvalidParameter**</span></span> | <span data-ttu-id="c77e5-239">ObjectId must not be null or empty for ReplicationScope:{0}</span><span class="sxs-lookup"><span data-stu-id="c77e5-239">ObjectId must not be null or empty for ReplicationScope:{0}</span></span> |
| <span data-ttu-id="c77e5-240">**InvalidParameter**</span><span class="sxs-lookup"><span data-stu-id="c77e5-240">**InvalidParameter**</span></span> | <span data-ttu-id="c77e5-241">The length of CompanyName \{0}\ is longer than the maximum allowed length {1}</span><span class="sxs-lookup"><span data-stu-id="c77e5-241">The length of CompanyName \{0}\ is longer than the maximum allowed length {1}</span></span> |
| <span data-ttu-id="c77e5-242">**InvalidParameter**</span><span class="sxs-lookup"><span data-stu-id="c77e5-242">**InvalidParameter**</span></span> | <span data-ttu-id="c77e5-243">UserPrincipalName must not be null or empty</span><span class="sxs-lookup"><span data-stu-id="c77e5-243">UserPrincipalName must not be null or empty</span></span> |
| <span data-ttu-id="c77e5-244">**InvalidParameter**</span><span class="sxs-lookup"><span data-stu-id="c77e5-244">**InvalidParameter**</span></span> | <span data-ttu-id="c77e5-245">The provided TenantId is not in correct format</span><span class="sxs-lookup"><span data-stu-id="c77e5-245">The provided TenantId is not in correct format</span></span> |
| <span data-ttu-id="c77e5-246">**InvalidParameter**</span><span class="sxs-lookup"><span data-stu-id="c77e5-246">**InvalidParameter**</span></span> | <span data-ttu-id="c77e5-247">SessionId must not be null or empty</span><span class="sxs-lookup"><span data-stu-id="c77e5-247">SessionId must not be null or empty</span></span> |
| <span data-ttu-id="c77e5-248">**InvalidParameter**</span><span class="sxs-lookup"><span data-stu-id="c77e5-248">**InvalidParameter**</span></span> | <span data-ttu-id="c77e5-249">Could not resolve any ProofData from request or Msods.</span><span class="sxs-lookup"><span data-stu-id="c77e5-249">Could not resolve any ProofData from request or Msods.</span></span> <span data-ttu-id="c77e5-250">The ProofData is unKnown</span><span class="sxs-lookup"><span data-stu-id="c77e5-250">The ProofData is unKnown</span></span> |
| <span data-ttu-id="c77e5-251">**InternalError**</span><span class="sxs-lookup"><span data-stu-id="c77e5-251">**InternalError**</span></span> |  |
| <span data-ttu-id="c77e5-252">**OathCodePinIncorrect**</span><span class="sxs-lookup"><span data-stu-id="c77e5-252">**OathCodePinIncorrect**</span></span> |  |
| <span data-ttu-id="c77e5-253">**VersionNotSupported**</span><span class="sxs-lookup"><span data-stu-id="c77e5-253">**VersionNotSupported**</span></span> |  |
| <span data-ttu-id="c77e5-254">**MFAPinNotSetup**</span><span class="sxs-lookup"><span data-stu-id="c77e5-254">**MFAPinNotSetup**</span></span> |  |

## <a name="next-steps"></a><span data-ttu-id="c77e5-255">Next steps</span><span class="sxs-lookup"><span data-stu-id="c77e5-255">Next steps</span></span>

### <a name="troubleshoot-user-accounts"></a><span data-ttu-id="c77e5-256">Troubleshoot user accounts</span><span class="sxs-lookup"><span data-stu-id="c77e5-256">Troubleshoot user accounts</span></span>

<span data-ttu-id="c77e5-257">If your users are [Having trouble with two-step verification](../user-help/multi-factor-authentication-end-user-troubleshoot.md), help them self-diagnose problems.</span><span class="sxs-lookup"><span data-stu-id="c77e5-257">If your users are [Having trouble with two-step verification](../user-help/multi-factor-authentication-end-user-troubleshoot.md), help them self-diagnose problems.</span></span> 

### <a name="contact-microsoft-support"></a><span data-ttu-id="c77e5-258">Contact Microsoft support</span><span class="sxs-lookup"><span data-stu-id="c77e5-258">Contact Microsoft support</span></span>

<span data-ttu-id="c77e5-259">If you need additional help, contact a support professional through [Azure Multi-Factor Authentication Server support](https://support.microsoft.com/oas/default.aspx?prid=14947).</span><span class="sxs-lookup"><span data-stu-id="c77e5-259">If you need additional help, contact a support professional through [Azure Multi-Factor Authentication Server support](https://support.microsoft.com/oas/default.aspx?prid=14947).</span></span> <span data-ttu-id="c77e5-260">When contacting us, it's helpful if you can include as much information about your issue as possible.</span><span class="sxs-lookup"><span data-stu-id="c77e5-260">When contacting us, it's helpful if you can include as much information about your issue as possible.</span></span> <span data-ttu-id="c77e5-261">Information you can supply includes the page where you saw the error, the specific error code, the specific session ID, the ID of the user who saw the error, and debug logs.</span><span class="sxs-lookup"><span data-stu-id="c77e5-261">Information you can supply includes the page where you saw the error, the specific error code, the specific session ID, the ID of the user who saw the error, and debug logs.</span></span>

<span data-ttu-id="c77e5-262">To collect debug logs for support diagnostics, use the following steps on the NPS server:</span><span class="sxs-lookup"><span data-stu-id="c77e5-262">To collect debug logs for support diagnostics, use the following steps on the NPS server:</span></span>

1. <span data-ttu-id="c77e5-263">Open Registry Editor and browse to HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\AzureMfa set **VERBOSE_LOG** to **TRUE**</span><span class="sxs-lookup"><span data-stu-id="c77e5-263">Open Registry Editor and browse to HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\AzureMfa set **VERBOSE_LOG** to **TRUE**</span></span>
2. <span data-ttu-id="c77e5-264">Open an Administrator command prompt and run these commands:</span><span class="sxs-lookup"><span data-stu-id="c77e5-264">Open an Administrator command prompt and run these commands:</span></span>

   ```
   Mkdir c:\NPS
   Cd NPS
   netsh trace start Scenario=NetConnection capture=yes tracefile=c:\NPS\nettrace.etl
   logman create trace "NPSExtension" -ow -o c:\NPS\NPSExtension.etl -p {7237ED00-E119-430B-AB0F-C63360C8EE81} 0xffffffffffffffff 0xff -nb 16 16 -bs 1024 -mode Circular -f bincirc -max 4096 -ets
   logman update trace "NPSExtension" -p {EC2E6D3A-C958-4C76-8EA4-0262520886FF} 0xffffffffffffffff 0xff -ets
   ```

3. <span data-ttu-id="c77e5-265">Reproduce the issue</span><span class="sxs-lookup"><span data-stu-id="c77e5-265">Reproduce the issue</span></span>

4. <span data-ttu-id="c77e5-266">Stop the tracing with these commands:</span><span class="sxs-lookup"><span data-stu-id="c77e5-266">Stop the tracing with these commands:</span></span>

   ```
   logman stop "NPSExtension" -ets
   netsh trace stop
   wevtutil epl AuthNOptCh C:\NPS\%computername%_AuthNOptCh.evtx
   wevtutil epl AuthZOptCh C:\NPS\%computername%_AuthZOptCh.evtx
   wevtutil epl AuthZAdminCh C:\NPS\%computername%_AuthZAdminCh.evtx
   Start .
   ```

5. <span data-ttu-id="c77e5-267">Open Registry Editor and browse to HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\AzureMfa set **VERBOSE_LOG** to **FALSE**</span><span class="sxs-lookup"><span data-stu-id="c77e5-267">Open Registry Editor and browse to HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\AzureMfa set **VERBOSE_LOG** to **FALSE**</span></span>
6. <span data-ttu-id="c77e5-268">Zip the contents of the C:\NPS folder and attach the zipped file to the support case.</span><span class="sxs-lookup"><span data-stu-id="c77e5-268">Zip the contents of the C:\NPS folder and attach the zipped file to the support case.</span></span>


