---
title: Cloud App Discovery Security and Privacy Considerations | Microsoft Docs
description: This topic describes the security and privacy considerations related to Cloud App Discovery.
services: active-directory
documentationcenter: ''
author: MarkusVi
manager: femila
ms.assetid: 2fce5c82-d3de-4097-808f-40214768df9e
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 04/06/2017
ms.author: markvi
ms.openlocfilehash: 558a1be8176aa5bdbd769f3a180050a3dc07d149
ms.sourcegitcommit: 5b9d839c0c0a94b293fdafe1d6e5429506c07e05
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 08/02/2018
ms.locfileid: "44555937"
---
# <a name="cloud-app-discovery-security-and-privacy-considerations"></a><span data-ttu-id="68ea4-103">Cloud App Discovery Security and Privacy Considerations</span><span class="sxs-lookup"><span data-stu-id="68ea4-103">Cloud App Discovery Security and Privacy Considerations</span></span>
<span data-ttu-id="68ea4-104">Microsoft is committed to protecting your privacy and securing your data, while delivering software and services that help you manage the security of your organization.</span><span class="sxs-lookup"><span data-stu-id="68ea4-104">Microsoft is committed to protecting your privacy and securing your data, while delivering software and services that help you manage the security of your organization.</span></span>  
<span data-ttu-id="68ea4-105">We recognize that when you entrust your data to others, that trust requires rigorous security engineering investments and expertise to back it.</span><span class="sxs-lookup"><span data-stu-id="68ea4-105">We recognize that when you entrust your data to others, that trust requires rigorous security engineering investments and expertise to back it.</span></span>
<span data-ttu-id="68ea4-106">Microsoft adheres to strict compliance and security guidelines from secure software development lifecycle practices to operating a service.</span><span class="sxs-lookup"><span data-stu-id="68ea4-106">Microsoft adheres to strict compliance and security guidelines from secure software development lifecycle practices to operating a service.</span></span>  
<span data-ttu-id="68ea4-107">Securing and protecting data is a top priority at Microsoft.</span><span class="sxs-lookup"><span data-stu-id="68ea4-107">Securing and protecting data is a top priority at Microsoft.</span></span>

<span data-ttu-id="68ea4-108">This topic explains how data is collected, processed, and secured within Azure Active Directory Cloud App Discovery</span><span class="sxs-lookup"><span data-stu-id="68ea4-108">This topic explains how data is collected, processed, and secured within Azure Active Directory Cloud App Discovery</span></span>

## <a name="overview"></a><span data-ttu-id="68ea4-109">Overview</span><span class="sxs-lookup"><span data-stu-id="68ea4-109">Overview</span></span>
<span data-ttu-id="68ea4-110">Cloud App Discovery is a feature of Azure AD and is hosted in Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="68ea4-110">Cloud App Discovery is a feature of Azure AD and is hosted in Microsoft Azure.</span></span>  
<span data-ttu-id="68ea4-111">The Cloud App Discovery endpoint agent is used to collect application discovery data from IT managed machines.</span><span class="sxs-lookup"><span data-stu-id="68ea4-111">The Cloud App Discovery endpoint agent is used to collect application discovery data from IT managed machines.</span></span>  
<span data-ttu-id="68ea4-112">The collected data is sent securely over an encrypted channel to the Azure AD Cloud App Discovery service.</span><span class="sxs-lookup"><span data-stu-id="68ea4-112">The collected data is sent securely over an encrypted channel to the Azure AD Cloud App Discovery service.</span></span>  
<span data-ttu-id="68ea4-113">The Cloud App Discovery data for an organization is then visible in the Azure portal.</span><span class="sxs-lookup"><span data-stu-id="68ea4-113">The Cloud App Discovery data for an organization is then visible in the Azure portal.</span></span> 

![How Cloud App Discovery Works](https://docstestmedia1.blob.core.windows.net/azure-media/articles/active-directory/media/active-directory-cloudappdiscovery-security-and-privacy-considerations/cad01.png) 

<span data-ttu-id="68ea4-115">The following sections follow the flow of information and describe how it is secured as it moves from your organization to the Cloud App Discovery service and ultimately to the Cloud App Discovery portal.</span><span class="sxs-lookup"><span data-stu-id="68ea4-115">The following sections follow the flow of information and describe how it is secured as it moves from your organization to the Cloud App Discovery service and ultimately to the Cloud App Discovery portal.</span></span>

## <a name="collecting-data-from-your-organization"></a><span data-ttu-id="68ea4-116">Collecting data from your organization</span><span class="sxs-lookup"><span data-stu-id="68ea4-116">Collecting data from your organization</span></span>
<span data-ttu-id="68ea4-117">In order to use Azure Active Directory’s Cloud App discovery feature to get insights into the applications used by employees in your organization, you need to first deploy the Azure AD Cloud App Discovery endpoint agent to machines in your organization.</span><span class="sxs-lookup"><span data-stu-id="68ea4-117">In order to use Azure Active Directory’s Cloud App discovery feature to get insights into the applications used by employees in your organization, you need to first deploy the Azure AD Cloud App Discovery endpoint agent to machines in your organization.</span></span>

<span data-ttu-id="68ea4-118">Administrators of the Azure Active Directory tenant (or their delegate) can download the agent installation package from the Azure portal.</span><span class="sxs-lookup"><span data-stu-id="68ea4-118">Administrators of the Azure Active Directory tenant (or their delegate) can download the agent installation package from the Azure portal.</span></span> <span data-ttu-id="68ea4-119">The agent can either be manually installed or installed across multiple machines in the organization using SCCM or Group Policy.</span><span class="sxs-lookup"><span data-stu-id="68ea4-119">The agent can either be manually installed or installed across multiple machines in the organization using SCCM or Group Policy.</span></span>

<span data-ttu-id="68ea4-120">For further instructions on deployment options, see [Cloud App Discovery Group Policy Deployment Guide](http://social.technet.microsoft.com/wiki/contents/articles/30965.cloud-app-discovery-group-policy-deployment-guide.aspx).</span><span class="sxs-lookup"><span data-stu-id="68ea4-120">For further instructions on deployment options, see [Cloud App Discovery Group Policy Deployment Guide](http://social.technet.microsoft.com/wiki/contents/articles/30965.cloud-app-discovery-group-policy-deployment-guide.aspx).</span></span>


### <a name="data-collected-by-the-agent"></a><span data-ttu-id="68ea4-121">Data collected by the agent</span><span class="sxs-lookup"><span data-stu-id="68ea4-121">Data collected by the agent</span></span>
<span data-ttu-id="68ea4-122">The information outlined in the list below is collected by the agent when a connection is made to a Web application.</span><span class="sxs-lookup"><span data-stu-id="68ea4-122">The information outlined in the list below is collected by the agent when a connection is made to a Web application.</span></span> <span data-ttu-id="68ea4-123">The information is only collected for those applications that the administrator has configured for discovery.</span><span class="sxs-lookup"><span data-stu-id="68ea4-123">The information is only collected for those applications that the administrator has configured for discovery.</span></span>  
<span data-ttu-id="68ea4-124">You can edit the list of cloud apps that the agent monitors through the Cloud App Discovery blade in the Microsoft [Azure portal](https://portal.azure.com/), under **Settings**->**Data Collection**->**App Collection list**.</span><span class="sxs-lookup"><span data-stu-id="68ea4-124">You can edit the list of cloud apps that the agent monitors through the Cloud App Discovery blade in the Microsoft [Azure portal](https://portal.azure.com/), under **Settings**->**Data Collection**->**App Collection list**.</span></span> <span data-ttu-id="68ea4-125">For more details, see [Getting Started With Cloud App Discovery](http://social.technet.microsoft.com/wiki/contents/articles/30962.getting-started-with-cloud-app-discovery.aspx)</span><span class="sxs-lookup"><span data-stu-id="68ea4-125">For more details, see [Getting Started With Cloud App Discovery](http://social.technet.microsoft.com/wiki/contents/articles/30962.getting-started-with-cloud-app-discovery.aspx)</span></span>


<span data-ttu-id="68ea4-126">**Information Category**: User information</span><span class="sxs-lookup"><span data-stu-id="68ea4-126">**Information Category**: User information</span></span>  
<span data-ttu-id="68ea4-127">**Description**:</span><span class="sxs-lookup"><span data-stu-id="68ea4-127">**Description**:</span></span>  
<span data-ttu-id="68ea4-128">The Windows user name of the process that made a request to the target Web application (e.g.: DOMAIN\username) as well as the Windows Security Identifier (SID) of the user.</span><span class="sxs-lookup"><span data-stu-id="68ea4-128">The Windows user name of the process that made a request to the target Web application (e.g.: DOMAIN\username) as well as the Windows Security Identifier (SID) of the user.</span></span>

<span data-ttu-id="68ea4-129">**Information Category**: Process information</span><span class="sxs-lookup"><span data-stu-id="68ea4-129">**Information Category**: Process information</span></span>  
<span data-ttu-id="68ea4-130">**Description**:</span><span class="sxs-lookup"><span data-stu-id="68ea4-130">**Description**:</span></span>  
<span data-ttu-id="68ea4-131">The name of the process that made the request to the target Web application (e.g.: “iexplore.exe”)</span><span class="sxs-lookup"><span data-stu-id="68ea4-131">The name of the process that made the request to the target Web application (e.g.: “iexplore.exe”)</span></span>

<span data-ttu-id="68ea4-132">**Information Category**: Machine information</span><span class="sxs-lookup"><span data-stu-id="68ea4-132">**Information Category**: Machine information</span></span>  
<span data-ttu-id="68ea4-133">**Description**:</span><span class="sxs-lookup"><span data-stu-id="68ea4-133">**Description**:</span></span>  
<span data-ttu-id="68ea4-134">The machine NetBIOS name on which the agent is installed.</span><span class="sxs-lookup"><span data-stu-id="68ea4-134">The machine NetBIOS name on which the agent is installed.</span></span>

<span data-ttu-id="68ea4-135">**Information Category**: App traffic information</span><span class="sxs-lookup"><span data-stu-id="68ea4-135">**Information Category**: App traffic information</span></span>  
<span data-ttu-id="68ea4-136">**Description**:</span><span class="sxs-lookup"><span data-stu-id="68ea4-136">**Description**:</span></span> 

<span data-ttu-id="68ea4-137">The following connection information:</span><span class="sxs-lookup"><span data-stu-id="68ea4-137">The following connection information:</span></span>

* <span data-ttu-id="68ea4-138">The source (local computer) and destination IP addresses and port numbers</span><span class="sxs-lookup"><span data-stu-id="68ea4-138">The source (local computer) and destination IP addresses and port numbers</span></span>
* <span data-ttu-id="68ea4-139">The public IP address of the organization through which the request goes out.</span><span class="sxs-lookup"><span data-stu-id="68ea4-139">The public IP address of the organization through which the request goes out.</span></span>
* <span data-ttu-id="68ea4-140">The time of the request</span><span class="sxs-lookup"><span data-stu-id="68ea4-140">The time of the request</span></span>
* <span data-ttu-id="68ea4-141">The volume of traffic sent and received</span><span class="sxs-lookup"><span data-stu-id="68ea4-141">The volume of traffic sent and received</span></span>
* <span data-ttu-id="68ea4-142">The IP version (4 or 6)</span><span class="sxs-lookup"><span data-stu-id="68ea4-142">The IP version (4 or 6)</span></span>
* <span data-ttu-id="68ea4-143">For TLS connections only: The target host name from either the Server Name Indication extension or the server certificate.</span><span class="sxs-lookup"><span data-stu-id="68ea4-143">For TLS connections only: The target host name from either the Server Name Indication extension or the server certificate.</span></span>

<span data-ttu-id="68ea4-144">The following HTTP information:</span><span class="sxs-lookup"><span data-stu-id="68ea4-144">The following HTTP information:</span></span>

* <span data-ttu-id="68ea4-145">Method (GET, POST, etc.)</span><span class="sxs-lookup"><span data-stu-id="68ea4-145">Method (GET, POST, etc.)</span></span>
* <span data-ttu-id="68ea4-146">Protocol (HTTP/1.1, etc.)</span><span class="sxs-lookup"><span data-stu-id="68ea4-146">Protocol (HTTP/1.1, etc.)</span></span>
* <span data-ttu-id="68ea4-147">User agent string</span><span class="sxs-lookup"><span data-stu-id="68ea4-147">User agent string</span></span>
* <span data-ttu-id="68ea4-148">Hostname</span><span class="sxs-lookup"><span data-stu-id="68ea4-148">Hostname</span></span>
* <span data-ttu-id="68ea4-149">Target URI (excluding query string)</span><span class="sxs-lookup"><span data-stu-id="68ea4-149">Target URI (excluding query string)</span></span>
* <span data-ttu-id="68ea4-150">Content type information</span><span class="sxs-lookup"><span data-stu-id="68ea4-150">Content type information</span></span>
* <span data-ttu-id="68ea4-151">Referrer URL information (excluding query string)</span><span class="sxs-lookup"><span data-stu-id="68ea4-151">Referrer URL information (excluding query string)</span></span>

> [!NOTE]
> <span data-ttu-id="68ea4-152">The HTTP information above is collected for all non-encrypted connections.</span><span class="sxs-lookup"><span data-stu-id="68ea4-152">The HTTP information above is collected for all non-encrypted connections.</span></span>
> <span data-ttu-id="68ea4-153">For TLS connections, this information is only captured when the ‘Deep Inspection’ setting is turned on in the portal.</span><span class="sxs-lookup"><span data-stu-id="68ea4-153">For TLS connections, this information is only captured when the ‘Deep Inspection’ setting is turned on in the portal.</span></span> <span data-ttu-id="68ea4-154">The setting is ‘ON’ by default.</span><span class="sxs-lookup"><span data-stu-id="68ea4-154">The setting is ‘ON’ by default.</span></span>
> <span data-ttu-id="68ea4-155">For more details, see below, and [Getting Started With Cloud App Discovery](http://social.technet.microsoft.com/wiki/contents/articles/30962.getting-started-with-cloud-app-discovery.aspx)</span><span class="sxs-lookup"><span data-stu-id="68ea4-155">For more details, see below, and [Getting Started With Cloud App Discovery](http://social.technet.microsoft.com/wiki/contents/articles/30962.getting-started-with-cloud-app-discovery.aspx)</span></span>
> 
> 

<span data-ttu-id="68ea4-156">In addition to the data that the agent collects about the network activity, it also collects anonymous information about the software and hardware configuration, error reports, and information about how the agent is being used.</span><span class="sxs-lookup"><span data-stu-id="68ea4-156">In addition to the data that the agent collects about the network activity, it also collects anonymous information about the software and hardware configuration, error reports, and information about how the agent is being used.</span></span>


### <a name="how-the-agent-works"></a><span data-ttu-id="68ea4-157">How the agent works</span><span class="sxs-lookup"><span data-stu-id="68ea4-157">How the agent works</span></span>
<span data-ttu-id="68ea4-158">The agent installation includes two components:</span><span class="sxs-lookup"><span data-stu-id="68ea4-158">The agent installation includes two components:</span></span>

* <span data-ttu-id="68ea4-159">A user-mode component</span><span class="sxs-lookup"><span data-stu-id="68ea4-159">A user-mode component</span></span>
* <span data-ttu-id="68ea4-160">A kernel-mode driver component (Windows Filtering Platform driver)</span><span class="sxs-lookup"><span data-stu-id="68ea4-160">A kernel-mode driver component (Windows Filtering Platform driver)</span></span>

<span data-ttu-id="68ea4-161">When the agent is first installed it stores a machine-specific trusted certificate on the machine which it then uses to establish a secure connection with the Cloud App Discovery service.</span><span class="sxs-lookup"><span data-stu-id="68ea4-161">When the agent is first installed it stores a machine-specific trusted certificate on the machine which it then uses to establish a secure connection with the Cloud App Discovery service.</span></span>  
<span data-ttu-id="68ea4-162">The agent periodically retrieves policy configuration from the Cloud App Discovery service over this secure connection.</span><span class="sxs-lookup"><span data-stu-id="68ea4-162">The agent periodically retrieves policy configuration from the Cloud App Discovery service over this secure connection.</span></span>  
<span data-ttu-id="68ea4-163">The policy includes information about which cloud applications to monitor and whether auto-updating should be enabled, among other things.</span><span class="sxs-lookup"><span data-stu-id="68ea4-163">The policy includes information about which cloud applications to monitor and whether auto-updating should be enabled, among other things.</span></span>

<span data-ttu-id="68ea4-164">As Web traffic is sent and received on the machine from Internet Explorer and Chrome, the Cloud App Discovery agent analyzes the traffic and extracts the relevant metadata (see the **Data collected by the agent** section above).</span><span class="sxs-lookup"><span data-stu-id="68ea4-164">As Web traffic is sent and received on the machine from Internet Explorer and Chrome, the Cloud App Discovery agent analyzes the traffic and extracts the relevant metadata (see the **Data collected by the agent** section above).</span></span>  
<span data-ttu-id="68ea4-165">Every minute, the agent uploads the collected metadata to the Cloud App Discovery service over an encrypted channel.</span><span class="sxs-lookup"><span data-stu-id="68ea4-165">Every minute, the agent uploads the collected metadata to the Cloud App Discovery service over an encrypted channel.</span></span>

<span data-ttu-id="68ea4-166">The driver component intercepts the encrypted traffic and inserts itself into the encrypted stream.</span><span class="sxs-lookup"><span data-stu-id="68ea4-166">The driver component intercepts the encrypted traffic and inserts itself into the encrypted stream.</span></span> <span data-ttu-id="68ea4-167">More details in the **Intercepting data from encrypted connections (Deep inspection)** section below.</span><span class="sxs-lookup"><span data-stu-id="68ea4-167">More details in the **Intercepting data from encrypted connections (Deep inspection)** section below.</span></span>

### <a name="respecting-user-privacy"></a><span data-ttu-id="68ea4-168">Respecting user privacy</span><span class="sxs-lookup"><span data-stu-id="68ea4-168">Respecting user privacy</span></span>
<span data-ttu-id="68ea4-169">Our goal is to provide administrators the tools to set the balance between detailed optics into application usage and user privacy as appropriate for their organization.</span><span class="sxs-lookup"><span data-stu-id="68ea4-169">Our goal is to provide administrators the tools to set the balance between detailed optics into application usage and user privacy as appropriate for their organization.</span></span> <span data-ttu-id="68ea4-170">To that end, we provide the following knobs in the settings page in the Portal:</span><span class="sxs-lookup"><span data-stu-id="68ea4-170">To that end, we provide the following knobs in the settings page in the Portal:</span></span>

* <span data-ttu-id="68ea4-171">**Data Collection**: Administrators can choose to specify which applications or application categories they want to get discovery data on.</span><span class="sxs-lookup"><span data-stu-id="68ea4-171">**Data Collection**: Administrators can choose to specify which applications or application categories they want to get discovery data on.</span></span>
* <span data-ttu-id="68ea4-172">**Deep Inspection**: Administrators can chose to specify if the agent collects HTTP traffic for SSL/TLS connections (aka **'Deep Inspection'**).</span><span class="sxs-lookup"><span data-stu-id="68ea4-172">**Deep Inspection**: Administrators can chose to specify if the agent collects HTTP traffic for SSL/TLS connections (aka **'Deep Inspection'**).</span></span> <span data-ttu-id="68ea4-173">More on this in the next section.</span><span class="sxs-lookup"><span data-stu-id="68ea4-173">More on this in the next section.</span></span>
* <span data-ttu-id="68ea4-174">**Consent Options**: Administrators can use the Cloud App Discovery portal to choose whether to notify users of the data collection by the agent, and whether to require user consent before the agent starts collecting user data.</span><span class="sxs-lookup"><span data-stu-id="68ea4-174">**Consent Options**: Administrators can use the Cloud App Discovery portal to choose whether to notify users of the data collection by the agent, and whether to require user consent before the agent starts collecting user data.</span></span>

<span data-ttu-id="68ea4-175">The Cloud App Discovery endpoint agent only collects the information described in the **Data collected by the agent** section above.</span><span class="sxs-lookup"><span data-stu-id="68ea4-175">The Cloud App Discovery endpoint agent only collects the information described in the **Data collected by the agent** section above.</span></span>

### <a name="intercepting-data-from-encrypted-connections-deep-inspection"></a><span data-ttu-id="68ea4-176">Intercepting data from encrypted connections (Deep inspection)</span><span class="sxs-lookup"><span data-stu-id="68ea4-176">Intercepting data from encrypted connections (Deep inspection)</span></span>
<span data-ttu-id="68ea4-177">As we mentioned earlier, administrators can configure the agent to monitor data from encrypted connections ('deep inspection').</span><span class="sxs-lookup"><span data-stu-id="68ea4-177">As we mentioned earlier, administrators can configure the agent to monitor data from encrypted connections ('deep inspection').</span></span> <span data-ttu-id="68ea4-178">TLS ([Transport Layer Security](https://msdn.microsoft.com/library/windows/desktop/aa380516%28v=vs.85%29.aspx)) is one of the most common protocols in use on the Internet today.</span><span class="sxs-lookup"><span data-stu-id="68ea4-178">TLS ([Transport Layer Security](https://msdn.microsoft.com/library/windows/desktop/aa380516%28v=vs.85%29.aspx)) is one of the most common protocols in use on the Internet today.</span></span> <span data-ttu-id="68ea4-179">By encrypting communication with TLS, a client can establish a secure and private communication channel with a web server; TLS provides essential protection for passing authentication credentials and prevent the disclosure of sensitive information.</span><span class="sxs-lookup"><span data-stu-id="68ea4-179">By encrypting communication with TLS, a client can establish a secure and private communication channel with a web server; TLS provides essential protection for passing authentication credentials and prevent the disclosure of sensitive information.</span></span>

<span data-ttu-id="68ea4-180">While the end-to-end secure encrypted channel provided by TLS enables important security and privacy protection, the protocol is often abused for malicious or nefarious purposes.</span><span class="sxs-lookup"><span data-stu-id="68ea4-180">While the end-to-end secure encrypted channel provided by TLS enables important security and privacy protection, the protocol is often abused for malicious or nefarious purposes.</span></span> <span data-ttu-id="68ea4-181">So much so, in fact, that TLS is often referred to as the “universal firewall-bypass protocol”.</span><span class="sxs-lookup"><span data-stu-id="68ea4-181">So much so, in fact, that TLS is often referred to as the “universal firewall-bypass protocol”.</span></span> <span data-ttu-id="68ea4-182">The root of the problem is that most firewalls are unable to inspect TLS communication because the application-layer data is encrypted with SSL.</span><span class="sxs-lookup"><span data-stu-id="68ea4-182">The root of the problem is that most firewalls are unable to inspect TLS communication because the application-layer data is encrypted with SSL.</span></span> <span data-ttu-id="68ea4-183">Knowing this, attackers frequently leverage TLS to deliver malicious payloads to a user confident that even the most intelligent application-layer firewalls are completely blind to TLS and must simply relay TLS communication between hosts.</span><span class="sxs-lookup"><span data-stu-id="68ea4-183">Knowing this, attackers frequently leverage TLS to deliver malicious payloads to a user confident that even the most intelligent application-layer firewalls are completely blind to TLS and must simply relay TLS communication between hosts.</span></span> <span data-ttu-id="68ea4-184">End users frequently leverage TLS to bypass access controls enforced by their corporate firewalls and proxy servers, using it to connect to public proxies and for tunneling non-TLS protocols through the firewall that might otherwise be blocked by policy.</span><span class="sxs-lookup"><span data-stu-id="68ea4-184">End users frequently leverage TLS to bypass access controls enforced by their corporate firewalls and proxy servers, using it to connect to public proxies and for tunneling non-TLS protocols through the firewall that might otherwise be blocked by policy.</span></span>

<span data-ttu-id="68ea4-185">Deep inspection allows the Cloud App Discovery agent to act as a trusted man-in-the-middle.</span><span class="sxs-lookup"><span data-stu-id="68ea4-185">Deep inspection allows the Cloud App Discovery agent to act as a trusted man-in-the-middle.</span></span> <span data-ttu-id="68ea4-186">When a client request is made to access an HTTPS protected resource, the Endpoint Agent driver intercepts the connection and establishes a new connection to the destination server to retrieves its SSL certificate on behalf of the client.</span><span class="sxs-lookup"><span data-stu-id="68ea4-186">When a client request is made to access an HTTPS protected resource, the Endpoint Agent driver intercepts the connection and establishes a new connection to the destination server to retrieves its SSL certificate on behalf of the client.</span></span> <span data-ttu-id="68ea4-187">The agent then verifies that the certificate can be trusted (by checking that it was not revoked, and performing other certificate checks), and if these pass, the Endpoint Agent then copies the information from the server certificate and creates its own server certificate -- known as an interception certificate -- using that information.</span><span class="sxs-lookup"><span data-stu-id="68ea4-187">The agent then verifies that the certificate can be trusted (by checking that it was not revoked, and performing other certificate checks), and if these pass, the Endpoint Agent then copies the information from the server certificate and creates its own server certificate -- known as an interception certificate -- using that information.</span></span> <span data-ttu-id="68ea4-188">The interception certificate is signed on-the-fly by the endpoint agent with a root certificate, which is installed in the Windows trusted certificate store.</span><span class="sxs-lookup"><span data-stu-id="68ea4-188">The interception certificate is signed on-the-fly by the endpoint agent with a root certificate, which is installed in the Windows trusted certificate store.</span></span> <span data-ttu-id="68ea4-189">This self-signed root certificate is marked non-exportable and is ACL’d to administrators.</span><span class="sxs-lookup"><span data-stu-id="68ea4-189">This self-signed root certificate is marked non-exportable and is ACL’d to administrators.</span></span> <span data-ttu-id="68ea4-190">It is intended to never leave the machine on which it was created.</span><span class="sxs-lookup"><span data-stu-id="68ea4-190">It is intended to never leave the machine on which it was created.</span></span> <span data-ttu-id="68ea4-191">When the end-user’s client application receives the interception certificate, it will trust it because it can successfully validate the certificate chain all the way to the root certificate.</span><span class="sxs-lookup"><span data-stu-id="68ea4-191">When the end-user’s client application receives the interception certificate, it will trust it because it can successfully validate the certificate chain all the way to the root certificate.</span></span> <span data-ttu-id="68ea4-192">This process is mostly transparent from an end-user’s point of view with a few caveats as described below.</span><span class="sxs-lookup"><span data-stu-id="68ea4-192">This process is mostly transparent from an end-user’s point of view with a few caveats as described below.</span></span>

<span data-ttu-id="68ea4-193">By enabling deep inspection, the Cloud App Discovery Endpoint Agent can decrypt and inspect TLS encrypted communications, allowing the service to reduce noise and provide insights about the usage of the encrypted cloud apps.</span><span class="sxs-lookup"><span data-stu-id="68ea4-193">By enabling deep inspection, the Cloud App Discovery Endpoint Agent can decrypt and inspect TLS encrypted communications, allowing the service to reduce noise and provide insights about the usage of the encrypted cloud apps.</span></span>

#### <a name="a-word-of-caution"></a><span data-ttu-id="68ea4-194">A word of caution</span><span class="sxs-lookup"><span data-stu-id="68ea4-194">A word of caution</span></span>
<span data-ttu-id="68ea4-195">Before turning on deep inspection, it is strongly suggested that you communicate your intentions to your legal and HR departments and obtain their consent.</span><span class="sxs-lookup"><span data-stu-id="68ea4-195">Before turning on deep inspection, it is strongly suggested that you communicate your intentions to your legal and HR departments and obtain their consent.</span></span> <span data-ttu-id="68ea4-196">Inspecting end user’s private encrypted communications can be a sensitive subject, for obvious reasons.</span><span class="sxs-lookup"><span data-stu-id="68ea4-196">Inspecting end user’s private encrypted communications can be a sensitive subject, for obvious reasons.</span></span> <span data-ttu-id="68ea4-197">Before a production roll-out of deep inspection, make certain that your corporate security and acceptable use policies have been updated to indicate that encrypted communication will be inspected.</span><span class="sxs-lookup"><span data-stu-id="68ea4-197">Before a production roll-out of deep inspection, make certain that your corporate security and acceptable use policies have been updated to indicate that encrypted communication will be inspected.</span></span> <span data-ttu-id="68ea4-198">User notification and exemption of sites deemed sensitive (e.g. banking and medical sites) may also be necessary if you configure Cloud App Discovery to monitor them.</span><span class="sxs-lookup"><span data-stu-id="68ea4-198">User notification and exemption of sites deemed sensitive (e.g. banking and medical sites) may also be necessary if you configure Cloud App Discovery to monitor them.</span></span> <span data-ttu-id="68ea4-199">As mentioned above, administrators can use the Cloud App Discovery portal to choose whether to notify users of the data collection by the agent, and whether to require user consent before the agent starts collecting user data.</span><span class="sxs-lookup"><span data-stu-id="68ea4-199">As mentioned above, administrators can use the Cloud App Discovery portal to choose whether to notify users of the data collection by the agent, and whether to require user consent before the agent starts collecting user data.</span></span>

### <a name="known-issues-and-drawbacks"></a><span data-ttu-id="68ea4-200">Known issues and drawbacks</span><span class="sxs-lookup"><span data-stu-id="68ea4-200">Known issues and drawbacks</span></span>
<span data-ttu-id="68ea4-201">There are a few cases where TLS interception may impact the end user experience:</span><span class="sxs-lookup"><span data-stu-id="68ea4-201">There are a few cases where TLS interception may impact the end user experience:</span></span>

* <span data-ttu-id="68ea4-202">Extended Validation (EV) certificates render the address bar of the web browser green to act as a visual clue that you are visiting a trusted web site.</span><span class="sxs-lookup"><span data-stu-id="68ea4-202">Extended Validation (EV) certificates render the address bar of the web browser green to act as a visual clue that you are visiting a trusted web site.</span></span> <span data-ttu-id="68ea4-203">TLS inspection cannot duplicate EV in the certificate it issues to the client, so web sites that use EV certificates will work normally but the address bar will not display green.</span><span class="sxs-lookup"><span data-stu-id="68ea4-203">TLS inspection cannot duplicate EV in the certificate it issues to the client, so web sites that use EV certificates will work normally but the address bar will not display green.</span></span>  
* <span data-ttu-id="68ea4-204">Public key pinning (also known as certificate pinning) are designed to help protect users from man-in-the-middle attacks and rogue certificate authorities.</span><span class="sxs-lookup"><span data-stu-id="68ea4-204">Public key pinning (also known as certificate pinning) are designed to help protect users from man-in-the-middle attacks and rogue certificate authorities.</span></span> <span data-ttu-id="68ea4-205">When the root certificate for a pinned site does not match one of the known good CA's, the browser rejects the connection with an error.</span><span class="sxs-lookup"><span data-stu-id="68ea4-205">When the root certificate for a pinned site does not match one of the known good CA's, the browser rejects the connection with an error.</span></span> <span data-ttu-id="68ea4-206">Since TLS interception is, in fact, a man-in-the-middle, these connections will fail.</span><span class="sxs-lookup"><span data-stu-id="68ea4-206">Since TLS interception is, in fact, a man-in-the-middle, these connections will fail.</span></span>
* <span data-ttu-id="68ea4-207">If users click the lock icon in the browser address bar browser to inspect the site information, they will not see a chain ending in the certificate authority used to sign the website certificate, but instead a certificate chain ending with the Windows trusted certificate store.</span><span class="sxs-lookup"><span data-stu-id="68ea4-207">If users click the lock icon in the browser address bar browser to inspect the site information, they will not see a chain ending in the certificate authority used to sign the website certificate, but instead a certificate chain ending with the Windows trusted certificate store.</span></span>

<span data-ttu-id="68ea4-208">To reduce the occurrences of these issues, we keep track of cloud services and client applications known to use extended validation or public key pinning and instruct the Endpoint Agent to avoid intercepting impacted connections.</span><span class="sxs-lookup"><span data-stu-id="68ea4-208">To reduce the occurrences of these issues, we keep track of cloud services and client applications known to use extended validation or public key pinning and instruct the Endpoint Agent to avoid intercepting impacted connections.</span></span> <span data-ttu-id="68ea4-209">Even in these cases, however, you will still receive reports of the use of these cloud apps and the volume of data being transferred, but since they are not deep inspected, no details about how the apps were used will be available.</span><span class="sxs-lookup"><span data-stu-id="68ea4-209">Even in these cases, however, you will still receive reports of the use of these cloud apps and the volume of data being transferred, but since they are not deep inspected, no details about how the apps were used will be available.</span></span>

## <a name="sending-data-to-cloud-app-discovery"></a><span data-ttu-id="68ea4-210">Sending data to Cloud App Discovery</span><span class="sxs-lookup"><span data-stu-id="68ea4-210">Sending data to Cloud App Discovery</span></span>
<span data-ttu-id="68ea4-211">Once metadata has been collected by the agent, it is cached on the machine for up to one minute or until the cached data reaches a size of 5MB.</span><span class="sxs-lookup"><span data-stu-id="68ea4-211">Once metadata has been collected by the agent, it is cached on the machine for up to one minute or until the cached data reaches a size of 5MB.</span></span> <span data-ttu-id="68ea4-212">It is then compressed and sent over a secure connection to the Cloud App Discovery service.</span><span class="sxs-lookup"><span data-stu-id="68ea4-212">It is then compressed and sent over a secure connection to the Cloud App Discovery service.</span></span>

<span data-ttu-id="68ea4-213">If the agent is unable to communicate with the Cloud App Discovery service for any reason, the collected metadata is stored in a local file cache that can only be accessed by privileged users on the machine (such as the Administrators group).</span><span class="sxs-lookup"><span data-stu-id="68ea4-213">If the agent is unable to communicate with the Cloud App Discovery service for any reason, the collected metadata is stored in a local file cache that can only be accessed by privileged users on the machine (such as the Administrators group).</span></span>  
<span data-ttu-id="68ea4-214">The agent automatically attempts to resend the cached metadata until it has successfully been received by the Cloud App Discovery service.</span><span class="sxs-lookup"><span data-stu-id="68ea4-214">The agent automatically attempts to resend the cached metadata until it has successfully been received by the Cloud App Discovery service.</span></span>

## <a name="receiving-the-data-at-the-service-end"></a><span data-ttu-id="68ea4-215">Receiving the data at the service end</span><span class="sxs-lookup"><span data-stu-id="68ea4-215">Receiving the data at the service end</span></span>
<span data-ttu-id="68ea4-216">The agents authenticate to the Cloud App Discovery service using the machine specific client authentication certificate referenced above and forwards data over an encrypted channel.</span><span class="sxs-lookup"><span data-stu-id="68ea4-216">The agents authenticate to the Cloud App Discovery service using the machine specific client authentication certificate referenced above and forwards data over an encrypted channel.</span></span>  
<span data-ttu-id="68ea4-217">The Cloud App Discovery service’s analytics pipeline processes metadata for each customer separately by logically partitioning it through all stages of the analytics pipeline.</span><span class="sxs-lookup"><span data-stu-id="68ea4-217">The Cloud App Discovery service’s analytics pipeline processes metadata for each customer separately by logically partitioning it through all stages of the analytics pipeline.</span></span>
<span data-ttu-id="68ea4-218">The analyzed metadata drives the various reports in the portal.</span><span class="sxs-lookup"><span data-stu-id="68ea4-218">The analyzed metadata drives the various reports in the portal.</span></span>

<span data-ttu-id="68ea4-219">The unprocessed metadata and the analyzed metadata are stored for up to 180 days.</span><span class="sxs-lookup"><span data-stu-id="68ea4-219">The unprocessed metadata and the analyzed metadata are stored for up to 180 days.</span></span> <span data-ttu-id="68ea4-220">In addition, customers can choose to capture the analyzed metadata in an Azure blob storage account of their choosing.</span><span class="sxs-lookup"><span data-stu-id="68ea4-220">In addition, customers can choose to capture the analyzed metadata in an Azure blob storage account of their choosing.</span></span>
<span data-ttu-id="68ea4-221">This is useful for offline analysis of metadata as well as longer retention of the data.</span><span class="sxs-lookup"><span data-stu-id="68ea4-221">This is useful for offline analysis of metadata as well as longer retention of the data.</span></span>

## <a name="accessing-the-data-using-the-azure-portal"></a><span data-ttu-id="68ea4-222">Accessing the data using the Azure portal</span><span class="sxs-lookup"><span data-stu-id="68ea4-222">Accessing the data using the Azure portal</span></span>
<span data-ttu-id="68ea4-223">In an effort to keep the metadata collected secure, by default only global administrators of the tenant have access to the Cloud App Discovery feature in the Azure portal.</span><span class="sxs-lookup"><span data-stu-id="68ea4-223">In an effort to keep the metadata collected secure, by default only global administrators of the tenant have access to the Cloud App Discovery feature in the Azure portal.</span></span>  
<span data-ttu-id="68ea4-224">However, administrators can choose to delegate this access to other users or groups.</span><span class="sxs-lookup"><span data-stu-id="68ea4-224">However, administrators can choose to delegate this access to other users or groups.</span></span>

> [!NOTE]
> <span data-ttu-id="68ea4-225">For more details, see [Getting Started With Cloud App Discovery](http://social.technet.microsoft.com/wiki/contents/articles/30962.getting-started-with-cloud-app-discovery.aspx)</span><span class="sxs-lookup"><span data-stu-id="68ea4-225">For more details, see [Getting Started With Cloud App Discovery](http://social.technet.microsoft.com/wiki/contents/articles/30962.getting-started-with-cloud-app-discovery.aspx)</span></span>
> 
> 


<span data-ttu-id="68ea4-226">Any user accessing the data in the portal, must be licensed with an Azure AD Premium license.</span><span class="sxs-lookup"><span data-stu-id="68ea4-226">Any user accessing the data in the portal, must be licensed with an Azure AD Premium license.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="68ea4-227">Additional Resources</span><span class="sxs-lookup"><span data-stu-id="68ea4-227">Additional Resources</span></span>
* [<span data-ttu-id="68ea4-228">How can I discover unsanctioned cloud apps that are used within my organization</span><span class="sxs-lookup"><span data-stu-id="68ea4-228">How can I discover unsanctioned cloud apps that are used within my organization</span></span>](active-directory-cloudappdiscovery-whatis.md)
* [<span data-ttu-id="68ea4-229">Article Index for Application Management in Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="68ea4-229">Article Index for Application Management in Azure Active Directory</span></span>](active-directory-apps-index.md)


