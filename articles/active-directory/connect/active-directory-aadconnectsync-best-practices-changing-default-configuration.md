---
title: 'Azure AD Connect sync: Changing the default configuration | Microsoft Docs'
description: Provides best practices for changing the default configuration of Azure AD Connect sync.
services: active-directory
documentationcenter: ''
author: billmath
manager: mtillman
editor: ''
ms.assetid: 7638a031-1635-4942-94c3-fce8f09eed5e
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/29/2017
ms.component: hybrid
ms.author: billmath
ms.openlocfilehash: 0668eb33fe33b062c941ec4f2bff47c5ed77fb51
ms.sourcegitcommit: d1451406a010fd3aa854dc8e5b77dc5537d8050e
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 09/13/2018
ms.locfileid: "44809175"
---
# <a name="azure-ad-connect-sync-best-practices-for-changing-the-default-configuration"></a><span data-ttu-id="4feb0-103">Azure AD Connect sync: Best practices for changing the default configuration</span><span class="sxs-lookup"><span data-stu-id="4feb0-103">Azure AD Connect sync: Best practices for changing the default configuration</span></span>
<span data-ttu-id="4feb0-104">The purpose of this topic is to describe supported and unsupported changes to Azure AD Connect sync.</span><span class="sxs-lookup"><span data-stu-id="4feb0-104">The purpose of this topic is to describe supported and unsupported changes to Azure AD Connect sync.</span></span>

<span data-ttu-id="4feb0-105">The configuration created by Azure AD Connect works “as is” for most environments that synchronize on-premises Active Directory with Azure AD.</span><span class="sxs-lookup"><span data-stu-id="4feb0-105">The configuration created by Azure AD Connect works “as is” for most environments that synchronize on-premises Active Directory with Azure AD.</span></span> <span data-ttu-id="4feb0-106">However, in some cases, it is necessary to apply some changes to a configuration to satisfy a particular need or requirement.</span><span class="sxs-lookup"><span data-stu-id="4feb0-106">However, in some cases, it is necessary to apply some changes to a configuration to satisfy a particular need or requirement.</span></span>

## <a name="changes-to-the-service-account"></a><span data-ttu-id="4feb0-107">Changes to the service account</span><span class="sxs-lookup"><span data-stu-id="4feb0-107">Changes to the service account</span></span>
<span data-ttu-id="4feb0-108">Azure AD Connect sync is running under a service account created by the installation wizard.</span><span class="sxs-lookup"><span data-stu-id="4feb0-108">Azure AD Connect sync is running under a service account created by the installation wizard.</span></span> <span data-ttu-id="4feb0-109">This service account holds the encryption keys to the database used by sync. It is created with a 127 characters long password and the password is set to not expire.</span><span class="sxs-lookup"><span data-stu-id="4feb0-109">This service account holds the encryption keys to the database used by sync. It is created with a 127 characters long password and the password is set to not expire.</span></span>

* <span data-ttu-id="4feb0-110">It is **unsupported** to change or reset the password of the service account.</span><span class="sxs-lookup"><span data-stu-id="4feb0-110">It is **unsupported** to change or reset the password of the service account.</span></span> <span data-ttu-id="4feb0-111">Doing so destroys the encryption keys and the service is not able to access the database and is not able to start.</span><span class="sxs-lookup"><span data-stu-id="4feb0-111">Doing so destroys the encryption keys and the service is not able to access the database and is not able to start.</span></span>

## <a name="changes-to-the-scheduler"></a><span data-ttu-id="4feb0-112">Changes to the scheduler</span><span class="sxs-lookup"><span data-stu-id="4feb0-112">Changes to the scheduler</span></span>
<span data-ttu-id="4feb0-113">Starting with the releases from build 1.1 (February 2016) you can configure the [scheduler](active-directory-aadconnectsync-feature-scheduler.md) to have a different sync cycle than the default 30 minutes.</span><span class="sxs-lookup"><span data-stu-id="4feb0-113">Starting with the releases from build 1.1 (February 2016) you can configure the [scheduler](active-directory-aadconnectsync-feature-scheduler.md) to have a different sync cycle than the default 30 minutes.</span></span>

## <a name="changes-to-synchronization-rules"></a><span data-ttu-id="4feb0-114">Changes to Synchronization Rules</span><span class="sxs-lookup"><span data-stu-id="4feb0-114">Changes to Synchronization Rules</span></span>
<span data-ttu-id="4feb0-115">The installation wizard provides a configuration that is supposed to work for the most common scenarios.</span><span class="sxs-lookup"><span data-stu-id="4feb0-115">The installation wizard provides a configuration that is supposed to work for the most common scenarios.</span></span> <span data-ttu-id="4feb0-116">In case you need to make changes to the configuration, then you must follow these rules to still have a supported configuration.</span><span class="sxs-lookup"><span data-stu-id="4feb0-116">In case you need to make changes to the configuration, then you must follow these rules to still have a supported configuration.</span></span>

> [!WARNING]
> <span data-ttu-id="4feb0-117">If you make changes to the default sync rules then these changes will be overwritten the next time Azure AD Connect is updated, resulting in unexpected and likely unwanted synchronization results.</span><span class="sxs-lookup"><span data-stu-id="4feb0-117">If you make changes to the default sync rules then these changes will be overwritten the next time Azure AD Connect is updated, resulting in unexpected and likely unwanted synchronization results.</span></span>

* <span data-ttu-id="4feb0-118">You can [change attribute flows](active-directory-aadconnectsync-change-the-configuration.md#other-common-attribute-flow-changes) if the default direct attribute flows are not suitable for your organization.</span><span class="sxs-lookup"><span data-stu-id="4feb0-118">You can [change attribute flows](active-directory-aadconnectsync-change-the-configuration.md#other-common-attribute-flow-changes) if the default direct attribute flows are not suitable for your organization.</span></span>
* <span data-ttu-id="4feb0-119">If you want to [not flow an attribute](active-directory-aadconnectsync-change-the-configuration.md#do-not-flow-an-attribute) and remove any existing attribute values in Azure AD, then you need to create a rule for this scenario.</span><span class="sxs-lookup"><span data-stu-id="4feb0-119">If you want to [not flow an attribute](active-directory-aadconnectsync-change-the-configuration.md#do-not-flow-an-attribute) and remove any existing attribute values in Azure AD, then you need to create a rule for this scenario.</span></span>
* <span data-ttu-id="4feb0-120">[Disable an unwanted Sync Rule](#disable-an-unwanted-sync-rule) rather than deleting it.</span><span class="sxs-lookup"><span data-stu-id="4feb0-120">[Disable an unwanted Sync Rule](#disable-an-unwanted-sync-rule) rather than deleting it.</span></span> <span data-ttu-id="4feb0-121">A deleted rule is recreated during an upgrade.</span><span class="sxs-lookup"><span data-stu-id="4feb0-121">A deleted rule is recreated during an upgrade.</span></span>
* <span data-ttu-id="4feb0-122">To [change an out-of-box rule](#change-an-out-of-box-rule), you should make a copy of the original rule and disable the out-of-box rule.</span><span class="sxs-lookup"><span data-stu-id="4feb0-122">To [change an out-of-box rule](#change-an-out-of-box-rule), you should make a copy of the original rule and disable the out-of-box rule.</span></span> <span data-ttu-id="4feb0-123">The Sync Rule Editor prompts and helps you.</span><span class="sxs-lookup"><span data-stu-id="4feb0-123">The Sync Rule Editor prompts and helps you.</span></span>
* <span data-ttu-id="4feb0-124">Export your custom synchronization rules using the Synchronization Rules Editor.</span><span class="sxs-lookup"><span data-stu-id="4feb0-124">Export your custom synchronization rules using the Synchronization Rules Editor.</span></span> <span data-ttu-id="4feb0-125">The editor provides you with a PowerShell script you can use to easily recreate them in a disaster recovery scenario.</span><span class="sxs-lookup"><span data-stu-id="4feb0-125">The editor provides you with a PowerShell script you can use to easily recreate them in a disaster recovery scenario.</span></span>

> [!WARNING]
> <span data-ttu-id="4feb0-126">The out-of-box sync rules have a thumbprint.</span><span class="sxs-lookup"><span data-stu-id="4feb0-126">The out-of-box sync rules have a thumbprint.</span></span> <span data-ttu-id="4feb0-127">If you make a change to these rules, the thumbprint is no longer matching.</span><span class="sxs-lookup"><span data-stu-id="4feb0-127">If you make a change to these rules, the thumbprint is no longer matching.</span></span> <span data-ttu-id="4feb0-128">You might have problems in the future when you try to apply a new release of Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="4feb0-128">You might have problems in the future when you try to apply a new release of Azure AD Connect.</span></span> <span data-ttu-id="4feb0-129">Only make changes the way it is described in this article.</span><span class="sxs-lookup"><span data-stu-id="4feb0-129">Only make changes the way it is described in this article.</span></span>

### <a name="disable-an-unwanted-sync-rule"></a><span data-ttu-id="4feb0-130">Disable an unwanted Sync Rule</span><span class="sxs-lookup"><span data-stu-id="4feb0-130">Disable an unwanted Sync Rule</span></span>
<span data-ttu-id="4feb0-131">Do not delete an out-of-box sync rule.</span><span class="sxs-lookup"><span data-stu-id="4feb0-131">Do not delete an out-of-box sync rule.</span></span> <span data-ttu-id="4feb0-132">It is recreated during next upgrade.</span><span class="sxs-lookup"><span data-stu-id="4feb0-132">It is recreated during next upgrade.</span></span>

<span data-ttu-id="4feb0-133">In some cases, the installation wizard has produced a configuration that is not working for your topology.</span><span class="sxs-lookup"><span data-stu-id="4feb0-133">In some cases, the installation wizard has produced a configuration that is not working for your topology.</span></span> <span data-ttu-id="4feb0-134">For example, if you have an account-resource forest topology but you have extended the schema in the account forest with the Exchange schema, then rules for Exchange are created for the account forest and the resource forest.</span><span class="sxs-lookup"><span data-stu-id="4feb0-134">For example, if you have an account-resource forest topology but you have extended the schema in the account forest with the Exchange schema, then rules for Exchange are created for the account forest and the resource forest.</span></span> <span data-ttu-id="4feb0-135">In this case, you need to disable the Sync Rule for Exchange.</span><span class="sxs-lookup"><span data-stu-id="4feb0-135">In this case, you need to disable the Sync Rule for Exchange.</span></span>

![Disabled sync rule](./media/active-directory-aadconnectsync-best-practices-changing-default-configuration/exchangedisabledrule.png)

<span data-ttu-id="4feb0-137">In the picture above, the installation wizard has found an old Exchange 2003 schema in the account forest.</span><span class="sxs-lookup"><span data-stu-id="4feb0-137">In the picture above, the installation wizard has found an old Exchange 2003 schema in the account forest.</span></span> <span data-ttu-id="4feb0-138">This schema extension was added before the resource forest was introduced in Fabrikam's environment.</span><span class="sxs-lookup"><span data-stu-id="4feb0-138">This schema extension was added before the resource forest was introduced in Fabrikam's environment.</span></span> <span data-ttu-id="4feb0-139">To ensure no attributes from the old Exchange implementation are synchronized, the sync rule should be disabled as shown.</span><span class="sxs-lookup"><span data-stu-id="4feb0-139">To ensure no attributes from the old Exchange implementation are synchronized, the sync rule should be disabled as shown.</span></span>

### <a name="change-an-out-of-box-rule"></a><span data-ttu-id="4feb0-140">Change an out-of-box rule</span><span class="sxs-lookup"><span data-stu-id="4feb0-140">Change an out-of-box rule</span></span>
<span data-ttu-id="4feb0-141">The only time you should change an out-of-box rule is when you need to change the join rule.</span><span class="sxs-lookup"><span data-stu-id="4feb0-141">The only time you should change an out-of-box rule is when you need to change the join rule.</span></span> <span data-ttu-id="4feb0-142">If you need to change an attribute flow, then you should create a sync rule with higher precedence than the out-of-box rules.</span><span class="sxs-lookup"><span data-stu-id="4feb0-142">If you need to change an attribute flow, then you should create a sync rule with higher precedence than the out-of-box rules.</span></span> <span data-ttu-id="4feb0-143">The only rule you practically need to clone is the rule **In from AD - User Join**.</span><span class="sxs-lookup"><span data-stu-id="4feb0-143">The only rule you practically need to clone is the rule **In from AD - User Join**.</span></span> <span data-ttu-id="4feb0-144">You can override all other rules with a higher precedence rule.</span><span class="sxs-lookup"><span data-stu-id="4feb0-144">You can override all other rules with a higher precedence rule.</span></span>

<span data-ttu-id="4feb0-145">If you need to make changes to an out-of-box rule, then you should make a copy of the out-of-box rule and disable the original rule.</span><span class="sxs-lookup"><span data-stu-id="4feb0-145">If you need to make changes to an out-of-box rule, then you should make a copy of the out-of-box rule and disable the original rule.</span></span> <span data-ttu-id="4feb0-146">Then make the changes to the cloned rule.</span><span class="sxs-lookup"><span data-stu-id="4feb0-146">Then make the changes to the cloned rule.</span></span> <span data-ttu-id="4feb0-147">The Sync Rule Editor is helping you with those steps.</span><span class="sxs-lookup"><span data-stu-id="4feb0-147">The Sync Rule Editor is helping you with those steps.</span></span> <span data-ttu-id="4feb0-148">When you open an out-of-box rule, you are presented with this dialog box:</span><span class="sxs-lookup"><span data-stu-id="4feb0-148">When you open an out-of-box rule, you are presented with this dialog box:</span></span>  
![Warning out of box rule](./media/active-directory-aadconnectsync-best-practices-changing-default-configuration/warningoutofboxrule.png)

<span data-ttu-id="4feb0-150">Select **Yes** to create a copy of the rule.</span><span class="sxs-lookup"><span data-stu-id="4feb0-150">Select **Yes** to create a copy of the rule.</span></span> <span data-ttu-id="4feb0-151">The cloned rule is then opened.</span><span class="sxs-lookup"><span data-stu-id="4feb0-151">The cloned rule is then opened.</span></span>  
<span data-ttu-id="4feb0-152">![Cloned rule](./media/active-directory-aadconnectsync-best-practices-changing-default-configuration/clonedrule.png)</span><span class="sxs-lookup"><span data-stu-id="4feb0-152">![Cloned rule](./media/active-directory-aadconnectsync-best-practices-changing-default-configuration/clonedrule.png)</span></span>

<span data-ttu-id="4feb0-153">On this cloned rule, make any necessary changes to scope, join, and transformations.</span><span class="sxs-lookup"><span data-stu-id="4feb0-153">On this cloned rule, make any necessary changes to scope, join, and transformations.</span></span>

## <a name="next-steps"></a><span data-ttu-id="4feb0-154">Next steps</span><span class="sxs-lookup"><span data-stu-id="4feb0-154">Next steps</span></span>
<span data-ttu-id="4feb0-155">**Overview topics**</span><span class="sxs-lookup"><span data-stu-id="4feb0-155">**Overview topics**</span></span>

* [<span data-ttu-id="4feb0-156">Azure AD Connect sync: Understand and customize synchronization</span><span class="sxs-lookup"><span data-stu-id="4feb0-156">Azure AD Connect sync: Understand and customize synchronization</span></span>](active-directory-aadconnectsync-whatis.md)
* [<span data-ttu-id="4feb0-157">Integrating your on-premises identities with Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="4feb0-157">Integrating your on-premises identities with Azure Active Directory</span></span>](active-directory-aadconnect.md)
