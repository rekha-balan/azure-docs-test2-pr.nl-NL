---
title: 'Azure AD Connect sync: Understanding the default configuration | Microsoft Docs'
description: This article describes the default configuration in Azure AD Connect sync.
services: active-directory
documentationcenter: ''
author: andkjell
manager: femila
editor: ''
ms.assetid: ed876f22-6892-4b9d-acbe-6a2d112f1cd1
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 02/08/2017
ms.author: billmath
ms.openlocfilehash: da7a092bacf66e5acb52562898cef12c0a5e28ab
ms.sourcegitcommit: 5b9d839c0c0a94b293fdafe1d6e5429506c07e05
ms.translationtype: HT
ms.contentlocale: nl-NL
ms.lasthandoff: 08/02/2018
ms.locfileid: "44551776"
---
# <a name="azure-ad-connect-sync-understanding-the-default-configuration"></a><span data-ttu-id="c8bea-103">Azure AD Connect sync: Understanding the default configuration</span><span class="sxs-lookup"><span data-stu-id="c8bea-103">Azure AD Connect sync: Understanding the default configuration</span></span>
<span data-ttu-id="c8bea-104">This article explains the out-of-box configuration rules.</span><span class="sxs-lookup"><span data-stu-id="c8bea-104">This article explains the out-of-box configuration rules.</span></span> <span data-ttu-id="c8bea-105">It documents the rules and how these rules impact the configuration.</span><span class="sxs-lookup"><span data-stu-id="c8bea-105">It documents the rules and how these rules impact the configuration.</span></span> <span data-ttu-id="c8bea-106">It also walks you through the default configuration of Azure AD Connect sync. The goal is that the reader understands how the configuration model, named declarative provisioning, is working in a real-world example.</span><span class="sxs-lookup"><span data-stu-id="c8bea-106">It also walks you through the default configuration of Azure AD Connect sync. The goal is that the reader understands how the configuration model, named declarative provisioning, is working in a real-world example.</span></span> <span data-ttu-id="c8bea-107">This article assumes that you have already installed and configure Azure AD Connect sync using the installation wizard.</span><span class="sxs-lookup"><span data-stu-id="c8bea-107">This article assumes that you have already installed and configure Azure AD Connect sync using the installation wizard.</span></span>

<span data-ttu-id="c8bea-108">To understand the details of the configuration model, read [Understanding Declarative Provisioning](active-directory-aadconnectsync-understanding-declarative-provisioning.md).</span><span class="sxs-lookup"><span data-stu-id="c8bea-108">To understand the details of the configuration model, read [Understanding Declarative Provisioning](active-directory-aadconnectsync-understanding-declarative-provisioning.md).</span></span>

## <a name="out-of-box-rules-from-on-premises-to-azure-ad"></a><span data-ttu-id="c8bea-109">Out-of-box rules from on-premises to Azure AD</span><span class="sxs-lookup"><span data-stu-id="c8bea-109">Out-of-box rules from on-premises to Azure AD</span></span>
<span data-ttu-id="c8bea-110">The following expressions can be found in the out-of-box configuration.</span><span class="sxs-lookup"><span data-stu-id="c8bea-110">The following expressions can be found in the out-of-box configuration.</span></span>

### <a name="user-out-of-box-rules"></a><span data-ttu-id="c8bea-111">User out-of-box rules</span><span class="sxs-lookup"><span data-stu-id="c8bea-111">User out-of-box rules</span></span>
<span data-ttu-id="c8bea-112">These rules also apply to the iNetOrgPerson object type.</span><span class="sxs-lookup"><span data-stu-id="c8bea-112">These rules also apply to the iNetOrgPerson object type.</span></span>

<span data-ttu-id="c8bea-113">A user object must satisfy the following to be synchronized:</span><span class="sxs-lookup"><span data-stu-id="c8bea-113">A user object must satisfy the following to be synchronized:</span></span>

* <span data-ttu-id="c8bea-114">Must have a sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="c8bea-114">Must have a sourceAnchor.</span></span>
* <span data-ttu-id="c8bea-115">After the object has been created in Azure AD, then sourceAnchor cannot change.</span><span class="sxs-lookup"><span data-stu-id="c8bea-115">After the object has been created in Azure AD, then sourceAnchor cannot change.</span></span> <span data-ttu-id="c8bea-116">If the value is changed on-premises, the object stops synchronizing until the sourceAnchor is changed back to its previous value.</span><span class="sxs-lookup"><span data-stu-id="c8bea-116">If the value is changed on-premises, the object stops synchronizing until the sourceAnchor is changed back to its previous value.</span></span>
* <span data-ttu-id="c8bea-117">Must have the accountEnabled (userAccountControl) attribute populated.</span><span class="sxs-lookup"><span data-stu-id="c8bea-117">Must have the accountEnabled (userAccountControl) attribute populated.</span></span> <span data-ttu-id="c8bea-118">With an on-premises Active Directory, this attribute is always present and populated.</span><span class="sxs-lookup"><span data-stu-id="c8bea-118">With an on-premises Active Directory, this attribute is always present and populated.</span></span>

<span data-ttu-id="c8bea-119">The following user objects are **not** synchronized to Azure AD:</span><span class="sxs-lookup"><span data-stu-id="c8bea-119">The following user objects are **not** synchronized to Azure AD:</span></span>

* <span data-ttu-id="c8bea-120">`IsPresent([isCriticalSystemObject])`.</span><span class="sxs-lookup"><span data-stu-id="c8bea-120">`IsPresent([isCriticalSystemObject])`.</span></span> <span data-ttu-id="c8bea-121">Ensure many out-of-box objects in Active Directory, such as the built-in administrator account, are not synchronized.</span><span class="sxs-lookup"><span data-stu-id="c8bea-121">Ensure many out-of-box objects in Active Directory, such as the built-in administrator account, are not synchronized.</span></span>
* <span data-ttu-id="c8bea-122">`IsPresent([sAMAccountName]) = False`.</span><span class="sxs-lookup"><span data-stu-id="c8bea-122">`IsPresent([sAMAccountName]) = False`.</span></span> <span data-ttu-id="c8bea-123">Ensure user objects with no sAMAccountName attribute are not synchronized.</span><span class="sxs-lookup"><span data-stu-id="c8bea-123">Ensure user objects with no sAMAccountName attribute are not synchronized.</span></span> <span data-ttu-id="c8bea-124">This case would only practically happen in a domain upgraded from NT4.</span><span class="sxs-lookup"><span data-stu-id="c8bea-124">This case would only practically happen in a domain upgraded from NT4.</span></span>
* <span data-ttu-id="c8bea-125">`Left([sAMAccountName], 4) = "AAD_"`, `Left([sAMAccountName], 5) = "MSOL_"`.</span><span class="sxs-lookup"><span data-stu-id="c8bea-125">`Left([sAMAccountName], 4) = "AAD_"`, `Left([sAMAccountName], 5) = "MSOL_"`.</span></span> <span data-ttu-id="c8bea-126">Do not synchronize the service account used by Azure AD Connect sync and its earlier versions.</span><span class="sxs-lookup"><span data-stu-id="c8bea-126">Do not synchronize the service account used by Azure AD Connect sync and its earlier versions.</span></span>
* <span data-ttu-id="c8bea-127">Do not synchronize Exchange accounts that would not work in Exchange Online.</span><span class="sxs-lookup"><span data-stu-id="c8bea-127">Do not synchronize Exchange accounts that would not work in Exchange Online.</span></span>
  * `[sAMAccountName] = "SUPPORT_388945a0"`
  * `Left([mailNickname], 14) = "SystemMailbox{"`
  * `(Left([mailNickname], 4) = "CAS_" && (InStr([mailNickname], "}") > 0))`
  * `(Left([sAMAccountName], 4) = "CAS_" && (InStr([sAMAccountName], "}")> 0))`
* <span data-ttu-id="c8bea-128">Do not synchronize objects that would not work in Exchange Online.</span><span class="sxs-lookup"><span data-stu-id="c8bea-128">Do not synchronize objects that would not work in Exchange Online.</span></span>
  `CBool(IIF(IsPresent([msExchRecipientTypeDetails]),BitAnd([msExchRecipientTypeDetails],&H21C07000) > 0,NULL))`  
  <span data-ttu-id="c8bea-129">This bitmask (&H21C07000) would filter out the following objects:</span><span class="sxs-lookup"><span data-stu-id="c8bea-129">This bitmask (&H21C07000) would filter out the following objects:</span></span>
  * <span data-ttu-id="c8bea-130">Mail-enabled Public Folder</span><span class="sxs-lookup"><span data-stu-id="c8bea-130">Mail-enabled Public Folder</span></span>
  * <span data-ttu-id="c8bea-131">System Attendant Mailbox</span><span class="sxs-lookup"><span data-stu-id="c8bea-131">System Attendant Mailbox</span></span>
  * <span data-ttu-id="c8bea-132">Mailbox Database Mailbox (System Mailbox)</span><span class="sxs-lookup"><span data-stu-id="c8bea-132">Mailbox Database Mailbox (System Mailbox)</span></span>
  * <span data-ttu-id="c8bea-133">Universal Security Group (wouldn't apply for a user, but is present for legacy reasons)</span><span class="sxs-lookup"><span data-stu-id="c8bea-133">Universal Security Group (wouldn't apply for a user, but is present for legacy reasons)</span></span>
  * <span data-ttu-id="c8bea-134">Non-Universal Group (wouldn't apply for a user, but is present for legacy reasons)</span><span class="sxs-lookup"><span data-stu-id="c8bea-134">Non-Universal Group (wouldn't apply for a user, but is present for legacy reasons)</span></span>
  * <span data-ttu-id="c8bea-135">Mailbox Plan</span><span class="sxs-lookup"><span data-stu-id="c8bea-135">Mailbox Plan</span></span>
  * <span data-ttu-id="c8bea-136">Discovery Mailbox</span><span class="sxs-lookup"><span data-stu-id="c8bea-136">Discovery Mailbox</span></span>
* <span data-ttu-id="c8bea-137">`CBool(InStr(DNComponent(CRef([dn]),1),"\\0ACNF:")>0)`.</span><span class="sxs-lookup"><span data-stu-id="c8bea-137">`CBool(InStr(DNComponent(CRef([dn]),1),"\\0ACNF:")>0)`.</span></span> <span data-ttu-id="c8bea-138">Do not synchronize any replication victim objects.</span><span class="sxs-lookup"><span data-stu-id="c8bea-138">Do not synchronize any replication victim objects.</span></span>

<span data-ttu-id="c8bea-139">The following attribute rules apply:</span><span class="sxs-lookup"><span data-stu-id="c8bea-139">The following attribute rules apply:</span></span>

* <span data-ttu-id="c8bea-140">`sourceAnchor <- IIF([msExchRecipientTypeDetails]=2,NULL,..)`.</span><span class="sxs-lookup"><span data-stu-id="c8bea-140">`sourceAnchor <- IIF([msExchRecipientTypeDetails]=2,NULL,..)`.</span></span> <span data-ttu-id="c8bea-141">The sourceAnchor attribute is not contributed from a linked mailbox.</span><span class="sxs-lookup"><span data-stu-id="c8bea-141">The sourceAnchor attribute is not contributed from a linked mailbox.</span></span> <span data-ttu-id="c8bea-142">It is assumed that if a linked mailbox has been found, the actual account is joined later.</span><span class="sxs-lookup"><span data-stu-id="c8bea-142">It is assumed that if a linked mailbox has been found, the actual account is joined later.</span></span>
* <span data-ttu-id="c8bea-143">Exchange related attributes are only synchronized if the attribute **mailNickName** has a value.</span><span class="sxs-lookup"><span data-stu-id="c8bea-143">Exchange related attributes are only synchronized if the attribute **mailNickName** has a value.</span></span>
* <span data-ttu-id="c8bea-144">When there are multiple forests, then attributes are consumed in the following order:</span><span class="sxs-lookup"><span data-stu-id="c8bea-144">When there are multiple forests, then attributes are consumed in the following order:</span></span>
  1. <span data-ttu-id="c8bea-145">Attributes related to sign-in (for example userPrincipalName) are contributed from the forest with an enabled account.</span><span class="sxs-lookup"><span data-stu-id="c8bea-145">Attributes related to sign-in (for example userPrincipalName) are contributed from the forest with an enabled account.</span></span>
  2. <span data-ttu-id="c8bea-146">Attributes that can be found in an Exchange GAL (Global Address List) are contributed from the forest with an Exchange Mailbox.</span><span class="sxs-lookup"><span data-stu-id="c8bea-146">Attributes that can be found in an Exchange GAL (Global Address List) are contributed from the forest with an Exchange Mailbox.</span></span>
  3. <span data-ttu-id="c8bea-147">If no mailbox can be found, then these attributes can come from any forest.</span><span class="sxs-lookup"><span data-stu-id="c8bea-147">If no mailbox can be found, then these attributes can come from any forest.</span></span>
  4. <span data-ttu-id="c8bea-148">Exchange related attributes (technical attributes not visible in the GAL) are contributed from the forest where `mailNickname ISNOTNULL`.</span><span class="sxs-lookup"><span data-stu-id="c8bea-148">Exchange related attributes (technical attributes not visible in the GAL) are contributed from the forest where `mailNickname ISNOTNULL`.</span></span>
  5. <span data-ttu-id="c8bea-149">If there are multiple forests that would satisfy one of these rules, then the creation order (date/time) of the Connectors (forests) is used to determine which forest contributes the attributes.</span><span class="sxs-lookup"><span data-stu-id="c8bea-149">If there are multiple forests that would satisfy one of these rules, then the creation order (date/time) of the Connectors (forests) is used to determine which forest contributes the attributes.</span></span>

### <a name="contact-out-of-box-rules"></a><span data-ttu-id="c8bea-150">Contact out-of-box rules</span><span class="sxs-lookup"><span data-stu-id="c8bea-150">Contact out-of-box rules</span></span>
<span data-ttu-id="c8bea-151">A contact object must satisfy the following to be synchronized:</span><span class="sxs-lookup"><span data-stu-id="c8bea-151">A contact object must satisfy the following to be synchronized:</span></span>

* <span data-ttu-id="c8bea-152">The contact must be mail-enabled.</span><span class="sxs-lookup"><span data-stu-id="c8bea-152">The contact must be mail-enabled.</span></span> <span data-ttu-id="c8bea-153">It is verified with the following rules:</span><span class="sxs-lookup"><span data-stu-id="c8bea-153">It is verified with the following rules:</span></span>
  * <span data-ttu-id="c8bea-154">`IsPresent([proxyAddresses]) = True)`.</span><span class="sxs-lookup"><span data-stu-id="c8bea-154">`IsPresent([proxyAddresses]) = True)`.</span></span> <span data-ttu-id="c8bea-155">The proxyAddresses attribute must be populated.</span><span class="sxs-lookup"><span data-stu-id="c8bea-155">The proxyAddresses attribute must be populated.</span></span>
  * <span data-ttu-id="c8bea-156">A primary email address can be found in either the proxyAddresses attribute or the mail attribute.</span><span class="sxs-lookup"><span data-stu-id="c8bea-156">A primary email address can be found in either the proxyAddresses attribute or the mail attribute.</span></span> <span data-ttu-id="c8bea-157">The presence of an @ is used to verify that the content is an email address.</span><span class="sxs-lookup"><span data-stu-id="c8bea-157">The presence of an @ is used to verify that the content is an email address.</span></span> <span data-ttu-id="c8bea-158">One of these two rules must be evaluated to True.</span><span class="sxs-lookup"><span data-stu-id="c8bea-158">One of these two rules must be evaluated to True.</span></span>
    * <span data-ttu-id="c8bea-159">`(Contains([proxyAddresses], "SMTP:") > 0) && (InStr(Item([proxyAddresses], Contains([proxyAddresses], "SMTP:")), "@") > 0))`.</span><span class="sxs-lookup"><span data-stu-id="c8bea-159">`(Contains([proxyAddresses], "SMTP:") > 0) && (InStr(Item([proxyAddresses], Contains([proxyAddresses], "SMTP:")), "@") > 0))`.</span></span> <span data-ttu-id="c8bea-160">Is there an entry with "SMTP:" and if there is, can an @ be found in the string?</span><span class="sxs-lookup"><span data-stu-id="c8bea-160">Is there an entry with "SMTP:" and if there is, can an @ be found in the string?</span></span>
    * <span data-ttu-id="c8bea-161">`(IsPresent([mail]) = True && (InStr([mail], "@") > 0)`.</span><span class="sxs-lookup"><span data-stu-id="c8bea-161">`(IsPresent([mail]) = True && (InStr([mail], "@") > 0)`.</span></span> <span data-ttu-id="c8bea-162">Is the mail attribute populated and if it is, can an @ be found in the string?</span><span class="sxs-lookup"><span data-stu-id="c8bea-162">Is the mail attribute populated and if it is, can an @ be found in the string?</span></span>

<span data-ttu-id="c8bea-163">The following contact objects are **not** synchronized to Azure AD:</span><span class="sxs-lookup"><span data-stu-id="c8bea-163">The following contact objects are **not** synchronized to Azure AD:</span></span>

* <span data-ttu-id="c8bea-164">`IsPresent([isCriticalSystemObject])`.</span><span class="sxs-lookup"><span data-stu-id="c8bea-164">`IsPresent([isCriticalSystemObject])`.</span></span> <span data-ttu-id="c8bea-165">Ensure no contact objects marked as critical are synchronized.</span><span class="sxs-lookup"><span data-stu-id="c8bea-165">Ensure no contact objects marked as critical are synchronized.</span></span> <span data-ttu-id="c8bea-166">Shouldn't be any with a default configuration.</span><span class="sxs-lookup"><span data-stu-id="c8bea-166">Shouldn't be any with a default configuration.</span></span>
* <span data-ttu-id="c8bea-167">`((InStr([displayName], "(MSOL)") > 0) && (CBool([msExchHideFromAddressLists])))`.</span><span class="sxs-lookup"><span data-stu-id="c8bea-167">`((InStr([displayName], "(MSOL)") > 0) && (CBool([msExchHideFromAddressLists])))`.</span></span>
* <span data-ttu-id="c8bea-168">`(Left([mailNickname], 4) = "CAS_" && (InStr([mailNickname], "}") > 0))`.</span><span class="sxs-lookup"><span data-stu-id="c8bea-168">`(Left([mailNickname], 4) = "CAS_" && (InStr([mailNickname], "}") > 0))`.</span></span> <span data-ttu-id="c8bea-169">These objects wouldn't work in Exchange Online.</span><span class="sxs-lookup"><span data-stu-id="c8bea-169">These objects wouldn't work in Exchange Online.</span></span>
* <span data-ttu-id="c8bea-170">`CBool(InStr(DNComponent(CRef([dn]),1),"\\0ACNF:")>0)`.</span><span class="sxs-lookup"><span data-stu-id="c8bea-170">`CBool(InStr(DNComponent(CRef([dn]),1),"\\0ACNF:")>0)`.</span></span> <span data-ttu-id="c8bea-171">Do not synchronize any replication victim objects.</span><span class="sxs-lookup"><span data-stu-id="c8bea-171">Do not synchronize any replication victim objects.</span></span>

### <a name="group-out-of-box-rules"></a><span data-ttu-id="c8bea-172">Group out-of-box rules</span><span class="sxs-lookup"><span data-stu-id="c8bea-172">Group out-of-box rules</span></span>
<span data-ttu-id="c8bea-173">A group object must satisfy the following to be synchronized:</span><span class="sxs-lookup"><span data-stu-id="c8bea-173">A group object must satisfy the following to be synchronized:</span></span>

* <span data-ttu-id="c8bea-174">Must have less than 50,000 members.</span><span class="sxs-lookup"><span data-stu-id="c8bea-174">Must have less than 50,000 members.</span></span> <span data-ttu-id="c8bea-175">This count is the number of members in the on-premises group.</span><span class="sxs-lookup"><span data-stu-id="c8bea-175">This count is the number of members in the on-premises group.</span></span>
  * <span data-ttu-id="c8bea-176">If it has more members before synchronization starts the first time, the group is not synchronized.</span><span class="sxs-lookup"><span data-stu-id="c8bea-176">If it has more members before synchronization starts the first time, the group is not synchronized.</span></span>
  * <span data-ttu-id="c8bea-177">If the number of members grow from when it was initially created, then when it reaches 50,000 members it stops synchronizing until the membership count is lower than 50,000 again.</span><span class="sxs-lookup"><span data-stu-id="c8bea-177">If the number of members grow from when it was initially created, then when it reaches 50,000 members it stops synchronizing until the membership count is lower than 50,000 again.</span></span>
  * <span data-ttu-id="c8bea-178">Note: The 50,000 membership count is also enforced by Azure AD.</span><span class="sxs-lookup"><span data-stu-id="c8bea-178">Note: The 50,000 membership count is also enforced by Azure AD.</span></span> <span data-ttu-id="c8bea-179">You are not able to synchronize groups with more members even if you modify or remove this rule.</span><span class="sxs-lookup"><span data-stu-id="c8bea-179">You are not able to synchronize groups with more members even if you modify or remove this rule.</span></span>
* <span data-ttu-id="c8bea-180">If the group is a **Distribution Group**, then it must also be mail enabled.</span><span class="sxs-lookup"><span data-stu-id="c8bea-180">If the group is a **Distribution Group**, then it must also be mail enabled.</span></span> <span data-ttu-id="c8bea-181">See [Contact out-of-box rules](#contact-out-of-box-rules) for this rule is enforced.</span><span class="sxs-lookup"><span data-stu-id="c8bea-181">See [Contact out-of-box rules](#contact-out-of-box-rules) for this rule is enforced.</span></span>

<span data-ttu-id="c8bea-182">The following group objects are **not** synchronized to Azure AD:</span><span class="sxs-lookup"><span data-stu-id="c8bea-182">The following group objects are **not** synchronized to Azure AD:</span></span>

* <span data-ttu-id="c8bea-183">`IsPresent([isCriticalSystemObject])`.</span><span class="sxs-lookup"><span data-stu-id="c8bea-183">`IsPresent([isCriticalSystemObject])`.</span></span> <span data-ttu-id="c8bea-184">Ensure many out-of-box objects in Active Directory, such as the built-in administrators group, are not synchronized.</span><span class="sxs-lookup"><span data-stu-id="c8bea-184">Ensure many out-of-box objects in Active Directory, such as the built-in administrators group, are not synchronized.</span></span>
* <span data-ttu-id="c8bea-185">`[sAMAccountName] = "MSOL_AD_Sync_RichCoexistence"`.</span><span class="sxs-lookup"><span data-stu-id="c8bea-185">`[sAMAccountName] = "MSOL_AD_Sync_RichCoexistence"`.</span></span> <span data-ttu-id="c8bea-186">Legacy group used by DirSync.</span><span class="sxs-lookup"><span data-stu-id="c8bea-186">Legacy group used by DirSync.</span></span>
* <span data-ttu-id="c8bea-187">`BitAnd([msExchRecipientTypeDetails],&amp;H40000000)`.</span><span class="sxs-lookup"><span data-stu-id="c8bea-187">`BitAnd([msExchRecipientTypeDetails],&amp;H40000000)`.</span></span> <span data-ttu-id="c8bea-188">Role Group.</span><span class="sxs-lookup"><span data-stu-id="c8bea-188">Role Group.</span></span>
* <span data-ttu-id="c8bea-189">`CBool(InStr(DNComponent(CRef([dn]),1),"\\0ACNF:")>0)`.</span><span class="sxs-lookup"><span data-stu-id="c8bea-189">`CBool(InStr(DNComponent(CRef([dn]),1),"\\0ACNF:")>0)`.</span></span> <span data-ttu-id="c8bea-190">Do not synchronize any replication victim objects.</span><span class="sxs-lookup"><span data-stu-id="c8bea-190">Do not synchronize any replication victim objects.</span></span>

### <a name="foreignsecurityprincipal-out-of-box-rules"></a><span data-ttu-id="c8bea-191">ForeignSecurityPrincipal out-of-box rules</span><span class="sxs-lookup"><span data-stu-id="c8bea-191">ForeignSecurityPrincipal out-of-box rules</span></span>
<span data-ttu-id="c8bea-192">FSPs are joined to "any" (\*) object in the metaverse.</span><span class="sxs-lookup"><span data-stu-id="c8bea-192">FSPs are joined to "any" (\*) object in the metaverse.</span></span> <span data-ttu-id="c8bea-193">In reality, this join only happens for users and security groups.</span><span class="sxs-lookup"><span data-stu-id="c8bea-193">In reality, this join only happens for users and security groups.</span></span> <span data-ttu-id="c8bea-194">This configuration ensures that cross-forest memberships are resolved and represented correctly in Azure AD.</span><span class="sxs-lookup"><span data-stu-id="c8bea-194">This configuration ensures that cross-forest memberships are resolved and represented correctly in Azure AD.</span></span>

### <a name="computer-out-of-box-rules"></a><span data-ttu-id="c8bea-195">Computer out-of-box rules</span><span class="sxs-lookup"><span data-stu-id="c8bea-195">Computer out-of-box rules</span></span>
<span data-ttu-id="c8bea-196">A computer object must satisfy the following to be synchronized:</span><span class="sxs-lookup"><span data-stu-id="c8bea-196">A computer object must satisfy the following to be synchronized:</span></span>

* <span data-ttu-id="c8bea-197">`userCertificate ISNOTNULL`.</span><span class="sxs-lookup"><span data-stu-id="c8bea-197">`userCertificate ISNOTNULL`.</span></span> <span data-ttu-id="c8bea-198">Only Windows 10 computers populate this attribute.</span><span class="sxs-lookup"><span data-stu-id="c8bea-198">Only Windows 10 computers populate this attribute.</span></span> <span data-ttu-id="c8bea-199">All computer objects with a value in this attribute are synchronized.</span><span class="sxs-lookup"><span data-stu-id="c8bea-199">All computer objects with a value in this attribute are synchronized.</span></span>

## <a name="understanding-the-out-of-box-rules-scenario"></a><span data-ttu-id="c8bea-200">Understanding the out-of-box rules scenario</span><span class="sxs-lookup"><span data-stu-id="c8bea-200">Understanding the out-of-box rules scenario</span></span>
<span data-ttu-id="c8bea-201">In this example, we are using a deployment with one account forest (A), one resource forest (R), and one Azure AD directory.</span><span class="sxs-lookup"><span data-stu-id="c8bea-201">In this example, we are using a deployment with one account forest (A), one resource forest (R), and one Azure AD directory.</span></span>

![Picture with scenario description](https://docstestmedia1.blob.core.windows.net/azure-media/articles/active-directory/connect/media/active-directory-aadconnectsync-understanding-default-configuration/scenario.png)

<span data-ttu-id="c8bea-203">In this configuration, it is assumed there is an enabled account in the account forest and a disabled account in the resource forest with a linked mailbox.</span><span class="sxs-lookup"><span data-stu-id="c8bea-203">In this configuration, it is assumed there is an enabled account in the account forest and a disabled account in the resource forest with a linked mailbox.</span></span>

<span data-ttu-id="c8bea-204">Our goal with the default configuration is:</span><span class="sxs-lookup"><span data-stu-id="c8bea-204">Our goal with the default configuration is:</span></span>

* <span data-ttu-id="c8bea-205">Attributes related to sign-in are synchronized from the forest with the enabled account.</span><span class="sxs-lookup"><span data-stu-id="c8bea-205">Attributes related to sign-in are synchronized from the forest with the enabled account.</span></span>
* <span data-ttu-id="c8bea-206">Attributes that can be found in the GAL (Global Address List) are synchronized from the forest with the mailbox.</span><span class="sxs-lookup"><span data-stu-id="c8bea-206">Attributes that can be found in the GAL (Global Address List) are synchronized from the forest with the mailbox.</span></span> <span data-ttu-id="c8bea-207">If no mailbox can be found, any other forest is used.</span><span class="sxs-lookup"><span data-stu-id="c8bea-207">If no mailbox can be found, any other forest is used.</span></span>
* <span data-ttu-id="c8bea-208">If a linked mailbox is found, the linked enabled account must be found for the object to be exported to Azure AD.</span><span class="sxs-lookup"><span data-stu-id="c8bea-208">If a linked mailbox is found, the linked enabled account must be found for the object to be exported to Azure AD.</span></span>

### <a name="synchronization-rule-editor"></a><span data-ttu-id="c8bea-209">Synchronization Rule Editor</span><span class="sxs-lookup"><span data-stu-id="c8bea-209">Synchronization Rule Editor</span></span>
<span data-ttu-id="c8bea-210">The configuration can be viewed and changed with the tool Synchronization Rules Editor (SRE) and a shortcut to it can be found in the start menu.</span><span class="sxs-lookup"><span data-stu-id="c8bea-210">The configuration can be viewed and changed with the tool Synchronization Rules Editor (SRE) and a shortcut to it can be found in the start menu.</span></span>

![Synchronization Rules Editor icon](https://docstestmedia1.blob.core.windows.net/azure-media/articles/active-directory/connect/media/active-directory-aadconnectsync-understanding-default-configuration/sre.png)

<span data-ttu-id="c8bea-212">The SRE is a resource kit tool and it is installed with Azure AD Connect sync. To be able to start it, you must be a member of the ADSyncAdmins group.</span><span class="sxs-lookup"><span data-stu-id="c8bea-212">The SRE is a resource kit tool and it is installed with Azure AD Connect sync. To be able to start it, you must be a member of the ADSyncAdmins group.</span></span> <span data-ttu-id="c8bea-213">When it starts, you see something like this:</span><span class="sxs-lookup"><span data-stu-id="c8bea-213">When it starts, you see something like this:</span></span>

![Synchronization Rules Inbound](https://docstestmedia1.blob.core.windows.net/azure-media/articles/active-directory/connect/media/active-directory-aadconnectsync-understanding-default-configuration/syncrulesinbound.png)

<span data-ttu-id="c8bea-215">In this pane, you see all Synchronization Rules created for your configuration.</span><span class="sxs-lookup"><span data-stu-id="c8bea-215">In this pane, you see all Synchronization Rules created for your configuration.</span></span> <span data-ttu-id="c8bea-216">Each line in the table is one Synchronization Rule.</span><span class="sxs-lookup"><span data-stu-id="c8bea-216">Each line in the table is one Synchronization Rule.</span></span> <span data-ttu-id="c8bea-217">To the left under Rule Types, the two different types are listed: Inbound and Outbound.</span><span class="sxs-lookup"><span data-stu-id="c8bea-217">To the left under Rule Types, the two different types are listed: Inbound and Outbound.</span></span> <span data-ttu-id="c8bea-218">Inbound and Outbound is from the view of the metaverse.</span><span class="sxs-lookup"><span data-stu-id="c8bea-218">Inbound and Outbound is from the view of the metaverse.</span></span> <span data-ttu-id="c8bea-219">You are mainly going to focus on the inbound rules in this overview.</span><span class="sxs-lookup"><span data-stu-id="c8bea-219">You are mainly going to focus on the inbound rules in this overview.</span></span> <span data-ttu-id="c8bea-220">The actual list of Synchronization Rules depends on the detected schema in AD.</span><span class="sxs-lookup"><span data-stu-id="c8bea-220">The actual list of Synchronization Rules depends on the detected schema in AD.</span></span> <span data-ttu-id="c8bea-221">In the picture above, the account forest (fabrikamonline.com) does not have any services, such as Exchange and Lync, and no Synchronization Rules have been created for these services.</span><span class="sxs-lookup"><span data-stu-id="c8bea-221">In the picture above, the account forest (fabrikamonline.com) does not have any services, such as Exchange and Lync, and no Synchronization Rules have been created for these services.</span></span> <span data-ttu-id="c8bea-222">However, in the resource forest (res.fabrikamonline.com) you find Synchronization Rules for these services.</span><span class="sxs-lookup"><span data-stu-id="c8bea-222">However, in the resource forest (res.fabrikamonline.com) you find Synchronization Rules for these services.</span></span> <span data-ttu-id="c8bea-223">The content of the rules is different depending on the version detected.</span><span class="sxs-lookup"><span data-stu-id="c8bea-223">The content of the rules is different depending on the version detected.</span></span> <span data-ttu-id="c8bea-224">For example, in a deployment with Exchange 2013 there are more attribute flows configured than in Exchange 2010/2007.</span><span class="sxs-lookup"><span data-stu-id="c8bea-224">For example, in a deployment with Exchange 2013 there are more attribute flows configured than in Exchange 2010/2007.</span></span>

### <a name="synchronization-rule"></a><span data-ttu-id="c8bea-225">Synchronization Rule</span><span class="sxs-lookup"><span data-stu-id="c8bea-225">Synchronization Rule</span></span>
<span data-ttu-id="c8bea-226">A Synchronization Rule is a configuration object with a set of attributes flowing when a condition is satisfied.</span><span class="sxs-lookup"><span data-stu-id="c8bea-226">A Synchronization Rule is a configuration object with a set of attributes flowing when a condition is satisfied.</span></span> <span data-ttu-id="c8bea-227">It is also used to describe how an object in a connector space is related to an object in the metaverse, known as **join** or **match**.</span><span class="sxs-lookup"><span data-stu-id="c8bea-227">It is also used to describe how an object in a connector space is related to an object in the metaverse, known as **join** or **match**.</span></span> <span data-ttu-id="c8bea-228">The Synchronization Rules have a precedence value indicating how they relate to each other.</span><span class="sxs-lookup"><span data-stu-id="c8bea-228">The Synchronization Rules have a precedence value indicating how they relate to each other.</span></span> <span data-ttu-id="c8bea-229">A Synchronization Rule with a lower numeric value has a higher precedence and in an attribute flow conflict, higher precedence wins the conflict resolution.</span><span class="sxs-lookup"><span data-stu-id="c8bea-229">A Synchronization Rule with a lower numeric value has a higher precedence and in an attribute flow conflict, higher precedence wins the conflict resolution.</span></span>

<span data-ttu-id="c8bea-230">As an example, look at the Synchronization Rule **In from AD – User AccountEnabled**.</span><span class="sxs-lookup"><span data-stu-id="c8bea-230">As an example, look at the Synchronization Rule **In from AD – User AccountEnabled**.</span></span> <span data-ttu-id="c8bea-231">Mark this line in the SRE and select **Edit**.</span><span class="sxs-lookup"><span data-stu-id="c8bea-231">Mark this line in the SRE and select **Edit**.</span></span>

<span data-ttu-id="c8bea-232">Since this rule is an out-of-box rule, you receive a warning when you open the rule.</span><span class="sxs-lookup"><span data-stu-id="c8bea-232">Since this rule is an out-of-box rule, you receive a warning when you open the rule.</span></span> <span data-ttu-id="c8bea-233">You should not make any [changes to out-of-box rules](active-directory-aadconnectsync-best-practices-changing-default-configuration.md), so you are asked what your intentions are.</span><span class="sxs-lookup"><span data-stu-id="c8bea-233">You should not make any [changes to out-of-box rules](active-directory-aadconnectsync-best-practices-changing-default-configuration.md), so you are asked what your intentions are.</span></span> <span data-ttu-id="c8bea-234">In this case, you only want to view the rule.</span><span class="sxs-lookup"><span data-stu-id="c8bea-234">In this case, you only want to view the rule.</span></span> <span data-ttu-id="c8bea-235">Select **No**.</span><span class="sxs-lookup"><span data-stu-id="c8bea-235">Select **No**.</span></span>

![Synchronization Rules warning](https://docstestmedia1.blob.core.windows.net/azure-media/articles/active-directory/connect/media/active-directory-aadconnectsync-understanding-default-configuration/warningeditrule.png)

<span data-ttu-id="c8bea-237">A Synchronization Rule has four configuration sections: Description, Scoping filter, Join rules, and Transformations.</span><span class="sxs-lookup"><span data-stu-id="c8bea-237">A Synchronization Rule has four configuration sections: Description, Scoping filter, Join rules, and Transformations.</span></span>

#### <a name="description"></a><span data-ttu-id="c8bea-238">Description</span><span class="sxs-lookup"><span data-stu-id="c8bea-238">Description</span></span>
<span data-ttu-id="c8bea-239">The first section provides basic information such as a name and description.</span><span class="sxs-lookup"><span data-stu-id="c8bea-239">The first section provides basic information such as a name and description.</span></span>

![<span data-ttu-id="c8bea-240">Description tab in Sync rule editor</span><span class="sxs-lookup"><span data-stu-id="c8bea-240">Description tab in Sync rule editor</span></span> ](https://docstestmedia1.blob.core.windows.net/azure-media/articles/active-directory/connect/media/active-directory-aadconnectsync-understanding-default-configuration/syncruledescription.png)

<span data-ttu-id="c8bea-241">You also find information about which connected system this rule is related to, which object type in the connected system it applies to, and the metaverse object type.</span><span class="sxs-lookup"><span data-stu-id="c8bea-241">You also find information about which connected system this rule is related to, which object type in the connected system it applies to, and the metaverse object type.</span></span> <span data-ttu-id="c8bea-242">The metaverse object type is always person regardless when the source object type is a user, iNetOrgPerson, or contact.</span><span class="sxs-lookup"><span data-stu-id="c8bea-242">The metaverse object type is always person regardless when the source object type is a user, iNetOrgPerson, or contact.</span></span> <span data-ttu-id="c8bea-243">The metaverse object type should never change so it is created as a generic type.</span><span class="sxs-lookup"><span data-stu-id="c8bea-243">The metaverse object type should never change so it is created as a generic type.</span></span> <span data-ttu-id="c8bea-244">The Link Type can be set to Join, StickyJoin, or Provision.</span><span class="sxs-lookup"><span data-stu-id="c8bea-244">The Link Type can be set to Join, StickyJoin, or Provision.</span></span> <span data-ttu-id="c8bea-245">This setting works together with the Join Rules section and is covered later.</span><span class="sxs-lookup"><span data-stu-id="c8bea-245">This setting works together with the Join Rules section and is covered later.</span></span>

<span data-ttu-id="c8bea-246">You can also see that this sync rule is used for password sync. If a user is in scope for this sync rule, the password is synchronized from on-premises to cloud (assuming you have enabled the password sync feature).</span><span class="sxs-lookup"><span data-stu-id="c8bea-246">You can also see that this sync rule is used for password sync. If a user is in scope for this sync rule, the password is synchronized from on-premises to cloud (assuming you have enabled the password sync feature).</span></span>

#### <a name="scoping-filter"></a><span data-ttu-id="c8bea-247">Scoping filter</span><span class="sxs-lookup"><span data-stu-id="c8bea-247">Scoping filter</span></span>
<span data-ttu-id="c8bea-248">The Scoping Filter section is used to configure when a Synchronization Rule should apply.</span><span class="sxs-lookup"><span data-stu-id="c8bea-248">The Scoping Filter section is used to configure when a Synchronization Rule should apply.</span></span> <span data-ttu-id="c8bea-249">Since the name of the Synchronization Rule you are looking at indicates it should only be applied for enabled users, the scope is configured so the AD attribute **userAccountControl** must not have the bit 2 set.</span><span class="sxs-lookup"><span data-stu-id="c8bea-249">Since the name of the Synchronization Rule you are looking at indicates it should only be applied for enabled users, the scope is configured so the AD attribute **userAccountControl** must not have the bit 2 set.</span></span> <span data-ttu-id="c8bea-250">When the sync engine finds a user in AD, it applies this sync rule when **userAccountControl** is set to the decimal value 512 (enabled normal user).</span><span class="sxs-lookup"><span data-stu-id="c8bea-250">When the sync engine finds a user in AD, it applies this sync rule when **userAccountControl** is set to the decimal value 512 (enabled normal user).</span></span> <span data-ttu-id="c8bea-251">It does not apply the rule when the user has **userAccountControl** set to 514 (disabled normal user).</span><span class="sxs-lookup"><span data-stu-id="c8bea-251">It does not apply the rule when the user has **userAccountControl** set to 514 (disabled normal user).</span></span>

![<span data-ttu-id="c8bea-252">Scoping tab in Sync rule editor</span><span class="sxs-lookup"><span data-stu-id="c8bea-252">Scoping tab in Sync rule editor</span></span> ](https://docstestmedia1.blob.core.windows.net/azure-media/articles/active-directory/connect/media/active-directory-aadconnectsync-understanding-default-configuration/syncrulescopingfilter.png)

<span data-ttu-id="c8bea-253">The scoping filter has Groups and Clauses that can be nested.</span><span class="sxs-lookup"><span data-stu-id="c8bea-253">The scoping filter has Groups and Clauses that can be nested.</span></span> <span data-ttu-id="c8bea-254">All clauses inside a group must be satisfied for a Synchronization Rule to apply.</span><span class="sxs-lookup"><span data-stu-id="c8bea-254">All clauses inside a group must be satisfied for a Synchronization Rule to apply.</span></span> <span data-ttu-id="c8bea-255">When multiple groups are defined, then at least one group must be satisfied for the rule to apply.</span><span class="sxs-lookup"><span data-stu-id="c8bea-255">When multiple groups are defined, then at least one group must be satisfied for the rule to apply.</span></span> <span data-ttu-id="c8bea-256">That is, a logical OR is evaluated between groups and a logical AND is evaluated inside a group.</span><span class="sxs-lookup"><span data-stu-id="c8bea-256">That is, a logical OR is evaluated between groups and a logical AND is evaluated inside a group.</span></span> <span data-ttu-id="c8bea-257">An example of this configuration can be found in the outbound Synchronization Rule **Out to AAD – Group Join**.</span><span class="sxs-lookup"><span data-stu-id="c8bea-257">An example of this configuration can be found in the outbound Synchronization Rule **Out to AAD – Group Join**.</span></span> <span data-ttu-id="c8bea-258">There are several synchronization filter groups, for example one for security groups (`securityEnabled EQUAL True`) and one for distribution groups (`securityEnabled EQUAL False`).</span><span class="sxs-lookup"><span data-stu-id="c8bea-258">There are several synchronization filter groups, for example one for security groups (`securityEnabled EQUAL True`) and one for distribution groups (`securityEnabled EQUAL False`).</span></span>

![<span data-ttu-id="c8bea-259">Scoping tab in Sync rule editor</span><span class="sxs-lookup"><span data-stu-id="c8bea-259">Scoping tab in Sync rule editor</span></span> ](https://docstestmedia1.blob.core.windows.net/azure-media/articles/active-directory/connect/media/active-directory-aadconnectsync-understanding-default-configuration/syncrulescopingfilterout.png)

<span data-ttu-id="c8bea-260">This rule is used to define which Groups should be provisioned to Azure AD.</span><span class="sxs-lookup"><span data-stu-id="c8bea-260">This rule is used to define which Groups should be provisioned to Azure AD.</span></span> <span data-ttu-id="c8bea-261">Distribution Groups must be mail enabled to be synchronized with Azure AD, but for security groups an email is not required.</span><span class="sxs-lookup"><span data-stu-id="c8bea-261">Distribution Groups must be mail enabled to be synchronized with Azure AD, but for security groups an email is not required.</span></span>

#### <a name="join-rules"></a><span data-ttu-id="c8bea-262">Join rules</span><span class="sxs-lookup"><span data-stu-id="c8bea-262">Join rules</span></span>
<span data-ttu-id="c8bea-263">The third section is used to configure how objects in the connector space relate to objects in the metaverse.</span><span class="sxs-lookup"><span data-stu-id="c8bea-263">The third section is used to configure how objects in the connector space relate to objects in the metaverse.</span></span> <span data-ttu-id="c8bea-264">The rule you have looked at earlier does not have any configuration for Join Rules, so instead you are going to look at **In from AD – User Join**.</span><span class="sxs-lookup"><span data-stu-id="c8bea-264">The rule you have looked at earlier does not have any configuration for Join Rules, so instead you are going to look at **In from AD – User Join**.</span></span>

![<span data-ttu-id="c8bea-265">Join rules tab in Sync rule editor</span><span class="sxs-lookup"><span data-stu-id="c8bea-265">Join rules tab in Sync rule editor</span></span> ](https://docstestmedia1.blob.core.windows.net/azure-media/articles/active-directory/connect/media/active-directory-aadconnectsync-understanding-default-configuration/syncrulejoinrules.png)

<span data-ttu-id="c8bea-266">The content of the join rule depends on the matching option selected in the installation wizard.</span><span class="sxs-lookup"><span data-stu-id="c8bea-266">The content of the join rule depends on the matching option selected in the installation wizard.</span></span> <span data-ttu-id="c8bea-267">For an inbound rule, the evaluation starts with an object in the source connector space and each group in the join rules is evaluated in sequence.</span><span class="sxs-lookup"><span data-stu-id="c8bea-267">For an inbound rule, the evaluation starts with an object in the source connector space and each group in the join rules is evaluated in sequence.</span></span> <span data-ttu-id="c8bea-268">If a source object is evaluated to match exactly one object in the metaverse using one of the join rules, the objects are joined.</span><span class="sxs-lookup"><span data-stu-id="c8bea-268">If a source object is evaluated to match exactly one object in the metaverse using one of the join rules, the objects are joined.</span></span> <span data-ttu-id="c8bea-269">If all rules have been evaluated and there is no match, then the Link Type on the description page is used.</span><span class="sxs-lookup"><span data-stu-id="c8bea-269">If all rules have been evaluated and there is no match, then the Link Type on the description page is used.</span></span> <span data-ttu-id="c8bea-270">If this configuration is set to **Provision**, then a new object is created in the target, the metaverse.</span><span class="sxs-lookup"><span data-stu-id="c8bea-270">If this configuration is set to **Provision**, then a new object is created in the target, the metaverse.</span></span> <span data-ttu-id="c8bea-271">To provision a new object to the metaverse is also known as to **project** an object to the metaverse.</span><span class="sxs-lookup"><span data-stu-id="c8bea-271">To provision a new object to the metaverse is also known as to **project** an object to the metaverse.</span></span>

<span data-ttu-id="c8bea-272">The join rules are only evaluated once.</span><span class="sxs-lookup"><span data-stu-id="c8bea-272">The join rules are only evaluated once.</span></span> <span data-ttu-id="c8bea-273">When a connector space object and a metaverse object are joined, they remain joined as long as the scope of the Synchronization Rule is still satisfied.</span><span class="sxs-lookup"><span data-stu-id="c8bea-273">When a connector space object and a metaverse object are joined, they remain joined as long as the scope of the Synchronization Rule is still satisfied.</span></span>

<span data-ttu-id="c8bea-274">When evaluating Synchronization Rules, only one Synchronization Rule with join rules defined must be in scope.</span><span class="sxs-lookup"><span data-stu-id="c8bea-274">When evaluating Synchronization Rules, only one Synchronization Rule with join rules defined must be in scope.</span></span> <span data-ttu-id="c8bea-275">If multiple Synchronization Rules with join rules are found for one object, an error is thrown.</span><span class="sxs-lookup"><span data-stu-id="c8bea-275">If multiple Synchronization Rules with join rules are found for one object, an error is thrown.</span></span> <span data-ttu-id="c8bea-276">For this reason, the best practice is to have only one Synchronization Rule with join defined when multiple Synchronization Rules are in scope for an object.</span><span class="sxs-lookup"><span data-stu-id="c8bea-276">For this reason, the best practice is to have only one Synchronization Rule with join defined when multiple Synchronization Rules are in scope for an object.</span></span> <span data-ttu-id="c8bea-277">In the out-of-box configuration for Azure AD Connect sync, these rules can be found by looking at the name and find those with the word **Join** at the end of the name.</span><span class="sxs-lookup"><span data-stu-id="c8bea-277">In the out-of-box configuration for Azure AD Connect sync, these rules can be found by looking at the name and find those with the word **Join** at the end of the name.</span></span> <span data-ttu-id="c8bea-278">A Synchronization Rule without any join rules defined applies the attribute flows when another Synchronization Rule joined the objects together or provisioned a new object in the target.</span><span class="sxs-lookup"><span data-stu-id="c8bea-278">A Synchronization Rule without any join rules defined applies the attribute flows when another Synchronization Rule joined the objects together or provisioned a new object in the target.</span></span>

<span data-ttu-id="c8bea-279">If you look at the picture above, you can see that the rule is trying to join **objectSID** with **msExchMasterAccountSid** (Exchange) and **msRTCSIP-OriginatorSid** (Lync), which is what we expect in an account-resource forest topology.</span><span class="sxs-lookup"><span data-stu-id="c8bea-279">If you look at the picture above, you can see that the rule is trying to join **objectSID** with **msExchMasterAccountSid** (Exchange) and **msRTCSIP-OriginatorSid** (Lync), which is what we expect in an account-resource forest topology.</span></span> <span data-ttu-id="c8bea-280">You find the same rule on all forests.</span><span class="sxs-lookup"><span data-stu-id="c8bea-280">You find the same rule on all forests.</span></span> <span data-ttu-id="c8bea-281">The assumption is that every forest could be either an account or resource forest.</span><span class="sxs-lookup"><span data-stu-id="c8bea-281">The assumption is that every forest could be either an account or resource forest.</span></span> <span data-ttu-id="c8bea-282">This configuration also works if you have accounts that live in a single forest and do not have to be joined.</span><span class="sxs-lookup"><span data-stu-id="c8bea-282">This configuration also works if you have accounts that live in a single forest and do not have to be joined.</span></span>

#### <a name="transformations"></a><span data-ttu-id="c8bea-283">Transformations</span><span class="sxs-lookup"><span data-stu-id="c8bea-283">Transformations</span></span>
<span data-ttu-id="c8bea-284">The transformation section defines all attribute flows that apply to the target object when the objects are joined and the scope filter is satisfied.</span><span class="sxs-lookup"><span data-stu-id="c8bea-284">The transformation section defines all attribute flows that apply to the target object when the objects are joined and the scope filter is satisfied.</span></span> <span data-ttu-id="c8bea-285">Going back to the **In from AD – User AccountEnabled** Synchronization Rule, you find the following transformations:</span><span class="sxs-lookup"><span data-stu-id="c8bea-285">Going back to the **In from AD – User AccountEnabled** Synchronization Rule, you find the following transformations:</span></span>

![<span data-ttu-id="c8bea-286">Transformations tab in Sync rule editor</span><span class="sxs-lookup"><span data-stu-id="c8bea-286">Transformations tab in Sync rule editor</span></span> ](https://docstestmedia1.blob.core.windows.net/azure-media/articles/active-directory/connect/media/active-directory-aadconnectsync-understanding-default-configuration/syncruletransformations.png)

<span data-ttu-id="c8bea-287">To put this configuration in context, in an Account-Resource forest deployment, it is expected to find an enabled account in the account forest and a disabled account in the resource forest with Exchange and Lync settings.</span><span class="sxs-lookup"><span data-stu-id="c8bea-287">To put this configuration in context, in an Account-Resource forest deployment, it is expected to find an enabled account in the account forest and a disabled account in the resource forest with Exchange and Lync settings.</span></span> <span data-ttu-id="c8bea-288">The Synchronization Rule you are looking at contains the attributes required for sign-in and these attributes should flow from the forest where there is an enabled account.</span><span class="sxs-lookup"><span data-stu-id="c8bea-288">The Synchronization Rule you are looking at contains the attributes required for sign-in and these attributes should flow from the forest where there is an enabled account.</span></span> <span data-ttu-id="c8bea-289">All these attribute flows are put together in one Synchronization Rule.</span><span class="sxs-lookup"><span data-stu-id="c8bea-289">All these attribute flows are put together in one Synchronization Rule.</span></span>

<span data-ttu-id="c8bea-290">A transformation can have different types: Constant, Direct, and Expression.</span><span class="sxs-lookup"><span data-stu-id="c8bea-290">A transformation can have different types: Constant, Direct, and Expression.</span></span>

* <span data-ttu-id="c8bea-291">A constant flow always flows a hardcoded value.</span><span class="sxs-lookup"><span data-stu-id="c8bea-291">A constant flow always flows a hardcoded value.</span></span> <span data-ttu-id="c8bea-292">In the case above, it always sets the value **True** in the metaverse attribute named **accountEnabled**.</span><span class="sxs-lookup"><span data-stu-id="c8bea-292">In the case above, it always sets the value **True** in the metaverse attribute named **accountEnabled**.</span></span>
* <span data-ttu-id="c8bea-293">A direct flow always flows the value of the attribute in the source to the target attribute as-is.</span><span class="sxs-lookup"><span data-stu-id="c8bea-293">A direct flow always flows the value of the attribute in the source to the target attribute as-is.</span></span>
* <span data-ttu-id="c8bea-294">The third flow type is Expression and it allows for more advanced configurations.</span><span class="sxs-lookup"><span data-stu-id="c8bea-294">The third flow type is Expression and it allows for more advanced configurations.</span></span>

<span data-ttu-id="c8bea-295">The expression language is VBA (Visual Basic for Applications), so people with experience of Microsoft Office or VBScript will recognize the format.</span><span class="sxs-lookup"><span data-stu-id="c8bea-295">The expression language is VBA (Visual Basic for Applications), so people with experience of Microsoft Office or VBScript will recognize the format.</span></span> <span data-ttu-id="c8bea-296">Attributes are enclosed in square brackets, [attributeName].</span><span class="sxs-lookup"><span data-stu-id="c8bea-296">Attributes are enclosed in square brackets, [attributeName].</span></span> <span data-ttu-id="c8bea-297">Attribute names and function names are case-sensitive, but the Synchronization Rules Editor evaluates the expressions and provide a warning if the expression is not valid.</span><span class="sxs-lookup"><span data-stu-id="c8bea-297">Attribute names and function names are case-sensitive, but the Synchronization Rules Editor evaluates the expressions and provide a warning if the expression is not valid.</span></span> <span data-ttu-id="c8bea-298">All expressions are expressed on a single line with nested functions.</span><span class="sxs-lookup"><span data-stu-id="c8bea-298">All expressions are expressed on a single line with nested functions.</span></span> <span data-ttu-id="c8bea-299">To show the power of the configuration language, here is the flow for pwdLastSet, but with additional comments inserted:</span><span class="sxs-lookup"><span data-stu-id="c8bea-299">To show the power of the configuration language, here is the flow for pwdLastSet, but with additional comments inserted:</span></span>

```
// If-then-else
IIF(
// (The evaluation for IIF) Is the attribute pwdLastSet present in AD?
IsPresent([pwdLastSet]),
// (The True part of IIF) If it is, then from right to left, convert the AD time format to a .Net datetime, change it to the time format used by Azure AD, and finally convert it to a string.
CStr(FormatDateTime(DateFromNum([pwdLastSet]),"yyyyMMddHHmmss.0Z")),
// (The False part of IIF) Nothing to contribute
NULL
)
```

<span data-ttu-id="c8bea-300">See [Understanding Declarative Provisioning Expressions](active-directory-aadconnectsync-understanding-declarative-provisioning-expressions.md) for more information on the expression language for attribute flows.</span><span class="sxs-lookup"><span data-stu-id="c8bea-300">See [Understanding Declarative Provisioning Expressions](active-directory-aadconnectsync-understanding-declarative-provisioning-expressions.md) for more information on the expression language for attribute flows.</span></span>

### <a name="precedence"></a><span data-ttu-id="c8bea-301">Precedence</span><span class="sxs-lookup"><span data-stu-id="c8bea-301">Precedence</span></span>
<span data-ttu-id="c8bea-302">You have now looked at some individual Synchronization Rules, but the rules work together in the configuration.</span><span class="sxs-lookup"><span data-stu-id="c8bea-302">You have now looked at some individual Synchronization Rules, but the rules work together in the configuration.</span></span> <span data-ttu-id="c8bea-303">In some cases, an attribute value is contributed from multiple synchronization rules to the same target attribute.</span><span class="sxs-lookup"><span data-stu-id="c8bea-303">In some cases, an attribute value is contributed from multiple synchronization rules to the same target attribute.</span></span> <span data-ttu-id="c8bea-304">In this case, attribute precedence is used to determine which attribute wins.</span><span class="sxs-lookup"><span data-stu-id="c8bea-304">In this case, attribute precedence is used to determine which attribute wins.</span></span> <span data-ttu-id="c8bea-305">As an example, look at the attribute sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="c8bea-305">As an example, look at the attribute sourceAnchor.</span></span> <span data-ttu-id="c8bea-306">This attribute is an important attribute to be able to sign in to Azure AD.</span><span class="sxs-lookup"><span data-stu-id="c8bea-306">This attribute is an important attribute to be able to sign in to Azure AD.</span></span> <span data-ttu-id="c8bea-307">You can find an attribute flow for this attribute in two different Synchronization Rules, **In from AD – User AccountEnabled** and **In from AD – User Common**.</span><span class="sxs-lookup"><span data-stu-id="c8bea-307">You can find an attribute flow for this attribute in two different Synchronization Rules, **In from AD – User AccountEnabled** and **In from AD – User Common**.</span></span> <span data-ttu-id="c8bea-308">Due to Synchronization Rule precedence, the sourceAnchor attribute is contributed from the forest with an enabled account first when there are several objects joined to the metaverse object.</span><span class="sxs-lookup"><span data-stu-id="c8bea-308">Due to Synchronization Rule precedence, the sourceAnchor attribute is contributed from the forest with an enabled account first when there are several objects joined to the metaverse object.</span></span> <span data-ttu-id="c8bea-309">If there are no enabled accounts, then the sync engine uses the catch-all Synchronization Rule **In from AD – User Common**.</span><span class="sxs-lookup"><span data-stu-id="c8bea-309">If there are no enabled accounts, then the sync engine uses the catch-all Synchronization Rule **In from AD – User Common**.</span></span> <span data-ttu-id="c8bea-310">This configuration ensures that even for accounts that are disabled, there is still a sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="c8bea-310">This configuration ensures that even for accounts that are disabled, there is still a sourceAnchor.</span></span>

![Synchronization Rules Inbound](https://docstestmedia1.blob.core.windows.net/azure-media/articles/active-directory/connect/media/active-directory-aadconnectsync-understanding-default-configuration/syncrulesinbound.png)

<span data-ttu-id="c8bea-312">The precedence for Synchronization Rules is set in groups by the installation wizard.</span><span class="sxs-lookup"><span data-stu-id="c8bea-312">The precedence for Synchronization Rules is set in groups by the installation wizard.</span></span> <span data-ttu-id="c8bea-313">All rules in a group have the same name, but they are connected to different connected directories.</span><span class="sxs-lookup"><span data-stu-id="c8bea-313">All rules in a group have the same name, but they are connected to different connected directories.</span></span> <span data-ttu-id="c8bea-314">The installation wizard gives the rule **In from AD – User Join** highest precedence and it iterates over all connected AD directories.</span><span class="sxs-lookup"><span data-stu-id="c8bea-314">The installation wizard gives the rule **In from AD – User Join** highest precedence and it iterates over all connected AD directories.</span></span> <span data-ttu-id="c8bea-315">It then continues with the next groups of rules in a predefined order.</span><span class="sxs-lookup"><span data-stu-id="c8bea-315">It then continues with the next groups of rules in a predefined order.</span></span> <span data-ttu-id="c8bea-316">Inside a group, the rules are added in the order the Connectors were added in the wizard.</span><span class="sxs-lookup"><span data-stu-id="c8bea-316">Inside a group, the rules are added in the order the Connectors were added in the wizard.</span></span> <span data-ttu-id="c8bea-317">If another Connector is added through the wizard, the Synchronization Rules are reordered and the new Connector’s rules are inserted last in each group.</span><span class="sxs-lookup"><span data-stu-id="c8bea-317">If another Connector is added through the wizard, the Synchronization Rules are reordered and the new Connector’s rules are inserted last in each group.</span></span>

### <a name="putting-it-all-together"></a><span data-ttu-id="c8bea-318">Putting it all together</span><span class="sxs-lookup"><span data-stu-id="c8bea-318">Putting it all together</span></span>
<span data-ttu-id="c8bea-319">We now know enough about Synchronization Rules to be able to understand how the configuration works with the different Synchronization Rules.</span><span class="sxs-lookup"><span data-stu-id="c8bea-319">We now know enough about Synchronization Rules to be able to understand how the configuration works with the different Synchronization Rules.</span></span> <span data-ttu-id="c8bea-320">If you look at a user and the attributes that are contributed to the metaverse, the rules are applied in the following order:</span><span class="sxs-lookup"><span data-stu-id="c8bea-320">If you look at a user and the attributes that are contributed to the metaverse, the rules are applied in the following order:</span></span>

| <span data-ttu-id="c8bea-321">Name</span><span class="sxs-lookup"><span data-stu-id="c8bea-321">Name</span></span> | <span data-ttu-id="c8bea-322">Comment</span><span class="sxs-lookup"><span data-stu-id="c8bea-322">Comment</span></span> |
|:--- |:--- |
| <span data-ttu-id="c8bea-323">In from AD – User Join</span><span class="sxs-lookup"><span data-stu-id="c8bea-323">In from AD – User Join</span></span> |<span data-ttu-id="c8bea-324">Rule for joining connector space objects with metaverse.</span><span class="sxs-lookup"><span data-stu-id="c8bea-324">Rule for joining connector space objects with metaverse.</span></span> |
| <span data-ttu-id="c8bea-325">In from AD – UserAccount Enabled</span><span class="sxs-lookup"><span data-stu-id="c8bea-325">In from AD – UserAccount Enabled</span></span> |<span data-ttu-id="c8bea-326">Attributes required for sign-in to Azure AD and Office 365.</span><span class="sxs-lookup"><span data-stu-id="c8bea-326">Attributes required for sign-in to Azure AD and Office 365.</span></span> <span data-ttu-id="c8bea-327">We want these attributes from the enabled account.</span><span class="sxs-lookup"><span data-stu-id="c8bea-327">We want these attributes from the enabled account.</span></span> |
| <span data-ttu-id="c8bea-328">In from AD – User Common from Exchange</span><span class="sxs-lookup"><span data-stu-id="c8bea-328">In from AD – User Common from Exchange</span></span> |<span data-ttu-id="c8bea-329">Attributes found in the Global Address List.</span><span class="sxs-lookup"><span data-stu-id="c8bea-329">Attributes found in the Global Address List.</span></span> <span data-ttu-id="c8bea-330">We assume the data quality is best in the forest where we have found the user’s mailbox.</span><span class="sxs-lookup"><span data-stu-id="c8bea-330">We assume the data quality is best in the forest where we have found the user’s mailbox.</span></span> |
| <span data-ttu-id="c8bea-331">In from AD – User Common</span><span class="sxs-lookup"><span data-stu-id="c8bea-331">In from AD – User Common</span></span> |<span data-ttu-id="c8bea-332">Attributes found in the Global Address List.</span><span class="sxs-lookup"><span data-stu-id="c8bea-332">Attributes found in the Global Address List.</span></span> <span data-ttu-id="c8bea-333">In case we didn’t find a mailbox, any other joined object can contribute the attribute value.</span><span class="sxs-lookup"><span data-stu-id="c8bea-333">In case we didn’t find a mailbox, any other joined object can contribute the attribute value.</span></span> |
| <span data-ttu-id="c8bea-334">In from AD – User Exchange</span><span class="sxs-lookup"><span data-stu-id="c8bea-334">In from AD – User Exchange</span></span> |<span data-ttu-id="c8bea-335">Only exists if Exchange has been detected.</span><span class="sxs-lookup"><span data-stu-id="c8bea-335">Only exists if Exchange has been detected.</span></span> <span data-ttu-id="c8bea-336">It flows all infrastructure Exchange attributes.</span><span class="sxs-lookup"><span data-stu-id="c8bea-336">It flows all infrastructure Exchange attributes.</span></span> |
| <span data-ttu-id="c8bea-337">In from AD – User Lync</span><span class="sxs-lookup"><span data-stu-id="c8bea-337">In from AD – User Lync</span></span> |<span data-ttu-id="c8bea-338">Only exists if Lync has been detected.</span><span class="sxs-lookup"><span data-stu-id="c8bea-338">Only exists if Lync has been detected.</span></span> <span data-ttu-id="c8bea-339">It flows all infrastructure Lync attributes.</span><span class="sxs-lookup"><span data-stu-id="c8bea-339">It flows all infrastructure Lync attributes.</span></span> |

## <a name="next-steps"></a><span data-ttu-id="c8bea-340">Next steps</span><span class="sxs-lookup"><span data-stu-id="c8bea-340">Next steps</span></span>
* <span data-ttu-id="c8bea-341">Read more about the configuration model in [Understanding Declarative Provisioning](active-directory-aadconnectsync-understanding-declarative-provisioning.md).</span><span class="sxs-lookup"><span data-stu-id="c8bea-341">Read more about the configuration model in [Understanding Declarative Provisioning](active-directory-aadconnectsync-understanding-declarative-provisioning.md).</span></span>
* <span data-ttu-id="c8bea-342">Read more about the expression language in [Understanding Declarative Provisioning Expressions](active-directory-aadconnectsync-understanding-declarative-provisioning-expressions.md).</span><span class="sxs-lookup"><span data-stu-id="c8bea-342">Read more about the expression language in [Understanding Declarative Provisioning Expressions](active-directory-aadconnectsync-understanding-declarative-provisioning-expressions.md).</span></span>
* <span data-ttu-id="c8bea-343">Continue reading how the out-of-box configuration works in [Understanding Users and Contacts](active-directory-aadconnectsync-understanding-users-and-contacts.md)</span><span class="sxs-lookup"><span data-stu-id="c8bea-343">Continue reading how the out-of-box configuration works in [Understanding Users and Contacts](active-directory-aadconnectsync-understanding-users-and-contacts.md)</span></span>
* <span data-ttu-id="c8bea-344">See how to make a practical change using declarative provisioning in [How to make a change to the default configuration](active-directory-aadconnectsync-change-the-configuration.md).</span><span class="sxs-lookup"><span data-stu-id="c8bea-344">See how to make a practical change using declarative provisioning in [How to make a change to the default configuration](active-directory-aadconnectsync-change-the-configuration.md).</span></span>

<span data-ttu-id="c8bea-345">**Overview topics**</span><span class="sxs-lookup"><span data-stu-id="c8bea-345">**Overview topics**</span></span>

* [<span data-ttu-id="c8bea-346">Azure AD Connect sync: Understand and customize synchronization</span><span class="sxs-lookup"><span data-stu-id="c8bea-346">Azure AD Connect sync: Understand and customize synchronization</span></span>](active-directory-aadconnectsync-whatis.md)
* [<span data-ttu-id="c8bea-347">Integrating your on-premises identities with Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="c8bea-347">Integrating your on-premises identities with Azure Active Directory</span></span>](active-directory-aadconnect.md)











