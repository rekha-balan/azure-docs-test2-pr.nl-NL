---
title: 'Azure AD Connect: Accounts and permissions | Microsoft Docs'
description: This topic describes the accounts used and created and permissions required.
services: active-directory
documentationcenter: ''
author: billmath
manager: mtillman
editor: ''
ms.reviewer: cychua
ms.assetid: b93e595b-354a-479d-85ec-a95553dd9cc2
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/18/2018
ms.component: hybrid
ms.author: billmath
ms.openlocfilehash: 2283f55be1a17ec95c73878d42d3acf4d0503e07
ms.sourcegitcommit: d1451406a010fd3aa854dc8e5b77dc5537d8050e
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 09/13/2018
ms.locfileid: "44828165"
---
# <a name="azure-ad-connect-accounts-and-permissions"></a><span data-ttu-id="e2fd2-103">Azure AD Connect: Accounts and permissions</span><span class="sxs-lookup"><span data-stu-id="e2fd2-103">Azure AD Connect: Accounts and permissions</span></span>

## <a name="accounts-used-for-azure-ad-connect"></a><span data-ttu-id="e2fd2-104">Accounts used for Azure AD Connect</span><span class="sxs-lookup"><span data-stu-id="e2fd2-104">Accounts used for Azure AD Connect</span></span>

![](media/active-directory-aadconnect-accounts-permissions/account5.png)

<span data-ttu-id="e2fd2-105">Azure AD Connect uses 3 accounts in order to synchronize information from on-premises or Windows Server Active Directory to Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-105">Azure AD Connect uses 3 accounts in order to synchronize information from on-premises or Windows Server Active Directory to Azure Active Directory.</span></span>  <span data-ttu-id="e2fd2-106">These accounts are:</span><span class="sxs-lookup"><span data-stu-id="e2fd2-106">These accounts are:</span></span>

- <span data-ttu-id="e2fd2-107">**AD DS Connector account**:     used to read/write information to Windows Server Active Directory</span><span class="sxs-lookup"><span data-stu-id="e2fd2-107">**AD DS Connector account**:     used to read/write information to Windows Server Active Directory</span></span>

- <span data-ttu-id="e2fd2-108">**ADSync service account**:      used to run the synchronization service and access the SQL database</span><span class="sxs-lookup"><span data-stu-id="e2fd2-108">**ADSync service account**:      used to run the synchronization service and access the SQL database</span></span>

- <span data-ttu-id="e2fd2-109">**Azure AD Connector account**:     used to write information to Azure AD</span><span class="sxs-lookup"><span data-stu-id="e2fd2-109">**Azure AD Connector account**:     used to write information to Azure AD</span></span>

<span data-ttu-id="e2fd2-110">In addition to these three accounts used to run Azure AD Connect, you will also need the following additional accounts to install Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-110">In addition to these three accounts used to run Azure AD Connect, you will also need the following additional accounts to install Azure AD Connect.</span></span>  <span data-ttu-id="e2fd2-111">These are:</span><span class="sxs-lookup"><span data-stu-id="e2fd2-111">These are:</span></span>

- <span data-ttu-id="e2fd2-112">**AD DS Enterprise Administrator account**:      used to install Azure AD Connect</span><span class="sxs-lookup"><span data-stu-id="e2fd2-112">**AD DS Enterprise Administrator account**:      used to install Azure AD Connect</span></span>
- <span data-ttu-id="e2fd2-113">**Azure AD Global Administrator account**:  used to create the Azure AD Connector account and configure Azure AD.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-113">**Azure AD Global Administrator account**:  used to create the Azure AD Connector account and configure Azure AD.</span></span>

- <span data-ttu-id="e2fd2-114">**SQL SA account (optional)**:     used to create the ADSync database when using the full version of SQL Server.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-114">**SQL SA account (optional)**:     used to create the ADSync database when using the full version of SQL Server.</span></span>  <span data-ttu-id="e2fd2-115">This SQL Server may be local or remote to the Azure AD Connect installation.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-115">This SQL Server may be local or remote to the Azure AD Connect installation.</span></span>  <span data-ttu-id="e2fd2-116">This account may be the same account as the Enterprise Administrator.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-116">This account may be the same account as the Enterprise Administrator.</span></span>  <span data-ttu-id="e2fd2-117">Provisioning the database can now be performed out of band by the SQL administrator and then installed by the Azure AD Connect administrator with database owner rights.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-117">Provisioning the database can now be performed out of band by the SQL administrator and then installed by the Azure AD Connect administrator with database owner rights.</span></span>  <span data-ttu-id="e2fd2-118">For information on this see [Install Azure AD Connect using SQL delegated administrator permissions](active-directory-aadconnect-sql-delegation.md)</span><span class="sxs-lookup"><span data-stu-id="e2fd2-118">For information on this see [Install Azure AD Connect using SQL delegated administrator permissions](active-directory-aadconnect-sql-delegation.md)</span></span>

## <a name="installing-azure-ad-connect"></a><span data-ttu-id="e2fd2-119">Installing Azure AD Connect</span><span class="sxs-lookup"><span data-stu-id="e2fd2-119">Installing Azure AD Connect</span></span>
<span data-ttu-id="e2fd2-120">The Azure AD Connect installation wizard offers two different paths:</span><span class="sxs-lookup"><span data-stu-id="e2fd2-120">The Azure AD Connect installation wizard offers two different paths:</span></span>

* <span data-ttu-id="e2fd2-121">In Express Settings, the wizard requires more privileges.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-121">In Express Settings, the wizard requires more privileges.</span></span>  <span data-ttu-id="e2fd2-122">This is so that it can set up your configuration easily, without requiring you to create users or configure permissions.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-122">This is so that it can set up your configuration easily, without requiring you to create users or configure permissions.</span></span>
* <span data-ttu-id="e2fd2-123">In Custom Settings, the wizard offers you more choices and options.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-123">In Custom Settings, the wizard offers you more choices and options.</span></span> <span data-ttu-id="e2fd2-124">However, there are some situations in which you need to ensure you have the correct permissions yourself.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-124">However, there are some situations in which you need to ensure you have the correct permissions yourself.</span></span>



## <a name="express-settings-installation"></a><span data-ttu-id="e2fd2-125">Express settings installation</span><span class="sxs-lookup"><span data-stu-id="e2fd2-125">Express settings installation</span></span>
<span data-ttu-id="e2fd2-126">In Express settings, the installation wizard asks for the following:</span><span class="sxs-lookup"><span data-stu-id="e2fd2-126">In Express settings, the installation wizard asks for the following:</span></span>

  - <span data-ttu-id="e2fd2-127">AD DS Enterprise Administrator credentials</span><span class="sxs-lookup"><span data-stu-id="e2fd2-127">AD DS Enterprise Administrator credentials</span></span>
  - <span data-ttu-id="e2fd2-128">Azure AD Global Administrator credentials</span><span class="sxs-lookup"><span data-stu-id="e2fd2-128">Azure AD Global Administrator credentials</span></span>

### <a name="ad-ds-enterprise-admin-credentials"></a><span data-ttu-id="e2fd2-129">AD DS Enterprise Admin credentials</span><span class="sxs-lookup"><span data-stu-id="e2fd2-129">AD DS Enterprise Admin credentials</span></span>
<span data-ttu-id="e2fd2-130">The AD DS Enterprise Admin account is used to configure your on-premises Active Directory.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-130">The AD DS Enterprise Admin account is used to configure your on-premises Active Directory.</span></span> <span data-ttu-id="e2fd2-131">These credentials are only used during the installation and are not used after the installation has completed.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-131">These credentials are only used during the installation and are not used after the installation has completed.</span></span> <span data-ttu-id="e2fd2-132">The Enterprise Admin, not the Domain Admin should make sure the permissions in Active Directory can be set in all domains.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-132">The Enterprise Admin, not the Domain Admin should make sure the permissions in Active Directory can be set in all domains.</span></span>

<span data-ttu-id="e2fd2-133">If you are upgrading from DirSync, the AD DS Enterprise Admins credentials are used to reset the password for the account used by DirSync.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-133">If you are upgrading from DirSync, the AD DS Enterprise Admins credentials are used to reset the password for the account used by DirSync.</span></span> <span data-ttu-id="e2fd2-134">You also need Azure AD Global Administrator credentials.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-134">You also need Azure AD Global Administrator credentials.</span></span>

### <a name="azure-ad-global-admin-credentials"></a><span data-ttu-id="e2fd2-135">Azure AD Global Admin credentials</span><span class="sxs-lookup"><span data-stu-id="e2fd2-135">Azure AD Global Admin credentials</span></span>
<span data-ttu-id="e2fd2-136">These credentials are only used during the installation and are not used after the installation has completed.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-136">These credentials are only used during the installation and are not used after the installation has completed.</span></span> <span data-ttu-id="e2fd2-137">It is used to create the [Azure AD Connector account](#azure-ad-service-account) used for synchronizing changes to Azure AD.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-137">It is used to create the [Azure AD Connector account](#azure-ad-service-account) used for synchronizing changes to Azure AD.</span></span> <span data-ttu-id="e2fd2-138">The account also enables sync as a feature in Azure AD.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-138">The account also enables sync as a feature in Azure AD.</span></span>

### <a name="ad-ds-connector-account-required-permissions-for-express-settings"></a><span data-ttu-id="e2fd2-139">AD DS Connector account required permissions for express settings</span><span class="sxs-lookup"><span data-stu-id="e2fd2-139">AD DS Connector account required permissions for express settings</span></span>
<span data-ttu-id="e2fd2-140">The [AD DS Connector account](#active-directory-account) is created for reading and writing to Windows Server AD and has the following permissions when created by express settings:</span><span class="sxs-lookup"><span data-stu-id="e2fd2-140">The [AD DS Connector account](#active-directory-account) is created for reading and writing to Windows Server AD and has the following permissions when created by express settings:</span></span>

| <span data-ttu-id="e2fd2-141">Permission</span><span class="sxs-lookup"><span data-stu-id="e2fd2-141">Permission</span></span> | <span data-ttu-id="e2fd2-142">Used for</span><span class="sxs-lookup"><span data-stu-id="e2fd2-142">Used for</span></span> |
| --- | --- |
| <li><span data-ttu-id="e2fd2-143">Replicate Directory Changes</span><span class="sxs-lookup"><span data-stu-id="e2fd2-143">Replicate Directory Changes</span></span></li><li><span data-ttu-id="e2fd2-144">Replicate Directory Changes All</span><span class="sxs-lookup"><span data-stu-id="e2fd2-144">Replicate Directory Changes All</span></span> |<span data-ttu-id="e2fd2-145">Password hash sync</span><span class="sxs-lookup"><span data-stu-id="e2fd2-145">Password hash sync</span></span> |
| <span data-ttu-id="e2fd2-146">Read/Write all properties User</span><span class="sxs-lookup"><span data-stu-id="e2fd2-146">Read/Write all properties User</span></span> |<span data-ttu-id="e2fd2-147">Import and Exchange hybrid</span><span class="sxs-lookup"><span data-stu-id="e2fd2-147">Import and Exchange hybrid</span></span> |
| <span data-ttu-id="e2fd2-148">Read/Write all properties iNetOrgPerson</span><span class="sxs-lookup"><span data-stu-id="e2fd2-148">Read/Write all properties iNetOrgPerson</span></span> |<span data-ttu-id="e2fd2-149">Import and Exchange hybrid</span><span class="sxs-lookup"><span data-stu-id="e2fd2-149">Import and Exchange hybrid</span></span> |
| <span data-ttu-id="e2fd2-150">Read/Write all properties Group</span><span class="sxs-lookup"><span data-stu-id="e2fd2-150">Read/Write all properties Group</span></span> |<span data-ttu-id="e2fd2-151">Import and Exchange hybrid</span><span class="sxs-lookup"><span data-stu-id="e2fd2-151">Import and Exchange hybrid</span></span> |
| <span data-ttu-id="e2fd2-152">Read/Write all properties Contact</span><span class="sxs-lookup"><span data-stu-id="e2fd2-152">Read/Write all properties Contact</span></span> |<span data-ttu-id="e2fd2-153">Import and Exchange hybrid</span><span class="sxs-lookup"><span data-stu-id="e2fd2-153">Import and Exchange hybrid</span></span> |
| <span data-ttu-id="e2fd2-154">Reset password</span><span class="sxs-lookup"><span data-stu-id="e2fd2-154">Reset password</span></span> |<span data-ttu-id="e2fd2-155">Preparation for enabling password writeback</span><span class="sxs-lookup"><span data-stu-id="e2fd2-155">Preparation for enabling password writeback</span></span> |

### <a name="express-installation-wizard-summary"></a><span data-ttu-id="e2fd2-156">Express installation wizard summary</span><span class="sxs-lookup"><span data-stu-id="e2fd2-156">Express installation wizard summary</span></span>

![Express installation](media/active-directory-aadconnect-get-started-express/express.png)

<span data-ttu-id="e2fd2-158">The following is a summary of the express installlation wizard pages, the credentials collected, and what they are used for.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-158">The following is a summary of the express installlation wizard pages, the credentials collected, and what they are used for.</span></span>

| <span data-ttu-id="e2fd2-159">Wizard Page</span><span class="sxs-lookup"><span data-stu-id="e2fd2-159">Wizard Page</span></span> | <span data-ttu-id="e2fd2-160">Credentials Collected</span><span class="sxs-lookup"><span data-stu-id="e2fd2-160">Credentials Collected</span></span> | <span data-ttu-id="e2fd2-161">Permissions Required</span><span class="sxs-lookup"><span data-stu-id="e2fd2-161">Permissions Required</span></span> | <span data-ttu-id="e2fd2-162">Used For</span><span class="sxs-lookup"><span data-stu-id="e2fd2-162">Used For</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="e2fd2-163">N/A</span><span class="sxs-lookup"><span data-stu-id="e2fd2-163">N/A</span></span> |<span data-ttu-id="e2fd2-164">User running the installation wizard</span><span class="sxs-lookup"><span data-stu-id="e2fd2-164">User running the installation wizard</span></span> |<span data-ttu-id="e2fd2-165">Administrator of the local server</span><span class="sxs-lookup"><span data-stu-id="e2fd2-165">Administrator of the local server</span></span> |<li><span data-ttu-id="e2fd2-166">Creates the [ADSync servcie account](#azure-ad-connect-sync-service-account) account that is used as to run the synchronization service.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-166">Creates the [ADSync servcie account](#azure-ad-connect-sync-service-account) account that is used as to run the synchronization service.</span></span> |
| <span data-ttu-id="e2fd2-167">Connect to Azure AD</span><span class="sxs-lookup"><span data-stu-id="e2fd2-167">Connect to Azure AD</span></span> |<span data-ttu-id="e2fd2-168">Azure AD directory credentials</span><span class="sxs-lookup"><span data-stu-id="e2fd2-168">Azure AD directory credentials</span></span> |<span data-ttu-id="e2fd2-169">Global administrator role in Azure AD</span><span class="sxs-lookup"><span data-stu-id="e2fd2-169">Global administrator role in Azure AD</span></span> |<li><span data-ttu-id="e2fd2-170">Enabling sync in the Azure AD directory.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-170">Enabling sync in the Azure AD directory.</span></span></li>  <li><span data-ttu-id="e2fd2-171">Creation of the [Azure AD Connector account](#azure-ad-service-account) that is used for on-going sync operations in Azure AD.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-171">Creation of the [Azure AD Connector account](#azure-ad-service-account) that is used for on-going sync operations in Azure AD.</span></span></li> |
| <span data-ttu-id="e2fd2-172">Connect to AD DS</span><span class="sxs-lookup"><span data-stu-id="e2fd2-172">Connect to AD DS</span></span> |<span data-ttu-id="e2fd2-173">On-premises Active Directory credentials</span><span class="sxs-lookup"><span data-stu-id="e2fd2-173">On-premises Active Directory credentials</span></span> |<span data-ttu-id="e2fd2-174">Member of the Enterprise Admins (EA) group in Active Directory</span><span class="sxs-lookup"><span data-stu-id="e2fd2-174">Member of the Enterprise Admins (EA) group in Active Directory</span></span> |<li><span data-ttu-id="e2fd2-175">Creates the [AD DS Connector account](#active-directory-account) in Active Directory and grants permissions to it.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-175">Creates the [AD DS Connector account](#active-directory-account) in Active Directory and grants permissions to it.</span></span> <span data-ttu-id="e2fd2-176">This created account is used to read and write directory information during synchronization.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-176">This created account is used to read and write directory information during synchronization.</span></span></li> |


## <a name="custom-installation-settings"></a><span data-ttu-id="e2fd2-177">Custom installation settings</span><span class="sxs-lookup"><span data-stu-id="e2fd2-177">Custom installation settings</span></span>

<span data-ttu-id="e2fd2-178">With the custom settings installation, the wizard offers you more choices and options.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-178">With the custom settings installation, the wizard offers you more choices and options.</span></span> 

### <a name="custom-installation-wizard-summary"></a><span data-ttu-id="e2fd2-179">Custom installation wizard summary</span><span class="sxs-lookup"><span data-stu-id="e2fd2-179">Custom installation wizard summary</span></span>

<span data-ttu-id="e2fd2-180">The following is a summary of the custom installlation wizard pages, the credentials collected, and what they are used for.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-180">The following is a summary of the custom installlation wizard pages, the credentials collected, and what they are used for.</span></span>

![Express installation](media/active-directory-aadconnect-accounts-permissions/customize.png)

| <span data-ttu-id="e2fd2-182">Wizard Page</span><span class="sxs-lookup"><span data-stu-id="e2fd2-182">Wizard Page</span></span> | <span data-ttu-id="e2fd2-183">Credentials Collected</span><span class="sxs-lookup"><span data-stu-id="e2fd2-183">Credentials Collected</span></span> | <span data-ttu-id="e2fd2-184">Permissions Required</span><span class="sxs-lookup"><span data-stu-id="e2fd2-184">Permissions Required</span></span> | <span data-ttu-id="e2fd2-185">Used For</span><span class="sxs-lookup"><span data-stu-id="e2fd2-185">Used For</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="e2fd2-186">N/A</span><span class="sxs-lookup"><span data-stu-id="e2fd2-186">N/A</span></span> |<span data-ttu-id="e2fd2-187">User running the installation wizard</span><span class="sxs-lookup"><span data-stu-id="e2fd2-187">User running the installation wizard</span></span> |<li><span data-ttu-id="e2fd2-188">Administrator of the local server</span><span class="sxs-lookup"><span data-stu-id="e2fd2-188">Administrator of the local server</span></span></li><li><span data-ttu-id="e2fd2-189">If using a full SQL Server, the user must be System Administrator (SA) in SQL</span><span class="sxs-lookup"><span data-stu-id="e2fd2-189">If using a full SQL Server, the user must be System Administrator (SA) in SQL</span></span></li> |<span data-ttu-id="e2fd2-190">By default, creates the local account that is used as the [sync engine service account](#azure-ad-connect-sync-service-account).</span><span class="sxs-lookup"><span data-stu-id="e2fd2-190">By default, creates the local account that is used as the [sync engine service account](#azure-ad-connect-sync-service-account).</span></span> <span data-ttu-id="e2fd2-191">The account is only created when the admin does not specify a particular account.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-191">The account is only created when the admin does not specify a particular account.</span></span> |
| <span data-ttu-id="e2fd2-192">Install synchronization services, Service account option</span><span class="sxs-lookup"><span data-stu-id="e2fd2-192">Install synchronization services, Service account option</span></span> |<span data-ttu-id="e2fd2-193">AD or local user account credentials</span><span class="sxs-lookup"><span data-stu-id="e2fd2-193">AD or local user account credentials</span></span> |<span data-ttu-id="e2fd2-194">User, permissions are granted by the installation wizard</span><span class="sxs-lookup"><span data-stu-id="e2fd2-194">User, permissions are granted by the installation wizard</span></span> |<span data-ttu-id="e2fd2-195">If the admin specifies an account, this account is used as the service account for the sync service.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-195">If the admin specifies an account, this account is used as the service account for the sync service.</span></span> |
| <span data-ttu-id="e2fd2-196">Connect to Azure AD</span><span class="sxs-lookup"><span data-stu-id="e2fd2-196">Connect to Azure AD</span></span> |<span data-ttu-id="e2fd2-197">Azure AD directory credentials</span><span class="sxs-lookup"><span data-stu-id="e2fd2-197">Azure AD directory credentials</span></span> |<span data-ttu-id="e2fd2-198">Global administrator role in Azure AD</span><span class="sxs-lookup"><span data-stu-id="e2fd2-198">Global administrator role in Azure AD</span></span> |<li><span data-ttu-id="e2fd2-199">Enabling sync in the Azure AD directory.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-199">Enabling sync in the Azure AD directory.</span></span></li>  <li><span data-ttu-id="e2fd2-200">Creation of the [Azure AD Connector account](#azure-ad-service-account) that is used for on-going sync operations in Azure AD.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-200">Creation of the [Azure AD Connector account](#azure-ad-service-account) that is used for on-going sync operations in Azure AD.</span></span></li> |
| <span data-ttu-id="e2fd2-201">Connect your directories</span><span class="sxs-lookup"><span data-stu-id="e2fd2-201">Connect your directories</span></span> |<span data-ttu-id="e2fd2-202">On-premises Active Directory credentials for each forest that is connected to Azure AD</span><span class="sxs-lookup"><span data-stu-id="e2fd2-202">On-premises Active Directory credentials for each forest that is connected to Azure AD</span></span> |<span data-ttu-id="e2fd2-203">The permissions depend on which features you enable and can be found in [Create the AD DS Connector account](#create-the-ad-dso-connector-account)</span><span class="sxs-lookup"><span data-stu-id="e2fd2-203">The permissions depend on which features you enable and can be found in [Create the AD DS Connector account](#create-the-ad-dso-connector-account)</span></span> |<span data-ttu-id="e2fd2-204">This account is used to read and write directory information during synchronization.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-204">This account is used to read and write directory information during synchronization.</span></span> |
| <span data-ttu-id="e2fd2-205">AD FS Servers</span><span class="sxs-lookup"><span data-stu-id="e2fd2-205">AD FS Servers</span></span> |<span data-ttu-id="e2fd2-206">For each server in the list, the wizard collects credentials when the logon credentials of the user running the wizard are insufficient to connect</span><span class="sxs-lookup"><span data-stu-id="e2fd2-206">For each server in the list, the wizard collects credentials when the logon credentials of the user running the wizard are insufficient to connect</span></span> |<span data-ttu-id="e2fd2-207">Domain Administrator</span><span class="sxs-lookup"><span data-stu-id="e2fd2-207">Domain Administrator</span></span> |<span data-ttu-id="e2fd2-208">Installation and configuration of the AD FS server role.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-208">Installation and configuration of the AD FS server role.</span></span> |
| <span data-ttu-id="e2fd2-209">Web application proxy servers</span><span class="sxs-lookup"><span data-stu-id="e2fd2-209">Web application proxy servers</span></span> |<span data-ttu-id="e2fd2-210">For each server in the list, the wizard collects credentials when the logon credentials of the user running the wizard are insufficient to connect</span><span class="sxs-lookup"><span data-stu-id="e2fd2-210">For each server in the list, the wizard collects credentials when the logon credentials of the user running the wizard are insufficient to connect</span></span> |<span data-ttu-id="e2fd2-211">Local admin on the target machine</span><span class="sxs-lookup"><span data-stu-id="e2fd2-211">Local admin on the target machine</span></span> |<span data-ttu-id="e2fd2-212">Installation and configuration of WAP server role.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-212">Installation and configuration of WAP server role.</span></span> |
| <span data-ttu-id="e2fd2-213">Proxy trust credentials</span><span class="sxs-lookup"><span data-stu-id="e2fd2-213">Proxy trust credentials</span></span> |<span data-ttu-id="e2fd2-214">Federation service trust credentials (the credentials the proxy uses to enroll for a trust certificate from the FS</span><span class="sxs-lookup"><span data-stu-id="e2fd2-214">Federation service trust credentials (the credentials the proxy uses to enroll for a trust certificate from the FS</span></span> |<span data-ttu-id="e2fd2-215">Domain account that is a local administrator of the AD FS server</span><span class="sxs-lookup"><span data-stu-id="e2fd2-215">Domain account that is a local administrator of the AD FS server</span></span> |<span data-ttu-id="e2fd2-216">Initial enrollment of FS-WAP trust certificate.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-216">Initial enrollment of FS-WAP trust certificate.</span></span> |
| <span data-ttu-id="e2fd2-217">AD FS Service Account page, "Use a domain user account option"</span><span class="sxs-lookup"><span data-stu-id="e2fd2-217">AD FS Service Account page, "Use a domain user account option"</span></span> |<span data-ttu-id="e2fd2-218">AD user account credentials</span><span class="sxs-lookup"><span data-stu-id="e2fd2-218">AD user account credentials</span></span> |<span data-ttu-id="e2fd2-219">Domain user</span><span class="sxs-lookup"><span data-stu-id="e2fd2-219">Domain user</span></span> |<span data-ttu-id="e2fd2-220">The AD user account whose credentials are provided is used as the logon account of the AD FS service.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-220">The AD user account whose credentials are provided is used as the logon account of the AD FS service.</span></span> |

### <a name="create-the-ad-ds-connector-account"></a><span data-ttu-id="e2fd2-221">Create the AD DS Connector account</span><span class="sxs-lookup"><span data-stu-id="e2fd2-221">Create the AD DS Connector account</span></span>
<span data-ttu-id="e2fd2-222">The account you specify on the **Connect your directories** page must be present in Active Directory prior to installation.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-222">The account you specify on the **Connect your directories** page must be present in Active Directory prior to installation.</span></span>  <span data-ttu-id="e2fd2-223">Azure AD Connect version 1.1.524.0 and later has the option to let the Azure AD Connect wizard create the **AD DS Connector account** used to connect to Active Directory.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-223">Azure AD Connect version 1.1.524.0 and later has the option to let the Azure AD Connect wizard create the **AD DS Connector account** used to connect to Active Directory.</span></span>  

<span data-ttu-id="e2fd2-224">It must also have the required permissions granted.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-224">It must also have the required permissions granted.</span></span> <span data-ttu-id="e2fd2-225">The installation wizard does not verify the permissions and any issues are only found during synchronization.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-225">The installation wizard does not verify the permissions and any issues are only found during synchronization.</span></span>

<span data-ttu-id="e2fd2-226">Which permissions you require depends on the optional features you enable.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-226">Which permissions you require depends on the optional features you enable.</span></span> <span data-ttu-id="e2fd2-227">If you have multiple domains, the permissions must be granted for all domains in the forest.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-227">If you have multiple domains, the permissions must be granted for all domains in the forest.</span></span> <span data-ttu-id="e2fd2-228">If you do not enable any of these features, the default **Domain User** permissions are sufficient.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-228">If you do not enable any of these features, the default **Domain User** permissions are sufficient.</span></span>

| <span data-ttu-id="e2fd2-229">Feature</span><span class="sxs-lookup"><span data-stu-id="e2fd2-229">Feature</span></span> | <span data-ttu-id="e2fd2-230">Permissions</span><span class="sxs-lookup"><span data-stu-id="e2fd2-230">Permissions</span></span> |
| --- | --- |
| <span data-ttu-id="e2fd2-231">ms-DS-ConsistencyGuid feature</span><span class="sxs-lookup"><span data-stu-id="e2fd2-231">ms-DS-ConsistencyGuid feature</span></span> |<span data-ttu-id="e2fd2-232">Write permissions to the ms-DS-ConsistencyGuid attribute documented in [Design Concepts - Using ms-DS-ConsistencyGuid as sourceAnchor](active-directory-aadconnect-design-concepts.md#using-ms-ds-consistencyguid-as-sourceanchor).</span><span class="sxs-lookup"><span data-stu-id="e2fd2-232">Write permissions to the ms-DS-ConsistencyGuid attribute documented in [Design Concepts - Using ms-DS-ConsistencyGuid as sourceAnchor](active-directory-aadconnect-design-concepts.md#using-ms-ds-consistencyguid-as-sourceanchor).</span></span> | 
| <span data-ttu-id="e2fd2-233">Password hash sync</span><span class="sxs-lookup"><span data-stu-id="e2fd2-233">Password hash sync</span></span> |<li><span data-ttu-id="e2fd2-234">Replicate Directory Changes</span><span class="sxs-lookup"><span data-stu-id="e2fd2-234">Replicate Directory Changes</span></span></li>  <li><span data-ttu-id="e2fd2-235">Replicate Directory Changes All</span><span class="sxs-lookup"><span data-stu-id="e2fd2-235">Replicate Directory Changes All</span></span> |
| <span data-ttu-id="e2fd2-236">Exchange hybrid deployment</span><span class="sxs-lookup"><span data-stu-id="e2fd2-236">Exchange hybrid deployment</span></span> |<span data-ttu-id="e2fd2-237">Write permissions to the attributes documented in [Exchange hybrid writeback](active-directory-aadconnectsync-attributes-synchronized.md#exchange-hybrid-writeback) for users, groups, and contacts.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-237">Write permissions to the attributes documented in [Exchange hybrid writeback](active-directory-aadconnectsync-attributes-synchronized.md#exchange-hybrid-writeback) for users, groups, and contacts.</span></span> |
| <span data-ttu-id="e2fd2-238">Exchange Mail Public Folder</span><span class="sxs-lookup"><span data-stu-id="e2fd2-238">Exchange Mail Public Folder</span></span> |<span data-ttu-id="e2fd2-239">Read permissions to the attributes documented in [Exchange Mail Public Folder](active-directory-aadconnectsync-attributes-synchronized.md#exchange-mail-public-folder) for public folders.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-239">Read permissions to the attributes documented in [Exchange Mail Public Folder](active-directory-aadconnectsync-attributes-synchronized.md#exchange-mail-public-folder) for public folders.</span></span> | 
| <span data-ttu-id="e2fd2-240">Password writeback</span><span class="sxs-lookup"><span data-stu-id="e2fd2-240">Password writeback</span></span> |<span data-ttu-id="e2fd2-241">Write permissions to the attributes documented in [Getting started with password management](../authentication/howto-sspr-writeback.md) for users.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-241">Write permissions to the attributes documented in [Getting started with password management](../authentication/howto-sspr-writeback.md) for users.</span></span> |
| <span data-ttu-id="e2fd2-242">Device writeback</span><span class="sxs-lookup"><span data-stu-id="e2fd2-242">Device writeback</span></span> |<span data-ttu-id="e2fd2-243">Permissions granted with a PowerShell script as described in [device writeback](active-directory-aadconnect-feature-device-writeback.md).</span><span class="sxs-lookup"><span data-stu-id="e2fd2-243">Permissions granted with a PowerShell script as described in [device writeback](active-directory-aadconnect-feature-device-writeback.md).</span></span> |
| <span data-ttu-id="e2fd2-244">Group writeback</span><span class="sxs-lookup"><span data-stu-id="e2fd2-244">Group writeback</span></span> |<span data-ttu-id="e2fd2-245">Read, Create, Update, and Delete group objects for synchronized **Office 365 groups**.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-245">Read, Create, Update, and Delete group objects for synchronized **Office 365 groups**.</span></span>  <span data-ttu-id="e2fd2-246">For more information see [Group Writeback](active-directory-aadconnect-feature-preview.md#group-writeback).</span><span class="sxs-lookup"><span data-stu-id="e2fd2-246">For more information see [Group Writeback](active-directory-aadconnect-feature-preview.md#group-writeback).</span></span>|

## <a name="upgrade"></a><span data-ttu-id="e2fd2-247">Upgrade</span><span class="sxs-lookup"><span data-stu-id="e2fd2-247">Upgrade</span></span>
<span data-ttu-id="e2fd2-248">When you upgrade from one version of Azure AD Connect to a new release, you need the following permissions:</span><span class="sxs-lookup"><span data-stu-id="e2fd2-248">When you upgrade from one version of Azure AD Connect to a new release, you need the following permissions:</span></span>

>[!IMPORTANT]
><span data-ttu-id="e2fd2-249">Starting with build 1.1.484, Azure AD Connect introduced a regression bug which requires sysadmin permissions to upgrade the SQL database.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-249">Starting with build 1.1.484, Azure AD Connect introduced a regression bug which requires sysadmin permissions to upgrade the SQL database.</span></span>  <span data-ttu-id="e2fd2-250">This bug is corrected in build 1.1.647.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-250">This bug is corrected in build 1.1.647.</span></span>  <span data-ttu-id="e2fd2-251">If you are upgrading to this build, you will need sysadmin permissions.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-251">If you are upgrading to this build, you will need sysadmin permissions.</span></span>  <span data-ttu-id="e2fd2-252">Dbo permissions are not sufficient.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-252">Dbo permissions are not sufficient.</span></span>  <span data-ttu-id="e2fd2-253">If you attempt to upgrade Azure AD Connect without having sysadmin permissions, the upgrade will fail and Azure AD Connect will no longer function correctly afterwards.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-253">If you attempt to upgrade Azure AD Connect without having sysadmin permissions, the upgrade will fail and Azure AD Connect will no longer function correctly afterwards.</span></span>  <span data-ttu-id="e2fd2-254">Microsoft is aware of this and is working to correct this.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-254">Microsoft is aware of this and is working to correct this.</span></span>


| <span data-ttu-id="e2fd2-255">Principal</span><span class="sxs-lookup"><span data-stu-id="e2fd2-255">Principal</span></span> | <span data-ttu-id="e2fd2-256">Permissions required</span><span class="sxs-lookup"><span data-stu-id="e2fd2-256">Permissions required</span></span> | <span data-ttu-id="e2fd2-257">Used for</span><span class="sxs-lookup"><span data-stu-id="e2fd2-257">Used for</span></span> |
| --- | --- | --- |
| <span data-ttu-id="e2fd2-258">User running the installation wizard</span><span class="sxs-lookup"><span data-stu-id="e2fd2-258">User running the installation wizard</span></span> |<span data-ttu-id="e2fd2-259">Administrator of the local server</span><span class="sxs-lookup"><span data-stu-id="e2fd2-259">Administrator of the local server</span></span> |<span data-ttu-id="e2fd2-260">Update binaries.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-260">Update binaries.</span></span> |
| <span data-ttu-id="e2fd2-261">User running the installation wizard</span><span class="sxs-lookup"><span data-stu-id="e2fd2-261">User running the installation wizard</span></span> |<span data-ttu-id="e2fd2-262">Member of ADSyncAdmins</span><span class="sxs-lookup"><span data-stu-id="e2fd2-262">Member of ADSyncAdmins</span></span> |<span data-ttu-id="e2fd2-263">Make changes to Sync Rules and other configuration.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-263">Make changes to Sync Rules and other configuration.</span></span> |
| <span data-ttu-id="e2fd2-264">User running the installation wizard</span><span class="sxs-lookup"><span data-stu-id="e2fd2-264">User running the installation wizard</span></span> |<span data-ttu-id="e2fd2-265">If you use a full SQL server: DBO (or similar) of the sync engine database</span><span class="sxs-lookup"><span data-stu-id="e2fd2-265">If you use a full SQL server: DBO (or similar) of the sync engine database</span></span> |<span data-ttu-id="e2fd2-266">Make database level changes, such as updating tables with new columns.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-266">Make database level changes, such as updating tables with new columns.</span></span> |

## <a name="more-about-the-created-accounts"></a><span data-ttu-id="e2fd2-267">More about the created accounts</span><span class="sxs-lookup"><span data-stu-id="e2fd2-267">More about the created accounts</span></span>
### <a name="ad-ds-connector-account"></a><span data-ttu-id="e2fd2-268">AD DS Connector account</span><span class="sxs-lookup"><span data-stu-id="e2fd2-268">AD DS Connector account</span></span>
<span data-ttu-id="e2fd2-269">If you use express settings, then an account is created in Active Directory that is used for synchronization.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-269">If you use express settings, then an account is created in Active Directory that is used for synchronization.</span></span> <span data-ttu-id="e2fd2-270">The created account is located in the forest root domain in the Users container and has its name prefixed with **MSOL_**.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-270">The created account is located in the forest root domain in the Users container and has its name prefixed with **MSOL_**.</span></span> <span data-ttu-id="e2fd2-271">The account is created with a long complex password that does not expire.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-271">The account is created with a long complex password that does not expire.</span></span> <span data-ttu-id="e2fd2-272">If you have a password policy in your domain, make sure long and complex passwords would be allowed for this account.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-272">If you have a password policy in your domain, make sure long and complex passwords would be allowed for this account.</span></span>

![AD account](./media/active-directory-aadconnect-accounts-permissions/adsyncserviceaccount.png)

<span data-ttu-id="e2fd2-274">If you use custom settings, then you are responsible for creating the account before you start the installation.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-274">If you use custom settings, then you are responsible for creating the account before you start the installation.</span></span>  <span data-ttu-id="e2fd2-275">See [Create the AD DS Connector account](#create-the-ad-dso-connector-account).</span><span class="sxs-lookup"><span data-stu-id="e2fd2-275">See [Create the AD DS Connector account](#create-the-ad-dso-connector-account).</span></span>

### <a name="adsync-service-account"></a><span data-ttu-id="e2fd2-276">ADSync service account</span><span class="sxs-lookup"><span data-stu-id="e2fd2-276">ADSync service account</span></span>
<span data-ttu-id="e2fd2-277">The sync service can run under different accounts.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-277">The sync service can run under different accounts.</span></span> <span data-ttu-id="e2fd2-278">It can run under a **Virtual Service Account** (VSA), a **Group Managed Service Account** (gMSA/sMSA), or a regular user account.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-278">It can run under a **Virtual Service Account** (VSA), a **Group Managed Service Account** (gMSA/sMSA), or a regular user account.</span></span> <span data-ttu-id="e2fd2-279">The supported options were changed with the 2017 April release of Connect when you do a fresh installation.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-279">The supported options were changed with the 2017 April release of Connect when you do a fresh installation.</span></span> <span data-ttu-id="e2fd2-280">If you upgrade from an earlier release of Azure AD Connect, these additional options are not available.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-280">If you upgrade from an earlier release of Azure AD Connect, these additional options are not available.</span></span>

| <span data-ttu-id="e2fd2-281">Type of account</span><span class="sxs-lookup"><span data-stu-id="e2fd2-281">Type of account</span></span> | <span data-ttu-id="e2fd2-282">Installation option</span><span class="sxs-lookup"><span data-stu-id="e2fd2-282">Installation option</span></span> | <span data-ttu-id="e2fd2-283">Description</span><span class="sxs-lookup"><span data-stu-id="e2fd2-283">Description</span></span> |
| --- | --- | --- |
| [<span data-ttu-id="e2fd2-284">Virtual Service Account</span><span class="sxs-lookup"><span data-stu-id="e2fd2-284">Virtual Service Account</span></span>](#virtual-service-account) | <span data-ttu-id="e2fd2-285">Express and custom, 2017 April and later</span><span class="sxs-lookup"><span data-stu-id="e2fd2-285">Express and custom, 2017 April and later</span></span> | <span data-ttu-id="e2fd2-286">This is the option used for all express installations, except for installations on a Domain Controller.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-286">This is the option used for all express installations, except for installations on a Domain Controller.</span></span> <span data-ttu-id="e2fd2-287">For custom, it is the default option unless another option is used.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-287">For custom, it is the default option unless another option is used.</span></span> |
| [<span data-ttu-id="e2fd2-288">Group Managed Service Account</span><span class="sxs-lookup"><span data-stu-id="e2fd2-288">Group Managed Service Account</span></span>](#group-managed-service-account) | <span data-ttu-id="e2fd2-289">Custom, 2017 April and later</span><span class="sxs-lookup"><span data-stu-id="e2fd2-289">Custom, 2017 April and later</span></span> | <span data-ttu-id="e2fd2-290">If you use a remote SQL server, then we recommend to use a group managed service account.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-290">If you use a remote SQL server, then we recommend to use a group managed service account.</span></span> |
| [<span data-ttu-id="e2fd2-291">User account</span><span class="sxs-lookup"><span data-stu-id="e2fd2-291">User account</span></span>](#user-account) | <span data-ttu-id="e2fd2-292">Express and custom, 2017 April and later</span><span class="sxs-lookup"><span data-stu-id="e2fd2-292">Express and custom, 2017 April and later</span></span> | <span data-ttu-id="e2fd2-293">A user account prefixed with AAD_ is only created during installation when installed on Windows Server 2008 and when installed on a Domain Controller.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-293">A user account prefixed with AAD_ is only created during installation when installed on Windows Server 2008 and when installed on a Domain Controller.</span></span> |
| [<span data-ttu-id="e2fd2-294">User account</span><span class="sxs-lookup"><span data-stu-id="e2fd2-294">User account</span></span>](#user-account) | <span data-ttu-id="e2fd2-295">Express and custom, 2017 March and earlier</span><span class="sxs-lookup"><span data-stu-id="e2fd2-295">Express and custom, 2017 March and earlier</span></span> | <span data-ttu-id="e2fd2-296">A local account prefixed with AAD_ is created during installation.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-296">A local account prefixed with AAD_ is created during installation.</span></span> <span data-ttu-id="e2fd2-297">When using custom installation, another account can be specified.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-297">When using custom installation, another account can be specified.</span></span> |

<span data-ttu-id="e2fd2-298">If you use Connect with a build from 2017 March or earlier, then you should not reset the password on the service account since Windows destroys the encryption keys for security reasons.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-298">If you use Connect with a build from 2017 March or earlier, then you should not reset the password on the service account since Windows destroys the encryption keys for security reasons.</span></span> <span data-ttu-id="e2fd2-299">You cannot change the account to any other account without reinstalling Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-299">You cannot change the account to any other account without reinstalling Azure AD Connect.</span></span> <span data-ttu-id="e2fd2-300">If you upgrade to a build from 2017 April or later, then it is supported to change the password on the service account but you cannot change the account used.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-300">If you upgrade to a build from 2017 April or later, then it is supported to change the password on the service account but you cannot change the account used.</span></span>

> [!Important]
> <span data-ttu-id="e2fd2-301">You can only set the service account on first installation.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-301">You can only set the service account on first installation.</span></span> <span data-ttu-id="e2fd2-302">It is not supported to change the service account after the installation has completed.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-302">It is not supported to change the service account after the installation has completed.</span></span>

<span data-ttu-id="e2fd2-303">This is a table of the default, recommended, and supported options for the sync service account.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-303">This is a table of the default, recommended, and supported options for the sync service account.</span></span>

<span data-ttu-id="e2fd2-304">Legend:</span><span class="sxs-lookup"><span data-stu-id="e2fd2-304">Legend:</span></span>

- <span data-ttu-id="e2fd2-305">**Bold** indicates the default option and in most cases the recommended option.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-305">**Bold** indicates the default option and in most cases the recommended option.</span></span>
- <span data-ttu-id="e2fd2-306">*Italic* indicates the recommended option when it is not the default option.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-306">*Italic* indicates the recommended option when it is not the default option.</span></span>
- <span data-ttu-id="e2fd2-307">2008 - Default option when installed on Windows Server 2008</span><span class="sxs-lookup"><span data-stu-id="e2fd2-307">2008 - Default option when installed on Windows Server 2008</span></span>
- <span data-ttu-id="e2fd2-308">Non-bold - Supported option</span><span class="sxs-lookup"><span data-stu-id="e2fd2-308">Non-bold - Supported option</span></span>
- <span data-ttu-id="e2fd2-309">Local account - Local user account on the server</span><span class="sxs-lookup"><span data-stu-id="e2fd2-309">Local account - Local user account on the server</span></span>
- <span data-ttu-id="e2fd2-310">Domain account - Domain user account</span><span class="sxs-lookup"><span data-stu-id="e2fd2-310">Domain account - Domain user account</span></span>
- <span data-ttu-id="e2fd2-311">sMSA - [standalone Managed Service account](https://technet.microsoft.com/library/dd548356.aspx)</span><span class="sxs-lookup"><span data-stu-id="e2fd2-311">sMSA - [standalone Managed Service account](https://technet.microsoft.com/library/dd548356.aspx)</span></span>
- <span data-ttu-id="e2fd2-312">gMSA - [group Managed Service account](https://technet.microsoft.com/library/hh831782.aspx)</span><span class="sxs-lookup"><span data-stu-id="e2fd2-312">gMSA - [group Managed Service account](https://technet.microsoft.com/library/hh831782.aspx)</span></span>

| | <span data-ttu-id="e2fd2-313">LocalDB</span><span class="sxs-lookup"><span data-stu-id="e2fd2-313">LocalDB</span></span></br><span data-ttu-id="e2fd2-314">Express</span><span class="sxs-lookup"><span data-stu-id="e2fd2-314">Express</span></span> | <span data-ttu-id="e2fd2-315">LocalDB/LocalSQL</span><span class="sxs-lookup"><span data-stu-id="e2fd2-315">LocalDB/LocalSQL</span></span></br><span data-ttu-id="e2fd2-316">Custom</span><span class="sxs-lookup"><span data-stu-id="e2fd2-316">Custom</span></span> | <span data-ttu-id="e2fd2-317">Remote SQL</span><span class="sxs-lookup"><span data-stu-id="e2fd2-317">Remote SQL</span></span></br><span data-ttu-id="e2fd2-318">Custom</span><span class="sxs-lookup"><span data-stu-id="e2fd2-318">Custom</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="e2fd2-319">**standalone/workgroup machine**</span><span class="sxs-lookup"><span data-stu-id="e2fd2-319">**standalone/workgroup machine**</span></span> | <span data-ttu-id="e2fd2-320">Not supported</span><span class="sxs-lookup"><span data-stu-id="e2fd2-320">Not supported</span></span> | <span data-ttu-id="e2fd2-321">**VSA**</span><span class="sxs-lookup"><span data-stu-id="e2fd2-321">**VSA**</span></span></br><span data-ttu-id="e2fd2-322">Local account (2008)</span><span class="sxs-lookup"><span data-stu-id="e2fd2-322">Local account (2008)</span></span></br><span data-ttu-id="e2fd2-323">Local account</span><span class="sxs-lookup"><span data-stu-id="e2fd2-323">Local account</span></span> |  <span data-ttu-id="e2fd2-324">Not supported</span><span class="sxs-lookup"><span data-stu-id="e2fd2-324">Not supported</span></span> |
| <span data-ttu-id="e2fd2-325">**domain-joined machine**</span><span class="sxs-lookup"><span data-stu-id="e2fd2-325">**domain-joined machine**</span></span> | <span data-ttu-id="e2fd2-326">**VSA**</span><span class="sxs-lookup"><span data-stu-id="e2fd2-326">**VSA**</span></span></br><span data-ttu-id="e2fd2-327">Local account (2008)</span><span class="sxs-lookup"><span data-stu-id="e2fd2-327">Local account (2008)</span></span> | <span data-ttu-id="e2fd2-328">**VSA**</span><span class="sxs-lookup"><span data-stu-id="e2fd2-328">**VSA**</span></span></br><span data-ttu-id="e2fd2-329">Local account (2008)</span><span class="sxs-lookup"><span data-stu-id="e2fd2-329">Local account (2008)</span></span></br><span data-ttu-id="e2fd2-330">Local account</span><span class="sxs-lookup"><span data-stu-id="e2fd2-330">Local account</span></span></br><span data-ttu-id="e2fd2-331">Domain account</span><span class="sxs-lookup"><span data-stu-id="e2fd2-331">Domain account</span></span></br><span data-ttu-id="e2fd2-332">sMSA,gMSA</span><span class="sxs-lookup"><span data-stu-id="e2fd2-332">sMSA,gMSA</span></span> | <span data-ttu-id="e2fd2-333">**gMSA**</span><span class="sxs-lookup"><span data-stu-id="e2fd2-333">**gMSA**</span></span></br><span data-ttu-id="e2fd2-334">Domain account</span><span class="sxs-lookup"><span data-stu-id="e2fd2-334">Domain account</span></span> |
| <span data-ttu-id="e2fd2-335">**Domain Controller**</span><span class="sxs-lookup"><span data-stu-id="e2fd2-335">**Domain Controller**</span></span> | <span data-ttu-id="e2fd2-336">**Domain account**</span><span class="sxs-lookup"><span data-stu-id="e2fd2-336">**Domain account**</span></span> | <span data-ttu-id="e2fd2-337">*gMSA*</span><span class="sxs-lookup"><span data-stu-id="e2fd2-337">*gMSA*</span></span></br><span data-ttu-id="e2fd2-338">**Domain account**</span><span class="sxs-lookup"><span data-stu-id="e2fd2-338">**Domain account**</span></span></br><span data-ttu-id="e2fd2-339">sMSA</span><span class="sxs-lookup"><span data-stu-id="e2fd2-339">sMSA</span></span>| <span data-ttu-id="e2fd2-340">*gMSA*</span><span class="sxs-lookup"><span data-stu-id="e2fd2-340">*gMSA*</span></span></br><span data-ttu-id="e2fd2-341">**Domain account**</span><span class="sxs-lookup"><span data-stu-id="e2fd2-341">**Domain account**</span></span>|

#### <a name="virtual-service-account"></a><span data-ttu-id="e2fd2-342">Virtual service account</span><span class="sxs-lookup"><span data-stu-id="e2fd2-342">Virtual service account</span></span>
<span data-ttu-id="e2fd2-343">A virtual service account is a special type of account that does not have a password and is managed by Windows.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-343">A virtual service account is a special type of account that does not have a password and is managed by Windows.</span></span>

![VSA](./media/active-directory-aadconnect-accounts-permissions/aadsyncvsa.png)

<span data-ttu-id="e2fd2-345">The VSA is intended to be used with scenarios where the sync engine and SQL are on the same server.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-345">The VSA is intended to be used with scenarios where the sync engine and SQL are on the same server.</span></span> <span data-ttu-id="e2fd2-346">If you use remote SQL, then we recommend to use a [Group Managed Service Account](#managed-service-account) instead.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-346">If you use remote SQL, then we recommend to use a [Group Managed Service Account](#managed-service-account) instead.</span></span>

<span data-ttu-id="e2fd2-347">This feature requires Windows Server 2008 R2 or later.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-347">This feature requires Windows Server 2008 R2 or later.</span></span> <span data-ttu-id="e2fd2-348">If you install Azure AD Connect on Windows Server 2008, then the installation falls back to using a [user account](#user-account) instead.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-348">If you install Azure AD Connect on Windows Server 2008, then the installation falls back to using a [user account](#user-account) instead.</span></span>

#### <a name="group-managed-service-account"></a><span data-ttu-id="e2fd2-349">Group managed service account</span><span class="sxs-lookup"><span data-stu-id="e2fd2-349">Group managed service account</span></span>
<span data-ttu-id="e2fd2-350">If you use a remote SQL server, then we recommend to using a **group managed service account**.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-350">If you use a remote SQL server, then we recommend to using a **group managed service account**.</span></span> <span data-ttu-id="e2fd2-351">For more information on how to prepare your Active Directory for Group Managed Service account, see [Group Managed Service Accounts Overview](https://technet.microsoft.com/library/hh831782.aspx).</span><span class="sxs-lookup"><span data-stu-id="e2fd2-351">For more information on how to prepare your Active Directory for Group Managed Service account, see [Group Managed Service Accounts Overview](https://technet.microsoft.com/library/hh831782.aspx).</span></span>

<span data-ttu-id="e2fd2-352">To use this option, on the [Install required components](active-directory-aadconnect-get-started-custom.md#install-required-components) page, select **Use an existing service account**, and select **Managed Service Account**.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-352">To use this option, on the [Install required components](active-directory-aadconnect-get-started-custom.md#install-required-components) page, select **Use an existing service account**, and select **Managed Service Account**.</span></span>  
<span data-ttu-id="e2fd2-353">![VSA](./media/active-directory-aadconnect-accounts-permissions/serviceaccount.png)</span><span class="sxs-lookup"><span data-stu-id="e2fd2-353">![VSA](./media/active-directory-aadconnect-accounts-permissions/serviceaccount.png)</span></span>  
<span data-ttu-id="e2fd2-354">It is also supported to use a [standalone managed service account](https://technet.microsoft.com/library/dd548356.aspx).</span><span class="sxs-lookup"><span data-stu-id="e2fd2-354">It is also supported to use a [standalone managed service account](https://technet.microsoft.com/library/dd548356.aspx).</span></span> <span data-ttu-id="e2fd2-355">However, these can only be used on the local machine and there is no benefit to use them over the default virtual service account.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-355">However, these can only be used on the local machine and there is no benefit to use them over the default virtual service account.</span></span>

<span data-ttu-id="e2fd2-356">This feature requires Windows Server 2012 or later.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-356">This feature requires Windows Server 2012 or later.</span></span> <span data-ttu-id="e2fd2-357">If you need to use an older operating system and use remote SQL, then you must use a [user account](#user-account).</span><span class="sxs-lookup"><span data-stu-id="e2fd2-357">If you need to use an older operating system and use remote SQL, then you must use a [user account](#user-account).</span></span>

#### <a name="user-account"></a><span data-ttu-id="e2fd2-358">User account</span><span class="sxs-lookup"><span data-stu-id="e2fd2-358">User account</span></span>
<span data-ttu-id="e2fd2-359">A local service account is created by the installation wizard (unless you specify the account to use in custom settings).</span><span class="sxs-lookup"><span data-stu-id="e2fd2-359">A local service account is created by the installation wizard (unless you specify the account to use in custom settings).</span></span> <span data-ttu-id="e2fd2-360">The account is prefixed **AAD_** and used for the actual sync service to run as.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-360">The account is prefixed **AAD_** and used for the actual sync service to run as.</span></span> <span data-ttu-id="e2fd2-361">If you install Azure AD Connect on a Domain Controller, the account is created in the domain.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-361">If you install Azure AD Connect on a Domain Controller, the account is created in the domain.</span></span> <span data-ttu-id="e2fd2-362">The **AAD_** service account must be located in the domain if:</span><span class="sxs-lookup"><span data-stu-id="e2fd2-362">The **AAD_** service account must be located in the domain if:</span></span>
   - <span data-ttu-id="e2fd2-363">you use a remote server running SQL server</span><span class="sxs-lookup"><span data-stu-id="e2fd2-363">you use a remote server running SQL server</span></span>
   - <span data-ttu-id="e2fd2-364">you use a proxy that requires authentication</span><span class="sxs-lookup"><span data-stu-id="e2fd2-364">you use a proxy that requires authentication</span></span>

![Sync Service Account](./media/active-directory-aadconnect-accounts-permissions/syncserviceaccount.png)

<span data-ttu-id="e2fd2-366">The account is created with a long complex password that does not expire.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-366">The account is created with a long complex password that does not expire.</span></span>

<span data-ttu-id="e2fd2-367">This account is used to store the passwords for the other accounts in a secure way.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-367">This account is used to store the passwords for the other accounts in a secure way.</span></span> <span data-ttu-id="e2fd2-368">These other accounts passwords are stored encrypted in the database.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-368">These other accounts passwords are stored encrypted in the database.</span></span> <span data-ttu-id="e2fd2-369">The private keys for the encryption keys are protected with the cryptographic services secret-key encryption using Windows Data Protection API (DPAPI).</span><span class="sxs-lookup"><span data-stu-id="e2fd2-369">The private keys for the encryption keys are protected with the cryptographic services secret-key encryption using Windows Data Protection API (DPAPI).</span></span>

<span data-ttu-id="e2fd2-370">If you use a full SQL Server, then the service account is the DBO of the created database for the sync engine.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-370">If you use a full SQL Server, then the service account is the DBO of the created database for the sync engine.</span></span> <span data-ttu-id="e2fd2-371">The service will not function as intended with any other permissions.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-371">The service will not function as intended with any other permissions.</span></span> <span data-ttu-id="e2fd2-372">A SQL login is also created.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-372">A SQL login is also created.</span></span>

<span data-ttu-id="e2fd2-373">The account is also granted permissions to files, registry keys, and other objects related to the Sync Engine.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-373">The account is also granted permissions to files, registry keys, and other objects related to the Sync Engine.</span></span>

### <a name="azure-ad-connector-account"></a><span data-ttu-id="e2fd2-374">Azure AD Connector account</span><span class="sxs-lookup"><span data-stu-id="e2fd2-374">Azure AD Connector account</span></span>
<span data-ttu-id="e2fd2-375">An account in Azure AD is created for the sync service's use.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-375">An account in Azure AD is created for the sync service's use.</span></span> <span data-ttu-id="e2fd2-376">This account can be identified by its display name.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-376">This account can be identified by its display name.</span></span>

![AD account](./media/active-directory-aadconnect-accounts-permissions/aadsyncserviceaccount2.png)

<span data-ttu-id="e2fd2-378">The name of the server the account is used on can be identified in the second part of the user name.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-378">The name of the server the account is used on can be identified in the second part of the user name.</span></span> <span data-ttu-id="e2fd2-379">In the picture, the server name is DC1.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-379">In the picture, the server name is DC1.</span></span> <span data-ttu-id="e2fd2-380">If you have staging servers, each server has its own account.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-380">If you have staging servers, each server has its own account.</span></span>

<span data-ttu-id="e2fd2-381">The account is created with a long complex password that does not expire.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-381">The account is created with a long complex password that does not expire.</span></span> <span data-ttu-id="e2fd2-382">It is granted a special role **Directory Synchronization Accounts** that has only permissions to perform directory synchronization tasks.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-382">It is granted a special role **Directory Synchronization Accounts** that has only permissions to perform directory synchronization tasks.</span></span> <span data-ttu-id="e2fd2-383">This special built-in role cannot be granted outside of the Azure AD Connect wizard.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-383">This special built-in role cannot be granted outside of the Azure AD Connect wizard.</span></span> <span data-ttu-id="e2fd2-384">The Azure portal shows this account with the role **User**.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-384">The Azure portal shows this account with the role **User**.</span></span>

<span data-ttu-id="e2fd2-385">There is a limit of 20 sync service accounts in Azure AD.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-385">There is a limit of 20 sync service accounts in Azure AD.</span></span> <span data-ttu-id="e2fd2-386">To get the list of existing Azure AD service accounts in your Azure AD, run the following Azure AD PowerShell cmdlet: `Get-AzureADDirectoryRole | where {$_.DisplayName -eq "Directory Synchronization Accounts"} | Get-AzureADDirectoryRoleMember`</span><span class="sxs-lookup"><span data-stu-id="e2fd2-386">To get the list of existing Azure AD service accounts in your Azure AD, run the following Azure AD PowerShell cmdlet: `Get-AzureADDirectoryRole | where {$_.DisplayName -eq "Directory Synchronization Accounts"} | Get-AzureADDirectoryRoleMember`</span></span>

<span data-ttu-id="e2fd2-387">To remove unused Azure AD service accounts, run the following Azure AD PowerShell cmdlet: `Remove-AzureADUser -ObjectId <ObjectId-of-the-account-you-wish-to-remove>`</span><span class="sxs-lookup"><span data-stu-id="e2fd2-387">To remove unused Azure AD service accounts, run the following Azure AD PowerShell cmdlet: `Remove-AzureADUser -ObjectId <ObjectId-of-the-account-you-wish-to-remove>`</span></span>

## <a name="related-documentation"></a><span data-ttu-id="e2fd2-388">Related documentation</span><span class="sxs-lookup"><span data-stu-id="e2fd2-388">Related documentation</span></span>
<span data-ttu-id="e2fd2-389">If you did not read the documentation on [Integrating your on-premises identities with Azure Active Directory](../active-directory-aadconnect.md), the following table provides links to related topics.</span><span class="sxs-lookup"><span data-stu-id="e2fd2-389">If you did not read the documentation on [Integrating your on-premises identities with Azure Active Directory](../active-directory-aadconnect.md), the following table provides links to related topics.</span></span>

|<span data-ttu-id="e2fd2-390">Topic</span><span class="sxs-lookup"><span data-stu-id="e2fd2-390">Topic</span></span> |<span data-ttu-id="e2fd2-391">Link</span><span class="sxs-lookup"><span data-stu-id="e2fd2-391">Link</span></span>|  
| --- | --- |
|<span data-ttu-id="e2fd2-392">Download Azure AD Connect</span><span class="sxs-lookup"><span data-stu-id="e2fd2-392">Download Azure AD Connect</span></span> | [<span data-ttu-id="e2fd2-393">Download Azure AD Connect</span><span class="sxs-lookup"><span data-stu-id="e2fd2-393">Download Azure AD Connect</span></span>](http://go.microsoft.com/fwlink/?LinkId=615771)|
|<span data-ttu-id="e2fd2-394">Install using Express settings</span><span class="sxs-lookup"><span data-stu-id="e2fd2-394">Install using Express settings</span></span> | [<span data-ttu-id="e2fd2-395">Express installation of Azure AD Connect</span><span class="sxs-lookup"><span data-stu-id="e2fd2-395">Express installation of Azure AD Connect</span></span>](./active-directory-aadconnect-get-started-express.md)|
|<span data-ttu-id="e2fd2-396">Install using Customized settings</span><span class="sxs-lookup"><span data-stu-id="e2fd2-396">Install using Customized settings</span></span> | [<span data-ttu-id="e2fd2-397">Custom installation of Azure AD Connect</span><span class="sxs-lookup"><span data-stu-id="e2fd2-397">Custom installation of Azure AD Connect</span></span>](./active-directory-aadconnect-get-started-custom.md)|
|<span data-ttu-id="e2fd2-398">Upgrade from DirSync</span><span class="sxs-lookup"><span data-stu-id="e2fd2-398">Upgrade from DirSync</span></span> | [<span data-ttu-id="e2fd2-399">Upgrade from Azure AD sync tool (DirSync)</span><span class="sxs-lookup"><span data-stu-id="e2fd2-399">Upgrade from Azure AD sync tool (DirSync)</span></span>](./active-directory-aadconnect-dirsync-upgrade-get-started.md)|
|<span data-ttu-id="e2fd2-400">After installation</span><span class="sxs-lookup"><span data-stu-id="e2fd2-400">After installation</span></span> | [<span data-ttu-id="e2fd2-401">Verify the installation and assign licenses </span><span class="sxs-lookup"><span data-stu-id="e2fd2-401">Verify the installation and assign licenses </span></span>](active-directory-aadconnect-whats-next.md)|

## <a name="next-steps"></a><span data-ttu-id="e2fd2-402">Next steps</span><span class="sxs-lookup"><span data-stu-id="e2fd2-402">Next steps</span></span>
<span data-ttu-id="e2fd2-403">Learn more about [Integrating your on-premises identities with Azure Active Directory](../active-directory-aadconnect.md).</span><span class="sxs-lookup"><span data-stu-id="e2fd2-403">Learn more about [Integrating your on-premises identities with Azure Active Directory](../active-directory-aadconnect.md).</span></span>
