---
title: 'Azure AD Connect sync: Understanding Users, Groups, and Contacts | Microsoft Docs'
description: Explains users, groups, and contacts in Azure AD Connect sync.
services: active-directory
documentationcenter: ''
author: billmath
manager: mtillman
ms.assetid: 8d204647-213a-4519-bd62-49563c421602
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 01/15/2018
ms.component: hybrid
ms.author: billmath
ms.openlocfilehash: 740908a87752d4e3b94e0cd25fa7107c45b9f0d7
ms.sourcegitcommit: d1451406a010fd3aa854dc8e5b77dc5537d8050e
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 09/13/2018
ms.locfileid: "44819824"
---
# <a name="azure-ad-connect-sync-understanding-users-groups-and-contacts"></a><span data-ttu-id="f52cb-103">Azure AD Connect sync: Understanding Users, Groups, and Contacts</span><span class="sxs-lookup"><span data-stu-id="f52cb-103">Azure AD Connect sync: Understanding Users, Groups, and Contacts</span></span>
<span data-ttu-id="f52cb-104">There are several different reasons why you would have multiple Active Directory forests and there are several different deployment topologies.</span><span class="sxs-lookup"><span data-stu-id="f52cb-104">There are several different reasons why you would have multiple Active Directory forests and there are several different deployment topologies.</span></span> <span data-ttu-id="f52cb-105">Common models include an account-resource deployment and GAL sync’ed forests after a merger & acquisition.</span><span class="sxs-lookup"><span data-stu-id="f52cb-105">Common models include an account-resource deployment and GAL sync’ed forests after a merger & acquisition.</span></span> <span data-ttu-id="f52cb-106">But even if there are pure models, hybrid models are common as well.</span><span class="sxs-lookup"><span data-stu-id="f52cb-106">But even if there are pure models, hybrid models are common as well.</span></span> <span data-ttu-id="f52cb-107">The default configuration in Azure AD Connect sync does not assume any particular model but depending on how user matching was selected in the installation guide, different behaviors can be observed.</span><span class="sxs-lookup"><span data-stu-id="f52cb-107">The default configuration in Azure AD Connect sync does not assume any particular model but depending on how user matching was selected in the installation guide, different behaviors can be observed.</span></span>

<span data-ttu-id="f52cb-108">In this topic, we will go through how the default configuration behaves in certain topologies.</span><span class="sxs-lookup"><span data-stu-id="f52cb-108">In this topic, we will go through how the default configuration behaves in certain topologies.</span></span> <span data-ttu-id="f52cb-109">We will go through the configuration and the Synchronization Rules Editor can be used to look at the configuration.</span><span class="sxs-lookup"><span data-stu-id="f52cb-109">We will go through the configuration and the Synchronization Rules Editor can be used to look at the configuration.</span></span>

<span data-ttu-id="f52cb-110">There are a few general rules the configuration assumes:</span><span class="sxs-lookup"><span data-stu-id="f52cb-110">There are a few general rules the configuration assumes:</span></span>
* <span data-ttu-id="f52cb-111">Regardless of which order we import from the source Active Directories, the end result should always be the same.</span><span class="sxs-lookup"><span data-stu-id="f52cb-111">Regardless of which order we import from the source Active Directories, the end result should always be the same.</span></span>
* <span data-ttu-id="f52cb-112">An active account will always contribute sign-in information, including **userPrincipalName** and **sourceAnchor**.</span><span class="sxs-lookup"><span data-stu-id="f52cb-112">An active account will always contribute sign-in information, including **userPrincipalName** and **sourceAnchor**.</span></span>
* <span data-ttu-id="f52cb-113">A disabled account will contribute userPrincipalName and sourceAnchor, unless it is a linked mailbox, if there is no active account to be found.</span><span class="sxs-lookup"><span data-stu-id="f52cb-113">A disabled account will contribute userPrincipalName and sourceAnchor, unless it is a linked mailbox, if there is no active account to be found.</span></span>
* <span data-ttu-id="f52cb-114">An account with a linked mailbox will never be used for userPrincipalName and sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="f52cb-114">An account with a linked mailbox will never be used for userPrincipalName and sourceAnchor.</span></span> <span data-ttu-id="f52cb-115">It is assumed that an active account will be found later.</span><span class="sxs-lookup"><span data-stu-id="f52cb-115">It is assumed that an active account will be found later.</span></span>
* <span data-ttu-id="f52cb-116">A contact object might be provisioned to Azure AD as a contact or as a user.</span><span class="sxs-lookup"><span data-stu-id="f52cb-116">A contact object might be provisioned to Azure AD as a contact or as a user.</span></span> <span data-ttu-id="f52cb-117">You don’t really know until all source Active Directory forests have been processed.</span><span class="sxs-lookup"><span data-stu-id="f52cb-117">You don’t really know until all source Active Directory forests have been processed.</span></span>

## <a name="groups"></a><span data-ttu-id="f52cb-118">Groups</span><span class="sxs-lookup"><span data-stu-id="f52cb-118">Groups</span></span>
<span data-ttu-id="f52cb-119">Important points to be aware of when synchronizing groups from Active Directory to Azure AD:</span><span class="sxs-lookup"><span data-stu-id="f52cb-119">Important points to be aware of when synchronizing groups from Active Directory to Azure AD:</span></span>

* <span data-ttu-id="f52cb-120">Azure AD Connect excludes built-in security groups from directory synchronization.</span><span class="sxs-lookup"><span data-stu-id="f52cb-120">Azure AD Connect excludes built-in security groups from directory synchronization.</span></span>

* <span data-ttu-id="f52cb-121">Azure AD Connect does not support synchronizing [Primary Group memberships](https://technet.microsoft.com/library/cc771489(v=ws.11).aspx) to Azure AD.</span><span class="sxs-lookup"><span data-stu-id="f52cb-121">Azure AD Connect does not support synchronizing [Primary Group memberships](https://technet.microsoft.com/library/cc771489(v=ws.11).aspx) to Azure AD.</span></span>

* <span data-ttu-id="f52cb-122">Azure AD Connect does not support synchronizing [Dynamic Distribution Group memberships](https://technet.microsoft.com/library/bb123722(v=exchg.160).aspx) to Azure AD.</span><span class="sxs-lookup"><span data-stu-id="f52cb-122">Azure AD Connect does not support synchronizing [Dynamic Distribution Group memberships](https://technet.microsoft.com/library/bb123722(v=exchg.160).aspx) to Azure AD.</span></span>

* <span data-ttu-id="f52cb-123">To synchronize an Active Directory group to Azure AD as a mail-enabled group:</span><span class="sxs-lookup"><span data-stu-id="f52cb-123">To synchronize an Active Directory group to Azure AD as a mail-enabled group:</span></span>

    * <span data-ttu-id="f52cb-124">If the group's *proxyAddress* attribute is empty, its *mail* attribute must have a value</span><span class="sxs-lookup"><span data-stu-id="f52cb-124">If the group's *proxyAddress* attribute is empty, its *mail* attribute must have a value</span></span>

    * <span data-ttu-id="f52cb-125">If the group's *proxyAddress* attribute is non-empty, it must contain at least one SMTP proxy address value.</span><span class="sxs-lookup"><span data-stu-id="f52cb-125">If the group's *proxyAddress* attribute is non-empty, it must contain at least one SMTP proxy address value.</span></span> <span data-ttu-id="f52cb-126">Here are some examples:</span><span class="sxs-lookup"><span data-stu-id="f52cb-126">Here are some examples:</span></span>
    
      * <span data-ttu-id="f52cb-127">An Active Directory group whose proxyAddress attribute has value *{"X500:/0=contoso.com/ou=users/cn=testgroup"}* will not be mail-enabled in Azure AD.</span><span class="sxs-lookup"><span data-stu-id="f52cb-127">An Active Directory group whose proxyAddress attribute has value *{"X500:/0=contoso.com/ou=users/cn=testgroup"}* will not be mail-enabled in Azure AD.</span></span> <span data-ttu-id="f52cb-128">It does not have an SMTP address.</span><span class="sxs-lookup"><span data-stu-id="f52cb-128">It does not have an SMTP address.</span></span>
      
      * <span data-ttu-id="f52cb-129">An Active Directory group whose proxyAddress attribute has values *{"X500:/0=contoso.com/ou=users/cn=testgroup","SMTP:johndoe@contoso.com"}* will be mail-enabled in Azure AD.</span><span class="sxs-lookup"><span data-stu-id="f52cb-129">An Active Directory group whose proxyAddress attribute has values *{"X500:/0=contoso.com/ou=users/cn=testgroup","SMTP:johndoe@contoso.com"}* will be mail-enabled in Azure AD.</span></span>
      
      * <span data-ttu-id="f52cb-130">An Active Directory group whose proxyAddress attribute has values *{"X500:/0=contoso.com/ou=users/cn=testgroup", "smtp:johndoe@contoso.com"}* will also be mail-enabled in Azure AD.</span><span class="sxs-lookup"><span data-stu-id="f52cb-130">An Active Directory group whose proxyAddress attribute has values *{"X500:/0=contoso.com/ou=users/cn=testgroup", "smtp:johndoe@contoso.com"}* will also be mail-enabled in Azure AD.</span></span>

## <a name="contacts"></a><span data-ttu-id="f52cb-131">Contacts</span><span class="sxs-lookup"><span data-stu-id="f52cb-131">Contacts</span></span>
<span data-ttu-id="f52cb-132">Having contacts representing a user in a different forest is common after a merger & acquisition where a GALSync solution is bridging two or more Exchange forests.</span><span class="sxs-lookup"><span data-stu-id="f52cb-132">Having contacts representing a user in a different forest is common after a merger & acquisition where a GALSync solution is bridging two or more Exchange forests.</span></span> <span data-ttu-id="f52cb-133">The contact object is always joining from the connector space to the metaverse using the mail attribute.</span><span class="sxs-lookup"><span data-stu-id="f52cb-133">The contact object is always joining from the connector space to the metaverse using the mail attribute.</span></span> <span data-ttu-id="f52cb-134">If there is already a contact object or user object with the same mail address, the objects are joined together.</span><span class="sxs-lookup"><span data-stu-id="f52cb-134">If there is already a contact object or user object with the same mail address, the objects are joined together.</span></span> <span data-ttu-id="f52cb-135">This is configured in the rule **In from AD – Contact Join**.</span><span class="sxs-lookup"><span data-stu-id="f52cb-135">This is configured in the rule **In from AD – Contact Join**.</span></span> <span data-ttu-id="f52cb-136">There is also a rule named **In from AD – Contact Common** with an attribute flow to the metaverse attribute **sourceObjectType** with the constant **Contact**.</span><span class="sxs-lookup"><span data-stu-id="f52cb-136">There is also a rule named **In from AD – Contact Common** with an attribute flow to the metaverse attribute **sourceObjectType** with the constant **Contact**.</span></span> <span data-ttu-id="f52cb-137">This rule has very low precedence so if any user object is joined to the same metaverse object, then the rule **In from AD – User Common** will contribute the value User to this attribute.</span><span class="sxs-lookup"><span data-stu-id="f52cb-137">This rule has very low precedence so if any user object is joined to the same metaverse object, then the rule **In from AD – User Common** will contribute the value User to this attribute.</span></span> <span data-ttu-id="f52cb-138">With this rule, this attribute will have the value Contact if no user has been joined and the value User if at least one user has been found.</span><span class="sxs-lookup"><span data-stu-id="f52cb-138">With this rule, this attribute will have the value Contact if no user has been joined and the value User if at least one user has been found.</span></span>

<span data-ttu-id="f52cb-139">For provisioning an object to Azure AD, the outbound rule **Out to AAD – Contact Join** will create a contact object if the metaverse attribute **sourceObjectType** is set to **Contact**.</span><span class="sxs-lookup"><span data-stu-id="f52cb-139">For provisioning an object to Azure AD, the outbound rule **Out to AAD – Contact Join** will create a contact object if the metaverse attribute **sourceObjectType** is set to **Contact**.</span></span> <span data-ttu-id="f52cb-140">If this attribute is set to **User**, then the rule **Out to AAD – User Join** will create a user object instead.</span><span class="sxs-lookup"><span data-stu-id="f52cb-140">If this attribute is set to **User**, then the rule **Out to AAD – User Join** will create a user object instead.</span></span>
<span data-ttu-id="f52cb-141">It is possible that an object is promoted from Contact to User when more source Active Directories are imported and synchronized.</span><span class="sxs-lookup"><span data-stu-id="f52cb-141">It is possible that an object is promoted from Contact to User when more source Active Directories are imported and synchronized.</span></span>

<span data-ttu-id="f52cb-142">For example, in a GALSync topology we will find contact objects for everyone in the second forest when we import the first forest.</span><span class="sxs-lookup"><span data-stu-id="f52cb-142">For example, in a GALSync topology we will find contact objects for everyone in the second forest when we import the first forest.</span></span> <span data-ttu-id="f52cb-143">This will stage new contact objects in the AAD Connector.</span><span class="sxs-lookup"><span data-stu-id="f52cb-143">This will stage new contact objects in the AAD Connector.</span></span> <span data-ttu-id="f52cb-144">When we later import and synchronize the second forest, we will find the real users and join them to the existing metaverse objects.</span><span class="sxs-lookup"><span data-stu-id="f52cb-144">When we later import and synchronize the second forest, we will find the real users and join them to the existing metaverse objects.</span></span> <span data-ttu-id="f52cb-145">We will then delete the contact object in AAD and create a new user object instead.</span><span class="sxs-lookup"><span data-stu-id="f52cb-145">We will then delete the contact object in AAD and create a new user object instead.</span></span>

<span data-ttu-id="f52cb-146">If you have a topology where users are represented as contacts, make sure you select to match users on the mail attribute in the installation guide.</span><span class="sxs-lookup"><span data-stu-id="f52cb-146">If you have a topology where users are represented as contacts, make sure you select to match users on the mail attribute in the installation guide.</span></span> <span data-ttu-id="f52cb-147">If you select another option, then you will have an order-dependent configuration.</span><span class="sxs-lookup"><span data-stu-id="f52cb-147">If you select another option, then you will have an order-dependent configuration.</span></span> <span data-ttu-id="f52cb-148">Contact objects will always join on the mail attribute, but user objects will only join on the mail attribute if this option was selected in the installation guide.</span><span class="sxs-lookup"><span data-stu-id="f52cb-148">Contact objects will always join on the mail attribute, but user objects will only join on the mail attribute if this option was selected in the installation guide.</span></span> <span data-ttu-id="f52cb-149">You could then end up with two different objects in the metaverse with the same mail attribute if the contact object was imported before the user object.</span><span class="sxs-lookup"><span data-stu-id="f52cb-149">You could then end up with two different objects in the metaverse with the same mail attribute if the contact object was imported before the user object.</span></span> <span data-ttu-id="f52cb-150">During export to Azure AD, an error will be thrown.</span><span class="sxs-lookup"><span data-stu-id="f52cb-150">During export to Azure AD, an error will be thrown.</span></span> <span data-ttu-id="f52cb-151">This behavior is by design and would indicate bad data or that the topology was not correctly identified during the installation.</span><span class="sxs-lookup"><span data-stu-id="f52cb-151">This behavior is by design and would indicate bad data or that the topology was not correctly identified during the installation.</span></span>

## <a name="disabled-accounts"></a><span data-ttu-id="f52cb-152">Disabled accounts</span><span class="sxs-lookup"><span data-stu-id="f52cb-152">Disabled accounts</span></span>
<span data-ttu-id="f52cb-153">Disabled accounts are synchronized as well to Azure AD.</span><span class="sxs-lookup"><span data-stu-id="f52cb-153">Disabled accounts are synchronized as well to Azure AD.</span></span> <span data-ttu-id="f52cb-154">Disabled accounts are common to represent resources in Exchange, for example conference rooms.</span><span class="sxs-lookup"><span data-stu-id="f52cb-154">Disabled accounts are common to represent resources in Exchange, for example conference rooms.</span></span> <span data-ttu-id="f52cb-155">The exception is users with a linked mailbox; as previously mentioned, these will never provision an account to Azure AD.</span><span class="sxs-lookup"><span data-stu-id="f52cb-155">The exception is users with a linked mailbox; as previously mentioned, these will never provision an account to Azure AD.</span></span>

<span data-ttu-id="f52cb-156">The assumption is that if a disabled user account is found, then we will not find another active account later and the object is provisioned to Azure AD with the userPrincipalName and sourceAnchor found.</span><span class="sxs-lookup"><span data-stu-id="f52cb-156">The assumption is that if a disabled user account is found, then we will not find another active account later and the object is provisioned to Azure AD with the userPrincipalName and sourceAnchor found.</span></span> <span data-ttu-id="f52cb-157">In case another active account will join to the same metaverse object, then its userPrincipalName and sourceAnchor will be used.</span><span class="sxs-lookup"><span data-stu-id="f52cb-157">In case another active account will join to the same metaverse object, then its userPrincipalName and sourceAnchor will be used.</span></span>

## <a name="changing-sourceanchor"></a><span data-ttu-id="f52cb-158">Changing sourceAnchor</span><span class="sxs-lookup"><span data-stu-id="f52cb-158">Changing sourceAnchor</span></span>
<span data-ttu-id="f52cb-159">When an object has been exported to Azure AD then it is not allowed to change the sourceAnchor anymore.</span><span class="sxs-lookup"><span data-stu-id="f52cb-159">When an object has been exported to Azure AD then it is not allowed to change the sourceAnchor anymore.</span></span> <span data-ttu-id="f52cb-160">When the object has been exported the metaverse attribute **cloudSourceAnchor** is set with the **sourceAnchor** value accepted by Azure AD.</span><span class="sxs-lookup"><span data-stu-id="f52cb-160">When the object has been exported the metaverse attribute **cloudSourceAnchor** is set with the **sourceAnchor** value accepted by Azure AD.</span></span> <span data-ttu-id="f52cb-161">If **sourceAnchor** is changed and not match **cloudSourceAnchor**, the rule **Out to AAD – User Join** will throw the error **sourceAnchor attribute has changed**.</span><span class="sxs-lookup"><span data-stu-id="f52cb-161">If **sourceAnchor** is changed and not match **cloudSourceAnchor**, the rule **Out to AAD – User Join** will throw the error **sourceAnchor attribute has changed**.</span></span> <span data-ttu-id="f52cb-162">In this case, the configuration or data must be corrected so the same sourceAnchor is present in the metaverse again before the object can be synchronized again.</span><span class="sxs-lookup"><span data-stu-id="f52cb-162">In this case, the configuration or data must be corrected so the same sourceAnchor is present in the metaverse again before the object can be synchronized again.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="f52cb-163">Additional Resources</span><span class="sxs-lookup"><span data-stu-id="f52cb-163">Additional Resources</span></span>
* [<span data-ttu-id="f52cb-164">Azure AD Connect Sync: Customizing Synchronization options</span><span class="sxs-lookup"><span data-stu-id="f52cb-164">Azure AD Connect Sync: Customizing Synchronization options</span></span>](active-directory-aadconnectsync-whatis.md)
* [<span data-ttu-id="f52cb-165">Integrating your on-premises identities with Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="f52cb-165">Integrating your on-premises identities with Azure Active Directory</span></span>](active-directory-aadconnect.md)

