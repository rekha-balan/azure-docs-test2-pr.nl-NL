---
title: 'Azure Active Directory Connect sync: Configure preferred data location for Multi-Geo capabilities in Office 365 | Microsoft Docs'
description: Describes how to put your Office 365 user resources close to the user with Azure Active Directory Connect sync.
services: active-directory
documentationcenter: ''
author: billmath
manager: mtillman
editor: ''
ms.assetid: ''
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/30/2018
ms.component: hybrid
ms.author: billmath
ms.openlocfilehash: 6272cc8b2f34211aa6e5b85dbb508ade74cee637
ms.sourcegitcommit: d1451406a010fd3aa854dc8e5b77dc5537d8050e
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 09/13/2018
ms.locfileid: "44865388"
---
# <a name="azure-active-directory-connect-sync-configure-preferred-data-location-for-office-365-resources"></a><span data-ttu-id="fb78d-103">Azure Active Directory Connect sync: Configure preferred data location for Office 365 resources</span><span class="sxs-lookup"><span data-stu-id="fb78d-103">Azure Active Directory Connect sync: Configure preferred data location for Office 365 resources</span></span>
<span data-ttu-id="fb78d-104">The purpose of this topic is to walk you through how to configure the attribute for preferred data location in Azure Active Directory (Azure AD) Connect sync. When someone uses Multi-Geo capabilities in Office 365, you use this attribute to designate the geo-location of the user’s Office 365 data.</span><span class="sxs-lookup"><span data-stu-id="fb78d-104">The purpose of this topic is to walk you through how to configure the attribute for preferred data location in Azure Active Directory (Azure AD) Connect sync. When someone uses Multi-Geo capabilities in Office 365, you use this attribute to designate the geo-location of the user’s Office 365 data.</span></span> <span data-ttu-id="fb78d-105">(The terms *region* and *geo* are used interchangeably.)</span><span class="sxs-lookup"><span data-stu-id="fb78d-105">(The terms *region* and *geo* are used interchangeably.)</span></span>

## <a name="enable-synchronization-of-preferred-data-location"></a><span data-ttu-id="fb78d-106">Enable synchronization of preferred data location</span><span class="sxs-lookup"><span data-stu-id="fb78d-106">Enable synchronization of preferred data location</span></span>
<span data-ttu-id="fb78d-107">By default, Office 365 resources for your users are located in the same geo as your Azure AD tenant.</span><span class="sxs-lookup"><span data-stu-id="fb78d-107">By default, Office 365 resources for your users are located in the same geo as your Azure AD tenant.</span></span> <span data-ttu-id="fb78d-108">For example, if your tenant is located in North America, then the users' Exchange mailboxes are also located in North America.</span><span class="sxs-lookup"><span data-stu-id="fb78d-108">For example, if your tenant is located in North America, then the users' Exchange mailboxes are also located in North America.</span></span> <span data-ttu-id="fb78d-109">For a multinational organization, this might not be optimal.</span><span class="sxs-lookup"><span data-stu-id="fb78d-109">For a multinational organization, this might not be optimal.</span></span>

<span data-ttu-id="fb78d-110">By setting the attribute **preferredDataLocation**, you can define a user's geo.</span><span class="sxs-lookup"><span data-stu-id="fb78d-110">By setting the attribute **preferredDataLocation**, you can define a user's geo.</span></span> <span data-ttu-id="fb78d-111">You can have the user's Office 365 resources, such as the mailbox and OneDrive, in the same geo as the user, and still have one tenant for your entire organization.</span><span class="sxs-lookup"><span data-stu-id="fb78d-111">You can have the user's Office 365 resources, such as the mailbox and OneDrive, in the same geo as the user, and still have one tenant for your entire organization.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="fb78d-112">Multi-Geo is currently available to customers with a minimum of 5,000 Office 365 Services subscriptions.</span><span class="sxs-lookup"><span data-stu-id="fb78d-112">Multi-Geo is currently available to customers with a minimum of 5,000 Office 365 Services subscriptions.</span></span> <span data-ttu-id="fb78d-113">Please talk to your Microsoft representative for details.</span><span class="sxs-lookup"><span data-stu-id="fb78d-113">Please talk to your Microsoft representative for details.</span></span>
>
>

<span data-ttu-id="fb78d-114">A list of all geos for Office 365 can be found in [Where is your data located?](https://aka.ms/datamaps).</span><span class="sxs-lookup"><span data-stu-id="fb78d-114">A list of all geos for Office 365 can be found in [Where is your data located?](https://aka.ms/datamaps).</span></span>

<span data-ttu-id="fb78d-115">The geos in Office 365 available for Multi-Geo are:</span><span class="sxs-lookup"><span data-stu-id="fb78d-115">The geos in Office 365 available for Multi-Geo are:</span></span>

| <span data-ttu-id="fb78d-116">Geo</span><span class="sxs-lookup"><span data-stu-id="fb78d-116">Geo</span></span> | <span data-ttu-id="fb78d-117">preferredDataLocation value</span><span class="sxs-lookup"><span data-stu-id="fb78d-117">preferredDataLocation value</span></span> |
| --- | --- |
| <span data-ttu-id="fb78d-118">Asia Pacific</span><span class="sxs-lookup"><span data-stu-id="fb78d-118">Asia Pacific</span></span> | <span data-ttu-id="fb78d-119">APC</span><span class="sxs-lookup"><span data-stu-id="fb78d-119">APC</span></span> |
| <span data-ttu-id="fb78d-120">Australia</span><span class="sxs-lookup"><span data-stu-id="fb78d-120">Australia</span></span> | <span data-ttu-id="fb78d-121">AUS</span><span class="sxs-lookup"><span data-stu-id="fb78d-121">AUS</span></span> |
| <span data-ttu-id="fb78d-122">Canada</span><span class="sxs-lookup"><span data-stu-id="fb78d-122">Canada</span></span> | <span data-ttu-id="fb78d-123">CAN</span><span class="sxs-lookup"><span data-stu-id="fb78d-123">CAN</span></span> |
| <span data-ttu-id="fb78d-124">European Union</span><span class="sxs-lookup"><span data-stu-id="fb78d-124">European Union</span></span> | <span data-ttu-id="fb78d-125">EUR</span><span class="sxs-lookup"><span data-stu-id="fb78d-125">EUR</span></span> |
| <span data-ttu-id="fb78d-126">France</span><span class="sxs-lookup"><span data-stu-id="fb78d-126">France</span></span> | <span data-ttu-id="fb78d-127">FRA</span><span class="sxs-lookup"><span data-stu-id="fb78d-127">FRA</span></span> |
| <span data-ttu-id="fb78d-128">India</span><span class="sxs-lookup"><span data-stu-id="fb78d-128">India</span></span> | <span data-ttu-id="fb78d-129">IND</span><span class="sxs-lookup"><span data-stu-id="fb78d-129">IND</span></span> |
| <span data-ttu-id="fb78d-130">Japan</span><span class="sxs-lookup"><span data-stu-id="fb78d-130">Japan</span></span> | <span data-ttu-id="fb78d-131">JPN</span><span class="sxs-lookup"><span data-stu-id="fb78d-131">JPN</span></span> |
| <span data-ttu-id="fb78d-132">Korea</span><span class="sxs-lookup"><span data-stu-id="fb78d-132">Korea</span></span> | <span data-ttu-id="fb78d-133">KOR</span><span class="sxs-lookup"><span data-stu-id="fb78d-133">KOR</span></span> |
| <span data-ttu-id="fb78d-134">United Kingdom</span><span class="sxs-lookup"><span data-stu-id="fb78d-134">United Kingdom</span></span> | <span data-ttu-id="fb78d-135">GBR</span><span class="sxs-lookup"><span data-stu-id="fb78d-135">GBR</span></span> |
| <span data-ttu-id="fb78d-136">United States</span><span class="sxs-lookup"><span data-stu-id="fb78d-136">United States</span></span> | <span data-ttu-id="fb78d-137">NAM</span><span class="sxs-lookup"><span data-stu-id="fb78d-137">NAM</span></span> |

* <span data-ttu-id="fb78d-138">If a geo is not listed in this table (for example, South America), then it cannot be used for Multi-Geo.</span><span class="sxs-lookup"><span data-stu-id="fb78d-138">If a geo is not listed in this table (for example, South America), then it cannot be used for Multi-Geo.</span></span>
* <span data-ttu-id="fb78d-139">The India geo is only available to customers with billing address and licenses purchased in this geo.</span><span class="sxs-lookup"><span data-stu-id="fb78d-139">The India geo is only available to customers with billing address and licenses purchased in this geo.</span></span>
* <span data-ttu-id="fb78d-140">Not all Office 365 workloads support the use of setting a user's geo.</span><span class="sxs-lookup"><span data-stu-id="fb78d-140">Not all Office 365 workloads support the use of setting a user's geo.</span></span>

### <a name="azure-ad-connect-support-for-synchronization"></a><span data-ttu-id="fb78d-141">Azure AD Connect support for synchronization</span><span class="sxs-lookup"><span data-stu-id="fb78d-141">Azure AD Connect support for synchronization</span></span>

<span data-ttu-id="fb78d-142">Azure AD Connect supports synchronization of the **preferredDataLocation** attribute for **User** objects in version 1.1.524.0 and later.</span><span class="sxs-lookup"><span data-stu-id="fb78d-142">Azure AD Connect supports synchronization of the **preferredDataLocation** attribute for **User** objects in version 1.1.524.0 and later.</span></span> <span data-ttu-id="fb78d-143">Specifically:</span><span class="sxs-lookup"><span data-stu-id="fb78d-143">Specifically:</span></span>

* <span data-ttu-id="fb78d-144">The schema of the object type **User** in the Azure AD Connector is extended to include the **preferredDataLocation** attribute.</span><span class="sxs-lookup"><span data-stu-id="fb78d-144">The schema of the object type **User** in the Azure AD Connector is extended to include the **preferredDataLocation** attribute.</span></span> <span data-ttu-id="fb78d-145">The attribute is of the type, single-valued string.</span><span class="sxs-lookup"><span data-stu-id="fb78d-145">The attribute is of the type, single-valued string.</span></span>
* <span data-ttu-id="fb78d-146">The schema of the object type **Person** in the metaverse is extended to include the **preferredDataLocation** attribute.</span><span class="sxs-lookup"><span data-stu-id="fb78d-146">The schema of the object type **Person** in the metaverse is extended to include the **preferredDataLocation** attribute.</span></span> <span data-ttu-id="fb78d-147">The attribute is of the type, single-valued string.</span><span class="sxs-lookup"><span data-stu-id="fb78d-147">The attribute is of the type, single-valued string.</span></span>

<span data-ttu-id="fb78d-148">By default, **preferredDataLocation** is not enabled for synchronization.</span><span class="sxs-lookup"><span data-stu-id="fb78d-148">By default, **preferredDataLocation** is not enabled for synchronization.</span></span> <span data-ttu-id="fb78d-149">This feature is intended for larger organizations.</span><span class="sxs-lookup"><span data-stu-id="fb78d-149">This feature is intended for larger organizations.</span></span> <span data-ttu-id="fb78d-150">You must also identify an attribute to hold the Office 365 geo for your users, because there is no **preferredDataLocation** attribute in on-premises Active Directory.</span><span class="sxs-lookup"><span data-stu-id="fb78d-150">You must also identify an attribute to hold the Office 365 geo for your users, because there is no **preferredDataLocation** attribute in on-premises Active Directory.</span></span> <span data-ttu-id="fb78d-151">This is going to be different for each organization.</span><span class="sxs-lookup"><span data-stu-id="fb78d-151">This is going to be different for each organization.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="fb78d-152">Azure AD allows the **preferredDataLocation** attribute on **cloud User objects** to be directly configured by using Azure AD PowerShell.</span><span class="sxs-lookup"><span data-stu-id="fb78d-152">Azure AD allows the **preferredDataLocation** attribute on **cloud User objects** to be directly configured by using Azure AD PowerShell.</span></span> <span data-ttu-id="fb78d-153">Azure AD no longer allows the **preferredDataLocation** attribute on **synchronized User objects** to be directly configured by using Azure AD PowerShell.</span><span class="sxs-lookup"><span data-stu-id="fb78d-153">Azure AD no longer allows the **preferredDataLocation** attribute on **synchronized User objects** to be directly configured by using Azure AD PowerShell.</span></span> <span data-ttu-id="fb78d-154">To configure this attribute on **synchronized User objects**, you must use Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="fb78d-154">To configure this attribute on **synchronized User objects**, you must use Azure AD Connect.</span></span>

<span data-ttu-id="fb78d-155">Before enabling synchronization:</span><span class="sxs-lookup"><span data-stu-id="fb78d-155">Before enabling synchronization:</span></span>

* <span data-ttu-id="fb78d-156">Decide which on-premises Active Directory attribute to be used as the source attribute.</span><span class="sxs-lookup"><span data-stu-id="fb78d-156">Decide which on-premises Active Directory attribute to be used as the source attribute.</span></span> <span data-ttu-id="fb78d-157">It should be of the type, **single-valued string**.</span><span class="sxs-lookup"><span data-stu-id="fb78d-157">It should be of the type, **single-valued string**.</span></span> <span data-ttu-id="fb78d-158">In the steps that follow, one of the **extensionAttributes** is used.</span><span class="sxs-lookup"><span data-stu-id="fb78d-158">In the steps that follow, one of the **extensionAttributes** is used.</span></span>
* <span data-ttu-id="fb78d-159">If you have previously configured the **preferredDataLocation** attribute on existing **synchronized User objects** in Azure AD by using Azure AD PowerShell, you must backport the attribute values to the corresponding **User** objects in on-premises Active Directory.</span><span class="sxs-lookup"><span data-stu-id="fb78d-159">If you have previously configured the **preferredDataLocation** attribute on existing **synchronized User objects** in Azure AD by using Azure AD PowerShell, you must backport the attribute values to the corresponding **User** objects in on-premises Active Directory.</span></span>

    > [!IMPORTANT]
    > <span data-ttu-id="fb78d-160">If you do not backport these values, Azure AD Connect removes the existing attribute values in Azure AD when synchronization for the **preferredDataLocation** attribute is enabled.</span><span class="sxs-lookup"><span data-stu-id="fb78d-160">If you do not backport these values, Azure AD Connect removes the existing attribute values in Azure AD when synchronization for the **preferredDataLocation** attribute is enabled.</span></span>

* <span data-ttu-id="fb78d-161">Configure the source attribute on at least a couple of on-premises Active Directory User objects now.</span><span class="sxs-lookup"><span data-stu-id="fb78d-161">Configure the source attribute on at least a couple of on-premises Active Directory User objects now.</span></span> <span data-ttu-id="fb78d-162">You can use this for verification later.</span><span class="sxs-lookup"><span data-stu-id="fb78d-162">You can use this for verification later.</span></span>

<span data-ttu-id="fb78d-163">The following sections provide the steps to enable synchronization of the **preferredDataLocation** attribute.</span><span class="sxs-lookup"><span data-stu-id="fb78d-163">The following sections provide the steps to enable synchronization of the **preferredDataLocation** attribute.</span></span>

> [!NOTE]
> <span data-ttu-id="fb78d-164">The steps are described in the context of an Azure AD deployment with single-forest topology, and without custom synchronization rules.</span><span class="sxs-lookup"><span data-stu-id="fb78d-164">The steps are described in the context of an Azure AD deployment with single-forest topology, and without custom synchronization rules.</span></span> <span data-ttu-id="fb78d-165">If you have a multi-forest topology, custom synchronization rules configured, or have a staging server, you should adjust the steps accordingly.</span><span class="sxs-lookup"><span data-stu-id="fb78d-165">If you have a multi-forest topology, custom synchronization rules configured, or have a staging server, you should adjust the steps accordingly.</span></span>

## <a name="step-1-disable-sync-scheduler-and-verify-there-is-no-synchronization-in-progress"></a><span data-ttu-id="fb78d-166">Step 1: Disable sync scheduler and verify there is no synchronization in progress</span><span class="sxs-lookup"><span data-stu-id="fb78d-166">Step 1: Disable sync scheduler and verify there is no synchronization in progress</span></span>
<span data-ttu-id="fb78d-167">To avoid unintended changes being exported to Azure AD, ensure that no synchronization takes place while you are in the middle of updating synchronization rules.</span><span class="sxs-lookup"><span data-stu-id="fb78d-167">To avoid unintended changes being exported to Azure AD, ensure that no synchronization takes place while you are in the middle of updating synchronization rules.</span></span> <span data-ttu-id="fb78d-168">To disable the built-in sync scheduler:</span><span class="sxs-lookup"><span data-stu-id="fb78d-168">To disable the built-in sync scheduler:</span></span>

1. <span data-ttu-id="fb78d-169">Start a PowerShell session on the Azure AD Connect server.</span><span class="sxs-lookup"><span data-stu-id="fb78d-169">Start a PowerShell session on the Azure AD Connect server.</span></span>
2. <span data-ttu-id="fb78d-170">Disable scheduled synchronization by running this cmdlet: `Set-ADSyncScheduler -SyncCycleEnabled $false`.</span><span class="sxs-lookup"><span data-stu-id="fb78d-170">Disable scheduled synchronization by running this cmdlet: `Set-ADSyncScheduler -SyncCycleEnabled $false`.</span></span>
3. <span data-ttu-id="fb78d-171">Start the **Synchronization Service Manager** by going to **START** > **Synchronization Service**.</span><span class="sxs-lookup"><span data-stu-id="fb78d-171">Start the **Synchronization Service Manager** by going to **START** > **Synchronization Service**.</span></span>
4. <span data-ttu-id="fb78d-172">Select the **Operations** tab, and confirm there is no operation with the status *in progress*.</span><span class="sxs-lookup"><span data-stu-id="fb78d-172">Select the **Operations** tab, and confirm there is no operation with the status *in progress*.</span></span>

![Screenshot of Synchronization Service Manager](./media/active-directory-aadconnectsync-feature-preferreddatalocation/preferreddatalocation-step1.png)

## <a name="step-2-add-the-source-attribute-to-the-on-premises-active-directory-connector-schema"></a><span data-ttu-id="fb78d-174">Step 2: Add the source attribute to the on-premises Active Directory Connector schema</span><span class="sxs-lookup"><span data-stu-id="fb78d-174">Step 2: Add the source attribute to the on-premises Active Directory Connector schema</span></span>
<span data-ttu-id="fb78d-175">Not all Azure AD attributes are imported into the on-premises Active Directory Connector space.</span><span class="sxs-lookup"><span data-stu-id="fb78d-175">Not all Azure AD attributes are imported into the on-premises Active Directory Connector space.</span></span> <span data-ttu-id="fb78d-176">If you have selected to use an attribute that is not synchronized by default, then you need to import it.</span><span class="sxs-lookup"><span data-stu-id="fb78d-176">If you have selected to use an attribute that is not synchronized by default, then you need to import it.</span></span> <span data-ttu-id="fb78d-177">To add the source attribute to the list of the imported attributes:</span><span class="sxs-lookup"><span data-stu-id="fb78d-177">To add the source attribute to the list of the imported attributes:</span></span>

1. <span data-ttu-id="fb78d-178">Select the **Connectors** tab in the Synchronization Service Manager.</span><span class="sxs-lookup"><span data-stu-id="fb78d-178">Select the **Connectors** tab in the Synchronization Service Manager.</span></span>
2. <span data-ttu-id="fb78d-179">Right-click the on-premises Active Directory Connector, and select **Properties**.</span><span class="sxs-lookup"><span data-stu-id="fb78d-179">Right-click the on-premises Active Directory Connector, and select **Properties**.</span></span>
3. <span data-ttu-id="fb78d-180">In the pop-up dialog box, go to the **Select Attributes** tab.</span><span class="sxs-lookup"><span data-stu-id="fb78d-180">In the pop-up dialog box, go to the **Select Attributes** tab.</span></span>
4. <span data-ttu-id="fb78d-181">Make sure the source attribute you selected to use is checked in the attribute list.</span><span class="sxs-lookup"><span data-stu-id="fb78d-181">Make sure the source attribute you selected to use is checked in the attribute list.</span></span> <span data-ttu-id="fb78d-182">If you do not see your attribute, select the **Show All** check box.</span><span class="sxs-lookup"><span data-stu-id="fb78d-182">If you do not see your attribute, select the **Show All** check box.</span></span>
5. <span data-ttu-id="fb78d-183">To save, select **OK**.</span><span class="sxs-lookup"><span data-stu-id="fb78d-183">To save, select **OK**.</span></span>

![Screenshot of Synchronization Service Manager and Properties dialog box](./media/active-directory-aadconnectsync-feature-preferreddatalocation/preferreddatalocation-step2.png)

## <a name="step-3-add-preferreddatalocation-to-the-azure-ad-connector-schema"></a><span data-ttu-id="fb78d-185">Step 3: Add **preferredDataLocation** to the Azure AD Connector schema</span><span class="sxs-lookup"><span data-stu-id="fb78d-185">Step 3: Add **preferredDataLocation** to the Azure AD Connector schema</span></span>
<span data-ttu-id="fb78d-186">By default, the **preferredDataLocation** attribute is not imported into the Azure AD Connector space.</span><span class="sxs-lookup"><span data-stu-id="fb78d-186">By default, the **preferredDataLocation** attribute is not imported into the Azure AD Connector space.</span></span> <span data-ttu-id="fb78d-187">To add it to the list of imported attributes:</span><span class="sxs-lookup"><span data-stu-id="fb78d-187">To add it to the list of imported attributes:</span></span>

1. <span data-ttu-id="fb78d-188">Select the **Connectors** tab in the Synchronization Service Manager.</span><span class="sxs-lookup"><span data-stu-id="fb78d-188">Select the **Connectors** tab in the Synchronization Service Manager.</span></span>
2. <span data-ttu-id="fb78d-189">Right-click the Azure AD connector, and select **Properties**.</span><span class="sxs-lookup"><span data-stu-id="fb78d-189">Right-click the Azure AD connector, and select **Properties**.</span></span>
3. <span data-ttu-id="fb78d-190">In the pop-up dialog box, go to the **Select Attributes** tab.</span><span class="sxs-lookup"><span data-stu-id="fb78d-190">In the pop-up dialog box, go to the **Select Attributes** tab.</span></span>
4. <span data-ttu-id="fb78d-191">Select the **preferredDataLocation** attribute in the list.</span><span class="sxs-lookup"><span data-stu-id="fb78d-191">Select the **preferredDataLocation** attribute in the list.</span></span>
5. <span data-ttu-id="fb78d-192">To save, select **OK**.</span><span class="sxs-lookup"><span data-stu-id="fb78d-192">To save, select **OK**.</span></span>

![Screenshot of Synchronization Service Manager and Properties dialog box](./media/active-directory-aadconnectsync-feature-preferreddatalocation/preferreddatalocation-step3.png)

## <a name="step-4-create-an-inbound-synchronization-rule"></a><span data-ttu-id="fb78d-194">Step 4: Create an inbound synchronization rule</span><span class="sxs-lookup"><span data-stu-id="fb78d-194">Step 4: Create an inbound synchronization rule</span></span>
<span data-ttu-id="fb78d-195">The inbound synchronization rule permits the attribute value to flow from the source attribute in on-premises Active Directory to the metaverse.</span><span class="sxs-lookup"><span data-stu-id="fb78d-195">The inbound synchronization rule permits the attribute value to flow from the source attribute in on-premises Active Directory to the metaverse.</span></span>

1. <span data-ttu-id="fb78d-196">Start the **Synchronization Rules Editor** by going to **START** > **Synchronization Rules Editor**.</span><span class="sxs-lookup"><span data-stu-id="fb78d-196">Start the **Synchronization Rules Editor** by going to **START** > **Synchronization Rules Editor**.</span></span>
2. <span data-ttu-id="fb78d-197">Set the search filter **Direction** to be **Inbound**.</span><span class="sxs-lookup"><span data-stu-id="fb78d-197">Set the search filter **Direction** to be **Inbound**.</span></span>
3. <span data-ttu-id="fb78d-198">To create a new inbound rule, select **Add new rule**.</span><span class="sxs-lookup"><span data-stu-id="fb78d-198">To create a new inbound rule, select **Add new rule**.</span></span>
4. <span data-ttu-id="fb78d-199">Under the **Description** tab, provide the following configuration:</span><span class="sxs-lookup"><span data-stu-id="fb78d-199">Under the **Description** tab, provide the following configuration:</span></span>

    | <span data-ttu-id="fb78d-200">Attribute</span><span class="sxs-lookup"><span data-stu-id="fb78d-200">Attribute</span></span> | <span data-ttu-id="fb78d-201">Value</span><span class="sxs-lookup"><span data-stu-id="fb78d-201">Value</span></span> | <span data-ttu-id="fb78d-202">Details</span><span class="sxs-lookup"><span data-stu-id="fb78d-202">Details</span></span> |
    | --- | --- | --- |
    | <span data-ttu-id="fb78d-203">Name</span><span class="sxs-lookup"><span data-stu-id="fb78d-203">Name</span></span> | <span data-ttu-id="fb78d-204">*Provide a name*</span><span class="sxs-lookup"><span data-stu-id="fb78d-204">*Provide a name*</span></span> | <span data-ttu-id="fb78d-205">For example, “In from AD – User preferredDataLocation”</span><span class="sxs-lookup"><span data-stu-id="fb78d-205">For example, “In from AD – User preferredDataLocation”</span></span> |
    | <span data-ttu-id="fb78d-206">Description</span><span class="sxs-lookup"><span data-stu-id="fb78d-206">Description</span></span> | <span data-ttu-id="fb78d-207">*Provide a custom description*</span><span class="sxs-lookup"><span data-stu-id="fb78d-207">*Provide a custom description*</span></span> |  |
    | <span data-ttu-id="fb78d-208">Connected System</span><span class="sxs-lookup"><span data-stu-id="fb78d-208">Connected System</span></span> | <span data-ttu-id="fb78d-209">*Pick the on-premises Active Directory Connector*</span><span class="sxs-lookup"><span data-stu-id="fb78d-209">*Pick the on-premises Active Directory Connector*</span></span> |  |
    | <span data-ttu-id="fb78d-210">Connected System Object Type</span><span class="sxs-lookup"><span data-stu-id="fb78d-210">Connected System Object Type</span></span> | <span data-ttu-id="fb78d-211">**User**</span><span class="sxs-lookup"><span data-stu-id="fb78d-211">**User**</span></span> |  |
    | <span data-ttu-id="fb78d-212">Metaverse Object Type</span><span class="sxs-lookup"><span data-stu-id="fb78d-212">Metaverse Object Type</span></span> | <span data-ttu-id="fb78d-213">**Person**</span><span class="sxs-lookup"><span data-stu-id="fb78d-213">**Person**</span></span> |  |
    | <span data-ttu-id="fb78d-214">Link Type</span><span class="sxs-lookup"><span data-stu-id="fb78d-214">Link Type</span></span> | <span data-ttu-id="fb78d-215">**Join**</span><span class="sxs-lookup"><span data-stu-id="fb78d-215">**Join**</span></span> |  |
    | <span data-ttu-id="fb78d-216">Precedence</span><span class="sxs-lookup"><span data-stu-id="fb78d-216">Precedence</span></span> | <span data-ttu-id="fb78d-217">*Choose a number between 1–99*</span><span class="sxs-lookup"><span data-stu-id="fb78d-217">*Choose a number between 1–99*</span></span> | <span data-ttu-id="fb78d-218">1–99 is reserved for custom sync rules.</span><span class="sxs-lookup"><span data-stu-id="fb78d-218">1–99 is reserved for custom sync rules.</span></span> <span data-ttu-id="fb78d-219">Do not pick a value that is used by another synchronization rule.</span><span class="sxs-lookup"><span data-stu-id="fb78d-219">Do not pick a value that is used by another synchronization rule.</span></span> |

5. <span data-ttu-id="fb78d-220">Keep the **Scoping filter** empty, to include all objects.</span><span class="sxs-lookup"><span data-stu-id="fb78d-220">Keep the **Scoping filter** empty, to include all objects.</span></span> <span data-ttu-id="fb78d-221">You might need to tweak the scoping filter according to your Azure AD Connect deployment.</span><span class="sxs-lookup"><span data-stu-id="fb78d-221">You might need to tweak the scoping filter according to your Azure AD Connect deployment.</span></span>
6. <span data-ttu-id="fb78d-222">Go to the **Transformation tab**, and implement the following transformation rule:</span><span class="sxs-lookup"><span data-stu-id="fb78d-222">Go to the **Transformation tab**, and implement the following transformation rule:</span></span>

    | <span data-ttu-id="fb78d-223">Flow type</span><span class="sxs-lookup"><span data-stu-id="fb78d-223">Flow type</span></span> | <span data-ttu-id="fb78d-224">Target attribute</span><span class="sxs-lookup"><span data-stu-id="fb78d-224">Target attribute</span></span> | <span data-ttu-id="fb78d-225">Source</span><span class="sxs-lookup"><span data-stu-id="fb78d-225">Source</span></span> | <span data-ttu-id="fb78d-226">Apply once</span><span class="sxs-lookup"><span data-stu-id="fb78d-226">Apply once</span></span> | <span data-ttu-id="fb78d-227">Merge type</span><span class="sxs-lookup"><span data-stu-id="fb78d-227">Merge type</span></span> |
    | --- | --- | --- | --- | --- |
    |<span data-ttu-id="fb78d-228">Direct</span><span class="sxs-lookup"><span data-stu-id="fb78d-228">Direct</span></span> | <span data-ttu-id="fb78d-229">preferredDataLocation</span><span class="sxs-lookup"><span data-stu-id="fb78d-229">preferredDataLocation</span></span> | <span data-ttu-id="fb78d-230">Pick the source attribute</span><span class="sxs-lookup"><span data-stu-id="fb78d-230">Pick the source attribute</span></span> | <span data-ttu-id="fb78d-231">Unchecked</span><span class="sxs-lookup"><span data-stu-id="fb78d-231">Unchecked</span></span> | <span data-ttu-id="fb78d-232">Update</span><span class="sxs-lookup"><span data-stu-id="fb78d-232">Update</span></span> |

7. <span data-ttu-id="fb78d-233">To create the inbound rule, select **Add**.</span><span class="sxs-lookup"><span data-stu-id="fb78d-233">To create the inbound rule, select **Add**.</span></span>

![Screenshot of Create inbound synchronization rule](./media/active-directory-aadconnectsync-feature-preferreddatalocation/preferreddatalocation-step4.png)

## <a name="step-5-create-an-outbound-synchronization-rule"></a><span data-ttu-id="fb78d-235">Step 5: Create an outbound synchronization rule</span><span class="sxs-lookup"><span data-stu-id="fb78d-235">Step 5: Create an outbound synchronization rule</span></span>
<span data-ttu-id="fb78d-236">The outbound synchronization rule permits the attribute value to flow from the metaverse to the **preferredDataLocation** attribute in Azure AD:</span><span class="sxs-lookup"><span data-stu-id="fb78d-236">The outbound synchronization rule permits the attribute value to flow from the metaverse to the **preferredDataLocation** attribute in Azure AD:</span></span>

1. <span data-ttu-id="fb78d-237">Go to the **Synchronization Rules Editor**.</span><span class="sxs-lookup"><span data-stu-id="fb78d-237">Go to the **Synchronization Rules Editor**.</span></span>
2. <span data-ttu-id="fb78d-238">Set the search filter **Direction** to be **Outbound**.</span><span class="sxs-lookup"><span data-stu-id="fb78d-238">Set the search filter **Direction** to be **Outbound**.</span></span>
3. <span data-ttu-id="fb78d-239">Select **Add new rule**.</span><span class="sxs-lookup"><span data-stu-id="fb78d-239">Select **Add new rule**.</span></span>
4. <span data-ttu-id="fb78d-240">Under the **Description** tab, provide the following configuration:</span><span class="sxs-lookup"><span data-stu-id="fb78d-240">Under the **Description** tab, provide the following configuration:</span></span>

    | <span data-ttu-id="fb78d-241">Attribute</span><span class="sxs-lookup"><span data-stu-id="fb78d-241">Attribute</span></span> | <span data-ttu-id="fb78d-242">Value</span><span class="sxs-lookup"><span data-stu-id="fb78d-242">Value</span></span> | <span data-ttu-id="fb78d-243">Details</span><span class="sxs-lookup"><span data-stu-id="fb78d-243">Details</span></span> |
    | ----- | ------ | --- |
    | <span data-ttu-id="fb78d-244">Name</span><span class="sxs-lookup"><span data-stu-id="fb78d-244">Name</span></span> | <span data-ttu-id="fb78d-245">*Provide a name*</span><span class="sxs-lookup"><span data-stu-id="fb78d-245">*Provide a name*</span></span> | <span data-ttu-id="fb78d-246">For example, “Out to Azure AD – User preferredDataLocation”</span><span class="sxs-lookup"><span data-stu-id="fb78d-246">For example, “Out to Azure AD – User preferredDataLocation”</span></span> |
    | <span data-ttu-id="fb78d-247">Description</span><span class="sxs-lookup"><span data-stu-id="fb78d-247">Description</span></span> | <span data-ttu-id="fb78d-248">*Provide a description*</span><span class="sxs-lookup"><span data-stu-id="fb78d-248">*Provide a description*</span></span> ||
    | <span data-ttu-id="fb78d-249">Connected System</span><span class="sxs-lookup"><span data-stu-id="fb78d-249">Connected System</span></span> | <span data-ttu-id="fb78d-250">*Select the Azure AD Connector*</span><span class="sxs-lookup"><span data-stu-id="fb78d-250">*Select the Azure AD Connector*</span></span> ||
    | <span data-ttu-id="fb78d-251">Connected System Object Type</span><span class="sxs-lookup"><span data-stu-id="fb78d-251">Connected System Object Type</span></span> | <span data-ttu-id="fb78d-252">**User**</span><span class="sxs-lookup"><span data-stu-id="fb78d-252">**User**</span></span> ||
    | <span data-ttu-id="fb78d-253">Metaverse Object Type</span><span class="sxs-lookup"><span data-stu-id="fb78d-253">Metaverse Object Type</span></span> | <span data-ttu-id="fb78d-254">**Person**</span><span class="sxs-lookup"><span data-stu-id="fb78d-254">**Person**</span></span> ||
    | <span data-ttu-id="fb78d-255">Link Type</span><span class="sxs-lookup"><span data-stu-id="fb78d-255">Link Type</span></span> | <span data-ttu-id="fb78d-256">**Join**</span><span class="sxs-lookup"><span data-stu-id="fb78d-256">**Join**</span></span> ||
    | <span data-ttu-id="fb78d-257">Precedence</span><span class="sxs-lookup"><span data-stu-id="fb78d-257">Precedence</span></span> | <span data-ttu-id="fb78d-258">*Choose a number between 1–99*</span><span class="sxs-lookup"><span data-stu-id="fb78d-258">*Choose a number between 1–99*</span></span> | <span data-ttu-id="fb78d-259">1–99 is reserved for custom sync rules.</span><span class="sxs-lookup"><span data-stu-id="fb78d-259">1–99 is reserved for custom sync rules.</span></span> <span data-ttu-id="fb78d-260">Do not pick a value that is used by another synchronization rule.</span><span class="sxs-lookup"><span data-stu-id="fb78d-260">Do not pick a value that is used by another synchronization rule.</span></span> |

5. <span data-ttu-id="fb78d-261">Go to the **Scoping filter** tab, and add a single scoping filter group with two clauses:</span><span class="sxs-lookup"><span data-stu-id="fb78d-261">Go to the **Scoping filter** tab, and add a single scoping filter group with two clauses:</span></span>

    | <span data-ttu-id="fb78d-262">Attribute</span><span class="sxs-lookup"><span data-stu-id="fb78d-262">Attribute</span></span> | <span data-ttu-id="fb78d-263">Operator</span><span class="sxs-lookup"><span data-stu-id="fb78d-263">Operator</span></span> | <span data-ttu-id="fb78d-264">Value</span><span class="sxs-lookup"><span data-stu-id="fb78d-264">Value</span></span> |
    | --- | --- | --- |
    | <span data-ttu-id="fb78d-265">sourceObjectType</span><span class="sxs-lookup"><span data-stu-id="fb78d-265">sourceObjectType</span></span> | <span data-ttu-id="fb78d-266">EQUAL</span><span class="sxs-lookup"><span data-stu-id="fb78d-266">EQUAL</span></span> | <span data-ttu-id="fb78d-267">User</span><span class="sxs-lookup"><span data-stu-id="fb78d-267">User</span></span> |
    | <span data-ttu-id="fb78d-268">cloudMastered</span><span class="sxs-lookup"><span data-stu-id="fb78d-268">cloudMastered</span></span> | <span data-ttu-id="fb78d-269">NOTEQUAL</span><span class="sxs-lookup"><span data-stu-id="fb78d-269">NOTEQUAL</span></span> | <span data-ttu-id="fb78d-270">True</span><span class="sxs-lookup"><span data-stu-id="fb78d-270">True</span></span> |

    <span data-ttu-id="fb78d-271">Scoping filter determines which Azure AD objects this outbound synchronization rule is applied to.</span><span class="sxs-lookup"><span data-stu-id="fb78d-271">Scoping filter determines which Azure AD objects this outbound synchronization rule is applied to.</span></span> <span data-ttu-id="fb78d-272">In this example, we use the same scoping filter from “Out to AD – User Identity” OOB (out-of-box) synchronization rule.</span><span class="sxs-lookup"><span data-stu-id="fb78d-272">In this example, we use the same scoping filter from “Out to AD – User Identity” OOB (out-of-box) synchronization rule.</span></span> <span data-ttu-id="fb78d-273">It prevents the synchronization rule from being applied to **User** objects that are not synchronized from on-premises Active Directory.</span><span class="sxs-lookup"><span data-stu-id="fb78d-273">It prevents the synchronization rule from being applied to **User** objects that are not synchronized from on-premises Active Directory.</span></span> <span data-ttu-id="fb78d-274">You might need to tweak the scoping filter according to your Azure AD Connect deployment.</span><span class="sxs-lookup"><span data-stu-id="fb78d-274">You might need to tweak the scoping filter according to your Azure AD Connect deployment.</span></span>

6. <span data-ttu-id="fb78d-275">Go to the **Transformation** tab, and implement the following transformation rule:</span><span class="sxs-lookup"><span data-stu-id="fb78d-275">Go to the **Transformation** tab, and implement the following transformation rule:</span></span>

    | <span data-ttu-id="fb78d-276">Flow type</span><span class="sxs-lookup"><span data-stu-id="fb78d-276">Flow type</span></span> | <span data-ttu-id="fb78d-277">Target attribute</span><span class="sxs-lookup"><span data-stu-id="fb78d-277">Target attribute</span></span> | <span data-ttu-id="fb78d-278">Source</span><span class="sxs-lookup"><span data-stu-id="fb78d-278">Source</span></span> | <span data-ttu-id="fb78d-279">Apply once</span><span class="sxs-lookup"><span data-stu-id="fb78d-279">Apply once</span></span> | <span data-ttu-id="fb78d-280">Merge type</span><span class="sxs-lookup"><span data-stu-id="fb78d-280">Merge type</span></span> |
    | --- | --- | --- | --- | --- |
    | <span data-ttu-id="fb78d-281">Direct</span><span class="sxs-lookup"><span data-stu-id="fb78d-281">Direct</span></span> | <span data-ttu-id="fb78d-282">preferredDataLocation</span><span class="sxs-lookup"><span data-stu-id="fb78d-282">preferredDataLocation</span></span> | <span data-ttu-id="fb78d-283">preferredDataLocation</span><span class="sxs-lookup"><span data-stu-id="fb78d-283">preferredDataLocation</span></span> | <span data-ttu-id="fb78d-284">Unchecked</span><span class="sxs-lookup"><span data-stu-id="fb78d-284">Unchecked</span></span> | <span data-ttu-id="fb78d-285">Update</span><span class="sxs-lookup"><span data-stu-id="fb78d-285">Update</span></span> |

7. <span data-ttu-id="fb78d-286">Close **Add** to create the outbound rule.</span><span class="sxs-lookup"><span data-stu-id="fb78d-286">Close **Add** to create the outbound rule.</span></span>

![Screenshot of Create outbound synchronization rule](./media/active-directory-aadconnectsync-feature-preferreddatalocation/preferreddatalocation-step5.png)

## <a name="step-6-run-full-synchronization-cycle"></a><span data-ttu-id="fb78d-288">Step 6: Run full synchronization cycle</span><span class="sxs-lookup"><span data-stu-id="fb78d-288">Step 6: Run full synchronization cycle</span></span>
<span data-ttu-id="fb78d-289">In general, full synchronization cycle is required.</span><span class="sxs-lookup"><span data-stu-id="fb78d-289">In general, full synchronization cycle is required.</span></span> <span data-ttu-id="fb78d-290">This is because you have added new attributes to both the Active Directory and Azure AD Connector schema, and introduced custom synchronization rules.</span><span class="sxs-lookup"><span data-stu-id="fb78d-290">This is because you have added new attributes to both the Active Directory and Azure AD Connector schema, and introduced custom synchronization rules.</span></span> <span data-ttu-id="fb78d-291">Verify the changes before exporting them to Azure AD.</span><span class="sxs-lookup"><span data-stu-id="fb78d-291">Verify the changes before exporting them to Azure AD.</span></span> <span data-ttu-id="fb78d-292">You can use the following steps to verify the changes, while manually running the steps that make up a full synchronization cycle.</span><span class="sxs-lookup"><span data-stu-id="fb78d-292">You can use the following steps to verify the changes, while manually running the steps that make up a full synchronization cycle.</span></span>

1. <span data-ttu-id="fb78d-293">Run **Full import** on the on-premises Active Directory Connector:</span><span class="sxs-lookup"><span data-stu-id="fb78d-293">Run **Full import** on the on-premises Active Directory Connector:</span></span>

   1. <span data-ttu-id="fb78d-294">Go to the **Operations** tab in the Synchronization Service Manager.</span><span class="sxs-lookup"><span data-stu-id="fb78d-294">Go to the **Operations** tab in the Synchronization Service Manager.</span></span>
   2. <span data-ttu-id="fb78d-295">Right-click the **on-premises Active Directory Connector**, and select **Run**.</span><span class="sxs-lookup"><span data-stu-id="fb78d-295">Right-click the **on-premises Active Directory Connector**, and select **Run**.</span></span>
   3. <span data-ttu-id="fb78d-296">In the dialog box, select **Full Import**, and select **OK**.</span><span class="sxs-lookup"><span data-stu-id="fb78d-296">In the dialog box, select **Full Import**, and select **OK**.</span></span>
   4. <span data-ttu-id="fb78d-297">Wait for the operation to complete.</span><span class="sxs-lookup"><span data-stu-id="fb78d-297">Wait for the operation to complete.</span></span>

    > [!NOTE]
    > <span data-ttu-id="fb78d-298">You can skip full import on the on-premises Active Directory Connector if the source attribute is already included in the list of imported attributes.</span><span class="sxs-lookup"><span data-stu-id="fb78d-298">You can skip full import on the on-premises Active Directory Connector if the source attribute is already included in the list of imported attributes.</span></span> <span data-ttu-id="fb78d-299">In other words, you did not have to make any change during step 2 earlier in this article.</span><span class="sxs-lookup"><span data-stu-id="fb78d-299">In other words, you did not have to make any change during step 2 earlier in this article.</span></span>

2. <span data-ttu-id="fb78d-300">Run **Full import** on the Azure AD Connector:</span><span class="sxs-lookup"><span data-stu-id="fb78d-300">Run **Full import** on the Azure AD Connector:</span></span>

   1. <span data-ttu-id="fb78d-301">Right-click the **Azure AD Connector**, and select **Run**.</span><span class="sxs-lookup"><span data-stu-id="fb78d-301">Right-click the **Azure AD Connector**, and select **Run**.</span></span>
   2. <span data-ttu-id="fb78d-302">In the dialog box, select **Full Import**, and select **OK**.</span><span class="sxs-lookup"><span data-stu-id="fb78d-302">In the dialog box, select **Full Import**, and select **OK**.</span></span>
   3. <span data-ttu-id="fb78d-303">Wait for the operation to complete.</span><span class="sxs-lookup"><span data-stu-id="fb78d-303">Wait for the operation to complete.</span></span>

3. <span data-ttu-id="fb78d-304">Verify the synchronization rule changes on an existing **User** object.</span><span class="sxs-lookup"><span data-stu-id="fb78d-304">Verify the synchronization rule changes on an existing **User** object.</span></span>

   <span data-ttu-id="fb78d-305">The source attribute from on-premises Active Directory, and **preferredDataLocation** from Azure AD, have been imported into each respective connector space.</span><span class="sxs-lookup"><span data-stu-id="fb78d-305">The source attribute from on-premises Active Directory, and **preferredDataLocation** from Azure AD, have been imported into each respective connector space.</span></span> <span data-ttu-id="fb78d-306">Before proceeding with the full synchronization step, do a preview on an existing **User** object in the on-premises Active Directory Connector space.</span><span class="sxs-lookup"><span data-stu-id="fb78d-306">Before proceeding with the full synchronization step, do a preview on an existing **User** object in the on-premises Active Directory Connector space.</span></span> <span data-ttu-id="fb78d-307">The object you picked should have the source attribute populated.</span><span class="sxs-lookup"><span data-stu-id="fb78d-307">The object you picked should have the source attribute populated.</span></span> <span data-ttu-id="fb78d-308">A successful preview with **preferredDataLocation** populated in the metaverse is a good indicator that you have configured the synchronization rules correctly.</span><span class="sxs-lookup"><span data-stu-id="fb78d-308">A successful preview with **preferredDataLocation** populated in the metaverse is a good indicator that you have configured the synchronization rules correctly.</span></span> <span data-ttu-id="fb78d-309">For information about how to do a preview, see [Verify the change](active-directory-aadconnectsync-change-the-configuration.md#verify-the-change).</span><span class="sxs-lookup"><span data-stu-id="fb78d-309">For information about how to do a preview, see [Verify the change](active-directory-aadconnectsync-change-the-configuration.md#verify-the-change).</span></span>

4. <span data-ttu-id="fb78d-310">Run **Full Synchronization** on the on-premises Active Directory Connector:</span><span class="sxs-lookup"><span data-stu-id="fb78d-310">Run **Full Synchronization** on the on-premises Active Directory Connector:</span></span>

   1. <span data-ttu-id="fb78d-311">Right-click the **on-premises Active Directory Connector**, and select **Run**.</span><span class="sxs-lookup"><span data-stu-id="fb78d-311">Right-click the **on-premises Active Directory Connector**, and select **Run**.</span></span>
   2. <span data-ttu-id="fb78d-312">In the dialog box, select **Full Synchronization**, and select **OK**.</span><span class="sxs-lookup"><span data-stu-id="fb78d-312">In the dialog box, select **Full Synchronization**, and select **OK**.</span></span>
   3. <span data-ttu-id="fb78d-313">Wait for the operation to complete.</span><span class="sxs-lookup"><span data-stu-id="fb78d-313">Wait for the operation to complete.</span></span>

5. <span data-ttu-id="fb78d-314">Verify **Pending Exports** to Azure AD:</span><span class="sxs-lookup"><span data-stu-id="fb78d-314">Verify **Pending Exports** to Azure AD:</span></span>

   1. <span data-ttu-id="fb78d-315">Right-click the **Azure AD Connector**, and select **Search Connector Space**.</span><span class="sxs-lookup"><span data-stu-id="fb78d-315">Right-click the **Azure AD Connector**, and select **Search Connector Space**.</span></span>
   2. <span data-ttu-id="fb78d-316">In the **Search Connector Space** dialog box:</span><span class="sxs-lookup"><span data-stu-id="fb78d-316">In the **Search Connector Space** dialog box:</span></span>

        <span data-ttu-id="fb78d-317">a.</span><span class="sxs-lookup"><span data-stu-id="fb78d-317">a.</span></span> <span data-ttu-id="fb78d-318">Set **Scope** to **Pending Export**.</span><span class="sxs-lookup"><span data-stu-id="fb78d-318">Set **Scope** to **Pending Export**.</span></span><br>
        <span data-ttu-id="fb78d-319">b.</span><span class="sxs-lookup"><span data-stu-id="fb78d-319">b.</span></span> <span data-ttu-id="fb78d-320">Select all three check boxes, including **Add, Modify, and Delete**.</span><span class="sxs-lookup"><span data-stu-id="fb78d-320">Select all three check boxes, including **Add, Modify, and Delete**.</span></span><br>
        <span data-ttu-id="fb78d-321">c.</span><span class="sxs-lookup"><span data-stu-id="fb78d-321">c.</span></span> <span data-ttu-id="fb78d-322">To view the list of objects with changes to be exported, select **Search**.</span><span class="sxs-lookup"><span data-stu-id="fb78d-322">To view the list of objects with changes to be exported, select **Search**.</span></span> <span data-ttu-id="fb78d-323">To        examine the changes for a given object, double-click the object.</span><span class="sxs-lookup"><span data-stu-id="fb78d-323">To        examine the changes for a given object, double-click the object.</span></span><br>
        <span data-ttu-id="fb78d-324">d.</span><span class="sxs-lookup"><span data-stu-id="fb78d-324">d.</span></span> <span data-ttu-id="fb78d-325">Verify that the changes are expected.</span><span class="sxs-lookup"><span data-stu-id="fb78d-325">Verify that the changes are expected.</span></span>

6. <span data-ttu-id="fb78d-326">Run **Export** on the **Azure AD Connector**</span><span class="sxs-lookup"><span data-stu-id="fb78d-326">Run **Export** on the **Azure AD Connector**</span></span>

   1. <span data-ttu-id="fb78d-327">Right-click the **Azure AD Connector**, and select **Run**.</span><span class="sxs-lookup"><span data-stu-id="fb78d-327">Right-click the **Azure AD Connector**, and select **Run**.</span></span>
   2. <span data-ttu-id="fb78d-328">In the **Run Connector** dialog box, select **Export**, and select **OK**.</span><span class="sxs-lookup"><span data-stu-id="fb78d-328">In the **Run Connector** dialog box, select **Export**, and select **OK**.</span></span>
   3. <span data-ttu-id="fb78d-329">Wait for the operation to complete.</span><span class="sxs-lookup"><span data-stu-id="fb78d-329">Wait for the operation to complete.</span></span>

> [!NOTE]
> <span data-ttu-id="fb78d-330">You might notice that the steps do not include the full synchronization step on the Azure AD Connector, or the export step on the Active Directory Connector.</span><span class="sxs-lookup"><span data-stu-id="fb78d-330">You might notice that the steps do not include the full synchronization step on the Azure AD Connector, or the export step on the Active Directory Connector.</span></span> <span data-ttu-id="fb78d-331">The steps are not required, because the attribute values are flowing from on-premises Active Directory to Azure AD only.</span><span class="sxs-lookup"><span data-stu-id="fb78d-331">The steps are not required, because the attribute values are flowing from on-premises Active Directory to Azure AD only.</span></span>

## <a name="step-7-re-enable-sync-scheduler"></a><span data-ttu-id="fb78d-332">Step 7: Re-enable sync scheduler</span><span class="sxs-lookup"><span data-stu-id="fb78d-332">Step 7: Re-enable sync scheduler</span></span>
<span data-ttu-id="fb78d-333">Re-enable the built-in sync scheduler:</span><span class="sxs-lookup"><span data-stu-id="fb78d-333">Re-enable the built-in sync scheduler:</span></span>

1. <span data-ttu-id="fb78d-334">Start a PowerShell session.</span><span class="sxs-lookup"><span data-stu-id="fb78d-334">Start a PowerShell session.</span></span>
2. <span data-ttu-id="fb78d-335">Re-enable scheduled synchronization by running this cmdlet: `Set-ADSyncScheduler -SyncCycleEnabled $true`</span><span class="sxs-lookup"><span data-stu-id="fb78d-335">Re-enable scheduled synchronization by running this cmdlet: `Set-ADSyncScheduler -SyncCycleEnabled $true`</span></span>

## <a name="step-8-verify-the-result"></a><span data-ttu-id="fb78d-336">Step 8: Verify the result</span><span class="sxs-lookup"><span data-stu-id="fb78d-336">Step 8: Verify the result</span></span>
<span data-ttu-id="fb78d-337">It is now time to verify the configuration and enable it for your users.</span><span class="sxs-lookup"><span data-stu-id="fb78d-337">It is now time to verify the configuration and enable it for your users.</span></span>

1. <span data-ttu-id="fb78d-338">Add the geo to the selected attribute on a user.</span><span class="sxs-lookup"><span data-stu-id="fb78d-338">Add the geo to the selected attribute on a user.</span></span> <span data-ttu-id="fb78d-339">The list of available geos can be found in [this table](#enable-synchronization-of-preferreddatalocation).</span><span class="sxs-lookup"><span data-stu-id="fb78d-339">The list of available geos can be found in [this table](#enable-synchronization-of-preferreddatalocation).</span></span>  
<span data-ttu-id="fb78d-340">![Screenshot of AD attribute added to a user](./media/active-directory-aadconnectsync-feature-preferreddatalocation/preferreddatalocation-adattribute.png)</span><span class="sxs-lookup"><span data-stu-id="fb78d-340">![Screenshot of AD attribute added to a user](./media/active-directory-aadconnectsync-feature-preferreddatalocation/preferreddatalocation-adattribute.png)</span></span>
2. <span data-ttu-id="fb78d-341">Wait for the attribute to be synchronized to Azure AD.</span><span class="sxs-lookup"><span data-stu-id="fb78d-341">Wait for the attribute to be synchronized to Azure AD.</span></span>
3. <span data-ttu-id="fb78d-342">Using Exchange Online PowerShell, verify that the mailbox region has been set correctly.</span><span class="sxs-lookup"><span data-stu-id="fb78d-342">Using Exchange Online PowerShell, verify that the mailbox region has been set correctly.</span></span>  
![Screenshot of Exchange Online PowerShell](./media/active-directory-aadconnectsync-feature-preferreddatalocation/preferreddatalocation-mailboxregion.png)  
<span data-ttu-id="fb78d-344">Assuming your tenant has been marked to be able to use this feature, the mailbox is moved to the correct geo.</span><span class="sxs-lookup"><span data-stu-id="fb78d-344">Assuming your tenant has been marked to be able to use this feature, the mailbox is moved to the correct geo.</span></span> <span data-ttu-id="fb78d-345">This can be verified by looking at the server name where the mailbox is located.</span><span class="sxs-lookup"><span data-stu-id="fb78d-345">This can be verified by looking at the server name where the mailbox is located.</span></span>
4. <span data-ttu-id="fb78d-346">To verify that this setting has been effective over many mailboxes, use the script in the [TechNet gallery](https://gallery.technet.microsoft.com/office/PowerShell-Script-to-a6bbfc2e).</span><span class="sxs-lookup"><span data-stu-id="fb78d-346">To verify that this setting has been effective over many mailboxes, use the script in the [TechNet gallery](https://gallery.technet.microsoft.com/office/PowerShell-Script-to-a6bbfc2e).</span></span> <span data-ttu-id="fb78d-347">This script also has a list of the server prefixes of all Office 365 datacenters, and which geo it is located in.</span><span class="sxs-lookup"><span data-stu-id="fb78d-347">This script also has a list of the server prefixes of all Office 365 datacenters, and which geo it is located in.</span></span> <span data-ttu-id="fb78d-348">It can be used as a reference in the previous step to verify the location of the mailbox.</span><span class="sxs-lookup"><span data-stu-id="fb78d-348">It can be used as a reference in the previous step to verify the location of the mailbox.</span></span>

## <a name="next-steps"></a><span data-ttu-id="fb78d-349">Next steps</span><span class="sxs-lookup"><span data-stu-id="fb78d-349">Next steps</span></span>

<span data-ttu-id="fb78d-350">Learn more about Multi-Geo in Office 365:</span><span class="sxs-lookup"><span data-stu-id="fb78d-350">Learn more about Multi-Geo in Office 365:</span></span>

* [<span data-ttu-id="fb78d-351">Multi-Geo sessions at Ignite</span><span class="sxs-lookup"><span data-stu-id="fb78d-351">Multi-Geo sessions at Ignite</span></span>](https://aka.ms/MultiGeoIgnite)
* [<span data-ttu-id="fb78d-352">Multi-Geo in OneDrive</span><span class="sxs-lookup"><span data-stu-id="fb78d-352">Multi-Geo in OneDrive</span></span>](https://aka.ms/OneDriveMultiGeo)
* [<span data-ttu-id="fb78d-353">Multi-Geo in SharePoint Online</span><span class="sxs-lookup"><span data-stu-id="fb78d-353">Multi-Geo in SharePoint Online</span></span>](https://aka.ms/SharePointMultiGeo)

<span data-ttu-id="fb78d-354">Learn more about the configuration model in the sync engine:</span><span class="sxs-lookup"><span data-stu-id="fb78d-354">Learn more about the configuration model in the sync engine:</span></span>

* <span data-ttu-id="fb78d-355">Read more about the configuration model in [Understanding Declarative Provisioning](active-directory-aadconnectsync-understanding-declarative-provisioning.md).</span><span class="sxs-lookup"><span data-stu-id="fb78d-355">Read more about the configuration model in [Understanding Declarative Provisioning](active-directory-aadconnectsync-understanding-declarative-provisioning.md).</span></span>
* <span data-ttu-id="fb78d-356">Read more about the expression language in [Understanding Declarative Provisioning Expressions](active-directory-aadconnectsync-understanding-declarative-provisioning-expressions.md).</span><span class="sxs-lookup"><span data-stu-id="fb78d-356">Read more about the expression language in [Understanding Declarative Provisioning Expressions](active-directory-aadconnectsync-understanding-declarative-provisioning-expressions.md).</span></span>

<span data-ttu-id="fb78d-357">Overview topics:</span><span class="sxs-lookup"><span data-stu-id="fb78d-357">Overview topics:</span></span>

* [<span data-ttu-id="fb78d-358">Azure AD Connect sync: Understand and customize synchronization</span><span class="sxs-lookup"><span data-stu-id="fb78d-358">Azure AD Connect sync: Understand and customize synchronization</span></span>](active-directory-aadconnectsync-whatis.md)
* [<span data-ttu-id="fb78d-359">Integrating your on-premises identities with Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="fb78d-359">Integrating your on-premises identities with Azure Active Directory</span></span>](active-directory-aadconnect.md)
