---
title: 'Azure AD Connect: Upgrade from a previous version | Microsoft Docs'
description: Explains the different methods to upgrade to the latest release of Azure Active Directory Connect, including an in-place upgrade and a swing migration.
services: active-directory
documentationcenter: ''
author: AndKjell
manager: femila
editor: ''
ms.assetid: 31f084d8-2b89-478c-9079-76cf92e6618f
ms.service: active-directory
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: Identity
ms.date: 02/08/2017
ms.author: billmath
ms.openlocfilehash: a978254f7e79627f4b43efbe24e4f8836839ac18
ms.sourcegitcommit: 5b9d839c0c0a94b293fdafe1d6e5429506c07e05
ms.translationtype: HT
ms.contentlocale: nl-NL
ms.lasthandoff: 08/02/2018
ms.locfileid: "44554533"
---
# <a name="azure-ad-connect-upgrade-from-a-previous-version-to-the-latest"></a><span data-ttu-id="feb72-103">Azure AD Connect: Upgrade from a previous version to the latest</span><span class="sxs-lookup"><span data-stu-id="feb72-103">Azure AD Connect: Upgrade from a previous version to the latest</span></span>
<span data-ttu-id="feb72-104">This topic describes the different methods that you can use to upgrade your Azure Active Directory (Azure AD) Connect installation to the latest release.</span><span class="sxs-lookup"><span data-stu-id="feb72-104">This topic describes the different methods that you can use to upgrade your Azure Active Directory (Azure AD) Connect installation to the latest release.</span></span> <span data-ttu-id="feb72-105">We recommend that you keep yourself current with the releases of Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="feb72-105">We recommend that you keep yourself current with the releases of Azure AD Connect.</span></span> <span data-ttu-id="feb72-106">You also use the steps in the [Swing migration](#swing-migration) section when you make a substantial configuration change.</span><span class="sxs-lookup"><span data-stu-id="feb72-106">You also use the steps in the [Swing migration](#swing-migration) section when you make a substantial configuration change.</span></span>

<span data-ttu-id="feb72-107">If you want to upgrade from DirSync, see [Upgrade from Azure AD sync tool (DirSync)](active-directory-aadconnect-dirsync-upgrade-get-started.md) instead.</span><span class="sxs-lookup"><span data-stu-id="feb72-107">If you want to upgrade from DirSync, see [Upgrade from Azure AD sync tool (DirSync)](active-directory-aadconnect-dirsync-upgrade-get-started.md) instead.</span></span>

<span data-ttu-id="feb72-108">There are a few different strategies that you can use to upgrade Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="feb72-108">There are a few different strategies that you can use to upgrade Azure AD Connect.</span></span>

| <span data-ttu-id="feb72-109">Method</span><span class="sxs-lookup"><span data-stu-id="feb72-109">Method</span></span> | <span data-ttu-id="feb72-110">Description</span><span class="sxs-lookup"><span data-stu-id="feb72-110">Description</span></span> |
| --- | --- |
| [<span data-ttu-id="feb72-111">Automatic upgrade</span><span class="sxs-lookup"><span data-stu-id="feb72-111">Automatic upgrade</span></span>](active-directory-aadconnect-feature-automatic-upgrade.md) |<span data-ttu-id="feb72-112">This is the easiest method for customers with an express installation.</span><span class="sxs-lookup"><span data-stu-id="feb72-112">This is the easiest method for customers with an express installation.</span></span> |
| [<span data-ttu-id="feb72-113">In-place upgrade</span><span class="sxs-lookup"><span data-stu-id="feb72-113">In-place upgrade</span></span>](#in-place-upgrade) |<span data-ttu-id="feb72-114">If you have a single server, you can upgrade the installation in-place on the same server.</span><span class="sxs-lookup"><span data-stu-id="feb72-114">If you have a single server, you can upgrade the installation in-place on the same server.</span></span> |
| [<span data-ttu-id="feb72-115">Swing migration</span><span class="sxs-lookup"><span data-stu-id="feb72-115">Swing migration</span></span>](#swing-migration) |<span data-ttu-id="feb72-116">With two servers, you can prepare one of the servers with the new release or configuration, and change the active server when you're ready.</span><span class="sxs-lookup"><span data-stu-id="feb72-116">With two servers, you can prepare one of the servers with the new release or configuration, and change the active server when you're ready.</span></span> |

<span data-ttu-id="feb72-117">For permissions information, see the [permissions required for an upgrade](active-directory-aadconnect-accounts-permissions.md#upgrade).</span><span class="sxs-lookup"><span data-stu-id="feb72-117">For permissions information, see the [permissions required for an upgrade](active-directory-aadconnect-accounts-permissions.md#upgrade).</span></span>

> [!NOTE]
> <span data-ttu-id="feb72-118">After you've enabled your new Azure AD Connect server to start synchronizing changes to Azure AD, you must not roll back to using DirSync or Azure AD Sync. Downgrading from Azure AD Connect to legacy clients, including DirSync and Azure AD Sync, isn't supported and can lead to issues such as data loss in Azure AD.</span><span class="sxs-lookup"><span data-stu-id="feb72-118">After you've enabled your new Azure AD Connect server to start synchronizing changes to Azure AD, you must not roll back to using DirSync or Azure AD Sync. Downgrading from Azure AD Connect to legacy clients, including DirSync and Azure AD Sync, isn't supported and can lead to issues such as data loss in Azure AD.</span></span>

## <a name="in-place-upgrade"></a><span data-ttu-id="feb72-119">In-place upgrade</span><span class="sxs-lookup"><span data-stu-id="feb72-119">In-place upgrade</span></span>
<span data-ttu-id="feb72-120">An in-place upgrade works for moving from Azure AD Sync or Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="feb72-120">An in-place upgrade works for moving from Azure AD Sync or Azure AD Connect.</span></span> <span data-ttu-id="feb72-121">It doesn't work for moving from DirSync or for a solution with Forefront Identity Manager (FIM) + Azure AD Connector.</span><span class="sxs-lookup"><span data-stu-id="feb72-121">It doesn't work for moving from DirSync or for a solution with Forefront Identity Manager (FIM) + Azure AD Connector.</span></span>

<span data-ttu-id="feb72-122">This method is preferred when you have a single server and less than about 100,000 objects.</span><span class="sxs-lookup"><span data-stu-id="feb72-122">This method is preferred when you have a single server and less than about 100,000 objects.</span></span> <span data-ttu-id="feb72-123">If there are any changes to the out-of-box sync rules, a full import and full synchronization occur after the upgrade.</span><span class="sxs-lookup"><span data-stu-id="feb72-123">If there are any changes to the out-of-box sync rules, a full import and full synchronization occur after the upgrade.</span></span> <span data-ttu-id="feb72-124">This method ensures that the new configuration is applied to all existing objects in the system.</span><span class="sxs-lookup"><span data-stu-id="feb72-124">This method ensures that the new configuration is applied to all existing objects in the system.</span></span> <span data-ttu-id="feb72-125">This run might take a few hours, depending on the number of objects that are in scope of the sync engine.</span><span class="sxs-lookup"><span data-stu-id="feb72-125">This run might take a few hours, depending on the number of objects that are in scope of the sync engine.</span></span> <span data-ttu-id="feb72-126">The normal delta synchronization scheduler (which synchronizes every 30 minutes by default) is suspended, but password synchronization continues.</span><span class="sxs-lookup"><span data-stu-id="feb72-126">The normal delta synchronization scheduler (which synchronizes every 30 minutes by default) is suspended, but password synchronization continues.</span></span> <span data-ttu-id="feb72-127">You might consider doing the in-place upgrade during a weekend.</span><span class="sxs-lookup"><span data-stu-id="feb72-127">You might consider doing the in-place upgrade during a weekend.</span></span> <span data-ttu-id="feb72-128">If there are no changes to the out-of-box configuration with the new Azure AD Connect release, then a normal delta import/sync starts instead.</span><span class="sxs-lookup"><span data-stu-id="feb72-128">If there are no changes to the out-of-box configuration with the new Azure AD Connect release, then a normal delta import/sync starts instead.</span></span>  
![In-place upgrade](https://docstestmedia1.blob.core.windows.net/azure-media/articles/active-directory/connect/media/active-directory-aadconnect-upgrade-previous-version/inplaceupgrade.png)

<span data-ttu-id="feb72-130">If you've made changes to the out-of-box synchronization rules, then these rules are set back to the default configuration on upgrade.</span><span class="sxs-lookup"><span data-stu-id="feb72-130">If you've made changes to the out-of-box synchronization rules, then these rules are set back to the default configuration on upgrade.</span></span> <span data-ttu-id="feb72-131">To make sure that your configuration is kept between upgrades, make sure that you make changes as they're described in [Best practices for changing the default configuration](active-directory-aadconnectsync-best-practices-changing-default-configuration.md).</span><span class="sxs-lookup"><span data-stu-id="feb72-131">To make sure that your configuration is kept between upgrades, make sure that you make changes as they're described in [Best practices for changing the default configuration](active-directory-aadconnectsync-best-practices-changing-default-configuration.md).</span></span>

## <a name="swing-migration"></a><span data-ttu-id="feb72-132">Swing migration</span><span class="sxs-lookup"><span data-stu-id="feb72-132">Swing migration</span></span>
<span data-ttu-id="feb72-133">If you have a complex deployment or many objects, it might be impractical to do an in-place upgrade on the live system.</span><span class="sxs-lookup"><span data-stu-id="feb72-133">If you have a complex deployment or many objects, it might be impractical to do an in-place upgrade on the live system.</span></span> <span data-ttu-id="feb72-134">For some customers, this process might take multiple days--and during this time, no delta changes are processed.</span><span class="sxs-lookup"><span data-stu-id="feb72-134">For some customers, this process might take multiple days--and during this time, no delta changes are processed.</span></span> <span data-ttu-id="feb72-135">You can also use this method when you plan to make substantial changes to your configuration and you want to try them out before they're pushed to the cloud.</span><span class="sxs-lookup"><span data-stu-id="feb72-135">You can also use this method when you plan to make substantial changes to your configuration and you want to try them out before they're pushed to the cloud.</span></span>

<span data-ttu-id="feb72-136">The recommended method for these scenarios is to use a swing migration.</span><span class="sxs-lookup"><span data-stu-id="feb72-136">The recommended method for these scenarios is to use a swing migration.</span></span> <span data-ttu-id="feb72-137">You need (at least) two servers--one active server and one staging server.</span><span class="sxs-lookup"><span data-stu-id="feb72-137">You need (at least) two servers--one active server and one staging server.</span></span> <span data-ttu-id="feb72-138">The active server (shown with solid blue lines in the following picture) is responsible for the active production load.</span><span class="sxs-lookup"><span data-stu-id="feb72-138">The active server (shown with solid blue lines in the following picture) is responsible for the active production load.</span></span> <span data-ttu-id="feb72-139">The staging server (shown with dashed purple lines) is prepared with the new release or configuration.</span><span class="sxs-lookup"><span data-stu-id="feb72-139">The staging server (shown with dashed purple lines) is prepared with the new release or configuration.</span></span> <span data-ttu-id="feb72-140">When it's fully ready, this server is made active.</span><span class="sxs-lookup"><span data-stu-id="feb72-140">When it's fully ready, this server is made active.</span></span> <span data-ttu-id="feb72-141">The previous active server, which now has the old version or configuration installed, is made into the staging server and is upgraded.</span><span class="sxs-lookup"><span data-stu-id="feb72-141">The previous active server, which now has the old version or configuration installed, is made into the staging server and is upgraded.</span></span>

<span data-ttu-id="feb72-142">The two servers can use different versions.</span><span class="sxs-lookup"><span data-stu-id="feb72-142">The two servers can use different versions.</span></span> <span data-ttu-id="feb72-143">For example, the active server that you plan to decommission can use Azure AD Sync, and the new staging server can use Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="feb72-143">For example, the active server that you plan to decommission can use Azure AD Sync, and the new staging server can use Azure AD Connect.</span></span> <span data-ttu-id="feb72-144">If you use swing migration to develop a new configuration, it's a good idea to have the same versions on the two servers.</span><span class="sxs-lookup"><span data-stu-id="feb72-144">If you use swing migration to develop a new configuration, it's a good idea to have the same versions on the two servers.</span></span>  
![Staging server](https://docstestmedia1.blob.core.windows.net/azure-media/articles/active-directory/connect/media/active-directory-aadconnect-upgrade-previous-version/stagingserver1.png)

> [!NOTE]
> <span data-ttu-id="feb72-146">Some customers prefer to have three or four servers for this scenario.</span><span class="sxs-lookup"><span data-stu-id="feb72-146">Some customers prefer to have three or four servers for this scenario.</span></span> <span data-ttu-id="feb72-147">When the staging server is upgraded, you don't have a backup server for [disaster recovery](active-directory-aadconnectsync-operations.md#disaster-recovery).</span><span class="sxs-lookup"><span data-stu-id="feb72-147">When the staging server is upgraded, you don't have a backup server for [disaster recovery](active-directory-aadconnectsync-operations.md#disaster-recovery).</span></span> <span data-ttu-id="feb72-148">With three or four servers, you can prepare one set of primary/standby servers with the new version, which ensures that there is always a staging server that's ready to take over.</span><span class="sxs-lookup"><span data-stu-id="feb72-148">With three or four servers, you can prepare one set of primary/standby servers with the new version, which ensures that there is always a staging server that's ready to take over.</span></span>

<span data-ttu-id="feb72-149">These steps also work to move from Azure AD Sync or a solution with FIM + Azure AD Connector.</span><span class="sxs-lookup"><span data-stu-id="feb72-149">These steps also work to move from Azure AD Sync or a solution with FIM + Azure AD Connector.</span></span> <span data-ttu-id="feb72-150">These steps don't work for DirSync, but the same swing migration method (also called parallel deployment) with steps for DirSync is in [Upgrade Azure Active Directory sync (DirSync)](active-directory-aadconnect-dirsync-upgrade-get-started.md).</span><span class="sxs-lookup"><span data-stu-id="feb72-150">These steps don't work for DirSync, but the same swing migration method (also called parallel deployment) with steps for DirSync is in [Upgrade Azure Active Directory sync (DirSync)](active-directory-aadconnect-dirsync-upgrade-get-started.md).</span></span>

### <a name="use-a-swing-migration-to-upgrade"></a><span data-ttu-id="feb72-151">Use a swing migration to upgrade</span><span class="sxs-lookup"><span data-stu-id="feb72-151">Use a swing migration to upgrade</span></span>
1. <span data-ttu-id="feb72-152">If you use Azure AD Connect on both servers and plan to only make a configuration change, make sure that your active server and staging server are both using the same version.</span><span class="sxs-lookup"><span data-stu-id="feb72-152">If you use Azure AD Connect on both servers and plan to only make a configuration change, make sure that your active server and staging server are both using the same version.</span></span> <span data-ttu-id="feb72-153">That makes it easier to compare differences later.</span><span class="sxs-lookup"><span data-stu-id="feb72-153">That makes it easier to compare differences later.</span></span> <span data-ttu-id="feb72-154">If you're upgrading from Azure AD Sync, then these servers have different versions.</span><span class="sxs-lookup"><span data-stu-id="feb72-154">If you're upgrading from Azure AD Sync, then these servers have different versions.</span></span> <span data-ttu-id="feb72-155">If you're upgrading from an older version of Azure AD Connect, it's a good idea to start with the two servers that are using the same version, but it's not required.</span><span class="sxs-lookup"><span data-stu-id="feb72-155">If you're upgrading from an older version of Azure AD Connect, it's a good idea to start with the two servers that are using the same version, but it's not required.</span></span>
2. <span data-ttu-id="feb72-156">If you've made a custom configuration and your staging server doesn't have it, follow the steps under [Move a custom configuration from the active server to the staging server](#move-custom-configuration-from-active-to-staging-server).</span><span class="sxs-lookup"><span data-stu-id="feb72-156">If you've made a custom configuration and your staging server doesn't have it, follow the steps under [Move a custom configuration from the active server to the staging server](#move-custom-configuration-from-active-to-staging-server).</span></span>
3. <span data-ttu-id="feb72-157">If you're upgrading from an earlier release of Azure AD Connect, upgrade the staging server to the latest version.</span><span class="sxs-lookup"><span data-stu-id="feb72-157">If you're upgrading from an earlier release of Azure AD Connect, upgrade the staging server to the latest version.</span></span> <span data-ttu-id="feb72-158">If you're moving from Azure AD Sync, then install Azure AD Connect on your staging server.</span><span class="sxs-lookup"><span data-stu-id="feb72-158">If you're moving from Azure AD Sync, then install Azure AD Connect on your staging server.</span></span>
4. <span data-ttu-id="feb72-159">Let the sync engine run full import and full synchronization on your staging server.</span><span class="sxs-lookup"><span data-stu-id="feb72-159">Let the sync engine run full import and full synchronization on your staging server.</span></span>
5. <span data-ttu-id="feb72-160">Verify that the new configuration didn't cause any unexpected changes by using the steps under "Verify" in [Verify the configuration of a server](active-directory-aadconnectsync-operations.md#verify-the-configuration-of-a-server).</span><span class="sxs-lookup"><span data-stu-id="feb72-160">Verify that the new configuration didn't cause any unexpected changes by using the steps under "Verify" in [Verify the configuration of a server](active-directory-aadconnectsync-operations.md#verify-the-configuration-of-a-server).</span></span> <span data-ttu-id="feb72-161">If something isn't as expected, correct it, run the import and sync, and verify the data until it looks good, by following the steps.</span><span class="sxs-lookup"><span data-stu-id="feb72-161">If something isn't as expected, correct it, run the import and sync, and verify the data until it looks good, by following the steps.</span></span>
6. <span data-ttu-id="feb72-162">Switch the staging server to be the active server.</span><span class="sxs-lookup"><span data-stu-id="feb72-162">Switch the staging server to be the active server.</span></span> <span data-ttu-id="feb72-163">This is the final step "Switch active server" in [Verify the configuration of a server](active-directory-aadconnectsync-operations.md#verify-the-configuration-of-a-server).</span><span class="sxs-lookup"><span data-stu-id="feb72-163">This is the final step "Switch active server" in [Verify the configuration of a server](active-directory-aadconnectsync-operations.md#verify-the-configuration-of-a-server).</span></span>
7. <span data-ttu-id="feb72-164">If you're upgrading Azure AD Connect, upgrade the server that's now in staging mode to the latest release.</span><span class="sxs-lookup"><span data-stu-id="feb72-164">If you're upgrading Azure AD Connect, upgrade the server that's now in staging mode to the latest release.</span></span> <span data-ttu-id="feb72-165">Follow the same steps as before to get the data and configuration upgraded.</span><span class="sxs-lookup"><span data-stu-id="feb72-165">Follow the same steps as before to get the data and configuration upgraded.</span></span> <span data-ttu-id="feb72-166">If you upgraded from Azure AD Sync, you can now turn off and decommission your old server.</span><span class="sxs-lookup"><span data-stu-id="feb72-166">If you upgraded from Azure AD Sync, you can now turn off and decommission your old server.</span></span>

### <a name="move-a-custom-configuration-from-the-active-server-to-the-staging-server"></a><span data-ttu-id="feb72-167">Move a custom configuration from the active server to the staging server</span><span class="sxs-lookup"><span data-stu-id="feb72-167">Move a custom configuration from the active server to the staging server</span></span>
<span data-ttu-id="feb72-168">If you've made configuration changes to the active server, you need to make sure that the same changes are applied to the staging server.</span><span class="sxs-lookup"><span data-stu-id="feb72-168">If you've made configuration changes to the active server, you need to make sure that the same changes are applied to the staging server.</span></span> <span data-ttu-id="feb72-169">To help with this move, you can use the [Azure AD Connect configuration documenter](https://github.com/Microsoft/AADConnectConfigDocumenter).</span><span class="sxs-lookup"><span data-stu-id="feb72-169">To help with this move, you can use the [Azure AD Connect configuration documenter](https://github.com/Microsoft/AADConnectConfigDocumenter).</span></span>

<span data-ttu-id="feb72-170">You can move the custom sync rules that you've created by using PowerShell.</span><span class="sxs-lookup"><span data-stu-id="feb72-170">You can move the custom sync rules that you've created by using PowerShell.</span></span> <span data-ttu-id="feb72-171">You must apply other changes the same way on both systems, and you can't migrate the changes.</span><span class="sxs-lookup"><span data-stu-id="feb72-171">You must apply other changes the same way on both systems, and you can't migrate the changes.</span></span> <span data-ttu-id="feb72-172">The [configuration documenter](https://github.com/Microsoft/AADConnectConfigDocumenter) can help you comparing the two systems to make sure they are identical.</span><span class="sxs-lookup"><span data-stu-id="feb72-172">The [configuration documenter](https://github.com/Microsoft/AADConnectConfigDocumenter) can help you comparing the two systems to make sure they are identical.</span></span> <span data-ttu-id="feb72-173">The tool can also help in automating the steps found in this section.</span><span class="sxs-lookup"><span data-stu-id="feb72-173">The tool can also help in automating the steps found in this section.</span></span>

<span data-ttu-id="feb72-174">You need to configure the following things the same way on both servers:</span><span class="sxs-lookup"><span data-stu-id="feb72-174">You need to configure the following things the same way on both servers:</span></span>

* <span data-ttu-id="feb72-175">Connection to the same forests</span><span class="sxs-lookup"><span data-stu-id="feb72-175">Connection to the same forests</span></span>
* <span data-ttu-id="feb72-176">Any domain and OU filtering</span><span class="sxs-lookup"><span data-stu-id="feb72-176">Any domain and OU filtering</span></span>
* <span data-ttu-id="feb72-177">The same optional features, such as password sync and password writeback</span><span class="sxs-lookup"><span data-stu-id="feb72-177">The same optional features, such as password sync and password writeback</span></span>

<span data-ttu-id="feb72-178">**Move custom synchronization rules**</span><span class="sxs-lookup"><span data-stu-id="feb72-178">**Move custom synchronization rules**</span></span>  
<span data-ttu-id="feb72-179">To move custom synchronization rules, do the following:</span><span class="sxs-lookup"><span data-stu-id="feb72-179">To move custom synchronization rules, do the following:</span></span>

1. <span data-ttu-id="feb72-180">Open **Synchronization Rules Editor** on your active server.</span><span class="sxs-lookup"><span data-stu-id="feb72-180">Open **Synchronization Rules Editor** on your active server.</span></span>
2. <span data-ttu-id="feb72-181">Select a custom rule.</span><span class="sxs-lookup"><span data-stu-id="feb72-181">Select a custom rule.</span></span> <span data-ttu-id="feb72-182">Click **Export**.</span><span class="sxs-lookup"><span data-stu-id="feb72-182">Click **Export**.</span></span> <span data-ttu-id="feb72-183">This brings up a Notepad window.</span><span class="sxs-lookup"><span data-stu-id="feb72-183">This brings up a Notepad window.</span></span> <span data-ttu-id="feb72-184">Save the temporary file with a PS1 extension.</span><span class="sxs-lookup"><span data-stu-id="feb72-184">Save the temporary file with a PS1 extension.</span></span> <span data-ttu-id="feb72-185">This makes it a PowerShell script.</span><span class="sxs-lookup"><span data-stu-id="feb72-185">This makes it a PowerShell script.</span></span> <span data-ttu-id="feb72-186">Copy the PS1 file to the staging server.</span><span class="sxs-lookup"><span data-stu-id="feb72-186">Copy the PS1 file to the staging server.</span></span>  
   <span data-ttu-id="feb72-187">![Sync rule export](https://docstestmedia1.blob.core.windows.net/azure-media/articles/active-directory/connect/media/active-directory-aadconnect-upgrade-previous-version/exportrule.png)</span><span class="sxs-lookup"><span data-stu-id="feb72-187">![Sync rule export](https://docstestmedia1.blob.core.windows.net/azure-media/articles/active-directory/connect/media/active-directory-aadconnect-upgrade-previous-version/exportrule.png)</span></span>
3. <span data-ttu-id="feb72-188">The Connector GUID is different on the staging server, and you must change it.</span><span class="sxs-lookup"><span data-stu-id="feb72-188">The Connector GUID is different on the staging server, and you must change it.</span></span> <span data-ttu-id="feb72-189">To get the GUID, start **Synchronization Rules Editor**, select one of the out-of-box rules that represent the same connected system, and click **Export**.</span><span class="sxs-lookup"><span data-stu-id="feb72-189">To get the GUID, start **Synchronization Rules Editor**, select one of the out-of-box rules that represent the same connected system, and click **Export**.</span></span> <span data-ttu-id="feb72-190">Replace the GUID in your PS1 file with the GUID from the staging server.</span><span class="sxs-lookup"><span data-stu-id="feb72-190">Replace the GUID in your PS1 file with the GUID from the staging server.</span></span>
4. <span data-ttu-id="feb72-191">In a PowerShell prompt, run the PS1 file.</span><span class="sxs-lookup"><span data-stu-id="feb72-191">In a PowerShell prompt, run the PS1 file.</span></span> <span data-ttu-id="feb72-192">This creates the custom synchronization rule on the staging server.</span><span class="sxs-lookup"><span data-stu-id="feb72-192">This creates the custom synchronization rule on the staging server.</span></span>
5. <span data-ttu-id="feb72-193">Repeat this for all your custom rules.</span><span class="sxs-lookup"><span data-stu-id="feb72-193">Repeat this for all your custom rules.</span></span>

## <a name="next-steps"></a><span data-ttu-id="feb72-194">Next steps</span><span class="sxs-lookup"><span data-stu-id="feb72-194">Next steps</span></span>
<span data-ttu-id="feb72-195">Learn more about [integrating your on-premises identities with Azure Active Directory](active-directory-aadconnect.md).</span><span class="sxs-lookup"><span data-stu-id="feb72-195">Learn more about [integrating your on-premises identities with Azure Active Directory](active-directory-aadconnect.md).</span></span>



