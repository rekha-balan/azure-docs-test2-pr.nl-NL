---
title: 'Azure AD Connect sync: Make a configuration change in Azure AD Connect sync | Microsoft Docs'
description: Walks you through how to make a change to the configuration in Azure AD Connect sync.
services: active-directory
documentationcenter: ''
author: andkjell
manager: femila
editor: ''
ms.assetid: 7b9df836-e8a5-4228-97da-2faec9238b31
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 02/08/2017
ms.author: billmath
ms.openlocfilehash: c6fe551f48aa48fdd1921f540255966d79572461
ms.sourcegitcommit: 5b9d839c0c0a94b293fdafe1d6e5429506c07e05
ms.translationtype: HT
ms.contentlocale: nl-NL
ms.lasthandoff: 08/02/2018
ms.locfileid: "44672182"
---
# <a name="azure-ad-connect-sync-how-to-make-a-change-to-the-default-configuration"></a><span data-ttu-id="f903b-103">Azure AD Connect sync: How to make a change to the default configuration</span><span class="sxs-lookup"><span data-stu-id="f903b-103">Azure AD Connect sync: How to make a change to the default configuration</span></span>
<span data-ttu-id="f903b-104">The purpose of this topic is to walk you through how to make changes to the default configuration in Azure AD Connect sync. It provides steps for some common scenarios.</span><span class="sxs-lookup"><span data-stu-id="f903b-104">The purpose of this topic is to walk you through how to make changes to the default configuration in Azure AD Connect sync. It provides steps for some common scenarios.</span></span> <span data-ttu-id="f903b-105">With this knowledge, you should be able to make some simple changes to your own configuration based on your own business rules.</span><span class="sxs-lookup"><span data-stu-id="f903b-105">With this knowledge, you should be able to make some simple changes to your own configuration based on your own business rules.</span></span>

## <a name="synchronization-rules-editor"></a><span data-ttu-id="f903b-106">Synchronization Rules Editor</span><span class="sxs-lookup"><span data-stu-id="f903b-106">Synchronization Rules Editor</span></span>
<span data-ttu-id="f903b-107">The Synchronization Rules Editor is used to see and change the default configuration.</span><span class="sxs-lookup"><span data-stu-id="f903b-107">The Synchronization Rules Editor is used to see and change the default configuration.</span></span> <span data-ttu-id="f903b-108">You can find it in the Start Menu under the **Azure AD Connect** group.</span><span class="sxs-lookup"><span data-stu-id="f903b-108">You can find it in the Start Menu under the **Azure AD Connect** group.</span></span>  
<span data-ttu-id="f903b-109">![Start Menu with Sync Rule Editor](https://docstestmedia1.blob.core.windows.net/azure-media/articles/active-directory/connect/media/active-directory-aadconnectsync-change-the-configuration/startmenu2.png)</span><span class="sxs-lookup"><span data-stu-id="f903b-109">![Start Menu with Sync Rule Editor](https://docstestmedia1.blob.core.windows.net/azure-media/articles/active-directory/connect/media/active-directory-aadconnectsync-change-the-configuration/startmenu2.png)</span></span>

<span data-ttu-id="f903b-110">When you open it, you see the default out-of-box rules.</span><span class="sxs-lookup"><span data-stu-id="f903b-110">When you open it, you see the default out-of-box rules.</span></span>

![Sync Rule Editor](https://docstestmedia1.blob.core.windows.net/azure-media/articles/active-directory/connect/media/active-directory-aadconnectsync-change-the-configuration/sre2.png)

### <a name="navigating-in-the-editor"></a><span data-ttu-id="f903b-112">Navigating in the editor</span><span class="sxs-lookup"><span data-stu-id="f903b-112">Navigating in the editor</span></span>
<span data-ttu-id="f903b-113">The drop-downs at the top of the editor allow you to quickly find a particular rule.</span><span class="sxs-lookup"><span data-stu-id="f903b-113">The drop-downs at the top of the editor allow you to quickly find a particular rule.</span></span> <span data-ttu-id="f903b-114">For example, if you want to see the rules where the attribute proxyAddresses is included, you would change the drop-downs to the following:</span><span class="sxs-lookup"><span data-stu-id="f903b-114">For example, if you want to see the rules where the attribute proxyAddresses is included, you would change the drop-downs to the following:</span></span>  
<span data-ttu-id="f903b-115">![SRE filtering](https://docstestmedia1.blob.core.windows.net/azure-media/articles/active-directory/connect/media/active-directory-aadconnectsync-change-the-configuration/filtering.png)</span><span class="sxs-lookup"><span data-stu-id="f903b-115">![SRE filtering](https://docstestmedia1.blob.core.windows.net/azure-media/articles/active-directory/connect/media/active-directory-aadconnectsync-change-the-configuration/filtering.png)</span></span>  
<span data-ttu-id="f903b-116">To reset filtering and load a fresh configuration, press **F5** on the keyboard.</span><span class="sxs-lookup"><span data-stu-id="f903b-116">To reset filtering and load a fresh configuration, press **F5** on the keyboard.</span></span>

<span data-ttu-id="f903b-117">To the top right, you have a button **Add new rule**.</span><span class="sxs-lookup"><span data-stu-id="f903b-117">To the top right, you have a button **Add new rule**.</span></span> <span data-ttu-id="f903b-118">This button is used to create your own custom rule.</span><span class="sxs-lookup"><span data-stu-id="f903b-118">This button is used to create your own custom rule.</span></span>

<span data-ttu-id="f903b-119">At the bottom, you have buttons for acting on a selected sync rule.</span><span class="sxs-lookup"><span data-stu-id="f903b-119">At the bottom, you have buttons for acting on a selected sync rule.</span></span> <span data-ttu-id="f903b-120">**Edit** and **Delete** do what you expect them to.</span><span class="sxs-lookup"><span data-stu-id="f903b-120">**Edit** and **Delete** do what you expect them to.</span></span> <span data-ttu-id="f903b-121">**Export** produces a PowerShell script for recreating the sync rule.</span><span class="sxs-lookup"><span data-stu-id="f903b-121">**Export** produces a PowerShell script for recreating the sync rule.</span></span> <span data-ttu-id="f903b-122">This procedure allows you to move a sync rule from one server to another.</span><span class="sxs-lookup"><span data-stu-id="f903b-122">This procedure allows you to move a sync rule from one server to another.</span></span>

## <a name="create-your-first-custom-rule"></a><span data-ttu-id="f903b-123">Create your first custom rule</span><span class="sxs-lookup"><span data-stu-id="f903b-123">Create your first custom rule</span></span>
<span data-ttu-id="f903b-124">The most common change is changes to the attribute flows.</span><span class="sxs-lookup"><span data-stu-id="f903b-124">The most common change is changes to the attribute flows.</span></span> <span data-ttu-id="f903b-125">The data in your source directory might not be as in Azure AD.</span><span class="sxs-lookup"><span data-stu-id="f903b-125">The data in your source directory might not be as in Azure AD.</span></span> <span data-ttu-id="f903b-126">In the example in this section, you want to make sure the given name of a user is always in **Proper case**.</span><span class="sxs-lookup"><span data-stu-id="f903b-126">In the example in this section, you want to make sure the given name of a user is always in **Proper case**.</span></span>

### <a name="disable-the-scheduler"></a><span data-ttu-id="f903b-127">Disable the scheduler</span><span class="sxs-lookup"><span data-stu-id="f903b-127">Disable the scheduler</span></span>
<span data-ttu-id="f903b-128">The [scheduler](active-directory-aadconnectsync-feature-scheduler.md) runs every 30 minutes by default.</span><span class="sxs-lookup"><span data-stu-id="f903b-128">The [scheduler](active-directory-aadconnectsync-feature-scheduler.md) runs every 30 minutes by default.</span></span> <span data-ttu-id="f903b-129">You want to make sure it is not starting while you are making changes and troubleshoot your new rules.</span><span class="sxs-lookup"><span data-stu-id="f903b-129">You want to make sure it is not starting while you are making changes and troubleshoot your new rules.</span></span> <span data-ttu-id="f903b-130">To temporarily disable the scheduler, start PowerShell, and run `Set-ADSyncScheduler -SyncCycleEnabled $false`</span><span class="sxs-lookup"><span data-stu-id="f903b-130">To temporarily disable the scheduler, start PowerShell, and run `Set-ADSyncScheduler -SyncCycleEnabled $false`</span></span>

![Disable the scheduler](https://docstestmedia1.blob.core.windows.net/azure-media/articles/active-directory/connect/media/active-directory-aadconnectsync-change-the-configuration/schedulerdisable.png)  

### <a name="create-the-rule"></a><span data-ttu-id="f903b-132">Create the rule</span><span class="sxs-lookup"><span data-stu-id="f903b-132">Create the rule</span></span>
1. <span data-ttu-id="f903b-133">Click **Add new rule**.</span><span class="sxs-lookup"><span data-stu-id="f903b-133">Click **Add new rule**.</span></span>
2. <span data-ttu-id="f903b-134">On the **Description** page enter the following:</span><span class="sxs-lookup"><span data-stu-id="f903b-134">On the **Description** page enter the following:</span></span>  
   <span data-ttu-id="f903b-135">![Inbound rule filtering](https://docstestmedia1.blob.core.windows.net/azure-media/articles/active-directory/connect/media/active-directory-aadconnectsync-change-the-configuration/description2.png)</span><span class="sxs-lookup"><span data-stu-id="f903b-135">![Inbound rule filtering](https://docstestmedia1.blob.core.windows.net/azure-media/articles/active-directory/connect/media/active-directory-aadconnectsync-change-the-configuration/description2.png)</span></span>  
   * <span data-ttu-id="f903b-136">Name: Give the rule a descriptive name.</span><span class="sxs-lookup"><span data-stu-id="f903b-136">Name: Give the rule a descriptive name.</span></span>
   * <span data-ttu-id="f903b-137">Description: Some clarification so someone else can understand what the rule is for.</span><span class="sxs-lookup"><span data-stu-id="f903b-137">Description: Some clarification so someone else can understand what the rule is for.</span></span>
   * <span data-ttu-id="f903b-138">Connected system: The system the object can be found in.</span><span class="sxs-lookup"><span data-stu-id="f903b-138">Connected system: The system the object can be found in.</span></span> <span data-ttu-id="f903b-139">In this case, select the Active Directory Connector.</span><span class="sxs-lookup"><span data-stu-id="f903b-139">In this case, select the Active Directory Connector.</span></span>
   * <span data-ttu-id="f903b-140">Connected System/Metaverse Object Type: Select **User** and **Person** respectively.</span><span class="sxs-lookup"><span data-stu-id="f903b-140">Connected System/Metaverse Object Type: Select **User** and **Person** respectively.</span></span>
   * <span data-ttu-id="f903b-141">Link Type: Change this value to **Join**.</span><span class="sxs-lookup"><span data-stu-id="f903b-141">Link Type: Change this value to **Join**.</span></span>
   * <span data-ttu-id="f903b-142">Precedence: Provide a value that is unique in the system.</span><span class="sxs-lookup"><span data-stu-id="f903b-142">Precedence: Provide a value that is unique in the system.</span></span> <span data-ttu-id="f903b-143">A lower numeric value indicates higher precedence.</span><span class="sxs-lookup"><span data-stu-id="f903b-143">A lower numeric value indicates higher precedence.</span></span>
   * <span data-ttu-id="f903b-144">Tag: Leave empty.</span><span class="sxs-lookup"><span data-stu-id="f903b-144">Tag: Leave empty.</span></span> <span data-ttu-id="f903b-145">Only out-of-box rules from Microsoft should have this box populated with a value.</span><span class="sxs-lookup"><span data-stu-id="f903b-145">Only out-of-box rules from Microsoft should have this box populated with a value.</span></span>
3. <span data-ttu-id="f903b-146">On the **Scoping filter** page, enter **givenName ISNOTNULL**.</span><span class="sxs-lookup"><span data-stu-id="f903b-146">On the **Scoping filter** page, enter **givenName ISNOTNULL**.</span></span>  
   <span data-ttu-id="f903b-147">![Inbound rule scoping filter](https://docstestmedia1.blob.core.windows.net/azure-media/articles/active-directory/connect/media/active-directory-aadconnectsync-change-the-configuration/scopingfilter.png)</span><span class="sxs-lookup"><span data-stu-id="f903b-147">![Inbound rule scoping filter](https://docstestmedia1.blob.core.windows.net/azure-media/articles/active-directory/connect/media/active-directory-aadconnectsync-change-the-configuration/scopingfilter.png)</span></span>  
   <span data-ttu-id="f903b-148">This section is used to define which objects the rule should apply to.</span><span class="sxs-lookup"><span data-stu-id="f903b-148">This section is used to define which objects the rule should apply to.</span></span> <span data-ttu-id="f903b-149">If left empty, the rule would apply to all user objects.</span><span class="sxs-lookup"><span data-stu-id="f903b-149">If left empty, the rule would apply to all user objects.</span></span> <span data-ttu-id="f903b-150">But that would include conference rooms, service accounts, and other non-people user objects.</span><span class="sxs-lookup"><span data-stu-id="f903b-150">But that would include conference rooms, service accounts, and other non-people user objects.</span></span>
4. <span data-ttu-id="f903b-151">On the **Join rules**, leave it empty.</span><span class="sxs-lookup"><span data-stu-id="f903b-151">On the **Join rules**, leave it empty.</span></span>
5. <span data-ttu-id="f903b-152">On the **Transformations** page, change the FlowType to **Expression**.</span><span class="sxs-lookup"><span data-stu-id="f903b-152">On the **Transformations** page, change the FlowType to **Expression**.</span></span> <span data-ttu-id="f903b-153">Select the Target Attribute **givenName**, and in Source enter `PCase([givenName])`.</span><span class="sxs-lookup"><span data-stu-id="f903b-153">Select the Target Attribute **givenName**, and in Source enter `PCase([givenName])`.</span></span>
   <span data-ttu-id="f903b-154">![Inbound rule transformations](https://docstestmedia1.blob.core.windows.net/azure-media/articles/active-directory/connect/media/active-directory-aadconnectsync-change-the-configuration/transformations.png)</span><span class="sxs-lookup"><span data-stu-id="f903b-154">![Inbound rule transformations](https://docstestmedia1.blob.core.windows.net/azure-media/articles/active-directory/connect/media/active-directory-aadconnectsync-change-the-configuration/transformations.png)</span></span>  
   <span data-ttu-id="f903b-155">The sync engine is case-sensitive both on the function name and the name of the attribute.</span><span class="sxs-lookup"><span data-stu-id="f903b-155">The sync engine is case-sensitive both on the function name and the name of the attribute.</span></span> <span data-ttu-id="f903b-156">If you type something wrong, you see a warning when you add the rule.</span><span class="sxs-lookup"><span data-stu-id="f903b-156">If you type something wrong, you see a warning when you add the rule.</span></span> <span data-ttu-id="f903b-157">The editor allows you to save and continue, so you would have to reopen the rule and correct the rule.</span><span class="sxs-lookup"><span data-stu-id="f903b-157">The editor allows you to save and continue, so you would have to reopen the rule and correct the rule.</span></span>
6. <span data-ttu-id="f903b-158">Click **Add** to save the rule.</span><span class="sxs-lookup"><span data-stu-id="f903b-158">Click **Add** to save the rule.</span></span>

<span data-ttu-id="f903b-159">Your new custom rule should be visible with the other sync rules in the system.</span><span class="sxs-lookup"><span data-stu-id="f903b-159">Your new custom rule should be visible with the other sync rules in the system.</span></span>

### <a name="verify-the-change"></a><span data-ttu-id="f903b-160">Verify the change</span><span class="sxs-lookup"><span data-stu-id="f903b-160">Verify the change</span></span>
<span data-ttu-id="f903b-161">With this new change, you want to make sure it is working as expected and is not throwing any errors.</span><span class="sxs-lookup"><span data-stu-id="f903b-161">With this new change, you want to make sure it is working as expected and is not throwing any errors.</span></span> <span data-ttu-id="f903b-162">Depending on the number of objects you have, there are two different ways to do this step.</span><span class="sxs-lookup"><span data-stu-id="f903b-162">Depending on the number of objects you have, there are two different ways to do this step.</span></span>

1. <span data-ttu-id="f903b-163">Run a full sync on all objects</span><span class="sxs-lookup"><span data-stu-id="f903b-163">Run a full sync on all objects</span></span>
2. <span data-ttu-id="f903b-164">Run a preview and full sync on a single object</span><span class="sxs-lookup"><span data-stu-id="f903b-164">Run a preview and full sync on a single object</span></span>

<span data-ttu-id="f903b-165">Start **Synchronization Service** from the start menu.</span><span class="sxs-lookup"><span data-stu-id="f903b-165">Start **Synchronization Service** from the start menu.</span></span> <span data-ttu-id="f903b-166">The steps in this section are all in this tool.</span><span class="sxs-lookup"><span data-stu-id="f903b-166">The steps in this section are all in this tool.</span></span>

1. <span data-ttu-id="f903b-167">**Full sync on all objects**</span><span class="sxs-lookup"><span data-stu-id="f903b-167">**Full sync on all objects**</span></span>  
   <span data-ttu-id="f903b-168">Select **Connectors** at the top.</span><span class="sxs-lookup"><span data-stu-id="f903b-168">Select **Connectors** at the top.</span></span> <span data-ttu-id="f903b-169">Identify the Connector you made a change to in the previous section, in this case the Active Directory Domain Services, and select it.</span><span class="sxs-lookup"><span data-stu-id="f903b-169">Identify the Connector you made a change to in the previous section, in this case the Active Directory Domain Services, and select it.</span></span> <span data-ttu-id="f903b-170">Select **Run** from Actions and select **Full Synchronization** and **OK**.</span><span class="sxs-lookup"><span data-stu-id="f903b-170">Select **Run** from Actions and select **Full Synchronization** and **OK**.</span></span>
   <span data-ttu-id="f903b-171">![Full sync](https://docstestmedia1.blob.core.windows.net/azure-media/articles/active-directory/connect/media/active-directory-aadconnectsync-change-the-configuration/fullsync.png)</span><span class="sxs-lookup"><span data-stu-id="f903b-171">![Full sync](https://docstestmedia1.blob.core.windows.net/azure-media/articles/active-directory/connect/media/active-directory-aadconnectsync-change-the-configuration/fullsync.png)</span></span>  
   <span data-ttu-id="f903b-172">The objects are now updated in the metaverse.</span><span class="sxs-lookup"><span data-stu-id="f903b-172">The objects are now updated in the metaverse.</span></span> <span data-ttu-id="f903b-173">You now want to look at the object in the metaverse.</span><span class="sxs-lookup"><span data-stu-id="f903b-173">You now want to look at the object in the metaverse.</span></span>
2. <span data-ttu-id="f903b-174">**Preview and full sync on a single object**</span><span class="sxs-lookup"><span data-stu-id="f903b-174">**Preview and full sync on a single object**</span></span>  
   <span data-ttu-id="f903b-175">Select **Connectors** at the top.</span><span class="sxs-lookup"><span data-stu-id="f903b-175">Select **Connectors** at the top.</span></span> <span data-ttu-id="f903b-176">Identify the Connector you made a change to in the previous section, in this case the Active Directory Domain Services, and select it.</span><span class="sxs-lookup"><span data-stu-id="f903b-176">Identify the Connector you made a change to in the previous section, in this case the Active Directory Domain Services, and select it.</span></span> <span data-ttu-id="f903b-177">Select **Search Connector Space**.</span><span class="sxs-lookup"><span data-stu-id="f903b-177">Select **Search Connector Space**.</span></span> <span data-ttu-id="f903b-178">Use scope to find an object you want to use to test the change.</span><span class="sxs-lookup"><span data-stu-id="f903b-178">Use scope to find an object you want to use to test the change.</span></span> <span data-ttu-id="f903b-179">Select the object and click **Preview**.</span><span class="sxs-lookup"><span data-stu-id="f903b-179">Select the object and click **Preview**.</span></span> <span data-ttu-id="f903b-180">In the new screen, select **Commit Preview**.</span><span class="sxs-lookup"><span data-stu-id="f903b-180">In the new screen, select **Commit Preview**.</span></span>  
   <span data-ttu-id="f903b-181">![Commit preview](https://docstestmedia1.blob.core.windows.net/azure-media/articles/active-directory/connect/media/active-directory-aadconnectsync-change-the-configuration/commitpreview.png)</span><span class="sxs-lookup"><span data-stu-id="f903b-181">![Commit preview](https://docstestmedia1.blob.core.windows.net/azure-media/articles/active-directory/connect/media/active-directory-aadconnectsync-change-the-configuration/commitpreview.png)</span></span>  
   <span data-ttu-id="f903b-182">The change is now committed to the metaverse.</span><span class="sxs-lookup"><span data-stu-id="f903b-182">The change is now committed to the metaverse.</span></span>

<span data-ttu-id="f903b-183">**Look at the object in the metaverse**</span><span class="sxs-lookup"><span data-stu-id="f903b-183">**Look at the object in the metaverse**</span></span>  
<span data-ttu-id="f903b-184">You now want to pick a few sample objects to make sure the value is expected and that the rule applied.</span><span class="sxs-lookup"><span data-stu-id="f903b-184">You now want to pick a few sample objects to make sure the value is expected and that the rule applied.</span></span> <span data-ttu-id="f903b-185">Select **Metaverse Search** from the top.</span><span class="sxs-lookup"><span data-stu-id="f903b-185">Select **Metaverse Search** from the top.</span></span> <span data-ttu-id="f903b-186">Add any filter you need to find the relevant objects.</span><span class="sxs-lookup"><span data-stu-id="f903b-186">Add any filter you need to find the relevant objects.</span></span> <span data-ttu-id="f903b-187">From the search result, open an object.</span><span class="sxs-lookup"><span data-stu-id="f903b-187">From the search result, open an object.</span></span> <span data-ttu-id="f903b-188">Look at the attribute values and also verify in the **Sync Rules** column that the rule applied as expected.</span><span class="sxs-lookup"><span data-stu-id="f903b-188">Look at the attribute values and also verify in the **Sync Rules** column that the rule applied as expected.</span></span>  
<span data-ttu-id="f903b-189">![Metaverse search](https://docstestmedia1.blob.core.windows.net/azure-media/articles/active-directory/connect/media/active-directory-aadconnectsync-change-the-configuration/mvsearch.png)</span><span class="sxs-lookup"><span data-stu-id="f903b-189">![Metaverse search](https://docstestmedia1.blob.core.windows.net/azure-media/articles/active-directory/connect/media/active-directory-aadconnectsync-change-the-configuration/mvsearch.png)</span></span>  

### <a name="enable-the-scheduler"></a><span data-ttu-id="f903b-190">Enable the scheduler</span><span class="sxs-lookup"><span data-stu-id="f903b-190">Enable the scheduler</span></span>
<span data-ttu-id="f903b-191">If everything is as expected, you can enable the scheduler again.</span><span class="sxs-lookup"><span data-stu-id="f903b-191">If everything is as expected, you can enable the scheduler again.</span></span> <span data-ttu-id="f903b-192">From PowerShell, run `Set-ADSyncScheduler -SyncCycleEnabled $true`.</span><span class="sxs-lookup"><span data-stu-id="f903b-192">From PowerShell, run `Set-ADSyncScheduler -SyncCycleEnabled $true`.</span></span>

## <a name="other-common-attribute-flow-changes"></a><span data-ttu-id="f903b-193">Other common attribute flow changes</span><span class="sxs-lookup"><span data-stu-id="f903b-193">Other common attribute flow changes</span></span>
<span data-ttu-id="f903b-194">The previous section described how to make changes to an attribute flow.</span><span class="sxs-lookup"><span data-stu-id="f903b-194">The previous section described how to make changes to an attribute flow.</span></span> <span data-ttu-id="f903b-195">In this section, some additional examples are provided.</span><span class="sxs-lookup"><span data-stu-id="f903b-195">In this section, some additional examples are provided.</span></span> <span data-ttu-id="f903b-196">The steps for how to create the sync rule is abbreviated, but you can find the full steps in the previous section.</span><span class="sxs-lookup"><span data-stu-id="f903b-196">The steps for how to create the sync rule is abbreviated, but you can find the full steps in the previous section.</span></span>

### <a name="use-another-attribute-than-the-default"></a><span data-ttu-id="f903b-197">Use another attribute than the default</span><span class="sxs-lookup"><span data-stu-id="f903b-197">Use another attribute than the default</span></span>
<span data-ttu-id="f903b-198">At Fabrikam, there is a forest where the local alphabet is used for given name, surname, and display name.</span><span class="sxs-lookup"><span data-stu-id="f903b-198">At Fabrikam, there is a forest where the local alphabet is used for given name, surname, and display name.</span></span> <span data-ttu-id="f903b-199">The Latin character representation of these attributes can be found in the extension attributes.</span><span class="sxs-lookup"><span data-stu-id="f903b-199">The Latin character representation of these attributes can be found in the extension attributes.</span></span> <span data-ttu-id="f903b-200">When building the global address list in Azure AD and Office 365, the organization wants these attributes to be used instead.</span><span class="sxs-lookup"><span data-stu-id="f903b-200">When building the global address list in Azure AD and Office 365, the organization wants these attributes to be used instead.</span></span>

<span data-ttu-id="f903b-201">With a default configuration, an object from the local forest looks like this:</span><span class="sxs-lookup"><span data-stu-id="f903b-201">With a default configuration, an object from the local forest looks like this:</span></span>  
![Attribute flow 1](https://docstestmedia1.blob.core.windows.net/azure-media/articles/active-directory/connect/media/active-directory-aadconnectsync-change-the-configuration/attributeflowjp1.png)

<span data-ttu-id="f903b-203">To create a rule with other attribute flows, do the following:</span><span class="sxs-lookup"><span data-stu-id="f903b-203">To create a rule with other attribute flows, do the following:</span></span>

* <span data-ttu-id="f903b-204">Start **Synchronization Rule Editor** from the start menu.</span><span class="sxs-lookup"><span data-stu-id="f903b-204">Start **Synchronization Rule Editor** from the start menu.</span></span>
* <span data-ttu-id="f903b-205">With **Inbound** still selected to the left, click the button **Add new rule**.</span><span class="sxs-lookup"><span data-stu-id="f903b-205">With **Inbound** still selected to the left, click the button **Add new rule**.</span></span>
* <span data-ttu-id="f903b-206">Give the rule a name and description.</span><span class="sxs-lookup"><span data-stu-id="f903b-206">Give the rule a name and description.</span></span> <span data-ttu-id="f903b-207">Select the on-premises Active Directory and the relevant object types.</span><span class="sxs-lookup"><span data-stu-id="f903b-207">Select the on-premises Active Directory and the relevant object types.</span></span> <span data-ttu-id="f903b-208">In **Link Type**, select **Join**.</span><span class="sxs-lookup"><span data-stu-id="f903b-208">In **Link Type**, select **Join**.</span></span> <span data-ttu-id="f903b-209">For precedence, pick a number that is not used by another rule.</span><span class="sxs-lookup"><span data-stu-id="f903b-209">For precedence, pick a number that is not used by another rule.</span></span> <span data-ttu-id="f903b-210">The out-of-box rules start with 100, so the value 50 can be used in this example.</span><span class="sxs-lookup"><span data-stu-id="f903b-210">The out-of-box rules start with 100, so the value 50 can be used in this example.</span></span>
  <span data-ttu-id="f903b-211">![Attribute flow 2](https://docstestmedia1.blob.core.windows.net/azure-media/articles/active-directory/connect/media/active-directory-aadconnectsync-change-the-configuration/attributeflowjp2.png)</span><span class="sxs-lookup"><span data-stu-id="f903b-211">![Attribute flow 2](https://docstestmedia1.blob.core.windows.net/azure-media/articles/active-directory/connect/media/active-directory-aadconnectsync-change-the-configuration/attributeflowjp2.png)</span></span>
* <span data-ttu-id="f903b-212">Leave scope empty (that is, should apply to all user objects in the forest).</span><span class="sxs-lookup"><span data-stu-id="f903b-212">Leave scope empty (that is, should apply to all user objects in the forest).</span></span>
* <span data-ttu-id="f903b-213">Leave join rules empty (that is, let the out-of-box rule handle any joins).</span><span class="sxs-lookup"><span data-stu-id="f903b-213">Leave join rules empty (that is, let the out-of-box rule handle any joins).</span></span>
* <span data-ttu-id="f903b-214">In Transformations, create the following flows:</span><span class="sxs-lookup"><span data-stu-id="f903b-214">In Transformations, create the following flows:</span></span>  
  ![Attribute flow 3](https://docstestmedia1.blob.core.windows.net/azure-media/articles/active-directory/connect/media/active-directory-aadconnectsync-change-the-configuration/attributeflowjp3.png)
* <span data-ttu-id="f903b-216">Click **Add** to save the rule.</span><span class="sxs-lookup"><span data-stu-id="f903b-216">Click **Add** to save the rule.</span></span>
* <span data-ttu-id="f903b-217">Go to **Synchronization Service Manager**.</span><span class="sxs-lookup"><span data-stu-id="f903b-217">Go to **Synchronization Service Manager**.</span></span> <span data-ttu-id="f903b-218">On **Connectors**, select the Connector where we added the rule.</span><span class="sxs-lookup"><span data-stu-id="f903b-218">On **Connectors**, select the Connector where we added the rule.</span></span> <span data-ttu-id="f903b-219">Select **Run**, and **Full Synchronization**.</span><span class="sxs-lookup"><span data-stu-id="f903b-219">Select **Run**, and **Full Synchronization**.</span></span> <span data-ttu-id="f903b-220">A Full Synchronization recalculates all objects using the current rules.</span><span class="sxs-lookup"><span data-stu-id="f903b-220">A Full Synchronization recalculates all objects using the current rules.</span></span>

<span data-ttu-id="f903b-221">This is the result for the same object with this custom rule:</span><span class="sxs-lookup"><span data-stu-id="f903b-221">This is the result for the same object with this custom rule:</span></span>  
![Attribute flow 4](https://docstestmedia1.blob.core.windows.net/azure-media/articles/active-directory/connect/media/active-directory-aadconnectsync-change-the-configuration/attributeflowjp4.png)

### <a name="length-of-attributes"></a><span data-ttu-id="f903b-223">Length of attributes</span><span class="sxs-lookup"><span data-stu-id="f903b-223">Length of attributes</span></span>
<span data-ttu-id="f903b-224">String attributes are by default set to be indexable and the maximum length is 448 characters.</span><span class="sxs-lookup"><span data-stu-id="f903b-224">String attributes are by default set to be indexable and the maximum length is 448 characters.</span></span> <span data-ttu-id="f903b-225">If you are working with string attributes that might contain more, then make sure to include the following in the attribute flow:</span><span class="sxs-lookup"><span data-stu-id="f903b-225">If you are working with string attributes that might contain more, then make sure to include the following in the attribute flow:</span></span>  
`attributeName` <- `Left([attributeName],448)`

### <a name="changing-the-userprincipalsuffix"></a><span data-ttu-id="f903b-226">Changing the userPrincipalSuffix</span><span class="sxs-lookup"><span data-stu-id="f903b-226">Changing the userPrincipalSuffix</span></span>
<span data-ttu-id="f903b-227">The userPrincipalName attribute in Active Directory is not always known by the users and might not be suitable as the sign-in ID.</span><span class="sxs-lookup"><span data-stu-id="f903b-227">The userPrincipalName attribute in Active Directory is not always known by the users and might not be suitable as the sign-in ID.</span></span> <span data-ttu-id="f903b-228">The Azure AD Connect sync installation wizard allows picking a different attribute, for example mail.</span><span class="sxs-lookup"><span data-stu-id="f903b-228">The Azure AD Connect sync installation wizard allows picking a different attribute, for example mail.</span></span> <span data-ttu-id="f903b-229">But in some cases the attribute must be calculated.</span><span class="sxs-lookup"><span data-stu-id="f903b-229">But in some cases the attribute must be calculated.</span></span> <span data-ttu-id="f903b-230">For example, the company Contoso has two Azure AD directories, one for production and one for testing.</span><span class="sxs-lookup"><span data-stu-id="f903b-230">For example, the company Contoso has two Azure AD directories, one for production and one for testing.</span></span> <span data-ttu-id="f903b-231">They want the users in their test tenant to use another suffix in the sign-in ID.</span><span class="sxs-lookup"><span data-stu-id="f903b-231">They want the users in their test tenant to use another suffix in the sign-in ID.</span></span>  
`userPrincipalName` <- `Word([userPrincipalName],1,"@") & "@contosotest.com"`

<span data-ttu-id="f903b-232">In this expression, take everything left of the first @-sign (Word) and concatenate with a fixed string.</span><span class="sxs-lookup"><span data-stu-id="f903b-232">In this expression, take everything left of the first @-sign (Word) and concatenate with a fixed string.</span></span>

### <a name="convert-a-multi-value-to-a-single-value"></a><span data-ttu-id="f903b-233">Convert a multi-value to a single-value</span><span class="sxs-lookup"><span data-stu-id="f903b-233">Convert a multi-value to a single-value</span></span>
<span data-ttu-id="f903b-234">Some attributes in Active Directory are multi-valued in the schema even though they look single valued in Active Directory Users and Computers.</span><span class="sxs-lookup"><span data-stu-id="f903b-234">Some attributes in Active Directory are multi-valued in the schema even though they look single valued in Active Directory Users and Computers.</span></span> <span data-ttu-id="f903b-235">An example is the description attribute.</span><span class="sxs-lookup"><span data-stu-id="f903b-235">An example is the description attribute.</span></span>  
`description` <- `IIF(IsNullOrEmpty([description]),NULL,Left(Trim(Item([description],1)),448))`

<span data-ttu-id="f903b-236">In this expression in case the attribute has a value, take the first item (Item) in the attribute, remove leading and trailing spaces (Trim), and then keep the first 448 characters (Left) in the string.</span><span class="sxs-lookup"><span data-stu-id="f903b-236">In this expression in case the attribute has a value, take the first item (Item) in the attribute, remove leading and trailing spaces (Trim), and then keep the first 448 characters (Left) in the string.</span></span>

### <a name="do-not-flow-an-attribute"></a><span data-ttu-id="f903b-237">Do not flow an attribute</span><span class="sxs-lookup"><span data-stu-id="f903b-237">Do not flow an attribute</span></span>
<span data-ttu-id="f903b-238">For background on the scenario for this section, see [Control the attribute flow process](active-directory-aadconnectsync-understanding-declarative-provisioning.md#control-the-attribute-flow-process).</span><span class="sxs-lookup"><span data-stu-id="f903b-238">For background on the scenario for this section, see [Control the attribute flow process](active-directory-aadconnectsync-understanding-declarative-provisioning.md#control-the-attribute-flow-process).</span></span>

<span data-ttu-id="f903b-239">There are two ways to not flow an attribute.</span><span class="sxs-lookup"><span data-stu-id="f903b-239">There are two ways to not flow an attribute.</span></span> <span data-ttu-id="f903b-240">The first is available in the installation wizard and allows you to [remove selected attributes](active-directory-aadconnect-get-started-custom.md#azure-ad-app-and-attribute-filtering).</span><span class="sxs-lookup"><span data-stu-id="f903b-240">The first is available in the installation wizard and allows you to [remove selected attributes](active-directory-aadconnect-get-started-custom.md#azure-ad-app-and-attribute-filtering).</span></span> <span data-ttu-id="f903b-241">This option works if you have never synchronized the attribute before.</span><span class="sxs-lookup"><span data-stu-id="f903b-241">This option works if you have never synchronized the attribute before.</span></span> <span data-ttu-id="f903b-242">However, if you have started to synchronize this attribute and later remove it with this feature, then the sync engine stops managing the attribute and the existing values are left in Azure AD.</span><span class="sxs-lookup"><span data-stu-id="f903b-242">However, if you have started to synchronize this attribute and later remove it with this feature, then the sync engine stops managing the attribute and the existing values are left in Azure AD.</span></span>

<span data-ttu-id="f903b-243">If you want to remove the value of an attribute and make sure it does not flow in the future, you need create a custom rule instead.</span><span class="sxs-lookup"><span data-stu-id="f903b-243">If you want to remove the value of an attribute and make sure it does not flow in the future, you need create a custom rule instead.</span></span>

<span data-ttu-id="f903b-244">At Fabrikam, we have realized that some of the attributes we synchronize to the cloud should not be there.</span><span class="sxs-lookup"><span data-stu-id="f903b-244">At Fabrikam, we have realized that some of the attributes we synchronize to the cloud should not be there.</span></span> <span data-ttu-id="f903b-245">We want to make sure these attributes are removed from Azure AD.</span><span class="sxs-lookup"><span data-stu-id="f903b-245">We want to make sure these attributes are removed from Azure AD.</span></span>  
![Bad Extension Attributes](https://docstestmedia1.blob.core.windows.net/azure-media/articles/active-directory/connect/media/active-directory-aadconnectsync-change-the-configuration/badextensionattribute.png)

* <span data-ttu-id="f903b-247">Create a new inbound Synchronization Rule and populate the description ![Descriptions](https://docstestmedia1.blob.core.windows.net/azure-media/articles/active-directory/connect/media/active-directory-aadconnectsync-change-the-configuration/syncruledescription.png)</span><span class="sxs-lookup"><span data-stu-id="f903b-247">Create a new inbound Synchronization Rule and populate the description ![Descriptions](https://docstestmedia1.blob.core.windows.net/azure-media/articles/active-directory/connect/media/active-directory-aadconnectsync-change-the-configuration/syncruledescription.png)</span></span>
* <span data-ttu-id="f903b-248">Create attribute flows of type **Expression** and with the source **AuthoritativeNull**.</span><span class="sxs-lookup"><span data-stu-id="f903b-248">Create attribute flows of type **Expression** and with the source **AuthoritativeNull**.</span></span> <span data-ttu-id="f903b-249">The literal **AuthoritativeNull** indicates that the value should be empty in the MV even if a lower precedence sync rule tries to populate the value.</span><span class="sxs-lookup"><span data-stu-id="f903b-249">The literal **AuthoritativeNull** indicates that the value should be empty in the MV even if a lower precedence sync rule tries to populate the value.</span></span>
  <span data-ttu-id="f903b-250">![Transformation for Extension Attributes](https://docstestmedia1.blob.core.windows.net/azure-media/articles/active-directory/connect/media/active-directory-aadconnectsync-change-the-configuration/syncruletransformations.png)</span><span class="sxs-lookup"><span data-stu-id="f903b-250">![Transformation for Extension Attributes](https://docstestmedia1.blob.core.windows.net/azure-media/articles/active-directory/connect/media/active-directory-aadconnectsync-change-the-configuration/syncruletransformations.png)</span></span>
* <span data-ttu-id="f903b-251">Save the Sync Rule.</span><span class="sxs-lookup"><span data-stu-id="f903b-251">Save the Sync Rule.</span></span> <span data-ttu-id="f903b-252">Start **Synchronization Service**, find the Connector, select **Run**, and **Full Synchronization**.</span><span class="sxs-lookup"><span data-stu-id="f903b-252">Start **Synchronization Service**, find the Connector, select **Run**, and **Full Synchronization**.</span></span> <span data-ttu-id="f903b-253">This step recalculates all attribute flows.</span><span class="sxs-lookup"><span data-stu-id="f903b-253">This step recalculates all attribute flows.</span></span>
* <span data-ttu-id="f903b-254">Verify that the intended changes are about to be exported by searching the connector space.</span><span class="sxs-lookup"><span data-stu-id="f903b-254">Verify that the intended changes are about to be exported by searching the connector space.</span></span>
  <span data-ttu-id="f903b-255">![Staged delete](https://docstestmedia1.blob.core.windows.net/azure-media/articles/active-directory/connect/media/active-directory-aadconnectsync-change-the-configuration/deletetobeexported.png)</span><span class="sxs-lookup"><span data-stu-id="f903b-255">![Staged delete](https://docstestmedia1.blob.core.windows.net/azure-media/articles/active-directory/connect/media/active-directory-aadconnectsync-change-the-configuration/deletetobeexported.png)</span></span>

## <a name="create-rules-with-powershell"></a><span data-ttu-id="f903b-256">Create rules with PowerShell</span><span class="sxs-lookup"><span data-stu-id="f903b-256">Create rules with PowerShell</span></span>
<span data-ttu-id="f903b-257">Using the sync rule editor works fine when you only have a few changes to make.</span><span class="sxs-lookup"><span data-stu-id="f903b-257">Using the sync rule editor works fine when you only have a few changes to make.</span></span> <span data-ttu-id="f903b-258">If you need to make many changes, then PowerShell might be a better option.</span><span class="sxs-lookup"><span data-stu-id="f903b-258">If you need to make many changes, then PowerShell might be a better option.</span></span> <span data-ttu-id="f903b-259">Some advanced features are only available with PowerShell.</span><span class="sxs-lookup"><span data-stu-id="f903b-259">Some advanced features are only available with PowerShell.</span></span>

### <a name="get-the-powershell-script-for-an-out-of-box-rule"></a><span data-ttu-id="f903b-260">Get the PowerShell script for an out-of-box rule</span><span class="sxs-lookup"><span data-stu-id="f903b-260">Get the PowerShell script for an out-of-box rule</span></span>
<span data-ttu-id="f903b-261">To see the PowerShell script that created an out-of-box rule, select the rule in the sync rules editor and click **Export**.</span><span class="sxs-lookup"><span data-stu-id="f903b-261">To see the PowerShell script that created an out-of-box rule, select the rule in the sync rules editor and click **Export**.</span></span> <span data-ttu-id="f903b-262">This action gives you the PowerShell script that created the rule.</span><span class="sxs-lookup"><span data-stu-id="f903b-262">This action gives you the PowerShell script that created the rule.</span></span>

### <a name="advanced-precedence"></a><span data-ttu-id="f903b-263">Advanced precedence</span><span class="sxs-lookup"><span data-stu-id="f903b-263">Advanced precedence</span></span>
<span data-ttu-id="f903b-264">The out-of-box sync rules start with a precedence value of 100.</span><span class="sxs-lookup"><span data-stu-id="f903b-264">The out-of-box sync rules start with a precedence value of 100.</span></span> <span data-ttu-id="f903b-265">If you have many forests and you need to make many custom changes, then 99 sync rules might not be enough.</span><span class="sxs-lookup"><span data-stu-id="f903b-265">If you have many forests and you need to make many custom changes, then 99 sync rules might not be enough.</span></span>

<span data-ttu-id="f903b-266">You can instruct the Sync Engine that you want additional rules inserted before the out-of-box rules.</span><span class="sxs-lookup"><span data-stu-id="f903b-266">You can instruct the Sync Engine that you want additional rules inserted before the out-of-box rules.</span></span> <span data-ttu-id="f903b-267">To get this behavior, follow these steps:</span><span class="sxs-lookup"><span data-stu-id="f903b-267">To get this behavior, follow these steps:</span></span>

1. <span data-ttu-id="f903b-268">Mark the first out-of-box sync rule (this rule is the **In from AD-User Join**) in the sync rule editor and select **Export**.</span><span class="sxs-lookup"><span data-stu-id="f903b-268">Mark the first out-of-box sync rule (this rule is the **In from AD-User Join**) in the sync rule editor and select **Export**.</span></span> <span data-ttu-id="f903b-269">Copy the SR Identifier value.</span><span class="sxs-lookup"><span data-stu-id="f903b-269">Copy the SR Identifier value.</span></span>  
<span data-ttu-id="f903b-270">![PowerShell before change](https://docstestmedia1.blob.core.windows.net/azure-media/articles/active-directory/connect/media/active-directory-aadconnectsync-change-the-configuration/powershell1.png)</span><span class="sxs-lookup"><span data-stu-id="f903b-270">![PowerShell before change](https://docstestmedia1.blob.core.windows.net/azure-media/articles/active-directory/connect/media/active-directory-aadconnectsync-change-the-configuration/powershell1.png)</span></span>  
2. <span data-ttu-id="f903b-271">Create the new sync rule.</span><span class="sxs-lookup"><span data-stu-id="f903b-271">Create the new sync rule.</span></span> <span data-ttu-id="f903b-272">You can use the sync rule editor to create it.</span><span class="sxs-lookup"><span data-stu-id="f903b-272">You can use the sync rule editor to create it.</span></span> <span data-ttu-id="f903b-273">Export the rule to a PowerShell script.</span><span class="sxs-lookup"><span data-stu-id="f903b-273">Export the rule to a PowerShell script.</span></span>
3. <span data-ttu-id="f903b-274">In the property **PrecedenceBefore**, insert the identifier value from the out-of-box rule.</span><span class="sxs-lookup"><span data-stu-id="f903b-274">In the property **PrecedenceBefore**, insert the identifier value from the out-of-box rule.</span></span> <span data-ttu-id="f903b-275">Set the **Precedence** to **0**.</span><span class="sxs-lookup"><span data-stu-id="f903b-275">Set the **Precedence** to **0**.</span></span> <span data-ttu-id="f903b-276">Make sure the Identifier attribute is unique and you are not reusing a GUID from another rule.</span><span class="sxs-lookup"><span data-stu-id="f903b-276">Make sure the Identifier attribute is unique and you are not reusing a GUID from another rule.</span></span> <span data-ttu-id="f903b-277">Also make sure that the **ImmutableTag** property is not set; this property should only be set for an out-of-box rule.</span><span class="sxs-lookup"><span data-stu-id="f903b-277">Also make sure that the **ImmutableTag** property is not set; this property should only be set for an out-of-box rule.</span></span> <span data-ttu-id="f903b-278">Save the PowerShell script and run it.</span><span class="sxs-lookup"><span data-stu-id="f903b-278">Save the PowerShell script and run it.</span></span> <span data-ttu-id="f903b-279">The result is that your custom rule is assigned the precedence value of 100 and all other out-of-box rules are incremented.</span><span class="sxs-lookup"><span data-stu-id="f903b-279">The result is that your custom rule is assigned the precedence value of 100 and all other out-of-box rules are incremented.</span></span>  
<span data-ttu-id="f903b-280">![PowerShell after change](https://docstestmedia1.blob.core.windows.net/azure-media/articles/active-directory/connect/media/active-directory-aadconnectsync-change-the-configuration/powershell2.png)</span><span class="sxs-lookup"><span data-stu-id="f903b-280">![PowerShell after change](https://docstestmedia1.blob.core.windows.net/azure-media/articles/active-directory/connect/media/active-directory-aadconnectsync-change-the-configuration/powershell2.png)</span></span>  

<span data-ttu-id="f903b-281">You can have many custom sync rules using the same **PrecedenceBefore** value when needed.</span><span class="sxs-lookup"><span data-stu-id="f903b-281">You can have many custom sync rules using the same **PrecedenceBefore** value when needed.</span></span>

## <a name="next-steps"></a><span data-ttu-id="f903b-282">Next steps</span><span class="sxs-lookup"><span data-stu-id="f903b-282">Next steps</span></span>
* <span data-ttu-id="f903b-283">Read more about the configuration model in [Understanding Declarative Provisioning](active-directory-aadconnectsync-understanding-declarative-provisioning.md).</span><span class="sxs-lookup"><span data-stu-id="f903b-283">Read more about the configuration model in [Understanding Declarative Provisioning](active-directory-aadconnectsync-understanding-declarative-provisioning.md).</span></span>
* <span data-ttu-id="f903b-284">Read more about the expression language in [Understanding Declarative Provisioning Expressions](active-directory-aadconnectsync-understanding-declarative-provisioning-expressions.md).</span><span class="sxs-lookup"><span data-stu-id="f903b-284">Read more about the expression language in [Understanding Declarative Provisioning Expressions](active-directory-aadconnectsync-understanding-declarative-provisioning-expressions.md).</span></span>

<span data-ttu-id="f903b-285">**Overview topics**</span><span class="sxs-lookup"><span data-stu-id="f903b-285">**Overview topics**</span></span>

* [<span data-ttu-id="f903b-286">Azure AD Connect sync: Understand and customize synchronization</span><span class="sxs-lookup"><span data-stu-id="f903b-286">Azure AD Connect sync: Understand and customize synchronization</span></span>](active-directory-aadconnectsync-whatis.md)
* [<span data-ttu-id="f903b-287">Integrating your on-premises identities with Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="f903b-287">Integrating your on-premises identities with Azure Active Directory</span></span>](active-directory-aadconnect.md)




















