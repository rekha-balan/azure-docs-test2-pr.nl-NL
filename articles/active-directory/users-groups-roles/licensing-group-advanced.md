---
title: Azure Active Directory group-based licensing additional scenarios | Microsoft Docs
description: More scenarios for Azure Active Directory group-based licensing
services: active-directory
keywords: Azure AD licensing
documentationcenter: ''
author: curtand
manager: mtillman
editor: piotrci
ms.service: active-directory
ms.topic: article
ms.workload: identity
ms.component: users-groups-roles
ms.date: 06/02/2017
ms.author: curtand
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: 15b52920774a878cd386ced5966d507768a8af70
ms.sourcegitcommit: d1451406a010fd3aa854dc8e5b77dc5537d8050e
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 09/13/2018
ms.locfileid: "44969118"
---
# <a name="scenarios-limitations-and-known-issues-using-groups-to-manage-licensing-in-azure-active-directory"></a><span data-ttu-id="74e0e-104">Scenarios, limitations, and known issues using groups to manage licensing in Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="74e0e-104">Scenarios, limitations, and known issues using groups to manage licensing in Azure Active Directory</span></span>

<span data-ttu-id="74e0e-105">Use the following information and examples to gain a more advanced understanding of Azure Active Directory (Azure AD) group-based licensing.</span><span class="sxs-lookup"><span data-stu-id="74e0e-105">Use the following information and examples to gain a more advanced understanding of Azure Active Directory (Azure AD) group-based licensing.</span></span>

## <a name="usage-location"></a><span data-ttu-id="74e0e-106">Usage location</span><span class="sxs-lookup"><span data-stu-id="74e0e-106">Usage location</span></span>

<span data-ttu-id="74e0e-107">Some Microsoft services are not available in all locations.</span><span class="sxs-lookup"><span data-stu-id="74e0e-107">Some Microsoft services are not available in all locations.</span></span> <span data-ttu-id="74e0e-108">Before a license can be assigned to a user, the administrator has to specify the **Usage location** property on the user.</span><span class="sxs-lookup"><span data-stu-id="74e0e-108">Before a license can be assigned to a user, the administrator has to specify the **Usage location** property on the user.</span></span> <span data-ttu-id="74e0e-109">In [the Azure portal](https://portal.azure.com), you can specify in **User** &gt; **Profile** &gt; **Settings**.</span><span class="sxs-lookup"><span data-stu-id="74e0e-109">In [the Azure portal](https://portal.azure.com), you can specify in **User** &gt; **Profile** &gt; **Settings**.</span></span>

<span data-ttu-id="74e0e-110">For group license assignment, any users without a usage location specified will inherit the location of the directory.</span><span class="sxs-lookup"><span data-stu-id="74e0e-110">For group license assignment, any users without a usage location specified will inherit the location of the directory.</span></span> <span data-ttu-id="74e0e-111">If you have users in multiple locations, make sure to reflect that correctly in your user objects before adding users to groups with licenses.</span><span class="sxs-lookup"><span data-stu-id="74e0e-111">If you have users in multiple locations, make sure to reflect that correctly in your user objects before adding users to groups with licenses.</span></span>

> [!NOTE]
> <span data-ttu-id="74e0e-112">Group license assignment will never modify an existing usage location value on a user.</span><span class="sxs-lookup"><span data-stu-id="74e0e-112">Group license assignment will never modify an existing usage location value on a user.</span></span> <span data-ttu-id="74e0e-113">We recommend that you always set usage location as part of your user creation flow in Azure AD (e.g. via AAD Connect configuration) - that will ensure the result of license assignment is always correct, and users do not receive services in locations that are not allowed.</span><span class="sxs-lookup"><span data-stu-id="74e0e-113">We recommend that you always set usage location as part of your user creation flow in Azure AD (e.g. via AAD Connect configuration) - that will ensure the result of license assignment is always correct, and users do not receive services in locations that are not allowed.</span></span>

## <a name="use-group-based-licensing-with-dynamic-groups"></a><span data-ttu-id="74e0e-114">Use group-based licensing with dynamic groups</span><span class="sxs-lookup"><span data-stu-id="74e0e-114">Use group-based licensing with dynamic groups</span></span>

<span data-ttu-id="74e0e-115">You can use group-based licensing with any security group, which means it can be combined with Azure AD dynamic groups.</span><span class="sxs-lookup"><span data-stu-id="74e0e-115">You can use group-based licensing with any security group, which means it can be combined with Azure AD dynamic groups.</span></span> <span data-ttu-id="74e0e-116">Dynamic groups run rules against user object attributes to automatically add and remove users from groups.</span><span class="sxs-lookup"><span data-stu-id="74e0e-116">Dynamic groups run rules against user object attributes to automatically add and remove users from groups.</span></span>

<span data-ttu-id="74e0e-117">For example, you can create a dynamic group for some set of products you want to assign to users.</span><span class="sxs-lookup"><span data-stu-id="74e0e-117">For example, you can create a dynamic group for some set of products you want to assign to users.</span></span> <span data-ttu-id="74e0e-118">Each group is populated by a rule adding users by their attributes, and each group is assigned the licenses that you want them to receive.</span><span class="sxs-lookup"><span data-stu-id="74e0e-118">Each group is populated by a rule adding users by their attributes, and each group is assigned the licenses that you want them to receive.</span></span> <span data-ttu-id="74e0e-119">You can assign the attribute on-premises and sync it with Azure AD, or you can manage the attribute directly in the cloud.</span><span class="sxs-lookup"><span data-stu-id="74e0e-119">You can assign the attribute on-premises and sync it with Azure AD, or you can manage the attribute directly in the cloud.</span></span>

<span data-ttu-id="74e0e-120">Licenses are assigned to the user shortly after they are added to the group.</span><span class="sxs-lookup"><span data-stu-id="74e0e-120">Licenses are assigned to the user shortly after they are added to the group.</span></span> <span data-ttu-id="74e0e-121">When the attribute is changed, the user leaves the groups and the licenses are removed.</span><span class="sxs-lookup"><span data-stu-id="74e0e-121">When the attribute is changed, the user leaves the groups and the licenses are removed.</span></span>

### <a name="example"></a><span data-ttu-id="74e0e-122">Example</span><span class="sxs-lookup"><span data-stu-id="74e0e-122">Example</span></span>

<span data-ttu-id="74e0e-123">Consider the example of an on-premises identity management solution that decides which users should have access to Microsoft web services.</span><span class="sxs-lookup"><span data-stu-id="74e0e-123">Consider the example of an on-premises identity management solution that decides which users should have access to Microsoft web services.</span></span> <span data-ttu-id="74e0e-124">It uses **extensionAttribute1** to store a string value representing the licenses the user should have.</span><span class="sxs-lookup"><span data-stu-id="74e0e-124">It uses **extensionAttribute1** to store a string value representing the licenses the user should have.</span></span> <span data-ttu-id="74e0e-125">Azure AD Connect syncs it with Azure AD.</span><span class="sxs-lookup"><span data-stu-id="74e0e-125">Azure AD Connect syncs it with Azure AD.</span></span>

<span data-ttu-id="74e0e-126">Users might need one license but not another, or might need both.</span><span class="sxs-lookup"><span data-stu-id="74e0e-126">Users might need one license but not another, or might need both.</span></span> <span data-ttu-id="74e0e-127">Here's an example, in which you are distributing Office 365 Enterprise E5 and Enterprise Mobility + Security (EMS) licenses to users in groups:</span><span class="sxs-lookup"><span data-stu-id="74e0e-127">Here's an example, in which you are distributing Office 365 Enterprise E5 and Enterprise Mobility + Security (EMS) licenses to users in groups:</span></span>

#### <a name="office-365-enterprise-e5-base-services"></a><span data-ttu-id="74e0e-128">Office 365 Enterprise E5: base services</span><span class="sxs-lookup"><span data-stu-id="74e0e-128">Office 365 Enterprise E5: base services</span></span>

![Screenshot of Office 365 Enterprise E5 base services](./media/licensing-group-advanced/o365-e5-base-services.png)

#### <a name="enterprise-mobility--security-licensed-users"></a><span data-ttu-id="74e0e-130">Enterprise Mobility + Security: licensed users</span><span class="sxs-lookup"><span data-stu-id="74e0e-130">Enterprise Mobility + Security: licensed users</span></span>

![Screenshot of Enterprise Mobility + Security licensed users](./media/licensing-group-advanced/o365-e5-licensed-users.png)

<span data-ttu-id="74e0e-132">For this example, modify one user and set their extensionAttribute1 to the value of `EMS;E5_baseservices;` if you want the user to have both licenses.</span><span class="sxs-lookup"><span data-stu-id="74e0e-132">For this example, modify one user and set their extensionAttribute1 to the value of `EMS;E5_baseservices;` if you want the user to have both licenses.</span></span> <span data-ttu-id="74e0e-133">You can make this modification on-premises.</span><span class="sxs-lookup"><span data-stu-id="74e0e-133">You can make this modification on-premises.</span></span> <span data-ttu-id="74e0e-134">After the change syncs with the cloud, the user is automatically added to both groups, and licenses are assigned.</span><span class="sxs-lookup"><span data-stu-id="74e0e-134">After the change syncs with the cloud, the user is automatically added to both groups, and licenses are assigned.</span></span>

![Screenshot showing how to set the user's extensionAttribute1](./media/licensing-group-advanced/user-set-extensionAttribute1.png)

> [!WARNING]
> <span data-ttu-id="74e0e-136">Use caution when modifying an existing group’s membership rule.</span><span class="sxs-lookup"><span data-stu-id="74e0e-136">Use caution when modifying an existing group’s membership rule.</span></span> <span data-ttu-id="74e0e-137">When a rule is changed, the membership of the group will be re-evaluated and users who no longer match the new rule will be removed (users who still match the new rule will not be affected during this process).</span><span class="sxs-lookup"><span data-stu-id="74e0e-137">When a rule is changed, the membership of the group will be re-evaluated and users who no longer match the new rule will be removed (users who still match the new rule will not be affected during this process).</span></span> <span data-ttu-id="74e0e-138">Those users will have their licenses removed during the process which may result in loss of service, or in some cases, loss of data.</span><span class="sxs-lookup"><span data-stu-id="74e0e-138">Those users will have their licenses removed during the process which may result in loss of service, or in some cases, loss of data.</span></span>

> <span data-ttu-id="74e0e-139">If you have a large dynamic group you depend on for license assignment, consider validating any major changes on a smaller test group before applying them to the main group.</span><span class="sxs-lookup"><span data-stu-id="74e0e-139">If you have a large dynamic group you depend on for license assignment, consider validating any major changes on a smaller test group before applying them to the main group.</span></span>

## <a name="multiple-groups-and-multiple-licenses"></a><span data-ttu-id="74e0e-140">Multiple groups and multiple licenses</span><span class="sxs-lookup"><span data-stu-id="74e0e-140">Multiple groups and multiple licenses</span></span>

<span data-ttu-id="74e0e-141">A user can be a member of multiple groups with licenses.</span><span class="sxs-lookup"><span data-stu-id="74e0e-141">A user can be a member of multiple groups with licenses.</span></span> <span data-ttu-id="74e0e-142">Here are some things to consider:</span><span class="sxs-lookup"><span data-stu-id="74e0e-142">Here are some things to consider:</span></span>

- <span data-ttu-id="74e0e-143">Multiple licenses for the same product can overlap, and they result in all enabled services being applied to the user.</span><span class="sxs-lookup"><span data-stu-id="74e0e-143">Multiple licenses for the same product can overlap, and they result in all enabled services being applied to the user.</span></span> <span data-ttu-id="74e0e-144">The following example shows two licensing groups: *E3 base services* contains the foundation services to deploy first, to all users.</span><span class="sxs-lookup"><span data-stu-id="74e0e-144">The following example shows two licensing groups: *E3 base services* contains the foundation services to deploy first, to all users.</span></span> <span data-ttu-id="74e0e-145">And *E3 extended services* contains additional services (Sway and Planner) to deploy only to some users.</span><span class="sxs-lookup"><span data-stu-id="74e0e-145">And *E3 extended services* contains additional services (Sway and Planner) to deploy only to some users.</span></span> <span data-ttu-id="74e0e-146">In this example, the user was added to both groups:</span><span class="sxs-lookup"><span data-stu-id="74e0e-146">In this example, the user was added to both groups:</span></span>

  ![Screenshot of enabled services](./media/licensing-group-advanced/view-enabled-services.png)

  <span data-ttu-id="74e0e-148">As a result, the user has 7 of the 12 services in the product enabled, while using only one license for this product.</span><span class="sxs-lookup"><span data-stu-id="74e0e-148">As a result, the user has 7 of the 12 services in the product enabled, while using only one license for this product.</span></span>

- <span data-ttu-id="74e0e-149">Selecting the *E3* license shows more details, including information about which groups caused what services to be enabled for the user.</span><span class="sxs-lookup"><span data-stu-id="74e0e-149">Selecting the *E3* license shows more details, including information about which groups caused what services to be enabled for the user.</span></span>

  ![Screenshot of enabled services by group](./media/licensing-group-advanced/view-enabled-service-by-group.png)

## <a name="direct-licenses-coexist-with-group-licenses"></a><span data-ttu-id="74e0e-151">Direct licenses coexist with group licenses</span><span class="sxs-lookup"><span data-stu-id="74e0e-151">Direct licenses coexist with group licenses</span></span>

<span data-ttu-id="74e0e-152">When a user inherits a license from a group, you can't directly remove or modify that license assignment in the user's properties.</span><span class="sxs-lookup"><span data-stu-id="74e0e-152">When a user inherits a license from a group, you can't directly remove or modify that license assignment in the user's properties.</span></span> <span data-ttu-id="74e0e-153">Changes must be made in the group and then propagated to all users.</span><span class="sxs-lookup"><span data-stu-id="74e0e-153">Changes must be made in the group and then propagated to all users.</span></span>

<span data-ttu-id="74e0e-154">It is possible, however, to assign the same product license directly to the user, in addition to the inherited license.</span><span class="sxs-lookup"><span data-stu-id="74e0e-154">It is possible, however, to assign the same product license directly to the user, in addition to the inherited license.</span></span> <span data-ttu-id="74e0e-155">You can enable additional services from the product just for one user, without affecting other users.</span><span class="sxs-lookup"><span data-stu-id="74e0e-155">You can enable additional services from the product just for one user, without affecting other users.</span></span>

<span data-ttu-id="74e0e-156">Directly assigned licenses can be removed, and don’t affect inherited licenses.</span><span class="sxs-lookup"><span data-stu-id="74e0e-156">Directly assigned licenses can be removed, and don’t affect inherited licenses.</span></span> <span data-ttu-id="74e0e-157">Consider the user who inherits an Office 365 Enterprise E3 license from a group.</span><span class="sxs-lookup"><span data-stu-id="74e0e-157">Consider the user who inherits an Office 365 Enterprise E3 license from a group.</span></span>

1. <span data-ttu-id="74e0e-158">Initially, the user inherits the license only from the *E3 basic services* group, which enables four service plans, as shown:</span><span class="sxs-lookup"><span data-stu-id="74e0e-158">Initially, the user inherits the license only from the *E3 basic services* group, which enables four service plans, as shown:</span></span>

  ![Screenshot of E3 group enabled services](./media/licensing-group-advanced/e3-group-enabled-services.png)

2. <span data-ttu-id="74e0e-160">You can select **Assign** to directly assign an E3 license to the user.</span><span class="sxs-lookup"><span data-stu-id="74e0e-160">You can select **Assign** to directly assign an E3 license to the user.</span></span> <span data-ttu-id="74e0e-161">In this case, you are going to disable all service plans except Yammer Enterprise:</span><span class="sxs-lookup"><span data-stu-id="74e0e-161">In this case, you are going to disable all service plans except Yammer Enterprise:</span></span>

  ![Screenshot of how to assign a license directly to a user](./media/licensing-group-advanced/assign-license-to-user.png)

3. <span data-ttu-id="74e0e-163">As a result, the user still uses only one license of the E3 product.</span><span class="sxs-lookup"><span data-stu-id="74e0e-163">As a result, the user still uses only one license of the E3 product.</span></span> <span data-ttu-id="74e0e-164">But the direct assignment enables the Yammer Enterprise service for that user only.</span><span class="sxs-lookup"><span data-stu-id="74e0e-164">But the direct assignment enables the Yammer Enterprise service for that user only.</span></span> <span data-ttu-id="74e0e-165">You can see which services are enabled by the group membership versus the direct assignment:</span><span class="sxs-lookup"><span data-stu-id="74e0e-165">You can see which services are enabled by the group membership versus the direct assignment:</span></span>

  ![Screenshot of inherited versus direct assignment](./media/licensing-group-advanced/direct-vs-inherited-assignment.png)

4. <span data-ttu-id="74e0e-167">When you use direct assignment, the following operations are allowed:</span><span class="sxs-lookup"><span data-stu-id="74e0e-167">When you use direct assignment, the following operations are allowed:</span></span>

  - <span data-ttu-id="74e0e-168">Yammer Enterprise can be turned off on the user object directly.</span><span class="sxs-lookup"><span data-stu-id="74e0e-168">Yammer Enterprise can be turned off on the user object directly.</span></span> <span data-ttu-id="74e0e-169">The **On/Off** toggle in the illustration was enabled for this service, as opposed to the other service toggles.</span><span class="sxs-lookup"><span data-stu-id="74e0e-169">The **On/Off** toggle in the illustration was enabled for this service, as opposed to the other service toggles.</span></span> <span data-ttu-id="74e0e-170">Because the service is enabled directly on the user, it can be modified.</span><span class="sxs-lookup"><span data-stu-id="74e0e-170">Because the service is enabled directly on the user, it can be modified.</span></span>
  - <span data-ttu-id="74e0e-171">Additional services can be enabled as well, as part of the directly assigned license.</span><span class="sxs-lookup"><span data-stu-id="74e0e-171">Additional services can be enabled as well, as part of the directly assigned license.</span></span>
  - <span data-ttu-id="74e0e-172">The **Remove** button can be used to remove the direct license from the user.</span><span class="sxs-lookup"><span data-stu-id="74e0e-172">The **Remove** button can be used to remove the direct license from the user.</span></span> <span data-ttu-id="74e0e-173">You can see that the user now only has the inherited group license and only the original services remain enabled:</span><span class="sxs-lookup"><span data-stu-id="74e0e-173">You can see that the user now only has the inherited group license and only the original services remain enabled:</span></span>

    ![Screenshot showing how to remove direct assignment](./media/licensing-group-advanced/remove-direct-license.png)

## <a name="managing-new-services-added-to-products"></a><span data-ttu-id="74e0e-175">Managing new services added to products</span><span class="sxs-lookup"><span data-stu-id="74e0e-175">Managing new services added to products</span></span>
<span data-ttu-id="74e0e-176">When Microsoft adds a new service to a product, it will be enabled by default in all groups to which you have assigned the product license.</span><span class="sxs-lookup"><span data-stu-id="74e0e-176">When Microsoft adds a new service to a product, it will be enabled by default in all groups to which you have assigned the product license.</span></span> <span data-ttu-id="74e0e-177">Users in your tenant who are subscribed to notifications about product changes will receive emails ahead of time notifying them about the upcoming service additions.</span><span class="sxs-lookup"><span data-stu-id="74e0e-177">Users in your tenant who are subscribed to notifications about product changes will receive emails ahead of time notifying them about the upcoming service additions.</span></span>

<span data-ttu-id="74e0e-178">As an administrator, you can review all groups affected by the change and take action, such as disabling the new service in each group.</span><span class="sxs-lookup"><span data-stu-id="74e0e-178">As an administrator, you can review all groups affected by the change and take action, such as disabling the new service in each group.</span></span> <span data-ttu-id="74e0e-179">For example, if you created groups targeting only specific services for deployment, you can revisit those groups and make sure that any newly added services are disabled.</span><span class="sxs-lookup"><span data-stu-id="74e0e-179">For example, if you created groups targeting only specific services for deployment, you can revisit those groups and make sure that any newly added services are disabled.</span></span>

<span data-ttu-id="74e0e-180">Here is an example of what this process may look like:</span><span class="sxs-lookup"><span data-stu-id="74e0e-180">Here is an example of what this process may look like:</span></span>

1. <span data-ttu-id="74e0e-181">Originally, you assigned the *Office 365 Enterprise E5* product to several groups.</span><span class="sxs-lookup"><span data-stu-id="74e0e-181">Originally, you assigned the *Office 365 Enterprise E5* product to several groups.</span></span> <span data-ttu-id="74e0e-182">One of those groups, called *O365 E5 - Exchange only* was designed to enable only the *Exchange Online (Plan 2)* service for its members.</span><span class="sxs-lookup"><span data-stu-id="74e0e-182">One of those groups, called *O365 E5 - Exchange only* was designed to enable only the *Exchange Online (Plan 2)* service for its members.</span></span>

2. <span data-ttu-id="74e0e-183">You received a notification from Microsoft that the E5 product will be extended with a new service - *Microsoft Stream*.</span><span class="sxs-lookup"><span data-stu-id="74e0e-183">You received a notification from Microsoft that the E5 product will be extended with a new service - *Microsoft Stream*.</span></span> <span data-ttu-id="74e0e-184">When the service becomes available in your tenant, you can do the following:</span><span class="sxs-lookup"><span data-stu-id="74e0e-184">When the service becomes available in your tenant, you can do the following:</span></span>

3. <span data-ttu-id="74e0e-185">Go to the [**Azure Active Directory > Licenses > All products**](https://portal.azure.com/#blade/Microsoft_AAD_IAM/LicensesMenuBlade/Products) blade and select *Office 365 Enterprise E5*, then select **Licensed Groups** to view a list of all groups with that product.</span><span class="sxs-lookup"><span data-stu-id="74e0e-185">Go to the [**Azure Active Directory > Licenses > All products**](https://portal.azure.com/#blade/Microsoft_AAD_IAM/LicensesMenuBlade/Products) blade and select *Office 365 Enterprise E5*, then select **Licensed Groups** to view a list of all groups with that product.</span></span>

4. <span data-ttu-id="74e0e-186">Click on the group you want to review (in this case, *O365 E5 - Exchange only*).</span><span class="sxs-lookup"><span data-stu-id="74e0e-186">Click on the group you want to review (in this case, *O365 E5 - Exchange only*).</span></span> <span data-ttu-id="74e0e-187">This will open the **Licenses** tab. Clicking on the E5 license will open a blade listing all enabled services.</span><span class="sxs-lookup"><span data-stu-id="74e0e-187">This will open the **Licenses** tab. Clicking on the E5 license will open a blade listing all enabled services.</span></span>
> [!NOTE]
> <span data-ttu-id="74e0e-188">The *Microsoft Stream* service has been automatically added and enabled in this group, in addition to the *Exchange Online* service:</span><span class="sxs-lookup"><span data-stu-id="74e0e-188">The *Microsoft Stream* service has been automatically added and enabled in this group, in addition to the *Exchange Online* service:</span></span>

  ![Screenshot of new service added to a group license](./media/licensing-group-advanced/manage-new-services.png)

5. <span data-ttu-id="74e0e-190">If you want to disable the new service in this group, click the **On/Off** toggle next to the service and click the **Save** button to confirm the change.</span><span class="sxs-lookup"><span data-stu-id="74e0e-190">If you want to disable the new service in this group, click the **On/Off** toggle next to the service and click the **Save** button to confirm the change.</span></span> <span data-ttu-id="74e0e-191">Azure AD will now process all users in the group to apply the change; any new users added to the group will not have the *Microsoft Stream* service enabled.</span><span class="sxs-lookup"><span data-stu-id="74e0e-191">Azure AD will now process all users in the group to apply the change; any new users added to the group will not have the *Microsoft Stream* service enabled.</span></span>

  > [!NOTE]
  > <span data-ttu-id="74e0e-192">Users may still have the service enabled through some other license assignment (another group they are members of or a direct license assignment).</span><span class="sxs-lookup"><span data-stu-id="74e0e-192">Users may still have the service enabled through some other license assignment (another group they are members of or a direct license assignment).</span></span>

6. <span data-ttu-id="74e0e-193">If needed, perform the same steps for other groups with this product assigned.</span><span class="sxs-lookup"><span data-stu-id="74e0e-193">If needed, perform the same steps for other groups with this product assigned.</span></span>

## <a name="use-powershell-to-see-who-has-inherited-and-direct-licenses"></a><span data-ttu-id="74e0e-194">Use PowerShell to see who has inherited and direct licenses</span><span class="sxs-lookup"><span data-stu-id="74e0e-194">Use PowerShell to see who has inherited and direct licenses</span></span>
<span data-ttu-id="74e0e-195">You can use a PowerShell script to check if users have a license assigned directly or inherited from a group.</span><span class="sxs-lookup"><span data-stu-id="74e0e-195">You can use a PowerShell script to check if users have a license assigned directly or inherited from a group.</span></span>

1. <span data-ttu-id="74e0e-196">Run the `connect-msolservice` cmdlet to authenticate and connect to your tenant.</span><span class="sxs-lookup"><span data-stu-id="74e0e-196">Run the `connect-msolservice` cmdlet to authenticate and connect to your tenant.</span></span>

2. <span data-ttu-id="74e0e-197">`Get-MsolAccountSku` can be used to discover all provisioned product licenses in the tenant.</span><span class="sxs-lookup"><span data-stu-id="74e0e-197">`Get-MsolAccountSku` can be used to discover all provisioned product licenses in the tenant.</span></span>

  ![Screenshot of the Get-Msolaccountsku cmdlet](./media/licensing-group-advanced/get-msolaccountsku-cmdlet.png)

3. <span data-ttu-id="74e0e-199">Use the *AccountSkuId* value for the license you are interested in with [this PowerShell script](licensing-ps-examples.md#check-if-user-license-is-assigned-directly-or-inherited-from-a-group).</span><span class="sxs-lookup"><span data-stu-id="74e0e-199">Use the *AccountSkuId* value for the license you are interested in with [this PowerShell script](licensing-ps-examples.md#check-if-user-license-is-assigned-directly-or-inherited-from-a-group).</span></span> <span data-ttu-id="74e0e-200">This will produce a list of users who have this license with the information about how the license is assigned.</span><span class="sxs-lookup"><span data-stu-id="74e0e-200">This will produce a list of users who have this license with the information about how the license is assigned.</span></span>

## <a name="use-audit-logs-to-monitor-group-based-licensing-activity"></a><span data-ttu-id="74e0e-201">Use Audit logs to monitor group-based licensing activity</span><span class="sxs-lookup"><span data-stu-id="74e0e-201">Use Audit logs to monitor group-based licensing activity</span></span>

<span data-ttu-id="74e0e-202">You can use [Azure AD audit logs](../reports-monitoring/concept-audit-logs.md#audit-logs) to see all activity related to group-based licensing, including:</span><span class="sxs-lookup"><span data-stu-id="74e0e-202">You can use [Azure AD audit logs](../reports-monitoring/concept-audit-logs.md#audit-logs) to see all activity related to group-based licensing, including:</span></span>
- <span data-ttu-id="74e0e-203">who changed licenses on groups</span><span class="sxs-lookup"><span data-stu-id="74e0e-203">who changed licenses on groups</span></span>
- <span data-ttu-id="74e0e-204">when the system started processing a group license change, and when it finished</span><span class="sxs-lookup"><span data-stu-id="74e0e-204">when the system started processing a group license change, and when it finished</span></span>
- <span data-ttu-id="74e0e-205">what license changes were made to a user as a result of a group license assignment.</span><span class="sxs-lookup"><span data-stu-id="74e0e-205">what license changes were made to a user as a result of a group license assignment.</span></span>

>[!NOTE]
> <span data-ttu-id="74e0e-206">Audit logs are available on most blades in the Azure Active Directory section of the portal.</span><span class="sxs-lookup"><span data-stu-id="74e0e-206">Audit logs are available on most blades in the Azure Active Directory section of the portal.</span></span> <span data-ttu-id="74e0e-207">Depending on where you access them, filters may be pre-applied to only show activity relevant to the context of the blade.</span><span class="sxs-lookup"><span data-stu-id="74e0e-207">Depending on where you access them, filters may be pre-applied to only show activity relevant to the context of the blade.</span></span> <span data-ttu-id="74e0e-208">If you are not seeing the results you expect, examine [the filtering options](../reports-monitoring/concept-audit-logs.md#filtering-audit-logs) or access the unfiltered audit logs under [**Azure Active Directory > Activity > Audit logs**](https://portal.azure.com/#blade/Microsoft_AAD_IAM/ActiveDirectoryMenuBlade/Audit).</span><span class="sxs-lookup"><span data-stu-id="74e0e-208">If you are not seeing the results you expect, examine [the filtering options](../reports-monitoring/concept-audit-logs.md#filtering-audit-logs) or access the unfiltered audit logs under [**Azure Active Directory > Activity > Audit logs**](https://portal.azure.com/#blade/Microsoft_AAD_IAM/ActiveDirectoryMenuBlade/Audit).</span></span>

### <a name="find-out-who-modified-a-group-license"></a><span data-ttu-id="74e0e-209">Find out who modified a group license</span><span class="sxs-lookup"><span data-stu-id="74e0e-209">Find out who modified a group license</span></span>

1. <span data-ttu-id="74e0e-210">Set the **Activity** filter to *Set group license* and click **Apply**.</span><span class="sxs-lookup"><span data-stu-id="74e0e-210">Set the **Activity** filter to *Set group license* and click **Apply**.</span></span>
2. <span data-ttu-id="74e0e-211">The results include all cases of licenses being set or modified on groups.</span><span class="sxs-lookup"><span data-stu-id="74e0e-211">The results include all cases of licenses being set or modified on groups.</span></span>
>[!TIP]
> <span data-ttu-id="74e0e-212">You can also type the name of the group in the *Target* filter to scope the results.</span><span class="sxs-lookup"><span data-stu-id="74e0e-212">You can also type the name of the group in the *Target* filter to scope the results.</span></span>

3. <span data-ttu-id="74e0e-213">Click an item in the list view to see the details of what has changed.</span><span class="sxs-lookup"><span data-stu-id="74e0e-213">Click an item in the list view to see the details of what has changed.</span></span> <span data-ttu-id="74e0e-214">Under *Modified Properties* both old and new values for the license assignment are listed.</span><span class="sxs-lookup"><span data-stu-id="74e0e-214">Under *Modified Properties* both old and new values for the license assignment are listed.</span></span>

<span data-ttu-id="74e0e-215">Here is an example of recent group license changes, with details:</span><span class="sxs-lookup"><span data-stu-id="74e0e-215">Here is an example of recent group license changes, with details:</span></span>

![Screenshot group license changes](./media/licensing-group-advanced/audit-group-license-change.png)

### <a name="find-out-when-group-changes-started-and-finished-processing"></a><span data-ttu-id="74e0e-217">Find out when group changes started and finished processing</span><span class="sxs-lookup"><span data-stu-id="74e0e-217">Find out when group changes started and finished processing</span></span>

<span data-ttu-id="74e0e-218">When a license changes on a group, Azure AD will start applying the changes to all users.</span><span class="sxs-lookup"><span data-stu-id="74e0e-218">When a license changes on a group, Azure AD will start applying the changes to all users.</span></span>

1. <span data-ttu-id="74e0e-219">To see when groups started processing, set the **Activity** filter to *Start applying group based license to users*.</span><span class="sxs-lookup"><span data-stu-id="74e0e-219">To see when groups started processing, set the **Activity** filter to *Start applying group based license to users*.</span></span> <span data-ttu-id="74e0e-220">Note that the actor for the operation is *Microsoft Azure AD Group-Based Licensing* - a system account that is used to execute all group license changes.</span><span class="sxs-lookup"><span data-stu-id="74e0e-220">Note that the actor for the operation is *Microsoft Azure AD Group-Based Licensing* - a system account that is used to execute all group license changes.</span></span>
>[!TIP]
> <span data-ttu-id="74e0e-221">Click an item in the list to see the *Modified Properties* field - it shows the license changes that were picked up for processing.</span><span class="sxs-lookup"><span data-stu-id="74e0e-221">Click an item in the list to see the *Modified Properties* field - it shows the license changes that were picked up for processing.</span></span> <span data-ttu-id="74e0e-222">This is useful if you made multiple changes to a group and you are not sure which one was processed.</span><span class="sxs-lookup"><span data-stu-id="74e0e-222">This is useful if you made multiple changes to a group and you are not sure which one was processed.</span></span>

2. <span data-ttu-id="74e0e-223">Similarly, to see when groups finished processing, use the filter value *Finish applying group based license to users*.</span><span class="sxs-lookup"><span data-stu-id="74e0e-223">Similarly, to see when groups finished processing, use the filter value *Finish applying group based license to users*.</span></span>
>[!TIP]
> <span data-ttu-id="74e0e-224">In this case, the *Modified Properties* field contains a summary of the results - this is useful to quickly check if processing resulted in any errors.</span><span class="sxs-lookup"><span data-stu-id="74e0e-224">In this case, the *Modified Properties* field contains a summary of the results - this is useful to quickly check if processing resulted in any errors.</span></span> <span data-ttu-id="74e0e-225">Sample output:</span><span class="sxs-lookup"><span data-stu-id="74e0e-225">Sample output:</span></span>
> ```
Modified Properties
...
Name : Result
Old Value : []
New Value : [Users successfully assigned licenses: 6, Users for whom license assignment failed: 0.];
> ```

3. <span data-ttu-id="74e0e-226">To see the complete log for how a group was processed, including all user changes, set the following filters:</span><span class="sxs-lookup"><span data-stu-id="74e0e-226">To see the complete log for how a group was processed, including all user changes, set the following filters:</span></span>
  - <span data-ttu-id="74e0e-227">**Initiated By (Actor)**: "Microsoft Azure AD Group-Based Licensing"</span><span class="sxs-lookup"><span data-stu-id="74e0e-227">**Initiated By (Actor)**: "Microsoft Azure AD Group-Based Licensing"</span></span>
  - <span data-ttu-id="74e0e-228">**Date Range** (optional): custom range for when you know a specific group started and finished processing</span><span class="sxs-lookup"><span data-stu-id="74e0e-228">**Date Range** (optional): custom range for when you know a specific group started and finished processing</span></span>

<span data-ttu-id="74e0e-229">This sample output shows the start of processing, all resulting user changes, and the finish of processing.</span><span class="sxs-lookup"><span data-stu-id="74e0e-229">This sample output shows the start of processing, all resulting user changes, and the finish of processing.</span></span>

![Screenshot group license changes](./media/licensing-group-advanced/audit-group-processing-log.png)

>[!TIP]
> <span data-ttu-id="74e0e-231">Clicking items related to *Change user license* will show details for license changes applied to each individual user.</span><span class="sxs-lookup"><span data-stu-id="74e0e-231">Clicking items related to *Change user license* will show details for license changes applied to each individual user.</span></span>

## <a name="deleting-a-group-with-an-assigned-license"></a><span data-ttu-id="74e0e-232">Deleting a group with an assigned license</span><span class="sxs-lookup"><span data-stu-id="74e0e-232">Deleting a group with an assigned license</span></span>

<span data-ttu-id="74e0e-233">It is not possible to delete a group with an active license assigned.</span><span class="sxs-lookup"><span data-stu-id="74e0e-233">It is not possible to delete a group with an active license assigned.</span></span> <span data-ttu-id="74e0e-234">An administrator could delete a group not realizing that it will cause licenses to be removed from users - for this reason we require any licenses to be removed from the group first, before it can be deleted.</span><span class="sxs-lookup"><span data-stu-id="74e0e-234">An administrator could delete a group not realizing that it will cause licenses to be removed from users - for this reason we require any licenses to be removed from the group first, before it can be deleted.</span></span>

<span data-ttu-id="74e0e-235">When trying to delete a group in the Azure portal you may see an error notification like this: ![Screenshot group deletion failed](./media/licensing-group-advanced/groupdeletionfailed.png)</span><span class="sxs-lookup"><span data-stu-id="74e0e-235">When trying to delete a group in the Azure portal you may see an error notification like this: ![Screenshot group deletion failed](./media/licensing-group-advanced/groupdeletionfailed.png)</span></span>

<span data-ttu-id="74e0e-236">Go to the **Licenses** tab on the group and see if there are any licenses assigned.</span><span class="sxs-lookup"><span data-stu-id="74e0e-236">Go to the **Licenses** tab on the group and see if there are any licenses assigned.</span></span> <span data-ttu-id="74e0e-237">If yes, remove those licenses and try to delete the group again.</span><span class="sxs-lookup"><span data-stu-id="74e0e-237">If yes, remove those licenses and try to delete the group again.</span></span>

<span data-ttu-id="74e0e-238">You may see similar errors when trying to delete the group through PowerShell or Graph API.</span><span class="sxs-lookup"><span data-stu-id="74e0e-238">You may see similar errors when trying to delete the group through PowerShell or Graph API.</span></span> <span data-ttu-id="74e0e-239">If you are using a group synced from on-premises, Azure AD Connect may also report errors if it is failing to delete the group in Azure AD.</span><span class="sxs-lookup"><span data-stu-id="74e0e-239">If you are using a group synced from on-premises, Azure AD Connect may also report errors if it is failing to delete the group in Azure AD.</span></span> <span data-ttu-id="74e0e-240">In all such cases, make sure to check if there are any licenses assigned to the group, and remove them first.</span><span class="sxs-lookup"><span data-stu-id="74e0e-240">In all such cases, make sure to check if there are any licenses assigned to the group, and remove them first.</span></span>

## <a name="limitations-and-known-issues"></a><span data-ttu-id="74e0e-241">Limitations and known issues</span><span class="sxs-lookup"><span data-stu-id="74e0e-241">Limitations and known issues</span></span>

<span data-ttu-id="74e0e-242">If you use group-based licensing, it's a good idea to familiarize yourself with the following list of limitations and known issues.</span><span class="sxs-lookup"><span data-stu-id="74e0e-242">If you use group-based licensing, it's a good idea to familiarize yourself with the following list of limitations and known issues.</span></span>

- <span data-ttu-id="74e0e-243">Group-based licensing currently does not support groups that contain other groups (nested groups).</span><span class="sxs-lookup"><span data-stu-id="74e0e-243">Group-based licensing currently does not support groups that contain other groups (nested groups).</span></span> <span data-ttu-id="74e0e-244">If you apply a license to a nested group, only the immediate first-level user members of the group have the licenses applied.</span><span class="sxs-lookup"><span data-stu-id="74e0e-244">If you apply a license to a nested group, only the immediate first-level user members of the group have the licenses applied.</span></span>

- <span data-ttu-id="74e0e-245">The feature can only be used with security groups.</span><span class="sxs-lookup"><span data-stu-id="74e0e-245">The feature can only be used with security groups.</span></span> <span data-ttu-id="74e0e-246">Office groups are currently not supported and you will not be able to use them in the license assignment process.</span><span class="sxs-lookup"><span data-stu-id="74e0e-246">Office groups are currently not supported and you will not be able to use them in the license assignment process.</span></span>

- <span data-ttu-id="74e0e-247">The [Office 365 admin portal](https://portal.office.com ) does not currently support group-based licensing.</span><span class="sxs-lookup"><span data-stu-id="74e0e-247">The [Office 365 admin portal](https://portal.office.com ) does not currently support group-based licensing.</span></span> <span data-ttu-id="74e0e-248">If a user inherits a license from a group, this license appears in the Office admin portal as a regular user license.</span><span class="sxs-lookup"><span data-stu-id="74e0e-248">If a user inherits a license from a group, this license appears in the Office admin portal as a regular user license.</span></span> <span data-ttu-id="74e0e-249">If you try to modify that license or try to remove the license, the portal returns an error message.</span><span class="sxs-lookup"><span data-stu-id="74e0e-249">If you try to modify that license or try to remove the license, the portal returns an error message.</span></span> <span data-ttu-id="74e0e-250">Inherited group licenses cannot be modified directly on a user.</span><span class="sxs-lookup"><span data-stu-id="74e0e-250">Inherited group licenses cannot be modified directly on a user.</span></span>

- <span data-ttu-id="74e0e-251">When a user is removed from a group and loses the license, the service plans from that license (for example, SharePoint Online) are set to a **Suspended** state.</span><span class="sxs-lookup"><span data-stu-id="74e0e-251">When a user is removed from a group and loses the license, the service plans from that license (for example, SharePoint Online) are set to a **Suspended** state.</span></span> <span data-ttu-id="74e0e-252">The service plans are not set to a final, disabled state.</span><span class="sxs-lookup"><span data-stu-id="74e0e-252">The service plans are not set to a final, disabled state.</span></span> <span data-ttu-id="74e0e-253">This precaution can avoid accidental removal of user data, if an admin makes a mistake in group membership management.</span><span class="sxs-lookup"><span data-stu-id="74e0e-253">This precaution can avoid accidental removal of user data, if an admin makes a mistake in group membership management.</span></span>

- <span data-ttu-id="74e0e-254">When licenses are assigned or modified for a large group (for example, 100,000 users), it could impact performance.</span><span class="sxs-lookup"><span data-stu-id="74e0e-254">When licenses are assigned or modified for a large group (for example, 100,000 users), it could impact performance.</span></span> <span data-ttu-id="74e0e-255">Specifically, the volume of changes generated by Azure AD automation might negatively impact the performance of your directory synchronization between Azure AD and on-premises systems.</span><span class="sxs-lookup"><span data-stu-id="74e0e-255">Specifically, the volume of changes generated by Azure AD automation might negatively impact the performance of your directory synchronization between Azure AD and on-premises systems.</span></span>

- <span data-ttu-id="74e0e-256">In certain high load situations, license processing may be delayed and changes such as adding/removing a group license, or adding/removing users from group, may take a long time to be processed.</span><span class="sxs-lookup"><span data-stu-id="74e0e-256">In certain high load situations, license processing may be delayed and changes such as adding/removing a group license, or adding/removing users from group, may take a long time to be processed.</span></span> <span data-ttu-id="74e0e-257">If you see your changes take more than 24 hours to process, please [open a support ticket](https://portal.azure.com/#blade/Microsoft_AAD_IAM/ActiveDirectoryMenuBlade/supportRequest) to allow us to investigate.</span><span class="sxs-lookup"><span data-stu-id="74e0e-257">If you see your changes take more than 24 hours to process, please [open a support ticket](https://portal.azure.com/#blade/Microsoft_AAD_IAM/ActiveDirectoryMenuBlade/supportRequest) to allow us to investigate.</span></span> <span data-ttu-id="74e0e-258">We will improve performance characteristics of this feature before it reaches *General Availability*.</span><span class="sxs-lookup"><span data-stu-id="74e0e-258">We will improve performance characteristics of this feature before it reaches *General Availability*.</span></span>

- <span data-ttu-id="74e0e-259">License management automation does not automatically react to all types of changes in the environment.</span><span class="sxs-lookup"><span data-stu-id="74e0e-259">License management automation does not automatically react to all types of changes in the environment.</span></span> <span data-ttu-id="74e0e-260">For example, you might have run out of licenses, causing some users to be in an error state.</span><span class="sxs-lookup"><span data-stu-id="74e0e-260">For example, you might have run out of licenses, causing some users to be in an error state.</span></span> <span data-ttu-id="74e0e-261">To free up the available seat count, you can remove some directly assigned licenses from other users.</span><span class="sxs-lookup"><span data-stu-id="74e0e-261">To free up the available seat count, you can remove some directly assigned licenses from other users.</span></span> <span data-ttu-id="74e0e-262">However, the system does not automatically react to this change and fix users in that error state.</span><span class="sxs-lookup"><span data-stu-id="74e0e-262">However, the system does not automatically react to this change and fix users in that error state.</span></span>

  <span data-ttu-id="74e0e-263">As a workaround to these types of limitations, you can go to the **Group** blade in Azure AD, and click **Reprocess**.</span><span class="sxs-lookup"><span data-stu-id="74e0e-263">As a workaround to these types of limitations, you can go to the **Group** blade in Azure AD, and click **Reprocess**.</span></span> <span data-ttu-id="74e0e-264">This command processes all users in that group and resolves the error states, if possible.</span><span class="sxs-lookup"><span data-stu-id="74e0e-264">This command processes all users in that group and resolves the error states, if possible.</span></span>

- <span data-ttu-id="74e0e-265">Group-based licensing does not record errors when a license could not be assigned to a user due to a duplicate proxy address configuration in Exchange Online; such users are skipped during license assignment.</span><span class="sxs-lookup"><span data-stu-id="74e0e-265">Group-based licensing does not record errors when a license could not be assigned to a user due to a duplicate proxy address configuration in Exchange Online; such users are skipped during license assignment.</span></span> <span data-ttu-id="74e0e-266">For more information about how to identify and solve this problem, see [this section](licensing-groups-resolve-problems.md#license-assignment-fails-silently-for-a-user-due-to-duplicate-proxy-addresses-in-exchange-online).</span><span class="sxs-lookup"><span data-stu-id="74e0e-266">For more information about how to identify and solve this problem, see [this section](licensing-groups-resolve-problems.md#license-assignment-fails-silently-for-a-user-due-to-duplicate-proxy-addresses-in-exchange-online).</span></span>

## <a name="next-steps"></a><span data-ttu-id="74e0e-267">Next steps</span><span class="sxs-lookup"><span data-stu-id="74e0e-267">Next steps</span></span>

<span data-ttu-id="74e0e-268">To learn more about other scenarios for license management through group-based licensing, see:</span><span class="sxs-lookup"><span data-stu-id="74e0e-268">To learn more about other scenarios for license management through group-based licensing, see:</span></span>

* [<span data-ttu-id="74e0e-269">What is group-based licensing in Azure Active Directory?</span><span class="sxs-lookup"><span data-stu-id="74e0e-269">What is group-based licensing in Azure Active Directory?</span></span>](../fundamentals/active-directory-licensing-whatis-azure-portal.md)
* [<span data-ttu-id="74e0e-270">Assigning licenses to a group in Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="74e0e-270">Assigning licenses to a group in Azure Active Directory</span></span>](licensing-groups-assign.md)
* [<span data-ttu-id="74e0e-271">Identifying and resolving license problems for a group in Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="74e0e-271">Identifying and resolving license problems for a group in Azure Active Directory</span></span>](licensing-groups-resolve-problems.md)
* [<span data-ttu-id="74e0e-272">How to migrate individual licensed users to group-based licensing in Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="74e0e-272">How to migrate individual licensed users to group-based licensing in Azure Active Directory</span></span>](licensing-groups-migrate-users.md)
