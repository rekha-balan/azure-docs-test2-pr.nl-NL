---
title: Azure Application Insights Snapshot Debugger Troubleshooting Guide | Microsoft Docs
description: Frequently asked questions about Azure Application Insights Snapshot Debugger.
services: application-insights
documentationcenter: .net
author: mrbullwinkle
manager: carmonm
ms.assetid: ''
ms.service: application-insights
ms.workload: ''
ms.tgt_pltfrm: ibiza
ms.devlang: na
ms.topic: conceptual
ms.date: 11/15/2017
ms.author: mbullwin
ms.openlocfilehash: 285f42a6b52819077b92abce78c1f51756780604
ms.sourcegitcommit: d1451406a010fd3aa854dc8e5b77dc5537d8050e
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 09/13/2018
ms.locfileid: "44855953"
---
# <a name="snapshot-debugger-troubleshooting-guide"></a><span data-ttu-id="a4a7c-103">Snapshot Debugger: Troubleshooting Guide</span><span class="sxs-lookup"><span data-stu-id="a4a7c-103">Snapshot Debugger: Troubleshooting Guide</span></span>

<span data-ttu-id="a4a7c-104">Application Insights Snapshot Debugger allows you to automatically collect a debug snapshot from live web applications.</span><span class="sxs-lookup"><span data-stu-id="a4a7c-104">Application Insights Snapshot Debugger allows you to automatically collect a debug snapshot from live web applications.</span></span> <span data-ttu-id="a4a7c-105">The snapshot shows the state of source code and variables at the moment an exception was thrown.</span><span class="sxs-lookup"><span data-stu-id="a4a7c-105">The snapshot shows the state of source code and variables at the moment an exception was thrown.</span></span> <span data-ttu-id="a4a7c-106">This article explains how the debugger works and provides solutions to common problems.</span><span class="sxs-lookup"><span data-stu-id="a4a7c-106">This article explains how the debugger works and provides solutions to common problems.</span></span>

## <a name="how-does-application-insights-snapshot-debugger-work"></a><span data-ttu-id="a4a7c-107">How does Application Insights Snapshot Debugger work</span><span class="sxs-lookup"><span data-stu-id="a4a7c-107">How does Application Insights Snapshot Debugger work</span></span>

<span data-ttu-id="a4a7c-108">Application Insights Snapshot Debugger is part of the Application Insights telemetry pipeline (an instance of ITelemetryProcessor).</span><span class="sxs-lookup"><span data-stu-id="a4a7c-108">Application Insights Snapshot Debugger is part of the Application Insights telemetry pipeline (an instance of ITelemetryProcessor).</span></span> <span data-ttu-id="a4a7c-109">The Snapshot Collector monitors both the exceptions thrown in your code (AppDomain.FirstChanceException) and the exception telemetry reported to Application Insights via `TelemetryClient.TrackException`.</span><span class="sxs-lookup"><span data-stu-id="a4a7c-109">The Snapshot Collector monitors both the exceptions thrown in your code (AppDomain.FirstChanceException) and the exception telemetry reported to Application Insights via `TelemetryClient.TrackException`.</span></span> <span data-ttu-id="a4a7c-110">Once you've successfully added the Snapshot Collector package to your project, and it has detected one event in the telemetry pipeline, a custom event with the name 'AppInsightsSnapshotCollectorLogs' and 'SnapshotCollectorEnabled' in the Custom Data will be sent.</span><span class="sxs-lookup"><span data-stu-id="a4a7c-110">Once you've successfully added the Snapshot Collector package to your project, and it has detected one event in the telemetry pipeline, a custom event with the name 'AppInsightsSnapshotCollectorLogs' and 'SnapshotCollectorEnabled' in the Custom Data will be sent.</span></span> <span data-ttu-id="a4a7c-111">At the same time, it will start a process called 'SnapshotUploader.exe' (version 1.2.0 or above) or 'MinidumpUploader.exe' (before version 1.2.0), to upload the collected snapshot data files to Application Insights.</span><span class="sxs-lookup"><span data-stu-id="a4a7c-111">At the same time, it will start a process called 'SnapshotUploader.exe' (version 1.2.0 or above) or 'MinidumpUploader.exe' (before version 1.2.0), to upload the collected snapshot data files to Application Insights.</span></span>  <span data-ttu-id="a4a7c-112">When the uploader process starts, it sends a custom event with the name 'UploaderStart'.</span><span class="sxs-lookup"><span data-stu-id="a4a7c-112">When the uploader process starts, it sends a custom event with the name 'UploaderStart'.</span></span> <span data-ttu-id="a4a7c-113">After that, the snapshot collector will enter its normal monitoring behavior.</span><span class="sxs-lookup"><span data-stu-id="a4a7c-113">After that, the snapshot collector will enter its normal monitoring behavior.</span></span>

<span data-ttu-id="a4a7c-114">While the snapshot collector is monitoring Application Insights exception telemetry, it uses the parameters (for example, ThresholdForSnapshotting, MaximumSnapshotsRequired, MaximumCollectionPlanSize, ProblemCounterResetInterval) defined in the configuration to determine when to collect a snapshot.</span><span class="sxs-lookup"><span data-stu-id="a4a7c-114">While the snapshot collector is monitoring Application Insights exception telemetry, it uses the parameters (for example, ThresholdForSnapshotting, MaximumSnapshotsRequired, MaximumCollectionPlanSize, ProblemCounterResetInterval) defined in the configuration to determine when to collect a snapshot.</span></span> <span data-ttu-id="a4a7c-115">When all the rules are met, the collector will request a snapshot for the next exception thrown at the same place.</span><span class="sxs-lookup"><span data-stu-id="a4a7c-115">When all the rules are met, the collector will request a snapshot for the next exception thrown at the same place.</span></span> <span data-ttu-id="a4a7c-116">Simultaneously, an Application Insights custom event with the name 'AppInsightsSnapshotCollectorLogs' and 'RequestSnapshots' will be sent.</span><span class="sxs-lookup"><span data-stu-id="a4a7c-116">Simultaneously, an Application Insights custom event with the name 'AppInsightsSnapshotCollectorLogs' and 'RequestSnapshots' will be sent.</span></span> <span data-ttu-id="a4a7c-117">Since the compiler will optimize 'Release' code, local variables may not be visible in the collected snapshot.</span><span class="sxs-lookup"><span data-stu-id="a4a7c-117">Since the compiler will optimize 'Release' code, local variables may not be visible in the collected snapshot.</span></span> <span data-ttu-id="a4a7c-118">The snapshot collector will try to deoptimize the method that threw the exception, when it requests snapshots.</span><span class="sxs-lookup"><span data-stu-id="a4a7c-118">The snapshot collector will try to deoptimize the method that threw the exception, when it requests snapshots.</span></span> <span data-ttu-id="a4a7c-119">During this time, an Application Insights custom event with name 'AppInsightsSnapshotCollectorLogs' and 'ProductionBreakpointsDeOptimizeMethod' in the custom data will be sent.</span><span class="sxs-lookup"><span data-stu-id="a4a7c-119">During this time, an Application Insights custom event with name 'AppInsightsSnapshotCollectorLogs' and 'ProductionBreakpointsDeOptimizeMethod' in the custom data will be sent.</span></span>  <span data-ttu-id="a4a7c-120">When the snapshot of the next exception is collected, the local variables will be available.</span><span class="sxs-lookup"><span data-stu-id="a4a7c-120">When the snapshot of the next exception is collected, the local variables will be available.</span></span> <span data-ttu-id="a4a7c-121">After the snapshot is collected, it will reoptimize the code.</span><span class="sxs-lookup"><span data-stu-id="a4a7c-121">After the snapshot is collected, it will reoptimize the code.</span></span> 

> [!NOTE]
> <span data-ttu-id="a4a7c-122">Deoptimization requires the Application Insights site extension to be installed.</span><span class="sxs-lookup"><span data-stu-id="a4a7c-122">Deoptimization requires the Application Insights site extension to be installed.</span></span>

<span data-ttu-id="a4a7c-123">When a snapshot is requested for a specific exception, the snapshot collector will start monitoring your application's exception handling pipeline (AppDomain.FirstChanceException).</span><span class="sxs-lookup"><span data-stu-id="a4a7c-123">When a snapshot is requested for a specific exception, the snapshot collector will start monitoring your application's exception handling pipeline (AppDomain.FirstChanceException).</span></span> <span data-ttu-id="a4a7c-124">When the exception happens again, the collector will start a snapshot (Application Insights custom event with the name 'AppInsightsSnapshotCollectorLogs' and 'SnapshotStart' in the custom data).</span><span class="sxs-lookup"><span data-stu-id="a4a7c-124">When the exception happens again, the collector will start a snapshot (Application Insights custom event with the name 'AppInsightsSnapshotCollectorLogs' and 'SnapshotStart' in the custom data).</span></span> <span data-ttu-id="a4a7c-125">Then a shadow copy of the running process is made (the page table will be duplicated).</span><span class="sxs-lookup"><span data-stu-id="a4a7c-125">Then a shadow copy of the running process is made (the page table will be duplicated).</span></span> <span data-ttu-id="a4a7c-126">This normally will take 10 to 20 milliseconds.</span><span class="sxs-lookup"><span data-stu-id="a4a7c-126">This normally will take 10 to 20 milliseconds.</span></span> <span data-ttu-id="a4a7c-127">After this, an Application Insights custom event with the name 'AppInsightsSnapshotCollectorLogs' and 'SnapshotStop' in the custom data will be sent.</span><span class="sxs-lookup"><span data-stu-id="a4a7c-127">After this, an Application Insights custom event with the name 'AppInsightsSnapshotCollectorLogs' and 'SnapshotStop' in the custom data will be sent.</span></span> <span data-ttu-id="a4a7c-128">When the forked process is created, the total paged memory will be increased by the same amount as the paged memory of your running application (the working set will be much smaller).</span><span class="sxs-lookup"><span data-stu-id="a4a7c-128">When the forked process is created, the total paged memory will be increased by the same amount as the paged memory of your running application (the working set will be much smaller).</span></span> <span data-ttu-id="a4a7c-129">While your application process is running normally, the shadow copied process's memory will be dumped to disk and uploaded to Application Insights.</span><span class="sxs-lookup"><span data-stu-id="a4a7c-129">While your application process is running normally, the shadow copied process's memory will be dumped to disk and uploaded to Application Insights.</span></span> <span data-ttu-id="a4a7c-130">After the snapshot is uploaded, an Application Insights custom event with the name 'UploadSnapshotFinish' will be sent.</span><span class="sxs-lookup"><span data-stu-id="a4a7c-130">After the snapshot is uploaded, an Application Insights custom event with the name 'UploadSnapshotFinish' will be sent.</span></span>

## <a name="is-the-snapshot-collector-working-properly"></a><span data-ttu-id="a4a7c-131">Is the snapshot collector working properly?</span><span class="sxs-lookup"><span data-stu-id="a4a7c-131">Is the snapshot collector working properly?</span></span>

### <a name="how-to-find-snapshot-collector-logs"></a><span data-ttu-id="a4a7c-132">How to find Snapshot Collector logs</span><span class="sxs-lookup"><span data-stu-id="a4a7c-132">How to find Snapshot Collector logs</span></span>
<span data-ttu-id="a4a7c-133">Snapshot collector logs are sent to your Application Insight account if the [Snapshot Collector NuGet package](https://www.nuget.org/packages/Microsoft.ApplicationInsights.SnapshotCollector) is version 1.1.0 or later.</span><span class="sxs-lookup"><span data-stu-id="a4a7c-133">Snapshot collector logs are sent to your Application Insight account if the [Snapshot Collector NuGet package](https://www.nuget.org/packages/Microsoft.ApplicationInsights.SnapshotCollector) is version 1.1.0 or later.</span></span> <span data-ttu-id="a4a7c-134">Make sure the *ProvideAnonymousTelemetry* is not set to false (the value is true by default).</span><span class="sxs-lookup"><span data-stu-id="a4a7c-134">Make sure the *ProvideAnonymousTelemetry* is not set to false (the value is true by default).</span></span>

* <span data-ttu-id="a4a7c-135">Navigate to your Application Insights resource in the Azure portal.</span><span class="sxs-lookup"><span data-stu-id="a4a7c-135">Navigate to your Application Insights resource in the Azure portal.</span></span>
* <span data-ttu-id="a4a7c-136">Click *Search* in the Overview section.</span><span class="sxs-lookup"><span data-stu-id="a4a7c-136">Click *Search* in the Overview section.</span></span>
* <span data-ttu-id="a4a7c-137">Enter the following string into the search box:</span><span class="sxs-lookup"><span data-stu-id="a4a7c-137">Enter the following string into the search box:</span></span>
    ```
    AppInsightsSnapshotCollectorLogs OR AppInsightsSnapshotUploaderLogs OR UploadSnapshotFinish OR UploaderStart OR UploaderStop
    ```
* <span data-ttu-id="a4a7c-138">Note: change the *Time range* if needed.</span><span class="sxs-lookup"><span data-stu-id="a4a7c-138">Note: change the *Time range* if needed.</span></span>

![Screenshot of Search Snapshot Collector logs](./media/app-insights-troubleshoot-snapshot-debugger/001.png)


### <a name="examine-snapshot-collector-logs"></a><span data-ttu-id="a4a7c-140">Examine Snapshot collector logs</span><span class="sxs-lookup"><span data-stu-id="a4a7c-140">Examine Snapshot collector logs</span></span>
<span data-ttu-id="a4a7c-141">When searching for Snapshot Collector logs, there should be 'UploadSnapshotFinish' events in the targeted time range.</span><span class="sxs-lookup"><span data-stu-id="a4a7c-141">When searching for Snapshot Collector logs, there should be 'UploadSnapshotFinish' events in the targeted time range.</span></span> <span data-ttu-id="a4a7c-142">If you still don't see the 'Open Debug Snapshot' button to open the Snapshot, send email to snapshothelp@microsoft.com with your Application Insights Instrumentation Key.</span><span class="sxs-lookup"><span data-stu-id="a4a7c-142">If you still don't see the 'Open Debug Snapshot' button to open the Snapshot, send email to snapshothelp@microsoft.com with your Application Insights Instrumentation Key.</span></span>

![Screenshot of Examine snapshot collector logs](./media/app-insights-troubleshoot-snapshot-debugger/005.png)

## <a name="i-cannot-find-a-snapshot-to-open"></a><span data-ttu-id="a4a7c-144">I cannot find a snapshot to Open</span><span class="sxs-lookup"><span data-stu-id="a4a7c-144">I cannot find a snapshot to Open</span></span>
<span data-ttu-id="a4a7c-145">If the following steps don't help you solve the issue, send email to snapshothelp@microsoft.com with your Application Insights' Instrumentation Key.</span><span class="sxs-lookup"><span data-stu-id="a4a7c-145">If the following steps don't help you solve the issue, send email to snapshothelp@microsoft.com with your Application Insights' Instrumentation Key.</span></span>

### <a name="step-1-make-sure-your-application-is-sending-telemetry-data-and-exception-data-to-application-insights"></a><span data-ttu-id="a4a7c-146">Step 1: Make sure your application is sending telemetry data and exception data to Application Insights</span><span class="sxs-lookup"><span data-stu-id="a4a7c-146">Step 1: Make sure your application is sending telemetry data and exception data to Application Insights</span></span>
<span data-ttu-id="a4a7c-147">Navigate to Application Insights resource, check that there's data sent from your application.</span><span class="sxs-lookup"><span data-stu-id="a4a7c-147">Navigate to Application Insights resource, check that there's data sent from your application.</span></span>

### <a name="step-2-make-sure-snapshot-collector-is-added-correctly-to-your-applications-application-insights-telemetry-pipeline"></a><span data-ttu-id="a4a7c-148">Step 2: Make sure Snapshot collector is added correctly to your application's Application Insights Telemetry pipeline</span><span class="sxs-lookup"><span data-stu-id="a4a7c-148">Step 2: Make sure Snapshot collector is added correctly to your application's Application Insights Telemetry pipeline</span></span>
<span data-ttu-id="a4a7c-149">If you can find logs in the 'How to find Snapshot Collector logs' step, then the snapshot collector is correctly added to your project and you can ignore this step.</span><span class="sxs-lookup"><span data-stu-id="a4a7c-149">If you can find logs in the 'How to find Snapshot Collector logs' step, then the snapshot collector is correctly added to your project and you can ignore this step.</span></span>

<span data-ttu-id="a4a7c-150">If there are no Snapshot collector logs, verify the following:</span><span class="sxs-lookup"><span data-stu-id="a4a7c-150">If there are no Snapshot collector logs, verify the following:</span></span>
* <span data-ttu-id="a4a7c-151">For classic ASP.NET applications, check for this line *<Add Type="Microsoft.ApplicationInsights.SnapshotCollector.SnapshotCollectorTelemetryProcessor, Microsoft.ApplicationInsights.SnapshotCollector">* in the *ApplicationInsights.config* file.</span><span class="sxs-lookup"><span data-stu-id="a4a7c-151">For classic ASP.NET applications, check for this line *<Add Type="Microsoft.ApplicationInsights.SnapshotCollector.SnapshotCollectorTelemetryProcessor, Microsoft.ApplicationInsights.SnapshotCollector">* in the *ApplicationInsights.config* file.</span></span>

* <span data-ttu-id="a4a7c-152">For ASP.NET Core applications, make sure the *ITelemetryProcessorFactory* with *SnapshotCollectorTelemetryProcessor* is added to *IServiceCollection* services.</span><span class="sxs-lookup"><span data-stu-id="a4a7c-152">For ASP.NET Core applications, make sure the *ITelemetryProcessorFactory* with *SnapshotCollectorTelemetryProcessor* is added to *IServiceCollection* services.</span></span>

* <span data-ttu-id="a4a7c-153">Also check that you're using the correct instrumentation key in your published application.</span><span class="sxs-lookup"><span data-stu-id="a4a7c-153">Also check that you're using the correct instrumentation key in your published application.</span></span>

* <span data-ttu-id="a4a7c-154">The Snapshot collector doesn't support multiple instrumentation keys within the one application, it will send snapshots to the instrumentation key of the first exception it observes.</span><span class="sxs-lookup"><span data-stu-id="a4a7c-154">The Snapshot collector doesn't support multiple instrumentation keys within the one application, it will send snapshots to the instrumentation key of the first exception it observes.</span></span>

* <span data-ttu-id="a4a7c-155">If you set the *InstrmentationKey* manually in your code, update the *InstrumentationKey* element from the *ApplicationInsights.config*.</span><span class="sxs-lookup"><span data-stu-id="a4a7c-155">If you set the *InstrmentationKey* manually in your code, update the *InstrumentationKey* element from the *ApplicationInsights.config*.</span></span>

### <a name="step-3-make-sure-the-minidump-uploader-is-started"></a><span data-ttu-id="a4a7c-156">Step 3: Make sure the minidump uploader is started</span><span class="sxs-lookup"><span data-stu-id="a4a7c-156">Step 3: Make sure the minidump uploader is started</span></span>
<span data-ttu-id="a4a7c-157">In the snapshot collector logs, search for *UploaderStart* (type UploaderStart in the search text box).</span><span class="sxs-lookup"><span data-stu-id="a4a7c-157">In the snapshot collector logs, search for *UploaderStart* (type UploaderStart in the search text box).</span></span> <span data-ttu-id="a4a7c-158">There should be an event when the snapshot collector monitored the first exception.</span><span class="sxs-lookup"><span data-stu-id="a4a7c-158">There should be an event when the snapshot collector monitored the first exception.</span></span> <span data-ttu-id="a4a7c-159">If this event doesn't exist, check other logs for details.</span><span class="sxs-lookup"><span data-stu-id="a4a7c-159">If this event doesn't exist, check other logs for details.</span></span> <span data-ttu-id="a4a7c-160">One possible way for solving this issue is restarting your application.</span><span class="sxs-lookup"><span data-stu-id="a4a7c-160">One possible way for solving this issue is restarting your application.</span></span>

### <a name="step-4-make-sure-snapshot-collector-expressed-its-intent-to-collect-snapshots"></a><span data-ttu-id="a4a7c-161">Step 4: Make sure Snapshot Collector expressed its intent to collect snapshots</span><span class="sxs-lookup"><span data-stu-id="a4a7c-161">Step 4: Make sure Snapshot Collector expressed its intent to collect snapshots</span></span>
<span data-ttu-id="a4a7c-162">In the snapshot collector logs, search for *RequestSnapshots* (type ```RequestSnapshots``` in the search text box).</span><span class="sxs-lookup"><span data-stu-id="a4a7c-162">In the snapshot collector logs, search for *RequestSnapshots* (type ```RequestSnapshots``` in the search text box).</span></span>  <span data-ttu-id="a4a7c-163">If there isn't any, check your configuration.</span><span class="sxs-lookup"><span data-stu-id="a4a7c-163">If there isn't any, check your configuration.</span></span> <span data-ttu-id="a4a7c-164">For example, *ThresholdForSnapshotting*, which indicates the number of a specific exception that can occur before it starts collecting snapshots.</span><span class="sxs-lookup"><span data-stu-id="a4a7c-164">For example, *ThresholdForSnapshotting*, which indicates the number of a specific exception that can occur before it starts collecting snapshots.</span></span>

### <a name="step-5-make-sure-that-snapshot-is-not-disabled-due-to-memory-protection"></a><span data-ttu-id="a4a7c-165">Step 5: Make sure that Snapshot is not disabled due to Memory Protection</span><span class="sxs-lookup"><span data-stu-id="a4a7c-165">Step 5: Make sure that Snapshot is not disabled due to Memory Protection</span></span>
<span data-ttu-id="a4a7c-166">To protect your application's performance, a snapshot will only be captured when there's a good memory buffer.</span><span class="sxs-lookup"><span data-stu-id="a4a7c-166">To protect your application's performance, a snapshot will only be captured when there's a good memory buffer.</span></span> <span data-ttu-id="a4a7c-167">In the snapshot collector logs, search for 'CannotSnapshotDueToMemoryUsage'.</span><span class="sxs-lookup"><span data-stu-id="a4a7c-167">In the snapshot collector logs, search for 'CannotSnapshotDueToMemoryUsage'.</span></span> <span data-ttu-id="a4a7c-168">In the event's custom data, it will have a detailed reason.</span><span class="sxs-lookup"><span data-stu-id="a4a7c-168">In the event's custom data, it will have a detailed reason.</span></span> <span data-ttu-id="a4a7c-169">If your application is running in an Azure Web App, the restriction may be strict.</span><span class="sxs-lookup"><span data-stu-id="a4a7c-169">If your application is running in an Azure Web App, the restriction may be strict.</span></span> <span data-ttu-id="a4a7c-170">Since Azure Web App will restart your app when certain memory rules are met.</span><span class="sxs-lookup"><span data-stu-id="a4a7c-170">Since Azure Web App will restart your app when certain memory rules are met.</span></span> <span data-ttu-id="a4a7c-171">You can try to scale up your service plan to machines with more memory to solve this issue.</span><span class="sxs-lookup"><span data-stu-id="a4a7c-171">You can try to scale up your service plan to machines with more memory to solve this issue.</span></span>

### <a name="step-6-make-sure-snapshots-were-captured"></a><span data-ttu-id="a4a7c-172">Step 6: Make sure snapshots were captured</span><span class="sxs-lookup"><span data-stu-id="a4a7c-172">Step 6: Make sure snapshots were captured</span></span>
<span data-ttu-id="a4a7c-173">In the snapshot collector logs, search for ```RequestSnapshots```.</span><span class="sxs-lookup"><span data-stu-id="a4a7c-173">In the snapshot collector logs, search for ```RequestSnapshots```.</span></span>  <span data-ttu-id="a4a7c-174">If none is present, check your configuration.</span><span class="sxs-lookup"><span data-stu-id="a4a7c-174">If none is present, check your configuration.</span></span> <span data-ttu-id="a4a7c-175">For example, *ThresholdForSnapshotting*, which indicates the number of a specific exception before collecting a snapshot.</span><span class="sxs-lookup"><span data-stu-id="a4a7c-175">For example, *ThresholdForSnapshotting*, which indicates the number of a specific exception before collecting a snapshot.</span></span>

### <a name="step-7-make-sure-snapshots-are-uploaded-correctly"></a><span data-ttu-id="a4a7c-176">Step 7: Make sure snapshots are uploaded correctly</span><span class="sxs-lookup"><span data-stu-id="a4a7c-176">Step 7: Make sure snapshots are uploaded correctly</span></span>
<span data-ttu-id="a4a7c-177">In the snapshot collector logs, search for ```UploadSnapshotFinish```.</span><span class="sxs-lookup"><span data-stu-id="a4a7c-177">In the snapshot collector logs, search for ```UploadSnapshotFinish```.</span></span>  <span data-ttu-id="a4a7c-178">If this is not present, send email to snapshothelp@microsoft.com with your Application Insights' Instrumentation Key.</span><span class="sxs-lookup"><span data-stu-id="a4a7c-178">If this is not present, send email to snapshothelp@microsoft.com with your Application Insights' Instrumentation Key.</span></span> <span data-ttu-id="a4a7c-179">If this event exists, open one of the logs and copy the 'SnapshotId' value in the Custom Data.</span><span class="sxs-lookup"><span data-stu-id="a4a7c-179">If this event exists, open one of the logs and copy the 'SnapshotId' value in the Custom Data.</span></span> <span data-ttu-id="a4a7c-180">Then search for the value.</span><span class="sxs-lookup"><span data-stu-id="a4a7c-180">Then search for the value.</span></span> <span data-ttu-id="a4a7c-181">This will find the exception corresponding to the snapshot.</span><span class="sxs-lookup"><span data-stu-id="a4a7c-181">This will find the exception corresponding to the snapshot.</span></span> <span data-ttu-id="a4a7c-182">Then click the exception and open debug snapshot.</span><span class="sxs-lookup"><span data-stu-id="a4a7c-182">Then click the exception and open debug snapshot.</span></span> <span data-ttu-id="a4a7c-183">(If there's no corresponding exception, the exception telemetry may be sampled due to high volume.</span><span class="sxs-lookup"><span data-stu-id="a4a7c-183">(If there's no corresponding exception, the exception telemetry may be sampled due to high volume.</span></span> <span data-ttu-id="a4a7c-184">Try another snapshotId.)</span><span class="sxs-lookup"><span data-stu-id="a4a7c-184">Try another snapshotId.)</span></span>

![Screenshot of Find SnapshotId](./media/app-insights-troubleshoot-snapshot-debugger/002.png)

![Screenshot of Open Exception](./media/app-insights-troubleshoot-snapshot-debugger/004b.png)

![Screenshot of Open debug snapshot](./media/app-insights-troubleshoot-snapshot-debugger/003.png)

## <a name="snapshot-view-local-variables-are-not-complete"></a><span data-ttu-id="a4a7c-188">Snapshot View Local Variables are not complete</span><span class="sxs-lookup"><span data-stu-id="a4a7c-188">Snapshot View Local Variables are not complete</span></span>

<span data-ttu-id="a4a7c-189">Some of the local variables are missing.</span><span class="sxs-lookup"><span data-stu-id="a4a7c-189">Some of the local variables are missing.</span></span> <span data-ttu-id="a4a7c-190">If your application is running release code, the compiler will optimize some variables away.</span><span class="sxs-lookup"><span data-stu-id="a4a7c-190">If your application is running release code, the compiler will optimize some variables away.</span></span> <span data-ttu-id="a4a7c-191">For example:</span><span class="sxs-lookup"><span data-stu-id="a4a7c-191">For example:</span></span>

```csharp
    const int a = 1; // a will be discarded by compiler and the value 1 will be inline.
    Random rand = new Random();
    int b = rand.Next() % 300; // b will be discarded and the value will be directly put to the 'FindNthPrimeNumber' call stack.
    long primeNumber = FindNthPrimeNumber(b);
```

<span data-ttu-id="a4a7c-192">If your case is different, it could indicate a bug.</span><span class="sxs-lookup"><span data-stu-id="a4a7c-192">If your case is different, it could indicate a bug.</span></span> <span data-ttu-id="a4a7c-193">Send email to snapshothelp@microsoft.com with your Application Insights' Instrumentation Key along with the code snippet.</span><span class="sxs-lookup"><span data-stu-id="a4a7c-193">Send email to snapshothelp@microsoft.com with your Application Insights' Instrumentation Key along with the code snippet.</span></span>

## <a name="snapshot-view-cannot-obtain-value-of-the-local-variable-or-argument"></a><span data-ttu-id="a4a7c-194">Snapshot View: Cannot obtain value of the local variable or argument</span><span class="sxs-lookup"><span data-stu-id="a4a7c-194">Snapshot View: Cannot obtain value of the local variable or argument</span></span>
<span data-ttu-id="a4a7c-195">Make sure the [Application Insights site extension](https://www.siteextensions.net/packages/Microsoft.ApplicationInsights.AzureWebSites/) is installed.</span><span class="sxs-lookup"><span data-stu-id="a4a7c-195">Make sure the [Application Insights site extension](https://www.siteextensions.net/packages/Microsoft.ApplicationInsights.AzureWebSites/) is installed.</span></span> <span data-ttu-id="a4a7c-196">If the issue persists, send email to snapshothelp@microsoft.com with your Application Insights' Instrumentation Key.</span><span class="sxs-lookup"><span data-stu-id="a4a7c-196">If the issue persists, send email to snapshothelp@microsoft.com with your Application Insights' Instrumentation Key.</span></span>
