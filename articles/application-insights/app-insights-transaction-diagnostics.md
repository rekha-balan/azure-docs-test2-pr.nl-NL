---
title: Azure Application Insights Transaction Diagnostics | Microsoft Docs
description: Application Insights end-to-end transaction diagnostics
services: application-insights
documentationcenter: .net
author: mrbullwinkle
manager: carmonm
ms.service: application-insights
ms.workload: TBD
ms.tgt_pltfrm: ibiza
ms.devlang: multiple
ms.topic: conceptual
ms.date: 01/19/2018
ms.reviewer: sdash
ms.author: mbullwin
ms.openlocfilehash: df88e9025da305701dc7168f663cad2e8f5ac738
ms.sourcegitcommit: d1451406a010fd3aa854dc8e5b77dc5537d8050e
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 09/13/2018
ms.locfileid: "44865060"
---
# <a name="unified-cross-component-transaction-diagnostics"></a><span data-ttu-id="f5485-103">Unified cross-component transaction diagnostics</span><span class="sxs-lookup"><span data-stu-id="f5485-103">Unified cross-component transaction diagnostics</span></span>

<span data-ttu-id="f5485-104">The unified diagnostics experience automatically correlates server-side telemetry from across all your Application Insights monitored components into a single view.</span><span class="sxs-lookup"><span data-stu-id="f5485-104">The unified diagnostics experience automatically correlates server-side telemetry from across all your Application Insights monitored components into a single view.</span></span> <span data-ttu-id="f5485-105">It doesn't matter if you have multiple resources with separate instrumentation keys.</span><span class="sxs-lookup"><span data-stu-id="f5485-105">It doesn't matter if you have multiple resources with separate instrumentation keys.</span></span> <span data-ttu-id="f5485-106">Application Insights detects the underlying relationship and allows you to easily diagnose the application component, dependency, or exception that caused a transaction slowdown or failure.</span><span class="sxs-lookup"><span data-stu-id="f5485-106">Application Insights detects the underlying relationship and allows you to easily diagnose the application component, dependency, or exception that caused a transaction slowdown or failure.</span></span>

## <a name="what-is-a-component"></a><span data-ttu-id="f5485-107">What is a Component?</span><span class="sxs-lookup"><span data-stu-id="f5485-107">What is a Component?</span></span>

<span data-ttu-id="f5485-108">Components are independently deployable parts of your distributed/microservices application.</span><span class="sxs-lookup"><span data-stu-id="f5485-108">Components are independently deployable parts of your distributed/microservices application.</span></span> <span data-ttu-id="f5485-109">Developers and operations teams have code-level visibility or access to telemetry generated by these application components.</span><span class="sxs-lookup"><span data-stu-id="f5485-109">Developers and operations teams have code-level visibility or access to telemetry generated by these application components.</span></span>

* <span data-ttu-id="f5485-110">Components are different from "observed" external dependencies such as SQL, EventHub etc. which your team/organization may not have access to (code or telemetry).</span><span class="sxs-lookup"><span data-stu-id="f5485-110">Components are different from "observed" external dependencies such as SQL, EventHub etc. which your team/organization may not have access to (code or telemetry).</span></span>
* <span data-ttu-id="f5485-111">Components run on any number of server/role/container instances.</span><span class="sxs-lookup"><span data-stu-id="f5485-111">Components run on any number of server/role/container instances.</span></span>
* <span data-ttu-id="f5485-112">Components can be separate Application Insights instrumentation keys (even if subscriptions are different) or different roles reporting to a single Application Insights instrumentation key.</span><span class="sxs-lookup"><span data-stu-id="f5485-112">Components can be separate Application Insights instrumentation keys (even if subscriptions are different) or different roles reporting to a single Application Insights instrumentation key.</span></span> <span data-ttu-id="f5485-113">The new experience shows details across all components, regardless of how they have been set up.</span><span class="sxs-lookup"><span data-stu-id="f5485-113">The new experience shows details across all components, regardless of how they have been set up.</span></span>

> [!NOTE]
> * <span data-ttu-id="f5485-114">**Missing the related item links?**</span><span class="sxs-lookup"><span data-stu-id="f5485-114">**Missing the related item links?**</span></span> <span data-ttu-id="f5485-115">All of the related telemetry are in the [top](#cross-component-transaction-chart) and [bottom](#all-telemetry-with-this-Operation-Id) sections of the left side.</span><span class="sxs-lookup"><span data-stu-id="f5485-115">All of the related telemetry are in the [top](#cross-component-transaction-chart) and [bottom](#all-telemetry-with-this-Operation-Id) sections of the left side.</span></span> 

## <a name="transaction-diagnostics-experience"></a><span data-ttu-id="f5485-116">Transaction diagnostics experience</span><span class="sxs-lookup"><span data-stu-id="f5485-116">Transaction diagnostics experience</span></span>
<span data-ttu-id="f5485-117">This view has four key parts: results list, a cross-component transaction chart, a time-sequence list of all telemetry related to this operation, and the details pane for any selected telemetry item on the left.</span><span class="sxs-lookup"><span data-stu-id="f5485-117">This view has four key parts: results list, a cross-component transaction chart, a time-sequence list of all telemetry related to this operation, and the details pane for any selected telemetry item on the left.</span></span>

![Key parts](media/app-insights-e2eTxn-diagnostics/4partsCrossComponent.png)

## <a name="cross-component-transaction-chart"></a><span data-ttu-id="f5485-119">Cross-component transaction chart</span><span class="sxs-lookup"><span data-stu-id="f5485-119">Cross-component transaction chart</span></span>

<span data-ttu-id="f5485-120">This chart provides a timeline with horizontal bars for the duration of requests and dependencies across components.</span><span class="sxs-lookup"><span data-stu-id="f5485-120">This chart provides a timeline with horizontal bars for the duration of requests and dependencies across components.</span></span> <span data-ttu-id="f5485-121">Any exceptions that are collected are also marked on the timeline.</span><span class="sxs-lookup"><span data-stu-id="f5485-121">Any exceptions that are collected are also marked on the timeline.</span></span>

* <span data-ttu-id="f5485-122">The top row on this chart represents the entry point, the incoming request to the first component called in this transaction.</span><span class="sxs-lookup"><span data-stu-id="f5485-122">The top row on this chart represents the entry point, the incoming request to the first component called in this transaction.</span></span> <span data-ttu-id="f5485-123">The duration is the total time taken for the transaction to complete.</span><span class="sxs-lookup"><span data-stu-id="f5485-123">The duration is the total time taken for the transaction to complete.</span></span>
* <span data-ttu-id="f5485-124">Any calls to external dependencies are simple non-collapsible rows, with icons representing the dependency type.</span><span class="sxs-lookup"><span data-stu-id="f5485-124">Any calls to external dependencies are simple non-collapsible rows, with icons representing the dependency type.</span></span>
* <span data-ttu-id="f5485-125">Calls to other components are collapsible rows.</span><span class="sxs-lookup"><span data-stu-id="f5485-125">Calls to other components are collapsible rows.</span></span> <span data-ttu-id="f5485-126">Each row corresponds to a specific operation invoked at the component.</span><span class="sxs-lookup"><span data-stu-id="f5485-126">Each row corresponds to a specific operation invoked at the component.</span></span>
* <span data-ttu-id="f5485-127">By default, the request, dependency, or exception that you selected is displayed on the right side.</span><span class="sxs-lookup"><span data-stu-id="f5485-127">By default, the request, dependency, or exception that you selected is displayed on the right side.</span></span>
* <span data-ttu-id="f5485-128">Select any row to see its [details on the right](#details-of-the-selected-telemetry).</span><span class="sxs-lookup"><span data-stu-id="f5485-128">Select any row to see its [details on the right](#details-of-the-selected-telemetry).</span></span> 

> [!NOTE]
<span data-ttu-id="f5485-129">Calls to other components have two rows: one row represents the outbound call (dependency) from the caller component, and the other row corresponds to the inbound request at the called component.</span><span class="sxs-lookup"><span data-stu-id="f5485-129">Calls to other components have two rows: one row represents the outbound call (dependency) from the caller component, and the other row corresponds to the inbound request at the called component.</span></span> <span data-ttu-id="f5485-130">The leading icon and distinct styling of the duration bars help differentiate between them.</span><span class="sxs-lookup"><span data-stu-id="f5485-130">The leading icon and distinct styling of the duration bars help differentiate between them.</span></span>

## <a name="all-telemetry-with-this-operation-id"></a><span data-ttu-id="f5485-131">All telemetry with this Operation Id</span><span class="sxs-lookup"><span data-stu-id="f5485-131">All telemetry with this Operation Id</span></span>

<span data-ttu-id="f5485-132">This section shows flat list view in a time sequence of all the telemetry related to this transaction.</span><span class="sxs-lookup"><span data-stu-id="f5485-132">This section shows flat list view in a time sequence of all the telemetry related to this transaction.</span></span> <span data-ttu-id="f5485-133">It also shows the custom events, and traces that aren't displayed in the transaction chart.</span><span class="sxs-lookup"><span data-stu-id="f5485-133">It also shows the custom events, and traces that aren't displayed in the transaction chart.</span></span> <span data-ttu-id="f5485-134">You can filter this list to telemetry generated by a specific component/call.</span><span class="sxs-lookup"><span data-stu-id="f5485-134">You can filter this list to telemetry generated by a specific component/call.</span></span> <span data-ttu-id="f5485-135">You can select any telemetry item in this list to see corresponding [details on the right](#details-of-the-selected-telemetry).</span><span class="sxs-lookup"><span data-stu-id="f5485-135">You can select any telemetry item in this list to see corresponding [details on the right](#details-of-the-selected-telemetry).</span></span>

![Time sequence of all telemetry](media/app-insights-e2eTxn-diagnostics/allTelemetryDrawerOpened.png)

## <a name="details-of-the-selected-telemetry"></a><span data-ttu-id="f5485-137">Details of the selected telemetry</span><span class="sxs-lookup"><span data-stu-id="f5485-137">Details of the selected telemetry</span></span>

<span data-ttu-id="f5485-138">This collapsible pane shows the detail of any selected item from the transaction chart, or the list.</span><span class="sxs-lookup"><span data-stu-id="f5485-138">This collapsible pane shows the detail of any selected item from the transaction chart, or the list.</span></span> <span data-ttu-id="f5485-139">"Show all" lists all of the standard attributes that are collected.</span><span class="sxs-lookup"><span data-stu-id="f5485-139">"Show all" lists all of the standard attributes that are collected.</span></span> <span data-ttu-id="f5485-140">Any custom attributes are separately listed below the standard set.</span><span class="sxs-lookup"><span data-stu-id="f5485-140">Any custom attributes are separately listed below the standard set.</span></span> <span data-ttu-id="f5485-141">Click on the "..." below the stack trace window to get an option to copy the trace.</span><span class="sxs-lookup"><span data-stu-id="f5485-141">Click on the "..." below the stack trace window to get an option to copy the trace.</span></span> <span data-ttu-id="f5485-142">"Open profiler traces" or "Open debug snapshot" shows code level diagnostics in corresponding detail panes.</span><span class="sxs-lookup"><span data-stu-id="f5485-142">"Open profiler traces" or "Open debug snapshot" shows code level diagnostics in corresponding detail panes.</span></span>

![Exception detail](media/app-insights-e2eTxn-diagnostics/exceptiondetail.png)

## <a name="search-results"></a><span data-ttu-id="f5485-144">Search results</span><span class="sxs-lookup"><span data-stu-id="f5485-144">Search results</span></span>

<span data-ttu-id="f5485-145">This collapsible pane shows the other results that meet the filter criteria.</span><span class="sxs-lookup"><span data-stu-id="f5485-145">This collapsible pane shows the other results that meet the filter criteria.</span></span> <span data-ttu-id="f5485-146">Click on any result to update the respective details the 3 sections listed above.</span><span class="sxs-lookup"><span data-stu-id="f5485-146">Click on any result to update the respective details the 3 sections listed above.</span></span> <span data-ttu-id="f5485-147">We try to find samples that are most likely to have the details available from all components even if sampling is in effect in any of them.</span><span class="sxs-lookup"><span data-stu-id="f5485-147">We try to find samples that are most likely to have the details available from all components even if sampling is in effect in any of them.</span></span> <span data-ttu-id="f5485-148">These are shown as "suggested" samples.</span><span class="sxs-lookup"><span data-stu-id="f5485-148">These are shown as "suggested" samples.</span></span>

![Search results](media/app-insights-e2eTxn-diagnostics/searchResults.png)

## <a name="profiler-and-snapshot-debugger"></a><span data-ttu-id="f5485-150">Profiler and snapshot debugger</span><span class="sxs-lookup"><span data-stu-id="f5485-150">Profiler and snapshot debugger</span></span>

<span data-ttu-id="f5485-151">[Application Insights profiler](app-insights-profiler.md) or [snapshot debugger](app-insights-snapshot-debugger.md) help with code-level diagnostics of performance and failure issues.</span><span class="sxs-lookup"><span data-stu-id="f5485-151">[Application Insights profiler](app-insights-profiler.md) or [snapshot debugger](app-insights-snapshot-debugger.md) help with code-level diagnostics of performance and failure issues.</span></span> <span data-ttu-id="f5485-152">With this experience, you can see profiler traces or snapshots from any component with a single click.</span><span class="sxs-lookup"><span data-stu-id="f5485-152">With this experience, you can see profiler traces or snapshots from any component with a single click.</span></span>

<span data-ttu-id="f5485-153">If you could not get Profiler working, please contact **serviceprofilerhelp@microsoft.com**</span><span class="sxs-lookup"><span data-stu-id="f5485-153">If you could not get Profiler working, please contact **serviceprofilerhelp@microsoft.com**</span></span>

<span data-ttu-id="f5485-154">If you could not get Snapshot Debugger working, please contact **snapshothelp@microsoft.com**</span><span class="sxs-lookup"><span data-stu-id="f5485-154">If you could not get Snapshot Debugger working, please contact **snapshothelp@microsoft.com**</span></span>

![Profiler Integration](media/app-insights-e2eTxn-diagnostics/profilerTraces.png)

## <a name="faq"></a><span data-ttu-id="f5485-156">FAQ</span><span class="sxs-lookup"><span data-stu-id="f5485-156">FAQ</span></span>

<span data-ttu-id="f5485-157">*I see a single component on the chart, and the others are only showing as external dependencies without any detail of what happened within those components.*</span><span class="sxs-lookup"><span data-stu-id="f5485-157">*I see a single component on the chart, and the others are only showing as external dependencies without any detail of what happened within those components.*</span></span>

<span data-ttu-id="f5485-158">Potential reasons:</span><span class="sxs-lookup"><span data-stu-id="f5485-158">Potential reasons:</span></span>

* <span data-ttu-id="f5485-159">Are the other components instrumented with Application Insights?</span><span class="sxs-lookup"><span data-stu-id="f5485-159">Are the other components instrumented with Application Insights?</span></span>
* <span data-ttu-id="f5485-160">Are they using the latest stable Application Insights SDK?</span><span class="sxs-lookup"><span data-stu-id="f5485-160">Are they using the latest stable Application Insights SDK?</span></span>
* <span data-ttu-id="f5485-161">If these components are separate Application Insights resources, do you have required access to their telemetry?</span><span class="sxs-lookup"><span data-stu-id="f5485-161">If these components are separate Application Insights resources, do you have required access to their telemetry?</span></span>

<span data-ttu-id="f5485-162">If you do have access and the components are instrumented with the latest Application Insights SDKs, let us know via the top right feedback channel.</span><span class="sxs-lookup"><span data-stu-id="f5485-162">If you do have access and the components are instrumented with the latest Application Insights SDKs, let us know via the top right feedback channel.</span></span>

<span data-ttu-id="f5485-163">*I see duplicate rows for the dependencies. Is this expected?*</span><span class="sxs-lookup"><span data-stu-id="f5485-163">*I see duplicate rows for the dependencies. Is this expected?*</span></span>

<span data-ttu-id="f5485-164">At this time, we are showing the outbound dependency call separate from the inbound request.</span><span class="sxs-lookup"><span data-stu-id="f5485-164">At this time, we are showing the outbound dependency call separate from the inbound request.</span></span> <span data-ttu-id="f5485-165">Typically, the two calls look identical with only the duration value being different due to the network round trip.</span><span class="sxs-lookup"><span data-stu-id="f5485-165">Typically, the two calls look identical with only the duration value being different due to the network round trip.</span></span> <span data-ttu-id="f5485-166">The leading icon and distinct styling of the duration bars help differentiate between them.</span><span class="sxs-lookup"><span data-stu-id="f5485-166">The leading icon and distinct styling of the duration bars help differentiate between them.</span></span> <span data-ttu-id="f5485-167">Is this presentation of the data confusing?</span><span class="sxs-lookup"><span data-stu-id="f5485-167">Is this presentation of the data confusing?</span></span> <span data-ttu-id="f5485-168">Give us your feedback!</span><span class="sxs-lookup"><span data-stu-id="f5485-168">Give us your feedback!</span></span>

<span data-ttu-id="f5485-169">*What about clock skews across different component instances?*</span><span class="sxs-lookup"><span data-stu-id="f5485-169">*What about clock skews across different component instances?*</span></span>

<span data-ttu-id="f5485-170">Timelines are adjusted for clock skews in the transaction chart.</span><span class="sxs-lookup"><span data-stu-id="f5485-170">Timelines are adjusted for clock skews in the transaction chart.</span></span> <span data-ttu-id="f5485-171">You can see the exact timestamps in the details pane or by using Analytics.</span><span class="sxs-lookup"><span data-stu-id="f5485-171">You can see the exact timestamps in the details pane or by using Analytics.</span></span>

<span data-ttu-id="f5485-172">*Why is the new experience missing most of the related items queries?*</span><span class="sxs-lookup"><span data-stu-id="f5485-172">*Why is the new experience missing most of the related items queries?*</span></span>

<span data-ttu-id="f5485-173">This is by design.</span><span class="sxs-lookup"><span data-stu-id="f5485-173">This is by design.</span></span> <span data-ttu-id="f5485-174">All of the related items, across all components, are already available on the left side (top and bottom sections).</span><span class="sxs-lookup"><span data-stu-id="f5485-174">All of the related items, across all components, are already available on the left side (top and bottom sections).</span></span> <span data-ttu-id="f5485-175">The new experience has two related items that the left side doesn't cover: all telemetry from five minutes before and after this event and the user timeline.</span><span class="sxs-lookup"><span data-stu-id="f5485-175">The new experience has two related items that the left side doesn't cover: all telemetry from five minutes before and after this event and the user timeline.</span></span>
