---
title: Upgrade from Bing Web Search API v5 to v7 | Microsoft Docs
description: Identifies the parts of your application that you need to update to use version 7.
services: cognitive-services
author: swhite-msft
manager: ehansen
ms.assetid: E8827BEB-4379-47CE-B67B-6C81AD7DAEB1
ms.service: cognitive-services
ms.component: bing-web-search
ms.topic: article
ms.date: 01/15/2017
ms.author: scottwhi
ms.openlocfilehash: 155297f230c0ee02d6fa49d6d35eb24d9941f29b
ms.sourcegitcommit: d1451406a010fd3aa854dc8e5b77dc5537d8050e
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 09/13/2018
ms.locfileid: "44857471"
---
# <a name="web-search-api-upgrade-guide"></a><span data-ttu-id="968c6-103">Web Search API upgrade guide</span><span class="sxs-lookup"><span data-stu-id="968c6-103">Web Search API upgrade guide</span></span>

<span data-ttu-id="968c6-104">This upgrade guide identifies the changes between version 5 and version 7 of the Bing Web Search API.</span><span class="sxs-lookup"><span data-stu-id="968c6-104">This upgrade guide identifies the changes between version 5 and version 7 of the Bing Web Search API.</span></span> <span data-ttu-id="968c6-105">Use this guide to help you identify the parts of your application that you need to update to use version 7.</span><span class="sxs-lookup"><span data-stu-id="968c6-105">Use this guide to help you identify the parts of your application that you need to update to use version 7.</span></span>

## <a name="breaking-changes"></a><span data-ttu-id="968c6-106">Breaking changes</span><span class="sxs-lookup"><span data-stu-id="968c6-106">Breaking changes</span></span>

### <a name="endpoints"></a><span data-ttu-id="968c6-107">Endpoints</span><span class="sxs-lookup"><span data-stu-id="968c6-107">Endpoints</span></span>

- <span data-ttu-id="968c6-108">The endpoint's version number changed from v5 to v7.</span><span class="sxs-lookup"><span data-stu-id="968c6-108">The endpoint's version number changed from v5 to v7.</span></span> <span data-ttu-id="968c6-109">For example, https:\/\/api.cognitive.microsoft.com/bing/**v7.0**/search.</span><span class="sxs-lookup"><span data-stu-id="968c6-109">For example, https:\/\/api.cognitive.microsoft.com/bing/**v7.0**/search.</span></span>

### <a name="error-response-objects-and-error-codes"></a><span data-ttu-id="968c6-110">Error response objects and error codes</span><span class="sxs-lookup"><span data-stu-id="968c6-110">Error response objects and error codes</span></span>

- <span data-ttu-id="968c6-111">All failed requests should now include an `ErrorResponse` object in the response body.</span><span class="sxs-lookup"><span data-stu-id="968c6-111">All failed requests should now include an `ErrorResponse` object in the response body.</span></span>

- <span data-ttu-id="968c6-112">Added the following fields to the `Error` object.</span><span class="sxs-lookup"><span data-stu-id="968c6-112">Added the following fields to the `Error` object.</span></span>  
  - <span data-ttu-id="968c6-113">`subCode`&mdash;Partitions the error code into discrete buckets, if possible</span><span class="sxs-lookup"><span data-stu-id="968c6-113">`subCode`&mdash;Partitions the error code into discrete buckets, if possible</span></span>
  - <span data-ttu-id="968c6-114">`moreDetails`&mdash;Additional information about the error described in the `message` field</span><span class="sxs-lookup"><span data-stu-id="968c6-114">`moreDetails`&mdash;Additional information about the error described in the `message` field</span></span>
   

- <span data-ttu-id="968c6-115">Replaced the v5 error codes with the following possible `code` and `subCode` values.</span><span class="sxs-lookup"><span data-stu-id="968c6-115">Replaced the v5 error codes with the following possible `code` and `subCode` values.</span></span>

|<span data-ttu-id="968c6-116">Code</span><span class="sxs-lookup"><span data-stu-id="968c6-116">Code</span></span>|<span data-ttu-id="968c6-117">SubCode</span><span class="sxs-lookup"><span data-stu-id="968c6-117">SubCode</span></span>|<span data-ttu-id="968c6-118">Description</span><span class="sxs-lookup"><span data-stu-id="968c6-118">Description</span></span>
|-|-|-
|<span data-ttu-id="968c6-119">ServerError</span><span class="sxs-lookup"><span data-stu-id="968c6-119">ServerError</span></span>|<span data-ttu-id="968c6-120">UnexpectedError</span><span class="sxs-lookup"><span data-stu-id="968c6-120">UnexpectedError</span></span><br/><span data-ttu-id="968c6-121">ResourceError</span><span class="sxs-lookup"><span data-stu-id="968c6-121">ResourceError</span></span><br/><span data-ttu-id="968c6-122">NotImplemented</span><span class="sxs-lookup"><span data-stu-id="968c6-122">NotImplemented</span></span>|<span data-ttu-id="968c6-123">Bing returns ServerError whenever any of the sub-code conditions occur.</span><span class="sxs-lookup"><span data-stu-id="968c6-123">Bing returns ServerError whenever any of the sub-code conditions occur.</span></span> <span data-ttu-id="968c6-124">The response will include these errors if the HTTP status code is 500.</span><span class="sxs-lookup"><span data-stu-id="968c6-124">The response will include these errors if the HTTP status code is 500.</span></span>
|<span data-ttu-id="968c6-125">InvalidRequest</span><span class="sxs-lookup"><span data-stu-id="968c6-125">InvalidRequest</span></span>|<span data-ttu-id="968c6-126">ParameterMissing</span><span class="sxs-lookup"><span data-stu-id="968c6-126">ParameterMissing</span></span><br/><span data-ttu-id="968c6-127">ParameterInvalidValue</span><span class="sxs-lookup"><span data-stu-id="968c6-127">ParameterInvalidValue</span></span><br/><span data-ttu-id="968c6-128">HttpNotAllowed</span><span class="sxs-lookup"><span data-stu-id="968c6-128">HttpNotAllowed</span></span><br/><span data-ttu-id="968c6-129">Blocked</span><span class="sxs-lookup"><span data-stu-id="968c6-129">Blocked</span></span>|<span data-ttu-id="968c6-130">Bing returns InvalidRequest whenever any part of the request is not valid.</span><span class="sxs-lookup"><span data-stu-id="968c6-130">Bing returns InvalidRequest whenever any part of the request is not valid.</span></span> <span data-ttu-id="968c6-131">For example, a required parameter is missing or a parameter value is not valid.</span><span class="sxs-lookup"><span data-stu-id="968c6-131">For example, a required parameter is missing or a parameter value is not valid.</span></span><br/><br/><span data-ttu-id="968c6-132">If the error is ParameterMissing or ParameterInvalidValue, the HTTP status code is 400.</span><span class="sxs-lookup"><span data-stu-id="968c6-132">If the error is ParameterMissing or ParameterInvalidValue, the HTTP status code is 400.</span></span><br/><br/><span data-ttu-id="968c6-133">If the error is HttpNotAllowed, the HTTP status code 410.</span><span class="sxs-lookup"><span data-stu-id="968c6-133">If the error is HttpNotAllowed, the HTTP status code 410.</span></span>
|<span data-ttu-id="968c6-134">RateLimitExceeded</span><span class="sxs-lookup"><span data-stu-id="968c6-134">RateLimitExceeded</span></span>||<span data-ttu-id="968c6-135">Bing returns RateLimitExceeded whenever you exceed your queries per second (QPS) or queries per month (QPM) quota.</span><span class="sxs-lookup"><span data-stu-id="968c6-135">Bing returns RateLimitExceeded whenever you exceed your queries per second (QPS) or queries per month (QPM) quota.</span></span><br/><br/><span data-ttu-id="968c6-136">Bing returns HTTP status code 429 if you exceeded QPS and 403 if you exceeded QPM.</span><span class="sxs-lookup"><span data-stu-id="968c6-136">Bing returns HTTP status code 429 if you exceeded QPS and 403 if you exceeded QPM.</span></span>
|<span data-ttu-id="968c6-137">InvalidAuthorization</span><span class="sxs-lookup"><span data-stu-id="968c6-137">InvalidAuthorization</span></span>|<span data-ttu-id="968c6-138">AuthorizationMissing</span><span class="sxs-lookup"><span data-stu-id="968c6-138">AuthorizationMissing</span></span><br/><span data-ttu-id="968c6-139">AuthorizationRedundancy</span><span class="sxs-lookup"><span data-stu-id="968c6-139">AuthorizationRedundancy</span></span>|<span data-ttu-id="968c6-140">Bing returns InvalidAuthorization when Bing cannot authenticate the caller.</span><span class="sxs-lookup"><span data-stu-id="968c6-140">Bing returns InvalidAuthorization when Bing cannot authenticate the caller.</span></span> <span data-ttu-id="968c6-141">For example, the `Ocp-Apim-Subscription-Key` header is missing or the subscription key is not valid.</span><span class="sxs-lookup"><span data-stu-id="968c6-141">For example, the `Ocp-Apim-Subscription-Key` header is missing or the subscription key is not valid.</span></span><br/><br/><span data-ttu-id="968c6-142">Redundancy occurs if you specify more than one authentication method.</span><span class="sxs-lookup"><span data-stu-id="968c6-142">Redundancy occurs if you specify more than one authentication method.</span></span><br/><br/><span data-ttu-id="968c6-143">If the error is InvalidAuthorization, the HTTP status code is 401.</span><span class="sxs-lookup"><span data-stu-id="968c6-143">If the error is InvalidAuthorization, the HTTP status code is 401.</span></span>
|<span data-ttu-id="968c6-144">InsufficientAuthorization</span><span class="sxs-lookup"><span data-stu-id="968c6-144">InsufficientAuthorization</span></span>|<span data-ttu-id="968c6-145">AuthorizationDisabled</span><span class="sxs-lookup"><span data-stu-id="968c6-145">AuthorizationDisabled</span></span><br/><span data-ttu-id="968c6-146">AuthorizationExpired</span><span class="sxs-lookup"><span data-stu-id="968c6-146">AuthorizationExpired</span></span>|<span data-ttu-id="968c6-147">Bing returns InsufficientAuthorization when the caller does not have permissions to access the resource.</span><span class="sxs-lookup"><span data-stu-id="968c6-147">Bing returns InsufficientAuthorization when the caller does not have permissions to access the resource.</span></span> <span data-ttu-id="968c6-148">This error can occur if the subscription key has been disabled or has expired.</span><span class="sxs-lookup"><span data-stu-id="968c6-148">This error can occur if the subscription key has been disabled or has expired.</span></span> <br/><br/><span data-ttu-id="968c6-149">If the error is InsufficientAuthorization, the HTTP status code is 403.</span><span class="sxs-lookup"><span data-stu-id="968c6-149">If the error is InsufficientAuthorization, the HTTP status code is 403.</span></span>

- <span data-ttu-id="968c6-150">The following maps the previous error codes to the new codes.</span><span class="sxs-lookup"><span data-stu-id="968c6-150">The following maps the previous error codes to the new codes.</span></span> <span data-ttu-id="968c6-151">If you've taken a dependency on v5 error codes, update your code accordingly.</span><span class="sxs-lookup"><span data-stu-id="968c6-151">If you've taken a dependency on v5 error codes, update your code accordingly.</span></span>

|<span data-ttu-id="968c6-152">Version 5 code</span><span class="sxs-lookup"><span data-stu-id="968c6-152">Version 5 code</span></span>|<span data-ttu-id="968c6-153">Version 7 code.subCode</span><span class="sxs-lookup"><span data-stu-id="968c6-153">Version 7 code.subCode</span></span>
|-|-
|<span data-ttu-id="968c6-154">RequestParameterMissing</span><span class="sxs-lookup"><span data-stu-id="968c6-154">RequestParameterMissing</span></span>|<span data-ttu-id="968c6-155">InvalidRequest.ParameterMissing</span><span class="sxs-lookup"><span data-stu-id="968c6-155">InvalidRequest.ParameterMissing</span></span>
<span data-ttu-id="968c6-156">RequestParameterInvalidValue</span><span class="sxs-lookup"><span data-stu-id="968c6-156">RequestParameterInvalidValue</span></span>|<span data-ttu-id="968c6-157">InvalidRequest.ParameterInvalidValue</span><span class="sxs-lookup"><span data-stu-id="968c6-157">InvalidRequest.ParameterInvalidValue</span></span>
<span data-ttu-id="968c6-158">ResourceAccessDenied</span><span class="sxs-lookup"><span data-stu-id="968c6-158">ResourceAccessDenied</span></span>|<span data-ttu-id="968c6-159">InsufficientAuthorization</span><span class="sxs-lookup"><span data-stu-id="968c6-159">InsufficientAuthorization</span></span>
<span data-ttu-id="968c6-160">ExceededVolume</span><span class="sxs-lookup"><span data-stu-id="968c6-160">ExceededVolume</span></span>|<span data-ttu-id="968c6-161">RateLimitExceeded</span><span class="sxs-lookup"><span data-stu-id="968c6-161">RateLimitExceeded</span></span>
<span data-ttu-id="968c6-162">ExceededQpsLimit</span><span class="sxs-lookup"><span data-stu-id="968c6-162">ExceededQpsLimit</span></span>|<span data-ttu-id="968c6-163">RateLimitExceeded</span><span class="sxs-lookup"><span data-stu-id="968c6-163">RateLimitExceeded</span></span>
<span data-ttu-id="968c6-164">Disabled</span><span class="sxs-lookup"><span data-stu-id="968c6-164">Disabled</span></span>|<span data-ttu-id="968c6-165">InsufficientAuthorization.AuthorizationDisabled</span><span class="sxs-lookup"><span data-stu-id="968c6-165">InsufficientAuthorization.AuthorizationDisabled</span></span>
<span data-ttu-id="968c6-166">UnexpectedError</span><span class="sxs-lookup"><span data-stu-id="968c6-166">UnexpectedError</span></span>|<span data-ttu-id="968c6-167">ServerError.UnexpectedError</span><span class="sxs-lookup"><span data-stu-id="968c6-167">ServerError.UnexpectedError</span></span>
<span data-ttu-id="968c6-168">DataSourceErrors</span><span class="sxs-lookup"><span data-stu-id="968c6-168">DataSourceErrors</span></span>|<span data-ttu-id="968c6-169">ServerError.ResourceError</span><span class="sxs-lookup"><span data-stu-id="968c6-169">ServerError.ResourceError</span></span>
<span data-ttu-id="968c6-170">AuthorizationMissing</span><span class="sxs-lookup"><span data-stu-id="968c6-170">AuthorizationMissing</span></span>|<span data-ttu-id="968c6-171">InvalidAuthorization.AuthorizationMissing</span><span class="sxs-lookup"><span data-stu-id="968c6-171">InvalidAuthorization.AuthorizationMissing</span></span>
<span data-ttu-id="968c6-172">HttpNotAllowed</span><span class="sxs-lookup"><span data-stu-id="968c6-172">HttpNotAllowed</span></span>|<span data-ttu-id="968c6-173">InvalidRequest.HttpNotAllowed</span><span class="sxs-lookup"><span data-stu-id="968c6-173">InvalidRequest.HttpNotAllowed</span></span>
<span data-ttu-id="968c6-174">UserAgentMissing</span><span class="sxs-lookup"><span data-stu-id="968c6-174">UserAgentMissing</span></span>|<span data-ttu-id="968c6-175">InvalidRequest.ParameterMissing</span><span class="sxs-lookup"><span data-stu-id="968c6-175">InvalidRequest.ParameterMissing</span></span>
<span data-ttu-id="968c6-176">NotImplemented</span><span class="sxs-lookup"><span data-stu-id="968c6-176">NotImplemented</span></span>|<span data-ttu-id="968c6-177">ServerError.NotImplemented</span><span class="sxs-lookup"><span data-stu-id="968c6-177">ServerError.NotImplemented</span></span>
<span data-ttu-id="968c6-178">InvalidAuthorization</span><span class="sxs-lookup"><span data-stu-id="968c6-178">InvalidAuthorization</span></span>|<span data-ttu-id="968c6-179">InvalidAuthorization</span><span class="sxs-lookup"><span data-stu-id="968c6-179">InvalidAuthorization</span></span>
<span data-ttu-id="968c6-180">InvalidAuthorizationMethod</span><span class="sxs-lookup"><span data-stu-id="968c6-180">InvalidAuthorizationMethod</span></span>|<span data-ttu-id="968c6-181">InvalidAuthorization</span><span class="sxs-lookup"><span data-stu-id="968c6-181">InvalidAuthorization</span></span>
<span data-ttu-id="968c6-182">MultipleAuthorizationMethod</span><span class="sxs-lookup"><span data-stu-id="968c6-182">MultipleAuthorizationMethod</span></span>|<span data-ttu-id="968c6-183">InvalidAuthorization.AuthorizationRedundancy</span><span class="sxs-lookup"><span data-stu-id="968c6-183">InvalidAuthorization.AuthorizationRedundancy</span></span>
<span data-ttu-id="968c6-184">ExpiredAuthorizationToken</span><span class="sxs-lookup"><span data-stu-id="968c6-184">ExpiredAuthorizationToken</span></span>|<span data-ttu-id="968c6-185">InsufficientAuthorization.AuthorizationExpired</span><span class="sxs-lookup"><span data-stu-id="968c6-185">InsufficientAuthorization.AuthorizationExpired</span></span>
<span data-ttu-id="968c6-186">InsufficientScope</span><span class="sxs-lookup"><span data-stu-id="968c6-186">InsufficientScope</span></span>|<span data-ttu-id="968c6-187">InsufficientAuthorization</span><span class="sxs-lookup"><span data-stu-id="968c6-187">InsufficientAuthorization</span></span>
<span data-ttu-id="968c6-188">Blocked</span><span class="sxs-lookup"><span data-stu-id="968c6-188">Blocked</span></span>|<span data-ttu-id="968c6-189">InvalidRequest.Blocked</span><span class="sxs-lookup"><span data-stu-id="968c6-189">InvalidRequest.Blocked</span></span>


## <a name="non-breaking-changes"></a><span data-ttu-id="968c6-190">Non-breaking changes</span><span class="sxs-lookup"><span data-stu-id="968c6-190">Non-breaking changes</span></span>  

### <a name="headers"></a><span data-ttu-id="968c6-191">Headers</span><span class="sxs-lookup"><span data-stu-id="968c6-191">Headers</span></span>

- <span data-ttu-id="968c6-192">Added the optional [Pragma](https://docs.microsoft.com/rest/api/cognitiveservices/bing-web-api-v7-reference#pragma) request header.</span><span class="sxs-lookup"><span data-stu-id="968c6-192">Added the optional [Pragma](https://docs.microsoft.com/rest/api/cognitiveservices/bing-web-api-v7-reference#pragma) request header.</span></span> <span data-ttu-id="968c6-193">By default, Bing returns cached content, if available.</span><span class="sxs-lookup"><span data-stu-id="968c6-193">By default, Bing returns cached content, if available.</span></span> <span data-ttu-id="968c6-194">To prevent Bing from returning cached content, set the Pragma header to no-cache (for example, Pragma: no-cache).</span><span class="sxs-lookup"><span data-stu-id="968c6-194">To prevent Bing from returning cached content, set the Pragma header to no-cache (for example, Pragma: no-cache).</span></span>

### <a name="query-parameters"></a><span data-ttu-id="968c6-195">Query parameters</span><span class="sxs-lookup"><span data-stu-id="968c6-195">Query parameters</span></span>

- <span data-ttu-id="968c6-196">Added the [answerCount](https://docs.microsoft.com/rest/api/cognitiveservices/bing-web-api-v7-reference#answercount) query parameter.</span><span class="sxs-lookup"><span data-stu-id="968c6-196">Added the [answerCount](https://docs.microsoft.com/rest/api/cognitiveservices/bing-web-api-v7-reference#answercount) query parameter.</span></span> <span data-ttu-id="968c6-197">Use this parameter to specify the number of answers that you want the response to include.</span><span class="sxs-lookup"><span data-stu-id="968c6-197">Use this parameter to specify the number of answers that you want the response to include.</span></span> <span data-ttu-id="968c6-198">The answers are chosen based on ranking.</span><span class="sxs-lookup"><span data-stu-id="968c6-198">The answers are chosen based on ranking.</span></span> <span data-ttu-id="968c6-199">For example, if you set this parameter to three (3), the response includes the top three ranked answers.</span><span class="sxs-lookup"><span data-stu-id="968c6-199">For example, if you set this parameter to three (3), the response includes the top three ranked answers.</span></span>  
  
- <span data-ttu-id="968c6-200">Added the [promote](https://docs.microsoft.com/rest/api/cognitiveservices/bing-web-api-v7-reference#promote) query parameter.</span><span class="sxs-lookup"><span data-stu-id="968c6-200">Added the [promote](https://docs.microsoft.com/rest/api/cognitiveservices/bing-web-api-v7-reference#promote) query parameter.</span></span> <span data-ttu-id="968c6-201">Use this parameter along with `answerCount` to explicitly include one or more answer types, regardless of their ranking.</span><span class="sxs-lookup"><span data-stu-id="968c6-201">Use this parameter along with `answerCount` to explicitly include one or more answer types, regardless of their ranking.</span></span> <span data-ttu-id="968c6-202">For example, to promote videos and images into the response, you’d set promote to *videos,images*.</span><span class="sxs-lookup"><span data-stu-id="968c6-202">For example, to promote videos and images into the response, you’d set promote to *videos,images*.</span></span> <span data-ttu-id="968c6-203">The list of answers that you want to promote does not count against the `answerCount` limit.</span><span class="sxs-lookup"><span data-stu-id="968c6-203">The list of answers that you want to promote does not count against the `answerCount` limit.</span></span> <span data-ttu-id="968c6-204">For example, if `answerCount` is 2 and `promote` is set to *videos,images*, the response might include webpages, news, videos, and images.</span><span class="sxs-lookup"><span data-stu-id="968c6-204">For example, if `answerCount` is 2 and `promote` is set to *videos,images*, the response might include webpages, news, videos, and images.</span></span>

### <a name="object-changes"></a><span data-ttu-id="968c6-205">Object changes</span><span class="sxs-lookup"><span data-stu-id="968c6-205">Object changes</span></span>

- <span data-ttu-id="968c6-206">Added the `someResultsRemoved` field to the [WebAnswer](https://docs.microsoft.com/rest/api/cognitiveservices/bing-web-api-v7-reference#webanswer) object.</span><span class="sxs-lookup"><span data-stu-id="968c6-206">Added the `someResultsRemoved` field to the [WebAnswer](https://docs.microsoft.com/rest/api/cognitiveservices/bing-web-api-v7-reference#webanswer) object.</span></span> <span data-ttu-id="968c6-207">The field contains a Boolean value that indicates whether the response excluded some results from the web answer.</span><span class="sxs-lookup"><span data-stu-id="968c6-207">The field contains a Boolean value that indicates whether the response excluded some results from the web answer.</span></span>  

