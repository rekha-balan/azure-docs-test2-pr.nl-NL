---
title: Enterprise concepts for a LUIS app - Language Understanding
titleSuffix: Azure Cognitive Services
description: Understand design concepts for large LUIS apps.
services: cognitive-services
author: diberry
manager: cjgronlund
ms.service: cognitive-services
ms.component: language-understanding
ms.topic: article
ms.date: 06/05/2018
ms.author: diberry
ms.openlocfilehash: 010efdf0fbfabb92b7465e37cb678a64810c8979
ms.sourcegitcommit: d1451406a010fd3aa854dc8e5b77dc5537d8050e
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 09/13/2018
ms.locfileid: "44871400"
---
# <a name="enterprise-strategies-for-a-luis-app"></a><span data-ttu-id="00460-103">Enterprise strategies for a LUIS app</span><span class="sxs-lookup"><span data-stu-id="00460-103">Enterprise strategies for a LUIS app</span></span>
<span data-ttu-id="00460-104">Review these design strategies for your enterprise app.</span><span class="sxs-lookup"><span data-stu-id="00460-104">Review these design strategies for your enterprise app.</span></span>

## <a name="when-you-expect-luis-requests-beyond-the-quota"></a><span data-ttu-id="00460-105">When you expect LUIS requests beyond the quota</span><span class="sxs-lookup"><span data-stu-id="00460-105">When you expect LUIS requests beyond the quota</span></span>
<span data-ttu-id="00460-106">If your LUIS app request rate exceeds the allowed [quota rate](https://azure.microsoft.com/pricing/details/cognitive-services/language-understanding-intelligent-services/), spread the load to more LUIS apps with the [same app definition](#use-multiple-apps-with-same-app-definition) or create and [assign multiple keys](#assign-multiple-luis-keys-to-same-app) to the app.</span><span class="sxs-lookup"><span data-stu-id="00460-106">If your LUIS app request rate exceeds the allowed [quota rate](https://azure.microsoft.com/pricing/details/cognitive-services/language-understanding-intelligent-services/), spread the load to more LUIS apps with the [same app definition](#use-multiple-apps-with-same-app-definition) or create and [assign multiple keys](#assign-multiple-luis-keys-to-same-app) to the app.</span></span> 

### <a name="use-multiple-apps-with-same-app-definition"></a><span data-ttu-id="00460-107">Use multiple apps with same app definition</span><span class="sxs-lookup"><span data-stu-id="00460-107">Use multiple apps with same app definition</span></span>
<span data-ttu-id="00460-108">Export the original LUIS app, then import the app back into separate apps.</span><span class="sxs-lookup"><span data-stu-id="00460-108">Export the original LUIS app, then import the app back into separate apps.</span></span> <span data-ttu-id="00460-109">Each app has its own app ID.</span><span class="sxs-lookup"><span data-stu-id="00460-109">Each app has its own app ID.</span></span> <span data-ttu-id="00460-110">When you publish, instead of using the same key across all apps, create a separate key for each app.</span><span class="sxs-lookup"><span data-stu-id="00460-110">When you publish, instead of using the same key across all apps, create a separate key for each app.</span></span> <span data-ttu-id="00460-111">Balance the load across all apps so that no single app is overwhelmed.</span><span class="sxs-lookup"><span data-stu-id="00460-111">Balance the load across all apps so that no single app is overwhelmed.</span></span> <span data-ttu-id="00460-112">Add [Application Insights](luis-tutorial-bot-csharp-appinsights.md) to monitor usage.</span><span class="sxs-lookup"><span data-stu-id="00460-112">Add [Application Insights](luis-tutorial-bot-csharp-appinsights.md) to monitor usage.</span></span> 

<span data-ttu-id="00460-113">In order to get the same top intent between all the apps, make sure the intent prediction between the first and second intent is wide enough that LUIS is not confused, giving different results between apps for minor variations in utterances.</span><span class="sxs-lookup"><span data-stu-id="00460-113">In order to get the same top intent between all the apps, make sure the intent prediction between the first and second intent is wide enough that LUIS is not confused, giving different results between apps for minor variations in utterances.</span></span> 

<span data-ttu-id="00460-114">Designate a single app as the master.</span><span class="sxs-lookup"><span data-stu-id="00460-114">Designate a single app as the master.</span></span> <span data-ttu-id="00460-115">Any utterances that are suggested for review should be added to the master app then moved back to all the other apps.</span><span class="sxs-lookup"><span data-stu-id="00460-115">Any utterances that are suggested for review should be added to the master app then moved back to all the other apps.</span></span> <span data-ttu-id="00460-116">This is either a full export of the app, or loading the labeled utterances from the master to the children.</span><span class="sxs-lookup"><span data-stu-id="00460-116">This is either a full export of the app, or loading the labeled utterances from the master to the children.</span></span> <span data-ttu-id="00460-117">Loading can be done from either the [LUIS](luis-reference-regions.md) website or the authoring API for a [single utterance](https://westus.dev.cognitive.microsoft.com/docs/services/5890b47c39e2bb17b84a55ff/operations/5890b47c39e2bb052c5b9c08) or for a [batch](https://westus.dev.cognitive.microsoft.com/docs/services/5890b47c39e2bb17b84a55ff/operations/5890b47c39e2bb052c5b9c09).</span><span class="sxs-lookup"><span data-stu-id="00460-117">Loading can be done from either the [LUIS](luis-reference-regions.md) website or the authoring API for a [single utterance](https://westus.dev.cognitive.microsoft.com/docs/services/5890b47c39e2bb17b84a55ff/operations/5890b47c39e2bb052c5b9c08) or for a [batch](https://westus.dev.cognitive.microsoft.com/docs/services/5890b47c39e2bb17b84a55ff/operations/5890b47c39e2bb052c5b9c09).</span></span> 

<span data-ttu-id="00460-118">Schedule a periodic [review of endpoint utterances](luis-how-to-review-endoint-utt.md) for active learning, such as every two weeks, then retrain and republish.</span><span class="sxs-lookup"><span data-stu-id="00460-118">Schedule a periodic [review of endpoint utterances](luis-how-to-review-endoint-utt.md) for active learning, such as every two weeks, then retrain and republish.</span></span> 

### <a name="assign-multiple-luis-keys-to-same-app"></a><span data-ttu-id="00460-119">Assign multiple LUIS keys to same app</span><span class="sxs-lookup"><span data-stu-id="00460-119">Assign multiple LUIS keys to same app</span></span>
<span data-ttu-id="00460-120">If your LUIS app receives more endpoint hits than your single key's quota allows, create and assign more keys to the LUIS app.</span><span class="sxs-lookup"><span data-stu-id="00460-120">If your LUIS app receives more endpoint hits than your single key's quota allows, create and assign more keys to the LUIS app.</span></span> <span data-ttu-id="00460-121">Create a traffic manager or load balancer to manage the endpoint queries across the endpoint keys.</span><span class="sxs-lookup"><span data-stu-id="00460-121">Create a traffic manager or load balancer to manage the endpoint queries across the endpoint keys.</span></span> 

## <a name="when-your-monolithic-app-returns-wrong-intent"></a><span data-ttu-id="00460-122">When your monolithic app returns wrong intent</span><span class="sxs-lookup"><span data-stu-id="00460-122">When your monolithic app returns wrong intent</span></span>
<span data-ttu-id="00460-123">If your app is meant to predict a wide variety of user utterances, consider implementing the [dispatch model](#dispatch-tool-and-model).</span><span class="sxs-lookup"><span data-stu-id="00460-123">If your app is meant to predict a wide variety of user utterances, consider implementing the [dispatch model](#dispatch-tool-and-model).</span></span> <span data-ttu-id="00460-124">Breaking up a monolithic app allows LUIS to focus detection between intents successfully instead of getting confused between intents across the parent app and child apps.</span><span class="sxs-lookup"><span data-stu-id="00460-124">Breaking up a monolithic app allows LUIS to focus detection between intents successfully instead of getting confused between intents across the parent app and child apps.</span></span> 

<span data-ttu-id="00460-125">Schedule a periodic [review of endpoint utterances](luis-how-to-review-endoint-utt.md) for active learning, such as every two weeks, then retrain and republish.</span><span class="sxs-lookup"><span data-stu-id="00460-125">Schedule a periodic [review of endpoint utterances](luis-how-to-review-endoint-utt.md) for active learning, such as every two weeks, then retrain and republish.</span></span> 

## <a name="when-you-need-to-have-more-than-500-intents"></a><span data-ttu-id="00460-126">When you need to have more than 500 intents</span><span class="sxs-lookup"><span data-stu-id="00460-126">When you need to have more than 500 intents</span></span>
<span data-ttu-id="00460-127">For example, let's say you're developing an office assistant that has over 500 intents.</span><span class="sxs-lookup"><span data-stu-id="00460-127">For example, let's say you're developing an office assistant that has over 500 intents.</span></span> <span data-ttu-id="00460-128">If 200 intents relate to scheduling meetings, 200 are about reminders, 200 are about getting information about colleagues, and 200 are for sending email, group intents so that each group is in a single app, then create a top-level app containing each intent.</span><span class="sxs-lookup"><span data-stu-id="00460-128">If 200 intents relate to scheduling meetings, 200 are about reminders, 200 are about getting information about colleagues, and 200 are for sending email, group intents so that each group is in a single app, then create a top-level app containing each intent.</span></span> <span data-ttu-id="00460-129">Use the [dispatch tool and architecture](#dispatch-tool-and-model) to build the top-level app.</span><span class="sxs-lookup"><span data-stu-id="00460-129">Use the [dispatch tool and architecture](#dispatch-tool-and-model) to build the top-level app.</span></span> <span data-ttu-id="00460-130">Then change your bot to use the cascading call as show in the [dispatch tutorial][dispatcher-application-tutorial].</span><span class="sxs-lookup"><span data-stu-id="00460-130">Then change your bot to use the cascading call as show in the [dispatch tutorial][dispatcher-application-tutorial].</span></span> 

## <a name="when-you-need-to-combine-several-luis-and-qna-maker-apps"></a><span data-ttu-id="00460-131">When you need to combine several LUIS and QnA maker apps</span><span class="sxs-lookup"><span data-stu-id="00460-131">When you need to combine several LUIS and QnA maker apps</span></span>
<span data-ttu-id="00460-132">If you have several LUIS and QnA maker apps that need to respond to a bot, use the [dispatch tool](#dispatch-tool-and-model) to build the top-level app.</span><span class="sxs-lookup"><span data-stu-id="00460-132">If you have several LUIS and QnA maker apps that need to respond to a bot, use the [dispatch tool](#dispatch-tool-and-model) to build the top-level app.</span></span> <span data-ttu-id="00460-133">Then change your bot to use the cascading call as show in the [dispatch tutorial][dispatcher-application-tutorial].</span><span class="sxs-lookup"><span data-stu-id="00460-133">Then change your bot to use the cascading call as show in the [dispatch tutorial][dispatcher-application-tutorial].</span></span> 

## <a name="dispatch-tool-and-model"></a><span data-ttu-id="00460-134">Dispatch tool and model</span><span class="sxs-lookup"><span data-stu-id="00460-134">Dispatch tool and model</span></span>
<span data-ttu-id="00460-135">Use the [Dispatch][dispatch-tool] command-line tool, found in [BotBuilder-tools](https://github.com/Microsoft/botbuilder-tools) to combine multiple LUIS and/or QnA Maker apps into a parent LUIS app.</span><span class="sxs-lookup"><span data-stu-id="00460-135">Use the [Dispatch][dispatch-tool] command-line tool, found in [BotBuilder-tools](https://github.com/Microsoft/botbuilder-tools) to combine multiple LUIS and/or QnA Maker apps into a parent LUIS app.</span></span> <span data-ttu-id="00460-136">This approach allows you to have a parent domain including all subjects and different child subject domains in separate apps.</span><span class="sxs-lookup"><span data-stu-id="00460-136">This approach allows you to have a parent domain including all subjects and different child subject domains in separate apps.</span></span> 

![Conceptual image of dispatch architecture](./media/luis-concept-enterprise/dispatch-architecture.png)

<span data-ttu-id="00460-138">The parent domain is noted in LUIS as a **V Dispatch** app.</span><span class="sxs-lookup"><span data-stu-id="00460-138">The parent domain is noted in LUIS as a **V Dispatch** app.</span></span> 

![Screenshot of LUIS apps list with LUIS app created by dispatch tool](./media/luis-concept-enterprise/dispatch.png)

<span data-ttu-id="00460-140">The chatbot receives the utterance, then sends to the parent LUIS app for prediction.</span><span class="sxs-lookup"><span data-stu-id="00460-140">The chatbot receives the utterance, then sends to the parent LUIS app for prediction.</span></span> <span data-ttu-id="00460-141">The top predicted intent from the parent app determines which child LUIS app is called next.</span><span class="sxs-lookup"><span data-stu-id="00460-141">The top predicted intent from the parent app determines which child LUIS app is called next.</span></span> <span data-ttu-id="00460-142">The chatbot sends the utterance to the child app for a more specific prediction.</span><span class="sxs-lookup"><span data-stu-id="00460-142">The chatbot sends the utterance to the child app for a more specific prediction.</span></span>

<span data-ttu-id="00460-143">Understand how this hierarchy of calls is made from the Bot Builder v4 [dispatcher-application-tutorial][dispatcher-application-tutorial].</span><span class="sxs-lookup"><span data-stu-id="00460-143">Understand how this hierarchy of calls is made from the Bot Builder v4 [dispatcher-application-tutorial][dispatcher-application-tutorial].</span></span>  

### <a name="intent-limits-in-dispatch-model"></a><span data-ttu-id="00460-144">Intent limits in dispatch model</span><span class="sxs-lookup"><span data-stu-id="00460-144">Intent limits in dispatch model</span></span>
<span data-ttu-id="00460-145">A dispatch application has 500 dispatch sources, equivalent to 500 intents, as the maximum.</span><span class="sxs-lookup"><span data-stu-id="00460-145">A dispatch application has 500 dispatch sources, equivalent to 500 intents, as the maximum.</span></span> 

## <a name="next-steps"></a><span data-ttu-id="00460-146">Next steps</span><span class="sxs-lookup"><span data-stu-id="00460-146">Next steps</span></span>

* <span data-ttu-id="00460-147">Learn how to [test a batch](luis-how-to-batch-test.md)</span><span class="sxs-lookup"><span data-stu-id="00460-147">Learn how to [test a batch](luis-how-to-batch-test.md)</span></span>

[dispatcher-application-tutorial]: https://aka.ms/bot-dispatch
[dispatch-tool]: https://github.com/Microsoft/botbuilder-tools/tree/master/Dispatch