---
title: API V2.0 reference for QnA Maker | Microsoft Docs
description: Use API V2.0 for QnA Maker to programmatically manage your knowledge base.
services: cognitive-services
author: pchoudhari
manager: rsrikan
ms.service: cognitive-services
ms.technology: qnamaker
ms.topic: article
ms.date: 03/06/2017
ms.author: pchoudh
ms.openlocfilehash: 0eacd378486cbb30eb960155de4131bfee86b22e
ms.sourcegitcommit: 5b9d839c0c0a94b293fdafe1d6e5429506c07e05
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 08/02/2018
ms.locfileid: "44563615"
---
# <a name="api-v20-reference"></a>API V2.0 Reference
The new [V2.0 APIs](https://westus.dev.cognitive.microsoft.com/docs/services/58994a073d9e04097c7ba6fe/operations/58994a073d9e041ad42d9baa) let you programmatically manage your knowledge base. Now you can do the following with the APIs

* Create knowledge base
* Delete knowledge base
* Update knowledge base
* Download knowledge base
* Publish knowledge base

Refer [here](https://westus.dev.cognitive.microsoft.com/docs/services/58994a073d9e04097c7ba6fe/operations/58994a073d9e041ad42d9baa) for detailed documentation.

# <a name="api-v10-reference"></a>API V1.0 Reference
Each published QnA Maker service is exposed as an HTTP endpoint that will take in a question and respond back with the best matched answer and a confidence score.
You need the following two GUIDs to access your knowledge base via the HTTP endpoint

* Knowledge Base ID: This is auto-generated by the system for every published KB.
* Subscription Key: These are assigned per account, and is used for metering. See the subscription keys section for more details.
  
## <a name="sample-request"></a>Sample Request

### <a name="http"></a>HTTP
```Markdown
POST /knowledgebases/<Your KB ID>/generateAnswer HTTP/1.1
Host: https://westus.api.cognitive.microsoft.com/qnamaker/v1.0
Ocp-Apim-Subscription-Key: <Your Subscription key>
Content-Type: application/json
Cache-Control: no-cache
{"question": "Question goes here"}
```

### <a name="c"></a>C#
```javascript
string responseString = string.Empty;

var query = “hi”; //User Query
var knowledgebaseId = “YOUR_KNOWLEDGE_BASE_ID”; // Use knowledge base id created.
var qnamakerSubscriptionKey = “YOUR_SUBSCRIPTION_KEY”; //Use subscription key assigned to you.

//Build the URI
Uri qnamakerUriBase = new Uri("https://westus.api.cognitive.microsoft.com/qnamaker/v1.0");
var builder = new UriBuilder($"{qnamakerUriBase}/knowledgebases/{knowledgebaseId}/generateAnswer");

//Add the question as part of the body
var postBody = $"{{\"question\": \"{query}\"}}";

//Send the POST request
using (WebClient client = new WebClient())
{
    //Set the encoding to UTF8
    client.Encoding = System.Text.Encoding.UTF8;
    
    //Add the subscription key header
    client.Headers.Add("Ocp-Apim-Subscription-Key", qnamakerSubscriptionKey);
    client.Headers.Add("Content-Type", "application/json");
    responseString = client.UploadString(builder.Uri, postBody);
}
```

## <a name="sample-response"></a>Sample Response
The response to the above request will be a JSON with the answer and the confidence score (0-100).

### <a name="json"></a>JSON
`{
  "Answer": "Sample response",
  "Score": "0"
}`

### <a name="c"></a>C#
```javascript
using Newtonsoft.Json; 

private class QnAMakerResult
{
    /// <summary>
    /// The top answer found in the QnA Service.
    /// </summary>
    [JsonProperty(PropertyName = "answer")]
    public string Answer { get; set; }

    /// <summary>
    /// The score in range [0, 100] corresponding to the top answer found in the QnA    Service.
    /// </summary>
    [JsonProperty(PropertyName = "score")]
    public double Score { get; set; }
}
//De-serialize the response
QnAMakerResult response;
try
{
    response = JsonConvert.DeserializeObject< QnAMakerResult >(responseString);
}
catch
{
    throw new Exception("Unable to deserialize QnA Maker response string.");
}
```
