---
title: 'Build Types and Model Quality: Recommendations API | Microsoft Docs'
description: Azure Machine Learning Recommendations--quick start guide
services: cognitive-services
documentationcenter: ''
author: luiscabrer
manager: jhubbard
editor: cgronlun
ms.assetid: 7e0beaa7-2646-4504-bce3-0d7bf767136a
ms.service: cognitive-services
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 09/20/2016
ms.author: luisca
ms.openlocfilehash: 61dff157548bb1916a995402137196faeb0a95dc
ms.sourcegitcommit: 5b9d839c0c0a94b293fdafe1d6e5429506c07e05
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 08/02/2018
ms.locfileid: "44549901"
---
# <a name="build-types-and-model-quality"></a><span data-ttu-id="66053-103">Build types and model quality</span><span class="sxs-lookup"><span data-stu-id="66053-103">Build types and model quality</span></span>
<a name="TypeofBuilds"></a>

## <a name="supported-build-types"></a><span data-ttu-id="66053-104">Supported build types</span><span class="sxs-lookup"><span data-stu-id="66053-104">Supported build types</span></span>
<span data-ttu-id="66053-105">The Recommendations API currently supports two build types: *recommendation* and *FBT*.</span><span class="sxs-lookup"><span data-stu-id="66053-105">The Recommendations API currently supports two build types: *recommendation* and *FBT*.</span></span> <span data-ttu-id="66053-106">Each is built using different algorithms, and each has different strengths.</span><span class="sxs-lookup"><span data-stu-id="66053-106">Each is built using different algorithms, and each has different strengths.</span></span> <span data-ttu-id="66053-107">This document describes each of these builds and techniques for comparing the quality of the models generated.</span><span class="sxs-lookup"><span data-stu-id="66053-107">This document describes each of these builds and techniques for comparing the quality of the models generated.</span></span>

<span data-ttu-id="66053-108">If you have not done so already, we recommend that you complete the [quick start guide](cognitive-services-recommendations-quick-start.md).</span><span class="sxs-lookup"><span data-stu-id="66053-108">If you have not done so already, we recommend that you complete the [quick start guide](cognitive-services-recommendations-quick-start.md).</span></span>

<a name="RecommendationBuild"></a>

### <a name="recommendation-build-type"></a><span data-ttu-id="66053-109">Recommendation build type</span><span class="sxs-lookup"><span data-stu-id="66053-109">Recommendation build type</span></span>
<span data-ttu-id="66053-110">The recommendation build type uses matrix factorization to provide recommendations.</span><span class="sxs-lookup"><span data-stu-id="66053-110">The recommendation build type uses matrix factorization to provide recommendations.</span></span> <span data-ttu-id="66053-111">It generates [latent feature](https://en.wikipedia.org/wiki/Latent_variable) vectors based on your transactions to describe each item, and then uses those latent vectors to compare items that are similar.</span><span class="sxs-lookup"><span data-stu-id="66053-111">It generates [latent feature](https://en.wikipedia.org/wiki/Latent_variable) vectors based on your transactions to describe each item, and then uses those latent vectors to compare items that are similar.</span></span>

<span data-ttu-id="66053-112">If you train the model based on purchases made in your electronics store and provide a Lumia 650 phone as the input to the model, the model will return a set of items that tend to be purchased by people who are likely to purchase a Lumia 650 phone.</span><span class="sxs-lookup"><span data-stu-id="66053-112">If you train the model based on purchases made in your electronics store and provide a Lumia 650 phone as the input to the model, the model will return a set of items that tend to be purchased by people who are likely to purchase a Lumia 650 phone.</span></span> <span data-ttu-id="66053-113">The items may not be complementary.</span><span class="sxs-lookup"><span data-stu-id="66053-113">The items may not be complementary.</span></span> <span data-ttu-id="66053-114">In this example, it is possible that the model will return other phones because people who like the Lumia 650 may like other phones.</span><span class="sxs-lookup"><span data-stu-id="66053-114">In this example, it is possible that the model will return other phones because people who like the Lumia 650 may like other phones.</span></span>

<span data-ttu-id="66053-115">The recommendation build has two capabilities that make it attractive:</span><span class="sxs-lookup"><span data-stu-id="66053-115">The recommendation build has two capabilities that make it attractive:</span></span>

<span data-ttu-id="66053-116">**The recommendation build supports *cold item* placement**</span><span class="sxs-lookup"><span data-stu-id="66053-116">**The recommendation build supports *cold item* placement**</span></span>

<span data-ttu-id="66053-117">Items that do not have significant usage are called cold items.</span><span class="sxs-lookup"><span data-stu-id="66053-117">Items that do not have significant usage are called cold items.</span></span> <span data-ttu-id="66053-118">For instance, if you receive a shipment of a phone you have never sold before, the system cannot infer recommendations for this product on transactions alone.</span><span class="sxs-lookup"><span data-stu-id="66053-118">For instance, if you receive a shipment of a phone you have never sold before, the system cannot infer recommendations for this product on transactions alone.</span></span> <span data-ttu-id="66053-119">This means that the system should learn from information about the product itself.</span><span class="sxs-lookup"><span data-stu-id="66053-119">This means that the system should learn from information about the product itself.</span></span>

<span data-ttu-id="66053-120">If you want to use cold item placement, you need to provide features information for each of your items in the catalog.</span><span class="sxs-lookup"><span data-stu-id="66053-120">If you want to use cold item placement, you need to provide features information for each of your items in the catalog.</span></span> <span data-ttu-id="66053-121">Following is what the first few lines of your catalog may look like (note the key=value format for the features).</span><span class="sxs-lookup"><span data-stu-id="66053-121">Following is what the first few lines of your catalog may look like (note the key=value format for the features).</span></span>

> <span data-ttu-id="66053-122">6CX-00001,Surface Pro2, Surface,, Type=Hardware, Storage=128 GB, Memory=4G, Manufacturer=Microsoft</span><span class="sxs-lookup"><span data-stu-id="66053-122">6CX-00001,Surface Pro2, Surface,, Type=Hardware, Storage=128 GB, Memory=4G, Manufacturer=Microsoft</span></span>
> 
> <span data-ttu-id="66053-123">73H-00013,Wake Xbox 360,Gaming,, Type=Software, Language=English, Rating=Mature</span><span class="sxs-lookup"><span data-stu-id="66053-123">73H-00013,Wake Xbox 360,Gaming,, Type=Software, Language=English, Rating=Mature</span></span>
> 
> <span data-ttu-id="66053-124">WAH-0F05,Minecraft Xbox 360,Gaming,, \* Type=Software, Language=Spanish, Rating=Youth</span><span class="sxs-lookup"><span data-stu-id="66053-124">WAH-0F05,Minecraft Xbox 360,Gaming,, \* Type=Software, Language=Spanish, Rating=Youth</span></span>
> 
> 

<span data-ttu-id="66053-125">You also need to set the following build parameters:</span><span class="sxs-lookup"><span data-stu-id="66053-125">You also need to set the following build parameters:</span></span>

| <span data-ttu-id="66053-126">Build parameter</span><span class="sxs-lookup"><span data-stu-id="66053-126">Build parameter</span></span> | <span data-ttu-id="66053-127">Notes</span><span class="sxs-lookup"><span data-stu-id="66053-127">Notes</span></span> |
| --- | --- |
| <span data-ttu-id="66053-128">*useFeaturesInModel*</span><span class="sxs-lookup"><span data-stu-id="66053-128">*useFeaturesInModel*</span></span> |<span data-ttu-id="66053-129">Set to **true**.</span><span class="sxs-lookup"><span data-stu-id="66053-129">Set to **true**.</span></span>  <span data-ttu-id="66053-130">Indicates if features can be used to enhance the recommendation model.</span><span class="sxs-lookup"><span data-stu-id="66053-130">Indicates if features can be used to enhance the recommendation model.</span></span> |
| <span data-ttu-id="66053-131">*allowColdItemPlacement*</span><span class="sxs-lookup"><span data-stu-id="66053-131">*allowColdItemPlacement*</span></span> |<span data-ttu-id="66053-132">Set to **true**.</span><span class="sxs-lookup"><span data-stu-id="66053-132">Set to **true**.</span></span> <span data-ttu-id="66053-133">Indicates if the recommendation should also push cold items via feature similarity.</span><span class="sxs-lookup"><span data-stu-id="66053-133">Indicates if the recommendation should also push cold items via feature similarity.</span></span> |
| <span data-ttu-id="66053-134">*modelingFeatureList*</span><span class="sxs-lookup"><span data-stu-id="66053-134">*modelingFeatureList*</span></span> |<span data-ttu-id="66053-135">Comma-separated list of feature names to be used in the recommendation build to enhance the recommendation.</span><span class="sxs-lookup"><span data-stu-id="66053-135">Comma-separated list of feature names to be used in the recommendation build to enhance the recommendation.</span></span> <span data-ttu-id="66053-136">For instance, “Language,Storage” for the preceding example.</span><span class="sxs-lookup"><span data-stu-id="66053-136">For instance, “Language,Storage” for the preceding example.</span></span> |

<span data-ttu-id="66053-137">**The recommendation build supports user recommendations**</span><span class="sxs-lookup"><span data-stu-id="66053-137">**The recommendation build supports user recommendations**</span></span>

<span data-ttu-id="66053-138">A recommendation build supports [user recommendations](https://westus.dev.cognitive.microsoft.com/docs/services/Recommendations.V4.0/operations/56f30d77eda5650db055a3dd).</span><span class="sxs-lookup"><span data-stu-id="66053-138">A recommendation build supports [user recommendations](https://westus.dev.cognitive.microsoft.com/docs/services/Recommendations.V4.0/operations/56f30d77eda5650db055a3dd).</span></span> <span data-ttu-id="66053-139">This means that it can provide personalized recommendations for users based on their transaction histories.</span><span class="sxs-lookup"><span data-stu-id="66053-139">This means that it can provide personalized recommendations for users based on their transaction histories.</span></span> <span data-ttu-id="66053-140">For user recommendations, you might provide the user ID or the recent history of transactions for that user.</span><span class="sxs-lookup"><span data-stu-id="66053-140">For user recommendations, you might provide the user ID or the recent history of transactions for that user.</span></span>

<span data-ttu-id="66053-141">One classic example of where you might want to apply user recommendations is at sign-in on the welcome page.</span><span class="sxs-lookup"><span data-stu-id="66053-141">One classic example of where you might want to apply user recommendations is at sign-in on the welcome page.</span></span> <span data-ttu-id="66053-142">There you can promote content that applies to the specific user.</span><span class="sxs-lookup"><span data-stu-id="66053-142">There you can promote content that applies to the specific user.</span></span>

<span data-ttu-id="66053-143">You might also want to apply a recommendations build type when the user is about to check out. At that point, you have the list of items the user is about to purchase, and you can provide recommendations based on the current market basket.</span><span class="sxs-lookup"><span data-stu-id="66053-143">You might also want to apply a recommendations build type when the user is about to check out. At that point, you have the list of items the user is about to purchase, and you can provide recommendations based on the current market basket.</span></span>

#### <a name="recommendations-build-parameters"></a><span data-ttu-id="66053-144">Recommendations build parameters</span><span class="sxs-lookup"><span data-stu-id="66053-144">Recommendations build parameters</span></span>
| <span data-ttu-id="66053-145">Name</span><span class="sxs-lookup"><span data-stu-id="66053-145">Name</span></span> | <span data-ttu-id="66053-146">Description</span><span class="sxs-lookup"><span data-stu-id="66053-146">Description</span></span> | <span data-ttu-id="66053-147">Type,</span><span class="sxs-lookup"><span data-stu-id="66053-147">Type,</span></span> <br>  <span data-ttu-id="66053-148">valid values,</span><span class="sxs-lookup"><span data-stu-id="66053-148">valid values,</span></span> <br> <span data-ttu-id="66053-149">(default value)</span><span class="sxs-lookup"><span data-stu-id="66053-149">(default value)</span></span> |
| --- | --- | --- |
| <span data-ttu-id="66053-150">*NumberOfModelIterations*</span><span class="sxs-lookup"><span data-stu-id="66053-150">*NumberOfModelIterations*</span></span> |<span data-ttu-id="66053-151">The number of iterations the model performs is reflected by the overall compute time and the model accuracy.</span><span class="sxs-lookup"><span data-stu-id="66053-151">The number of iterations the model performs is reflected by the overall compute time and the model accuracy.</span></span> <span data-ttu-id="66053-152">The higher the number, the more accurate the model, but the compute time takes longer.</span><span class="sxs-lookup"><span data-stu-id="66053-152">The higher the number, the more accurate the model, but the compute time takes longer.</span></span> |<span data-ttu-id="66053-153">Integer,</span><span class="sxs-lookup"><span data-stu-id="66053-153">Integer,</span></span> <br>     <span data-ttu-id="66053-154">10 to 50</span><span class="sxs-lookup"><span data-stu-id="66053-154">10 to 50</span></span> <br><span data-ttu-id="66053-155">(40)</span><span class="sxs-lookup"><span data-stu-id="66053-155">(40)</span></span> |
| <span data-ttu-id="66053-156">*NumberOfModelDimensions*</span><span class="sxs-lookup"><span data-stu-id="66053-156">*NumberOfModelDimensions*</span></span> |<span data-ttu-id="66053-157">The number of dimensions relates to the number of features the model will try to find within your data.</span><span class="sxs-lookup"><span data-stu-id="66053-157">The number of dimensions relates to the number of features the model will try to find within your data.</span></span> <span data-ttu-id="66053-158">Increasing the number of dimensions will allow better fine-tuning of the results into smaller clusters.</span><span class="sxs-lookup"><span data-stu-id="66053-158">Increasing the number of dimensions will allow better fine-tuning of the results into smaller clusters.</span></span> <span data-ttu-id="66053-159">However, too many dimensions will prevent the model from finding correlations between items.</span><span class="sxs-lookup"><span data-stu-id="66053-159">However, too many dimensions will prevent the model from finding correlations between items.</span></span> |<span data-ttu-id="66053-160">Integer,</span><span class="sxs-lookup"><span data-stu-id="66053-160">Integer,</span></span> <br> <span data-ttu-id="66053-161">10 to 40</span><span class="sxs-lookup"><span data-stu-id="66053-161">10 to 40</span></span> <br><span data-ttu-id="66053-162">(20)</span><span class="sxs-lookup"><span data-stu-id="66053-162">(20)</span></span> |
| <span data-ttu-id="66053-163">*ItemCutOffLowerBound*</span><span class="sxs-lookup"><span data-stu-id="66053-163">*ItemCutOffLowerBound*</span></span> |<span data-ttu-id="66053-164">Defines the minimum number of usage points an item should be in for it to be considered part of the model.</span><span class="sxs-lookup"><span data-stu-id="66053-164">Defines the minimum number of usage points an item should be in for it to be considered part of the model.</span></span> |<span data-ttu-id="66053-165">Integer,</span><span class="sxs-lookup"><span data-stu-id="66053-165">Integer,</span></span> <br> <span data-ttu-id="66053-166">2 or more</span><span class="sxs-lookup"><span data-stu-id="66053-166">2 or more</span></span> <br> <span data-ttu-id="66053-167">(2)</span><span class="sxs-lookup"><span data-stu-id="66053-167">(2)</span></span> |
| <span data-ttu-id="66053-168">*ItemCutOffUpperBound*</span><span class="sxs-lookup"><span data-stu-id="66053-168">*ItemCutOffUpperBound*</span></span> |<span data-ttu-id="66053-169">Defines the maximum number of usage points an item should be in for it to be considered part of the model.</span><span class="sxs-lookup"><span data-stu-id="66053-169">Defines the maximum number of usage points an item should be in for it to be considered part of the model.</span></span> |<span data-ttu-id="66053-170">Integer,</span><span class="sxs-lookup"><span data-stu-id="66053-170">Integer,</span></span> <br><span data-ttu-id="66053-171">2 or more</span><span class="sxs-lookup"><span data-stu-id="66053-171">2 or more</span></span><br> <span data-ttu-id="66053-172">(2147483647)</span><span class="sxs-lookup"><span data-stu-id="66053-172">(2147483647)</span></span> |
| <span data-ttu-id="66053-173">*UserCutOffLowerBound*</span><span class="sxs-lookup"><span data-stu-id="66053-173">*UserCutOffLowerBound*</span></span> |<span data-ttu-id="66053-174">Defines the minimum number of transactions a user must have performed to be considered part of the model.</span><span class="sxs-lookup"><span data-stu-id="66053-174">Defines the minimum number of transactions a user must have performed to be considered part of the model.</span></span> |<span data-ttu-id="66053-175">Integer,</span><span class="sxs-lookup"><span data-stu-id="66053-175">Integer,</span></span> <br> <span data-ttu-id="66053-176">2 or more</span><span class="sxs-lookup"><span data-stu-id="66053-176">2 or more</span></span> <br> <span data-ttu-id="66053-177">(2)</span><span class="sxs-lookup"><span data-stu-id="66053-177">(2)</span></span> |
| <span data-ttu-id="66053-178">*UserCutOffUpperBound*</span><span class="sxs-lookup"><span data-stu-id="66053-178">*UserCutOffUpperBound*</span></span> |<span data-ttu-id="66053-179">Defines the maximum number of transactions a user must have performed to be considered part of the model.</span><span class="sxs-lookup"><span data-stu-id="66053-179">Defines the maximum number of transactions a user must have performed to be considered part of the model.</span></span> |<span data-ttu-id="66053-180">Integer,</span><span class="sxs-lookup"><span data-stu-id="66053-180">Integer,</span></span> <br><span data-ttu-id="66053-181">2 or more</span><span class="sxs-lookup"><span data-stu-id="66053-181">2 or more</span></span> <br> <span data-ttu-id="66053-182">(2147483647)</span><span class="sxs-lookup"><span data-stu-id="66053-182">(2147483647)</span></span> |
| <span data-ttu-id="66053-183">*UseFeaturesInModel*</span><span class="sxs-lookup"><span data-stu-id="66053-183">*UseFeaturesInModel*</span></span> |<span data-ttu-id="66053-184">Indicates if features can be used to enhance the recommendation model.</span><span class="sxs-lookup"><span data-stu-id="66053-184">Indicates if features can be used to enhance the recommendation model.</span></span> |<span data-ttu-id="66053-185">Boolean</span><span class="sxs-lookup"><span data-stu-id="66053-185">Boolean</span></span><br> <span data-ttu-id="66053-186">Default: True</span><span class="sxs-lookup"><span data-stu-id="66053-186">Default: True</span></span> |
| <span data-ttu-id="66053-187">*ModelingFeatureList*</span><span class="sxs-lookup"><span data-stu-id="66053-187">*ModelingFeatureList*</span></span> |<span data-ttu-id="66053-188">Comma-separated list of feature names to be used in the recommendation build to enhance the recommendation.</span><span class="sxs-lookup"><span data-stu-id="66053-188">Comma-separated list of feature names to be used in the recommendation build to enhance the recommendation.</span></span> <span data-ttu-id="66053-189">It depends on the features that are important.</span><span class="sxs-lookup"><span data-stu-id="66053-189">It depends on the features that are important.</span></span> |<span data-ttu-id="66053-190">String, up to 512 chars</span><span class="sxs-lookup"><span data-stu-id="66053-190">String, up to 512 chars</span></span> |
| <span data-ttu-id="66053-191">*AllowColdItemPlacement*</span><span class="sxs-lookup"><span data-stu-id="66053-191">*AllowColdItemPlacement*</span></span> |<span data-ttu-id="66053-192">Indicates if the recommendation should also push cold items via feature similarity.</span><span class="sxs-lookup"><span data-stu-id="66053-192">Indicates if the recommendation should also push cold items via feature similarity.</span></span> |<span data-ttu-id="66053-193">Boolean</span><span class="sxs-lookup"><span data-stu-id="66053-193">Boolean</span></span> <br> <span data-ttu-id="66053-194">Default: False</span><span class="sxs-lookup"><span data-stu-id="66053-194">Default: False</span></span> |
| <span data-ttu-id="66053-195">*EnableFeatureCorrelation*</span><span class="sxs-lookup"><span data-stu-id="66053-195">*EnableFeatureCorrelation*</span></span> |<span data-ttu-id="66053-196">Indicates if features can be used in reasoning.</span><span class="sxs-lookup"><span data-stu-id="66053-196">Indicates if features can be used in reasoning.</span></span> |<span data-ttu-id="66053-197">Boolean</span><span class="sxs-lookup"><span data-stu-id="66053-197">Boolean</span></span> <br> <span data-ttu-id="66053-198">Default: False</span><span class="sxs-lookup"><span data-stu-id="66053-198">Default: False</span></span> |
| <span data-ttu-id="66053-199">*ReasoningFeatureList*</span><span class="sxs-lookup"><span data-stu-id="66053-199">*ReasoningFeatureList*</span></span> |<span data-ttu-id="66053-200">Comma-separated list of feature names to be used for reasoning sentences, such as recommendation explanations.</span><span class="sxs-lookup"><span data-stu-id="66053-200">Comma-separated list of feature names to be used for reasoning sentences, such as recommendation explanations.</span></span> <span data-ttu-id="66053-201">It depends on the features that are important to customers.</span><span class="sxs-lookup"><span data-stu-id="66053-201">It depends on the features that are important to customers.</span></span> |<span data-ttu-id="66053-202">String, up to 512 chars</span><span class="sxs-lookup"><span data-stu-id="66053-202">String, up to 512 chars</span></span> |
| <span data-ttu-id="66053-203">*EnableU2I*</span><span class="sxs-lookup"><span data-stu-id="66053-203">*EnableU2I*</span></span> |<span data-ttu-id="66053-204">Enable personalized recommendations, also called user to item (U2I) recommendations.</span><span class="sxs-lookup"><span data-stu-id="66053-204">Enable personalized recommendations, also called user to item (U2I) recommendations.</span></span> |<span data-ttu-id="66053-205">Boolean</span><span class="sxs-lookup"><span data-stu-id="66053-205">Boolean</span></span> <br><span data-ttu-id="66053-206">Default: True</span><span class="sxs-lookup"><span data-stu-id="66053-206">Default: True</span></span> |
| <span data-ttu-id="66053-207">*EnableModelingInsights*</span><span class="sxs-lookup"><span data-stu-id="66053-207">*EnableModelingInsights*</span></span> |<span data-ttu-id="66053-208">Defines whether offline evaluation should be performed to gather modeling insights (that is, precision and diversity metrics).</span><span class="sxs-lookup"><span data-stu-id="66053-208">Defines whether offline evaluation should be performed to gather modeling insights (that is, precision and diversity metrics).</span></span> <span data-ttu-id="66053-209">If set to true, a subset of the data will not be used for training because it will need to be reserved for testing of the model.</span><span class="sxs-lookup"><span data-stu-id="66053-209">If set to true, a subset of the data will not be used for training because it will need to be reserved for testing of the model.</span></span> <span data-ttu-id="66053-210">Read more about [offline evaluations](#OfflineEvaluation).</span><span class="sxs-lookup"><span data-stu-id="66053-210">Read more about [offline evaluations](#OfflineEvaluation).</span></span> |<span data-ttu-id="66053-211">Boolean</span><span class="sxs-lookup"><span data-stu-id="66053-211">Boolean</span></span> <br> <span data-ttu-id="66053-212">Default: False</span><span class="sxs-lookup"><span data-stu-id="66053-212">Default: False</span></span> |
| <span data-ttu-id="66053-213">*SplitterStrategy*</span><span class="sxs-lookup"><span data-stu-id="66053-213">*SplitterStrategy*</span></span> |<span data-ttu-id="66053-214">If enable modeling insights is set to *true*, this is how data should be split for evaluation purposes.</span><span class="sxs-lookup"><span data-stu-id="66053-214">If enable modeling insights is set to *true*, this is how data should be split for evaluation purposes.</span></span> |<span data-ttu-id="66053-215">String, *RandomSplitter* or *LastEventSplitter*</span><span class="sxs-lookup"><span data-stu-id="66053-215">String, *RandomSplitter* or *LastEventSplitter*</span></span> <br><span data-ttu-id="66053-216">Default:  RandomSplitter</span><span class="sxs-lookup"><span data-stu-id="66053-216">Default:  RandomSplitter</span></span> |

<a name="FBTBuild"></a>

### <a name="fbt-build-type"></a><span data-ttu-id="66053-217">FBT build type</span><span class="sxs-lookup"><span data-stu-id="66053-217">FBT build type</span></span>
<span data-ttu-id="66053-218">The frequently bought together (FBT) build does an analysis that counts the number of times two or three different products co-occur together.</span><span class="sxs-lookup"><span data-stu-id="66053-218">The frequently bought together (FBT) build does an analysis that counts the number of times two or three different products co-occur together.</span></span> <span data-ttu-id="66053-219">It then sorts the sets based on a similarity function (**co-occurrences**, **Jaccard**, **lift**).</span><span class="sxs-lookup"><span data-stu-id="66053-219">It then sorts the sets based on a similarity function (**co-occurrences**, **Jaccard**, **lift**).</span></span>

<span data-ttu-id="66053-220">Think of **Jaccard** and **lift** as ways to normalize the co-occurrences.</span><span class="sxs-lookup"><span data-stu-id="66053-220">Think of **Jaccard** and **lift** as ways to normalize the co-occurrences.</span></span>  <span data-ttu-id="66053-221">This means that the items will be returned only if they where purchased together with the seed item.</span><span class="sxs-lookup"><span data-stu-id="66053-221">This means that the items will be returned only if they where purchased together with the seed item.</span></span>

<span data-ttu-id="66053-222">In our Lumia 650 phone example, phone X will be returned only if phone X was purchased in the same session as the Lumia 650 phone.</span><span class="sxs-lookup"><span data-stu-id="66053-222">In our Lumia 650 phone example, phone X will be returned only if phone X was purchased in the same session as the Lumia 650 phone.</span></span> <span data-ttu-id="66053-223">Because this may be unlikely, we would expect items complementary to the Lumia 650 to be returned; for instance, a screen protector, or a power adapter for the Lumia 650.</span><span class="sxs-lookup"><span data-stu-id="66053-223">Because this may be unlikely, we would expect items complementary to the Lumia 650 to be returned; for instance, a screen protector, or a power adapter for the Lumia 650.</span></span>

<span data-ttu-id="66053-224">Currently, two items are assumed to be purchased in the same session if they occur in a transaction with the same user ID and timestamp.</span><span class="sxs-lookup"><span data-stu-id="66053-224">Currently, two items are assumed to be purchased in the same session if they occur in a transaction with the same user ID and timestamp.</span></span>

<span data-ttu-id="66053-225">FBT builds do not support cold items, because by definition they expect two items to be purchased in the same transaction.</span><span class="sxs-lookup"><span data-stu-id="66053-225">FBT builds do not support cold items, because by definition they expect two items to be purchased in the same transaction.</span></span> <span data-ttu-id="66053-226">While FBT builds can return sets of items (triplets), they do not support personalized recommendations because they accept a single seed item as the input.</span><span class="sxs-lookup"><span data-stu-id="66053-226">While FBT builds can return sets of items (triplets), they do not support personalized recommendations because they accept a single seed item as the input.</span></span>

#### <a name="fbt-build-parameters"></a><span data-ttu-id="66053-227">FBT build parameters</span><span class="sxs-lookup"><span data-stu-id="66053-227">FBT build parameters</span></span>
| <span data-ttu-id="66053-228">Name</span><span class="sxs-lookup"><span data-stu-id="66053-228">Name</span></span> | <span data-ttu-id="66053-229">Description</span><span class="sxs-lookup"><span data-stu-id="66053-229">Description</span></span> | <span data-ttu-id="66053-230">Type,</span><span class="sxs-lookup"><span data-stu-id="66053-230">Type,</span></span>  <br> <span data-ttu-id="66053-231">valid values,</span><span class="sxs-lookup"><span data-stu-id="66053-231">valid values,</span></span> <br> <span data-ttu-id="66053-232">(default value)</span><span class="sxs-lookup"><span data-stu-id="66053-232">(default value)</span></span> |
| --- | --- | --- |
| <span data-ttu-id="66053-233">*FbtSupportThreshold*</span><span class="sxs-lookup"><span data-stu-id="66053-233">*FbtSupportThreshold*</span></span> |<span data-ttu-id="66053-234">How conservative the model is.</span><span class="sxs-lookup"><span data-stu-id="66053-234">How conservative the model is.</span></span> <span data-ttu-id="66053-235">Number of co-occurrences of items to be considered for modeling.</span><span class="sxs-lookup"><span data-stu-id="66053-235">Number of co-occurrences of items to be considered for modeling.</span></span> |<span data-ttu-id="66053-236">Integer,</span><span class="sxs-lookup"><span data-stu-id="66053-236">Integer,</span></span> <br> <span data-ttu-id="66053-237">3-50</span><span class="sxs-lookup"><span data-stu-id="66053-237">3-50</span></span> <br> <span data-ttu-id="66053-238">(6)</span><span class="sxs-lookup"><span data-stu-id="66053-238">(6)</span></span> |
| <span data-ttu-id="66053-239">*FbtMaxItemSetSize*</span><span class="sxs-lookup"><span data-stu-id="66053-239">*FbtMaxItemSetSize*</span></span> |<span data-ttu-id="66053-240">Bounds the number of items in a frequent set.</span><span class="sxs-lookup"><span data-stu-id="66053-240">Bounds the number of items in a frequent set.</span></span> |<span data-ttu-id="66053-241">Integer</span><span class="sxs-lookup"><span data-stu-id="66053-241">Integer</span></span>    <br> <span data-ttu-id="66053-242">2-3</span><span class="sxs-lookup"><span data-stu-id="66053-242">2-3</span></span> <br> <span data-ttu-id="66053-243">(2)</span><span class="sxs-lookup"><span data-stu-id="66053-243">(2)</span></span> |
| <span data-ttu-id="66053-244">*FbtMinimalScore*</span><span class="sxs-lookup"><span data-stu-id="66053-244">*FbtMinimalScore*</span></span> |<span data-ttu-id="66053-245">Minimal score that a frequent set should have to be included in the returned results.</span><span class="sxs-lookup"><span data-stu-id="66053-245">Minimal score that a frequent set should have to be included in the returned results.</span></span> <span data-ttu-id="66053-246">The higher the better.</span><span class="sxs-lookup"><span data-stu-id="66053-246">The higher the better.</span></span> |<span data-ttu-id="66053-247">Double</span><span class="sxs-lookup"><span data-stu-id="66053-247">Double</span></span> <br> <span data-ttu-id="66053-248">0 and above</span><span class="sxs-lookup"><span data-stu-id="66053-248">0 and above</span></span> <br> <span data-ttu-id="66053-249">(0)</span><span class="sxs-lookup"><span data-stu-id="66053-249">(0)</span></span> |
| <span data-ttu-id="66053-250">*FbtSimilarityFunction*</span><span class="sxs-lookup"><span data-stu-id="66053-250">*FbtSimilarityFunction*</span></span> |<span data-ttu-id="66053-251">Defines the similarity function to be used by the build.</span><span class="sxs-lookup"><span data-stu-id="66053-251">Defines the similarity function to be used by the build.</span></span> <span data-ttu-id="66053-252">**Lift** favors serendipity, **co-occurrence** favors predictability, and **Jaccard** is a compromise between the two.</span><span class="sxs-lookup"><span data-stu-id="66053-252">**Lift** favors serendipity, **co-occurrence** favors predictability, and **Jaccard** is a compromise between the two.</span></span> |<span data-ttu-id="66053-253">String,</span><span class="sxs-lookup"><span data-stu-id="66053-253">String,</span></span>  <br>  <span data-ttu-id="66053-254"><i>cooccurrence, lift, jaccard</i></span><span class="sxs-lookup"><span data-stu-id="66053-254"><i>cooccurrence, lift, jaccard</i></span></span><br> <span data-ttu-id="66053-255">Default: <i>jaccard</i></span><span class="sxs-lookup"><span data-stu-id="66053-255">Default: <i>jaccard</i></span></span> |

<a name="SelectBuild"></a>

## <a name="build-evaluation-and-selection"></a><span data-ttu-id="66053-256">Build evaluation and selection</span><span class="sxs-lookup"><span data-stu-id="66053-256">Build evaluation and selection</span></span>
<span data-ttu-id="66053-257">This guidance might help you determine whether you should use a recommendations build or an FBT build, but it does not provide a definitive answer in cases where you could use either of them.</span><span class="sxs-lookup"><span data-stu-id="66053-257">This guidance might help you determine whether you should use a recommendations build or an FBT build, but it does not provide a definitive answer in cases where you could use either of them.</span></span> <span data-ttu-id="66053-258">Also, even if you know that you want to use an FBT build type, you might still want to choose **Jaccard** or **lift** as the similarity function.</span><span class="sxs-lookup"><span data-stu-id="66053-258">Also, even if you know that you want to use an FBT build type, you might still want to choose **Jaccard** or **lift** as the similarity function.</span></span>

<span data-ttu-id="66053-259">The best way to select between two different builds is to test them in the real world (online evaluation) and track a conversion rate for the different builds.</span><span class="sxs-lookup"><span data-stu-id="66053-259">The best way to select between two different builds is to test them in the real world (online evaluation) and track a conversion rate for the different builds.</span></span> <span data-ttu-id="66053-260">The conversion rate could be measured based on recommendation clicks, the number actual purchases from recommendations shown, or even on the actual purchase amounts when the different recommendations were shown.</span><span class="sxs-lookup"><span data-stu-id="66053-260">The conversion rate could be measured based on recommendation clicks, the number actual purchases from recommendations shown, or even on the actual purchase amounts when the different recommendations were shown.</span></span> <span data-ttu-id="66053-261">You may select your conversion rate metric based on your business objective.</span><span class="sxs-lookup"><span data-stu-id="66053-261">You may select your conversion rate metric based on your business objective.</span></span>

<span data-ttu-id="66053-262">In some cases, you may want to evaluate the model offline before you put it in production.</span><span class="sxs-lookup"><span data-stu-id="66053-262">In some cases, you may want to evaluate the model offline before you put it in production.</span></span> <span data-ttu-id="66053-263">While offline evaluation is not a replacement for online evaluation, it can serve as a metric.</span><span class="sxs-lookup"><span data-stu-id="66053-263">While offline evaluation is not a replacement for online evaluation, it can serve as a metric.</span></span>

<a name="OfflineEvaluation"></a>

## <a name="offline-evaluation"></a><span data-ttu-id="66053-264">Offline evaluation</span><span class="sxs-lookup"><span data-stu-id="66053-264">Offline evaluation</span></span>
<span data-ttu-id="66053-265">The goal of an offline evaluation is to predict precision (the number of users that will purchase one of the recommended items) and the diversity of recommendations (the number of items that are recommended).</span><span class="sxs-lookup"><span data-stu-id="66053-265">The goal of an offline evaluation is to predict precision (the number of users that will purchase one of the recommended items) and the diversity of recommendations (the number of items that are recommended).</span></span>
<span data-ttu-id="66053-266">As part of the precision and diversity metrics evaluation, the system finds a sample of users and splits  the transactions for those users into two groups: the training dataset and the test dataset.</span><span class="sxs-lookup"><span data-stu-id="66053-266">As part of the precision and diversity metrics evaluation, the system finds a sample of users and splits  the transactions for those users into two groups: the training dataset and the test dataset.</span></span>

> [!NOTE]
> <span data-ttu-id="66053-267">To use offline metrics, you must have timestamps in your usage data.</span><span class="sxs-lookup"><span data-stu-id="66053-267">To use offline metrics, you must have timestamps in your usage data.</span></span>
> <span data-ttu-id="66053-268">Time data is required to split usage correctly between training and test datasets.</span><span class="sxs-lookup"><span data-stu-id="66053-268">Time data is required to split usage correctly between training and test datasets.</span></span>
> 
> <span data-ttu-id="66053-269">Also, offline evaluation may not yield results for small usage files.</span><span class="sxs-lookup"><span data-stu-id="66053-269">Also, offline evaluation may not yield results for small usage files.</span></span> <span data-ttu-id="66053-270">For the evaluation to be thorough, there should be a minimum of 1,000 usage points in the test dataset.</span><span class="sxs-lookup"><span data-stu-id="66053-270">For the evaluation to be thorough, there should be a minimum of 1,000 usage points in the test dataset.</span></span>
> 
> 

<a name="Precision"></a>

### <a name="precision-at-k"></a><span data-ttu-id="66053-271">Precision-at-k</span><span class="sxs-lookup"><span data-stu-id="66053-271">Precision-at-k</span></span>
<span data-ttu-id="66053-272">The following table represents the output of the precision-at-k offline evaluation.</span><span class="sxs-lookup"><span data-stu-id="66053-272">The following table represents the output of the precision-at-k offline evaluation.</span></span>

| <span data-ttu-id="66053-273">K</span><span class="sxs-lookup"><span data-stu-id="66053-273">K</span></span> | <span data-ttu-id="66053-274">1</span><span class="sxs-lookup"><span data-stu-id="66053-274">1</span></span> | <span data-ttu-id="66053-275">2</span><span class="sxs-lookup"><span data-stu-id="66053-275">2</span></span> | <span data-ttu-id="66053-276">3</span><span class="sxs-lookup"><span data-stu-id="66053-276">3</span></span> | <span data-ttu-id="66053-277">4</span><span class="sxs-lookup"><span data-stu-id="66053-277">4</span></span> | <span data-ttu-id="66053-278">5</span><span class="sxs-lookup"><span data-stu-id="66053-278">5</span></span> |
| --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="66053-279">Percentage</span><span class="sxs-lookup"><span data-stu-id="66053-279">Percentage</span></span> |<span data-ttu-id="66053-280">13.75</span><span class="sxs-lookup"><span data-stu-id="66053-280">13.75</span></span> |<span data-ttu-id="66053-281">18.04</span><span class="sxs-lookup"><span data-stu-id="66053-281">18.04</span></span> |<span data-ttu-id="66053-282">21</span><span class="sxs-lookup"><span data-stu-id="66053-282">21</span></span> |<span data-ttu-id="66053-283">24.31</span><span class="sxs-lookup"><span data-stu-id="66053-283">24.31</span></span> |<span data-ttu-id="66053-284">26.61</span><span class="sxs-lookup"><span data-stu-id="66053-284">26.61</span></span> |
| <span data-ttu-id="66053-285">Users in test</span><span class="sxs-lookup"><span data-stu-id="66053-285">Users in test</span></span> |<span data-ttu-id="66053-286">10,000</span><span class="sxs-lookup"><span data-stu-id="66053-286">10,000</span></span> |<span data-ttu-id="66053-287">10,000</span><span class="sxs-lookup"><span data-stu-id="66053-287">10,000</span></span> |<span data-ttu-id="66053-288">10,000</span><span class="sxs-lookup"><span data-stu-id="66053-288">10,000</span></span> |<span data-ttu-id="66053-289">10,000</span><span class="sxs-lookup"><span data-stu-id="66053-289">10,000</span></span> |<span data-ttu-id="66053-290">10,000</span><span class="sxs-lookup"><span data-stu-id="66053-290">10,000</span></span> |
| <span data-ttu-id="66053-291">Users considered</span><span class="sxs-lookup"><span data-stu-id="66053-291">Users considered</span></span> |<span data-ttu-id="66053-292">10,000</span><span class="sxs-lookup"><span data-stu-id="66053-292">10,000</span></span> |<span data-ttu-id="66053-293">10,000</span><span class="sxs-lookup"><span data-stu-id="66053-293">10,000</span></span> |<span data-ttu-id="66053-294">10,000</span><span class="sxs-lookup"><span data-stu-id="66053-294">10,000</span></span> |<span data-ttu-id="66053-295">10,000</span><span class="sxs-lookup"><span data-stu-id="66053-295">10,000</span></span> |<span data-ttu-id="66053-296">10,000</span><span class="sxs-lookup"><span data-stu-id="66053-296">10,000</span></span> |
| <span data-ttu-id="66053-297">Users not considered</span><span class="sxs-lookup"><span data-stu-id="66053-297">Users not considered</span></span> |<span data-ttu-id="66053-298">0</span><span class="sxs-lookup"><span data-stu-id="66053-298">0</span></span> |<span data-ttu-id="66053-299">0</span><span class="sxs-lookup"><span data-stu-id="66053-299">0</span></span> |<span data-ttu-id="66053-300">0</span><span class="sxs-lookup"><span data-stu-id="66053-300">0</span></span> |<span data-ttu-id="66053-301">0</span><span class="sxs-lookup"><span data-stu-id="66053-301">0</span></span> |<span data-ttu-id="66053-302">0</span><span class="sxs-lookup"><span data-stu-id="66053-302">0</span></span> |

#### <a name="k"></a><span data-ttu-id="66053-303">K</span><span class="sxs-lookup"><span data-stu-id="66053-303">K</span></span>
<span data-ttu-id="66053-304">In the preceding table, *k* represents the number of recommendations shown to the customer.</span><span class="sxs-lookup"><span data-stu-id="66053-304">In the preceding table, *k* represents the number of recommendations shown to the customer.</span></span> <span data-ttu-id="66053-305">The table reads as follows: “If during the test period, only one recommendation was shown to the customers, only 13.75 of the users would have purchased that recommendation.”</span><span class="sxs-lookup"><span data-stu-id="66053-305">The table reads as follows: “If during the test period, only one recommendation was shown to the customers, only 13.75 of the users would have purchased that recommendation.”</span></span> <span data-ttu-id="66053-306">This statement is based on the assumption that the model was trained with purchase data.</span><span class="sxs-lookup"><span data-stu-id="66053-306">This statement is based on the assumption that the model was trained with purchase data.</span></span> <span data-ttu-id="66053-307">Another way to say this is that the precision at 1 is 13.75.</span><span class="sxs-lookup"><span data-stu-id="66053-307">Another way to say this is that the precision at 1 is 13.75.</span></span>

<span data-ttu-id="66053-308">You will notice that as more items are shown to the customer, the likelihood of the customer purchasing a recommended item goes up.</span><span class="sxs-lookup"><span data-stu-id="66053-308">You will notice that as more items are shown to the customer, the likelihood of the customer purchasing a recommended item goes up.</span></span> <span data-ttu-id="66053-309">For the preceding experiment, the probability almost doubles to 26.61 percent when 5 items are recommended.</span><span class="sxs-lookup"><span data-stu-id="66053-309">For the preceding experiment, the probability almost doubles to 26.61 percent when 5 items are recommended.</span></span>

#### <a name="percentage"></a><span data-ttu-id="66053-310">Percentage</span><span class="sxs-lookup"><span data-stu-id="66053-310">Percentage</span></span>
<span data-ttu-id="66053-311">The percentage of users that interacted with at least one of the *k* recommendations is shown.</span><span class="sxs-lookup"><span data-stu-id="66053-311">The percentage of users that interacted with at least one of the *k* recommendations is shown.</span></span> <span data-ttu-id="66053-312">The percentage is calculated by dividing the number of users that interacted with at least one recommendation by the total number of users considered.</span><span class="sxs-lookup"><span data-stu-id="66053-312">The percentage is calculated by dividing the number of users that interacted with at least one recommendation by the total number of users considered.</span></span> <span data-ttu-id="66053-313">See Users considered for more information.</span><span class="sxs-lookup"><span data-stu-id="66053-313">See Users considered for more information.</span></span>

#### <a name="users-in-test"></a><span data-ttu-id="66053-314">Users in test</span><span class="sxs-lookup"><span data-stu-id="66053-314">Users in test</span></span>
<span data-ttu-id="66053-315">Data in this row represents the total number of users in the test dataset.</span><span class="sxs-lookup"><span data-stu-id="66053-315">Data in this row represents the total number of users in the test dataset.</span></span>

#### <a name="users-considered"></a><span data-ttu-id="66053-316">Users considered</span><span class="sxs-lookup"><span data-stu-id="66053-316">Users considered</span></span>
<span data-ttu-id="66053-317">A user is only considered if the system recommended at least *k* items based on the model generated using the training dataset.</span><span class="sxs-lookup"><span data-stu-id="66053-317">A user is only considered if the system recommended at least *k* items based on the model generated using the training dataset.</span></span>

#### <a name="users-not-considered"></a><span data-ttu-id="66053-318">Users not considered</span><span class="sxs-lookup"><span data-stu-id="66053-318">Users not considered</span></span>
<span data-ttu-id="66053-319">Data in this row represents any users not considered.</span><span class="sxs-lookup"><span data-stu-id="66053-319">Data in this row represents any users not considered.</span></span> <span data-ttu-id="66053-320">The users that did not receive at least *k* recommended items.</span><span class="sxs-lookup"><span data-stu-id="66053-320">The users that did not receive at least *k* recommended items.</span></span>

<span data-ttu-id="66053-321">User not considered = users in test – users considered</span><span class="sxs-lookup"><span data-stu-id="66053-321">User not considered = users in test – users considered</span></span>

<a name="Diversity"></a>

### <a name="diversity"></a><span data-ttu-id="66053-322">Diversity</span><span class="sxs-lookup"><span data-stu-id="66053-322">Diversity</span></span>
<span data-ttu-id="66053-323">Diversity metrics measure the type of items recommended.</span><span class="sxs-lookup"><span data-stu-id="66053-323">Diversity metrics measure the type of items recommended.</span></span> <span data-ttu-id="66053-324">The following table represents the output of the diversity offline evaluation.</span><span class="sxs-lookup"><span data-stu-id="66053-324">The following table represents the output of the diversity offline evaluation.</span></span>

| <span data-ttu-id="66053-325">Percentile bucket</span><span class="sxs-lookup"><span data-stu-id="66053-325">Percentile bucket</span></span> | <span data-ttu-id="66053-326">0-90</span><span class="sxs-lookup"><span data-stu-id="66053-326">0-90</span></span> | <span data-ttu-id="66053-327">90-99</span><span class="sxs-lookup"><span data-stu-id="66053-327">90-99</span></span> | <span data-ttu-id="66053-328">99-100</span><span class="sxs-lookup"><span data-stu-id="66053-328">99-100</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="66053-329">Percentage</span><span class="sxs-lookup"><span data-stu-id="66053-329">Percentage</span></span> |<span data-ttu-id="66053-330">34.258</span><span class="sxs-lookup"><span data-stu-id="66053-330">34.258</span></span> |<span data-ttu-id="66053-331">55.127</span><span class="sxs-lookup"><span data-stu-id="66053-331">55.127</span></span> |<span data-ttu-id="66053-332">10.615</span><span class="sxs-lookup"><span data-stu-id="66053-332">10.615</span></span> |

<span data-ttu-id="66053-333">Total items recommended: 100,000</span><span class="sxs-lookup"><span data-stu-id="66053-333">Total items recommended: 100,000</span></span>

<span data-ttu-id="66053-334">Unique items recommended: 954</span><span class="sxs-lookup"><span data-stu-id="66053-334">Unique items recommended: 954</span></span>

#### <a name="percentile-buckets"></a><span data-ttu-id="66053-335">Percentile buckets</span><span class="sxs-lookup"><span data-stu-id="66053-335">Percentile buckets</span></span>
<span data-ttu-id="66053-336">Each percentile bucket is represented by a span (minimum and maximum values that range between 0 and 100).</span><span class="sxs-lookup"><span data-stu-id="66053-336">Each percentile bucket is represented by a span (minimum and maximum values that range between 0 and 100).</span></span> <span data-ttu-id="66053-337">The items close to 100 are the most popular items, and the items close to 0 are the least popular.</span><span class="sxs-lookup"><span data-stu-id="66053-337">The items close to 100 are the most popular items, and the items close to 0 are the least popular.</span></span> <span data-ttu-id="66053-338">For instance, if the percentage value for the 99-100 percentile bucket is 10.6, it means that 10.6 percent of the recommendations returned only the top one percent most popular items.</span><span class="sxs-lookup"><span data-stu-id="66053-338">For instance, if the percentage value for the 99-100 percentile bucket is 10.6, it means that 10.6 percent of the recommendations returned only the top one percent most popular items.</span></span> <span data-ttu-id="66053-339">The percentile bucket minimum value is inclusive, and the maximum value is exclusive, except for 100.</span><span class="sxs-lookup"><span data-stu-id="66053-339">The percentile bucket minimum value is inclusive, and the maximum value is exclusive, except for 100.</span></span>

#### <a name="unique-items-recommended"></a><span data-ttu-id="66053-340">Unique items recommended</span><span class="sxs-lookup"><span data-stu-id="66053-340">Unique items recommended</span></span>
<span data-ttu-id="66053-341">The unique items recommended metric shows the number of distinct items that were returned for evaluation.</span><span class="sxs-lookup"><span data-stu-id="66053-341">The unique items recommended metric shows the number of distinct items that were returned for evaluation.</span></span>

#### <a name="total-items-recommended"></a><span data-ttu-id="66053-342">Total items recommended</span><span class="sxs-lookup"><span data-stu-id="66053-342">Total items recommended</span></span>
<span data-ttu-id="66053-343">The total items recommended metric shows the number of items recommended.</span><span class="sxs-lookup"><span data-stu-id="66053-343">The total items recommended metric shows the number of items recommended.</span></span> <span data-ttu-id="66053-344">Some may be duplicates.</span><span class="sxs-lookup"><span data-stu-id="66053-344">Some may be duplicates.</span></span>

<a name="ImplementingEvaluation"></a>

### <a name="offline-evaluation-metrics"></a><span data-ttu-id="66053-345">Offline evaluation metrics</span><span class="sxs-lookup"><span data-stu-id="66053-345">Offline evaluation metrics</span></span>
<span data-ttu-id="66053-346">The precision and diversity offline metrics may be useful when you select which build to use.</span><span class="sxs-lookup"><span data-stu-id="66053-346">The precision and diversity offline metrics may be useful when you select which build to use.</span></span> <span data-ttu-id="66053-347">At build time, as part of the respective FBT or recommendation build parameters:</span><span class="sxs-lookup"><span data-stu-id="66053-347">At build time, as part of the respective FBT or recommendation build parameters:</span></span>

* <span data-ttu-id="66053-348">Set the *enableModelingInsights* build parameter to **true**.</span><span class="sxs-lookup"><span data-stu-id="66053-348">Set the *enableModelingInsights* build parameter to **true**.</span></span>
* <span data-ttu-id="66053-349">Optionally, select the *splitterStrategy* (Either *RandomSplitter* or *LastEventSplitter*).</span><span class="sxs-lookup"><span data-stu-id="66053-349">Optionally, select the *splitterStrategy* (Either *RandomSplitter* or *LastEventSplitter*).</span></span>
  <span data-ttu-id="66053-350">*RandomSplitter* splits the usage data in train and test sets based on the given *randomSplitterParameters* test percent and random seed values.</span><span class="sxs-lookup"><span data-stu-id="66053-350">*RandomSplitter* splits the usage data in train and test sets based on the given *randomSplitterParameters* test percent and random seed values.</span></span>
  <span data-ttu-id="66053-351">*LastEventSplitter* splits the usage data in train and test sets based on the last transaction for each user.</span><span class="sxs-lookup"><span data-stu-id="66053-351">*LastEventSplitter* splits the usage data in train and test sets based on the last transaction for each user.</span></span>

<span data-ttu-id="66053-352">This will trigger a build that uses only a subset of the data for training and uses the rest of the data to compute evaluation metrics.</span><span class="sxs-lookup"><span data-stu-id="66053-352">This will trigger a build that uses only a subset of the data for training and uses the rest of the data to compute evaluation metrics.</span></span>  <span data-ttu-id="66053-353">After the build is completed, to get the output of the evaluation, you need to call the [Get build metrics API](https://westus.dev.cognitive.microsoft.com/docs/services/Recommendations.V4.0/operations/577eaa75eda565095421666f), passing the respective *modelId* and *buildId*.</span><span class="sxs-lookup"><span data-stu-id="66053-353">After the build is completed, to get the output of the evaluation, you need to call the [Get build metrics API](https://westus.dev.cognitive.microsoft.com/docs/services/Recommendations.V4.0/operations/577eaa75eda565095421666f), passing the respective *modelId* and *buildId*.</span></span>

 <span data-ttu-id="66053-354">Following is the JSON output for the sample evaluation.</span><span class="sxs-lookup"><span data-stu-id="66053-354">Following is the JSON output for the sample evaluation.</span></span>

    {
     "Result": {
     "precisionItemRecommend": null,
     "precisionUserRecommend": {
      "precisionMetrics": [
        {
          "k": 1,
          "percentage": 13.75,
          "usersInTest": 10000,
          "usersConsidered": 10000,
          "usersNotConsidered": 0
        },
        {
          "k": 2,
          "percentage": 18.04,
          "usersInTest": 10000,
          "usersConsidered": 10000,
          "usersNotConsidered": 0
        },
        {
          "k": 3,
          "percentage": 21.0,
          "usersInTest": 10000,
          "usersConsidered": 10000,
          "usersNotConsidered": 0
        },
        {
          "k": 4,
          "percentage": 24.31,
          "usersInTest": 10000,
          "usersConsidered": 10000,
          "usersNotConsidered": 0
        },
        {
          "k": 5,
          "percentage": 26.61,
          "usersInTest": 10000,
          "usersConsidered": 10000,
          "usersNotConsidered": 0
        }
      ],
      "error": null
    },
    "diversityItemRecommend": null,
    "diversityUserRecommend": {
      "percentileBuckets": [
        {
          "min": 0,
          "max": 90,
          "percentage": 34.258
        },
        {
          "min": 90,
          "max": 99,
          "percentage": 55.127
        },
        {
          "min": 99,
          "max": 100,
          "percentage": 10.615
        }
      ],
      "totalItemsRecommended": 100000,
      "uniqueItemsRecommended": 954,
      "uniqueItemsInTrainSet": null,
      "error": null
      }
     },
    "Id": 1,
    "Exception": null,
    "Status": 5,
    "IsCanceled": false,
    "IsCompleted": true,
    "CreationOptions": 0,
    "AsyncState": null,
    "IsFaulted": false
    }
