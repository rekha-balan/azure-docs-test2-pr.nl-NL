---
title: Serverless database computing - Azure Functions and Azure Cosmos DB| Microsoft Docs
description: Learn how Azure Cosmos DB and Azure Functions can be used together to create event-driven serverless computing apps.
services: cosmos-db
author: SnehaGunda
manager: kfile
ms.service: cosmos-db
ms.devlang: na
ms.topic: conceptual
ms.date: 03/26/2018
ms.author: sngun
ms.openlocfilehash: b54a302c022a8af84c1964c13ffadc52b45c4ca4
ms.sourcegitcommit: d1451406a010fd3aa854dc8e5b77dc5537d8050e
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 09/13/2018
ms.locfileid: "44867746"
---
# <a name="azure-cosmos-db-serverless-database-computing-using-azure-functions"></a><span data-ttu-id="e1403-103">Azure Cosmos DB: Serverless database computing using Azure Functions</span><span class="sxs-lookup"><span data-stu-id="e1403-103">Azure Cosmos DB: Serverless database computing using Azure Functions</span></span>

<span data-ttu-id="e1403-104">Serverless computing is all about the ability to focus on individual pieces of logic that are repeatable and stateless.</span><span class="sxs-lookup"><span data-stu-id="e1403-104">Serverless computing is all about the ability to focus on individual pieces of logic that are repeatable and stateless.</span></span> <span data-ttu-id="e1403-105">These pieces require no infrastructure management and they consume resources only for the seconds, or milliseconds, they run for.</span><span class="sxs-lookup"><span data-stu-id="e1403-105">These pieces require no infrastructure management and they consume resources only for the seconds, or milliseconds, they run for.</span></span> <span data-ttu-id="e1403-106">At the core of the serverless computing movement are functions, which are made available in the Azure ecosystem by [Azure Functions](https://azure.microsoft.com/services/functions).</span><span class="sxs-lookup"><span data-stu-id="e1403-106">At the core of the serverless computing movement are functions, which are made available in the Azure ecosystem by [Azure Functions](https://azure.microsoft.com/services/functions).</span></span>

<span data-ttu-id="e1403-107">With the native integration between [Azure Cosmos DB](https://azure.microsoft.com/services/cosmos-db) and Azure Functions, you can create database triggers, input bindings, and output bindings directly from your Azure Cosmos DB account.</span><span class="sxs-lookup"><span data-stu-id="e1403-107">With the native integration between [Azure Cosmos DB](https://azure.microsoft.com/services/cosmos-db) and Azure Functions, you can create database triggers, input bindings, and output bindings directly from your Azure Cosmos DB account.</span></span> <span data-ttu-id="e1403-108">Using Azure Functions and Azure Cosmos DB, you can create and deploy event-driven serverless apps with low-latency access to rich data for a global user base.</span><span class="sxs-lookup"><span data-stu-id="e1403-108">Using Azure Functions and Azure Cosmos DB, you can create and deploy event-driven serverless apps with low-latency access to rich data for a global user base.</span></span>

## <a name="overview"></a><span data-ttu-id="e1403-109">Overview</span><span class="sxs-lookup"><span data-stu-id="e1403-109">Overview</span></span>

<span data-ttu-id="e1403-110">Azure Cosmos DB and Azure Functions enable you to integrate your databases and serverless apps in the following ways:</span><span class="sxs-lookup"><span data-stu-id="e1403-110">Azure Cosmos DB and Azure Functions enable you to integrate your databases and serverless apps in the following ways:</span></span>

* <span data-ttu-id="e1403-111">Create an event-driven **Azure Cosmos DB trigger** in an Azure Function.</span><span class="sxs-lookup"><span data-stu-id="e1403-111">Create an event-driven **Azure Cosmos DB trigger** in an Azure Function.</span></span> <span data-ttu-id="e1403-112">This trigger relies on [change feed](change-feed.md) streams to monitor your Azure Cosmos DB container for changes.</span><span class="sxs-lookup"><span data-stu-id="e1403-112">This trigger relies on [change feed](change-feed.md) streams to monitor your Azure Cosmos DB container for changes.</span></span> <span data-ttu-id="e1403-113">When any changes are made to a container, the change feed stream is sent to the trigger, which invokes the Azure Function.</span><span class="sxs-lookup"><span data-stu-id="e1403-113">When any changes are made to a container, the change feed stream is sent to the trigger, which invokes the Azure Function.</span></span>
* <span data-ttu-id="e1403-114">Alternatively, bind an Azure Function to an Azure Cosmos DB container using an **input binding**.</span><span class="sxs-lookup"><span data-stu-id="e1403-114">Alternatively, bind an Azure Function to an Azure Cosmos DB container using an **input binding**.</span></span> <span data-ttu-id="e1403-115">Input bindings read data from a container when a function executes.</span><span class="sxs-lookup"><span data-stu-id="e1403-115">Input bindings read data from a container when a function executes.</span></span>
* <span data-ttu-id="e1403-116">Bind a function to an Azure Cosmos DB container using an **output binding**.</span><span class="sxs-lookup"><span data-stu-id="e1403-116">Bind a function to an Azure Cosmos DB container using an **output binding**.</span></span> <span data-ttu-id="e1403-117">Output bindings write data to a container when a function completes.</span><span class="sxs-lookup"><span data-stu-id="e1403-117">Output bindings write data to a container when a function completes.</span></span>

> [!NOTE]
> <span data-ttu-id="e1403-118">At this time, the Azure Cosmos DB trigger, input bindings, and output bindings work with SQL API and Gremlin API accounts only.</span><span class="sxs-lookup"><span data-stu-id="e1403-118">At this time, the Azure Cosmos DB trigger, input bindings, and output bindings work with SQL API and Gremlin API accounts only.</span></span>

<span data-ttu-id="e1403-119">The following diagram illustrates each of these three integrations:</span><span class="sxs-lookup"><span data-stu-id="e1403-119">The following diagram illustrates each of these three integrations:</span></span> 

![How Azure Cosmos DB and Azure Functions integrate](./media/serverless-computing-database/cosmos-db-azure-functions-integration.png)

<span data-ttu-id="e1403-121">The Azure Cosmos DB trigger, input binding, and output binding can be used in the following combinations:</span><span class="sxs-lookup"><span data-stu-id="e1403-121">The Azure Cosmos DB trigger, input binding, and output binding can be used in the following combinations:</span></span>
* <span data-ttu-id="e1403-122">An Azure Cosmos DB trigger can be used with an output binding to a different Azure Cosmos DB container.</span><span class="sxs-lookup"><span data-stu-id="e1403-122">An Azure Cosmos DB trigger can be used with an output binding to a different Azure Cosmos DB container.</span></span> <span data-ttu-id="e1403-123">After a function performs an action on an item in the change feed you can write it to another container (writing it to the same container it came from would effectively create a recursive loop).</span><span class="sxs-lookup"><span data-stu-id="e1403-123">After a function performs an action on an item in the change feed you can write it to another container (writing it to the same container it came from would effectively create a recursive loop).</span></span> <span data-ttu-id="e1403-124">Or, you can use an Azure Cosmos DB trigger to effectively migrate all changed items from one container to a different container, with the use of an output binding.</span><span class="sxs-lookup"><span data-stu-id="e1403-124">Or, you can use an Azure Cosmos DB trigger to effectively migrate all changed items from one container to a different container, with the use of an output binding.</span></span>
* <span data-ttu-id="e1403-125">Input bindings and output bindings for Azure Cosmos DB can be used in the same Azure Function.</span><span class="sxs-lookup"><span data-stu-id="e1403-125">Input bindings and output bindings for Azure Cosmos DB can be used in the same Azure Function.</span></span> <span data-ttu-id="e1403-126">This works well in cases when you want to find certain data with the input binding, modify it in the Azure Function, and then save it to the same container or a different container, after the modification.</span><span class="sxs-lookup"><span data-stu-id="e1403-126">This works well in cases when you want to find certain data with the input binding, modify it in the Azure Function, and then save it to the same container or a different container, after the modification.</span></span>
* <span data-ttu-id="e1403-127">An input binding to an Azure Cosmos DB container can be used in the same function as an Azure Cosmos DB trigger, and can be used with or without an output binding as well.</span><span class="sxs-lookup"><span data-stu-id="e1403-127">An input binding to an Azure Cosmos DB container can be used in the same function as an Azure Cosmos DB trigger, and can be used with or without an output binding as well.</span></span> <span data-ttu-id="e1403-128">You could use this combination to apply up-to-date currency exchange information (pulled in with an input binding to an exchange container) to the change feed of new orders in your shopping cart service.</span><span class="sxs-lookup"><span data-stu-id="e1403-128">You could use this combination to apply up-to-date currency exchange information (pulled in with an input binding to an exchange container) to the change feed of new orders in your shopping cart service.</span></span> <span data-ttu-id="e1403-129">The updated shopping cart total, with the current currency conversion applied, can be written to a third container using an output binding.</span><span class="sxs-lookup"><span data-stu-id="e1403-129">The updated shopping cart total, with the current currency conversion applied, can be written to a third container using an output binding.</span></span>

## <a name="use-cases"></a><span data-ttu-id="e1403-130">Use cases</span><span class="sxs-lookup"><span data-stu-id="e1403-130">Use cases</span></span>

<span data-ttu-id="e1403-131">The following use cases demonstrate a few ways you can make the most of your Azure Cosmos DB data - by connecting your data to event-driven Azure Functions.</span><span class="sxs-lookup"><span data-stu-id="e1403-131">The following use cases demonstrate a few ways you can make the most of your Azure Cosmos DB data - by connecting your data to event-driven Azure Functions.</span></span>

### <a name="iot-use-case---azure-cosmos-db-trigger-and-output-binding"></a><span data-ttu-id="e1403-132">IoT use case - Azure Cosmos DB trigger and output binding</span><span class="sxs-lookup"><span data-stu-id="e1403-132">IoT use case - Azure Cosmos DB trigger and output binding</span></span>

<span data-ttu-id="e1403-133">In IoT implementations, you can invoke a function when the check engine light is displayed in a connected car.</span><span class="sxs-lookup"><span data-stu-id="e1403-133">In IoT implementations, you can invoke a function when the check engine light is displayed in a connected car.</span></span>

<span data-ttu-id="e1403-134">**Implementation:** Use an Azure Cosmos DB trigger and an output binding</span><span class="sxs-lookup"><span data-stu-id="e1403-134">**Implementation:** Use an Azure Cosmos DB trigger and an output binding</span></span>

1. <span data-ttu-id="e1403-135">An **Azure Cosmos DB trigger** is used to trigger events related to car alerts, such as the check engine light coming on in a connected car.</span><span class="sxs-lookup"><span data-stu-id="e1403-135">An **Azure Cosmos DB trigger** is used to trigger events related to car alerts, such as the check engine light coming on in a connected car.</span></span>
2. <span data-ttu-id="e1403-136">When the check engine light comes, the sensor data is sent to Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="e1403-136">When the check engine light comes, the sensor data is sent to Azure Cosmos DB.</span></span>
3. <span data-ttu-id="e1403-137">Azure Cosmos DB creates or updates new sensor data documents, then those changes are streamed to the Azure Cosmos DB trigger.</span><span class="sxs-lookup"><span data-stu-id="e1403-137">Azure Cosmos DB creates or updates new sensor data documents, then those changes are streamed to the Azure Cosmos DB trigger.</span></span>
4. <span data-ttu-id="e1403-138">The trigger is invoked on every data-change to the sensor data collection, as all changes are streamed via the change feed.</span><span class="sxs-lookup"><span data-stu-id="e1403-138">The trigger is invoked on every data-change to the sensor data collection, as all changes are streamed via the change feed.</span></span>
5. <span data-ttu-id="e1403-139">A threshold condition is used in the function to send the sensor data to the warranty department.</span><span class="sxs-lookup"><span data-stu-id="e1403-139">A threshold condition is used in the function to send the sensor data to the warranty department.</span></span>
6. <span data-ttu-id="e1403-140">If the temperature is also over a certain value, an alert is also sent to the owner.</span><span class="sxs-lookup"><span data-stu-id="e1403-140">If the temperature is also over a certain value, an alert is also sent to the owner.</span></span>
7. <span data-ttu-id="e1403-141">The **output binding** on the function updates the car record in another Azure Cosmos DB container to store information about the check engine event.</span><span class="sxs-lookup"><span data-stu-id="e1403-141">The **output binding** on the function updates the car record in another Azure Cosmos DB container to store information about the check engine event.</span></span>

<span data-ttu-id="e1403-142">The following image shows the code written in the Azure portal for this trigger.</span><span class="sxs-lookup"><span data-stu-id="e1403-142">The following image shows the code written in the Azure portal for this trigger.</span></span>

![Create an Azure Cosmos DB trigger in the Azure portal](./media/serverless-computing-database/cosmos-db-trigger-portal.png)

### <a name="financial-use-case---timer-trigger-and-input-binding"></a><span data-ttu-id="e1403-144">Financial use case - Timer trigger and input binding</span><span class="sxs-lookup"><span data-stu-id="e1403-144">Financial use case - Timer trigger and input binding</span></span>

<span data-ttu-id="e1403-145">In financial implementations, you can invoke a function when a bank account balance falls under a certain amount.</span><span class="sxs-lookup"><span data-stu-id="e1403-145">In financial implementations, you can invoke a function when a bank account balance falls under a certain amount.</span></span>

<span data-ttu-id="e1403-146">**Implementation:** A timer trigger with an Azure Cosmos DB input binding</span><span class="sxs-lookup"><span data-stu-id="e1403-146">**Implementation:** A timer trigger with an Azure Cosmos DB input binding</span></span>

1. <span data-ttu-id="e1403-147">Using a [timer trigger](../azure-functions/functions-bindings-timer.md), you can retrieve the bank account balance information stored in an Azure Cosmos DB container at timed intervals using an **input binding**.</span><span class="sxs-lookup"><span data-stu-id="e1403-147">Using a [timer trigger](../azure-functions/functions-bindings-timer.md), you can retrieve the bank account balance information stored in an Azure Cosmos DB container at timed intervals using an **input binding**.</span></span>
2. <span data-ttu-id="e1403-148">If the balance is below the low balance threshold set by the user, then follow up with an action from the Azure Function.</span><span class="sxs-lookup"><span data-stu-id="e1403-148">If the balance is below the low balance threshold set by the user, then follow up with an action from the Azure Function.</span></span>
3. <span data-ttu-id="e1403-149">The output binding can be a [SendGrid integration](../azure-functions/functions-bindings-sendgrid.md) that sends an email from a service account to the email addresses identified for each of the low balance accounts.</span><span class="sxs-lookup"><span data-stu-id="e1403-149">The output binding can be a [SendGrid integration](../azure-functions/functions-bindings-sendgrid.md) that sends an email from a service account to the email addresses identified for each of the low balance accounts.</span></span>

<span data-ttu-id="e1403-150">The following images show the code in the Azure portal for this scenario.</span><span class="sxs-lookup"><span data-stu-id="e1403-150">The following images show the code in the Azure portal for this scenario.</span></span>

![Index.js file for a Timer trigger for a financial scenario](./media/serverless-computing-database/cosmos-db-functions-financial-trigger.png)

![Run.csx file for a Timer trigger for a financial scenario](./media/serverless-computing-database/azure-function-cosmos-db-trigger-run.png)

### <a name="gaming-use-case---azure-cosmos-db-trigger-and-output-binding"></a><span data-ttu-id="e1403-153">Gaming use case - Azure Cosmos DB trigger and output binding</span><span class="sxs-lookup"><span data-stu-id="e1403-153">Gaming use case - Azure Cosmos DB trigger and output binding</span></span>

<span data-ttu-id="e1403-154">In gaming, when a new user is created you can search for other users who might know them by using the [Azure Cosmos DB Gremlin API](graph-introduction.md).</span><span class="sxs-lookup"><span data-stu-id="e1403-154">In gaming, when a new user is created you can search for other users who might know them by using the [Azure Cosmos DB Gremlin API](graph-introduction.md).</span></span> <span data-ttu-id="e1403-155">You can then write the results to an [Azure Cosmos DB SQL database] for easy retrieval.</span><span class="sxs-lookup"><span data-stu-id="e1403-155">You can then write the results to an [Azure Cosmos DB SQL database] for easy retrieval.</span></span>

<span data-ttu-id="e1403-156">**Implementation:** Use an Azure Cosmos DB trigger and an output binding</span><span class="sxs-lookup"><span data-stu-id="e1403-156">**Implementation:** Use an Azure Cosmos DB trigger and an output binding</span></span>

1. <span data-ttu-id="e1403-157">Using an Azure Cosmos DB [graph database](graph-introduction.md) to store all users, you can create a new function with an Azure Cosmos DB trigger.</span><span class="sxs-lookup"><span data-stu-id="e1403-157">Using an Azure Cosmos DB [graph database](graph-introduction.md) to store all users, you can create a new function with an Azure Cosmos DB trigger.</span></span> 
2. <span data-ttu-id="e1403-158">Whenever a new user is inserted, the function is invoked, and then the result is stored using an **output binding**.</span><span class="sxs-lookup"><span data-stu-id="e1403-158">Whenever a new user is inserted, the function is invoked, and then the result is stored using an **output binding**.</span></span>
3. <span data-ttu-id="e1403-159">The function queries the graph database to search for all the users that are directly related to the new user and returns that dataset to the function.</span><span class="sxs-lookup"><span data-stu-id="e1403-159">The function queries the graph database to search for all the users that are directly related to the new user and returns that dataset to the function.</span></span>
4. <span data-ttu-id="e1403-160">This data is then stored in an Azure Cosmos DB which can then be easily retrieved by any front-end application that shows the new user their connected friends.</span><span class="sxs-lookup"><span data-stu-id="e1403-160">This data is then stored in an Azure Cosmos DB which can then be easily retrieved by any front-end application that shows the new user their connected friends.</span></span>

### <a name="retail-use-case---multiple-functions"></a><span data-ttu-id="e1403-161">Retail use case - Multiple functions</span><span class="sxs-lookup"><span data-stu-id="e1403-161">Retail use case - Multiple functions</span></span>

<span data-ttu-id="e1403-162">In retail implementations, when a user adds an item to their basket you now have the flexibility to create and invoke functions for optional business pipeline components.</span><span class="sxs-lookup"><span data-stu-id="e1403-162">In retail implementations, when a user adds an item to their basket you now have the flexibility to create and invoke functions for optional business pipeline components.</span></span>

<span data-ttu-id="e1403-163">**Implementation:** Multiple Azure Cosmos DB triggers listening to one container</span><span class="sxs-lookup"><span data-stu-id="e1403-163">**Implementation:** Multiple Azure Cosmos DB triggers listening to one container</span></span>

1. <span data-ttu-id="e1403-164">You can create multiple Azure Functions by adding Azure Cosmos DB triggers to each - all of which listen to the same change feed of shopping cart data.</span><span class="sxs-lookup"><span data-stu-id="e1403-164">You can create multiple Azure Functions by adding Azure Cosmos DB triggers to each - all of which listen to the same change feed of shopping cart data.</span></span> <span data-ttu-id="e1403-165">Note that when multiple functions listen to the same change feed, a new lease collection is required for each function.</span><span class="sxs-lookup"><span data-stu-id="e1403-165">Note that when multiple functions listen to the same change feed, a new lease collection is required for each function.</span></span> <span data-ttu-id="e1403-166">For more information about lease collections, see [Understanding the Change Feed Processor library](change-feed.md#understand-cf).</span><span class="sxs-lookup"><span data-stu-id="e1403-166">For more information about lease collections, see [Understanding the Change Feed Processor library](change-feed.md#understand-cf).</span></span>
2. <span data-ttu-id="e1403-167">Whenever a new item is added to a users shopping cart, each function is independently invoked by the change feed from the shopping cart container.</span><span class="sxs-lookup"><span data-stu-id="e1403-167">Whenever a new item is added to a users shopping cart, each function is independently invoked by the change feed from the shopping cart container.</span></span>
    * <span data-ttu-id="e1403-168">One function may use the contents of the current basket to change the display of other items the user might be interested in.</span><span class="sxs-lookup"><span data-stu-id="e1403-168">One function may use the contents of the current basket to change the display of other items the user might be interested in.</span></span>
    * <span data-ttu-id="e1403-169">Another function may update inventory totals.</span><span class="sxs-lookup"><span data-stu-id="e1403-169">Another function may update inventory totals.</span></span>
    * <span data-ttu-id="e1403-170">Another function may send customer information for certain products to the marketing department, who sends them a promotional mailer.</span><span class="sxs-lookup"><span data-stu-id="e1403-170">Another function may send customer information for certain products to the marketing department, who sends them a promotional mailer.</span></span> 

    <span data-ttu-id="e1403-171">Any department can create an Azure Cosmos DB trigger by listening to the change feed, and be sure they won't delay critical order processing events in the process.</span><span class="sxs-lookup"><span data-stu-id="e1403-171">Any department can create an Azure Cosmos DB trigger by listening to the change feed, and be sure they won't delay critical order processing events in the process.</span></span>

<span data-ttu-id="e1403-172">In all of these use cases, because the function has decoupled the app itself, you don’t need to spin up new app instances all the time.</span><span class="sxs-lookup"><span data-stu-id="e1403-172">In all of these use cases, because the function has decoupled the app itself, you don’t need to spin up new app instances all the time.</span></span> <span data-ttu-id="e1403-173">Instead, Azure Functions spins up individual functions to complete discrete processes as needed.</span><span class="sxs-lookup"><span data-stu-id="e1403-173">Instead, Azure Functions spins up individual functions to complete discrete processes as needed.</span></span>

## <a name="tooling"></a><span data-ttu-id="e1403-174">Tooling</span><span class="sxs-lookup"><span data-stu-id="e1403-174">Tooling</span></span>

<span data-ttu-id="e1403-175">Native integration between Azure Cosmos DB and Azure Functions is available in the Azure portal and in Visual Studio 2017.</span><span class="sxs-lookup"><span data-stu-id="e1403-175">Native integration between Azure Cosmos DB and Azure Functions is available in the Azure portal and in Visual Studio 2017.</span></span>
* <span data-ttu-id="e1403-176">In the Azure Functions portal, you can create an Azure Cosmos DB trigger.</span><span class="sxs-lookup"><span data-stu-id="e1403-176">In the Azure Functions portal, you can create an Azure Cosmos DB trigger.</span></span> <span data-ttu-id="e1403-177">For quickstart instructions, see [Create an Azure Cosmos DB trigger in the Azure portal](https://aka.ms/cosmosdbtriggerportalfunc) ![Create an Azure Cosmos DB trigger in the Azure Functions portal](./media/serverless-computing-database/azure-function-cosmos-db-trigger.png)</span><span class="sxs-lookup"><span data-stu-id="e1403-177">For quickstart instructions, see [Create an Azure Cosmos DB trigger in the Azure portal](https://aka.ms/cosmosdbtriggerportalfunc) ![Create an Azure Cosmos DB trigger in the Azure Functions portal](./media/serverless-computing-database/azure-function-cosmos-db-trigger.png)</span></span> 
* <span data-ttu-id="e1403-178">In the Azure Functions portal, you can also add Azure Cosmos DB input bindings and output bindings to other types of triggers.</span><span class="sxs-lookup"><span data-stu-id="e1403-178">In the Azure Functions portal, you can also add Azure Cosmos DB input bindings and output bindings to other types of triggers.</span></span> <span data-ttu-id="e1403-179">For quickstart instructions, see [Store unstructured data using Azure Functions and Cosmos DB](../azure-functions/functions-integrate-store-unstructured-data-cosmosdb.md).</span><span class="sxs-lookup"><span data-stu-id="e1403-179">For quickstart instructions, see [Store unstructured data using Azure Functions and Cosmos DB](../azure-functions/functions-integrate-store-unstructured-data-cosmosdb.md).</span></span>
    <span data-ttu-id="e1403-180">![Create an Azure Cosmos DB trigger in the Azure Functions portal](./media/serverless-computing-database/function-portal-input-binding.png)</span><span class="sxs-lookup"><span data-stu-id="e1403-180">![Create an Azure Cosmos DB trigger in the Azure Functions portal](./media/serverless-computing-database/function-portal-input-binding.png)</span></span>
*   <span data-ttu-id="e1403-181">In the Azure Cosmos DB portal, you can add an Azure Cosmos DB trigger to an existing Azure Function app in the same resource group.</span><span class="sxs-lookup"><span data-stu-id="e1403-181">In the Azure Cosmos DB portal, you can add an Azure Cosmos DB trigger to an existing Azure Function app in the same resource group.</span></span>
    <span data-ttu-id="e1403-182">![Create an Azure Cosmos DB trigger in the Azure Functions portal](./media/serverless-computing-database/cosmos-db-portal.png)</span><span class="sxs-lookup"><span data-stu-id="e1403-182">![Create an Azure Cosmos DB trigger in the Azure Functions portal](./media/serverless-computing-database/cosmos-db-portal.png)</span></span>
* <span data-ttu-id="e1403-183">In Visual Studio 2017, you can create an Azure Cosmos DB trigger using the integrated template:</span><span class="sxs-lookup"><span data-stu-id="e1403-183">In Visual Studio 2017, you can create an Azure Cosmos DB trigger using the integrated template:</span></span>

    >[!VIDEO https://www.youtube.com/embed/iprndNsUeeg]


## <a name="why-choose-azure-functions-integration-for-serverless-computing"></a><span data-ttu-id="e1403-184">Why choose Azure Functions integration for serverless computing?</span><span class="sxs-lookup"><span data-stu-id="e1403-184">Why choose Azure Functions integration for serverless computing?</span></span>

<span data-ttu-id="e1403-185">Azure Functions provides the ability to create scalable units of work, or concise pieces of logic that can be run on demand, without provisioning or managing infrastructure.</span><span class="sxs-lookup"><span data-stu-id="e1403-185">Azure Functions provides the ability to create scalable units of work, or concise pieces of logic that can be run on demand, without provisioning or managing infrastructure.</span></span> <span data-ttu-id="e1403-186">By using Azure Functions, you don't have to create a full-blown app to respond to changes in your Azure Cosmos DB database, you can create small reusable functions for specific tasks.</span><span class="sxs-lookup"><span data-stu-id="e1403-186">By using Azure Functions, you don't have to create a full-blown app to respond to changes in your Azure Cosmos DB database, you can create small reusable functions for specific tasks.</span></span> <span data-ttu-id="e1403-187">In addition, you can also use Azure Cosmos DB data as the input or output to an Azure Function in response to event such as an HTTP requests or a timed trigger.</span><span class="sxs-lookup"><span data-stu-id="e1403-187">In addition, you can also use Azure Cosmos DB data as the input or output to an Azure Function in response to event such as an HTTP requests or a timed trigger.</span></span>

<span data-ttu-id="e1403-188">Azure Cosmos DB is the recommended database for your serverless computing architecture for the following reasons:</span><span class="sxs-lookup"><span data-stu-id="e1403-188">Azure Cosmos DB is the recommended database for your serverless computing architecture for the following reasons:</span></span>

* <span data-ttu-id="e1403-189">**Instant access to all your data**: You have granular access to every value stored because Azure Cosmos DB [automatically indexes](indexing-policies.md) all data by default, and makes those indexes immediately available.</span><span class="sxs-lookup"><span data-stu-id="e1403-189">**Instant access to all your data**: You have granular access to every value stored because Azure Cosmos DB [automatically indexes](indexing-policies.md) all data by default, and makes those indexes immediately available.</span></span> <span data-ttu-id="e1403-190">This means you are able to constantly query, update, and add new items to your database and have instant access via Azure Functions.</span><span class="sxs-lookup"><span data-stu-id="e1403-190">This means you are able to constantly query, update, and add new items to your database and have instant access via Azure Functions.</span></span>

* <span data-ttu-id="e1403-191">**Schemaless**.</span><span class="sxs-lookup"><span data-stu-id="e1403-191">**Schemaless**.</span></span> <span data-ttu-id="e1403-192">Azure Cosmos DB is schemaless - so it's uniquely able to handle any data output from an Azure Function.</span><span class="sxs-lookup"><span data-stu-id="e1403-192">Azure Cosmos DB is schemaless - so it's uniquely able to handle any data output from an Azure Function.</span></span> <span data-ttu-id="e1403-193">This "handle anything" approach makes it straightforward to create a variety of Functions that all output to Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="e1403-193">This "handle anything" approach makes it straightforward to create a variety of Functions that all output to Azure Cosmos DB.</span></span>

* <span data-ttu-id="e1403-194">**Scalable throughput**.</span><span class="sxs-lookup"><span data-stu-id="e1403-194">**Scalable throughput**.</span></span> <span data-ttu-id="e1403-195">Throughput can be scaled up and down instantly in Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="e1403-195">Throughput can be scaled up and down instantly in Azure Cosmos DB.</span></span> <span data-ttu-id="e1403-196">If you have hundreds or thousands of Functions querying and writing to the same container, you can scale up your [RU/s](request-units.md) to handle the load.</span><span class="sxs-lookup"><span data-stu-id="e1403-196">If you have hundreds or thousands of Functions querying and writing to the same container, you can scale up your [RU/s](request-units.md) to handle the load.</span></span> <span data-ttu-id="e1403-197">All functions can work in parallel using your allocated RU/s and your data is guaranteed to be [consistent](consistency-levels.md).</span><span class="sxs-lookup"><span data-stu-id="e1403-197">All functions can work in parallel using your allocated RU/s and your data is guaranteed to be [consistent](consistency-levels.md).</span></span>

* <span data-ttu-id="e1403-198">**Global replication**.</span><span class="sxs-lookup"><span data-stu-id="e1403-198">**Global replication**.</span></span> <span data-ttu-id="e1403-199">You can replicate Azure Cosmos DB data [around the globe](distribute-data-globally.md) to reduce latency, geo-locating your data closest to where your users are.</span><span class="sxs-lookup"><span data-stu-id="e1403-199">You can replicate Azure Cosmos DB data [around the globe](distribute-data-globally.md) to reduce latency, geo-locating your data closest to where your users are.</span></span> <span data-ttu-id="e1403-200">As with all Azure Cosmos DB queries, data from event-driven triggers is read data from the Azure Cosmos DB closest to the user.</span><span class="sxs-lookup"><span data-stu-id="e1403-200">As with all Azure Cosmos DB queries, data from event-driven triggers is read data from the Azure Cosmos DB closest to the user.</span></span>

<span data-ttu-id="e1403-201">If you're looking to integrate with Azure Functions to store data and don't need deep indexing or if you need to store attachments and media files, the [Azure Blob Storage trigger](../azure-functions/functions-bindings-storage-blob.md) may be a better option.</span><span class="sxs-lookup"><span data-stu-id="e1403-201">If you're looking to integrate with Azure Functions to store data and don't need deep indexing or if you need to store attachments and media files, the [Azure Blob Storage trigger](../azure-functions/functions-bindings-storage-blob.md) may be a better option.</span></span>

<span data-ttu-id="e1403-202">Benefits of Azure Functions:</span><span class="sxs-lookup"><span data-stu-id="e1403-202">Benefits of Azure Functions:</span></span> 

* <span data-ttu-id="e1403-203">**Event-driven**.</span><span class="sxs-lookup"><span data-stu-id="e1403-203">**Event-driven**.</span></span> <span data-ttu-id="e1403-204">Azure Functions are event-driven and can listen to a change feed from Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="e1403-204">Azure Functions are event-driven and can listen to a change feed from Azure Cosmos DB.</span></span> <span data-ttu-id="e1403-205">This means you don't need to create listening logic, you just keep an eye out for the changes you're listening for.</span><span class="sxs-lookup"><span data-stu-id="e1403-205">This means you don't need to create listening logic, you just keep an eye out for the changes you're listening for.</span></span> 

* <span data-ttu-id="e1403-206">**No limits**.</span><span class="sxs-lookup"><span data-stu-id="e1403-206">**No limits**.</span></span> <span data-ttu-id="e1403-207">Functions execute in parallel and the service spins up as many as you need.</span><span class="sxs-lookup"><span data-stu-id="e1403-207">Functions execute in parallel and the service spins up as many as you need.</span></span> <span data-ttu-id="e1403-208">You set the parameters.</span><span class="sxs-lookup"><span data-stu-id="e1403-208">You set the parameters.</span></span>

* <span data-ttu-id="e1403-209">**Good for quick tasks**.</span><span class="sxs-lookup"><span data-stu-id="e1403-209">**Good for quick tasks**.</span></span> <span data-ttu-id="e1403-210">The service spins up new instances of functions whenever an event fires and closes them as soon as the function completes.</span><span class="sxs-lookup"><span data-stu-id="e1403-210">The service spins up new instances of functions whenever an event fires and closes them as soon as the function completes.</span></span> <span data-ttu-id="e1403-211">You only pay for the time your functions are running.</span><span class="sxs-lookup"><span data-stu-id="e1403-211">You only pay for the time your functions are running.</span></span>

<span data-ttu-id="e1403-212">If you're not sure whether Flow, Logic Apps, Azure Functions, or WebJobs are best for your implementation, see [Choose between Flow, Logic Apps, Functions, and WebJobs](../azure-functions/functions-compare-logic-apps-ms-flow-webjobs.md).</span><span class="sxs-lookup"><span data-stu-id="e1403-212">If you're not sure whether Flow, Logic Apps, Azure Functions, or WebJobs are best for your implementation, see [Choose between Flow, Logic Apps, Functions, and WebJobs](../azure-functions/functions-compare-logic-apps-ms-flow-webjobs.md).</span></span>

## <a name="next-steps"></a><span data-ttu-id="e1403-213">Next steps</span><span class="sxs-lookup"><span data-stu-id="e1403-213">Next steps</span></span>

<span data-ttu-id="e1403-214">Now let's connect Azure Cosmos DB and Azure Functions for real:</span><span class="sxs-lookup"><span data-stu-id="e1403-214">Now let's connect Azure Cosmos DB and Azure Functions for real:</span></span> 

* [<span data-ttu-id="e1403-215">Create an Azure Cosmos DB trigger in the Azure portal</span><span class="sxs-lookup"><span data-stu-id="e1403-215">Create an Azure Cosmos DB trigger in the Azure portal</span></span>](https://aka.ms/cosmosdbtriggerportalfunc)
* [<span data-ttu-id="e1403-216">Create an Azure Functions HTTP trigger with an Azure Cosmos DB input binding</span><span class="sxs-lookup"><span data-stu-id="e1403-216">Create an Azure Functions HTTP trigger with an Azure Cosmos DB input binding</span></span>](https://aka.ms/cosmosdbinputbind)
* [<span data-ttu-id="e1403-217">Store unstructured data using Azure Functions and Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="e1403-217">Store unstructured data using Azure Functions and Cosmos DB</span></span>](../azure-functions/functions-integrate-store-unstructured-data-cosmosdb.md)
* [<span data-ttu-id="e1403-218">Azure Cosmos DB bindings and triggers</span><span class="sxs-lookup"><span data-stu-id="e1403-218">Azure Cosmos DB bindings and triggers</span></span>](../azure-functions/functions-bindings-cosmosdb.md)


 



