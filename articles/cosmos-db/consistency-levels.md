---
title: Consistency levels in Azure Cosmos DB | Microsoft Docs
description: Azure Cosmos DB has five consistency levels to help balance eventual consistency, availability, and latency trade-offs.
keywords: eventual consistency, azure cosmos db, azure, Microsoft azure
services: cosmos-db
author: aliuy
manager: kfile
ms.service: cosmos-db
ms.devlang: na
ms.topic: conceptual
ms.date: 03/27/2018
ms.author: andrl
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: 8d95790dc09f6d26c6ae749ed0cd386053c5cb35
ms.sourcegitcommit: d1451406a010fd3aa854dc8e5b77dc5537d8050e
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 09/13/2018
ms.locfileid: "44870751"
---
# <a name="tunable-data-consistency-levels-in-azure-cosmos-db"></a><span data-ttu-id="e7d47-104">Tunable data consistency levels in Azure Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="e7d47-104">Tunable data consistency levels in Azure Cosmos DB</span></span>
<span data-ttu-id="e7d47-105">Azure Cosmos DB is designed from the ground up with global distribution in mind for every data model.</span><span class="sxs-lookup"><span data-stu-id="e7d47-105">Azure Cosmos DB is designed from the ground up with global distribution in mind for every data model.</span></span> <span data-ttu-id="e7d47-106">It is designed to offer predictable low latency guarantees and multiple well-defined relaxed consistency models.</span><span class="sxs-lookup"><span data-stu-id="e7d47-106">It is designed to offer predictable low latency guarantees and multiple well-defined relaxed consistency models.</span></span> <span data-ttu-id="e7d47-107">Currently, Azure Cosmos DB provides five consistency levels: strong, bounded-staleness, session, consistent prefix, and eventual.</span><span class="sxs-lookup"><span data-stu-id="e7d47-107">Currently, Azure Cosmos DB provides five consistency levels: strong, bounded-staleness, session, consistent prefix, and eventual.</span></span> <span data-ttu-id="e7d47-108">Bounded-staleness, session, consistent prefix, and eventual are referred to as "relaxed consistency models" as they provide less consistency than strong, which is the most highly consistent model available.</span><span class="sxs-lookup"><span data-stu-id="e7d47-108">Bounded-staleness, session, consistent prefix, and eventual are referred to as "relaxed consistency models" as they provide less consistency than strong, which is the most highly consistent model available.</span></span> 

<span data-ttu-id="e7d47-109">Besides the **strong** and **eventual consistency** models commonly offered by distributed databases, Azure Cosmos DB offers three more carefully codified and operationalized consistency models: **bounded staleness**, **session**, and **consistent prefix**.</span><span class="sxs-lookup"><span data-stu-id="e7d47-109">Besides the **strong** and **eventual consistency** models commonly offered by distributed databases, Azure Cosmos DB offers three more carefully codified and operationalized consistency models: **bounded staleness**, **session**, and **consistent prefix**.</span></span> <span data-ttu-id="e7d47-110">The usefulness of each of these consistency levels has been validated against real world use cases.</span><span class="sxs-lookup"><span data-stu-id="e7d47-110">The usefulness of each of these consistency levels has been validated against real world use cases.</span></span> <span data-ttu-id="e7d47-111">Collectively these five consistency levels enable you to make well-reasoned trade-offs between consistency, availability, and latency.</span><span class="sxs-lookup"><span data-stu-id="e7d47-111">Collectively these five consistency levels enable you to make well-reasoned trade-offs between consistency, availability, and latency.</span></span> 

<span data-ttu-id="e7d47-112">In the following video, Azure Cosmos DB Program Manager Andrew Liu demonstrates the turnkey global distribution features.</span><span class="sxs-lookup"><span data-stu-id="e7d47-112">In the following video, Azure Cosmos DB Program Manager Andrew Liu demonstrates the turnkey global distribution features.</span></span>

>[!VIDEO https://www.youtube.com/embed/-4FsGysVD14]

## <a name="distributed-databases-and-consistency"></a><span data-ttu-id="e7d47-113">Distributed databases and consistency</span><span class="sxs-lookup"><span data-stu-id="e7d47-113">Distributed databases and consistency</span></span>
<span data-ttu-id="e7d47-114">Commercial distributed databases fall into two categories: databases that do not offer well-defined provable consistency choices at all, and databases that offer two extreme programmability choices (strong vs. eventual consistency).</span><span class="sxs-lookup"><span data-stu-id="e7d47-114">Commercial distributed databases fall into two categories: databases that do not offer well-defined provable consistency choices at all, and databases that offer two extreme programmability choices (strong vs. eventual consistency).</span></span> 

<span data-ttu-id="e7d47-115">The former burdens application developers with minutia of their replication protocols and expects them to make difficult tradeoffs between consistency, availability, latency, and throughput.</span><span class="sxs-lookup"><span data-stu-id="e7d47-115">The former burdens application developers with minutia of their replication protocols and expects them to make difficult tradeoffs between consistency, availability, latency, and throughput.</span></span> <span data-ttu-id="e7d47-116">The latter puts a pressure to choose one of the two extremes.</span><span class="sxs-lookup"><span data-stu-id="e7d47-116">The latter puts a pressure to choose one of the two extremes.</span></span> <span data-ttu-id="e7d47-117">Despite the abundance of research and proposals for more than 50 consistency models, the distributed database community has not been able to commercialize consistency levels beyond strong and eventual consistency.</span><span class="sxs-lookup"><span data-stu-id="e7d47-117">Despite the abundance of research and proposals for more than 50 consistency models, the distributed database community has not been able to commercialize consistency levels beyond strong and eventual consistency.</span></span> <span data-ttu-id="e7d47-118">Cosmos DB allows developers to choose between five well-defined consistency models along the consistency spectrum – strong, bounded staleness, [session](http://dl.acm.org/citation.cfm?id=383631), consistent prefix, and eventual.</span><span class="sxs-lookup"><span data-stu-id="e7d47-118">Cosmos DB allows developers to choose between five well-defined consistency models along the consistency spectrum – strong, bounded staleness, [session](http://dl.acm.org/citation.cfm?id=383631), consistent prefix, and eventual.</span></span> 

![Azure Cosmos DB offers multiple, well defined (relaxed) consistency models to choose from](./media/consistency-levels/five-consistency-levels.png)

<span data-ttu-id="e7d47-120">The following table illustrates the specific guarantees each consistency level provides.</span><span class="sxs-lookup"><span data-stu-id="e7d47-120">The following table illustrates the specific guarantees each consistency level provides.</span></span>
 
<span data-ttu-id="e7d47-121">**Consistency Levels and guarantees**</span><span class="sxs-lookup"><span data-stu-id="e7d47-121">**Consistency Levels and guarantees**</span></span>

| <span data-ttu-id="e7d47-122">Consistency Level</span><span class="sxs-lookup"><span data-stu-id="e7d47-122">Consistency Level</span></span> | <span data-ttu-id="e7d47-123">Guarantees</span><span class="sxs-lookup"><span data-stu-id="e7d47-123">Guarantees</span></span> |
| --- | --- |
| <span data-ttu-id="e7d47-124">Strong</span><span class="sxs-lookup"><span data-stu-id="e7d47-124">Strong</span></span> | <span data-ttu-id="e7d47-125">Linearizability.</span><span class="sxs-lookup"><span data-stu-id="e7d47-125">Linearizability.</span></span> <span data-ttu-id="e7d47-126">Reads are guaranteed to return the most recent version of an item.</span><span class="sxs-lookup"><span data-stu-id="e7d47-126">Reads are guaranteed to return the most recent version of an item.</span></span>|
| <span data-ttu-id="e7d47-127">Bounded Staleness</span><span class="sxs-lookup"><span data-stu-id="e7d47-127">Bounded Staleness</span></span> | <span data-ttu-id="e7d47-128">Consistent Prefix.</span><span class="sxs-lookup"><span data-stu-id="e7d47-128">Consistent Prefix.</span></span> <span data-ttu-id="e7d47-129">Reads lag behind writes by at most k prefixes or t interval</span><span class="sxs-lookup"><span data-stu-id="e7d47-129">Reads lag behind writes by at most k prefixes or t interval</span></span> |
| <span data-ttu-id="e7d47-130">Session</span><span class="sxs-lookup"><span data-stu-id="e7d47-130">Session</span></span>   | <span data-ttu-id="e7d47-131">Consistent Prefix.</span><span class="sxs-lookup"><span data-stu-id="e7d47-131">Consistent Prefix.</span></span> <span data-ttu-id="e7d47-132">Monotonic reads, monotonic writes, read-your-writes, write-follows-reads</span><span class="sxs-lookup"><span data-stu-id="e7d47-132">Monotonic reads, monotonic writes, read-your-writes, write-follows-reads</span></span> |
| <span data-ttu-id="e7d47-133">Consistent Prefix</span><span class="sxs-lookup"><span data-stu-id="e7d47-133">Consistent Prefix</span></span> | <span data-ttu-id="e7d47-134">Updates returned are some prefix of all the updates, with no gaps</span><span class="sxs-lookup"><span data-stu-id="e7d47-134">Updates returned are some prefix of all the updates, with no gaps</span></span> |
| <span data-ttu-id="e7d47-135">Eventual</span><span class="sxs-lookup"><span data-stu-id="e7d47-135">Eventual</span></span>  | <span data-ttu-id="e7d47-136">Out of order reads</span><span class="sxs-lookup"><span data-stu-id="e7d47-136">Out of order reads</span></span> |

<span data-ttu-id="e7d47-137">You can configure the default consistency level on your Cosmos DB account (and later override the consistency on a specific read request).</span><span class="sxs-lookup"><span data-stu-id="e7d47-137">You can configure the default consistency level on your Cosmos DB account (and later override the consistency on a specific read request).</span></span> <span data-ttu-id="e7d47-138">Internally, the default consistency level applies to data within the partition sets, which may span regions.</span><span class="sxs-lookup"><span data-stu-id="e7d47-138">Internally, the default consistency level applies to data within the partition sets, which may span regions.</span></span> <span data-ttu-id="e7d47-139">About 73% of Azure Cosmos DB tenants use session consistency and 20% prefer bounded staleness.</span><span class="sxs-lookup"><span data-stu-id="e7d47-139">About 73% of Azure Cosmos DB tenants use session consistency and 20% prefer bounded staleness.</span></span> <span data-ttu-id="e7d47-140">Approximately 3% of Azure Cosmos DB customers experiment with various consistency levels initially before settling on a specific consistency choice for their application.</span><span class="sxs-lookup"><span data-stu-id="e7d47-140">Approximately 3% of Azure Cosmos DB customers experiment with various consistency levels initially before settling on a specific consistency choice for their application.</span></span> <span data-ttu-id="e7d47-141">Only 2% of Azure Cosmos DB tenants override consistency levels on a per request basis.</span><span class="sxs-lookup"><span data-stu-id="e7d47-141">Only 2% of Azure Cosmos DB tenants override consistency levels on a per request basis.</span></span> 

<span data-ttu-id="e7d47-142">In Cosmos DB, reads served at session, consistent prefix and eventual consistency are twice as cheap as reads with strong or bounded staleness consistency.</span><span class="sxs-lookup"><span data-stu-id="e7d47-142">In Cosmos DB, reads served at session, consistent prefix and eventual consistency are twice as cheap as reads with strong or bounded staleness consistency.</span></span> <span data-ttu-id="e7d47-143">Cosmos DB has industry leading comprehensive SLAs including consistency guarantees along with availability, throughput, and latency.</span><span class="sxs-lookup"><span data-stu-id="e7d47-143">Cosmos DB has industry leading comprehensive SLAs including consistency guarantees along with availability, throughput, and latency.</span></span> <span data-ttu-id="e7d47-144">Azure Cosmos DB employs a [linearizability checker](http://dl.acm.org/citation.cfm?id=1806634), which continuously operates over the service telemetry and openly reports any consistency violations to you.</span><span class="sxs-lookup"><span data-stu-id="e7d47-144">Azure Cosmos DB employs a [linearizability checker](http://dl.acm.org/citation.cfm?id=1806634), which continuously operates over the service telemetry and openly reports any consistency violations to you.</span></span> <span data-ttu-id="e7d47-145">For bounded staleness, Azure Cosmos DB monitors and reports any violations to k and t bounds.</span><span class="sxs-lookup"><span data-stu-id="e7d47-145">For bounded staleness, Azure Cosmos DB monitors and reports any violations to k and t bounds.</span></span> <span data-ttu-id="e7d47-146">For all five relaxed consistency levels, Azure Cosmos DB also reports the [probabilistically bounded staleness metric](http://dl.acm.org/citation.cfm?id=2212359) directly to you.</span><span class="sxs-lookup"><span data-stu-id="e7d47-146">For all five relaxed consistency levels, Azure Cosmos DB also reports the [probabilistically bounded staleness metric](http://dl.acm.org/citation.cfm?id=2212359) directly to you.</span></span>  

## <a name="service-level-agreements"></a><span data-ttu-id="e7d47-147">Service level agreements</span><span class="sxs-lookup"><span data-stu-id="e7d47-147">Service level agreements</span></span>

<span data-ttu-id="e7d47-148">Azure Cosmos DB offers comprehensive 99.99% [SLAs](https://azure.microsoft.com/support/legal/sla/cosmos-db/) which guarantee throughput, consistency, availability, and latency for Azure Cosmos DB database accounts scoped to a single Azure region configured with any of the five consistency levels, or database accounts spanning multiple Azure regions, configured with any of the four relaxed consistency levels.</span><span class="sxs-lookup"><span data-stu-id="e7d47-148">Azure Cosmos DB offers comprehensive 99.99% [SLAs](https://azure.microsoft.com/support/legal/sla/cosmos-db/) which guarantee throughput, consistency, availability, and latency for Azure Cosmos DB database accounts scoped to a single Azure region configured with any of the five consistency levels, or database accounts spanning multiple Azure regions, configured with any of the four relaxed consistency levels.</span></span> <span data-ttu-id="e7d47-149">Furthermore, independent of the choice of a consistency level, Azure Cosmos DB offers a 99.999% SLA for read availability for database accounts spanning two or more Azure regions.</span><span class="sxs-lookup"><span data-stu-id="e7d47-149">Furthermore, independent of the choice of a consistency level, Azure Cosmos DB offers a 99.999% SLA for read availability for database accounts spanning two or more Azure regions.</span></span>

## <a name="scope-of-consistency"></a><span data-ttu-id="e7d47-150">Scope of consistency</span><span class="sxs-lookup"><span data-stu-id="e7d47-150">Scope of consistency</span></span>
<span data-ttu-id="e7d47-151">The granularity of consistency is scoped to a single user request.</span><span class="sxs-lookup"><span data-stu-id="e7d47-151">The granularity of consistency is scoped to a single user request.</span></span> <span data-ttu-id="e7d47-152">A write request may correspond to an insert, replace, upsert, or delete transaction.</span><span class="sxs-lookup"><span data-stu-id="e7d47-152">A write request may correspond to an insert, replace, upsert, or delete transaction.</span></span> <span data-ttu-id="e7d47-153">As with writes, a read/query transaction is also scoped to a single user request.</span><span class="sxs-lookup"><span data-stu-id="e7d47-153">As with writes, a read/query transaction is also scoped to a single user request.</span></span> <span data-ttu-id="e7d47-154">The user may be required to paginate over a large result-set, spanning multiple partitions, but each read transaction is scoped to a single page and served from within a single partition.</span><span class="sxs-lookup"><span data-stu-id="e7d47-154">The user may be required to paginate over a large result-set, spanning multiple partitions, but each read transaction is scoped to a single page and served from within a single partition.</span></span>

## <a name="consistency-levels"></a><span data-ttu-id="e7d47-155">Consistency levels</span><span class="sxs-lookup"><span data-stu-id="e7d47-155">Consistency levels</span></span>
<span data-ttu-id="e7d47-156">You can configure a default consistency level on your database account that applies to all containers (and databases) under your Cosmos DB account.</span><span class="sxs-lookup"><span data-stu-id="e7d47-156">You can configure a default consistency level on your database account that applies to all containers (and databases) under your Cosmos DB account.</span></span> <span data-ttu-id="e7d47-157">By default, all reads and queries issued against the user-defined resources use the default consistency level specified on the database account.</span><span class="sxs-lookup"><span data-stu-id="e7d47-157">By default, all reads and queries issued against the user-defined resources use the default consistency level specified on the database account.</span></span> <span data-ttu-id="e7d47-158">You can relax the consistency level of a specific read/query request using in each of the supported APIs.</span><span class="sxs-lookup"><span data-stu-id="e7d47-158">You can relax the consistency level of a specific read/query request using in each of the supported APIs.</span></span> <span data-ttu-id="e7d47-159">There are five types of consistency levels supported by the Azure Cosmos DB replication protocol that provide a clear trade-off between specific consistency guarantees and performance, as described in this section.</span><span class="sxs-lookup"><span data-stu-id="e7d47-159">There are five types of consistency levels supported by the Azure Cosmos DB replication protocol that provide a clear trade-off between specific consistency guarantees and performance, as described in this section.</span></span>

<a id="strong"></a>
<span data-ttu-id="e7d47-160">**Strong**:</span><span class="sxs-lookup"><span data-stu-id="e7d47-160">**Strong**:</span></span> 

* <span data-ttu-id="e7d47-161">Strong consistency offers a [linearizability](https://aphyr.com/posts/313-strong-consistency-models) guarantee with the reads guaranteed to return the most recent version of an item.</span><span class="sxs-lookup"><span data-stu-id="e7d47-161">Strong consistency offers a [linearizability](https://aphyr.com/posts/313-strong-consistency-models) guarantee with the reads guaranteed to return the most recent version of an item.</span></span> 
* <span data-ttu-id="e7d47-162">Strong consistency guarantees that a write is only visible after it is committed durably by the majority quorum of replicas.</span><span class="sxs-lookup"><span data-stu-id="e7d47-162">Strong consistency guarantees that a write is only visible after it is committed durably by the majority quorum of replicas.</span></span> <span data-ttu-id="e7d47-163">A write is either synchronously committed durably by both the primary and the quorum of secondaries, or it is aborted.</span><span class="sxs-lookup"><span data-stu-id="e7d47-163">A write is either synchronously committed durably by both the primary and the quorum of secondaries, or it is aborted.</span></span> <span data-ttu-id="e7d47-164">A read is always acknowledged by the majority read quorum, a client can never see an uncommitted or partial write and is always guaranteed to read the latest acknowledged write.</span><span class="sxs-lookup"><span data-stu-id="e7d47-164">A read is always acknowledged by the majority read quorum, a client can never see an uncommitted or partial write and is always guaranteed to read the latest acknowledged write.</span></span> 
* <span data-ttu-id="e7d47-165">Azure Cosmos DB accounts that are configured to use strong consistency cannot associate more than one Azure region with their Azure Cosmos DB account.</span><span class="sxs-lookup"><span data-stu-id="e7d47-165">Azure Cosmos DB accounts that are configured to use strong consistency cannot associate more than one Azure region with their Azure Cosmos DB account.</span></span>  
* <span data-ttu-id="e7d47-166">The cost of a read operation (in terms of [request units](request-units.md) consumed) with strong consistency is higher than session and eventual, but the same as bounded staleness.</span><span class="sxs-lookup"><span data-stu-id="e7d47-166">The cost of a read operation (in terms of [request units](request-units.md) consumed) with strong consistency is higher than session and eventual, but the same as bounded staleness.</span></span>

<a id="bounded-staleness"></a>
<span data-ttu-id="e7d47-167">**Bounded staleness**:</span><span class="sxs-lookup"><span data-stu-id="e7d47-167">**Bounded staleness**:</span></span> 

* <span data-ttu-id="e7d47-168">Bounded staleness consistency guarantees that the reads may lag behind writes by at most *K* versions or prefixes of an item or *t* time-interval.</span><span class="sxs-lookup"><span data-stu-id="e7d47-168">Bounded staleness consistency guarantees that the reads may lag behind writes by at most *K* versions or prefixes of an item or *t* time-interval.</span></span> 
* <span data-ttu-id="e7d47-169">Therefore, when choosing bounded staleness, the "staleness" can be configured in two ways: number of versions *K* of the item by which the reads lag behind the writes, and the time interval *t*</span><span class="sxs-lookup"><span data-stu-id="e7d47-169">Therefore, when choosing bounded staleness, the "staleness" can be configured in two ways: number of versions *K* of the item by which the reads lag behind the writes, and the time interval *t*</span></span> 
* <span data-ttu-id="e7d47-170">Bounded staleness offers total global order except within the "staleness window."</span><span class="sxs-lookup"><span data-stu-id="e7d47-170">Bounded staleness offers total global order except within the "staleness window."</span></span> <span data-ttu-id="e7d47-171">The monotonic read guarantees exist within a region both inside and outside the "staleness window."</span><span class="sxs-lookup"><span data-stu-id="e7d47-171">The monotonic read guarantees exist within a region both inside and outside the "staleness window."</span></span> 
* <span data-ttu-id="e7d47-172">Bounded staleness provides a stronger consistency guarantee than session, consistent-prefix, or eventual consistency.</span><span class="sxs-lookup"><span data-stu-id="e7d47-172">Bounded staleness provides a stronger consistency guarantee than session, consistent-prefix, or eventual consistency.</span></span> <span data-ttu-id="e7d47-173">For globally distributed applications, we recommend you use bounded staleness for scenarios where you would like to have strong consistency but also want 99.99% availability and low latency.</span><span class="sxs-lookup"><span data-stu-id="e7d47-173">For globally distributed applications, we recommend you use bounded staleness for scenarios where you would like to have strong consistency but also want 99.99% availability and low latency.</span></span>   
* <span data-ttu-id="e7d47-174">Azure Cosmos DB accounts that are configured with bounded staleness consistency can associate any number of Azure regions with their Azure Cosmos DB account.</span><span class="sxs-lookup"><span data-stu-id="e7d47-174">Azure Cosmos DB accounts that are configured with bounded staleness consistency can associate any number of Azure regions with their Azure Cosmos DB account.</span></span> 
* <span data-ttu-id="e7d47-175">The cost of a read operation (in terms of RUs consumed) with bounded staleness is higher than session and eventual consistency, but the same as strong consistency.</span><span class="sxs-lookup"><span data-stu-id="e7d47-175">The cost of a read operation (in terms of RUs consumed) with bounded staleness is higher than session and eventual consistency, but the same as strong consistency.</span></span>

<a id="session"></a>
<span data-ttu-id="e7d47-176">**Session**:</span><span class="sxs-lookup"><span data-stu-id="e7d47-176">**Session**:</span></span> 

* <span data-ttu-id="e7d47-177">Unlike the global consistency models offered by strong and bounded staleness consistency levels, session consistency is scoped to a client session.</span><span class="sxs-lookup"><span data-stu-id="e7d47-177">Unlike the global consistency models offered by strong and bounded staleness consistency levels, session consistency is scoped to a client session.</span></span> 
* <span data-ttu-id="e7d47-178">Session consistency is ideal for all scenarios where a device or user session is involved since it guarantees monotonic reads, monotonic writes, and read your own writes (RYW) guarantees.</span><span class="sxs-lookup"><span data-stu-id="e7d47-178">Session consistency is ideal for all scenarios where a device or user session is involved since it guarantees monotonic reads, monotonic writes, and read your own writes (RYW) guarantees.</span></span> 
* <span data-ttu-id="e7d47-179">Session consistency provides predictable consistency for a session, and maximum read throughput while offering the lowest latency writes and reads.</span><span class="sxs-lookup"><span data-stu-id="e7d47-179">Session consistency provides predictable consistency for a session, and maximum read throughput while offering the lowest latency writes and reads.</span></span> 
* <span data-ttu-id="e7d47-180">Azure Cosmos DB accounts that are configured with session consistency can associate any number of Azure regions with their Azure Cosmos DB account.</span><span class="sxs-lookup"><span data-stu-id="e7d47-180">Azure Cosmos DB accounts that are configured with session consistency can associate any number of Azure regions with their Azure Cosmos DB account.</span></span> 
* <span data-ttu-id="e7d47-181">The cost of a read operation (in terms of RUs consumed) with session consistency level is less than strong and bounded staleness, but more than eventual consistency.</span><span class="sxs-lookup"><span data-stu-id="e7d47-181">The cost of a read operation (in terms of RUs consumed) with session consistency level is less than strong and bounded staleness, but more than eventual consistency.</span></span>

<a id="consistent-prefix"></a>
<span data-ttu-id="e7d47-182">**Consistent Prefix**:</span><span class="sxs-lookup"><span data-stu-id="e7d47-182">**Consistent Prefix**:</span></span> 

* <span data-ttu-id="e7d47-183">Consistent prefix guarantees that in absence of any further writes, the replicas within the group eventually converge.</span><span class="sxs-lookup"><span data-stu-id="e7d47-183">Consistent prefix guarantees that in absence of any further writes, the replicas within the group eventually converge.</span></span> 
* <span data-ttu-id="e7d47-184">Consistent prefix guarantees that reads never see out of order writes.</span><span class="sxs-lookup"><span data-stu-id="e7d47-184">Consistent prefix guarantees that reads never see out of order writes.</span></span> <span data-ttu-id="e7d47-185">If writes were performed in the order `A, B, C`, then a client sees either `A`, `A,B`, or `A,B,C`, but never out of order like `A,C` or `B,A,C`.</span><span class="sxs-lookup"><span data-stu-id="e7d47-185">If writes were performed in the order `A, B, C`, then a client sees either `A`, `A,B`, or `A,B,C`, but never out of order like `A,C` or `B,A,C`.</span></span>
* <span data-ttu-id="e7d47-186">Azure Cosmos DB accounts that are configured with consistent prefix consistency can associate any number of Azure regions with their Azure Cosmos DB account.</span><span class="sxs-lookup"><span data-stu-id="e7d47-186">Azure Cosmos DB accounts that are configured with consistent prefix consistency can associate any number of Azure regions with their Azure Cosmos DB account.</span></span> 

<a id="eventual"></a>
<span data-ttu-id="e7d47-187">**Eventual**:</span><span class="sxs-lookup"><span data-stu-id="e7d47-187">**Eventual**:</span></span> 

* <span data-ttu-id="e7d47-188">Eventual consistency guarantees that in absence of any further writes, the replicas within the group eventually converge.</span><span class="sxs-lookup"><span data-stu-id="e7d47-188">Eventual consistency guarantees that in absence of any further writes, the replicas within the group eventually converge.</span></span> 
* <span data-ttu-id="e7d47-189">Eventual consistency is the weakest form of consistency where a client may get the values that are older than the ones it had seen before.</span><span class="sxs-lookup"><span data-stu-id="e7d47-189">Eventual consistency is the weakest form of consistency where a client may get the values that are older than the ones it had seen before.</span></span>
* <span data-ttu-id="e7d47-190">Eventual consistency provides the weakest read consistency but offers the lowest latency for both reads and writes.</span><span class="sxs-lookup"><span data-stu-id="e7d47-190">Eventual consistency provides the weakest read consistency but offers the lowest latency for both reads and writes.</span></span>
* <span data-ttu-id="e7d47-191">Azure Cosmos DB accounts that are configured with eventual consistency can associate any number of Azure regions with their Azure Cosmos DB account.</span><span class="sxs-lookup"><span data-stu-id="e7d47-191">Azure Cosmos DB accounts that are configured with eventual consistency can associate any number of Azure regions with their Azure Cosmos DB account.</span></span> 
* <span data-ttu-id="e7d47-192">The cost of a read operation (in terms of RUs consumed) with the eventual consistency level is the lowest of all the Azure Cosmos DB consistency levels.</span><span class="sxs-lookup"><span data-stu-id="e7d47-192">The cost of a read operation (in terms of RUs consumed) with the eventual consistency level is the lowest of all the Azure Cosmos DB consistency levels.</span></span>

## <a name="configuring-the-default-consistency-level"></a><span data-ttu-id="e7d47-193">Configuring the default consistency level</span><span class="sxs-lookup"><span data-stu-id="e7d47-193">Configuring the default consistency level</span></span>
1. <span data-ttu-id="e7d47-194">In the [Azure portal](https://portal.azure.com/), in the Jumpbar, click **Azure Cosmos DB**.</span><span class="sxs-lookup"><span data-stu-id="e7d47-194">In the [Azure portal](https://portal.azure.com/), in the Jumpbar, click **Azure Cosmos DB**.</span></span>
2. <span data-ttu-id="e7d47-195">In the **Azure Cosmos DB** page, select the database account to modify.</span><span class="sxs-lookup"><span data-stu-id="e7d47-195">In the **Azure Cosmos DB** page, select the database account to modify.</span></span>
3. <span data-ttu-id="e7d47-196">In the account page, click **Default consistency**.</span><span class="sxs-lookup"><span data-stu-id="e7d47-196">In the account page, click **Default consistency**.</span></span>
4. <span data-ttu-id="e7d47-197">In the **Default Consistency** page, select the new consistency level and click **Save**.</span><span class="sxs-lookup"><span data-stu-id="e7d47-197">In the **Default Consistency** page, select the new consistency level and click **Save**.</span></span>
   
    ![Screen shot highlighting the Settings icon and Default Consistency entry](./media/consistency-levels/database-consistency-level-1.png)

## <a name="consistency-levels-for-queries"></a><span data-ttu-id="e7d47-199">Consistency levels for queries</span><span class="sxs-lookup"><span data-stu-id="e7d47-199">Consistency levels for queries</span></span>
<span data-ttu-id="e7d47-200">By default, for user-defined resources, the consistency level for queries is the same as the consistency level for reads.</span><span class="sxs-lookup"><span data-stu-id="e7d47-200">By default, for user-defined resources, the consistency level for queries is the same as the consistency level for reads.</span></span> <span data-ttu-id="e7d47-201">By default, the index is updated synchronously on each insert, replace, or delete of an item to the Cosmos DB container.</span><span class="sxs-lookup"><span data-stu-id="e7d47-201">By default, the index is updated synchronously on each insert, replace, or delete of an item to the Cosmos DB container.</span></span> <span data-ttu-id="e7d47-202">This enables the queries to honor the same consistency level as that of point reads.</span><span class="sxs-lookup"><span data-stu-id="e7d47-202">This enables the queries to honor the same consistency level as that of point reads.</span></span> <span data-ttu-id="e7d47-203">While Azure Cosmos DB is write optimized and supports sustained volumes of writes, synchronous index maintenance and serving consistent queries, you can configure certain containers to update their index lazily.</span><span class="sxs-lookup"><span data-stu-id="e7d47-203">While Azure Cosmos DB is write optimized and supports sustained volumes of writes, synchronous index maintenance and serving consistent queries, you can configure certain containers to update their index lazily.</span></span> <span data-ttu-id="e7d47-204">Lazy indexing further boosts the write performance and is ideal for bulk ingestion scenarios when a workload is primarily read-heavy.</span><span class="sxs-lookup"><span data-stu-id="e7d47-204">Lazy indexing further boosts the write performance and is ideal for bulk ingestion scenarios when a workload is primarily read-heavy.</span></span>  

| <span data-ttu-id="e7d47-205">Indexing Mode</span><span class="sxs-lookup"><span data-stu-id="e7d47-205">Indexing Mode</span></span> | <span data-ttu-id="e7d47-206">Reads</span><span class="sxs-lookup"><span data-stu-id="e7d47-206">Reads</span></span> | <span data-ttu-id="e7d47-207">Queries</span><span class="sxs-lookup"><span data-stu-id="e7d47-207">Queries</span></span> |
| --- | --- | --- |
| <span data-ttu-id="e7d47-208">Consistent (default)</span><span class="sxs-lookup"><span data-stu-id="e7d47-208">Consistent (default)</span></span> |<span data-ttu-id="e7d47-209">Select from strong, bounded staleness, session, consistent prefix, or eventual</span><span class="sxs-lookup"><span data-stu-id="e7d47-209">Select from strong, bounded staleness, session, consistent prefix, or eventual</span></span> |<span data-ttu-id="e7d47-210">Select from strong, bounded staleness, session, or eventual</span><span class="sxs-lookup"><span data-stu-id="e7d47-210">Select from strong, bounded staleness, session, or eventual</span></span> |
| <span data-ttu-id="e7d47-211">Lazy</span><span class="sxs-lookup"><span data-stu-id="e7d47-211">Lazy</span></span> |<span data-ttu-id="e7d47-212">Select from strong, bounded staleness, session, consistent prefix, or eventual</span><span class="sxs-lookup"><span data-stu-id="e7d47-212">Select from strong, bounded staleness, session, consistent prefix, or eventual</span></span> |<span data-ttu-id="e7d47-213">Eventual</span><span class="sxs-lookup"><span data-stu-id="e7d47-213">Eventual</span></span> |
| <span data-ttu-id="e7d47-214">None</span><span class="sxs-lookup"><span data-stu-id="e7d47-214">None</span></span> |<span data-ttu-id="e7d47-215">Select from strong, bounded staleness, session, consistent prefix, or eventual</span><span class="sxs-lookup"><span data-stu-id="e7d47-215">Select from strong, bounded staleness, session, consistent prefix, or eventual</span></span> |<span data-ttu-id="e7d47-216">Not applicable</span><span class="sxs-lookup"><span data-stu-id="e7d47-216">Not applicable</span></span> |

<span data-ttu-id="e7d47-217">As with read requests, you can lower the consistency level of a specific query request in each API.</span><span class="sxs-lookup"><span data-stu-id="e7d47-217">As with read requests, you can lower the consistency level of a specific query request in each API.</span></span>

## <a name="consistency-levels-for-the-mongodb-api"></a><span data-ttu-id="e7d47-218">Consistency levels for the MongoDB API</span><span class="sxs-lookup"><span data-stu-id="e7d47-218">Consistency levels for the MongoDB API</span></span>

<span data-ttu-id="e7d47-219">Azure Cosmos DB currently implements MongoDB version 3.4, which has two consistency settings, strong and eventual.</span><span class="sxs-lookup"><span data-stu-id="e7d47-219">Azure Cosmos DB currently implements MongoDB version 3.4, which has two consistency settings, strong and eventual.</span></span> <span data-ttu-id="e7d47-220">Because Azure Cosmos DB is multi-api, the consistency settings are applicable at the account level and enforcement of the consistency is controlled by each API.</span><span class="sxs-lookup"><span data-stu-id="e7d47-220">Because Azure Cosmos DB is multi-api, the consistency settings are applicable at the account level and enforcement of the consistency is controlled by each API.</span></span>  <span data-ttu-id="e7d47-221">Until MongoDB 3.6, there was no concept of a session consistency, so if you set a MongoDB API account to use session consistency, the consistency is downgraded to eventual when using MongoDB APIs.</span><span class="sxs-lookup"><span data-stu-id="e7d47-221">Until MongoDB 3.6, there was no concept of a session consistency, so if you set a MongoDB API account to use session consistency, the consistency is downgraded to eventual when using MongoDB APIs.</span></span> <span data-ttu-id="e7d47-222">If you need a read-your-own-write guarantee for a MongoDB API account, the default consistency level for the account should be set to strong or bounded staleness.</span><span class="sxs-lookup"><span data-stu-id="e7d47-222">If you need a read-your-own-write guarantee for a MongoDB API account, the default consistency level for the account should be set to strong or bounded staleness.</span></span>

## <a name="next-steps"></a><span data-ttu-id="e7d47-223">Next steps</span><span class="sxs-lookup"><span data-stu-id="e7d47-223">Next steps</span></span>
<span data-ttu-id="e7d47-224">If you'd like to do more reading about consistency levels and tradeoffs, we recommend the following resources:</span><span class="sxs-lookup"><span data-stu-id="e7d47-224">If you'd like to do more reading about consistency levels and tradeoffs, we recommend the following resources:</span></span>

* [<span data-ttu-id="e7d47-225">Replicated Data Consistency explained through baseball (video) by Doug Terry</span><span class="sxs-lookup"><span data-stu-id="e7d47-225">Replicated Data Consistency explained through baseball (video) by Doug Terry</span></span>](https://www.youtube.com/watch?v=gluIh8zd26I)
* [<span data-ttu-id="e7d47-226">Replicated Data Consistency explained through baseball (whitepaper) by Doug Terry</span><span class="sxs-lookup"><span data-stu-id="e7d47-226">Replicated Data Consistency explained through baseball (whitepaper) by Doug Terry</span></span>](http://research.microsoft.com/pubs/157411/ConsistencyAndBaseballReport.pdf)
* [<span data-ttu-id="e7d47-227">Session Guarantees for Weakly Consistent Replicated Data</span><span class="sxs-lookup"><span data-stu-id="e7d47-227">Session Guarantees for Weakly Consistent Replicated Data</span></span>](http://dl.acm.org/citation.cfm?id=383631)
* [<span data-ttu-id="e7d47-228">Consistency Tradeoffs in Modern Distributed Database Systems Design: CAP is only part of the story</span><span class="sxs-lookup"><span data-stu-id="e7d47-228">Consistency Tradeoffs in Modern Distributed Database Systems Design: CAP is only part of the story</span></span>](https://www.computer.org/web/csdl/index/-/csdl/mags/co/2012/02/mco2012020037-abs.html)
* [<span data-ttu-id="e7d47-229">Probabilistic Bounded Staleness (PBS) for Practical Partial Quorums</span><span class="sxs-lookup"><span data-stu-id="e7d47-229">Probabilistic Bounded Staleness (PBS) for Practical Partial Quorums</span></span>](http://vldb.org/pvldb/vol5/p776_peterbailis_vldb2012.pdf)
* [<span data-ttu-id="e7d47-230">Eventual Consistent - Revisited</span><span class="sxs-lookup"><span data-stu-id="e7d47-230">Eventual Consistent - Revisited</span></span>](http://allthingsdistributed.com/2008/12/eventually_consistent.html)
* [<span data-ttu-id="e7d47-231">The Load, Capacity, and Availability of Quorum Systems, SIAM Journal on Computing</span><span class="sxs-lookup"><span data-stu-id="e7d47-231">The Load, Capacity, and Availability of Quorum Systems, SIAM Journal on Computing</span></span>](http://epubs.siam.org/doi/abs/10.1137/S0097539795281232)
* [<span data-ttu-id="e7d47-232">Line-up: a complete and automatic linearizability checker, Proceedings of the 2010 ACM SIGPLAN conference on Programming language design and implementation</span><span class="sxs-lookup"><span data-stu-id="e7d47-232">Line-up: a complete and automatic linearizability checker, Proceedings of the 2010 ACM SIGPLAN conference on Programming language design and implementation</span></span>](http://dl.acm.org/citation.cfm?id=1806634)
* [<span data-ttu-id="e7d47-233">Probabilistically bounded staleness for practical partial quorums</span><span class="sxs-lookup"><span data-stu-id="e7d47-233">Probabilistically bounded staleness for practical partial quorums</span></span>](http://dl.acm.org/citation.cfm?id=2212359)
