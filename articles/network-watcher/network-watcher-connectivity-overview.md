---
title: Introduction to Azure Network Watcher Connection Troubleshoot | Microsoft Docs
description: This page provides an overview of the Network Watcher connection troubleshooting capability
services: network-watcher
documentationcenter: na
author: jimdial
manager: jeconnoc
editor: ''
ms.service: network-watcher
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 07/11/2017
ms.author: jdial
ms.openlocfilehash: 0268c7e54aa82df12243f98fd72de836fbc82070
ms.sourcegitcommit: d1451406a010fd3aa854dc8e5b77dc5537d8050e
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 09/13/2018
ms.locfileid: "44967032"
---
# <a name="introduction-to-connection-troubleshoot-in-azure-network-watcher"></a><span data-ttu-id="8b30f-103">Introduction to connection troubleshoot in Azure Network Watcher</span><span class="sxs-lookup"><span data-stu-id="8b30f-103">Introduction to connection troubleshoot in Azure Network Watcher</span></span>

<span data-ttu-id="8b30f-104">The connection troubleshoot feature of Network Watcher provides the capability to check a direct TCP connection from a virtual machine to a virtual machine (VM), fully qualified domain name (FQDN), URI, or IPv4 address.</span><span class="sxs-lookup"><span data-stu-id="8b30f-104">The connection troubleshoot feature of Network Watcher provides the capability to check a direct TCP connection from a virtual machine to a virtual machine (VM), fully qualified domain name (FQDN), URI, or IPv4 address.</span></span> <span data-ttu-id="8b30f-105">Network scenarios are complex, they are implemented using network security groups, firewalls, user-defined routes, and resources provided by Azure.</span><span class="sxs-lookup"><span data-stu-id="8b30f-105">Network scenarios are complex, they are implemented using network security groups, firewalls, user-defined routes, and resources provided by Azure.</span></span> <span data-ttu-id="8b30f-106">Complex configurations make troubleshooting connectivity issues challenging.</span><span class="sxs-lookup"><span data-stu-id="8b30f-106">Complex configurations make troubleshooting connectivity issues challenging.</span></span> <span data-ttu-id="8b30f-107">Network Watcher helps reduce the amount of time to find and detect connectivity issues.</span><span class="sxs-lookup"><span data-stu-id="8b30f-107">Network Watcher helps reduce the amount of time to find and detect connectivity issues.</span></span> <span data-ttu-id="8b30f-108">The results returned can provide insights into whether a connectivity issue is due to a platform or a user configuration issue.</span><span class="sxs-lookup"><span data-stu-id="8b30f-108">The results returned can provide insights into whether a connectivity issue is due to a platform or a user configuration issue.</span></span> <span data-ttu-id="8b30f-109">Connectivity can be checked with [PowerShell](network-watcher-connectivity-powershell.md), [Azure CLI](network-watcher-connectivity-cli.md), and [REST API](network-watcher-connectivity-rest.md).</span><span class="sxs-lookup"><span data-stu-id="8b30f-109">Connectivity can be checked with [PowerShell](network-watcher-connectivity-powershell.md), [Azure CLI](network-watcher-connectivity-cli.md), and [REST API](network-watcher-connectivity-rest.md).</span></span>

> [!IMPORTANT]
> <span data-ttu-id="8b30f-110">Connection troubleshoot requires that the VM you troubleshoot from has the `AzureNetworkWatcherExtension` VM extension installed.</span><span class="sxs-lookup"><span data-stu-id="8b30f-110">Connection troubleshoot requires that the VM you troubleshoot from has the `AzureNetworkWatcherExtension` VM extension installed.</span></span> <span data-ttu-id="8b30f-111">For installing the extension on a Windows VM visit [Azure Network Watcher Agent virtual machine extension for Windows](../virtual-machines/windows/extensions-nwa.md?toc=%2fazure%2fnetwork-watcher%2ftoc.json) and for Linux VM visit [Azure Network Watcher Agent virtual machine extension for Linux](../virtual-machines/linux/extensions-nwa.md?toc=%2fazure%2fnetwork-watcher%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="8b30f-111">For installing the extension on a Windows VM visit [Azure Network Watcher Agent virtual machine extension for Windows](../virtual-machines/windows/extensions-nwa.md?toc=%2fazure%2fnetwork-watcher%2ftoc.json) and for Linux VM visit [Azure Network Watcher Agent virtual machine extension for Linux](../virtual-machines/linux/extensions-nwa.md?toc=%2fazure%2fnetwork-watcher%2ftoc.json).</span></span> <span data-ttu-id="8b30f-112">The extension is not required on the destination endpoint.</span><span class="sxs-lookup"><span data-stu-id="8b30f-112">The extension is not required on the destination endpoint.</span></span>

## <a name="response"></a><span data-ttu-id="8b30f-113">Response</span><span class="sxs-lookup"><span data-stu-id="8b30f-113">Response</span></span>

<span data-ttu-id="8b30f-114">The following table shows the properties returned when connection troubleshoot has finished running.</span><span class="sxs-lookup"><span data-stu-id="8b30f-114">The following table shows the properties returned when connection troubleshoot has finished running.</span></span>

|<span data-ttu-id="8b30f-115">Property</span><span class="sxs-lookup"><span data-stu-id="8b30f-115">Property</span></span>  |<span data-ttu-id="8b30f-116">Description</span><span class="sxs-lookup"><span data-stu-id="8b30f-116">Description</span></span>  |
|---------|---------|
|<span data-ttu-id="8b30f-117">ConnectionStatus</span><span class="sxs-lookup"><span data-stu-id="8b30f-117">ConnectionStatus</span></span>     | <span data-ttu-id="8b30f-118">The status of the connectivity check.</span><span class="sxs-lookup"><span data-stu-id="8b30f-118">The status of the connectivity check.</span></span> <span data-ttu-id="8b30f-119">Possible results are **Reachable** and **Unreachable**.</span><span class="sxs-lookup"><span data-stu-id="8b30f-119">Possible results are **Reachable** and **Unreachable**.</span></span>        |
|<span data-ttu-id="8b30f-120">AvgLatencyInMs</span><span class="sxs-lookup"><span data-stu-id="8b30f-120">AvgLatencyInMs</span></span>     | <span data-ttu-id="8b30f-121">Average latency during the connectivity check in milliseconds.</span><span class="sxs-lookup"><span data-stu-id="8b30f-121">Average latency during the connectivity check in milliseconds.</span></span> <span data-ttu-id="8b30f-122">(Only shown if check status is reachable)</span><span class="sxs-lookup"><span data-stu-id="8b30f-122">(Only shown if check status is reachable)</span></span>        |
|<span data-ttu-id="8b30f-123">MinLatencyInMs</span><span class="sxs-lookup"><span data-stu-id="8b30f-123">MinLatencyInMs</span></span>     | <span data-ttu-id="8b30f-124">Minimum latency during the connectivity check in milliseconds.</span><span class="sxs-lookup"><span data-stu-id="8b30f-124">Minimum latency during the connectivity check in milliseconds.</span></span> <span data-ttu-id="8b30f-125">(Only shown if check status is reachable)</span><span class="sxs-lookup"><span data-stu-id="8b30f-125">(Only shown if check status is reachable)</span></span>        |
|<span data-ttu-id="8b30f-126">MaxLatencyInMs</span><span class="sxs-lookup"><span data-stu-id="8b30f-126">MaxLatencyInMs</span></span>     | <span data-ttu-id="8b30f-127">Maximum latency during the connectivity check in milliseconds.</span><span class="sxs-lookup"><span data-stu-id="8b30f-127">Maximum latency during the connectivity check in milliseconds.</span></span> <span data-ttu-id="8b30f-128">(Only shown if check status is reachable)</span><span class="sxs-lookup"><span data-stu-id="8b30f-128">(Only shown if check status is reachable)</span></span>        |
|<span data-ttu-id="8b30f-129">ProbesSent</span><span class="sxs-lookup"><span data-stu-id="8b30f-129">ProbesSent</span></span>     | <span data-ttu-id="8b30f-130">Number of probes sent during the check.</span><span class="sxs-lookup"><span data-stu-id="8b30f-130">Number of probes sent during the check.</span></span> <span data-ttu-id="8b30f-131">Max value is 100.</span><span class="sxs-lookup"><span data-stu-id="8b30f-131">Max value is 100.</span></span>        |
|<span data-ttu-id="8b30f-132">ProbesFailed</span><span class="sxs-lookup"><span data-stu-id="8b30f-132">ProbesFailed</span></span>     | <span data-ttu-id="8b30f-133">Number of probes that failed during the check.</span><span class="sxs-lookup"><span data-stu-id="8b30f-133">Number of probes that failed during the check.</span></span> <span data-ttu-id="8b30f-134">Max value is 100.</span><span class="sxs-lookup"><span data-stu-id="8b30f-134">Max value is 100.</span></span>        |
|<span data-ttu-id="8b30f-135">Hops</span><span class="sxs-lookup"><span data-stu-id="8b30f-135">Hops</span></span>     | <span data-ttu-id="8b30f-136">Hop by hop path from source to destination.</span><span class="sxs-lookup"><span data-stu-id="8b30f-136">Hop by hop path from source to destination.</span></span>        |
|<span data-ttu-id="8b30f-137">Hops[].Type</span><span class="sxs-lookup"><span data-stu-id="8b30f-137">Hops[].Type</span></span>     | <span data-ttu-id="8b30f-138">Type of resource.</span><span class="sxs-lookup"><span data-stu-id="8b30f-138">Type of resource.</span></span> <span data-ttu-id="8b30f-139">Possible values are **Source**, **VirtualAppliance**, **VnetLocal**, and **Internet**.</span><span class="sxs-lookup"><span data-stu-id="8b30f-139">Possible values are **Source**, **VirtualAppliance**, **VnetLocal**, and **Internet**.</span></span>        |
|<span data-ttu-id="8b30f-140">Hops[].Id</span><span class="sxs-lookup"><span data-stu-id="8b30f-140">Hops[].Id</span></span> | <span data-ttu-id="8b30f-141">Unique identifier of the hop.</span><span class="sxs-lookup"><span data-stu-id="8b30f-141">Unique identifier of the hop.</span></span>|
|<span data-ttu-id="8b30f-142">Hops[].Address</span><span class="sxs-lookup"><span data-stu-id="8b30f-142">Hops[].Address</span></span> | <span data-ttu-id="8b30f-143">IP address of the hop.</span><span class="sxs-lookup"><span data-stu-id="8b30f-143">IP address of the hop.</span></span>|
|<span data-ttu-id="8b30f-144">Hops[].ResourceId</span><span class="sxs-lookup"><span data-stu-id="8b30f-144">Hops[].ResourceId</span></span> | <span data-ttu-id="8b30f-145">ResourceID of the hop if the hop is an Azure resource.</span><span class="sxs-lookup"><span data-stu-id="8b30f-145">ResourceID of the hop if the hop is an Azure resource.</span></span> <span data-ttu-id="8b30f-146">If it is an internet resource, ResourceID is **Internet**.</span><span class="sxs-lookup"><span data-stu-id="8b30f-146">If it is an internet resource, ResourceID is **Internet**.</span></span> |
|<span data-ttu-id="8b30f-147">Hops[].NextHopIds</span><span class="sxs-lookup"><span data-stu-id="8b30f-147">Hops[].NextHopIds</span></span> | <span data-ttu-id="8b30f-148">The unique identifier of the next hop taken.</span><span class="sxs-lookup"><span data-stu-id="8b30f-148">The unique identifier of the next hop taken.</span></span>|
|<span data-ttu-id="8b30f-149">Hops[].Issues</span><span class="sxs-lookup"><span data-stu-id="8b30f-149">Hops[].Issues</span></span> | <span data-ttu-id="8b30f-150">A collection of issues that were encountered during the check at that hop.</span><span class="sxs-lookup"><span data-stu-id="8b30f-150">A collection of issues that were encountered during the check at that hop.</span></span> <span data-ttu-id="8b30f-151">If there were no issues, the value is blank.</span><span class="sxs-lookup"><span data-stu-id="8b30f-151">If there were no issues, the value is blank.</span></span>|
|<span data-ttu-id="8b30f-152">Hops[].Issues[].Origin</span><span class="sxs-lookup"><span data-stu-id="8b30f-152">Hops[].Issues[].Origin</span></span> | <span data-ttu-id="8b30f-153">At the current hop, where issue occurred.</span><span class="sxs-lookup"><span data-stu-id="8b30f-153">At the current hop, where issue occurred.</span></span> <span data-ttu-id="8b30f-154">Possible values are:</span><span class="sxs-lookup"><span data-stu-id="8b30f-154">Possible values are:</span></span><br/> <span data-ttu-id="8b30f-155">**Inbound** - Issue is on the link from the previous hop to the current hop</span><span class="sxs-lookup"><span data-stu-id="8b30f-155">**Inbound** - Issue is on the link from the previous hop to the current hop</span></span><br/><span data-ttu-id="8b30f-156">**Outbound** - Issue is on the link from the current hop to the next hop</span><span class="sxs-lookup"><span data-stu-id="8b30f-156">**Outbound** - Issue is on the link from the current hop to the next hop</span></span><br/><span data-ttu-id="8b30f-157">**Local** - Issue is on the current hop.</span><span class="sxs-lookup"><span data-stu-id="8b30f-157">**Local** - Issue is on the current hop.</span></span>|
|<span data-ttu-id="8b30f-158">Hops[].Issues[].Severity</span><span class="sxs-lookup"><span data-stu-id="8b30f-158">Hops[].Issues[].Severity</span></span> | <span data-ttu-id="8b30f-159">The severity of the issue detected.</span><span class="sxs-lookup"><span data-stu-id="8b30f-159">The severity of the issue detected.</span></span> <span data-ttu-id="8b30f-160">Possible values are **Error** and **Warning**.</span><span class="sxs-lookup"><span data-stu-id="8b30f-160">Possible values are **Error** and **Warning**.</span></span> |
|<span data-ttu-id="8b30f-161">Hops[].Issues[].Type</span><span class="sxs-lookup"><span data-stu-id="8b30f-161">Hops[].Issues[].Type</span></span> |<span data-ttu-id="8b30f-162">The type of issue found.</span><span class="sxs-lookup"><span data-stu-id="8b30f-162">The type of issue found.</span></span> <span data-ttu-id="8b30f-163">Possible values are:</span><span class="sxs-lookup"><span data-stu-id="8b30f-163">Possible values are:</span></span> <br/><span data-ttu-id="8b30f-164">**CPU**</span><span class="sxs-lookup"><span data-stu-id="8b30f-164">**CPU**</span></span><br/><span data-ttu-id="8b30f-165">**Memory**</span><span class="sxs-lookup"><span data-stu-id="8b30f-165">**Memory**</span></span><br/><span data-ttu-id="8b30f-166">**GuestFirewall**</span><span class="sxs-lookup"><span data-stu-id="8b30f-166">**GuestFirewall**</span></span><br/><span data-ttu-id="8b30f-167">**DnsResolution**</span><span class="sxs-lookup"><span data-stu-id="8b30f-167">**DnsResolution**</span></span><br/><span data-ttu-id="8b30f-168">**NetworkSecurityRule**</span><span class="sxs-lookup"><span data-stu-id="8b30f-168">**NetworkSecurityRule**</span></span><br/><span data-ttu-id="8b30f-169">**UserDefinedRoute**</span><span class="sxs-lookup"><span data-stu-id="8b30f-169">**UserDefinedRoute**</span></span> |
|<span data-ttu-id="8b30f-170">Hops[].Issues[].Context</span><span class="sxs-lookup"><span data-stu-id="8b30f-170">Hops[].Issues[].Context</span></span> |<span data-ttu-id="8b30f-171">Details regarding the issue found.</span><span class="sxs-lookup"><span data-stu-id="8b30f-171">Details regarding the issue found.</span></span>|
|<span data-ttu-id="8b30f-172">Hops[].Issues[].Context[].key</span><span class="sxs-lookup"><span data-stu-id="8b30f-172">Hops[].Issues[].Context[].key</span></span> |<span data-ttu-id="8b30f-173">Key of the key value pair returned.</span><span class="sxs-lookup"><span data-stu-id="8b30f-173">Key of the key value pair returned.</span></span>|
|<span data-ttu-id="8b30f-174">Hops[].Issues[].Context[].value</span><span class="sxs-lookup"><span data-stu-id="8b30f-174">Hops[].Issues[].Context[].value</span></span> |<span data-ttu-id="8b30f-175">Value of the key value pair returned.</span><span class="sxs-lookup"><span data-stu-id="8b30f-175">Value of the key value pair returned.</span></span>|

<span data-ttu-id="8b30f-176">The following is an example of an issue found on a hop.</span><span class="sxs-lookup"><span data-stu-id="8b30f-176">The following is an example of an issue found on a hop.</span></span>

```json
"Issues": [
    {
        "Origin": "Outbound",
        "Severity": "Error",
        "Type": "NetworkSecurityRule",
        "Context": [
            {
                "key": "RuleName",
                "value": "UserRule_Port80"
            }
        ]
    }
]
```
## <a name="fault-types"></a><span data-ttu-id="8b30f-177">Fault types</span><span class="sxs-lookup"><span data-stu-id="8b30f-177">Fault types</span></span>

<span data-ttu-id="8b30f-178">Connection troubleshoot returns fault types about the connection.</span><span class="sxs-lookup"><span data-stu-id="8b30f-178">Connection troubleshoot returns fault types about the connection.</span></span> <span data-ttu-id="8b30f-179">The following table provides a list of the current fault types returned.</span><span class="sxs-lookup"><span data-stu-id="8b30f-179">The following table provides a list of the current fault types returned.</span></span>

|<span data-ttu-id="8b30f-180">Type</span><span class="sxs-lookup"><span data-stu-id="8b30f-180">Type</span></span>  |<span data-ttu-id="8b30f-181">Description</span><span class="sxs-lookup"><span data-stu-id="8b30f-181">Description</span></span>  |
|---------|---------|
|<span data-ttu-id="8b30f-182">CPU</span><span class="sxs-lookup"><span data-stu-id="8b30f-182">CPU</span></span>     | <span data-ttu-id="8b30f-183">High CPU utilization.</span><span class="sxs-lookup"><span data-stu-id="8b30f-183">High CPU utilization.</span></span>       |
|<span data-ttu-id="8b30f-184">Memory</span><span class="sxs-lookup"><span data-stu-id="8b30f-184">Memory</span></span>     | <span data-ttu-id="8b30f-185">High Memory utilization.</span><span class="sxs-lookup"><span data-stu-id="8b30f-185">High Memory utilization.</span></span>       |
|<span data-ttu-id="8b30f-186">GuestFirewall</span><span class="sxs-lookup"><span data-stu-id="8b30f-186">GuestFirewall</span></span>     | <span data-ttu-id="8b30f-187">Traffic is blocked due to a virtual machine firewall configuration.</span><span class="sxs-lookup"><span data-stu-id="8b30f-187">Traffic is blocked due to a virtual machine firewall configuration.</span></span>        |
|<span data-ttu-id="8b30f-188">DNSResolution</span><span class="sxs-lookup"><span data-stu-id="8b30f-188">DNSResolution</span></span>     | <span data-ttu-id="8b30f-189">DNS resolution failed for the destination address.</span><span class="sxs-lookup"><span data-stu-id="8b30f-189">DNS resolution failed for the destination address.</span></span>        |
|<span data-ttu-id="8b30f-190">NetworkSecurityRule</span><span class="sxs-lookup"><span data-stu-id="8b30f-190">NetworkSecurityRule</span></span>    | <span data-ttu-id="8b30f-191">Traffic is blocked by an NSG Rule (Rule is returned)</span><span class="sxs-lookup"><span data-stu-id="8b30f-191">Traffic is blocked by an NSG Rule (Rule is returned)</span></span>        |
|<span data-ttu-id="8b30f-192">UserDefinedRoute</span><span class="sxs-lookup"><span data-stu-id="8b30f-192">UserDefinedRoute</span></span>|<span data-ttu-id="8b30f-193">Traffic is dropped due to a user defined or system route.</span><span class="sxs-lookup"><span data-stu-id="8b30f-193">Traffic is dropped due to a user defined or system route.</span></span> |

### <a name="next-steps"></a><span data-ttu-id="8b30f-194">Next steps</span><span class="sxs-lookup"><span data-stu-id="8b30f-194">Next steps</span></span>

<span data-ttu-id="8b30f-195">Learn how to troubleshoot connections using the [Azure portal](network-watcher-connectivity-portal.md), [PowerShell](network-watcher-connectivity-powershell.md), the [Azure CLI](network-watcher-connectivity-cli.md), or [REST API](network-watcher-connectivity-rest.md).</span><span class="sxs-lookup"><span data-stu-id="8b30f-195">Learn how to troubleshoot connections using the [Azure portal](network-watcher-connectivity-portal.md), [PowerShell](network-watcher-connectivity-powershell.md), the [Azure CLI](network-watcher-connectivity-cli.md), or [REST API](network-watcher-connectivity-rest.md).</span></span>