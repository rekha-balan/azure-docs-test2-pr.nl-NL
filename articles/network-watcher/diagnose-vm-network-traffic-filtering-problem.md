---
title: Diagnose a virtual machine network traffic filter problem - quickstart - Azure portal | Microsoft Docs
description: In this quickstart, you learn how to diagnose a virtual machine network traffic filter problem using the IP flow verify  capability of Azure Network Watcher.
services: network-watcher
documentationcenter: network-watcher
author: jimdial
manager: jeconnoc
editor: ''
tags: azure-resource-manager
Customer intent: I need to diagnose a virtual machine (VM) network traffic filter problem that prevents communication to and from a VM.
ms.assetid: ''
ms.service: network-watcher
ms.devlang: na
ms.topic: quickstart
ms.tgt_pltfrm: network-watcher
ms.workload: infrastructure
ms.date: 04/20/2018
ms.author: jdial
ms.custom: mvc
ms.openlocfilehash: 1802df4e6cbe77b4bc7ee2ee49f24d8dc51de015
ms.sourcegitcommit: d1451406a010fd3aa854dc8e5b77dc5537d8050e
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 09/13/2018
ms.locfileid: "44869417"
---
# <a name="quickstart-diagnose-a-virtual-machine-network-traffic-filter-problem-using-the-azure-portal"></a><span data-ttu-id="0639b-103">Quickstart: Diagnose a virtual machine network traffic filter problem using the Azure portal</span><span class="sxs-lookup"><span data-stu-id="0639b-103">Quickstart: Diagnose a virtual machine network traffic filter problem using the Azure portal</span></span>

<span data-ttu-id="0639b-104">In this quickstart, you deploy a virtual machine (VM), and then check communications to an IP address and URL and from an IP address.</span><span class="sxs-lookup"><span data-stu-id="0639b-104">In this quickstart, you deploy a virtual machine (VM), and then check communications to an IP address and URL and from an IP address.</span></span> <span data-ttu-id="0639b-105">You determine the cause of a communication failure and how you can resolve it.</span><span class="sxs-lookup"><span data-stu-id="0639b-105">You determine the cause of a communication failure and how you can resolve it.</span></span>

<span data-ttu-id="0639b-106">If you don't have an Azure subscription, create a [free account](https://azure.microsoft.com/free/?WT.mc_id=A261C142F) before you begin.</span><span class="sxs-lookup"><span data-stu-id="0639b-106">If you don't have an Azure subscription, create a [free account](https://azure.microsoft.com/free/?WT.mc_id=A261C142F) before you begin.</span></span>

## <a name="log-in-to-azure"></a><span data-ttu-id="0639b-107">Log in to Azure</span><span class="sxs-lookup"><span data-stu-id="0639b-107">Log in to Azure</span></span>

<span data-ttu-id="0639b-108">Log in to the Azure portal at https://portal.azure.com.</span><span class="sxs-lookup"><span data-stu-id="0639b-108">Log in to the Azure portal at https://portal.azure.com.</span></span>

## <a name="create-a-vm"></a><span data-ttu-id="0639b-109">Create a VM</span><span class="sxs-lookup"><span data-stu-id="0639b-109">Create a VM</span></span>

1. <span data-ttu-id="0639b-110">Select **+ Create a resource** found on the upper, left corner of the Azure portal.</span><span class="sxs-lookup"><span data-stu-id="0639b-110">Select **+ Create a resource** found on the upper, left corner of the Azure portal.</span></span>
2. <span data-ttu-id="0639b-111">Select **Compute**, and then select **Windows Server 2016 Datacenter** or **Ubuntu Server 17.10 VM**.</span><span class="sxs-lookup"><span data-stu-id="0639b-111">Select **Compute**, and then select **Windows Server 2016 Datacenter** or **Ubuntu Server 17.10 VM**.</span></span>
3. <span data-ttu-id="0639b-112">Enter, or select, the following information, accept the defaults for the remaining settings, and then select **OK**:</span><span class="sxs-lookup"><span data-stu-id="0639b-112">Enter, or select, the following information, accept the defaults for the remaining settings, and then select **OK**:</span></span>

    |<span data-ttu-id="0639b-113">Setting</span><span class="sxs-lookup"><span data-stu-id="0639b-113">Setting</span></span>|<span data-ttu-id="0639b-114">Value</span><span class="sxs-lookup"><span data-stu-id="0639b-114">Value</span></span>|
    |---|---|
    |<span data-ttu-id="0639b-115">Name</span><span class="sxs-lookup"><span data-stu-id="0639b-115">Name</span></span>|<span data-ttu-id="0639b-116">myVm</span><span class="sxs-lookup"><span data-stu-id="0639b-116">myVm</span></span>|
    |<span data-ttu-id="0639b-117">User name</span><span class="sxs-lookup"><span data-stu-id="0639b-117">User name</span></span>| <span data-ttu-id="0639b-118">Enter a user name of your choosing.</span><span class="sxs-lookup"><span data-stu-id="0639b-118">Enter a user name of your choosing.</span></span>|
    |<span data-ttu-id="0639b-119">Password</span><span class="sxs-lookup"><span data-stu-id="0639b-119">Password</span></span>| <span data-ttu-id="0639b-120">Enter a password of your choosing.</span><span class="sxs-lookup"><span data-stu-id="0639b-120">Enter a password of your choosing.</span></span> <span data-ttu-id="0639b-121">The password must be at least 12 characters long and meet the [defined complexity requirements](../virtual-machines/windows/faq.md?toc=%2fazure%2fnetwork-watcher%2ftoc.json#what-are-the-password-requirements-when-creating-a-vm).</span><span class="sxs-lookup"><span data-stu-id="0639b-121">The password must be at least 12 characters long and meet the [defined complexity requirements](../virtual-machines/windows/faq.md?toc=%2fazure%2fnetwork-watcher%2ftoc.json#what-are-the-password-requirements-when-creating-a-vm).</span></span>|
    |<span data-ttu-id="0639b-122">Subscription</span><span class="sxs-lookup"><span data-stu-id="0639b-122">Subscription</span></span>| <span data-ttu-id="0639b-123">Select your subscription.</span><span class="sxs-lookup"><span data-stu-id="0639b-123">Select your subscription.</span></span>|
    |<span data-ttu-id="0639b-124">Resource group</span><span class="sxs-lookup"><span data-stu-id="0639b-124">Resource group</span></span>| <span data-ttu-id="0639b-125">Select **Create new** and enter **myResourceGroup**.</span><span class="sxs-lookup"><span data-stu-id="0639b-125">Select **Create new** and enter **myResourceGroup**.</span></span>|
    |<span data-ttu-id="0639b-126">Location</span><span class="sxs-lookup"><span data-stu-id="0639b-126">Location</span></span>| <span data-ttu-id="0639b-127">Select **East US**</span><span class="sxs-lookup"><span data-stu-id="0639b-127">Select **East US**</span></span>|

4. <span data-ttu-id="0639b-128">Select a size for the VM and then select **Select**.</span><span class="sxs-lookup"><span data-stu-id="0639b-128">Select a size for the VM and then select **Select**.</span></span>
5. <span data-ttu-id="0639b-129">Under **Settings**, accept all the defaults, and select **OK**.</span><span class="sxs-lookup"><span data-stu-id="0639b-129">Under **Settings**, accept all the defaults, and select **OK**.</span></span>
6. <span data-ttu-id="0639b-130">Under **Create** of the **Summary**, select **Create** to start VM deployment.</span><span class="sxs-lookup"><span data-stu-id="0639b-130">Under **Create** of the **Summary**, select **Create** to start VM deployment.</span></span> <span data-ttu-id="0639b-131">The VM takes a few minutes to deploy.</span><span class="sxs-lookup"><span data-stu-id="0639b-131">The VM takes a few minutes to deploy.</span></span> <span data-ttu-id="0639b-132">Wait for the VM to finish deploying before continuing with the remaining steps.</span><span class="sxs-lookup"><span data-stu-id="0639b-132">Wait for the VM to finish deploying before continuing with the remaining steps.</span></span>

## <a name="test-network-communication"></a><span data-ttu-id="0639b-133">Test network communication</span><span class="sxs-lookup"><span data-stu-id="0639b-133">Test network communication</span></span>

<span data-ttu-id="0639b-134">To test network communication with Network Watcher, first enable a network watcher in at least one Azure region, and then use Network Watcher's IP flow verify capability.</span><span class="sxs-lookup"><span data-stu-id="0639b-134">To test network communication with Network Watcher, first enable a network watcher in at least one Azure region, and then use Network Watcher's IP flow verify capability.</span></span>

### <a name="enable-network-watcher"></a><span data-ttu-id="0639b-135">Enable network watcher</span><span class="sxs-lookup"><span data-stu-id="0639b-135">Enable network watcher</span></span>

<span data-ttu-id="0639b-136">If you already have a network watcher enabled in at least one region, skip to [Use IP flow verify](#use-ip-flow-verify).</span><span class="sxs-lookup"><span data-stu-id="0639b-136">If you already have a network watcher enabled in at least one region, skip to [Use IP flow verify](#use-ip-flow-verify).</span></span>

1. <span data-ttu-id="0639b-137">In the portal, select **All services**.</span><span class="sxs-lookup"><span data-stu-id="0639b-137">In the portal, select **All services**.</span></span> <span data-ttu-id="0639b-138">In the **Filter box**, enter *Network Watcher*.</span><span class="sxs-lookup"><span data-stu-id="0639b-138">In the **Filter box**, enter *Network Watcher*.</span></span> <span data-ttu-id="0639b-139">When **Network Watcher** appears in the results, select it.</span><span class="sxs-lookup"><span data-stu-id="0639b-139">When **Network Watcher** appears in the results, select it.</span></span>
2. <span data-ttu-id="0639b-140">Enable a network watcher in the East US region, because that's the region the VM was deployed to in a previous step.</span><span class="sxs-lookup"><span data-stu-id="0639b-140">Enable a network watcher in the East US region, because that's the region the VM was deployed to in a previous step.</span></span> <span data-ttu-id="0639b-141">Select **Regions**, to expand it, and then select **...** to the right of **East US**, as shown in the following picture:</span><span class="sxs-lookup"><span data-stu-id="0639b-141">Select **Regions**, to expand it, and then select **...** to the right of **East US**, as shown in the following picture:</span></span>

    ![Enable Network Watcher](./media/diagnose-vm-network-traffic-filtering-problem/enable-network-watcher.png)

3. <span data-ttu-id="0639b-143">Select **Enable Network Watcher**.</span><span class="sxs-lookup"><span data-stu-id="0639b-143">Select **Enable Network Watcher**.</span></span>

### <a name="use-ip-flow-verify"></a><span data-ttu-id="0639b-144">Use IP flow verify</span><span class="sxs-lookup"><span data-stu-id="0639b-144">Use IP flow verify</span></span>

<span data-ttu-id="0639b-145">When you create a VM, Azure allows and denies network traffic to and from the VM, by default.</span><span class="sxs-lookup"><span data-stu-id="0639b-145">When you create a VM, Azure allows and denies network traffic to and from the VM, by default.</span></span> <span data-ttu-id="0639b-146">You might later override Azure's defaults, allowing or denying additional types of traffic.</span><span class="sxs-lookup"><span data-stu-id="0639b-146">You might later override Azure's defaults, allowing or denying additional types of traffic.</span></span>

1. <span data-ttu-id="0639b-147">In the portal, select **All services**.</span><span class="sxs-lookup"><span data-stu-id="0639b-147">In the portal, select **All services**.</span></span> <span data-ttu-id="0639b-148">In the **All services** *Filter* box, enter *Network Watcher*.</span><span class="sxs-lookup"><span data-stu-id="0639b-148">In the **All services** *Filter* box, enter *Network Watcher*.</span></span> <span data-ttu-id="0639b-149">When **Network Watcher** appears in the results, select it.</span><span class="sxs-lookup"><span data-stu-id="0639b-149">When **Network Watcher** appears in the results, select it.</span></span>
2. <span data-ttu-id="0639b-150">Select **IP flow verify**, under **NETWORK DIAGNOSTIC TOOLS**.</span><span class="sxs-lookup"><span data-stu-id="0639b-150">Select **IP flow verify**, under **NETWORK DIAGNOSTIC TOOLS**.</span></span>
3. <span data-ttu-id="0639b-151">Select your subscription, enter or select the following values, and then select **Check**, as shown in the picture that follows:</span><span class="sxs-lookup"><span data-stu-id="0639b-151">Select your subscription, enter or select the following values, and then select **Check**, as shown in the picture that follows:</span></span>

    |<span data-ttu-id="0639b-152">Setting</span><span class="sxs-lookup"><span data-stu-id="0639b-152">Setting</span></span>            |<span data-ttu-id="0639b-153">Value</span><span class="sxs-lookup"><span data-stu-id="0639b-153">Value</span></span>                                                                                              |
    |---------          |---------                                                                                          |
    | <span data-ttu-id="0639b-154">Resource group</span><span class="sxs-lookup"><span data-stu-id="0639b-154">Resource group</span></span>    | <span data-ttu-id="0639b-155">Select myResourceGroup</span><span class="sxs-lookup"><span data-stu-id="0639b-155">Select myResourceGroup</span></span>                                                                            |
    | <span data-ttu-id="0639b-156">Virtual machine</span><span class="sxs-lookup"><span data-stu-id="0639b-156">Virtual machine</span></span>   | <span data-ttu-id="0639b-157">Select myVm</span><span class="sxs-lookup"><span data-stu-id="0639b-157">Select myVm</span></span>                                                                                       |
    | <span data-ttu-id="0639b-158">Network interface</span><span class="sxs-lookup"><span data-stu-id="0639b-158">Network interface</span></span> | <span data-ttu-id="0639b-159">myvm - The name of the network interface the portal created when you created the VM is different.</span><span class="sxs-lookup"><span data-stu-id="0639b-159">myvm - The name of the network interface the portal created when you created the VM is different.</span></span> |
    | <span data-ttu-id="0639b-160">Protocol</span><span class="sxs-lookup"><span data-stu-id="0639b-160">Protocol</span></span>          | <span data-ttu-id="0639b-161">TCP</span><span class="sxs-lookup"><span data-stu-id="0639b-161">TCP</span></span>                                                                                               |
    | <span data-ttu-id="0639b-162">Direction</span><span class="sxs-lookup"><span data-stu-id="0639b-162">Direction</span></span>         | <span data-ttu-id="0639b-163">Outbound</span><span class="sxs-lookup"><span data-stu-id="0639b-163">Outbound</span></span>                                                                                          |
    | <span data-ttu-id="0639b-164">Local IP address</span><span class="sxs-lookup"><span data-stu-id="0639b-164">Local IP address</span></span>  | <span data-ttu-id="0639b-165">10.0.0.4</span><span class="sxs-lookup"><span data-stu-id="0639b-165">10.0.0.4</span></span>                                                                                          |
    | <span data-ttu-id="0639b-166">Local port</span><span class="sxs-lookup"><span data-stu-id="0639b-166">Local port</span></span>      | <span data-ttu-id="0639b-167">60000</span><span class="sxs-lookup"><span data-stu-id="0639b-167">60000</span></span>                                                                                                |
    | <span data-ttu-id="0639b-168">Remote IP address</span><span class="sxs-lookup"><span data-stu-id="0639b-168">Remote IP address</span></span> | <span data-ttu-id="0639b-169">13.107.21.200 - One of the addresses for www.bing.com.</span><span class="sxs-lookup"><span data-stu-id="0639b-169">13.107.21.200 - One of the addresses for www.bing.com.</span></span>                                             |
    | <span data-ttu-id="0639b-170">Remote port</span><span class="sxs-lookup"><span data-stu-id="0639b-170">Remote port</span></span>       | <span data-ttu-id="0639b-171">80</span><span class="sxs-lookup"><span data-stu-id="0639b-171">80</span></span>                                                                                                |

    ![IP flow verify](./media/diagnose-vm-network-traffic-filtering-problem/ip-flow-verify-outbound.png)

    <span data-ttu-id="0639b-173">After a few seconds, the result returned informs you that access is allowed because of a security rule named **AllowInternetOutbound**.</span><span class="sxs-lookup"><span data-stu-id="0639b-173">After a few seconds, the result returned informs you that access is allowed because of a security rule named **AllowInternetOutbound**.</span></span> <span data-ttu-id="0639b-174">When you ran the check, Network Watcher automatically created a network watcher in the East US region, if you had an existing network watcher in a region other than the East US region before you ran the check.</span><span class="sxs-lookup"><span data-stu-id="0639b-174">When you ran the check, Network Watcher automatically created a network watcher in the East US region, if you had an existing network watcher in a region other than the East US region before you ran the check.</span></span>
4. <span data-ttu-id="0639b-175">Complete step 3 again, but change the **Remote IP address** to **172.31.0.100**.</span><span class="sxs-lookup"><span data-stu-id="0639b-175">Complete step 3 again, but change the **Remote IP address** to **172.31.0.100**.</span></span> <span data-ttu-id="0639b-176">The result returned informs you that access is denied because of a security rule named **DefaultOutboundDenyAll**.</span><span class="sxs-lookup"><span data-stu-id="0639b-176">The result returned informs you that access is denied because of a security rule named **DefaultOutboundDenyAll**.</span></span>
5. <span data-ttu-id="0639b-177">Complete step 3 again, but change the **Direction** to **Inbound**, the **Local port** to **80** and the **Remote port** to **60000**.</span><span class="sxs-lookup"><span data-stu-id="0639b-177">Complete step 3 again, but change the **Direction** to **Inbound**, the **Local port** to **80** and the **Remote port** to **60000**.</span></span> <span data-ttu-id="0639b-178">The result returned informs you that access is denied because of a security rule named **DefaultInboundDenyAll**.</span><span class="sxs-lookup"><span data-stu-id="0639b-178">The result returned informs you that access is denied because of a security rule named **DefaultInboundDenyAll**.</span></span>

<span data-ttu-id="0639b-179">Now that you know which security rules are allowing or denying traffic to or from a VM, you can determine how to resolve the problems.</span><span class="sxs-lookup"><span data-stu-id="0639b-179">Now that you know which security rules are allowing or denying traffic to or from a VM, you can determine how to resolve the problems.</span></span>

## <a name="view-details-of-a-security-rule"></a><span data-ttu-id="0639b-180">View details of a security rule</span><span class="sxs-lookup"><span data-stu-id="0639b-180">View details of a security rule</span></span>

1. <span data-ttu-id="0639b-181">To determine why the rules in steps 3-5 of [Use IP flow verify](#use-ip-flow-verify) allow or deny communication, review the effective security rules for the network interface in the VM.</span><span class="sxs-lookup"><span data-stu-id="0639b-181">To determine why the rules in steps 3-5 of [Use IP flow verify](#use-ip-flow-verify) allow or deny communication, review the effective security rules for the network interface in the VM.</span></span> <span data-ttu-id="0639b-182">In the search box at the top of the portal, enter *myvm*.</span><span class="sxs-lookup"><span data-stu-id="0639b-182">In the search box at the top of the portal, enter *myvm*.</span></span> <span data-ttu-id="0639b-183">When the  **myvm** (or whatever the name of your network interface is) network interface appears in the search results, select it.</span><span class="sxs-lookup"><span data-stu-id="0639b-183">When the  **myvm** (or whatever the name of your network interface is) network interface appears in the search results, select it.</span></span>
2. <span data-ttu-id="0639b-184">Select **Effective security rules** under **SUPPORT + TROUBLESHOOTING**, as shown in the following picture:</span><span class="sxs-lookup"><span data-stu-id="0639b-184">Select **Effective security rules** under **SUPPORT + TROUBLESHOOTING**, as shown in the following picture:</span></span>

    ![Effective security rules](./media/diagnose-vm-network-traffic-filtering-problem/effective-security-rules.png)

    <span data-ttu-id="0639b-186">In step 3 of [Use IP flow verify](#use-ip-flow-verify), you learned that the reason the communication was allowed is because of the **AllowInternetOutbound** rule.</span><span class="sxs-lookup"><span data-stu-id="0639b-186">In step 3 of [Use IP flow verify](#use-ip-flow-verify), you learned that the reason the communication was allowed is because of the **AllowInternetOutbound** rule.</span></span> <span data-ttu-id="0639b-187">You can see in the previous picture that the **DESTINATION** for the rule is **Internet**.</span><span class="sxs-lookup"><span data-stu-id="0639b-187">You can see in the previous picture that the **DESTINATION** for the rule is **Internet**.</span></span> <span data-ttu-id="0639b-188">It's not clear how 13.107.21.200, the address you tested in step 3 of [Use IP flow verify](#use-ip-flow-verify), relates to **Internet** though.</span><span class="sxs-lookup"><span data-stu-id="0639b-188">It's not clear how 13.107.21.200, the address you tested in step 3 of [Use IP flow verify](#use-ip-flow-verify), relates to **Internet** though.</span></span>
3. <span data-ttu-id="0639b-189">Select the **AllowInternetOutBound** rule, and then select **Destination**, as shown in the following picture:</span><span class="sxs-lookup"><span data-stu-id="0639b-189">Select the **AllowInternetOutBound** rule, and then select **Destination**, as shown in the following picture:</span></span>

    ![Security rule prefixes](./media/diagnose-vm-network-traffic-filtering-problem/security-rule-prefixes.png)

    <span data-ttu-id="0639b-191">One of the prefixes in the list is **12.0.0.0/6**, which encompasses the 12.0.0.1-15.255.255.254 range of IP addresses.</span><span class="sxs-lookup"><span data-stu-id="0639b-191">One of the prefixes in the list is **12.0.0.0/6**, which encompasses the 12.0.0.1-15.255.255.254 range of IP addresses.</span></span> <span data-ttu-id="0639b-192">Since 13.107.21.200 is within that address range, the **AllowInternetOutBound** rule allows the outbound traffic.</span><span class="sxs-lookup"><span data-stu-id="0639b-192">Since 13.107.21.200 is within that address range, the **AllowInternetOutBound** rule allows the outbound traffic.</span></span> <span data-ttu-id="0639b-193">Additionally, there are no higher priority (lower number) rules shown in the picture in step 2 that override this rule.</span><span class="sxs-lookup"><span data-stu-id="0639b-193">Additionally, there are no higher priority (lower number) rules shown in the picture in step 2 that override this rule.</span></span> <span data-ttu-id="0639b-194">Close the **Address prefixes** box.</span><span class="sxs-lookup"><span data-stu-id="0639b-194">Close the **Address prefixes** box.</span></span> <span data-ttu-id="0639b-195">To deny outbound communication to 13.107.21.200, you could add a security rule with a higher priority, that denies port 80 outbound to the IP address.</span><span class="sxs-lookup"><span data-stu-id="0639b-195">To deny outbound communication to 13.107.21.200, you could add a security rule with a higher priority, that denies port 80 outbound to the IP address.</span></span>
4. <span data-ttu-id="0639b-196">When you ran the outbound check to 172.131.0.100 in step 4 of [Use IP flow verify](#use-ip-flow-verify), you learned that the **DefaultOutboundDenyAll** rule denied communication.</span><span class="sxs-lookup"><span data-stu-id="0639b-196">When you ran the outbound check to 172.131.0.100 in step 4 of [Use IP flow verify](#use-ip-flow-verify), you learned that the **DefaultOutboundDenyAll** rule denied communication.</span></span> <span data-ttu-id="0639b-197">That rule equates to the **DenyAllOutBound** rule shown in the picture in step 2 that specifies **0.0.0.0/0** as the **DESTINATION**.</span><span class="sxs-lookup"><span data-stu-id="0639b-197">That rule equates to the **DenyAllOutBound** rule shown in the picture in step 2 that specifies **0.0.0.0/0** as the **DESTINATION**.</span></span> <span data-ttu-id="0639b-198">This rule denies the outbound communication to 172.131.0.100, because the address is not within the **DESTINATION** of any of the other **Outbound rules** shown in the picture.</span><span class="sxs-lookup"><span data-stu-id="0639b-198">This rule denies the outbound communication to 172.131.0.100, because the address is not within the **DESTINATION** of any of the other **Outbound rules** shown in the picture.</span></span> <span data-ttu-id="0639b-199">To allow the outbound communication, you could add a security rule with a higher priority, that allows outbound traffic to port 80 for the 172.131.0.100 address.</span><span class="sxs-lookup"><span data-stu-id="0639b-199">To allow the outbound communication, you could add a security rule with a higher priority, that allows outbound traffic to port 80 for the 172.131.0.100 address.</span></span>
5. <span data-ttu-id="0639b-200">When you ran the inbound check from 172.131.0.100 in step 5 of [Use IP flow verify](#use-ip-flow-verify), you learned that the **DefaultInboundDenyAll** rule denied communication.</span><span class="sxs-lookup"><span data-stu-id="0639b-200">When you ran the inbound check from 172.131.0.100 in step 5 of [Use IP flow verify](#use-ip-flow-verify), you learned that the **DefaultInboundDenyAll** rule denied communication.</span></span> <span data-ttu-id="0639b-201">That rule equates to the **DenyAllInBound** rule shown in the picture in step 2.</span><span class="sxs-lookup"><span data-stu-id="0639b-201">That rule equates to the **DenyAllInBound** rule shown in the picture in step 2.</span></span> <span data-ttu-id="0639b-202">The **DenyAllInBound** rule is enforced because no other higher priority rule exists that allows port 80 inbound to the VM from 172.31.0.100.</span><span class="sxs-lookup"><span data-stu-id="0639b-202">The **DenyAllInBound** rule is enforced because no other higher priority rule exists that allows port 80 inbound to the VM from 172.31.0.100.</span></span> <span data-ttu-id="0639b-203">To allow the inbound communication, you could add a security rule with a higher priority, that allows port 80 inbound from 172.31.0.100.</span><span class="sxs-lookup"><span data-stu-id="0639b-203">To allow the inbound communication, you could add a security rule with a higher priority, that allows port 80 inbound from 172.31.0.100.</span></span>

<span data-ttu-id="0639b-204">The checks in this quickstart tested Azure configuration.</span><span class="sxs-lookup"><span data-stu-id="0639b-204">The checks in this quickstart tested Azure configuration.</span></span> <span data-ttu-id="0639b-205">If the checks return expected results and you still have network problems, ensure that you don't have a firewall between your VM and the endpoint you're communicating with and that the operating system in your VM doesn't have a firewall that is allowing or denying communication.</span><span class="sxs-lookup"><span data-stu-id="0639b-205">If the checks return expected results and you still have network problems, ensure that you don't have a firewall between your VM and the endpoint you're communicating with and that the operating system in your VM doesn't have a firewall that is allowing or denying communication.</span></span>

## <a name="clean-up-resources"></a><span data-ttu-id="0639b-206">Clean up resources</span><span class="sxs-lookup"><span data-stu-id="0639b-206">Clean up resources</span></span>

<span data-ttu-id="0639b-207">When no longer needed, delete the resource group and all of the resources it contains:</span><span class="sxs-lookup"><span data-stu-id="0639b-207">When no longer needed, delete the resource group and all of the resources it contains:</span></span>

1. <span data-ttu-id="0639b-208">Enter *myResourceGroup* in the **Search** box at the top of the portal.</span><span class="sxs-lookup"><span data-stu-id="0639b-208">Enter *myResourceGroup* in the **Search** box at the top of the portal.</span></span> <span data-ttu-id="0639b-209">When you see **myResourceGroup** in the search results, select it.</span><span class="sxs-lookup"><span data-stu-id="0639b-209">When you see **myResourceGroup** in the search results, select it.</span></span>
2. <span data-ttu-id="0639b-210">Select **Delete resource group**.</span><span class="sxs-lookup"><span data-stu-id="0639b-210">Select **Delete resource group**.</span></span>
3. <span data-ttu-id="0639b-211">Enter *myResourceGroup* for **TYPE THE RESOURCE GROUP NAME:** and select **Delete**.</span><span class="sxs-lookup"><span data-stu-id="0639b-211">Enter *myResourceGroup* for **TYPE THE RESOURCE GROUP NAME:** and select **Delete**.</span></span>

## <a name="next-steps"></a><span data-ttu-id="0639b-212">Next steps</span><span class="sxs-lookup"><span data-stu-id="0639b-212">Next steps</span></span>

<span data-ttu-id="0639b-213">In this quickstart, you created a VM and diagnosed inbound and outbound network traffic filters.</span><span class="sxs-lookup"><span data-stu-id="0639b-213">In this quickstart, you created a VM and diagnosed inbound and outbound network traffic filters.</span></span> <span data-ttu-id="0639b-214">You learned that network security group rules allow or deny traffic to and from a VM.</span><span class="sxs-lookup"><span data-stu-id="0639b-214">You learned that network security group rules allow or deny traffic to and from a VM.</span></span> <span data-ttu-id="0639b-215">Learn more about [security rules](../virtual-network/security-overview.md?toc=%2fazure%2fnetwork-watcher%2ftoc.json) and how to [create security rules](../virtual-network/manage-network-security-group.md?toc=%2fazure%2fnetwork-watcher%2ftoc.json#create-a-security-rule).</span><span class="sxs-lookup"><span data-stu-id="0639b-215">Learn more about [security rules](../virtual-network/security-overview.md?toc=%2fazure%2fnetwork-watcher%2ftoc.json) and how to [create security rules](../virtual-network/manage-network-security-group.md?toc=%2fazure%2fnetwork-watcher%2ftoc.json#create-a-security-rule).</span></span>

<span data-ttu-id="0639b-216">Even with the proper network traffic filters in place, communication to a VM can still fail, due to routing configuration.</span><span class="sxs-lookup"><span data-stu-id="0639b-216">Even with the proper network traffic filters in place, communication to a VM can still fail, due to routing configuration.</span></span> <span data-ttu-id="0639b-217">To learn how to diagnose VM network routing problems, see [Diagnose VM routing problems](diagnose-vm-network-routing-problem.md) or, to diagnose outbound routing, latency, and traffic filtering problems, with one tool, see [Connection troubleshoot](network-watcher-connectivity-portal.md).</span><span class="sxs-lookup"><span data-stu-id="0639b-217">To learn how to diagnose VM network routing problems, see [Diagnose VM routing problems](diagnose-vm-network-routing-problem.md) or, to diagnose outbound routing, latency, and traffic filtering problems, with one tool, see [Connection troubleshoot](network-watcher-connectivity-portal.md).</span></span>