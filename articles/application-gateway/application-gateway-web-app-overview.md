---
title: Overview of multi-tenant back ends with Azure Application Gateway
description: This page provides an overview of the Application Gateway support for multi-tenant back ends.
services: application-gateway
author: vhorne
ms.service: application-gateway
ms.topic: article
ms.date: 8/1/2018
ms.author: victorh
ms.openlocfilehash: c0084580a2e4860f24aecd37232f38da2e55ccc8
ms.sourcegitcommit: d1451406a010fd3aa854dc8e5b77dc5537d8050e
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 09/13/2018
ms.locfileid: "44856938"
---
# <a name="application-gateway-support-for-multi-tenant-back-ends"></a><span data-ttu-id="3192c-103">Application Gateway support for multi-tenant back ends</span><span class="sxs-lookup"><span data-stu-id="3192c-103">Application Gateway support for multi-tenant back ends</span></span>

<span data-ttu-id="3192c-104">Azure Application Gateway supports virtual machine scale sets, network interfaces, public/private IP, or fully qualified domain name (FQDN) as part of its back-end pools.</span><span class="sxs-lookup"><span data-stu-id="3192c-104">Azure Application Gateway supports virtual machine scale sets, network interfaces, public/private IP, or fully qualified domain name (FQDN) as part of its back-end pools.</span></span> <span data-ttu-id="3192c-105">By default, application gateway does not change the incoming HTTP host header from the client and sends the header unaltered to the back end.</span><span class="sxs-lookup"><span data-stu-id="3192c-105">By default, application gateway does not change the incoming HTTP host header from the client and sends the header unaltered to the back end.</span></span> <span data-ttu-id="3192c-106">There are many services like [Azure Web Apps](../app-service/app-service-web-overview.md) that are multi-tenant in nature and rely on a specific host header or SNI extension to resolve to the correct endpoint.</span><span class="sxs-lookup"><span data-stu-id="3192c-106">There are many services like [Azure Web Apps](../app-service/app-service-web-overview.md) that are multi-tenant in nature and rely on a specific host header or SNI extension to resolve to the correct endpoint.</span></span> <span data-ttu-id="3192c-107">Application Gateway now supports the ability for users to overwrite the incoming HTTP host header based on the back-end HTTP settings.</span><span class="sxs-lookup"><span data-stu-id="3192c-107">Application Gateway now supports the ability for users to overwrite the incoming HTTP host header based on the back-end HTTP settings.</span></span> <span data-ttu-id="3192c-108">This capability enables support for multi-tenant back ends Azure web apps and API management.</span><span class="sxs-lookup"><span data-stu-id="3192c-108">This capability enables support for multi-tenant back ends Azure web apps and API management.</span></span> <span data-ttu-id="3192c-109">This capability is available for both the standard and WAF SKU.</span><span class="sxs-lookup"><span data-stu-id="3192c-109">This capability is available for both the standard and WAF SKU.</span></span> <span data-ttu-id="3192c-110">Multi-tenant back-end support also works with SSL termination and end to end SSL scenarios.</span><span class="sxs-lookup"><span data-stu-id="3192c-110">Multi-tenant back-end support also works with SSL termination and end to end SSL scenarios.</span></span>

> [!NOTE]
> <span data-ttu-id="3192c-111">Authentication certificate setup is not required for trusted Azure services such as Azure Web Apps.</span><span class="sxs-lookup"><span data-stu-id="3192c-111">Authentication certificate setup is not required for trusted Azure services such as Azure Web Apps.</span></span>

![web app scenario](./media/application-gateway-web-app-overview/scenario.png)

<span data-ttu-id="3192c-113">The ability to specify a host override is defined at the HTTP settings and can be applied to any back-end pool during rule creation.</span><span class="sxs-lookup"><span data-stu-id="3192c-113">The ability to specify a host override is defined at the HTTP settings and can be applied to any back-end pool during rule creation.</span></span> <span data-ttu-id="3192c-114">Multi-tenant back ends support the following two ways of overriding host header and SNI extension.</span><span class="sxs-lookup"><span data-stu-id="3192c-114">Multi-tenant back ends support the following two ways of overriding host header and SNI extension.</span></span>

1. <span data-ttu-id="3192c-115">The ability to set the host name to a fixed value in the HTTP settings.</span><span class="sxs-lookup"><span data-stu-id="3192c-115">The ability to set the host name to a fixed value in the HTTP settings.</span></span> <span data-ttu-id="3192c-116">This capability ensures that the host header is overridden to this value for all traffic to the back-end pool where the HTTP settings are applied.</span><span class="sxs-lookup"><span data-stu-id="3192c-116">This capability ensures that the host header is overridden to this value for all traffic to the back-end pool where the HTTP settings are applied.</span></span> <span data-ttu-id="3192c-117">When using end to end SSL, this overridden host name is used in the SNI extension.</span><span class="sxs-lookup"><span data-stu-id="3192c-117">When using end to end SSL, this overridden host name is used in the SNI extension.</span></span> <span data-ttu-id="3192c-118">This capability enables scenarios where a back-end pool farm expects a host header that is different from the incoming customer host header.</span><span class="sxs-lookup"><span data-stu-id="3192c-118">This capability enables scenarios where a back-end pool farm expects a host header that is different from the incoming customer host header.</span></span>

2. <span data-ttu-id="3192c-119">The ability to derive the host name from the IP or FQDN of the back-end pool members.</span><span class="sxs-lookup"><span data-stu-id="3192c-119">The ability to derive the host name from the IP or FQDN of the back-end pool members.</span></span> <span data-ttu-id="3192c-120">HTTP settings also provide an option to pick the host name from a back-end pool member's FQDN if configured with the option to derive host name from an individual back-end pool member.</span><span class="sxs-lookup"><span data-stu-id="3192c-120">HTTP settings also provide an option to pick the host name from a back-end pool member's FQDN if configured with the option to derive host name from an individual back-end pool member.</span></span> <span data-ttu-id="3192c-121">When using end to end SSL, this host name is derived from the FQDN and is used in the SNI extension.</span><span class="sxs-lookup"><span data-stu-id="3192c-121">When using end to end SSL, this host name is derived from the FQDN and is used in the SNI extension.</span></span> <span data-ttu-id="3192c-122">This capability enables scenarios where a back-end pool can have two or more multi-tenant PaaS services like Azure web apps and the request's host header to each member contains the host name derived from its FQDN.</span><span class="sxs-lookup"><span data-stu-id="3192c-122">This capability enables scenarios where a back-end pool can have two or more multi-tenant PaaS services like Azure web apps and the request's host header to each member contains the host name derived from its FQDN.</span></span>

> [!NOTE]
> <span data-ttu-id="3192c-123">In both of the preceding cases the settings only affect the live traffic behavior and not the health probe behavior.</span><span class="sxs-lookup"><span data-stu-id="3192c-123">In both of the preceding cases the settings only affect the live traffic behavior and not the health probe behavior.</span></span> <span data-ttu-id="3192c-124">Custom probes already support the ability to specify a host header in the probe configuration.</span><span class="sxs-lookup"><span data-stu-id="3192c-124">Custom probes already support the ability to specify a host header in the probe configuration.</span></span> <span data-ttu-id="3192c-125">Custom probes now also support the ability to derive the host header behavior from the currently configured HTTP settings.</span><span class="sxs-lookup"><span data-stu-id="3192c-125">Custom probes now also support the ability to derive the host header behavior from the currently configured HTTP settings.</span></span> <span data-ttu-id="3192c-126">This configuration can be specified by using the `PickHostNameFromBackendHttpSettings` parameter in the probe configuration.</span><span class="sxs-lookup"><span data-stu-id="3192c-126">This configuration can be specified by using the `PickHostNameFromBackendHttpSettings` parameter in the probe configuration.</span></span> <span data-ttu-id="3192c-127">For end to end functionality to work, both the probe and the HTTP settings must be modified to reflect the correct configuration.</span><span class="sxs-lookup"><span data-stu-id="3192c-127">For end to end functionality to work, both the probe and the HTTP settings must be modified to reflect the correct configuration.</span></span>

<span data-ttu-id="3192c-128">With this capability, customers specify the options in the HTTP settings and custom probes to the appropriate configuration.</span><span class="sxs-lookup"><span data-stu-id="3192c-128">With this capability, customers specify the options in the HTTP settings and custom probes to the appropriate configuration.</span></span> <span data-ttu-id="3192c-129">This setting is then tied to a listener and a back-end pool by using a rule.</span><span class="sxs-lookup"><span data-stu-id="3192c-129">This setting is then tied to a listener and a back-end pool by using a rule.</span></span>

## <a name="next-steps"></a><span data-ttu-id="3192c-130">Next steps</span><span class="sxs-lookup"><span data-stu-id="3192c-130">Next steps</span></span>

<span data-ttu-id="3192c-131">Learn how to set up an application gateway with a web app as a back-end pool member by visiting: [Configure App Service web apps with Application Gateway](application-gateway-web-app-powershell.md)</span><span class="sxs-lookup"><span data-stu-id="3192c-131">Learn how to set up an application gateway with a web app as a back-end pool member by visiting: [Configure App Service web apps with Application Gateway](application-gateway-web-app-powershell.md)</span></span>
