---
title: Compare Event Grid, routing for IoT Hub | Microsoft Docs
description: IoT Hub offers its own message routing service, but also integrates with Event Grid for event publishing. Compare the two features.
author: kgremban
manager: timlt
ms.service: iot-hub
services: iot-hub
ms.topic: conceptual
ms.date: 01/30/2018
ms.author: kgremban
ms.openlocfilehash: af03f737c082a7fda90104303e018f7b417729b9
ms.sourcegitcommit: d1451406a010fd3aa854dc8e5b77dc5537d8050e
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 09/13/2018
ms.locfileid: "44865842"
---
# <a name="compare-message-routing-and-event-grid-for-iot-hub"></a><span data-ttu-id="f3621-104">Compare message routing and Event Grid for IoT Hub</span><span class="sxs-lookup"><span data-stu-id="f3621-104">Compare message routing and Event Grid for IoT Hub</span></span>

<span data-ttu-id="f3621-105">Azure IoT Hub provides the capability to stream data from your connected devices, and integrate that data into your business applications.</span><span class="sxs-lookup"><span data-stu-id="f3621-105">Azure IoT Hub provides the capability to stream data from your connected devices, and integrate that data into your business applications.</span></span> <span data-ttu-id="f3621-106">IoT Hub offers two methods for integrating IoT events into other Azure services or business applications.</span><span class="sxs-lookup"><span data-stu-id="f3621-106">IoT Hub offers two methods for integrating IoT events into other Azure services or business applications.</span></span> <span data-ttu-id="f3621-107">This article discusses the two features that provide this capability, so that you can choose which option is best for your scenario.</span><span class="sxs-lookup"><span data-stu-id="f3621-107">This article discusses the two features that provide this capability, so that you can choose which option is best for your scenario.</span></span>

* <span data-ttu-id="f3621-108">**IoT Hub message routing**: This IoT Hub feature enables users to [route device-to-cloud messages](iot-hub-devguide-messages-read-custom.md) to service endpoints like Azure Storage containers, Event Hubs, Service Bus queues, and Service Bus topics.</span><span class="sxs-lookup"><span data-stu-id="f3621-108">**IoT Hub message routing**: This IoT Hub feature enables users to [route device-to-cloud messages](iot-hub-devguide-messages-read-custom.md) to service endpoints like Azure Storage containers, Event Hubs, Service Bus queues, and Service Bus topics.</span></span> <span data-ttu-id="f3621-109">Routing rules provide the flexibility to perform query-based routes.</span><span class="sxs-lookup"><span data-stu-id="f3621-109">Routing rules provide the flexibility to perform query-based routes.</span></span> <span data-ttu-id="f3621-110">They also enable [critical alerts](iot-hub-devguide-messages-d2c.md) that trigger actions through queries, and can be based on the message headers and body.</span><span class="sxs-lookup"><span data-stu-id="f3621-110">They also enable [critical alerts](iot-hub-devguide-messages-d2c.md) that trigger actions through queries, and can be based on the message headers and body.</span></span> 
* <span data-ttu-id="f3621-111">**IoT Hub integration with Event Grid**: Azure Event Grid is a fully managed event routing service that uses a publish-subscribe model.</span><span class="sxs-lookup"><span data-stu-id="f3621-111">**IoT Hub integration with Event Grid**: Azure Event Grid is a fully managed event routing service that uses a publish-subscribe model.</span></span> <span data-ttu-id="f3621-112">IoT Hub and Event Grid work together to [integrate IoT Hub events into Azure and non-Azure services](iot-hub-event-grid.md), in near-real time.</span><span class="sxs-lookup"><span data-stu-id="f3621-112">IoT Hub and Event Grid work together to [integrate IoT Hub events into Azure and non-Azure services](iot-hub-event-grid.md), in near-real time.</span></span> 

## <a name="similarities-and-differences"></a><span data-ttu-id="f3621-113">Similarities and differences</span><span class="sxs-lookup"><span data-stu-id="f3621-113">Similarities and differences</span></span>

<span data-ttu-id="f3621-114">While both message routing and Event Grid enable alert configuration, there are some key differences between the two.</span><span class="sxs-lookup"><span data-stu-id="f3621-114">While both message routing and Event Grid enable alert configuration, there are some key differences between the two.</span></span> <span data-ttu-id="f3621-115">Refer to the following table for details:</span><span class="sxs-lookup"><span data-stu-id="f3621-115">Refer to the following table for details:</span></span>

| <span data-ttu-id="f3621-116">Feature</span><span class="sxs-lookup"><span data-stu-id="f3621-116">Feature</span></span> | <span data-ttu-id="f3621-117">IoT Hub message routing</span><span class="sxs-lookup"><span data-stu-id="f3621-117">IoT Hub message routing</span></span> | <span data-ttu-id="f3621-118">IoT Hub integration with Event Grid</span><span class="sxs-lookup"><span data-stu-id="f3621-118">IoT Hub integration with Event Grid</span></span> |
| ------- | --------------- | ---------- |
| <span data-ttu-id="f3621-119">**Device messages**</span><span class="sxs-lookup"><span data-stu-id="f3621-119">**Device messages**</span></span> | <span data-ttu-id="f3621-120">Yes, message routing can be used for telemetry data.</span><span class="sxs-lookup"><span data-stu-id="f3621-120">Yes, message routing can be used for telemetry data.</span></span> | <span data-ttu-id="f3621-121">No, Event Grid can only be used for non-telemetry IoT Hub events.</span><span class="sxs-lookup"><span data-stu-id="f3621-121">No, Event Grid can only be used for non-telemetry IoT Hub events.</span></span> |
| <span data-ttu-id="f3621-122">**Event type**</span><span class="sxs-lookup"><span data-stu-id="f3621-122">**Event type**</span></span> | <span data-ttu-id="f3621-123">Yes, message routing can report twin changes and device lifecycle events.</span><span class="sxs-lookup"><span data-stu-id="f3621-123">Yes, message routing can report twin changes and device lifecycle events.</span></span> | <span data-ttu-id="f3621-124">Yes, Event Grid can report when devices are created, deleted, connected and disconnected from IoT Hub</span><span class="sxs-lookup"><span data-stu-id="f3621-124">Yes, Event Grid can report when devices are created, deleted, connected and disconnected from IoT Hub</span></span> |
| <span data-ttu-id="f3621-125">**Ordering**</span><span class="sxs-lookup"><span data-stu-id="f3621-125">**Ordering**</span></span> | <span data-ttu-id="f3621-126">Yes, ordering of events is maintained.</span><span class="sxs-lookup"><span data-stu-id="f3621-126">Yes, ordering of events is maintained.</span></span>  | <span data-ttu-id="f3621-127">No, order of events is not guaranteed.</span><span class="sxs-lookup"><span data-stu-id="f3621-127">No, order of events is not guaranteed.</span></span> | 
| <span data-ttu-id="f3621-128">**Maximum message size**</span><span class="sxs-lookup"><span data-stu-id="f3621-128">**Maximum message size**</span></span> | <span data-ttu-id="f3621-129">256 KB, device-to-cloud</span><span class="sxs-lookup"><span data-stu-id="f3621-129">256 KB, device-to-cloud</span></span> | <span data-ttu-id="f3621-130">64 KB</span><span class="sxs-lookup"><span data-stu-id="f3621-130">64 KB</span></span> |
| <span data-ttu-id="f3621-131">**Filtering**</span><span class="sxs-lookup"><span data-stu-id="f3621-131">**Filtering**</span></span> | <span data-ttu-id="f3621-132">Rich filtering through SQL-like language supports filtering on message headers and bodies.</span><span class="sxs-lookup"><span data-stu-id="f3621-132">Rich filtering through SQL-like language supports filtering on message headers and bodies.</span></span> <span data-ttu-id="f3621-133">For examples, see [IoT Hub query language](iot-hub-devguide-query-language.md).</span><span class="sxs-lookup"><span data-stu-id="f3621-133">For examples, see [IoT Hub query language](iot-hub-devguide-query-language.md).</span></span> | <span data-ttu-id="f3621-134">Filtering based on suffix/prefix of device IDs, which works well for hierarchical services like storage.</span><span class="sxs-lookup"><span data-stu-id="f3621-134">Filtering based on suffix/prefix of device IDs, which works well for hierarchical services like storage.</span></span> |
| <span data-ttu-id="f3621-135">**Endpoints**</span><span class="sxs-lookup"><span data-stu-id="f3621-135">**Endpoints**</span></span> | <ul><li><span data-ttu-id="f3621-136">Event Hubs</span><span class="sxs-lookup"><span data-stu-id="f3621-136">Event Hubs</span></span></li> <li><span data-ttu-id="f3621-137">Storage blob</span><span class="sxs-lookup"><span data-stu-id="f3621-137">Storage blob</span></span></li> <li><span data-ttu-id="f3621-138">Service Bus queue</span><span class="sxs-lookup"><span data-stu-id="f3621-138">Service Bus queue</span></span></li> <li><span data-ttu-id="f3621-139">Service Bus topics</span><span class="sxs-lookup"><span data-stu-id="f3621-139">Service Bus topics</span></span></li></ul><br><span data-ttu-id="f3621-140">Paid IoT Hub SKUs (S1, S2, and S3) are limited to 10 custom endpoints.</span><span class="sxs-lookup"><span data-stu-id="f3621-140">Paid IoT Hub SKUs (S1, S2, and S3) are limited to 10 custom endpoints.</span></span> <span data-ttu-id="f3621-141">100 routes can be created per IoT Hub.</span><span class="sxs-lookup"><span data-stu-id="f3621-141">100 routes can be created per IoT Hub.</span></span> | <ul><li><span data-ttu-id="f3621-142">Azure Functions</span><span class="sxs-lookup"><span data-stu-id="f3621-142">Azure Functions</span></span></li> <li><span data-ttu-id="f3621-143">Azure Automation</span><span class="sxs-lookup"><span data-stu-id="f3621-143">Azure Automation</span></span></li> <li><span data-ttu-id="f3621-144">Event Hubs</span><span class="sxs-lookup"><span data-stu-id="f3621-144">Event Hubs</span></span></li> <li><span data-ttu-id="f3621-145">Logic Apps</span><span class="sxs-lookup"><span data-stu-id="f3621-145">Logic Apps</span></span></li> <li><span data-ttu-id="f3621-146">Storage Blob</span><span class="sxs-lookup"><span data-stu-id="f3621-146">Storage Blob</span></span></li> <li><span data-ttu-id="f3621-147">Custom Topics</span><span class="sxs-lookup"><span data-stu-id="f3621-147">Custom Topics</span></span></li> <li><span data-ttu-id="f3621-148">Third-party services through WebHooks</span><span class="sxs-lookup"><span data-stu-id="f3621-148">Third-party services through WebHooks</span></span></li></ul><br><span data-ttu-id="f3621-149">For the most up-to-date list of endpoints, see [Event Grid event handlers](../event-grid/overview.md#event-handlers).</span><span class="sxs-lookup"><span data-stu-id="f3621-149">For the most up-to-date list of endpoints, see [Event Grid event handlers](../event-grid/overview.md#event-handlers).</span></span> |
| <span data-ttu-id="f3621-150">**Cost**</span><span class="sxs-lookup"><span data-stu-id="f3621-150">**Cost**</span></span> | <span data-ttu-id="f3621-151">There is no separate charge for message routing.</span><span class="sxs-lookup"><span data-stu-id="f3621-151">There is no separate charge for message routing.</span></span> <span data-ttu-id="f3621-152">Only ingress of telemetry into IoT Hub is charged.</span><span class="sxs-lookup"><span data-stu-id="f3621-152">Only ingress of telemetry into IoT Hub is charged.</span></span> <span data-ttu-id="f3621-153">For example, if you have a message routed to three different endpoints, you are billed for only one message.</span><span class="sxs-lookup"><span data-stu-id="f3621-153">For example, if you have a message routed to three different endpoints, you are billed for only one message.</span></span> | <span data-ttu-id="f3621-154">There is no charge from IoT Hub.</span><span class="sxs-lookup"><span data-stu-id="f3621-154">There is no charge from IoT Hub.</span></span> <span data-ttu-id="f3621-155">Event Grid offers the first 100,000 operations per month for free, and then $0.60 per million operations after that.</span><span class="sxs-lookup"><span data-stu-id="f3621-155">Event Grid offers the first 100,000 operations per month for free, and then $0.60 per million operations after that.</span></span> |

<span data-ttu-id="f3621-156">IoT Hub message routing and Event Grid have similarities too, some of which are detailed in the following table:</span><span class="sxs-lookup"><span data-stu-id="f3621-156">IoT Hub message routing and Event Grid have similarities too, some of which are detailed in the following table:</span></span>

| <span data-ttu-id="f3621-157">Feature</span><span class="sxs-lookup"><span data-stu-id="f3621-157">Feature</span></span> | <span data-ttu-id="f3621-158">IoT Hub message routing</span><span class="sxs-lookup"><span data-stu-id="f3621-158">IoT Hub message routing</span></span> | <span data-ttu-id="f3621-159">IoT Hub integration with Event Grid</span><span class="sxs-lookup"><span data-stu-id="f3621-159">IoT Hub integration with Event Grid</span></span> |
| ------- | --------------- | ---------- |
| <span data-ttu-id="f3621-160">**Reliability**</span><span class="sxs-lookup"><span data-stu-id="f3621-160">**Reliability**</span></span> | <span data-ttu-id="f3621-161">High: Delivers each message to the endpoint at least once for each route.</span><span class="sxs-lookup"><span data-stu-id="f3621-161">High: Delivers each message to the endpoint at least once for each route.</span></span> <span data-ttu-id="f3621-162">Expires all messages that are not delivered within one hour.</span><span class="sxs-lookup"><span data-stu-id="f3621-162">Expires all messages that are not delivered within one hour.</span></span> | <span data-ttu-id="f3621-163">High: Delivers each message to the webhook at least once for each subscription.</span><span class="sxs-lookup"><span data-stu-id="f3621-163">High: Delivers each message to the webhook at least once for each subscription.</span></span> <span data-ttu-id="f3621-164">Expires all events that are not delivered within 24 hours.</span><span class="sxs-lookup"><span data-stu-id="f3621-164">Expires all events that are not delivered within 24 hours.</span></span> | 
| <span data-ttu-id="f3621-165">**Scalability**</span><span class="sxs-lookup"><span data-stu-id="f3621-165">**Scalability**</span></span> | <span data-ttu-id="f3621-166">High: Optimized to support millions of simultaneously connected devices sending billions of messages.</span><span class="sxs-lookup"><span data-stu-id="f3621-166">High: Optimized to support millions of simultaneously connected devices sending billions of messages.</span></span> | <span data-ttu-id="f3621-167">High: Capable of routing 10,000,000 events per second per region.</span><span class="sxs-lookup"><span data-stu-id="f3621-167">High: Capable of routing 10,000,000 events per second per region.</span></span> |
| <span data-ttu-id="f3621-168">**Latency**</span><span class="sxs-lookup"><span data-stu-id="f3621-168">**Latency**</span></span> | <span data-ttu-id="f3621-169">Low: Near-real time.</span><span class="sxs-lookup"><span data-stu-id="f3621-169">Low: Near-real time.</span></span> | <span data-ttu-id="f3621-170">Low: Near-real time.</span><span class="sxs-lookup"><span data-stu-id="f3621-170">Low: Near-real time.</span></span> |
| <span data-ttu-id="f3621-171">**Send to multiple endpoints**</span><span class="sxs-lookup"><span data-stu-id="f3621-171">**Send to multiple endpoints**</span></span> | <span data-ttu-id="f3621-172">Yes, send a single message to multiple endpoints.</span><span class="sxs-lookup"><span data-stu-id="f3621-172">Yes, send a single message to multiple endpoints.</span></span> | <span data-ttu-id="f3621-173">Yes, send a single message to multiple endpoints.</span><span class="sxs-lookup"><span data-stu-id="f3621-173">Yes, send a single message to multiple endpoints.</span></span>  | 
| <span data-ttu-id="f3621-174">**Security**</span><span class="sxs-lookup"><span data-stu-id="f3621-174">**Security**</span></span> | <span data-ttu-id="f3621-175">Iot Hub provides per-device identity and revocable access control.</span><span class="sxs-lookup"><span data-stu-id="f3621-175">Iot Hub provides per-device identity and revocable access control.</span></span> <span data-ttu-id="f3621-176">For more information, see the [IoT Hub access control](iot-hub-devguide-security.md).</span><span class="sxs-lookup"><span data-stu-id="f3621-176">For more information, see the [IoT Hub access control](iot-hub-devguide-security.md).</span></span> | <span data-ttu-id="f3621-177">Event Grid provides validation at three points: event subscriptions, event publishing, and webhook event delivery.</span><span class="sxs-lookup"><span data-stu-id="f3621-177">Event Grid provides validation at three points: event subscriptions, event publishing, and webhook event delivery.</span></span> <span data-ttu-id="f3621-178">For more information, see [Event Grid security and authentication](../event-grid/security-authentication.md).</span><span class="sxs-lookup"><span data-stu-id="f3621-178">For more information, see [Event Grid security and authentication](../event-grid/security-authentication.md).</span></span> |

## <a name="how-to-choose"></a><span data-ttu-id="f3621-179">How to choose</span><span class="sxs-lookup"><span data-stu-id="f3621-179">How to choose</span></span>

<span data-ttu-id="f3621-180">IoT Hub message routing and the IoT Hub integration with Event Grid perform different actions to achieve similar results.</span><span class="sxs-lookup"><span data-stu-id="f3621-180">IoT Hub message routing and the IoT Hub integration with Event Grid perform different actions to achieve similar results.</span></span> <span data-ttu-id="f3621-181">They both take information from your IoT Hub solution and pass it on so that other services can react.</span><span class="sxs-lookup"><span data-stu-id="f3621-181">They both take information from your IoT Hub solution and pass it on so that other services can react.</span></span> <span data-ttu-id="f3621-182">So how do you decide which one to use?</span><span class="sxs-lookup"><span data-stu-id="f3621-182">So how do you decide which one to use?</span></span> <span data-ttu-id="f3621-183">In addition to the data from the previous section, use the following questions to help guide your decision:</span><span class="sxs-lookup"><span data-stu-id="f3621-183">In addition to the data from the previous section, use the following questions to help guide your decision:</span></span> 

* <span data-ttu-id="f3621-184">**What kind of data are you sending to the endpoints?**</span><span class="sxs-lookup"><span data-stu-id="f3621-184">**What kind of data are you sending to the endpoints?**</span></span>

   <span data-ttu-id="f3621-185">Use IoT Hub message routing when you have to send telemetry data to other services.</span><span class="sxs-lookup"><span data-stu-id="f3621-185">Use IoT Hub message routing when you have to send telemetry data to other services.</span></span> <span data-ttu-id="f3621-186">Message routing also enables querying message headers and message bodies.</span><span class="sxs-lookup"><span data-stu-id="f3621-186">Message routing also enables querying message headers and message bodies.</span></span> 

   <span data-ttu-id="f3621-187">The IoT Hub integration with Event Grid works with events that occur in the IoT Hub service.</span><span class="sxs-lookup"><span data-stu-id="f3621-187">The IoT Hub integration with Event Grid works with events that occur in the IoT Hub service.</span></span> <span data-ttu-id="f3621-188">These IoT Hub events include device created, deleted, connected and disconnected.</span><span class="sxs-lookup"><span data-stu-id="f3621-188">These IoT Hub events include device created, deleted, connected and disconnected.</span></span> 

* <span data-ttu-id="f3621-189">**What endpoints need to receive this information?**</span><span class="sxs-lookup"><span data-stu-id="f3621-189">**What endpoints need to receive this information?**</span></span>

   <span data-ttu-id="f3621-190">IoT Hub message routing supports limited endpoints, but you can build connectors to reroute the data and events to additional endpoints.</span><span class="sxs-lookup"><span data-stu-id="f3621-190">IoT Hub message routing supports limited endpoints, but you can build connectors to reroute the data and events to additional endpoints.</span></span> <span data-ttu-id="f3621-191">For a complete list of supported endpoints, see the table in the previous section.</span><span class="sxs-lookup"><span data-stu-id="f3621-191">For a complete list of supported endpoints, see the table in the previous section.</span></span> 

   <span data-ttu-id="f3621-192">The IoT Hub integration with Event Grid supports more endpoints.</span><span class="sxs-lookup"><span data-stu-id="f3621-192">The IoT Hub integration with Event Grid supports more endpoints.</span></span> <span data-ttu-id="f3621-193">It also works with webhooks to extend routing outside of the Azure service ecosystem and into third-party business applications.</span><span class="sxs-lookup"><span data-stu-id="f3621-193">It also works with webhooks to extend routing outside of the Azure service ecosystem and into third-party business applications.</span></span> 

* <span data-ttu-id="f3621-194">**Does it matter if your data arrives in order?**</span><span class="sxs-lookup"><span data-stu-id="f3621-194">**Does it matter if your data arrives in order?**</span></span>

   <span data-ttu-id="f3621-195">IoT Hub message routing maintains the order in which messages are sent, so that they arrive in the same way.</span><span class="sxs-lookup"><span data-stu-id="f3621-195">IoT Hub message routing maintains the order in which messages are sent, so that they arrive in the same way.</span></span>

   <span data-ttu-id="f3621-196">Event Grid does not guarantee that endpoints will receive events in the same order that they occurred.</span><span class="sxs-lookup"><span data-stu-id="f3621-196">Event Grid does not guarantee that endpoints will receive events in the same order that they occurred.</span></span> <span data-ttu-id="f3621-197">However, the event schema does include a timestamp that can be used to identify the order after the events arrive at the endpoint.</span><span class="sxs-lookup"><span data-stu-id="f3621-197">However, the event schema does include a timestamp that can be used to identify the order after the events arrive at the endpoint.</span></span> 

## <a name="next-steps"></a><span data-ttu-id="f3621-198">Next steps</span><span class="sxs-lookup"><span data-stu-id="f3621-198">Next steps</span></span>

* <span data-ttu-id="f3621-199">Learn more about [IoT Hub message routing](iot-hub-devguide-messages-d2c.md) and the [IoT Hub endpoints](iot-hub-devguide-endpoints.md).</span><span class="sxs-lookup"><span data-stu-id="f3621-199">Learn more about [IoT Hub message routing](iot-hub-devguide-messages-d2c.md) and the [IoT Hub endpoints](iot-hub-devguide-endpoints.md).</span></span>

* <span data-ttu-id="f3621-200">Learn more about [Azure Event Grid](../event-grid/overview.md)</span><span class="sxs-lookup"><span data-stu-id="f3621-200">Learn more about [Azure Event Grid](../event-grid/overview.md)</span></span>

* <span data-ttu-id="f3621-201">Try out the Event Grid integration by [Sending email notifications about Azure IoT Hub events using Logic Apps](../event-grid/publish-iot-hub-events-to-logic-apps.md)</span><span class="sxs-lookup"><span data-stu-id="f3621-201">Try out the Event Grid integration by [Sending email notifications about Azure IoT Hub events using Logic Apps](../event-grid/publish-iot-hub-events-to-logic-apps.md)</span></span>