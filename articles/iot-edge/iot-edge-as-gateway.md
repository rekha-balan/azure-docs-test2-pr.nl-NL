---
title: Use Azure IoT Edge devices as gateways | Microsoft Docs
description: Use Azure IoT Edge to create a transparent, opaque or proxy gateway device that sends data from multiple downstream devices to the cloud or processes it locally.
author: kgremban
manager: timlt
ms.author: kgremban
ms.date: 11/27/2017
ms.topic: conceptual
ms.service: iot-edge
services: iot-edge
ms.openlocfilehash: 0e085d6c2962ec2a2324bfc134b0e201df04a336
ms.sourcegitcommit: d1451406a010fd3aa854dc8e5b77dc5537d8050e
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 09/13/2018
ms.locfileid: "44866257"
---
# <a name="how-an-iot-edge-device-can-be-used-as-a-gateway"></a><span data-ttu-id="a7e82-103">How an IoT Edge device can be used as a gateway</span><span class="sxs-lookup"><span data-stu-id="a7e82-103">How an IoT Edge device can be used as a gateway</span></span>

<span data-ttu-id="a7e82-104">The purpose of gateways in IoT solutions is specific to the solution and combine device connectivity with edge analytics.</span><span class="sxs-lookup"><span data-stu-id="a7e82-104">The purpose of gateways in IoT solutions is specific to the solution and combine device connectivity with edge analytics.</span></span> <span data-ttu-id="a7e82-105">Azure IoT Edge can be used to satisfy all needs for an IoT gateway regardless of whether they are related to connectivity, identity, or edge analytics.</span><span class="sxs-lookup"><span data-stu-id="a7e82-105">Azure IoT Edge can be used to satisfy all needs for an IoT gateway regardless of whether they are related to connectivity, identity, or edge analytics.</span></span> <span data-ttu-id="a7e82-106">Gateway patterns in this article only refer to characteristics of downstream device connectivity and device identity, not how device data is processed on the gateway.</span><span class="sxs-lookup"><span data-stu-id="a7e82-106">Gateway patterns in this article only refer to characteristics of downstream device connectivity and device identity, not how device data is processed on the gateway.</span></span>

## <a name="patterns"></a><span data-ttu-id="a7e82-107">Patterns</span><span class="sxs-lookup"><span data-stu-id="a7e82-107">Patterns</span></span>
<span data-ttu-id="a7e82-108">There are three patterns for using an IoT Edge device as a gateway: transparent, protocol translation, and identity translation:</span><span class="sxs-lookup"><span data-stu-id="a7e82-108">There are three patterns for using an IoT Edge device as a gateway: transparent, protocol translation, and identity translation:</span></span>
* <span data-ttu-id="a7e82-109">**Transparent** – Devices that theoretically could connect to IoT Hub can connect to a gateway device instead.</span><span class="sxs-lookup"><span data-stu-id="a7e82-109">**Transparent** – Devices that theoretically could connect to IoT Hub can connect to a gateway device instead.</span></span> <span data-ttu-id="a7e82-110">This implies that the downstream devices have their own IoT Hub identities and are using any of the  MQTT, AMQP, or HTTP protocols.</span><span class="sxs-lookup"><span data-stu-id="a7e82-110">This implies that the downstream devices have their own IoT Hub identities and are using any of the  MQTT, AMQP, or HTTP protocols.</span></span> <span data-ttu-id="a7e82-111">The gateway simply passes communications between the devices and IoT Hub.</span><span class="sxs-lookup"><span data-stu-id="a7e82-111">The gateway simply passes communications between the devices and IoT Hub.</span></span> <span data-ttu-id="a7e82-112">The devices are  unaware that they are communicating with the cloud via a gateway and a user interacting with the devices in IoT Hub is unaware of the intermediate gateway device.</span><span class="sxs-lookup"><span data-stu-id="a7e82-112">The devices are  unaware that they are communicating with the cloud via a gateway and a user interacting with the devices in IoT Hub is unaware of the intermediate gateway device.</span></span> <span data-ttu-id="a7e82-113">Thus, the gateway is transparent.</span><span class="sxs-lookup"><span data-stu-id="a7e82-113">Thus, the gateway is transparent.</span></span> <span data-ttu-id="a7e82-114">Refer to the [Create a transparent gateway][lnk-iot-edge-as-transparent-gateway] how-to for specifics on using an IoT Edge device as a transparent gateway.</span><span class="sxs-lookup"><span data-stu-id="a7e82-114">Refer to the [Create a transparent gateway][lnk-iot-edge-as-transparent-gateway] how-to for specifics on using an IoT Edge device as a transparent gateway.</span></span>
* <span data-ttu-id="a7e82-115">**Protocol translation** – Devices that do not support MQTT, AMQP, or HTTP use a gateway device to send data to IoT Hub.</span><span class="sxs-lookup"><span data-stu-id="a7e82-115">**Protocol translation** – Devices that do not support MQTT, AMQP, or HTTP use a gateway device to send data to IoT Hub.</span></span> <span data-ttu-id="a7e82-116">The gateway is smart enough to understand that protocol used by the downstream devices; however it is the only device that has identity in IoT Hub.</span><span class="sxs-lookup"><span data-stu-id="a7e82-116">The gateway is smart enough to understand that protocol used by the downstream devices; however it is the only device that has identity in IoT Hub.</span></span> <span data-ttu-id="a7e82-117">All information looks like it is coming from one device, the gateway.</span><span class="sxs-lookup"><span data-stu-id="a7e82-117">All information looks like it is coming from one device, the gateway.</span></span> <span data-ttu-id="a7e82-118">This implies that downstream devices must embed additional identifying information in their messages if cloud applications want to reason about the data on a per device basis.</span><span class="sxs-lookup"><span data-stu-id="a7e82-118">This implies that downstream devices must embed additional identifying information in their messages if cloud applications want to reason about the data on a per device basis.</span></span> <span data-ttu-id="a7e82-119">Additionally, IoT Hub primitives like twin and methods are only available for the gateway device, not downstream devices.</span><span class="sxs-lookup"><span data-stu-id="a7e82-119">Additionally, IoT Hub primitives like twin and methods are only available for the gateway device, not downstream devices.</span></span>
* <span data-ttu-id="a7e82-120">**Identity translation** - Devices that cannot connect to IoT Hub connect to a gateway device which provides IoT Hub identity and protocol translation on behalf of the downstream devices.</span><span class="sxs-lookup"><span data-stu-id="a7e82-120">**Identity translation** - Devices that cannot connect to IoT Hub connect to a gateway device which provides IoT Hub identity and protocol translation on behalf of the downstream devices.</span></span> <span data-ttu-id="a7e82-121">The gateway is smart enough to understand the protocol used by the downstream devices, provide them identity, and translate IoT Hub primitives.</span><span class="sxs-lookup"><span data-stu-id="a7e82-121">The gateway is smart enough to understand the protocol used by the downstream devices, provide them identity, and translate IoT Hub primitives.</span></span> <span data-ttu-id="a7e82-122">Downstream devices appear in IoT Hub as first-class devices with twins and methods.</span><span class="sxs-lookup"><span data-stu-id="a7e82-122">Downstream devices appear in IoT Hub as first-class devices with twins and methods.</span></span> <span data-ttu-id="a7e82-123">A user can interact with the devices in IoT Hub and is unaware of the intermediate gateway device.</span><span class="sxs-lookup"><span data-stu-id="a7e82-123">A user can interact with the devices in IoT Hub and is unaware of the intermediate gateway device.</span></span>

![Diagrams of gateway patterns][1]

## <a name="use-cases"></a><span data-ttu-id="a7e82-125">Use cases</span><span class="sxs-lookup"><span data-stu-id="a7e82-125">Use cases</span></span>
<span data-ttu-id="a7e82-126">All gateway patterns provide the following benefits:</span><span class="sxs-lookup"><span data-stu-id="a7e82-126">All gateway patterns provide the following benefits:</span></span>
* <span data-ttu-id="a7e82-127">**Edge analytics** – Use AI services locally to process data coming from downstream devices without sending full fidelity telemetry to the cloud.</span><span class="sxs-lookup"><span data-stu-id="a7e82-127">**Edge analytics** – Use AI services locally to process data coming from downstream devices without sending full fidelity telemetry to the cloud.</span></span> <span data-ttu-id="a7e82-128">Find and react to insights locally and only send a subset of data to IoT Hub.</span><span class="sxs-lookup"><span data-stu-id="a7e82-128">Find and react to insights locally and only send a subset of data to IoT Hub.</span></span> 
* <span data-ttu-id="a7e82-129">**Downstream device isolation** – The gateway device can shield all downstream devices from exposure to the internet.</span><span class="sxs-lookup"><span data-stu-id="a7e82-129">**Downstream device isolation** – The gateway device can shield all downstream devices from exposure to the internet.</span></span> <span data-ttu-id="a7e82-130">It can sit in between an OT network which does not have connectivity and an IT network which provides access to the web.</span><span class="sxs-lookup"><span data-stu-id="a7e82-130">It can sit in between an OT network which does not have connectivity and an IT network which provides access to the web.</span></span> 
* <span data-ttu-id="a7e82-131">**Connection multiplexing** - All devices connecting to IoT Hub through an IoT Edge device will use the same underlying connection.</span><span class="sxs-lookup"><span data-stu-id="a7e82-131">**Connection multiplexing** - All devices connecting to IoT Hub through an IoT Edge device will use the same underlying connection.</span></span>
* <span data-ttu-id="a7e82-132">**Traffic smoothing** - The IoT Edge device will automatically implement exponential backoff in case of IoT Hub throttling, while persisting the messages locally.</span><span class="sxs-lookup"><span data-stu-id="a7e82-132">**Traffic smoothing** - The IoT Edge device will automatically implement exponential backoff in case of IoT Hub throttling, while persisting the messages locally.</span></span> <span data-ttu-id="a7e82-133">This will make your solution resilient to spikes in traffic.</span><span class="sxs-lookup"><span data-stu-id="a7e82-133">This will make your solution resilient to spikes in traffic.</span></span>
* <span data-ttu-id="a7e82-134">**Limited offline support** - The gateway device will store locally messages and twin updates that cannot be delivered to IoT Hub.</span><span class="sxs-lookup"><span data-stu-id="a7e82-134">**Limited offline support** - The gateway device will store locally messages and twin updates that cannot be delivered to IoT Hub.</span></span>

<span data-ttu-id="a7e82-135">A gateway does protocol translation can also perform edge analytics, device isolation, traffic smoothing, and offline support to existing devices and new devices that are resource constrained.</span><span class="sxs-lookup"><span data-stu-id="a7e82-135">A gateway does protocol translation can also perform edge analytics, device isolation, traffic smoothing, and offline support to existing devices and new devices that are resource constrained.</span></span> <span data-ttu-id="a7e82-136">Many existing devices are producing data that can power business insights; however they were not designed with cloud connectivity in mind.</span><span class="sxs-lookup"><span data-stu-id="a7e82-136">Many existing devices are producing data that can power business insights; however they were not designed with cloud connectivity in mind.</span></span> <span data-ttu-id="a7e82-137">Opaque gateways allow this data to be unlocked and utilized in an end to end IoT solution.</span><span class="sxs-lookup"><span data-stu-id="a7e82-137">Opaque gateways allow this data to be unlocked and utilized in an end to end IoT solution.</span></span>

<span data-ttu-id="a7e82-138">A gateway that does identity translation provide the benefits of protocol translation and additionally allow for full manageability of downstream devices from the cloud.</span><span class="sxs-lookup"><span data-stu-id="a7e82-138">A gateway that does identity translation provide the benefits of protocol translation and additionally allow for full manageability of downstream devices from the cloud.</span></span> <span data-ttu-id="a7e82-139">All devices in your IoT solution show up in IoT Hub regardless of the protocol with they speak.</span><span class="sxs-lookup"><span data-stu-id="a7e82-139">All devices in your IoT solution show up in IoT Hub regardless of the protocol with they speak.</span></span>

## <a name="cheat-sheet"></a><span data-ttu-id="a7e82-140">Cheat sheet</span><span class="sxs-lookup"><span data-stu-id="a7e82-140">Cheat sheet</span></span>
<span data-ttu-id="a7e82-141">Here is a quick cheat sheet that compares IoT Hub primitives when using transparent, opaque, and proxy gateways.</span><span class="sxs-lookup"><span data-stu-id="a7e82-141">Here is a quick cheat sheet that compares IoT Hub primitives when using transparent, opaque, and proxy gateways.</span></span>

| &nbsp; | <span data-ttu-id="a7e82-142">Transparent gateway</span><span class="sxs-lookup"><span data-stu-id="a7e82-142">Transparent gateway</span></span> | <span data-ttu-id="a7e82-143">Protocol translation</span><span class="sxs-lookup"><span data-stu-id="a7e82-143">Protocol translation</span></span> | <span data-ttu-id="a7e82-144">Identity translation</span><span class="sxs-lookup"><span data-stu-id="a7e82-144">Identity translation</span></span> |
|--------|-------------|--------|--------|
| <span data-ttu-id="a7e82-145">Identities stored in the IoT Hub identity registry</span><span class="sxs-lookup"><span data-stu-id="a7e82-145">Identities stored in the IoT Hub identity registry</span></span> | <span data-ttu-id="a7e82-146">Identities of all connected devices</span><span class="sxs-lookup"><span data-stu-id="a7e82-146">Identities of all connected devices</span></span> | <span data-ttu-id="a7e82-147">Only the identity of the gateway device</span><span class="sxs-lookup"><span data-stu-id="a7e82-147">Only the identity of the gateway device</span></span> | <span data-ttu-id="a7e82-148">Identities of all connected devices</span><span class="sxs-lookup"><span data-stu-id="a7e82-148">Identities of all connected devices</span></span> |
| <span data-ttu-id="a7e82-149">Device twin</span><span class="sxs-lookup"><span data-stu-id="a7e82-149">Device twin</span></span> | <span data-ttu-id="a7e82-150">Each connected device has its own device twin</span><span class="sxs-lookup"><span data-stu-id="a7e82-150">Each connected device has its own device twin</span></span> | <span data-ttu-id="a7e82-151">Only the gateway has a device and module twins</span><span class="sxs-lookup"><span data-stu-id="a7e82-151">Only the gateway has a device and module twins</span></span> | <span data-ttu-id="a7e82-152">Each connected device has its own device twin</span><span class="sxs-lookup"><span data-stu-id="a7e82-152">Each connected device has its own device twin</span></span> |
| <span data-ttu-id="a7e82-153">Direct methods and cloud-to-device messages</span><span class="sxs-lookup"><span data-stu-id="a7e82-153">Direct methods and cloud-to-device messages</span></span> | <span data-ttu-id="a7e82-154">The cloud can address each connected device individually</span><span class="sxs-lookup"><span data-stu-id="a7e82-154">The cloud can address each connected device individually</span></span> | <span data-ttu-id="a7e82-155">The cloud can only address the gateway device</span><span class="sxs-lookup"><span data-stu-id="a7e82-155">The cloud can only address the gateway device</span></span> | <span data-ttu-id="a7e82-156">The cloud can address each connected device individually</span><span class="sxs-lookup"><span data-stu-id="a7e82-156">The cloud can address each connected device individually</span></span> |
| <span data-ttu-id="a7e82-157">[IoT Hub throttles and quotas][lnk-iothub-throttles-quotas]</span><span class="sxs-lookup"><span data-stu-id="a7e82-157">[IoT Hub throttles and quotas][lnk-iothub-throttles-quotas]</span></span> | <span data-ttu-id="a7e82-158">Apply to each device</span><span class="sxs-lookup"><span data-stu-id="a7e82-158">Apply to each device</span></span> | <span data-ttu-id="a7e82-159">Apply to the gateway device</span><span class="sxs-lookup"><span data-stu-id="a7e82-159">Apply to the gateway device</span></span> | <span data-ttu-id="a7e82-160">Apply to each device</span><span class="sxs-lookup"><span data-stu-id="a7e82-160">Apply to each device</span></span> |

<span data-ttu-id="a7e82-161">When using an opaque gateway (protocol translation) pattern, all devices connecting through that gateway share the same cloud-to-device queue, which can contain at most 50 messages.</span><span class="sxs-lookup"><span data-stu-id="a7e82-161">When using an opaque gateway (protocol translation) pattern, all devices connecting through that gateway share the same cloud-to-device queue, which can contain at most 50 messages.</span></span> <span data-ttu-id="a7e82-162">It follows that the opaque gateway pattern should be used only when very few devices are connecting through each field gateway, and their cloud-to-device traffic is low.</span><span class="sxs-lookup"><span data-stu-id="a7e82-162">It follows that the opaque gateway pattern should be used only when very few devices are connecting through each field gateway, and their cloud-to-device traffic is low.</span></span>

## <a name="next-steps"></a><span data-ttu-id="a7e82-163">Next steps</span><span class="sxs-lookup"><span data-stu-id="a7e82-163">Next steps</span></span>
<span data-ttu-id="a7e82-164">Use an IoT Edge device as a [transparent gateway][lnk-iot-edge-as-transparent-gateway]</span><span class="sxs-lookup"><span data-stu-id="a7e82-164">Use an IoT Edge device as a [transparent gateway][lnk-iot-edge-as-transparent-gateway]</span></span> 

[lnk-iot-edge-as-transparent-gateway]: ./how-to-create-transparent-gateway-linux.md
[lnk-iothub-throttles-quotas]: ../iot-hub/iot-hub-devguide-quotas-throttling.md

[1]: ./media/iot-edge-as-gateway/edge-as-gateway.png
