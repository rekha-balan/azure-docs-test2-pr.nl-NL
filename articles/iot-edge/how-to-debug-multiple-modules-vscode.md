---
title: Debug multiple modules for Azure IoT Edge in VS Code | Microsoft Docs
description: Use Visual Studio Code to debug multiple modules with Azure IoT Edge
author: shizn
manager: ''
ms.author: xshi
ms.date: 06/27/2018
ms.topic: conceptual
ms.service: iot-edge
services: iot-edge
ms.openlocfilehash: 38c66129ac8244d18b0f94c1485c785015e29ab4
ms.sourcegitcommit: d1451406a010fd3aa854dc8e5b77dc5537d8050e
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 09/13/2018
ms.locfileid: "44967008"
---
# <a name="use-visual-studio-code-to-debug-multiple-modules-with-azure-iot-edge"></a><span data-ttu-id="75e30-103">Use Visual Studio Code to debug multiple modules with Azure IoT Edge</span><span class="sxs-lookup"><span data-stu-id="75e30-103">Use Visual Studio Code to debug multiple modules with Azure IoT Edge</span></span>
<span data-ttu-id="75e30-104">This article provides detailed instructions for using [Visual Studio (VS) Code](https://code.visualstudio.com/) to debug multiple modules on IoT Edge.</span><span class="sxs-lookup"><span data-stu-id="75e30-104">This article provides detailed instructions for using [Visual Studio (VS) Code](https://code.visualstudio.com/) to debug multiple modules on IoT Edge.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="75e30-105">Prerequisites</span><span class="sxs-lookup"><span data-stu-id="75e30-105">Prerequisites</span></span>
<span data-ttu-id="75e30-106">Complete the tutorial [Develop an IoT Edge solution with multiple modules in Visual Studio Code](tutorial-multiple-modules-in-vscode.md) and make sure you have at least two modules running on your IoT Edge device.</span><span class="sxs-lookup"><span data-stu-id="75e30-106">Complete the tutorial [Develop an IoT Edge solution with multiple modules in Visual Studio Code](tutorial-multiple-modules-in-vscode.md) and make sure you have at least two modules running on your IoT Edge device.</span></span>

## <a name="multi-target-and-remote-debugging-in-vs-code"></a><span data-ttu-id="75e30-107">Multi-target and remote debugging in VS Code</span><span class="sxs-lookup"><span data-stu-id="75e30-107">Multi-target and remote debugging in VS Code</span></span>
<span data-ttu-id="75e30-108">With VS Code and Azure IoT Edge extension, you can attach the module process in a container, whether the container is running on your development machine or in a remote physical IoT Edge device.</span><span class="sxs-lookup"><span data-stu-id="75e30-108">With VS Code and Azure IoT Edge extension, you can attach the module process in a container, whether the container is running on your development machine or in a remote physical IoT Edge device.</span></span> <span data-ttu-id="75e30-109">Debug mutiple modules running in containers is actually attaching more than one process in separate containers.</span><span class="sxs-lookup"><span data-stu-id="75e30-109">Debug mutiple modules running in containers is actually attaching more than one process in separate containers.</span></span> <span data-ttu-id="75e30-110">VS Code [multi-target debugging](https://code.visualstudio.com/docs/editor/debugging#_multitarget-debugging) can be used when debugging mutiple modules.</span><span class="sxs-lookup"><span data-stu-id="75e30-110">VS Code [multi-target debugging](https://code.visualstudio.com/docs/editor/debugging#_multitarget-debugging) can be used when debugging mutiple modules.</span></span>

   > [!TIP]
   > <span data-ttu-id="75e30-111">If your module container is running in a remote physical IoT Edge device, you might need to setup [Docker Machine](https://docs.docker.com/machine/overview/) so that the Docker engine on your development machine can talk to the remote Docker hosts.</span><span class="sxs-lookup"><span data-stu-id="75e30-111">If your module container is running in a remote physical IoT Edge device, you might need to setup [Docker Machine](https://docs.docker.com/machine/overview/) so that the Docker engine on your development machine can talk to the remote Docker hosts.</span></span>

### <a name="build-your-iot-edge-modules-for-debugging-purpose"></a><span data-ttu-id="75e30-112">Build your IoT Edge modules for debugging purpose</span><span class="sxs-lookup"><span data-stu-id="75e30-112">Build your IoT Edge modules for debugging purpose</span></span>
1. <span data-ttu-id="75e30-113">To start multi-module debugging, you need to use **Dockerfile.amd64.debug** to rebuild your docker images and deploy your Edge solution again.</span><span class="sxs-lookup"><span data-stu-id="75e30-113">To start multi-module debugging, you need to use **Dockerfile.amd64.debug** to rebuild your docker images and deploy your Edge solution again.</span></span> <span data-ttu-id="75e30-114">In VS Code explorer, navigate to `deployment.template.json` file.</span><span class="sxs-lookup"><span data-stu-id="75e30-114">In VS Code explorer, navigate to `deployment.template.json` file.</span></span> <span data-ttu-id="75e30-115">Update your image URLs by adding a `.debug` in the end.</span><span class="sxs-lookup"><span data-stu-id="75e30-115">Update your image URLs by adding a `.debug` in the end.</span></span> <span data-ttu-id="75e30-116">You need two module images with `.debug` at least.</span><span class="sxs-lookup"><span data-stu-id="75e30-116">You need two module images with `.debug` at least.</span></span> <span data-ttu-id="75e30-117">If you are working on the solution from previous tutorial, you should have a C# functions module and a C# module.</span><span class="sxs-lookup"><span data-stu-id="75e30-117">If you are working on the solution from previous tutorial, you should have a C# functions module and a C# module.</span></span> <span data-ttu-id="75e30-118">Update these two image URLs by adding a `.debug` in the end and save this file.</span><span class="sxs-lookup"><span data-stu-id="75e30-118">Update these two image URLs by adding a `.debug` in the end and save this file.</span></span> 
2. <span data-ttu-id="75e30-119">Rebuild your solution.</span><span class="sxs-lookup"><span data-stu-id="75e30-119">Rebuild your solution.</span></span> <span data-ttu-id="75e30-120">In VS Code command palette, type and run the command **Azure IoT Edge: Build IoT Edge solution**.</span><span class="sxs-lookup"><span data-stu-id="75e30-120">In VS Code command palette, type and run the command **Azure IoT Edge: Build IoT Edge solution**.</span></span>
3. <span data-ttu-id="75e30-121">In Azure IoT Hub Devices explorer, right-click an IoT Edge device ID, then select **Create deployment for Edge device**.</span><span class="sxs-lookup"><span data-stu-id="75e30-121">In Azure IoT Hub Devices explorer, right-click an IoT Edge device ID, then select **Create deployment for Edge device**.</span></span> <span data-ttu-id="75e30-122">Select the `deployment.json` file under the `config` folder.</span><span class="sxs-lookup"><span data-stu-id="75e30-122">Select the `deployment.json` file under the `config` folder.</span></span> <span data-ttu-id="75e30-123">Then you can see the deployment is successfully created with a deployment ID in VS Code integrated terminal.</span><span class="sxs-lookup"><span data-stu-id="75e30-123">Then you can see the deployment is successfully created with a deployment ID in VS Code integrated terminal.</span></span>

<span data-ttu-id="75e30-124">You can check your container status in the VS Code Docker explorer or by running the `docker ps` command in the terminal.</span><span class="sxs-lookup"><span data-stu-id="75e30-124">You can check your container status in the VS Code Docker explorer or by running the `docker ps` command in the terminal.</span></span>

### <a name="start-debugging-c-function-in-vs-code"></a><span data-ttu-id="75e30-125">Start debugging C# Function in VS Code</span><span class="sxs-lookup"><span data-stu-id="75e30-125">Start debugging C# Function in VS Code</span></span>
1. <span data-ttu-id="75e30-126">VS Code keeps debugging configuration information in a `launch.json` file located in a `.vscode` folder in your workspace.</span><span class="sxs-lookup"><span data-stu-id="75e30-126">VS Code keeps debugging configuration information in a `launch.json` file located in a `.vscode` folder in your workspace.</span></span> <span data-ttu-id="75e30-127">This `launch.json` file was generated when you created a new IoT Edge solution.</span><span class="sxs-lookup"><span data-stu-id="75e30-127">This `launch.json` file was generated when you created a new IoT Edge solution.</span></span> <span data-ttu-id="75e30-128">It updates each time you add a new module that supports debugging.</span><span class="sxs-lookup"><span data-stu-id="75e30-128">It updates each time you add a new module that supports debugging.</span></span> <span data-ttu-id="75e30-129">Navigate to the debug view and select the corresponding debug configuration file for C# functions module remote debugging.</span><span class="sxs-lookup"><span data-stu-id="75e30-129">Navigate to the debug view and select the corresponding debug configuration file for C# functions module remote debugging.</span></span>
2. <span data-ttu-id="75e30-130">Navigate to `run.csx`.</span><span class="sxs-lookup"><span data-stu-id="75e30-130">Navigate to `run.csx`.</span></span> <span data-ttu-id="75e30-131">Add a breakpoint in the function.</span><span class="sxs-lookup"><span data-stu-id="75e30-131">Add a breakpoint in the function.</span></span>
3. <span data-ttu-id="75e30-132">Click the **Start Debugging** button or press **F5**, and select the process to attach to.</span><span class="sxs-lookup"><span data-stu-id="75e30-132">Click the **Start Debugging** button or press **F5**, and select the process to attach to.</span></span>
4. <span data-ttu-id="75e30-133">In VS Code Debug view, you can see the variables in left panel.</span><span class="sxs-lookup"><span data-stu-id="75e30-133">In VS Code Debug view, you can see the variables in left panel.</span></span> 

### <a name="start-debugging-c-module-at-the-same-time-in-vs-code"></a><span data-ttu-id="75e30-134">Start debugging C# module at the same time in VS Code</span><span class="sxs-lookup"><span data-stu-id="75e30-134">Start debugging C# module at the same time in VS Code</span></span>
1. <span data-ttu-id="75e30-135">In VS Code command palette, type and run the command "Workspace: Duplicate Workspace in New Window".</span><span class="sxs-lookup"><span data-stu-id="75e30-135">In VS Code command palette, type and run the command "Workspace: Duplicate Workspace in New Window".</span></span> <span data-ttu-id="75e30-136">A new VS Code window starts with the same workspace.</span><span class="sxs-lookup"><span data-stu-id="75e30-136">A new VS Code window starts with the same workspace.</span></span>
2. <span data-ttu-id="75e30-137">Navigate to the debug view and select the corresponding debug configuration file for C# module remote debugging.</span><span class="sxs-lookup"><span data-stu-id="75e30-137">Navigate to the debug view and select the corresponding debug configuration file for C# module remote debugging.</span></span>
3. <span data-ttu-id="75e30-138">Navigate to `program.cs`.</span><span class="sxs-lookup"><span data-stu-id="75e30-138">Navigate to `program.cs`.</span></span> <span data-ttu-id="75e30-139">Add a breakpoint in the C# module.</span><span class="sxs-lookup"><span data-stu-id="75e30-139">Add a breakpoint in the C# module.</span></span>
4. <span data-ttu-id="75e30-140">Click the **Start Debugging** button or press **F5**, and select the process to attach to.</span><span class="sxs-lookup"><span data-stu-id="75e30-140">Click the **Start Debugging** button or press **F5**, and select the process to attach to.</span></span>
5. <span data-ttu-id="75e30-141">In VS Code Debug view, you can see the variables in left panel.</span><span class="sxs-lookup"><span data-stu-id="75e30-141">In VS Code Debug view, you can see the variables in left panel.</span></span> 

### <a name="see-variables-in-multiple-debugging-windows"></a><span data-ttu-id="75e30-142">See variables in multiple debugging windows</span><span class="sxs-lookup"><span data-stu-id="75e30-142">See variables in multiple debugging windows</span></span>
1. <span data-ttu-id="75e30-143">Now you have at least two debugging session running in two VS Code window.</span><span class="sxs-lookup"><span data-stu-id="75e30-143">Now you have at least two debugging session running in two VS Code window.</span></span> <span data-ttu-id="75e30-144">One of the breakpoint should be hit.</span><span class="sxs-lookup"><span data-stu-id="75e30-144">One of the breakpoint should be hit.</span></span>
2. <span data-ttu-id="75e30-145">Press `F10` or click the Step Over button in the **Debug toolbar**.</span><span class="sxs-lookup"><span data-stu-id="75e30-145">Press `F10` or click the Step Over button in the **Debug toolbar**.</span></span>
3. <span data-ttu-id="75e30-146">The breakpoint in another VS Code window should be hit.</span><span class="sxs-lookup"><span data-stu-id="75e30-146">The breakpoint in another VS Code window should be hit.</span></span> 
4. <span data-ttu-id="75e30-147">Continue above two steps, you can see variables from mutilple modules in multiple VS Code debugging windows.</span><span class="sxs-lookup"><span data-stu-id="75e30-147">Continue above two steps, you can see variables from mutilple modules in multiple VS Code debugging windows.</span></span>

> [!NOTE]
> <span data-ttu-id="75e30-148">Above example shows how to debugging multiple modules with Azure IoT Edge.</span><span class="sxs-lookup"><span data-stu-id="75e30-148">Above example shows how to debugging multiple modules with Azure IoT Edge.</span></span> <span data-ttu-id="75e30-149">It's based on the debug version of the `Dockerfile.amd64.debug`, which includes VSDBG(the .NET Core command-line debugger) in your container image while building it.</span><span class="sxs-lookup"><span data-stu-id="75e30-149">It's based on the debug version of the `Dockerfile.amd64.debug`, which includes VSDBG(the .NET Core command-line debugger) in your container image while building it.</span></span> <span data-ttu-id="75e30-150">We recommend you directly use or customize the `Dockerfile` without VSDBG for production-ready IoT Edge function after you finish debugging your C# function.</span><span class="sxs-lookup"><span data-stu-id="75e30-150">We recommend you directly use or customize the `Dockerfile` without VSDBG for production-ready IoT Edge function after you finish debugging your C# function.</span></span>

## <a name="next-steps"></a><span data-ttu-id="75e30-151">Next steps</span><span class="sxs-lookup"><span data-stu-id="75e30-151">Next steps</span></span>

<span data-ttu-id="75e30-152">Once you have your module built, learn how to [Deploy Azure IoT Edge modules from Visual Studio Code](how-to-deploy-modules-vscode.md) 0</span><span class="sxs-lookup"><span data-stu-id="75e30-152">Once you have your module built, learn how to [Deploy Azure IoT Edge modules from Visual Studio Code](how-to-deploy-modules-vscode.md) 0</span></span>
