---
title: Debug Java modules for Azure IoT Edge | Microsoft Docs
description: Use Visual Studio Code to develop and debug Java modules for Azure IoT Edge
services: iot-edge
keywords: ''
author: shizn
manager: timlt
ms.author: xshi
ms.date: 09/04/2018
ms.topic: article
ms.service: iot-edge
ms.openlocfilehash: 6e3bbe996a2f0c37905aa990b39d324fd540952b
ms.sourcegitcommit: d1451406a010fd3aa854dc8e5b77dc5537d8050e
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 09/13/2018
ms.locfileid: "44857291"
---
# <a name="use-visual-studio-code-to-develop-and-debug-java-modules-for-azure-iot-edge"></a><span data-ttu-id="7aae8-103">Use Visual Studio Code to develop and debug Java modules for Azure IoT Edge</span><span class="sxs-lookup"><span data-stu-id="7aae8-103">Use Visual Studio Code to develop and debug Java modules for Azure IoT Edge</span></span>

<span data-ttu-id="7aae8-104">You can send your business logic to operate at the edge by turning it into modules for Azure IoT Edge.</span><span class="sxs-lookup"><span data-stu-id="7aae8-104">You can send your business logic to operate at the edge by turning it into modules for Azure IoT Edge.</span></span> <span data-ttu-id="7aae8-105">This article provides detailed instructions for using Visual Studio Code (VS Code) as the main development tool to develop Java modules.</span><span class="sxs-lookup"><span data-stu-id="7aae8-105">This article provides detailed instructions for using Visual Studio Code (VS Code) as the main development tool to develop Java modules.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="7aae8-106">Prerequisites</span><span class="sxs-lookup"><span data-stu-id="7aae8-106">Prerequisites</span></span>
<span data-ttu-id="7aae8-107">This article assumes that you use a computer or virtual machine running Windows, macOS or Linux as your development machine.</span><span class="sxs-lookup"><span data-stu-id="7aae8-107">This article assumes that you use a computer or virtual machine running Windows, macOS or Linux as your development machine.</span></span> <span data-ttu-id="7aae8-108">Your IoT Edge device can be another physical device.</span><span class="sxs-lookup"><span data-stu-id="7aae8-108">Your IoT Edge device can be another physical device.</span></span>

> [!NOTE]
> <span data-ttu-id="7aae8-109">This debugging article demonstrates two typical ways to debug your Java module in VS Code.</span><span class="sxs-lookup"><span data-stu-id="7aae8-109">This debugging article demonstrates two typical ways to debug your Java module in VS Code.</span></span> <span data-ttu-id="7aae8-110">One way is to attach a process in a module container, while the other is to lanuch the module code in debug mode.</span><span class="sxs-lookup"><span data-stu-id="7aae8-110">One way is to attach a process in a module container, while the other is to lanuch the module code in debug mode.</span></span> <span data-ttu-id="7aae8-111">If you aren't familiar with the debugging capabilities of Visual Studio Code, read about [Debugging](https://code.visualstudio.com/Docs/editor/debugging).</span><span class="sxs-lookup"><span data-stu-id="7aae8-111">If you aren't familiar with the debugging capabilities of Visual Studio Code, read about [Debugging](https://code.visualstudio.com/Docs/editor/debugging).</span></span>

<span data-ttu-id="7aae8-112">Since this article uses Visual Studio Code as the main development tool, install VS Code and then add the necessary extensions:</span><span class="sxs-lookup"><span data-stu-id="7aae8-112">Since this article uses Visual Studio Code as the main development tool, install VS Code and then add the necessary extensions:</span></span>
* [<span data-ttu-id="7aae8-113">Visual Studio Code</span><span class="sxs-lookup"><span data-stu-id="7aae8-113">Visual Studio Code</span></span>](https://code.visualstudio.com/) 
* [<span data-ttu-id="7aae8-114">Azure IoT Edge extension</span><span class="sxs-lookup"><span data-stu-id="7aae8-114">Azure IoT Edge extension</span></span>](https://marketplace.visualstudio.com/items?itemName=vsciot-vscode.azure-iot-edge) 
* [<span data-ttu-id="7aae8-115">Java Extension Pack for Visual Studio Code</span><span class="sxs-lookup"><span data-stu-id="7aae8-115">Java Extension Pack for Visual Studio Code</span></span>](https://marketplace.visualstudio.com/items?itemName=vscjava.vscode-java-pack)
* [<span data-ttu-id="7aae8-116">Docker extension</span><span class="sxs-lookup"><span data-stu-id="7aae8-116">Docker extension</span></span>](https://marketplace.visualstudio.com/items?itemName=PeterJausovec.vscode-docker)

<span data-ttu-id="7aae8-117">To create a module, you need Java and Maven to build and run module code, Docker to build the module image, and a container registry to hold the module image:</span><span class="sxs-lookup"><span data-stu-id="7aae8-117">To create a module, you need Java and Maven to build and run module code, Docker to build the module image, and a container registry to hold the module image:</span></span>
* <span data-ttu-id="7aae8-118">[Java SE Development Kit 10](http://www.oracle.com/technetwork/java/javase/downloads/index.html), and [set the `JAVA_HOME` environment variable](https://docs.oracle.com/cd/E19182-01/820-7851/inst_cli_jdk_javahome_t/) to point to your JDK installation.</span><span class="sxs-lookup"><span data-stu-id="7aae8-118">[Java SE Development Kit 10](http://www.oracle.com/technetwork/java/javase/downloads/index.html), and [set the `JAVA_HOME` environment variable](https://docs.oracle.com/cd/E19182-01/820-7851/inst_cli_jdk_javahome_t/) to point to your JDK installation.</span></span>
* [<span data-ttu-id="7aae8-119">Maven</span><span class="sxs-lookup"><span data-stu-id="7aae8-119">Maven</span></span>](https://maven.apache.org/)
* [<span data-ttu-id="7aae8-120">Docker</span><span class="sxs-lookup"><span data-stu-id="7aae8-120">Docker</span></span>](https://docs.docker.com/engine/installation/)
* <span data-ttu-id="7aae8-121">[Azure Container Registry](https://docs.microsoft.com/azure/container-registry/) or [Docker Hub](https://docs.docker.com/docker-hub/repos/#viewing-repository-tags)</span><span class="sxs-lookup"><span data-stu-id="7aae8-121">[Azure Container Registry](https://docs.microsoft.com/azure/container-registry/) or [Docker Hub](https://docs.docker.com/docker-hub/repos/#viewing-repository-tags)</span></span>
   * <span data-ttu-id="7aae8-122">You can use a local Docker registry for prototype and testing purposes, instead of a cloud registry.</span><span class="sxs-lookup"><span data-stu-id="7aae8-122">You can use a local Docker registry for prototype and testing purposes, instead of a cloud registry.</span></span> 

<span data-ttu-id="7aae8-123">To setup local development environment to debug, run and test your IoT Edge solution, you need [Azure IoT EdgeHub Dev Tool](https://pypi.org/project/iotedgehubdev/).</span><span class="sxs-lookup"><span data-stu-id="7aae8-123">To setup local development environment to debug, run and test your IoT Edge solution, you need [Azure IoT EdgeHub Dev Tool](https://pypi.org/project/iotedgehubdev/).</span></span> <span data-ttu-id="7aae8-124">Install [Python (2.7/3.6) and Pip](https://www.python.org/).</span><span class="sxs-lookup"><span data-stu-id="7aae8-124">Install [Python (2.7/3.6) and Pip](https://www.python.org/).</span></span> <span data-ttu-id="7aae8-125">Then install **iotedgehubdev** by running below command in your terminal.</span><span class="sxs-lookup"><span data-stu-id="7aae8-125">Then install **iotedgehubdev** by running below command in your terminal.</span></span>

   ```cmd
   pip install --upgrade iotedgehubdev
   ```

<span data-ttu-id="7aae8-126">To test your module on a device, you need an active IoT hub with at least one IoT Edge device ID created.</span><span class="sxs-lookup"><span data-stu-id="7aae8-126">To test your module on a device, you need an active IoT hub with at least one IoT Edge device ID created.</span></span> <span data-ttu-id="7aae8-127">If you are running IoT Edge daemon on development machine, you might need to stop EdgeHub and EdgeAgent before you move to next step.</span><span class="sxs-lookup"><span data-stu-id="7aae8-127">If you are running IoT Edge daemon on development machine, you might need to stop EdgeHub and EdgeAgent before you move to next step.</span></span> 


## <a name="create-a-new-solution-template"></a><span data-ttu-id="7aae8-128">Create a new solution template</span><span class="sxs-lookup"><span data-stu-id="7aae8-128">Create a new solution template</span></span>

<span data-ttu-id="7aae8-129">The following steps show you how to create an IoT Edge module based on Java using Visual Studio Code and the Azure IoT Edge extension.</span><span class="sxs-lookup"><span data-stu-id="7aae8-129">The following steps show you how to create an IoT Edge module based on Java using Visual Studio Code and the Azure IoT Edge extension.</span></span> <span data-ttu-id="7aae8-130">You start by creating a solution, and then generating the first module in that solution.</span><span class="sxs-lookup"><span data-stu-id="7aae8-130">You start by creating a solution, and then generating the first module in that solution.</span></span> <span data-ttu-id="7aae8-131">Each solution can contain multiple modules.</span><span class="sxs-lookup"><span data-stu-id="7aae8-131">Each solution can contain multiple modules.</span></span> 

1. <span data-ttu-id="7aae8-132">In Visual Studio Code, select **View** > **Integrated Terminal**.</span><span class="sxs-lookup"><span data-stu-id="7aae8-132">In Visual Studio Code, select **View** > **Integrated Terminal**.</span></span>

3. <span data-ttu-id="7aae8-133">In Visual Studio Code, select **View** > **Command Palette**.</span><span class="sxs-lookup"><span data-stu-id="7aae8-133">In Visual Studio Code, select **View** > **Command Palette**.</span></span> 
4. <span data-ttu-id="7aae8-134">In the command palette, type and run the command **Azure IoT Edge: New IoT Edge Solution**.</span><span class="sxs-lookup"><span data-stu-id="7aae8-134">In the command palette, type and run the command **Azure IoT Edge: New IoT Edge Solution**.</span></span>

   ![Run New IoT Edge Solution](./media/how-to-develop-csharp-module/new-solution.png)

5. <span data-ttu-id="7aae8-136">Browse to the folder where you want to create the new solution, and click **Select folder**.</span><span class="sxs-lookup"><span data-stu-id="7aae8-136">Browse to the folder where you want to create the new solution, and click **Select folder**.</span></span> 
6. <span data-ttu-id="7aae8-137">Provide a name for your solution.</span><span class="sxs-lookup"><span data-stu-id="7aae8-137">Provide a name for your solution.</span></span> 
7. <span data-ttu-id="7aae8-138">Choose **Java Module** as the template for the first module in the solution.</span><span class="sxs-lookup"><span data-stu-id="7aae8-138">Choose **Java Module** as the template for the first module in the solution.</span></span>
8. <span data-ttu-id="7aae8-139">Provide a name for your module.</span><span class="sxs-lookup"><span data-stu-id="7aae8-139">Provide a name for your module.</span></span> <span data-ttu-id="7aae8-140">Choose a name that's unique within your container registry.</span><span class="sxs-lookup"><span data-stu-id="7aae8-140">Choose a name that's unique within your container registry.</span></span> 
8. <span data-ttu-id="7aae8-141">Provide a value for groupId or accept the default **com.edgemodule**.</span><span class="sxs-lookup"><span data-stu-id="7aae8-141">Provide a value for groupId or accept the default **com.edgemodule**.</span></span>
9. <span data-ttu-id="7aae8-142">Provide the image repository for the module.</span><span class="sxs-lookup"><span data-stu-id="7aae8-142">Provide the image repository for the module.</span></span> <span data-ttu-id="7aae8-143">VS Code autopopulates the module name, so you just have to replace **localhost:5000** with your own registry information.</span><span class="sxs-lookup"><span data-stu-id="7aae8-143">VS Code autopopulates the module name, so you just have to replace **localhost:5000** with your own registry information.</span></span> <span data-ttu-id="7aae8-144">If you use a local Docker registry for testing, then localhost is fine.</span><span class="sxs-lookup"><span data-stu-id="7aae8-144">If you use a local Docker registry for testing, then localhost is fine.</span></span> <span data-ttu-id="7aae8-145">If you use Azure Container Registry, then use the login server from your registry's settings.</span><span class="sxs-lookup"><span data-stu-id="7aae8-145">If you use Azure Container Registry, then use the login server from your registry's settings.</span></span> <span data-ttu-id="7aae8-146">The login server looks like **\<registry name\>.azurecr.io**.</span><span class="sxs-lookup"><span data-stu-id="7aae8-146">The login server looks like **\<registry name\>.azurecr.io**.</span></span> <span data-ttu-id="7aae8-147">Only replace the localhost part of the string, don't delete your module name.</span><span class="sxs-lookup"><span data-stu-id="7aae8-147">Only replace the localhost part of the string, don't delete your module name.</span></span>

   ![Provide Docker image repository](./media/how-to-develop-node-module/repository.png)

<span data-ttu-id="7aae8-149">VS Code takes the information you provided, creates an IoT Edge solution, then loads it in a new window.</span><span class="sxs-lookup"><span data-stu-id="7aae8-149">VS Code takes the information you provided, creates an IoT Edge solution, then loads it in a new window.</span></span>

<span data-ttu-id="7aae8-150">Within the solution you have three items:</span><span class="sxs-lookup"><span data-stu-id="7aae8-150">Within the solution you have three items:</span></span> 
* <span data-ttu-id="7aae8-151">A **.vscode** folder contains debug configurations.</span><span class="sxs-lookup"><span data-stu-id="7aae8-151">A **.vscode** folder contains debug configurations.</span></span>
* <span data-ttu-id="7aae8-152">A **modules** folder contains subfolders for each module.</span><span class="sxs-lookup"><span data-stu-id="7aae8-152">A **modules** folder contains subfolders for each module.</span></span> <span data-ttu-id="7aae8-153">Right now you only have one, but you could add more in the command palette with the command **Azure IoT Edge: Add IoT Edge Module**.</span><span class="sxs-lookup"><span data-stu-id="7aae8-153">Right now you only have one, but you could add more in the command palette with the command **Azure IoT Edge: Add IoT Edge Module**.</span></span> 
* <span data-ttu-id="7aae8-154">A **.env** file lists your environment variables.</span><span class="sxs-lookup"><span data-stu-id="7aae8-154">A **.env** file lists your environment variables.</span></span> <span data-ttu-id="7aae8-155">If Azure Container Registry is your registry, you'll have an Azure Container Registry username and password in it.</span><span class="sxs-lookup"><span data-stu-id="7aae8-155">If Azure Container Registry is your registry, you'll have an Azure Container Registry username and password in it.</span></span>

   >[!NOTE]
   ><span data-ttu-id="7aae8-156">The environment file is only created if you provide an image repository for the module.</span><span class="sxs-lookup"><span data-stu-id="7aae8-156">The environment file is only created if you provide an image repository for the module.</span></span> <span data-ttu-id="7aae8-157">If you accepted the localhost defaults to test and debug locally, then you don't need to declare environment variables.</span><span class="sxs-lookup"><span data-stu-id="7aae8-157">If you accepted the localhost defaults to test and debug locally, then you don't need to declare environment variables.</span></span> 

* <span data-ttu-id="7aae8-158">A **deployment.template.json** file lists your new module along with a sample **tempSensor** module that simulates data that you can use for testing.</span><span class="sxs-lookup"><span data-stu-id="7aae8-158">A **deployment.template.json** file lists your new module along with a sample **tempSensor** module that simulates data that you can use for testing.</span></span> <span data-ttu-id="7aae8-159">For more information about how deployment manifests work, see [Understand how IoT Edge modules can be used, configured, and reused](module-composition.md).</span><span class="sxs-lookup"><span data-stu-id="7aae8-159">For more information about how deployment manifests work, see [Understand how IoT Edge modules can be used, configured, and reused](module-composition.md).</span></span>

## <a name="develop-your-module"></a><span data-ttu-id="7aae8-160">Develop your module</span><span class="sxs-lookup"><span data-stu-id="7aae8-160">Develop your module</span></span>

<span data-ttu-id="7aae8-161">The default Java code that comes with the solution is located at **modules > [your module name] > src > main > java > com > edgemodulemodules > App.java**.</span><span class="sxs-lookup"><span data-stu-id="7aae8-161">The default Java code that comes with the solution is located at **modules > [your module name] > src > main > java > com > edgemodulemodules > App.java**.</span></span> <span data-ttu-id="7aae8-162">The module and the deployment.template.json file are set up so that you can build the solution, push it to your container registry, and deploy it to a device to start testing without touching any code.</span><span class="sxs-lookup"><span data-stu-id="7aae8-162">The module and the deployment.template.json file are set up so that you can build the solution, push it to your container registry, and deploy it to a device to start testing without touching any code.</span></span> <span data-ttu-id="7aae8-163">The module is built to simply take input from a source (in this case, the tempSensor module that simulates data) and pipe it to IoT Hub.</span><span class="sxs-lookup"><span data-stu-id="7aae8-163">The module is built to simply take input from a source (in this case, the tempSensor module that simulates data) and pipe it to IoT Hub.</span></span> 

<span data-ttu-id="7aae8-164">When you're ready to customize the Java template with your own code, use the [Azure IoT Hub SDKs](../iot-hub/iot-hub-devguide-sdks.md) to build modules that address the key needs for IoT solutions such as security, device management, and reliability.</span><span class="sxs-lookup"><span data-stu-id="7aae8-164">When you're ready to customize the Java template with your own code, use the [Azure IoT Hub SDKs](../iot-hub/iot-hub-devguide-sdks.md) to build modules that address the key needs for IoT solutions such as security, device management, and reliability.</span></span> 

<span data-ttu-id="7aae8-165">Visual Studio Code has support for Java.</span><span class="sxs-lookup"><span data-stu-id="7aae8-165">Visual Studio Code has support for Java.</span></span> <span data-ttu-id="7aae8-166">Learn more about [how to work with Java in VS Code](https://code.visualstudio.com/docs/java/java-tutorial).</span><span class="sxs-lookup"><span data-stu-id="7aae8-166">Learn more about [how to work with Java in VS Code](https://code.visualstudio.com/docs/java/java-tutorial).</span></span>

## <a name="launch-and-debug-module-code-without-container"></a><span data-ttu-id="7aae8-167">Launch and debug module code without container</span><span class="sxs-lookup"><span data-stu-id="7aae8-167">Launch and debug module code without container</span></span>
<span data-ttu-id="7aae8-168">The IoT Edge Java module depends on Azure IoT Java Device SDK.</span><span class="sxs-lookup"><span data-stu-id="7aae8-168">The IoT Edge Java module depends on Azure IoT Java Device SDK.</span></span> <span data-ttu-id="7aae8-169">In the default module code, you initialize a **ModuleClient** with environment settings and input name, which means the IoT Edge Java module requires the environment settings to start and run, and you also need to send or route messages to the input channels.</span><span class="sxs-lookup"><span data-stu-id="7aae8-169">In the default module code, you initialize a **ModuleClient** with environment settings and input name, which means the IoT Edge Java module requires the environment settings to start and run, and you also need to send or route messages to the input channels.</span></span> <span data-ttu-id="7aae8-170">Your default Java module only contains one input channel and the name is **input1**.</span><span class="sxs-lookup"><span data-stu-id="7aae8-170">Your default Java module only contains one input channel and the name is **input1**.</span></span>

### <a name="setup-iot-edge-simulator-for-single-module-app"></a><span data-ttu-id="7aae8-171">Setup IoT Edge simulator for single module app</span><span class="sxs-lookup"><span data-stu-id="7aae8-171">Setup IoT Edge simulator for single module app</span></span>

1. <span data-ttu-id="7aae8-172">To setup and start the simulator, in VS Code command palette, type and select **Azure IoT Edge: Start IoT Edge Hub Simulator for Single Module**.</span><span class="sxs-lookup"><span data-stu-id="7aae8-172">To setup and start the simulator, in VS Code command palette, type and select **Azure IoT Edge: Start IoT Edge Hub Simulator for Single Module**.</span></span> <span data-ttu-id="7aae8-173">You also need to specify the input names for your single module application, type **input1** and press Enter.</span><span class="sxs-lookup"><span data-stu-id="7aae8-173">You also need to specify the input names for your single module application, type **input1** and press Enter.</span></span> <span data-ttu-id="7aae8-174">The command will trigger **iotedgehubdev** CLI and start IoT Edge simulator and a testing utility module container.</span><span class="sxs-lookup"><span data-stu-id="7aae8-174">The command will trigger **iotedgehubdev** CLI and start IoT Edge simulator and a testing utility module container.</span></span> <span data-ttu-id="7aae8-175">You can see the outputs below in the integrated terminal if the simulator has been started in single module mode successfully.</span><span class="sxs-lookup"><span data-stu-id="7aae8-175">You can see the outputs below in the integrated terminal if the simulator has been started in single module mode successfully.</span></span> <span data-ttu-id="7aae8-176">You can also see a `curl` command to help send message through.</span><span class="sxs-lookup"><span data-stu-id="7aae8-176">You can also see a `curl` command to help send message through.</span></span> <span data-ttu-id="7aae8-177">You will use it later.</span><span class="sxs-lookup"><span data-stu-id="7aae8-177">You will use it later.</span></span>

   ![Setup IoT Edge simulator for single module app](media/how-to-develop-csharp-module/start-simulator-for-single-module.png)

   <span data-ttu-id="7aae8-179">You can move to Docker Explorer and see the module running status.</span><span class="sxs-lookup"><span data-stu-id="7aae8-179">You can move to Docker Explorer and see the module running status.</span></span>

   ![Simulator module status](media/how-to-develop-csharp-module/simulator-status.png)

   <span data-ttu-id="7aae8-181">The **edgeHubDev** container is the core of the local IoT Edge simulator.</span><span class="sxs-lookup"><span data-stu-id="7aae8-181">The **edgeHubDev** container is the core of the local IoT Edge simulator.</span></span> <span data-ttu-id="7aae8-182">It can run on your development machine without IoT Edge security daemon and provide environment settings for your native module app or module containers.</span><span class="sxs-lookup"><span data-stu-id="7aae8-182">It can run on your development machine without IoT Edge security daemon and provide environment settings for your native module app or module containers.</span></span> <span data-ttu-id="7aae8-183">The **input** container exposed restAPIs to help bridge messages to target input channel on your module.</span><span class="sxs-lookup"><span data-stu-id="7aae8-183">The **input** container exposed restAPIs to help bridge messages to target input channel on your module.</span></span>

2. <span data-ttu-id="7aae8-184">In VS Code command palette, type and select **Azure IoT Edge: Set Module Credentials to User Settings** to set the module environment settings into `azure-iot-edge.EdgeHubConnectionString` and `azure-iot-edge.EdgeModuleCACertificateFile` in user settings.</span><span class="sxs-lookup"><span data-stu-id="7aae8-184">In VS Code command palette, type and select **Azure IoT Edge: Set Module Credentials to User Settings** to set the module environment settings into `azure-iot-edge.EdgeHubConnectionString` and `azure-iot-edge.EdgeModuleCACertificateFile` in user settings.</span></span> <span data-ttu-id="7aae8-185">You can find these environment settings are referenced in **.vscode** > **launch.json** and [VS Code user settings](https://code.visualstudio.com/docs/getstarted/settings).</span><span class="sxs-lookup"><span data-stu-id="7aae8-185">You can find these environment settings are referenced in **.vscode** > **launch.json** and [VS Code user settings](https://code.visualstudio.com/docs/getstarted/settings).</span></span>

### <a name="debug-java-module-in-launch-mode"></a><span data-ttu-id="7aae8-186">Debug Java module in launch mode</span><span class="sxs-lookup"><span data-stu-id="7aae8-186">Debug Java module in launch mode</span></span>

2. <span data-ttu-id="7aae8-187">Navigate to `App.java`.</span><span class="sxs-lookup"><span data-stu-id="7aae8-187">Navigate to `App.java`.</span></span> <span data-ttu-id="7aae8-188">Add a breakpoint in this file.</span><span class="sxs-lookup"><span data-stu-id="7aae8-188">Add a breakpoint in this file.</span></span>

3. <span data-ttu-id="7aae8-189">Navigate to VS Code debug view.</span><span class="sxs-lookup"><span data-stu-id="7aae8-189">Navigate to VS Code debug view.</span></span> <span data-ttu-id="7aae8-190">Select the debug configuration **ModuleName Local Debug (java)**.</span><span class="sxs-lookup"><span data-stu-id="7aae8-190">Select the debug configuration **ModuleName Local Debug (java)**.</span></span> 

4. <span data-ttu-id="7aae8-191">Click **Start Debugging** or press **F5**.</span><span class="sxs-lookup"><span data-stu-id="7aae8-191">Click **Start Debugging** or press **F5**.</span></span> <span data-ttu-id="7aae8-192">You will start the debug session.</span><span class="sxs-lookup"><span data-stu-id="7aae8-192">You will start the debug session.</span></span>

5. <span data-ttu-id="7aae8-193">In VS Code integrated terminal, run the following command to send a **Hello World** message to your module.</span><span class="sxs-lookup"><span data-stu-id="7aae8-193">In VS Code integrated terminal, run the following command to send a **Hello World** message to your module.</span></span> <span data-ttu-id="7aae8-194">This is the command showed in previous steps when setup IoT Edge simulator successfully.</span><span class="sxs-lookup"><span data-stu-id="7aae8-194">This is the command showed in previous steps when setup IoT Edge simulator successfully.</span></span> <span data-ttu-id="7aae8-195">You might need to create or switch to another integrated terminal if current one is blocked.</span><span class="sxs-lookup"><span data-stu-id="7aae8-195">You might need to create or switch to another integrated terminal if current one is blocked.</span></span>

    ```cmd
    curl --header "Content-Type: application/json" --request POST --data '{"inputName": "input1","data":"hello world"}' http://localhost:53000/api/v1/messages
    ```

   > [!NOTE]
   > <span data-ttu-id="7aae8-196">If you are using Windows, making sure the shell of your VS Code integrated terminal is **Git Bash** or **WSL Bash**.</span><span class="sxs-lookup"><span data-stu-id="7aae8-196">If you are using Windows, making sure the shell of your VS Code integrated terminal is **Git Bash** or **WSL Bash**.</span></span> <span data-ttu-id="7aae8-197">You cannot run `curl` command in PowerShell or Command Prompt.</span><span class="sxs-lookup"><span data-stu-id="7aae8-197">You cannot run `curl` command in PowerShell or Command Prompt.</span></span> 
   
   > [!TIP]
   > <span data-ttu-id="7aae8-198">You can also use [PostMan](https://www.getpostman.com/) or other API tools to send messages through instead of `curl`.</span><span class="sxs-lookup"><span data-stu-id="7aae8-198">You can also use [PostMan](https://www.getpostman.com/) or other API tools to send messages through instead of `curl`.</span></span>

6. <span data-ttu-id="7aae8-199">In VS Code Debug view, you'll see the variables in the left panel.</span><span class="sxs-lookup"><span data-stu-id="7aae8-199">In VS Code Debug view, you'll see the variables in the left panel.</span></span> 

7. <span data-ttu-id="7aae8-200">To stop debugging session, click the Stop button or press **Shift + F5**.</span><span class="sxs-lookup"><span data-stu-id="7aae8-200">To stop debugging session, click the Stop button or press **Shift + F5**.</span></span> <span data-ttu-id="7aae8-201">And in VS Code command palette, type and select **Azure IoT Edge: Stop IoT Edge Simulator** to stop and clean the simulator.</span><span class="sxs-lookup"><span data-stu-id="7aae8-201">And in VS Code command palette, type and select **Azure IoT Edge: Stop IoT Edge Simulator** to stop and clean the simulator.</span></span>


## <a name="build-module-container-for-debugging-and-debug-in-attach-mode"></a><span data-ttu-id="7aae8-202">Build module container for debugging and debug in attach mode</span><span class="sxs-lookup"><span data-stu-id="7aae8-202">Build module container for debugging and debug in attach mode</span></span>

<span data-ttu-id="7aae8-203">Your default solution contains two modules, one is a simulated temperature sensor module and the other is the Java pipe module.</span><span class="sxs-lookup"><span data-stu-id="7aae8-203">Your default solution contains two modules, one is a simulated temperature sensor module and the other is the Java pipe module.</span></span> <span data-ttu-id="7aae8-204">The simulated temperature sensor keeps sending messages to Java pipe module, and then the messages are piped to IoT Hub.</span><span class="sxs-lookup"><span data-stu-id="7aae8-204">The simulated temperature sensor keeps sending messages to Java pipe module, and then the messages are piped to IoT Hub.</span></span> <span data-ttu-id="7aae8-205">In the module folder you created, there are several Docker files for different container types.</span><span class="sxs-lookup"><span data-stu-id="7aae8-205">In the module folder you created, there are several Docker files for different container types.</span></span> <span data-ttu-id="7aae8-206">Use any of these files that end with the extension **.debug** to build your module for testing.</span><span class="sxs-lookup"><span data-stu-id="7aae8-206">Use any of these files that end with the extension **.debug** to build your module for testing.</span></span> <span data-ttu-id="7aae8-207">Currently, Java modules only support debugging in linux-amd64 and linux-arm32v7 containers.</span><span class="sxs-lookup"><span data-stu-id="7aae8-207">Currently, Java modules only support debugging in linux-amd64 and linux-arm32v7 containers.</span></span>

### <a name="setup-iot-edge-simulator-for-iot-edge-solution"></a><span data-ttu-id="7aae8-208">Setup IoT Edge simulator for IoT Edge solution</span><span class="sxs-lookup"><span data-stu-id="7aae8-208">Setup IoT Edge simulator for IoT Edge solution</span></span>

<span data-ttu-id="7aae8-209">In your development machine, you can start IoT Edge simulator instead of installing the IoT Edge security daemon to run your IoT Edge solution.</span><span class="sxs-lookup"><span data-stu-id="7aae8-209">In your development machine, you can start IoT Edge simulator instead of installing the IoT Edge security daemon to run your IoT Edge solution.</span></span> 

1. <span data-ttu-id="7aae8-210">In device explorer on the left side, right-click on your IoT Edge device ID, select **Setup IoT Edge Simulator** to start the simulator with the device connection string.</span><span class="sxs-lookup"><span data-stu-id="7aae8-210">In device explorer on the left side, right-click on your IoT Edge device ID, select **Setup IoT Edge Simulator** to start the simulator with the device connection string.</span></span>

2. <span data-ttu-id="7aae8-211">You can see the IoT Edge Simulator has been successfully setup in integrated terminal.</span><span class="sxs-lookup"><span data-stu-id="7aae8-211">You can see the IoT Edge Simulator has been successfully setup in integrated terminal.</span></span>

### <a name="build-and-run-container-for-debugging-and-debug-in-attach-mode"></a><span data-ttu-id="7aae8-212">Build and run container for debugging and debug in attach mode</span><span class="sxs-lookup"><span data-stu-id="7aae8-212">Build and run container for debugging and debug in attach mode</span></span>

1. <span data-ttu-id="7aae8-213">In VS Code, navigate to the `deployment.template.json` file.</span><span class="sxs-lookup"><span data-stu-id="7aae8-213">In VS Code, navigate to the `deployment.template.json` file.</span></span> <span data-ttu-id="7aae8-214">Update your module image URL by adding **.debug** to the end.</span><span class="sxs-lookup"><span data-stu-id="7aae8-214">Update your module image URL by adding **.debug** to the end.</span></span>

2. <span data-ttu-id="7aae8-215">Replace the Java module createOptions in **deployment.template.json** with below content and save this file:</span><span class="sxs-lookup"><span data-stu-id="7aae8-215">Replace the Java module createOptions in **deployment.template.json** with below content and save this file:</span></span> 
    ```json
    "createOptions":"{\"HostConfig\":{\"PortBindings\":{\"5005/tcp\":[{\"HostPort\":\"5005\"}]}}}"
    ```

5. <span data-ttu-id="7aae8-216">Navigate to the VS Code debug view.</span><span class="sxs-lookup"><span data-stu-id="7aae8-216">Navigate to the VS Code debug view.</span></span> <span data-ttu-id="7aae8-217">Select the debug configuration file for your module.</span><span class="sxs-lookup"><span data-stu-id="7aae8-217">Select the debug configuration file for your module.</span></span> <span data-ttu-id="7aae8-218">The debug option name should be similar to **ModuleName Remote Debug (Java)**.</span><span class="sxs-lookup"><span data-stu-id="7aae8-218">The debug option name should be similar to **ModuleName Remote Debug (Java)**.</span></span>

6. <span data-ttu-id="7aae8-219">Select **Start Debugging** or select **F5**.</span><span class="sxs-lookup"><span data-stu-id="7aae8-219">Select **Start Debugging** or select **F5**.</span></span> <span data-ttu-id="7aae8-220">Select the process to attach to.</span><span class="sxs-lookup"><span data-stu-id="7aae8-220">Select the process to attach to.</span></span>

7. <span data-ttu-id="7aae8-221">In VS Code Debug view, you'll see the variables in the left panel.</span><span class="sxs-lookup"><span data-stu-id="7aae8-221">In VS Code Debug view, you'll see the variables in the left panel.</span></span>

8. <span data-ttu-id="7aae8-222">To stop debugging session, click the Stop button or press **Shift + F5**.</span><span class="sxs-lookup"><span data-stu-id="7aae8-222">To stop debugging session, click the Stop button or press **Shift + F5**.</span></span> <span data-ttu-id="7aae8-223">And in VS Code command palette, type and select **Azure IoT Edge: Stop IoT Edge Simulator**.</span><span class="sxs-lookup"><span data-stu-id="7aae8-223">And in VS Code command palette, type and select **Azure IoT Edge: Stop IoT Edge Simulator**.</span></span>

> [!NOTE]
> <span data-ttu-id="7aae8-224">The preceding example shows how to debug Java IoT Edge modules on containers.</span><span class="sxs-lookup"><span data-stu-id="7aae8-224">The preceding example shows how to debug Java IoT Edge modules on containers.</span></span> <span data-ttu-id="7aae8-225">It added exposed ports in your module container createOptions.</span><span class="sxs-lookup"><span data-stu-id="7aae8-225">It added exposed ports in your module container createOptions.</span></span> <span data-ttu-id="7aae8-226">After you finish debugging your Java modules, we recommend you remove these exposed ports for production-ready IoT Edge modules.</span><span class="sxs-lookup"><span data-stu-id="7aae8-226">After you finish debugging your Java modules, we recommend you remove these exposed ports for production-ready IoT Edge modules.</span></span>

## <a name="next-steps"></a><span data-ttu-id="7aae8-227">Next steps</span><span class="sxs-lookup"><span data-stu-id="7aae8-227">Next steps</span></span>

<span data-ttu-id="7aae8-228">Once you have your module built, learn how to [Deploy Azure IoT Edge modules from Visual Studio Code](how-to-deploy-modules-vscode.md)</span><span class="sxs-lookup"><span data-stu-id="7aae8-228">Once you have your module built, learn how to [Deploy Azure IoT Edge modules from Visual Studio Code](how-to-deploy-modules-vscode.md)</span></span>

<span data-ttu-id="7aae8-229">To develop modules for your IoT Edge devices, [Understand and use Azure IoT Hub SDKs](../iot-hub/iot-hub-devguide-sdks.md).</span><span class="sxs-lookup"><span data-stu-id="7aae8-229">To develop modules for your IoT Edge devices, [Understand and use Azure IoT Hub SDKs](../iot-hub/iot-hub-devguide-sdks.md).</span></span>
