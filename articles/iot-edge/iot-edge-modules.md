---
title: Understand Azure IoT Edge modules | Microsoft Docs
description: Learn about Azure IoT Edge modules and how they are configured
author: kgremban
manager: timlt
ms.author: kgremban
ms.date: 02/15/2018
ms.topic: conceptual
ms.service: iot-edge
services: iot-edge
ms.openlocfilehash: 9064e0da6dde6c4b30235adf771f06a4f25d709a
ms.sourcegitcommit: d1451406a010fd3aa854dc8e5b77dc5537d8050e
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 09/13/2018
ms.locfileid: "44864390"
---
# <a name="understand-azure-iot-edge-modules"></a><span data-ttu-id="72933-103">Understand Azure IoT Edge modules</span><span class="sxs-lookup"><span data-stu-id="72933-103">Understand Azure IoT Edge modules</span></span>

<span data-ttu-id="72933-104">Azure IoT Edge lets you deploy and manage business logic on the edge in the form of *modules*.</span><span class="sxs-lookup"><span data-stu-id="72933-104">Azure IoT Edge lets you deploy and manage business logic on the edge in the form of *modules*.</span></span> <span data-ttu-id="72933-105">Azure IoT Edge modules are the smallest unit of computation managed by IoT Edge, and can contain Azure services (such as Azure Stream Analytics) or your own solution-specific code.</span><span class="sxs-lookup"><span data-stu-id="72933-105">Azure IoT Edge modules are the smallest unit of computation managed by IoT Edge, and can contain Azure services (such as Azure Stream Analytics) or your own solution-specific code.</span></span> <span data-ttu-id="72933-106">To understand how modules are developed, deployed, and maintained, it helps to think of four conceptual pieces that make up a module:</span><span class="sxs-lookup"><span data-stu-id="72933-106">To understand how modules are developed, deployed, and maintained, it helps to think of four conceptual pieces that make up a module:</span></span>

* <span data-ttu-id="72933-107">A **module image** is a package containing the software that defines a module.</span><span class="sxs-lookup"><span data-stu-id="72933-107">A **module image** is a package containing the software that defines a module.</span></span>
* <span data-ttu-id="72933-108">A **module instance** is the specific unit of computation running the module image on an IoT Edge device.</span><span class="sxs-lookup"><span data-stu-id="72933-108">A **module instance** is the specific unit of computation running the module image on an IoT Edge device.</span></span> <span data-ttu-id="72933-109">The module instance is started by the IoT Edge runtime.</span><span class="sxs-lookup"><span data-stu-id="72933-109">The module instance is started by the IoT Edge runtime.</span></span>
* <span data-ttu-id="72933-110">A **module identity** is a piece of information (including security credentials) stored in IoT Hub, that is associated to each module instance.</span><span class="sxs-lookup"><span data-stu-id="72933-110">A **module identity** is a piece of information (including security credentials) stored in IoT Hub, that is associated to each module instance.</span></span>
* <span data-ttu-id="72933-111">A **module twin** is a JSON document stored in IoT Hub, that contains state information for a module instance, including metadata, configurations, and conditions.</span><span class="sxs-lookup"><span data-stu-id="72933-111">A **module twin** is a JSON document stored in IoT Hub, that contains state information for a module instance, including metadata, configurations, and conditions.</span></span> 

## <a name="module-images-and-instances"></a><span data-ttu-id="72933-112">Module images and instances</span><span class="sxs-lookup"><span data-stu-id="72933-112">Module images and instances</span></span>

<span data-ttu-id="72933-113">IoT Edge module images contain applications that take advantage of the management, security, and communication features of the IoT Edge runtime.</span><span class="sxs-lookup"><span data-stu-id="72933-113">IoT Edge module images contain applications that take advantage of the management, security, and communication features of the IoT Edge runtime.</span></span> <span data-ttu-id="72933-114">You can develop your own module images, or export one from a supported Azure service, such as Azure Stream Analytics.</span><span class="sxs-lookup"><span data-stu-id="72933-114">You can develop your own module images, or export one from a supported Azure service, such as Azure Stream Analytics.</span></span>
<span data-ttu-id="72933-115">The images exist in the cloud and they can be updated, changed, and deployed in different solutions.</span><span class="sxs-lookup"><span data-stu-id="72933-115">The images exist in the cloud and they can be updated, changed, and deployed in different solutions.</span></span> <span data-ttu-id="72933-116">For instance, a module that uses machine learning to predict production line output exists as a separate image than a module that uses computer vision to control a drone.</span><span class="sxs-lookup"><span data-stu-id="72933-116">For instance, a module that uses machine learning to predict production line output exists as a separate image than a module that uses computer vision to control a drone.</span></span> 

<span data-ttu-id="72933-117">Each time a module image is deployed to a device and started by the IoT Edge runtime, a new instance of that module is created.</span><span class="sxs-lookup"><span data-stu-id="72933-117">Each time a module image is deployed to a device and started by the IoT Edge runtime, a new instance of that module is created.</span></span> <span data-ttu-id="72933-118">Two devices in different parts of the world could use the same module image; however each would have their own module instance when the module is started on the device.</span><span class="sxs-lookup"><span data-stu-id="72933-118">Two devices in different parts of the world could use the same module image; however each would have their own module instance when the module is started on the device.</span></span> 

![Module images in cloud - module instances on devices][1]

<span data-ttu-id="72933-120">In implementation, modules images exist as container images in a repository, and module instances are containers on devices.</span><span class="sxs-lookup"><span data-stu-id="72933-120">In implementation, modules images exist as container images in a repository, and module instances are containers on devices.</span></span> 

<!--
As use cases for Azure IoT Edge grow, new types of module images and instances will be created. For example, resource constrained devices cannot run containers so may require module images that exist as dynamic link libraries and instances that are executables. 
-->

## <a name="module-identities"></a><span data-ttu-id="72933-121">Module identities</span><span class="sxs-lookup"><span data-stu-id="72933-121">Module identities</span></span>

<span data-ttu-id="72933-122">When a new module instance is created by the IoT Edge runtime, the instance is associated with a corresponding module identity.</span><span class="sxs-lookup"><span data-stu-id="72933-122">When a new module instance is created by the IoT Edge runtime, the instance is associated with a corresponding module identity.</span></span> <span data-ttu-id="72933-123">The module identity is stored in IoT Hub, and is employed as the addressing and security scope for all local and cloud communications for that specific module instance.</span><span class="sxs-lookup"><span data-stu-id="72933-123">The module identity is stored in IoT Hub, and is employed as the addressing and security scope for all local and cloud communications for that specific module instance.</span></span>
<span data-ttu-id="72933-124">The identity associated with a module instance depends on the identity of the device on which the instance is running and the name you provide to that module in your solution.</span><span class="sxs-lookup"><span data-stu-id="72933-124">The identity associated with a module instance depends on the identity of the device on which the instance is running and the name you provide to that module in your solution.</span></span> <span data-ttu-id="72933-125">For instance, if you call `insight` a module that uses an Azure Stream Analytics, and you deploy it on a device called `Hannover01`, the IoT Edge runtime creates a corresponding module identity called `/devices/Hannover01/modules/insight`.</span><span class="sxs-lookup"><span data-stu-id="72933-125">For instance, if you call `insight` a module that uses an Azure Stream Analytics, and you deploy it on a device called `Hannover01`, the IoT Edge runtime creates a corresponding module identity called `/devices/Hannover01/modules/insight`.</span></span>

<span data-ttu-id="72933-126">Clearly, in scenarios when you need to deploy one module image multiple times on the same device, you can deploy the same image multiple times with different names.</span><span class="sxs-lookup"><span data-stu-id="72933-126">Clearly, in scenarios when you need to deploy one module image multiple times on the same device, you can deploy the same image multiple times with different names.</span></span>

![Module identities are unique][2]

## <a name="module-twins"></a><span data-ttu-id="72933-128">Module twins</span><span class="sxs-lookup"><span data-stu-id="72933-128">Module twins</span></span>

<span data-ttu-id="72933-129">Each module instance also has a corresponding module twin that you can use to configure the module instance.</span><span class="sxs-lookup"><span data-stu-id="72933-129">Each module instance also has a corresponding module twin that you can use to configure the module instance.</span></span> <span data-ttu-id="72933-130">The instance and the twin are associated with each other through the module identity.</span><span class="sxs-lookup"><span data-stu-id="72933-130">The instance and the twin are associated with each other through the module identity.</span></span> 

<span data-ttu-id="72933-131">A module twin is a JSON document that stores module information and configuration properties.</span><span class="sxs-lookup"><span data-stu-id="72933-131">A module twin is a JSON document that stores module information and configuration properties.</span></span> <span data-ttu-id="72933-132">This concept parallels the [device twin][lnk-device-twin] concept from IoT Hub.</span><span class="sxs-lookup"><span data-stu-id="72933-132">This concept parallels the [device twin][lnk-device-twin] concept from IoT Hub.</span></span> <span data-ttu-id="72933-133">The structure of a module twin is exactly the same as a device twin.</span><span class="sxs-lookup"><span data-stu-id="72933-133">The structure of a module twin is exactly the same as a device twin.</span></span> <span data-ttu-id="72933-134">The APIs used to interact with both types of twins are also the same.</span><span class="sxs-lookup"><span data-stu-id="72933-134">The APIs used to interact with both types of twins are also the same.</span></span> <span data-ttu-id="72933-135">The only difference between the two is the identity used to instantiate the client SDK.</span><span class="sxs-lookup"><span data-stu-id="72933-135">The only difference between the two is the identity used to instantiate the client SDK.</span></span> 

```csharp
// Create a ModuleClient object. This ModuleClient will act on behalf of a 
// module since it is created with a module’s connection string instead 
// of a device connection string. 
ModuleClient client = new ModuleClient.CreateFromEnvironmentAsync(settings); 
await client.OpenAsync(); 
 
// Get the module twin 
Twin twin = await client.GetTwinAsync(); 
```

## <a name="offline-capabilities"></a><span data-ttu-id="72933-136">Offline capabilities</span><span class="sxs-lookup"><span data-stu-id="72933-136">Offline capabilities</span></span>

<span data-ttu-id="72933-137">Azure IoT Edge supports offline operations on your IoT Edge devices.</span><span class="sxs-lookup"><span data-stu-id="72933-137">Azure IoT Edge supports offline operations on your IoT Edge devices.</span></span> <span data-ttu-id="72933-138">These capabilities are limited for now, and additional scenarios are being developed.</span><span class="sxs-lookup"><span data-stu-id="72933-138">These capabilities are limited for now, and additional scenarios are being developed.</span></span> 

<span data-ttu-id="72933-139">IoT Edge modules can be offline for extended periods as long as the following requirements are met:</span><span class="sxs-lookup"><span data-stu-id="72933-139">IoT Edge modules can be offline for extended periods as long as the following requirements are met:</span></span> 

* <span data-ttu-id="72933-140">**Message time-to-live (TTL) has not expired**.</span><span class="sxs-lookup"><span data-stu-id="72933-140">**Message time-to-live (TTL) has not expired**.</span></span> <span data-ttu-id="72933-141">The default value for message TTL is two hours, but can be changed higher or lower in the Store and forward configuration in the IoT Edge hub settings.</span><span class="sxs-lookup"><span data-stu-id="72933-141">The default value for message TTL is two hours, but can be changed higher or lower in the Store and forward configuration in the IoT Edge hub settings.</span></span> 
* <span data-ttu-id="72933-142">**Modules don't need to reauthenticate with the IoT Edge hub when offline**.</span><span class="sxs-lookup"><span data-stu-id="72933-142">**Modules don't need to reauthenticate with the IoT Edge hub when offline**.</span></span> <span data-ttu-id="72933-143">Modules can only authenticate with Edge hubs that have an active connection with an IoT hub.</span><span class="sxs-lookup"><span data-stu-id="72933-143">Modules can only authenticate with Edge hubs that have an active connection with an IoT hub.</span></span> <span data-ttu-id="72933-144">Modules need to re-authenticate if they are restarted for any reason.</span><span class="sxs-lookup"><span data-stu-id="72933-144">Modules need to re-authenticate if they are restarted for any reason.</span></span> <span data-ttu-id="72933-145">Modules can still send messages to the Edge hub after their SAS token has expired.</span><span class="sxs-lookup"><span data-stu-id="72933-145">Modules can still send messages to the Edge hub after their SAS token has expired.</span></span> <span data-ttu-id="72933-146">When connectivity resumes, the Edge hub requests a new token from the module and validates it with the IoT hub.</span><span class="sxs-lookup"><span data-stu-id="72933-146">When connectivity resumes, the Edge hub requests a new token from the module and validates it with the IoT hub.</span></span> <span data-ttu-id="72933-147">If successful, the Edge hub forwards the module messages it has stored, even the messages that were sent while the module's token was expired.</span><span class="sxs-lookup"><span data-stu-id="72933-147">If successful, the Edge hub forwards the module messages it has stored, even the messages that were sent while the module's token was expired.</span></span> 
* <span data-ttu-id="72933-148">**The module that sent the messages while offline is still functional when connectivity resumes**.</span><span class="sxs-lookup"><span data-stu-id="72933-148">**The module that sent the messages while offline is still functional when connectivity resumes**.</span></span> <span data-ttu-id="72933-149">Upon reconnecting to IoT Hub, the Edge hub needs to validate a new module token (if the previous one expired) before it can forward the module messages.</span><span class="sxs-lookup"><span data-stu-id="72933-149">Upon reconnecting to IoT Hub, the Edge hub needs to validate a new module token (if the previous one expired) before it can forward the module messages.</span></span> <span data-ttu-id="72933-150">If the module is not available to provide a new token, the Edge hub cannot act on the module's stored messages.</span><span class="sxs-lookup"><span data-stu-id="72933-150">If the module is not available to provide a new token, the Edge hub cannot act on the module's stored messages.</span></span> 
* <span data-ttu-id="72933-151">**The Edge hub has disk space to store the messages**.</span><span class="sxs-lookup"><span data-stu-id="72933-151">**The Edge hub has disk space to store the messages**.</span></span> <span data-ttu-id="72933-152">By default, messages are stored in the Edge hub container's filesystem.</span><span class="sxs-lookup"><span data-stu-id="72933-152">By default, messages are stored in the Edge hub container's filesystem.</span></span> <span data-ttu-id="72933-153">There is a configuration option to specify a mounted volume to store the messages instead.</span><span class="sxs-lookup"><span data-stu-id="72933-153">There is a configuration option to specify a mounted volume to store the messages instead.</span></span> <span data-ttu-id="72933-154">In either case, there needs to be space available to store the messages for deferred delivery to IoT Hub.</span><span class="sxs-lookup"><span data-stu-id="72933-154">In either case, there needs to be space available to store the messages for deferred delivery to IoT Hub.</span></span>  

## <a name="next-steps"></a><span data-ttu-id="72933-155">Next steps</span><span class="sxs-lookup"><span data-stu-id="72933-155">Next steps</span></span>
 - <span data-ttu-id="72933-156">[Understand the Azure IoT Edge runtime and its architecture][lnk-runtime]</span><span class="sxs-lookup"><span data-stu-id="72933-156">[Understand the Azure IoT Edge runtime and its architecture][lnk-runtime]</span></span>

<!-- Images -->
[1]: ./media/iot-edge-modules/image_instance.png
[2]: ./media/iot-edge-modules/identity.png

<!-- Links -->
[lnk-device-identity]: ../iot-hub/iot-hub-devguide-identity-registry.md
[lnk-device-twin]: ../iot-hub/iot-hub-devguide-device-twins.md
[lnk-runtime]: iot-edge-runtime.md
