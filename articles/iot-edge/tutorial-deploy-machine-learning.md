---
title: Deploy Azure Machine Learning with Azure IoT Edge | Microsoft Docs
description: In this tutorial, you deploy Azure Machine Learning as a module to an edge device
author: kgremban
manager: timlt
ms.author: kgremban
ms.date: 08/22/2018
ms.topic: tutorial
ms.service: iot-edge
services: iot-edge
ms.custom: mvc
ms.openlocfilehash: db22b8ddeaa7fc8fd4d8f7a8b3b3d8b4bc143974
ms.sourcegitcommit: d1451406a010fd3aa854dc8e5b77dc5537d8050e
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 09/13/2018
ms.locfileid: "44866130"
---
# <a name="tutorial-deploy-azure-machine-learning-as-an-iot-edge-module-preview"></a><span data-ttu-id="931e7-103">Tutorial: Deploy Azure Machine Learning as an IoT Edge module (preview)</span><span class="sxs-lookup"><span data-stu-id="931e7-103">Tutorial: Deploy Azure Machine Learning as an IoT Edge module (preview)</span></span>

<span data-ttu-id="931e7-104">You can use IoT Edge modules to deploy code that implements your business logic directly to your IoT Edge devices.</span><span class="sxs-lookup"><span data-stu-id="931e7-104">You can use IoT Edge modules to deploy code that implements your business logic directly to your IoT Edge devices.</span></span> <span data-ttu-id="931e7-105">This tutorial walks you through deploying an Azure Machine Learning module that predicts when a device fails based on simulated machine temperature data.</span><span class="sxs-lookup"><span data-stu-id="931e7-105">This tutorial walks you through deploying an Azure Machine Learning module that predicts when a device fails based on simulated machine temperature data.</span></span> <span data-ttu-id="931e7-106">For more information about Azure ML on IoT Edge, see [Azure Machine Learning documentation](../machine-learning/desktop-workbench/use-azure-iot-edge-ai-toolkit.md).</span><span class="sxs-lookup"><span data-stu-id="931e7-106">For more information about Azure ML on IoT Edge, see [Azure Machine Learning documentation](../machine-learning/desktop-workbench/use-azure-iot-edge-ai-toolkit.md).</span></span>

<span data-ttu-id="931e7-107">The Azure Machine Learning module that you create in this tutorial reads the environmental data generated by your device and labels the messages as anomalous or not.</span><span class="sxs-lookup"><span data-stu-id="931e7-107">The Azure Machine Learning module that you create in this tutorial reads the environmental data generated by your device and labels the messages as anomalous or not.</span></span>

<span data-ttu-id="931e7-108">In this tutorial, you learn how to:</span><span class="sxs-lookup"><span data-stu-id="931e7-108">In this tutorial, you learn how to:</span></span>

> [!div class="checklist"]
> * <span data-ttu-id="931e7-109">Create an Azure Machine Learning module</span><span class="sxs-lookup"><span data-stu-id="931e7-109">Create an Azure Machine Learning module</span></span>
> * <span data-ttu-id="931e7-110">Push a module container to an Azure container registry</span><span class="sxs-lookup"><span data-stu-id="931e7-110">Push a module container to an Azure container registry</span></span>
> * <span data-ttu-id="931e7-111">Deploy an Azure Machine Learning module to your IoT Edge device</span><span class="sxs-lookup"><span data-stu-id="931e7-111">Deploy an Azure Machine Learning module to your IoT Edge device</span></span>
> * <span data-ttu-id="931e7-112">View generated data</span><span class="sxs-lookup"><span data-stu-id="931e7-112">View generated data</span></span>

>[!NOTE]
><span data-ttu-id="931e7-113">Azure Machine Learning modules on Azure IoT Edge are in public preview.</span><span class="sxs-lookup"><span data-stu-id="931e7-113">Azure Machine Learning modules on Azure IoT Edge are in public preview.</span></span> 

[!INCLUDE [quickstarts-free-trial-note](../../includes/quickstarts-free-trial-note.md)]


## <a name="prerequisites"></a><span data-ttu-id="931e7-114">Prerequisites</span><span class="sxs-lookup"><span data-stu-id="931e7-114">Prerequisites</span></span>

<span data-ttu-id="931e7-115">An Azure IoT Edge device:</span><span class="sxs-lookup"><span data-stu-id="931e7-115">An Azure IoT Edge device:</span></span>

* <span data-ttu-id="931e7-116">You can use your development machine or a virtual machine as an Edge device by following the steps in the quickstart for [Linux](quickstart-linux.md) or [Windows devices](quickstart.md).</span><span class="sxs-lookup"><span data-stu-id="931e7-116">You can use your development machine or a virtual machine as an Edge device by following the steps in the quickstart for [Linux](quickstart-linux.md) or [Windows devices](quickstart.md).</span></span>
* <span data-ttu-id="931e7-117">The Azure Machine Learning module does not support ARM processors.</span><span class="sxs-lookup"><span data-stu-id="931e7-117">The Azure Machine Learning module does not support ARM processors.</span></span>

<span data-ttu-id="931e7-118">Cloud resources:</span><span class="sxs-lookup"><span data-stu-id="931e7-118">Cloud resources:</span></span>

* <span data-ttu-id="931e7-119">A standard-tier [IoT Hub](../iot-hub/iot-hub-create-through-portal.md) in Azure.</span><span class="sxs-lookup"><span data-stu-id="931e7-119">A standard-tier [IoT Hub](../iot-hub/iot-hub-create-through-portal.md) in Azure.</span></span> 
* <span data-ttu-id="931e7-120">An Azure Machine Learning account.</span><span class="sxs-lookup"><span data-stu-id="931e7-120">An Azure Machine Learning account.</span></span> <span data-ttu-id="931e7-121">Follow the instructions in [Create Azure Machine Learning accounts and install Azure Machine Learning Workbench](../machine-learning/service/quickstart-installation.md#create-azure-machine-learning-services-accounts).</span><span class="sxs-lookup"><span data-stu-id="931e7-121">Follow the instructions in [Create Azure Machine Learning accounts and install Azure Machine Learning Workbench](../machine-learning/service/quickstart-installation.md#create-azure-machine-learning-services-accounts).</span></span> <span data-ttu-id="931e7-122">You do not need to install the workbench application for this tutorial.</span><span class="sxs-lookup"><span data-stu-id="931e7-122">You do not need to install the workbench application for this tutorial.</span></span> 

<span data-ttu-id="931e7-123">Development resources:</span><span class="sxs-lookup"><span data-stu-id="931e7-123">Development resources:</span></span>

* <span data-ttu-id="931e7-124">Model Management for Azure ML.</span><span class="sxs-lookup"><span data-stu-id="931e7-124">Model Management for Azure ML.</span></span> <span data-ttu-id="931e7-125">To set up your environment and create an account, follow the instructions in [Model management setup](../machine-learning/desktop-workbench/deployment-setup-configuration.md).</span><span class="sxs-lookup"><span data-stu-id="931e7-125">To set up your environment and create an account, follow the instructions in [Model management setup](../machine-learning/desktop-workbench/deployment-setup-configuration.md).</span></span> <span data-ttu-id="931e7-126">During deployment setup, it is recommended to choose the local steps instead of cluster, where possible.</span><span class="sxs-lookup"><span data-stu-id="931e7-126">During deployment setup, it is recommended to choose the local steps instead of cluster, where possible.</span></span>

### <a name="disable-process-identification"></a><span data-ttu-id="931e7-127">Disable process identification</span><span class="sxs-lookup"><span data-stu-id="931e7-127">Disable process identification</span></span>

>[!NOTE]
>
> <span data-ttu-id="931e7-128">While in preview, Azure Machine Learning does not support the process identification security feature enabled by default with IoT Edge.</span><span class="sxs-lookup"><span data-stu-id="931e7-128">While in preview, Azure Machine Learning does not support the process identification security feature enabled by default with IoT Edge.</span></span> 
> <span data-ttu-id="931e7-129">Below are the steps to disable it.</span><span class="sxs-lookup"><span data-stu-id="931e7-129">Below are the steps to disable it.</span></span> <span data-ttu-id="931e7-130">This is however not suitable for use in production.</span><span class="sxs-lookup"><span data-stu-id="931e7-130">This is however not suitable for use in production.</span></span> <span data-ttu-id="931e7-131">These steps are only necessary on Linux, as you will have completed this during the Windows Edge runtime installation.</span><span class="sxs-lookup"><span data-stu-id="931e7-131">These steps are only necessary on Linux, as you will have completed this during the Windows Edge runtime installation.</span></span>

<span data-ttu-id="931e7-132">To disable process identification on your IoT edge device, you'll need to provide the ip address and port for **workload_uri** and **management_uri** in the **connect** section of the IoT Edge daemon configuration.</span><span class="sxs-lookup"><span data-stu-id="931e7-132">To disable process identification on your IoT edge device, you'll need to provide the ip address and port for **workload_uri** and **management_uri** in the **connect** section of the IoT Edge daemon configuration.</span></span>

<span data-ttu-id="931e7-133">Get the IP address first.</span><span class="sxs-lookup"><span data-stu-id="931e7-133">Get the IP address first.</span></span> <span data-ttu-id="931e7-134">Enter `ipconfig` in your command line and copy the IP address of the **docker0** interface.</span><span class="sxs-lookup"><span data-stu-id="931e7-134">Enter `ipconfig` in your command line and copy the IP address of the **docker0** interface.</span></span>

<span data-ttu-id="931e7-135">Edit the IoT Edge daemon configuration file:</span><span class="sxs-lookup"><span data-stu-id="931e7-135">Edit the IoT Edge daemon configuration file:</span></span>

```cmd/sh
sudo nano /etc/iotedge/config.yaml
```

<span data-ttu-id="931e7-136">Update the **connect** section of the configuration with your IP address.</span><span class="sxs-lookup"><span data-stu-id="931e7-136">Update the **connect** section of the configuration with your IP address.</span></span> <span data-ttu-id="931e7-137">For example:</span><span class="sxs-lookup"><span data-stu-id="931e7-137">For example:</span></span>
```yaml
connect:
  management_uri: "http://172.17.0.1:15580"
  workload_uri: "http://172.17.0.1:15581"
```

<span data-ttu-id="931e7-138">Enter the same addresses in the **listen** section of the configuration.</span><span class="sxs-lookup"><span data-stu-id="931e7-138">Enter the same addresses in the **listen** section of the configuration.</span></span> <span data-ttu-id="931e7-139">For example:</span><span class="sxs-lookup"><span data-stu-id="931e7-139">For example:</span></span>

```yaml
listen:
  management_uri: "http://172.17.0.1:15580"
  workload_uri: "http://172.17.0.1:15581"
```

<span data-ttu-id="931e7-140">Create an environment variable IOTEDGE_HOST with the management_uri address (To set it permanently, add it to `/etc/environment`).For example:</span><span class="sxs-lookup"><span data-stu-id="931e7-140">Create an environment variable IOTEDGE_HOST with the management_uri address (To set it permanently, add it to `/etc/environment`).For example:</span></span>

```cmd/sh
export IOTEDGE_HOST="http://172.17.0.1:15580"
```


## <a name="create-the-azure-ml-container"></a><span data-ttu-id="931e7-141">Create the Azure ML container</span><span class="sxs-lookup"><span data-stu-id="931e7-141">Create the Azure ML container</span></span>
<span data-ttu-id="931e7-142">In this section, you download the trained model files and convert them into an Azure ML container.</span><span class="sxs-lookup"><span data-stu-id="931e7-142">In this section, you download the trained model files and convert them into an Azure ML container.</span></span>

<span data-ttu-id="931e7-143">On the machine running Model Management for Azure ML, download and save [iot_score.py](https://github.com/Azure/ai-toolkit-iot-edge/blob/master/IoT%20Edge%20anomaly%20detection%20tutorial/iot_score.py) and [model.pkl](https://github.com/Azure/ai-toolkit-iot-edge/blob/master/IoT%20Edge%20anomaly%20detection%20tutorial/model.pkl) from the Azure ML IoT Toolkit on GitHub.</span><span class="sxs-lookup"><span data-stu-id="931e7-143">On the machine running Model Management for Azure ML, download and save [iot_score.py](https://github.com/Azure/ai-toolkit-iot-edge/blob/master/IoT%20Edge%20anomaly%20detection%20tutorial/iot_score.py) and [model.pkl](https://github.com/Azure/ai-toolkit-iot-edge/blob/master/IoT%20Edge%20anomaly%20detection%20tutorial/model.pkl) from the Azure ML IoT Toolkit on GitHub.</span></span> <span data-ttu-id="931e7-144">These files define the trained machine learning model that you will deploy to your Iot Edge device.</span><span class="sxs-lookup"><span data-stu-id="931e7-144">These files define the trained machine learning model that you will deploy to your Iot Edge device.</span></span>

<span data-ttu-id="931e7-145">Use the trained model to create a container that can be deployed to IoT Edge devices.</span><span class="sxs-lookup"><span data-stu-id="931e7-145">Use the trained model to create a container that can be deployed to IoT Edge devices.</span></span> <span data-ttu-id="931e7-146">Use the following command to:</span><span class="sxs-lookup"><span data-stu-id="931e7-146">Use the following command to:</span></span>

   * <span data-ttu-id="931e7-147">Register your model.</span><span class="sxs-lookup"><span data-stu-id="931e7-147">Register your model.</span></span>
   * <span data-ttu-id="931e7-148">Create a manifest.</span><span class="sxs-lookup"><span data-stu-id="931e7-148">Create a manifest.</span></span>
   * <span data-ttu-id="931e7-149">Create a Docker container image named *machinelearningmodule*.</span><span class="sxs-lookup"><span data-stu-id="931e7-149">Create a Docker container image named *machinelearningmodule*.</span></span>
   * <span data-ttu-id="931e7-150">Deploy the image to your Azure Kubernetes Service (AKS) cluster.</span><span class="sxs-lookup"><span data-stu-id="931e7-150">Deploy the image to your Azure Kubernetes Service (AKS) cluster.</span></span>

```cmd
az ml service create realtime --model-file model.pkl -f iot_score.py -n machinelearningmodule -r python
```

### <a name="view-the-container-repository"></a><span data-ttu-id="931e7-151">View the container repository</span><span class="sxs-lookup"><span data-stu-id="931e7-151">View the container repository</span></span>

<span data-ttu-id="931e7-152">Check that your container image was successfully created and stored in the Azure Container registry that is associated with your machine learning environment.</span><span class="sxs-lookup"><span data-stu-id="931e7-152">Check that your container image was successfully created and stored in the Azure Container registry that is associated with your machine learning environment.</span></span>

1. <span data-ttu-id="931e7-153">On the [Azure portal](https://portal.azure.com), go to **All Services** and Select **Container registries**.</span><span class="sxs-lookup"><span data-stu-id="931e7-153">On the [Azure portal](https://portal.azure.com), go to **All Services** and Select **Container registries**.</span></span>
2. <span data-ttu-id="931e7-154">Select your registry.</span><span class="sxs-lookup"><span data-stu-id="931e7-154">Select your registry.</span></span> <span data-ttu-id="931e7-155">The name should start with **mlcr** and it belongs to the resource group, location, and subscription that you used to set up Module Management.</span><span class="sxs-lookup"><span data-stu-id="931e7-155">The name should start with **mlcr** and it belongs to the resource group, location, and subscription that you used to set up Module Management.</span></span>
3. <span data-ttu-id="931e7-156">Select **Access keys**</span><span class="sxs-lookup"><span data-stu-id="931e7-156">Select **Access keys**</span></span>
4. <span data-ttu-id="931e7-157">Copy the **Login server**, **Username**, and **Password**.</span><span class="sxs-lookup"><span data-stu-id="931e7-157">Copy the **Login server**, **Username**, and **Password**.</span></span>  <span data-ttu-id="931e7-158">You need these to access the registry from your Edge devices.</span><span class="sxs-lookup"><span data-stu-id="931e7-158">You need these to access the registry from your Edge devices.</span></span>
5. <span data-ttu-id="931e7-159">Select **Repositories**</span><span class="sxs-lookup"><span data-stu-id="931e7-159">Select **Repositories**</span></span>
6. <span data-ttu-id="931e7-160">Select **machinelearningmodule**</span><span class="sxs-lookup"><span data-stu-id="931e7-160">Select **machinelearningmodule**</span></span>
7. <span data-ttu-id="931e7-161">You now have the full image path of the container.</span><span class="sxs-lookup"><span data-stu-id="931e7-161">You now have the full image path of the container.</span></span> <span data-ttu-id="931e7-162">Take note of this image path for the next section.</span><span class="sxs-lookup"><span data-stu-id="931e7-162">Take note of this image path for the next section.</span></span> <span data-ttu-id="931e7-163">It should look like this:  **<registry_name>.azurecr.io/machinelearningmodule:1**</span><span class="sxs-lookup"><span data-stu-id="931e7-163">It should look like this:  **<registry_name>.azurecr.io/machinelearningmodule:1**</span></span>

## <a name="deploy-to-your-device"></a><span data-ttu-id="931e7-164">Deploy to your device</span><span class="sxs-lookup"><span data-stu-id="931e7-164">Deploy to your device</span></span>

1. <span data-ttu-id="931e7-165">On the [Azure portal](https://portal.azure.com), navigate to your IoT hub.</span><span class="sxs-lookup"><span data-stu-id="931e7-165">On the [Azure portal](https://portal.azure.com), navigate to your IoT hub.</span></span>

1. <span data-ttu-id="931e7-166">Go to **IoT Edge** and select your IoT Edge device.</span><span class="sxs-lookup"><span data-stu-id="931e7-166">Go to **IoT Edge** and select your IoT Edge device.</span></span>

1. <span data-ttu-id="931e7-167">Select **Set modules**.</span><span class="sxs-lookup"><span data-stu-id="931e7-167">Select **Set modules**.</span></span>

1. <span data-ttu-id="931e7-168">In the **Registry Settings** section, add the credentials that you copied from your Azure container registry.</span><span class="sxs-lookup"><span data-stu-id="931e7-168">In the **Registry Settings** section, add the credentials that you copied from your Azure container registry.</span></span> 

   ![Add registry credentials](./media/tutorial-deploy-machine-learning/registry-settings.png)

1. <span data-ttu-id="931e7-170">If you've previously deployed the tempSensor module to your IoT Edge device, it may autopopulate.</span><span class="sxs-lookup"><span data-stu-id="931e7-170">If you've previously deployed the tempSensor module to your IoT Edge device, it may autopopulate.</span></span> <span data-ttu-id="931e7-171">If it's not already in your list of modules, add it.</span><span class="sxs-lookup"><span data-stu-id="931e7-171">If it's not already in your list of modules, add it.</span></span>

    1. <span data-ttu-id="931e7-172">Click **Add** and select **IoT Edge Module**.</span><span class="sxs-lookup"><span data-stu-id="931e7-172">Click **Add** and select **IoT Edge Module**.</span></span>
    2. <span data-ttu-id="931e7-173">In the **Name** field, enter `tempSensor`.</span><span class="sxs-lookup"><span data-stu-id="931e7-173">In the **Name** field, enter `tempSensor`.</span></span>
    3. <span data-ttu-id="931e7-174">In the **Image URI** field, enter `mcr.microsoft.com/azureiotedge-simulated-temperature-sensor:1.0`.</span><span class="sxs-lookup"><span data-stu-id="931e7-174">In the **Image URI** field, enter `mcr.microsoft.com/azureiotedge-simulated-temperature-sensor:1.0`.</span></span>
    4. <span data-ttu-id="931e7-175">Select **Save**.</span><span class="sxs-lookup"><span data-stu-id="931e7-175">Select **Save**.</span></span>

1. <span data-ttu-id="931e7-176">Add the machine learning module that you created.</span><span class="sxs-lookup"><span data-stu-id="931e7-176">Add the machine learning module that you created.</span></span>

    1. <span data-ttu-id="931e7-177">Click **Add** and select **IoT Edge Module**.</span><span class="sxs-lookup"><span data-stu-id="931e7-177">Click **Add** and select **IoT Edge Module**.</span></span>
    1. <span data-ttu-id="931e7-178">In the **Name** field, enter `machinelearningmodule`</span><span class="sxs-lookup"><span data-stu-id="931e7-178">In the **Name** field, enter `machinelearningmodule`</span></span>
    1. <span data-ttu-id="931e7-179">In the **Image** field, enter your image address; for example `<registry_name>.azurecr.io/machinelearningmodule:1`.</span><span class="sxs-lookup"><span data-stu-id="931e7-179">In the **Image** field, enter your image address; for example `<registry_name>.azurecr.io/machinelearningmodule:1`.</span></span>
    1. <span data-ttu-id="931e7-180">Select **Save**.</span><span class="sxs-lookup"><span data-stu-id="931e7-180">Select **Save**.</span></span>

1. <span data-ttu-id="931e7-181">Back in the **Add Modules** step, select **Next**.</span><span class="sxs-lookup"><span data-stu-id="931e7-181">Back in the **Add Modules** step, select **Next**.</span></span>

1. <span data-ttu-id="931e7-182">In the **Specify Routes** step, copy the JSON below into the text box.</span><span class="sxs-lookup"><span data-stu-id="931e7-182">In the **Specify Routes** step, copy the JSON below into the text box.</span></span> <span data-ttu-id="931e7-183">The first route transports messages from the temperature sensor to the machine learning module via the "amlInput" endpoint, which is the endpoint that all Azure Machine Learning modules use.</span><span class="sxs-lookup"><span data-stu-id="931e7-183">The first route transports messages from the temperature sensor to the machine learning module via the "amlInput" endpoint, which is the endpoint that all Azure Machine Learning modules use.</span></span> <span data-ttu-id="931e7-184">The second route transports messages from the machine learning module to IoT Hub.</span><span class="sxs-lookup"><span data-stu-id="931e7-184">The second route transports messages from the machine learning module to IoT Hub.</span></span> <span data-ttu-id="931e7-185">In this route, ''amlOutput'' is the endpoint that all Azure Machine Learning modules use to output data, and ''$upstream'' denotes IoT Hub.</span><span class="sxs-lookup"><span data-stu-id="931e7-185">In this route, ''amlOutput'' is the endpoint that all Azure Machine Learning modules use to output data, and ''$upstream'' denotes IoT Hub.</span></span>

    ```json
    {
        "routes": {
            "sensorToMachineLearning":"FROM /messages/modules/tempSensor/outputs/temperatureOutput INTO BrokeredEndpoint(\"/modules/machinelearningmodule/inputs/amlInput\")",
            "machineLearningToIoTHub": "FROM /messages/modules/machinelearningmodule/outputs/amlOutput INTO $upstream"
        }
    }
    ```

1. <span data-ttu-id="931e7-186">Select **Next**.</span><span class="sxs-lookup"><span data-stu-id="931e7-186">Select **Next**.</span></span>

1. <span data-ttu-id="931e7-187">In the **Review Deployment** step, select **Submit**.</span><span class="sxs-lookup"><span data-stu-id="931e7-187">In the **Review Deployment** step, select **Submit**.</span></span>

1. <span data-ttu-id="931e7-188">Return to the device details page and select **Refresh**.</span><span class="sxs-lookup"><span data-stu-id="931e7-188">Return to the device details page and select **Refresh**.</span></span>  <span data-ttu-id="931e7-189">You should see the new **machinelearningmodule** running along with the **tempSensor** module and the IoT Edge runtime modules.</span><span class="sxs-lookup"><span data-stu-id="931e7-189">You should see the new **machinelearningmodule** running along with the **tempSensor** module and the IoT Edge runtime modules.</span></span>

## <a name="view-generated-data"></a><span data-ttu-id="931e7-190">View generated data</span><span class="sxs-lookup"><span data-stu-id="931e7-190">View generated data</span></span>

<span data-ttu-id="931e7-191">You can view messages being generated by each IoT Edge module, and you can view messages that are delivered to your IoT hub.</span><span class="sxs-lookup"><span data-stu-id="931e7-191">You can view messages being generated by each IoT Edge module, and you can view messages that are delivered to your IoT hub.</span></span>

### <a name="view-data-on-your-iot-edge-device"></a><span data-ttu-id="931e7-192">View data on your IoT Edge device</span><span class="sxs-lookup"><span data-stu-id="931e7-192">View data on your IoT Edge device</span></span>

<span data-ttu-id="931e7-193">On your IoT Edge device, you can view the messages being sent from every individual module.</span><span class="sxs-lookup"><span data-stu-id="931e7-193">On your IoT Edge device, you can view the messages being sent from every individual module.</span></span> 

<span data-ttu-id="931e7-194">If you perform these commands on a Linux device, you may need to use `sudo` for elevated permissions.</span><span class="sxs-lookup"><span data-stu-id="931e7-194">If you perform these commands on a Linux device, you may need to use `sudo` for elevated permissions.</span></span>

1. <span data-ttu-id="931e7-195">View all modules on your IoT Edge device.</span><span class="sxs-lookup"><span data-stu-id="931e7-195">View all modules on your IoT Edge device.</span></span>

   ```cmd/sh
   iotedge list
   ```

2. <span data-ttu-id="931e7-196">View the messages being sent from a specific device.</span><span class="sxs-lookup"><span data-stu-id="931e7-196">View the messages being sent from a specific device.</span></span> <span data-ttu-id="931e7-197">Use the module name from the output of the previous command.</span><span class="sxs-lookup"><span data-stu-id="931e7-197">Use the module name from the output of the previous command.</span></span>

   ```cmd/sh
   iotedge logs <module_name> -f
   ```

### <a name="view-data-arriving-at-your-iot-hub"></a><span data-ttu-id="931e7-198">View data arriving at your IoT hub</span><span class="sxs-lookup"><span data-stu-id="931e7-198">View data arriving at your IoT hub</span></span>

<span data-ttu-id="931e7-199">You can view the device-to-cloud messages that your IoT hub receives by using the [Azure IoT Toolkit extension for Visual Studio Code](https://marketplace.visualstudio.com/items?itemName=vsciot-vscode.azure-iot-toolkit).</span><span class="sxs-lookup"><span data-stu-id="931e7-199">You can view the device-to-cloud messages that your IoT hub receives by using the [Azure IoT Toolkit extension for Visual Studio Code](https://marketplace.visualstudio.com/items?itemName=vsciot-vscode.azure-iot-toolkit).</span></span>

<span data-ttu-id="931e7-200">The following steps show you how to set up Visual Studio Code to monitor device-to-cloud messages that arrive at your IoT hub.</span><span class="sxs-lookup"><span data-stu-id="931e7-200">The following steps show you how to set up Visual Studio Code to monitor device-to-cloud messages that arrive at your IoT hub.</span></span> 

1. <span data-ttu-id="931e7-201">In Visual Studio Code, select **IoT Hub Devices**.</span><span class="sxs-lookup"><span data-stu-id="931e7-201">In Visual Studio Code, select **IoT Hub Devices**.</span></span>

2. <span data-ttu-id="931e7-202">Select **...** then select **Set IoT Hub Connection String** from the menu.</span><span class="sxs-lookup"><span data-stu-id="931e7-202">Select **...** then select **Set IoT Hub Connection String** from the menu.</span></span>

   ![IoT Hub Devices more menu](./media/tutorial-deploy-machine-learning/set-connection.png)

3. <span data-ttu-id="931e7-204">In the text box that opens at the top of the page, enter the iothubowner connection string for your IoT Hub.</span><span class="sxs-lookup"><span data-stu-id="931e7-204">In the text box that opens at the top of the page, enter the iothubowner connection string for your IoT Hub.</span></span> <span data-ttu-id="931e7-205">Your IoT Edge device should appear in the IoT Hub Devices list.</span><span class="sxs-lookup"><span data-stu-id="931e7-205">Your IoT Edge device should appear in the IoT Hub Devices list.</span></span>

4. <span data-ttu-id="931e7-206">Select **...** again then select **Start monitoring D2C message**.</span><span class="sxs-lookup"><span data-stu-id="931e7-206">Select **...** again then select **Start monitoring D2C message**.</span></span>

5. <span data-ttu-id="931e7-207">Observe the messages coming from tempSensor every five seconds.</span><span class="sxs-lookup"><span data-stu-id="931e7-207">Observe the messages coming from tempSensor every five seconds.</span></span> <span data-ttu-id="931e7-208">The message body contains a property called **anomaly** which the machinelearningmodule provides with a true or false value.</span><span class="sxs-lookup"><span data-stu-id="931e7-208">The message body contains a property called **anomaly** which the machinelearningmodule provides with a true or false value.</span></span> <span data-ttu-id="931e7-209">The **AzureMLResponse** property contains the value "OK" if the model ran successfully.</span><span class="sxs-lookup"><span data-stu-id="931e7-209">The **AzureMLResponse** property contains the value "OK" if the model ran successfully.</span></span>

   ![Azure ML response in message body](./media/tutorial-deploy-machine-learning/ml-output.png)

## <a name="clean-up-resources"></a><span data-ttu-id="931e7-211">Clean up resources</span><span class="sxs-lookup"><span data-stu-id="931e7-211">Clean up resources</span></span> 

<span data-ttu-id="931e7-212">If you plan to continue to the next recommended article, you can keep the resources and configurations that you created and reuse them.</span><span class="sxs-lookup"><span data-stu-id="931e7-212">If you plan to continue to the next recommended article, you can keep the resources and configurations that you created and reuse them.</span></span> <span data-ttu-id="931e7-213">You can also keep using the same IoT Edge device as a test device.</span><span class="sxs-lookup"><span data-stu-id="931e7-213">You can also keep using the same IoT Edge device as a test device.</span></span> 

<span data-ttu-id="931e7-214">Otherwise, you can delete the local configurations and the Azure resources that you created in this article to avoid charges.</span><span class="sxs-lookup"><span data-stu-id="931e7-214">Otherwise, you can delete the local configurations and the Azure resources that you created in this article to avoid charges.</span></span> 

[!INCLUDE [iot-edge-clean-up-cloud-resources](../../includes/iot-edge-clean-up-cloud-resources.md)]

[!INCLUDE [iot-edge-clean-up-local-resources](../../includes/iot-edge-clean-up-local-resources.md)]


## <a name="next-steps"></a><span data-ttu-id="931e7-215">Next steps</span><span class="sxs-lookup"><span data-stu-id="931e7-215">Next steps</span></span>

<span data-ttu-id="931e7-216">In this tutorial, you deployed an IoT Edge module powered by Azure Machine Learning.</span><span class="sxs-lookup"><span data-stu-id="931e7-216">In this tutorial, you deployed an IoT Edge module powered by Azure Machine Learning.</span></span> <span data-ttu-id="931e7-217">You can continue on to any of the other tutorials to learn about other ways that Azure IoT Edge can help you turn data into business insights at the edge.</span><span class="sxs-lookup"><span data-stu-id="931e7-217">You can continue on to any of the other tutorials to learn about other ways that Azure IoT Edge can help you turn data into business insights at the edge.</span></span>

> [!div class="nextstepaction"]
> [<span data-ttu-id="931e7-218">Filter sensor data using C# code</span><span class="sxs-lookup"><span data-stu-id="931e7-218">Filter sensor data using C# code</span></span>](tutorial-csharp-module.md)

<!--Links-->
[lnk-tutorial1-win]: quickstart.md
[lnk-tutorial1-lin]: quickstart-linux.md
