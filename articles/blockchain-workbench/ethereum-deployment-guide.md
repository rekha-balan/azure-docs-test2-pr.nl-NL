---
title: Ethereum proof-of-work consortium solution template
description: Use the Etherereum Proof-of-Work Consortium solution template to deploy and configure a multi-member consortium Ethereum network
services: azure-blockchain
keywords: ''
author: PatAltimore
ms.author: patricka
ms.date: 5/21/2018
ms.topic: article
ms.service: azure-blockchain
ms.reviewer: zeyadr
manager: femila
ms.openlocfilehash: 0ea9bd2c7d23aa227e62858983e7170b771751da
ms.sourcegitcommit: d1451406a010fd3aa854dc8e5b77dc5537d8050e
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 09/13/2018
ms.locfileid: "44869664"
---
# <a name="ethereum-proof-of-work-consortium-solution-template"></a><span data-ttu-id="32a8d-103">Ethereum proof-of-work consortium solution template</span><span class="sxs-lookup"><span data-stu-id="32a8d-103">Ethereum proof-of-work consortium solution template</span></span>

<span data-ttu-id="32a8d-104">The Ethereum Proof-of-Work Consortium solution template is designed to make it easier and quicker to deploy and configure a multi-member consortium Ethereum network with minimal Azure and Ethereum knowledge.</span><span class="sxs-lookup"><span data-stu-id="32a8d-104">The Ethereum Proof-of-Work Consortium solution template is designed to make it easier and quicker to deploy and configure a multi-member consortium Ethereum network with minimal Azure and Ethereum knowledge.</span></span>

<span data-ttu-id="32a8d-105">With a handful of user inputs and a single-click deployment through the Azure portal, each member can provision their network footprint, using Microsoft Azure Compute, networking, and storage services across the globe.</span><span class="sxs-lookup"><span data-stu-id="32a8d-105">With a handful of user inputs and a single-click deployment through the Azure portal, each member can provision their network footprint, using Microsoft Azure Compute, networking, and storage services across the globe.</span></span> <span data-ttu-id="32a8d-106">Each member's network footprint consists of a set of load-balanced transaction nodes with which an application or user can interact to submit transactions, a set of mining nodes to record transactions, and a VPN gateway.</span><span class="sxs-lookup"><span data-stu-id="32a8d-106">Each member's network footprint consists of a set of load-balanced transaction nodes with which an application or user can interact to submit transactions, a set of mining nodes to record transactions, and a VPN gateway.</span></span> <span data-ttu-id="32a8d-107">A subsequent connection step connects the gateways to create a fully configured multi-member blockchain network.</span><span class="sxs-lookup"><span data-stu-id="32a8d-107">A subsequent connection step connects the gateways to create a fully configured multi-member blockchain network.</span></span>

## <a name="about-blockchain"></a><span data-ttu-id="32a8d-108">About blockchain</span><span class="sxs-lookup"><span data-stu-id="32a8d-108">About blockchain</span></span>

<span data-ttu-id="32a8d-109">For those of you who are new to the blockchain community, the release of this solution is a great opportunity to learn about the technology in an easy and configurable manner on Azure.</span><span class="sxs-lookup"><span data-stu-id="32a8d-109">For those of you who are new to the blockchain community, the release of this solution is a great opportunity to learn about the technology in an easy and configurable manner on Azure.</span></span> <span data-ttu-id="32a8d-110">However, to get started, we recommend deploying the simpler standalone Ethereum network topology with this guided walkthrough, before building out multi-member consortium networks.</span><span class="sxs-lookup"><span data-stu-id="32a8d-110">However, to get started, we recommend deploying the simpler standalone Ethereum network topology with this guided walkthrough, before building out multi-member consortium networks.</span></span>

### <a name="mining-node-details"></a><span data-ttu-id="32a8d-111">Mining node details</span><span class="sxs-lookup"><span data-stu-id="32a8d-111">Mining node details</span></span>

<span data-ttu-id="32a8d-112">Nodes that mine transactions are separated from the nodes that accept transactions to ensure that the two actions are not competing for the same resources.</span><span class="sxs-lookup"><span data-stu-id="32a8d-112">Nodes that mine transactions are separated from the nodes that accept transactions to ensure that the two actions are not competing for the same resources.</span></span>

<span data-ttu-id="32a8d-113">A consortium member can provision up to five regions containing one or more mining nodes, backed by a managed disk.</span><span class="sxs-lookup"><span data-stu-id="32a8d-113">A consortium member can provision up to five regions containing one or more mining nodes, backed by a managed disk.</span></span> <span data-ttu-id="32a8d-114">One or more nodes in the region are configured as a boot node to support dynamic discoverability of the nodes in the network.</span><span class="sxs-lookup"><span data-stu-id="32a8d-114">One or more nodes in the region are configured as a boot node to support dynamic discoverability of the nodes in the network.</span></span> <span data-ttu-id="32a8d-115">Mining nodes communicate with other mining nodes to come to consensus on the state of the underlying distributed ledger.</span><span class="sxs-lookup"><span data-stu-id="32a8d-115">Mining nodes communicate with other mining nodes to come to consensus on the state of the underlying distributed ledger.</span></span> <span data-ttu-id="32a8d-116">There is no need for your application to be aware of or communicate with these nodes.</span><span class="sxs-lookup"><span data-stu-id="32a8d-116">There is no need for your application to be aware of or communicate with these nodes.</span></span> <span data-ttu-id="32a8d-117">By focusing on private networks, the mining nodes are isolated from inbound public internet traffic to add a secondary layer of protection.</span><span class="sxs-lookup"><span data-stu-id="32a8d-117">By focusing on private networks, the mining nodes are isolated from inbound public internet traffic to add a secondary layer of protection.</span></span> <span data-ttu-id="32a8d-118">Outbound traffic is allowed, but not to the Ethereum discovery port.</span><span class="sxs-lookup"><span data-stu-id="32a8d-118">Outbound traffic is allowed, but not to the Ethereum discovery port.</span></span>

<span data-ttu-id="32a8d-119">All nodes have a stable version of the Go Ethereum (Geth) client and are configured to be mining nodes.</span><span class="sxs-lookup"><span data-stu-id="32a8d-119">All nodes have a stable version of the Go Ethereum (Geth) client and are configured to be mining nodes.</span></span> <span data-ttu-id="32a8d-120">If you did not supply a custom genesis block, all nodes use the same Ethereum address and key pair that is protected by the Ethereum account password.</span><span class="sxs-lookup"><span data-stu-id="32a8d-120">If you did not supply a custom genesis block, all nodes use the same Ethereum address and key pair that is protected by the Ethereum account password.</span></span> <span data-ttu-id="32a8d-121">The Ethereum passphrase you provided is used to generate the default account (coinbase) for each mining node.</span><span class="sxs-lookup"><span data-stu-id="32a8d-121">The Ethereum passphrase you provided is used to generate the default account (coinbase) for each mining node.</span></span> <span data-ttu-id="32a8d-122">As mining nodes, mine, they collect fees that are added to this account.</span><span class="sxs-lookup"><span data-stu-id="32a8d-122">As mining nodes, mine, they collect fees that are added to this account.</span></span>

<span data-ttu-id="32a8d-123">The number of mining nodes per consortium member depends on the overall size of the network desired and the amount of hashing power dedicated to each member.</span><span class="sxs-lookup"><span data-stu-id="32a8d-123">The number of mining nodes per consortium member depends on the overall size of the network desired and the amount of hashing power dedicated to each member.</span></span> <span data-ttu-id="32a8d-124">The larger the network, the more nodes that need to be compromised to gain an unfair advantage.</span><span class="sxs-lookup"><span data-stu-id="32a8d-124">The larger the network, the more nodes that need to be compromised to gain an unfair advantage.</span></span> <span data-ttu-id="32a8d-125">The template supports up to 15 mining nodes per region provisioned using virtual machine scale sets.</span><span class="sxs-lookup"><span data-stu-id="32a8d-125">The template supports up to 15 mining nodes per region provisioned using virtual machine scale sets.</span></span>

### <a name="transaction-node-details"></a><span data-ttu-id="32a8d-126">Transaction node details</span><span class="sxs-lookup"><span data-stu-id="32a8d-126">Transaction node details</span></span>

<span data-ttu-id="32a8d-127">A consortium member also has a set of load-balanced transaction nodes.</span><span class="sxs-lookup"><span data-stu-id="32a8d-127">A consortium member also has a set of load-balanced transaction nodes.</span></span> <span data-ttu-id="32a8d-128">These nodes are reachable from outside the virtual network, so that applications can use these nodes to submit transactions or execute smart contracts within the blockchain network.</span><span class="sxs-lookup"><span data-stu-id="32a8d-128">These nodes are reachable from outside the virtual network, so that applications can use these nodes to submit transactions or execute smart contracts within the blockchain network.</span></span> <span data-ttu-id="32a8d-129">All nodes have a stable version of the Go Ethereum (Geth) client and are configured to maintain a complete copy of the distributed ledger.</span><span class="sxs-lookup"><span data-stu-id="32a8d-129">All nodes have a stable version of the Go Ethereum (Geth) client and are configured to maintain a complete copy of the distributed ledger.</span></span> <span data-ttu-id="32a8d-130">If a custom genesis block is not provided, these nodes use the same Ethereum account, protected by the Ethereum account password.</span><span class="sxs-lookup"><span data-stu-id="32a8d-130">If a custom genesis block is not provided, these nodes use the same Ethereum account, protected by the Ethereum account password.</span></span>

<span data-ttu-id="32a8d-131">Transaction nodes are load-balanced within an availability set to maintain high availability.</span><span class="sxs-lookup"><span data-stu-id="32a8d-131">Transaction nodes are load-balanced within an availability set to maintain high availability.</span></span> <span data-ttu-id="32a8d-132">The template supports up to five transaction nodes provisioned using virtual machine scale sets.</span><span class="sxs-lookup"><span data-stu-id="32a8d-132">The template supports up to five transaction nodes provisioned using virtual machine scale sets.</span></span>

### <a name="log-analytics-details"></a><span data-ttu-id="32a8d-133">Log analytics details</span><span class="sxs-lookup"><span data-stu-id="32a8d-133">Log analytics details</span></span>

<span data-ttu-id="32a8d-134">Each deployment also creates a new Log Analytics instance or can join an existing instance.</span><span class="sxs-lookup"><span data-stu-id="32a8d-134">Each deployment also creates a new Log Analytics instance or can join an existing instance.</span></span> <span data-ttu-id="32a8d-135">This allows the monitoring of various performance metrics of each virtual machine that makes up the deployed network.</span><span class="sxs-lookup"><span data-stu-id="32a8d-135">This allows the monitoring of various performance metrics of each virtual machine that makes up the deployed network.</span></span>

## <a name="deployment-architecture"></a><span data-ttu-id="32a8d-136">Deployment architecture</span><span class="sxs-lookup"><span data-stu-id="32a8d-136">Deployment architecture</span></span>

### <a name="description"></a><span data-ttu-id="32a8d-137">Description</span><span class="sxs-lookup"><span data-stu-id="32a8d-137">Description</span></span>

<span data-ttu-id="32a8d-138">This solution template can deploy single or multi region-based multi member Ethereum consortium network.</span><span class="sxs-lookup"><span data-stu-id="32a8d-138">This solution template can deploy single or multi region-based multi member Ethereum consortium network.</span></span> <span data-ttu-id="32a8d-139">The virtual network of each region is connected to other region in a chain topology using the VNET gateways and connection resources.</span><span class="sxs-lookup"><span data-stu-id="32a8d-139">The virtual network of each region is connected to other region in a chain topology using the VNET gateways and connection resources.</span></span> <span data-ttu-id="32a8d-140">It also provisions a registrar, which contains required information of all the Miner and Transaction nodes deployed in each region.</span><span class="sxs-lookup"><span data-stu-id="32a8d-140">It also provisions a registrar, which contains required information of all the Miner and Transaction nodes deployed in each region.</span></span>

### <a name="standalone-and-consortium-leader-overview"></a><span data-ttu-id="32a8d-141">Standalone and consortium leader overview</span><span class="sxs-lookup"><span data-stu-id="32a8d-141">Standalone and consortium leader overview</span></span>

![Standalone and Consortium Leader Overview](./media/ethereum-deployment-guide/leader-overview.png)

### <a name="joining-consortium-member-overview"></a><span data-ttu-id="32a8d-143">Joining consortium member overview</span><span class="sxs-lookup"><span data-stu-id="32a8d-143">Joining consortium member overview</span></span>

![Joining Consortium Member Overview](./media/ethereum-deployment-guide/member-overview.png)

## <a name="getting-started"></a><span data-ttu-id="32a8d-145">Getting started</span><span class="sxs-lookup"><span data-stu-id="32a8d-145">Getting started</span></span>

<span data-ttu-id="32a8d-146">This process requires an Azure subscription that can support deploying several virtual machines scale sets and managed disks.</span><span class="sxs-lookup"><span data-stu-id="32a8d-146">This process requires an Azure subscription that can support deploying several virtual machines scale sets and managed disks.</span></span> <span data-ttu-id="32a8d-147">If necessary, create a free Azure account to begin.</span><span class="sxs-lookup"><span data-stu-id="32a8d-147">If necessary, create a free Azure account to begin.</span></span>

<span data-ttu-id="32a8d-148">Once a subscription is secured, go to Azure portal.</span><span class="sxs-lookup"><span data-stu-id="32a8d-148">Once a subscription is secured, go to Azure portal.</span></span> <span data-ttu-id="32a8d-149">Select **+ Create a resource**, Marketplace (See all), and search for **Ethereum Proof-of-Work Consortium**.</span><span class="sxs-lookup"><span data-stu-id="32a8d-149">Select **+ Create a resource**, Marketplace (See all), and search for **Ethereum Proof-of-Work Consortium**.</span></span>

<span data-ttu-id="32a8d-150">The template deployment will walk you through configuring the first member's footprint in the network.</span><span class="sxs-lookup"><span data-stu-id="32a8d-150">The template deployment will walk you through configuring the first member's footprint in the network.</span></span> <span data-ttu-id="32a8d-151">The deployment flow is divided into five steps: Basics, Operations Management Suite, Deployment regions, Network size, and performance, Ethereum settings.</span><span class="sxs-lookup"><span data-stu-id="32a8d-151">The deployment flow is divided into five steps: Basics, Operations Management Suite, Deployment regions, Network size, and performance, Ethereum settings.</span></span>

### <a name="basics"></a><span data-ttu-id="32a8d-152">Basics</span><span class="sxs-lookup"><span data-stu-id="32a8d-152">Basics</span></span>

<span data-ttu-id="32a8d-153">Under **Basics**, specify values for standard parameters for any deployment, such as subscription, resource group, and basic virtual machine properties.</span><span class="sxs-lookup"><span data-stu-id="32a8d-153">Under **Basics**, specify values for standard parameters for any deployment, such as subscription, resource group, and basic virtual machine properties.</span></span>

![Basics](./media/ethereum-deployment-guide/sample-deployment.png)

<span data-ttu-id="32a8d-155">Parameter Name</span><span class="sxs-lookup"><span data-stu-id="32a8d-155">Parameter Name</span></span>|<span data-ttu-id="32a8d-156">Description</span><span class="sxs-lookup"><span data-stu-id="32a8d-156">Description</span></span>| <span data-ttu-id="32a8d-157">Allowed Values</span><span class="sxs-lookup"><span data-stu-id="32a8d-157">Allowed Values</span></span>|<span data-ttu-id="32a8d-158">Default Values</span><span class="sxs-lookup"><span data-stu-id="32a8d-158">Default Values</span></span>
---|---|---|---
<span data-ttu-id="32a8d-159">Create a new network or join existing network?</span><span class="sxs-lookup"><span data-stu-id="32a8d-159">Create a new network or join existing network?</span></span>|<span data-ttu-id="32a8d-160">Create a new network or join a pre-existing consortium network</span><span class="sxs-lookup"><span data-stu-id="32a8d-160">Create a new network or join a pre-existing consortium network</span></span>|<span data-ttu-id="32a8d-161">Create New Join Existing</span><span class="sxs-lookup"><span data-stu-id="32a8d-161">Create New Join Existing</span></span>|<span data-ttu-id="32a8d-162">Create New</span><span class="sxs-lookup"><span data-stu-id="32a8d-162">Create New</span></span>
<span data-ttu-id="32a8d-163">Deploy a network that will be part of a consortium?</span><span class="sxs-lookup"><span data-stu-id="32a8d-163">Deploy a network that will be part of a consortium?</span></span>|<span data-ttu-id="32a8d-164">A consortium network allows future deployments to join this network (visible when *Create New* is selected above)</span><span class="sxs-lookup"><span data-stu-id="32a8d-164">A consortium network allows future deployments to join this network (visible when *Create New* is selected above)</span></span>|<span data-ttu-id="32a8d-165">Standalone Consortium</span><span class="sxs-lookup"><span data-stu-id="32a8d-165">Standalone Consortium</span></span>|<span data-ttu-id="32a8d-166">Standalone</span><span class="sxs-lookup"><span data-stu-id="32a8d-166">Standalone</span></span>
<span data-ttu-id="32a8d-167">Resource Prefix</span><span class="sxs-lookup"><span data-stu-id="32a8d-167">Resource Prefix</span></span> |<span data-ttu-id="32a8d-168">String used as a base for naming resources (2 to 4 alphanumeric characters).</span><span class="sxs-lookup"><span data-stu-id="32a8d-168">String used as a base for naming resources (2 to 4 alphanumeric characters).</span></span> <span data-ttu-id="32a8d-169">A unique hash is prepended to the string for some resources, while resource-specific information is appended.</span><span class="sxs-lookup"><span data-stu-id="32a8d-169">A unique hash is prepended to the string for some resources, while resource-specific information is appended.</span></span>|<span data-ttu-id="32a8d-170">Alphanumeric characters with length 2 to 4</span><span class="sxs-lookup"><span data-stu-id="32a8d-170">Alphanumeric characters with length 2 to 4</span></span>|<span data-ttu-id="32a8d-171">NA</span><span class="sxs-lookup"><span data-stu-id="32a8d-171">NA</span></span>
<span data-ttu-id="32a8d-172">VM user name</span><span class="sxs-lookup"><span data-stu-id="32a8d-172">VM user name</span></span>| <span data-ttu-id="32a8d-173">Administrator username of each deployed VM (alphanumeric characters only)</span><span class="sxs-lookup"><span data-stu-id="32a8d-173">Administrator username of each deployed VM (alphanumeric characters only)</span></span>|<span data-ttu-id="32a8d-174">1 - 64 characters</span><span class="sxs-lookup"><span data-stu-id="32a8d-174">1 - 64 characters</span></span> |<span data-ttu-id="32a8d-175">gethadmin</span><span class="sxs-lookup"><span data-stu-id="32a8d-175">gethadmin</span></span>
<span data-ttu-id="32a8d-176">Authentication type</span><span class="sxs-lookup"><span data-stu-id="32a8d-176">Authentication type</span></span>|<span data-ttu-id="32a8d-177">The method to authenticate to the virtual machine.</span><span class="sxs-lookup"><span data-stu-id="32a8d-177">The method to authenticate to the virtual machine.</span></span> |<span data-ttu-id="32a8d-178">Password or SSH public key</span><span class="sxs-lookup"><span data-stu-id="32a8d-178">Password or SSH public key</span></span>|<span data-ttu-id="32a8d-179">Password</span><span class="sxs-lookup"><span data-stu-id="32a8d-179">Password</span></span>
<span data-ttu-id="32a8d-180">Password (Authentication type = Password)</span><span class="sxs-lookup"><span data-stu-id="32a8d-180">Password (Authentication type = Password)</span></span>|<span data-ttu-id="32a8d-181">The password for the administrator account for each of the virtual machines deployed.</span><span class="sxs-lookup"><span data-stu-id="32a8d-181">The password for the administrator account for each of the virtual machines deployed.</span></span> <span data-ttu-id="32a8d-182">The password must contain 3 of the following requirements: 1 upper case character, 1 lower case character, 1 number, and 1 special character.</span><span class="sxs-lookup"><span data-stu-id="32a8d-182">The password must contain 3 of the following requirements: 1 upper case character, 1 lower case character, 1 number, and 1 special character.</span></span> <br /><span data-ttu-id="32a8d-183">While all VMs initially have the same password, you can change the password after provisioning.</span><span class="sxs-lookup"><span data-stu-id="32a8d-183">While all VMs initially have the same password, you can change the password after provisioning.</span></span>|<span data-ttu-id="32a8d-184">12 - 72 characters</span><span class="sxs-lookup"><span data-stu-id="32a8d-184">12 - 72 characters</span></span>|<span data-ttu-id="32a8d-185">NA</span><span class="sxs-lookup"><span data-stu-id="32a8d-185">NA</span></span>
<span data-ttu-id="32a8d-186">SSH Key(Authentication type = Public Key)</span><span class="sxs-lookup"><span data-stu-id="32a8d-186">SSH Key(Authentication type = Public Key)</span></span>|<span data-ttu-id="32a8d-187">The secure shell key used for remote login.</span><span class="sxs-lookup"><span data-stu-id="32a8d-187">The secure shell key used for remote login.</span></span>|| <span data-ttu-id="32a8d-188">NA</span><span class="sxs-lookup"><span data-stu-id="32a8d-188">NA</span></span>
<span data-ttu-id="32a8d-189">Subscription</span><span class="sxs-lookup"><span data-stu-id="32a8d-189">Subscription</span></span>| <span data-ttu-id="32a8d-190">The subscription to which to deploy the consortium network</span><span class="sxs-lookup"><span data-stu-id="32a8d-190">The subscription to which to deploy the consortium network</span></span>||<span data-ttu-id="32a8d-191">NA</span><span class="sxs-lookup"><span data-stu-id="32a8d-191">NA</span></span>
<span data-ttu-id="32a8d-192">Resource Group</span><span class="sxs-lookup"><span data-stu-id="32a8d-192">Resource Group</span></span>| <span data-ttu-id="32a8d-193">The resource group to which to deploy the consortium network.</span><span class="sxs-lookup"><span data-stu-id="32a8d-193">The resource group to which to deploy the consortium network.</span></span>||<span data-ttu-id="32a8d-194">NA</span><span class="sxs-lookup"><span data-stu-id="32a8d-194">NA</span></span>
<span data-ttu-id="32a8d-195">Location</span><span class="sxs-lookup"><span data-stu-id="32a8d-195">Location</span></span>| <span data-ttu-id="32a8d-196">The Azure region for resource group.</span><span class="sxs-lookup"><span data-stu-id="32a8d-196">The Azure region for resource group.</span></span> ||<span data-ttu-id="32a8d-197">NA</span><span class="sxs-lookup"><span data-stu-id="32a8d-197">NA</span></span>



### <a name="operations-management-suite"></a><span data-ttu-id="32a8d-198">Operations Management Suite</span><span class="sxs-lookup"><span data-stu-id="32a8d-198">Operations Management Suite</span></span>

<span data-ttu-id="32a8d-199">The Operations Management Suite (OMS) blade allows you to configure an OMS resource for your network.</span><span class="sxs-lookup"><span data-stu-id="32a8d-199">The Operations Management Suite (OMS) blade allows you to configure an OMS resource for your network.</span></span> <span data-ttu-id="32a8d-200">OMS will collect and surface useful metrics and logs from your network, providing the ability to quickly check the network health or debug issues.</span><span class="sxs-lookup"><span data-stu-id="32a8d-200">OMS will collect and surface useful metrics and logs from your network, providing the ability to quickly check the network health or debug issues.</span></span> <span data-ttu-id="32a8d-201">The free offering of OMS will fail gracefully once capacity is reached.</span><span class="sxs-lookup"><span data-stu-id="32a8d-201">The free offering of OMS will fail gracefully once capacity is reached.</span></span>

![Creating new OMS](./media/ethereum-deployment-guide/new-oms.png)

<span data-ttu-id="32a8d-203">Parameter Name</span><span class="sxs-lookup"><span data-stu-id="32a8d-203">Parameter Name</span></span>|<span data-ttu-id="32a8d-204">Description</span><span class="sxs-lookup"><span data-stu-id="32a8d-204">Description</span></span>| <span data-ttu-id="32a8d-205">Allowed Values</span><span class="sxs-lookup"><span data-stu-id="32a8d-205">Allowed Values</span></span>|<span data-ttu-id="32a8d-206">Default Values</span><span class="sxs-lookup"><span data-stu-id="32a8d-206">Default Values</span></span>
---|---|---|---
<span data-ttu-id="32a8d-207">Connect to existing OMS</span><span class="sxs-lookup"><span data-stu-id="32a8d-207">Connect to existing OMS</span></span>|<span data-ttu-id="32a8d-208">Create a new Log Analytics instance or join an existing instance</span><span class="sxs-lookup"><span data-stu-id="32a8d-208">Create a new Log Analytics instance or join an existing instance</span></span>|<span data-ttu-id="32a8d-209">Create new Join existing</span><span class="sxs-lookup"><span data-stu-id="32a8d-209">Create new Join existing</span></span>|<span data-ttu-id="32a8d-210">Create new Log Analytics Location</span><span class="sxs-lookup"><span data-stu-id="32a8d-210">Create new Log Analytics Location</span></span>|<span data-ttu-id="32a8d-211">The region where the new Log Analytics will be deployed (Visible if *Create new* is selected)</span><span class="sxs-lookup"><span data-stu-id="32a8d-211">The region where the new Log Analytics will be deployed (Visible if *Create new* is selected)</span></span>
<span data-ttu-id="32a8d-212">Existing OMS Workspace Id</span><span class="sxs-lookup"><span data-stu-id="32a8d-212">Existing OMS Workspace Id</span></span>|<span data-ttu-id="32a8d-213">Workspace ID of the existing instance (Visible if *Join Existing* is selected) OMS Service Tier</span><span class="sxs-lookup"><span data-stu-id="32a8d-213">Workspace ID of the existing instance (Visible if *Join Existing* is selected) OMS Service Tier</span></span>|<span data-ttu-id="32a8d-214">Choose the pricing tier for the new instance.</span><span class="sxs-lookup"><span data-stu-id="32a8d-214">Choose the pricing tier for the new instance.</span></span> <span data-ttu-id="32a8d-215">More Info at https://azure.microsoft.com/pricing/details/log-analytics/ (Visible if *Join Existing* is selected)</span><span class="sxs-lookup"><span data-stu-id="32a8d-215">More Info at https://azure.microsoft.com/pricing/details/log-analytics/ (Visible if *Join Existing* is selected)</span></span>|<span data-ttu-id="32a8d-216">Free Standalone Per Node</span><span class="sxs-lookup"><span data-stu-id="32a8d-216">Free Standalone Per Node</span></span>|<span data-ttu-id="32a8d-217">Free</span><span class="sxs-lookup"><span data-stu-id="32a8d-217">Free</span></span>
<span data-ttu-id="32a8d-218">Existing OMS Primary Key</span><span class="sxs-lookup"><span data-stu-id="32a8d-218">Existing OMS Primary Key</span></span>|<span data-ttu-id="32a8d-219">The primary key used to connect to the existing OMS instance (Visible if *Join Existing* is selected)</span><span class="sxs-lookup"><span data-stu-id="32a8d-219">The primary key used to connect to the existing OMS instance (Visible if *Join Existing* is selected)</span></span>

### <a name="deployment-regions"></a><span data-ttu-id="32a8d-220">Deployment regions</span><span class="sxs-lookup"><span data-stu-id="32a8d-220">Deployment regions</span></span>

<span data-ttu-id="32a8d-221">Next, under **Deployment regions**, specify inputs for **Number of region(s)** to deploy the consortium network and selection of Azure regions based on the number of regions given.</span><span class="sxs-lookup"><span data-stu-id="32a8d-221">Next, under **Deployment regions**, specify inputs for **Number of region(s)** to deploy the consortium network and selection of Azure regions based on the number of regions given.</span></span> <span data-ttu-id="32a8d-222">User can deploy in maximum of five regions.</span><span class="sxs-lookup"><span data-stu-id="32a8d-222">User can deploy in maximum of five regions.</span></span>

![Deployment regions](./media/ethereum-deployment-guide/deployment-regions.png)

<span data-ttu-id="32a8d-224">Parameter Name</span><span class="sxs-lookup"><span data-stu-id="32a8d-224">Parameter Name</span></span>| <span data-ttu-id="32a8d-225">Description</span><span class="sxs-lookup"><span data-stu-id="32a8d-225">Description</span></span>| <span data-ttu-id="32a8d-226">Allowed Values</span><span class="sxs-lookup"><span data-stu-id="32a8d-226">Allowed Values</span></span> |<span data-ttu-id="32a8d-227">Default Values</span><span class="sxs-lookup"><span data-stu-id="32a8d-227">Default Values</span></span>
---|---|---|---
<span data-ttu-id="32a8d-228">Number of region(s)</span><span class="sxs-lookup"><span data-stu-id="32a8d-228">Number of region(s)</span></span>| <span data-ttu-id="32a8d-229">Number of regions to deploy the consortium network</span><span class="sxs-lookup"><span data-stu-id="32a8d-229">Number of regions to deploy the consortium network</span></span>|<span data-ttu-id="32a8d-230">1, 2, 3, 4, 5</span><span class="sxs-lookup"><span data-stu-id="32a8d-230">1, 2, 3, 4, 5</span></span>| <span data-ttu-id="32a8d-231">2</span><span class="sxs-lookup"><span data-stu-id="32a8d-231">2</span></span>
<span data-ttu-id="32a8d-232">First region</span><span class="sxs-lookup"><span data-stu-id="32a8d-232">First region</span></span>| <span data-ttu-id="32a8d-233">First region to deploy the consortium network</span><span class="sxs-lookup"><span data-stu-id="32a8d-233">First region to deploy the consortium network</span></span>|<span data-ttu-id="32a8d-234">All allowed Azure regions</span><span class="sxs-lookup"><span data-stu-id="32a8d-234">All allowed Azure regions</span></span>| <span data-ttu-id="32a8d-235">West US</span><span class="sxs-lookup"><span data-stu-id="32a8d-235">West US</span></span>
<span data-ttu-id="32a8d-236">Second region</span><span class="sxs-lookup"><span data-stu-id="32a8d-236">Second region</span></span> |<span data-ttu-id="32a8d-237">Second region to deploy the consortium network (Visible only when number of regions is selected as 2)</span><span class="sxs-lookup"><span data-stu-id="32a8d-237">Second region to deploy the consortium network (Visible only when number of regions is selected as 2)</span></span>|<span data-ttu-id="32a8d-238">All allowed Azure regions</span><span class="sxs-lookup"><span data-stu-id="32a8d-238">All allowed Azure regions</span></span>| <span data-ttu-id="32a8d-239">East US</span><span class="sxs-lookup"><span data-stu-id="32a8d-239">East US</span></span>
<span data-ttu-id="32a8d-240">Third region</span><span class="sxs-lookup"><span data-stu-id="32a8d-240">Third region</span></span>| <span data-ttu-id="32a8d-241">Third region to deploy the consortium network (Visible only when number of regions is selected as 3)</span><span class="sxs-lookup"><span data-stu-id="32a8d-241">Third region to deploy the consortium network (Visible only when number of regions is selected as 3)</span></span>|<span data-ttu-id="32a8d-242">All allowed Azure regions</span><span class="sxs-lookup"><span data-stu-id="32a8d-242">All allowed Azure regions</span></span>| <span data-ttu-id="32a8d-243">Central US</span><span class="sxs-lookup"><span data-stu-id="32a8d-243">Central US</span></span>
<span data-ttu-id="32a8d-244">Fourth region</span><span class="sxs-lookup"><span data-stu-id="32a8d-244">Fourth region</span></span>| <span data-ttu-id="32a8d-245">Fourth region to deploy the consortium network (Visible only when number of regions is selected as 4)</span><span class="sxs-lookup"><span data-stu-id="32a8d-245">Fourth region to deploy the consortium network (Visible only when number of regions is selected as 4)</span></span>|<span data-ttu-id="32a8d-246">All allowed Azure regions</span><span class="sxs-lookup"><span data-stu-id="32a8d-246">All allowed Azure regions</span></span>| <span data-ttu-id="32a8d-247">East US 2</span><span class="sxs-lookup"><span data-stu-id="32a8d-247">East US 2</span></span>
<span data-ttu-id="32a8d-248">Fifth region</span><span class="sxs-lookup"><span data-stu-id="32a8d-248">Fifth region</span></span>| <span data-ttu-id="32a8d-249">Fifth region to deploy the consortium network (Visible only when number of regions is selected as 5)</span><span class="sxs-lookup"><span data-stu-id="32a8d-249">Fifth region to deploy the consortium network (Visible only when number of regions is selected as 5)</span></span>|<span data-ttu-id="32a8d-250">All allowed Azure regions</span><span class="sxs-lookup"><span data-stu-id="32a8d-250">All allowed Azure regions</span></span>| <span data-ttu-id="32a8d-251">West US 2</span><span class="sxs-lookup"><span data-stu-id="32a8d-251">West US 2</span></span>

### <a name="network-size-and-performance"></a><span data-ttu-id="32a8d-252">Network size and performance</span><span class="sxs-lookup"><span data-stu-id="32a8d-252">Network size and performance</span></span>

<span data-ttu-id="32a8d-253">Next, under **Network size and performance** specify inputs for the size of the consortium network, such as number and size of mining nodes and transaction nodes.</span><span class="sxs-lookup"><span data-stu-id="32a8d-253">Next, under **Network size and performance** specify inputs for the size of the consortium network, such as number and size of mining nodes and transaction nodes.</span></span>

![Network size and performance](./media/ethereum-deployment-guide/network-size-performance.png)

<span data-ttu-id="32a8d-255">Parameter Name</span><span class="sxs-lookup"><span data-stu-id="32a8d-255">Parameter Name</span></span> |<span data-ttu-id="32a8d-256">Description</span><span class="sxs-lookup"><span data-stu-id="32a8d-256">Description</span></span> |<span data-ttu-id="32a8d-257">Allowed Values</span><span class="sxs-lookup"><span data-stu-id="32a8d-257">Allowed Values</span></span>| <span data-ttu-id="32a8d-258">Default Values</span><span class="sxs-lookup"><span data-stu-id="32a8d-258">Default Values</span></span>
---|---|---|---
<span data-ttu-id="32a8d-259">Number of mining nodes</span><span class="sxs-lookup"><span data-stu-id="32a8d-259">Number of mining nodes</span></span>|<span data-ttu-id="32a8d-260">The number of mining nodes deployed per region</span><span class="sxs-lookup"><span data-stu-id="32a8d-260">The number of mining nodes deployed per region</span></span>|<span data-ttu-id="32a8d-261">2 - 15</span><span class="sxs-lookup"><span data-stu-id="32a8d-261">2 - 15</span></span>| <span data-ttu-id="32a8d-262">2</span><span class="sxs-lookup"><span data-stu-id="32a8d-262">2</span></span>
<span data-ttu-id="32a8d-263">Mining node storage performance</span><span class="sxs-lookup"><span data-stu-id="32a8d-263">Mining node storage performance</span></span>|<span data-ttu-id="32a8d-264">The type of managed disk backing each of the deployed mining nodes.</span><span class="sxs-lookup"><span data-stu-id="32a8d-264">The type of managed disk backing each of the deployed mining nodes.</span></span>|<span data-ttu-id="32a8d-265">Standard or Premium</span><span class="sxs-lookup"><span data-stu-id="32a8d-265">Standard or Premium</span></span>|<span data-ttu-id="32a8d-266">Standard</span><span class="sxs-lookup"><span data-stu-id="32a8d-266">Standard</span></span>
<span data-ttu-id="32a8d-267">Mining node virtual machine size</span><span class="sxs-lookup"><span data-stu-id="32a8d-267">Mining node virtual machine size</span></span>|<span data-ttu-id="32a8d-268">The virtual machine size used for mining nodes.</span><span class="sxs-lookup"><span data-stu-id="32a8d-268">The virtual machine size used for mining nodes.</span></span>|<span data-ttu-id="32a8d-269">Standard A,</span><span class="sxs-lookup"><span data-stu-id="32a8d-269">Standard A,</span></span> <br /><span data-ttu-id="32a8d-270">Standard D,</span><span class="sxs-lookup"><span data-stu-id="32a8d-270">Standard D,</span></span> <br /><span data-ttu-id="32a8d-271">Standard D-v2,</span><span class="sxs-lookup"><span data-stu-id="32a8d-271">Standard D-v2,</span></span> <br /><span data-ttu-id="32a8d-272">Standard F series,</span><span class="sxs-lookup"><span data-stu-id="32a8d-272">Standard F series,</span></span> <br /><span data-ttu-id="32a8d-273">Standard DS,</span><span class="sxs-lookup"><span data-stu-id="32a8d-273">Standard DS,</span></span> <br /><span data-ttu-id="32a8d-274">and Standard FS</span><span class="sxs-lookup"><span data-stu-id="32a8d-274">and Standard FS</span></span>|<span data-ttu-id="32a8d-275">Standard D1v2</span><span class="sxs-lookup"><span data-stu-id="32a8d-275">Standard D1v2</span></span>
<span data-ttu-id="32a8d-276">Number of load balanced transaction nodes</span><span class="sxs-lookup"><span data-stu-id="32a8d-276">Number of load balanced transaction nodes</span></span>|<span data-ttu-id="32a8d-277">The number of transaction nodes to provision as part of the network.</span><span class="sxs-lookup"><span data-stu-id="32a8d-277">The number of transaction nodes to provision as part of the network.</span></span>|<span data-ttu-id="32a8d-278">1 - 5</span><span class="sxs-lookup"><span data-stu-id="32a8d-278">1 - 5</span></span>| <span data-ttu-id="32a8d-279">2</span><span class="sxs-lookup"><span data-stu-id="32a8d-279">2</span></span>
<span data-ttu-id="32a8d-280">Transaction node storage performance</span><span class="sxs-lookup"><span data-stu-id="32a8d-280">Transaction node storage performance</span></span>|<span data-ttu-id="32a8d-281">The type of managed disk backing each of the deployed transaction nodes.</span><span class="sxs-lookup"><span data-stu-id="32a8d-281">The type of managed disk backing each of the deployed transaction nodes.</span></span>|<span data-ttu-id="32a8d-282">Standard or Premium</span><span class="sxs-lookup"><span data-stu-id="32a8d-282">Standard or Premium</span></span>|<span data-ttu-id="32a8d-283">Standard</span><span class="sxs-lookup"><span data-stu-id="32a8d-283">Standard</span></span>
<span data-ttu-id="32a8d-284">Transaction node virtual machine size</span><span class="sxs-lookup"><span data-stu-id="32a8d-284">Transaction node virtual machine size</span></span>|<span data-ttu-id="32a8d-285">The virtual machine size used for transaction nodes.</span><span class="sxs-lookup"><span data-stu-id="32a8d-285">The virtual machine size used for transaction nodes.</span></span>|<span data-ttu-id="32a8d-286">Standard A,</span><span class="sxs-lookup"><span data-stu-id="32a8d-286">Standard A,</span></span> <br /><span data-ttu-id="32a8d-287">Standard D,</span><span class="sxs-lookup"><span data-stu-id="32a8d-287">Standard D,</span></span> <br /><span data-ttu-id="32a8d-288">Standard D-v2,</span><span class="sxs-lookup"><span data-stu-id="32a8d-288">Standard D-v2,</span></span> <br /><span data-ttu-id="32a8d-289">Standard F series,</span><span class="sxs-lookup"><span data-stu-id="32a8d-289">Standard F series,</span></span> <br /><span data-ttu-id="32a8d-290">Standard DS,</span><span class="sxs-lookup"><span data-stu-id="32a8d-290">Standard DS,</span></span> <br /><span data-ttu-id="32a8d-291">and Standard FS</span><span class="sxs-lookup"><span data-stu-id="32a8d-291">and Standard FS</span></span>|<span data-ttu-id="32a8d-292">Standard D1v2</span><span class="sxs-lookup"><span data-stu-id="32a8d-292">Standard D1v2</span></span>

### <a name="ethereum-settings"></a><span data-ttu-id="32a8d-293">Ethereum settings</span><span class="sxs-lookup"><span data-stu-id="32a8d-293">Ethereum settings</span></span>

<span data-ttu-id="32a8d-294">Next, under **Ethereum settings**, specify Ethereum-related configuration settings, like the network ID and Ethereum account password or genesis block.</span><span class="sxs-lookup"><span data-stu-id="32a8d-294">Next, under **Ethereum settings**, specify Ethereum-related configuration settings, like the network ID and Ethereum account password or genesis block.</span></span>

![Ethereum settings](./media/ethereum-deployment-guide/standalone-leader-deployment.png)

<span data-ttu-id="32a8d-296">Parameter Name</span><span class="sxs-lookup"><span data-stu-id="32a8d-296">Parameter Name</span></span> |<span data-ttu-id="32a8d-297">Description</span><span class="sxs-lookup"><span data-stu-id="32a8d-297">Description</span></span> |<span data-ttu-id="32a8d-298">Allowed Values</span><span class="sxs-lookup"><span data-stu-id="32a8d-298">Allowed Values</span></span>|<span data-ttu-id="32a8d-299">Default Values</span><span class="sxs-lookup"><span data-stu-id="32a8d-299">Default Values</span></span>
---|---|---|---
<span data-ttu-id="32a8d-300">ConsortiumMember ID</span><span class="sxs-lookup"><span data-stu-id="32a8d-300">ConsortiumMember ID</span></span>|<span data-ttu-id="32a8d-301">The ID associated with each member participating in the consortium network used to configure IP address spaces to avoid collision.</span><span class="sxs-lookup"><span data-stu-id="32a8d-301">The ID associated with each member participating in the consortium network used to configure IP address spaces to avoid collision.</span></span> <br /><br /><span data-ttu-id="32a8d-302">Member ID should be unique across different organizations in the same network.</span><span class="sxs-lookup"><span data-stu-id="32a8d-302">Member ID should be unique across different organizations in the same network.</span></span> <span data-ttu-id="32a8d-303">A unique member ID is needed even when the same organization deploys to multiple regions.</span><span class="sxs-lookup"><span data-stu-id="32a8d-303">A unique member ID is needed even when the same organization deploys to multiple regions.</span></span><br /><br /><span data-ttu-id="32a8d-304">Make note of the value of this parameter since you will need to share it with other joining members.</span><span class="sxs-lookup"><span data-stu-id="32a8d-304">Make note of the value of this parameter since you will need to share it with other joining members.</span></span>|<span data-ttu-id="32a8d-305">0 - 255</span><span class="sxs-lookup"><span data-stu-id="32a8d-305">0 - 255</span></span>
<span data-ttu-id="32a8d-306">Ethereum Network ID</span><span class="sxs-lookup"><span data-stu-id="32a8d-306">Ethereum Network ID</span></span>|<span data-ttu-id="32a8d-307">The network ID for the consortium Ethereum network being deployed.</span><span class="sxs-lookup"><span data-stu-id="32a8d-307">The network ID for the consortium Ethereum network being deployed.</span></span> <span data-ttu-id="32a8d-308">Each Ethereum network has its own Network ID, with 1 being the ID for the public network.</span><span class="sxs-lookup"><span data-stu-id="32a8d-308">Each Ethereum network has its own Network ID, with 1 being the ID for the public network.</span></span> <span data-ttu-id="32a8d-309">While network access is restricted for mining nodes, we still recommend using a large number to prevent collisions.</span><span class="sxs-lookup"><span data-stu-id="32a8d-309">While network access is restricted for mining nodes, we still recommend using a large number to prevent collisions.</span></span>|<span data-ttu-id="32a8d-310">5 - 999,999,999</span><span class="sxs-lookup"><span data-stu-id="32a8d-310">5 - 999,999,999</span></span>| <span data-ttu-id="32a8d-311">10101010</span><span class="sxs-lookup"><span data-stu-id="32a8d-311">10101010</span></span>
<span data-ttu-id="32a8d-312">Custom genesis block</span><span class="sxs-lookup"><span data-stu-id="32a8d-312">Custom genesis block</span></span>|<span data-ttu-id="32a8d-313">Option to either automatically generate a genesis block or provide a custom one.</span><span class="sxs-lookup"><span data-stu-id="32a8d-313">Option to either automatically generate a genesis block or provide a custom one.</span></span>|<span data-ttu-id="32a8d-314">Yes/No</span><span class="sxs-lookup"><span data-stu-id="32a8d-314">Yes/No</span></span>| <span data-ttu-id="32a8d-315">No</span><span class="sxs-lookup"><span data-stu-id="32a8d-315">No</span></span>
<span data-ttu-id="32a8d-316">Ethereum Account Password (Custom genesis block = No)</span><span class="sxs-lookup"><span data-stu-id="32a8d-316">Ethereum Account Password (Custom genesis block = No)</span></span>|<span data-ttu-id="32a8d-317">The administrator password used to secure the Ethereum account imported into each node.</span><span class="sxs-lookup"><span data-stu-id="32a8d-317">The administrator password used to secure the Ethereum account imported into each node.</span></span> <span data-ttu-id="32a8d-318">The password must contain the following: 1 upper case character, 1 lower case character, and 1 number.</span><span class="sxs-lookup"><span data-stu-id="32a8d-318">The password must contain the following: 1 upper case character, 1 lower case character, and 1 number.</span></span>|<span data-ttu-id="32a8d-319">12 or more characters</span><span class="sxs-lookup"><span data-stu-id="32a8d-319">12 or more characters</span></span>|<span data-ttu-id="32a8d-320">NA</span><span class="sxs-lookup"><span data-stu-id="32a8d-320">NA</span></span>
<span data-ttu-id="32a8d-321">Ethereum private key passphrase (Custom genesis block = No)</span><span class="sxs-lookup"><span data-stu-id="32a8d-321">Ethereum private key passphrase (Custom genesis block = No)</span></span>|<span data-ttu-id="32a8d-322">The passphrase used to generate the ECC private key associated with the default Ethereum account that is generated.</span><span class="sxs-lookup"><span data-stu-id="32a8d-322">The passphrase used to generate the ECC private key associated with the default Ethereum account that is generated.</span></span> <span data-ttu-id="32a8d-323">A pre-generated private key does not need to be explicitly passed in.</span><span class="sxs-lookup"><span data-stu-id="32a8d-323">A pre-generated private key does not need to be explicitly passed in.</span></span><br /><br /><span data-ttu-id="32a8d-324">Consider a passphrase with sufficient randomness to ensure a strong private key and no overlap with other consortium members.</span><span class="sxs-lookup"><span data-stu-id="32a8d-324">Consider a passphrase with sufficient randomness to ensure a strong private key and no overlap with other consortium members.</span></span> <span data-ttu-id="32a8d-325">The passphrase must contain the following at a minimum: 1 upper case character, 1 lower case character, and 1 number.</span><span class="sxs-lookup"><span data-stu-id="32a8d-325">The passphrase must contain the following at a minimum: 1 upper case character, 1 lower case character, and 1 number.</span></span><br /><br /><span data-ttu-id="32a8d-326">Note if two members use the same passphrase the accounts generated will be the same.</span><span class="sxs-lookup"><span data-stu-id="32a8d-326">Note if two members use the same passphrase the accounts generated will be the same.</span></span> <span data-ttu-id="32a8d-327">The same passphrase is useful if a single organization is trying to deploy across regions and wants to share a single account (coin base) across all nodes.</span><span class="sxs-lookup"><span data-stu-id="32a8d-327">The same passphrase is useful if a single organization is trying to deploy across regions and wants to share a single account (coin base) across all nodes.</span></span>|<span data-ttu-id="32a8d-328">12 or more characters</span><span class="sxs-lookup"><span data-stu-id="32a8d-328">12 or more characters</span></span>|<span data-ttu-id="32a8d-329">NA</span><span class="sxs-lookup"><span data-stu-id="32a8d-329">NA</span></span>
<span data-ttu-id="32a8d-330">Genesis block(Custom genesis block = Yes)</span><span class="sxs-lookup"><span data-stu-id="32a8d-330">Genesis block(Custom genesis block = Yes)</span></span>|<span data-ttu-id="32a8d-331">JSON string representing custom genesis block.</span><span class="sxs-lookup"><span data-stu-id="32a8d-331">JSON string representing custom genesis block.</span></span> <span data-ttu-id="32a8d-332">You can find more details on the format of the genesis block here, under Custom Networks.</span><span class="sxs-lookup"><span data-stu-id="32a8d-332">You can find more details on the format of the genesis block here, under Custom Networks.</span></span><br /><br /><span data-ttu-id="32a8d-333">An Ethereum account is still created when providing a custom genesis block.</span><span class="sxs-lookup"><span data-stu-id="32a8d-333">An Ethereum account is still created when providing a custom genesis block.</span></span> <span data-ttu-id="32a8d-334">Consider specifying a prefunded Ethereum account in the genesis block to not wait for mining.</span><span class="sxs-lookup"><span data-stu-id="32a8d-334">Consider specifying a prefunded Ethereum account in the genesis block to not wait for mining.</span></span>|<span data-ttu-id="32a8d-335">Valid JSON</span><span class="sxs-lookup"><span data-stu-id="32a8d-335">Valid JSON</span></span> |<span data-ttu-id="32a8d-336">NA</span><span class="sxs-lookup"><span data-stu-id="32a8d-336">NA</span></span>
<span data-ttu-id="32a8d-337">Shared Key for Connection</span><span class="sxs-lookup"><span data-stu-id="32a8d-337">Shared Key for Connection</span></span>|<span data-ttu-id="32a8d-338">A Shared key for connection between VNET gateways.</span><span class="sxs-lookup"><span data-stu-id="32a8d-338">A Shared key for connection between VNET gateways.</span></span>| <span data-ttu-id="32a8d-339">12 or more characters</span><span class="sxs-lookup"><span data-stu-id="32a8d-339">12 or more characters</span></span>|<span data-ttu-id="32a8d-340">NA</span><span class="sxs-lookup"><span data-stu-id="32a8d-340">NA</span></span>
<span data-ttu-id="32a8d-341">Consortium Data URL</span><span class="sxs-lookup"><span data-stu-id="32a8d-341">Consortium Data URL</span></span>|<span data-ttu-id="32a8d-342">The URL pointing to the relevant consortium configuration data provided by another member's deployment.</span><span class="sxs-lookup"><span data-stu-id="32a8d-342">The URL pointing to the relevant consortium configuration data provided by another member's deployment.</span></span> <br /><br /><span data-ttu-id="32a8d-343">This information is provided by an already connected member who has a deployment.</span><span class="sxs-lookup"><span data-stu-id="32a8d-343">This information is provided by an already connected member who has a deployment.</span></span> <span data-ttu-id="32a8d-344">If you deployed the rest of the network, the URL is the template deployment output, named CONSORTIUM-DATA.</span><span class="sxs-lookup"><span data-stu-id="32a8d-344">If you deployed the rest of the network, the URL is the template deployment output, named CONSORTIUM-DATA.</span></span>||<span data-ttu-id="32a8d-345">NA</span><span class="sxs-lookup"><span data-stu-id="32a8d-345">NA</span></span>
<span data-ttu-id="32a8d-346">VNet Gateway to Connect to</span><span class="sxs-lookup"><span data-stu-id="32a8d-346">VNet Gateway to Connect to</span></span>|<span data-ttu-id="32a8d-347">The resource path of the VNet Gateway to which to connect.</span><span class="sxs-lookup"><span data-stu-id="32a8d-347">The resource path of the VNet Gateway to which to connect.</span></span><br /><span data-ttu-id="32a8d-348">This information is provided by an already connected member who has a deployment.</span><span class="sxs-lookup"><span data-stu-id="32a8d-348">This information is provided by an already connected member who has a deployment.</span></span> <span data-ttu-id="32a8d-349">If you deployed the rest of the network, the URL is in template deployment output, named CONSORTIUM_MEMBER_GATEWAY_ID.</span><span class="sxs-lookup"><span data-stu-id="32a8d-349">If you deployed the rest of the network, the URL is in template deployment output, named CONSORTIUM_MEMBER_GATEWAY_ID.</span></span> <span data-ttu-id="32a8d-350">Note: The same member's consortium data URL and VNet Gateway resource must be used.</span><span class="sxs-lookup"><span data-stu-id="32a8d-350">Note: The same member's consortium data URL and VNet Gateway resource must be used.</span></span>||<span data-ttu-id="32a8d-351">NA</span><span class="sxs-lookup"><span data-stu-id="32a8d-351">NA</span></span>
<span data-ttu-id="32a8d-352">Endpoint of Peer information registrar</span><span class="sxs-lookup"><span data-stu-id="32a8d-352">Endpoint of Peer information registrar</span></span>|<span data-ttu-id="32a8d-353">Peer info endpoint provided by another member's deployment</span><span class="sxs-lookup"><span data-stu-id="32a8d-353">Peer info endpoint provided by another member's deployment</span></span>|<span data-ttu-id="32a8d-354">Valid endpoint of first member in consortium</span><span class="sxs-lookup"><span data-stu-id="32a8d-354">Valid endpoint of first member in consortium</span></span>|<span data-ttu-id="32a8d-355">NA</span><span class="sxs-lookup"><span data-stu-id="32a8d-355">NA</span></span>
<span data-ttu-id="32a8d-356">Key of Peer information registrar</span><span class="sxs-lookup"><span data-stu-id="32a8d-356">Key of Peer information registrar</span></span>|<span data-ttu-id="32a8d-357">Peer info primary key provided by another member's deployment</span><span class="sxs-lookup"><span data-stu-id="32a8d-357">Peer info primary key provided by another member's deployment</span></span>|<span data-ttu-id="32a8d-358">Valid primary key of first member in consortium</span><span class="sxs-lookup"><span data-stu-id="32a8d-358">Valid primary key of first member in consortium</span></span>|<span data-ttu-id="32a8d-359">NA</span><span class="sxs-lookup"><span data-stu-id="32a8d-359">NA</span></span>

### <a name="summary"></a><span data-ttu-id="32a8d-360">Summary</span><span class="sxs-lookup"><span data-stu-id="32a8d-360">Summary</span></span>

<span data-ttu-id="32a8d-361">Click through the summary blade to review the inputs specified and to run basic pre-deployment validation.</span><span class="sxs-lookup"><span data-stu-id="32a8d-361">Click through the summary blade to review the inputs specified and to run basic pre-deployment validation.</span></span>

![Summary](./media/ethereum-deployment-guide/summary.png)

<span data-ttu-id="32a8d-363">Review legal and privacy terms and click **Purchase** to deploy.</span><span class="sxs-lookup"><span data-stu-id="32a8d-363">Review legal and privacy terms and click **Purchase** to deploy.</span></span> <span data-ttu-id="32a8d-364">If the deployment has more than one region, or is for a consortium network, then this template pre-deploys the necessary VPN gateways to support network connectivity with other members.</span><span class="sxs-lookup"><span data-stu-id="32a8d-364">If the deployment has more than one region, or is for a consortium network, then this template pre-deploys the necessary VPN gateways to support network connectivity with other members.</span></span> <span data-ttu-id="32a8d-365">Deployment of the gateway can take up to 45 to 50 minutes.</span><span class="sxs-lookup"><span data-stu-id="32a8d-365">Deployment of the gateway can take up to 45 to 50 minutes.</span></span>

## <a name="post-deployment-sanity-checks"></a><span data-ttu-id="32a8d-366">Post deployment sanity checks</span><span class="sxs-lookup"><span data-stu-id="32a8d-366">Post deployment sanity checks</span></span>

### <a name="administrator-page"></a><span data-ttu-id="32a8d-367">Administrator page</span><span class="sxs-lookup"><span data-stu-id="32a8d-367">Administrator page</span></span>

<span data-ttu-id="32a8d-368">Once the deployment has completed successfully and all resources have been provisioned, you can go to the administrator page to get a view of your blockchain network and sanity check the deployment state.</span><span class="sxs-lookup"><span data-stu-id="32a8d-368">Once the deployment has completed successfully and all resources have been provisioned, you can go to the administrator page to get a view of your blockchain network and sanity check the deployment state.</span></span> <span data-ttu-id="32a8d-369">The URL of the admin page is the DNS name of the load balancer; it is present in the output section of the template deployment named as ADMIN_SITE.</span><span class="sxs-lookup"><span data-stu-id="32a8d-369">The URL of the admin page is the DNS name of the load balancer; it is present in the output section of the template deployment named as ADMIN_SITE.</span></span>

<span data-ttu-id="32a8d-370">To find it, select the resource group that was deployed.</span><span class="sxs-lookup"><span data-stu-id="32a8d-370">To find it, select the resource group that was deployed.</span></span> <span data-ttu-id="32a8d-371">Then, select **Overview**, and click on the link immediately under **Deployments** that shows the number that succeeded.</span><span class="sxs-lookup"><span data-stu-id="32a8d-371">Then, select **Overview**, and click on the link immediately under **Deployments** that shows the number that succeeded.</span></span>

![Resource group overview](./media/ethereum-deployment-guide/resource-overview.png)

<span data-ttu-id="32a8d-373">The new screen shows deployment history.</span><span class="sxs-lookup"><span data-stu-id="32a8d-373">The new screen shows deployment history.</span></span> <span data-ttu-id="32a8d-374">Select the first deployment resource (For example, microsoft-azure-blockchain.azure-blockchain-servi...) and look for the **Outputs** section in the lower half of the page.</span><span class="sxs-lookup"><span data-stu-id="32a8d-374">Select the first deployment resource (For example, microsoft-azure-blockchain.azure-blockchain-servi...) and look for the **Outputs** section in the lower half of the page.</span></span> <span data-ttu-id="32a8d-375">You\`ll see the URL for the admin page listed in the template deployment output parameter as ADMIN_SITE.</span><span class="sxs-lookup"><span data-stu-id="32a8d-375">You\`ll see the URL for the admin page listed in the template deployment output parameter as ADMIN_SITE.</span></span>

![Resource deployments](./media/ethereum-deployment-guide/resource-deployments.png)

![Deployment output](./media/ethereum-deployment-guide/deployment-output.png)

<span data-ttu-id="32a8d-378">To get to the admin page, copy the **ADMIN-SITE** output and open it in another tab.</span><span class="sxs-lookup"><span data-stu-id="32a8d-378">To get to the admin page, copy the **ADMIN-SITE** output and open it in another tab.</span></span>

<span data-ttu-id="32a8d-379">On the admin page, you can get a high-level overview of the topology you deployed by reviewing the Ethereum Node Status section.</span><span class="sxs-lookup"><span data-stu-id="32a8d-379">On the admin page, you can get a high-level overview of the topology you deployed by reviewing the Ethereum Node Status section.</span></span> <span data-ttu-id="32a8d-380">It includes all node hostnames, their peer count, and the latest block seen.</span><span class="sxs-lookup"><span data-stu-id="32a8d-380">It includes all node hostnames, their peer count, and the latest block seen.</span></span> <span data-ttu-id="32a8d-381">The peer count for each node is between the minimum of one less than the *total node count* and the configured maximum peer count.</span><span class="sxs-lookup"><span data-stu-id="32a8d-381">The peer count for each node is between the minimum of one less than the *total node count* and the configured maximum peer count.</span></span> <span data-ttu-id="32a8d-382">Note, that the peer count does not restrict the number of nodes that can be deployed within the network.</span><span class="sxs-lookup"><span data-stu-id="32a8d-382">Note, that the peer count does not restrict the number of nodes that can be deployed within the network.</span></span>
<span data-ttu-id="32a8d-383">Occasionally, you will see the peer count fluctuate and be less than the (total number of nodes - 1).</span><span class="sxs-lookup"><span data-stu-id="32a8d-383">Occasionally, you will see the peer count fluctuate and be less than the (total number of nodes - 1).</span></span> <span data-ttu-id="32a8d-384">The difference in the count is not always a sign that the nodes are unhealthy, since forks in the ledger can cause minor changes in peer count.</span><span class="sxs-lookup"><span data-stu-id="32a8d-384">The difference in the count is not always a sign that the nodes are unhealthy, since forks in the ledger can cause minor changes in peer count.</span></span> <span data-ttu-id="32a8d-385">Finally, you can inspect the latest block seen by each node in the network to determine forks or lags in the system.</span><span class="sxs-lookup"><span data-stu-id="32a8d-385">Finally, you can inspect the latest block seen by each node in the network to determine forks or lags in the system.</span></span>

![Node status](./media/ethereum-deployment-guide/node-status.png)

<span data-ttu-id="32a8d-387">The node status is refreshed every 10 seconds.</span><span class="sxs-lookup"><span data-stu-id="32a8d-387">The node status is refreshed every 10 seconds.</span></span> <span data-ttu-id="32a8d-388">Reload the page via the browser or **Reload** button to update the view.</span><span class="sxs-lookup"><span data-stu-id="32a8d-388">Reload the page via the browser or **Reload** button to update the view.</span></span>

### <a name="oms-portal"></a><span data-ttu-id="32a8d-389">OMS portal</span><span class="sxs-lookup"><span data-stu-id="32a8d-389">OMS portal</span></span>

<span data-ttu-id="32a8d-390">You can locate your OMS portal either by following the link in the deployment output (OMSPORTALURL) or by selecting the OMS resource in your deployed resource group.</span><span class="sxs-lookup"><span data-stu-id="32a8d-390">You can locate your OMS portal either by following the link in the deployment output (OMSPORTALURL) or by selecting the OMS resource in your deployed resource group.</span></span>

![OMS URL](./media/ethereum-deployment-guide/oms-url.png)

![OMS resource](./media/ethereum-deployment-guide/oms-resource.png)

<span data-ttu-id="32a8d-393">The portal will first display high-level network statistics as an overview.</span><span class="sxs-lookup"><span data-stu-id="32a8d-393">The portal will first display high-level network statistics as an overview.</span></span>

![OMS Overview](./media/ethereum-deployment-guide/oms-overview.png)

<span data-ttu-id="32a8d-395">Clicking on the overview will direct you to a portal to view per-node statistics.</span><span class="sxs-lookup"><span data-stu-id="32a8d-395">Clicking on the overview will direct you to a portal to view per-node statistics.</span></span>

![Per-node stats](./media/ethereum-deployment-guide/per-node-stats.png)

### <a name="accessing-nodes"></a><span data-ttu-id="32a8d-397">Accessing nodes</span><span class="sxs-lookup"><span data-stu-id="32a8d-397">Accessing nodes</span></span>

<span data-ttu-id="32a8d-398">You can remotely connect to the virtual machines for the transaction nodes via SSH with your provided admin username and password/SSH key.</span><span class="sxs-lookup"><span data-stu-id="32a8d-398">You can remotely connect to the virtual machines for the transaction nodes via SSH with your provided admin username and password/SSH key.</span></span> <span data-ttu-id="32a8d-399">Since the transaction node VMs do not have their own public IP addresses, you will need to go through the load balancer and specify the port number.</span><span class="sxs-lookup"><span data-stu-id="32a8d-399">Since the transaction node VMs do not have their own public IP addresses, you will need to go through the load balancer and specify the port number.</span></span> <span data-ttu-id="32a8d-400">The SSH command to run to access the first transaction node is listed in the template deployment output parameter as, **SSH_TO_FIRST_TX_NODE** (for the sample deployment: ssh -p 4000 gethadmin@leader4vb.eastus.cloudapp.azure.com).</span><span class="sxs-lookup"><span data-stu-id="32a8d-400">The SSH command to run to access the first transaction node is listed in the template deployment output parameter as, **SSH_TO_FIRST_TX_NODE** (for the sample deployment: ssh -p 4000 gethadmin@leader4vb.eastus.cloudapp.azure.com).</span></span> <span data-ttu-id="32a8d-401">To get to additional transaction nodes, increment the port number by one (For example, the first transaction node is on port 4000).</span><span class="sxs-lookup"><span data-stu-id="32a8d-401">To get to additional transaction nodes, increment the port number by one (For example, the first transaction node is on port 4000).</span></span>

<span data-ttu-id="32a8d-402">Since the virtual machines on which the mining nodes run are not externally accessible, you need to go through one of the transaction nodes.</span><span class="sxs-lookup"><span data-stu-id="32a8d-402">Since the virtual machines on which the mining nodes run are not externally accessible, you need to go through one of the transaction nodes.</span></span> <span data-ttu-id="32a8d-403">Once you have an SSH session to a transaction node, install your private key on the transaction node or use your password to start an SSH session into any of the mining nodes.</span><span class="sxs-lookup"><span data-stu-id="32a8d-403">Once you have an SSH session to a transaction node, install your private key on the transaction node or use your password to start an SSH session into any of the mining nodes.</span></span>

<span data-ttu-id="32a8d-404">**Note**</span><span class="sxs-lookup"><span data-stu-id="32a8d-404">**Note**</span></span>

<span data-ttu-id="32a8d-405">The hostnames can be obtained from Admin Site or from the Azure portal.</span><span class="sxs-lookup"><span data-stu-id="32a8d-405">The hostnames can be obtained from Admin Site or from the Azure portal.</span></span> <span data-ttu-id="32a8d-406">In Azure portal, the hostnames of nodes present in the virtual machine scale set (VMSS) resource is listed under **Instances**, which differs from the actual hostnames.</span><span class="sxs-lookup"><span data-stu-id="32a8d-406">In Azure portal, the hostnames of nodes present in the virtual machine scale set (VMSS) resource is listed under **Instances**, which differs from the actual hostnames.</span></span> <span data-ttu-id="32a8d-407">For example, the hostname in Azure portal may look like **mn-asdfmv-reg1_0** but the actual hostname would be like **mn-asdfmv-reg**.</span><span class="sxs-lookup"><span data-stu-id="32a8d-407">For example, the hostname in Azure portal may look like **mn-asdfmv-reg1_0** but the actual hostname would be like **mn-asdfmv-reg**.</span></span>

<span data-ttu-id="32a8d-408">For example:</span><span class="sxs-lookup"><span data-stu-id="32a8d-408">For example:</span></span>

<span data-ttu-id="32a8d-409">Azure portal hostname</span><span class="sxs-lookup"><span data-stu-id="32a8d-409">Azure portal hostname</span></span>| <span data-ttu-id="32a8d-410">Actual hostname</span><span class="sxs-lookup"><span data-stu-id="32a8d-410">Actual hostname</span></span>
---|---
<span data-ttu-id="32a8d-411">mn-ethwvu-reg1_0</span><span class="sxs-lookup"><span data-stu-id="32a8d-411">mn-ethwvu-reg1_0</span></span>| <span data-ttu-id="32a8d-412">mn-ethwvu-reg1000000</span><span class="sxs-lookup"><span data-stu-id="32a8d-412">mn-ethwvu-reg1000000</span></span>
<span data-ttu-id="32a8d-413">mn-ethwvu-reg1_1</span><span class="sxs-lookup"><span data-stu-id="32a8d-413">mn-ethwvu-reg1_1</span></span> |<span data-ttu-id="32a8d-414">mn-ethwvu-reg1000001</span><span class="sxs-lookup"><span data-stu-id="32a8d-414">mn-ethwvu-reg1000001</span></span>
<span data-ttu-id="32a8d-415">mn-ethwvu-reg1_2</span><span class="sxs-lookup"><span data-stu-id="32a8d-415">mn-ethwvu-reg1_2</span></span> |<span data-ttu-id="32a8d-416">mn-ethwvu-reg1000002</span><span class="sxs-lookup"><span data-stu-id="32a8d-416">mn-ethwvu-reg1000002</span></span>

## <a name="adding-a-new-consortium-member"></a><span data-ttu-id="32a8d-417">Adding a new consortium member</span><span class="sxs-lookup"><span data-stu-id="32a8d-417">Adding a new consortium member</span></span>

### <a name="sharing-data"></a><span data-ttu-id="32a8d-418">Sharing data</span><span class="sxs-lookup"><span data-stu-id="32a8d-418">Sharing data</span></span>

<span data-ttu-id="32a8d-419">As the first member (or a connected member) of the consortium, you need to provide other members a few pieces of information so they can join and establish their connection.</span><span class="sxs-lookup"><span data-stu-id="32a8d-419">As the first member (or a connected member) of the consortium, you need to provide other members a few pieces of information so they can join and establish their connection.</span></span> <span data-ttu-id="32a8d-420">Specifically:</span><span class="sxs-lookup"><span data-stu-id="32a8d-420">Specifically:</span></span>

1. <span data-ttu-id="32a8d-421">**Shared Consortium Configuration Data**: There is a set of data that is used to orchestrate the Ethereum connection between two members.</span><span class="sxs-lookup"><span data-stu-id="32a8d-421">**Shared Consortium Configuration Data**: There is a set of data that is used to orchestrate the Ethereum connection between two members.</span></span> <span data-ttu-id="32a8d-422">The necessary information, including the genesis block, consortium network ID, and boot nodes, is written to a file on the transaction nodes of the leader or another deployed member.</span><span class="sxs-lookup"><span data-stu-id="32a8d-422">The necessary information, including the genesis block, consortium network ID, and boot nodes, is written to a file on the transaction nodes of the leader or another deployed member.</span></span> <span data-ttu-id="32a8d-423">The location of this file is listed in the template deployment output parameter named **CONSORTIUM-DATA**.</span><span class="sxs-lookup"><span data-stu-id="32a8d-423">The location of this file is listed in the template deployment output parameter named **CONSORTIUM-DATA**.</span></span>
2. <span data-ttu-id="32a8d-424">**Peer Info endpoint**: The Peer info registrar endpoint to get information of all the nodes already connected to the Ethereum network from the Leaders or another member's deployment.</span><span class="sxs-lookup"><span data-stu-id="32a8d-424">**Peer Info endpoint**: The Peer info registrar endpoint to get information of all the nodes already connected to the Ethereum network from the Leaders or another member's deployment.</span></span> <span data-ttu-id="32a8d-425">The DB stores a set of information regarding each node connected in the network, information such as node's hostname, private IP address etc. This is the template deployment output parameter named **PEER_INFO_ENDPOINT**.</span><span class="sxs-lookup"><span data-stu-id="32a8d-425">The DB stores a set of information regarding each node connected in the network, information such as node's hostname, private IP address etc. This is the template deployment output parameter named **PEER_INFO_ENDPOINT**.</span></span>
3. <span data-ttu-id="32a8d-426">**Peer Info Primary Key**: The Peer info registrar Primary key is used to get access to the leader's or other member's Peer info primary key.</span><span class="sxs-lookup"><span data-stu-id="32a8d-426">**Peer Info Primary Key**: The Peer info registrar Primary key is used to get access to the leader's or other member's Peer info primary key.</span></span> <span data-ttu-id="32a8d-427">This is the template deployment output parameter named **PEER_INFO_PRIMARY_KEY**.</span><span class="sxs-lookup"><span data-stu-id="32a8d-427">This is the template deployment output parameter named **PEER_INFO_PRIMARY_KEY**.</span></span>


4. <span data-ttu-id="32a8d-428">**VNET Gateway**: Each member establishes a connection to the entire blockchain network through an existing member.</span><span class="sxs-lookup"><span data-stu-id="32a8d-428">**VNET Gateway**: Each member establishes a connection to the entire blockchain network through an existing member.</span></span> <span data-ttu-id="32a8d-429">To connect VNET, you need the resource path to the VNET Gateway of the member to which you are connecting.</span><span class="sxs-lookup"><span data-stu-id="32a8d-429">To connect VNET, you need the resource path to the VNET Gateway of the member to which you are connecting.</span></span> <span data-ttu-id="32a8d-430">This is the template deployment output parameter named **CONSORTIUM_MEMBER_GATEWAY_ID**.</span><span class="sxs-lookup"><span data-stu-id="32a8d-430">This is the template deployment output parameter named **CONSORTIUM_MEMBER_GATEWAY_ID**.</span></span>
5. <span data-ttu-id="32a8d-431">**Shared Key**: A pre-established secret between two members of the consortium network that are establishing a connection.</span><span class="sxs-lookup"><span data-stu-id="32a8d-431">**Shared Key**: A pre-established secret between two members of the consortium network that are establishing a connection.</span></span> <span data-ttu-id="32a8d-432">This is an alphanumeric string (between 1 to 128 characters) that has been agreed upon outside the context of the deployment.</span><span class="sxs-lookup"><span data-stu-id="32a8d-432">This is an alphanumeric string (between 1 to 128 characters) that has been agreed upon outside the context of the deployment.</span></span> <span data-ttu-id="32a8d-433">(For example, **MySharedKeyAbc123**)</span><span class="sxs-lookup"><span data-stu-id="32a8d-433">(For example, **MySharedKeyAbc123**)</span></span>

### <a name="acceptance-of-new-member"></a><span data-ttu-id="32a8d-434">Acceptance of new member</span><span class="sxs-lookup"><span data-stu-id="32a8d-434">Acceptance of new member</span></span>

<span data-ttu-id="32a8d-435">This step should be done after the joining member has deployed their network successfully.</span><span class="sxs-lookup"><span data-stu-id="32a8d-435">This step should be done after the joining member has deployed their network successfully.</span></span> <span data-ttu-id="32a8d-436">Before a member can join the network and see transaction traffic, an existing member must perform a final configuration on their VPN Gateway to accept the connection.</span><span class="sxs-lookup"><span data-stu-id="32a8d-436">Before a member can join the network and see transaction traffic, an existing member must perform a final configuration on their VPN Gateway to accept the connection.</span></span> <span data-ttu-id="32a8d-437">This means the Ethereum nodes of the joining member will not run until a connection is established.</span><span class="sxs-lookup"><span data-stu-id="32a8d-437">This means the Ethereum nodes of the joining member will not run until a connection is established.</span></span> <span data-ttu-id="32a8d-438">This configuration can be done via PowerShell or xPlat CLI.</span><span class="sxs-lookup"><span data-stu-id="32a8d-438">This configuration can be done via PowerShell or xPlat CLI.</span></span> <span data-ttu-id="32a8d-439">A PowerShell module and xPlat CLI script are also stored on the transaction node, alongside the consortium data.</span><span class="sxs-lookup"><span data-stu-id="32a8d-439">A PowerShell module and xPlat CLI script are also stored on the transaction node, alongside the consortium data.</span></span> <span data-ttu-id="32a8d-440">The script location is the deployment output parameters named **PAIR-GATEWAY-PS-MODULE** and **PAIR-GATEWAY-AZURE-CLISCRIPT**, respectively.</span><span class="sxs-lookup"><span data-stu-id="32a8d-440">The script location is the deployment output parameters named **PAIR-GATEWAY-PS-MODULE** and **PAIR-GATEWAY-AZURE-CLISCRIPT**, respectively.</span></span>

<span data-ttu-id="32a8d-441">**PowerShell/CLI Setup**</span><span class="sxs-lookup"><span data-stu-id="32a8d-441">**PowerShell/CLI Setup**</span></span>

<span data-ttu-id="32a8d-442">Additional information on how to get started with Azure PowerShell cmdlets and Azure xPlat CLI can be found in Azure documentation.</span><span class="sxs-lookup"><span data-stu-id="32a8d-442">Additional information on how to get started with Azure PowerShell cmdlets and Azure xPlat CLI can be found in Azure documentation.</span></span>

<span data-ttu-id="32a8d-443">You will need the latest version of the Azure cmdlets installed locally and a session open.</span><span class="sxs-lookup"><span data-stu-id="32a8d-443">You will need the latest version of the Azure cmdlets installed locally and a session open.</span></span> <span data-ttu-id="32a8d-444">Make sure to log into the session with your Azure subscription credentials.</span><span class="sxs-lookup"><span data-stu-id="32a8d-444">Make sure to log into the session with your Azure subscription credentials.</span></span>

<span data-ttu-id="32a8d-445">**PowerShell: Establish Connection**</span><span class="sxs-lookup"><span data-stu-id="32a8d-445">**PowerShell: Establish Connection**</span></span>

<span data-ttu-id="32a8d-446">Download the PowerShell module and store it locally.</span><span class="sxs-lookup"><span data-stu-id="32a8d-446">Download the PowerShell module and store it locally.</span></span> <span data-ttu-id="32a8d-447">The location of the PowerShell module is specified as the **PAIR-GATEWAY-PS-MODULE** template deployment output parameter.</span><span class="sxs-lookup"><span data-stu-id="32a8d-447">The location of the PowerShell module is specified as the **PAIR-GATEWAY-PS-MODULE** template deployment output parameter.</span></span>

<span data-ttu-id="32a8d-448">If not already enabled, use the **Set-ExecutionPolicy** cmdlet for the local session to allow running an unsigned module.</span><span class="sxs-lookup"><span data-stu-id="32a8d-448">If not already enabled, use the **Set-ExecutionPolicy** cmdlet for the local session to allow running an unsigned module.</span></span>

<span data-ttu-id="32a8d-449">**Set-ExecutionPolicy Unrestricted CurrentUser**</span><span class="sxs-lookup"><span data-stu-id="32a8d-449">**Set-ExecutionPolicy Unrestricted CurrentUser**</span></span>

<span data-ttu-id="32a8d-450">Next, login to your Azure Subscription in which you deployed the Leader deployment using</span><span class="sxs-lookup"><span data-stu-id="32a8d-450">Next, login to your Azure Subscription in which you deployed the Leader deployment using</span></span>

<span data-ttu-id="32a8d-451">**Login-AzureRmAccount**</span><span class="sxs-lookup"><span data-stu-id="32a8d-451">**Login-AzureRmAccount**</span></span>

<span data-ttu-id="32a8d-452">Next, import the module:</span><span class="sxs-lookup"><span data-stu-id="32a8d-452">Next, import the module:</span></span>

<span data-ttu-id="32a8d-453">**Import-Module <filepath to downloaded file>**</span><span class="sxs-lookup"><span data-stu-id="32a8d-453">**Import-Module <filepath to downloaded file>**</span></span>

<span data-ttu-id="32a8d-454">Finally, run the function with the appropriate input:</span><span class="sxs-lookup"><span data-stu-id="32a8d-454">Finally, run the function with the appropriate input:</span></span>

- <span data-ttu-id="32a8d-455">**MyGatewayResourceId** : Resource path of your Gateway.</span><span class="sxs-lookup"><span data-stu-id="32a8d-455">**MyGatewayResourceId** : Resource path of your Gateway.</span></span> <span data-ttu-id="32a8d-456">This is the template deployment output parameter named **CONSORTIUM_MEMBER_GATEWAY_ID**.</span><span class="sxs-lookup"><span data-stu-id="32a8d-456">This is the template deployment output parameter named **CONSORTIUM_MEMBER_GATEWAY_ID**.</span></span>
- <span data-ttu-id="32a8d-457">**OtherGatewayResourceId** : Resource path of the joining member's gateway.</span><span class="sxs-lookup"><span data-stu-id="32a8d-457">**OtherGatewayResourceId** : Resource path of the joining member's gateway.</span></span> <span data-ttu-id="32a8d-458">This is provided by the joining member and is the template deployment output parameter of also named **CONSORTIUM_MEMBER_GATEWAY_ID**.</span><span class="sxs-lookup"><span data-stu-id="32a8d-458">This is provided by the joining member and is the template deployment output parameter of also named **CONSORTIUM_MEMBER_GATEWAY_ID**.</span></span>
- <span data-ttu-id="32a8d-459">**ConnectionName** : A name for you to identify this Gateway connection.</span><span class="sxs-lookup"><span data-stu-id="32a8d-459">**ConnectionName** : A name for you to identify this Gateway connection.</span></span>
- <span data-ttu-id="32a8d-460">**Shared Key** : The pre-established secret between the two members of the consortium   network that are establishing a connection.</span><span class="sxs-lookup"><span data-stu-id="32a8d-460">**Shared Key** : The pre-established secret between the two members of the consortium   network that are establishing a connection.</span></span>

<span data-ttu-id="32a8d-461">**CreateConnection** - MyGatewayResourceId <resource path of your Gateway> -OtherGatewayResourceId <resource path of the joining member's gateway> -ConnectionName myConnection -SharedKey "MySharedKeyAbc123"</span><span class="sxs-lookup"><span data-stu-id="32a8d-461">**CreateConnection** - MyGatewayResourceId <resource path of your Gateway> -OtherGatewayResourceId <resource path of the joining member's gateway> -ConnectionName myConnection -SharedKey "MySharedKeyAbc123"</span></span>

<span data-ttu-id="32a8d-462">**xPlat CLI: Establish Connection**</span><span class="sxs-lookup"><span data-stu-id="32a8d-462">**xPlat CLI: Establish Connection**</span></span>

<span data-ttu-id="32a8d-463">Download the Azure CLI script and store it locally.</span><span class="sxs-lookup"><span data-stu-id="32a8d-463">Download the Azure CLI script and store it locally.</span></span> <span data-ttu-id="32a8d-464">The location of the Azure CLI script is specified in the template deployment parameter named **PAIR-GATEWAY-AZURE-CLI-SCRIPT**.</span><span class="sxs-lookup"><span data-stu-id="32a8d-464">The location of the Azure CLI script is specified in the template deployment parameter named **PAIR-GATEWAY-AZURE-CLI-SCRIPT**.</span></span>

<span data-ttu-id="32a8d-465">Run the script with the appropriate input:</span><span class="sxs-lookup"><span data-stu-id="32a8d-465">Run the script with the appropriate input:</span></span>

- <span data-ttu-id="32a8d-466">**MyGatewayResourceId** : Resource path of your Gateway.</span><span class="sxs-lookup"><span data-stu-id="32a8d-466">**MyGatewayResourceId** : Resource path of your Gateway.</span></span> <span data-ttu-id="32a8d-467">This is the template deployment output parameter named **CONSORTIUM_MEMBER_GATEWAY_ID**.</span><span class="sxs-lookup"><span data-stu-id="32a8d-467">This is the template deployment output parameter named **CONSORTIUM_MEMBER_GATEWAY_ID**.</span></span>
- <span data-ttu-id="32a8d-468">**OtherGatewayResourceId** : Resource path of the joining member's gateway.</span><span class="sxs-lookup"><span data-stu-id="32a8d-468">**OtherGatewayResourceId** : Resource path of the joining member's gateway.</span></span> <span data-ttu-id="32a8d-469">This is provided by the joining member and is the template deployment parameter of their deployment also named **CONSORTIUM_MEMBER_GATEWAY_ID**.</span><span class="sxs-lookup"><span data-stu-id="32a8d-469">This is provided by the joining member and is the template deployment parameter of their deployment also named **CONSORTIUM_MEMBER_GATEWAY_ID**.</span></span>
- <span data-ttu-id="32a8d-470">**ConnectionName** : A name for you to identify this Gateway connection.</span><span class="sxs-lookup"><span data-stu-id="32a8d-470">**ConnectionName** : A name for you to identify this Gateway connection.</span></span>
- <span data-ttu-id="32a8d-471">**Shared Key** : The pre-established secret between the two members of the consortium   network that are establishing a connection.</span><span class="sxs-lookup"><span data-stu-id="32a8d-471">**Shared Key** : The pre-established secret between the two members of the consortium   network that are establishing a connection.</span></span>
- <span data-ttu-id="32a8d-472">**Location** : The Azure region where your gateway resource is deployed.</span><span class="sxs-lookup"><span data-stu-id="32a8d-472">**Location** : The Azure region where your gateway resource is deployed.</span></span>

``` powershell
az network vpn-connection create --name $ConnectionName --resource-group
$MyResourceGroup --vnet-gateway1 $MyGatewayResourceId --shared-key $SharedKey --vnet-
gateway2 $OtherGatewayResourceId --enable-bgp
```

<span data-ttu-id="32a8d-473">The architecture will be as follows after you have successfully configured connection between **leader** and **member** deployments.</span><span class="sxs-lookup"><span data-stu-id="32a8d-473">The architecture will be as follows after you have successfully configured connection between **leader** and **member** deployments.</span></span>

![Leader and member architecture](./media/ethereum-deployment-guide/leader-member.png)

## <a name="fund-new-member-account"></a><span data-ttu-id="32a8d-475">Fund new member account</span><span class="sxs-lookup"><span data-stu-id="32a8d-475">Fund new member account</span></span>

### <a name="generated-genesis-block"></a><span data-ttu-id="32a8d-476">Generated genesis block</span><span class="sxs-lookup"><span data-stu-id="32a8d-476">Generated genesis block</span></span>

<span data-ttu-id="32a8d-477">As the first member, your Ethereum account is funded with one trillion ether if the deployment generates the genesis block (Custom Genesis Block = No).</span><span class="sxs-lookup"><span data-stu-id="32a8d-477">As the first member, your Ethereum account is funded with one trillion ether if the deployment generates the genesis block (Custom Genesis Block = No).</span></span> <span data-ttu-id="32a8d-478">Other members will have an account that is not pre-funded and must wait to accumulate Ether as their mining nodes begin to mine blocks.</span><span class="sxs-lookup"><span data-stu-id="32a8d-478">Other members will have an account that is not pre-funded and must wait to accumulate Ether as their mining nodes begin to mine blocks.</span></span> <span data-ttu-id="32a8d-479">To avoid having new members wait for Ether, you will need to explicitly fund joining members' Ethereum accounts.</span><span class="sxs-lookup"><span data-stu-id="32a8d-479">To avoid having new members wait for Ether, you will need to explicitly fund joining members' Ethereum accounts.</span></span>

<span data-ttu-id="32a8d-480">To do so, joining members must provide you with the Ethereum account that is displayed on their admin website.</span><span class="sxs-lookup"><span data-stu-id="32a8d-480">To do so, joining members must provide you with the Ethereum account that is displayed on their admin website.</span></span> <span data-ttu-id="32a8d-481">You can then use your admin website to transfer Ether from your account to their account by entering the account provided.</span><span class="sxs-lookup"><span data-stu-id="32a8d-481">You can then use your admin website to transfer Ether from your account to their account by entering the account provided.</span></span>

### <a name="custom-genesis-block"></a><span data-ttu-id="32a8d-482">Custom genesis block</span><span class="sxs-lookup"><span data-stu-id="32a8d-482">Custom genesis block</span></span>

<span data-ttu-id="32a8d-483">If a custom genesis block is provided with a specified Ethereum account, you can use MetaMask or another tool to transfer ether from that specified account to the pre-generated Ethereum account visible in the admin website.</span><span class="sxs-lookup"><span data-stu-id="32a8d-483">If a custom genesis block is provided with a specified Ethereum account, you can use MetaMask or another tool to transfer ether from that specified account to the pre-generated Ethereum account visible in the admin website.</span></span> <span data-ttu-id="32a8d-484">For instructions on how to use MetaMask, see [Creating Ethereum Account](#create-ethereum-account).</span><span class="sxs-lookup"><span data-stu-id="32a8d-484">For instructions on how to use MetaMask, see [Creating Ethereum Account](#create-ethereum-account).</span></span>

<span data-ttu-id="32a8d-485">If a custom genesis block is provided without an account or you do not have access to any pre-allocated accounts, you will need to wait until your mining nodes begin to mine to generate Ether into your account (coin base).</span><span class="sxs-lookup"><span data-stu-id="32a8d-485">If a custom genesis block is provided without an account or you do not have access to any pre-allocated accounts, you will need to wait until your mining nodes begin to mine to generate Ether into your account (coin base).</span></span> <span data-ttu-id="32a8d-486">How quickly the funds are generated depends on the difficulty level you specify in the custom genesis block.</span><span class="sxs-lookup"><span data-stu-id="32a8d-486">How quickly the funds are generated depends on the difficulty level you specify in the custom genesis block.</span></span>

## <a name="create-ethereum-account"></a><span data-ttu-id="32a8d-487">Create Ethereum account</span><span class="sxs-lookup"><span data-stu-id="32a8d-487">Create Ethereum account</span></span>

<span data-ttu-id="32a8d-488">To create an additional account, you can use a variety of solutions.</span><span class="sxs-lookup"><span data-stu-id="32a8d-488">To create an additional account, you can use a variety of solutions.</span></span> <span data-ttu-id="32a8d-489">One such solution is MetaMask, a Chrome extension that provides an identity vault and connection to an Ethereum network, public, test, or custom.</span><span class="sxs-lookup"><span data-stu-id="32a8d-489">One such solution is MetaMask, a Chrome extension that provides an identity vault and connection to an Ethereum network, public, test, or custom.</span></span> <span data-ttu-id="32a8d-490">MetaMask formulates a transaction to register the account in the network.</span><span class="sxs-lookup"><span data-stu-id="32a8d-490">MetaMask formulates a transaction to register the account in the network.</span></span>

<span data-ttu-id="32a8d-491">This transaction, like any other transaction, will go to one of the transaction nodes, and eventually be mined into a block as illustrated below.</span><span class="sxs-lookup"><span data-stu-id="32a8d-491">This transaction, like any other transaction, will go to one of the transaction nodes, and eventually be mined into a block as illustrated below.</span></span>

![Transaction node](./media/ethereum-deployment-guide/transaction-node.png)

<span data-ttu-id="32a8d-493">To install the extension in Chrome, go to Customize and control Google Chrome (overflow button) > More Tools > Extensions > Get More Extensions, and search for MetaMask.</span><span class="sxs-lookup"><span data-stu-id="32a8d-493">To install the extension in Chrome, go to Customize and control Google Chrome (overflow button) > More Tools > Extensions > Get More Extensions, and search for MetaMask.</span></span>

![MetaMask extension](./media/ethereum-deployment-guide/metamask-extension.png)

<span data-ttu-id="32a8d-495">Once installed, open MetaMask and create a new vault.</span><span class="sxs-lookup"><span data-stu-id="32a8d-495">Once installed, open MetaMask and create a new vault.</span></span> <span data-ttu-id="32a8d-496">By default, the vault will be connected to the Morden Test Network.</span><span class="sxs-lookup"><span data-stu-id="32a8d-496">By default, the vault will be connected to the Morden Test Network.</span></span> <span data-ttu-id="32a8d-497">You will need to change this to connect to the deployed private consortium network, specifically to the load balancer in front of the transaction nodes.</span><span class="sxs-lookup"><span data-stu-id="32a8d-497">You will need to change this to connect to the deployed private consortium network, specifically to the load balancer in front of the transaction nodes.</span></span> <span data-ttu-id="32a8d-498">From the template output, retrieve the exposed Ethereum RPC endpoint at port 8545, named as `ETHEREUM-RPC-ENDPOINT`, and enter it in custom RPC as shown below.</span><span class="sxs-lookup"><span data-stu-id="32a8d-498">From the template output, retrieve the exposed Ethereum RPC endpoint at port 8545, named as `ETHEREUM-RPC-ENDPOINT`, and enter it in custom RPC as shown below.</span></span>

![MetaMask settings](./media/ethereum-deployment-guide/metamask-settings.png)

<span data-ttu-id="32a8d-500">By creating the vault, you create a wallet containing an account.</span><span class="sxs-lookup"><span data-stu-id="32a8d-500">By creating the vault, you create a wallet containing an account.</span></span> <span data-ttu-id="32a8d-501">To create additional accounts, select **Switch Accounts** and then the **+** button.</span><span class="sxs-lookup"><span data-stu-id="32a8d-501">To create additional accounts, select **Switch Accounts** and then the **+** button.</span></span>

![MetaMask create account](./media/ethereum-deployment-guide/metamask-create-account.png)

### <a name="initiate-initial-ether-allocation"></a><span data-ttu-id="32a8d-503">Initiate initial Ether allocation</span><span class="sxs-lookup"><span data-stu-id="32a8d-503">Initiate initial Ether allocation</span></span>

<span data-ttu-id="32a8d-504">Through the administrator page, you can formulate a transaction to transfer Ether from the pre-allocated account to another Ethereum account.</span><span class="sxs-lookup"><span data-stu-id="32a8d-504">Through the administrator page, you can formulate a transaction to transfer Ether from the pre-allocated account to another Ethereum account.</span></span> <span data-ttu-id="32a8d-505">This Ether transfer is a transaction that is sent to the transaction node and mined into a block as illustrated below.</span><span class="sxs-lookup"><span data-stu-id="32a8d-505">This Ether transfer is a transaction that is sent to the transaction node and mined into a block as illustrated below.</span></span>

![Transaction node](./media/ethereum-deployment-guide/transaction-node-mined.png)

<span data-ttu-id="32a8d-507">Via the clipboard icon in the MetaMask wallet, copy the address of the Ethereum account to which you want to transfer ether and go back to the administrator page.</span><span class="sxs-lookup"><span data-stu-id="32a8d-507">Via the clipboard icon in the MetaMask wallet, copy the address of the Ethereum account to which you want to transfer ether and go back to the administrator page.</span></span> <span data-ttu-id="32a8d-508">Paste the copied account into the input field to transfer 1000 ether from the pre-allocated Ethereum account to your newly created account.</span><span class="sxs-lookup"><span data-stu-id="32a8d-508">Paste the copied account into the input field to transfer 1000 ether from the pre-allocated Ethereum account to your newly created account.</span></span> <span data-ttu-id="32a8d-509">Click **Submit** and wait for the transaction to be mined into a block.</span><span class="sxs-lookup"><span data-stu-id="32a8d-509">Click **Submit** and wait for the transaction to be mined into a block.</span></span>

![Node status](./media/ethereum-deployment-guide/node-status2.png)

<span data-ttu-id="32a8d-511">Once the transaction is committed into a mined block, the account balance in MetaMask for your account will reflect the transfer of 1000 Ether.</span><span class="sxs-lookup"><span data-stu-id="32a8d-511">Once the transaction is committed into a mined block, the account balance in MetaMask for your account will reflect the transfer of 1000 Ether.</span></span>

![MetaMask transfer](./media/ethereum-deployment-guide/metamask-transfer.png)

### <a name="transfer-of-ether-between-accounts"></a><span data-ttu-id="32a8d-513">Transfer of Ether between accounts</span><span class="sxs-lookup"><span data-stu-id="32a8d-513">Transfer of Ether between accounts</span></span>

<span data-ttu-id="32a8d-514">At this point, you are ready to execute transactions within your private consortium network.</span><span class="sxs-lookup"><span data-stu-id="32a8d-514">At this point, you are ready to execute transactions within your private consortium network.</span></span> <span data-ttu-id="32a8d-515">The simplest transaction is to transfer Ether from one account to another.</span><span class="sxs-lookup"><span data-stu-id="32a8d-515">The simplest transaction is to transfer Ether from one account to another.</span></span> <span data-ttu-id="32a8d-516">To formulate such a transaction, you can use MetaMask once again, transferring money from the first account used above to a second account.</span><span class="sxs-lookup"><span data-stu-id="32a8d-516">To formulate such a transaction, you can use MetaMask once again, transferring money from the first account used above to a second account.</span></span>

<span data-ttu-id="32a8d-517">From **Wallet 1** in MetaMask, click on send.</span><span class="sxs-lookup"><span data-stu-id="32a8d-517">From **Wallet 1** in MetaMask, click on send.</span></span> <span data-ttu-id="32a8d-518">Copy the address of the second wallet created into **Recipient Address** input field and amount of Ether to transfer in the **Amount** input field.</span><span class="sxs-lookup"><span data-stu-id="32a8d-518">Copy the address of the second wallet created into **Recipient Address** input field and amount of Ether to transfer in the **Amount** input field.</span></span> <span data-ttu-id="32a8d-519">Click **Send** and accept the transaction.</span><span class="sxs-lookup"><span data-stu-id="32a8d-519">Click **Send** and accept the transaction.</span></span>

![MetaMask send transaction](./media/ethereum-deployment-guide/metamask-send.png)

<span data-ttu-id="32a8d-521">Once again, when the transaction is mined and committed into a block, the account balances are reflected accordingly.</span><span class="sxs-lookup"><span data-stu-id="32a8d-521">Once again, when the transaction is mined and committed into a block, the account balances are reflected accordingly.</span></span> <span data-ttu-id="32a8d-522">Note, **Wallet 1**'s balance is deducted more than 15 Ether, since you had to pay a mining fee to process the transaction.</span><span class="sxs-lookup"><span data-stu-id="32a8d-522">Note, **Wallet 1**'s balance is deducted more than 15 Ether, since you had to pay a mining fee to process the transaction.</span></span>

![Wallet 1](./media/ethereum-deployment-guide/wallet1.png)

![Wallet 2](./media/ethereum-deployment-guide/wallet2.png)

## <a name="next-steps"></a><span data-ttu-id="32a8d-525">Next steps</span><span class="sxs-lookup"><span data-stu-id="32a8d-525">Next steps</span></span>

<span data-ttu-id="32a8d-526">You are now ready to focus on application and smart contract development against your private consortium blockchain network.</span><span class="sxs-lookup"><span data-stu-id="32a8d-526">You are now ready to focus on application and smart contract development against your private consortium blockchain network.</span></span>
