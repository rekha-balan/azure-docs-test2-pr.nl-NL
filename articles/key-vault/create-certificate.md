---
title: Certificate creation methods
description: Ways to create a certificate in Key Vault.
services: key-vault
documentationcenter: ''
author: bryanla
manager: mbaldwin
tags: azure-resource-manager
ms.assetid: e17b4c9b-4ff3-472f-8c9d-d130eb443968
ms.service: key-vault
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: conceptual
ms.date: 05/09/2018
ms.author: bryanla
ms.openlocfilehash: d2f9327841e0c6193a89df6459b4d8fffb14c05e
ms.sourcegitcommit: d1451406a010fd3aa854dc8e5b77dc5537d8050e
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 09/13/2018
ms.locfileid: "44857261"
---
# <a name="certificate-creation-methods"></a><span data-ttu-id="991d0-103">Certificate creation methods</span><span class="sxs-lookup"><span data-stu-id="991d0-103">Certificate creation methods</span></span>

 <span data-ttu-id="991d0-104">A Key Vault (KV) certificate can be either created or imported into a key vault.</span><span class="sxs-lookup"><span data-stu-id="991d0-104">A Key Vault (KV) certificate can be either created or imported into a key vault.</span></span> <span data-ttu-id="991d0-105">When a KV certificate is created the private key is created inside the key vault and never exposed to certificate owner.</span><span class="sxs-lookup"><span data-stu-id="991d0-105">When a KV certificate is created the private key is created inside the key vault and never exposed to certificate owner.</span></span> <span data-ttu-id="991d0-106">The following are ways to create a certificate in Key Vault:</span><span class="sxs-lookup"><span data-stu-id="991d0-106">The following are ways to create a certificate in Key Vault:</span></span>  

-   <span data-ttu-id="991d0-107">**Create a self-signed certificate:** This will create a public-private key pair and associate it with a certificate.</span><span class="sxs-lookup"><span data-stu-id="991d0-107">**Create a self-signed certificate:** This will create a public-private key pair and associate it with a certificate.</span></span> <span data-ttu-id="991d0-108">The certificate will be signed by its own key.</span><span class="sxs-lookup"><span data-stu-id="991d0-108">The certificate will be signed by its own key.</span></span>  

-    <span data-ttu-id="991d0-109">**Create a new certificate manually:** This will create a public-private key pair and generate an X.509 certificate signing request.</span><span class="sxs-lookup"><span data-stu-id="991d0-109">**Create a new certificate manually:** This will create a public-private key pair and generate an X.509 certificate signing request.</span></span> <span data-ttu-id="991d0-110">The signing request can be signed by your registration authority or certification authority.</span><span class="sxs-lookup"><span data-stu-id="991d0-110">The signing request can be signed by your registration authority or certification authority.</span></span> <span data-ttu-id="991d0-111">The signed x509 certificate can be merged with the pending key pair to complete the KV certificate in Key Vault.</span><span class="sxs-lookup"><span data-stu-id="991d0-111">The signed x509 certificate can be merged with the pending key pair to complete the KV certificate in Key Vault.</span></span> <span data-ttu-id="991d0-112">Although this method requires more steps, it does provide you with greater security because the private key is created in and restricted to Key Vault.</span><span class="sxs-lookup"><span data-stu-id="991d0-112">Although this method requires more steps, it does provide you with greater security because the private key is created in and restricted to Key Vault.</span></span> <span data-ttu-id="991d0-113">This is explained in the diagram below.</span><span class="sxs-lookup"><span data-stu-id="991d0-113">This is explained in the diagram below.</span></span>  

![Create a certificate with your own certificate authority](media/certificate-authority-1.png)  

<span data-ttu-id="991d0-115">The following descriptions correspond to the green lettered steps in the preceding diagram.</span><span class="sxs-lookup"><span data-stu-id="991d0-115">The following descriptions correspond to the green lettered steps in the preceding diagram.</span></span>

1. <span data-ttu-id="991d0-116">In the diagram above, your application is creating a certificate which internally begins by creating a key in your key vault.</span><span class="sxs-lookup"><span data-stu-id="991d0-116">In the diagram above, your application is creating a certificate which internally begins by creating a key in your key vault.</span></span>
2. <span data-ttu-id="991d0-117">Key Vault returns to your application a Certificate Signing Request (CSR)</span><span class="sxs-lookup"><span data-stu-id="991d0-117">Key Vault returns to your application a Certificate Signing Request (CSR)</span></span>
3. <span data-ttu-id="991d0-118">Your application passes the CSR to your chosen CA.</span><span class="sxs-lookup"><span data-stu-id="991d0-118">Your application passes the CSR to your chosen CA.</span></span>
4. <span data-ttu-id="991d0-119">Your chosen CA responds with a an X509 Certificate.</span><span class="sxs-lookup"><span data-stu-id="991d0-119">Your chosen CA responds with a an X509 Certificate.</span></span>
5. <span data-ttu-id="991d0-120">Your application completes the new certificate creation with a merger of the X509 Certificate from your CA.</span><span class="sxs-lookup"><span data-stu-id="991d0-120">Your application completes the new certificate creation with a merger of the X509 Certificate from your CA.</span></span>

-   <span data-ttu-id="991d0-121">**Create a certificate with a known issuer provider:** This method requires you to do a one-time task of creating an issuer object.</span><span class="sxs-lookup"><span data-stu-id="991d0-121">**Create a certificate with a known issuer provider:** This method requires you to do a one-time task of creating an issuer object.</span></span> <span data-ttu-id="991d0-122">Once an issuer object is created in you key vault, its name can be referenced in the policy of the KV certificate.</span><span class="sxs-lookup"><span data-stu-id="991d0-122">Once an issuer object is created in you key vault, its name can be referenced in the policy of the KV certificate.</span></span> <span data-ttu-id="991d0-123">A request to create such a KV certificate will create a key pair in the vault and communicate with the issuer provider service using the information in the referenced issuer object to get an x509 certificate.</span><span class="sxs-lookup"><span data-stu-id="991d0-123">A request to create such a KV certificate will create a key pair in the vault and communicate with the issuer provider service using the information in the referenced issuer object to get an x509 certificate.</span></span> <span data-ttu-id="991d0-124">The x509 certificate is retrieved from the issuer service and is merged with the key pair to complete the KV certificate creation.</span><span class="sxs-lookup"><span data-stu-id="991d0-124">The x509 certificate is retrieved from the issuer service and is merged with the key pair to complete the KV certificate creation.</span></span>  

![Create a certificate with a Key Vault partnered certificate authority](media/certificate-authority-2.png)  

<span data-ttu-id="991d0-126">The following descriptions correspond to the green lettered steps in the preceding diagram.</span><span class="sxs-lookup"><span data-stu-id="991d0-126">The following descriptions correspond to the green lettered steps in the preceding diagram.</span></span>

1. <span data-ttu-id="991d0-127">In the diagram above, your application is creating a certificate which internally begins by creating a key in your key vault.</span><span class="sxs-lookup"><span data-stu-id="991d0-127">In the diagram above, your application is creating a certificate which internally begins by creating a key in your key vault.</span></span>
2. <span data-ttu-id="991d0-128">Key Vault sends and SSL Certificate Request to the CA.</span><span class="sxs-lookup"><span data-stu-id="991d0-128">Key Vault sends and SSL Certificate Request to the CA.</span></span>
3. <span data-ttu-id="991d0-129">Your application polls, in a loop and wait process, for your Key Vault for certificate completion.</span><span class="sxs-lookup"><span data-stu-id="991d0-129">Your application polls, in a loop and wait process, for your Key Vault for certificate completion.</span></span> <span data-ttu-id="991d0-130">The certificate creation is complete when Key Vault receives the CA’s response with x509 certificate.</span><span class="sxs-lookup"><span data-stu-id="991d0-130">The certificate creation is complete when Key Vault receives the CA’s response with x509 certificate.</span></span>
4. <span data-ttu-id="991d0-131">The CA responds to Key Vault's SSL Certificate Request with an X509 SSL Certificate.</span><span class="sxs-lookup"><span data-stu-id="991d0-131">The CA responds to Key Vault's SSL Certificate Request with an X509 SSL Certificate.</span></span>
5. <span data-ttu-id="991d0-132">Your new certificate creation completes with the merger of the X509 Certificate for the CA.</span><span class="sxs-lookup"><span data-stu-id="991d0-132">Your new certificate creation completes with the merger of the X509 Certificate for the CA.</span></span>

## <a name="asynchronous-process"></a><span data-ttu-id="991d0-133">Asynchronous process</span><span class="sxs-lookup"><span data-stu-id="991d0-133">Asynchronous process</span></span>
<span data-ttu-id="991d0-134">KV certificate creation is an asynchronous process.</span><span class="sxs-lookup"><span data-stu-id="991d0-134">KV certificate creation is an asynchronous process.</span></span> <span data-ttu-id="991d0-135">This operation will create a KV certificate request and return an http status code of 202 (Accepted).</span><span class="sxs-lookup"><span data-stu-id="991d0-135">This operation will create a KV certificate request and return an http status code of 202 (Accepted).</span></span> <span data-ttu-id="991d0-136">The status of the request can be tracked by polling the pending object created by this operation.</span><span class="sxs-lookup"><span data-stu-id="991d0-136">The status of the request can be tracked by polling the pending object created by this operation.</span></span> <span data-ttu-id="991d0-137">The full URI of the pending object is returned in the LOCATION header.</span><span class="sxs-lookup"><span data-stu-id="991d0-137">The full URI of the pending object is returned in the LOCATION header.</span></span>  

<span data-ttu-id="991d0-138">When a request to create a KV certificate completes, the status of the pending object will change to “completed” from “inprogress”, and a new version of the KV certificate will be created.</span><span class="sxs-lookup"><span data-stu-id="991d0-138">When a request to create a KV certificate completes, the status of the pending object will change to “completed” from “inprogress”, and a new version of the KV certificate will be created.</span></span> <span data-ttu-id="991d0-139">This will become the current version.</span><span class="sxs-lookup"><span data-stu-id="991d0-139">This will become the current version.</span></span>  

## <a name="first-creation"></a><span data-ttu-id="991d0-140">First creation</span><span class="sxs-lookup"><span data-stu-id="991d0-140">First creation</span></span>
 <span data-ttu-id="991d0-141">When a KV certificate is created for the first time, an addressable key and secret is also created with the same name as that of the certificate.</span><span class="sxs-lookup"><span data-stu-id="991d0-141">When a KV certificate is created for the first time, an addressable key and secret is also created with the same name as that of the certificate.</span></span> <span data-ttu-id="991d0-142">If the name is already in use, then the operation will fail with an http status code of 409 (conflict).</span><span class="sxs-lookup"><span data-stu-id="991d0-142">If the name is already in use, then the operation will fail with an http status code of 409 (conflict).</span></span>
<span data-ttu-id="991d0-143">The addressable key and secret get their attributes from the KV certificate attributes.</span><span class="sxs-lookup"><span data-stu-id="991d0-143">The addressable key and secret get their attributes from the KV certificate attributes.</span></span> <span data-ttu-id="991d0-144">The addressable key and secret created this way are marked as managed keys and secrets, whose lifetime is managed by Key Vault.</span><span class="sxs-lookup"><span data-stu-id="991d0-144">The addressable key and secret created this way are marked as managed keys and secrets, whose lifetime is managed by Key Vault.</span></span> <span data-ttu-id="991d0-145">Managed keys and secrets are read-only.</span><span class="sxs-lookup"><span data-stu-id="991d0-145">Managed keys and secrets are read-only.</span></span> <span data-ttu-id="991d0-146">Note: If a KV certificate expires or is disabled, the corresponding key and secret will become inoperable.</span><span class="sxs-lookup"><span data-stu-id="991d0-146">Note: If a KV certificate expires or is disabled, the corresponding key and secret will become inoperable.</span></span>  

 <span data-ttu-id="991d0-147">If this is the first operation to create a KV certificate then a policy is required.</span><span class="sxs-lookup"><span data-stu-id="991d0-147">If this is the first operation to create a KV certificate then a policy is required.</span></span>  <span data-ttu-id="991d0-148">A policy can also be supplied with successive create operations to replace the policy resource.</span><span class="sxs-lookup"><span data-stu-id="991d0-148">A policy can also be supplied with successive create operations to replace the policy resource.</span></span> <span data-ttu-id="991d0-149">If a policy is not supplied, then the policy resource on the service is used to create a next version of KV certificate.</span><span class="sxs-lookup"><span data-stu-id="991d0-149">If a policy is not supplied, then the policy resource on the service is used to create a next version of KV certificate.</span></span> <span data-ttu-id="991d0-150">Note that while a request to create a next version is in progress, the current KV certificate, and corresponding addressable key and secret, remain unchanged.</span><span class="sxs-lookup"><span data-stu-id="991d0-150">Note that while a request to create a next version is in progress, the current KV certificate, and corresponding addressable key and secret, remain unchanged.</span></span>  

## <a name="self-issued-certificate"></a><span data-ttu-id="991d0-151">Self-issued certificate</span><span class="sxs-lookup"><span data-stu-id="991d0-151">Self-issued certificate</span></span>
 <span data-ttu-id="991d0-152">To create a self-issued certificate, set the issuer name as "Self" in the certificate policy as shown in following snippet from certificate policy.</span><span class="sxs-lookup"><span data-stu-id="991d0-152">To create a self-issued certificate, set the issuer name as "Self" in the certificate policy as shown in following snippet from certificate policy.</span></span>  

```  
"issuer": {  
       "name": "Self"  
    }  

```  

 <span data-ttu-id="991d0-153">If the issuer name is not specified, then the issuer name is set to "Unknown".</span><span class="sxs-lookup"><span data-stu-id="991d0-153">If the issuer name is not specified, then the issuer name is set to "Unknown".</span></span> <span data-ttu-id="991d0-154">When issuer is "Unknown", the certificate owner will have to manually get a x509 certificate from the issuer of his/her choice, then merge the public x509 certificate with the key vault certificate pending object to complete the certificate creation.</span><span class="sxs-lookup"><span data-stu-id="991d0-154">When issuer is "Unknown", the certificate owner will have to manually get a x509 certificate from the issuer of his/her choice, then merge the public x509 certificate with the key vault certificate pending object to complete the certificate creation.</span></span>

```  
"issuer": {  
       "name": "Unknown"  
    }  

```  

## <a name="partnered-ca-providers"></a><span data-ttu-id="991d0-155">Partnered CA Providers</span><span class="sxs-lookup"><span data-stu-id="991d0-155">Partnered CA Providers</span></span>
<span data-ttu-id="991d0-156">Certificate creation can be completed manually or using a “Self” issuer.</span><span class="sxs-lookup"><span data-stu-id="991d0-156">Certificate creation can be completed manually or using a “Self” issuer.</span></span> <span data-ttu-id="991d0-157">Key Vault also partners with certain issuer providers to simplify the creation of certificates.</span><span class="sxs-lookup"><span data-stu-id="991d0-157">Key Vault also partners with certain issuer providers to simplify the creation of certificates.</span></span> <span data-ttu-id="991d0-158">The following types of certificates can be ordered for key vault with these partner issuer providers.</span><span class="sxs-lookup"><span data-stu-id="991d0-158">The following types of certificates can be ordered for key vault with these partner issuer providers.</span></span>  

|<span data-ttu-id="991d0-159">Provider</span><span class="sxs-lookup"><span data-stu-id="991d0-159">Provider</span></span>|<span data-ttu-id="991d0-160">Certificate type</span><span class="sxs-lookup"><span data-stu-id="991d0-160">Certificate type</span></span>|  
|--------------|----------------------|  
|<span data-ttu-id="991d0-161">DigiCert</span><span class="sxs-lookup"><span data-stu-id="991d0-161">DigiCert</span></span>|<span data-ttu-id="991d0-162">Key Vault offers OV or EV SSL certificates with DigiCert</span><span class="sxs-lookup"><span data-stu-id="991d0-162">Key Vault offers OV or EV SSL certificates with DigiCert</span></span>|
|<span data-ttu-id="991d0-163">GlobalCert</span><span class="sxs-lookup"><span data-stu-id="991d0-163">GlobalCert</span></span>|<span data-ttu-id="991d0-164">Key Vault offers OV or EV SSL certificates with GlobalSign</span><span class="sxs-lookup"><span data-stu-id="991d0-164">Key Vault offers OV or EV SSL certificates with GlobalSign</span></span>|

 <span data-ttu-id="991d0-165">A certificate issuer is an entity represented in Azure Key Vault (KV) as a CertificateIssuer resource.</span><span class="sxs-lookup"><span data-stu-id="991d0-165">A certificate issuer is an entity represented in Azure Key Vault (KV) as a CertificateIssuer resource.</span></span> <span data-ttu-id="991d0-166">It is used to provide information about the source of a KV certificate; issuer name, provider, credentials, and other administrative details.</span><span class="sxs-lookup"><span data-stu-id="991d0-166">It is used to provide information about the source of a KV certificate; issuer name, provider, credentials, and other administrative details.</span></span>

<span data-ttu-id="991d0-167">Note that when an order is placed with the issuer provider, it may honor or override the x509 certificate extensions and certificate validity period based on the type of certificate.</span><span class="sxs-lookup"><span data-stu-id="991d0-167">Note that when an order is placed with the issuer provider, it may honor or override the x509 certificate extensions and certificate validity period based on the type of certificate.</span></span>  

 <span data-ttu-id="991d0-168">Authorization: Requires the certificates/create permission.</span><span class="sxs-lookup"><span data-stu-id="991d0-168">Authorization: Requires the certificates/create permission.</span></span>

 ## <a name="see-also"></a><span data-ttu-id="991d0-169">See Also</span><span class="sxs-lookup"><span data-stu-id="991d0-169">See Also</span></span>
 - [<span data-ttu-id="991d0-170">About keys, secrets and certificates</span><span class="sxs-lookup"><span data-stu-id="991d0-170">About keys, secrets and certificates</span></span>](about-keys-secrets-and-certificates.md)
 - [<span data-ttu-id="991d0-171">Monitor and manage certificate creation</span><span class="sxs-lookup"><span data-stu-id="991d0-171">Monitor and manage certificate creation</span></span>](create-certificate-scenarios.md)
