---
title: Predictive maintenance for real-world scenarios | Microsoft Docs
description: Predictive maintenance for real-world scenarios by using PySpark
services: machine-learning
author: ehrlinger
ms.author: jehrling
manager: jhubbard
ms.reviewer: garyericson, jasonwhowell, mldocs
ms.service: machine-learning
ms.component: core
ms.workload: data-services
ms.topic: article
ms.custom: mvc
ms.date: 10/05/2017
ms.openlocfilehash: a5531ae256a263f1c34496819ac435ce67156b49
ms.sourcegitcommit: d1451406a010fd3aa854dc8e5b77dc5537d8050e
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 09/13/2018
ms.locfileid: "44870553"
---
# <a name="predictive-maintenance-for-real-world-scenarios"></a><span data-ttu-id="26e4e-103">Predictive maintenance for real-world scenarios</span><span class="sxs-lookup"><span data-stu-id="26e4e-103">Predictive maintenance for real-world scenarios</span></span>

<span data-ttu-id="26e4e-104">The impact of unscheduled equipment downtime can be detrimental for any business.</span><span class="sxs-lookup"><span data-stu-id="26e4e-104">The impact of unscheduled equipment downtime can be detrimental for any business.</span></span> <span data-ttu-id="26e4e-105">It's critical to keep field equipment running to maximize utilization and performance, and to minimize costly, unscheduled downtime.</span><span class="sxs-lookup"><span data-stu-id="26e4e-105">It's critical to keep field equipment running to maximize utilization and performance, and to minimize costly, unscheduled downtime.</span></span> <span data-ttu-id="26e4e-106">Early identification of issues can help allocate limited maintenance resources in a cost-effective way and enhance quality and supply chain processes.</span><span class="sxs-lookup"><span data-stu-id="26e4e-106">Early identification of issues can help allocate limited maintenance resources in a cost-effective way and enhance quality and supply chain processes.</span></span> 

<span data-ttu-id="26e4e-107">This scenario explores a relatively [large-scale simulated data set](https://github.com/Microsoft/SQL-Server-R-Services-Samples/tree/master/PredictiveMaintanenceModelingGuide/Data) to walk through a predictive maintenance data science project from data ingestion, feature engineering, model building, and model operationalization and deployment.</span><span class="sxs-lookup"><span data-stu-id="26e4e-107">This scenario explores a relatively [large-scale simulated data set](https://github.com/Microsoft/SQL-Server-R-Services-Samples/tree/master/PredictiveMaintanenceModelingGuide/Data) to walk through a predictive maintenance data science project from data ingestion, feature engineering, model building, and model operationalization and deployment.</span></span> <span data-ttu-id="26e4e-108">The code for the entire process is written in the Jupyter Notebook by using PySpark in Azure Machine Learning Workbench.</span><span class="sxs-lookup"><span data-stu-id="26e4e-108">The code for the entire process is written in the Jupyter Notebook by using PySpark in Azure Machine Learning Workbench.</span></span> <span data-ttu-id="26e4e-109">The final model is deployed by using Azure Machine Learning Model Management to make real-time equipment failure predictions.</span><span class="sxs-lookup"><span data-stu-id="26e4e-109">The final model is deployed by using Azure Machine Learning Model Management to make real-time equipment failure predictions.</span></span>   

### <a name="cortana-intelligence-gallery-github-repository"></a><span data-ttu-id="26e4e-110">Cortana Intelligence Gallery GitHub repository</span><span class="sxs-lookup"><span data-stu-id="26e4e-110">Cortana Intelligence Gallery GitHub repository</span></span>

<span data-ttu-id="26e4e-111">The Cortana Intelligence Gallery for the PM tutorial is a public GitHub repository ([https://github.com/Azure/MachineLearningSamples-PredictiveMaintenance](https://github.com/Azure/MachineLearningSamples-PredictiveMaintenance)) where you can report issues and make contributions.</span><span class="sxs-lookup"><span data-stu-id="26e4e-111">The Cortana Intelligence Gallery for the PM tutorial is a public GitHub repository ([https://github.com/Azure/MachineLearningSamples-PredictiveMaintenance](https://github.com/Azure/MachineLearningSamples-PredictiveMaintenance)) where you can report issues and make contributions.</span></span>


## <a name="use-case-overview"></a><span data-ttu-id="26e4e-112">Use case overview</span><span class="sxs-lookup"><span data-stu-id="26e4e-112">Use case overview</span></span>

<span data-ttu-id="26e4e-113">A major problem that's faced by businesses in asset-heavy industries is the significant costs that are associated with delays due to mechanical problems.</span><span class="sxs-lookup"><span data-stu-id="26e4e-113">A major problem that's faced by businesses in asset-heavy industries is the significant costs that are associated with delays due to mechanical problems.</span></span> <span data-ttu-id="26e4e-114">Most businesses are interested in predicting when these problems might arise to proactively prevent them before they occur.</span><span class="sxs-lookup"><span data-stu-id="26e4e-114">Most businesses are interested in predicting when these problems might arise to proactively prevent them before they occur.</span></span> <span data-ttu-id="26e4e-115">The goal is to reduce the costs by reducing downtime and possibly increase safety.</span><span class="sxs-lookup"><span data-stu-id="26e4e-115">The goal is to reduce the costs by reducing downtime and possibly increase safety.</span></span> 

<span data-ttu-id="26e4e-116">This scenario takes ideas from the [Predictive maintenance playbook](https://docs.microsoft.com/azure/machine-learning/team-data-science-process/cortana-analytics-playbook-predictive-maintenance) to demonstrate how to build a predictive model for a simulated data set.</span><span class="sxs-lookup"><span data-stu-id="26e4e-116">This scenario takes ideas from the [Predictive maintenance playbook](https://docs.microsoft.com/azure/machine-learning/team-data-science-process/cortana-analytics-playbook-predictive-maintenance) to demonstrate how to build a predictive model for a simulated data set.</span></span> <span data-ttu-id="26e4e-117">The example data is derived from common elements that are observed in many predictive maintenance use cases.</span><span class="sxs-lookup"><span data-stu-id="26e4e-117">The example data is derived from common elements that are observed in many predictive maintenance use cases.</span></span>

<span data-ttu-id="26e4e-118">The business problem for this simulated data is to predict issues that are caused by component failures.</span><span class="sxs-lookup"><span data-stu-id="26e4e-118">The business problem for this simulated data is to predict issues that are caused by component failures.</span></span> <span data-ttu-id="26e4e-119">The business question is "*What's the probability that a machine goes down due to failure of a component?*"</span><span class="sxs-lookup"><span data-stu-id="26e4e-119">The business question is "*What's the probability that a machine goes down due to failure of a component?*"</span></span> <span data-ttu-id="26e4e-120">This problem is formatted as a multi-class classification problem (multiple components per machine).</span><span class="sxs-lookup"><span data-stu-id="26e4e-120">This problem is formatted as a multi-class classification problem (multiple components per machine).</span></span> <span data-ttu-id="26e4e-121">A machine learning algorithm is used to create the predictive model.</span><span class="sxs-lookup"><span data-stu-id="26e4e-121">A machine learning algorithm is used to create the predictive model.</span></span> <span data-ttu-id="26e4e-122">The model is trained on historical data that's collected from machines.</span><span class="sxs-lookup"><span data-stu-id="26e4e-122">The model is trained on historical data that's collected from machines.</span></span> <span data-ttu-id="26e4e-123">In this scenario, the user goes through various steps to implement the model in the Machine Learning Workbench environment.</span><span class="sxs-lookup"><span data-stu-id="26e4e-123">In this scenario, the user goes through various steps to implement the model in the Machine Learning Workbench environment.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="26e4e-124">Prerequisites</span><span class="sxs-lookup"><span data-stu-id="26e4e-124">Prerequisites</span></span>

* <span data-ttu-id="26e4e-125">An [Azure account](https://azure.microsoft.com/free/) (free trials are available).</span><span class="sxs-lookup"><span data-stu-id="26e4e-125">An [Azure account](https://azure.microsoft.com/free/) (free trials are available).</span></span>
* <span data-ttu-id="26e4e-126">An installed copy of [Azure Machine Learning Workbench](../service/overview-what-is-azure-ml.md).</span><span class="sxs-lookup"><span data-stu-id="26e4e-126">An installed copy of [Azure Machine Learning Workbench](../service/overview-what-is-azure-ml.md).</span></span> <span data-ttu-id="26e4e-127">Follow the [Quickstart installation guide](../service/quickstart-installation.md) to install the program and create a workspace.</span><span class="sxs-lookup"><span data-stu-id="26e4e-127">Follow the [Quickstart installation guide](../service/quickstart-installation.md) to install the program and create a workspace.</span></span>
* <span data-ttu-id="26e4e-128">Azure Machine Learning Operationalization requires a local deployment environment and an [Azure Machine Learning Model Management account](model-management-overview.md).</span><span class="sxs-lookup"><span data-stu-id="26e4e-128">Azure Machine Learning Operationalization requires a local deployment environment and an [Azure Machine Learning Model Management account](model-management-overview.md).</span></span>

<span data-ttu-id="26e4e-129">This example runs on any Machine Learning Workbench compute context.</span><span class="sxs-lookup"><span data-stu-id="26e4e-129">This example runs on any Machine Learning Workbench compute context.</span></span> <span data-ttu-id="26e4e-130">However, it's recommended to run the example with at least 16 GB of memory.</span><span class="sxs-lookup"><span data-stu-id="26e4e-130">However, it's recommended to run the example with at least 16 GB of memory.</span></span> <span data-ttu-id="26e4e-131">This scenario was built and tested on a Windows 10 machine running a remote DS4_V2 standard [Data Science Virtual Machine (DSVM) for Linux (Ubuntu)](https://azuremarketplace.microsoft.com/en-us/marketplace/apps/microsoft-ads.linux-data-science-vm-ubuntu).</span><span class="sxs-lookup"><span data-stu-id="26e4e-131">This scenario was built and tested on a Windows 10 machine running a remote DS4_V2 standard [Data Science Virtual Machine (DSVM) for Linux (Ubuntu)](https://azuremarketplace.microsoft.com/en-us/marketplace/apps/microsoft-ads.linux-data-science-vm-ubuntu).</span></span>

<span data-ttu-id="26e4e-132">Model operationalization was done by using version 0.1.0a22 of the Azure Machine Learning CLI.</span><span class="sxs-lookup"><span data-stu-id="26e4e-132">Model operationalization was done by using version 0.1.0a22 of the Azure Machine Learning CLI.</span></span>

## <a name="create-a-new-workbench-project"></a><span data-ttu-id="26e4e-133">Create a new Workbench project</span><span class="sxs-lookup"><span data-stu-id="26e4e-133">Create a new Workbench project</span></span>

<span data-ttu-id="26e4e-134">Create a new project by using this example as a template:</span><span class="sxs-lookup"><span data-stu-id="26e4e-134">Create a new project by using this example as a template:</span></span>
1.  <span data-ttu-id="26e4e-135">Open Machine Learning Workbench.</span><span class="sxs-lookup"><span data-stu-id="26e4e-135">Open Machine Learning Workbench.</span></span>
2.  <span data-ttu-id="26e4e-136">On the **Projects** page, select **+**, and then select **New Project**.</span><span class="sxs-lookup"><span data-stu-id="26e4e-136">On the **Projects** page, select **+**, and then select **New Project**.</span></span>
3.  <span data-ttu-id="26e4e-137">In the **Create New Project** pane, fill in the information for your new project.</span><span class="sxs-lookup"><span data-stu-id="26e4e-137">In the **Create New Project** pane, fill in the information for your new project.</span></span>
4.  <span data-ttu-id="26e4e-138">In the **Search Project Templates** search box, type "Predictive Maintenance" and select the **Predictive Maintenance** template.</span><span class="sxs-lookup"><span data-stu-id="26e4e-138">In the **Search Project Templates** search box, type "Predictive Maintenance" and select the **Predictive Maintenance** template.</span></span>
5.  <span data-ttu-id="26e4e-139">Select **Create**.</span><span class="sxs-lookup"><span data-stu-id="26e4e-139">Select **Create**.</span></span>

## <a name="prepare-the-notebook-server-computation-target"></a><span data-ttu-id="26e4e-140">Prepare the notebook server computation target</span><span class="sxs-lookup"><span data-stu-id="26e4e-140">Prepare the notebook server computation target</span></span>

<span data-ttu-id="26e4e-141">To run on your local machine, from the Machine Learning Workbench **File** menu, select either **Open Command Prompt** or **Open PowerShell CLI**.</span><span class="sxs-lookup"><span data-stu-id="26e4e-141">To run on your local machine, from the Machine Learning Workbench **File** menu, select either **Open Command Prompt** or **Open PowerShell CLI**.</span></span> <span data-ttu-id="26e4e-142">The CLI interface allows you to access your Azure services by using the `az` commands.</span><span class="sxs-lookup"><span data-stu-id="26e4e-142">The CLI interface allows you to access your Azure services by using the `az` commands.</span></span> <span data-ttu-id="26e4e-143">First, log in to your Azure account with the command:</span><span class="sxs-lookup"><span data-stu-id="26e4e-143">First, log in to your Azure account with the command:</span></span>

```
az login
``` 

<span data-ttu-id="26e4e-144">This command provides an authentication key to use with the https:\\aka.ms\devicelogin URL.</span><span class="sxs-lookup"><span data-stu-id="26e4e-144">This command provides an authentication key to use with the https:\\aka.ms\devicelogin URL.</span></span> <span data-ttu-id="26e4e-145">The CLI waits until the device login operation returns and provides some connection information.</span><span class="sxs-lookup"><span data-stu-id="26e4e-145">The CLI waits until the device login operation returns and provides some connection information.</span></span> <span data-ttu-id="26e4e-146">Next, if you have a local [Docker](https://www.docker.com/get-docker) installation, prepare the local compute environment with the command:</span><span class="sxs-lookup"><span data-stu-id="26e4e-146">Next, if you have a local [Docker](https://www.docker.com/get-docker) installation, prepare the local compute environment with the command:</span></span>

```
az ml experiment prepare --target docker --run-configuration docker
```

<span data-ttu-id="26e4e-147">It's preferable to run on a [DSVM for Linux (Ubuntu)](https://azuremarketplace.microsoft.com/en-us/marketplace/apps/microsoft-ads.linux-data-science-vm-ubuntu) for memory and disk requirements.</span><span class="sxs-lookup"><span data-stu-id="26e4e-147">It's preferable to run on a [DSVM for Linux (Ubuntu)](https://azuremarketplace.microsoft.com/en-us/marketplace/apps/microsoft-ads.linux-data-science-vm-ubuntu) for memory and disk requirements.</span></span> <span data-ttu-id="26e4e-148">After the DSVM is configured, prepare the remote Docker environment with the following two commands:</span><span class="sxs-lookup"><span data-stu-id="26e4e-148">After the DSVM is configured, prepare the remote Docker environment with the following two commands:</span></span>

```
az ml computetarget attach remotedocker --name [Connection_Name] --address [VM_IP_Address] --username [VM_Username] --password [VM_UserPassword]
```

<span data-ttu-id="26e4e-149">After you're connected to the remote Docker container, prepare the DSVM Docker compute environment with the command:</span><span class="sxs-lookup"><span data-stu-id="26e4e-149">After you're connected to the remote Docker container, prepare the DSVM Docker compute environment with the command:</span></span> 

```
az ml experiment prepare --target [Connection_Name] --run-configuration [Connection_Name]
```

<span data-ttu-id="26e4e-150">With the Docker compute environment prepared, open the Jupyter notebook server from the Azure Machine Learning Workbench **Notebooks** tab, or start a browser-based server with the command:</span><span class="sxs-lookup"><span data-stu-id="26e4e-150">With the Docker compute environment prepared, open the Jupyter notebook server from the Azure Machine Learning Workbench **Notebooks** tab, or start a browser-based server with the command:</span></span> 

```
az ml notebook start
```

<span data-ttu-id="26e4e-151">The example notebooks are stored in the Code directory.</span><span class="sxs-lookup"><span data-stu-id="26e4e-151">The example notebooks are stored in the Code directory.</span></span> <span data-ttu-id="26e4e-152">The notebooks are set up to run sequentially, starting on the first (Code\1_data_ingestion.ipynb) notebook.</span><span class="sxs-lookup"><span data-stu-id="26e4e-152">The notebooks are set up to run sequentially, starting on the first (Code\1_data_ingestion.ipynb) notebook.</span></span> <span data-ttu-id="26e4e-153">When you open each notebook, you're prompted to select the compute kernel.</span><span class="sxs-lookup"><span data-stu-id="26e4e-153">When you open each notebook, you're prompted to select the compute kernel.</span></span> <span data-ttu-id="26e4e-154">Choose the [Project_Name]_Template [Connection_Name] kernel to execute on the previously configured DSVM.</span><span class="sxs-lookup"><span data-stu-id="26e4e-154">Choose the [Project_Name]_Template [Connection_Name] kernel to execute on the previously configured DSVM.</span></span>

## <a name="data-description"></a><span data-ttu-id="26e4e-155">Data description</span><span class="sxs-lookup"><span data-stu-id="26e4e-155">Data description</span></span>

<span data-ttu-id="26e4e-156">The [simulated data](https://github.com/Microsoft/SQL-Server-R-Services-Samples/tree/master/PredictiveMaintanenceModelingGuide/Data) consists of five comma-separated values (.csv) files.</span><span class="sxs-lookup"><span data-stu-id="26e4e-156">The [simulated data](https://github.com/Microsoft/SQL-Server-R-Services-Samples/tree/master/PredictiveMaintanenceModelingGuide/Data) consists of five comma-separated values (.csv) files.</span></span> <span data-ttu-id="26e4e-157">Use the following links to get detailed descriptions about the data sets.</span><span class="sxs-lookup"><span data-stu-id="26e4e-157">Use the following links to get detailed descriptions about the data sets.</span></span>

* <span data-ttu-id="26e4e-158">[Machines](https://pdmmodelingguide.blob.core.windows.net/pdmdata/machines.csv): Features that differentiate each machine, such as age and model.</span><span class="sxs-lookup"><span data-stu-id="26e4e-158">[Machines](https://pdmmodelingguide.blob.core.windows.net/pdmdata/machines.csv): Features that differentiate each machine, such as age and model.</span></span>
* <span data-ttu-id="26e4e-159">[Error](https://pdmmodelingguide.blob.core.windows.net/pdmdata/errors.csv): The error log contains non-breaking errors that are thrown while the machine is still operational.</span><span class="sxs-lookup"><span data-stu-id="26e4e-159">[Error](https://pdmmodelingguide.blob.core.windows.net/pdmdata/errors.csv): The error log contains non-breaking errors that are thrown while the machine is still operational.</span></span> <span data-ttu-id="26e4e-160">These errors are not considered failures, though they can be predictive of a future failure event.</span><span class="sxs-lookup"><span data-stu-id="26e4e-160">These errors are not considered failures, though they can be predictive of a future failure event.</span></span> <span data-ttu-id="26e4e-161">The date-time values for the errors are rounded to the closest hour since the telemetry data is collected at an hourly rate.</span><span class="sxs-lookup"><span data-stu-id="26e4e-161">The date-time values for the errors are rounded to the closest hour since the telemetry data is collected at an hourly rate.</span></span>
* <span data-ttu-id="26e4e-162">[Maintenance](https://pdmmodelingguide.blob.core.windows.net/pdmdata/maint.csv): The maintenance log contains both scheduled and unscheduled maintenance records.</span><span class="sxs-lookup"><span data-stu-id="26e4e-162">[Maintenance](https://pdmmodelingguide.blob.core.windows.net/pdmdata/maint.csv): The maintenance log contains both scheduled and unscheduled maintenance records.</span></span> <span data-ttu-id="26e4e-163">Scheduled maintenance corresponds with the regular inspection of components.</span><span class="sxs-lookup"><span data-stu-id="26e4e-163">Scheduled maintenance corresponds with the regular inspection of components.</span></span> <span data-ttu-id="26e4e-164">Unscheduled maintenance can arise from mechanical failure or other performance degradation.</span><span class="sxs-lookup"><span data-stu-id="26e4e-164">Unscheduled maintenance can arise from mechanical failure or other performance degradation.</span></span> <span data-ttu-id="26e4e-165">The date-time values for maintenance are rounded to the closest hour since the telemetry data is collected at an hourly rate.</span><span class="sxs-lookup"><span data-stu-id="26e4e-165">The date-time values for maintenance are rounded to the closest hour since the telemetry data is collected at an hourly rate.</span></span>
* <span data-ttu-id="26e4e-166">[Telemetry](https://pdmmodelingguide.blob.core.windows.net/pdmdata/telemetry.csv): The telemetry data consists of time series measurements from multiple sensors within each machine.</span><span class="sxs-lookup"><span data-stu-id="26e4e-166">[Telemetry](https://pdmmodelingguide.blob.core.windows.net/pdmdata/telemetry.csv): The telemetry data consists of time series measurements from multiple sensors within each machine.</span></span> <span data-ttu-id="26e4e-167">The data is logged by averaging sensor values over each one hour interval.</span><span class="sxs-lookup"><span data-stu-id="26e4e-167">The data is logged by averaging sensor values over each one hour interval.</span></span>
* <span data-ttu-id="26e4e-168">[Failures](https://pdmmodelingguide.blob.core.windows.net/pdmdata/failures.csv): Failures correspond to component replacements within the maintenance log.</span><span class="sxs-lookup"><span data-stu-id="26e4e-168">[Failures](https://pdmmodelingguide.blob.core.windows.net/pdmdata/failures.csv): Failures correspond to component replacements within the maintenance log.</span></span> <span data-ttu-id="26e4e-169">Each record contains the Machine ID, component type, and replacement date and time.</span><span class="sxs-lookup"><span data-stu-id="26e4e-169">Each record contains the Machine ID, component type, and replacement date and time.</span></span> <span data-ttu-id="26e4e-170">These records are used to create the machine learning labels that the model is trying to predict.</span><span class="sxs-lookup"><span data-stu-id="26e4e-170">These records are used to create the machine learning labels that the model is trying to predict.</span></span>

<span data-ttu-id="26e4e-171">To download the raw data sets from the GitHub repository, and create the PySpark data sets for this analysis, see the [Data Ingestion](https://github.com/Azure/MachineLearningSamples-PredictiveMaintenance/blob/master/Code/1_data_ingestion.ipynb) Jupyter Notebook scenario in the Code folder.</span><span class="sxs-lookup"><span data-stu-id="26e4e-171">To download the raw data sets from the GitHub repository, and create the PySpark data sets for this analysis, see the [Data Ingestion](https://github.com/Azure/MachineLearningSamples-PredictiveMaintenance/blob/master/Code/1_data_ingestion.ipynb) Jupyter Notebook scenario in the Code folder.</span></span>

## <a name="scenario-structure"></a><span data-ttu-id="26e4e-172">Scenario structure</span><span class="sxs-lookup"><span data-stu-id="26e4e-172">Scenario structure</span></span>
<span data-ttu-id="26e4e-173">The content for the scenario is available at the [GitHub repository](https://github.com/Azure/MachineLearningSamples-PredictiveMaintenance).</span><span class="sxs-lookup"><span data-stu-id="26e4e-173">The content for the scenario is available at the [GitHub repository](https://github.com/Azure/MachineLearningSamples-PredictiveMaintenance).</span></span> 

<span data-ttu-id="26e4e-174">The [Readme](https://github.com/Azure/MachineLearningSamples-PredictiveMaintenance/blob/master/README.md) file outlines the workflow from preparing the data, building a model, and then deploying a solution for production.</span><span class="sxs-lookup"><span data-stu-id="26e4e-174">The [Readme](https://github.com/Azure/MachineLearningSamples-PredictiveMaintenance/blob/master/README.md) file outlines the workflow from preparing the data, building a model, and then deploying a solution for production.</span></span> <span data-ttu-id="26e4e-175">Each step of the workflow is encapsulated in a Jupyter notebook in the [Code](https://github.com/Azure/MachineLearningSamples-PredictiveMaintenance/tree/master/Code) folder within the repository.</span><span class="sxs-lookup"><span data-stu-id="26e4e-175">Each step of the workflow is encapsulated in a Jupyter notebook in the [Code](https://github.com/Azure/MachineLearningSamples-PredictiveMaintenance/tree/master/Code) folder within the repository.</span></span>   

<span data-ttu-id="26e4e-176">[Code\1_data_ingestion.ipynb](https://github.com/Azure/MachineLearningSamples-PredictiveMaintenance/blob/master/Code/1_data_ingestion.ipynb): This notebook downloads the five input .csv files, and does some preliminary data cleanup and visualization.</span><span class="sxs-lookup"><span data-stu-id="26e4e-176">[Code\1_data_ingestion.ipynb](https://github.com/Azure/MachineLearningSamples-PredictiveMaintenance/blob/master/Code/1_data_ingestion.ipynb): This notebook downloads the five input .csv files, and does some preliminary data cleanup and visualization.</span></span> <span data-ttu-id="26e4e-177">The notebook converts each data set to PySpark format and stores it in an Azure blob container for use in the Feature Engineering Notebook.</span><span class="sxs-lookup"><span data-stu-id="26e4e-177">The notebook converts each data set to PySpark format and stores it in an Azure blob container for use in the Feature Engineering Notebook.</span></span>

<span data-ttu-id="26e4e-178">[Code\2_feature_engineering.ipynb](https://github.com/Azure/MachineLearningSamples-PredictiveMaintenance/blob/master/Code/2_feature_engineering.ipynb): The model features are constructed from the raw data set from Azure Blob storage by using a standard time series approach for telemetry, errors, and maintenance data.</span><span class="sxs-lookup"><span data-stu-id="26e4e-178">[Code\2_feature_engineering.ipynb](https://github.com/Azure/MachineLearningSamples-PredictiveMaintenance/blob/master/Code/2_feature_engineering.ipynb): The model features are constructed from the raw data set from Azure Blob storage by using a standard time series approach for telemetry, errors, and maintenance data.</span></span> <span data-ttu-id="26e4e-179">The failure-related component replacements are used to construct the model labels that describe which component failed.</span><span class="sxs-lookup"><span data-stu-id="26e4e-179">The failure-related component replacements are used to construct the model labels that describe which component failed.</span></span> <span data-ttu-id="26e4e-180">The labeled feature data is saved in an Azure blob for the Model Building Notebook.</span><span class="sxs-lookup"><span data-stu-id="26e4e-180">The labeled feature data is saved in an Azure blob for the Model Building Notebook.</span></span>

<span data-ttu-id="26e4e-181">[Code\3_model_building.ipynb](https://github.com/Azure/MachineLearningSamples-PredictiveMaintenance/blob/master/Code/3_model_building.ipynb): The Model Building Notebook uses the labeled feature data set and splits the data into train and dev data sets along the date-time stamp.</span><span class="sxs-lookup"><span data-stu-id="26e4e-181">[Code\3_model_building.ipynb](https://github.com/Azure/MachineLearningSamples-PredictiveMaintenance/blob/master/Code/3_model_building.ipynb): The Model Building Notebook uses the labeled feature data set and splits the data into train and dev data sets along the date-time stamp.</span></span> <span data-ttu-id="26e4e-182">The notebook is set up as an experiment with pyspark.ml.classification models.</span><span class="sxs-lookup"><span data-stu-id="26e4e-182">The notebook is set up as an experiment with pyspark.ml.classification models.</span></span> <span data-ttu-id="26e4e-183">The training data is vectorized.</span><span class="sxs-lookup"><span data-stu-id="26e4e-183">The training data is vectorized.</span></span> <span data-ttu-id="26e4e-184">The user can experiment with either a **DecisionTreeClassifier** or **RandomForestClassifier** to manipulate hyperparameters to find the best performing model.</span><span class="sxs-lookup"><span data-stu-id="26e4e-184">The user can experiment with either a **DecisionTreeClassifier** or **RandomForestClassifier** to manipulate hyperparameters to find the best performing model.</span></span> <span data-ttu-id="26e4e-185">Performance is determined by evaluating measurement statistics on the dev data set.</span><span class="sxs-lookup"><span data-stu-id="26e4e-185">Performance is determined by evaluating measurement statistics on the dev data set.</span></span> <span data-ttu-id="26e4e-186">These statistics are logged back in to the Machine Learning Workbench runtime screen for tracking.</span><span class="sxs-lookup"><span data-stu-id="26e4e-186">These statistics are logged back in to the Machine Learning Workbench runtime screen for tracking.</span></span> <span data-ttu-id="26e4e-187">At each run, the notebook saves the resulting model to the local disk that's running the Jupyter notebook kernel.</span><span class="sxs-lookup"><span data-stu-id="26e4e-187">At each run, the notebook saves the resulting model to the local disk that's running the Jupyter notebook kernel.</span></span> 

<span data-ttu-id="26e4e-188">[Code\4_operationalization.ipynb](https://github.com/Azure/MachineLearningSamples-PredictiveMaintenance/blob/master/Code/4_operationalization.ipynb): This notebook uses the last model that's saved to the local (Jupyter notebook kernel) disk to build the components for deploying the model into an Azure web service.</span><span class="sxs-lookup"><span data-stu-id="26e4e-188">[Code\4_operationalization.ipynb](https://github.com/Azure/MachineLearningSamples-PredictiveMaintenance/blob/master/Code/4_operationalization.ipynb): This notebook uses the last model that's saved to the local (Jupyter notebook kernel) disk to build the components for deploying the model into an Azure web service.</span></span> <span data-ttu-id="26e4e-189">The full operational assets are compacted into the o16n.zip file that's stored in another Azure blob container.</span><span class="sxs-lookup"><span data-stu-id="26e4e-189">The full operational assets are compacted into the o16n.zip file that's stored in another Azure blob container.</span></span> <span data-ttu-id="26e4e-190">The zipped file contains:</span><span class="sxs-lookup"><span data-stu-id="26e4e-190">The zipped file contains:</span></span>

* <span data-ttu-id="26e4e-191">**service_schema.json**: The schema definition file for the deployment.</span><span class="sxs-lookup"><span data-stu-id="26e4e-191">**service_schema.json**: The schema definition file for the deployment.</span></span> 
* <span data-ttu-id="26e4e-192">**pdmscore.py**: The **init()** and **run()** functions that are required by the Azure web service.</span><span class="sxs-lookup"><span data-stu-id="26e4e-192">**pdmscore.py**: The **init()** and **run()** functions that are required by the Azure web service.</span></span>
* <span data-ttu-id="26e4e-193">**pdmrfull.model**: The model definition directory.</span><span class="sxs-lookup"><span data-stu-id="26e4e-193">**pdmrfull.model**: The model definition directory.</span></span>
    
<span data-ttu-id="26e4e-194">The notebook tests the functions with the model definition before packaging the operationalization assets for deployment.</span><span class="sxs-lookup"><span data-stu-id="26e4e-194">The notebook tests the functions with the model definition before packaging the operationalization assets for deployment.</span></span> <span data-ttu-id="26e4e-195">Instructions for deployment are included at the end of the notebook.</span><span class="sxs-lookup"><span data-stu-id="26e4e-195">Instructions for deployment are included at the end of the notebook.</span></span>

## <a name="conclusion"></a><span data-ttu-id="26e4e-196">Conclusion</span><span class="sxs-lookup"><span data-stu-id="26e4e-196">Conclusion</span></span>

<span data-ttu-id="26e4e-197">This scenario gives an overview of building an end-to-end predictive maintenance solution by using PySpark within the Jupyter Notebook environment in Machine Learning Workbench.</span><span class="sxs-lookup"><span data-stu-id="26e4e-197">This scenario gives an overview of building an end-to-end predictive maintenance solution by using PySpark within the Jupyter Notebook environment in Machine Learning Workbench.</span></span> <span data-ttu-id="26e4e-198">This example scenario also details model deployment through the Machine Learning Model Management environment to make real-time equipment failure predictions.</span><span class="sxs-lookup"><span data-stu-id="26e4e-198">This example scenario also details model deployment through the Machine Learning Model Management environment to make real-time equipment failure predictions.</span></span>

## <a name="references"></a><span data-ttu-id="26e4e-199">References</span><span class="sxs-lookup"><span data-stu-id="26e4e-199">References</span></span>

<span data-ttu-id="26e4e-200">The following references provide examples of other predictive maintenance use cases for various platforms:</span><span class="sxs-lookup"><span data-stu-id="26e4e-200">The following references provide examples of other predictive maintenance use cases for various platforms:</span></span>

* [<span data-ttu-id="26e4e-201">Predictive Maintenance Solution Template</span><span class="sxs-lookup"><span data-stu-id="26e4e-201">Predictive Maintenance Solution Template</span></span>](https://docs.microsoft.com/azure/machine-learning/cortana-analytics-playbook-predictive-maintenance)
* [<span data-ttu-id="26e4e-202">Predictive Maintenance Modeling Guide</span><span class="sxs-lookup"><span data-stu-id="26e4e-202">Predictive Maintenance Modeling Guide</span></span>](https://gallery.cortanaintelligence.com/Collection/Predictive-Maintenance-Modelling-Guide-1)
* [<span data-ttu-id="26e4e-203">Predictive Maintenance Modeling Guide using SQL R Services</span><span class="sxs-lookup"><span data-stu-id="26e4e-203">Predictive Maintenance Modeling Guide using SQL R Services</span></span>](https://gallery.cortanaintelligence.com/Tutorial/Predictive-Maintenance-Modeling-Guide-using-SQL-R-Services-1)
* [<span data-ttu-id="26e4e-204">Predictive Maintenance Modeling Guide Python Notebook</span><span class="sxs-lookup"><span data-stu-id="26e4e-204">Predictive Maintenance Modeling Guide Python Notebook</span></span>](https://gallery.cortanaintelligence.com/Notebook/Predictive-Maintenance-Modelling-Guide-Python-Notebook-1)
* [<span data-ttu-id="26e4e-205">Predictive Maintenance using PySpark</span><span class="sxs-lookup"><span data-stu-id="26e4e-205">Predictive Maintenance using PySpark</span></span>](https://gallery.cortanaintelligence.com/Tutorial/Predictive-Maintenance-using-PySpark)
* [<span data-ttu-id="26e4e-206">Deep learning for predictive maintenance</span><span class="sxs-lookup"><span data-stu-id="26e4e-206">Deep learning for predictive maintenance</span></span>](https://docs.microsoft.com/azure/machine-learning/desktop-workbench/scenario-deep-learning-for-predictive-maintenance)

## <a name="next-steps"></a><span data-ttu-id="26e4e-207">Next steps</span><span class="sxs-lookup"><span data-stu-id="26e4e-207">Next steps</span></span>

<span data-ttu-id="26e4e-208">Other example scenarios are available in Machine Learning Workbench that demonstrate additional features of the product.</span><span class="sxs-lookup"><span data-stu-id="26e4e-208">Other example scenarios are available in Machine Learning Workbench that demonstrate additional features of the product.</span></span> 
