---
title: Data Science Virtual Machine pools - Azure | Microsoft Docs
description: Deploying pools of Data Science VMs as a shared resource for a team
keywords: deep learning, AI, data science tools, data science virtual machine, geospatial analytics, team data science process
services: machine-learning
documentationcenter: ''
author: gopitk
manager: cgronlun
ms.assetid: ''
ms.service: machine-learning
ms.component: data-science-vm
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 05/08/2018
ms.author: gokuma
ms.openlocfilehash: 0740ff7542d066442146b8e80e188ad5ba49a2b5
ms.sourcegitcommit: d1451406a010fd3aa854dc8e5b77dc5537d8050e
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 09/13/2018
ms.locfileid: "44871739"
---
# <a name="create-a-shared-pool-of-data-science-virtual-machines"></a><span data-ttu-id="8d1c4-104">Create a shared pool of Data Science Virtual Machines</span><span class="sxs-lookup"><span data-stu-id="8d1c4-104">Create a shared pool of Data Science Virtual Machines</span></span>

<span data-ttu-id="8d1c4-105">This article discusses how you can create a shared pool of Data Science Virtual Machines (DSVMs) for a team to use.</span><span class="sxs-lookup"><span data-stu-id="8d1c4-105">This article discusses how you can create a shared pool of Data Science Virtual Machines (DSVMs) for a team to use.</span></span> <span data-ttu-id="8d1c4-106">The benefits of using a shared pool are better resource utilization, facilitation of sharing and collaboration, and more effective management of DSVM resources.</span><span class="sxs-lookup"><span data-stu-id="8d1c4-106">The benefits of using a shared pool are better resource utilization, facilitation of sharing and collaboration, and more effective management of DSVM resources.</span></span> 

<span data-ttu-id="8d1c4-107">You can use many methods and technologies to create a pool of DSVMs.</span><span class="sxs-lookup"><span data-stu-id="8d1c4-107">You can use many methods and technologies to create a pool of DSVMs.</span></span> <span data-ttu-id="8d1c4-108">This article focuses on pools for batch processing and interactive VMs.</span><span class="sxs-lookup"><span data-stu-id="8d1c4-108">This article focuses on pools for batch processing and interactive VMs.</span></span>

## <a name="batch-processing-pool"></a><span data-ttu-id="8d1c4-109">Batch-processing pool</span><span class="sxs-lookup"><span data-stu-id="8d1c4-109">Batch-processing pool</span></span>
<span data-ttu-id="8d1c4-110">If you want to set up a pool of DSVMs mainly to run jobs in a batch offline, you can use the [Azure Batch AI](https://docs.microsoft.com/azure/batch-ai/) or [Azure Batch](https://docs.microsoft.com/azure/batch/) service.</span><span class="sxs-lookup"><span data-stu-id="8d1c4-110">If you want to set up a pool of DSVMs mainly to run jobs in a batch offline, you can use the [Azure Batch AI](https://docs.microsoft.com/azure/batch-ai/) or [Azure Batch](https://docs.microsoft.com/azure/batch/) service.</span></span> <span data-ttu-id="8d1c4-111">This article focuses on Azure Batch AI.</span><span class="sxs-lookup"><span data-stu-id="8d1c4-111">This article focuses on Azure Batch AI.</span></span>

<span data-ttu-id="8d1c4-112">The Ubuntu edition of the DSVM is supported as one of the images in Azure Batch AI.</span><span class="sxs-lookup"><span data-stu-id="8d1c4-112">The Ubuntu edition of the DSVM is supported as one of the images in Azure Batch AI.</span></span> <span data-ttu-id="8d1c4-113">In Azure CLI or the Python SDK, where you create the Azure Batch AI cluster, you can specify the `image` parameter and set it to `UbuntuDSVM`.</span><span class="sxs-lookup"><span data-stu-id="8d1c4-113">In Azure CLI or the Python SDK, where you create the Azure Batch AI cluster, you can specify the `image` parameter and set it to `UbuntuDSVM`.</span></span> <span data-ttu-id="8d1c4-114">You can choose what kind of processing nodes you want: GPU-based instances versus CPU-only instances, number of CPUs, and memory from a [wide choice of VM instances](https://azure.microsoft.com/pricing/details/virtual-machines/linux/) available on Azure.</span><span class="sxs-lookup"><span data-stu-id="8d1c4-114">You can choose what kind of processing nodes you want: GPU-based instances versus CPU-only instances, number of CPUs, and memory from a [wide choice of VM instances](https://azure.microsoft.com/pricing/details/virtual-machines/linux/) available on Azure.</span></span> 

<span data-ttu-id="8d1c4-115">When you use the Ubuntu DSVM image in Batch AI with GPU-based nodes, all the necessary GPU drivers and deep learning frameworks are preinstalled.</span><span class="sxs-lookup"><span data-stu-id="8d1c4-115">When you use the Ubuntu DSVM image in Batch AI with GPU-based nodes, all the necessary GPU drivers and deep learning frameworks are preinstalled.</span></span> <span data-ttu-id="8d1c4-116">The preinstallation saves you considerable time in preparing the batch nodes.</span><span class="sxs-lookup"><span data-stu-id="8d1c4-116">The preinstallation saves you considerable time in preparing the batch nodes.</span></span> <span data-ttu-id="8d1c4-117">In fact, if you're developing on an Ubuntu DSVM interactively, you'll notice that the Batch AI nodes are exactly the same setup and configuration of the environment.</span><span class="sxs-lookup"><span data-stu-id="8d1c4-117">In fact, if you're developing on an Ubuntu DSVM interactively, you'll notice that the Batch AI nodes are exactly the same setup and configuration of the environment.</span></span> 

<span data-ttu-id="8d1c4-118">Typically when you create a Batch AI cluster, you also create a file share that is mounted by all the nodes.</span><span class="sxs-lookup"><span data-stu-id="8d1c4-118">Typically when you create a Batch AI cluster, you also create a file share that is mounted by all the nodes.</span></span> <span data-ttu-id="8d1c4-119">The file share is used for input and output of data, as well as storing the batch job code/scripts.</span><span class="sxs-lookup"><span data-stu-id="8d1c4-119">The file share is used for input and output of data, as well as storing the batch job code/scripts.</span></span> 

<span data-ttu-id="8d1c4-120">After you create a Batch AI cluster, you can use the same CLI or Python SDK to submit jobs to be run.</span><span class="sxs-lookup"><span data-stu-id="8d1c4-120">After you create a Batch AI cluster, you can use the same CLI or Python SDK to submit jobs to be run.</span></span> <span data-ttu-id="8d1c4-121">You pay for only the time that's used to run the batch jobs.</span><span class="sxs-lookup"><span data-stu-id="8d1c4-121">You pay for only the time that's used to run the batch jobs.</span></span> 

<span data-ttu-id="8d1c4-122">For more information, see:</span><span class="sxs-lookup"><span data-stu-id="8d1c4-122">For more information, see:</span></span>
* <span data-ttu-id="8d1c4-123">Step-by-step walkthrough of using [Azure CLI](https://docs.microsoft.com/azure/batch-ai/quickstart-cli) to manage Batch AI</span><span class="sxs-lookup"><span data-stu-id="8d1c4-123">Step-by-step walkthrough of using [Azure CLI](https://docs.microsoft.com/azure/batch-ai/quickstart-cli) to manage Batch AI</span></span>
* <span data-ttu-id="8d1c4-124">Step-by-step walkthrough of using [Python](https://docs.microsoft.com/azure/batch-ai/quickstart-python) to manage Batch AI</span><span class="sxs-lookup"><span data-stu-id="8d1c4-124">Step-by-step walkthrough of using [Python](https://docs.microsoft.com/azure/batch-ai/quickstart-python) to manage Batch AI</span></span>
* <span data-ttu-id="8d1c4-125">[Batch AI recipes](https://github.com/Azure/BatchAI) that demonstrate how to use various AI and deep learning frameworks with Batch AI</span><span class="sxs-lookup"><span data-stu-id="8d1c4-125">[Batch AI recipes](https://github.com/Azure/BatchAI) that demonstrate how to use various AI and deep learning frameworks with Batch AI</span></span>

## <a name="interactive-vm-pool"></a><span data-ttu-id="8d1c4-126">Interactive VM pool</span><span class="sxs-lookup"><span data-stu-id="8d1c4-126">Interactive VM pool</span></span>

<span data-ttu-id="8d1c4-127">A pool of interactive VMs that are shared by the whole AI/data science team allows users to log in to an available instance of the DSVM instead of having a dedicated instance for each set of users.</span><span class="sxs-lookup"><span data-stu-id="8d1c4-127">A pool of interactive VMs that are shared by the whole AI/data science team allows users to log in to an available instance of the DSVM instead of having a dedicated instance for each set of users.</span></span> <span data-ttu-id="8d1c4-128">This setup helps with better availability and more effective utilization of resources.</span><span class="sxs-lookup"><span data-stu-id="8d1c4-128">This setup helps with better availability and more effective utilization of resources.</span></span> 

<span data-ttu-id="8d1c4-129">The technology that you use to create an interactive VM pool is [Azure virtual machine scale sets](https://docs.microsoft.com/azure/virtual-machine-scale-sets/).</span><span class="sxs-lookup"><span data-stu-id="8d1c4-129">The technology that you use to create an interactive VM pool is [Azure virtual machine scale sets](https://docs.microsoft.com/azure/virtual-machine-scale-sets/).</span></span> <span data-ttu-id="8d1c4-130">You can use scale sets to create and manage a group of identical, load-balanced, and autoscaling VMs.</span><span class="sxs-lookup"><span data-stu-id="8d1c4-130">You can use scale sets to create and manage a group of identical, load-balanced, and autoscaling VMs.</span></span> 

<span data-ttu-id="8d1c4-131">The user logs in to the main pool's IP or DNS address.</span><span class="sxs-lookup"><span data-stu-id="8d1c4-131">The user logs in to the main pool's IP or DNS address.</span></span> <span data-ttu-id="8d1c4-132">The scale set automatically routes the session to an available DSVM in the scale set.</span><span class="sxs-lookup"><span data-stu-id="8d1c4-132">The scale set automatically routes the session to an available DSVM in the scale set.</span></span> <span data-ttu-id="8d1c4-133">Because users want a similar environment regardless of the VM they're logging in to, all instances of the VM in the scale set mount a shared network drive, like an Azure Files share or an NFS share.</span><span class="sxs-lookup"><span data-stu-id="8d1c4-133">Because users want a similar environment regardless of the VM they're logging in to, all instances of the VM in the scale set mount a shared network drive, like an Azure Files share or an NFS share.</span></span> <span data-ttu-id="8d1c4-134">The user's shared workspace is normally kept on the shared file store that's mounted on each of the instances.</span><span class="sxs-lookup"><span data-stu-id="8d1c4-134">The user's shared workspace is normally kept on the shared file store that's mounted on each of the instances.</span></span> 

<span data-ttu-id="8d1c4-135">You can find a sample Azure Resource Manager template that creates a scale set with Ubuntu DSVM instances on [GitHub](https://raw.githubusercontent.com/Azure/DataScienceVM/master/Scripts/CreateDSVM/Ubuntu/dsvm-vmss-cluster.json).</span><span class="sxs-lookup"><span data-stu-id="8d1c4-135">You can find a sample Azure Resource Manager template that creates a scale set with Ubuntu DSVM instances on [GitHub](https://raw.githubusercontent.com/Azure/DataScienceVM/master/Scripts/CreateDSVM/Ubuntu/dsvm-vmss-cluster.json).</span></span> <span data-ttu-id="8d1c4-136">A sample of the [parameter file](https://raw.githubusercontent.com/Azure/DataScienceVM/master/Scripts/CreateDSVM/Ubuntu/dsvm-vmss-cluster.parameters.json)  for the Azure Resource Manager template is in the same location.</span><span class="sxs-lookup"><span data-stu-id="8d1c4-136">A sample of the [parameter file](https://raw.githubusercontent.com/Azure/DataScienceVM/master/Scripts/CreateDSVM/Ubuntu/dsvm-vmss-cluster.parameters.json)  for the Azure Resource Manager template is in the same location.</span></span> 

<span data-ttu-id="8d1c4-137">You can create the scale set from the Azure Resource Manager template by specifying values for the parameter file in Azure CLI.</span><span class="sxs-lookup"><span data-stu-id="8d1c4-137">You can create the scale set from the Azure Resource Manager template by specifying values for the parameter file in Azure CLI.</span></span> 

```
az group create --name [[NAME OF RESOURCE GROUP]] --location [[ Data center. For eg: "West US 2"]
az group deployment create --resource-group  [[NAME OF RESOURCE GROUP ABOVE]]  --template-uri https://raw.githubusercontent.com/Azure/DataScienceVM/master/Scripts/CreateDSVM/Ubuntu/dsvm-vmss-cluster.json --parameters @[[PARAMETER JSON FILE]]
```
<span data-ttu-id="8d1c4-138">The preceding commands assume you have:</span><span class="sxs-lookup"><span data-stu-id="8d1c4-138">The preceding commands assume you have:</span></span>
* <span data-ttu-id="8d1c4-139">A copy of the parameter file with the values specified for your instance of the scale set.</span><span class="sxs-lookup"><span data-stu-id="8d1c4-139">A copy of the parameter file with the values specified for your instance of the scale set.</span></span>
* <span data-ttu-id="8d1c4-140">The number of VM instances.</span><span class="sxs-lookup"><span data-stu-id="8d1c4-140">The number of VM instances.</span></span>
* <span data-ttu-id="8d1c4-141">Pointers to the Azure Files share.</span><span class="sxs-lookup"><span data-stu-id="8d1c4-141">Pointers to the Azure Files share.</span></span>
* <span data-ttu-id="8d1c4-142">Credentials for the storage account that will be mounted on each VM.</span><span class="sxs-lookup"><span data-stu-id="8d1c4-142">Credentials for the storage account that will be mounted on each VM.</span></span> 

<span data-ttu-id="8d1c4-143">The parameter file is referenced locally in the commands.</span><span class="sxs-lookup"><span data-stu-id="8d1c4-143">The parameter file is referenced locally in the commands.</span></span> <span data-ttu-id="8d1c4-144">You can also pass parameters inline or prompt for them in your script.</span><span class="sxs-lookup"><span data-stu-id="8d1c4-144">You can also pass parameters inline or prompt for them in your script.</span></span>  

<span data-ttu-id="8d1c4-145">The preceding template enables the SSH and the JupyterHub port from the front-end scale set to the back-end pool of Ubuntu DSVMs.</span><span class="sxs-lookup"><span data-stu-id="8d1c4-145">The preceding template enables the SSH and the JupyterHub port from the front-end scale set to the back-end pool of Ubuntu DSVMs.</span></span> <span data-ttu-id="8d1c4-146">As a user, you just log in to the VM on SSH or on JupyterHub in the normal way.</span><span class="sxs-lookup"><span data-stu-id="8d1c4-146">As a user, you just log in to the VM on SSH or on JupyterHub in the normal way.</span></span> <span data-ttu-id="8d1c4-147">Because the VM instances can be scaled up or down dynamically, any state needs to be saved in the mounted Azure Files share.</span><span class="sxs-lookup"><span data-stu-id="8d1c4-147">Because the VM instances can be scaled up or down dynamically, any state needs to be saved in the mounted Azure Files share.</span></span> <span data-ttu-id="8d1c4-148">You can use the same approach to create a pool of Windows DSVMs.</span><span class="sxs-lookup"><span data-stu-id="8d1c4-148">You can use the same approach to create a pool of Windows DSVMs.</span></span> 

<span data-ttu-id="8d1c4-149">The [script that mounts the Azure Files share](https://raw.githubusercontent.com/Azure/DataScienceVM/master/Extensions/General/mountazurefiles.sh) is also available in the Azure DataScienceVM repository in GitHub.</span><span class="sxs-lookup"><span data-stu-id="8d1c4-149">The [script that mounts the Azure Files share](https://raw.githubusercontent.com/Azure/DataScienceVM/master/Extensions/General/mountazurefiles.sh) is also available in the Azure DataScienceVM repository in GitHub.</span></span> <span data-ttu-id="8d1c4-150">The script mounts the Azure Files share at the specified mount point in the parameter file.</span><span class="sxs-lookup"><span data-stu-id="8d1c4-150">The script mounts the Azure Files share at the specified mount point in the parameter file.</span></span> <span data-ttu-id="8d1c4-151">The script also creates soft links to the mounted drive in the initial user's home directory.</span><span class="sxs-lookup"><span data-stu-id="8d1c4-151">The script also creates soft links to the mounted drive in the initial user's home directory.</span></span> <span data-ttu-id="8d1c4-152">A user-specific notebook directory within the Azure Files share is soft linked to the `$HOME/notebooks/remote` directory so that users can access, run, and save their Jupyter notebooks.</span><span class="sxs-lookup"><span data-stu-id="8d1c4-152">A user-specific notebook directory within the Azure Files share is soft linked to the `$HOME/notebooks/remote` directory so that users can access, run, and save their Jupyter notebooks.</span></span> <span data-ttu-id="8d1c4-153">You can use the same convention when you create additional users on the VM to point each user's Jupyter workspace to the Azure Files share.</span><span class="sxs-lookup"><span data-stu-id="8d1c4-153">You can use the same convention when you create additional users on the VM to point each user's Jupyter workspace to the Azure Files share.</span></span> 

<span data-ttu-id="8d1c4-154">Virtual machine scale sets support autoscaling.</span><span class="sxs-lookup"><span data-stu-id="8d1c4-154">Virtual machine scale sets support autoscaling.</span></span> <span data-ttu-id="8d1c4-155">You can set rules on when to create additional instances and when to scale down instances.</span><span class="sxs-lookup"><span data-stu-id="8d1c4-155">You can set rules on when to create additional instances and when to scale down instances.</span></span> <span data-ttu-id="8d1c4-156">For example, you can scale down to zero instances to save on cloud hardware usage costs when the VMs are not used at all.</span><span class="sxs-lookup"><span data-stu-id="8d1c4-156">For example, you can scale down to zero instances to save on cloud hardware usage costs when the VMs are not used at all.</span></span> <span data-ttu-id="8d1c4-157">The documentation pages of virtual machine scale sets provide detailed steps for [autoscaling](https://docs.microsoft.com/azure/virtual-machine-scale-sets/virtual-machine-scale-sets-autoscale-overview).</span><span class="sxs-lookup"><span data-stu-id="8d1c4-157">The documentation pages of virtual machine scale sets provide detailed steps for [autoscaling](https://docs.microsoft.com/azure/virtual-machine-scale-sets/virtual-machine-scale-sets-autoscale-overview).</span></span>

## <a name="next-steps"></a><span data-ttu-id="8d1c4-158">Next steps</span><span class="sxs-lookup"><span data-stu-id="8d1c4-158">Next steps</span></span>

* [<span data-ttu-id="8d1c4-159">Set up a common Identity</span><span class="sxs-lookup"><span data-stu-id="8d1c4-159">Set up a common Identity</span></span>](dsvm-common-identity.md)
* [<span data-ttu-id="8d1c4-160">Securely store credentials to access cloud resources</span><span class="sxs-lookup"><span data-stu-id="8d1c4-160">Securely store credentials to access cloud resources</span></span>](dsvm-secure-access-keys.md)















