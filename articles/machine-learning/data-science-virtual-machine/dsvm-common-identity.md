---
title: Set up a common identity for the Data Science Virtual Machine - Azure | Microsoft Docs
description: Set up a common identity in an enterprise team's DSVM environments.
keywords: deep learning, AI, data science tools, data science virtual machine, geospatial analytics, team data science process
services: machine-learning
documentationcenter: ''
author: gopitk
manager: cgronlun
ms.assetid: ''
ms.service: machine-learning
ms.component: data-science-vm
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 05/08/2018
ms.author: gokuma
ms.openlocfilehash: 25d40b6a72ab6da61feb1458f5930eb48ef1d900
ms.sourcegitcommit: d1451406a010fd3aa854dc8e5b77dc5537d8050e
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 09/13/2018
ms.locfileid: "44857852"
---
# <a name="set-up-a-common-identity-on-the-data-science-virtual-machine"></a><span data-ttu-id="39a29-104">Set up a common identity on the Data Science Virtual Machine</span><span class="sxs-lookup"><span data-stu-id="39a29-104">Set up a common identity on the Data Science Virtual Machine</span></span>

<span data-ttu-id="39a29-105">On an Azure virtual machine (VM), including the Data Science Virtual Machine (DSVM), you create local user accounts while provisioning the VM.</span><span class="sxs-lookup"><span data-stu-id="39a29-105">On an Azure virtual machine (VM), including the Data Science Virtual Machine (DSVM), you create local user accounts while provisioning the VM.</span></span> <span data-ttu-id="39a29-106">Users then authenticate to the VM by using these credentials.</span><span class="sxs-lookup"><span data-stu-id="39a29-106">Users then authenticate to the VM by using these credentials.</span></span> <span data-ttu-id="39a29-107">If you have multiple VMs that you need to access, this approach can quickly get cumbersome as you manage credentials.</span><span class="sxs-lookup"><span data-stu-id="39a29-107">If you have multiple VMs that you need to access, this approach can quickly get cumbersome as you manage credentials.</span></span> <span data-ttu-id="39a29-108">Common user accounts and  management through a standards-based identity provider enable you to use a single set of credentials to access multiple resources on Azure, including multiple DSVMs.</span><span class="sxs-lookup"><span data-stu-id="39a29-108">Common user accounts and  management through a standards-based identity provider enable you to use a single set of credentials to access multiple resources on Azure, including multiple DSVMs.</span></span> 

<span data-ttu-id="39a29-109">Active Directory is a popular identity provider and is supported on Azure as a service and on-premises.</span><span class="sxs-lookup"><span data-stu-id="39a29-109">Active Directory is a popular identity provider and is supported on Azure as a service and on-premises.</span></span> <span data-ttu-id="39a29-110">You can use Azure Active Directory (Azure AD) or on-premises Active Directory to authenticate users on a standalone DSVM or a cluster of DSVMs in an Azure virtual machine scale set.</span><span class="sxs-lookup"><span data-stu-id="39a29-110">You can use Azure Active Directory (Azure AD) or on-premises Active Directory to authenticate users on a standalone DSVM or a cluster of DSVMs in an Azure virtual machine scale set.</span></span> <span data-ttu-id="39a29-111">You do this by joining the DSVM instances to an Active Directory domain.</span><span class="sxs-lookup"><span data-stu-id="39a29-111">You do this by joining the DSVM instances to an Active Directory domain.</span></span> 

<span data-ttu-id="39a29-112">If you already have Active Directory to manage the identities, you can use it as your common identity provider.</span><span class="sxs-lookup"><span data-stu-id="39a29-112">If you already have Active Directory to manage the identities, you can use it as your common identity provider.</span></span> <span data-ttu-id="39a29-113">If you don't have Active Directory, you can run a managed Active Directory instance on Azure through a service called [Azure Active Directory Domain Services](https://docs.microsoft.com/azure/active-directory-domain-services/) (Azure AD DS).</span><span class="sxs-lookup"><span data-stu-id="39a29-113">If you don't have Active Directory, you can run a managed Active Directory instance on Azure through a service called [Azure Active Directory Domain Services](https://docs.microsoft.com/azure/active-directory-domain-services/) (Azure AD DS).</span></span> 

<span data-ttu-id="39a29-114">The documentation for [Azure AD](https://docs.microsoft.com/azure/active-directory/) provides detailed [management instructions](https://docs.microsoft.com/azure/active-directory/choose-hybrid-identity-solution#synchronized-identity), including connecting Azure AD to your on-premises directory if you have one.</span><span class="sxs-lookup"><span data-stu-id="39a29-114">The documentation for [Azure AD](https://docs.microsoft.com/azure/active-directory/) provides detailed [management instructions](https://docs.microsoft.com/azure/active-directory/choose-hybrid-identity-solution#synchronized-identity), including connecting Azure AD to your on-premises directory if you have one.</span></span> 

<span data-ttu-id="39a29-115">This article describes the steps to set up a fully managed Active Directory domain service on Azure by using Azure AD DS.</span><span class="sxs-lookup"><span data-stu-id="39a29-115">This article describes the steps to set up a fully managed Active Directory domain service on Azure by using Azure AD DS.</span></span> <span data-ttu-id="39a29-116">You can then join your DSVMs to the managed Active Directory domain to enable users to access a pool of DSVMs (and other Azure resources) by using a common user account and credentials.</span><span class="sxs-lookup"><span data-stu-id="39a29-116">You can then join your DSVMs to the managed Active Directory domain to enable users to access a pool of DSVMs (and other Azure resources) by using a common user account and credentials.</span></span> 

## <a name="set-up-a-fully-managed-active-directory-domain-on-azure"></a><span data-ttu-id="39a29-117">Set up a fully managed Active Directory domain on Azure</span><span class="sxs-lookup"><span data-stu-id="39a29-117">Set up a fully managed Active Directory domain on Azure</span></span>

<span data-ttu-id="39a29-118">Azure AD DS makes it simple to manage your identities by providing a fully managed service on Azure.</span><span class="sxs-lookup"><span data-stu-id="39a29-118">Azure AD DS makes it simple to manage your identities by providing a fully managed service on Azure.</span></span> <span data-ttu-id="39a29-119">On this Active Directory domain, you manage users and groups.</span><span class="sxs-lookup"><span data-stu-id="39a29-119">On this Active Directory domain, you manage users and groups.</span></span> <span data-ttu-id="39a29-120">The steps to set up an Azure-hosted Active Directory domain and user accounts in your directory are:</span><span class="sxs-lookup"><span data-stu-id="39a29-120">The steps to set up an Azure-hosted Active Directory domain and user accounts in your directory are:</span></span>

1. <span data-ttu-id="39a29-121">In the Azure portal, add the user to Active Directory:</span><span class="sxs-lookup"><span data-stu-id="39a29-121">In the Azure portal, add the user to Active Directory:</span></span> 

   <span data-ttu-id="39a29-122">a.</span><span class="sxs-lookup"><span data-stu-id="39a29-122">a.</span></span> <span data-ttu-id="39a29-123">Sign in to the [Azure Active Directory admin center](https://aad.portal.azure.com) with an account that's a global admin for the directory.</span><span class="sxs-lookup"><span data-stu-id="39a29-123">Sign in to the [Azure Active Directory admin center](https://aad.portal.azure.com) with an account that's a global admin for the directory.</span></span>
    
   <span data-ttu-id="39a29-124">b.</span><span class="sxs-lookup"><span data-stu-id="39a29-124">b.</span></span> <span data-ttu-id="39a29-125">Select **Azure Active Directory** and then **Users and groups**.</span><span class="sxs-lookup"><span data-stu-id="39a29-125">Select **Azure Active Directory** and then **Users and groups**.</span></span>
    
   <span data-ttu-id="39a29-126">c.</span><span class="sxs-lookup"><span data-stu-id="39a29-126">c.</span></span> <span data-ttu-id="39a29-127">On **Users and groups**, select **All users**, and then select **New user**.</span><span class="sxs-lookup"><span data-stu-id="39a29-127">On **Users and groups**, select **All users**, and then select **New user**.</span></span>
   
      <span data-ttu-id="39a29-128">The **User** pane opens.</span><span class="sxs-lookup"><span data-stu-id="39a29-128">The **User** pane opens.</span></span>
      
      ![The "User" pane](./media/add-user.png)
    
   <span data-ttu-id="39a29-130">d.</span><span class="sxs-lookup"><span data-stu-id="39a29-130">d.</span></span> <span data-ttu-id="39a29-131">Enter details for the user, such as **Name** and **User name**.</span><span class="sxs-lookup"><span data-stu-id="39a29-131">Enter details for the user, such as **Name** and **User name**.</span></span> <span data-ttu-id="39a29-132">The domain name portion of the user name must be either the initial default domain name "[domain name].onmicrosoft.com" or a verified, non-federated [custom domain name](../../active-directory/add-custom-domain.md) such as "contoso.com."</span><span class="sxs-lookup"><span data-stu-id="39a29-132">The domain name portion of the user name must be either the initial default domain name "[domain name].onmicrosoft.com" or a verified, non-federated [custom domain name](../../active-directory/add-custom-domain.md) such as "contoso.com."</span></span>
    
   <span data-ttu-id="39a29-133">e.</span><span class="sxs-lookup"><span data-stu-id="39a29-133">e.</span></span> <span data-ttu-id="39a29-134">Copy or otherwise note the generated user password so that you can provide it to the user after this process is complete.</span><span class="sxs-lookup"><span data-stu-id="39a29-134">Copy or otherwise note the generated user password so that you can provide it to the user after this process is complete.</span></span>
    
   <span data-ttu-id="39a29-135">f.</span><span class="sxs-lookup"><span data-stu-id="39a29-135">f.</span></span> <span data-ttu-id="39a29-136">Optionally, you can open and fill out the information in **Profile**, **Groups**, or **Directory role** for the user.</span><span class="sxs-lookup"><span data-stu-id="39a29-136">Optionally, you can open and fill out the information in **Profile**, **Groups**, or **Directory role** for the user.</span></span> 
    
   <span data-ttu-id="39a29-137">g.</span><span class="sxs-lookup"><span data-stu-id="39a29-137">g.</span></span> <span data-ttu-id="39a29-138">On **User**, select **Create**.</span><span class="sxs-lookup"><span data-stu-id="39a29-138">On **User**, select **Create**.</span></span>
    
   <span data-ttu-id="39a29-139">h.</span><span class="sxs-lookup"><span data-stu-id="39a29-139">h.</span></span> <span data-ttu-id="39a29-140">Securely distribute the generated password to the new user so that the user can sign in.</span><span class="sxs-lookup"><span data-stu-id="39a29-140">Securely distribute the generated password to the new user so that the user can sign in.</span></span>

1. <span data-ttu-id="39a29-141">Create an Azure AD DS instance.</span><span class="sxs-lookup"><span data-stu-id="39a29-141">Create an Azure AD DS instance.</span></span> <span data-ttu-id="39a29-142">Follow the instructions in the article [Enable Azure Active Directory Domain Services using the Azure portal](https://docs.microsoft.com/azure/active-directory-domain-services/active-directory-ds-getting-started) (tasks 1 to 5).</span><span class="sxs-lookup"><span data-stu-id="39a29-142">Follow the instructions in the article [Enable Azure Active Directory Domain Services using the Azure portal](https://docs.microsoft.com/azure/active-directory-domain-services/active-directory-ds-getting-started) (tasks 1 to 5).</span></span> <span data-ttu-id="39a29-143">It's important to update the existing user passwords in Active Directory so that the password in Azure AD DS is synced.</span><span class="sxs-lookup"><span data-stu-id="39a29-143">It's important to update the existing user passwords in Active Directory so that the password in Azure AD DS is synced.</span></span> <span data-ttu-id="39a29-144">It's also important to add DNS to Azure AD DS, as described in task 4 of the article.</span><span class="sxs-lookup"><span data-stu-id="39a29-144">It's also important to add DNS to Azure AD DS, as described in task 4 of the article.</span></span> 

1. <span data-ttu-id="39a29-145">Create a separate DSVM subnet in the virtual network created in task 2 of the preceding step.</span><span class="sxs-lookup"><span data-stu-id="39a29-145">Create a separate DSVM subnet in the virtual network created in task 2 of the preceding step.</span></span>
1. <span data-ttu-id="39a29-146">Create one or more Data Science VM instances in the DSVM subnet.</span><span class="sxs-lookup"><span data-stu-id="39a29-146">Create one or more Data Science VM instances in the DSVM subnet.</span></span> 
1. <span data-ttu-id="39a29-147">Follow the [instructions](https://docs.microsoft.com/azure/active-directory-domain-services/active-directory-ds-join-ubuntu-linux-vm ) to add DSVM to Active Directory.</span><span class="sxs-lookup"><span data-stu-id="39a29-147">Follow the [instructions](https://docs.microsoft.com/azure/active-directory-domain-services/active-directory-ds-join-ubuntu-linux-vm ) to add DSVM to Active Directory.</span></span> 
1. <span data-ttu-id="39a29-148">Mount an Azure Files share to host your home or notebook directory to enable mounting your workspace on any machine.</span><span class="sxs-lookup"><span data-stu-id="39a29-148">Mount an Azure Files share to host your home or notebook directory to enable mounting your workspace on any machine.</span></span> <span data-ttu-id="39a29-149">(If you need tight file-level permissions, you'll need NFS running on one or more VMs.)</span><span class="sxs-lookup"><span data-stu-id="39a29-149">(If you need tight file-level permissions, you'll need NFS running on one or more VMs.)</span></span>

   <span data-ttu-id="39a29-150">a.</span><span class="sxs-lookup"><span data-stu-id="39a29-150">a.</span></span> <span data-ttu-id="39a29-151">[Create an Azure Files share](../../storage/files/storage-how-to-create-file-share.md).</span><span class="sxs-lookup"><span data-stu-id="39a29-151">[Create an Azure Files share](../../storage/files/storage-how-to-create-file-share.md).</span></span>
    
   <span data-ttu-id="39a29-152">b.</span><span class="sxs-lookup"><span data-stu-id="39a29-152">b.</span></span> <span data-ttu-id="39a29-153">Mount it on the Linux DSVM.</span><span class="sxs-lookup"><span data-stu-id="39a29-153">Mount it on the Linux DSVM.</span></span> <span data-ttu-id="39a29-154">When you select the **Connect** button for the Azure Files share in your storage account in the Azure portal, the  command to run in the Bash shell on the Linux DSVM appears.</span><span class="sxs-lookup"><span data-stu-id="39a29-154">When you select the **Connect** button for the Azure Files share in your storage account in the Azure portal, the  command to run in the Bash shell on the Linux DSVM appears.</span></span> <span data-ttu-id="39a29-155">The command looks like this:</span><span class="sxs-lookup"><span data-stu-id="39a29-155">The command looks like this:</span></span>
   
   ```
   sudo mount -t cifs //[STORAGEACCT].file.core.windows.net/workspace [Your mount point] -o vers=3.0,username=[STORAGEACCT],password=[Access Key or SAS],dir_mode=0777,file_mode=0777,sec=ntlmssp
   ```
1. <span data-ttu-id="39a29-156">Assume that you mounted your Azure Files share in /data/workspace, for example.</span><span class="sxs-lookup"><span data-stu-id="39a29-156">Assume that you mounted your Azure Files share in /data/workspace, for example.</span></span> <span data-ttu-id="39a29-157">Now create directories for each of your users in the share: /data/workspace/user1, /data/workspace/user2, and so on.</span><span class="sxs-lookup"><span data-stu-id="39a29-157">Now create directories for each of your users in the share: /data/workspace/user1, /data/workspace/user2, and so on.</span></span> <span data-ttu-id="39a29-158">Create a `notebooks` directory in each user's workspace.</span><span class="sxs-lookup"><span data-stu-id="39a29-158">Create a `notebooks` directory in each user's workspace.</span></span> 
1. <span data-ttu-id="39a29-159">Create symbolic links for `notebooks` in `$HOME/userx/notebooks/remote`.</span><span class="sxs-lookup"><span data-stu-id="39a29-159">Create symbolic links for `notebooks` in `$HOME/userx/notebooks/remote`.</span></span>   

<span data-ttu-id="39a29-160">Now, you have the users in your Active Directory instance hosted in Azure.</span><span class="sxs-lookup"><span data-stu-id="39a29-160">Now, you have the users in your Active Directory instance hosted in Azure.</span></span> <span data-ttu-id="39a29-161">By using the Active Directory credentials, users can log in to any DSVM (SSH or JupyterHub) that's joined to Azure AD DS.</span><span class="sxs-lookup"><span data-stu-id="39a29-161">By using the Active Directory credentials, users can log in to any DSVM (SSH or JupyterHub) that's joined to Azure AD DS.</span></span> <span data-ttu-id="39a29-162">Because the user workspace is on an Azure Files share, users have access to their notebooks and other work from any DSVM when they're using JupyterHub.</span><span class="sxs-lookup"><span data-stu-id="39a29-162">Because the user workspace is on an Azure Files share, users have access to their notebooks and other work from any DSVM when they're using JupyterHub.</span></span> 

<span data-ttu-id="39a29-163">For autoscaling, you can use a virtual machine scale set to create a pool of VMs that are all joined to the domain in this fashion and with the shared disk mounted.</span><span class="sxs-lookup"><span data-stu-id="39a29-163">For autoscaling, you can use a virtual machine scale set to create a pool of VMs that are all joined to the domain in this fashion and with the shared disk mounted.</span></span> <span data-ttu-id="39a29-164">Users can log in to any available machine in the virtual machine scale set and have access to the shared disk where their notebooks are saved.</span><span class="sxs-lookup"><span data-stu-id="39a29-164">Users can log in to any available machine in the virtual machine scale set and have access to the shared disk where their notebooks are saved.</span></span> 

## <a name="next-steps"></a><span data-ttu-id="39a29-165">Next steps</span><span class="sxs-lookup"><span data-stu-id="39a29-165">Next steps</span></span>

* [<span data-ttu-id="39a29-166">Securely store credentials to access cloud resources</span><span class="sxs-lookup"><span data-stu-id="39a29-166">Securely store credentials to access cloud resources</span></span>](dsvm-secure-access-keys.md)



