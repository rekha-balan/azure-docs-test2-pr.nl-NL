---
title: Execute Python machine learning scripts | Microsoft Docs
description: Outlines design principles underlying support for Python scripts in Azure Machine Learning and basic usage scenarios, capabilities, and limitations.
keywords: python machine learning,pandas,python pandas,python scripts, execute python scripts
services: machine-learning
documentationcenter: ''
author: bradsev
manager: jhubbard
editor: cgronlun
ms.assetid: ee9eb764-0d3e-4104-a797-19fc29345d39
ms.service: machine-learning
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 03/24/2017
ms.author: bradsev
ms.openlocfilehash: 2ce184f0a41d4913a7499b24aae3c39ed018013e
ms.sourcegitcommit: 5b9d839c0c0a94b293fdafe1d6e5429506c07e05
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 08/02/2018
ms.locfileid: "44660847"
---
# <a name="execute-python-machine-learning-scripts-in-azure-machine-learning-studio"></a><span data-ttu-id="db927-104">Execute Python machine learning scripts in Azure Machine Learning Studio</span><span class="sxs-lookup"><span data-stu-id="db927-104">Execute Python machine learning scripts in Azure Machine Learning Studio</span></span>
<span data-ttu-id="db927-105">This topic describes the design principles underlying the current support for Python scripts in Azure Machine Learning.</span><span class="sxs-lookup"><span data-stu-id="db927-105">This topic describes the design principles underlying the current support for Python scripts in Azure Machine Learning.</span></span> <span data-ttu-id="db927-106">The main capabilities are also outlined, including support for importing existing code, exporting visualizations and, finally, some of the limitations and ongoing work are discussed.</span><span class="sxs-lookup"><span data-stu-id="db927-106">The main capabilities are also outlined, including support for importing existing code, exporting visualizations and, finally, some of the limitations and ongoing work are discussed.</span></span>

<span data-ttu-id="db927-107">[Python](https://www.python.org/) is an indispensable tool in the tool chest of many data scientists.</span><span class="sxs-lookup"><span data-stu-id="db927-107">[Python](https://www.python.org/) is an indispensable tool in the tool chest of many data scientists.</span></span> <span data-ttu-id="db927-108">It has:</span><span class="sxs-lookup"><span data-stu-id="db927-108">It has:</span></span>

* <span data-ttu-id="db927-109">an elegant and concise syntax,</span><span class="sxs-lookup"><span data-stu-id="db927-109">an elegant and concise syntax,</span></span> 
* <span data-ttu-id="db927-110">cross-platform support,</span><span class="sxs-lookup"><span data-stu-id="db927-110">cross-platform support,</span></span> 
* <span data-ttu-id="db927-111">a vast collection of powerful libraries, and</span><span class="sxs-lookup"><span data-stu-id="db927-111">a vast collection of powerful libraries, and</span></span> 
* <span data-ttu-id="db927-112">mature development tools.</span><span class="sxs-lookup"><span data-stu-id="db927-112">mature development tools.</span></span> 

<span data-ttu-id="db927-113">Python is being used in all phases of the workflow typically used in machine learning modeling, from data ingest and processing, to feature construction and model training, and then validation and deployment of the models.</span><span class="sxs-lookup"><span data-stu-id="db927-113">Python is being used in all phases of the workflow typically used in machine learning modeling, from data ingest and processing, to feature construction and model training, and then validation and deployment of the models.</span></span> 

<span data-ttu-id="db927-114">Azure Machine Learning Studio supports embedding Python scripts into various parts of a machine learning experiment and also seamlessly publishing them as scalable, operationalized web services on Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="db927-114">Azure Machine Learning Studio supports embedding Python scripts into various parts of a machine learning experiment and also seamlessly publishing them as scalable, operationalized web services on Microsoft Azure.</span></span>

[!INCLUDE [machine-learning-free-trial](../../includes/machine-learning-free-trial.md)]

## <a name="design-principles-of-python-scripts-in-machine-learning"></a><span data-ttu-id="db927-115">Design principles of Python scripts in Machine Learning</span><span class="sxs-lookup"><span data-stu-id="db927-115">Design principles of Python scripts in Machine Learning</span></span>
<span data-ttu-id="db927-116">The primary interface to Python in Azure Machine Learning Studio is via the [Execute Python Script][execute-python-script] module shown in Figure 1.</span><span class="sxs-lookup"><span data-stu-id="db927-116">The primary interface to Python in Azure Machine Learning Studio is via the [Execute Python Script][execute-python-script] module shown in Figure 1.</span></span>

![image1](https://docstestmedia1.blob.core.windows.net/azure-media/articles/machine-learning/media/machine-learning-execute-python-scripts/execute-machine-learning-python-scripts-module.png)

![image2](https://docstestmedia1.blob.core.windows.net/azure-media/articles/machine-learning/media/machine-learning-execute-python-scripts/embedded-machine-learning-python-script.png)

<span data-ttu-id="db927-119">Figure 1.</span><span class="sxs-lookup"><span data-stu-id="db927-119">Figure 1.</span></span> <span data-ttu-id="db927-120">The **Execute Python Script** module.</span><span class="sxs-lookup"><span data-stu-id="db927-120">The **Execute Python Script** module.</span></span>

<span data-ttu-id="db927-121">The [Execute Python Script][execute-python-script] module accepts up to three inputs and produces up to two outputs (discussed below), just like its R analog, the [Execute R Script][execute-r-script] module.</span><span class="sxs-lookup"><span data-stu-id="db927-121">The [Execute Python Script][execute-python-script] module accepts up to three inputs and produces up to two outputs (discussed below), just like its R analog, the [Execute R Script][execute-r-script] module.</span></span> <span data-ttu-id="db927-122">The Python code to be executed is entered into the parameter box as a specially named entry-point function called `azureml_main`.</span><span class="sxs-lookup"><span data-stu-id="db927-122">The Python code to be executed is entered into the parameter box as a specially named entry-point function called `azureml_main`.</span></span> <span data-ttu-id="db927-123">Here are the key design principles used to implement this module:</span><span class="sxs-lookup"><span data-stu-id="db927-123">Here are the key design principles used to implement this module:</span></span>

1. <span data-ttu-id="db927-124">*Must be idiomatic for Python users.*</span><span class="sxs-lookup"><span data-stu-id="db927-124">*Must be idiomatic for Python users.*</span></span> <span data-ttu-id="db927-125">Most Python users factor their code as functions inside modules, so putting a lot of executable statements in a top-level module is relatively rare.</span><span class="sxs-lookup"><span data-stu-id="db927-125">Most Python users factor their code as functions inside modules, so putting a lot of executable statements in a top-level module is relatively rare.</span></span> <span data-ttu-id="db927-126">As a result, the script box also takes a specially named Python function as opposed to just a sequence of statements.</span><span class="sxs-lookup"><span data-stu-id="db927-126">As a result, the script box also takes a specially named Python function as opposed to just a sequence of statements.</span></span> <span data-ttu-id="db927-127">The objects exposed in the function are standard Python library types such as [Pandas](http://pandas.pydata.org/) data frames and [NumPy](http://www.numpy.org/) arrays.</span><span class="sxs-lookup"><span data-stu-id="db927-127">The objects exposed in the function are standard Python library types such as [Pandas](http://pandas.pydata.org/) data frames and [NumPy](http://www.numpy.org/) arrays.</span></span>
2. <span data-ttu-id="db927-128">*Must have high-fidelity between local and cloud executions.*</span><span class="sxs-lookup"><span data-stu-id="db927-128">*Must have high-fidelity between local and cloud executions.*</span></span> <span data-ttu-id="db927-129">The backend used to execute the Python code is based on [Anaconda](https://store.continuum.io/cshop/anaconda/) 2.1, a widely used cross-platform scientific Python distribution.</span><span class="sxs-lookup"><span data-stu-id="db927-129">The backend used to execute the Python code is based on [Anaconda](https://store.continuum.io/cshop/anaconda/) 2.1, a widely used cross-platform scientific Python distribution.</span></span> <span data-ttu-id="db927-130">It comes with close to 200 of the most common Python packages.</span><span class="sxs-lookup"><span data-stu-id="db927-130">It comes with close to 200 of the most common Python packages.</span></span> <span data-ttu-id="db927-131">Therefore, data scientists can debug and qualify their code on their local Azure Machine Learning-compatible Anaconda environment.</span><span class="sxs-lookup"><span data-stu-id="db927-131">Therefore, data scientists can debug and qualify their code on their local Azure Machine Learning-compatible Anaconda environment.</span></span> <span data-ttu-id="db927-132">Then use existing development environments such as [IPython](http://ipython.org/) notebook or [Python Tools for Visual Studio](http://aka.ms/ptvs) to run it as part of an Azure Machine Learning experiment with high confidence.</span><span class="sxs-lookup"><span data-stu-id="db927-132">Then use existing development environments such as [IPython](http://ipython.org/) notebook or [Python Tools for Visual Studio](http://aka.ms/ptvs) to run it as part of an Azure Machine Learning experiment with high confidence.</span></span> <span data-ttu-id="db927-133">Further, the `azureml_main` entry point is a vanilla Python function and can be authored without Azure Machine Learning specific code or the SDK installed.</span><span class="sxs-lookup"><span data-stu-id="db927-133">Further, the `azureml_main` entry point is a vanilla Python function and can be authored without Azure Machine Learning specific code or the SDK installed.</span></span>
3. <span data-ttu-id="db927-134">*Must be seamlessly composable with other Azure Machine Learning modules.*</span><span class="sxs-lookup"><span data-stu-id="db927-134">*Must be seamlessly composable with other Azure Machine Learning modules.*</span></span> <span data-ttu-id="db927-135">The [Execute Python Script][execute-python-script] module accepts, as inputs and outputs, standard Azure Machine Learning datasets.</span><span class="sxs-lookup"><span data-stu-id="db927-135">The [Execute Python Script][execute-python-script] module accepts, as inputs and outputs, standard Azure Machine Learning datasets.</span></span> <span data-ttu-id="db927-136">The underlying framework transparently and efficiently bridges the Azure Machine Learning and Python runtimes (supporting features such as missing values).</span><span class="sxs-lookup"><span data-stu-id="db927-136">The underlying framework transparently and efficiently bridges the Azure Machine Learning and Python runtimes (supporting features such as missing values).</span></span> <span data-ttu-id="db927-137">Python can therefore be used in conjunction with existing Azure Machine Learning workflows, including those that call into R and SQLite.</span><span class="sxs-lookup"><span data-stu-id="db927-137">Python can therefore be used in conjunction with existing Azure Machine Learning workflows, including those that call into R and SQLite.</span></span> <span data-ttu-id="db927-138">One can therefore envisage workflows that:</span><span class="sxs-lookup"><span data-stu-id="db927-138">One can therefore envisage workflows that:</span></span>
   * <span data-ttu-id="db927-139">use Python and Pandas for data pre-processing and cleaning,</span><span class="sxs-lookup"><span data-stu-id="db927-139">use Python and Pandas for data pre-processing and cleaning,</span></span> 
   * <span data-ttu-id="db927-140">feed the data to a SQL transformation, joining multiple datasets to form features,</span><span class="sxs-lookup"><span data-stu-id="db927-140">feed the data to a SQL transformation, joining multiple datasets to form features,</span></span> 
   * <span data-ttu-id="db927-141">train models using the extensive collection of algorithms in Azure Machine Learning, and</span><span class="sxs-lookup"><span data-stu-id="db927-141">train models using the extensive collection of algorithms in Azure Machine Learning, and</span></span> 
   * <span data-ttu-id="db927-142">evaluate and post-process the results using R.</span><span class="sxs-lookup"><span data-stu-id="db927-142">evaluate and post-process the results using R.</span></span>

## <a name="basic-usage-scenarios-in-machine-learning-for-python-scripts"></a><span data-ttu-id="db927-143">Basic usage scenarios in Machine Learning for Python scripts</span><span class="sxs-lookup"><span data-stu-id="db927-143">Basic usage scenarios in Machine Learning for Python scripts</span></span>
<span data-ttu-id="db927-144">In this section, we survey some of the basic uses of the [Execute Python Script][execute-python-script] module.</span><span class="sxs-lookup"><span data-stu-id="db927-144">In this section, we survey some of the basic uses of the [Execute Python Script][execute-python-script] module.</span></span>
<span data-ttu-id="db927-145">As mentioned earlier, any inputs to the Python module are exposed as Pandas data frames.</span><span class="sxs-lookup"><span data-stu-id="db927-145">As mentioned earlier, any inputs to the Python module are exposed as Pandas data frames.</span></span> <span data-ttu-id="db927-146">More information on Python Pandas and how it can be used to manipulate data effectively and efficiently can be found in *Python for Data Analysis* (O'Reilly, 2012) by W. McKinney.</span><span class="sxs-lookup"><span data-stu-id="db927-146">More information on Python Pandas and how it can be used to manipulate data effectively and efficiently can be found in *Python for Data Analysis* (O'Reilly, 2012) by W. McKinney.</span></span> <span data-ttu-id="db927-147">The function must return a single Pandas data frame packaged inside of a Python [sequence](https://docs.python.org/2/c-api/sequence.html) such as a tuple, list, or NumPy array.</span><span class="sxs-lookup"><span data-stu-id="db927-147">The function must return a single Pandas data frame packaged inside of a Python [sequence](https://docs.python.org/2/c-api/sequence.html) such as a tuple, list, or NumPy array.</span></span> <span data-ttu-id="db927-148">The first element of this sequence is then returned in the first output port of the module.</span><span class="sxs-lookup"><span data-stu-id="db927-148">The first element of this sequence is then returned in the first output port of the module.</span></span> <span data-ttu-id="db927-149">This scheme is shown in Figure 2.</span><span class="sxs-lookup"><span data-stu-id="db927-149">This scheme is shown in Figure 2.</span></span>

![image3](https://docstestmedia1.blob.core.windows.net/azure-media/articles/machine-learning/media/machine-learning-execute-python-scripts/map-of-python-script-inputs-outputs.png)

<span data-ttu-id="db927-151">Figure 2.</span><span class="sxs-lookup"><span data-stu-id="db927-151">Figure 2.</span></span> <span data-ttu-id="db927-152">Mapping of input ports to parameters and return value to output port.</span><span class="sxs-lookup"><span data-stu-id="db927-152">Mapping of input ports to parameters and return value to output port.</span></span>

<span data-ttu-id="db927-153">More detailed semantics of how the input ports get mapped to parameters of the `azureml_main` function are shown in Table 1:</span><span class="sxs-lookup"><span data-stu-id="db927-153">More detailed semantics of how the input ports get mapped to parameters of the `azureml_main` function are shown in Table 1:</span></span>

![image1T](https://docstestmedia1.blob.core.windows.net/azure-media/articles/machine-learning/media/machine-learning-execute-python-scripts/python-script-inputs-mapped-to-parameters.png)

<span data-ttu-id="db927-155">Table 1.</span><span class="sxs-lookup"><span data-stu-id="db927-155">Table 1.</span></span> <span data-ttu-id="db927-156">Mapping of input ports to function parameters.</span><span class="sxs-lookup"><span data-stu-id="db927-156">Mapping of input ports to function parameters.</span></span>

<span data-ttu-id="db927-157">The mapping between input ports and function parameters is positional.</span><span class="sxs-lookup"><span data-stu-id="db927-157">The mapping between input ports and function parameters is positional.</span></span> <span data-ttu-id="db927-158">The first connected input port is mapped to the first parameter of the function and the second input (if connected) is mapped to the second parameter of the function.</span><span class="sxs-lookup"><span data-stu-id="db927-158">The first connected input port is mapped to the first parameter of the function and the second input (if connected) is mapped to the second parameter of the function.</span></span>

## <a name="translation-of-input-and-output-types"></a><span data-ttu-id="db927-159">Translation of input and output types</span><span class="sxs-lookup"><span data-stu-id="db927-159">Translation of input and output types</span></span>
<span data-ttu-id="db927-160">As explained earlier, input datasets in Azure Machine Learning are converted to data frames in Pandas and output data frames are converted back to Azure Machine Learning datasets.</span><span class="sxs-lookup"><span data-stu-id="db927-160">As explained earlier, input datasets in Azure Machine Learning are converted to data frames in Pandas and output data frames are converted back to Azure Machine Learning datasets.</span></span> <span data-ttu-id="db927-161">The following conversions are performed:</span><span class="sxs-lookup"><span data-stu-id="db927-161">The following conversions are performed:</span></span>

1. <span data-ttu-id="db927-162">String and numeric columns are converted as-is and missing values in a dataset are converted to ‘NA’ values in Pandas.</span><span class="sxs-lookup"><span data-stu-id="db927-162">String and numeric columns are converted as-is and missing values in a dataset are converted to ‘NA’ values in Pandas.</span></span> <span data-ttu-id="db927-163">The same conversion happens on the way back (NA values in Pandas are converted to missing values in Azure Machine Learning).</span><span class="sxs-lookup"><span data-stu-id="db927-163">The same conversion happens on the way back (NA values in Pandas are converted to missing values in Azure Machine Learning).</span></span>
2. <span data-ttu-id="db927-164">Index vectors in Pandas are not supported in Azure Machine Learning.</span><span class="sxs-lookup"><span data-stu-id="db927-164">Index vectors in Pandas are not supported in Azure Machine Learning.</span></span> <span data-ttu-id="db927-165">All input data frames in the Python function always have a 64-bit numerical index from 0 through the number of rows minus 1.</span><span class="sxs-lookup"><span data-stu-id="db927-165">All input data frames in the Python function always have a 64-bit numerical index from 0 through the number of rows minus 1.</span></span> 
3. <span data-ttu-id="db927-166">Azure Machine Learning datasets cannot have duplicate column names and column names that are not strings.</span><span class="sxs-lookup"><span data-stu-id="db927-166">Azure Machine Learning datasets cannot have duplicate column names and column names that are not strings.</span></span> <span data-ttu-id="db927-167">If an output data frame contains non-numeric columns, the framework calls `str` on the column names.</span><span class="sxs-lookup"><span data-stu-id="db927-167">If an output data frame contains non-numeric columns, the framework calls `str` on the column names.</span></span> <span data-ttu-id="db927-168">Likewise, any duplicate column names are automatically mangled to insure the names are unique.</span><span class="sxs-lookup"><span data-stu-id="db927-168">Likewise, any duplicate column names are automatically mangled to insure the names are unique.</span></span> <span data-ttu-id="db927-169">The suffix (2) is added to the first duplicate, (3) to the second duplicate, etc.</span><span class="sxs-lookup"><span data-stu-id="db927-169">The suffix (2) is added to the first duplicate, (3) to the second duplicate, etc.</span></span>

## <a name="operationalizing-python-scripts"></a><span data-ttu-id="db927-170">Operationalizing Python scripts</span><span class="sxs-lookup"><span data-stu-id="db927-170">Operationalizing Python scripts</span></span>
<span data-ttu-id="db927-171">Any [Execute Python Script][execute-python-script] modules used in a scoring experiment are called when published as a web service.</span><span class="sxs-lookup"><span data-stu-id="db927-171">Any [Execute Python Script][execute-python-script] modules used in a scoring experiment are called when published as a web service.</span></span> <span data-ttu-id="db927-172">For example, Figure 3 shows a scoring experiment containing the code to evaluate a single Python expression.</span><span class="sxs-lookup"><span data-stu-id="db927-172">For example, Figure 3 shows a scoring experiment containing the code to evaluate a single Python expression.</span></span> 

![image4](https://docstestmedia1.blob.core.windows.net/azure-media/articles/machine-learning/media/machine-learning-execute-python-scripts/figure3a.png)

![image5](https://docstestmedia1.blob.core.windows.net/azure-media/articles/machine-learning/media/machine-learning-execute-python-scripts/python-script-with-python-pandas.png)

<span data-ttu-id="db927-175">Figure 3.</span><span class="sxs-lookup"><span data-stu-id="db927-175">Figure 3.</span></span> <span data-ttu-id="db927-176">Web service for evaluating a Python expression.</span><span class="sxs-lookup"><span data-stu-id="db927-176">Web service for evaluating a Python expression.</span></span>

<span data-ttu-id="db927-177">A web service created from this experiment takes as input a Python expression (as a string), sends it to the Python interpreter and returns a table containing both the expression and the evaluated result.</span><span class="sxs-lookup"><span data-stu-id="db927-177">A web service created from this experiment takes as input a Python expression (as a string), sends it to the Python interpreter and returns a table containing both the expression and the evaluated result.</span></span>

## <a name="importing-existing-python-script-modules"></a><span data-ttu-id="db927-178">Importing existing Python script modules</span><span class="sxs-lookup"><span data-stu-id="db927-178">Importing existing Python script modules</span></span>
<span data-ttu-id="db927-179">A common use-case for many data scientists is to incorporate existing Python scripts into Azure Machine Learning experiments.</span><span class="sxs-lookup"><span data-stu-id="db927-179">A common use-case for many data scientists is to incorporate existing Python scripts into Azure Machine Learning experiments.</span></span> <span data-ttu-id="db927-180">Instead of concatenating and pasting all the code into a single script box, the [Execute Python Script][execute-python-script] module accepts a third input port to which a zip file that contains the Python modules can be connected.</span><span class="sxs-lookup"><span data-stu-id="db927-180">Instead of concatenating and pasting all the code into a single script box, the [Execute Python Script][execute-python-script] module accepts a third input port to which a zip file that contains the Python modules can be connected.</span></span> <span data-ttu-id="db927-181">The file is then unzipped by the execution framework at runtime and the contents are added to the library path of the Python interpreter.</span><span class="sxs-lookup"><span data-stu-id="db927-181">The file is then unzipped by the execution framework at runtime and the contents are added to the library path of the Python interpreter.</span></span> <span data-ttu-id="db927-182">The `azureml_main` entry point function can then import these modules directly.</span><span class="sxs-lookup"><span data-stu-id="db927-182">The `azureml_main` entry point function can then import these modules directly.</span></span>

<span data-ttu-id="db927-183">As an example, consider the file Hello.py containing a simple “Hello, World” function.</span><span class="sxs-lookup"><span data-stu-id="db927-183">As an example, consider the file Hello.py containing a simple “Hello, World” function.</span></span>

![image6](https://docstestmedia1.blob.core.windows.net/azure-media/articles/machine-learning/media/machine-learning-execute-python-scripts/figure4.png)

<span data-ttu-id="db927-185">Figure 4.</span><span class="sxs-lookup"><span data-stu-id="db927-185">Figure 4.</span></span> <span data-ttu-id="db927-186">User-defined function.</span><span class="sxs-lookup"><span data-stu-id="db927-186">User-defined function.</span></span>

<span data-ttu-id="db927-187">Next, we create a file Hello.zip that contains Hello.py:</span><span class="sxs-lookup"><span data-stu-id="db927-187">Next, we create a file Hello.zip that contains Hello.py:</span></span>

![image7](https://docstestmedia1.blob.core.windows.net/azure-media/articles/machine-learning/media/machine-learning-execute-python-scripts/figure5.png)

<span data-ttu-id="db927-189">Figure 5.</span><span class="sxs-lookup"><span data-stu-id="db927-189">Figure 5.</span></span> <span data-ttu-id="db927-190">Zip file containing user-defined Python code.</span><span class="sxs-lookup"><span data-stu-id="db927-190">Zip file containing user-defined Python code.</span></span>

<span data-ttu-id="db927-191">Then, upload this as a dataset into Azure Machine Learning Studio.</span><span class="sxs-lookup"><span data-stu-id="db927-191">Then, upload this as a dataset into Azure Machine Learning Studio.</span></span> <span data-ttu-id="db927-192">Create and run a simple experiment that uses the Python code in the Hello.zip file by attaching it to the third input port of the Execute Python Script, as shown in this figure.</span><span class="sxs-lookup"><span data-stu-id="db927-192">Create and run a simple experiment that uses the Python code in the Hello.zip file by attaching it to the third input port of the Execute Python Script, as shown in this figure.</span></span>

![image8](https://docstestmedia1.blob.core.windows.net/azure-media/articles/machine-learning/media/machine-learning-execute-python-scripts/figure6a.png)

![image9](https://docstestmedia1.blob.core.windows.net/azure-media/articles/machine-learning/media/machine-learning-execute-python-scripts/figure6b.png)

<span data-ttu-id="db927-195">Figure 6.</span><span class="sxs-lookup"><span data-stu-id="db927-195">Figure 6.</span></span> <span data-ttu-id="db927-196">Sample experiment with user-defined Python code uploaded as a zip file.</span><span class="sxs-lookup"><span data-stu-id="db927-196">Sample experiment with user-defined Python code uploaded as a zip file.</span></span>

<span data-ttu-id="db927-197">The module output shows that the zip file has been unpackaged and the function `print_hello` has indeed been run.</span><span class="sxs-lookup"><span data-stu-id="db927-197">The module output shows that the zip file has been unpackaged and the function `print_hello` has indeed been run.</span></span>
<span data-ttu-id="db927-198"> 
![image10](https://docstestmedia1.blob.core.windows.net/azure-media/articles/machine-learning/media/machine-learning-execute-python-scripts/figure7.png)</span><span class="sxs-lookup"><span data-stu-id="db927-198"> 
![image10](https://docstestmedia1.blob.core.windows.net/azure-media/articles/machine-learning/media/machine-learning-execute-python-scripts/figure7.png)</span></span>

<span data-ttu-id="db927-199">Figure 7.</span><span class="sxs-lookup"><span data-stu-id="db927-199">Figure 7.</span></span> <span data-ttu-id="db927-200">User-defined function in use inside the [Execute Python Script][execute-python-script] module.</span><span class="sxs-lookup"><span data-stu-id="db927-200">User-defined function in use inside the [Execute Python Script][execute-python-script] module.</span></span>

## <a name="working-with-visualizations"></a><span data-ttu-id="db927-201">Working with visualizations</span><span class="sxs-lookup"><span data-stu-id="db927-201">Working with visualizations</span></span>
<span data-ttu-id="db927-202">Plots created using MatplotLib that can be visualized on the browser can be returned by the [Execute Python Script][execute-python-script].</span><span class="sxs-lookup"><span data-stu-id="db927-202">Plots created using MatplotLib that can be visualized on the browser can be returned by the [Execute Python Script][execute-python-script].</span></span> <span data-ttu-id="db927-203">But the plots are not automatically redirected to images as they are when using R. So the user must explicitly save any plots to PNG files if they are to be returned back to Azure Machine Learning.</span><span class="sxs-lookup"><span data-stu-id="db927-203">But the plots are not automatically redirected to images as they are when using R. So the user must explicitly save any plots to PNG files if they are to be returned back to Azure Machine Learning.</span></span> 

<span data-ttu-id="db927-204">In order to generate images from MatplotLib, you must compete the following procedure:</span><span class="sxs-lookup"><span data-stu-id="db927-204">In order to generate images from MatplotLib, you must compete the following procedure:</span></span>

* <span data-ttu-id="db927-205">switch the backend to “AGG” from the default Qt-based renderer</span><span class="sxs-lookup"><span data-stu-id="db927-205">switch the backend to “AGG” from the default Qt-based renderer</span></span> 
* <span data-ttu-id="db927-206">create a new figure object</span><span class="sxs-lookup"><span data-stu-id="db927-206">create a new figure object</span></span> 
* <span data-ttu-id="db927-207">get the axis and generate all plots into it</span><span class="sxs-lookup"><span data-stu-id="db927-207">get the axis and generate all plots into it</span></span> 
* <span data-ttu-id="db927-208">save the figure to a PNG file</span><span class="sxs-lookup"><span data-stu-id="db927-208">save the figure to a PNG file</span></span> 

<span data-ttu-id="db927-209">This process is illustrated in the following Figure 8 that creates a scatter plot matrix using the scatter_matrix function in Pandas.</span><span class="sxs-lookup"><span data-stu-id="db927-209">This process is illustrated in the following Figure 8 that creates a scatter plot matrix using the scatter_matrix function in Pandas.</span></span>

![image1v](https://docstestmedia1.blob.core.windows.net/azure-media/articles/machine-learning/media/machine-learning-execute-python-scripts/figure-v1-8.png)

<span data-ttu-id="db927-211">Figure 8.</span><span class="sxs-lookup"><span data-stu-id="db927-211">Figure 8.</span></span> <span data-ttu-id="db927-212">Saving MatplotLib figures to images.</span><span class="sxs-lookup"><span data-stu-id="db927-212">Saving MatplotLib figures to images.</span></span>

<span data-ttu-id="db927-213">Figure 9 shows an experiment that uses the script shown previously to return plots via the second output port.</span><span class="sxs-lookup"><span data-stu-id="db927-213">Figure 9 shows an experiment that uses the script shown previously to return plots via the second output port.</span></span>

![image2v](https://docstestmedia1.blob.core.windows.net/azure-media/articles/machine-learning/media/machine-learning-execute-python-scripts/figure-v2-9a.png) 

![image2v](https://docstestmedia1.blob.core.windows.net/azure-media/articles/machine-learning/media/machine-learning-execute-python-scripts/figure-v2-9b.png) 

<span data-ttu-id="db927-216">Figure 9.</span><span class="sxs-lookup"><span data-stu-id="db927-216">Figure 9.</span></span> <span data-ttu-id="db927-217">Visualizing plots generated from Python code.</span><span class="sxs-lookup"><span data-stu-id="db927-217">Visualizing plots generated from Python code.</span></span>

<span data-ttu-id="db927-218">It is possible to return multiple figures by saving them into different images, the Azure Machine Learning runtime picks up all images and concatenates them for visualization.</span><span class="sxs-lookup"><span data-stu-id="db927-218">It is possible to return multiple figures by saving them into different images, the Azure Machine Learning runtime picks up all images and concatenates them for visualization.</span></span>

## <a name="advanced-examples"></a><span data-ttu-id="db927-219">Advanced examples</span><span class="sxs-lookup"><span data-stu-id="db927-219">Advanced examples</span></span>
<span data-ttu-id="db927-220">The Anaconda environment installed in Azure Machine Learning contains common packages such as NumPy, SciPy, and Scikits-Learn and these can be effectively used for various data processing tasks in a typical machine learning pipeline.</span><span class="sxs-lookup"><span data-stu-id="db927-220">The Anaconda environment installed in Azure Machine Learning contains common packages such as NumPy, SciPy, and Scikits-Learn and these can be effectively used for various data processing tasks in a typical machine learning pipeline.</span></span> <span data-ttu-id="db927-221">As an example, the following experiment and script illustrates the use of ensemble learners in Scikits-Learn to compute feature importance scores for a dataset.</span><span class="sxs-lookup"><span data-stu-id="db927-221">As an example, the following experiment and script illustrates the use of ensemble learners in Scikits-Learn to compute feature importance scores for a dataset.</span></span> <span data-ttu-id="db927-222">The scores can then be used to perform supervised feature selection before feeding into another machine learning model.</span><span class="sxs-lookup"><span data-stu-id="db927-222">The scores can then be used to perform supervised feature selection before feeding into another machine learning model.</span></span>

<span data-ttu-id="db927-223">The Python function to compute the importance scores and order the features based on it is shown below:</span><span class="sxs-lookup"><span data-stu-id="db927-223">The Python function to compute the importance scores and order the features based on it is shown below:</span></span>

![image11](https://docstestmedia1.blob.core.windows.net/azure-media/articles/machine-learning/media/machine-learning-execute-python-scripts/figure8.png)

<span data-ttu-id="db927-225">Figure 10.</span><span class="sxs-lookup"><span data-stu-id="db927-225">Figure 10.</span></span> <span data-ttu-id="db927-226">Function to rank features by scores.</span><span class="sxs-lookup"><span data-stu-id="db927-226">Function to rank features by scores.</span></span>
<span data-ttu-id="db927-227">  The following experiment then computes and returns the importance scores of features in the “Pima Indian Diabetes” dataset in Azure Machine Learning:</span><span class="sxs-lookup"><span data-stu-id="db927-227">  The following experiment then computes and returns the importance scores of features in the “Pima Indian Diabetes” dataset in Azure Machine Learning:</span></span>

<span data-ttu-id="db927-228">![image12](https://docstestmedia1.blob.core.windows.net/azure-media/articles/machine-learning/media/machine-learning-execute-python-scripts/figure9a.png)
![image13](https://docstestmedia1.blob.core.windows.net/azure-media/articles/machine-learning/media/machine-learning-execute-python-scripts/figure9b.png)</span><span class="sxs-lookup"><span data-stu-id="db927-228">![image12](https://docstestmedia1.blob.core.windows.net/azure-media/articles/machine-learning/media/machine-learning-execute-python-scripts/figure9a.png)
![image13](https://docstestmedia1.blob.core.windows.net/azure-media/articles/machine-learning/media/machine-learning-execute-python-scripts/figure9b.png)</span></span>    

<span data-ttu-id="db927-229">Figure 11.</span><span class="sxs-lookup"><span data-stu-id="db927-229">Figure 11.</span></span> <span data-ttu-id="db927-230">Experiment to rank features in the Pima Indian Diabetes dataset.</span><span class="sxs-lookup"><span data-stu-id="db927-230">Experiment to rank features in the Pima Indian Diabetes dataset.</span></span>

## <a name="limitations"></a><span data-ttu-id="db927-231">Limitations</span><span class="sxs-lookup"><span data-stu-id="db927-231">Limitations</span></span>
<span data-ttu-id="db927-232">The [Execute Python Script][execute-python-script] currently has the following limitations:</span><span class="sxs-lookup"><span data-stu-id="db927-232">The [Execute Python Script][execute-python-script] currently has the following limitations:</span></span>

1. <span data-ttu-id="db927-233">*Sandboxed execution.*</span><span class="sxs-lookup"><span data-stu-id="db927-233">*Sandboxed execution.*</span></span> <span data-ttu-id="db927-234">The Python runtime is currently sandboxed and, as a result, does not allow access to the network or to the local file system in a persistent manner.</span><span class="sxs-lookup"><span data-stu-id="db927-234">The Python runtime is currently sandboxed and, as a result, does not allow access to the network or to the local file system in a persistent manner.</span></span> <span data-ttu-id="db927-235">All files saved locally are isolated and deleted once the module finishes.</span><span class="sxs-lookup"><span data-stu-id="db927-235">All files saved locally are isolated and deleted once the module finishes.</span></span> <span data-ttu-id="db927-236">The Python code cannot access most directories on the machine it runs on, the exception being the current directory and its subdirectories.</span><span class="sxs-lookup"><span data-stu-id="db927-236">The Python code cannot access most directories on the machine it runs on, the exception being the current directory and its subdirectories.</span></span>
2. <span data-ttu-id="db927-237">*Lack of sophisticated development and debugging support.*</span><span class="sxs-lookup"><span data-stu-id="db927-237">*Lack of sophisticated development and debugging support.*</span></span> <span data-ttu-id="db927-238">The Python module currently does not support IDE features such as intellisense and debugging.</span><span class="sxs-lookup"><span data-stu-id="db927-238">The Python module currently does not support IDE features such as intellisense and debugging.</span></span> <span data-ttu-id="db927-239">Also, if the module fails at runtime, the full Python stack trace is available, but must be viewed in the output log for the module.</span><span class="sxs-lookup"><span data-stu-id="db927-239">Also, if the module fails at runtime, the full Python stack trace is available, but must be viewed in the output log for the module.</span></span> <span data-ttu-id="db927-240">We currently recommend that you develop and debug their Python scripts in an environment such as IPython and then import the code into the module.</span><span class="sxs-lookup"><span data-stu-id="db927-240">We currently recommend that you develop and debug their Python scripts in an environment such as IPython and then import the code into the module.</span></span>
3. <span data-ttu-id="db927-241">*Single data frame output.*</span><span class="sxs-lookup"><span data-stu-id="db927-241">*Single data frame output.*</span></span> <span data-ttu-id="db927-242">The Python entry point is only permitted to return a single data frame as output.</span><span class="sxs-lookup"><span data-stu-id="db927-242">The Python entry point is only permitted to return a single data frame as output.</span></span> <span data-ttu-id="db927-243">It is not currently possible to return arbitrary Python objects such as trained models directly back to the Azure Machine Learning runtime.</span><span class="sxs-lookup"><span data-stu-id="db927-243">It is not currently possible to return arbitrary Python objects such as trained models directly back to the Azure Machine Learning runtime.</span></span> <span data-ttu-id="db927-244">Like [Execute R Script][execute-r-script], which has the same limitation, it is however possible in many cases to pickle objects into a byte array and then return that inside of a data frame.</span><span class="sxs-lookup"><span data-stu-id="db927-244">Like [Execute R Script][execute-r-script], which has the same limitation, it is however possible in many cases to pickle objects into a byte array and then return that inside of a data frame.</span></span>
4. <span data-ttu-id="db927-245">*Inability to customize Python installation*.</span><span class="sxs-lookup"><span data-stu-id="db927-245">*Inability to customize Python installation*.</span></span> <span data-ttu-id="db927-246">Currently, the only way to add custom Python modules is via the zip file mechanism described earlier.</span><span class="sxs-lookup"><span data-stu-id="db927-246">Currently, the only way to add custom Python modules is via the zip file mechanism described earlier.</span></span> <span data-ttu-id="db927-247">While this is feasible for small modules, it is cumbersome for large modules (especially those with native DLLs) or a large number of modules.</span><span class="sxs-lookup"><span data-stu-id="db927-247">While this is feasible for small modules, it is cumbersome for large modules (especially those with native DLLs) or a large number of modules.</span></span> 

## <a name="conclusions"></a><span data-ttu-id="db927-248">Conclusions</span><span class="sxs-lookup"><span data-stu-id="db927-248">Conclusions</span></span>
<span data-ttu-id="db927-249">The [Execute Python Script][execute-python-script] module allows a data scientist to incorporate existing Python code into cloud-hosted machine learning workflows in Azure Machine Learning and to seamlessly operationalize them as part of a web service.</span><span class="sxs-lookup"><span data-stu-id="db927-249">The [Execute Python Script][execute-python-script] module allows a data scientist to incorporate existing Python code into cloud-hosted machine learning workflows in Azure Machine Learning and to seamlessly operationalize them as part of a web service.</span></span> <span data-ttu-id="db927-250">The Python script module interoperates naturally with other modules in Azure Machine Learning and can be used for a range of tasks from data exploration to pre-processing, to feature extraction, to evaluation and post-processing of the results.</span><span class="sxs-lookup"><span data-stu-id="db927-250">The Python script module interoperates naturally with other modules in Azure Machine Learning and can be used for a range of tasks from data exploration to pre-processing, to feature extraction, to evaluation and post-processing of the results.</span></span> <span data-ttu-id="db927-251">The backend runtime used for execution is based on Anaconda, a well-tested and widely used Python distribution.</span><span class="sxs-lookup"><span data-stu-id="db927-251">The backend runtime used for execution is based on Anaconda, a well-tested and widely used Python distribution.</span></span> <span data-ttu-id="db927-252">This makes it simple for you to on-board existing code assets into the cloud.</span><span class="sxs-lookup"><span data-stu-id="db927-252">This makes it simple for you to on-board existing code assets into the cloud.</span></span>

<span data-ttu-id="db927-253">We expect to provide additional functionality to the [Execute Python Script][execute-python-script] module such as the ability to train and operationalize models in Python and to add better support for the development and debugging code in Azure Machine Learning Studio.</span><span class="sxs-lookup"><span data-stu-id="db927-253">We expect to provide additional functionality to the [Execute Python Script][execute-python-script] module such as the ability to train and operationalize models in Python and to add better support for the development and debugging code in Azure Machine Learning Studio.</span></span>

## <a name="next-steps"></a><span data-ttu-id="db927-254">Next steps</span><span class="sxs-lookup"><span data-stu-id="db927-254">Next steps</span></span>
<span data-ttu-id="db927-255">For more information, see the [Python Developer Center](/develop/python/).</span><span class="sxs-lookup"><span data-stu-id="db927-255">For more information, see the [Python Developer Center](/develop/python/).</span></span>

<!-- Module References -->
[execute-python-script]: https://msdn.microsoft.com/library/azure/cdb56f95-7f4c-404d-bde7-5bb972e6f232/
[execute-r-script]: https://msdn.microsoft.com/library/azure/30806023-392b-42e0-94d6-6b775a6e0fd5/

















