---
title: Service concepts in Azure IoT Hub Device Provisioning Service | Microsoft Docs
description: Describes service provisioning concepts specific to devices with the Device Provisioning Service and IoT Hub
author: nberdy
ms.author: nberdy
ms.date: 03/30/2018
ms.topic: conceptual
ms.service: iot-dps
services: iot-dps
manager: briz
ms.openlocfilehash: ca2ea3c000e811223ded3022021c2516f547ae66
ms.sourcegitcommit: d1451406a010fd3aa854dc8e5b77dc5537d8050e
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 09/13/2018
ms.locfileid: "44865996"
---
# <a name="iot-hub-device-provisioning-service-concepts"></a><span data-ttu-id="60567-103">IoT Hub Device Provisioning Service concepts</span><span class="sxs-lookup"><span data-stu-id="60567-103">IoT Hub Device Provisioning Service concepts</span></span>

<span data-ttu-id="60567-104">IoT Hub Device Provisioning Service is a helper service for IoT Hub that you use to configure zero-touch device provisioning to a specified IoT hub.</span><span class="sxs-lookup"><span data-stu-id="60567-104">IoT Hub Device Provisioning Service is a helper service for IoT Hub that you use to configure zero-touch device provisioning to a specified IoT hub.</span></span> <span data-ttu-id="60567-105">With the Device Provisioning Service, you can [auto-provision](concepts-auto-provisioning.md) millions of devices in a secure and scalable manner.</span><span class="sxs-lookup"><span data-stu-id="60567-105">With the Device Provisioning Service, you can [auto-provision](concepts-auto-provisioning.md) millions of devices in a secure and scalable manner.</span></span>

<span data-ttu-id="60567-106">Device provisioning is a two part process.</span><span class="sxs-lookup"><span data-stu-id="60567-106">Device provisioning is a two part process.</span></span> <span data-ttu-id="60567-107">The first part is establishing the initial connection between the device and the IoT solution by *registering* the device.</span><span class="sxs-lookup"><span data-stu-id="60567-107">The first part is establishing the initial connection between the device and the IoT solution by *registering* the device.</span></span> <span data-ttu-id="60567-108">The second part is applying the proper *configuration* to the device based on the specific requirements of the solution.</span><span class="sxs-lookup"><span data-stu-id="60567-108">The second part is applying the proper *configuration* to the device based on the specific requirements of the solution.</span></span> <span data-ttu-id="60567-109">Once both steps have been completed, the device has been fully *provisioned*.</span><span class="sxs-lookup"><span data-stu-id="60567-109">Once both steps have been completed, the device has been fully *provisioned*.</span></span> <span data-ttu-id="60567-110">Device Provisioning Service automates both steps to provide a seamless provisioning experience for the device.</span><span class="sxs-lookup"><span data-stu-id="60567-110">Device Provisioning Service automates both steps to provide a seamless provisioning experience for the device.</span></span>

<span data-ttu-id="60567-111">This article gives an overview of the provisioning concepts most applicable to managing the *service*.</span><span class="sxs-lookup"><span data-stu-id="60567-111">This article gives an overview of the provisioning concepts most applicable to managing the *service*.</span></span> <span data-ttu-id="60567-112">This article is most relevant to personas involved in the [cloud setup step](about-iot-dps.md#cloud-setup-step) of getting a device ready for deployment.</span><span class="sxs-lookup"><span data-stu-id="60567-112">This article is most relevant to personas involved in the [cloud setup step](about-iot-dps.md#cloud-setup-step) of getting a device ready for deployment.</span></span>

## <a name="service-operations-endpoint"></a><span data-ttu-id="60567-113">Service operations endpoint</span><span class="sxs-lookup"><span data-stu-id="60567-113">Service operations endpoint</span></span>

<span data-ttu-id="60567-114">The service operations endpoint is the endpoint for managing the service settings and maintaining the enrollment list.</span><span class="sxs-lookup"><span data-stu-id="60567-114">The service operations endpoint is the endpoint for managing the service settings and maintaining the enrollment list.</span></span> <span data-ttu-id="60567-115">This endpoint is only used by the service administrator; it is not used by devices.</span><span class="sxs-lookup"><span data-stu-id="60567-115">This endpoint is only used by the service administrator; it is not used by devices.</span></span>

## <a name="device-provisioning-endpoint"></a><span data-ttu-id="60567-116">Device provisioning endpoint</span><span class="sxs-lookup"><span data-stu-id="60567-116">Device provisioning endpoint</span></span>

<span data-ttu-id="60567-117">The device provisioning endpoint is the single endpoint all devices use for auto-provisioning.</span><span class="sxs-lookup"><span data-stu-id="60567-117">The device provisioning endpoint is the single endpoint all devices use for auto-provisioning.</span></span> <span data-ttu-id="60567-118">The URL is the same for all provisioning service instances, to eliminate the need to reflash devices with new connection information in supply chain scenarios.</span><span class="sxs-lookup"><span data-stu-id="60567-118">The URL is the same for all provisioning service instances, to eliminate the need to reflash devices with new connection information in supply chain scenarios.</span></span> <span data-ttu-id="60567-119">The ID scope ensures tenant isolation.</span><span class="sxs-lookup"><span data-stu-id="60567-119">The ID scope ensures tenant isolation.</span></span>

## <a name="linked-iot-hubs"></a><span data-ttu-id="60567-120">Linked IoT hubs</span><span class="sxs-lookup"><span data-stu-id="60567-120">Linked IoT hubs</span></span>

<span data-ttu-id="60567-121">The Device Provisioning Service can only provision devices to IoT hubs that have been linked to it.</span><span class="sxs-lookup"><span data-stu-id="60567-121">The Device Provisioning Service can only provision devices to IoT hubs that have been linked to it.</span></span> <span data-ttu-id="60567-122">Linking an IoT hub to an instance of the Device Provisioning service gives the service read/write permissions to the IoT hub's device registry; with the link, a Device Provisioning service can register a device ID and set the initial configuration in the device twin.</span><span class="sxs-lookup"><span data-stu-id="60567-122">Linking an IoT hub to an instance of the Device Provisioning service gives the service read/write permissions to the IoT hub's device registry; with the link, a Device Provisioning service can register a device ID and set the initial configuration in the device twin.</span></span> <span data-ttu-id="60567-123">Linked IoT hubs may be in any Azure region.</span><span class="sxs-lookup"><span data-stu-id="60567-123">Linked IoT hubs may be in any Azure region.</span></span> <span data-ttu-id="60567-124">You may link hubs in other subscriptions to your provisioning service.</span><span class="sxs-lookup"><span data-stu-id="60567-124">You may link hubs in other subscriptions to your provisioning service.</span></span>

## <a name="allocation-policy"></a><span data-ttu-id="60567-125">Allocation policy</span><span class="sxs-lookup"><span data-stu-id="60567-125">Allocation policy</span></span>

<span data-ttu-id="60567-126">The service-level setting that determines how Device Provisioning Service assigns devices to an IoT hub.</span><span class="sxs-lookup"><span data-stu-id="60567-126">The service-level setting that determines how Device Provisioning Service assigns devices to an IoT hub.</span></span> <span data-ttu-id="60567-127">There are three supported allocation policies:</span><span class="sxs-lookup"><span data-stu-id="60567-127">There are three supported allocation policies:</span></span>

* <span data-ttu-id="60567-128">**Evenly weighted distribution**: linked IoT hubs are equally likely to have devices provisioned to them.</span><span class="sxs-lookup"><span data-stu-id="60567-128">**Evenly weighted distribution**: linked IoT hubs are equally likely to have devices provisioned to them.</span></span> <span data-ttu-id="60567-129">The default setting.</span><span class="sxs-lookup"><span data-stu-id="60567-129">The default setting.</span></span> <span data-ttu-id="60567-130">If you are provisioning devices to only one IoT hub, you can keep this setting.</span><span class="sxs-lookup"><span data-stu-id="60567-130">If you are provisioning devices to only one IoT hub, you can keep this setting.</span></span>

* <span data-ttu-id="60567-131">**Lowest latency**: devices are provisioned to an IoT hub with the lowest latency to the device.</span><span class="sxs-lookup"><span data-stu-id="60567-131">**Lowest latency**: devices are provisioned to an IoT hub with the lowest latency to the device.</span></span> <span data-ttu-id="60567-132">If multiple linked IoT hubs would provide the same lowest latency, the provisioning service hashes devices across those hubs</span><span class="sxs-lookup"><span data-stu-id="60567-132">If multiple linked IoT hubs would provide the same lowest latency, the provisioning service hashes devices across those hubs</span></span>

* <span data-ttu-id="60567-133">**Static configuration via the enrollment list**: specification of the desired IoT hub in the enrollment list takes priority over the service-level allocation policy.</span><span class="sxs-lookup"><span data-stu-id="60567-133">**Static configuration via the enrollment list**: specification of the desired IoT hub in the enrollment list takes priority over the service-level allocation policy.</span></span>

## <a name="enrollment"></a><span data-ttu-id="60567-134">Enrollment</span><span class="sxs-lookup"><span data-stu-id="60567-134">Enrollment</span></span>

<span data-ttu-id="60567-135">An enrollment is the record of devices or groups of devices that may register through auto-provisioning.</span><span class="sxs-lookup"><span data-stu-id="60567-135">An enrollment is the record of devices or groups of devices that may register through auto-provisioning.</span></span> <span data-ttu-id="60567-136">The enrollment record contains  information about the device or group of devices, including:</span><span class="sxs-lookup"><span data-stu-id="60567-136">The enrollment record contains  information about the device or group of devices, including:</span></span>
- <span data-ttu-id="60567-137">the [attestation mechanism](concepts-security.md#attestation-mechanism) used by the device</span><span class="sxs-lookup"><span data-stu-id="60567-137">the [attestation mechanism](concepts-security.md#attestation-mechanism) used by the device</span></span>
- <span data-ttu-id="60567-138">the optional initial desired configuration</span><span class="sxs-lookup"><span data-stu-id="60567-138">the optional initial desired configuration</span></span>
- <span data-ttu-id="60567-139">desired IoT hub</span><span class="sxs-lookup"><span data-stu-id="60567-139">desired IoT hub</span></span>
- <span data-ttu-id="60567-140">the desired device ID</span><span class="sxs-lookup"><span data-stu-id="60567-140">the desired device ID</span></span>

<span data-ttu-id="60567-141">There are two types of enrollments supported by Device Provisioning Service:</span><span class="sxs-lookup"><span data-stu-id="60567-141">There are two types of enrollments supported by Device Provisioning Service:</span></span>

### <a name="enrollment-group"></a><span data-ttu-id="60567-142">Enrollment group</span><span class="sxs-lookup"><span data-stu-id="60567-142">Enrollment group</span></span>

<span data-ttu-id="60567-143">An enrollment group is a group of devices that share a specific attestation mechanism.</span><span class="sxs-lookup"><span data-stu-id="60567-143">An enrollment group is a group of devices that share a specific attestation mechanism.</span></span> <span data-ttu-id="60567-144">All devices in the enrollment group present X.509 certificates that have been signed by the same root or intermediate Certificate Authority (CA).</span><span class="sxs-lookup"><span data-stu-id="60567-144">All devices in the enrollment group present X.509 certificates that have been signed by the same root or intermediate Certificate Authority (CA).</span></span> <span data-ttu-id="60567-145">Enrollment groups can only use the X.509 attestation mechanism.</span><span class="sxs-lookup"><span data-stu-id="60567-145">Enrollment groups can only use the X.509 attestation mechanism.</span></span> <span data-ttu-id="60567-146">The enrollment group name and certificate name must be alphanumeric, lowercase, and may contain hyphens.</span><span class="sxs-lookup"><span data-stu-id="60567-146">The enrollment group name and certificate name must be alphanumeric, lowercase, and may contain hyphens.</span></span>

> [!TIP]
> <span data-ttu-id="60567-147">We recommend using an enrollment group for a large number of devices that share a desired initial configuration, or for devices all going to the same tenant.</span><span class="sxs-lookup"><span data-stu-id="60567-147">We recommend using an enrollment group for a large number of devices that share a desired initial configuration, or for devices all going to the same tenant.</span></span>

### <a name="individual-enrollment"></a><span data-ttu-id="60567-148">Individual enrollment</span><span class="sxs-lookup"><span data-stu-id="60567-148">Individual enrollment</span></span>

<span data-ttu-id="60567-149">An individual enrollment is an entry for a single device that may register.</span><span class="sxs-lookup"><span data-stu-id="60567-149">An individual enrollment is an entry for a single device that may register.</span></span> <span data-ttu-id="60567-150">Individual enrollments may use either X.509 leaf certificates or SAS tokens (from a physical or virtual TPM) as attestation mechanisms.</span><span class="sxs-lookup"><span data-stu-id="60567-150">Individual enrollments may use either X.509 leaf certificates or SAS tokens (from a physical or virtual TPM) as attestation mechanisms.</span></span> <span data-ttu-id="60567-151">The registration ID in an individual enrollment is alphanumeric, lowercase, and may contain hyphens.</span><span class="sxs-lookup"><span data-stu-id="60567-151">The registration ID in an individual enrollment is alphanumeric, lowercase, and may contain hyphens.</span></span> <span data-ttu-id="60567-152">Individual enrollments may have the desired IoT hub device ID specified.</span><span class="sxs-lookup"><span data-stu-id="60567-152">Individual enrollments may have the desired IoT hub device ID specified.</span></span>

> [!TIP]
> <span data-ttu-id="60567-153">We recommend using individual enrollments for devices that require unique initial configurations, or for devices that can only authenticate using SAS tokens via TPM attestation.</span><span class="sxs-lookup"><span data-stu-id="60567-153">We recommend using individual enrollments for devices that require unique initial configurations, or for devices that can only authenticate using SAS tokens via TPM attestation.</span></span>

## <a name="registration"></a><span data-ttu-id="60567-154">Registration</span><span class="sxs-lookup"><span data-stu-id="60567-154">Registration</span></span>

<span data-ttu-id="60567-155">A registration is the record of a device successfully registering/provisioning to an IoT Hub via the Device Provisioning Service.</span><span class="sxs-lookup"><span data-stu-id="60567-155">A registration is the record of a device successfully registering/provisioning to an IoT Hub via the Device Provisioning Service.</span></span> <span data-ttu-id="60567-156">Registration records are created automatically; they can be deleted, but they cannot be updated.</span><span class="sxs-lookup"><span data-stu-id="60567-156">Registration records are created automatically; they can be deleted, but they cannot be updated.</span></span>

## <a name="operations"></a><span data-ttu-id="60567-157">Operations</span><span class="sxs-lookup"><span data-stu-id="60567-157">Operations</span></span>

<span data-ttu-id="60567-158">Operations are the billing unit of the Device Provisioning Service.</span><span class="sxs-lookup"><span data-stu-id="60567-158">Operations are the billing unit of the Device Provisioning Service.</span></span> <span data-ttu-id="60567-159">One operation is the successful completion of one instruction to the service.</span><span class="sxs-lookup"><span data-stu-id="60567-159">One operation is the successful completion of one instruction to the service.</span></span> <span data-ttu-id="60567-160">Operations include device registrations and re-registrations; operations also include service-side changes such as adding enrollment list entries, and updating enrollment list entries.</span><span class="sxs-lookup"><span data-stu-id="60567-160">Operations include device registrations and re-registrations; operations also include service-side changes such as adding enrollment list entries, and updating enrollment list entries.</span></span>
