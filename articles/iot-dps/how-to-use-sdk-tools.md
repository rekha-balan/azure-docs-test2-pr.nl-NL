---
title: Use tools provided in the Azure IoT Hub Device Provisioning Service SDKs to simplify development
description: This document reviews the tools provided in Azure IoT Hub Device Provisioning Service SDKs for development
author: yzhong94
ms.author: yizhon
ms.date: 04/09/2018
ms.topic: conceptual
ms.service: iot-dps
services: iot-dps
manager: arjmands
ms.openlocfilehash: 647f54d8252c594a280f81d661a3de6270bf692b
ms.sourcegitcommit: d1451406a010fd3aa854dc8e5b77dc5537d8050e
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 09/13/2018
ms.locfileid: "44967014"
---
# <a name="how-to-use-tools-provided-in-the-sdks-to-simplify-development-for-provisioning"></a><span data-ttu-id="27b69-103">How to use tools provided in the SDKs to simplify development for provisioning</span><span class="sxs-lookup"><span data-stu-id="27b69-103">How to use tools provided in the SDKs to simplify development for provisioning</span></span>
<span data-ttu-id="27b69-104">The IoT Hub Device Provisioning Service simplifies the provisioning process with zero-touch, just-in-time [auto-provisioning](concepts-auto-provisioning.md) in a secure and scalable manner.</span><span class="sxs-lookup"><span data-stu-id="27b69-104">The IoT Hub Device Provisioning Service simplifies the provisioning process with zero-touch, just-in-time [auto-provisioning](concepts-auto-provisioning.md) in a secure and scalable manner.</span></span>  <span data-ttu-id="27b69-105">Security attestation in the form of X.509 certificate or Trusted Platform Module (TPM) is required.</span><span class="sxs-lookup"><span data-stu-id="27b69-105">Security attestation in the form of X.509 certificate or Trusted Platform Module (TPM) is required.</span></span>  <span data-ttu-id="27b69-106">Microsoft is also partnering with [other security hardware partners](https://azure.microsoft.com/blog/azure-iot-supports-new-security-hardware-to-strengthen-iot-security/) to improve confidence in securing IoT deployment.</span><span class="sxs-lookup"><span data-stu-id="27b69-106">Microsoft is also partnering with [other security hardware partners](https://azure.microsoft.com/blog/azure-iot-supports-new-security-hardware-to-strengthen-iot-security/) to improve confidence in securing IoT deployment.</span></span> <span data-ttu-id="27b69-107">Understanding the hardware security requirement can be quite challenging for developers.</span><span class="sxs-lookup"><span data-stu-id="27b69-107">Understanding the hardware security requirement can be quite challenging for developers.</span></span> <span data-ttu-id="27b69-108">A set of Azure IoT Provisioning Service SDKs are provided so that developers can use a convenience layer for writing clients that talk to the provisioning service.</span><span class="sxs-lookup"><span data-stu-id="27b69-108">A set of Azure IoT Provisioning Service SDKs are provided so that developers can use a convenience layer for writing clients that talk to the provisioning service.</span></span> <span data-ttu-id="27b69-109">The SDKs also provide samples for common scenarios as well as a set of tools to simplify security attestation in development.</span><span class="sxs-lookup"><span data-stu-id="27b69-109">The SDKs also provide samples for common scenarios as well as a set of tools to simplify security attestation in development.</span></span>

## <a name="trusted-platform-module-tpm-simulator"></a><span data-ttu-id="27b69-110">Trusted Platform Module (TPM) simulator</span><span class="sxs-lookup"><span data-stu-id="27b69-110">Trusted Platform Module (TPM) simulator</span></span>
<span data-ttu-id="27b69-111">[TPM](https://docs.microsoft.com/azure/iot-dps/concepts-security#trusted-platform-module-tpm) can refer to a standard for securely storing keys to authenticate the platform, or it can refer to the I/O interface used to interact with the modules implementing the standard.</span><span class="sxs-lookup"><span data-stu-id="27b69-111">[TPM](https://docs.microsoft.com/azure/iot-dps/concepts-security#trusted-platform-module-tpm) can refer to a standard for securely storing keys to authenticate the platform, or it can refer to the I/O interface used to interact with the modules implementing the standard.</span></span> <span data-ttu-id="27b69-112">TPMs can exist as discrete hardware, integrated hardware, firmware-based, or software-based.</span><span class="sxs-lookup"><span data-stu-id="27b69-112">TPMs can exist as discrete hardware, integrated hardware, firmware-based, or software-based.</span></span>  <span data-ttu-id="27b69-113">In production, TPM is located on the device, either as discrete hardware, integrated hardware, or firmware-based.</span><span class="sxs-lookup"><span data-stu-id="27b69-113">In production, TPM is located on the device, either as discrete hardware, integrated hardware, or firmware-based.</span></span> <span data-ttu-id="27b69-114">In the testing phase, a software-based TPM simulator is provided to developers.</span><span class="sxs-lookup"><span data-stu-id="27b69-114">In the testing phase, a software-based TPM simulator is provided to developers.</span></span>  <span data-ttu-id="27b69-115">This simulator is only available for developing on Windows platform for now.</span><span class="sxs-lookup"><span data-stu-id="27b69-115">This simulator is only available for developing on Windows platform for now.</span></span>

<span data-ttu-id="27b69-116">Steps for using the TPM simulator are:</span><span class="sxs-lookup"><span data-stu-id="27b69-116">Steps for using the TPM simulator are:</span></span>
1. <span data-ttu-id="27b69-117">[Prepare the development environment](https://docs.microsoft.com/azure/iot-dps/quick-enroll-device-x509-java#prepare-the-development-environment) and clone the GitHub repository:</span><span class="sxs-lookup"><span data-stu-id="27b69-117">[Prepare the development environment](https://docs.microsoft.com/azure/iot-dps/quick-enroll-device-x509-java#prepare-the-development-environment) and clone the GitHub repository:</span></span>
```
git clone https://github.com/Azure/azure-iot-sdk-java.git
```
2. <span data-ttu-id="27b69-118">Navigate to the TPM simulator folder under ```azure-iot-sdk-java/provisioning/provisioning-tool/tpm-simulator/```.</span><span class="sxs-lookup"><span data-stu-id="27b69-118">Navigate to the TPM simulator folder under ```azure-iot-sdk-java/provisioning/provisioning-tool/tpm-simulator/```.</span></span>
3. <span data-ttu-id="27b69-119">Run Simulator.exe prior to running any client application for provisioning device.</span><span class="sxs-lookup"><span data-stu-id="27b69-119">Run Simulator.exe prior to running any client application for provisioning device.</span></span>
4. <span data-ttu-id="27b69-120">Let the simulator run in the background throughout the provisioning process to obtain registration ID and Endorsement Key.</span><span class="sxs-lookup"><span data-stu-id="27b69-120">Let the simulator run in the background throughout the provisioning process to obtain registration ID and Endorsement Key.</span></span>  <span data-ttu-id="27b69-121">Both values are only valid for one instance of the run.</span><span class="sxs-lookup"><span data-stu-id="27b69-121">Both values are only valid for one instance of the run.</span></span>

## <a name="x509-certificate-generator"></a><span data-ttu-id="27b69-122">X.509 certificate generator</span><span class="sxs-lookup"><span data-stu-id="27b69-122">X.509 certificate generator</span></span>
<span data-ttu-id="27b69-123">[X.509 certificates](https://docs.microsoft.com/azure/iot-dps/concepts-security#x509-certificates) can be used as an attestation mechanism to scale production and simplify device provisioning.</span><span class="sxs-lookup"><span data-stu-id="27b69-123">[X.509 certificates](https://docs.microsoft.com/azure/iot-dps/concepts-security#x509-certificates) can be used as an attestation mechanism to scale production and simplify device provisioning.</span></span>  <span data-ttu-id="27b69-124">There are [several ways](https://docs.microsoft.com/azure/iot-hub/iot-hub-x509ca-overview#how-to-get-an-x509-ca-certificate) to obtain an X.509 certificate:</span><span class="sxs-lookup"><span data-stu-id="27b69-124">There are [several ways](https://docs.microsoft.com/azure/iot-hub/iot-hub-x509ca-overview#how-to-get-an-x509-ca-certificate) to obtain an X.509 certificate:</span></span>
* <span data-ttu-id="27b69-125">For production environment, we recommend purchasing an X.509 CA certificate from a public root certificate authority.</span><span class="sxs-lookup"><span data-stu-id="27b69-125">For production environment, we recommend purchasing an X.509 CA certificate from a public root certificate authority.</span></span>
* <span data-ttu-id="27b69-126">For testing environment, you can generate an X.509 root certificate or X.509 certificate chain using:</span><span class="sxs-lookup"><span data-stu-id="27b69-126">For testing environment, you can generate an X.509 root certificate or X.509 certificate chain using:</span></span>
    * <span data-ttu-id="27b69-127">OpenSSL: You can use scripts for certificate generation:</span><span class="sxs-lookup"><span data-stu-id="27b69-127">OpenSSL: You can use scripts for certificate generation:</span></span>
        * [<span data-ttu-id="27b69-128">Node.js</span><span class="sxs-lookup"><span data-stu-id="27b69-128">Node.js</span></span>](https://github.com/Azure/azure-iot-sdk-node/tree/master/provisioning/tools)
        * [<span data-ttu-id="27b69-129">PowerShell or Bash</span><span class="sxs-lookup"><span data-stu-id="27b69-129">PowerShell or Bash</span></span>](https://github.com/Azure/azure-iot-sdk-c/blob/master/tools/CACertificates/CACertificateOverview.md)
        
    * <span data-ttu-id="27b69-130">Device Identity Composition Engine (DICE) Emulator: DICE can be used for cryptographic device identity and attestation based on TLS protocol and X.509 client certificates.</span><span class="sxs-lookup"><span data-stu-id="27b69-130">Device Identity Composition Engine (DICE) Emulator: DICE can be used for cryptographic device identity and attestation based on TLS protocol and X.509 client certificates.</span></span>  <span data-ttu-id="27b69-131">[Learn](https://www.microsoft.com/research/publication/device-identity-dice-riot-keys-certificates/) more about device identity with DICE.</span><span class="sxs-lookup"><span data-stu-id="27b69-131">[Learn](https://www.microsoft.com/research/publication/device-identity-dice-riot-keys-certificates/) more about device identity with DICE.</span></span>

### <a name="using-x509-certificate-generator-with-dice-emulator"></a><span data-ttu-id="27b69-132">Using X.509 certificate generator with DICE emulator</span><span class="sxs-lookup"><span data-stu-id="27b69-132">Using X.509 certificate generator with DICE emulator</span></span>
<span data-ttu-id="27b69-133">The SDKs provide an X.509 certificate generator with DICE emulator, located in the [Java SDK](https://github.com/Azure/azure-iot-sdk-java/tree/master/provisioning/provisioning-tools/provisioning-x509-cert-generator).</span><span class="sxs-lookup"><span data-stu-id="27b69-133">The SDKs provide an X.509 certificate generator with DICE emulator, located in the [Java SDK](https://github.com/Azure/azure-iot-sdk-java/tree/master/provisioning/provisioning-tools/provisioning-x509-cert-generator).</span></span>  <span data-ttu-id="27b69-134">This generator works cross-platform.</span><span class="sxs-lookup"><span data-stu-id="27b69-134">This generator works cross-platform.</span></span>  <span data-ttu-id="27b69-135">The generated certificate can be used for development in other languages.</span><span class="sxs-lookup"><span data-stu-id="27b69-135">The generated certificate can be used for development in other languages.</span></span>

<span data-ttu-id="27b69-136">Currently, while the DICE Emulator outputs a root certificate, an intermediate certificate, a leaf certificate, and associated private key.</span><span class="sxs-lookup"><span data-stu-id="27b69-136">Currently, while the DICE Emulator outputs a root certificate, an intermediate certificate, a leaf certificate, and associated private key.</span></span>  <span data-ttu-id="27b69-137">However, the root certificate or intermediate certificate cannot be used to sign a separate leaf certificate.</span><span class="sxs-lookup"><span data-stu-id="27b69-137">However, the root certificate or intermediate certificate cannot be used to sign a separate leaf certificate.</span></span>  <span data-ttu-id="27b69-138">If you intend to test group enrollment scenario where one signing certificate is used to sign the leaf certificates of multiple devices, you can use OpenSSL to produce a chain of certificates.</span><span class="sxs-lookup"><span data-stu-id="27b69-138">If you intend to test group enrollment scenario where one signing certificate is used to sign the leaf certificates of multiple devices, you can use OpenSSL to produce a chain of certificates.</span></span>

<span data-ttu-id="27b69-139">To generate X.509 certificate using this generator:</span><span class="sxs-lookup"><span data-stu-id="27b69-139">To generate X.509 certificate using this generator:</span></span>
1. <span data-ttu-id="27b69-140">[Prepare the development environment](https://docs.microsoft.com/azure/iot-dps/quick-enroll-device-x509-java#prepare-the-development-environment) and clone the GitHub repository:</span><span class="sxs-lookup"><span data-stu-id="27b69-140">[Prepare the development environment](https://docs.microsoft.com/azure/iot-dps/quick-enroll-device-x509-java#prepare-the-development-environment) and clone the GitHub repository:</span></span>
```
git clone https://github.com/Azure/azure-iot-sdk-java.git
```
2. <span data-ttu-id="27b69-141">Change the root to azure-iot-sdk-java.</span><span class="sxs-lookup"><span data-stu-id="27b69-141">Change the root to azure-iot-sdk-java.</span></span>
3. <span data-ttu-id="27b69-142">Run ```mvn install -DskipTests=true``` to download all required packages and compile the SDK</span><span class="sxs-lookup"><span data-stu-id="27b69-142">Run ```mvn install -DskipTests=true``` to download all required packages and compile the SDK</span></span>
4. <span data-ttu-id="27b69-143">Navigate to the root for X.509 Certificate Generator in ```azure-iot-sdk-java/provisioning/provisioning-tools/provisioning-x509-cert-generator```.</span><span class="sxs-lookup"><span data-stu-id="27b69-143">Navigate to the root for X.509 Certificate Generator in ```azure-iot-sdk-java/provisioning/provisioning-tools/provisioning-x509-cert-generator```.</span></span>
5. <span data-ttu-id="27b69-144">Build with ```mvn clean install```</span><span class="sxs-lookup"><span data-stu-id="27b69-144">Build with ```mvn clean install```</span></span>
6. <span data-ttu-id="27b69-145">Run the tool using the following commands:</span><span class="sxs-lookup"><span data-stu-id="27b69-145">Run the tool using the following commands:</span></span>
```
cd target
java -jar ./provisioning-x509-cert-generator-{version}-with-deps.jar
```
7. <span data-ttu-id="27b69-146">When prompted, you may optionally enter a _Common Name_ for your certificates.</span><span class="sxs-lookup"><span data-stu-id="27b69-146">When prompted, you may optionally enter a _Common Name_ for your certificates.</span></span>
8. <span data-ttu-id="27b69-147">The tool locally generates a **Client Cert**, the **Client Cert Private Key**, **Intermediate Cert**, and the **Root Cert**.</span><span class="sxs-lookup"><span data-stu-id="27b69-147">The tool locally generates a **Client Cert**, the **Client Cert Private Key**, **Intermediate Cert**, and the **Root Cert**.</span></span>

<span data-ttu-id="27b69-148">**Client Cert** is the leaf certificate on the device.</span><span class="sxs-lookup"><span data-stu-id="27b69-148">**Client Cert** is the leaf certificate on the device.</span></span>  <span data-ttu-id="27b69-149">**Client Cert** and the associated **Client Cert Private Key** are needed in device client.</span><span class="sxs-lookup"><span data-stu-id="27b69-149">**Client Cert** and the associated **Client Cert Private Key** are needed in device client.</span></span> <span data-ttu-id="27b69-150">Depending on what language you choose, the mechanism to put this in the client application may be different.</span><span class="sxs-lookup"><span data-stu-id="27b69-150">Depending on what language you choose, the mechanism to put this in the client application may be different.</span></span>  <span data-ttu-id="27b69-151">For more information, see the [Quickstarts](https://docs.microsoft.com/azure/iot-dps/quick-create-simulated-device-x509) on create simulated device using X.509 for more information.</span><span class="sxs-lookup"><span data-stu-id="27b69-151">For more information, see the [Quickstarts](https://docs.microsoft.com/azure/iot-dps/quick-create-simulated-device-x509) on create simulated device using X.509 for more information.</span></span>

<span data-ttu-id="27b69-152">The root certificate or intermediate can be used to create an enrollment group or individual enrollment [programmatically](https://docs.microsoft.com/azure/iot-dps/how-to-manage-enrollments-sdks) or using the [portal](https://docs.microsoft.com/azure/iot-dps/how-to-manage-enrollments).</span><span class="sxs-lookup"><span data-stu-id="27b69-152">The root certificate or intermediate can be used to create an enrollment group or individual enrollment [programmatically](https://docs.microsoft.com/azure/iot-dps/how-to-manage-enrollments-sdks) or using the [portal](https://docs.microsoft.com/azure/iot-dps/how-to-manage-enrollments).</span></span>

## <a name="next-steps"></a><span data-ttu-id="27b69-153">Next steps</span><span class="sxs-lookup"><span data-stu-id="27b69-153">Next steps</span></span>
* <span data-ttu-id="27b69-154">Develop using the [Azure IoT SDK]( https://github.com/Azure/azure-iot-sdks) for Azure IoT Hub and Azure IoT Hub Device Provisioning Service</span><span class="sxs-lookup"><span data-stu-id="27b69-154">Develop using the [Azure IoT SDK]( https://github.com/Azure/azure-iot-sdks) for Azure IoT Hub and Azure IoT Hub Device Provisioning Service</span></span>