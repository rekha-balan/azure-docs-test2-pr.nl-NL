---
title: Choose an Azure Functions hosting plan | Microsoft Docs
description: Understand how Azure Functions scale to meet the needs of your event-driven workloads.
services: functions
documentationcenter: na
author: dariagrigoriu
manager: erikre
editor: ''
tags: ''
keywords: azure functions, functions, event processing, webhooks, dynamic compute, serverless architecture
ms.assetid: 5b63649c-ec7f-4564-b168-e0a74cb7e0f3
ms.service: functions
ms.devlang: multiple
ms.topic: reference
ms.tgt_pltfrm: multiple
ms.workload: na
ms.date: 04/04/2017
ms.author: dariagrigoriu, glenga
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: 367b1563bca27d01aad63a7f45532cf59dc00f0a
ms.sourcegitcommit: 5b9d839c0c0a94b293fdafe1d6e5429506c07e05
ms.translationtype: HT
ms.contentlocale: nl-NL
ms.lasthandoff: 08/02/2018
ms.locfileid: "44668968"
---
# <a name="choose-the-correct-service-plan-for-azure-functions"></a><span data-ttu-id="22b21-104">Choose the correct service plan for Azure Functions</span><span class="sxs-lookup"><span data-stu-id="22b21-104">Choose the correct service plan for Azure Functions</span></span>

## <a name="introduction"></a><span data-ttu-id="22b21-105">Introduction</span><span class="sxs-lookup"><span data-stu-id="22b21-105">Introduction</span></span>

<span data-ttu-id="22b21-106">Azure Functions has two different service plans: Consumption plan and App Service plan.</span><span class="sxs-lookup"><span data-stu-id="22b21-106">Azure Functions has two different service plans: Consumption plan and App Service plan.</span></span> <span data-ttu-id="22b21-107">The Consumption plan automatically allocates compute power when your code is running, scales-out as necessary to handle load, and then scales-in when code is not running.</span><span class="sxs-lookup"><span data-stu-id="22b21-107">The Consumption plan automatically allocates compute power when your code is running, scales-out as necessary to handle load, and then scales-in when code is not running.</span></span> <span data-ttu-id="22b21-108">This means you don’t pay for idle VMs or have to reserve capacity before it is needed.</span><span class="sxs-lookup"><span data-stu-id="22b21-108">This means you don’t pay for idle VMs or have to reserve capacity before it is needed.</span></span> <span data-ttu-id="22b21-109">This article focuses on the Consumption service plan.</span><span class="sxs-lookup"><span data-stu-id="22b21-109">This article focuses on the Consumption service plan.</span></span> <span data-ttu-id="22b21-110">For details about how the App Service plan works, see the [Azure App Service plans in-depth overview](../app-service/azure-web-sites-web-hosting-plans-in-depth-overview.md).</span><span class="sxs-lookup"><span data-stu-id="22b21-110">For details about how the App Service plan works, see the [Azure App Service plans in-depth overview](../app-service/azure-web-sites-web-hosting-plans-in-depth-overview.md).</span></span> 

<span data-ttu-id="22b21-111">If you are not yet familiar with Azure Functions, see the [Azure Functions overview](functions-overview.md) article.</span><span class="sxs-lookup"><span data-stu-id="22b21-111">If you are not yet familiar with Azure Functions, see the [Azure Functions overview](functions-overview.md) article.</span></span>

## <a name="service-plan-options"></a><span data-ttu-id="22b21-112">Service plan options</span><span class="sxs-lookup"><span data-stu-id="22b21-112">Service plan options</span></span>

<span data-ttu-id="22b21-113">When you create a function app, you must configure a hosting plan for functions contained in the app.</span><span class="sxs-lookup"><span data-stu-id="22b21-113">When you create a function app, you must configure a hosting plan for functions contained in the app.</span></span> <span data-ttu-id="22b21-114">The available hosting plans are: the **Consumption Plan** and the [App Service plan](../app-service/azure-web-sites-web-hosting-plans-in-depth-overview.md).</span><span class="sxs-lookup"><span data-stu-id="22b21-114">The available hosting plans are: the **Consumption Plan** and the [App Service plan](../app-service/azure-web-sites-web-hosting-plans-in-depth-overview.md).</span></span> <span data-ttu-id="22b21-115">Currently, this choice must be made during the creation of the function app.</span><span class="sxs-lookup"><span data-stu-id="22b21-115">Currently, this choice must be made during the creation of the function app.</span></span> <span data-ttu-id="22b21-116">You cannot change between these two options after creation.</span><span class="sxs-lookup"><span data-stu-id="22b21-116">You cannot change between these two options after creation.</span></span> <span data-ttu-id="22b21-117">You can scale between tiers on the [App Service plan](../app-service/azure-web-sites-web-hosting-plans-in-depth-overview.md).</span><span class="sxs-lookup"><span data-stu-id="22b21-117">You can scale between tiers on the [App Service plan](../app-service/azure-web-sites-web-hosting-plans-in-depth-overview.md).</span></span> <span data-ttu-id="22b21-118">No changes are currently supported for the Consumption plan as scaling is dynamic.</span><span class="sxs-lookup"><span data-stu-id="22b21-118">No changes are currently supported for the Consumption plan as scaling is dynamic.</span></span>

### <a name="consumption-plan"></a><span data-ttu-id="22b21-119">Consumption plan</span><span class="sxs-lookup"><span data-stu-id="22b21-119">Consumption plan</span></span>

<span data-ttu-id="22b21-120">In the **Consumption plan**, your function apps are assigned to a compute processing instance.</span><span class="sxs-lookup"><span data-stu-id="22b21-120">In the **Consumption plan**, your function apps are assigned to a compute processing instance.</span></span> <span data-ttu-id="22b21-121">When needed, more instances are dynamically added or removed.</span><span class="sxs-lookup"><span data-stu-id="22b21-121">When needed, more instances are dynamically added or removed.</span></span> <span data-ttu-id="22b21-122">Moreover, your functions run in parallel minimizing the total time needed to process requests.</span><span class="sxs-lookup"><span data-stu-id="22b21-122">Moreover, your functions run in parallel minimizing the total time needed to process requests.</span></span> <span data-ttu-id="22b21-123">Execution time for each function is aggregated by the containing function app.</span><span class="sxs-lookup"><span data-stu-id="22b21-123">Execution time for each function is aggregated by the containing function app.</span></span> <span data-ttu-id="22b21-124">Cost is driven by memory size and total execution time for all functions in a function app.</span><span class="sxs-lookup"><span data-stu-id="22b21-124">Cost is driven by memory size and total execution time for all functions in a function app.</span></span> <span data-ttu-id="22b21-125">Use a consumption plan when your compute needs are intermittent or when your job execution times are short.</span><span class="sxs-lookup"><span data-stu-id="22b21-125">Use a consumption plan when your compute needs are intermittent or when your job execution times are short.</span></span> <span data-ttu-id="22b21-126">This plan lets you only pay for compute resources when they are being used.</span><span class="sxs-lookup"><span data-stu-id="22b21-126">This plan lets you only pay for compute resources when they are being used.</span></span> <span data-ttu-id="22b21-127">The next section provides details on how the Consumption plan works.</span><span class="sxs-lookup"><span data-stu-id="22b21-127">The next section provides details on how the Consumption plan works.</span></span>

### <a name="app-service-plan"></a><span data-ttu-id="22b21-128">App Service plan</span><span class="sxs-lookup"><span data-stu-id="22b21-128">App Service plan</span></span>

<span data-ttu-id="22b21-129">In the **App Service plan**, your function apps run on dedicated VMs, just like Web Apps work today for Basic, Standard, or Premium SKUs.</span><span class="sxs-lookup"><span data-stu-id="22b21-129">In the **App Service plan**, your function apps run on dedicated VMs, just like Web Apps work today for Basic, Standard, or Premium SKUs.</span></span> <span data-ttu-id="22b21-130">Dedicated VMs are allocated to your App Service apps and function apps and are always available whether code is being actively executed or not.</span><span class="sxs-lookup"><span data-stu-id="22b21-130">Dedicated VMs are allocated to your App Service apps and function apps and are always available whether code is being actively executed or not.</span></span> <span data-ttu-id="22b21-131">This is a good option if you have existing, under-utilized VMs that are already running other code or if you expect to run functions continuously or almost continuously.</span><span class="sxs-lookup"><span data-stu-id="22b21-131">This is a good option if you have existing, under-utilized VMs that are already running other code or if you expect to run functions continuously or almost continuously.</span></span> <span data-ttu-id="22b21-132">A VM decouples cost from both runtime and memory size.</span><span class="sxs-lookup"><span data-stu-id="22b21-132">A VM decouples cost from both runtime and memory size.</span></span> <span data-ttu-id="22b21-133">As a result, you can limit the cost of many long-running functions to the cost of the VMs that they run on.</span><span class="sxs-lookup"><span data-stu-id="22b21-133">As a result, you can limit the cost of many long-running functions to the cost of the VMs that they run on.</span></span> <span data-ttu-id="22b21-134">For details about how the App Service plan works, see the [Azure App Service plans in-depth overview](../app-service/azure-web-sites-web-hosting-plans-in-depth-overview.md).</span><span class="sxs-lookup"><span data-stu-id="22b21-134">For details about how the App Service plan works, see the [Azure App Service plans in-depth overview](../app-service/azure-web-sites-web-hosting-plans-in-depth-overview.md).</span></span> 

<span data-ttu-id="22b21-135">With an App Service plan, you can manually scale out by adding more single-core VM instances, or you can enable auto-scale.</span><span class="sxs-lookup"><span data-stu-id="22b21-135">With an App Service plan, you can manually scale out by adding more single-core VM instances, or you can enable auto-scale.</span></span> <span data-ttu-id="22b21-136">For more information, see [Scale instance count manually or automatically](../monitoring-and-diagnostics/insights-how-to-scale.md?toc=%2fazure%2fapp-service-web%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="22b21-136">For more information, see [Scale instance count manually or automatically](../monitoring-and-diagnostics/insights-how-to-scale.md?toc=%2fazure%2fapp-service-web%2ftoc.json).</span></span> <span data-ttu-id="22b21-137">You can also scale up by choosing a different App Service plan.</span><span class="sxs-lookup"><span data-stu-id="22b21-137">You can also scale up by choosing a different App Service plan.</span></span> <span data-ttu-id="22b21-138">For more information, see [Scale up an app in Azure](../app-service-web/web-sites-scale.md).</span><span class="sxs-lookup"><span data-stu-id="22b21-138">For more information, see [Scale up an app in Azure](../app-service-web/web-sites-scale.md).</span></span> <span data-ttu-id="22b21-139">If you are planning to run JavaScript functions on an App Service plan, you should choose a plan with fewer cores.</span><span class="sxs-lookup"><span data-stu-id="22b21-139">If you are planning to run JavaScript functions on an App Service plan, you should choose a plan with fewer cores.</span></span> <span data-ttu-id="22b21-140">For more information, see the [JavaScript reference for Functions](functions-reference-node.md#choose-single-core-app-service-plans).</span><span class="sxs-lookup"><span data-stu-id="22b21-140">For more information, see the [JavaScript reference for Functions](functions-reference-node.md#choose-single-core-app-service-plans).</span></span>  

## <a name="how-the-consumption-plan-works"></a><span data-ttu-id="22b21-141">How the Consumption plan works</span><span class="sxs-lookup"><span data-stu-id="22b21-141">How the Consumption plan works</span></span>

<span data-ttu-id="22b21-142">The Consumption plan automatically scales CPU and memory resources by adding additional processing instances, based on the needs of the functions running in the function app.</span><span class="sxs-lookup"><span data-stu-id="22b21-142">The Consumption plan automatically scales CPU and memory resources by adding additional processing instances, based on the needs of the functions running in the function app.</span></span> <span data-ttu-id="22b21-143">Every function app processing instance is allocated memory resources up to 1.5 GB.</span><span class="sxs-lookup"><span data-stu-id="22b21-143">Every function app processing instance is allocated memory resources up to 1.5 GB.</span></span>

<span data-ttu-id="22b21-144">When running on a Consumption plan, if a Function App has gone idle, there can be up to a 10-minute delay in processing new blobs.</span><span class="sxs-lookup"><span data-stu-id="22b21-144">When running on a Consumption plan, if a Function App has gone idle, there can be up to a 10-minute delay in processing new blobs.</span></span> <span data-ttu-id="22b21-145">Once the Function App is running, blobs are processed more quickly.</span><span class="sxs-lookup"><span data-stu-id="22b21-145">Once the Function App is running, blobs are processed more quickly.</span></span> <span data-ttu-id="22b21-146">To avoid this initial delay, either use a regular App Service Plan with Always On enabled or use another mechanism to trigger the blob processing, such as a queue message that contains the blob name.</span><span class="sxs-lookup"><span data-stu-id="22b21-146">To avoid this initial delay, either use a regular App Service Plan with Always On enabled or use another mechanism to trigger the blob processing, such as a queue message that contains the blob name.</span></span> 

<span data-ttu-id="22b21-147">When creating a Function App, you must create or link a general-purpose Azure Storage account that supports Blob, Queue, and Table storage.</span><span class="sxs-lookup"><span data-stu-id="22b21-147">When creating a Function App, you must create or link a general-purpose Azure Storage account that supports Blob, Queue, and Table storage.</span></span> <span data-ttu-id="22b21-148">Internally Azure Functions uses Azure Storage for operations such as managing triggers and logging function executions.</span><span class="sxs-lookup"><span data-stu-id="22b21-148">Internally Azure Functions uses Azure Storage for operations such as managing triggers and logging function executions.</span></span> <span data-ttu-id="22b21-149">Some storage accounts do not support queues and tables, such as blob-only storage accounts (including premium storage) and general-purpose storage accounts with ZRS replication.</span><span class="sxs-lookup"><span data-stu-id="22b21-149">Some storage accounts do not support queues and tables, such as blob-only storage accounts (including premium storage) and general-purpose storage accounts with ZRS replication.</span></span> <span data-ttu-id="22b21-150">These accounts are filtered from the Storage Account blade when creating a Function App.</span><span class="sxs-lookup"><span data-stu-id="22b21-150">These accounts are filtered from the Storage Account blade when creating a Function App.</span></span>

<span data-ttu-id="22b21-151">When using the Consumption hosting plan, function app content (such as function code files and binding configuration) is stored on Azure Files shares on the main storage account.</span><span class="sxs-lookup"><span data-stu-id="22b21-151">When using the Consumption hosting plan, function app content (such as function code files and binding configuration) is stored on Azure Files shares on the main storage account.</span></span> <span data-ttu-id="22b21-152">When you delete the main storage account, this content is deleted and cannot be recovered.</span><span class="sxs-lookup"><span data-stu-id="22b21-152">When you delete the main storage account, this content is deleted and cannot be recovered.</span></span>

<span data-ttu-id="22b21-153">To learn more about storage account types, see [Introducing the Azure Storage Services] (../storage/storage-introduction.md#introducing-the-azure-storage-services).</span><span class="sxs-lookup"><span data-stu-id="22b21-153">To learn more about storage account types, see [Introducing the Azure Storage Services] (../storage/storage-introduction.md#introducing-the-azure-storage-services).</span></span>

### <a name="runtime-scaling"></a><span data-ttu-id="22b21-154">Runtime scaling</span><span class="sxs-lookup"><span data-stu-id="22b21-154">Runtime scaling</span></span>

<span data-ttu-id="22b21-155">Functions uses a scale controller to evaluate compute needs based on the configured triggers and to decide when to scale out or scale in.</span><span class="sxs-lookup"><span data-stu-id="22b21-155">Functions uses a scale controller to evaluate compute needs based on the configured triggers and to decide when to scale out or scale in.</span></span> <span data-ttu-id="22b21-156">The scale controller continuously processes hints for memory requirements and trigger-specific data points.</span><span class="sxs-lookup"><span data-stu-id="22b21-156">The scale controller continuously processes hints for memory requirements and trigger-specific data points.</span></span> <span data-ttu-id="22b21-157">For example, when using an Azure Queue Storage trigger, the data points include the queue length and queue time of the oldest entry.</span><span class="sxs-lookup"><span data-stu-id="22b21-157">For example, when using an Azure Queue Storage trigger, the data points include the queue length and queue time of the oldest entry.</span></span>

![](https://docstestmedia1.blob.core.windows.net/azure-media/articles/azure-functions/media/functions-scale/central-listener.png)

<span data-ttu-id="22b21-158">The unit of scaling is the function app.</span><span class="sxs-lookup"><span data-stu-id="22b21-158">The unit of scaling is the function app.</span></span> <span data-ttu-id="22b21-159">Scaling out in this case means adding more instances of a function app.</span><span class="sxs-lookup"><span data-stu-id="22b21-159">Scaling out in this case means adding more instances of a function app.</span></span> <span data-ttu-id="22b21-160">Inversely, as compute demand is reduced, function app instances are removed.</span><span class="sxs-lookup"><span data-stu-id="22b21-160">Inversely, as compute demand is reduced, function app instances are removed.</span></span> <span data-ttu-id="22b21-161">The number of instances is eventually scaled-down to zero when no functions are running.</span><span class="sxs-lookup"><span data-stu-id="22b21-161">The number of instances is eventually scaled-down to zero when no functions are running.</span></span> 

### <a name="billing-model"></a><span data-ttu-id="22b21-162">Billing model</span><span class="sxs-lookup"><span data-stu-id="22b21-162">Billing model</span></span>

<span data-ttu-id="22b21-163">Billing for the Consumption plan is described in detail on the [Azure Functions pricing page](https://azure.microsoft.com/pricing/details/functions).</span><span class="sxs-lookup"><span data-stu-id="22b21-163">Billing for the Consumption plan is described in detail on the [Azure Functions pricing page](https://azure.microsoft.com/pricing/details/functions).</span></span> <span data-ttu-id="22b21-164">Usage is reported per function app, only for time when code is being executed.</span><span class="sxs-lookup"><span data-stu-id="22b21-164">Usage is reported per function app, only for time when code is being executed.</span></span> <span data-ttu-id="22b21-165">The following are units for billing:</span><span class="sxs-lookup"><span data-stu-id="22b21-165">The following are units for billing:</span></span> 
* <span data-ttu-id="22b21-166">**Resource consumption in GB-s (gigabyte-seconds)** computed as a combination of memory size and execution time for all functions running in a Function App.</span><span class="sxs-lookup"><span data-stu-id="22b21-166">**Resource consumption in GB-s (gigabyte-seconds)** computed as a combination of memory size and execution time for all functions running in a Function App.</span></span> 
* <span data-ttu-id="22b21-167">**Executions** counted each time a function is executed in response to an event, triggered by a binding.</span><span class="sxs-lookup"><span data-stu-id="22b21-167">**Executions** counted each time a function is executed in response to an event, triggered by a binding.</span></span>

