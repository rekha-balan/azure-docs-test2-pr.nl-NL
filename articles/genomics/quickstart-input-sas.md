---
title: Submit a workflow using a SAS instead of a storage account key | Microsoft Docs
titleSuffix: Azure
description: The quickstart assumes you have the msgen client installed and have successfully run the sample data through the service.
services: microsoft-genomics
author: grhuynh
manager: jhubbard
editor: jasonwhowell
ms.author: grhuynh
ms.service: microsoft-genomics
ms.workload: genomics
ms.topic: quickstart
ms.date: 03/02/2018
ms.openlocfilehash: 802e300ac453baa4ea9bd9183223315abced2ea1
ms.sourcegitcommit: d1451406a010fd3aa854dc8e5b77dc5537d8050e
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 09/13/2018
ms.locfileid: "44868068"
---
# <a name="submit-a-workflow-using-a-sas-instead-of-a-storage-account-key"></a><span data-ttu-id="c402f-103">Submit a workflow using a SAS instead of a storage account key</span><span class="sxs-lookup"><span data-stu-id="c402f-103">Submit a workflow using a SAS instead of a storage account key</span></span>

<span data-ttu-id="c402f-104">This quickstart demonstrates how to submit a workflow to the Microsoft Genomics service using a config.txt file that contains [shared access signatures (SAS)](https://docs.microsoft.com/azure/storage/common/storage-dotnet-shared-access-signature-part-1) instead of storage account keys.</span><span class="sxs-lookup"><span data-stu-id="c402f-104">This quickstart demonstrates how to submit a workflow to the Microsoft Genomics service using a config.txt file that contains [shared access signatures (SAS)](https://docs.microsoft.com/azure/storage/common/storage-dotnet-shared-access-signature-part-1) instead of storage account keys.</span></span> <span data-ttu-id="c402f-105">This feature could be useful if there are security concerns about having the storage account key visible in the config.txt file.</span><span class="sxs-lookup"><span data-stu-id="c402f-105">This feature could be useful if there are security concerns about having the storage account key visible in the config.txt file.</span></span> <span data-ttu-id="c402f-106">This article assumes you have already installed and run the `msgen` client, and are familiar with how to use Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="c402f-106">This article assumes you have already installed and run the `msgen` client, and are familiar with how to use Azure Storage.</span></span> <span data-ttu-id="c402f-107">If you have successfully submitted a workflow using the provided sample data, you are ready to proceed with this quickstart.</span><span class="sxs-lookup"><span data-stu-id="c402f-107">If you have successfully submitted a workflow using the provided sample data, you are ready to proceed with this quickstart.</span></span> 

## <a name="what-is-a-sas"></a><span data-ttu-id="c402f-108">What is a SAS?</span><span class="sxs-lookup"><span data-stu-id="c402f-108">What is a SAS?</span></span>
<span data-ttu-id="c402f-109">A [shared access signature (SAS)](https://docs.microsoft.com/azure/storage/common/storage-dotnet-shared-access-signature-part-1) provides delegated access to resources in your storage account.</span><span class="sxs-lookup"><span data-stu-id="c402f-109">A [shared access signature (SAS)](https://docs.microsoft.com/azure/storage/common/storage-dotnet-shared-access-signature-part-1) provides delegated access to resources in your storage account.</span></span> <span data-ttu-id="c402f-110">With a SAS, you can grant  access to resources in your storage account, without sharing your account keys.</span><span class="sxs-lookup"><span data-stu-id="c402f-110">With a SAS, you can grant  access to resources in your storage account, without sharing your account keys.</span></span> <span data-ttu-id="c402f-111">This is the key point of using shared access signatures in your applications--a SAS is a secure way to share your storage resources without compromising your account keys.</span><span class="sxs-lookup"><span data-stu-id="c402f-111">This is the key point of using shared access signatures in your applications--a SAS is a secure way to share your storage resources without compromising your account keys.</span></span>

<span data-ttu-id="c402f-112">The SAS that is submitted to Microsoft Genomics should be a [Service SAS](https://docs.microsoft.com/rest/api/storageservices/Constructing-a-Service-SAS) that delegates access only to the blob or container where the input and output files are stored.</span><span class="sxs-lookup"><span data-stu-id="c402f-112">The SAS that is submitted to Microsoft Genomics should be a [Service SAS](https://docs.microsoft.com/rest/api/storageservices/Constructing-a-Service-SAS) that delegates access only to the blob or container where the input and output files are stored.</span></span> 

<span data-ttu-id="c402f-113">The URI for a service-level shared access signature (SAS) token consists of the URI to the resource for which the SAS will delegate access, followed by the SAS token.</span><span class="sxs-lookup"><span data-stu-id="c402f-113">The URI for a service-level shared access signature (SAS) token consists of the URI to the resource for which the SAS will delegate access, followed by the SAS token.</span></span> <span data-ttu-id="c402f-114">The SAS token is the query string that includes all of the information required to authenticate the SAS, as well as specifying the resource, the permissions available for access, the time interval over which the signature is valid, the supported IP address or address range from which requests can originate, the supported protocol with which a request can be made, an optional access policy identifier associated with the request, and the signature itself.</span><span class="sxs-lookup"><span data-stu-id="c402f-114">The SAS token is the query string that includes all of the information required to authenticate the SAS, as well as specifying the resource, the permissions available for access, the time interval over which the signature is valid, the supported IP address or address range from which requests can originate, the supported protocol with which a request can be made, an optional access policy identifier associated with the request, and the signature itself.</span></span> 

## <a name="sas-needed-for-submitting-a-workflow-to-the-microsoft-genomics-service"></a><span data-ttu-id="c402f-115">SAS needed for submitting a workflow to the Microsoft Genomics service</span><span class="sxs-lookup"><span data-stu-id="c402f-115">SAS needed for submitting a workflow to the Microsoft Genomics service</span></span>
<span data-ttu-id="c402f-116">Two or more SAS tokens are required for each workflow that is submitted to the Microsoft Genomics service, one for each input file and one for the output container.</span><span class="sxs-lookup"><span data-stu-id="c402f-116">Two or more SAS tokens are required for each workflow that is submitted to the Microsoft Genomics service, one for each input file and one for the output container.</span></span>

<span data-ttu-id="c402f-117">The SAS for the input files should have the following properties:</span><span class="sxs-lookup"><span data-stu-id="c402f-117">The SAS for the input files should have the following properties:</span></span>
1.  <span data-ttu-id="c402f-118">Scope (account, container, blob): blob</span><span class="sxs-lookup"><span data-stu-id="c402f-118">Scope (account, container, blob): blob</span></span>
2.  <span data-ttu-id="c402f-119">Expiration: 48 hours from now</span><span class="sxs-lookup"><span data-stu-id="c402f-119">Expiration: 48 hours from now</span></span>
3.  <span data-ttu-id="c402f-120">Permissions: read</span><span class="sxs-lookup"><span data-stu-id="c402f-120">Permissions: read</span></span>

<span data-ttu-id="c402f-121">The SAS for the output container should have the following properties:</span><span class="sxs-lookup"><span data-stu-id="c402f-121">The SAS for the output container should have the following properties:</span></span>
1.  <span data-ttu-id="c402f-122">Scope (account, container, blob): container</span><span class="sxs-lookup"><span data-stu-id="c402f-122">Scope (account, container, blob): container</span></span>
2.  <span data-ttu-id="c402f-123">Expiration: 48 hours from now</span><span class="sxs-lookup"><span data-stu-id="c402f-123">Expiration: 48 hours from now</span></span>
3.  <span data-ttu-id="c402f-124">Permissions: read, write, delete</span><span class="sxs-lookup"><span data-stu-id="c402f-124">Permissions: read, write, delete</span></span>


## <a name="create-a-sas-for-the-input-files-and-the-output-container"></a><span data-ttu-id="c402f-125">Create a SAS for the input files and the output container</span><span class="sxs-lookup"><span data-stu-id="c402f-125">Create a SAS for the input files and the output container</span></span>
<span data-ttu-id="c402f-126">There are two ways to create a SAS token, either using Azure Storage Explorer or programmatically.</span><span class="sxs-lookup"><span data-stu-id="c402f-126">There are two ways to create a SAS token, either using Azure Storage Explorer or programmatically.</span></span>  <span data-ttu-id="c402f-127">If writing code, you can construct the SAS yourself, or use the Azure Storage SDK in your preferred language.</span><span class="sxs-lookup"><span data-stu-id="c402f-127">If writing code, you can construct the SAS yourself, or use the Azure Storage SDK in your preferred language.</span></span>


### <a name="set-up-create-a-sas-using-azure-storage-explorer"></a><span data-ttu-id="c402f-128">Set up: Create a SAS using Azure Storage Explorer</span><span class="sxs-lookup"><span data-stu-id="c402f-128">Set up: Create a SAS using Azure Storage Explorer</span></span>

<span data-ttu-id="c402f-129">[Azure Storage Explorer](https://azure.microsoft.com/features/storage-explorer/) is a tool to manage resources that you have stored in Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="c402f-129">[Azure Storage Explorer](https://azure.microsoft.com/features/storage-explorer/) is a tool to manage resources that you have stored in Azure Storage.</span></span>  <span data-ttu-id="c402f-130">You can learn more about how to use Azure Storage Explorer [here](https://docs.microsoft.com/azure/vs-azure-tools-storage-manage-with-storage-explorer).</span><span class="sxs-lookup"><span data-stu-id="c402f-130">You can learn more about how to use Azure Storage Explorer [here](https://docs.microsoft.com/azure/vs-azure-tools-storage-manage-with-storage-explorer).</span></span>

<span data-ttu-id="c402f-131">The SAS for the input files should be scoped to the specific input file (blob).</span><span class="sxs-lookup"><span data-stu-id="c402f-131">The SAS for the input files should be scoped to the specific input file (blob).</span></span> <span data-ttu-id="c402f-132">To create a SAS token, follow [these instructions](https://docs.microsoft.com/azure/storage/blobs/storage-quickstart-blobs-storage-explorer#work-with-shared-access-signatures).</span><span class="sxs-lookup"><span data-stu-id="c402f-132">To create a SAS token, follow [these instructions](https://docs.microsoft.com/azure/storage/blobs/storage-quickstart-blobs-storage-explorer#work-with-shared-access-signatures).</span></span> <span data-ttu-id="c402f-133">Once you have created the SAS, the full URL with the query string as well as the query string by itself are provided and can be copied from the screen.</span><span class="sxs-lookup"><span data-stu-id="c402f-133">Once you have created the SAS, the full URL with the query string as well as the query string by itself are provided and can be copied from the screen.</span></span>

 <span data-ttu-id="c402f-134">![Genomics SAS Storage Explorer](./media/quickstart-input-sas/genomics-sas-storageexplorer.png "Genomics SAS Storage Explorer")</span><span class="sxs-lookup"><span data-stu-id="c402f-134">![Genomics SAS Storage Explorer](./media/quickstart-input-sas/genomics-sas-storageexplorer.png "Genomics SAS Storage Explorer")</span></span>


### <a name="set-up-create-a-sas-programattically"></a><span data-ttu-id="c402f-135">Set up: Create a SAS programattically</span><span class="sxs-lookup"><span data-stu-id="c402f-135">Set up: Create a SAS programattically</span></span>

<span data-ttu-id="c402f-136">To create a SAS using the Azure Storage SDK, refer to the existing documentation in several languages, including [.NET](https://docs.microsoft.com/azure/storage/blobs/storage-dotnet-shared-access-signature-part-2#generate-a-shared-access-signature-uri-for-a-blob), [Python](https://docs.microsoft.com/azure/storage/blobs/storage-python-how-to-use-blob-storage), and [Node.js](https://docs.microsoft.com/azure/storage/blobs/storage-nodejs-how-to-use-blob-storage#work-with-shared-access-signatures).</span><span class="sxs-lookup"><span data-stu-id="c402f-136">To create a SAS using the Azure Storage SDK, refer to the existing documentation in several languages, including [.NET](https://docs.microsoft.com/azure/storage/blobs/storage-dotnet-shared-access-signature-part-2#generate-a-shared-access-signature-uri-for-a-blob), [Python](https://docs.microsoft.com/azure/storage/blobs/storage-python-how-to-use-blob-storage), and [Node.js](https://docs.microsoft.com/azure/storage/blobs/storage-nodejs-how-to-use-blob-storage#work-with-shared-access-signatures).</span></span> 

<span data-ttu-id="c402f-137">To create a SAS without an SDK, the SAS query string can be directly constructed, including all the information required to authenticate the SAS.</span><span class="sxs-lookup"><span data-stu-id="c402f-137">To create a SAS without an SDK, the SAS query string can be directly constructed, including all the information required to authenticate the SAS.</span></span> <span data-ttu-id="c402f-138">These [instructions](https://docs.microsoft.com/rest/api/storageservices/constructing-a-service-sas) detail the components of the SAS query string and how to construct it.</span><span class="sxs-lookup"><span data-stu-id="c402f-138">These [instructions](https://docs.microsoft.com/rest/api/storageservices/constructing-a-service-sas) detail the components of the SAS query string and how to construct it.</span></span> <span data-ttu-id="c402f-139">The required SAS signature is created by generating an HMAC using the blob/container authentication information, as described by these [instructions](https://docs.microsoft.com/rest/api/storageservices/service-sas-examples).</span><span class="sxs-lookup"><span data-stu-id="c402f-139">The required SAS signature is created by generating an HMAC using the blob/container authentication information, as described by these [instructions](https://docs.microsoft.com/rest/api/storageservices/service-sas-examples).</span></span>


## <a name="add-the-sas-to-the-configtxt-file"></a><span data-ttu-id="c402f-140">Add the SAS to the config.txt file</span><span class="sxs-lookup"><span data-stu-id="c402f-140">Add the SAS to the config.txt file</span></span>
<span data-ttu-id="c402f-141">To run a workflow through the Microsoft Genomics service using a SAS query string, edit the config.txt file to remove the keys from the config.txt file.</span><span class="sxs-lookup"><span data-stu-id="c402f-141">To run a workflow through the Microsoft Genomics service using a SAS query string, edit the config.txt file to remove the keys from the config.txt file.</span></span> <span data-ttu-id="c402f-142">Then, append the SAS query string (which begins with a `?`) to the output container name, as shown.</span><span class="sxs-lookup"><span data-stu-id="c402f-142">Then, append the SAS query string (which begins with a `?`) to the output container name, as shown.</span></span> 

<span data-ttu-id="c402f-143">![Genomics SAS config](./media/quickstart-input-sas/genomics-sas-config.png "Genomics SAS config")</span><span class="sxs-lookup"><span data-stu-id="c402f-143">![Genomics SAS config](./media/quickstart-input-sas/genomics-sas-config.png "Genomics SAS config")</span></span>

<span data-ttu-id="c402f-144">Use the Microsoft Genomics Python client to submit your workflow with the following command, appending the corresponding SAS query string to each of input blob names:</span><span class="sxs-lookup"><span data-stu-id="c402f-144">Use the Microsoft Genomics Python client to submit your workflow with the following command, appending the corresponding SAS query string to each of input blob names:</span></span>

```python
msgen submit -f [full path to your config file] -b1 [name of your first paired end read file, SAS query string appended] -b2 [name of your second paired end read file, SAS query string appended]
```

### <a name="if-adding-the-input-file-names-to-the-configtxt-file"></a><span data-ttu-id="c402f-145">If adding the input file names to the config.txt file</span><span class="sxs-lookup"><span data-stu-id="c402f-145">If adding the input file names to the config.txt file</span></span>
<span data-ttu-id="c402f-146">Alternatively, the names of the paired end read files can be directly added to the config.txt file, with the SAS query tokens appended as shown:</span><span class="sxs-lookup"><span data-stu-id="c402f-146">Alternatively, the names of the paired end read files can be directly added to the config.txt file, with the SAS query tokens appended as shown:</span></span>

<span data-ttu-id="c402f-147">![Genomics SAS config blobnames](./media/quickstart-input-sas/genomics-sas-config-blobnames.png "Genomics SAS config blobnames")</span><span class="sxs-lookup"><span data-stu-id="c402f-147">![Genomics SAS config blobnames](./media/quickstart-input-sas/genomics-sas-config-blobnames.png "Genomics SAS config blobnames")</span></span>

<span data-ttu-id="c402f-148">In this case, use the Microsoft Genomics Python client to submit your workflow with the following command, omitting the `-b1` and `-b2` commands:</span><span class="sxs-lookup"><span data-stu-id="c402f-148">In this case, use the Microsoft Genomics Python client to submit your workflow with the following command, omitting the `-b1` and `-b2` commands:</span></span>

```python
msgen submit -f [full path to your config file] 
```

## <a name="next-steps"></a><span data-ttu-id="c402f-149">Next steps</span><span class="sxs-lookup"><span data-stu-id="c402f-149">Next steps</span></span>
<span data-ttu-id="c402f-150">In this article, you used SAS tokens instead of the account keys to submit a workflow to the Microsoft Genomics service through the `msgen` Python client.</span><span class="sxs-lookup"><span data-stu-id="c402f-150">In this article, you used SAS tokens instead of the account keys to submit a workflow to the Microsoft Genomics service through the `msgen` Python client.</span></span> <span data-ttu-id="c402f-151">For additional information about workflow submission and other commands you can use with the Microsoft Genomics service, see our [FAQ](frequently-asked-questions-genomics.md).</span><span class="sxs-lookup"><span data-stu-id="c402f-151">For additional information about workflow submission and other commands you can use with the Microsoft Genomics service, see our [FAQ](frequently-asked-questions-genomics.md).</span></span> 
