---
title: Azure Event Hubs Role-Based Access Control (RBAC) preview | Microsoft Docs
description: Azure Event Hubs Role-Based Access Control
services: event-hubs
documentationcenter: na
author: ShubhaVijayasarathy
manager: timlt
ms.service: event-hubs
ms.devlang: na
ms.topic: article
ms.date: 07/05/2018
ms.author: shvija
ms.openlocfilehash: ef74600fdf5051394f8b7bfbdd71e144b3f26d8a
ms.sourcegitcommit: d1451406a010fd3aa854dc8e5b77dc5537d8050e
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 09/13/2018
ms.locfileid: "44864985"
---
# <a name="active-directory-role-based-access-control-preview"></a><span data-ttu-id="12dc7-103">Active Directory Role-Based Access Control (preview)</span><span class="sxs-lookup"><span data-stu-id="12dc7-103">Active Directory Role-Based Access Control (preview)</span></span>

<span data-ttu-id="12dc7-104">Microsoft Azure provides integrated access control management for resources and applications based on Azure Active Directory (Azure AD).</span><span class="sxs-lookup"><span data-stu-id="12dc7-104">Microsoft Azure provides integrated access control management for resources and applications based on Azure Active Directory (Azure AD).</span></span> <span data-ttu-id="12dc7-105">With Azure AD, you can either manage user accounts and applications specifically for your Azure-based applications, or you can federate your existing Active Directory infrastructure with Azure AD for company-wide single-sign-on that also spans Azure resources and Azure hosted applications.</span><span class="sxs-lookup"><span data-stu-id="12dc7-105">With Azure AD, you can either manage user accounts and applications specifically for your Azure-based applications, or you can federate your existing Active Directory infrastructure with Azure AD for company-wide single-sign-on that also spans Azure resources and Azure hosted applications.</span></span> <span data-ttu-id="12dc7-106">You can then assign those Azure AD user and application identities to global and service-specific roles in order to grant access to Azure resources.</span><span class="sxs-lookup"><span data-stu-id="12dc7-106">You can then assign those Azure AD user and application identities to global and service-specific roles in order to grant access to Azure resources.</span></span>

<span data-ttu-id="12dc7-107">For Azure Event Hubs, the management of namespaces and all related resources through the Azure portal and the Azure resource management API is already protected using the *role-based access control* (RBAC) model.</span><span class="sxs-lookup"><span data-stu-id="12dc7-107">For Azure Event Hubs, the management of namespaces and all related resources through the Azure portal and the Azure resource management API is already protected using the *role-based access control* (RBAC) model.</span></span> <span data-ttu-id="12dc7-108">RBAC for runtime operations is a feature now in public preview.</span><span class="sxs-lookup"><span data-stu-id="12dc7-108">RBAC for runtime operations is a feature now in public preview.</span></span> 

<span data-ttu-id="12dc7-109">An application that uses Azure AD RBAC does not need to handle SAS rules and keys or any other access tokens specific to Event Hubs.</span><span class="sxs-lookup"><span data-stu-id="12dc7-109">An application that uses Azure AD RBAC does not need to handle SAS rules and keys or any other access tokens specific to Event Hubs.</span></span> <span data-ttu-id="12dc7-110">The client app interacts with Azure AD to establish an authentication context, and acquires an access token for Event Hubs.</span><span class="sxs-lookup"><span data-stu-id="12dc7-110">The client app interacts with Azure AD to establish an authentication context, and acquires an access token for Event Hubs.</span></span> <span data-ttu-id="12dc7-111">With domain user accounts that require interactive login, the application never handles any credentials directly.</span><span class="sxs-lookup"><span data-stu-id="12dc7-111">With domain user accounts that require interactive login, the application never handles any credentials directly.</span></span>

## <a name="event-hubs-roles-and-permissions"></a><span data-ttu-id="12dc7-112">Event Hubs roles and permissions</span><span class="sxs-lookup"><span data-stu-id="12dc7-112">Event Hubs roles and permissions</span></span>

<span data-ttu-id="12dc7-113">For the initial public preview, you can only add Azure AD accounts and service principals to the "Owner" or "Contributor" roles of an Event Hubs namespace.</span><span class="sxs-lookup"><span data-stu-id="12dc7-113">For the initial public preview, you can only add Azure AD accounts and service principals to the "Owner" or "Contributor" roles of an Event Hubs namespace.</span></span> <span data-ttu-id="12dc7-114">This operation grants the identity full control over all entities in the namespace.</span><span class="sxs-lookup"><span data-stu-id="12dc7-114">This operation grants the identity full control over all entities in the namespace.</span></span> <span data-ttu-id="12dc7-115">Management operations that change the namespace topology are initially only supported though Azure resource management and not through the native Event Hubs REST management interface.</span><span class="sxs-lookup"><span data-stu-id="12dc7-115">Management operations that change the namespace topology are initially only supported though Azure resource management and not through the native Event Hubs REST management interface.</span></span> <span data-ttu-id="12dc7-116">This support also means that the .NET Framework client [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager) object cannot be used with an Azure AD account.</span><span class="sxs-lookup"><span data-stu-id="12dc7-116">This support also means that the .NET Framework client [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager) object cannot be used with an Azure AD account.</span></span>  

## <a name="use-event-hubs-with-an-azure-ad-domain-user-account"></a><span data-ttu-id="12dc7-117">Use Event Hubs with an Azure AD domain user account</span><span class="sxs-lookup"><span data-stu-id="12dc7-117">Use Event Hubs with an Azure AD domain user account</span></span>

<span data-ttu-id="12dc7-118">The following section describes the steps required to create and run a sample application that prompts for an interactive Azure AD user to sign on, how to grant Event Hubs access to that user account, and how to use that identity to access Event Hubs.</span><span class="sxs-lookup"><span data-stu-id="12dc7-118">The following section describes the steps required to create and run a sample application that prompts for an interactive Azure AD user to sign on, how to grant Event Hubs access to that user account, and how to use that identity to access Event Hubs.</span></span> 

<span data-ttu-id="12dc7-119">This introduction describes a simple console application, the [code for which is on Github](https://github.com/Azure/azure-event-hubs/tree/master/samples/DotNet/Rbac/EventHubsSenderReceiverRbac/)</span><span class="sxs-lookup"><span data-stu-id="12dc7-119">This introduction describes a simple console application, the [code for which is on Github](https://github.com/Azure/azure-event-hubs/tree/master/samples/DotNet/Rbac/EventHubsSenderReceiverRbac/)</span></span>

### <a name="create-an-active-directory-user-account"></a><span data-ttu-id="12dc7-120">Create an Active Directory user account</span><span class="sxs-lookup"><span data-stu-id="12dc7-120">Create an Active Directory user account</span></span>

<span data-ttu-id="12dc7-121">This first step is optional.</span><span class="sxs-lookup"><span data-stu-id="12dc7-121">This first step is optional.</span></span> <span data-ttu-id="12dc7-122">Every Azure subscription is automatically paired with an Azure Active Directory tenant and if you have access to an Azure subscription, your user account is already registered.</span><span class="sxs-lookup"><span data-stu-id="12dc7-122">Every Azure subscription is automatically paired with an Azure Active Directory tenant and if you have access to an Azure subscription, your user account is already registered.</span></span> <span data-ttu-id="12dc7-123">That means you can just use your account.</span><span class="sxs-lookup"><span data-stu-id="12dc7-123">That means you can just use your account.</span></span> 

<span data-ttu-id="12dc7-124">If you still want to create a specific account for this scenario, [follow these steps](../automation/automation-create-aduser-account.md).</span><span class="sxs-lookup"><span data-stu-id="12dc7-124">If you still want to create a specific account for this scenario, [follow these steps](../automation/automation-create-aduser-account.md).</span></span> <span data-ttu-id="12dc7-125">You must have permission to create accounts in the Azure Active Directory tenant, which may not be the case for larger enterprise scenarios.</span><span class="sxs-lookup"><span data-stu-id="12dc7-125">You must have permission to create accounts in the Azure Active Directory tenant, which may not be the case for larger enterprise scenarios.</span></span>

### <a name="create-an-event-hubs-namespace"></a><span data-ttu-id="12dc7-126">Create an Event Hubs namespace</span><span class="sxs-lookup"><span data-stu-id="12dc7-126">Create an Event Hubs namespace</span></span>

<span data-ttu-id="12dc7-127">Next, [create an Event Hubs namespace](event-hubs-create.md) in one of the Azure regions that have Event Hubs preview support for RBAC: **US East**, **US East 2**, or **West Europe**.</span><span class="sxs-lookup"><span data-stu-id="12dc7-127">Next, [create an Event Hubs namespace](event-hubs-create.md) in one of the Azure regions that have Event Hubs preview support for RBAC: **US East**, **US East 2**, or **West Europe**.</span></span> 

<span data-ttu-id="12dc7-128">Once the namespace is created, navigate to its **Access Control (IAM)** page on the portal, and then click **Add** to add the Azure AD user account to the Owner role.</span><span class="sxs-lookup"><span data-stu-id="12dc7-128">Once the namespace is created, navigate to its **Access Control (IAM)** page on the portal, and then click **Add** to add the Azure AD user account to the Owner role.</span></span> <span data-ttu-id="12dc7-129">If you use your own user account and you created the namespace, you are already in the Owner role.</span><span class="sxs-lookup"><span data-stu-id="12dc7-129">If you use your own user account and you created the namespace, you are already in the Owner role.</span></span> <span data-ttu-id="12dc7-130">To add a different account to the role, search for the name of the web application in the **Add permissions** panel **Select** field, and then click the entry.</span><span class="sxs-lookup"><span data-stu-id="12dc7-130">To add a different account to the role, search for the name of the web application in the **Add permissions** panel **Select** field, and then click the entry.</span></span> <span data-ttu-id="12dc7-131">Then click **Save**.</span><span class="sxs-lookup"><span data-stu-id="12dc7-131">Then click **Save**.</span></span>
 
![](./media/event-hubs-role-based-access-control/rbac1.PNG)

<span data-ttu-id="12dc7-132">The user account now has access to the Event Hubs namespace, and to the event hub you previously created.</span><span class="sxs-lookup"><span data-stu-id="12dc7-132">The user account now has access to the Event Hubs namespace, and to the event hub you previously created.</span></span>
 
### <a name="register-the-application"></a><span data-ttu-id="12dc7-133">Register the application</span><span class="sxs-lookup"><span data-stu-id="12dc7-133">Register the application</span></span>

<span data-ttu-id="12dc7-134">Before you can run the sample application, register it in Azure AD and approve the consent prompt that permits the application to access Event Hubs on its behalf.</span><span class="sxs-lookup"><span data-stu-id="12dc7-134">Before you can run the sample application, register it in Azure AD and approve the consent prompt that permits the application to access Event Hubs on its behalf.</span></span> 

<span data-ttu-id="12dc7-135">Because the sample application is a console application, you must register a native application and add API permissions for **Microsoft.EventHub** to the "required permissions" set.</span><span class="sxs-lookup"><span data-stu-id="12dc7-135">Because the sample application is a console application, you must register a native application and add API permissions for **Microsoft.EventHub** to the "required permissions" set.</span></span> <span data-ttu-id="12dc7-136">Native applications also need a **redirect-URI** in Azure AD that serves as an identifier; the URI does not need to be a network destination.</span><span class="sxs-lookup"><span data-stu-id="12dc7-136">Native applications also need a **redirect-URI** in Azure AD that serves as an identifier; the URI does not need to be a network destination.</span></span> <span data-ttu-id="12dc7-137">Use `http://eventhubs.microsoft.com` for this example, because the sample code already uses that URI.</span><span class="sxs-lookup"><span data-stu-id="12dc7-137">Use `http://eventhubs.microsoft.com` for this example, because the sample code already uses that URI.</span></span>

<span data-ttu-id="12dc7-138">The detailed registration steps are explained in [this tutorial](../active-directory/develop/quickstart-v1-integrate-apps-with-azure-ad.md).</span><span class="sxs-lookup"><span data-stu-id="12dc7-138">The detailed registration steps are explained in [this tutorial](../active-directory/develop/quickstart-v1-integrate-apps-with-azure-ad.md).</span></span> <span data-ttu-id="12dc7-139">Follow the steps to register a **Native** app, and then follow the update instructions to add the **Microsoft.EventHub** API to the required permissions.</span><span class="sxs-lookup"><span data-stu-id="12dc7-139">Follow the steps to register a **Native** app, and then follow the update instructions to add the **Microsoft.EventHub** API to the required permissions.</span></span> <span data-ttu-id="12dc7-140">As you follow the steps, make note of the **TenantId** and the **ApplicationId**, as you will need these values to run the application.</span><span class="sxs-lookup"><span data-stu-id="12dc7-140">As you follow the steps, make note of the **TenantId** and the **ApplicationId**, as you will need these values to run the application.</span></span>

### <a name="run-the-app"></a><span data-ttu-id="12dc7-141">Run the app</span><span class="sxs-lookup"><span data-stu-id="12dc7-141">Run the app</span></span>

<span data-ttu-id="12dc7-142">Before you can run the sample, edit the App.config file and, depending on your scenario, set the following values:</span><span class="sxs-lookup"><span data-stu-id="12dc7-142">Before you can run the sample, edit the App.config file and, depending on your scenario, set the following values:</span></span>

- <span data-ttu-id="12dc7-143">`tenantId`: Set to **TenantId** value.</span><span class="sxs-lookup"><span data-stu-id="12dc7-143">`tenantId`: Set to **TenantId** value.</span></span>
- <span data-ttu-id="12dc7-144">`clientId`: Set to **ApplicationId** value.</span><span class="sxs-lookup"><span data-stu-id="12dc7-144">`clientId`: Set to **ApplicationId** value.</span></span> 
- <span data-ttu-id="12dc7-145">`clientSecret`: If you want to sign in using the client secret, create it in Azure AD.</span><span class="sxs-lookup"><span data-stu-id="12dc7-145">`clientSecret`: If you want to sign in using the client secret, create it in Azure AD.</span></span> <span data-ttu-id="12dc7-146">Also, use a web app or API instead of a native app.</span><span class="sxs-lookup"><span data-stu-id="12dc7-146">Also, use a web app or API instead of a native app.</span></span> <span data-ttu-id="12dc7-147">Also, add the app under **Access Control (IAM)** in the namespace you previously created.</span><span class="sxs-lookup"><span data-stu-id="12dc7-147">Also, add the app under **Access Control (IAM)** in the namespace you previously created.</span></span>
- <span data-ttu-id="12dc7-148">`eventHubNamespaceFQDN`: Set to the fully qualified DNS name of your newly created Event Hubs namespace; for example, `example.servicebus.windows.net`.</span><span class="sxs-lookup"><span data-stu-id="12dc7-148">`eventHubNamespaceFQDN`: Set to the fully qualified DNS name of your newly created Event Hubs namespace; for example, `example.servicebus.windows.net`.</span></span>
- <span data-ttu-id="12dc7-149">`eventHubName`: Set to the name of the event hub you created.</span><span class="sxs-lookup"><span data-stu-id="12dc7-149">`eventHubName`: Set to the name of the event hub you created.</span></span>
- <span data-ttu-id="12dc7-150">The redirect URI you specified in your app in the previous steps.</span><span class="sxs-lookup"><span data-stu-id="12dc7-150">The redirect URI you specified in your app in the previous steps.</span></span>
 
<span data-ttu-id="12dc7-151">When you run the console application, you are prompted to select a scenario; click **Interactive User Login** by typing its number and pressing ENTER.</span><span class="sxs-lookup"><span data-stu-id="12dc7-151">When you run the console application, you are prompted to select a scenario; click **Interactive User Login** by typing its number and pressing ENTER.</span></span> <span data-ttu-id="12dc7-152">The application displays a sign-in window, asks for your consent to access Event Hubs, and then uses the service to run through the send/receive scenario using the sign-in identity.</span><span class="sxs-lookup"><span data-stu-id="12dc7-152">The application displays a sign-in window, asks for your consent to access Event Hubs, and then uses the service to run through the send/receive scenario using the sign-in identity.</span></span>

## <a name="next-steps"></a><span data-ttu-id="12dc7-153">Next steps</span><span class="sxs-lookup"><span data-stu-id="12dc7-153">Next steps</span></span>

<span data-ttu-id="12dc7-154">For more information about Event Hubs, visit the following links:</span><span class="sxs-lookup"><span data-stu-id="12dc7-154">For more information about Event Hubs, visit the following links:</span></span>

* <span data-ttu-id="12dc7-155">Get started with an [Event Hubs tutorial](event-hubs-dotnet-standard-getstarted-send.md)</span><span class="sxs-lookup"><span data-stu-id="12dc7-155">Get started with an [Event Hubs tutorial](event-hubs-dotnet-standard-getstarted-send.md)</span></span>
* [<span data-ttu-id="12dc7-156">Event Hubs FAQ</span><span class="sxs-lookup"><span data-stu-id="12dc7-156">Event Hubs FAQ</span></span>](event-hubs-faq.md)
* [<span data-ttu-id="12dc7-157">Event Hubs pricing details</span><span class="sxs-lookup"><span data-stu-id="12dc7-157">Event Hubs pricing details</span></span>](https://azure.microsoft.com/pricing/details/event-hubs/)
* [<span data-ttu-id="12dc7-158">Sample applications that use Event Hubs</span><span class="sxs-lookup"><span data-stu-id="12dc7-158">Sample applications that use Event Hubs</span></span>](https://github.com/Azure/azure-event-hubs/tree/master/samples)