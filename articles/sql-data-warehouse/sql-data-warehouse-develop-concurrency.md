---
title: Concurrency and workload management in SQL Data Warehouse | Microsoft Docs
description: Understand concurrency and workload management in Azure SQL Data Warehouse for developing solutions.
services: sql-data-warehouse
documentationcenter: NA
author: jrowlandjones
manager: jhubbard
editor: ''
ms.assetid: ef170f39-ae24-4b04-af76-53bb4c4d16d3
ms.service: sql-data-warehouse
ms.devlang: NA
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: data-services
ms.custom: performance
ms.date: 10/31/2016
ms.author: jrj;barbkess
ms.openlocfilehash: dd8c1b07262fc375678262a7617699c1f69c6090
ms.sourcegitcommit: 5b9d839c0c0a94b293fdafe1d6e5429506c07e05
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 08/02/2018
ms.locfileid: "44553095"
---
# <a name="concurrency-and-workload-management-in-sql-data-warehouse"></a><span data-ttu-id="19997-103">Concurrency and workload management in SQL Data Warehouse</span><span class="sxs-lookup"><span data-stu-id="19997-103">Concurrency and workload management in SQL Data Warehouse</span></span>
<span data-ttu-id="19997-104">To deliver predictable performance at scale, Microsoft Azure SQL Data Warehouse helps you control concurrency levels and resource allocations like memory and CPU prioritization.</span><span class="sxs-lookup"><span data-stu-id="19997-104">To deliver predictable performance at scale, Microsoft Azure SQL Data Warehouse helps you control concurrency levels and resource allocations like memory and CPU prioritization.</span></span> <span data-ttu-id="19997-105">This article introduces you to the concepts of concurrency and workload management, explaining how both features have been implemented and how you can control them in your data warehouse.</span><span class="sxs-lookup"><span data-stu-id="19997-105">This article introduces you to the concepts of concurrency and workload management, explaining how both features have been implemented and how you can control them in your data warehouse.</span></span> <span data-ttu-id="19997-106">SQL Data Warehouse workload management is intended to help you support multi-user environments.</span><span class="sxs-lookup"><span data-stu-id="19997-106">SQL Data Warehouse workload management is intended to help you support multi-user environments.</span></span> <span data-ttu-id="19997-107">It is not intended for multi-tenant workloads.</span><span class="sxs-lookup"><span data-stu-id="19997-107">It is not intended for multi-tenant workloads.</span></span>

## <a name="concurrency-limits"></a><span data-ttu-id="19997-108">Concurrency limits</span><span class="sxs-lookup"><span data-stu-id="19997-108">Concurrency limits</span></span>
<span data-ttu-id="19997-109">SQL Data Warehouse allows up to 1,024 concurrent connections.</span><span class="sxs-lookup"><span data-stu-id="19997-109">SQL Data Warehouse allows up to 1,024 concurrent connections.</span></span> <span data-ttu-id="19997-110">All 1,024 connections can submit queries concurrently.</span><span class="sxs-lookup"><span data-stu-id="19997-110">All 1,024 connections can submit queries concurrently.</span></span> <span data-ttu-id="19997-111">However, to optimize throughput, SQL Data Warehouse may queue some queries to ensure that each query receives a minimal memory grant.</span><span class="sxs-lookup"><span data-stu-id="19997-111">However, to optimize throughput, SQL Data Warehouse may queue some queries to ensure that each query receives a minimal memory grant.</span></span> <span data-ttu-id="19997-112">Queuing occurs at query execution time.</span><span class="sxs-lookup"><span data-stu-id="19997-112">Queuing occurs at query execution time.</span></span> <span data-ttu-id="19997-113">By queuing queries when concurrency limits are reached, SQL Data Warehouse can increase total throughput by ensuring that active queries get access to critically needed memory resources.</span><span class="sxs-lookup"><span data-stu-id="19997-113">By queuing queries when concurrency limits are reached, SQL Data Warehouse can increase total throughput by ensuring that active queries get access to critically needed memory resources.</span></span>  

<span data-ttu-id="19997-114">Concurrency limits are governed by two concepts: *concurrent queries* and *concurrency slots*.</span><span class="sxs-lookup"><span data-stu-id="19997-114">Concurrency limits are governed by two concepts: *concurrent queries* and *concurrency slots*.</span></span> <span data-ttu-id="19997-115">For a query to execute, it must execute within both the query concurrency limit and the concurrency slot allocation.</span><span class="sxs-lookup"><span data-stu-id="19997-115">For a query to execute, it must execute within both the query concurrency limit and the concurrency slot allocation.</span></span>

* <span data-ttu-id="19997-116">Concurrent queries are the queries executing at the same time.</span><span class="sxs-lookup"><span data-stu-id="19997-116">Concurrent queries are the queries executing at the same time.</span></span> <span data-ttu-id="19997-117">SQL Data Warehouse supports up to 32 concurrent queries on the larger DWU sizes.</span><span class="sxs-lookup"><span data-stu-id="19997-117">SQL Data Warehouse supports up to 32 concurrent queries on the larger DWU sizes.</span></span>
* <span data-ttu-id="19997-118">Concurrency slots are allocated based on DWU.</span><span class="sxs-lookup"><span data-stu-id="19997-118">Concurrency slots are allocated based on DWU.</span></span> <span data-ttu-id="19997-119">Each 100 DWU provides 4 concurrency slots.</span><span class="sxs-lookup"><span data-stu-id="19997-119">Each 100 DWU provides 4 concurrency slots.</span></span> <span data-ttu-id="19997-120">For example, a DW100 allocates 4 concurrency slots and DW1000 allocates 40.</span><span class="sxs-lookup"><span data-stu-id="19997-120">For example, a DW100 allocates 4 concurrency slots and DW1000 allocates 40.</span></span> <span data-ttu-id="19997-121">Each query consumes one or more concurrency slots, dependent on the [resource class](#resource-classes) of the query.</span><span class="sxs-lookup"><span data-stu-id="19997-121">Each query consumes one or more concurrency slots, dependent on the [resource class](#resource-classes) of the query.</span></span> <span data-ttu-id="19997-122">Queries running in the smallrc resource class consume one concurrency slot.</span><span class="sxs-lookup"><span data-stu-id="19997-122">Queries running in the smallrc resource class consume one concurrency slot.</span></span> <span data-ttu-id="19997-123">Queries running in a higher resource class consume more concurrency slots.</span><span class="sxs-lookup"><span data-stu-id="19997-123">Queries running in a higher resource class consume more concurrency slots.</span></span>

<span data-ttu-id="19997-124">The following table describes the limits for both concurrent queries and concurrency slots at the various DWU sizes.</span><span class="sxs-lookup"><span data-stu-id="19997-124">The following table describes the limits for both concurrent queries and concurrency slots at the various DWU sizes.</span></span>

### <a name="concurrency-limits"></a><span data-ttu-id="19997-125">Concurrency limits</span><span class="sxs-lookup"><span data-stu-id="19997-125">Concurrency limits</span></span>
| <span data-ttu-id="19997-126">DWU</span><span class="sxs-lookup"><span data-stu-id="19997-126">DWU</span></span> | <span data-ttu-id="19997-127">Max concurrent queries</span><span class="sxs-lookup"><span data-stu-id="19997-127">Max concurrent queries</span></span> | <span data-ttu-id="19997-128">Concurrency slots allocated</span><span class="sxs-lookup"><span data-stu-id="19997-128">Concurrency slots allocated</span></span> |
|:--- |:---:|:---:|
| <span data-ttu-id="19997-129">DW100</span><span class="sxs-lookup"><span data-stu-id="19997-129">DW100</span></span> |<span data-ttu-id="19997-130">4</span><span class="sxs-lookup"><span data-stu-id="19997-130">4</span></span> |<span data-ttu-id="19997-131">4</span><span class="sxs-lookup"><span data-stu-id="19997-131">4</span></span> |
| <span data-ttu-id="19997-132">DW200</span><span class="sxs-lookup"><span data-stu-id="19997-132">DW200</span></span> |<span data-ttu-id="19997-133">8</span><span class="sxs-lookup"><span data-stu-id="19997-133">8</span></span> |<span data-ttu-id="19997-134">8</span><span class="sxs-lookup"><span data-stu-id="19997-134">8</span></span> |
| <span data-ttu-id="19997-135">DW300</span><span class="sxs-lookup"><span data-stu-id="19997-135">DW300</span></span> |<span data-ttu-id="19997-136">12</span><span class="sxs-lookup"><span data-stu-id="19997-136">12</span></span> |<span data-ttu-id="19997-137">12</span><span class="sxs-lookup"><span data-stu-id="19997-137">12</span></span> |
| <span data-ttu-id="19997-138">DW400</span><span class="sxs-lookup"><span data-stu-id="19997-138">DW400</span></span> |<span data-ttu-id="19997-139">16</span><span class="sxs-lookup"><span data-stu-id="19997-139">16</span></span> |<span data-ttu-id="19997-140">16</span><span class="sxs-lookup"><span data-stu-id="19997-140">16</span></span> |
| <span data-ttu-id="19997-141">DW500</span><span class="sxs-lookup"><span data-stu-id="19997-141">DW500</span></span> |<span data-ttu-id="19997-142">20</span><span class="sxs-lookup"><span data-stu-id="19997-142">20</span></span> |<span data-ttu-id="19997-143">20</span><span class="sxs-lookup"><span data-stu-id="19997-143">20</span></span> |
| <span data-ttu-id="19997-144">DW600</span><span class="sxs-lookup"><span data-stu-id="19997-144">DW600</span></span> |<span data-ttu-id="19997-145">24</span><span class="sxs-lookup"><span data-stu-id="19997-145">24</span></span> |<span data-ttu-id="19997-146">24</span><span class="sxs-lookup"><span data-stu-id="19997-146">24</span></span> |
| <span data-ttu-id="19997-147">DW1000</span><span class="sxs-lookup"><span data-stu-id="19997-147">DW1000</span></span> |<span data-ttu-id="19997-148">32</span><span class="sxs-lookup"><span data-stu-id="19997-148">32</span></span> |<span data-ttu-id="19997-149">40</span><span class="sxs-lookup"><span data-stu-id="19997-149">40</span></span> |
| <span data-ttu-id="19997-150">DW1200</span><span class="sxs-lookup"><span data-stu-id="19997-150">DW1200</span></span> |<span data-ttu-id="19997-151">32</span><span class="sxs-lookup"><span data-stu-id="19997-151">32</span></span> |<span data-ttu-id="19997-152">48</span><span class="sxs-lookup"><span data-stu-id="19997-152">48</span></span> |
| <span data-ttu-id="19997-153">DW1500</span><span class="sxs-lookup"><span data-stu-id="19997-153">DW1500</span></span> |<span data-ttu-id="19997-154">32</span><span class="sxs-lookup"><span data-stu-id="19997-154">32</span></span> |<span data-ttu-id="19997-155">60</span><span class="sxs-lookup"><span data-stu-id="19997-155">60</span></span> |
| <span data-ttu-id="19997-156">DW2000</span><span class="sxs-lookup"><span data-stu-id="19997-156">DW2000</span></span> |<span data-ttu-id="19997-157">32</span><span class="sxs-lookup"><span data-stu-id="19997-157">32</span></span> |<span data-ttu-id="19997-158">80</span><span class="sxs-lookup"><span data-stu-id="19997-158">80</span></span> |
| <span data-ttu-id="19997-159">DW3000</span><span class="sxs-lookup"><span data-stu-id="19997-159">DW3000</span></span> |<span data-ttu-id="19997-160">32</span><span class="sxs-lookup"><span data-stu-id="19997-160">32</span></span> |<span data-ttu-id="19997-161">120</span><span class="sxs-lookup"><span data-stu-id="19997-161">120</span></span> |
| <span data-ttu-id="19997-162">DW6000</span><span class="sxs-lookup"><span data-stu-id="19997-162">DW6000</span></span> |<span data-ttu-id="19997-163">32</span><span class="sxs-lookup"><span data-stu-id="19997-163">32</span></span> |<span data-ttu-id="19997-164">240</span><span class="sxs-lookup"><span data-stu-id="19997-164">240</span></span> |

<span data-ttu-id="19997-165">When one of these thresholds is met, new queries are queued and executed on a first-in, first-out basis.</span><span class="sxs-lookup"><span data-stu-id="19997-165">When one of these thresholds is met, new queries are queued and executed on a first-in, first-out basis.</span></span>  <span data-ttu-id="19997-166">As a queries finishes and the number of queries and slots falls below the limits, queued queries are released.</span><span class="sxs-lookup"><span data-stu-id="19997-166">As a queries finishes and the number of queries and slots falls below the limits, queued queries are released.</span></span> 

> [!NOTE]
> <span data-ttu-id="19997-167">*Select* queries executing exclusively on dynamic management views (DMVs) or catalog views are not governed by any of the concurrency limits.</span><span class="sxs-lookup"><span data-stu-id="19997-167">*Select* queries executing exclusively on dynamic management views (DMVs) or catalog views are not governed by any of the concurrency limits.</span></span> <span data-ttu-id="19997-168">You can monitor the system regardless of the number of queries executing on it.</span><span class="sxs-lookup"><span data-stu-id="19997-168">You can monitor the system regardless of the number of queries executing on it.</span></span>
> 
> 

## <a name="resource-classes"></a><span data-ttu-id="19997-169">Resource classes</span><span class="sxs-lookup"><span data-stu-id="19997-169">Resource classes</span></span>
<span data-ttu-id="19997-170">Resource classes help you control memory allocation and CPU cycles given to a query.</span><span class="sxs-lookup"><span data-stu-id="19997-170">Resource classes help you control memory allocation and CPU cycles given to a query.</span></span> <span data-ttu-id="19997-171">You can assign four resource classes to a user in the form of *database roles*.</span><span class="sxs-lookup"><span data-stu-id="19997-171">You can assign four resource classes to a user in the form of *database roles*.</span></span> <span data-ttu-id="19997-172">The four resource classes are **smallrc**, **mediumrc**, **largerc**, and **xlargerc**.</span><span class="sxs-lookup"><span data-stu-id="19997-172">The four resource classes are **smallrc**, **mediumrc**, **largerc**, and **xlargerc**.</span></span> <span data-ttu-id="19997-173">Users in smallrc are given a smaller amount of memory and can take advantage of higher concurrency.</span><span class="sxs-lookup"><span data-stu-id="19997-173">Users in smallrc are given a smaller amount of memory and can take advantage of higher concurrency.</span></span> <span data-ttu-id="19997-174">In contrast, users assigned to xlargerc are given large amounts of memory, and therefore fewer of their queries can run concurrently.</span><span class="sxs-lookup"><span data-stu-id="19997-174">In contrast, users assigned to xlargerc are given large amounts of memory, and therefore fewer of their queries can run concurrently.</span></span>

<span data-ttu-id="19997-175">By default, each user is a member of the small resource class, smallrc.</span><span class="sxs-lookup"><span data-stu-id="19997-175">By default, each user is a member of the small resource class, smallrc.</span></span> <span data-ttu-id="19997-176">The procedure `sp_addrolemember` is used to increase the resource class, and `sp_droprolemember` is used to decrease the resource class.</span><span class="sxs-lookup"><span data-stu-id="19997-176">The procedure `sp_addrolemember` is used to increase the resource class, and `sp_droprolemember` is used to decrease the resource class.</span></span> <span data-ttu-id="19997-177">For example, this command would increase the resource class of loaduser to largerc:</span><span class="sxs-lookup"><span data-stu-id="19997-177">For example, this command would increase the resource class of loaduser to largerc:</span></span>

```sql
EXEC sp_addrolemember 'largerc', 'loaduser'
```

<span data-ttu-id="19997-178">A good practice is to permanently assign users to a resource class rather than changing their resource classes.</span><span class="sxs-lookup"><span data-stu-id="19997-178">A good practice is to permanently assign users to a resource class rather than changing their resource classes.</span></span> <span data-ttu-id="19997-179">For example, loads to clustered columnstore tables create higher-quality indexes when allocated more memory.</span><span class="sxs-lookup"><span data-stu-id="19997-179">For example, loads to clustered columnstore tables create higher-quality indexes when allocated more memory.</span></span> <span data-ttu-id="19997-180">To ensure that loads have access to higher memory, create a user specifically for loading data and permanently assign this user to a higher resource class.</span><span class="sxs-lookup"><span data-stu-id="19997-180">To ensure that loads have access to higher memory, create a user specifically for loading data and permanently assign this user to a higher resource class.</span></span>

<span data-ttu-id="19997-181">There are a few types of queries that do not benefit from a larger memory allocation.</span><span class="sxs-lookup"><span data-stu-id="19997-181">There are a few types of queries that do not benefit from a larger memory allocation.</span></span> <span data-ttu-id="19997-182">The system will ignore their resource class allocation and always run these queries in the small resource class instead.</span><span class="sxs-lookup"><span data-stu-id="19997-182">The system will ignore their resource class allocation and always run these queries in the small resource class instead.</span></span> <span data-ttu-id="19997-183">If these queries always run in the small resource class, they can run when concurrency slots are under pressure and they won't consume more slots than needed.</span><span class="sxs-lookup"><span data-stu-id="19997-183">If these queries always run in the small resource class, they can run when concurrency slots are under pressure and they won't consume more slots than needed.</span></span> <span data-ttu-id="19997-184">See [Resource class exceptions](#query-exceptions-to-concurrency-limits) for more information.</span><span class="sxs-lookup"><span data-stu-id="19997-184">See [Resource class exceptions](#query-exceptions-to-concurrency-limits) for more information.</span></span>

<span data-ttu-id="19997-185">A few more details on resource class:</span><span class="sxs-lookup"><span data-stu-id="19997-185">A few more details on resource class:</span></span>

* <span data-ttu-id="19997-186">*Alter role* permission is required to change the resource class of a user.</span><span class="sxs-lookup"><span data-stu-id="19997-186">*Alter role* permission is required to change the resource class of a user.</span></span>  
* <span data-ttu-id="19997-187">Although you can add a user to one or more of the higher resource classes, users will take on the attributes of the highest resource class to which they are assigned.</span><span class="sxs-lookup"><span data-stu-id="19997-187">Although you can add a user to one or more of the higher resource classes, users will take on the attributes of the highest resource class to which they are assigned.</span></span> <span data-ttu-id="19997-188">That is, if a user is assigned to both mediumrc and largerc, the higher resource class (largerc) is the resource class that will be honored.</span><span class="sxs-lookup"><span data-stu-id="19997-188">That is, if a user is assigned to both mediumrc and largerc, the higher resource class (largerc) is the resource class that will be honored.</span></span>  
* <span data-ttu-id="19997-189">The resource class of the system administrative user cannot be changed.</span><span class="sxs-lookup"><span data-stu-id="19997-189">The resource class of the system administrative user cannot be changed.</span></span>

<span data-ttu-id="19997-190">For a detailed example, see [Changing user resource class example](#changing-user-resource-class-example).</span><span class="sxs-lookup"><span data-stu-id="19997-190">For a detailed example, see [Changing user resource class example](#changing-user-resource-class-example).</span></span>

## <a name="memory-allocation"></a><span data-ttu-id="19997-191">Memory allocation</span><span class="sxs-lookup"><span data-stu-id="19997-191">Memory allocation</span></span>
<span data-ttu-id="19997-192">There are pros and cons to increasing a user's resource class.</span><span class="sxs-lookup"><span data-stu-id="19997-192">There are pros and cons to increasing a user's resource class.</span></span> <span data-ttu-id="19997-193">Increasing a resource class for a user will give their queries access to more memory, which may mean queries execute faster.</span><span class="sxs-lookup"><span data-stu-id="19997-193">Increasing a resource class for a user will give their queries access to more memory, which may mean queries execute faster.</span></span>  <span data-ttu-id="19997-194">However, higher resource classes also reduce the number of concurrent queries that can run.</span><span class="sxs-lookup"><span data-stu-id="19997-194">However, higher resource classes also reduce the number of concurrent queries that can run.</span></span> <span data-ttu-id="19997-195">This is the trade-off between allocating large amounts of memory to a single query or allowing other queries, which also need memory allocations, to run concurrently.</span><span class="sxs-lookup"><span data-stu-id="19997-195">This is the trade-off between allocating large amounts of memory to a single query or allowing other queries, which also need memory allocations, to run concurrently.</span></span> <span data-ttu-id="19997-196">If one user is given high allocations of memory for a query, other users will not have access to that same memory to run a query.</span><span class="sxs-lookup"><span data-stu-id="19997-196">If one user is given high allocations of memory for a query, other users will not have access to that same memory to run a query.</span></span>

<span data-ttu-id="19997-197">The following table maps the memory allocated to each distribution by DWU and resource class.</span><span class="sxs-lookup"><span data-stu-id="19997-197">The following table maps the memory allocated to each distribution by DWU and resource class.</span></span>

### <a name="memory-allocations-per-distribution-mb"></a><span data-ttu-id="19997-198">Memory allocations per distribution (MB)</span><span class="sxs-lookup"><span data-stu-id="19997-198">Memory allocations per distribution (MB)</span></span>
| <span data-ttu-id="19997-199">DWU</span><span class="sxs-lookup"><span data-stu-id="19997-199">DWU</span></span> | <span data-ttu-id="19997-200">smallrc</span><span class="sxs-lookup"><span data-stu-id="19997-200">smallrc</span></span> | <span data-ttu-id="19997-201">mediumrc</span><span class="sxs-lookup"><span data-stu-id="19997-201">mediumrc</span></span> | <span data-ttu-id="19997-202">largerc</span><span class="sxs-lookup"><span data-stu-id="19997-202">largerc</span></span> | <span data-ttu-id="19997-203">xlargerc</span><span class="sxs-lookup"><span data-stu-id="19997-203">xlargerc</span></span> |
|:--- |:---:|:---:|:---:|:---:|
| <span data-ttu-id="19997-204">DW100</span><span class="sxs-lookup"><span data-stu-id="19997-204">DW100</span></span> |<span data-ttu-id="19997-205">100</span><span class="sxs-lookup"><span data-stu-id="19997-205">100</span></span> |<span data-ttu-id="19997-206">100</span><span class="sxs-lookup"><span data-stu-id="19997-206">100</span></span> |<span data-ttu-id="19997-207">200</span><span class="sxs-lookup"><span data-stu-id="19997-207">200</span></span> |<span data-ttu-id="19997-208">400</span><span class="sxs-lookup"><span data-stu-id="19997-208">400</span></span> |
| <span data-ttu-id="19997-209">DW200</span><span class="sxs-lookup"><span data-stu-id="19997-209">DW200</span></span> |<span data-ttu-id="19997-210">100</span><span class="sxs-lookup"><span data-stu-id="19997-210">100</span></span> |<span data-ttu-id="19997-211">200</span><span class="sxs-lookup"><span data-stu-id="19997-211">200</span></span> |<span data-ttu-id="19997-212">400</span><span class="sxs-lookup"><span data-stu-id="19997-212">400</span></span> |<span data-ttu-id="19997-213">800</span><span class="sxs-lookup"><span data-stu-id="19997-213">800</span></span> |
| <span data-ttu-id="19997-214">DW300</span><span class="sxs-lookup"><span data-stu-id="19997-214">DW300</span></span> |<span data-ttu-id="19997-215">100</span><span class="sxs-lookup"><span data-stu-id="19997-215">100</span></span> |<span data-ttu-id="19997-216">200</span><span class="sxs-lookup"><span data-stu-id="19997-216">200</span></span> |<span data-ttu-id="19997-217">400</span><span class="sxs-lookup"><span data-stu-id="19997-217">400</span></span> |<span data-ttu-id="19997-218">800</span><span class="sxs-lookup"><span data-stu-id="19997-218">800</span></span> |
| <span data-ttu-id="19997-219">DW400</span><span class="sxs-lookup"><span data-stu-id="19997-219">DW400</span></span> |<span data-ttu-id="19997-220">100</span><span class="sxs-lookup"><span data-stu-id="19997-220">100</span></span> |<span data-ttu-id="19997-221">400</span><span class="sxs-lookup"><span data-stu-id="19997-221">400</span></span> |<span data-ttu-id="19997-222">800</span><span class="sxs-lookup"><span data-stu-id="19997-222">800</span></span> |<span data-ttu-id="19997-223">1,600</span><span class="sxs-lookup"><span data-stu-id="19997-223">1,600</span></span> |
| <span data-ttu-id="19997-224">DW500</span><span class="sxs-lookup"><span data-stu-id="19997-224">DW500</span></span> |<span data-ttu-id="19997-225">100</span><span class="sxs-lookup"><span data-stu-id="19997-225">100</span></span> |<span data-ttu-id="19997-226">400</span><span class="sxs-lookup"><span data-stu-id="19997-226">400</span></span> |<span data-ttu-id="19997-227">800</span><span class="sxs-lookup"><span data-stu-id="19997-227">800</span></span> |<span data-ttu-id="19997-228">1,600</span><span class="sxs-lookup"><span data-stu-id="19997-228">1,600</span></span> |
| <span data-ttu-id="19997-229">DW600</span><span class="sxs-lookup"><span data-stu-id="19997-229">DW600</span></span> |<span data-ttu-id="19997-230">100</span><span class="sxs-lookup"><span data-stu-id="19997-230">100</span></span> |<span data-ttu-id="19997-231">400</span><span class="sxs-lookup"><span data-stu-id="19997-231">400</span></span> |<span data-ttu-id="19997-232">800</span><span class="sxs-lookup"><span data-stu-id="19997-232">800</span></span> |<span data-ttu-id="19997-233">1,600</span><span class="sxs-lookup"><span data-stu-id="19997-233">1,600</span></span> |
| <span data-ttu-id="19997-234">DW1000</span><span class="sxs-lookup"><span data-stu-id="19997-234">DW1000</span></span> |<span data-ttu-id="19997-235">100</span><span class="sxs-lookup"><span data-stu-id="19997-235">100</span></span> |<span data-ttu-id="19997-236">800</span><span class="sxs-lookup"><span data-stu-id="19997-236">800</span></span> |<span data-ttu-id="19997-237">1,600</span><span class="sxs-lookup"><span data-stu-id="19997-237">1,600</span></span> |<span data-ttu-id="19997-238">3,200</span><span class="sxs-lookup"><span data-stu-id="19997-238">3,200</span></span> |
| <span data-ttu-id="19997-239">DW1200</span><span class="sxs-lookup"><span data-stu-id="19997-239">DW1200</span></span> |<span data-ttu-id="19997-240">100</span><span class="sxs-lookup"><span data-stu-id="19997-240">100</span></span> |<span data-ttu-id="19997-241">800</span><span class="sxs-lookup"><span data-stu-id="19997-241">800</span></span> |<span data-ttu-id="19997-242">1,600</span><span class="sxs-lookup"><span data-stu-id="19997-242">1,600</span></span> |<span data-ttu-id="19997-243">3,200</span><span class="sxs-lookup"><span data-stu-id="19997-243">3,200</span></span> |
| <span data-ttu-id="19997-244">DW1500</span><span class="sxs-lookup"><span data-stu-id="19997-244">DW1500</span></span> |<span data-ttu-id="19997-245">100</span><span class="sxs-lookup"><span data-stu-id="19997-245">100</span></span> |<span data-ttu-id="19997-246">800</span><span class="sxs-lookup"><span data-stu-id="19997-246">800</span></span> |<span data-ttu-id="19997-247">1,600</span><span class="sxs-lookup"><span data-stu-id="19997-247">1,600</span></span> |<span data-ttu-id="19997-248">3,200</span><span class="sxs-lookup"><span data-stu-id="19997-248">3,200</span></span> |
| <span data-ttu-id="19997-249">DW2000</span><span class="sxs-lookup"><span data-stu-id="19997-249">DW2000</span></span> |<span data-ttu-id="19997-250">100</span><span class="sxs-lookup"><span data-stu-id="19997-250">100</span></span> |<span data-ttu-id="19997-251">1,600</span><span class="sxs-lookup"><span data-stu-id="19997-251">1,600</span></span> |<span data-ttu-id="19997-252">3,200</span><span class="sxs-lookup"><span data-stu-id="19997-252">3,200</span></span> |<span data-ttu-id="19997-253">6,400</span><span class="sxs-lookup"><span data-stu-id="19997-253">6,400</span></span> |
| <span data-ttu-id="19997-254">DW3000</span><span class="sxs-lookup"><span data-stu-id="19997-254">DW3000</span></span> |<span data-ttu-id="19997-255">100</span><span class="sxs-lookup"><span data-stu-id="19997-255">100</span></span> |<span data-ttu-id="19997-256">1,600</span><span class="sxs-lookup"><span data-stu-id="19997-256">1,600</span></span> |<span data-ttu-id="19997-257">3,200</span><span class="sxs-lookup"><span data-stu-id="19997-257">3,200</span></span> |<span data-ttu-id="19997-258">6,400</span><span class="sxs-lookup"><span data-stu-id="19997-258">6,400</span></span> |
| <span data-ttu-id="19997-259">DW6000</span><span class="sxs-lookup"><span data-stu-id="19997-259">DW6000</span></span> |<span data-ttu-id="19997-260">100</span><span class="sxs-lookup"><span data-stu-id="19997-260">100</span></span> |<span data-ttu-id="19997-261">3,200</span><span class="sxs-lookup"><span data-stu-id="19997-261">3,200</span></span> |<span data-ttu-id="19997-262">6,400</span><span class="sxs-lookup"><span data-stu-id="19997-262">6,400</span></span> |<span data-ttu-id="19997-263">12,800</span><span class="sxs-lookup"><span data-stu-id="19997-263">12,800</span></span> |

<span data-ttu-id="19997-264">From the preceding table, you can see that a query running on a DW2000 in the xlargerc resource class would have access to 6,400 MB of memory within each of the 60 distributed databases.</span><span class="sxs-lookup"><span data-stu-id="19997-264">From the preceding table, you can see that a query running on a DW2000 in the xlargerc resource class would have access to 6,400 MB of memory within each of the 60 distributed databases.</span></span>  <span data-ttu-id="19997-265">In SQL Data Warehouse, there are 60 distributions.</span><span class="sxs-lookup"><span data-stu-id="19997-265">In SQL Data Warehouse, there are 60 distributions.</span></span> <span data-ttu-id="19997-266">Therefore, to calculate the total memory allocation for a query in a given resource class, the above values should be multiplied by 60.</span><span class="sxs-lookup"><span data-stu-id="19997-266">Therefore, to calculate the total memory allocation for a query in a given resource class, the above values should be multiplied by 60.</span></span>

### <a name="memory-allocations-system-wide-gb"></a><span data-ttu-id="19997-267">Memory allocations system-wide (GB)</span><span class="sxs-lookup"><span data-stu-id="19997-267">Memory allocations system-wide (GB)</span></span>
| <span data-ttu-id="19997-268">DWU</span><span class="sxs-lookup"><span data-stu-id="19997-268">DWU</span></span> | <span data-ttu-id="19997-269">smallrc</span><span class="sxs-lookup"><span data-stu-id="19997-269">smallrc</span></span> | <span data-ttu-id="19997-270">mediumrc</span><span class="sxs-lookup"><span data-stu-id="19997-270">mediumrc</span></span> | <span data-ttu-id="19997-271">largerc</span><span class="sxs-lookup"><span data-stu-id="19997-271">largerc</span></span> | <span data-ttu-id="19997-272">xlargerc</span><span class="sxs-lookup"><span data-stu-id="19997-272">xlargerc</span></span> |
|:--- |:---:|:---:|:---:|:---:|
| <span data-ttu-id="19997-273">DW100</span><span class="sxs-lookup"><span data-stu-id="19997-273">DW100</span></span> |<span data-ttu-id="19997-274">6</span><span class="sxs-lookup"><span data-stu-id="19997-274">6</span></span> |<span data-ttu-id="19997-275">6</span><span class="sxs-lookup"><span data-stu-id="19997-275">6</span></span> |<span data-ttu-id="19997-276">12</span><span class="sxs-lookup"><span data-stu-id="19997-276">12</span></span> |<span data-ttu-id="19997-277">23</span><span class="sxs-lookup"><span data-stu-id="19997-277">23</span></span> |
| <span data-ttu-id="19997-278">DW200</span><span class="sxs-lookup"><span data-stu-id="19997-278">DW200</span></span> |<span data-ttu-id="19997-279">6</span><span class="sxs-lookup"><span data-stu-id="19997-279">6</span></span> |<span data-ttu-id="19997-280">12</span><span class="sxs-lookup"><span data-stu-id="19997-280">12</span></span> |<span data-ttu-id="19997-281">23</span><span class="sxs-lookup"><span data-stu-id="19997-281">23</span></span> |<span data-ttu-id="19997-282">47</span><span class="sxs-lookup"><span data-stu-id="19997-282">47</span></span> |
| <span data-ttu-id="19997-283">DW300</span><span class="sxs-lookup"><span data-stu-id="19997-283">DW300</span></span> |<span data-ttu-id="19997-284">6</span><span class="sxs-lookup"><span data-stu-id="19997-284">6</span></span> |<span data-ttu-id="19997-285">12</span><span class="sxs-lookup"><span data-stu-id="19997-285">12</span></span> |<span data-ttu-id="19997-286">23</span><span class="sxs-lookup"><span data-stu-id="19997-286">23</span></span> |<span data-ttu-id="19997-287">47</span><span class="sxs-lookup"><span data-stu-id="19997-287">47</span></span> |
| <span data-ttu-id="19997-288">DW400</span><span class="sxs-lookup"><span data-stu-id="19997-288">DW400</span></span> |<span data-ttu-id="19997-289">6</span><span class="sxs-lookup"><span data-stu-id="19997-289">6</span></span> |<span data-ttu-id="19997-290">23</span><span class="sxs-lookup"><span data-stu-id="19997-290">23</span></span> |<span data-ttu-id="19997-291">47</span><span class="sxs-lookup"><span data-stu-id="19997-291">47</span></span> |<span data-ttu-id="19997-292">94</span><span class="sxs-lookup"><span data-stu-id="19997-292">94</span></span> |
| <span data-ttu-id="19997-293">DW500</span><span class="sxs-lookup"><span data-stu-id="19997-293">DW500</span></span> |<span data-ttu-id="19997-294">6</span><span class="sxs-lookup"><span data-stu-id="19997-294">6</span></span> |<span data-ttu-id="19997-295">23</span><span class="sxs-lookup"><span data-stu-id="19997-295">23</span></span> |<span data-ttu-id="19997-296">47</span><span class="sxs-lookup"><span data-stu-id="19997-296">47</span></span> |<span data-ttu-id="19997-297">94</span><span class="sxs-lookup"><span data-stu-id="19997-297">94</span></span> |
| <span data-ttu-id="19997-298">DW600</span><span class="sxs-lookup"><span data-stu-id="19997-298">DW600</span></span> |<span data-ttu-id="19997-299">6</span><span class="sxs-lookup"><span data-stu-id="19997-299">6</span></span> |<span data-ttu-id="19997-300">23</span><span class="sxs-lookup"><span data-stu-id="19997-300">23</span></span> |<span data-ttu-id="19997-301">47</span><span class="sxs-lookup"><span data-stu-id="19997-301">47</span></span> |<span data-ttu-id="19997-302">94</span><span class="sxs-lookup"><span data-stu-id="19997-302">94</span></span> |
| <span data-ttu-id="19997-303">DW1000</span><span class="sxs-lookup"><span data-stu-id="19997-303">DW1000</span></span> |<span data-ttu-id="19997-304">6</span><span class="sxs-lookup"><span data-stu-id="19997-304">6</span></span> |<span data-ttu-id="19997-305">47</span><span class="sxs-lookup"><span data-stu-id="19997-305">47</span></span> |<span data-ttu-id="19997-306">94</span><span class="sxs-lookup"><span data-stu-id="19997-306">94</span></span> |<span data-ttu-id="19997-307">188</span><span class="sxs-lookup"><span data-stu-id="19997-307">188</span></span> |
| <span data-ttu-id="19997-308">DW1200</span><span class="sxs-lookup"><span data-stu-id="19997-308">DW1200</span></span> |<span data-ttu-id="19997-309">6</span><span class="sxs-lookup"><span data-stu-id="19997-309">6</span></span> |<span data-ttu-id="19997-310">47</span><span class="sxs-lookup"><span data-stu-id="19997-310">47</span></span> |<span data-ttu-id="19997-311">94</span><span class="sxs-lookup"><span data-stu-id="19997-311">94</span></span> |<span data-ttu-id="19997-312">188</span><span class="sxs-lookup"><span data-stu-id="19997-312">188</span></span> |
| <span data-ttu-id="19997-313">DW1500</span><span class="sxs-lookup"><span data-stu-id="19997-313">DW1500</span></span> |<span data-ttu-id="19997-314">6</span><span class="sxs-lookup"><span data-stu-id="19997-314">6</span></span> |<span data-ttu-id="19997-315">47</span><span class="sxs-lookup"><span data-stu-id="19997-315">47</span></span> |<span data-ttu-id="19997-316">94</span><span class="sxs-lookup"><span data-stu-id="19997-316">94</span></span> |<span data-ttu-id="19997-317">188</span><span class="sxs-lookup"><span data-stu-id="19997-317">188</span></span> |
| <span data-ttu-id="19997-318">DW2000</span><span class="sxs-lookup"><span data-stu-id="19997-318">DW2000</span></span> |<span data-ttu-id="19997-319">6</span><span class="sxs-lookup"><span data-stu-id="19997-319">6</span></span> |<span data-ttu-id="19997-320">94</span><span class="sxs-lookup"><span data-stu-id="19997-320">94</span></span> |<span data-ttu-id="19997-321">188</span><span class="sxs-lookup"><span data-stu-id="19997-321">188</span></span> |<span data-ttu-id="19997-322">375</span><span class="sxs-lookup"><span data-stu-id="19997-322">375</span></span> |
| <span data-ttu-id="19997-323">DW3000</span><span class="sxs-lookup"><span data-stu-id="19997-323">DW3000</span></span> |<span data-ttu-id="19997-324">6</span><span class="sxs-lookup"><span data-stu-id="19997-324">6</span></span> |<span data-ttu-id="19997-325">94</span><span class="sxs-lookup"><span data-stu-id="19997-325">94</span></span> |<span data-ttu-id="19997-326">188</span><span class="sxs-lookup"><span data-stu-id="19997-326">188</span></span> |<span data-ttu-id="19997-327">375</span><span class="sxs-lookup"><span data-stu-id="19997-327">375</span></span> |
| <span data-ttu-id="19997-328">DW6000</span><span class="sxs-lookup"><span data-stu-id="19997-328">DW6000</span></span> |<span data-ttu-id="19997-329">6</span><span class="sxs-lookup"><span data-stu-id="19997-329">6</span></span> |<span data-ttu-id="19997-330">188</span><span class="sxs-lookup"><span data-stu-id="19997-330">188</span></span> |<span data-ttu-id="19997-331">375</span><span class="sxs-lookup"><span data-stu-id="19997-331">375</span></span> |<span data-ttu-id="19997-332">750</span><span class="sxs-lookup"><span data-stu-id="19997-332">750</span></span> |

<span data-ttu-id="19997-333">From this table of system-wide memory allocations, you can see that a query running on a DW2000 in the xlargerc resource class is allocated a total of 375 GB of memory (6,400 MB \* 60 distributions / 1,024 to convert to GB) over the entirety of your SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="19997-333">From this table of system-wide memory allocations, you can see that a query running on a DW2000 in the xlargerc resource class is allocated a total of 375 GB of memory (6,400 MB \* 60 distributions / 1,024 to convert to GB) over the entirety of your SQL Data Warehouse.</span></span>

## <a name="concurrency-slot-consumption"></a><span data-ttu-id="19997-334">Concurrency slot consumption</span><span class="sxs-lookup"><span data-stu-id="19997-334">Concurrency slot consumption</span></span>
<span data-ttu-id="19997-335">SQL Data Warehouse grants more memory to queries running in higher resource classes.</span><span class="sxs-lookup"><span data-stu-id="19997-335">SQL Data Warehouse grants more memory to queries running in higher resource classes.</span></span> <span data-ttu-id="19997-336">Memory is a fixed resource.</span><span class="sxs-lookup"><span data-stu-id="19997-336">Memory is a fixed resource.</span></span>  <span data-ttu-id="19997-337">Therefore, the more memory allocated per query, the fewer concurrent queries can execute.</span><span class="sxs-lookup"><span data-stu-id="19997-337">Therefore, the more memory allocated per query, the fewer concurrent queries can execute.</span></span> <span data-ttu-id="19997-338">The following table reiterates all of the previous concepts in a single view that shows the number of concurrency slots available by DWU and the slots consumed by each resource class.</span><span class="sxs-lookup"><span data-stu-id="19997-338">The following table reiterates all of the previous concepts in a single view that shows the number of concurrency slots available by DWU and the slots consumed by each resource class.</span></span>

### <a name="allocation-and-consumption-of-concurrency-slots"></a><span data-ttu-id="19997-339">Allocation and consumption of concurrency slots</span><span class="sxs-lookup"><span data-stu-id="19997-339">Allocation and consumption of concurrency slots</span></span>
| <span data-ttu-id="19997-340">DWU</span><span class="sxs-lookup"><span data-stu-id="19997-340">DWU</span></span> | <span data-ttu-id="19997-341">Maximum concurrent queries</span><span class="sxs-lookup"><span data-stu-id="19997-341">Maximum concurrent queries</span></span> | <span data-ttu-id="19997-342">Concurrency slots allocated</span><span class="sxs-lookup"><span data-stu-id="19997-342">Concurrency slots allocated</span></span> | <span data-ttu-id="19997-343">Slots used by smallrc</span><span class="sxs-lookup"><span data-stu-id="19997-343">Slots used by smallrc</span></span> | <span data-ttu-id="19997-344">Slots used by mediumrc</span><span class="sxs-lookup"><span data-stu-id="19997-344">Slots used by mediumrc</span></span> | <span data-ttu-id="19997-345">Slots used by largerc</span><span class="sxs-lookup"><span data-stu-id="19997-345">Slots used by largerc</span></span> | <span data-ttu-id="19997-346">Slots used by xlargerc</span><span class="sxs-lookup"><span data-stu-id="19997-346">Slots used by xlargerc</span></span> |
|:--- |:---:|:---:|:---:|:---:|:---:|:---:|
| <span data-ttu-id="19997-347">DW100</span><span class="sxs-lookup"><span data-stu-id="19997-347">DW100</span></span> |<span data-ttu-id="19997-348">4</span><span class="sxs-lookup"><span data-stu-id="19997-348">4</span></span> |<span data-ttu-id="19997-349">4</span><span class="sxs-lookup"><span data-stu-id="19997-349">4</span></span> |<span data-ttu-id="19997-350">1</span><span class="sxs-lookup"><span data-stu-id="19997-350">1</span></span> |<span data-ttu-id="19997-351">1</span><span class="sxs-lookup"><span data-stu-id="19997-351">1</span></span> |<span data-ttu-id="19997-352">2</span><span class="sxs-lookup"><span data-stu-id="19997-352">2</span></span> |<span data-ttu-id="19997-353">4</span><span class="sxs-lookup"><span data-stu-id="19997-353">4</span></span> |
| <span data-ttu-id="19997-354">DW200</span><span class="sxs-lookup"><span data-stu-id="19997-354">DW200</span></span> |<span data-ttu-id="19997-355">8</span><span class="sxs-lookup"><span data-stu-id="19997-355">8</span></span> |<span data-ttu-id="19997-356">8</span><span class="sxs-lookup"><span data-stu-id="19997-356">8</span></span> |<span data-ttu-id="19997-357">1</span><span class="sxs-lookup"><span data-stu-id="19997-357">1</span></span> |<span data-ttu-id="19997-358">2</span><span class="sxs-lookup"><span data-stu-id="19997-358">2</span></span> |<span data-ttu-id="19997-359">4</span><span class="sxs-lookup"><span data-stu-id="19997-359">4</span></span> |<span data-ttu-id="19997-360">8</span><span class="sxs-lookup"><span data-stu-id="19997-360">8</span></span> |
| <span data-ttu-id="19997-361">DW300</span><span class="sxs-lookup"><span data-stu-id="19997-361">DW300</span></span> |<span data-ttu-id="19997-362">12</span><span class="sxs-lookup"><span data-stu-id="19997-362">12</span></span> |<span data-ttu-id="19997-363">12</span><span class="sxs-lookup"><span data-stu-id="19997-363">12</span></span> |<span data-ttu-id="19997-364">1</span><span class="sxs-lookup"><span data-stu-id="19997-364">1</span></span> |<span data-ttu-id="19997-365">2</span><span class="sxs-lookup"><span data-stu-id="19997-365">2</span></span> |<span data-ttu-id="19997-366">4</span><span class="sxs-lookup"><span data-stu-id="19997-366">4</span></span> |<span data-ttu-id="19997-367">8</span><span class="sxs-lookup"><span data-stu-id="19997-367">8</span></span> |
| <span data-ttu-id="19997-368">DW400</span><span class="sxs-lookup"><span data-stu-id="19997-368">DW400</span></span> |<span data-ttu-id="19997-369">16</span><span class="sxs-lookup"><span data-stu-id="19997-369">16</span></span> |<span data-ttu-id="19997-370">16</span><span class="sxs-lookup"><span data-stu-id="19997-370">16</span></span> |<span data-ttu-id="19997-371">1</span><span class="sxs-lookup"><span data-stu-id="19997-371">1</span></span> |<span data-ttu-id="19997-372">4</span><span class="sxs-lookup"><span data-stu-id="19997-372">4</span></span> |<span data-ttu-id="19997-373">8</span><span class="sxs-lookup"><span data-stu-id="19997-373">8</span></span> |<span data-ttu-id="19997-374">16</span><span class="sxs-lookup"><span data-stu-id="19997-374">16</span></span> |
| <span data-ttu-id="19997-375">DW500</span><span class="sxs-lookup"><span data-stu-id="19997-375">DW500</span></span> |<span data-ttu-id="19997-376">20</span><span class="sxs-lookup"><span data-stu-id="19997-376">20</span></span> |<span data-ttu-id="19997-377">20</span><span class="sxs-lookup"><span data-stu-id="19997-377">20</span></span> |<span data-ttu-id="19997-378">1</span><span class="sxs-lookup"><span data-stu-id="19997-378">1</span></span> |<span data-ttu-id="19997-379">4</span><span class="sxs-lookup"><span data-stu-id="19997-379">4</span></span> |<span data-ttu-id="19997-380">8</span><span class="sxs-lookup"><span data-stu-id="19997-380">8</span></span> |<span data-ttu-id="19997-381">16</span><span class="sxs-lookup"><span data-stu-id="19997-381">16</span></span> |
| <span data-ttu-id="19997-382">DW600</span><span class="sxs-lookup"><span data-stu-id="19997-382">DW600</span></span> |<span data-ttu-id="19997-383">24</span><span class="sxs-lookup"><span data-stu-id="19997-383">24</span></span> |<span data-ttu-id="19997-384">24</span><span class="sxs-lookup"><span data-stu-id="19997-384">24</span></span> |<span data-ttu-id="19997-385">1</span><span class="sxs-lookup"><span data-stu-id="19997-385">1</span></span> |<span data-ttu-id="19997-386">4</span><span class="sxs-lookup"><span data-stu-id="19997-386">4</span></span> |<span data-ttu-id="19997-387">8</span><span class="sxs-lookup"><span data-stu-id="19997-387">8</span></span> |<span data-ttu-id="19997-388">16</span><span class="sxs-lookup"><span data-stu-id="19997-388">16</span></span> |
| <span data-ttu-id="19997-389">DW1000</span><span class="sxs-lookup"><span data-stu-id="19997-389">DW1000</span></span> |<span data-ttu-id="19997-390">32</span><span class="sxs-lookup"><span data-stu-id="19997-390">32</span></span> |<span data-ttu-id="19997-391">40</span><span class="sxs-lookup"><span data-stu-id="19997-391">40</span></span> |<span data-ttu-id="19997-392">1</span><span class="sxs-lookup"><span data-stu-id="19997-392">1</span></span> |<span data-ttu-id="19997-393">8</span><span class="sxs-lookup"><span data-stu-id="19997-393">8</span></span> |<span data-ttu-id="19997-394">16</span><span class="sxs-lookup"><span data-stu-id="19997-394">16</span></span> |<span data-ttu-id="19997-395">32</span><span class="sxs-lookup"><span data-stu-id="19997-395">32</span></span> |
| <span data-ttu-id="19997-396">DW1200</span><span class="sxs-lookup"><span data-stu-id="19997-396">DW1200</span></span> |<span data-ttu-id="19997-397">32</span><span class="sxs-lookup"><span data-stu-id="19997-397">32</span></span> |<span data-ttu-id="19997-398">48</span><span class="sxs-lookup"><span data-stu-id="19997-398">48</span></span> |<span data-ttu-id="19997-399">1</span><span class="sxs-lookup"><span data-stu-id="19997-399">1</span></span> |<span data-ttu-id="19997-400">8</span><span class="sxs-lookup"><span data-stu-id="19997-400">8</span></span> |<span data-ttu-id="19997-401">16</span><span class="sxs-lookup"><span data-stu-id="19997-401">16</span></span> |<span data-ttu-id="19997-402">32</span><span class="sxs-lookup"><span data-stu-id="19997-402">32</span></span> |
| <span data-ttu-id="19997-403">DW1500</span><span class="sxs-lookup"><span data-stu-id="19997-403">DW1500</span></span> |<span data-ttu-id="19997-404">32</span><span class="sxs-lookup"><span data-stu-id="19997-404">32</span></span> |<span data-ttu-id="19997-405">60</span><span class="sxs-lookup"><span data-stu-id="19997-405">60</span></span> |<span data-ttu-id="19997-406">1</span><span class="sxs-lookup"><span data-stu-id="19997-406">1</span></span> |<span data-ttu-id="19997-407">8</span><span class="sxs-lookup"><span data-stu-id="19997-407">8</span></span> |<span data-ttu-id="19997-408">16</span><span class="sxs-lookup"><span data-stu-id="19997-408">16</span></span> |<span data-ttu-id="19997-409">32</span><span class="sxs-lookup"><span data-stu-id="19997-409">32</span></span> |
| <span data-ttu-id="19997-410">DW2000</span><span class="sxs-lookup"><span data-stu-id="19997-410">DW2000</span></span> |<span data-ttu-id="19997-411">32</span><span class="sxs-lookup"><span data-stu-id="19997-411">32</span></span> |<span data-ttu-id="19997-412">80</span><span class="sxs-lookup"><span data-stu-id="19997-412">80</span></span> |<span data-ttu-id="19997-413">1</span><span class="sxs-lookup"><span data-stu-id="19997-413">1</span></span> |<span data-ttu-id="19997-414">16</span><span class="sxs-lookup"><span data-stu-id="19997-414">16</span></span> |<span data-ttu-id="19997-415">32</span><span class="sxs-lookup"><span data-stu-id="19997-415">32</span></span> |<span data-ttu-id="19997-416">64</span><span class="sxs-lookup"><span data-stu-id="19997-416">64</span></span> |
| <span data-ttu-id="19997-417">DW3000</span><span class="sxs-lookup"><span data-stu-id="19997-417">DW3000</span></span> |<span data-ttu-id="19997-418">32</span><span class="sxs-lookup"><span data-stu-id="19997-418">32</span></span> |<span data-ttu-id="19997-419">120</span><span class="sxs-lookup"><span data-stu-id="19997-419">120</span></span> |<span data-ttu-id="19997-420">1</span><span class="sxs-lookup"><span data-stu-id="19997-420">1</span></span> |<span data-ttu-id="19997-421">16</span><span class="sxs-lookup"><span data-stu-id="19997-421">16</span></span> |<span data-ttu-id="19997-422">32</span><span class="sxs-lookup"><span data-stu-id="19997-422">32</span></span> |<span data-ttu-id="19997-423">64</span><span class="sxs-lookup"><span data-stu-id="19997-423">64</span></span> |
| <span data-ttu-id="19997-424">DW6000</span><span class="sxs-lookup"><span data-stu-id="19997-424">DW6000</span></span> |<span data-ttu-id="19997-425">32</span><span class="sxs-lookup"><span data-stu-id="19997-425">32</span></span> |<span data-ttu-id="19997-426">240</span><span class="sxs-lookup"><span data-stu-id="19997-426">240</span></span> |<span data-ttu-id="19997-427">1</span><span class="sxs-lookup"><span data-stu-id="19997-427">1</span></span> |<span data-ttu-id="19997-428">32</span><span class="sxs-lookup"><span data-stu-id="19997-428">32</span></span> |<span data-ttu-id="19997-429">64</span><span class="sxs-lookup"><span data-stu-id="19997-429">64</span></span> |<span data-ttu-id="19997-430">128</span><span class="sxs-lookup"><span data-stu-id="19997-430">128</span></span> |

<span data-ttu-id="19997-431">From this table, you can see that SQL Data Warehouse running as DW1000 allocates a maximum of 32 concurrent queries and a total of 40 concurrency slots.</span><span class="sxs-lookup"><span data-stu-id="19997-431">From this table, you can see that SQL Data Warehouse running as DW1000 allocates a maximum of 32 concurrent queries and a total of 40 concurrency slots.</span></span> <span data-ttu-id="19997-432">If all users are running in smallrc, 32 concurrent queries would be allowed because each query would consume 1 concurrency slot.</span><span class="sxs-lookup"><span data-stu-id="19997-432">If all users are running in smallrc, 32 concurrent queries would be allowed because each query would consume 1 concurrency slot.</span></span> <span data-ttu-id="19997-433">If all users on a DW1000 were running in mediumrc, each query would be allocated 800 MB per distribution for a total memory allocation of 47 GB per query, and concurrency would be limited to 5 users (40 concurrency slots / 8 slots per mediumrc user).</span><span class="sxs-lookup"><span data-stu-id="19997-433">If all users on a DW1000 were running in mediumrc, each query would be allocated 800 MB per distribution for a total memory allocation of 47 GB per query, and concurrency would be limited to 5 users (40 concurrency slots / 8 slots per mediumrc user).</span></span>

## <a name="query-importance"></a><span data-ttu-id="19997-434">Query importance</span><span class="sxs-lookup"><span data-stu-id="19997-434">Query importance</span></span>
<span data-ttu-id="19997-435">SQL Data Warehouse implements resource classes by using workload groups.</span><span class="sxs-lookup"><span data-stu-id="19997-435">SQL Data Warehouse implements resource classes by using workload groups.</span></span> <span data-ttu-id="19997-436">There are a total of eight workload groups that control the behavior of the resource classes across the various DWU sizes.</span><span class="sxs-lookup"><span data-stu-id="19997-436">There are a total of eight workload groups that control the behavior of the resource classes across the various DWU sizes.</span></span> <span data-ttu-id="19997-437">For any DWU, SQL Data Warehouse uses only four of the eight workload groups.</span><span class="sxs-lookup"><span data-stu-id="19997-437">For any DWU, SQL Data Warehouse uses only four of the eight workload groups.</span></span> <span data-ttu-id="19997-438">This makes sense because each workload group is assigned to one of four resource classes: smallrc, mediumrc, largerc, or xlargerc.</span><span class="sxs-lookup"><span data-stu-id="19997-438">This makes sense because each workload group is assigned to one of four resource classes: smallrc, mediumrc, largerc, or xlargerc.</span></span> <span data-ttu-id="19997-439">The importance of understanding the workload groups is that some of these workload groups are set to higher *importance*.</span><span class="sxs-lookup"><span data-stu-id="19997-439">The importance of understanding the workload groups is that some of these workload groups are set to higher *importance*.</span></span> <span data-ttu-id="19997-440">Importance is used for CPU scheduling.</span><span class="sxs-lookup"><span data-stu-id="19997-440">Importance is used for CPU scheduling.</span></span> <span data-ttu-id="19997-441">Queries run with high importance will get three times more CPU cycles than those with medium importance.</span><span class="sxs-lookup"><span data-stu-id="19997-441">Queries run with high importance will get three times more CPU cycles than those with medium importance.</span></span> <span data-ttu-id="19997-442">Therefore, concurrency slot mappings also determine CPU priority.</span><span class="sxs-lookup"><span data-stu-id="19997-442">Therefore, concurrency slot mappings also determine CPU priority.</span></span> <span data-ttu-id="19997-443">When a query consumes 16 or more slots, it runs as high importance.</span><span class="sxs-lookup"><span data-stu-id="19997-443">When a query consumes 16 or more slots, it runs as high importance.</span></span>

<span data-ttu-id="19997-444">The following table shows the importance mappings for each workload group.</span><span class="sxs-lookup"><span data-stu-id="19997-444">The following table shows the importance mappings for each workload group.</span></span>

### <a name="workload-group-mappings-to-concurrency-slots-and-importance"></a><span data-ttu-id="19997-445">Workload group mappings to concurrency slots and importance</span><span class="sxs-lookup"><span data-stu-id="19997-445">Workload group mappings to concurrency slots and importance</span></span>
| <span data-ttu-id="19997-446">Workload groups</span><span class="sxs-lookup"><span data-stu-id="19997-446">Workload groups</span></span> | <span data-ttu-id="19997-447">Concurrency slot mapping</span><span class="sxs-lookup"><span data-stu-id="19997-447">Concurrency slot mapping</span></span> | <span data-ttu-id="19997-448">MB / Distribution</span><span class="sxs-lookup"><span data-stu-id="19997-448">MB / Distribution</span></span> | <span data-ttu-id="19997-449">Importance mapping</span><span class="sxs-lookup"><span data-stu-id="19997-449">Importance mapping</span></span> |
|:--- |:---:|:---:|:--- |
| <span data-ttu-id="19997-450">SloDWGroupC00</span><span class="sxs-lookup"><span data-stu-id="19997-450">SloDWGroupC00</span></span> |<span data-ttu-id="19997-451">1</span><span class="sxs-lookup"><span data-stu-id="19997-451">1</span></span> |<span data-ttu-id="19997-452">100</span><span class="sxs-lookup"><span data-stu-id="19997-452">100</span></span> |<span data-ttu-id="19997-453">Medium</span><span class="sxs-lookup"><span data-stu-id="19997-453">Medium</span></span> |
| <span data-ttu-id="19997-454">SloDWGroupC01</span><span class="sxs-lookup"><span data-stu-id="19997-454">SloDWGroupC01</span></span> |<span data-ttu-id="19997-455">2</span><span class="sxs-lookup"><span data-stu-id="19997-455">2</span></span> |<span data-ttu-id="19997-456">200</span><span class="sxs-lookup"><span data-stu-id="19997-456">200</span></span> |<span data-ttu-id="19997-457">Medium</span><span class="sxs-lookup"><span data-stu-id="19997-457">Medium</span></span> |
| <span data-ttu-id="19997-458">SloDWGroupC02</span><span class="sxs-lookup"><span data-stu-id="19997-458">SloDWGroupC02</span></span> |<span data-ttu-id="19997-459">4</span><span class="sxs-lookup"><span data-stu-id="19997-459">4</span></span> |<span data-ttu-id="19997-460">400</span><span class="sxs-lookup"><span data-stu-id="19997-460">400</span></span> |<span data-ttu-id="19997-461">Medium</span><span class="sxs-lookup"><span data-stu-id="19997-461">Medium</span></span> |
| <span data-ttu-id="19997-462">SloDWGroupC03</span><span class="sxs-lookup"><span data-stu-id="19997-462">SloDWGroupC03</span></span> |<span data-ttu-id="19997-463">8</span><span class="sxs-lookup"><span data-stu-id="19997-463">8</span></span> |<span data-ttu-id="19997-464">800</span><span class="sxs-lookup"><span data-stu-id="19997-464">800</span></span> |<span data-ttu-id="19997-465">Medium</span><span class="sxs-lookup"><span data-stu-id="19997-465">Medium</span></span> |
| <span data-ttu-id="19997-466">SloDWGroupC04</span><span class="sxs-lookup"><span data-stu-id="19997-466">SloDWGroupC04</span></span> |<span data-ttu-id="19997-467">16</span><span class="sxs-lookup"><span data-stu-id="19997-467">16</span></span> |<span data-ttu-id="19997-468">1,600</span><span class="sxs-lookup"><span data-stu-id="19997-468">1,600</span></span> |<span data-ttu-id="19997-469">High</span><span class="sxs-lookup"><span data-stu-id="19997-469">High</span></span> |
| <span data-ttu-id="19997-470">SloDWGroupC05</span><span class="sxs-lookup"><span data-stu-id="19997-470">SloDWGroupC05</span></span> |<span data-ttu-id="19997-471">32</span><span class="sxs-lookup"><span data-stu-id="19997-471">32</span></span> |<span data-ttu-id="19997-472">3,200</span><span class="sxs-lookup"><span data-stu-id="19997-472">3,200</span></span> |<span data-ttu-id="19997-473">High</span><span class="sxs-lookup"><span data-stu-id="19997-473">High</span></span> |
| <span data-ttu-id="19997-474">SloDWGroupC06</span><span class="sxs-lookup"><span data-stu-id="19997-474">SloDWGroupC06</span></span> |<span data-ttu-id="19997-475">64</span><span class="sxs-lookup"><span data-stu-id="19997-475">64</span></span> |<span data-ttu-id="19997-476">6,400</span><span class="sxs-lookup"><span data-stu-id="19997-476">6,400</span></span> |<span data-ttu-id="19997-477">High</span><span class="sxs-lookup"><span data-stu-id="19997-477">High</span></span> |
| <span data-ttu-id="19997-478">SloDWGroupC07</span><span class="sxs-lookup"><span data-stu-id="19997-478">SloDWGroupC07</span></span> |<span data-ttu-id="19997-479">128</span><span class="sxs-lookup"><span data-stu-id="19997-479">128</span></span> |<span data-ttu-id="19997-480">12,800</span><span class="sxs-lookup"><span data-stu-id="19997-480">12,800</span></span> |<span data-ttu-id="19997-481">High</span><span class="sxs-lookup"><span data-stu-id="19997-481">High</span></span> |

<span data-ttu-id="19997-482">From the **Allocation and consumption of concurrency slots** chart, you can see that a DW500 uses 1, 4, 8 or 16 concurrency slots for smallrc, mediumrc, largerc, and xlargerc, respectively.</span><span class="sxs-lookup"><span data-stu-id="19997-482">From the **Allocation and consumption of concurrency slots** chart, you can see that a DW500 uses 1, 4, 8 or 16 concurrency slots for smallrc, mediumrc, largerc, and xlargerc, respectively.</span></span> <span data-ttu-id="19997-483">You can look those values up in the preceding chart to find the importance for each resource class.</span><span class="sxs-lookup"><span data-stu-id="19997-483">You can look those values up in the preceding chart to find the importance for each resource class.</span></span>

### <a name="dw500-mapping-of-resource-classes-to-importance"></a><span data-ttu-id="19997-484">DW500 mapping of resource classes to importance</span><span class="sxs-lookup"><span data-stu-id="19997-484">DW500 mapping of resource classes to importance</span></span>
| <span data-ttu-id="19997-485">Resource class</span><span class="sxs-lookup"><span data-stu-id="19997-485">Resource class</span></span> | <span data-ttu-id="19997-486">Workload group</span><span class="sxs-lookup"><span data-stu-id="19997-486">Workload group</span></span> | <span data-ttu-id="19997-487">Concurrency slots used</span><span class="sxs-lookup"><span data-stu-id="19997-487">Concurrency slots used</span></span> | <span data-ttu-id="19997-488">MB / Distribution</span><span class="sxs-lookup"><span data-stu-id="19997-488">MB / Distribution</span></span> | <span data-ttu-id="19997-489">Importance</span><span class="sxs-lookup"><span data-stu-id="19997-489">Importance</span></span> |
|:--- |:--- |:---:|:---:|:--- |
| <span data-ttu-id="19997-490">smallrc</span><span class="sxs-lookup"><span data-stu-id="19997-490">smallrc</span></span> |<span data-ttu-id="19997-491">SloDWGroupC00</span><span class="sxs-lookup"><span data-stu-id="19997-491">SloDWGroupC00</span></span> |<span data-ttu-id="19997-492">1</span><span class="sxs-lookup"><span data-stu-id="19997-492">1</span></span> |<span data-ttu-id="19997-493">100</span><span class="sxs-lookup"><span data-stu-id="19997-493">100</span></span> |<span data-ttu-id="19997-494">Medium</span><span class="sxs-lookup"><span data-stu-id="19997-494">Medium</span></span> |
| <span data-ttu-id="19997-495">mediumrc</span><span class="sxs-lookup"><span data-stu-id="19997-495">mediumrc</span></span> |<span data-ttu-id="19997-496">SloDWGroupC02</span><span class="sxs-lookup"><span data-stu-id="19997-496">SloDWGroupC02</span></span> |<span data-ttu-id="19997-497">4</span><span class="sxs-lookup"><span data-stu-id="19997-497">4</span></span> |<span data-ttu-id="19997-498">400</span><span class="sxs-lookup"><span data-stu-id="19997-498">400</span></span> |<span data-ttu-id="19997-499">Medium</span><span class="sxs-lookup"><span data-stu-id="19997-499">Medium</span></span> |
| <span data-ttu-id="19997-500">largerc</span><span class="sxs-lookup"><span data-stu-id="19997-500">largerc</span></span> |<span data-ttu-id="19997-501">SloDWGroupC03</span><span class="sxs-lookup"><span data-stu-id="19997-501">SloDWGroupC03</span></span> |<span data-ttu-id="19997-502">8</span><span class="sxs-lookup"><span data-stu-id="19997-502">8</span></span> |<span data-ttu-id="19997-503">800</span><span class="sxs-lookup"><span data-stu-id="19997-503">800</span></span> |<span data-ttu-id="19997-504">Medium</span><span class="sxs-lookup"><span data-stu-id="19997-504">Medium</span></span> |
| <span data-ttu-id="19997-505">xlargerc</span><span class="sxs-lookup"><span data-stu-id="19997-505">xlargerc</span></span> |<span data-ttu-id="19997-506">SloDWGroupC04</span><span class="sxs-lookup"><span data-stu-id="19997-506">SloDWGroupC04</span></span> |<span data-ttu-id="19997-507">16</span><span class="sxs-lookup"><span data-stu-id="19997-507">16</span></span> |<span data-ttu-id="19997-508">1,600</span><span class="sxs-lookup"><span data-stu-id="19997-508">1,600</span></span> |<span data-ttu-id="19997-509">High</span><span class="sxs-lookup"><span data-stu-id="19997-509">High</span></span> |

<span data-ttu-id="19997-510">You can use the following DMV query to look at the differences in memory resource allocation in detail from the perspective of the resource governor, or to analyze active and historic usage of the workload groups when troubleshooting.</span><span class="sxs-lookup"><span data-stu-id="19997-510">You can use the following DMV query to look at the differences in memory resource allocation in detail from the perspective of the resource governor, or to analyze active and historic usage of the workload groups when troubleshooting.</span></span>

```sql
WITH rg
AS
(   SELECT  
     pn.name                        AS node_name
    ,pn.[type]                        AS node_type
    ,pn.pdw_node_id                    AS node_id
    ,rp.name                        AS pool_name
    ,rp.max_memory_kb*1.0/1024                AS pool_max_mem_MB
    ,wg.name                        AS group_name
    ,wg.importance                    AS group_importance
    ,wg.request_max_memory_grant_percent        AS group_request_max_memory_grant_pcnt
    ,wg.max_dop                        AS group_max_dop
    ,wg.effective_max_dop                AS group_effective_max_dop
    ,wg.total_request_count                AS group_total_request_count
    ,wg.total_queued_request_count            AS group_total_queued_request_count
    ,wg.active_request_count                AS group_active_request_count
    ,wg.queued_request_count                AS group_queued_request_count
    FROM    sys.dm_pdw_nodes_resource_governor_workload_groups wg
    JOIN    sys.dm_pdw_nodes_resource_governor_resource_pools rp    
            ON  wg.pdw_node_id  = rp.pdw_node_id
            AND wg.pool_id      = rp.pool_id
    JOIN    sys.dm_pdw_nodes pn
            ON    wg.pdw_node_id    = pn.pdw_node_id
    WHERE   wg.name like 'SloDWGroup%'
        AND     rp.name = 'SloDWPool'
)
SELECT    pool_name
,        pool_max_mem_MB
,        group_name
,        group_importance
,        (pool_max_mem_MB/100)*group_request_max_memory_grant_pcnt AS max_memory_grant_MB
,        node_name
,        node_type
,       group_total_request_count
,       group_total_queued_request_count
,       group_active_request_count
,       group_queued_request_count
FROM    rg
ORDER BY
    node_name
,    group_request_max_memory_grant_pcnt
,    group_importance
;
```

## <a name="queries-that-honor-concurrency-limits"></a><span data-ttu-id="19997-511">Queries that honor concurrency limits</span><span class="sxs-lookup"><span data-stu-id="19997-511">Queries that honor concurrency limits</span></span>
<span data-ttu-id="19997-512">Most queries are governed by resource classes.</span><span class="sxs-lookup"><span data-stu-id="19997-512">Most queries are governed by resource classes.</span></span> <span data-ttu-id="19997-513">These queries must fit inside both the concurrent query and concurrency slot thresholds.</span><span class="sxs-lookup"><span data-stu-id="19997-513">These queries must fit inside both the concurrent query and concurrency slot thresholds.</span></span> <span data-ttu-id="19997-514">A user cannot choose to exclude a query from the concurrency slot model.</span><span class="sxs-lookup"><span data-stu-id="19997-514">A user cannot choose to exclude a query from the concurrency slot model.</span></span>

<span data-ttu-id="19997-515">To reiterate, the following statements honor resource classes:</span><span class="sxs-lookup"><span data-stu-id="19997-515">To reiterate, the following statements honor resource classes:</span></span>

* <span data-ttu-id="19997-516">INSERT-SELECT</span><span class="sxs-lookup"><span data-stu-id="19997-516">INSERT-SELECT</span></span>
* <span data-ttu-id="19997-517">UPDATE</span><span class="sxs-lookup"><span data-stu-id="19997-517">UPDATE</span></span>
* <span data-ttu-id="19997-518">DELETE</span><span class="sxs-lookup"><span data-stu-id="19997-518">DELETE</span></span>
* <span data-ttu-id="19997-519">SELECT (when querying user tables)</span><span class="sxs-lookup"><span data-stu-id="19997-519">SELECT (when querying user tables)</span></span>
* <span data-ttu-id="19997-520">ALTER INDEX REBUILD</span><span class="sxs-lookup"><span data-stu-id="19997-520">ALTER INDEX REBUILD</span></span>
* <span data-ttu-id="19997-521">ALTER INDEX REORGANIZE</span><span class="sxs-lookup"><span data-stu-id="19997-521">ALTER INDEX REORGANIZE</span></span>
* <span data-ttu-id="19997-522">ALTER TABLE REBUILD</span><span class="sxs-lookup"><span data-stu-id="19997-522">ALTER TABLE REBUILD</span></span>
* <span data-ttu-id="19997-523">CREATE INDEX</span><span class="sxs-lookup"><span data-stu-id="19997-523">CREATE INDEX</span></span>
* <span data-ttu-id="19997-524">CREATE CLUSTERED COLUMNSTORE INDEX</span><span class="sxs-lookup"><span data-stu-id="19997-524">CREATE CLUSTERED COLUMNSTORE INDEX</span></span>
* <span data-ttu-id="19997-525">CREATE TABLE AS SELECT (CTAS)</span><span class="sxs-lookup"><span data-stu-id="19997-525">CREATE TABLE AS SELECT (CTAS)</span></span>
* <span data-ttu-id="19997-526">Data loading</span><span class="sxs-lookup"><span data-stu-id="19997-526">Data loading</span></span>
* <span data-ttu-id="19997-527">Data movement operations conducted by the Data Movement Service (DMS)</span><span class="sxs-lookup"><span data-stu-id="19997-527">Data movement operations conducted by the Data Movement Service (DMS)</span></span>

## <a name="query-exceptions-to-concurrency-limits"></a><span data-ttu-id="19997-528">Query exceptions to concurrency limits</span><span class="sxs-lookup"><span data-stu-id="19997-528">Query exceptions to concurrency limits</span></span>
<span data-ttu-id="19997-529">Some queries do not honor the resource class to which the user is assigned.</span><span class="sxs-lookup"><span data-stu-id="19997-529">Some queries do not honor the resource class to which the user is assigned.</span></span> <span data-ttu-id="19997-530">These exceptions to the concurrency limits are made when the memory resources needed for a particular command are low, often because the command is a metadata operation.</span><span class="sxs-lookup"><span data-stu-id="19997-530">These exceptions to the concurrency limits are made when the memory resources needed for a particular command are low, often because the command is a metadata operation.</span></span> <span data-ttu-id="19997-531">The goal of these exceptions is to avoid larger memory allocations for queries that will never need them.</span><span class="sxs-lookup"><span data-stu-id="19997-531">The goal of these exceptions is to avoid larger memory allocations for queries that will never need them.</span></span> <span data-ttu-id="19997-532">In these cases, the default small resource class (smallrc) is always used regardless of the actual resource class assigned to the user.</span><span class="sxs-lookup"><span data-stu-id="19997-532">In these cases, the default small resource class (smallrc) is always used regardless of the actual resource class assigned to the user.</span></span> <span data-ttu-id="19997-533">For example, `CREATE LOGIN` will always run in smallrc.</span><span class="sxs-lookup"><span data-stu-id="19997-533">For example, `CREATE LOGIN` will always run in smallrc.</span></span> <span data-ttu-id="19997-534">The resources required to fulfill this operation are very low, so it does not make sense to include the query in the concurrency slot model.</span><span class="sxs-lookup"><span data-stu-id="19997-534">The resources required to fulfill this operation are very low, so it does not make sense to include the query in the concurrency slot model.</span></span>  <span data-ttu-id="19997-535">These queries are also not limited by the 32 user concurrency limit, an unlimited number of these queries can run up to the session limit of 1,024 sessions.</span><span class="sxs-lookup"><span data-stu-id="19997-535">These queries are also not limited by the 32 user concurrency limit, an unlimited number of these queries can run up to the session limit of 1,024 sessions.</span></span>

<span data-ttu-id="19997-536">The following statements do not honor resource classes:</span><span class="sxs-lookup"><span data-stu-id="19997-536">The following statements do not honor resource classes:</span></span>

* <span data-ttu-id="19997-537">CREATE or DROP TABLE</span><span class="sxs-lookup"><span data-stu-id="19997-537">CREATE or DROP TABLE</span></span>
* <span data-ttu-id="19997-538">ALTER TABLE ... SWITCH, SPLIT, or MERGE PARTITION</span><span class="sxs-lookup"><span data-stu-id="19997-538">ALTER TABLE ... SWITCH, SPLIT, or MERGE PARTITION</span></span>
* <span data-ttu-id="19997-539">ALTER INDEX DISABLE</span><span class="sxs-lookup"><span data-stu-id="19997-539">ALTER INDEX DISABLE</span></span>
* <span data-ttu-id="19997-540">DROP INDEX</span><span class="sxs-lookup"><span data-stu-id="19997-540">DROP INDEX</span></span>
* <span data-ttu-id="19997-541">CREATE, UPDATE, or DROP STATISTICS</span><span class="sxs-lookup"><span data-stu-id="19997-541">CREATE, UPDATE, or DROP STATISTICS</span></span>
* <span data-ttu-id="19997-542">TRUNCATE TABLE</span><span class="sxs-lookup"><span data-stu-id="19997-542">TRUNCATE TABLE</span></span>
* <span data-ttu-id="19997-543">ALTER AUTHORIZATION</span><span class="sxs-lookup"><span data-stu-id="19997-543">ALTER AUTHORIZATION</span></span>
* <span data-ttu-id="19997-544">CREATE LOGIN</span><span class="sxs-lookup"><span data-stu-id="19997-544">CREATE LOGIN</span></span>
* <span data-ttu-id="19997-545">CREATE, ALTER or DROP USER</span><span class="sxs-lookup"><span data-stu-id="19997-545">CREATE, ALTER or DROP USER</span></span>
* <span data-ttu-id="19997-546">CREATE, ALTER or DROP PROCEDURE</span><span class="sxs-lookup"><span data-stu-id="19997-546">CREATE, ALTER or DROP PROCEDURE</span></span>
* <span data-ttu-id="19997-547">CREATE or DROP VIEW</span><span class="sxs-lookup"><span data-stu-id="19997-547">CREATE or DROP VIEW</span></span>
* <span data-ttu-id="19997-548">INSERT VALUES</span><span class="sxs-lookup"><span data-stu-id="19997-548">INSERT VALUES</span></span>
* <span data-ttu-id="19997-549">SELECT from system views and DMVs</span><span class="sxs-lookup"><span data-stu-id="19997-549">SELECT from system views and DMVs</span></span>
* <span data-ttu-id="19997-550">EXPLAIN</span><span class="sxs-lookup"><span data-stu-id="19997-550">EXPLAIN</span></span>
* <span data-ttu-id="19997-551">DBCC</span><span class="sxs-lookup"><span data-stu-id="19997-551">DBCC</span></span>

<!--
Removed as these two are not confirmed / supported under SQLDW
- CREATE REMOTE TABLE AS SELECT
- CREATE EXTERNAL TABLE AS SELECT
- REDISTRIBUTE
-->

## <a name="change-a-user-resource-class-example"></a><span data-ttu-id="19997-552">Change a user resource class example</span><span class="sxs-lookup"><span data-stu-id="19997-552">Change a user resource class example</span></span>
1. <span data-ttu-id="19997-553">**Create login:** Open a connection to your **master** database on the SQL server hosting your SQL Data Warehouse database and execute the following commands.</span><span class="sxs-lookup"><span data-stu-id="19997-553">**Create login:** Open a connection to your **master** database on the SQL server hosting your SQL Data Warehouse database and execute the following commands.</span></span>
   
    ```sql
    CREATE LOGIN newperson WITH PASSWORD = 'mypassword';
    CREATE USER newperson for LOGIN newperson;
    ```
   
   > [!NOTE]
   > <span data-ttu-id="19997-554">It is a good idea to create a user in the master database for Azure SQL Data Warehouse users.</span><span class="sxs-lookup"><span data-stu-id="19997-554">It is a good idea to create a user in the master database for Azure SQL Data Warehouse users.</span></span> <span data-ttu-id="19997-555">Creating a user in master allows a user to login using tools like SSMS without specifying a database name.</span><span class="sxs-lookup"><span data-stu-id="19997-555">Creating a user in master allows a user to login using tools like SSMS without specifying a database name.</span></span>  <span data-ttu-id="19997-556">It also allows them to use the object explorer to view all databases on a SQL server.</span><span class="sxs-lookup"><span data-stu-id="19997-556">It also allows them to use the object explorer to view all databases on a SQL server.</span></span>  <span data-ttu-id="19997-557">For more details about creating and managing users, see [Secure a database in SQL Data Warehouse][Secure a database in SQL Data Warehouse].</span><span class="sxs-lookup"><span data-stu-id="19997-557">For more details about creating and managing users, see [Secure a database in SQL Data Warehouse][Secure a database in SQL Data Warehouse].</span></span>
   > 
   > 
2. <span data-ttu-id="19997-558">**Create SQL Data Warehouse user:** Open a connection to the **SQL Data Warehouse** database and execute the following command.</span><span class="sxs-lookup"><span data-stu-id="19997-558">**Create SQL Data Warehouse user:** Open a connection to the **SQL Data Warehouse** database and execute the following command.</span></span>
   
    ```sql
    CREATE USER newperson FOR LOGIN newperson;
    ```
3. <span data-ttu-id="19997-559">**Grant permissions:** The following example grants `CONTROL` on the **SQL Data Warehouse** database.</span><span class="sxs-lookup"><span data-stu-id="19997-559">**Grant permissions:** The following example grants `CONTROL` on the **SQL Data Warehouse** database.</span></span> <span data-ttu-id="19997-560">`CONTROL` at the database level is the equivalent of db_owner in SQL Server.</span><span class="sxs-lookup"><span data-stu-id="19997-560">`CONTROL` at the database level is the equivalent of db_owner in SQL Server.</span></span>
   
    ```sql
    GRANT CONTROL ON DATABASE::MySQLDW to newperson;
    ```
4. <span data-ttu-id="19997-561">**Increase resource class:** Use the following query to add a user to a higher workload management role.</span><span class="sxs-lookup"><span data-stu-id="19997-561">**Increase resource class:** Use the following query to add a user to a higher workload management role.</span></span>
   
    ```sql
    EXEC sp_addrolemember 'largerc', 'newperson'
    ```
5. <span data-ttu-id="19997-562">**Decrease resource class:** Use the following query to remove a user from a workload management role.</span><span class="sxs-lookup"><span data-stu-id="19997-562">**Decrease resource class:** Use the following query to remove a user from a workload management role.</span></span>
   
    ```sql
    EXEC sp_droprolemember 'largerc', 'newperson';
    ```
   
   > [!NOTE]
   > <span data-ttu-id="19997-563">It is not possible to remove a user from smallrc.</span><span class="sxs-lookup"><span data-stu-id="19997-563">It is not possible to remove a user from smallrc.</span></span>
   > 
   > 

## <a name="queued-query-detection-and-other-dmvs"></a><span data-ttu-id="19997-564">Queued query detection and other DMVs</span><span class="sxs-lookup"><span data-stu-id="19997-564">Queued query detection and other DMVs</span></span>
<span data-ttu-id="19997-565">You can use the `sys.dm_pdw_exec_requests` DMV to identify queries that are waiting in a concurrency queue.</span><span class="sxs-lookup"><span data-stu-id="19997-565">You can use the `sys.dm_pdw_exec_requests` DMV to identify queries that are waiting in a concurrency queue.</span></span> <span data-ttu-id="19997-566">Queries waiting for a concurrency slot will have a status of **suspended**.</span><span class="sxs-lookup"><span data-stu-id="19997-566">Queries waiting for a concurrency slot will have a status of **suspended**.</span></span>

```sql
SELECT      r.[request_id]                 AS Request_ID
        ,r.[status]                 AS Request_Status
        ,r.[submit_time]             AS Request_SubmitTime
        ,r.[start_time]                 AS Request_StartTime
        ,DATEDIFF(ms,[submit_time],[start_time]) AS Request_InitiateDuration_ms
        ,r.resource_class                         AS Request_resource_class
FROM    sys.dm_pdw_exec_requests r;
```

<span data-ttu-id="19997-567">Workload management roles can be viewed with `sys.database_principals`.</span><span class="sxs-lookup"><span data-stu-id="19997-567">Workload management roles can be viewed with `sys.database_principals`.</span></span>

```sql
SELECT  ro.[name]           AS [db_role_name]
FROM    sys.database_principals ro
WHERE   ro.[type_desc]      = 'DATABASE_ROLE'
AND     ro.[is_fixed_role]  = 0;
```

<span data-ttu-id="19997-568">The following query shows which role each user is assigned to.</span><span class="sxs-lookup"><span data-stu-id="19997-568">The following query shows which role each user is assigned to.</span></span>

```sql
SELECT     r.name AS role_principal_name
        ,m.name AS member_principal_name
FROM    sys.database_role_members rm
JOIN    sys.database_principals AS r            ON rm.role_principal_id        = r.principal_id
JOIN    sys.database_principals AS m            ON rm.member_principal_id    = m.principal_id
WHERE    r.name IN ('mediumrc','largerc', 'xlargerc');
```

<span data-ttu-id="19997-569">SQL Data Warehouse has the following wait types:</span><span class="sxs-lookup"><span data-stu-id="19997-569">SQL Data Warehouse has the following wait types:</span></span>

* <span data-ttu-id="19997-570">**LocalQueriesConcurrencyResourceType**: Queries that sit outside of the concurrency slot framework.</span><span class="sxs-lookup"><span data-stu-id="19997-570">**LocalQueriesConcurrencyResourceType**: Queries that sit outside of the concurrency slot framework.</span></span> <span data-ttu-id="19997-571">DMV queries and system functions such as `SELECT @@VERSION` are examples of local queries.</span><span class="sxs-lookup"><span data-stu-id="19997-571">DMV queries and system functions such as `SELECT @@VERSION` are examples of local queries.</span></span>
* <span data-ttu-id="19997-572">**UserConcurrencyResourceType**: Queries that sit inside the concurrency slot framework.</span><span class="sxs-lookup"><span data-stu-id="19997-572">**UserConcurrencyResourceType**: Queries that sit inside the concurrency slot framework.</span></span> <span data-ttu-id="19997-573">Queries against end-user tables represent examples that would use this resource type.</span><span class="sxs-lookup"><span data-stu-id="19997-573">Queries against end-user tables represent examples that would use this resource type.</span></span>
* <span data-ttu-id="19997-574">**DmsConcurrencyResourceType**: Waits resulting from data movement operations.</span><span class="sxs-lookup"><span data-stu-id="19997-574">**DmsConcurrencyResourceType**: Waits resulting from data movement operations.</span></span>
* <span data-ttu-id="19997-575">**BackupConcurrencyResourceType**: This wait indicates that a database is being backed up.</span><span class="sxs-lookup"><span data-stu-id="19997-575">**BackupConcurrencyResourceType**: This wait indicates that a database is being backed up.</span></span> <span data-ttu-id="19997-576">The maximum value for this resource type is 1.</span><span class="sxs-lookup"><span data-stu-id="19997-576">The maximum value for this resource type is 1.</span></span> <span data-ttu-id="19997-577">If multiple backups have been requested at the same time, the others will queue.</span><span class="sxs-lookup"><span data-stu-id="19997-577">If multiple backups have been requested at the same time, the others will queue.</span></span>

<span data-ttu-id="19997-578">The `sys.dm_pdw_waits` DMV can be used to see which resources a request is waiting for.</span><span class="sxs-lookup"><span data-stu-id="19997-578">The `sys.dm_pdw_waits` DMV can be used to see which resources a request is waiting for.</span></span>

```sql
SELECT  w.[wait_id]
,       w.[session_id]
,       w.[type]            AS Wait_type
,       w.[object_type]
,       w.[object_name]
,       w.[request_id]
,       w.[request_time]
,       w.[acquire_time]
,       w.[state]
,       w.[priority]
,    SESSION_ID()            AS Current_session
,    s.[status]            AS Session_status
,    s.[login_name]
,    s.[query_count]
,    s.[client_id]
,    s.[sql_spid]
,    r.[command]            AS Request_command
,    r.[label]
,    r.[status]            AS Request_status
,    r.[submit_time]
,    r.[start_time]
,    r.[end_compile_time]
,    r.[end_time]
,    DATEDIFF(ms,r.[submit_time],r.[start_time])        AS Request_queue_time_ms
,    DATEDIFF(ms,r.[start_time],r.[end_compile_time])    AS Request_compile_time_ms
,    DATEDIFF(ms,r.[end_compile_time],r.[end_time])        AS Request_execution_time_ms
,    r.[total_elapsed_time]
FROM    sys.dm_pdw_waits w
JOIN    sys.dm_pdw_exec_sessions s  ON w.[session_id] = s.[session_id]
JOIN    sys.dm_pdw_exec_requests r  ON w.[request_id] = r.[request_id]
WHERE    w.[session_id] <> SESSION_ID();
```

<span data-ttu-id="19997-579">The `sys.dm_pdw_resource_waits` DMV shows only the resource waits consumed by a given query.</span><span class="sxs-lookup"><span data-stu-id="19997-579">The `sys.dm_pdw_resource_waits` DMV shows only the resource waits consumed by a given query.</span></span> <span data-ttu-id="19997-580">Resource wait time only measures the time waiting for resources to be provided, as opposed to signal wait time, which is the time it takes for the underlying SQL servers to schedule the query onto the CPU.</span><span class="sxs-lookup"><span data-stu-id="19997-580">Resource wait time only measures the time waiting for resources to be provided, as opposed to signal wait time, which is the time it takes for the underlying SQL servers to schedule the query onto the CPU.</span></span>

```sql
SELECT  [session_id]
,       [type]
,       [object_type]
,       [object_name]
,       [request_id]
,       [request_time]
,       [acquire_time]
,       DATEDIFF(ms,[request_time],[acquire_time])  AS acquire_duration_ms
,       [concurrency_slots_used]                    AS concurrency_slots_reserved
,       [resource_class]
,       [wait_id]                                   AS queue_position
FROM    sys.dm_pdw_resource_waits
WHERE    [session_id] <> SESSION_ID();
```

<span data-ttu-id="19997-581">The `sys.dm_pdw_wait_stats` DMV can be used for historic trend analysis of waits.</span><span class="sxs-lookup"><span data-stu-id="19997-581">The `sys.dm_pdw_wait_stats` DMV can be used for historic trend analysis of waits.</span></span>

```sql
SELECT    w.[pdw_node_id]
,        w.[wait_name]
,        w.[max_wait_time]
,        w.[request_count]
,        w.[signal_time]
,        w.[completed_count]
,        w.[wait_time]
FROM    sys.dm_pdw_wait_stats w;
```

## <a name="next-steps"></a><span data-ttu-id="19997-582">Next steps</span><span class="sxs-lookup"><span data-stu-id="19997-582">Next steps</span></span>
<span data-ttu-id="19997-583">For more information about managing database users and security, see [Secure a database in SQL Data Warehouse][Secure a database in SQL Data Warehouse].</span><span class="sxs-lookup"><span data-stu-id="19997-583">For more information about managing database users and security, see [Secure a database in SQL Data Warehouse][Secure a database in SQL Data Warehouse].</span></span> <span data-ttu-id="19997-584">For more information about how larger resource classes can improve clustered columnstore index quality, see [Rebuilding indexes to improve segment quality].</span><span class="sxs-lookup"><span data-stu-id="19997-584">For more information about how larger resource classes can improve clustered columnstore index quality, see [Rebuilding indexes to improve segment quality].</span></span>

<!--Image references-->

<!--Article references-->
[Secure a database in SQL Data Warehouse]: ./sql-data-warehouse-overview-manage-security.md
[Rebuilding indexes to improve segment quality]: ./sql-data-warehouse-tables-index.md#rebuilding-indexes-to-improve-segment-quality
[Secure a database in SQL Data Warehouse]: ./sql-data-warehouse-overview-manage-security.md

<!--MSDN references-->
[Managing Databases and Logins in Azure SQL Database]:https://msdn.microsoft.com/library/azure/ee336235.aspx

<!--Other Web references-->
