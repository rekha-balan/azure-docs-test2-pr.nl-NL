---
title: Authorization - Microsoft Threat Modeling Tool - Azure | Microsoft Docs
description: mitigations for threats exposed in the Threat Modeling Tool
services: security
documentationcenter: na
author: jegeib
manager: jegeib
editor: jegeib
ms.assetid: na
ms.service: security
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 02/07/2017
ms.author: jegeib
ms.openlocfilehash: eec628a5084dc663978e16e617192802d3ecfcfa
ms.sourcegitcommit: d1451406a010fd3aa854dc8e5b77dc5537d8050e
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 09/13/2018
ms.locfileid: "44782527"
---
# <a name="security-frame-authorization--mitigations"></a><span data-ttu-id="f6fbe-103">Security Frame: Authorization | Mitigations</span><span class="sxs-lookup"><span data-stu-id="f6fbe-103">Security Frame: Authorization | Mitigations</span></span> 
| <span data-ttu-id="f6fbe-104">Product/Service</span><span class="sxs-lookup"><span data-stu-id="f6fbe-104">Product/Service</span></span> | <span data-ttu-id="f6fbe-105">Article</span><span class="sxs-lookup"><span data-stu-id="f6fbe-105">Article</span></span> |
| --------------- | ------- |
| <span data-ttu-id="f6fbe-106">**Machine Trust Boundary**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-106">**Machine Trust Boundary**</span></span> | <ul><li>[<span data-ttu-id="f6fbe-107">Ensure that proper ACLs are configured to restrict unauthorized access to data on the device</span><span class="sxs-lookup"><span data-stu-id="f6fbe-107">Ensure that proper ACLs are configured to restrict unauthorized access to data on the device</span></span>](#acl-restricted-access)</li><li>[<span data-ttu-id="f6fbe-108">Ensure that sensitive user-specific application content is stored in user-profile directory</span><span class="sxs-lookup"><span data-stu-id="f6fbe-108">Ensure that sensitive user-specific application content is stored in user-profile directory</span></span>](#sensitive-directory)</li><li>[<span data-ttu-id="f6fbe-109">Ensure that the deployed applications are run with least privileges</span><span class="sxs-lookup"><span data-stu-id="f6fbe-109">Ensure that the deployed applications are run with least privileges</span></span>](#deployed-privileges)</li></ul> |
| <span data-ttu-id="f6fbe-110">**Web Application**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-110">**Web Application**</span></span> | <ul><li>[<span data-ttu-id="f6fbe-111">Enforce sequential step order when processing business logic flows</span><span class="sxs-lookup"><span data-stu-id="f6fbe-111">Enforce sequential step order when processing business logic flows</span></span>](#sequential-logic)</li><li>[<span data-ttu-id="f6fbe-112">Implement rate limiting mechanism to prevent enumeration</span><span class="sxs-lookup"><span data-stu-id="f6fbe-112">Implement rate limiting mechanism to prevent enumeration</span></span>](#rate-enumeration)</li><li>[<span data-ttu-id="f6fbe-113">Ensure that proper authorization is in place and principle of least privileges is followed</span><span class="sxs-lookup"><span data-stu-id="f6fbe-113">Ensure that proper authorization is in place and principle of least privileges is followed</span></span>](#principle-least-privilege)</li><li>[<span data-ttu-id="f6fbe-114">Business logic and resource access authorization decisions should not be based on incoming request parameters</span><span class="sxs-lookup"><span data-stu-id="f6fbe-114">Business logic and resource access authorization decisions should not be based on incoming request parameters</span></span>](#logic-request-parameters)</li><li>[<span data-ttu-id="f6fbe-115">Ensure that content and resources are not enumerable or accessible via forceful browsing</span><span class="sxs-lookup"><span data-stu-id="f6fbe-115">Ensure that content and resources are not enumerable or accessible via forceful browsing</span></span>](#enumerable-browsing)</li></ul> |
| <span data-ttu-id="f6fbe-116">**Database**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-116">**Database**</span></span> | <ul><li>[<span data-ttu-id="f6fbe-117">Ensure that least-privileged accounts are used to connect to Database server</span><span class="sxs-lookup"><span data-stu-id="f6fbe-117">Ensure that least-privileged accounts are used to connect to Database server</span></span>](#privileged-server)</li><li>[<span data-ttu-id="f6fbe-118">Implement Row Level Security RLS to prevent tenants from accessing each other's data</span><span class="sxs-lookup"><span data-stu-id="f6fbe-118">Implement Row Level Security RLS to prevent tenants from accessing each other's data</span></span>](#rls-tenants)</li><li>[<span data-ttu-id="f6fbe-119">Sysadmin role should only have valid necessary users</span><span class="sxs-lookup"><span data-stu-id="f6fbe-119">Sysadmin role should only have valid necessary users</span></span>](#sysadmin-users)</li></ul> |
| <span data-ttu-id="f6fbe-120">**IoT Cloud Gateway**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-120">**IoT Cloud Gateway**</span></span> | <ul><li>[<span data-ttu-id="f6fbe-121">Connect to Cloud Gateway using least-privileged tokens</span><span class="sxs-lookup"><span data-stu-id="f6fbe-121">Connect to Cloud Gateway using least-privileged tokens</span></span>](#cloud-least-privileged)</li></ul> |
| <span data-ttu-id="f6fbe-122">**Azure Event Hub**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-122">**Azure Event Hub**</span></span> | <ul><li>[<span data-ttu-id="f6fbe-123">Use a send-only permissions SAS Key for generating device tokens</span><span class="sxs-lookup"><span data-stu-id="f6fbe-123">Use a send-only permissions SAS Key for generating device tokens</span></span>](#sendonly-sas)</li><li>[<span data-ttu-id="f6fbe-124">Do not use access tokens that provide direct access to the Event Hub</span><span class="sxs-lookup"><span data-stu-id="f6fbe-124">Do not use access tokens that provide direct access to the Event Hub</span></span>](#access-tokens-hub)</li><li>[<span data-ttu-id="f6fbe-125">Connect to Event Hub using SAS keys that have the minimum permissions required</span><span class="sxs-lookup"><span data-stu-id="f6fbe-125">Connect to Event Hub using SAS keys that have the minimum permissions required</span></span>](#sas-minimum-permissions)</li></ul> |
| <span data-ttu-id="f6fbe-126">**Azure Document DB**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-126">**Azure Document DB**</span></span> | <ul><li>[<span data-ttu-id="f6fbe-127">Use resource tokens to connect to Azure Cosmos DB whenever possible</span><span class="sxs-lookup"><span data-stu-id="f6fbe-127">Use resource tokens to connect to Azure Cosmos DB whenever possible</span></span>](#resource-docdb)</li></ul> |
| <span data-ttu-id="f6fbe-128">**Azure Trust Boundary**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-128">**Azure Trust Boundary**</span></span> | <ul><li>[<span data-ttu-id="f6fbe-129">Enable fine-grained access management to Azure Subscription using RBAC</span><span class="sxs-lookup"><span data-stu-id="f6fbe-129">Enable fine-grained access management to Azure Subscription using RBAC</span></span>](#grained-rbac)</li></ul> |
| <span data-ttu-id="f6fbe-130">**Service Fabric Trust Boundary**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-130">**Service Fabric Trust Boundary**</span></span> | <ul><li>[<span data-ttu-id="f6fbe-131">Restrict client's access to cluster operations using RBAC</span><span class="sxs-lookup"><span data-stu-id="f6fbe-131">Restrict client's access to cluster operations using RBAC</span></span>](#cluster-rbac)</li></ul> |
| <span data-ttu-id="f6fbe-132">**Dynamics CRM**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-132">**Dynamics CRM**</span></span> | <ul><li>[<span data-ttu-id="f6fbe-133">Perform security modeling and use Field Level Security where required</span><span class="sxs-lookup"><span data-stu-id="f6fbe-133">Perform security modeling and use Field Level Security where required</span></span>](#modeling-field)</li></ul> |
| <span data-ttu-id="f6fbe-134">**Dynamics CRM Portal**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-134">**Dynamics CRM Portal**</span></span> | <ul><li>[<span data-ttu-id="f6fbe-135">Perform security modeling of portal accounts keeping in mind that the security model for the portal differs from the rest of CRM</span><span class="sxs-lookup"><span data-stu-id="f6fbe-135">Perform security modeling of portal accounts keeping in mind that the security model for the portal differs from the rest of CRM</span></span>](#portal-security)</li></ul> |
| <span data-ttu-id="f6fbe-136">**Azure Storage**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-136">**Azure Storage**</span></span> | <ul><li>[<span data-ttu-id="f6fbe-137">Grant fine-grained permission on a range of entities in Azure Table Storage</span><span class="sxs-lookup"><span data-stu-id="f6fbe-137">Grant fine-grained permission on a range of entities in Azure Table Storage</span></span>](#permission-entities)</li><li>[<span data-ttu-id="f6fbe-138">Enable Role-Based Access Control (RBAC) to Azure storage account using Azure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="f6fbe-138">Enable Role-Based Access Control (RBAC) to Azure storage account using Azure Resource Manager</span></span>](#rbac-azure-manager)</li></ul> |
| <span data-ttu-id="f6fbe-139">**Mobile Client**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-139">**Mobile Client**</span></span> | <ul><li>[<span data-ttu-id="f6fbe-140">Implement implicit jailbreak or rooting detection</span><span class="sxs-lookup"><span data-stu-id="f6fbe-140">Implement implicit jailbreak or rooting detection</span></span>](#rooting-detection)</li></ul> |
| <span data-ttu-id="f6fbe-141">**WCF**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-141">**WCF**</span></span> | <ul><li>[<span data-ttu-id="f6fbe-142">Weak Class Reference in WCF</span><span class="sxs-lookup"><span data-stu-id="f6fbe-142">Weak Class Reference in WCF</span></span>](#weak-class-wcf)</li><li>[<span data-ttu-id="f6fbe-143">WCF-Implement Authorization control</span><span class="sxs-lookup"><span data-stu-id="f6fbe-143">WCF-Implement Authorization control</span></span>](#wcf-authz)</li></ul> |
| <span data-ttu-id="f6fbe-144">**Web API**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-144">**Web API**</span></span> | <ul><li>[<span data-ttu-id="f6fbe-145">Implement proper authorization mechanism in ASP.NET Web API</span><span class="sxs-lookup"><span data-stu-id="f6fbe-145">Implement proper authorization mechanism in ASP.NET Web API</span></span>](#authz-aspnet)</li></ul> |
| <span data-ttu-id="f6fbe-146">**IoT Device**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-146">**IoT Device**</span></span> | <ul><li>[<span data-ttu-id="f6fbe-147">Perform authorization checks in the device if it supports various actions that require different permission levels</span><span class="sxs-lookup"><span data-stu-id="f6fbe-147">Perform authorization checks in the device if it supports various actions that require different permission levels</span></span>](#device-permission)</li></ul> |
| <span data-ttu-id="f6fbe-148">**IoT Field Gateway**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-148">**IoT Field Gateway**</span></span> | <ul><li>[<span data-ttu-id="f6fbe-149">Perform authorization checks in the Field Gateway if it supports various actions that require different permission levels</span><span class="sxs-lookup"><span data-stu-id="f6fbe-149">Perform authorization checks in the Field Gateway if it supports various actions that require different permission levels</span></span>](#field-permission)</li></ul> |

## <a id="acl-restricted-access"></a><span data-ttu-id="f6fbe-150">Ensure that proper ACLs are configured to restrict unauthorized access to data on the device</span><span class="sxs-lookup"><span data-stu-id="f6fbe-150">Ensure that proper ACLs are configured to restrict unauthorized access to data on the device</span></span>

| <span data-ttu-id="f6fbe-151">Title</span><span class="sxs-lookup"><span data-stu-id="f6fbe-151">Title</span></span>                   | <span data-ttu-id="f6fbe-152">Details</span><span class="sxs-lookup"><span data-stu-id="f6fbe-152">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="f6fbe-153">**Component**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-153">**Component**</span></span>               | <span data-ttu-id="f6fbe-154">Machine Trust Boundary</span><span class="sxs-lookup"><span data-stu-id="f6fbe-154">Machine Trust Boundary</span></span> | 
| <span data-ttu-id="f6fbe-155">**SDL Phase**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-155">**SDL Phase**</span></span>               | <span data-ttu-id="f6fbe-156">Deployment</span><span class="sxs-lookup"><span data-stu-id="f6fbe-156">Deployment</span></span> |  
| <span data-ttu-id="f6fbe-157">**Applicable Technologies**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-157">**Applicable Technologies**</span></span> | <span data-ttu-id="f6fbe-158">Generic</span><span class="sxs-lookup"><span data-stu-id="f6fbe-158">Generic</span></span> |
| <span data-ttu-id="f6fbe-159">**Attributes**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-159">**Attributes**</span></span>              | <span data-ttu-id="f6fbe-160">N/A</span><span class="sxs-lookup"><span data-stu-id="f6fbe-160">N/A</span></span>  |
| <span data-ttu-id="f6fbe-161">**References**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-161">**References**</span></span>              | <span data-ttu-id="f6fbe-162">N/A</span><span class="sxs-lookup"><span data-stu-id="f6fbe-162">N/A</span></span>  |
| <span data-ttu-id="f6fbe-163">**Steps**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-163">**Steps**</span></span> | <span data-ttu-id="f6fbe-164">Ensure that proper ACLs are configured to restrict unauthorized access to data on the device</span><span class="sxs-lookup"><span data-stu-id="f6fbe-164">Ensure that proper ACLs are configured to restrict unauthorized access to data on the device</span></span>|

## <a id="sensitive-directory"></a><span data-ttu-id="f6fbe-165">Ensure that sensitive user-specific application content is stored in user-profile directory</span><span class="sxs-lookup"><span data-stu-id="f6fbe-165">Ensure that sensitive user-specific application content is stored in user-profile directory</span></span>

| <span data-ttu-id="f6fbe-166">Title</span><span class="sxs-lookup"><span data-stu-id="f6fbe-166">Title</span></span>                   | <span data-ttu-id="f6fbe-167">Details</span><span class="sxs-lookup"><span data-stu-id="f6fbe-167">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="f6fbe-168">**Component**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-168">**Component**</span></span>               | <span data-ttu-id="f6fbe-169">Machine Trust Boundary</span><span class="sxs-lookup"><span data-stu-id="f6fbe-169">Machine Trust Boundary</span></span> | 
| <span data-ttu-id="f6fbe-170">**SDL Phase**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-170">**SDL Phase**</span></span>               | <span data-ttu-id="f6fbe-171">Deployment</span><span class="sxs-lookup"><span data-stu-id="f6fbe-171">Deployment</span></span> |  
| <span data-ttu-id="f6fbe-172">**Applicable Technologies**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-172">**Applicable Technologies**</span></span> | <span data-ttu-id="f6fbe-173">Generic</span><span class="sxs-lookup"><span data-stu-id="f6fbe-173">Generic</span></span> |
| <span data-ttu-id="f6fbe-174">**Attributes**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-174">**Attributes**</span></span>              | <span data-ttu-id="f6fbe-175">N/A</span><span class="sxs-lookup"><span data-stu-id="f6fbe-175">N/A</span></span>  |
| <span data-ttu-id="f6fbe-176">**References**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-176">**References**</span></span>              | <span data-ttu-id="f6fbe-177">N/A</span><span class="sxs-lookup"><span data-stu-id="f6fbe-177">N/A</span></span>  |
| <span data-ttu-id="f6fbe-178">**Steps**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-178">**Steps**</span></span> | <span data-ttu-id="f6fbe-179">Ensure that sensitive user-specific application content is stored in user-profile directory.</span><span class="sxs-lookup"><span data-stu-id="f6fbe-179">Ensure that sensitive user-specific application content is stored in user-profile directory.</span></span> <span data-ttu-id="f6fbe-180">This is to prevent multiple users of the machine from accessing each other's data.</span><span class="sxs-lookup"><span data-stu-id="f6fbe-180">This is to prevent multiple users of the machine from accessing each other's data.</span></span>|

## <a id="deployed-privileges"></a><span data-ttu-id="f6fbe-181">Ensure that the deployed applications are run with least privileges</span><span class="sxs-lookup"><span data-stu-id="f6fbe-181">Ensure that the deployed applications are run with least privileges</span></span>

| <span data-ttu-id="f6fbe-182">Title</span><span class="sxs-lookup"><span data-stu-id="f6fbe-182">Title</span></span>                   | <span data-ttu-id="f6fbe-183">Details</span><span class="sxs-lookup"><span data-stu-id="f6fbe-183">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="f6fbe-184">**Component**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-184">**Component**</span></span>               | <span data-ttu-id="f6fbe-185">Machine Trust Boundary</span><span class="sxs-lookup"><span data-stu-id="f6fbe-185">Machine Trust Boundary</span></span> | 
| <span data-ttu-id="f6fbe-186">**SDL Phase**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-186">**SDL Phase**</span></span>               | <span data-ttu-id="f6fbe-187">Deployment</span><span class="sxs-lookup"><span data-stu-id="f6fbe-187">Deployment</span></span> |  
| <span data-ttu-id="f6fbe-188">**Applicable Technologies**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-188">**Applicable Technologies**</span></span> | <span data-ttu-id="f6fbe-189">Generic</span><span class="sxs-lookup"><span data-stu-id="f6fbe-189">Generic</span></span> |
| <span data-ttu-id="f6fbe-190">**Attributes**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-190">**Attributes**</span></span>              | <span data-ttu-id="f6fbe-191">N/A</span><span class="sxs-lookup"><span data-stu-id="f6fbe-191">N/A</span></span>  |
| <span data-ttu-id="f6fbe-192">**References**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-192">**References**</span></span>              | <span data-ttu-id="f6fbe-193">N/A</span><span class="sxs-lookup"><span data-stu-id="f6fbe-193">N/A</span></span>  |
| <span data-ttu-id="f6fbe-194">**Steps**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-194">**Steps**</span></span> | <span data-ttu-id="f6fbe-195">Ensure that the deployed application is run with least privileges.</span><span class="sxs-lookup"><span data-stu-id="f6fbe-195">Ensure that the deployed application is run with least privileges.</span></span> |

## <a id="sequential-logic"></a><span data-ttu-id="f6fbe-196">Enforce sequential step order when processing business logic flows</span><span class="sxs-lookup"><span data-stu-id="f6fbe-196">Enforce sequential step order when processing business logic flows</span></span>

| <span data-ttu-id="f6fbe-197">Title</span><span class="sxs-lookup"><span data-stu-id="f6fbe-197">Title</span></span>                   | <span data-ttu-id="f6fbe-198">Details</span><span class="sxs-lookup"><span data-stu-id="f6fbe-198">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="f6fbe-199">**Component**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-199">**Component**</span></span>               | <span data-ttu-id="f6fbe-200">Web Application</span><span class="sxs-lookup"><span data-stu-id="f6fbe-200">Web Application</span></span> | 
| <span data-ttu-id="f6fbe-201">**SDL Phase**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-201">**SDL Phase**</span></span>               | <span data-ttu-id="f6fbe-202">Build</span><span class="sxs-lookup"><span data-stu-id="f6fbe-202">Build</span></span> |  
| <span data-ttu-id="f6fbe-203">**Applicable Technologies**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-203">**Applicable Technologies**</span></span> | <span data-ttu-id="f6fbe-204">Generic</span><span class="sxs-lookup"><span data-stu-id="f6fbe-204">Generic</span></span> |
| <span data-ttu-id="f6fbe-205">**Attributes**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-205">**Attributes**</span></span>              | <span data-ttu-id="f6fbe-206">N/A</span><span class="sxs-lookup"><span data-stu-id="f6fbe-206">N/A</span></span>  |
| <span data-ttu-id="f6fbe-207">**References**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-207">**References**</span></span>              | <span data-ttu-id="f6fbe-208">N/A</span><span class="sxs-lookup"><span data-stu-id="f6fbe-208">N/A</span></span>  |
| <span data-ttu-id="f6fbe-209">**Steps**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-209">**Steps**</span></span> | <span data-ttu-id="f6fbe-210">In order to verify that this stage was run through by a genuine user you want to enforce the application to only process business logic flows in sequential step order, with all steps being processed in realistic human time, and not process out of order, skipped steps, processed steps from another user, or too quickly submitted transactions.</span><span class="sxs-lookup"><span data-stu-id="f6fbe-210">In order to verify that this stage was run through by a genuine user you want to enforce the application to only process business logic flows in sequential step order, with all steps being processed in realistic human time, and not process out of order, skipped steps, processed steps from another user, or too quickly submitted transactions.</span></span>|

## <a id="rate-enumeration"></a><span data-ttu-id="f6fbe-211">Implement rate limiting mechanism to prevent enumeration</span><span class="sxs-lookup"><span data-stu-id="f6fbe-211">Implement rate limiting mechanism to prevent enumeration</span></span>

| <span data-ttu-id="f6fbe-212">Title</span><span class="sxs-lookup"><span data-stu-id="f6fbe-212">Title</span></span>                   | <span data-ttu-id="f6fbe-213">Details</span><span class="sxs-lookup"><span data-stu-id="f6fbe-213">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="f6fbe-214">**Component**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-214">**Component**</span></span>               | <span data-ttu-id="f6fbe-215">Web Application</span><span class="sxs-lookup"><span data-stu-id="f6fbe-215">Web Application</span></span> | 
| <span data-ttu-id="f6fbe-216">**SDL Phase**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-216">**SDL Phase**</span></span>               | <span data-ttu-id="f6fbe-217">Build</span><span class="sxs-lookup"><span data-stu-id="f6fbe-217">Build</span></span> |  
| <span data-ttu-id="f6fbe-218">**Applicable Technologies**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-218">**Applicable Technologies**</span></span> | <span data-ttu-id="f6fbe-219">Generic</span><span class="sxs-lookup"><span data-stu-id="f6fbe-219">Generic</span></span> |
| <span data-ttu-id="f6fbe-220">**Attributes**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-220">**Attributes**</span></span>              | <span data-ttu-id="f6fbe-221">N/A</span><span class="sxs-lookup"><span data-stu-id="f6fbe-221">N/A</span></span>  |
| <span data-ttu-id="f6fbe-222">**References**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-222">**References**</span></span>              | <span data-ttu-id="f6fbe-223">N/A</span><span class="sxs-lookup"><span data-stu-id="f6fbe-223">N/A</span></span>  |
| <span data-ttu-id="f6fbe-224">**Steps**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-224">**Steps**</span></span> | <span data-ttu-id="f6fbe-225">Ensure that sensitive identifiers are random.</span><span class="sxs-lookup"><span data-stu-id="f6fbe-225">Ensure that sensitive identifiers are random.</span></span> <span data-ttu-id="f6fbe-226">Implement CAPTCHA control on anonymous pages.</span><span class="sxs-lookup"><span data-stu-id="f6fbe-226">Implement CAPTCHA control on anonymous pages.</span></span> <span data-ttu-id="f6fbe-227">Ensure that error and exception should not reveal specific data</span><span class="sxs-lookup"><span data-stu-id="f6fbe-227">Ensure that error and exception should not reveal specific data</span></span>|

## <a id="principle-least-privilege"></a><span data-ttu-id="f6fbe-228">Ensure that proper authorization is in place and principle of least privileges is followed</span><span class="sxs-lookup"><span data-stu-id="f6fbe-228">Ensure that proper authorization is in place and principle of least privileges is followed</span></span>

| <span data-ttu-id="f6fbe-229">Title</span><span class="sxs-lookup"><span data-stu-id="f6fbe-229">Title</span></span>                   | <span data-ttu-id="f6fbe-230">Details</span><span class="sxs-lookup"><span data-stu-id="f6fbe-230">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="f6fbe-231">**Component**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-231">**Component**</span></span>               | <span data-ttu-id="f6fbe-232">Web Application</span><span class="sxs-lookup"><span data-stu-id="f6fbe-232">Web Application</span></span> | 
| <span data-ttu-id="f6fbe-233">**SDL Phase**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-233">**SDL Phase**</span></span>               | <span data-ttu-id="f6fbe-234">Build</span><span class="sxs-lookup"><span data-stu-id="f6fbe-234">Build</span></span> |  
| <span data-ttu-id="f6fbe-235">**Applicable Technologies**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-235">**Applicable Technologies**</span></span> | <span data-ttu-id="f6fbe-236">Generic</span><span class="sxs-lookup"><span data-stu-id="f6fbe-236">Generic</span></span> |
| <span data-ttu-id="f6fbe-237">**Attributes**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-237">**Attributes**</span></span>              | <span data-ttu-id="f6fbe-238">N/A</span><span class="sxs-lookup"><span data-stu-id="f6fbe-238">N/A</span></span>  |
| <span data-ttu-id="f6fbe-239">**References**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-239">**References**</span></span>              | <span data-ttu-id="f6fbe-240">N/A</span><span class="sxs-lookup"><span data-stu-id="f6fbe-240">N/A</span></span>  |
| <span data-ttu-id="f6fbe-241">**Steps**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-241">**Steps**</span></span> | <p><span data-ttu-id="f6fbe-242">The principle means giving a user account only those privileges which are essential to that users work.</span><span class="sxs-lookup"><span data-stu-id="f6fbe-242">The principle means giving a user account only those privileges which are essential to that users work.</span></span> <span data-ttu-id="f6fbe-243">For example, a backup user does not need to install software: hence, the backup user has rights only to run backup and backup-related applications.</span><span class="sxs-lookup"><span data-stu-id="f6fbe-243">For example, a backup user does not need to install software: hence, the backup user has rights only to run backup and backup-related applications.</span></span> <span data-ttu-id="f6fbe-244">Any other privileges, such as installing new software, are blocked.</span><span class="sxs-lookup"><span data-stu-id="f6fbe-244">Any other privileges, such as installing new software, are blocked.</span></span> <span data-ttu-id="f6fbe-245">The principle applies also to a personal computer user who usually does work in a normal user account, and opens a privileged, password protected account (that is, a superuser) only when the situation absolutely demands it.</span><span class="sxs-lookup"><span data-stu-id="f6fbe-245">The principle applies also to a personal computer user who usually does work in a normal user account, and opens a privileged, password protected account (that is, a superuser) only when the situation absolutely demands it.</span></span> </p><p><span data-ttu-id="f6fbe-246">This principle can also be applied to your web-applications.</span><span class="sxs-lookup"><span data-stu-id="f6fbe-246">This principle can also be applied to your web-applications.</span></span> <span data-ttu-id="f6fbe-247">Instead of solely depending on role-based authentication methods using sessions, we rather want to assign privileges to users by means of a Database-Based Authentication system.</span><span class="sxs-lookup"><span data-stu-id="f6fbe-247">Instead of solely depending on role-based authentication methods using sessions, we rather want to assign privileges to users by means of a Database-Based Authentication system.</span></span> <span data-ttu-id="f6fbe-248">We still use sessions in order to identify if the user was logged in correctly, only now instead of assigning that user with a specific role we assign him with privileges to verify which actions he is privileged to perform on the system.</span><span class="sxs-lookup"><span data-stu-id="f6fbe-248">We still use sessions in order to identify if the user was logged in correctly, only now instead of assigning that user with a specific role we assign him with privileges to verify which actions he is privileged to perform on the system.</span></span> <span data-ttu-id="f6fbe-249">Also a big pro of this method is, whenever a user has to be assigned fewer privileges your changes will be applied on the fly since the assigning does not depend on the session which otherwise had to expire first.</span><span class="sxs-lookup"><span data-stu-id="f6fbe-249">Also a big pro of this method is, whenever a user has to be assigned fewer privileges your changes will be applied on the fly since the assigning does not depend on the session which otherwise had to expire first.</span></span></p>|

## <a id="logic-request-parameters"></a><span data-ttu-id="f6fbe-250">Business logic and resource access authorization decisions should not be based on incoming request parameters</span><span class="sxs-lookup"><span data-stu-id="f6fbe-250">Business logic and resource access authorization decisions should not be based on incoming request parameters</span></span>

| <span data-ttu-id="f6fbe-251">Title</span><span class="sxs-lookup"><span data-stu-id="f6fbe-251">Title</span></span>                   | <span data-ttu-id="f6fbe-252">Details</span><span class="sxs-lookup"><span data-stu-id="f6fbe-252">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="f6fbe-253">**Component**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-253">**Component**</span></span>               | <span data-ttu-id="f6fbe-254">Web Application</span><span class="sxs-lookup"><span data-stu-id="f6fbe-254">Web Application</span></span> | 
| <span data-ttu-id="f6fbe-255">**SDL Phase**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-255">**SDL Phase**</span></span>               | <span data-ttu-id="f6fbe-256">Build</span><span class="sxs-lookup"><span data-stu-id="f6fbe-256">Build</span></span> |  
| <span data-ttu-id="f6fbe-257">**Applicable Technologies**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-257">**Applicable Technologies**</span></span> | <span data-ttu-id="f6fbe-258">Generic</span><span class="sxs-lookup"><span data-stu-id="f6fbe-258">Generic</span></span> |
| <span data-ttu-id="f6fbe-259">**Attributes**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-259">**Attributes**</span></span>              | <span data-ttu-id="f6fbe-260">N/A</span><span class="sxs-lookup"><span data-stu-id="f6fbe-260">N/A</span></span>  |
| <span data-ttu-id="f6fbe-261">**References**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-261">**References**</span></span>              | <span data-ttu-id="f6fbe-262">N/A</span><span class="sxs-lookup"><span data-stu-id="f6fbe-262">N/A</span></span>  |
| <span data-ttu-id="f6fbe-263">**Steps**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-263">**Steps**</span></span> | <span data-ttu-id="f6fbe-264">Whenever you are checking whether a user is restricted to review certain data, the access restrictions should be processed server-side.</span><span class="sxs-lookup"><span data-stu-id="f6fbe-264">Whenever you are checking whether a user is restricted to review certain data, the access restrictions should be processed server-side.</span></span> <span data-ttu-id="f6fbe-265">The userID should be stored inside of a session variable on login and should be used to retrieve user data from the database</span><span class="sxs-lookup"><span data-stu-id="f6fbe-265">The userID should be stored inside of a session variable on login and should be used to retrieve user data from the database</span></span> |

### <a name="example"></a><span data-ttu-id="f6fbe-266">Example</span><span class="sxs-lookup"><span data-stu-id="f6fbe-266">Example</span></span>
```SQL
SELECT data 
FROM personaldata 
WHERE userID=:id < - session var 
```
<span data-ttu-id="f6fbe-267">Now an possible attacker can not tamper and change the application operation since the identifier for retrieving the data is handled server-side.</span><span class="sxs-lookup"><span data-stu-id="f6fbe-267">Now an possible attacker can not tamper and change the application operation since the identifier for retrieving the data is handled server-side.</span></span>

## <a id="enumerable-browsing"></a><span data-ttu-id="f6fbe-268">Ensure that content and resources are not enumerable or accessible via forceful browsing</span><span class="sxs-lookup"><span data-stu-id="f6fbe-268">Ensure that content and resources are not enumerable or accessible via forceful browsing</span></span>

| <span data-ttu-id="f6fbe-269">Title</span><span class="sxs-lookup"><span data-stu-id="f6fbe-269">Title</span></span>                   | <span data-ttu-id="f6fbe-270">Details</span><span class="sxs-lookup"><span data-stu-id="f6fbe-270">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="f6fbe-271">**Component**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-271">**Component**</span></span>               | <span data-ttu-id="f6fbe-272">Web Application</span><span class="sxs-lookup"><span data-stu-id="f6fbe-272">Web Application</span></span> | 
| <span data-ttu-id="f6fbe-273">**SDL Phase**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-273">**SDL Phase**</span></span>               | <span data-ttu-id="f6fbe-274">Build</span><span class="sxs-lookup"><span data-stu-id="f6fbe-274">Build</span></span> |  
| <span data-ttu-id="f6fbe-275">**Applicable Technologies**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-275">**Applicable Technologies**</span></span> | <span data-ttu-id="f6fbe-276">Generic</span><span class="sxs-lookup"><span data-stu-id="f6fbe-276">Generic</span></span> |
| <span data-ttu-id="f6fbe-277">**Attributes**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-277">**Attributes**</span></span>              | <span data-ttu-id="f6fbe-278">N/A</span><span class="sxs-lookup"><span data-stu-id="f6fbe-278">N/A</span></span>  |
| <span data-ttu-id="f6fbe-279">**References**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-279">**References**</span></span>              | <span data-ttu-id="f6fbe-280">N/A</span><span class="sxs-lookup"><span data-stu-id="f6fbe-280">N/A</span></span>  |
| <span data-ttu-id="f6fbe-281">**Steps**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-281">**Steps**</span></span> | <p><span data-ttu-id="f6fbe-282">Sensitive static and configuration files should not be kept in the web-root.</span><span class="sxs-lookup"><span data-stu-id="f6fbe-282">Sensitive static and configuration files should not be kept in the web-root.</span></span> <span data-ttu-id="f6fbe-283">For content not required to be public, either proper access controls should be applied or removal of the content itself.</span><span class="sxs-lookup"><span data-stu-id="f6fbe-283">For content not required to be public, either proper access controls should be applied or removal of the content itself.</span></span></p><p><span data-ttu-id="f6fbe-284">Also, forceful browsing is usually combined with Brute Force techniques to gather information by attempting to access as many URLs as possible to enumerate directories and files on a server.</span><span class="sxs-lookup"><span data-stu-id="f6fbe-284">Also, forceful browsing is usually combined with Brute Force techniques to gather information by attempting to access as many URLs as possible to enumerate directories and files on a server.</span></span> <span data-ttu-id="f6fbe-285">Attackers may check for all variations of commonly existing files.</span><span class="sxs-lookup"><span data-stu-id="f6fbe-285">Attackers may check for all variations of commonly existing files.</span></span> <span data-ttu-id="f6fbe-286">For example, a password file search would encompass files including psswd.txt, password.htm, password.dat, and other variations.</span><span class="sxs-lookup"><span data-stu-id="f6fbe-286">For example, a password file search would encompass files including psswd.txt, password.htm, password.dat, and other variations.</span></span></p><p><span data-ttu-id="f6fbe-287">To mitigate this, capabilities for detection of brute force attempts should be included.</span><span class="sxs-lookup"><span data-stu-id="f6fbe-287">To mitigate this, capabilities for detection of brute force attempts should be included.</span></span></p>|

## <a id="privileged-server"></a><span data-ttu-id="f6fbe-288">Ensure that least-privileged accounts are used to connect to Database server</span><span class="sxs-lookup"><span data-stu-id="f6fbe-288">Ensure that least-privileged accounts are used to connect to Database server</span></span>

| <span data-ttu-id="f6fbe-289">Title</span><span class="sxs-lookup"><span data-stu-id="f6fbe-289">Title</span></span>                   | <span data-ttu-id="f6fbe-290">Details</span><span class="sxs-lookup"><span data-stu-id="f6fbe-290">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="f6fbe-291">**Component**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-291">**Component**</span></span>               | <span data-ttu-id="f6fbe-292">Database</span><span class="sxs-lookup"><span data-stu-id="f6fbe-292">Database</span></span> | 
| <span data-ttu-id="f6fbe-293">**SDL Phase**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-293">**SDL Phase**</span></span>               | <span data-ttu-id="f6fbe-294">Build</span><span class="sxs-lookup"><span data-stu-id="f6fbe-294">Build</span></span> |  
| <span data-ttu-id="f6fbe-295">**Applicable Technologies**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-295">**Applicable Technologies**</span></span> | <span data-ttu-id="f6fbe-296">Generic</span><span class="sxs-lookup"><span data-stu-id="f6fbe-296">Generic</span></span> |
| <span data-ttu-id="f6fbe-297">**Attributes**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-297">**Attributes**</span></span>              | <span data-ttu-id="f6fbe-298">N/A</span><span class="sxs-lookup"><span data-stu-id="f6fbe-298">N/A</span></span>  |
| <span data-ttu-id="f6fbe-299">**References**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-299">**References**</span></span>              | <span data-ttu-id="f6fbe-300">[SQL Database permissions hierarchy](https://msdn.microsoft.com/library/ms191465), [SQL database securables](https://msdn.microsoft.com/library/ms190401)</span><span class="sxs-lookup"><span data-stu-id="f6fbe-300">[SQL Database permissions hierarchy](https://msdn.microsoft.com/library/ms191465), [SQL database securables](https://msdn.microsoft.com/library/ms190401)</span></span> |
| <span data-ttu-id="f6fbe-301">**Steps**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-301">**Steps**</span></span> | <span data-ttu-id="f6fbe-302">Least-privileged accounts should be used to connect to the database.</span><span class="sxs-lookup"><span data-stu-id="f6fbe-302">Least-privileged accounts should be used to connect to the database.</span></span> <span data-ttu-id="f6fbe-303">Application login should be restricted in the database and should only execute selected stored procedures.</span><span class="sxs-lookup"><span data-stu-id="f6fbe-303">Application login should be restricted in the database and should only execute selected stored procedures.</span></span> <span data-ttu-id="f6fbe-304">Application's login should have no direct table access.</span><span class="sxs-lookup"><span data-stu-id="f6fbe-304">Application's login should have no direct table access.</span></span> |

## <a id="rls-tenants"></a><span data-ttu-id="f6fbe-305">Implement Row Level Security RLS to prevent tenants from accessing each other's data</span><span class="sxs-lookup"><span data-stu-id="f6fbe-305">Implement Row Level Security RLS to prevent tenants from accessing each other's data</span></span>

| <span data-ttu-id="f6fbe-306">Title</span><span class="sxs-lookup"><span data-stu-id="f6fbe-306">Title</span></span>                   | <span data-ttu-id="f6fbe-307">Details</span><span class="sxs-lookup"><span data-stu-id="f6fbe-307">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="f6fbe-308">**Component**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-308">**Component**</span></span>               | <span data-ttu-id="f6fbe-309">Database</span><span class="sxs-lookup"><span data-stu-id="f6fbe-309">Database</span></span> | 
| <span data-ttu-id="f6fbe-310">**SDL Phase**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-310">**SDL Phase**</span></span>               | <span data-ttu-id="f6fbe-311">Build</span><span class="sxs-lookup"><span data-stu-id="f6fbe-311">Build</span></span> |  
| <span data-ttu-id="f6fbe-312">**Applicable Technologies**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-312">**Applicable Technologies**</span></span> | <span data-ttu-id="f6fbe-313">Sql Azure, OnPrem</span><span class="sxs-lookup"><span data-stu-id="f6fbe-313">Sql Azure, OnPrem</span></span> |
| <span data-ttu-id="f6fbe-314">**Attributes**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-314">**Attributes**</span></span>              | <span data-ttu-id="f6fbe-315">SQL Version - V12, SQL Version - MsSQL2016</span><span class="sxs-lookup"><span data-stu-id="f6fbe-315">SQL Version - V12, SQL Version - MsSQL2016</span></span> |
| <span data-ttu-id="f6fbe-316">**References**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-316">**References**</span></span>              | [<span data-ttu-id="f6fbe-317">SQL Server Row-Level Security (RLS)</span><span class="sxs-lookup"><span data-stu-id="f6fbe-317">SQL Server Row-Level Security (RLS)</span></span>](https://msdn.microsoft.com/library/azure/dn765131.aspx) |
| <span data-ttu-id="f6fbe-318">**Steps**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-318">**Steps**</span></span> | <p><span data-ttu-id="f6fbe-319">Row-Level Security enables customers to control access to rows in a database table based on the characteristics of the user executing a query (e.g., group membership or execution context).</span><span class="sxs-lookup"><span data-stu-id="f6fbe-319">Row-Level Security enables customers to control access to rows in a database table based on the characteristics of the user executing a query (e.g., group membership or execution context).</span></span></p><p><span data-ttu-id="f6fbe-320">Row-Level Security (RLS) simplifies the design and coding of security in your application.</span><span class="sxs-lookup"><span data-stu-id="f6fbe-320">Row-Level Security (RLS) simplifies the design and coding of security in your application.</span></span> <span data-ttu-id="f6fbe-321">RLS enables you to implement restrictions on data row access.</span><span class="sxs-lookup"><span data-stu-id="f6fbe-321">RLS enables you to implement restrictions on data row access.</span></span> <span data-ttu-id="f6fbe-322">For example ensuring that workers can access only those data rows that are pertinent to their department, or restricting a customer's data access to only the data relevant to their company.</span><span class="sxs-lookup"><span data-stu-id="f6fbe-322">For example ensuring that workers can access only those data rows that are pertinent to their department, or restricting a customer's data access to only the data relevant to their company.</span></span></p><p><span data-ttu-id="f6fbe-323">The access restriction logic is located in the database tier rather than away from the data in another application tier.</span><span class="sxs-lookup"><span data-stu-id="f6fbe-323">The access restriction logic is located in the database tier rather than away from the data in another application tier.</span></span> <span data-ttu-id="f6fbe-324">The database system applies the access restrictions every time that data access is attempted from any tier.</span><span class="sxs-lookup"><span data-stu-id="f6fbe-324">The database system applies the access restrictions every time that data access is attempted from any tier.</span></span> <span data-ttu-id="f6fbe-325">This makes the security system more reliable and robust by reducing the surface area of the security system.</span><span class="sxs-lookup"><span data-stu-id="f6fbe-325">This makes the security system more reliable and robust by reducing the surface area of the security system.</span></span></p><p>|

<span data-ttu-id="f6fbe-326">Please note that RLS as an out-of-the-box database feature is applicable only to SQL Server starting 2016 and Azure SQL database.</span><span class="sxs-lookup"><span data-stu-id="f6fbe-326">Please note that RLS as an out-of-the-box database feature is applicable only to SQL Server starting 2016 and Azure SQL database.</span></span> <span data-ttu-id="f6fbe-327">If the out-of-the-box RLS feature is not implemented, it should be ensured that data access is restricted Using Views and Procedures</span><span class="sxs-lookup"><span data-stu-id="f6fbe-327">If the out-of-the-box RLS feature is not implemented, it should be ensured that data access is restricted Using Views and Procedures</span></span>

## <a id="sysadmin-users"></a><span data-ttu-id="f6fbe-328">Sysadmin role should only have valid necessary users</span><span class="sxs-lookup"><span data-stu-id="f6fbe-328">Sysadmin role should only have valid necessary users</span></span>

| <span data-ttu-id="f6fbe-329">Title</span><span class="sxs-lookup"><span data-stu-id="f6fbe-329">Title</span></span>                   | <span data-ttu-id="f6fbe-330">Details</span><span class="sxs-lookup"><span data-stu-id="f6fbe-330">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="f6fbe-331">**Component**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-331">**Component**</span></span>               | <span data-ttu-id="f6fbe-332">Database</span><span class="sxs-lookup"><span data-stu-id="f6fbe-332">Database</span></span> | 
| <span data-ttu-id="f6fbe-333">**SDL Phase**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-333">**SDL Phase**</span></span>               | <span data-ttu-id="f6fbe-334">Build</span><span class="sxs-lookup"><span data-stu-id="f6fbe-334">Build</span></span> |  
| <span data-ttu-id="f6fbe-335">**Applicable Technologies**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-335">**Applicable Technologies**</span></span> | <span data-ttu-id="f6fbe-336">Generic</span><span class="sxs-lookup"><span data-stu-id="f6fbe-336">Generic</span></span> |
| <span data-ttu-id="f6fbe-337">**Attributes**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-337">**Attributes**</span></span>              | <span data-ttu-id="f6fbe-338">N/A</span><span class="sxs-lookup"><span data-stu-id="f6fbe-338">N/A</span></span>  |
| <span data-ttu-id="f6fbe-339">**References**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-339">**References**</span></span>              | <span data-ttu-id="f6fbe-340">[SQL Database permissions hierarchy](https://msdn.microsoft.com/library/ms191465), [SQL database securables](https://msdn.microsoft.com/library/ms190401)</span><span class="sxs-lookup"><span data-stu-id="f6fbe-340">[SQL Database permissions hierarchy](https://msdn.microsoft.com/library/ms191465), [SQL database securables](https://msdn.microsoft.com/library/ms190401)</span></span> |
| <span data-ttu-id="f6fbe-341">**Steps**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-341">**Steps**</span></span> | <span data-ttu-id="f6fbe-342">Members of the SysAdmin fixed server role should be very limited and never contain accounts used by applications.</span><span class="sxs-lookup"><span data-stu-id="f6fbe-342">Members of the SysAdmin fixed server role should be very limited and never contain accounts used by applications.</span></span>  <span data-ttu-id="f6fbe-343">Please review the list of users in the role and remove any unnecessary accounts</span><span class="sxs-lookup"><span data-stu-id="f6fbe-343">Please review the list of users in the role and remove any unnecessary accounts</span></span>|

## <a id="cloud-least-privileged"></a><span data-ttu-id="f6fbe-344">Connect to Cloud Gateway using least-privileged tokens</span><span class="sxs-lookup"><span data-stu-id="f6fbe-344">Connect to Cloud Gateway using least-privileged tokens</span></span>

| <span data-ttu-id="f6fbe-345">Title</span><span class="sxs-lookup"><span data-stu-id="f6fbe-345">Title</span></span>                   | <span data-ttu-id="f6fbe-346">Details</span><span class="sxs-lookup"><span data-stu-id="f6fbe-346">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="f6fbe-347">**Component**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-347">**Component**</span></span>               | <span data-ttu-id="f6fbe-348">IoT Cloud Gateway</span><span class="sxs-lookup"><span data-stu-id="f6fbe-348">IoT Cloud Gateway</span></span> | 
| <span data-ttu-id="f6fbe-349">**SDL Phase**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-349">**SDL Phase**</span></span>               | <span data-ttu-id="f6fbe-350">Deployment</span><span class="sxs-lookup"><span data-stu-id="f6fbe-350">Deployment</span></span> |  
| <span data-ttu-id="f6fbe-351">**Applicable Technologies**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-351">**Applicable Technologies**</span></span> | <span data-ttu-id="f6fbe-352">Generic</span><span class="sxs-lookup"><span data-stu-id="f6fbe-352">Generic</span></span> |
| <span data-ttu-id="f6fbe-353">**Attributes**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-353">**Attributes**</span></span>              | <span data-ttu-id="f6fbe-354">Gateway choice - Azure IoT Hub</span><span class="sxs-lookup"><span data-stu-id="f6fbe-354">Gateway choice - Azure IoT Hub</span></span> |
| <span data-ttu-id="f6fbe-355">**References**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-355">**References**</span></span>              | [<span data-ttu-id="f6fbe-356">Iot Hub Access Control</span><span class="sxs-lookup"><span data-stu-id="f6fbe-356">Iot Hub Access Control</span></span>](https://azure.microsoft.com/documentation/articles/iot-hub-devguide/#Security) |
| <span data-ttu-id="f6fbe-357">**Steps**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-357">**Steps**</span></span> | <span data-ttu-id="f6fbe-358">Provide least privilege permissions to various components that connect to Cloud Gateway (IoT Hub).</span><span class="sxs-lookup"><span data-stu-id="f6fbe-358">Provide least privilege permissions to various components that connect to Cloud Gateway (IoT Hub).</span></span> <span data-ttu-id="f6fbe-359">Typical example is – Device management/provisioning component uses registryread/write, Event Processor (ASA) uses Service Connect.</span><span class="sxs-lookup"><span data-stu-id="f6fbe-359">Typical example is – Device management/provisioning component uses registryread/write, Event Processor (ASA) uses Service Connect.</span></span> <span data-ttu-id="f6fbe-360">Individual devices connect using Device credentials</span><span class="sxs-lookup"><span data-stu-id="f6fbe-360">Individual devices connect using Device credentials</span></span>|

## <a id="sendonly-sas"></a><span data-ttu-id="f6fbe-361">Use a send-only permissions SAS Key for generating device tokens</span><span class="sxs-lookup"><span data-stu-id="f6fbe-361">Use a send-only permissions SAS Key for generating device tokens</span></span>

| <span data-ttu-id="f6fbe-362">Title</span><span class="sxs-lookup"><span data-stu-id="f6fbe-362">Title</span></span>                   | <span data-ttu-id="f6fbe-363">Details</span><span class="sxs-lookup"><span data-stu-id="f6fbe-363">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="f6fbe-364">**Component**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-364">**Component**</span></span>               | <span data-ttu-id="f6fbe-365">Azure Event Hub</span><span class="sxs-lookup"><span data-stu-id="f6fbe-365">Azure Event Hub</span></span> | 
| <span data-ttu-id="f6fbe-366">**SDL Phase**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-366">**SDL Phase**</span></span>               | <span data-ttu-id="f6fbe-367">Build</span><span class="sxs-lookup"><span data-stu-id="f6fbe-367">Build</span></span> |  
| <span data-ttu-id="f6fbe-368">**Applicable Technologies**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-368">**Applicable Technologies**</span></span> | <span data-ttu-id="f6fbe-369">Generic</span><span class="sxs-lookup"><span data-stu-id="f6fbe-369">Generic</span></span> |
| <span data-ttu-id="f6fbe-370">**Attributes**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-370">**Attributes**</span></span>              | <span data-ttu-id="f6fbe-371">N/A</span><span class="sxs-lookup"><span data-stu-id="f6fbe-371">N/A</span></span>  |
| <span data-ttu-id="f6fbe-372">**References**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-372">**References**</span></span>              | [<span data-ttu-id="f6fbe-373">Event Hubs authentication and security model overview</span><span class="sxs-lookup"><span data-stu-id="f6fbe-373">Event Hubs authentication and security model overview</span></span>](https://azure.microsoft.com/documentation/articles/event-hubs-authentication-and-security-model-overview/) |
| <span data-ttu-id="f6fbe-374">**Steps**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-374">**Steps**</span></span> | <span data-ttu-id="f6fbe-375">A SAS key is used to generate individual device tokens.</span><span class="sxs-lookup"><span data-stu-id="f6fbe-375">A SAS key is used to generate individual device tokens.</span></span> <span data-ttu-id="f6fbe-376">Use a send-only permissions SAS key while generating the device token for a given publisher</span><span class="sxs-lookup"><span data-stu-id="f6fbe-376">Use a send-only permissions SAS key while generating the device token for a given publisher</span></span>|

## <a id="access-tokens-hub"></a><span data-ttu-id="f6fbe-377">Do not use access tokens that provide direct access to the Event Hub</span><span class="sxs-lookup"><span data-stu-id="f6fbe-377">Do not use access tokens that provide direct access to the Event Hub</span></span>

| <span data-ttu-id="f6fbe-378">Title</span><span class="sxs-lookup"><span data-stu-id="f6fbe-378">Title</span></span>                   | <span data-ttu-id="f6fbe-379">Details</span><span class="sxs-lookup"><span data-stu-id="f6fbe-379">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="f6fbe-380">**Component**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-380">**Component**</span></span>               | <span data-ttu-id="f6fbe-381">Azure Event Hub</span><span class="sxs-lookup"><span data-stu-id="f6fbe-381">Azure Event Hub</span></span> | 
| <span data-ttu-id="f6fbe-382">**SDL Phase**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-382">**SDL Phase**</span></span>               | <span data-ttu-id="f6fbe-383">Build</span><span class="sxs-lookup"><span data-stu-id="f6fbe-383">Build</span></span> |  
| <span data-ttu-id="f6fbe-384">**Applicable Technologies**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-384">**Applicable Technologies**</span></span> | <span data-ttu-id="f6fbe-385">Generic</span><span class="sxs-lookup"><span data-stu-id="f6fbe-385">Generic</span></span> |
| <span data-ttu-id="f6fbe-386">**Attributes**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-386">**Attributes**</span></span>              | <span data-ttu-id="f6fbe-387">N/A</span><span class="sxs-lookup"><span data-stu-id="f6fbe-387">N/A</span></span>  |
| <span data-ttu-id="f6fbe-388">**References**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-388">**References**</span></span>              | [<span data-ttu-id="f6fbe-389">Event Hubs authentication and security model overview</span><span class="sxs-lookup"><span data-stu-id="f6fbe-389">Event Hubs authentication and security model overview</span></span>](https://azure.microsoft.com/documentation/articles/event-hubs-authentication-and-security-model-overview/) |
| <span data-ttu-id="f6fbe-390">**Steps**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-390">**Steps**</span></span> | <span data-ttu-id="f6fbe-391">A token that grants direct access to the event hub should not be given to the device.</span><span class="sxs-lookup"><span data-stu-id="f6fbe-391">A token that grants direct access to the event hub should not be given to the device.</span></span> <span data-ttu-id="f6fbe-392">Using a least privileged token for the device that gives access only to a publisher would help identify and blacklist it if found to be a rogue or compromised device.</span><span class="sxs-lookup"><span data-stu-id="f6fbe-392">Using a least privileged token for the device that gives access only to a publisher would help identify and blacklist it if found to be a rogue or compromised device.</span></span>|

## <a id="sas-minimum-permissions"></a><span data-ttu-id="f6fbe-393">Connect to Event Hub using SAS keys that have the minimum permissions required</span><span class="sxs-lookup"><span data-stu-id="f6fbe-393">Connect to Event Hub using SAS keys that have the minimum permissions required</span></span>

| <span data-ttu-id="f6fbe-394">Title</span><span class="sxs-lookup"><span data-stu-id="f6fbe-394">Title</span></span>                   | <span data-ttu-id="f6fbe-395">Details</span><span class="sxs-lookup"><span data-stu-id="f6fbe-395">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="f6fbe-396">**Component**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-396">**Component**</span></span>               | <span data-ttu-id="f6fbe-397">Azure Event Hub</span><span class="sxs-lookup"><span data-stu-id="f6fbe-397">Azure Event Hub</span></span> | 
| <span data-ttu-id="f6fbe-398">**SDL Phase**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-398">**SDL Phase**</span></span>               | <span data-ttu-id="f6fbe-399">Build</span><span class="sxs-lookup"><span data-stu-id="f6fbe-399">Build</span></span> |  
| <span data-ttu-id="f6fbe-400">**Applicable Technologies**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-400">**Applicable Technologies**</span></span> | <span data-ttu-id="f6fbe-401">Generic</span><span class="sxs-lookup"><span data-stu-id="f6fbe-401">Generic</span></span> |
| <span data-ttu-id="f6fbe-402">**Attributes**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-402">**Attributes**</span></span>              | <span data-ttu-id="f6fbe-403">N/A</span><span class="sxs-lookup"><span data-stu-id="f6fbe-403">N/A</span></span>  |
| <span data-ttu-id="f6fbe-404">**References**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-404">**References**</span></span>              | [<span data-ttu-id="f6fbe-405">Event Hubs authentication and security model overview</span><span class="sxs-lookup"><span data-stu-id="f6fbe-405">Event Hubs authentication and security model overview</span></span>](https://azure.microsoft.com/documentation/articles/event-hubs-authentication-and-security-model-overview/) |
| <span data-ttu-id="f6fbe-406">**Steps**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-406">**Steps**</span></span> | <span data-ttu-id="f6fbe-407">Provide least privilege permissions to various back-end applications that connect to the Event Hub.</span><span class="sxs-lookup"><span data-stu-id="f6fbe-407">Provide least privilege permissions to various back-end applications that connect to the Event Hub.</span></span> <span data-ttu-id="f6fbe-408">Generate separate SAS keys for each back-end application and only provide the required permissions - Send, Receive or Manage to them.</span><span class="sxs-lookup"><span data-stu-id="f6fbe-408">Generate separate SAS keys for each back-end application and only provide the required permissions - Send, Receive or Manage to them.</span></span>|

## <a id="resource-docdb"></a><span data-ttu-id="f6fbe-409">Use resource tokens to connect to Cosmos DB whenever possible</span><span class="sxs-lookup"><span data-stu-id="f6fbe-409">Use resource tokens to connect to Cosmos DB whenever possible</span></span>

| <span data-ttu-id="f6fbe-410">Title</span><span class="sxs-lookup"><span data-stu-id="f6fbe-410">Title</span></span>                   | <span data-ttu-id="f6fbe-411">Details</span><span class="sxs-lookup"><span data-stu-id="f6fbe-411">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="f6fbe-412">**Component**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-412">**Component**</span></span>               | <span data-ttu-id="f6fbe-413">Azure Document DB</span><span class="sxs-lookup"><span data-stu-id="f6fbe-413">Azure Document DB</span></span> | 
| <span data-ttu-id="f6fbe-414">**SDL Phase**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-414">**SDL Phase**</span></span>               | <span data-ttu-id="f6fbe-415">Build</span><span class="sxs-lookup"><span data-stu-id="f6fbe-415">Build</span></span> |  
| <span data-ttu-id="f6fbe-416">**Applicable Technologies**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-416">**Applicable Technologies**</span></span> | <span data-ttu-id="f6fbe-417">Generic</span><span class="sxs-lookup"><span data-stu-id="f6fbe-417">Generic</span></span> |
| <span data-ttu-id="f6fbe-418">**Attributes**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-418">**Attributes**</span></span>              | <span data-ttu-id="f6fbe-419">N/A</span><span class="sxs-lookup"><span data-stu-id="f6fbe-419">N/A</span></span>  |
| <span data-ttu-id="f6fbe-420">**References**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-420">**References**</span></span>              | <span data-ttu-id="f6fbe-421">N/A</span><span class="sxs-lookup"><span data-stu-id="f6fbe-421">N/A</span></span>  |
| <span data-ttu-id="f6fbe-422">**Steps**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-422">**Steps**</span></span> | <span data-ttu-id="f6fbe-423">A resource token is associated with an Azure Cosmos DB permission resource and captures the relationship between the user of a database and the permission that user has for a specific Azure Cosmos DB application resource (e.g. collection, document).</span><span class="sxs-lookup"><span data-stu-id="f6fbe-423">A resource token is associated with an Azure Cosmos DB permission resource and captures the relationship between the user of a database and the permission that user has for a specific Azure Cosmos DB application resource (e.g. collection, document).</span></span> <span data-ttu-id="f6fbe-424">Always use a resource token to access the Azure Cosmos DB if the client cannot be trusted with handling master or read-only keys - like an end user application like a mobile or desktop client.Use Master key or read-only keys from backend applications which can store these keys securely.</span><span class="sxs-lookup"><span data-stu-id="f6fbe-424">Always use a resource token to access the Azure Cosmos DB if the client cannot be trusted with handling master or read-only keys - like an end user application like a mobile or desktop client.Use Master key or read-only keys from backend applications which can store these keys securely.</span></span>|

## <a id="grained-rbac"></a><span data-ttu-id="f6fbe-425">Enable fine-grained access management to Azure Subscription using RBAC</span><span class="sxs-lookup"><span data-stu-id="f6fbe-425">Enable fine-grained access management to Azure Subscription using RBAC</span></span>

| <span data-ttu-id="f6fbe-426">Title</span><span class="sxs-lookup"><span data-stu-id="f6fbe-426">Title</span></span>                   | <span data-ttu-id="f6fbe-427">Details</span><span class="sxs-lookup"><span data-stu-id="f6fbe-427">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="f6fbe-428">**Component**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-428">**Component**</span></span>               | <span data-ttu-id="f6fbe-429">Azure Trust Boundary</span><span class="sxs-lookup"><span data-stu-id="f6fbe-429">Azure Trust Boundary</span></span> | 
| <span data-ttu-id="f6fbe-430">**SDL Phase**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-430">**SDL Phase**</span></span>               | <span data-ttu-id="f6fbe-431">Build</span><span class="sxs-lookup"><span data-stu-id="f6fbe-431">Build</span></span> |  
| <span data-ttu-id="f6fbe-432">**Applicable Technologies**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-432">**Applicable Technologies**</span></span> | <span data-ttu-id="f6fbe-433">Generic</span><span class="sxs-lookup"><span data-stu-id="f6fbe-433">Generic</span></span> |
| <span data-ttu-id="f6fbe-434">**Attributes**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-434">**Attributes**</span></span>              | <span data-ttu-id="f6fbe-435">N/A</span><span class="sxs-lookup"><span data-stu-id="f6fbe-435">N/A</span></span>  |
| <span data-ttu-id="f6fbe-436">**References**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-436">**References**</span></span>              | [<span data-ttu-id="f6fbe-437">Use role assignments to manage access to your Azure subscription resources</span><span class="sxs-lookup"><span data-stu-id="f6fbe-437">Use role assignments to manage access to your Azure subscription resources</span></span>](https://azure.microsoft.com/documentation/articles/role-based-access-control-configure/)  |
| <span data-ttu-id="f6fbe-438">**Steps**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-438">**Steps**</span></span> | <span data-ttu-id="f6fbe-439">Azure Role-Based Access Control (RBAC) enables fine-grained access management for Azure.</span><span class="sxs-lookup"><span data-stu-id="f6fbe-439">Azure Role-Based Access Control (RBAC) enables fine-grained access management for Azure.</span></span> <span data-ttu-id="f6fbe-440">Using RBAC, you can grant only the amount of access that users need to perform their jobs.</span><span class="sxs-lookup"><span data-stu-id="f6fbe-440">Using RBAC, you can grant only the amount of access that users need to perform their jobs.</span></span>|

## <a id="cluster-rbac"></a><span data-ttu-id="f6fbe-441">Restrict client's access to cluster operations using RBAC</span><span class="sxs-lookup"><span data-stu-id="f6fbe-441">Restrict client's access to cluster operations using RBAC</span></span>

| <span data-ttu-id="f6fbe-442">Title</span><span class="sxs-lookup"><span data-stu-id="f6fbe-442">Title</span></span>                   | <span data-ttu-id="f6fbe-443">Details</span><span class="sxs-lookup"><span data-stu-id="f6fbe-443">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="f6fbe-444">**Component**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-444">**Component**</span></span>               | <span data-ttu-id="f6fbe-445">Service Fabric Trust Boundary</span><span class="sxs-lookup"><span data-stu-id="f6fbe-445">Service Fabric Trust Boundary</span></span> | 
| <span data-ttu-id="f6fbe-446">**SDL Phase**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-446">**SDL Phase**</span></span>               | <span data-ttu-id="f6fbe-447">Deployment</span><span class="sxs-lookup"><span data-stu-id="f6fbe-447">Deployment</span></span> |  
| <span data-ttu-id="f6fbe-448">**Applicable Technologies**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-448">**Applicable Technologies**</span></span> | <span data-ttu-id="f6fbe-449">Generic</span><span class="sxs-lookup"><span data-stu-id="f6fbe-449">Generic</span></span> |
| <span data-ttu-id="f6fbe-450">**Attributes**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-450">**Attributes**</span></span>              | <span data-ttu-id="f6fbe-451">Environment - Azure</span><span class="sxs-lookup"><span data-stu-id="f6fbe-451">Environment - Azure</span></span> |
| <span data-ttu-id="f6fbe-452">**References**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-452">**References**</span></span>              | [<span data-ttu-id="f6fbe-453">Role-based access control for Service Fabric clients</span><span class="sxs-lookup"><span data-stu-id="f6fbe-453">Role-based access control for Service Fabric clients</span></span>](https://azure.microsoft.com/documentation/articles/service-fabric-cluster-security-roles/) |
| <span data-ttu-id="f6fbe-454">**Steps**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-454">**Steps**</span></span> | <p><span data-ttu-id="f6fbe-455">Azure Service Fabric supports two different access control types for clients that are connected to a Service Fabric cluster: administrator and user.</span><span class="sxs-lookup"><span data-stu-id="f6fbe-455">Azure Service Fabric supports two different access control types for clients that are connected to a Service Fabric cluster: administrator and user.</span></span> <span data-ttu-id="f6fbe-456">Access control allows the cluster administrator to limit access to certain cluster operations for different groups of users, making the cluster more secure.</span><span class="sxs-lookup"><span data-stu-id="f6fbe-456">Access control allows the cluster administrator to limit access to certain cluster operations for different groups of users, making the cluster more secure.</span></span></p><p><span data-ttu-id="f6fbe-457">Administrators have full access to management capabilities (including read/write capabilities).</span><span class="sxs-lookup"><span data-stu-id="f6fbe-457">Administrators have full access to management capabilities (including read/write capabilities).</span></span> <span data-ttu-id="f6fbe-458">Users, by default, have only read access to management capabilities (for example, query capabilities), and the ability to resolve applications and services.</span><span class="sxs-lookup"><span data-stu-id="f6fbe-458">Users, by default, have only read access to management capabilities (for example, query capabilities), and the ability to resolve applications and services.</span></span></p><p><span data-ttu-id="f6fbe-459">You specify the two client roles (administrator and client) at the time of cluster creation by providing separate certificates for each.</span><span class="sxs-lookup"><span data-stu-id="f6fbe-459">You specify the two client roles (administrator and client) at the time of cluster creation by providing separate certificates for each.</span></span></p>|

## <a id="modeling-field"></a><span data-ttu-id="f6fbe-460">Perform security modeling and use Field Level Security where required</span><span class="sxs-lookup"><span data-stu-id="f6fbe-460">Perform security modeling and use Field Level Security where required</span></span>

| <span data-ttu-id="f6fbe-461">Title</span><span class="sxs-lookup"><span data-stu-id="f6fbe-461">Title</span></span>                   | <span data-ttu-id="f6fbe-462">Details</span><span class="sxs-lookup"><span data-stu-id="f6fbe-462">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="f6fbe-463">**Component**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-463">**Component**</span></span>               | <span data-ttu-id="f6fbe-464">Dynamics CRM</span><span class="sxs-lookup"><span data-stu-id="f6fbe-464">Dynamics CRM</span></span> | 
| <span data-ttu-id="f6fbe-465">**SDL Phase**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-465">**SDL Phase**</span></span>               | <span data-ttu-id="f6fbe-466">Build</span><span class="sxs-lookup"><span data-stu-id="f6fbe-466">Build</span></span> |  
| <span data-ttu-id="f6fbe-467">**Applicable Technologies**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-467">**Applicable Technologies**</span></span> | <span data-ttu-id="f6fbe-468">Generic</span><span class="sxs-lookup"><span data-stu-id="f6fbe-468">Generic</span></span> |
| <span data-ttu-id="f6fbe-469">**Attributes**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-469">**Attributes**</span></span>              | <span data-ttu-id="f6fbe-470">N/A</span><span class="sxs-lookup"><span data-stu-id="f6fbe-470">N/A</span></span>  |
| <span data-ttu-id="f6fbe-471">**References**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-471">**References**</span></span>              | <span data-ttu-id="f6fbe-472">N/A</span><span class="sxs-lookup"><span data-stu-id="f6fbe-472">N/A</span></span>  |
| <span data-ttu-id="f6fbe-473">**Steps**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-473">**Steps**</span></span> | <span data-ttu-id="f6fbe-474">Perform security modeling and use Field Level Security where required</span><span class="sxs-lookup"><span data-stu-id="f6fbe-474">Perform security modeling and use Field Level Security where required</span></span>|

## <a id="portal-security"></a><span data-ttu-id="f6fbe-475">Perform security modeling of portal accounts keeping in mind that the security model for the portal differs from the rest of CRM</span><span class="sxs-lookup"><span data-stu-id="f6fbe-475">Perform security modeling of portal accounts keeping in mind that the security model for the portal differs from the rest of CRM</span></span>

| <span data-ttu-id="f6fbe-476">Title</span><span class="sxs-lookup"><span data-stu-id="f6fbe-476">Title</span></span>                   | <span data-ttu-id="f6fbe-477">Details</span><span class="sxs-lookup"><span data-stu-id="f6fbe-477">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="f6fbe-478">**Component**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-478">**Component**</span></span>               | <span data-ttu-id="f6fbe-479">Dynamics CRM Portal</span><span class="sxs-lookup"><span data-stu-id="f6fbe-479">Dynamics CRM Portal</span></span> | 
| <span data-ttu-id="f6fbe-480">**SDL Phase**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-480">**SDL Phase**</span></span>               | <span data-ttu-id="f6fbe-481">Build</span><span class="sxs-lookup"><span data-stu-id="f6fbe-481">Build</span></span> |  
| <span data-ttu-id="f6fbe-482">**Applicable Technologies**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-482">**Applicable Technologies**</span></span> | <span data-ttu-id="f6fbe-483">Generic</span><span class="sxs-lookup"><span data-stu-id="f6fbe-483">Generic</span></span> |
| <span data-ttu-id="f6fbe-484">**Attributes**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-484">**Attributes**</span></span>              | <span data-ttu-id="f6fbe-485">N/A</span><span class="sxs-lookup"><span data-stu-id="f6fbe-485">N/A</span></span>  |
| <span data-ttu-id="f6fbe-486">**References**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-486">**References**</span></span>              | <span data-ttu-id="f6fbe-487">N/A</span><span class="sxs-lookup"><span data-stu-id="f6fbe-487">N/A</span></span>  |
| <span data-ttu-id="f6fbe-488">**Steps**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-488">**Steps**</span></span> | <span data-ttu-id="f6fbe-489">Perform security modeling of portal accounts keeping in mind that the security model for the portal differs from the rest of CRM</span><span class="sxs-lookup"><span data-stu-id="f6fbe-489">Perform security modeling of portal accounts keeping in mind that the security model for the portal differs from the rest of CRM</span></span>|

## <a id="permission-entities"></a><span data-ttu-id="f6fbe-490">Grant fine-grained permission on a range of entities in Azure Table Storage</span><span class="sxs-lookup"><span data-stu-id="f6fbe-490">Grant fine-grained permission on a range of entities in Azure Table Storage</span></span>

| <span data-ttu-id="f6fbe-491">Title</span><span class="sxs-lookup"><span data-stu-id="f6fbe-491">Title</span></span>                   | <span data-ttu-id="f6fbe-492">Details</span><span class="sxs-lookup"><span data-stu-id="f6fbe-492">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="f6fbe-493">**Component**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-493">**Component**</span></span>               | <span data-ttu-id="f6fbe-494">Azure Storage</span><span class="sxs-lookup"><span data-stu-id="f6fbe-494">Azure Storage</span></span> | 
| <span data-ttu-id="f6fbe-495">**SDL Phase**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-495">**SDL Phase**</span></span>               | <span data-ttu-id="f6fbe-496">Build</span><span class="sxs-lookup"><span data-stu-id="f6fbe-496">Build</span></span> |  
| <span data-ttu-id="f6fbe-497">**Applicable Technologies**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-497">**Applicable Technologies**</span></span> | <span data-ttu-id="f6fbe-498">Generic</span><span class="sxs-lookup"><span data-stu-id="f6fbe-498">Generic</span></span> |
| <span data-ttu-id="f6fbe-499">**Attributes**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-499">**Attributes**</span></span>              | <span data-ttu-id="f6fbe-500">StorageType - Table</span><span class="sxs-lookup"><span data-stu-id="f6fbe-500">StorageType - Table</span></span> |
| <span data-ttu-id="f6fbe-501">**References**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-501">**References**</span></span>              | [<span data-ttu-id="f6fbe-502">How to delegate access to objects in your Azure storage account using SAS</span><span class="sxs-lookup"><span data-stu-id="f6fbe-502">How to delegate access to objects in your Azure storage account using SAS</span></span>](https://azure.microsoft.com/documentation/articles/storage-security-guide/#_data-plane-security) |
| <span data-ttu-id="f6fbe-503">**Steps**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-503">**Steps**</span></span> | <span data-ttu-id="f6fbe-504">In certain business scenarios, Azure Table Storage may be required to store sensitive data that caters to different parties.</span><span class="sxs-lookup"><span data-stu-id="f6fbe-504">In certain business scenarios, Azure Table Storage may be required to store sensitive data that caters to different parties.</span></span> <span data-ttu-id="f6fbe-505">E.g., sensitive data pertaining to different countries.</span><span class="sxs-lookup"><span data-stu-id="f6fbe-505">E.g., sensitive data pertaining to different countries.</span></span> <span data-ttu-id="f6fbe-506">In such cases, SAS signatures can be constructed by specifying the partition and row key ranges, such that a user can access data specific to a particular country.</span><span class="sxs-lookup"><span data-stu-id="f6fbe-506">In such cases, SAS signatures can be constructed by specifying the partition and row key ranges, such that a user can access data specific to a particular country.</span></span>| 

## <a id="rbac-azure-manager"></a><span data-ttu-id="f6fbe-507">Enable Role-Based Access Control (RBAC) to Azure storage account using Azure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="f6fbe-507">Enable Role-Based Access Control (RBAC) to Azure storage account using Azure Resource Manager</span></span>

| <span data-ttu-id="f6fbe-508">Title</span><span class="sxs-lookup"><span data-stu-id="f6fbe-508">Title</span></span>                   | <span data-ttu-id="f6fbe-509">Details</span><span class="sxs-lookup"><span data-stu-id="f6fbe-509">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="f6fbe-510">**Component**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-510">**Component**</span></span>               | <span data-ttu-id="f6fbe-511">Azure Storage</span><span class="sxs-lookup"><span data-stu-id="f6fbe-511">Azure Storage</span></span> | 
| <span data-ttu-id="f6fbe-512">**SDL Phase**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-512">**SDL Phase**</span></span>               | <span data-ttu-id="f6fbe-513">Build</span><span class="sxs-lookup"><span data-stu-id="f6fbe-513">Build</span></span> |  
| <span data-ttu-id="f6fbe-514">**Applicable Technologies**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-514">**Applicable Technologies**</span></span> | <span data-ttu-id="f6fbe-515">Generic</span><span class="sxs-lookup"><span data-stu-id="f6fbe-515">Generic</span></span> |
| <span data-ttu-id="f6fbe-516">**Attributes**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-516">**Attributes**</span></span>              | <span data-ttu-id="f6fbe-517">N/A</span><span class="sxs-lookup"><span data-stu-id="f6fbe-517">N/A</span></span>  |
| <span data-ttu-id="f6fbe-518">**References**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-518">**References**</span></span>              | [<span data-ttu-id="f6fbe-519">How to secure your storage account with Role-Based Access Control (RBAC)</span><span class="sxs-lookup"><span data-stu-id="f6fbe-519">How to secure your storage account with Role-Based Access Control (RBAC)</span></span>](https://azure.microsoft.com/documentation/articles/storage-security-guide/#management-plane-security) |
| <span data-ttu-id="f6fbe-520">**Steps**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-520">**Steps**</span></span> | <p><span data-ttu-id="f6fbe-521">When you create a new storage account, you select a deployment model of Classic or Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="f6fbe-521">When you create a new storage account, you select a deployment model of Classic or Azure Resource Manager.</span></span> <span data-ttu-id="f6fbe-522">The Classic model of creating resources in Azure only allows all-or-nothing access to the subscription, and in turn, the storage account.</span><span class="sxs-lookup"><span data-stu-id="f6fbe-522">The Classic model of creating resources in Azure only allows all-or-nothing access to the subscription, and in turn, the storage account.</span></span></p><p><span data-ttu-id="f6fbe-523">With the Azure Resource Manager model, you put the storage account in a resource group and control access to the management plane of that specific storage account using Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="f6fbe-523">With the Azure Resource Manager model, you put the storage account in a resource group and control access to the management plane of that specific storage account using Azure Active Directory.</span></span> <span data-ttu-id="f6fbe-524">For example, you can give specific users the ability to access the storage account keys, while other users can view information about the storage account, but cannot access the storage account keys.</span><span class="sxs-lookup"><span data-stu-id="f6fbe-524">For example, you can give specific users the ability to access the storage account keys, while other users can view information about the storage account, but cannot access the storage account keys.</span></span></p>|

## <a id="rooting-detection"></a><span data-ttu-id="f6fbe-525">Implement implicit jailbreak or rooting detection</span><span class="sxs-lookup"><span data-stu-id="f6fbe-525">Implement implicit jailbreak or rooting detection</span></span>

| <span data-ttu-id="f6fbe-526">Title</span><span class="sxs-lookup"><span data-stu-id="f6fbe-526">Title</span></span>                   | <span data-ttu-id="f6fbe-527">Details</span><span class="sxs-lookup"><span data-stu-id="f6fbe-527">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="f6fbe-528">**Component**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-528">**Component**</span></span>               | <span data-ttu-id="f6fbe-529">Mobile Client</span><span class="sxs-lookup"><span data-stu-id="f6fbe-529">Mobile Client</span></span> | 
| <span data-ttu-id="f6fbe-530">**SDL Phase**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-530">**SDL Phase**</span></span>               | <span data-ttu-id="f6fbe-531">Build</span><span class="sxs-lookup"><span data-stu-id="f6fbe-531">Build</span></span> |  
| <span data-ttu-id="f6fbe-532">**Applicable Technologies**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-532">**Applicable Technologies**</span></span> | <span data-ttu-id="f6fbe-533">Generic</span><span class="sxs-lookup"><span data-stu-id="f6fbe-533">Generic</span></span> |
| <span data-ttu-id="f6fbe-534">**Attributes**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-534">**Attributes**</span></span>              | <span data-ttu-id="f6fbe-535">N/A</span><span class="sxs-lookup"><span data-stu-id="f6fbe-535">N/A</span></span>  |
| <span data-ttu-id="f6fbe-536">**References**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-536">**References**</span></span>              | <span data-ttu-id="f6fbe-537">N/A</span><span class="sxs-lookup"><span data-stu-id="f6fbe-537">N/A</span></span>  |
| <span data-ttu-id="f6fbe-538">**Steps**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-538">**Steps**</span></span> | <p><span data-ttu-id="f6fbe-539">Application should safeguard its own configuration and user data in case if phone is rooted or jail broken.</span><span class="sxs-lookup"><span data-stu-id="f6fbe-539">Application should safeguard its own configuration and user data in case if phone is rooted or jail broken.</span></span> <span data-ttu-id="f6fbe-540">Rooting/jail breaking implies unauthorized access, which normal users won't do on their own phones.</span><span class="sxs-lookup"><span data-stu-id="f6fbe-540">Rooting/jail breaking implies unauthorized access, which normal users won't do on their own phones.</span></span> <span data-ttu-id="f6fbe-541">Therefore application should have implicit detection logic on application startup, to detect if the phone has been rooted.</span><span class="sxs-lookup"><span data-stu-id="f6fbe-541">Therefore application should have implicit detection logic on application startup, to detect if the phone has been rooted.</span></span></p><p><span data-ttu-id="f6fbe-542">The detection logic can be simply accessing files which normally only root user can access, for example:</span><span class="sxs-lookup"><span data-stu-id="f6fbe-542">The detection logic can be simply accessing files which normally only root user can access, for example:</span></span></p><ul><li><span data-ttu-id="f6fbe-543">/system/app/Superuser.apk</span><span class="sxs-lookup"><span data-stu-id="f6fbe-543">/system/app/Superuser.apk</span></span></li><li><span data-ttu-id="f6fbe-544">/sbin/su</span><span class="sxs-lookup"><span data-stu-id="f6fbe-544">/sbin/su</span></span></li><li><span data-ttu-id="f6fbe-545">/system/bin/su</span><span class="sxs-lookup"><span data-stu-id="f6fbe-545">/system/bin/su</span></span></li><li><span data-ttu-id="f6fbe-546">/system/xbin/su</span><span class="sxs-lookup"><span data-stu-id="f6fbe-546">/system/xbin/su</span></span></li><li><span data-ttu-id="f6fbe-547">/data/local/xbin/su</span><span class="sxs-lookup"><span data-stu-id="f6fbe-547">/data/local/xbin/su</span></span></li><li><span data-ttu-id="f6fbe-548">/data/local/bin/su</span><span class="sxs-lookup"><span data-stu-id="f6fbe-548">/data/local/bin/su</span></span></li><li><span data-ttu-id="f6fbe-549">/system/sd/xbin/su</span><span class="sxs-lookup"><span data-stu-id="f6fbe-549">/system/sd/xbin/su</span></span></li><li><span data-ttu-id="f6fbe-550">/system/bin/failsafe/su</span><span class="sxs-lookup"><span data-stu-id="f6fbe-550">/system/bin/failsafe/su</span></span></li><li><span data-ttu-id="f6fbe-551">/data/local/su</span><span class="sxs-lookup"><span data-stu-id="f6fbe-551">/data/local/su</span></span></li></ul><p><span data-ttu-id="f6fbe-552">If the application can access any of these files, it denotes that the application is running as root user.</span><span class="sxs-lookup"><span data-stu-id="f6fbe-552">If the application can access any of these files, it denotes that the application is running as root user.</span></span></p>|

## <a id="weak-class-wcf"></a><span data-ttu-id="f6fbe-553">Weak Class Reference in WCF</span><span class="sxs-lookup"><span data-stu-id="f6fbe-553">Weak Class Reference in WCF</span></span>

| <span data-ttu-id="f6fbe-554">Title</span><span class="sxs-lookup"><span data-stu-id="f6fbe-554">Title</span></span>                   | <span data-ttu-id="f6fbe-555">Details</span><span class="sxs-lookup"><span data-stu-id="f6fbe-555">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="f6fbe-556">**Component**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-556">**Component**</span></span>               | <span data-ttu-id="f6fbe-557">WCF</span><span class="sxs-lookup"><span data-stu-id="f6fbe-557">WCF</span></span> | 
| <span data-ttu-id="f6fbe-558">**SDL Phase**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-558">**SDL Phase**</span></span>               | <span data-ttu-id="f6fbe-559">Build</span><span class="sxs-lookup"><span data-stu-id="f6fbe-559">Build</span></span> |  
| <span data-ttu-id="f6fbe-560">**Applicable Technologies**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-560">**Applicable Technologies**</span></span> | <span data-ttu-id="f6fbe-561">Generic, NET Framework 3</span><span class="sxs-lookup"><span data-stu-id="f6fbe-561">Generic, NET Framework 3</span></span> |
| <span data-ttu-id="f6fbe-562">**Attributes**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-562">**Attributes**</span></span>              | <span data-ttu-id="f6fbe-563">N/A</span><span class="sxs-lookup"><span data-stu-id="f6fbe-563">N/A</span></span>  |
| <span data-ttu-id="f6fbe-564">**References**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-564">**References**</span></span>              | <span data-ttu-id="f6fbe-565">[MSDN](https://msdn.microsoft.com/library/ff648500.aspx), [Fortify Kingdom](https://vulncat.fortify.com/en/detail?id=desc.config.dotnet.wcf_misconfiguration_weak_class_reference)</span><span class="sxs-lookup"><span data-stu-id="f6fbe-565">[MSDN](https://msdn.microsoft.com/library/ff648500.aspx), [Fortify Kingdom](https://vulncat.fortify.com/en/detail?id=desc.config.dotnet.wcf_misconfiguration_weak_class_reference)</span></span> |
| <span data-ttu-id="f6fbe-566">**Steps**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-566">**Steps**</span></span> | <p><span data-ttu-id="f6fbe-567">The system uses a weak class reference, which might allow an attacker to execute unauthorized code.</span><span class="sxs-lookup"><span data-stu-id="f6fbe-567">The system uses a weak class reference, which might allow an attacker to execute unauthorized code.</span></span> <span data-ttu-id="f6fbe-568">The program references a user-defined class that is not uniquely identified.</span><span class="sxs-lookup"><span data-stu-id="f6fbe-568">The program references a user-defined class that is not uniquely identified.</span></span> <span data-ttu-id="f6fbe-569">When .NET loads this weakly identified class, the CLR type loader searches for the class in the following locations in the specified order:</span><span class="sxs-lookup"><span data-stu-id="f6fbe-569">When .NET loads this weakly identified class, the CLR type loader searches for the class in the following locations in the specified order:</span></span></p><ol><li><span data-ttu-id="f6fbe-570">If the assembly of the type is known, the loader searches the configuration file's redirect locations, GAC, the current assembly using configuration information, and the application base directory</span><span class="sxs-lookup"><span data-stu-id="f6fbe-570">If the assembly of the type is known, the loader searches the configuration file's redirect locations, GAC, the current assembly using configuration information, and the application base directory</span></span></li><li><span data-ttu-id="f6fbe-571">If the assembly is unknown, the loader searches the current assembly, mscorlib, and the location returned by the TypeResolve event handler</span><span class="sxs-lookup"><span data-stu-id="f6fbe-571">If the assembly is unknown, the loader searches the current assembly, mscorlib, and the location returned by the TypeResolve event handler</span></span></li><li><span data-ttu-id="f6fbe-572">This CLR search order can be modified with hooks such as the Type Forwarding mechanism and the AppDomain.TypeResolve event</span><span class="sxs-lookup"><span data-stu-id="f6fbe-572">This CLR search order can be modified with hooks such as the Type Forwarding mechanism and the AppDomain.TypeResolve event</span></span></li></ol><p><span data-ttu-id="f6fbe-573">If an attacker exploits the CLR search order by creating an alternative class with the same name and placing it in an alternative location that the CLR will load first, the CLR will unintentionally execute the attacker-supplied code</span><span class="sxs-lookup"><span data-stu-id="f6fbe-573">If an attacker exploits the CLR search order by creating an alternative class with the same name and placing it in an alternative location that the CLR will load first, the CLR will unintentionally execute the attacker-supplied code</span></span></p>|

### <a name="example"></a><span data-ttu-id="f6fbe-574">Example</span><span class="sxs-lookup"><span data-stu-id="f6fbe-574">Example</span></span>
<span data-ttu-id="f6fbe-575">The `<behaviorExtensions/>` element of the WCF configuration file below instructs WCF to add a custom behavior class to a particular WCF extension.</span><span class="sxs-lookup"><span data-stu-id="f6fbe-575">The `<behaviorExtensions/>` element of the WCF configuration file below instructs WCF to add a custom behavior class to a particular WCF extension.</span></span>
```
<system.serviceModel>
    <extensions>
        <behaviorExtensions>
            <add name=""myBehavior"" type=""MyBehavior"" />
        </behaviorExtensions>
    </extensions>
</system.serviceModel>
```
<span data-ttu-id="f6fbe-576">Using fully qualified (strong) names uniquely identifies a type and further increases security of your system.</span><span class="sxs-lookup"><span data-stu-id="f6fbe-576">Using fully qualified (strong) names uniquely identifies a type and further increases security of your system.</span></span> <span data-ttu-id="f6fbe-577">Use fully qualified assembly names when registering types in the machine.config and app.config files.</span><span class="sxs-lookup"><span data-stu-id="f6fbe-577">Use fully qualified assembly names when registering types in the machine.config and app.config files.</span></span>

### <a name="example"></a><span data-ttu-id="f6fbe-578">Example</span><span class="sxs-lookup"><span data-stu-id="f6fbe-578">Example</span></span>
<span data-ttu-id="f6fbe-579">The `<behaviorExtensions/>` element of the WCF configuration file below instructs WCF to add strongly-referenced custom behavior class to a particular WCF extension.</span><span class="sxs-lookup"><span data-stu-id="f6fbe-579">The `<behaviorExtensions/>` element of the WCF configuration file below instructs WCF to add strongly-referenced custom behavior class to a particular WCF extension.</span></span>
```
<system.serviceModel>
    <extensions>
        <behaviorExtensions>
            <add name=""myBehavior"" type=""Microsoft.ServiceModel.Samples.MyBehaviorSection, MyBehavior,
            Version=1.0.0.0, Culture=neutral, PublicKeyToken=null"" />
        </behaviorExtensions>
    </extensions>
</system.serviceModel>
```

## <a id="wcf-authz"></a><span data-ttu-id="f6fbe-580">WCF-Implement Authorization control</span><span class="sxs-lookup"><span data-stu-id="f6fbe-580">WCF-Implement Authorization control</span></span>

| <span data-ttu-id="f6fbe-581">Title</span><span class="sxs-lookup"><span data-stu-id="f6fbe-581">Title</span></span>                   | <span data-ttu-id="f6fbe-582">Details</span><span class="sxs-lookup"><span data-stu-id="f6fbe-582">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="f6fbe-583">**Component**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-583">**Component**</span></span>               | <span data-ttu-id="f6fbe-584">WCF</span><span class="sxs-lookup"><span data-stu-id="f6fbe-584">WCF</span></span> | 
| <span data-ttu-id="f6fbe-585">**SDL Phase**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-585">**SDL Phase**</span></span>               | <span data-ttu-id="f6fbe-586">Build</span><span class="sxs-lookup"><span data-stu-id="f6fbe-586">Build</span></span> |  
| <span data-ttu-id="f6fbe-587">**Applicable Technologies**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-587">**Applicable Technologies**</span></span> | <span data-ttu-id="f6fbe-588">Generic, NET Framework 3</span><span class="sxs-lookup"><span data-stu-id="f6fbe-588">Generic, NET Framework 3</span></span> |
| <span data-ttu-id="f6fbe-589">**Attributes**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-589">**Attributes**</span></span>              | <span data-ttu-id="f6fbe-590">N/A</span><span class="sxs-lookup"><span data-stu-id="f6fbe-590">N/A</span></span>  |
| <span data-ttu-id="f6fbe-591">**References**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-591">**References**</span></span>              | <span data-ttu-id="f6fbe-592">[MSDN](https://msdn.microsoft.com/library/ff648500.aspx), [Fortify Kingdom](https://vulncat.hpefod.com/en/detail?id=desc.semantic.dotnet.wcf_misconfiguration_unauthorized_access)</span><span class="sxs-lookup"><span data-stu-id="f6fbe-592">[MSDN](https://msdn.microsoft.com/library/ff648500.aspx), [Fortify Kingdom](https://vulncat.hpefod.com/en/detail?id=desc.semantic.dotnet.wcf_misconfiguration_unauthorized_access)</span></span> |
| <span data-ttu-id="f6fbe-593">**Steps**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-593">**Steps**</span></span> | <p><span data-ttu-id="f6fbe-594">This service does not use an authorization control.</span><span class="sxs-lookup"><span data-stu-id="f6fbe-594">This service does not use an authorization control.</span></span> <span data-ttu-id="f6fbe-595">When a client calls a particular WCF service, WCF provides various authorization schemes that verify that the caller has permission to execute the service method on the server.</span><span class="sxs-lookup"><span data-stu-id="f6fbe-595">When a client calls a particular WCF service, WCF provides various authorization schemes that verify that the caller has permission to execute the service method on the server.</span></span> <span data-ttu-id="f6fbe-596">If authorization controls are not enabled for WCF services, an authenticated user can achieve privilege escalation.</span><span class="sxs-lookup"><span data-stu-id="f6fbe-596">If authorization controls are not enabled for WCF services, an authenticated user can achieve privilege escalation.</span></span></p>|

### <a name="example"></a><span data-ttu-id="f6fbe-597">Example</span><span class="sxs-lookup"><span data-stu-id="f6fbe-597">Example</span></span>
<span data-ttu-id="f6fbe-598">The following configuration instructs WCF to not check the authorization level of the client when executing the service:</span><span class="sxs-lookup"><span data-stu-id="f6fbe-598">The following configuration instructs WCF to not check the authorization level of the client when executing the service:</span></span>
```
<behaviors>
    <serviceBehaviors>
        <behavior>
            ...
            <serviceAuthorization principalPermissionMode=""None"" />
        </behavior>
    </serviceBehaviors>
</behaviors>
```
<span data-ttu-id="f6fbe-599">Use a service authorization scheme to verify that the caller of the service method is authorized to do so.</span><span class="sxs-lookup"><span data-stu-id="f6fbe-599">Use a service authorization scheme to verify that the caller of the service method is authorized to do so.</span></span> <span data-ttu-id="f6fbe-600">WCF provides two modes and allows the definition of a custom authorization scheme.</span><span class="sxs-lookup"><span data-stu-id="f6fbe-600">WCF provides two modes and allows the definition of a custom authorization scheme.</span></span> <span data-ttu-id="f6fbe-601">The UseWindowsGroups mode uses Windows roles and users and the UseAspNetRoles mode uses an ASP.NET role provider, such as SQL Server, to authenticate.</span><span class="sxs-lookup"><span data-stu-id="f6fbe-601">The UseWindowsGroups mode uses Windows roles and users and the UseAspNetRoles mode uses an ASP.NET role provider, such as SQL Server, to authenticate.</span></span>

### <a name="example"></a><span data-ttu-id="f6fbe-602">Example</span><span class="sxs-lookup"><span data-stu-id="f6fbe-602">Example</span></span>
<span data-ttu-id="f6fbe-603">The following configuration instructs WCF to make sure that the client is part of the Administrators group before executing the Add service:</span><span class="sxs-lookup"><span data-stu-id="f6fbe-603">The following configuration instructs WCF to make sure that the client is part of the Administrators group before executing the Add service:</span></span>
```
<behaviors>
    <serviceBehaviors>
        <behavior>
            ...
            <serviceAuthorization principalPermissionMode=""UseWindowsGroups"" />
        </behavior>
    </serviceBehaviors>
</behaviors>
```
<span data-ttu-id="f6fbe-604">The service is then declared as the following:</span><span class="sxs-lookup"><span data-stu-id="f6fbe-604">The service is then declared as the following:</span></span>
```
[PrincipalPermission(SecurityAction.Demand,
Role = ""Builtin\\Administrators"")]
public double Add(double n1, double n2)
{
double result = n1 + n2;
return result;
}
```

## <a id="authz-aspnet"></a><span data-ttu-id="f6fbe-605">Implement proper authorization mechanism in ASP.NET Web API</span><span class="sxs-lookup"><span data-stu-id="f6fbe-605">Implement proper authorization mechanism in ASP.NET Web API</span></span>

| <span data-ttu-id="f6fbe-606">Title</span><span class="sxs-lookup"><span data-stu-id="f6fbe-606">Title</span></span>                   | <span data-ttu-id="f6fbe-607">Details</span><span class="sxs-lookup"><span data-stu-id="f6fbe-607">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="f6fbe-608">**Component**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-608">**Component**</span></span>               | <span data-ttu-id="f6fbe-609">Web API</span><span class="sxs-lookup"><span data-stu-id="f6fbe-609">Web API</span></span> | 
| <span data-ttu-id="f6fbe-610">**SDL Phase**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-610">**SDL Phase**</span></span>               | <span data-ttu-id="f6fbe-611">Build</span><span class="sxs-lookup"><span data-stu-id="f6fbe-611">Build</span></span> |  
| <span data-ttu-id="f6fbe-612">**Applicable Technologies**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-612">**Applicable Technologies**</span></span> | <span data-ttu-id="f6fbe-613">Generic, MVC5</span><span class="sxs-lookup"><span data-stu-id="f6fbe-613">Generic, MVC5</span></span> |
| <span data-ttu-id="f6fbe-614">**Attributes**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-614">**Attributes**</span></span>              | <span data-ttu-id="f6fbe-615">N/A, Identity Provider - ADFS, Identity Provider - Azure AD</span><span class="sxs-lookup"><span data-stu-id="f6fbe-615">N/A, Identity Provider - ADFS, Identity Provider - Azure AD</span></span> |
| <span data-ttu-id="f6fbe-616">**References**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-616">**References**</span></span>              | [<span data-ttu-id="f6fbe-617">Authentication and Authorization in ASP.NET Web API</span><span class="sxs-lookup"><span data-stu-id="f6fbe-617">Authentication and Authorization in ASP.NET Web API</span></span>](http://www.asp.net/web-api/overview/security/authentication-and-authorization-in-aspnet-web-api) |
| <span data-ttu-id="f6fbe-618">**Steps**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-618">**Steps**</span></span> | <p><span data-ttu-id="f6fbe-619">Role information for the application users can be derived from Azure AD or ADFS claims if the application relies on them as Identity provider or the application itself might provided it.</span><span class="sxs-lookup"><span data-stu-id="f6fbe-619">Role information for the application users can be derived from Azure AD or ADFS claims if the application relies on them as Identity provider or the application itself might provided it.</span></span> <span data-ttu-id="f6fbe-620">In any of these cases, the custom authorization implementation should validate the user role information.</span><span class="sxs-lookup"><span data-stu-id="f6fbe-620">In any of these cases, the custom authorization implementation should validate the user role information.</span></span></p><p><span data-ttu-id="f6fbe-621">Role information for the application users can be derived from Azure AD or ADFS claims if the application relies on them as Identity provider or the application itself might provided it.</span><span class="sxs-lookup"><span data-stu-id="f6fbe-621">Role information for the application users can be derived from Azure AD or ADFS claims if the application relies on them as Identity provider or the application itself might provided it.</span></span> <span data-ttu-id="f6fbe-622">In any of these cases, the custom authorization implementation should validate the user role information.</span><span class="sxs-lookup"><span data-stu-id="f6fbe-622">In any of these cases, the custom authorization implementation should validate the user role information.</span></span></p>

### <a name="example"></a><span data-ttu-id="f6fbe-623">Example</span><span class="sxs-lookup"><span data-stu-id="f6fbe-623">Example</span></span>
```csharp
[AttributeUsage(AttributeTargets.Class | AttributeTargets.Method, Inherited = true, AllowMultiple = true)]
public class ApiAuthorizeAttribute : System.Web.Http.AuthorizeAttribute
{
        public async override Task OnAuthorizationAsync(HttpActionContext actionContext, CancellationToken cancellationToken)
        {
            if (actionContext == null)
            {
                throw new Exception();
            }

            if (!string.IsNullOrEmpty(base.Roles))
            {
                bool isAuthorized = ValidateRoles(actionContext);
                if (!isAuthorized)
                {
                    HandleUnauthorizedRequest(actionContext);
                }
            }

            base.OnAuthorization(actionContext);
        }

public bool ValidateRoles(actionContext)
{
   //Authorization logic here; returns true or false
}

}
```
<span data-ttu-id="f6fbe-624">All the controllers and action methods which needs to protected should be decorated with above attribute.</span><span class="sxs-lookup"><span data-stu-id="f6fbe-624">All the controllers and action methods which needs to protected should be decorated with above attribute.</span></span>
```csharp
[ApiAuthorize]
public class CustomController : ApiController
{
     //Application code goes here
}
```

## <a id="device-permission"></a><span data-ttu-id="f6fbe-625">Perform authorization checks in the device if it supports various actions that require different permission levels</span><span class="sxs-lookup"><span data-stu-id="f6fbe-625">Perform authorization checks in the device if it supports various actions that require different permission levels</span></span>

| <span data-ttu-id="f6fbe-626">Title</span><span class="sxs-lookup"><span data-stu-id="f6fbe-626">Title</span></span>                   | <span data-ttu-id="f6fbe-627">Details</span><span class="sxs-lookup"><span data-stu-id="f6fbe-627">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="f6fbe-628">**Component**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-628">**Component**</span></span>               | <span data-ttu-id="f6fbe-629">IoT Device</span><span class="sxs-lookup"><span data-stu-id="f6fbe-629">IoT Device</span></span> | 
| <span data-ttu-id="f6fbe-630">**SDL Phase**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-630">**SDL Phase**</span></span>               | <span data-ttu-id="f6fbe-631">Build</span><span class="sxs-lookup"><span data-stu-id="f6fbe-631">Build</span></span> |  
| <span data-ttu-id="f6fbe-632">**Applicable Technologies**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-632">**Applicable Technologies**</span></span> | <span data-ttu-id="f6fbe-633">Generic</span><span class="sxs-lookup"><span data-stu-id="f6fbe-633">Generic</span></span> |
| <span data-ttu-id="f6fbe-634">**Attributes**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-634">**Attributes**</span></span>              | <span data-ttu-id="f6fbe-635">N/A</span><span class="sxs-lookup"><span data-stu-id="f6fbe-635">N/A</span></span>  |
| <span data-ttu-id="f6fbe-636">**References**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-636">**References**</span></span>              | <span data-ttu-id="f6fbe-637">N/A</span><span class="sxs-lookup"><span data-stu-id="f6fbe-637">N/A</span></span>  |
| <span data-ttu-id="f6fbe-638">**Steps**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-638">**Steps**</span></span> | <p><span data-ttu-id="f6fbe-639">The Device should authorize the caller to check if the caller has the required permissions to perform the action requested.</span><span class="sxs-lookup"><span data-stu-id="f6fbe-639">The Device should authorize the caller to check if the caller has the required permissions to perform the action requested.</span></span> <span data-ttu-id="f6fbe-640">For e.g. Lets say the device is a Smart Door Lock that can be monitored from the cloud, plus it provides functionalities like Remotely locking the door.</span><span class="sxs-lookup"><span data-stu-id="f6fbe-640">For e.g. Lets say the device is a Smart Door Lock that can be monitored from the cloud, plus it provides functionalities like Remotely locking the door.</span></span></p><p><span data-ttu-id="f6fbe-641">The Smart Door Lock provides unlocking functionality only when someone physically comes near the door with a Card.</span><span class="sxs-lookup"><span data-stu-id="f6fbe-641">The Smart Door Lock provides unlocking functionality only when someone physically comes near the door with a Card.</span></span> <span data-ttu-id="f6fbe-642">In this case, the implementation of the remote command and control should be done in such a way that it does not provide any functionality to unlock the door as the cloud gateway is not authorized to send a command to unlock the door.</span><span class="sxs-lookup"><span data-stu-id="f6fbe-642">In this case, the implementation of the remote command and control should be done in such a way that it does not provide any functionality to unlock the door as the cloud gateway is not authorized to send a command to unlock the door.</span></span></p>|

## <a id="field-permission"></a><span data-ttu-id="f6fbe-643">Perform authorization checks in the Field Gateway if it supports various actions that require different permission levels</span><span class="sxs-lookup"><span data-stu-id="f6fbe-643">Perform authorization checks in the Field Gateway if it supports various actions that require different permission levels</span></span>

| <span data-ttu-id="f6fbe-644">Title</span><span class="sxs-lookup"><span data-stu-id="f6fbe-644">Title</span></span>                   | <span data-ttu-id="f6fbe-645">Details</span><span class="sxs-lookup"><span data-stu-id="f6fbe-645">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="f6fbe-646">**Component**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-646">**Component**</span></span>               | <span data-ttu-id="f6fbe-647">IoT Field Gateway</span><span class="sxs-lookup"><span data-stu-id="f6fbe-647">IoT Field Gateway</span></span> | 
| <span data-ttu-id="f6fbe-648">**SDL Phase**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-648">**SDL Phase**</span></span>               | <span data-ttu-id="f6fbe-649">Build</span><span class="sxs-lookup"><span data-stu-id="f6fbe-649">Build</span></span> |  
| <span data-ttu-id="f6fbe-650">**Applicable Technologies**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-650">**Applicable Technologies**</span></span> | <span data-ttu-id="f6fbe-651">Generic</span><span class="sxs-lookup"><span data-stu-id="f6fbe-651">Generic</span></span> |
| <span data-ttu-id="f6fbe-652">**Attributes**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-652">**Attributes**</span></span>              | <span data-ttu-id="f6fbe-653">N/A</span><span class="sxs-lookup"><span data-stu-id="f6fbe-653">N/A</span></span>  |
| <span data-ttu-id="f6fbe-654">**References**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-654">**References**</span></span>              | <span data-ttu-id="f6fbe-655">N/A</span><span class="sxs-lookup"><span data-stu-id="f6fbe-655">N/A</span></span>  |
| <span data-ttu-id="f6fbe-656">**Steps**</span><span class="sxs-lookup"><span data-stu-id="f6fbe-656">**Steps**</span></span> | <span data-ttu-id="f6fbe-657">The Field Gateway should authorize the caller to check if the caller has the required permissions to perform the action requested.</span><span class="sxs-lookup"><span data-stu-id="f6fbe-657">The Field Gateway should authorize the caller to check if the caller has the required permissions to perform the action requested.</span></span> <span data-ttu-id="f6fbe-658">For e.g. there should be different permissions for an admin user interface/API used to configure a field gateway v/s devices that connect to it.</span><span class="sxs-lookup"><span data-stu-id="f6fbe-658">For e.g. there should be different permissions for an admin user interface/API used to configure a field gateway v/s devices that connect to it.</span></span>|
