---
title: Auditing and Logging - Microsoft Threat Modeling Tool - Azure | Microsoft Docs
description: mitigations for threats exposed in the Threat Modeling Tool
services: security
documentationcenter: na
author: RodSan
manager: RodSan
editor: RodSan
ms.assetid: na
ms.service: security
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 02/07/2017
ms.author: rodsan
ms.openlocfilehash: e6a369ce9970b27709f5a1a1fa6c52b100b3b925
ms.sourcegitcommit: 5b9d839c0c0a94b293fdafe1d6e5429506c07e05
ms.translationtype: HT
ms.contentlocale: nl-NL
ms.lasthandoff: 08/02/2018
ms.locfileid: "44663038"
---
# <a name="security-frame-auditing-and-logging--mitigations"></a><span data-ttu-id="760e8-103">Security Frame: Auditing and Logging | Mitigations</span><span class="sxs-lookup"><span data-stu-id="760e8-103">Security Frame: Auditing and Logging | Mitigations</span></span> 
| <span data-ttu-id="760e8-104">Product/Service</span><span class="sxs-lookup"><span data-stu-id="760e8-104">Product/Service</span></span> | <span data-ttu-id="760e8-105">Article</span><span class="sxs-lookup"><span data-stu-id="760e8-105">Article</span></span> |
| --------------- | ------- |
| <span data-ttu-id="760e8-106">Dynamics CRM</span><span class="sxs-lookup"><span data-stu-id="760e8-106">Dynamics CRM</span></span>    | <ul><li>[<span data-ttu-id="760e8-107">Identify sensitive entities in your solution and implement change auditing</span><span class="sxs-lookup"><span data-stu-id="760e8-107">Identify sensitive entities in your solution and implement change auditing</span></span>](#sensitive-entities)</li></ul> |
| <span data-ttu-id="760e8-108">Web Application</span><span class="sxs-lookup"><span data-stu-id="760e8-108">Web Application</span></span> | <ul><li>[<span data-ttu-id="760e8-109">Ensure that auditing and logging is enforced on the application</span><span class="sxs-lookup"><span data-stu-id="760e8-109">Ensure that auditing and logging is enforced on the application</span></span>](#auditing)</li><li>[<span data-ttu-id="760e8-110">Ensure that log rotation and separation are in place</span><span class="sxs-lookup"><span data-stu-id="760e8-110">Ensure that log rotation and separation are in place</span></span>](#log-rotation)</li><li>[<span data-ttu-id="760e8-111">Ensure that the application does not log sensitive user data</span><span class="sxs-lookup"><span data-stu-id="760e8-111">Ensure that the application does not log sensitive user data</span></span>](#log-sensitive-data)</li><li>[<span data-ttu-id="760e8-112">Ensure that Audit and Log Files have Restricted Access</span><span class="sxs-lookup"><span data-stu-id="760e8-112">Ensure that Audit and Log Files have Restricted Access</span></span>](#log-restricted-access)</li><li>[<span data-ttu-id="760e8-113">Ensure that User Management Events are Logged</span><span class="sxs-lookup"><span data-stu-id="760e8-113">Ensure that User Management Events are Logged</span></span>](#user-management)</li><li>[<span data-ttu-id="760e8-114">Ensure that the system has inbuilt defenses against misuse</span><span class="sxs-lookup"><span data-stu-id="760e8-114">Ensure that the system has inbuilt defenses against misuse</span></span>](#inbuilt-defenses)</li><li>[<span data-ttu-id="760e8-115">Enable diagnostics logging for web apps in Azure App Service</span><span class="sxs-lookup"><span data-stu-id="760e8-115">Enable diagnostics logging for web apps in Azure App Service</span></span>](#diagnostics-logging)</li></ul> |
| <span data-ttu-id="760e8-116">Database</span><span class="sxs-lookup"><span data-stu-id="760e8-116">Database</span></span> | <ul><li>[<span data-ttu-id="760e8-117">Ensure that login auditing is enabled on SQL Server</span><span class="sxs-lookup"><span data-stu-id="760e8-117">Ensure that login auditing is enabled on SQL Server</span></span>](#identify-sensitive-entities)</li><li>[<span data-ttu-id="760e8-118">Enable Threat detection on Azure SQL</span><span class="sxs-lookup"><span data-stu-id="760e8-118">Enable Threat detection on Azure SQL</span></span>](#threat-detection)</li></ul> |
| <span data-ttu-id="760e8-119">Azure Storage</span><span class="sxs-lookup"><span data-stu-id="760e8-119">Azure Storage</span></span> | <ul><li>[<span data-ttu-id="760e8-120">Use Azure Storage Analytics to audit access of Azure Storage</span><span class="sxs-lookup"><span data-stu-id="760e8-120">Use Azure Storage Analytics to audit access of Azure Storage</span></span>](#analytics)</li></ul> |
| <span data-ttu-id="760e8-121">WCF</span><span class="sxs-lookup"><span data-stu-id="760e8-121">WCF</span></span> | <ul><li>[<span data-ttu-id="760e8-122">Implement sufficient Logging</span><span class="sxs-lookup"><span data-stu-id="760e8-122">Implement sufficient Logging</span></span>](#sufficient-logging)</li><li>[<span data-ttu-id="760e8-123">Implement sufficient Audit Failure Handling</span><span class="sxs-lookup"><span data-stu-id="760e8-123">Implement sufficient Audit Failure Handling</span></span>](#audit-failure-handling)</li></ul> |
| <span data-ttu-id="760e8-124">Web API</span><span class="sxs-lookup"><span data-stu-id="760e8-124">Web API</span></span> | <ul><li>[<span data-ttu-id="760e8-125">Ensure that auditing and logging is enforced on Web API</span><span class="sxs-lookup"><span data-stu-id="760e8-125">Ensure that auditing and logging is enforced on Web API</span></span>](#logging-web-api)</li></ul> |
| <span data-ttu-id="760e8-126">IoT Field Gateway</span><span class="sxs-lookup"><span data-stu-id="760e8-126">IoT Field Gateway</span></span> | <ul><li>[<span data-ttu-id="760e8-127">Ensure that appropriate auditing and logging is enforced on Field Gateway</span><span class="sxs-lookup"><span data-stu-id="760e8-127">Ensure that appropriate auditing and logging is enforced on Field Gateway</span></span>](#logging-field-gateway)</li></ul> |
| <span data-ttu-id="760e8-128">IoT Cloud Gateway</span><span class="sxs-lookup"><span data-stu-id="760e8-128">IoT Cloud Gateway</span></span> | <ul><li>[<span data-ttu-id="760e8-129">Ensure that appropriate auditing and logging is enforced on Cloud Gateway</span><span class="sxs-lookup"><span data-stu-id="760e8-129">Ensure that appropriate auditing and logging is enforced on Cloud Gateway</span></span>](#logging-cloud-gateway)</li></ul> |

## <a id="sensitive-entities"></a><span data-ttu-id="760e8-130">Identify sensitive entities in your solution and implement change auditing</span><span class="sxs-lookup"><span data-stu-id="760e8-130">Identify sensitive entities in your solution and implement change auditing</span></span>

| <span data-ttu-id="760e8-131">Title</span><span class="sxs-lookup"><span data-stu-id="760e8-131">Title</span></span>                   | <span data-ttu-id="760e8-132">Details</span><span class="sxs-lookup"><span data-stu-id="760e8-132">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="760e8-133">Component</span><span class="sxs-lookup"><span data-stu-id="760e8-133">Component</span></span>               | <span data-ttu-id="760e8-134">Dynamics CRM</span><span class="sxs-lookup"><span data-stu-id="760e8-134">Dynamics CRM</span></span> | 
| <span data-ttu-id="760e8-135">SDL Phase</span><span class="sxs-lookup"><span data-stu-id="760e8-135">SDL Phase</span></span>               | <span data-ttu-id="760e8-136">Build</span><span class="sxs-lookup"><span data-stu-id="760e8-136">Build</span></span> |  
| <span data-ttu-id="760e8-137">Applicable Technologies</span><span class="sxs-lookup"><span data-stu-id="760e8-137">Applicable Technologies</span></span> | <span data-ttu-id="760e8-138">Generic</span><span class="sxs-lookup"><span data-stu-id="760e8-138">Generic</span></span> |
| <span data-ttu-id="760e8-139">Attributes</span><span class="sxs-lookup"><span data-stu-id="760e8-139">Attributes</span></span>              | <span data-ttu-id="760e8-140">N/A</span><span class="sxs-lookup"><span data-stu-id="760e8-140">N/A</span></span>  |
| <span data-ttu-id="760e8-141">References</span><span class="sxs-lookup"><span data-stu-id="760e8-141">References</span></span>              | <span data-ttu-id="760e8-142">N/A</span><span class="sxs-lookup"><span data-stu-id="760e8-142">N/A</span></span>  |
| <span data-ttu-id="760e8-143">Steps</span><span class="sxs-lookup"><span data-stu-id="760e8-143">Steps</span></span>                   | <span data-ttu-id="760e8-144">Identify entities in your solution containing sensitive data and implement change auditing on those entities and fields</span><span class="sxs-lookup"><span data-stu-id="760e8-144">Identify entities in your solution containing sensitive data and implement change auditing on those entities and fields</span></span> |

## <a id="auditing"></a><span data-ttu-id="760e8-145">Ensure that auditing and logging is enforced on the application</span><span class="sxs-lookup"><span data-stu-id="760e8-145">Ensure that auditing and logging is enforced on the application</span></span>

| <span data-ttu-id="760e8-146">Title</span><span class="sxs-lookup"><span data-stu-id="760e8-146">Title</span></span>                   | <span data-ttu-id="760e8-147">Details</span><span class="sxs-lookup"><span data-stu-id="760e8-147">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="760e8-148">Component</span><span class="sxs-lookup"><span data-stu-id="760e8-148">Component</span></span>               | <span data-ttu-id="760e8-149">Web Application</span><span class="sxs-lookup"><span data-stu-id="760e8-149">Web Application</span></span> | 
| <span data-ttu-id="760e8-150">SDL Phase</span><span class="sxs-lookup"><span data-stu-id="760e8-150">SDL Phase</span></span>               | <span data-ttu-id="760e8-151">Build</span><span class="sxs-lookup"><span data-stu-id="760e8-151">Build</span></span> |  
| <span data-ttu-id="760e8-152">Applicable Technologies</span><span class="sxs-lookup"><span data-stu-id="760e8-152">Applicable Technologies</span></span> | <span data-ttu-id="760e8-153">Generic</span><span class="sxs-lookup"><span data-stu-id="760e8-153">Generic</span></span> |
| <span data-ttu-id="760e8-154">Attributes</span><span class="sxs-lookup"><span data-stu-id="760e8-154">Attributes</span></span>              | <span data-ttu-id="760e8-155">N/A</span><span class="sxs-lookup"><span data-stu-id="760e8-155">N/A</span></span>  |
| <span data-ttu-id="760e8-156">References</span><span class="sxs-lookup"><span data-stu-id="760e8-156">References</span></span>              | <span data-ttu-id="760e8-157">N/A</span><span class="sxs-lookup"><span data-stu-id="760e8-157">N/A</span></span>  |
| <span data-ttu-id="760e8-158">Steps</span><span class="sxs-lookup"><span data-stu-id="760e8-158">Steps</span></span>                   | <span data-ttu-id="760e8-159">Enable auditing and logging on all components.</span><span class="sxs-lookup"><span data-stu-id="760e8-159">Enable auditing and logging on all components.</span></span> <span data-ttu-id="760e8-160">Audit logs should capture user context.</span><span class="sxs-lookup"><span data-stu-id="760e8-160">Audit logs should capture user context.</span></span> <span data-ttu-id="760e8-161">Identify all important events and log those events.</span><span class="sxs-lookup"><span data-stu-id="760e8-161">Identify all important events and log those events.</span></span> <span data-ttu-id="760e8-162">Implement centralized logging</span><span class="sxs-lookup"><span data-stu-id="760e8-162">Implement centralized logging</span></span> |

## <a id="log-rotation"></a><span data-ttu-id="760e8-163">Ensure that log rotation and separation are in place</span><span class="sxs-lookup"><span data-stu-id="760e8-163">Ensure that log rotation and separation are in place</span></span>

| <span data-ttu-id="760e8-164">Title</span><span class="sxs-lookup"><span data-stu-id="760e8-164">Title</span></span>                   | <span data-ttu-id="760e8-165">Details</span><span class="sxs-lookup"><span data-stu-id="760e8-165">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="760e8-166">Component</span><span class="sxs-lookup"><span data-stu-id="760e8-166">Component</span></span>               | <span data-ttu-id="760e8-167">Web Application</span><span class="sxs-lookup"><span data-stu-id="760e8-167">Web Application</span></span> | 
| <span data-ttu-id="760e8-168">SDL Phase</span><span class="sxs-lookup"><span data-stu-id="760e8-168">SDL Phase</span></span>               | <span data-ttu-id="760e8-169">Build</span><span class="sxs-lookup"><span data-stu-id="760e8-169">Build</span></span> |  
| <span data-ttu-id="760e8-170">Applicable Technologies</span><span class="sxs-lookup"><span data-stu-id="760e8-170">Applicable Technologies</span></span> | <span data-ttu-id="760e8-171">Generic</span><span class="sxs-lookup"><span data-stu-id="760e8-171">Generic</span></span> |
| <span data-ttu-id="760e8-172">Attributes</span><span class="sxs-lookup"><span data-stu-id="760e8-172">Attributes</span></span>              | <span data-ttu-id="760e8-173">N/A</span><span class="sxs-lookup"><span data-stu-id="760e8-173">N/A</span></span>  |
| <span data-ttu-id="760e8-174">References</span><span class="sxs-lookup"><span data-stu-id="760e8-174">References</span></span>              | <span data-ttu-id="760e8-175">N/A</span><span class="sxs-lookup"><span data-stu-id="760e8-175">N/A</span></span>  |
| <span data-ttu-id="760e8-176">Steps</span><span class="sxs-lookup"><span data-stu-id="760e8-176">Steps</span></span>                   | <p><span data-ttu-id="760e8-177">Log rotation is an automated process used in system administration in which dated log files are archived.</span><span class="sxs-lookup"><span data-stu-id="760e8-177">Log rotation is an automated process used in system administration in which dated log files are archived.</span></span> <span data-ttu-id="760e8-178">Servers which run large applications often log every request: in the face of bulky logs, log rotation is a way to limit the total size of the logs while still allowing analysis of recent events.</span><span class="sxs-lookup"><span data-stu-id="760e8-178">Servers which run large applications often log every request: in the face of bulky logs, log rotation is a way to limit the total size of the logs while still allowing analysis of recent events.</span></span> </p><p><span data-ttu-id="760e8-179">Log separation basically means that you have to store your log files on a different partition as where your OS/application is running on in order to avert a Denial of service attack or the downgrading of your application its performance</span><span class="sxs-lookup"><span data-stu-id="760e8-179">Log separation basically means that you have to store your log files on a different partition as where your OS/application is running on in order to avert a Denial of service attack or the downgrading of your application its performance</span></span></p>|

## <a id="log-sensitive-data"></a><span data-ttu-id="760e8-180">Ensure that the application does not log sensitive user data</span><span class="sxs-lookup"><span data-stu-id="760e8-180">Ensure that the application does not log sensitive user data</span></span>

| <span data-ttu-id="760e8-181">Title</span><span class="sxs-lookup"><span data-stu-id="760e8-181">Title</span></span>                   | <span data-ttu-id="760e8-182">Details</span><span class="sxs-lookup"><span data-stu-id="760e8-182">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="760e8-183">Component</span><span class="sxs-lookup"><span data-stu-id="760e8-183">Component</span></span>               | <span data-ttu-id="760e8-184">Web Application</span><span class="sxs-lookup"><span data-stu-id="760e8-184">Web Application</span></span> | 
| <span data-ttu-id="760e8-185">SDL Phase</span><span class="sxs-lookup"><span data-stu-id="760e8-185">SDL Phase</span></span>               | <span data-ttu-id="760e8-186">Build</span><span class="sxs-lookup"><span data-stu-id="760e8-186">Build</span></span> |  
| <span data-ttu-id="760e8-187">Applicable Technologies</span><span class="sxs-lookup"><span data-stu-id="760e8-187">Applicable Technologies</span></span> | <span data-ttu-id="760e8-188">Generic</span><span class="sxs-lookup"><span data-stu-id="760e8-188">Generic</span></span> |
| <span data-ttu-id="760e8-189">Attributes</span><span class="sxs-lookup"><span data-stu-id="760e8-189">Attributes</span></span>              | <span data-ttu-id="760e8-190">N/A</span><span class="sxs-lookup"><span data-stu-id="760e8-190">N/A</span></span>  |
| <span data-ttu-id="760e8-191">References</span><span class="sxs-lookup"><span data-stu-id="760e8-191">References</span></span>              | <span data-ttu-id="760e8-192">N/A</span><span class="sxs-lookup"><span data-stu-id="760e8-192">N/A</span></span>  |
| <span data-ttu-id="760e8-193">Steps</span><span class="sxs-lookup"><span data-stu-id="760e8-193">Steps</span></span>                   | <p><span data-ttu-id="760e8-194">Check that you do not log any sensitive data that a user submits to your site.</span><span class="sxs-lookup"><span data-stu-id="760e8-194">Check that you do not log any sensitive data that a user submits to your site.</span></span> <span data-ttu-id="760e8-195">Check for intentional logging as well as side effects caused by design issues.</span><span class="sxs-lookup"><span data-stu-id="760e8-195">Check for intentional logging as well as side effects caused by design issues.</span></span> <span data-ttu-id="760e8-196">Examples of sensitive data include:</span><span class="sxs-lookup"><span data-stu-id="760e8-196">Examples of sensitive data include:</span></span></p><ul><li><span data-ttu-id="760e8-197">User Credentials</span><span class="sxs-lookup"><span data-stu-id="760e8-197">User Credentials</span></span></li><li><span data-ttu-id="760e8-198">Social Security number or other identifying information</span><span class="sxs-lookup"><span data-stu-id="760e8-198">Social Security number or other identifying information</span></span></li><li><span data-ttu-id="760e8-199">Credit card numbers or other financial information</span><span class="sxs-lookup"><span data-stu-id="760e8-199">Credit card numbers or other financial information</span></span></li><li><span data-ttu-id="760e8-200">Health information</span><span class="sxs-lookup"><span data-stu-id="760e8-200">Health information</span></span></li><li><span data-ttu-id="760e8-201">Private keys or other data that could be used to decrypt encrypted information</span><span class="sxs-lookup"><span data-stu-id="760e8-201">Private keys or other data that could be used to decrypt encrypted information</span></span></li><li><span data-ttu-id="760e8-202">System or application information that can be used to more effectively attack the application</span><span class="sxs-lookup"><span data-stu-id="760e8-202">System or application information that can be used to more effectively attack the application</span></span></li></ul>|

## <a id="log-restricted-access"></a><span data-ttu-id="760e8-203">Ensure that Audit and Log Files have Restricted Access</span><span class="sxs-lookup"><span data-stu-id="760e8-203">Ensure that Audit and Log Files have Restricted Access</span></span>

| <span data-ttu-id="760e8-204">Title</span><span class="sxs-lookup"><span data-stu-id="760e8-204">Title</span></span>                   | <span data-ttu-id="760e8-205">Details</span><span class="sxs-lookup"><span data-stu-id="760e8-205">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="760e8-206">Component</span><span class="sxs-lookup"><span data-stu-id="760e8-206">Component</span></span>               | <span data-ttu-id="760e8-207">Web Application</span><span class="sxs-lookup"><span data-stu-id="760e8-207">Web Application</span></span> | 
| <span data-ttu-id="760e8-208">SDL Phase</span><span class="sxs-lookup"><span data-stu-id="760e8-208">SDL Phase</span></span>               | <span data-ttu-id="760e8-209">Build</span><span class="sxs-lookup"><span data-stu-id="760e8-209">Build</span></span> |  
| <span data-ttu-id="760e8-210">Applicable Technologies</span><span class="sxs-lookup"><span data-stu-id="760e8-210">Applicable Technologies</span></span> | <span data-ttu-id="760e8-211">Generic</span><span class="sxs-lookup"><span data-stu-id="760e8-211">Generic</span></span> |
| <span data-ttu-id="760e8-212">Attributes</span><span class="sxs-lookup"><span data-stu-id="760e8-212">Attributes</span></span>              | <span data-ttu-id="760e8-213">N/A</span><span class="sxs-lookup"><span data-stu-id="760e8-213">N/A</span></span>  |
| <span data-ttu-id="760e8-214">References</span><span class="sxs-lookup"><span data-stu-id="760e8-214">References</span></span>              | <span data-ttu-id="760e8-215">N/A</span><span class="sxs-lookup"><span data-stu-id="760e8-215">N/A</span></span>  |
| <span data-ttu-id="760e8-216">Steps</span><span class="sxs-lookup"><span data-stu-id="760e8-216">Steps</span></span>                   | <p><span data-ttu-id="760e8-217">Check to ensure access rights to log files are appropriately set.</span><span class="sxs-lookup"><span data-stu-id="760e8-217">Check to ensure access rights to log files are appropriately set.</span></span> <span data-ttu-id="760e8-218">Application accounts should have write-only access and operators and support personnel should have read-only access as needed.</span><span class="sxs-lookup"><span data-stu-id="760e8-218">Application accounts should have write-only access and operators and support personnel should have read-only access as needed.</span></span></p><p><span data-ttu-id="760e8-219">Administrators accounts are the only accounts which should have full access.</span><span class="sxs-lookup"><span data-stu-id="760e8-219">Administrators accounts are the only accounts which should have full access.</span></span> <span data-ttu-id="760e8-220">Check Windows ACL on log files to ensure they are properly restricted:</span><span class="sxs-lookup"><span data-stu-id="760e8-220">Check Windows ACL on log files to ensure they are properly restricted:</span></span></p><ul><li><span data-ttu-id="760e8-221">Application accounts should have write-only access</span><span class="sxs-lookup"><span data-stu-id="760e8-221">Application accounts should have write-only access</span></span></li><li><span data-ttu-id="760e8-222">Operators and support personnel should have read-only access as needed</span><span class="sxs-lookup"><span data-stu-id="760e8-222">Operators and support personnel should have read-only access as needed</span></span></li><li><span data-ttu-id="760e8-223">Administrators are the only accounts that should have full access</span><span class="sxs-lookup"><span data-stu-id="760e8-223">Administrators are the only accounts that should have full access</span></span></li></ul>|

## <a id="user-management"></a><span data-ttu-id="760e8-224">Ensure that User Management Events are Logged</span><span class="sxs-lookup"><span data-stu-id="760e8-224">Ensure that User Management Events are Logged</span></span>

| <span data-ttu-id="760e8-225">Title</span><span class="sxs-lookup"><span data-stu-id="760e8-225">Title</span></span>                   | <span data-ttu-id="760e8-226">Details</span><span class="sxs-lookup"><span data-stu-id="760e8-226">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="760e8-227">Component</span><span class="sxs-lookup"><span data-stu-id="760e8-227">Component</span></span>               | <span data-ttu-id="760e8-228">Web Application</span><span class="sxs-lookup"><span data-stu-id="760e8-228">Web Application</span></span> | 
| <span data-ttu-id="760e8-229">SDL Phase</span><span class="sxs-lookup"><span data-stu-id="760e8-229">SDL Phase</span></span>               | <span data-ttu-id="760e8-230">Build</span><span class="sxs-lookup"><span data-stu-id="760e8-230">Build</span></span> |  
| <span data-ttu-id="760e8-231">Applicable Technologies</span><span class="sxs-lookup"><span data-stu-id="760e8-231">Applicable Technologies</span></span> | <span data-ttu-id="760e8-232">Generic</span><span class="sxs-lookup"><span data-stu-id="760e8-232">Generic</span></span> |
| <span data-ttu-id="760e8-233">Attributes</span><span class="sxs-lookup"><span data-stu-id="760e8-233">Attributes</span></span>              | <span data-ttu-id="760e8-234">N/A</span><span class="sxs-lookup"><span data-stu-id="760e8-234">N/A</span></span>  |
| <span data-ttu-id="760e8-235">References</span><span class="sxs-lookup"><span data-stu-id="760e8-235">References</span></span>              | <span data-ttu-id="760e8-236">N/A</span><span class="sxs-lookup"><span data-stu-id="760e8-236">N/A</span></span>  |
| <span data-ttu-id="760e8-237">Steps</span><span class="sxs-lookup"><span data-stu-id="760e8-237">Steps</span></span>                   | <p><span data-ttu-id="760e8-238">Ensure that the application monitors user management events such as successful and failed user logins, password resets, password changes, account lockout, user registration.</span><span class="sxs-lookup"><span data-stu-id="760e8-238">Ensure that the application monitors user management events such as successful and failed user logins, password resets, password changes, account lockout, user registration.</span></span> <span data-ttu-id="760e8-239">Doing this helps to detect and react to potentially suspicious behavior.</span><span class="sxs-lookup"><span data-stu-id="760e8-239">Doing this helps to detect and react to potentially suspicious behavior.</span></span> <span data-ttu-id="760e8-240">It also enables to gather operations data; for example, to track who is accessing the application</span><span class="sxs-lookup"><span data-stu-id="760e8-240">It also enables to gather operations data; for example, to track who is accessing the application</span></span></p>|

## <a id="inbuilt-defenses"></a><span data-ttu-id="760e8-241">Ensure that the system has inbuilt defenses against misuse</span><span class="sxs-lookup"><span data-stu-id="760e8-241">Ensure that the system has inbuilt defenses against misuse</span></span>

| <span data-ttu-id="760e8-242">Title</span><span class="sxs-lookup"><span data-stu-id="760e8-242">Title</span></span>                   | <span data-ttu-id="760e8-243">Details</span><span class="sxs-lookup"><span data-stu-id="760e8-243">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="760e8-244">Component</span><span class="sxs-lookup"><span data-stu-id="760e8-244">Component</span></span>               | <span data-ttu-id="760e8-245">Web Application</span><span class="sxs-lookup"><span data-stu-id="760e8-245">Web Application</span></span> | 
| <span data-ttu-id="760e8-246">SDL Phase</span><span class="sxs-lookup"><span data-stu-id="760e8-246">SDL Phase</span></span>               | <span data-ttu-id="760e8-247">Build</span><span class="sxs-lookup"><span data-stu-id="760e8-247">Build</span></span> |  
| <span data-ttu-id="760e8-248">Applicable Technologies</span><span class="sxs-lookup"><span data-stu-id="760e8-248">Applicable Technologies</span></span> | <span data-ttu-id="760e8-249">Generic</span><span class="sxs-lookup"><span data-stu-id="760e8-249">Generic</span></span> |
| <span data-ttu-id="760e8-250">Attributes</span><span class="sxs-lookup"><span data-stu-id="760e8-250">Attributes</span></span>              | <span data-ttu-id="760e8-251">N/A</span><span class="sxs-lookup"><span data-stu-id="760e8-251">N/A</span></span>  |
| <span data-ttu-id="760e8-252">References</span><span class="sxs-lookup"><span data-stu-id="760e8-252">References</span></span>              | <span data-ttu-id="760e8-253">N/A</span><span class="sxs-lookup"><span data-stu-id="760e8-253">N/A</span></span>  |
| <span data-ttu-id="760e8-254">Steps</span><span class="sxs-lookup"><span data-stu-id="760e8-254">Steps</span></span>                   | <p><span data-ttu-id="760e8-255">Controls should be in place which throw security exception in case of application misuse.</span><span class="sxs-lookup"><span data-stu-id="760e8-255">Controls should be in place which throw security exception in case of application misuse.</span></span> <span data-ttu-id="760e8-256">E.g., If input validation is in place and an attacker attempts to inject malicious code that does not match the regex, a security exception can be thrown which can be an indicative of system misuse</span><span class="sxs-lookup"><span data-stu-id="760e8-256">E.g., If input validation is in place and an attacker attempts to inject malicious code that does not match the regex, a security exception can be thrown which can be an indicative of system misuse</span></span></p><p><span data-ttu-id="760e8-257">For example, it is recommended to have security exceptions logged and actions taken for the following issues:</span><span class="sxs-lookup"><span data-stu-id="760e8-257">For example, it is recommended to have security exceptions logged and actions taken for the following issues:</span></span></p><ul><li><span data-ttu-id="760e8-258">Input validation</span><span class="sxs-lookup"><span data-stu-id="760e8-258">Input validation</span></span></li><li><span data-ttu-id="760e8-259">CSRF violations</span><span class="sxs-lookup"><span data-stu-id="760e8-259">CSRF violations</span></span></li><li><span data-ttu-id="760e8-260">Brute force (upper limit for number of requests per user per resource)</span><span class="sxs-lookup"><span data-stu-id="760e8-260">Brute force (upper limit for number of requests per user per resource)</span></span></li><li><span data-ttu-id="760e8-261">File upload violations</span><span class="sxs-lookup"><span data-stu-id="760e8-261">File upload violations</span></span></li><ul>|

## <a id="diagnostics-logging"></a><span data-ttu-id="760e8-262">Enable diagnostics logging for web apps in Azure App Service</span><span class="sxs-lookup"><span data-stu-id="760e8-262">Enable diagnostics logging for web apps in Azure App Service</span></span>

| <span data-ttu-id="760e8-263">Title</span><span class="sxs-lookup"><span data-stu-id="760e8-263">Title</span></span>                   | <span data-ttu-id="760e8-264">Details</span><span class="sxs-lookup"><span data-stu-id="760e8-264">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="760e8-265">Component</span><span class="sxs-lookup"><span data-stu-id="760e8-265">Component</span></span>               | <span data-ttu-id="760e8-266">Web Application</span><span class="sxs-lookup"><span data-stu-id="760e8-266">Web Application</span></span> | 
| <span data-ttu-id="760e8-267">SDL Phase</span><span class="sxs-lookup"><span data-stu-id="760e8-267">SDL Phase</span></span>               | <span data-ttu-id="760e8-268">Build</span><span class="sxs-lookup"><span data-stu-id="760e8-268">Build</span></span> |  
| <span data-ttu-id="760e8-269">Applicable Technologies</span><span class="sxs-lookup"><span data-stu-id="760e8-269">Applicable Technologies</span></span> | <span data-ttu-id="760e8-270">Generic</span><span class="sxs-lookup"><span data-stu-id="760e8-270">Generic</span></span> |
| <span data-ttu-id="760e8-271">Attributes</span><span class="sxs-lookup"><span data-stu-id="760e8-271">Attributes</span></span>              | <span data-ttu-id="760e8-272">EnvironmentType - Azure</span><span class="sxs-lookup"><span data-stu-id="760e8-272">EnvironmentType - Azure</span></span> |
| <span data-ttu-id="760e8-273">References</span><span class="sxs-lookup"><span data-stu-id="760e8-273">References</span></span>              | <span data-ttu-id="760e8-274">N/A</span><span class="sxs-lookup"><span data-stu-id="760e8-274">N/A</span></span>  |
| <span data-ttu-id="760e8-275">Steps</span><span class="sxs-lookup"><span data-stu-id="760e8-275">Steps</span></span> | <p><span data-ttu-id="760e8-276">Azure provides built-in diagnostics to assist with debugging an App Service web app.</span><span class="sxs-lookup"><span data-stu-id="760e8-276">Azure provides built-in diagnostics to assist with debugging an App Service web app.</span></span> <span data-ttu-id="760e8-277">It also applies to API apps and mobile apps.</span><span class="sxs-lookup"><span data-stu-id="760e8-277">It also applies to API apps and mobile apps.</span></span> <span data-ttu-id="760e8-278">App Service web apps provide diagnostic functionality for logging information from both the web server and the web application.</span><span class="sxs-lookup"><span data-stu-id="760e8-278">App Service web apps provide diagnostic functionality for logging information from both the web server and the web application.</span></span></p><p><span data-ttu-id="760e8-279">These are logically separated into web server diagnostics and application diagnostics</span><span class="sxs-lookup"><span data-stu-id="760e8-279">These are logically separated into web server diagnostics and application diagnostics</span></span></p>|

## <a id="identify-sensitive-entities"></a><span data-ttu-id="760e8-280">Ensure that login auditing is enabled on SQL Server</span><span class="sxs-lookup"><span data-stu-id="760e8-280">Ensure that login auditing is enabled on SQL Server</span></span>

| <span data-ttu-id="760e8-281">Title</span><span class="sxs-lookup"><span data-stu-id="760e8-281">Title</span></span>                   | <span data-ttu-id="760e8-282">Details</span><span class="sxs-lookup"><span data-stu-id="760e8-282">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="760e8-283">Component</span><span class="sxs-lookup"><span data-stu-id="760e8-283">Component</span></span>               | <span data-ttu-id="760e8-284">Database</span><span class="sxs-lookup"><span data-stu-id="760e8-284">Database</span></span> | 
| <span data-ttu-id="760e8-285">SDL Phase</span><span class="sxs-lookup"><span data-stu-id="760e8-285">SDL Phase</span></span>               | <span data-ttu-id="760e8-286">Build</span><span class="sxs-lookup"><span data-stu-id="760e8-286">Build</span></span> |  
| <span data-ttu-id="760e8-287">Applicable Technologies</span><span class="sxs-lookup"><span data-stu-id="760e8-287">Applicable Technologies</span></span> | <span data-ttu-id="760e8-288">Generic</span><span class="sxs-lookup"><span data-stu-id="760e8-288">Generic</span></span> |
| <span data-ttu-id="760e8-289">Attributes</span><span class="sxs-lookup"><span data-stu-id="760e8-289">Attributes</span></span>              | <span data-ttu-id="760e8-290">N/A</span><span class="sxs-lookup"><span data-stu-id="760e8-290">N/A</span></span>  |
| <span data-ttu-id="760e8-291">References</span><span class="sxs-lookup"><span data-stu-id="760e8-291">References</span></span>              | [<span data-ttu-id="760e8-292">Configure Login Auditing</span><span class="sxs-lookup"><span data-stu-id="760e8-292">Configure Login Auditing</span></span>](https://msdn.microsoft.com/library/ms175850.aspx) |
| <span data-ttu-id="760e8-293">Steps</span><span class="sxs-lookup"><span data-stu-id="760e8-293">Steps</span></span> | <p><span data-ttu-id="760e8-294">Database Server login auditing must be enabled to detect/confirm password guessing attacks.</span><span class="sxs-lookup"><span data-stu-id="760e8-294">Database Server login auditing must be enabled to detect/confirm password guessing attacks.</span></span> <span data-ttu-id="760e8-295">It is important to capture failed login attempts.</span><span class="sxs-lookup"><span data-stu-id="760e8-295">It is important to capture failed login attempts.</span></span> <span data-ttu-id="760e8-296">Capturing both successful and failed login attempts provides additional benefit during forensic investigations</span><span class="sxs-lookup"><span data-stu-id="760e8-296">Capturing both successful and failed login attempts provides additional benefit during forensic investigations</span></span></p>|

## <a id="threat-detection"></a><span data-ttu-id="760e8-297">Enable Threat detection on Azure SQL</span><span class="sxs-lookup"><span data-stu-id="760e8-297">Enable Threat detection on Azure SQL</span></span>

| <span data-ttu-id="760e8-298">Title</span><span class="sxs-lookup"><span data-stu-id="760e8-298">Title</span></span>                   | <span data-ttu-id="760e8-299">Details</span><span class="sxs-lookup"><span data-stu-id="760e8-299">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="760e8-300">Component</span><span class="sxs-lookup"><span data-stu-id="760e8-300">Component</span></span>               | <span data-ttu-id="760e8-301">Database</span><span class="sxs-lookup"><span data-stu-id="760e8-301">Database</span></span> | 
| <span data-ttu-id="760e8-302">SDL Phase</span><span class="sxs-lookup"><span data-stu-id="760e8-302">SDL Phase</span></span>               | <span data-ttu-id="760e8-303">Build</span><span class="sxs-lookup"><span data-stu-id="760e8-303">Build</span></span> |  
| <span data-ttu-id="760e8-304">Applicable Technologies</span><span class="sxs-lookup"><span data-stu-id="760e8-304">Applicable Technologies</span></span> | <span data-ttu-id="760e8-305">SQL Azure</span><span class="sxs-lookup"><span data-stu-id="760e8-305">SQL Azure</span></span> |
| <span data-ttu-id="760e8-306">Attributes</span><span class="sxs-lookup"><span data-stu-id="760e8-306">Attributes</span></span>              | <span data-ttu-id="760e8-307">SQL Version - V12</span><span class="sxs-lookup"><span data-stu-id="760e8-307">SQL Version - V12</span></span> |
| <span data-ttu-id="760e8-308">References</span><span class="sxs-lookup"><span data-stu-id="760e8-308">References</span></span>              | [<span data-ttu-id="760e8-309">Get Started with SQL Database Threat Detection</span><span class="sxs-lookup"><span data-stu-id="760e8-309">Get Started with SQL Database Threat Detection</span></span>](https://azure.microsoft.com/documentation/articles/sql-database-threat-detection-get-started/)|
| <span data-ttu-id="760e8-310">Steps</span><span class="sxs-lookup"><span data-stu-id="760e8-310">Steps</span></span> |<p><span data-ttu-id="760e8-311">Threat Detection detects anomalous database activities indicating potential security threats to the database.</span><span class="sxs-lookup"><span data-stu-id="760e8-311">Threat Detection detects anomalous database activities indicating potential security threats to the database.</span></span> <span data-ttu-id="760e8-312">It provides a new layer of security, which enables customers to detect and respond to potential threats as they occur by providing security alerts on anomalous activities.</span><span class="sxs-lookup"><span data-stu-id="760e8-312">It provides a new layer of security, which enables customers to detect and respond to potential threats as they occur by providing security alerts on anomalous activities.</span></span></p><p><span data-ttu-id="760e8-313">Users can explore the suspicious events using Azure SQL Database Auditing to determine if they result from an attempt to access, breach or exploit data in the database.</span><span class="sxs-lookup"><span data-stu-id="760e8-313">Users can explore the suspicious events using Azure SQL Database Auditing to determine if they result from an attempt to access, breach or exploit data in the database.</span></span></p><p><span data-ttu-id="760e8-314">Threat Detection makes it simple to address potential threats to the database without the need to be a security expert or manage advanced security monitoring systems</span><span class="sxs-lookup"><span data-stu-id="760e8-314">Threat Detection makes it simple to address potential threats to the database without the need to be a security expert or manage advanced security monitoring systems</span></span></p>|

## <a id="analytics"></a><span data-ttu-id="760e8-315">Use Azure Storage Analytics to audit access of Azure Storage</span><span class="sxs-lookup"><span data-stu-id="760e8-315">Use Azure Storage Analytics to audit access of Azure Storage</span></span>

| <span data-ttu-id="760e8-316">Title</span><span class="sxs-lookup"><span data-stu-id="760e8-316">Title</span></span>                   | <span data-ttu-id="760e8-317">Details</span><span class="sxs-lookup"><span data-stu-id="760e8-317">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="760e8-318">Component</span><span class="sxs-lookup"><span data-stu-id="760e8-318">Component</span></span>               | <span data-ttu-id="760e8-319">Azure Storage</span><span class="sxs-lookup"><span data-stu-id="760e8-319">Azure Storage</span></span> | 
| <span data-ttu-id="760e8-320">SDL Phase</span><span class="sxs-lookup"><span data-stu-id="760e8-320">SDL Phase</span></span>               | <span data-ttu-id="760e8-321">Deployment</span><span class="sxs-lookup"><span data-stu-id="760e8-321">Deployment</span></span> |  
| <span data-ttu-id="760e8-322">Applicable Technologies</span><span class="sxs-lookup"><span data-stu-id="760e8-322">Applicable Technologies</span></span> | <span data-ttu-id="760e8-323">Generic</span><span class="sxs-lookup"><span data-stu-id="760e8-323">Generic</span></span> |
| <span data-ttu-id="760e8-324">Attributes</span><span class="sxs-lookup"><span data-stu-id="760e8-324">Attributes</span></span>              | <span data-ttu-id="760e8-325">N/A</span><span class="sxs-lookup"><span data-stu-id="760e8-325">N/A</span></span> |
| <span data-ttu-id="760e8-326">References</span><span class="sxs-lookup"><span data-stu-id="760e8-326">References</span></span>              | [<span data-ttu-id="760e8-327">Using Storage Analytics to monitor authorization type</span><span class="sxs-lookup"><span data-stu-id="760e8-327">Using Storage Analytics to monitor authorization type</span></span>](https://azure.microsoft.com/documentation/articles/storage-security-guide/#storage-analytics) |
| <span data-ttu-id="760e8-328">Steps</span><span class="sxs-lookup"><span data-stu-id="760e8-328">Steps</span></span> | <p><span data-ttu-id="760e8-329">For each storage account, one can enable Azure Storage Analytics to perform logging and store metrics data.</span><span class="sxs-lookup"><span data-stu-id="760e8-329">For each storage account, one can enable Azure Storage Analytics to perform logging and store metrics data.</span></span> <span data-ttu-id="760e8-330">The storage analytics logs provide important information such as authentication method used by someone when they access storage.</span><span class="sxs-lookup"><span data-stu-id="760e8-330">The storage analytics logs provide important information such as authentication method used by someone when they access storage.</span></span></p><p><span data-ttu-id="760e8-331">This can be really helpful if you are tightly guarding access to storage.</span><span class="sxs-lookup"><span data-stu-id="760e8-331">This can be really helpful if you are tightly guarding access to storage.</span></span> <span data-ttu-id="760e8-332">For example, in Blob Storage you can set all of the containers to private and implement the use of an SAS service throughout your applications.</span><span class="sxs-lookup"><span data-stu-id="760e8-332">For example, in Blob Storage you can set all of the containers to private and implement the use of an SAS service throughout your applications.</span></span> <span data-ttu-id="760e8-333">Then you can check the logs regularly to see if your blobs are accessed using the storage account keys, which may indicate a breach of security, or if the blobs are public but they shouldn’t be.</span><span class="sxs-lookup"><span data-stu-id="760e8-333">Then you can check the logs regularly to see if your blobs are accessed using the storage account keys, which may indicate a breach of security, or if the blobs are public but they shouldn’t be.</span></span></p>|

## <a id="sufficient-logging"></a><span data-ttu-id="760e8-334">Implement sufficient Logging</span><span class="sxs-lookup"><span data-stu-id="760e8-334">Implement sufficient Logging</span></span>

| <span data-ttu-id="760e8-335">Title</span><span class="sxs-lookup"><span data-stu-id="760e8-335">Title</span></span>                   | <span data-ttu-id="760e8-336">Details</span><span class="sxs-lookup"><span data-stu-id="760e8-336">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="760e8-337">Component</span><span class="sxs-lookup"><span data-stu-id="760e8-337">Component</span></span>               | <span data-ttu-id="760e8-338">WCF</span><span class="sxs-lookup"><span data-stu-id="760e8-338">WCF</span></span> | 
| <span data-ttu-id="760e8-339">SDL Phase</span><span class="sxs-lookup"><span data-stu-id="760e8-339">SDL Phase</span></span>               | <span data-ttu-id="760e8-340">Build</span><span class="sxs-lookup"><span data-stu-id="760e8-340">Build</span></span> |  
| <span data-ttu-id="760e8-341">Applicable Technologies</span><span class="sxs-lookup"><span data-stu-id="760e8-341">Applicable Technologies</span></span> | <span data-ttu-id="760e8-342">.NET Framework</span><span class="sxs-lookup"><span data-stu-id="760e8-342">.NET Framework</span></span> |
| <span data-ttu-id="760e8-343">Attributes</span><span class="sxs-lookup"><span data-stu-id="760e8-343">Attributes</span></span>              | <span data-ttu-id="760e8-344">N/A</span><span class="sxs-lookup"><span data-stu-id="760e8-344">N/A</span></span>  |
| <span data-ttu-id="760e8-345">References</span><span class="sxs-lookup"><span data-stu-id="760e8-345">References</span></span>              | <span data-ttu-id="760e8-346">[MSDN](https://msdn.microsoft.com/library/ff648500.aspx), [Fortify Kingdom](https://vulncat.fortify.com/en/vulncat/index.html)</span><span class="sxs-lookup"><span data-stu-id="760e8-346">[MSDN](https://msdn.microsoft.com/library/ff648500.aspx), [Fortify Kingdom](https://vulncat.fortify.com/en/vulncat/index.html)</span></span> |
| <span data-ttu-id="760e8-347">Steps</span><span class="sxs-lookup"><span data-stu-id="760e8-347">Steps</span></span> | <p><span data-ttu-id="760e8-348">The lack of a proper audit trail after a security incident can hamper forensic efforts.</span><span class="sxs-lookup"><span data-stu-id="760e8-348">The lack of a proper audit trail after a security incident can hamper forensic efforts.</span></span> <span data-ttu-id="760e8-349">Windows Communication Foundation (WCF) offers the ability to log successful and/or failed authentication attempts.</span><span class="sxs-lookup"><span data-stu-id="760e8-349">Windows Communication Foundation (WCF) offers the ability to log successful and/or failed authentication attempts.</span></span></p><p><span data-ttu-id="760e8-350">Logging failed authentication attempts can warn administrators of potential brute-force attacks.</span><span class="sxs-lookup"><span data-stu-id="760e8-350">Logging failed authentication attempts can warn administrators of potential brute-force attacks.</span></span> <span data-ttu-id="760e8-351">Similarly, logging successful authentication events can provide a useful audit trail when a legitimate account is compromised.</span><span class="sxs-lookup"><span data-stu-id="760e8-351">Similarly, logging successful authentication events can provide a useful audit trail when a legitimate account is compromised.</span></span> <span data-ttu-id="760e8-352">Enable WCF's service security audit feature</span><span class="sxs-lookup"><span data-stu-id="760e8-352">Enable WCF's service security audit feature</span></span> |

### <a name="example"></a><span data-ttu-id="760e8-353">Example</span><span class="sxs-lookup"><span data-stu-id="760e8-353">Example</span></span>
<span data-ttu-id="760e8-354">The following is an example configuration with auditing enabled</span><span class="sxs-lookup"><span data-stu-id="760e8-354">The following is an example configuration with auditing enabled</span></span>
```
<system.serviceModel>
    <behaviors>
        <serviceBehaviors>
            <behavior name=""NewBehavior"">
                <serviceSecurityAudit auditLogLocation=""Default""
                suppressAuditFailure=""false"" 
                serviceAuthorizationAuditLevel=""SuccessAndFailure""
                messageAuthenticationAuditLevel=""SuccessAndFailure"" />
                ...
            </behavior>
        </servicebehaviors>
    </behaviors>
</system.serviceModel>
```

## <a id="audit-failure-handling"></a><span data-ttu-id="760e8-355">Implement sufficient Audit Failure Handling</span><span class="sxs-lookup"><span data-stu-id="760e8-355">Implement sufficient Audit Failure Handling</span></span>

| <span data-ttu-id="760e8-356">Title</span><span class="sxs-lookup"><span data-stu-id="760e8-356">Title</span></span>                   | <span data-ttu-id="760e8-357">Details</span><span class="sxs-lookup"><span data-stu-id="760e8-357">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="760e8-358">Component</span><span class="sxs-lookup"><span data-stu-id="760e8-358">Component</span></span>               | <span data-ttu-id="760e8-359">WCF</span><span class="sxs-lookup"><span data-stu-id="760e8-359">WCF</span></span> | 
| <span data-ttu-id="760e8-360">SDL Phase</span><span class="sxs-lookup"><span data-stu-id="760e8-360">SDL Phase</span></span>               | <span data-ttu-id="760e8-361">Build</span><span class="sxs-lookup"><span data-stu-id="760e8-361">Build</span></span> |  
| <span data-ttu-id="760e8-362">Applicable Technologies</span><span class="sxs-lookup"><span data-stu-id="760e8-362">Applicable Technologies</span></span> | <span data-ttu-id="760e8-363">.NET Framework</span><span class="sxs-lookup"><span data-stu-id="760e8-363">.NET Framework</span></span> |
| <span data-ttu-id="760e8-364">Attributes</span><span class="sxs-lookup"><span data-stu-id="760e8-364">Attributes</span></span>              | <span data-ttu-id="760e8-365">N/A</span><span class="sxs-lookup"><span data-stu-id="760e8-365">N/A</span></span>  |
| <span data-ttu-id="760e8-366">References</span><span class="sxs-lookup"><span data-stu-id="760e8-366">References</span></span>              | <span data-ttu-id="760e8-367">[MSDN](https://msdn.microsoft.com/library/ff648500.aspx), [Fortify Kingdom](https://vulncat.fortify.com/en/vulncat/index.html)</span><span class="sxs-lookup"><span data-stu-id="760e8-367">[MSDN](https://msdn.microsoft.com/library/ff648500.aspx), [Fortify Kingdom](https://vulncat.fortify.com/en/vulncat/index.html)</span></span> |
| <span data-ttu-id="760e8-368">Steps</span><span class="sxs-lookup"><span data-stu-id="760e8-368">Steps</span></span> | <p><span data-ttu-id="760e8-369">Developed solution is configured not to generate an exception when it fails to write to an audit log.</span><span class="sxs-lookup"><span data-stu-id="760e8-369">Developed solution is configured not to generate an exception when it fails to write to an audit log.</span></span> <span data-ttu-id="760e8-370">If WCF is configured not to throw an exception when it is unable to write to an audit log, the program will not be notified of the failure and auditing of critical security events may not occur.</span><span class="sxs-lookup"><span data-stu-id="760e8-370">If WCF is configured not to throw an exception when it is unable to write to an audit log, the program will not be notified of the failure and auditing of critical security events may not occur.</span></span></p>|

### <a name="example"></a><span data-ttu-id="760e8-371">Example</span><span class="sxs-lookup"><span data-stu-id="760e8-371">Example</span></span>
<span data-ttu-id="760e8-372">The `<behavior/>` element of the WCF configuration file below instructs WCF to not notify the application when WCF fails to write to an audit log.</span><span class="sxs-lookup"><span data-stu-id="760e8-372">The `<behavior/>` element of the WCF configuration file below instructs WCF to not notify the application when WCF fails to write to an audit log.</span></span>
````
<behaviors>
    <serviceBehaviors>
        <behavior name="NewBehavior">
            <serviceSecurityAudit auditLogLocation="Application"
            suppressAuditFailure="true"
            serviceAuthorizationAuditLevel="Success"
            messageAuthenticationAuditLevel="Success" />
        </behavior>
    </serviceBehaviors>
</behaviors>
````
<span data-ttu-id="760e8-373">Configure WCF to notify the program whenever it is unable to write to an audit log.</span><span class="sxs-lookup"><span data-stu-id="760e8-373">Configure WCF to notify the program whenever it is unable to write to an audit log.</span></span> <span data-ttu-id="760e8-374">The program should have an alternative notification scheme in place to alert the organization that audit trails are not being maintained.</span><span class="sxs-lookup"><span data-stu-id="760e8-374">The program should have an alternative notification scheme in place to alert the organization that audit trails are not being maintained.</span></span> 

## <a id="logging-web-api"></a><span data-ttu-id="760e8-375">Ensure that auditing and logging is enforced on Web API</span><span class="sxs-lookup"><span data-stu-id="760e8-375">Ensure that auditing and logging is enforced on Web API</span></span>

| <span data-ttu-id="760e8-376">Title</span><span class="sxs-lookup"><span data-stu-id="760e8-376">Title</span></span>                   | <span data-ttu-id="760e8-377">Details</span><span class="sxs-lookup"><span data-stu-id="760e8-377">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="760e8-378">Component</span><span class="sxs-lookup"><span data-stu-id="760e8-378">Component</span></span>               | <span data-ttu-id="760e8-379">Web API</span><span class="sxs-lookup"><span data-stu-id="760e8-379">Web API</span></span> | 
| <span data-ttu-id="760e8-380">SDL Phase</span><span class="sxs-lookup"><span data-stu-id="760e8-380">SDL Phase</span></span>               | <span data-ttu-id="760e8-381">Build</span><span class="sxs-lookup"><span data-stu-id="760e8-381">Build</span></span> |  
| <span data-ttu-id="760e8-382">Applicable Technologies</span><span class="sxs-lookup"><span data-stu-id="760e8-382">Applicable Technologies</span></span> | <span data-ttu-id="760e8-383">Generic</span><span class="sxs-lookup"><span data-stu-id="760e8-383">Generic</span></span> |
| <span data-ttu-id="760e8-384">Attributes</span><span class="sxs-lookup"><span data-stu-id="760e8-384">Attributes</span></span>              | <span data-ttu-id="760e8-385">N/A</span><span class="sxs-lookup"><span data-stu-id="760e8-385">N/A</span></span>  |
| <span data-ttu-id="760e8-386">References</span><span class="sxs-lookup"><span data-stu-id="760e8-386">References</span></span>              | <span data-ttu-id="760e8-387">N/A</span><span class="sxs-lookup"><span data-stu-id="760e8-387">N/A</span></span>  |
| <span data-ttu-id="760e8-388">Steps</span><span class="sxs-lookup"><span data-stu-id="760e8-388">Steps</span></span> | <span data-ttu-id="760e8-389">Enable auditing and logging on Web APIs.</span><span class="sxs-lookup"><span data-stu-id="760e8-389">Enable auditing and logging on Web APIs.</span></span> <span data-ttu-id="760e8-390">Audit logs should capture user context.</span><span class="sxs-lookup"><span data-stu-id="760e8-390">Audit logs should capture user context.</span></span> <span data-ttu-id="760e8-391">Identify all important events and log those events.</span><span class="sxs-lookup"><span data-stu-id="760e8-391">Identify all important events and log those events.</span></span> <span data-ttu-id="760e8-392">Implement centralized logging</span><span class="sxs-lookup"><span data-stu-id="760e8-392">Implement centralized logging</span></span> |

## <a id="logging-field-gateway"></a><span data-ttu-id="760e8-393">Ensure that appropriate auditing and logging is enforced on Field Gateway</span><span class="sxs-lookup"><span data-stu-id="760e8-393">Ensure that appropriate auditing and logging is enforced on Field Gateway</span></span>

| <span data-ttu-id="760e8-394">Title</span><span class="sxs-lookup"><span data-stu-id="760e8-394">Title</span></span>                   | <span data-ttu-id="760e8-395">Details</span><span class="sxs-lookup"><span data-stu-id="760e8-395">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="760e8-396">Component</span><span class="sxs-lookup"><span data-stu-id="760e8-396">Component</span></span>               | <span data-ttu-id="760e8-397">IoT Field Gateway</span><span class="sxs-lookup"><span data-stu-id="760e8-397">IoT Field Gateway</span></span> | 
| <span data-ttu-id="760e8-398">SDL Phase</span><span class="sxs-lookup"><span data-stu-id="760e8-398">SDL Phase</span></span>               | <span data-ttu-id="760e8-399">Build</span><span class="sxs-lookup"><span data-stu-id="760e8-399">Build</span></span> |  
| <span data-ttu-id="760e8-400">Applicable Technologies</span><span class="sxs-lookup"><span data-stu-id="760e8-400">Applicable Technologies</span></span> | <span data-ttu-id="760e8-401">Generic</span><span class="sxs-lookup"><span data-stu-id="760e8-401">Generic</span></span> |
| <span data-ttu-id="760e8-402">Attributes</span><span class="sxs-lookup"><span data-stu-id="760e8-402">Attributes</span></span>              | <span data-ttu-id="760e8-403">N/A</span><span class="sxs-lookup"><span data-stu-id="760e8-403">N/A</span></span>  |
| <span data-ttu-id="760e8-404">References</span><span class="sxs-lookup"><span data-stu-id="760e8-404">References</span></span>              | <span data-ttu-id="760e8-405">N/A</span><span class="sxs-lookup"><span data-stu-id="760e8-405">N/A</span></span>  |
| <span data-ttu-id="760e8-406">Steps</span><span class="sxs-lookup"><span data-stu-id="760e8-406">Steps</span></span> | <p><span data-ttu-id="760e8-407">When multiple devices connect to a Field Gateway, ensure that connection attempts and authentication status (success or failure) for individual devices are logged and maintained on the Field Gateway.</span><span class="sxs-lookup"><span data-stu-id="760e8-407">When multiple devices connect to a Field Gateway, ensure that connection attempts and authentication status (success or failure) for individual devices are logged and maintained on the Field Gateway.</span></span></p><p><span data-ttu-id="760e8-408">Also, in cases where Field Gateway is maintaining the IoT Hub credentials for individual devices, ensure that auditing is performed when these credentials are retrieved.Develop a process to periodically upload the logs to Azure IoT Hub/storage for long term retention.</span><span class="sxs-lookup"><span data-stu-id="760e8-408">Also, in cases where Field Gateway is maintaining the IoT Hub credentials for individual devices, ensure that auditing is performed when these credentials are retrieved.Develop a process to periodically upload the logs to Azure IoT Hub/storage for long term retention.</span></span></p> |

## <a id="logging-cloud-gateway"></a><span data-ttu-id="760e8-409">Ensure that appropriate auditing and logging is enforced on Cloud Gateway</span><span class="sxs-lookup"><span data-stu-id="760e8-409">Ensure that appropriate auditing and logging is enforced on Cloud Gateway</span></span>

| <span data-ttu-id="760e8-410">Title</span><span class="sxs-lookup"><span data-stu-id="760e8-410">Title</span></span>                   | <span data-ttu-id="760e8-411">Details</span><span class="sxs-lookup"><span data-stu-id="760e8-411">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="760e8-412">Component</span><span class="sxs-lookup"><span data-stu-id="760e8-412">Component</span></span>               | <span data-ttu-id="760e8-413">IoT Cloud Gateway</span><span class="sxs-lookup"><span data-stu-id="760e8-413">IoT Cloud Gateway</span></span> | 
| <span data-ttu-id="760e8-414">SDL Phase</span><span class="sxs-lookup"><span data-stu-id="760e8-414">SDL Phase</span></span>               | <span data-ttu-id="760e8-415">Build</span><span class="sxs-lookup"><span data-stu-id="760e8-415">Build</span></span> |  
| <span data-ttu-id="760e8-416">Applicable Technologies</span><span class="sxs-lookup"><span data-stu-id="760e8-416">Applicable Technologies</span></span> | <span data-ttu-id="760e8-417">Generic</span><span class="sxs-lookup"><span data-stu-id="760e8-417">Generic</span></span> |
| <span data-ttu-id="760e8-418">Attributes</span><span class="sxs-lookup"><span data-stu-id="760e8-418">Attributes</span></span>              | <span data-ttu-id="760e8-419">N/A</span><span class="sxs-lookup"><span data-stu-id="760e8-419">N/A</span></span>  |
| <span data-ttu-id="760e8-420">References</span><span class="sxs-lookup"><span data-stu-id="760e8-420">References</span></span>              | [<span data-ttu-id="760e8-421">Introduction to IoT Hub operations monitoring</span><span class="sxs-lookup"><span data-stu-id="760e8-421">Introduction to IoT Hub operations monitoring</span></span>](https://azure.microsoft.com/documentation/articles/iot-hub-operations-monitoring/) |
| <span data-ttu-id="760e8-422">Steps</span><span class="sxs-lookup"><span data-stu-id="760e8-422">Steps</span></span> | <p><span data-ttu-id="760e8-423">Design for collecting and storing audit data gathered through IoT Hub Operations Monitoring.</span><span class="sxs-lookup"><span data-stu-id="760e8-423">Design for collecting and storing audit data gathered through IoT Hub Operations Monitoring.</span></span> <span data-ttu-id="760e8-424">Enable the following monitoring categories:</span><span class="sxs-lookup"><span data-stu-id="760e8-424">Enable the following monitoring categories:</span></span></p><ul><li><span data-ttu-id="760e8-425">Device identity operations</span><span class="sxs-lookup"><span data-stu-id="760e8-425">Device identity operations</span></span></li><li><span data-ttu-id="760e8-426">Device-to-cloud communications</span><span class="sxs-lookup"><span data-stu-id="760e8-426">Device-to-cloud communications</span></span></li><li><span data-ttu-id="760e8-427">Cloud-to-device communications</span><span class="sxs-lookup"><span data-stu-id="760e8-427">Cloud-to-device communications</span></span></li><li><span data-ttu-id="760e8-428">Connections</span><span class="sxs-lookup"><span data-stu-id="760e8-428">Connections</span></span></li><li><span data-ttu-id="760e8-429">File uploads</span><span class="sxs-lookup"><span data-stu-id="760e8-429">File uploads</span></span></li></ul>|