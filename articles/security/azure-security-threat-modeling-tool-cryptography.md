---
title: Cryptography - Microsoft Threat Modeling Tool - Azure | Microsoft Docs
description: mitigations for threats exposed in the Threat Modeling Tool
services: security
documentationcenter: na
author: RodSan
manager: RodSan
editor: RodSan
ms.assetid: na
ms.service: security
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 02/07/2017
ms.author: rodsan
ms.openlocfilehash: 9e4cf8103932bcec4a170043867cb6503083e060
ms.sourcegitcommit: 5b9d839c0c0a94b293fdafe1d6e5429506c07e05
ms.translationtype: HT
ms.contentlocale: nl-NL
ms.lasthandoff: 08/02/2018
ms.locfileid: "44564220"
---
# <a name="security-frame-cryptography--mitigations"></a><span data-ttu-id="d4718-103">Security Frame: Cryptography | Mitigations</span><span class="sxs-lookup"><span data-stu-id="d4718-103">Security Frame: Cryptography | Mitigations</span></span> 
| <span data-ttu-id="d4718-104">Product/Service</span><span class="sxs-lookup"><span data-stu-id="d4718-104">Product/Service</span></span> | <span data-ttu-id="d4718-105">Article</span><span class="sxs-lookup"><span data-stu-id="d4718-105">Article</span></span> |
| --------------- | ------- |
| <span data-ttu-id="d4718-106">Web Application</span><span class="sxs-lookup"><span data-stu-id="d4718-106">Web Application</span></span> | <ul><li>[<span data-ttu-id="d4718-107">Use only approved symmetric block ciphers and key lengths</span><span class="sxs-lookup"><span data-stu-id="d4718-107">Use only approved symmetric block ciphers and key lengths</span></span>](#cipher-length)</li><li>[<span data-ttu-id="d4718-108">Use approved block cipher modes and initialization vectors for symmetric ciphers</span><span class="sxs-lookup"><span data-stu-id="d4718-108">Use approved block cipher modes and initialization vectors for symmetric ciphers</span></span>](#vector-ciphers)</li><li>[<span data-ttu-id="d4718-109">Use approved asymmetric algorithms, key lengths, and padding</span><span class="sxs-lookup"><span data-stu-id="d4718-109">Use approved asymmetric algorithms, key lengths, and padding</span></span>](#padding)</li><li>[<span data-ttu-id="d4718-110">Use approved random number generators</span><span class="sxs-lookup"><span data-stu-id="d4718-110">Use approved random number generators</span></span>](#numgen)</li><li>[<span data-ttu-id="d4718-111">Do not use symmetric stream ciphers</span><span class="sxs-lookup"><span data-stu-id="d4718-111">Do not use symmetric stream ciphers</span></span>](#stream-ciphers)</li><li>[<span data-ttu-id="d4718-112">Use approved MAC/HMAC/keyed hash algorithms</span><span class="sxs-lookup"><span data-stu-id="d4718-112">Use approved MAC/HMAC/keyed hash algorithms</span></span>](#mac-hash)</li><li>[<span data-ttu-id="d4718-113">Use only approved cryptographic hash functions</span><span class="sxs-lookup"><span data-stu-id="d4718-113">Use only approved cryptographic hash functions</span></span>](#hash-functions)</li></ul> |
| <span data-ttu-id="d4718-114">Database</span><span class="sxs-lookup"><span data-stu-id="d4718-114">Database</span></span> | <ul><li>[<span data-ttu-id="d4718-115">Use strong encryption algorithms to encrypt data in the database</span><span class="sxs-lookup"><span data-stu-id="d4718-115">Use strong encryption algorithms to encrypt data in the database</span></span>](#strong-db)</li><li>[<span data-ttu-id="d4718-116">SSIS packages should be encrypted and digitally signed</span><span class="sxs-lookup"><span data-stu-id="d4718-116">SSIS packages should be encrypted and digitally signed</span></span>](#ssis-signed)</li><li>[<span data-ttu-id="d4718-117">Add digital signature to critical database securables</span><span class="sxs-lookup"><span data-stu-id="d4718-117">Add digital signature to critical database securables</span></span>](#securables-db)</li><li>[<span data-ttu-id="d4718-118">Use SQL server EKM to protect encryption keys</span><span class="sxs-lookup"><span data-stu-id="d4718-118">Use SQL server EKM to protect encryption keys</span></span>](#ekm-keys)</li><li>[<span data-ttu-id="d4718-119">Use AlwaysEncrypted feature if encryption keys should not be revealed to Database engine</span><span class="sxs-lookup"><span data-stu-id="d4718-119">Use AlwaysEncrypted feature if encryption keys should not be revealed to Database engine</span></span>](#keys-engine)</li></ul> |
| <span data-ttu-id="d4718-120">IoT Device</span><span class="sxs-lookup"><span data-stu-id="d4718-120">IoT Device</span></span> | <ul><li>[<span data-ttu-id="d4718-121">Store Cryptographic Keys securely on IoT Device</span><span class="sxs-lookup"><span data-stu-id="d4718-121">Store Cryptographic Keys securely on IoT Device</span></span>](#keys-iot)</li></ul> | 
| <span data-ttu-id="d4718-122">IoT Cloud Gateway</span><span class="sxs-lookup"><span data-stu-id="d4718-122">IoT Cloud Gateway</span></span> | <ul><li>[<span data-ttu-id="d4718-123">Generate a random symmetric key of sufficient length for authentication to IoT Hub</span><span class="sxs-lookup"><span data-stu-id="d4718-123">Generate a random symmetric key of sufficient length for authentication to IoT Hub</span></span>](#random-hub)</li></ul> | 
| <span data-ttu-id="d4718-124">Dynamics CRM Mobile Client</span><span class="sxs-lookup"><span data-stu-id="d4718-124">Dynamics CRM Mobile Client</span></span> | <ul><li>[<span data-ttu-id="d4718-125">Ensure a device management policy is in place that requires a use PIN and allows remote wiping</span><span class="sxs-lookup"><span data-stu-id="d4718-125">Ensure a device management policy is in place that requires a use PIN and allows remote wiping</span></span>](#pin-remote)</li></ul> | 
| <span data-ttu-id="d4718-126">Dynamics CRM Outlook Client</span><span class="sxs-lookup"><span data-stu-id="d4718-126">Dynamics CRM Outlook Client</span></span> | <ul><li>[<span data-ttu-id="d4718-127">Ensure a device management policy is in place that requires a PIN/password/auto lock and encrypts all data (e.g. Bitlocker)</span><span class="sxs-lookup"><span data-stu-id="d4718-127">Ensure a device management policy is in place that requires a PIN/password/auto lock and encrypts all data (e.g. Bitlocker)</span></span>](#bitlocker)</li></ul> | 
| <span data-ttu-id="d4718-128">Identity Server</span><span class="sxs-lookup"><span data-stu-id="d4718-128">Identity Server</span></span> | <ul><li>[<span data-ttu-id="d4718-129">Ensure that signing keys are rolled over when using Identity Server</span><span class="sxs-lookup"><span data-stu-id="d4718-129">Ensure that signing keys are rolled over when using Identity Server</span></span>](#rolled-server)</li><li>[<span data-ttu-id="d4718-130">Ensure that cryptographically strong client id, client secret are used in Identity Server</span><span class="sxs-lookup"><span data-stu-id="d4718-130">Ensure that cryptographically strong client id, client secret are used in Identity Server</span></span>](#client-server)</li></ul> | 

## <a id="cipher-length"></a><span data-ttu-id="d4718-131">Use only approved symmetric block ciphers and key lengths</span><span class="sxs-lookup"><span data-stu-id="d4718-131">Use only approved symmetric block ciphers and key lengths</span></span>

| <span data-ttu-id="d4718-132">Title</span><span class="sxs-lookup"><span data-stu-id="d4718-132">Title</span></span>                   | <span data-ttu-id="d4718-133">Details</span><span class="sxs-lookup"><span data-stu-id="d4718-133">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="d4718-134">Component</span><span class="sxs-lookup"><span data-stu-id="d4718-134">Component</span></span>               | <span data-ttu-id="d4718-135">Web Application</span><span class="sxs-lookup"><span data-stu-id="d4718-135">Web Application</span></span> | 
| <span data-ttu-id="d4718-136">SDL Phase</span><span class="sxs-lookup"><span data-stu-id="d4718-136">SDL Phase</span></span>               | <span data-ttu-id="d4718-137">Build</span><span class="sxs-lookup"><span data-stu-id="d4718-137">Build</span></span> |  
| <span data-ttu-id="d4718-138">Applicable Technologies</span><span class="sxs-lookup"><span data-stu-id="d4718-138">Applicable Technologies</span></span> | <span data-ttu-id="d4718-139">Generic</span><span class="sxs-lookup"><span data-stu-id="d4718-139">Generic</span></span> |
| <span data-ttu-id="d4718-140">Attributes</span><span class="sxs-lookup"><span data-stu-id="d4718-140">Attributes</span></span>              | <span data-ttu-id="d4718-141">N/A</span><span class="sxs-lookup"><span data-stu-id="d4718-141">N/A</span></span>  |
| <span data-ttu-id="d4718-142">References</span><span class="sxs-lookup"><span data-stu-id="d4718-142">References</span></span>              | <span data-ttu-id="d4718-143">N/A</span><span class="sxs-lookup"><span data-stu-id="d4718-143">N/A</span></span>  |
| <span data-ttu-id="d4718-144">Steps</span><span class="sxs-lookup"><span data-stu-id="d4718-144">Steps</span></span> | <p><span data-ttu-id="d4718-145">Products must use only those symmetric block ciphers and associated key lengths which have been explicitly approved by the Crypto Advisor in your organization.</span><span class="sxs-lookup"><span data-stu-id="d4718-145">Products must use only those symmetric block ciphers and associated key lengths which have been explicitly approved by the Crypto Advisor in your organization.</span></span> <span data-ttu-id="d4718-146">Approved symmetric algorithms at Microsoft include the following block ciphers:</span><span class="sxs-lookup"><span data-stu-id="d4718-146">Approved symmetric algorithms at Microsoft include the following block ciphers:</span></span></p><ul><li><span data-ttu-id="d4718-147">For new code AES-128, AES-192, and AES-256 are acceptable</span><span class="sxs-lookup"><span data-stu-id="d4718-147">For new code AES-128, AES-192, and AES-256 are acceptable</span></span></li><li><span data-ttu-id="d4718-148">For backward compatibility with existing code, three-key 3DES is acceptable</span><span class="sxs-lookup"><span data-stu-id="d4718-148">For backward compatibility with existing code, three-key 3DES is acceptable</span></span></li><li><span data-ttu-id="d4718-149">For products using symmetric block ciphers:</span><span class="sxs-lookup"><span data-stu-id="d4718-149">For products using symmetric block ciphers:</span></span><ul><li><span data-ttu-id="d4718-150">Advanced Encryption Standard (AES) is required for new code</span><span class="sxs-lookup"><span data-stu-id="d4718-150">Advanced Encryption Standard (AES) is required for new code</span></span></li><li><span data-ttu-id="d4718-151">Three-key triple Data Encryption Standard (3DES) is permissible in existing code for backward compatibility</span><span class="sxs-lookup"><span data-stu-id="d4718-151">Three-key triple Data Encryption Standard (3DES) is permissible in existing code for backward compatibility</span></span></li><li><span data-ttu-id="d4718-152">All other block ciphers, including RC2, DES, 2 Key 3DES, DESX, and Skipjack, may only be used for decrypting old data, and must be replaced if used for encryption</span><span class="sxs-lookup"><span data-stu-id="d4718-152">All other block ciphers, including RC2, DES, 2 Key 3DES, DESX, and Skipjack, may only be used for decrypting old data, and must be replaced if used for encryption</span></span></li></ul></li><li><span data-ttu-id="d4718-153">For symmetric block encryption algorithms, a minimum key length of 128 bits is required.</span><span class="sxs-lookup"><span data-stu-id="d4718-153">For symmetric block encryption algorithms, a minimum key length of 128 bits is required.</span></span> <span data-ttu-id="d4718-154">The only block encryption algorithm recommended for new code is AES (AES-128, AES-192 and AES-256 are all acceptable)</span><span class="sxs-lookup"><span data-stu-id="d4718-154">The only block encryption algorithm recommended for new code is AES (AES-128, AES-192 and AES-256 are all acceptable)</span></span></li><li><span data-ttu-id="d4718-155">Three-key 3DES is currently acceptable if already in use in existing code; transition to AES is recommended.</span><span class="sxs-lookup"><span data-stu-id="d4718-155">Three-key 3DES is currently acceptable if already in use in existing code; transition to AES is recommended.</span></span> <span data-ttu-id="d4718-156">DES, DESX, RC2, and Skipjack are no longer considered secure.</span><span class="sxs-lookup"><span data-stu-id="d4718-156">DES, DESX, RC2, and Skipjack are no longer considered secure.</span></span> <span data-ttu-id="d4718-157">These algorithms may only be used for decrypting existing data for the sake of backward-compatibility, and data should be re-encrypted using a recommended block cipher</span><span class="sxs-lookup"><span data-stu-id="d4718-157">These algorithms may only be used for decrypting existing data for the sake of backward-compatibility, and data should be re-encrypted using a recommended block cipher</span></span></li></ul><p><span data-ttu-id="d4718-158">Please note that all symmetric block ciphers must be used with an approved cipher mode, which requires use of an appropriate initialization vector (IV).</span><span class="sxs-lookup"><span data-stu-id="d4718-158">Please note that all symmetric block ciphers must be used with an approved cipher mode, which requires use of an appropriate initialization vector (IV).</span></span> <span data-ttu-id="d4718-159">An appropriate IV, is typically a random number and never a constant value</span><span class="sxs-lookup"><span data-stu-id="d4718-159">An appropriate IV, is typically a random number and never a constant value</span></span></p><p><span data-ttu-id="d4718-160">The use of legacy or otherwise unapproved crypto algorithms and smaller key lengths for reading existing data (as opposed to writing new data) may be permitted after your organization's Crypto Board review.</span><span class="sxs-lookup"><span data-stu-id="d4718-160">The use of legacy or otherwise unapproved crypto algorithms and smaller key lengths for reading existing data (as opposed to writing new data) may be permitted after your organization's Crypto Board review.</span></span> <span data-ttu-id="d4718-161">However, you must file for an exception against this requirement.</span><span class="sxs-lookup"><span data-stu-id="d4718-161">However, you must file for an exception against this requirement.</span></span> <span data-ttu-id="d4718-162">Additionally, in enterprise deployments, products should consider warning administrators when weak crypto is used to read data.</span><span class="sxs-lookup"><span data-stu-id="d4718-162">Additionally, in enterprise deployments, products should consider warning administrators when weak crypto is used to read data.</span></span> <span data-ttu-id="d4718-163">Such warnings should be explanatory and actionable.</span><span class="sxs-lookup"><span data-stu-id="d4718-163">Such warnings should be explanatory and actionable.</span></span> <span data-ttu-id="d4718-164">In some cases, it may be appropriate to have Group Policy control the use of weak crypto</span><span class="sxs-lookup"><span data-stu-id="d4718-164">In some cases, it may be appropriate to have Group Policy control the use of weak crypto</span></span></p><p><span data-ttu-id="d4718-165">Allowed .NET algorithms for managed crypto agility (in order of preference)</span><span class="sxs-lookup"><span data-stu-id="d4718-165">Allowed .NET algorithms for managed crypto agility (in order of preference)</span></span></p><ul><li><span data-ttu-id="d4718-166">AesCng (FIPS compliant)</span><span class="sxs-lookup"><span data-stu-id="d4718-166">AesCng (FIPS compliant)</span></span></li><li><span data-ttu-id="d4718-167">AuthenticatedAesCng (FIPS compliant)</span><span class="sxs-lookup"><span data-stu-id="d4718-167">AuthenticatedAesCng (FIPS compliant)</span></span></li><li><span data-ttu-id="d4718-168">AESCryptoServiceProvider (FIPS compliant)</span><span class="sxs-lookup"><span data-stu-id="d4718-168">AESCryptoServiceProvider (FIPS compliant)</span></span></li><li><span data-ttu-id="d4718-169">AESManaged (non-FIPS compliant)</span><span class="sxs-lookup"><span data-stu-id="d4718-169">AESManaged (non-FIPS compliant)</span></span></li></ul><p><span data-ttu-id="d4718-170">Please note that none of these algorithms can be specified via the `SymmetricAlgorithm.Create` or `CryptoConfig.CreateFromName` methods without making changes to the machine.config file.</span><span class="sxs-lookup"><span data-stu-id="d4718-170">Please note that none of these algorithms can be specified via the `SymmetricAlgorithm.Create` or `CryptoConfig.CreateFromName` methods without making changes to the machine.config file.</span></span> <span data-ttu-id="d4718-171">Also, note that AES in versions of .NET prior to .NET 3.5 is named `RijndaelManaged`, and `AesCng` and `AuthenticatedAesCng` are >available through CodePlex and require CNG in the underlying OS</span><span class="sxs-lookup"><span data-stu-id="d4718-171">Also, note that AES in versions of .NET prior to .NET 3.5 is named `RijndaelManaged`, and `AesCng` and `AuthenticatedAesCng` are >available through CodePlex and require CNG in the underlying OS</span></span></p>

## <a id="vector-ciphers"></a><span data-ttu-id="d4718-172">Use approved block cipher modes and initialization vectors for symmetric ciphers</span><span class="sxs-lookup"><span data-stu-id="d4718-172">Use approved block cipher modes and initialization vectors for symmetric ciphers</span></span>

| <span data-ttu-id="d4718-173">Title</span><span class="sxs-lookup"><span data-stu-id="d4718-173">Title</span></span>                   | <span data-ttu-id="d4718-174">Details</span><span class="sxs-lookup"><span data-stu-id="d4718-174">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="d4718-175">Component</span><span class="sxs-lookup"><span data-stu-id="d4718-175">Component</span></span>               | <span data-ttu-id="d4718-176">Web Application</span><span class="sxs-lookup"><span data-stu-id="d4718-176">Web Application</span></span> | 
| <span data-ttu-id="d4718-177">SDL Phase</span><span class="sxs-lookup"><span data-stu-id="d4718-177">SDL Phase</span></span>               | <span data-ttu-id="d4718-178">Build</span><span class="sxs-lookup"><span data-stu-id="d4718-178">Build</span></span> |  
| <span data-ttu-id="d4718-179">Applicable Technologies</span><span class="sxs-lookup"><span data-stu-id="d4718-179">Applicable Technologies</span></span> | <span data-ttu-id="d4718-180">Generic</span><span class="sxs-lookup"><span data-stu-id="d4718-180">Generic</span></span> |
| <span data-ttu-id="d4718-181">Attributes</span><span class="sxs-lookup"><span data-stu-id="d4718-181">Attributes</span></span>              | <span data-ttu-id="d4718-182">N/A</span><span class="sxs-lookup"><span data-stu-id="d4718-182">N/A</span></span>  |
| <span data-ttu-id="d4718-183">References</span><span class="sxs-lookup"><span data-stu-id="d4718-183">References</span></span>              | <span data-ttu-id="d4718-184">N/A</span><span class="sxs-lookup"><span data-stu-id="d4718-184">N/A</span></span>  |
| <span data-ttu-id="d4718-185">Steps</span><span class="sxs-lookup"><span data-stu-id="d4718-185">Steps</span></span> | <span data-ttu-id="d4718-186">All symmetric block ciphers must be used with an approved symmetric cipher mode.</span><span class="sxs-lookup"><span data-stu-id="d4718-186">All symmetric block ciphers must be used with an approved symmetric cipher mode.</span></span> <span data-ttu-id="d4718-187">The only approved modes are CBC and CTS.</span><span class="sxs-lookup"><span data-stu-id="d4718-187">The only approved modes are CBC and CTS.</span></span> <span data-ttu-id="d4718-188">In particular, the electronic code book (ECB) mode of operation should be avoided; use of ECB requires your organization's Crypto Board review.</span><span class="sxs-lookup"><span data-stu-id="d4718-188">In particular, the electronic code book (ECB) mode of operation should be avoided; use of ECB requires your organization's Crypto Board review.</span></span> <span data-ttu-id="d4718-189">All usage of OFB, CFB, CTR, CCM, and GCM or any other encryption mode must be reviewed by your organization's Crypto Board.</span><span class="sxs-lookup"><span data-stu-id="d4718-189">All usage of OFB, CFB, CTR, CCM, and GCM or any other encryption mode must be reviewed by your organization's Crypto Board.</span></span> <span data-ttu-id="d4718-190">Reusing the same initialization vector (IV) with block ciphers in "streaming ciphers modes," such as CTR, may cause encrypted data to be revealed.</span><span class="sxs-lookup"><span data-stu-id="d4718-190">Reusing the same initialization vector (IV) with block ciphers in "streaming ciphers modes," such as CTR, may cause encrypted data to be revealed.</span></span> <span data-ttu-id="d4718-191">All symmetric block ciphers must also be used with an appropriate initialization vector (IV).</span><span class="sxs-lookup"><span data-stu-id="d4718-191">All symmetric block ciphers must also be used with an appropriate initialization vector (IV).</span></span> <span data-ttu-id="d4718-192">An appropriate IV is a cryptographically strong, random number and never a constant value.</span><span class="sxs-lookup"><span data-stu-id="d4718-192">An appropriate IV is a cryptographically strong, random number and never a constant value.</span></span> |

## <a id="padding"></a><span data-ttu-id="d4718-193">Use approved asymmetric algorithms, key lengths, and padding</span><span class="sxs-lookup"><span data-stu-id="d4718-193">Use approved asymmetric algorithms, key lengths, and padding</span></span>

| <span data-ttu-id="d4718-194">Title</span><span class="sxs-lookup"><span data-stu-id="d4718-194">Title</span></span>                   | <span data-ttu-id="d4718-195">Details</span><span class="sxs-lookup"><span data-stu-id="d4718-195">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="d4718-196">Component</span><span class="sxs-lookup"><span data-stu-id="d4718-196">Component</span></span>               | <span data-ttu-id="d4718-197">Web Application</span><span class="sxs-lookup"><span data-stu-id="d4718-197">Web Application</span></span> | 
| <span data-ttu-id="d4718-198">SDL Phase</span><span class="sxs-lookup"><span data-stu-id="d4718-198">SDL Phase</span></span>               | <span data-ttu-id="d4718-199">Build</span><span class="sxs-lookup"><span data-stu-id="d4718-199">Build</span></span> |  
| <span data-ttu-id="d4718-200">Applicable Technologies</span><span class="sxs-lookup"><span data-stu-id="d4718-200">Applicable Technologies</span></span> | <span data-ttu-id="d4718-201">Generic</span><span class="sxs-lookup"><span data-stu-id="d4718-201">Generic</span></span> |
| <span data-ttu-id="d4718-202">Attributes</span><span class="sxs-lookup"><span data-stu-id="d4718-202">Attributes</span></span>              | <span data-ttu-id="d4718-203">N/A</span><span class="sxs-lookup"><span data-stu-id="d4718-203">N/A</span></span>  |
| <span data-ttu-id="d4718-204">References</span><span class="sxs-lookup"><span data-stu-id="d4718-204">References</span></span>              | <span data-ttu-id="d4718-205">N/A</span><span class="sxs-lookup"><span data-stu-id="d4718-205">N/A</span></span>  |
| <span data-ttu-id="d4718-206">Steps</span><span class="sxs-lookup"><span data-stu-id="d4718-206">Steps</span></span> | <p><span data-ttu-id="d4718-207">The use of banned cryptographic algorithms introduces significant risk to product security and must be avoided.</span><span class="sxs-lookup"><span data-stu-id="d4718-207">The use of banned cryptographic algorithms introduces significant risk to product security and must be avoided.</span></span> <span data-ttu-id="d4718-208">Products must use only those cryptographic algorithms and associated key lengths and padding that have been explicitly approved by your organization's Crypto Board.</span><span class="sxs-lookup"><span data-stu-id="d4718-208">Products must use only those cryptographic algorithms and associated key lengths and padding that have been explicitly approved by your organization's Crypto Board.</span></span></p><ul><li><span data-ttu-id="d4718-209">**RSA-** may be used for encryption, key exchange and signature.</span><span class="sxs-lookup"><span data-stu-id="d4718-209">**RSA-** may be used for encryption, key exchange and signature.</span></span> <span data-ttu-id="d4718-210">RSA encryption must use only the OAEP or RSA-KEM padding modes.</span><span class="sxs-lookup"><span data-stu-id="d4718-210">RSA encryption must use only the OAEP or RSA-KEM padding modes.</span></span> <span data-ttu-id="d4718-211">Existing code may use PKCS #1 v1.5 padding mode for compatibility only.</span><span class="sxs-lookup"><span data-stu-id="d4718-211">Existing code may use PKCS #1 v1.5 padding mode for compatibility only.</span></span> <span data-ttu-id="d4718-212">Use of null padding is explicitly banned.</span><span class="sxs-lookup"><span data-stu-id="d4718-212">Use of null padding is explicitly banned.</span></span> <span data-ttu-id="d4718-213">Keys >= 2048 bits is required for new code.</span><span class="sxs-lookup"><span data-stu-id="d4718-213">Keys >= 2048 bits is required for new code.</span></span> <span data-ttu-id="d4718-214">Existing code may support keys < 2048 bits only for backwards compatibility after a review by your organization's Crypto Board.</span><span class="sxs-lookup"><span data-stu-id="d4718-214">Existing code may support keys < 2048 bits only for backwards compatibility after a review by your organization's Crypto Board.</span></span> <span data-ttu-id="d4718-215">Keys < 1024 bits may only be used for decrypting/verifying old data, and must be replaced if used for encryption or signing operations</span><span class="sxs-lookup"><span data-stu-id="d4718-215">Keys < 1024 bits may only be used for decrypting/verifying old data, and must be replaced if used for encryption or signing operations</span></span></li><li><span data-ttu-id="d4718-216">**ECDSA-** may be used for signature only.</span><span class="sxs-lookup"><span data-stu-id="d4718-216">**ECDSA-** may be used for signature only.</span></span> <span data-ttu-id="d4718-217">ECDSA with >=256 bit keys is required for new code.</span><span class="sxs-lookup"><span data-stu-id="d4718-217">ECDSA with >=256 bit keys is required for new code.</span></span> <span data-ttu-id="d4718-218">ECDSA-based signatures must use one of the three NIST approved curves (P-256, P-384, or P521).</span><span class="sxs-lookup"><span data-stu-id="d4718-218">ECDSA-based signatures must use one of the three NIST approved curves (P-256, P-384, or P521).</span></span> <span data-ttu-id="d4718-219">Curves that have been thoroughly analyzed may be used only after a review with your organization's Crypto Board.</span><span class="sxs-lookup"><span data-stu-id="d4718-219">Curves that have been thoroughly analyzed may be used only after a review with your organization's Crypto Board.</span></span></li><li><span data-ttu-id="d4718-220">**ECDH-** may be used for key exchange only.</span><span class="sxs-lookup"><span data-stu-id="d4718-220">**ECDH-** may be used for key exchange only.</span></span> <span data-ttu-id="d4718-221">ECDH with >=256 bit keys is required for new code.</span><span class="sxs-lookup"><span data-stu-id="d4718-221">ECDH with >=256 bit keys is required for new code.</span></span> <span data-ttu-id="d4718-222">ECDH-based key exchange must use one of the three NIST approved curves (P-256, P-384, or P521).</span><span class="sxs-lookup"><span data-stu-id="d4718-222">ECDH-based key exchange must use one of the three NIST approved curves (P-256, P-384, or P521).</span></span> <span data-ttu-id="d4718-223">Curves that have been thoroughly analyzed may be used only after a review with your organization's Crypto Board.</span><span class="sxs-lookup"><span data-stu-id="d4718-223">Curves that have been thoroughly analyzed may be used only after a review with your organization's Crypto Board.</span></span></li><li><span data-ttu-id="d4718-224">**DSA-** may be acceptable after review and approval from your organization's Crypto Board.</span><span class="sxs-lookup"><span data-stu-id="d4718-224">**DSA-** may be acceptable after review and approval from your organization's Crypto Board.</span></span> <span data-ttu-id="d4718-225">Contact your security advisor to schedule your organization's Crypto Board review.</span><span class="sxs-lookup"><span data-stu-id="d4718-225">Contact your security advisor to schedule your organization's Crypto Board review.</span></span> <span data-ttu-id="d4718-226">If your use of DSA is approved, note that you will need to prohibit use of keys less than 2048 bits in length.</span><span class="sxs-lookup"><span data-stu-id="d4718-226">If your use of DSA is approved, note that you will need to prohibit use of keys less than 2048 bits in length.</span></span> <span data-ttu-id="d4718-227">CNG supports 2048-bit and greater key lengths as of Windows 8.</span><span class="sxs-lookup"><span data-stu-id="d4718-227">CNG supports 2048-bit and greater key lengths as of Windows 8.</span></span></li><li><span data-ttu-id="d4718-228">**Diffie-Hellman-** may be used for session key management only.</span><span class="sxs-lookup"><span data-stu-id="d4718-228">**Diffie-Hellman-** may be used for session key management only.</span></span> <span data-ttu-id="d4718-229">Key length >= 2048 bits is required for new code.</span><span class="sxs-lookup"><span data-stu-id="d4718-229">Key length >= 2048 bits is required for new code.</span></span> <span data-ttu-id="d4718-230">Existing code may support key lengths < 2048 bits only for backwards compatibility after a review by the your organization's Crypto Board.</span><span class="sxs-lookup"><span data-stu-id="d4718-230">Existing code may support key lengths < 2048 bits only for backwards compatibility after a review by the your organization's Crypto Board.</span></span> <span data-ttu-id="d4718-231">Keys < 1024 bits may not be used.</span><span class="sxs-lookup"><span data-stu-id="d4718-231">Keys < 1024 bits may not be used.</span></span></li><ul>

## <a id="numgen"></a><span data-ttu-id="d4718-232">Use approved random number generators</span><span class="sxs-lookup"><span data-stu-id="d4718-232">Use approved random number generators</span></span>

| <span data-ttu-id="d4718-233">Title</span><span class="sxs-lookup"><span data-stu-id="d4718-233">Title</span></span>                   | <span data-ttu-id="d4718-234">Details</span><span class="sxs-lookup"><span data-stu-id="d4718-234">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="d4718-235">Component</span><span class="sxs-lookup"><span data-stu-id="d4718-235">Component</span></span>               | <span data-ttu-id="d4718-236">Web Application</span><span class="sxs-lookup"><span data-stu-id="d4718-236">Web Application</span></span> | 
| <span data-ttu-id="d4718-237">SDL Phase</span><span class="sxs-lookup"><span data-stu-id="d4718-237">SDL Phase</span></span>               | <span data-ttu-id="d4718-238">Build</span><span class="sxs-lookup"><span data-stu-id="d4718-238">Build</span></span> |  
| <span data-ttu-id="d4718-239">Applicable Technologies</span><span class="sxs-lookup"><span data-stu-id="d4718-239">Applicable Technologies</span></span> | <span data-ttu-id="d4718-240">Generic</span><span class="sxs-lookup"><span data-stu-id="d4718-240">Generic</span></span> |
| <span data-ttu-id="d4718-241">Attributes</span><span class="sxs-lookup"><span data-stu-id="d4718-241">Attributes</span></span>              | <span data-ttu-id="d4718-242">N/A</span><span class="sxs-lookup"><span data-stu-id="d4718-242">N/A</span></span>  |
| <span data-ttu-id="d4718-243">References</span><span class="sxs-lookup"><span data-stu-id="d4718-243">References</span></span>              | <span data-ttu-id="d4718-244">N/A</span><span class="sxs-lookup"><span data-stu-id="d4718-244">N/A</span></span>  |
| <span data-ttu-id="d4718-245">Steps</span><span class="sxs-lookup"><span data-stu-id="d4718-245">Steps</span></span> | <p><span data-ttu-id="d4718-246">Products must use approved random number generators.</span><span class="sxs-lookup"><span data-stu-id="d4718-246">Products must use approved random number generators.</span></span> <span data-ttu-id="d4718-247">Pseudorandom functions such as the C runtime function rand, the .NET Framework class System.Random, or system functions such as GetTickCount must, therefore, never be used in such code.</span><span class="sxs-lookup"><span data-stu-id="d4718-247">Pseudorandom functions such as the C runtime function rand, the .NET Framework class System.Random, or system functions such as GetTickCount must, therefore, never be used in such code.</span></span> <span data-ttu-id="d4718-248">Use of the dual elliptic curve random number generator (DUAL_EC_DRBG) algorithm is prohibited</span><span class="sxs-lookup"><span data-stu-id="d4718-248">Use of the dual elliptic curve random number generator (DUAL_EC_DRBG) algorithm is prohibited</span></span></p><ul><li><span data-ttu-id="d4718-249">**CNG-** BCryptGenRandom(use of the BCRYPT_USE_SYSTEM_PREFERRED_RNG flag recommended unless the caller might run at any IRQL greater than 0 [that is, PASSIVE_LEVEL])</span><span class="sxs-lookup"><span data-stu-id="d4718-249">**CNG-** BCryptGenRandom(use of the BCRYPT_USE_SYSTEM_PREFERRED_RNG flag recommended unless the caller might run at any IRQL greater than 0 [that is, PASSIVE_LEVEL])</span></span></li><li><span data-ttu-id="d4718-250">**CAPI-** cryptGenRandom</span><span class="sxs-lookup"><span data-stu-id="d4718-250">**CAPI-** cryptGenRandom</span></span></li><li><span data-ttu-id="d4718-251">**Win32/64-** RtlGenRandom (new implementations should use BCryptGenRandom or CryptGenRandom) \* rand_s \* SystemPrng (for kernel mode)</span><span class="sxs-lookup"><span data-stu-id="d4718-251">**Win32/64-** RtlGenRandom (new implementations should use BCryptGenRandom or CryptGenRandom) \* rand_s \* SystemPrng (for kernel mode)</span></span></li><li><span data-ttu-id="d4718-252">**.NET-** RNGCryptoServiceProvider or RNGCng</span><span class="sxs-lookup"><span data-stu-id="d4718-252">**.NET-** RNGCryptoServiceProvider or RNGCng</span></span></li><li><span data-ttu-id="d4718-253">**Windows Store Apps-** Windows.Security.Cryptography.CryptographicBuffer.GenerateRandom or .GenerateRandomNumber</span><span class="sxs-lookup"><span data-stu-id="d4718-253">**Windows Store Apps-** Windows.Security.Cryptography.CryptographicBuffer.GenerateRandom or .GenerateRandomNumber</span></span></li><li><span data-ttu-id="d4718-254">**Apple OS X (10.7+)/iOS(2.0+)-** int SecRandomCopyBytes (SecRandomRef rnd, size_t count, uint8_t *bytes )</li><li>\*\*Apple OS X (<10.7)-*\* Use /dev/random to retrieve random numbers</span><span class="sxs-lookup"><span data-stu-id="d4718-254">**Apple OS X (10.7+)/iOS(2.0+)-** int SecRandomCopyBytes (SecRandomRef rnd, size_t count, uint8_t *bytes )</li><li>\*\*Apple OS X (<10.7)-*\* Use /dev/random to retrieve random numbers</span></span></li><li><span data-ttu-id="d4718-255">**Java(including Google Android Java code)-** java.security.SecureRandom class.</span><span class="sxs-lookup"><span data-stu-id="d4718-255">**Java(including Google Android Java code)-** java.security.SecureRandom class.</span></span> <span data-ttu-id="d4718-256">Note that for Android 4.3 (Jelly Bean), developers must follow the Android recommended workaround and update their applications to explicitly initialize the PRNG with entropy from /dev/urandom or /dev/random</span><span class="sxs-lookup"><span data-stu-id="d4718-256">Note that for Android 4.3 (Jelly Bean), developers must follow the Android recommended workaround and update their applications to explicitly initialize the PRNG with entropy from /dev/urandom or /dev/random</span></span></li></ul>|

## <a id="stream-ciphers"></a><span data-ttu-id="d4718-257">Do not use symmetric stream ciphers</span><span class="sxs-lookup"><span data-stu-id="d4718-257">Do not use symmetric stream ciphers</span></span>

| <span data-ttu-id="d4718-258">Title</span><span class="sxs-lookup"><span data-stu-id="d4718-258">Title</span></span>                   | <span data-ttu-id="d4718-259">Details</span><span class="sxs-lookup"><span data-stu-id="d4718-259">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="d4718-260">Component</span><span class="sxs-lookup"><span data-stu-id="d4718-260">Component</span></span>               | <span data-ttu-id="d4718-261">Web Application</span><span class="sxs-lookup"><span data-stu-id="d4718-261">Web Application</span></span> | 
| <span data-ttu-id="d4718-262">SDL Phase</span><span class="sxs-lookup"><span data-stu-id="d4718-262">SDL Phase</span></span>               | <span data-ttu-id="d4718-263">Build</span><span class="sxs-lookup"><span data-stu-id="d4718-263">Build</span></span> |  
| <span data-ttu-id="d4718-264">Applicable Technologies</span><span class="sxs-lookup"><span data-stu-id="d4718-264">Applicable Technologies</span></span> | <span data-ttu-id="d4718-265">Generic</span><span class="sxs-lookup"><span data-stu-id="d4718-265">Generic</span></span> |
| <span data-ttu-id="d4718-266">Attributes</span><span class="sxs-lookup"><span data-stu-id="d4718-266">Attributes</span></span>              | <span data-ttu-id="d4718-267">N/A</span><span class="sxs-lookup"><span data-stu-id="d4718-267">N/A</span></span>  |
| <span data-ttu-id="d4718-268">References</span><span class="sxs-lookup"><span data-stu-id="d4718-268">References</span></span>              | <span data-ttu-id="d4718-269">N/A</span><span class="sxs-lookup"><span data-stu-id="d4718-269">N/A</span></span>  |
| <span data-ttu-id="d4718-270">Steps</span><span class="sxs-lookup"><span data-stu-id="d4718-270">Steps</span></span> | <span data-ttu-id="d4718-271">Symmetric stream ciphers, such as RC4, must not be used.</span><span class="sxs-lookup"><span data-stu-id="d4718-271">Symmetric stream ciphers, such as RC4, must not be used.</span></span> <span data-ttu-id="d4718-272">Instead of symmetric stream ciphers, products should use a block cipher, specifically AES with a key length of at least 128 bits.</span><span class="sxs-lookup"><span data-stu-id="d4718-272">Instead of symmetric stream ciphers, products should use a block cipher, specifically AES with a key length of at least 128 bits.</span></span> |

## <a id="mac-hash"></a><span data-ttu-id="d4718-273">Use approved MAC/HMAC/keyed hash algorithms</span><span class="sxs-lookup"><span data-stu-id="d4718-273">Use approved MAC/HMAC/keyed hash algorithms</span></span>

| <span data-ttu-id="d4718-274">Title</span><span class="sxs-lookup"><span data-stu-id="d4718-274">Title</span></span>                   | <span data-ttu-id="d4718-275">Details</span><span class="sxs-lookup"><span data-stu-id="d4718-275">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="d4718-276">Component</span><span class="sxs-lookup"><span data-stu-id="d4718-276">Component</span></span>               | <span data-ttu-id="d4718-277">Web Application</span><span class="sxs-lookup"><span data-stu-id="d4718-277">Web Application</span></span> | 
| <span data-ttu-id="d4718-278">SDL Phase</span><span class="sxs-lookup"><span data-stu-id="d4718-278">SDL Phase</span></span>               | <span data-ttu-id="d4718-279">Build</span><span class="sxs-lookup"><span data-stu-id="d4718-279">Build</span></span> |  
| <span data-ttu-id="d4718-280">Applicable Technologies</span><span class="sxs-lookup"><span data-stu-id="d4718-280">Applicable Technologies</span></span> | <span data-ttu-id="d4718-281">Generic</span><span class="sxs-lookup"><span data-stu-id="d4718-281">Generic</span></span> |
| <span data-ttu-id="d4718-282">Attributes</span><span class="sxs-lookup"><span data-stu-id="d4718-282">Attributes</span></span>              | <span data-ttu-id="d4718-283">N/A</span><span class="sxs-lookup"><span data-stu-id="d4718-283">N/A</span></span>  |
| <span data-ttu-id="d4718-284">References</span><span class="sxs-lookup"><span data-stu-id="d4718-284">References</span></span>              | <span data-ttu-id="d4718-285">N/A</span><span class="sxs-lookup"><span data-stu-id="d4718-285">N/A</span></span>  |
| <span data-ttu-id="d4718-286">Steps</span><span class="sxs-lookup"><span data-stu-id="d4718-286">Steps</span></span> | <p><span data-ttu-id="d4718-287">Products must use only approved message authentication code (MAC) or hash-based message authentication code (HMAC) algorithms.</span><span class="sxs-lookup"><span data-stu-id="d4718-287">Products must use only approved message authentication code (MAC) or hash-based message authentication code (HMAC) algorithms.</span></span></p><p><span data-ttu-id="d4718-288">A message authentication code (MAC) is a piece of information attached to a message that allows its recipient to verify both the authenticity of the sender and the integrity of the message using a secret key.</span><span class="sxs-lookup"><span data-stu-id="d4718-288">A message authentication code (MAC) is a piece of information attached to a message that allows its recipient to verify both the authenticity of the sender and the integrity of the message using a secret key.</span></span> <span data-ttu-id="d4718-289">The use of either a hash-based MAC ([HMAC](http://csrc.nist.gov/publications/nistpubs/800-107-rev1/sp800-107-rev1.pdf)) or [block-cipher-based MAC](http://csrc.nist.gov/publications/nistpubs/800-38B/SP_800-38B.pdf) is permissible as long as all underlying hash or symmetric encryption algorithms are also approved for use; currently this includes the HMAC-SHA2 functions (HMAC-SHA256, HMAC-SHA384 and HMAC-SHA512) and the CMAC/OMAC1 and OMAC2 block cipher-based MACs (these are based on AES).</span><span class="sxs-lookup"><span data-stu-id="d4718-289">The use of either a hash-based MAC ([HMAC](http://csrc.nist.gov/publications/nistpubs/800-107-rev1/sp800-107-rev1.pdf)) or [block-cipher-based MAC](http://csrc.nist.gov/publications/nistpubs/800-38B/SP_800-38B.pdf) is permissible as long as all underlying hash or symmetric encryption algorithms are also approved for use; currently this includes the HMAC-SHA2 functions (HMAC-SHA256, HMAC-SHA384 and HMAC-SHA512) and the CMAC/OMAC1 and OMAC2 block cipher-based MACs (these are based on AES).</span></span></p><p><span data-ttu-id="d4718-290">Use of HMAC-SHA1 may be permissible for platform compatibility, but you will be required to file an exception to this procedure and undergo your organization's Crypto review.</span><span class="sxs-lookup"><span data-stu-id="d4718-290">Use of HMAC-SHA1 may be permissible for platform compatibility, but you will be required to file an exception to this procedure and undergo your organization's Crypto review.</span></span> <span data-ttu-id="d4718-291">Truncation of HMACs to less than 128 bits is not permitted.</span><span class="sxs-lookup"><span data-stu-id="d4718-291">Truncation of HMACs to less than 128 bits is not permitted.</span></span> <span data-ttu-id="d4718-292">Using customer methods to hash a key and data is not approved, and must undergo your organization's Crypto Board review prior to use.</span><span class="sxs-lookup"><span data-stu-id="d4718-292">Using customer methods to hash a key and data is not approved, and must undergo your organization's Crypto Board review prior to use.</span></span></p>|

## <a id="hash-functions"></a><span data-ttu-id="d4718-293">Use only approved cryptographic hash functions</span><span class="sxs-lookup"><span data-stu-id="d4718-293">Use only approved cryptographic hash functions</span></span>

| <span data-ttu-id="d4718-294">Title</span><span class="sxs-lookup"><span data-stu-id="d4718-294">Title</span></span>                   | <span data-ttu-id="d4718-295">Details</span><span class="sxs-lookup"><span data-stu-id="d4718-295">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="d4718-296">Component</span><span class="sxs-lookup"><span data-stu-id="d4718-296">Component</span></span>               | <span data-ttu-id="d4718-297">Web Application</span><span class="sxs-lookup"><span data-stu-id="d4718-297">Web Application</span></span> | 
| <span data-ttu-id="d4718-298">SDL Phase</span><span class="sxs-lookup"><span data-stu-id="d4718-298">SDL Phase</span></span>               | <span data-ttu-id="d4718-299">Build</span><span class="sxs-lookup"><span data-stu-id="d4718-299">Build</span></span> |  
| <span data-ttu-id="d4718-300">Applicable Technologies</span><span class="sxs-lookup"><span data-stu-id="d4718-300">Applicable Technologies</span></span> | <span data-ttu-id="d4718-301">Generic</span><span class="sxs-lookup"><span data-stu-id="d4718-301">Generic</span></span> |
| <span data-ttu-id="d4718-302">Attributes</span><span class="sxs-lookup"><span data-stu-id="d4718-302">Attributes</span></span>              | <span data-ttu-id="d4718-303">N/A</span><span class="sxs-lookup"><span data-stu-id="d4718-303">N/A</span></span>  |
| <span data-ttu-id="d4718-304">References</span><span class="sxs-lookup"><span data-stu-id="d4718-304">References</span></span>              | <span data-ttu-id="d4718-305">N/A</span><span class="sxs-lookup"><span data-stu-id="d4718-305">N/A</span></span>  |
| <span data-ttu-id="d4718-306">Steps</span><span class="sxs-lookup"><span data-stu-id="d4718-306">Steps</span></span> | <p><span data-ttu-id="d4718-307">Products must use the SHA-2 family of hash algorithms (SHA256, SHA384, and SHA512).</span><span class="sxs-lookup"><span data-stu-id="d4718-307">Products must use the SHA-2 family of hash algorithms (SHA256, SHA384, and SHA512).</span></span> <span data-ttu-id="d4718-308">If a shorter hash is needed, such as a 128-bit output length in order to fit a data structure designed with the shorter MD5 hash in mind, product teams may truncate one of the SHA2 hashes (typically SHA256).</span><span class="sxs-lookup"><span data-stu-id="d4718-308">If a shorter hash is needed, such as a 128-bit output length in order to fit a data structure designed with the shorter MD5 hash in mind, product teams may truncate one of the SHA2 hashes (typically SHA256).</span></span> <span data-ttu-id="d4718-309">Note that SHA384 is a truncated version of SHA512.</span><span class="sxs-lookup"><span data-stu-id="d4718-309">Note that SHA384 is a truncated version of SHA512.</span></span> <span data-ttu-id="d4718-310">Truncation of cryptographic hashes for security purposes to less than 128 bits is not permitted.</span><span class="sxs-lookup"><span data-stu-id="d4718-310">Truncation of cryptographic hashes for security purposes to less than 128 bits is not permitted.</span></span> <span data-ttu-id="d4718-311">New code must not use the MD2, MD4, MD5, SHA-0, SHA-1, or RIPEMD hash algorithms.</span><span class="sxs-lookup"><span data-stu-id="d4718-311">New code must not use the MD2, MD4, MD5, SHA-0, SHA-1, or RIPEMD hash algorithms.</span></span> <span data-ttu-id="d4718-312">Hash collisions are computationally feasible for these algorithms, which effectively breaks them.</span><span class="sxs-lookup"><span data-stu-id="d4718-312">Hash collisions are computationally feasible for these algorithms, which effectively breaks them.</span></span></p><p><span data-ttu-id="d4718-313">Allowed .NET hash algorithms for managed crypto agility (in order of preference):</span><span class="sxs-lookup"><span data-stu-id="d4718-313">Allowed .NET hash algorithms for managed crypto agility (in order of preference):</span></span></p><ul><li><span data-ttu-id="d4718-314">SHA512Cng (FIPS compliant)</span><span class="sxs-lookup"><span data-stu-id="d4718-314">SHA512Cng (FIPS compliant)</span></span></li><li><span data-ttu-id="d4718-315">SHA384Cng (FIPS compliant)</span><span class="sxs-lookup"><span data-stu-id="d4718-315">SHA384Cng (FIPS compliant)</span></span></li><li><span data-ttu-id="d4718-316">SHA256Cng (FIPS compliant)</span><span class="sxs-lookup"><span data-stu-id="d4718-316">SHA256Cng (FIPS compliant)</span></span></li><li><span data-ttu-id="d4718-317">SHA512Managed (non-FIPS compliant) (use SHA512 as algorithm name in calls to HashAlgorithm.Create or CryptoConfig.CreateFromName)</span><span class="sxs-lookup"><span data-stu-id="d4718-317">SHA512Managed (non-FIPS compliant) (use SHA512 as algorithm name in calls to HashAlgorithm.Create or CryptoConfig.CreateFromName)</span></span></li><li><span data-ttu-id="d4718-318">SHA384Managed (non-FIPS compliant) (use SHA384 as algorithm name in calls to HashAlgorithm.Create or CryptoConfig.CreateFromName)</span><span class="sxs-lookup"><span data-stu-id="d4718-318">SHA384Managed (non-FIPS compliant) (use SHA384 as algorithm name in calls to HashAlgorithm.Create or CryptoConfig.CreateFromName)</span></span></li><li><span data-ttu-id="d4718-319">SHA256Managed (non-FIPS compliant) (use SHA256 as algorithm name in calls to HashAlgorithm.Create or CryptoConfig.CreateFromName)</span><span class="sxs-lookup"><span data-stu-id="d4718-319">SHA256Managed (non-FIPS compliant) (use SHA256 as algorithm name in calls to HashAlgorithm.Create or CryptoConfig.CreateFromName)</span></span></li><li><span data-ttu-id="d4718-320">SHA512CryptoServiceProvider (FIPS compliant)</span><span class="sxs-lookup"><span data-stu-id="d4718-320">SHA512CryptoServiceProvider (FIPS compliant)</span></span></li><li><span data-ttu-id="d4718-321">SHA256CryptoServiceProvider (FIPS compliant)</span><span class="sxs-lookup"><span data-stu-id="d4718-321">SHA256CryptoServiceProvider (FIPS compliant)</span></span></li><li><span data-ttu-id="d4718-322">SHA384CryptoServiceProvider (FIPS compliant)</span><span class="sxs-lookup"><span data-stu-id="d4718-322">SHA384CryptoServiceProvider (FIPS compliant)</span></span></li></ul>| 

## <a id="strong-db"></a><span data-ttu-id="d4718-323">Use strong encryption algorithms to encrypt data in the database</span><span class="sxs-lookup"><span data-stu-id="d4718-323">Use strong encryption algorithms to encrypt data in the database</span></span>

| <span data-ttu-id="d4718-324">Title</span><span class="sxs-lookup"><span data-stu-id="d4718-324">Title</span></span>                   | <span data-ttu-id="d4718-325">Details</span><span class="sxs-lookup"><span data-stu-id="d4718-325">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="d4718-326">Component</span><span class="sxs-lookup"><span data-stu-id="d4718-326">Component</span></span>               | <span data-ttu-id="d4718-327">Database</span><span class="sxs-lookup"><span data-stu-id="d4718-327">Database</span></span> | 
| <span data-ttu-id="d4718-328">SDL Phase</span><span class="sxs-lookup"><span data-stu-id="d4718-328">SDL Phase</span></span>               | <span data-ttu-id="d4718-329">Build</span><span class="sxs-lookup"><span data-stu-id="d4718-329">Build</span></span> |  
| <span data-ttu-id="d4718-330">Applicable Technologies</span><span class="sxs-lookup"><span data-stu-id="d4718-330">Applicable Technologies</span></span> | <span data-ttu-id="d4718-331">Generic</span><span class="sxs-lookup"><span data-stu-id="d4718-331">Generic</span></span> |
| <span data-ttu-id="d4718-332">Attributes</span><span class="sxs-lookup"><span data-stu-id="d4718-332">Attributes</span></span>              | <span data-ttu-id="d4718-333">N/A</span><span class="sxs-lookup"><span data-stu-id="d4718-333">N/A</span></span>  |
| <span data-ttu-id="d4718-334">References</span><span class="sxs-lookup"><span data-stu-id="d4718-334">References</span></span>              | <span data-ttu-id="d4718-335">[Choosing an encryption algorithm](https://technet.microsoft.com/library/ms345262(v=sql.130).aspx)</span><span class="sxs-lookup"><span data-stu-id="d4718-335">[Choosing an encryption algorithm](https://technet.microsoft.com/library/ms345262(v=sql.130).aspx)</span></span> |
| <span data-ttu-id="d4718-336">Steps</span><span class="sxs-lookup"><span data-stu-id="d4718-336">Steps</span></span> | <span data-ttu-id="d4718-337">Encryption algorithms define data transformations that cannot be easily reversed by unauthorized users.</span><span class="sxs-lookup"><span data-stu-id="d4718-337">Encryption algorithms define data transformations that cannot be easily reversed by unauthorized users.</span></span> <span data-ttu-id="d4718-338">SQL Server allows administrators and developers to choose from among several algorithms, including DES, Triple DES, TRIPLE_DES_3KEY, RC2, RC4, 128-bit RC4, DESX, 128-bit AES, 192-bit AES, and 256-bit AES</span><span class="sxs-lookup"><span data-stu-id="d4718-338">SQL Server allows administrators and developers to choose from among several algorithms, including DES, Triple DES, TRIPLE_DES_3KEY, RC2, RC4, 128-bit RC4, DESX, 128-bit AES, 192-bit AES, and 256-bit AES</span></span> |

## <a id="ssis-signed"></a><span data-ttu-id="d4718-339">SSIS packages should be encrypted and digitally signed</span><span class="sxs-lookup"><span data-stu-id="d4718-339">SSIS packages should be encrypted and digitally signed</span></span>

| <span data-ttu-id="d4718-340">Title</span><span class="sxs-lookup"><span data-stu-id="d4718-340">Title</span></span>                   | <span data-ttu-id="d4718-341">Details</span><span class="sxs-lookup"><span data-stu-id="d4718-341">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="d4718-342">Component</span><span class="sxs-lookup"><span data-stu-id="d4718-342">Component</span></span>               | <span data-ttu-id="d4718-343">Database</span><span class="sxs-lookup"><span data-stu-id="d4718-343">Database</span></span> | 
| <span data-ttu-id="d4718-344">SDL Phase</span><span class="sxs-lookup"><span data-stu-id="d4718-344">SDL Phase</span></span>               | <span data-ttu-id="d4718-345">Build</span><span class="sxs-lookup"><span data-stu-id="d4718-345">Build</span></span> |  
| <span data-ttu-id="d4718-346">Applicable Technologies</span><span class="sxs-lookup"><span data-stu-id="d4718-346">Applicable Technologies</span></span> | <span data-ttu-id="d4718-347">Generic</span><span class="sxs-lookup"><span data-stu-id="d4718-347">Generic</span></span> |
| <span data-ttu-id="d4718-348">Attributes</span><span class="sxs-lookup"><span data-stu-id="d4718-348">Attributes</span></span>              | <span data-ttu-id="d4718-349">N/A</span><span class="sxs-lookup"><span data-stu-id="d4718-349">N/A</span></span>  |
| <span data-ttu-id="d4718-350">References</span><span class="sxs-lookup"><span data-stu-id="d4718-350">References</span></span>              | <span data-ttu-id="d4718-351">[Identify the Source of Packages with Digital Signatures](https://msdn.microsoft.com/library/ms141174.aspx), [Threat and Vulnerability Mitigation (Integration Services)](https://msdn.microsoft.com/library/bb522559.aspx)</span><span class="sxs-lookup"><span data-stu-id="d4718-351">[Identify the Source of Packages with Digital Signatures](https://msdn.microsoft.com/library/ms141174.aspx), [Threat and Vulnerability Mitigation (Integration Services)](https://msdn.microsoft.com/library/bb522559.aspx)</span></span> |
| <span data-ttu-id="d4718-352">Steps</span><span class="sxs-lookup"><span data-stu-id="d4718-352">Steps</span></span> | <span data-ttu-id="d4718-353">The source of a package is the individual or organization that created the package.</span><span class="sxs-lookup"><span data-stu-id="d4718-353">The source of a package is the individual or organization that created the package.</span></span> <span data-ttu-id="d4718-354">Running a package from an unknown or untrusted source might be risky.</span><span class="sxs-lookup"><span data-stu-id="d4718-354">Running a package from an unknown or untrusted source might be risky.</span></span> <span data-ttu-id="d4718-355">To prevent unauthorized tampering of SSIS packages, digital signatures should be used.</span><span class="sxs-lookup"><span data-stu-id="d4718-355">To prevent unauthorized tampering of SSIS packages, digital signatures should be used.</span></span> <span data-ttu-id="d4718-356">Also, to ensure the confidentiality of the packages during storage/transit, SSIS packages have to be encrypted</span><span class="sxs-lookup"><span data-stu-id="d4718-356">Also, to ensure the confidentiality of the packages during storage/transit, SSIS packages have to be encrypted</span></span> |

## <a id="securables-db"></a><span data-ttu-id="d4718-357">Add digital signature to critical database securables</span><span class="sxs-lookup"><span data-stu-id="d4718-357">Add digital signature to critical database securables</span></span>

| <span data-ttu-id="d4718-358">Title</span><span class="sxs-lookup"><span data-stu-id="d4718-358">Title</span></span>                   | <span data-ttu-id="d4718-359">Details</span><span class="sxs-lookup"><span data-stu-id="d4718-359">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="d4718-360">Component</span><span class="sxs-lookup"><span data-stu-id="d4718-360">Component</span></span>               | <span data-ttu-id="d4718-361">Database</span><span class="sxs-lookup"><span data-stu-id="d4718-361">Database</span></span> | 
| <span data-ttu-id="d4718-362">SDL Phase</span><span class="sxs-lookup"><span data-stu-id="d4718-362">SDL Phase</span></span>               | <span data-ttu-id="d4718-363">Build</span><span class="sxs-lookup"><span data-stu-id="d4718-363">Build</span></span> |  
| <span data-ttu-id="d4718-364">Applicable Technologies</span><span class="sxs-lookup"><span data-stu-id="d4718-364">Applicable Technologies</span></span> | <span data-ttu-id="d4718-365">Generic</span><span class="sxs-lookup"><span data-stu-id="d4718-365">Generic</span></span> |
| <span data-ttu-id="d4718-366">Attributes</span><span class="sxs-lookup"><span data-stu-id="d4718-366">Attributes</span></span>              | <span data-ttu-id="d4718-367">N/A</span><span class="sxs-lookup"><span data-stu-id="d4718-367">N/A</span></span>  |
| <span data-ttu-id="d4718-368">References</span><span class="sxs-lookup"><span data-stu-id="d4718-368">References</span></span>              | [<span data-ttu-id="d4718-369">ADD SIGNATURE (Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="d4718-369">ADD SIGNATURE (Transact-SQL)</span></span>](https://msdn.microsoft.com/library/ms181700) |
| <span data-ttu-id="d4718-370">Steps</span><span class="sxs-lookup"><span data-stu-id="d4718-370">Steps</span></span> | <span data-ttu-id="d4718-371">In cases where the integrity of a critical database securable has to be verified, digital signatures should be used.</span><span class="sxs-lookup"><span data-stu-id="d4718-371">In cases where the integrity of a critical database securable has to be verified, digital signatures should be used.</span></span> <span data-ttu-id="d4718-372">Database securables such as a stored procedure, function, assembly, or trigger can be digitally signed.</span><span class="sxs-lookup"><span data-stu-id="d4718-372">Database securables such as a stored procedure, function, assembly, or trigger can be digitally signed.</span></span> <span data-ttu-id="d4718-373">Below is an example of when this can be useful: Let us say an ISV (Independent Software Vendor) has provide support to a software delivered to one of their customers.</span><span class="sxs-lookup"><span data-stu-id="d4718-373">Below is an example of when this can be useful: Let us say an ISV (Independent Software Vendor) has provide support to a software delivered to one of their customers.</span></span> <span data-ttu-id="d4718-374">Before providing support, the ISV would want to ensure that a database securable in the software was not tampered either by mistake or by a malicious attempt.</span><span class="sxs-lookup"><span data-stu-id="d4718-374">Before providing support, the ISV would want to ensure that a database securable in the software was not tampered either by mistake or by a malicious attempt.</span></span> <span data-ttu-id="d4718-375">If the securable is digitally signed, the ISV can verify its digital signature and validate its integrity.</span><span class="sxs-lookup"><span data-stu-id="d4718-375">If the securable is digitally signed, the ISV can verify its digital signature and validate its integrity.</span></span>| 

## <a id="ekm-keys"></a><span data-ttu-id="d4718-376">Use SQL server EKM to protect encryption keys</span><span class="sxs-lookup"><span data-stu-id="d4718-376">Use SQL server EKM to protect encryption keys</span></span>

| <span data-ttu-id="d4718-377">Title</span><span class="sxs-lookup"><span data-stu-id="d4718-377">Title</span></span>                   | <span data-ttu-id="d4718-378">Details</span><span class="sxs-lookup"><span data-stu-id="d4718-378">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="d4718-379">Component</span><span class="sxs-lookup"><span data-stu-id="d4718-379">Component</span></span>               | <span data-ttu-id="d4718-380">Database</span><span class="sxs-lookup"><span data-stu-id="d4718-380">Database</span></span> | 
| <span data-ttu-id="d4718-381">SDL Phase</span><span class="sxs-lookup"><span data-stu-id="d4718-381">SDL Phase</span></span>               | <span data-ttu-id="d4718-382">Build</span><span class="sxs-lookup"><span data-stu-id="d4718-382">Build</span></span> |  
| <span data-ttu-id="d4718-383">Applicable Technologies</span><span class="sxs-lookup"><span data-stu-id="d4718-383">Applicable Technologies</span></span> | <span data-ttu-id="d4718-384">Generic</span><span class="sxs-lookup"><span data-stu-id="d4718-384">Generic</span></span> |
| <span data-ttu-id="d4718-385">Attributes</span><span class="sxs-lookup"><span data-stu-id="d4718-385">Attributes</span></span>              | <span data-ttu-id="d4718-386">N/A</span><span class="sxs-lookup"><span data-stu-id="d4718-386">N/A</span></span>  |
| <span data-ttu-id="d4718-387">References</span><span class="sxs-lookup"><span data-stu-id="d4718-387">References</span></span>              | <span data-ttu-id="d4718-388">[SQL Server Extensible Key Management (EKM)](https://msdn.microsoft.com/library/bb895340), [Extensible Key Management Using Azure Key Vault (SQL Server)](https://msdn.microsoft.com/library/dn198405)</span><span class="sxs-lookup"><span data-stu-id="d4718-388">[SQL Server Extensible Key Management (EKM)](https://msdn.microsoft.com/library/bb895340), [Extensible Key Management Using Azure Key Vault (SQL Server)](https://msdn.microsoft.com/library/dn198405)</span></span> |
| <span data-ttu-id="d4718-389">Steps</span><span class="sxs-lookup"><span data-stu-id="d4718-389">Steps</span></span> | <span data-ttu-id="d4718-390">SQL Server Extensible Key Management enables the encryption keys that protect the database files to be stored in an off-box device such as a smartcard, USB device, or EKM/HSM module.</span><span class="sxs-lookup"><span data-stu-id="d4718-390">SQL Server Extensible Key Management enables the encryption keys that protect the database files to be stored in an off-box device such as a smartcard, USB device, or EKM/HSM module.</span></span> <span data-ttu-id="d4718-391">This also enables data protection from database administrators (except members of the sysadmin group).</span><span class="sxs-lookup"><span data-stu-id="d4718-391">This also enables data protection from database administrators (except members of the sysadmin group).</span></span> <span data-ttu-id="d4718-392">Data can be encrypted by using encryption keys that only the database user has access to on the external EKM/HSM module.</span><span class="sxs-lookup"><span data-stu-id="d4718-392">Data can be encrypted by using encryption keys that only the database user has access to on the external EKM/HSM module.</span></span> |

## <a id="keys-engine"></a><span data-ttu-id="d4718-393">Use AlwaysEncrypted feature if encryption keys should not be revealed to Database engine</span><span class="sxs-lookup"><span data-stu-id="d4718-393">Use AlwaysEncrypted feature if encryption keys should not be revealed to Database engine</span></span>

| <span data-ttu-id="d4718-394">Title</span><span class="sxs-lookup"><span data-stu-id="d4718-394">Title</span></span>                   | <span data-ttu-id="d4718-395">Details</span><span class="sxs-lookup"><span data-stu-id="d4718-395">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="d4718-396">Component</span><span class="sxs-lookup"><span data-stu-id="d4718-396">Component</span></span>               | <span data-ttu-id="d4718-397">Database</span><span class="sxs-lookup"><span data-stu-id="d4718-397">Database</span></span> | 
| <span data-ttu-id="d4718-398">SDL Phase</span><span class="sxs-lookup"><span data-stu-id="d4718-398">SDL Phase</span></span>               | <span data-ttu-id="d4718-399">Build</span><span class="sxs-lookup"><span data-stu-id="d4718-399">Build</span></span> |  
| <span data-ttu-id="d4718-400">Applicable Technologies</span><span class="sxs-lookup"><span data-stu-id="d4718-400">Applicable Technologies</span></span> | <span data-ttu-id="d4718-401">SQL Azure, OnPrem</span><span class="sxs-lookup"><span data-stu-id="d4718-401">SQL Azure, OnPrem</span></span> |
| <span data-ttu-id="d4718-402">Attributes</span><span class="sxs-lookup"><span data-stu-id="d4718-402">Attributes</span></span>              | <span data-ttu-id="d4718-403">SQL Version - V12, MsSQL2016</span><span class="sxs-lookup"><span data-stu-id="d4718-403">SQL Version - V12, MsSQL2016</span></span> |
| <span data-ttu-id="d4718-404">References</span><span class="sxs-lookup"><span data-stu-id="d4718-404">References</span></span>              | [<span data-ttu-id="d4718-405">Always Encrypted (Database Engine)</span><span class="sxs-lookup"><span data-stu-id="d4718-405">Always Encrypted (Database Engine)</span></span>](https://msdn.microsoft.com/library/mt163865) |
| <span data-ttu-id="d4718-406">Steps</span><span class="sxs-lookup"><span data-stu-id="d4718-406">Steps</span></span> | <span data-ttu-id="d4718-407">Always Encrypted is a feature designed to protect sensitive data, such as credit card numbers or national identification numbers (e.g. U.S. social security numbers), stored in Azure SQL Database or SQL Server databases.</span><span class="sxs-lookup"><span data-stu-id="d4718-407">Always Encrypted is a feature designed to protect sensitive data, such as credit card numbers or national identification numbers (e.g. U.S. social security numbers), stored in Azure SQL Database or SQL Server databases.</span></span> <span data-ttu-id="d4718-408">Always Encrypted allows clients to encrypt sensitive data inside client applications and never reveal the encryption keys to the Database Engine (SQL Database or SQL Server).</span><span class="sxs-lookup"><span data-stu-id="d4718-408">Always Encrypted allows clients to encrypt sensitive data inside client applications and never reveal the encryption keys to the Database Engine (SQL Database or SQL Server).</span></span> <span data-ttu-id="d4718-409">As a result, Always Encrypted provides a separation between those who own the data (and can view it) and those who manage the data (but should have no access)</span><span class="sxs-lookup"><span data-stu-id="d4718-409">As a result, Always Encrypted provides a separation between those who own the data (and can view it) and those who manage the data (but should have no access)</span></span> |

## <a id="keys-iot"></a><span data-ttu-id="d4718-410">Store Cryptographic Keys securely on IoT Device</span><span class="sxs-lookup"><span data-stu-id="d4718-410">Store Cryptographic Keys securely on IoT Device</span></span>

| <span data-ttu-id="d4718-411">Title</span><span class="sxs-lookup"><span data-stu-id="d4718-411">Title</span></span>                   | <span data-ttu-id="d4718-412">Details</span><span class="sxs-lookup"><span data-stu-id="d4718-412">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="d4718-413">Component</span><span class="sxs-lookup"><span data-stu-id="d4718-413">Component</span></span>               | <span data-ttu-id="d4718-414">IoT Device</span><span class="sxs-lookup"><span data-stu-id="d4718-414">IoT Device</span></span> | 
| <span data-ttu-id="d4718-415">SDL Phase</span><span class="sxs-lookup"><span data-stu-id="d4718-415">SDL Phase</span></span>               | <span data-ttu-id="d4718-416">Build</span><span class="sxs-lookup"><span data-stu-id="d4718-416">Build</span></span> |  
| <span data-ttu-id="d4718-417">Applicable Technologies</span><span class="sxs-lookup"><span data-stu-id="d4718-417">Applicable Technologies</span></span> | <span data-ttu-id="d4718-418">Generic</span><span class="sxs-lookup"><span data-stu-id="d4718-418">Generic</span></span> |
| <span data-ttu-id="d4718-419">Attributes</span><span class="sxs-lookup"><span data-stu-id="d4718-419">Attributes</span></span>              | <span data-ttu-id="d4718-420">Device OS - Windows IoT Core, Device Connectivity - Azure IoT device SDKs</span><span class="sxs-lookup"><span data-stu-id="d4718-420">Device OS - Windows IoT Core, Device Connectivity - Azure IoT device SDKs</span></span> |
| <span data-ttu-id="d4718-421">References</span><span class="sxs-lookup"><span data-stu-id="d4718-421">References</span></span>              | <span data-ttu-id="d4718-422">[TPM on Windows IoT Core](https://developer.microsoft.com/windows/iot/docs/tpm), [Set up TPM on Windows IoT Core](https://developer.microsoft.com/windows/iot/win10/setuptpm), [Azure IoT Device SDK TPM](https://github.com/Azure/azure-iot-hub-vs-cs/wiki/Device-Provisioning-with-TPM)</span><span class="sxs-lookup"><span data-stu-id="d4718-422">[TPM on Windows IoT Core](https://developer.microsoft.com/windows/iot/docs/tpm), [Set up TPM on Windows IoT Core](https://developer.microsoft.com/windows/iot/win10/setuptpm), [Azure IoT Device SDK TPM](https://github.com/Azure/azure-iot-hub-vs-cs/wiki/Device-Provisioning-with-TPM)</span></span> |
| <span data-ttu-id="d4718-423">Steps</span><span class="sxs-lookup"><span data-stu-id="d4718-423">Steps</span></span> | <span data-ttu-id="d4718-424">Symmetric or Certificate Private keys securely in a hardware protected storage like TPM or Smart Card chips.</span><span class="sxs-lookup"><span data-stu-id="d4718-424">Symmetric or Certificate Private keys securely in a hardware protected storage like TPM or Smart Card chips.</span></span> <span data-ttu-id="d4718-425">Windows 10 IoT Core supports the usr of a TPM and there are several compatible TPMs that can be used: https://developer.microsoft.com/windows/iot/win10/tpm.</span><span class="sxs-lookup"><span data-stu-id="d4718-425">Windows 10 IoT Core supports the usr of a TPM and there are several compatible TPMs that can be used: https://developer.microsoft.com/windows/iot/win10/tpm.</span></span> <span data-ttu-id="d4718-426">It is recommended to use a Firmware or Discrete TPM.</span><span class="sxs-lookup"><span data-stu-id="d4718-426">It is recommended to use a Firmware or Discrete TPM.</span></span> <span data-ttu-id="d4718-427">A Software TPM should only be used for development and testing purposes.</span><span class="sxs-lookup"><span data-stu-id="d4718-427">A Software TPM should only be used for development and testing purposes.</span></span> <span data-ttu-id="d4718-428">Once a TPM is available and the keys are provisioned in it, the code that generates the token should be written without hard coding any sensitive information in it.</span><span class="sxs-lookup"><span data-stu-id="d4718-428">Once a TPM is available and the keys are provisioned in it, the code that generates the token should be written without hard coding any sensitive information in it.</span></span> | 

### <a name="example"></a><span data-ttu-id="d4718-429">Example</span><span class="sxs-lookup"><span data-stu-id="d4718-429">Example</span></span>
```
TpmDevice myDevice = new TpmDevice(0);
// Use logical device 0 on the TPM 
string hubUri = myDevice.GetHostName(); 
string deviceId = myDevice.GetDeviceId(); 
string sasToken = myDevice.GetSASToken(); 

var deviceClient = DeviceClient.Create( hubUri, AuthenticationMethodFactory. CreateAuthenticationWithToken(deviceId, sasToken), TransportType.Amqp); 
```
<span data-ttu-id="d4718-430">As can be seen, the device primary key is not present in the code.</span><span class="sxs-lookup"><span data-stu-id="d4718-430">As can be seen, the device primary key is not present in the code.</span></span> <span data-ttu-id="d4718-431">Instead, it is stored in the TPM at slot 0.</span><span class="sxs-lookup"><span data-stu-id="d4718-431">Instead, it is stored in the TPM at slot 0.</span></span> <span data-ttu-id="d4718-432">TPM device generates a short-lived SAS token that is then used to connect to the IoT Hub.</span><span class="sxs-lookup"><span data-stu-id="d4718-432">TPM device generates a short-lived SAS token that is then used to connect to the IoT Hub.</span></span> 

## <a id="random-hub"></a><span data-ttu-id="d4718-433">Generate a random symmetric key of sufficient length for authentication to IoT Hub</span><span class="sxs-lookup"><span data-stu-id="d4718-433">Generate a random symmetric key of sufficient length for authentication to IoT Hub</span></span>

| <span data-ttu-id="d4718-434">Title</span><span class="sxs-lookup"><span data-stu-id="d4718-434">Title</span></span>                   | <span data-ttu-id="d4718-435">Details</span><span class="sxs-lookup"><span data-stu-id="d4718-435">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="d4718-436">Component</span><span class="sxs-lookup"><span data-stu-id="d4718-436">Component</span></span>               | <span data-ttu-id="d4718-437">IoT Cloud Gateway</span><span class="sxs-lookup"><span data-stu-id="d4718-437">IoT Cloud Gateway</span></span> | 
| <span data-ttu-id="d4718-438">SDL Phase</span><span class="sxs-lookup"><span data-stu-id="d4718-438">SDL Phase</span></span>               | <span data-ttu-id="d4718-439">Build</span><span class="sxs-lookup"><span data-stu-id="d4718-439">Build</span></span> |  
| <span data-ttu-id="d4718-440">Applicable Technologies</span><span class="sxs-lookup"><span data-stu-id="d4718-440">Applicable Technologies</span></span> | <span data-ttu-id="d4718-441">Generic</span><span class="sxs-lookup"><span data-stu-id="d4718-441">Generic</span></span> |
| <span data-ttu-id="d4718-442">Attributes</span><span class="sxs-lookup"><span data-stu-id="d4718-442">Attributes</span></span>              | <span data-ttu-id="d4718-443">Gateway choice - Azure IoT Hub</span><span class="sxs-lookup"><span data-stu-id="d4718-443">Gateway choice - Azure IoT Hub</span></span> |
| <span data-ttu-id="d4718-444">References</span><span class="sxs-lookup"><span data-stu-id="d4718-444">References</span></span>              | <span data-ttu-id="d4718-445">N/A</span><span class="sxs-lookup"><span data-stu-id="d4718-445">N/A</span></span>  |
| <span data-ttu-id="d4718-446">Steps</span><span class="sxs-lookup"><span data-stu-id="d4718-446">Steps</span></span> | <span data-ttu-id="d4718-447">IoT Hub contains a device Identity Registry and while provisioning a device, automatically generates a random Symmetric key.</span><span class="sxs-lookup"><span data-stu-id="d4718-447">IoT Hub contains a device Identity Registry and while provisioning a device, automatically generates a random Symmetric key.</span></span> <span data-ttu-id="d4718-448">It is recommended to use this feature of the Azure IoT Hub Identity Registry to generate the key used for authentication.</span><span class="sxs-lookup"><span data-stu-id="d4718-448">It is recommended to use this feature of the Azure IoT Hub Identity Registry to generate the key used for authentication.</span></span> <span data-ttu-id="d4718-449">IoT Hub also allows for a key to be specified while creating the device.</span><span class="sxs-lookup"><span data-stu-id="d4718-449">IoT Hub also allows for a key to be specified while creating the device.</span></span> <span data-ttu-id="d4718-450">If a key is generated outside of IoT Hub during device provisioning, it is recommended to create a random symmetric key or at least 256 bits.</span><span class="sxs-lookup"><span data-stu-id="d4718-450">If a key is generated outside of IoT Hub during device provisioning, it is recommended to create a random symmetric key or at least 256 bits.</span></span> |

## <a id="pin-remote"></a><span data-ttu-id="d4718-451">Ensure a device management policy is in place that requires a use PIN and allows remote wiping</span><span class="sxs-lookup"><span data-stu-id="d4718-451">Ensure a device management policy is in place that requires a use PIN and allows remote wiping</span></span>

| <span data-ttu-id="d4718-452">Title</span><span class="sxs-lookup"><span data-stu-id="d4718-452">Title</span></span>                   | <span data-ttu-id="d4718-453">Details</span><span class="sxs-lookup"><span data-stu-id="d4718-453">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="d4718-454">Component</span><span class="sxs-lookup"><span data-stu-id="d4718-454">Component</span></span>               | <span data-ttu-id="d4718-455">Dynamics CRM Mobile Client</span><span class="sxs-lookup"><span data-stu-id="d4718-455">Dynamics CRM Mobile Client</span></span> | 
| <span data-ttu-id="d4718-456">SDL Phase</span><span class="sxs-lookup"><span data-stu-id="d4718-456">SDL Phase</span></span>               | <span data-ttu-id="d4718-457">Deployment</span><span class="sxs-lookup"><span data-stu-id="d4718-457">Deployment</span></span> |  
| <span data-ttu-id="d4718-458">Applicable Technologies</span><span class="sxs-lookup"><span data-stu-id="d4718-458">Applicable Technologies</span></span> | <span data-ttu-id="d4718-459">Generic</span><span class="sxs-lookup"><span data-stu-id="d4718-459">Generic</span></span> |
| <span data-ttu-id="d4718-460">Attributes</span><span class="sxs-lookup"><span data-stu-id="d4718-460">Attributes</span></span>              | <span data-ttu-id="d4718-461">N/A</span><span class="sxs-lookup"><span data-stu-id="d4718-461">N/A</span></span>  |
| <span data-ttu-id="d4718-462">References</span><span class="sxs-lookup"><span data-stu-id="d4718-462">References</span></span>              | <span data-ttu-id="d4718-463">N/A</span><span class="sxs-lookup"><span data-stu-id="d4718-463">N/A</span></span>  |
| <span data-ttu-id="d4718-464">Steps</span><span class="sxs-lookup"><span data-stu-id="d4718-464">Steps</span></span> | <span data-ttu-id="d4718-465">Ensure a device management policy is in place that requires a use PIN and allows remote wiping</span><span class="sxs-lookup"><span data-stu-id="d4718-465">Ensure a device management policy is in place that requires a use PIN and allows remote wiping</span></span> |

## <a id="bitlocker"></a><span data-ttu-id="d4718-466">Ensure a device management policy is in place that requires a PIN/password/auto lock and encrypts all data (e.g. Bitlocker)</span><span class="sxs-lookup"><span data-stu-id="d4718-466">Ensure a device management policy is in place that requires a PIN/password/auto lock and encrypts all data (e.g. Bitlocker)</span></span>

| <span data-ttu-id="d4718-467">Title</span><span class="sxs-lookup"><span data-stu-id="d4718-467">Title</span></span>                   | <span data-ttu-id="d4718-468">Details</span><span class="sxs-lookup"><span data-stu-id="d4718-468">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="d4718-469">Component</span><span class="sxs-lookup"><span data-stu-id="d4718-469">Component</span></span>               | <span data-ttu-id="d4718-470">Dynamics CRM Outlook Client</span><span class="sxs-lookup"><span data-stu-id="d4718-470">Dynamics CRM Outlook Client</span></span> | 
| <span data-ttu-id="d4718-471">SDL Phase</span><span class="sxs-lookup"><span data-stu-id="d4718-471">SDL Phase</span></span>               | <span data-ttu-id="d4718-472">Build</span><span class="sxs-lookup"><span data-stu-id="d4718-472">Build</span></span> |  
| <span data-ttu-id="d4718-473">Applicable Technologies</span><span class="sxs-lookup"><span data-stu-id="d4718-473">Applicable Technologies</span></span> | <span data-ttu-id="d4718-474">Generic</span><span class="sxs-lookup"><span data-stu-id="d4718-474">Generic</span></span> |
| <span data-ttu-id="d4718-475">Attributes</span><span class="sxs-lookup"><span data-stu-id="d4718-475">Attributes</span></span>              | <span data-ttu-id="d4718-476">N/A</span><span class="sxs-lookup"><span data-stu-id="d4718-476">N/A</span></span>  |
| <span data-ttu-id="d4718-477">References</span><span class="sxs-lookup"><span data-stu-id="d4718-477">References</span></span>              | <span data-ttu-id="d4718-478">N/A</span><span class="sxs-lookup"><span data-stu-id="d4718-478">N/A</span></span>  |
| <span data-ttu-id="d4718-479">Steps</span><span class="sxs-lookup"><span data-stu-id="d4718-479">Steps</span></span> | <span data-ttu-id="d4718-480">Ensure a device management policy is in place that requires a PIN/password/auto lock and encrypts all data (e.g. Bitlocker)</span><span class="sxs-lookup"><span data-stu-id="d4718-480">Ensure a device management policy is in place that requires a PIN/password/auto lock and encrypts all data (e.g. Bitlocker)</span></span> |

## <a id="rolled-server"></a><span data-ttu-id="d4718-481">Ensure that signing keys are rolled over when using Identity Server</span><span class="sxs-lookup"><span data-stu-id="d4718-481">Ensure that signing keys are rolled over when using Identity Server</span></span>

| <span data-ttu-id="d4718-482">Title</span><span class="sxs-lookup"><span data-stu-id="d4718-482">Title</span></span>                   | <span data-ttu-id="d4718-483">Details</span><span class="sxs-lookup"><span data-stu-id="d4718-483">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="d4718-484">Component</span><span class="sxs-lookup"><span data-stu-id="d4718-484">Component</span></span>               | <span data-ttu-id="d4718-485">Identity Server</span><span class="sxs-lookup"><span data-stu-id="d4718-485">Identity Server</span></span> | 
| <span data-ttu-id="d4718-486">SDL Phase</span><span class="sxs-lookup"><span data-stu-id="d4718-486">SDL Phase</span></span>               | <span data-ttu-id="d4718-487">Deployment</span><span class="sxs-lookup"><span data-stu-id="d4718-487">Deployment</span></span> |  
| <span data-ttu-id="d4718-488">Applicable Technologies</span><span class="sxs-lookup"><span data-stu-id="d4718-488">Applicable Technologies</span></span> | <span data-ttu-id="d4718-489">Generic</span><span class="sxs-lookup"><span data-stu-id="d4718-489">Generic</span></span> |
| <span data-ttu-id="d4718-490">Attributes</span><span class="sxs-lookup"><span data-stu-id="d4718-490">Attributes</span></span>              | <span data-ttu-id="d4718-491">N/A</span><span class="sxs-lookup"><span data-stu-id="d4718-491">N/A</span></span>  |
| <span data-ttu-id="d4718-492">References</span><span class="sxs-lookup"><span data-stu-id="d4718-492">References</span></span>              | [<span data-ttu-id="d4718-493">Identity Server - Keys, Signatures and Cryptography </span><span class="sxs-lookup"><span data-stu-id="d4718-493">Identity Server - Keys, Signatures and Cryptography </span></span>](https://identityserver.github.io/Documentation/docsv2/configuration/crypto.html) |
| <span data-ttu-id="d4718-494">Steps</span><span class="sxs-lookup"><span data-stu-id="d4718-494">Steps</span></span> | <span data-ttu-id="d4718-495">Ensure that signing keys are rolled over when using Identity Server.</span><span class="sxs-lookup"><span data-stu-id="d4718-495">Ensure that signing keys are rolled over when using Identity Server.</span></span> <span data-ttu-id="d4718-496">The link in the references section explains how this should be planned without causing outages to applications relying on Identity Server.</span><span class="sxs-lookup"><span data-stu-id="d4718-496">The link in the references section explains how this should be planned without causing outages to applications relying on Identity Server.</span></span> |

## <a id="client-server"></a><span data-ttu-id="d4718-497">Ensure that cryptographically strong client id, client secret are used in Identity Server</span><span class="sxs-lookup"><span data-stu-id="d4718-497">Ensure that cryptographically strong client id, client secret are used in Identity Server</span></span>

| <span data-ttu-id="d4718-498">Title</span><span class="sxs-lookup"><span data-stu-id="d4718-498">Title</span></span>                   | <span data-ttu-id="d4718-499">Details</span><span class="sxs-lookup"><span data-stu-id="d4718-499">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="d4718-500">Component</span><span class="sxs-lookup"><span data-stu-id="d4718-500">Component</span></span>               | <span data-ttu-id="d4718-501">Identity Server</span><span class="sxs-lookup"><span data-stu-id="d4718-501">Identity Server</span></span> | 
| <span data-ttu-id="d4718-502">SDL Phase</span><span class="sxs-lookup"><span data-stu-id="d4718-502">SDL Phase</span></span>               | <span data-ttu-id="d4718-503">Build</span><span class="sxs-lookup"><span data-stu-id="d4718-503">Build</span></span> |  
| <span data-ttu-id="d4718-504">Applicable Technologies</span><span class="sxs-lookup"><span data-stu-id="d4718-504">Applicable Technologies</span></span> | <span data-ttu-id="d4718-505">Generic</span><span class="sxs-lookup"><span data-stu-id="d4718-505">Generic</span></span> |
| <span data-ttu-id="d4718-506">Attributes</span><span class="sxs-lookup"><span data-stu-id="d4718-506">Attributes</span></span>              | <span data-ttu-id="d4718-507">N/A</span><span class="sxs-lookup"><span data-stu-id="d4718-507">N/A</span></span>  |
| <span data-ttu-id="d4718-508">References</span><span class="sxs-lookup"><span data-stu-id="d4718-508">References</span></span>              | <span data-ttu-id="d4718-509">N/A</span><span class="sxs-lookup"><span data-stu-id="d4718-509">N/A</span></span>  |
| <span data-ttu-id="d4718-510">Steps</span><span class="sxs-lookup"><span data-stu-id="d4718-510">Steps</span></span> | <p><span data-ttu-id="d4718-511">Ensure that cryptographically strong client id, client secret are used in Identity Server.</span><span class="sxs-lookup"><span data-stu-id="d4718-511">Ensure that cryptographically strong client id, client secret are used in Identity Server.</span></span> <span data-ttu-id="d4718-512">The following guidelines should be used while generating a client id and secret:</span><span class="sxs-lookup"><span data-stu-id="d4718-512">The following guidelines should be used while generating a client id and secret:</span></span></p><ul><li><span data-ttu-id="d4718-513">Generate a random GUID as the client ID</span><span class="sxs-lookup"><span data-stu-id="d4718-513">Generate a random GUID as the client ID</span></span></li><li><span data-ttu-id="d4718-514">Generate a cryptographically random 256 bit key as the secret</span><span class="sxs-lookup"><span data-stu-id="d4718-514">Generate a cryptographically random 256 bit key as the secret</span></span></li></ul>|