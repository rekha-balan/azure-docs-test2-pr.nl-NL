---
title: Azure Standard Load Balancer and Availability Zones | Microsoft Docs
description: Standard Load Balancer and Availability Zones
services: load-balancer
documentationcenter: na
author: KumudD
manager: jeconnoc
editor: ''
ms.assetid: ''
ms.service: load-balancer
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 03/29/2018
ms.author: kumud
ms.openlocfilehash: 308e085bf98dea179a81b3ac28c14de2994b5927
ms.sourcegitcommit: d1451406a010fd3aa854dc8e5b77dc5537d8050e
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 09/13/2018
ms.locfileid: "44966337"
---
# <a name="standard-load-balancer-and-availability-zones"></a><span data-ttu-id="7ea87-103">Standard Load Balancer and Availability Zones</span><span class="sxs-lookup"><span data-stu-id="7ea87-103">Standard Load Balancer and Availability Zones</span></span>

<span data-ttu-id="7ea87-104">Azure Load Balancer's Standard SKU supports [Availability Zones](../availability-zones/az-overview.md) scenarios.</span><span class="sxs-lookup"><span data-stu-id="7ea87-104">Azure Load Balancer's Standard SKU supports [Availability Zones](../availability-zones/az-overview.md) scenarios.</span></span> <span data-ttu-id="7ea87-105">Several new concepts are available with Standard Load Balancer, which allow you to optimize availability in your end-to-end scenario by aligning resources with zones and distributing them across zones.</span><span class="sxs-lookup"><span data-stu-id="7ea87-105">Several new concepts are available with Standard Load Balancer, which allow you to optimize availability in your end-to-end scenario by aligning resources with zones and distributing them across zones.</span></span>  <span data-ttu-id="7ea87-106">Review [Availability Zones](../availability-zones/az-overview.md) for guidance on what Availability Zones are, which regions currently support Availability Zones, and other related concepts and products.</span><span class="sxs-lookup"><span data-stu-id="7ea87-106">Review [Availability Zones](../availability-zones/az-overview.md) for guidance on what Availability Zones are, which regions currently support Availability Zones, and other related concepts and products.</span></span> <span data-ttu-id="7ea87-107">Availability Zones in combination with Standard Load Balancer is an expansive and flexible feature set that can create many different scenarios.</span><span class="sxs-lookup"><span data-stu-id="7ea87-107">Availability Zones in combination with Standard Load Balancer is an expansive and flexible feature set that can create many different scenarios.</span></span>  <span data-ttu-id="7ea87-108">Review this document to understand these [concepts](#concepts) and fundamental scenario [design guidance](#design).</span><span class="sxs-lookup"><span data-stu-id="7ea87-108">Review this document to understand these [concepts](#concepts) and fundamental scenario [design guidance](#design).</span></span>

>[!NOTE]
><span data-ttu-id="7ea87-109">Review [Availability Zones](https://aka.ms/availabilityzones) for other related topics.</span><span class="sxs-lookup"><span data-stu-id="7ea87-109">Review [Availability Zones](https://aka.ms/availabilityzones) for other related topics.</span></span> 

## <a name="concepts"></a> <span data-ttu-id="7ea87-110">Availability Zones concepts applied to Load Balancer</span><span class="sxs-lookup"><span data-stu-id="7ea87-110">Availability Zones concepts applied to Load Balancer</span></span>

<span data-ttu-id="7ea87-111">There's no direct relationship between Load Balancer resources and actual infrastructure; creating a Load Balancer doesn't create an instance.</span><span class="sxs-lookup"><span data-stu-id="7ea87-111">There's no direct relationship between Load Balancer resources and actual infrastructure; creating a Load Balancer doesn't create an instance.</span></span> <span data-ttu-id="7ea87-112">Load Balancer resources are objects within which you can express how Azure should program its prebuilt multi-tenant infrastructure to achieve the scenario you wish to create.</span><span class="sxs-lookup"><span data-stu-id="7ea87-112">Load Balancer resources are objects within which you can express how Azure should program its prebuilt multi-tenant infrastructure to achieve the scenario you wish to create.</span></span>  <span data-ttu-id="7ea87-113">This is significant in the context of Availability Zones because a single Load Balancer resource can control programming of infrastructure in multiple Availability Zones while a zone-redundant service appears as one resource from a customer point of view.</span><span class="sxs-lookup"><span data-stu-id="7ea87-113">This is significant in the context of Availability Zones because a single Load Balancer resource can control programming of infrastructure in multiple Availability Zones while a zone-redundant service appears as one resource from a customer point of view.</span></span>

<span data-ttu-id="7ea87-114">A Load Balancer resource's functions are expressed as a frontend, a rule, a health probe, and a backend pool definition.</span><span class="sxs-lookup"><span data-stu-id="7ea87-114">A Load Balancer resource's functions are expressed as a frontend, a rule, a health probe, and a backend pool definition.</span></span>

<span data-ttu-id="7ea87-115">In the context of Availability Zones, the behavior and properties of a Load Balancer resource are described as zone-redundant or zonal.</span><span class="sxs-lookup"><span data-stu-id="7ea87-115">In the context of Availability Zones, the behavior and properties of a Load Balancer resource are described as zone-redundant or zonal.</span></span>  <span data-ttu-id="7ea87-116">Zone-redundant and zonal describe the zonality of a property.</span><span class="sxs-lookup"><span data-stu-id="7ea87-116">Zone-redundant and zonal describe the zonality of a property.</span></span>  <span data-ttu-id="7ea87-117">In the context of Load Balancer, zone-redundant always means *all zones* and zonal means guaranteeing the service to a *single zone*.</span><span class="sxs-lookup"><span data-stu-id="7ea87-117">In the context of Load Balancer, zone-redundant always means *all zones* and zonal means guaranteeing the service to a *single zone*.</span></span>

<span data-ttu-id="7ea87-118">Both public and internal Load Balancer support zone-redundant and zonal scenarios and both can direct traffic across zones as needed (*cross-zone load balancing*).</span><span class="sxs-lookup"><span data-stu-id="7ea87-118">Both public and internal Load Balancer support zone-redundant and zonal scenarios and both can direct traffic across zones as needed (*cross-zone load balancing*).</span></span>

<span data-ttu-id="7ea87-119">A Load Balancer resource itself is regional and never zonal.</span><span class="sxs-lookup"><span data-stu-id="7ea87-119">A Load Balancer resource itself is regional and never zonal.</span></span>  <span data-ttu-id="7ea87-120">And a VNet and subnet are always regional and never zonal.</span><span class="sxs-lookup"><span data-stu-id="7ea87-120">And a VNet and subnet are always regional and never zonal.</span></span>

### <a name="frontend"></a><span data-ttu-id="7ea87-121">Frontend</span><span class="sxs-lookup"><span data-stu-id="7ea87-121">Frontend</span></span>

<span data-ttu-id="7ea87-122">A Load Balancer frontend is a Frontend IP configuration referencing either a public IP address resource or a private IP address within the subnet of a virtual network resource.</span><span class="sxs-lookup"><span data-stu-id="7ea87-122">A Load Balancer frontend is a Frontend IP configuration referencing either a public IP address resource or a private IP address within the subnet of a virtual network resource.</span></span>  <span data-ttu-id="7ea87-123">It forms the load balanced endpoint where your service is exposed.</span><span class="sxs-lookup"><span data-stu-id="7ea87-123">It forms the load balanced endpoint where your service is exposed.</span></span>

<span data-ttu-id="7ea87-124">A Load Balancer resource can contain both zonal and zone-redundant frontends simultaneously.</span><span class="sxs-lookup"><span data-stu-id="7ea87-124">A Load Balancer resource can contain both zonal and zone-redundant frontends simultaneously.</span></span> 

<span data-ttu-id="7ea87-125">When a public IP resource has been guaranteed to a zone, the zonality (or lack thereof) isn't mutable.</span><span class="sxs-lookup"><span data-stu-id="7ea87-125">When a public IP resource has been guaranteed to a zone, the zonality (or lack thereof) isn't mutable.</span></span>  <span data-ttu-id="7ea87-126">If you wish to change or omit the zonality of a public IP frontend, you need to recreate the public IP in the appropriate zone.</span><span class="sxs-lookup"><span data-stu-id="7ea87-126">If you wish to change or omit the zonality of a public IP frontend, you need to recreate the public IP in the appropriate zone.</span></span>  

<span data-ttu-id="7ea87-127">You can change the zonality of a frontend of an internal Load Balancer by removing and recreating the frontend, changing or omitting the zonality.</span><span class="sxs-lookup"><span data-stu-id="7ea87-127">You can change the zonality of a frontend of an internal Load Balancer by removing and recreating the frontend, changing or omitting the zonality.</span></span>

<span data-ttu-id="7ea87-128">When using multiple frontends, review [multiple frontends for Load Balancer](load-balancer-multivip-overview.md) for important considerations.</span><span class="sxs-lookup"><span data-stu-id="7ea87-128">When using multiple frontends, review [multiple frontends for Load Balancer](load-balancer-multivip-overview.md) for important considerations.</span></span>

#### <a name="zone-redundant-by-default"></a><span data-ttu-id="7ea87-129">Zone redundant by default</span><span class="sxs-lookup"><span data-stu-id="7ea87-129">Zone redundant by default</span></span>

<span data-ttu-id="7ea87-130">In a region with Availability Zones, a Standard Load Balancer frontend is zone-redundant by default.</span><span class="sxs-lookup"><span data-stu-id="7ea87-130">In a region with Availability Zones, a Standard Load Balancer frontend is zone-redundant by default.</span></span>  <span data-ttu-id="7ea87-131">A single frontend IP address can survive zone failure and can be used to reach all backend pool members irrespective of the zone.</span><span class="sxs-lookup"><span data-stu-id="7ea87-131">A single frontend IP address can survive zone failure and can be used to reach all backend pool members irrespective of the zone.</span></span> <span data-ttu-id="7ea87-132">This doesn't mean hitless data path, but any retries or reestablishment will succeed.</span><span class="sxs-lookup"><span data-stu-id="7ea87-132">This doesn't mean hitless data path, but any retries or reestablishment will succeed.</span></span> <span data-ttu-id="7ea87-133">DNS redundancy schemes aren't required.</span><span class="sxs-lookup"><span data-stu-id="7ea87-133">DNS redundancy schemes aren't required.</span></span> <span data-ttu-id="7ea87-134">The frontend's single IP address is served simultaneously by independent infrastructure deployments in every Availability Zone.</span><span class="sxs-lookup"><span data-stu-id="7ea87-134">The frontend's single IP address is served simultaneously by independent infrastructure deployments in every Availability Zone.</span></span>  <span data-ttu-id="7ea87-135">Zone-redundant means that all inbound or outbound flows are served by all Availability Zones in a region simultaneously using a single IP address.</span><span class="sxs-lookup"><span data-stu-id="7ea87-135">Zone-redundant means that all inbound or outbound flows are served by all Availability Zones in a region simultaneously using a single IP address.</span></span>

<span data-ttu-id="7ea87-136">One or more Availability Zones can fail and the data path survives as long as one zone in the region remains healthy.</span><span class="sxs-lookup"><span data-stu-id="7ea87-136">One or more Availability Zones can fail and the data path survives as long as one zone in the region remains healthy.</span></span> <span data-ttu-id="7ea87-137">Zone-redundant configuration is the default and requires no additional actions.</span><span class="sxs-lookup"><span data-stu-id="7ea87-137">Zone-redundant configuration is the default and requires no additional actions.</span></span>  <span data-ttu-id="7ea87-138">When a region gains the ability to support Availability Zones, an existing frontend becomes zone-redundant automatically.</span><span class="sxs-lookup"><span data-stu-id="7ea87-138">When a region gains the ability to support Availability Zones, an existing frontend becomes zone-redundant automatically.</span></span>

<span data-ttu-id="7ea87-139">Use the following script to create a zone-redundant Public IP address for your internal Standard Load Balancer.</span><span class="sxs-lookup"><span data-stu-id="7ea87-139">Use the following script to create a zone-redundant Public IP address for your internal Standard Load Balancer.</span></span> <span data-ttu-id="7ea87-140">If you're using existing Resource Manager templates in your configuration, add the **sku** section to these templates.</span><span class="sxs-lookup"><span data-stu-id="7ea87-140">If you're using existing Resource Manager templates in your configuration, add the **sku** section to these templates.</span></span>

```json
            "apiVersion": "2017-08-01",
            "type": "Microsoft.Network/publicIPAddresses",
            "name": "public_ip_standard",
            "location": "region",
            "sku":
            {
                "name": "Standard"
            },
```

<span data-ttu-id="7ea87-141">Use the following script to create a zone-redundant frontend IP address for your internal Standard Load Balancer.</span><span class="sxs-lookup"><span data-stu-id="7ea87-141">Use the following script to create a zone-redundant frontend IP address for your internal Standard Load Balancer.</span></span> <span data-ttu-id="7ea87-142">If you're using existing Resource Manager templates in your configuration, add the **sku** section to these templates.</span><span class="sxs-lookup"><span data-stu-id="7ea87-142">If you're using existing Resource Manager templates in your configuration, add the **sku** section to these templates.</span></span>

```json
            "apiVersion": "2017-08-01",
            "type": "Microsoft.Network/loadBalancers",
            "name": "load_balancer_standard",
            "location": "[resourceGroup().location]",
            "sku":
            {
                "name": "Standard"
            },
            "properties": {
                "frontendIPConfigurations": [
                    {
                        "name": "zone_redundant_frontend",
                        "properties": {
                            "subnet": {
                                "Id": "[variables('subnetRef')]"
                            },
                            "privateIPAddress": "10.0.0.6",
                            "privateIPAllocationMethod": "Static"
                        }
                    },
                ],
```

#### <a name="optional-zone-guarantee"></a><span data-ttu-id="7ea87-143">Optional zone guarantee</span><span class="sxs-lookup"><span data-stu-id="7ea87-143">Optional zone guarantee</span></span>

<span data-ttu-id="7ea87-144">You can choose to have a frontend guaranteed to a single zone, which is known as a *zonal frontend*.</span><span class="sxs-lookup"><span data-stu-id="7ea87-144">You can choose to have a frontend guaranteed to a single zone, which is known as a *zonal frontend*.</span></span>  <span data-ttu-id="7ea87-145">This means any inbound or outbound flow is served by a single zone in a region.</span><span class="sxs-lookup"><span data-stu-id="7ea87-145">This means any inbound or outbound flow is served by a single zone in a region.</span></span>  <span data-ttu-id="7ea87-146">Your frontend shares fate with the health of the zone.</span><span class="sxs-lookup"><span data-stu-id="7ea87-146">Your frontend shares fate with the health of the zone.</span></span>  <span data-ttu-id="7ea87-147">The data path is unaffected by failures in zones other than where it was guaranteed.</span><span class="sxs-lookup"><span data-stu-id="7ea87-147">The data path is unaffected by failures in zones other than where it was guaranteed.</span></span> <span data-ttu-id="7ea87-148">You can use zonal frontends to expose an IP address per Availability Zone.</span><span class="sxs-lookup"><span data-stu-id="7ea87-148">You can use zonal frontends to expose an IP address per Availability Zone.</span></span>  <span data-ttu-id="7ea87-149">Also, you can consume zonal frontends directly or, when the frontend consists of public IP addresses, integrate them with a DNS load balancing product like [Traffic Manager](../traffic-manager/traffic-manager-overview.md) and use a single DNS name, which a client will resolve to multiple zonal IP addresses.</span><span class="sxs-lookup"><span data-stu-id="7ea87-149">Also, you can consume zonal frontends directly or, when the frontend consists of public IP addresses, integrate them with a DNS load balancing product like [Traffic Manager](../traffic-manager/traffic-manager-overview.md) and use a single DNS name, which a client will resolve to multiple zonal IP addresses.</span></span>  <span data-ttu-id="7ea87-150">You can also use this to expose per zone load-balanced endpoints to individually monitor each zone.</span><span class="sxs-lookup"><span data-stu-id="7ea87-150">You can also use this to expose per zone load-balanced endpoints to individually monitor each zone.</span></span>  <span data-ttu-id="7ea87-151">If you wish to blend these concepts (zone-redundant and zonal for same backend), review [multiple frontends for Azure Load Balancer](load-balancer-multivip-overview.md).</span><span class="sxs-lookup"><span data-stu-id="7ea87-151">If you wish to blend these concepts (zone-redundant and zonal for same backend), review [multiple frontends for Azure Load Balancer](load-balancer-multivip-overview.md).</span></span>

<span data-ttu-id="7ea87-152">For a public Load Balancer frontend, you add a *zones* parameter to the public IP referenced by the frontend IP configuration.</span><span class="sxs-lookup"><span data-stu-id="7ea87-152">For a public Load Balancer frontend, you add a *zones* parameter to the public IP referenced by the frontend IP configuration.</span></span>  

<span data-ttu-id="7ea87-153">For an internal Load Balancer frontend, add a *zones* parameter to the internal Load Balancer frontend IP configuration.</span><span class="sxs-lookup"><span data-stu-id="7ea87-153">For an internal Load Balancer frontend, add a *zones* parameter to the internal Load Balancer frontend IP configuration.</span></span> <span data-ttu-id="7ea87-154">The zonal frontend causes the Load Balancer to guarantee an IP address in a subnet to a specific zone.</span><span class="sxs-lookup"><span data-stu-id="7ea87-154">The zonal frontend causes the Load Balancer to guarantee an IP address in a subnet to a specific zone.</span></span>

<span data-ttu-id="7ea87-155">Use the following script to create a zonal Standard Public IP address in Availability Zone 1.</span><span class="sxs-lookup"><span data-stu-id="7ea87-155">Use the following script to create a zonal Standard Public IP address in Availability Zone 1.</span></span> <span data-ttu-id="7ea87-156">If you're using existing Resource Manager templates in your configuration, add the **sku** section to these templates.</span><span class="sxs-lookup"><span data-stu-id="7ea87-156">If you're using existing Resource Manager templates in your configuration, add the **sku** section to these templates.</span></span>

```json
            "apiVersion": "2017-08-01",
            "type": "Microsoft.Network/publicIPAddresses",
            "name": "public_ip_standard",
            "location": "[resourceGroup().location]",
            "zones": [ "1" ],
            "sku":
            {
                "name": "Standard"
            },
```

<span data-ttu-id="7ea87-157">Use the following script to create an internal Standard Load Balancer front end in Availability Zone 1.</span><span class="sxs-lookup"><span data-stu-id="7ea87-157">Use the following script to create an internal Standard Load Balancer front end in Availability Zone 1.</span></span>

<span data-ttu-id="7ea87-158">If you're using existing Resource Manager templates in your configuration, add the **sku** section to these templates.</span><span class="sxs-lookup"><span data-stu-id="7ea87-158">If you're using existing Resource Manager templates in your configuration, add the **sku** section to these templates.</span></span> <span data-ttu-id="7ea87-159">Also, define the **zones** property in the frontend IP configuration for the child resource.</span><span class="sxs-lookup"><span data-stu-id="7ea87-159">Also, define the **zones** property in the frontend IP configuration for the child resource.</span></span>

```json
            "apiVersion": "2017-08-01",
            "type": "Microsoft.Network/loadBalancers",
            "name": "load_balancer_standard",
            "location": "region",
            "sku":
            {
                "name": "Standard"
            },
            "properties": {
                "frontendIPConfigurations": [
                    {
                        "name": "zonal_frontend_in_az1",
                        "zones": [ "1" ],
                        "properties": {
                            "subnet": {
                                "Id": "[variables('subnetRef')]"
                            },
                            "privateIPAddress": "10.0.0.6",
                            "privateIPAllocationMethod": "Static"
                        }
                    },
                ],
```

### <a name="cross-zone-load-balancing"></a><span data-ttu-id="7ea87-160">Cross-zone Load Balancing</span><span class="sxs-lookup"><span data-stu-id="7ea87-160">Cross-zone Load Balancing</span></span>

<span data-ttu-id="7ea87-161">Cross-zone load balancing is the ability of Load Balancer to reach a backend endpoint in any zone and is independent of frontend and its zonality.</span><span class="sxs-lookup"><span data-stu-id="7ea87-161">Cross-zone load balancing is the ability of Load Balancer to reach a backend endpoint in any zone and is independent of frontend and its zonality.</span></span>

<span data-ttu-id="7ea87-162">If you wish to align and guarantee your deployment within a single zone, align zonal frontend and zonal backend resources to the same zone.</span><span class="sxs-lookup"><span data-stu-id="7ea87-162">If you wish to align and guarantee your deployment within a single zone, align zonal frontend and zonal backend resources to the same zone.</span></span> <span data-ttu-id="7ea87-163">No further action is required.</span><span class="sxs-lookup"><span data-stu-id="7ea87-163">No further action is required.</span></span>

### <a name="backend"></a><span data-ttu-id="7ea87-164">Backend</span><span class="sxs-lookup"><span data-stu-id="7ea87-164">Backend</span></span>

<span data-ttu-id="7ea87-165">Load Balancer works with Virtual Machines.</span><span class="sxs-lookup"><span data-stu-id="7ea87-165">Load Balancer works with Virtual Machines.</span></span>  <span data-ttu-id="7ea87-166">Any VM in a single VNet can be part of the backend pool irrespective of whether or not it was guaranteed to a zone or which zone was guaranteed to.</span><span class="sxs-lookup"><span data-stu-id="7ea87-166">Any VM in a single VNet can be part of the backend pool irrespective of whether or not it was guaranteed to a zone or which zone was guaranteed to.</span></span>

<span data-ttu-id="7ea87-167">If you wish to align and guarantee your frontend and backend with a single zone, only place VMs within the same zone into the respective backend pool.</span><span class="sxs-lookup"><span data-stu-id="7ea87-167">If you wish to align and guarantee your frontend and backend with a single zone, only place VMs within the same zone into the respective backend pool.</span></span>

<span data-ttu-id="7ea87-168">If you wish to address VMs across multiple zones, simply place VMs from multiple zones into the same backend pool.</span><span class="sxs-lookup"><span data-stu-id="7ea87-168">If you wish to address VMs across multiple zones, simply place VMs from multiple zones into the same backend pool.</span></span>  <span data-ttu-id="7ea87-169">When using virtual machine scale sets, you can place one or more virtual machine scale sets into the same backend pool.</span><span class="sxs-lookup"><span data-stu-id="7ea87-169">When using virtual machine scale sets, you can place one or more virtual machine scale sets into the same backend pool.</span></span>  <span data-ttu-id="7ea87-170">And each of these virtual machine scale sets can be in a single or multiple zones.</span><span class="sxs-lookup"><span data-stu-id="7ea87-170">And each of these virtual machine scale sets can be in a single or multiple zones.</span></span>

### <a name="outbound-connections"></a><span data-ttu-id="7ea87-171">Outbound connections</span><span class="sxs-lookup"><span data-stu-id="7ea87-171">Outbound connections</span></span>

<span data-ttu-id="7ea87-172">[Outbound connections](load-balancer-outbound-connections.md) are served by all zones and are automatically zone-redundant in a region with Availability Zones when a virtual machine is associated with a public Load Balancer and a zone-redundant frontend.</span><span class="sxs-lookup"><span data-stu-id="7ea87-172">[Outbound connections](load-balancer-outbound-connections.md) are served by all zones and are automatically zone-redundant in a region with Availability Zones when a virtual machine is associated with a public Load Balancer and a zone-redundant frontend.</span></span>  <span data-ttu-id="7ea87-173">Outbound connection SNAT port allocations survive zone failures.</span><span class="sxs-lookup"><span data-stu-id="7ea87-173">Outbound connection SNAT port allocations survive zone failures.</span></span>  

<span data-ttu-id="7ea87-174">In turn, if the VM is associated with a public Load Balancer and a zonal frontend, outbound connections are guaranteed to be served by a single zone.</span><span class="sxs-lookup"><span data-stu-id="7ea87-174">In turn, if the VM is associated with a public Load Balancer and a zonal frontend, outbound connections are guaranteed to be served by a single zone.</span></span>  <span data-ttu-id="7ea87-175">Outbound connections share fate with the respective zone's health.</span><span class="sxs-lookup"><span data-stu-id="7ea87-175">Outbound connections share fate with the respective zone's health.</span></span>

<span data-ttu-id="7ea87-176">The SNAT port preallocation and algorithm is the same with or without zones.</span><span class="sxs-lookup"><span data-stu-id="7ea87-176">The SNAT port preallocation and algorithm is the same with or without zones.</span></span>

### <a name="health-probes"></a><span data-ttu-id="7ea87-177">Health probes</span><span class="sxs-lookup"><span data-stu-id="7ea87-177">Health probes</span></span>

<span data-ttu-id="7ea87-178">Your existing health probe definitions remain as they are without Availability Zones.</span><span class="sxs-lookup"><span data-stu-id="7ea87-178">Your existing health probe definitions remain as they are without Availability Zones.</span></span>  <span data-ttu-id="7ea87-179">But we've expanded the health model at an infrastructure level.</span><span class="sxs-lookup"><span data-stu-id="7ea87-179">But we've expanded the health model at an infrastructure level.</span></span> 

<span data-ttu-id="7ea87-180">When using zone-redundant frontends, Load Balancer expands its internal health model to independently probe the reachability of a VM from each Availability Zone and shut down paths across zones that may have failed without customer intervention.</span><span class="sxs-lookup"><span data-stu-id="7ea87-180">When using zone-redundant frontends, Load Balancer expands its internal health model to independently probe the reachability of a VM from each Availability Zone and shut down paths across zones that may have failed without customer intervention.</span></span>  <span data-ttu-id="7ea87-181">If a given path is not available from the Load Balancer infrastructure of one zone to a VM in another zone, Load Balancer can detect and avoid this failure.</span><span class="sxs-lookup"><span data-stu-id="7ea87-181">If a given path is not available from the Load Balancer infrastructure of one zone to a VM in another zone, Load Balancer can detect and avoid this failure.</span></span> <span data-ttu-id="7ea87-182">Other zones who can reach this VM can continue to serve the VM from their respective frontends.</span><span class="sxs-lookup"><span data-stu-id="7ea87-182">Other zones who can reach this VM can continue to serve the VM from their respective frontends.</span></span>  <span data-ttu-id="7ea87-183">As a result, it is possible that during failure events, each zone may have slightly different flow distributions while protecting the overall health of your end-to-end service.</span><span class="sxs-lookup"><span data-stu-id="7ea87-183">As a result, it is possible that during failure events, each zone may have slightly different flow distributions while protecting the overall health of your end-to-end service.</span></span>

## <a name="design"></a> <span data-ttu-id="7ea87-184">Design considerations</span><span class="sxs-lookup"><span data-stu-id="7ea87-184">Design considerations</span></span>

<span data-ttu-id="7ea87-185">Load Balancer is purposely flexible in the context of Availability Zones.</span><span class="sxs-lookup"><span data-stu-id="7ea87-185">Load Balancer is purposely flexible in the context of Availability Zones.</span></span> <span data-ttu-id="7ea87-186">You can choose to align to zones or you can choose to be zone-redundant.</span><span class="sxs-lookup"><span data-stu-id="7ea87-186">You can choose to align to zones or you can choose to be zone-redundant.</span></span>  <span data-ttu-id="7ea87-187">Increased availability can come at the price of increased complexity and you must design for availability for optimal performance.</span><span class="sxs-lookup"><span data-stu-id="7ea87-187">Increased availability can come at the price of increased complexity and you must design for availability for optimal performance.</span></span>  <span data-ttu-id="7ea87-188">Let's take a look at some important design considerations.</span><span class="sxs-lookup"><span data-stu-id="7ea87-188">Let's take a look at some important design considerations.</span></span>

### <a name="automatic-zone-redundancy"></a><span data-ttu-id="7ea87-189">Automatic zone-redundancy</span><span class="sxs-lookup"><span data-stu-id="7ea87-189">Automatic zone-redundancy</span></span>

<span data-ttu-id="7ea87-190">Load Balancer makes it simple to have a single IP as a zone-redundant frontend.</span><span class="sxs-lookup"><span data-stu-id="7ea87-190">Load Balancer makes it simple to have a single IP as a zone-redundant frontend.</span></span> <span data-ttu-id="7ea87-191">A zone-redundant IP address can safely serve a zonal resource in any zone and can survive one or more zone failures as long as one zone remains healthy within the region.</span><span class="sxs-lookup"><span data-stu-id="7ea87-191">A zone-redundant IP address can safely serve a zonal resource in any zone and can survive one or more zone failures as long as one zone remains healthy within the region.</span></span> <span data-ttu-id="7ea87-192">Conversely, a zonal frontend is a reduction of the service to a single zone and shares fate with the respective zone.</span><span class="sxs-lookup"><span data-stu-id="7ea87-192">Conversely, a zonal frontend is a reduction of the service to a single zone and shares fate with the respective zone.</span></span>

<span data-ttu-id="7ea87-193">Zone-redundancy does not imply hitless datapath or control plane;  it is expressly data plane.</span><span class="sxs-lookup"><span data-stu-id="7ea87-193">Zone-redundancy does not imply hitless datapath or control plane;  it is expressly data plane.</span></span> <span data-ttu-id="7ea87-194">Zone-redundant flows can use any zones and a customer's flows will use all healthy zones in a region.</span><span class="sxs-lookup"><span data-stu-id="7ea87-194">Zone-redundant flows can use any zones and a customer's flows will use all healthy zones in a region.</span></span> <span data-ttu-id="7ea87-195">In the event of zone failure, traffic flows using healthy zones at that point in time are not impacted.</span><span class="sxs-lookup"><span data-stu-id="7ea87-195">In the event of zone failure, traffic flows using healthy zones at that point in time are not impacted.</span></span>  <span data-ttu-id="7ea87-196">Traffic flows using a zone at the time of zone failure may be impacted but applications can recover and these flows can continue in the remaining healthy zones within the region upon retransmission or reestablishment once Azure has converged around the zone failure.</span><span class="sxs-lookup"><span data-stu-id="7ea87-196">Traffic flows using a zone at the time of zone failure may be impacted but applications can recover and these flows can continue in the remaining healthy zones within the region upon retransmission or reestablishment once Azure has converged around the zone failure.</span></span>

### <a name="xzonedesign"></a> <span data-ttu-id="7ea87-197">Cross zone boundaries</span><span class="sxs-lookup"><span data-stu-id="7ea87-197">Cross zone boundaries</span></span>

<span data-ttu-id="7ea87-198">It is important to understand that any time an end-to-end service crosses zones, you share fate with not one zone but potentially multiple zones.</span><span class="sxs-lookup"><span data-stu-id="7ea87-198">It is important to understand that any time an end-to-end service crosses zones, you share fate with not one zone but potentially multiple zones.</span></span>  <span data-ttu-id="7ea87-199">As a result, your end-to-end service may not have gained any availability over non-zonal deployments.</span><span class="sxs-lookup"><span data-stu-id="7ea87-199">As a result, your end-to-end service may not have gained any availability over non-zonal deployments.</span></span>

<span data-ttu-id="7ea87-200">Avoid introducing unintended cross-zone dependencies, which will nullify availability gains when using Availability Zones.</span><span class="sxs-lookup"><span data-stu-id="7ea87-200">Avoid introducing unintended cross-zone dependencies, which will nullify availability gains when using Availability Zones.</span></span>  <span data-ttu-id="7ea87-201">When your application consists of multiple components and you wish to be resilient to zone failure, you must take care to ensure the survival of sufficient critical components in the event of a zone failing.</span><span class="sxs-lookup"><span data-stu-id="7ea87-201">When your application consists of multiple components and you wish to be resilient to zone failure, you must take care to ensure the survival of sufficient critical components in the event of a zone failing.</span></span>  <span data-ttu-id="7ea87-202">For example, a single critical component for your application can impact your entire application if it only exists in a zone other than the surviving zone(s).</span><span class="sxs-lookup"><span data-stu-id="7ea87-202">For example, a single critical component for your application can impact your entire application if it only exists in a zone other than the surviving zone(s).</span></span>  <span data-ttu-id="7ea87-203">In addition, also consider the zone restoration and how your application will converge.</span><span class="sxs-lookup"><span data-stu-id="7ea87-203">In addition, also consider the zone restoration and how your application will converge.</span></span> <span data-ttu-id="7ea87-204">Let's review some key points and use them as inspiration for questions as you think through your specific scenario.</span><span class="sxs-lookup"><span data-stu-id="7ea87-204">Let's review some key points and use them as inspiration for questions as you think through your specific scenario.</span></span>

- <span data-ttu-id="7ea87-205">If your application has two components like an IP address and a VM with managed disk, and they're guaranteed in zone 1 and zone 2, when zone 1 fails your end-to-end service will not survive when zone 1 fails.</span><span class="sxs-lookup"><span data-stu-id="7ea87-205">If your application has two components like an IP address and a VM with managed disk, and they're guaranteed in zone 1 and zone 2, when zone 1 fails your end-to-end service will not survive when zone 1 fails.</span></span>  <span data-ttu-id="7ea87-206">Don't cross zones unless you fully understand that you are creating a potentially hazardous failure mode.</span><span class="sxs-lookup"><span data-stu-id="7ea87-206">Don't cross zones unless you fully understand that you are creating a potentially hazardous failure mode.</span></span>

- <span data-ttu-id="7ea87-207">If your application has two components like an IP address and a VM with managed disk, and they are guaranteed to be zone-redundant and zone 1 respectively, your end-to-end service will survive zone failure of zone 2, zone 3, or both unless zone 1 has failed.</span><span class="sxs-lookup"><span data-stu-id="7ea87-207">If your application has two components like an IP address and a VM with managed disk, and they are guaranteed to be zone-redundant and zone 1 respectively, your end-to-end service will survive zone failure of zone 2, zone 3, or both unless zone 1 has failed.</span></span>  <span data-ttu-id="7ea87-208">However, you lose some ability to reason about the health of your service if all you are observing is the reachability of the frontend.</span><span class="sxs-lookup"><span data-stu-id="7ea87-208">However, you lose some ability to reason about the health of your service if all you are observing is the reachability of the frontend.</span></span>  <span data-ttu-id="7ea87-209">Consider developing a more extensive health and capacity model.</span><span class="sxs-lookup"><span data-stu-id="7ea87-209">Consider developing a more extensive health and capacity model.</span></span>  <span data-ttu-id="7ea87-210">You might use zone-redundant and zonal concepts together to expand insight and manageability.</span><span class="sxs-lookup"><span data-stu-id="7ea87-210">You might use zone-redundant and zonal concepts together to expand insight and manageability.</span></span>

- <span data-ttu-id="7ea87-211">If your application has two components like a zone-redundant Load Balancer frontend and a cross-zone virtual machine scale set in three zones, your resources in zones not impacted by failure will be available but your end-to-end service capacity may be degraded during zone failure.</span><span class="sxs-lookup"><span data-stu-id="7ea87-211">If your application has two components like a zone-redundant Load Balancer frontend and a cross-zone virtual machine scale set in three zones, your resources in zones not impacted by failure will be available but your end-to-end service capacity may be degraded during zone failure.</span></span> <span data-ttu-id="7ea87-212">From an infrastructure perspective, your deployment can survive one or more zone failures, and this raises the following questions:</span><span class="sxs-lookup"><span data-stu-id="7ea87-212">From an infrastructure perspective, your deployment can survive one or more zone failures, and this raises the following questions:</span></span>
  - <span data-ttu-id="7ea87-213">Do you understand how your application reasons about such failures and degraded capacity?</span><span class="sxs-lookup"><span data-stu-id="7ea87-213">Do you understand how your application reasons about such failures and degraded capacity?</span></span>
  - <span data-ttu-id="7ea87-214">Do you need to have safeguards in your service to force a fail over to a region pair if necessary?</span><span class="sxs-lookup"><span data-stu-id="7ea87-214">Do you need to have safeguards in your service to force a fail over to a region pair if necessary?</span></span>
  - <span data-ttu-id="7ea87-215">How will you monitor, detect, and mitigate such a scenario?</span><span class="sxs-lookup"><span data-stu-id="7ea87-215">How will you monitor, detect, and mitigate such a scenario?</span></span> <span data-ttu-id="7ea87-216">You may be able to use Standard Load Balancer diagnostics to augment monitoring of your end-to-end service performance.</span><span class="sxs-lookup"><span data-stu-id="7ea87-216">You may be able to use Standard Load Balancer diagnostics to augment monitoring of your end-to-end service performance.</span></span> <span data-ttu-id="7ea87-217">Consider what is available and what may need augmentation for a complete picture.</span><span class="sxs-lookup"><span data-stu-id="7ea87-217">Consider what is available and what may need augmentation for a complete picture.</span></span>

- <span data-ttu-id="7ea87-218">Zones can make failures more easily understood and contained.</span><span class="sxs-lookup"><span data-stu-id="7ea87-218">Zones can make failures more easily understood and contained.</span></span>  <span data-ttu-id="7ea87-219">However, zone failure is no different than other failures when it comes to concepts like timeouts, retries, and backoff algorithms.</span><span class="sxs-lookup"><span data-stu-id="7ea87-219">However, zone failure is no different than other failures when it comes to concepts like timeouts, retries, and backoff algorithms.</span></span> <span data-ttu-id="7ea87-220">Even though Azure Load Balancer provides zone-redundant paths and tries to recover quickly, at a packet level in real time, retransmissions or reestablishments may occur during the onset of a failure and it's important to understand how your application copes with failures.</span><span class="sxs-lookup"><span data-stu-id="7ea87-220">Even though Azure Load Balancer provides zone-redundant paths and tries to recover quickly, at a packet level in real time, retransmissions or reestablishments may occur during the onset of a failure and it's important to understand how your application copes with failures.</span></span> <span data-ttu-id="7ea87-221">Your load balancing scheme will survive, but you need to plan for the following:</span><span class="sxs-lookup"><span data-stu-id="7ea87-221">Your load balancing scheme will survive, but you need to plan for the following:</span></span>
  - <span data-ttu-id="7ea87-222">When a zone fails, does your end-to-end service understand this and if the state is lost, how will you recover?</span><span class="sxs-lookup"><span data-stu-id="7ea87-222">When a zone fails, does your end-to-end service understand this and if the state is lost, how will you recover?</span></span>
  - <span data-ttu-id="7ea87-223">When a zone returns, does your application understand how to converge safely?</span><span class="sxs-lookup"><span data-stu-id="7ea87-223">When a zone returns, does your application understand how to converge safely?</span></span>

### <a name="zonalityguidance"></a> <span data-ttu-id="7ea87-224">Zone-redundant versus zonal</span><span class="sxs-lookup"><span data-stu-id="7ea87-224">Zone-redundant versus zonal</span></span>

<span data-ttu-id="7ea87-225">Zone-redundant can provide a zone-agnostic and at the same time resilient option with a single IP address for the service.</span><span class="sxs-lookup"><span data-stu-id="7ea87-225">Zone-redundant can provide a zone-agnostic and at the same time resilient option with a single IP address for the service.</span></span>  <span data-ttu-id="7ea87-226">It can reduce complexity in turn.</span><span class="sxs-lookup"><span data-stu-id="7ea87-226">It can reduce complexity in turn.</span></span>  <span data-ttu-id="7ea87-227">Zone-redundant also has mobility across zones, and can be safely used on resources in any zone.</span><span class="sxs-lookup"><span data-stu-id="7ea87-227">Zone-redundant also has mobility across zones, and can be safely used on resources in any zone.</span></span>  <span data-ttu-id="7ea87-228">Also, it's future proof in regions without Availability Zones, which can limit changes required once a region does gain Availability Zones.</span><span class="sxs-lookup"><span data-stu-id="7ea87-228">Also, it's future proof in regions without Availability Zones, which can limit changes required once a region does gain Availability Zones.</span></span>  <span data-ttu-id="7ea87-229">The configuration syntax for a zone-redundant IP address or frontend succeeds in any region including those without Availability Zones.</span><span class="sxs-lookup"><span data-stu-id="7ea87-229">The configuration syntax for a zone-redundant IP address or frontend succeeds in any region including those without Availability Zones.</span></span>

<span data-ttu-id="7ea87-230">Zonal can provide an explicit guarantee to a zone, sharing fate with the health of the zone.</span><span class="sxs-lookup"><span data-stu-id="7ea87-230">Zonal can provide an explicit guarantee to a zone, sharing fate with the health of the zone.</span></span> <span data-ttu-id="7ea87-231">Associating a zonal IP address or zonal Load Balancer frontend can be a desirable or reasonable attribute especially if your attached resource is a zonal VM in the same zone.</span><span class="sxs-lookup"><span data-stu-id="7ea87-231">Associating a zonal IP address or zonal Load Balancer frontend can be a desirable or reasonable attribute especially if your attached resource is a zonal VM in the same zone.</span></span>  <span data-ttu-id="7ea87-232">Or perhaps your application requires explicit knowledge about which zone a resource is located in and you wish to reason about availability in separate zones explicitly.</span><span class="sxs-lookup"><span data-stu-id="7ea87-232">Or perhaps your application requires explicit knowledge about which zone a resource is located in and you wish to reason about availability in separate zones explicitly.</span></span>  <span data-ttu-id="7ea87-233">You can choose to expose multiple zonal frontends for an end-to-end service distributed across zones (that is, per zone zonal frontends for multiple zonal virtual machine scale sets).</span><span class="sxs-lookup"><span data-stu-id="7ea87-233">You can choose to expose multiple zonal frontends for an end-to-end service distributed across zones (that is, per zone zonal frontends for multiple zonal virtual machine scale sets).</span></span>  <span data-ttu-id="7ea87-234">And if your zonal frontends are public IP addresses, you can use these multiple zonal frontends for exposing your service with [Traffic Manager](../traffic-manager/traffic-manager-overview.md).</span><span class="sxs-lookup"><span data-stu-id="7ea87-234">And if your zonal frontends are public IP addresses, you can use these multiple zonal frontends for exposing your service with [Traffic Manager](../traffic-manager/traffic-manager-overview.md).</span></span>  <span data-ttu-id="7ea87-235">Or you can use multiple zonal frontends to gain per zone health and performance insights through third party monitoring solutions and expose the overall service with a zone-redundant frontend.</span><span class="sxs-lookup"><span data-stu-id="7ea87-235">Or you can use multiple zonal frontends to gain per zone health and performance insights through third party monitoring solutions and expose the overall service with a zone-redundant frontend.</span></span> <span data-ttu-id="7ea87-236">You should only serve zonal resources with zonal frontends aligned to the same zone and avoid potentially harmful cross-zone scenarios for zonal resources.</span><span class="sxs-lookup"><span data-stu-id="7ea87-236">You should only serve zonal resources with zonal frontends aligned to the same zone and avoid potentially harmful cross-zone scenarios for zonal resources.</span></span>  <span data-ttu-id="7ea87-237">Zonal resources only exist in regions where Availability Zones exist.</span><span class="sxs-lookup"><span data-stu-id="7ea87-237">Zonal resources only exist in regions where Availability Zones exist.</span></span>

<span data-ttu-id="7ea87-238">There's no general guidance that one is a better choice than the other without knowing the service architecture.</span><span class="sxs-lookup"><span data-stu-id="7ea87-238">There's no general guidance that one is a better choice than the other without knowing the service architecture.</span></span>

## <a name="limitations"></a><span data-ttu-id="7ea87-239">Limitations</span><span class="sxs-lookup"><span data-stu-id="7ea87-239">Limitations</span></span>

- <span data-ttu-id="7ea87-240">While data plane is fully zone-redundant (unless zonal guarantee was specified), control plane operations aren't fully zone-redundant.</span><span class="sxs-lookup"><span data-stu-id="7ea87-240">While data plane is fully zone-redundant (unless zonal guarantee was specified), control plane operations aren't fully zone-redundant.</span></span>

## <a name="next-steps"></a><span data-ttu-id="7ea87-241">Next steps</span><span class="sxs-lookup"><span data-stu-id="7ea87-241">Next steps</span></span>
- <span data-ttu-id="7ea87-242">Learn more about [Availability Zones](../availability-zones/az-overview.md)</span><span class="sxs-lookup"><span data-stu-id="7ea87-242">Learn more about [Availability Zones](../availability-zones/az-overview.md)</span></span>
- <span data-ttu-id="7ea87-243">Learn more about [Standard Load Balancer](load-balancer-standard-overview.md)</span><span class="sxs-lookup"><span data-stu-id="7ea87-243">Learn more about [Standard Load Balancer](load-balancer-standard-overview.md)</span></span>
- <span data-ttu-id="7ea87-244">Learn how to [load balance VMs within a zone using a Standard Load Balancer with a zonal frontend](load-balancer-standard-public-zonal-cli.md)</span><span class="sxs-lookup"><span data-stu-id="7ea87-244">Learn how to [load balance VMs within a zone using a Standard Load Balancer with a zonal frontend](load-balancer-standard-public-zonal-cli.md)</span></span>
- <span data-ttu-id="7ea87-245">Learn how to [load balance VMs across zones using a Standard Load Balancer with a zone-redundant frontend](load-balancer-standard-public-zone-redundant-cli.md)</span><span class="sxs-lookup"><span data-stu-id="7ea87-245">Learn how to [load balance VMs across zones using a Standard Load Balancer with a zone-redundant frontend](load-balancer-standard-public-zone-redundant-cli.md)</span></span>
