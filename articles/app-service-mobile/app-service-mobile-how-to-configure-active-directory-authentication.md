---
title: How to configure Azure Active Directory authentication for your App Services application
description: Learn how to configure Azure Active Directory authentication for your App Services application.
author: mattchenderson
services: app-service
documentationcenter: ''
manager: adrianha
editor: ''
ms.assetid: 6ec6a46c-bce4-47aa-b8a3-e133baef22eb
ms.service: app-service-mobile
ms.workload: mobile
ms.tgt_pltfrm: na
ms.devlang: multiple
ms.topic: article
ms.date: 10/01/2016
ms.author: mahender
ms.openlocfilehash: 546e4f8c47509e6aefb7e41153b894b329cd1ebd
ms.sourcegitcommit: 5b9d839c0c0a94b293fdafe1d6e5429506c07e05
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 08/02/2018
ms.locfileid: "44556391"
---
# <a name="how-to-configure-your-app-service-application-to-use-azure-active-directory-login"></a><span data-ttu-id="ebc97-103">How to configure your App Service application to use Azure Active Directory login</span><span class="sxs-lookup"><span data-stu-id="ebc97-103">How to configure your App Service application to use Azure Active Directory login</span></span>
[!INCLUDE [app-service-mobile-selector-authentication](../../includes/app-service-mobile-selector-authentication.md)]

<span data-ttu-id="ebc97-104">This topic shows you how to configure Azure App Services to use Azure Active Directory as an authentication provider.</span><span class="sxs-lookup"><span data-stu-id="ebc97-104">This topic shows you how to configure Azure App Services to use Azure Active Directory as an authentication provider.</span></span>

## <span data-ttu-id="ebc97-105"><a name="express"> </a>Configure Azure Active Directory using express settings</span><span class="sxs-lookup"><span data-stu-id="ebc97-105"><a name="express"> </a>Configure Azure Active Directory using express settings</span></span>
1. <span data-ttu-id="ebc97-106">In the [Azure portal], navigate to your application.</span><span class="sxs-lookup"><span data-stu-id="ebc97-106">In the [Azure portal], navigate to your application.</span></span> <span data-ttu-id="ebc97-107">Click **Settings**, and then **Authentication/Authorization**.</span><span class="sxs-lookup"><span data-stu-id="ebc97-107">Click **Settings**, and then **Authentication/Authorization**.</span></span>
2. <span data-ttu-id="ebc97-108">If the Authentication / Authorization feature is not enabled, turn the switch to **On**.</span><span class="sxs-lookup"><span data-stu-id="ebc97-108">If the Authentication / Authorization feature is not enabled, turn the switch to **On**.</span></span>
3. <span data-ttu-id="ebc97-109">Click **Azure Active Directory**, and then click **Express** under **Management Mode**.</span><span class="sxs-lookup"><span data-stu-id="ebc97-109">Click **Azure Active Directory**, and then click **Express** under **Management Mode**.</span></span>
4. <span data-ttu-id="ebc97-110">Click **OK** to register the application in Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="ebc97-110">Click **OK** to register the application in Azure Active Directory.</span></span> <span data-ttu-id="ebc97-111">This will create a new registration.</span><span class="sxs-lookup"><span data-stu-id="ebc97-111">This will create a new registration.</span></span> <span data-ttu-id="ebc97-112">If you want to choose an existing registration instead, click **Select an existing app** and then search for the name of a previously created registration within your tenant.</span><span class="sxs-lookup"><span data-stu-id="ebc97-112">If you want to choose an existing registration instead, click **Select an existing app** and then search for the name of a previously created registration within your tenant.</span></span>
   <span data-ttu-id="ebc97-113">Click the registration to select it and click **OK**.</span><span class="sxs-lookup"><span data-stu-id="ebc97-113">Click the registration to select it and click **OK**.</span></span> <span data-ttu-id="ebc97-114">Then click **OK** on the Azure Active Directory settings blade.</span><span class="sxs-lookup"><span data-stu-id="ebc97-114">Then click **OK** on the Azure Active Directory settings blade.</span></span>
   
   ![][0]
   
   <span data-ttu-id="ebc97-115">By default, App Service provides authentication but does not restrict authorized access to your site content and APIs.</span><span class="sxs-lookup"><span data-stu-id="ebc97-115">By default, App Service provides authentication but does not restrict authorized access to your site content and APIs.</span></span> <span data-ttu-id="ebc97-116">You must authorize users in your app code.</span><span class="sxs-lookup"><span data-stu-id="ebc97-116">You must authorize users in your app code.</span></span>
5. <span data-ttu-id="ebc97-117">(Optional) To restrict access to your site to only users authenticated by Azure Active Directory, set **Action to take when request is not authenticated** to **Log in with Azure Active Directory**.</span><span class="sxs-lookup"><span data-stu-id="ebc97-117">(Optional) To restrict access to your site to only users authenticated by Azure Active Directory, set **Action to take when request is not authenticated** to **Log in with Azure Active Directory**.</span></span> <span data-ttu-id="ebc97-118">This requires that all requests be authenticated, and all unauthenticated requests are redirected to Azure Active Directory for authentication.</span><span class="sxs-lookup"><span data-stu-id="ebc97-118">This requires that all requests be authenticated, and all unauthenticated requests are redirected to Azure Active Directory for authentication.</span></span>
6. <span data-ttu-id="ebc97-119">Click **Save**.</span><span class="sxs-lookup"><span data-stu-id="ebc97-119">Click **Save**.</span></span>

<span data-ttu-id="ebc97-120">You are now ready to use Azure Active Directory for authentication in your app.</span><span class="sxs-lookup"><span data-stu-id="ebc97-120">You are now ready to use Azure Active Directory for authentication in your app.</span></span>

## <span data-ttu-id="ebc97-121"><a name="advanced"> </a>(Alternative method) Manually configure Azure Active Directory with advanced settings</span><span class="sxs-lookup"><span data-stu-id="ebc97-121"><a name="advanced"> </a>(Alternative method) Manually configure Azure Active Directory with advanced settings</span></span>
<span data-ttu-id="ebc97-122">You can also choose to provide configuration settings manually.</span><span class="sxs-lookup"><span data-stu-id="ebc97-122">You can also choose to provide configuration settings manually.</span></span> <span data-ttu-id="ebc97-123">This is the preferred solution if the AAD tenant you wish to use is different from the tenant with which you sign into Azure.</span><span class="sxs-lookup"><span data-stu-id="ebc97-123">This is the preferred solution if the AAD tenant you wish to use is different from the tenant with which you sign into Azure.</span></span> <span data-ttu-id="ebc97-124">To complete the configuration, you must first create a registration in Azure Active Directory, and then you must provide some of the registration details to App Service.</span><span class="sxs-lookup"><span data-stu-id="ebc97-124">To complete the configuration, you must first create a registration in Azure Active Directory, and then you must provide some of the registration details to App Service.</span></span>

### <span data-ttu-id="ebc97-125"><a name="register"> </a>Register your application with Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="ebc97-125"><a name="register"> </a>Register your application with Azure Active Directory</span></span>
1. <span data-ttu-id="ebc97-126">Log on to the [Azure portal], and navigate to your application.</span><span class="sxs-lookup"><span data-stu-id="ebc97-126">Log on to the [Azure portal], and navigate to your application.</span></span> <span data-ttu-id="ebc97-127">Copy your **URL**.</span><span class="sxs-lookup"><span data-stu-id="ebc97-127">Copy your **URL**.</span></span> <span data-ttu-id="ebc97-128">You will use this to configure your Azure Active Directory app.</span><span class="sxs-lookup"><span data-stu-id="ebc97-128">You will use this to configure your Azure Active Directory app.</span></span>
2. <span data-ttu-id="ebc97-129">Sign in to the [Azure classic portal] and navigate to **Active Directory**.</span><span class="sxs-lookup"><span data-stu-id="ebc97-129">Sign in to the [Azure classic portal] and navigate to **Active Directory**.</span></span>
   
    ![][2]
3. <span data-ttu-id="ebc97-130">Select your directory, and then select the **Applications** tab at the top.</span><span class="sxs-lookup"><span data-stu-id="ebc97-130">Select your directory, and then select the **Applications** tab at the top.</span></span> <span data-ttu-id="ebc97-131">Click **ADD** at the bottom to create a new app registration.</span><span class="sxs-lookup"><span data-stu-id="ebc97-131">Click **ADD** at the bottom to create a new app registration.</span></span>
4. <span data-ttu-id="ebc97-132">Click **Add an application my organization is developing**.</span><span class="sxs-lookup"><span data-stu-id="ebc97-132">Click **Add an application my organization is developing**.</span></span>
5. <span data-ttu-id="ebc97-133">In the Add Application Wizard, enter a **Name** for your application and click the  **Web Application And/Or Web API** type.</span><span class="sxs-lookup"><span data-stu-id="ebc97-133">In the Add Application Wizard, enter a **Name** for your application and click the  **Web Application And/Or Web API** type.</span></span> <span data-ttu-id="ebc97-134">Then click to continue.</span><span class="sxs-lookup"><span data-stu-id="ebc97-134">Then click to continue.</span></span>
6. <span data-ttu-id="ebc97-135">In the **SIGN-ON URL** box, paste the application URL you copied earlier.</span><span class="sxs-lookup"><span data-stu-id="ebc97-135">In the **SIGN-ON URL** box, paste the application URL you copied earlier.</span></span> <span data-ttu-id="ebc97-136">Enter that same URL in the **App ID URI** box.</span><span class="sxs-lookup"><span data-stu-id="ebc97-136">Enter that same URL in the **App ID URI** box.</span></span> <span data-ttu-id="ebc97-137">Then click to continue.</span><span class="sxs-lookup"><span data-stu-id="ebc97-137">Then click to continue.</span></span>
7. <span data-ttu-id="ebc97-138">Once the application has been added, click the **Configure** tab. Edit the **Reply URL** under **Single Sign-on** to be the URL of your application appended with the path, */.auth/login/aad/callback*.</span><span class="sxs-lookup"><span data-stu-id="ebc97-138">Once the application has been added, click the **Configure** tab. Edit the **Reply URL** under **Single Sign-on** to be the URL of your application appended with the path, */.auth/login/aad/callback*.</span></span> <span data-ttu-id="ebc97-139">For example, `https://contoso.azurewebsites.net/.auth/login/aad/callback`.</span><span class="sxs-lookup"><span data-stu-id="ebc97-139">For example, `https://contoso.azurewebsites.net/.auth/login/aad/callback`.</span></span> <span data-ttu-id="ebc97-140">Make sure that you are using the HTTPS scheme.</span><span class="sxs-lookup"><span data-stu-id="ebc97-140">Make sure that you are using the HTTPS scheme.</span></span>
   
    ![][3]
8. <span data-ttu-id="ebc97-141">Click **Save**.</span><span class="sxs-lookup"><span data-stu-id="ebc97-141">Click **Save**.</span></span> <span data-ttu-id="ebc97-142">Then copy the **Client ID** for the app.</span><span class="sxs-lookup"><span data-stu-id="ebc97-142">Then copy the **Client ID** for the app.</span></span> <span data-ttu-id="ebc97-143">You will configure your application to use this later.</span><span class="sxs-lookup"><span data-stu-id="ebc97-143">You will configure your application to use this later.</span></span>
9. <span data-ttu-id="ebc97-144">In the bottom command bar, click **View Endpoints**, and then copy the **Federation Metadata Document** URL and download that document or navigate to it in a browser.</span><span class="sxs-lookup"><span data-stu-id="ebc97-144">In the bottom command bar, click **View Endpoints**, and then copy the **Federation Metadata Document** URL and download that document or navigate to it in a browser.</span></span>
10. <span data-ttu-id="ebc97-145">Within the root **EntityDescriptor** element, there should be an **entityID** attribute of the form `https://sts.windows.net/` followed by a GUID specific to your tenant (called a "tenant ID").</span><span class="sxs-lookup"><span data-stu-id="ebc97-145">Within the root **EntityDescriptor** element, there should be an **entityID** attribute of the form `https://sts.windows.net/` followed by a GUID specific to your tenant (called a "tenant ID").</span></span> <span data-ttu-id="ebc97-146">Copy this value - it will serve as your **Issuer URL**.</span><span class="sxs-lookup"><span data-stu-id="ebc97-146">Copy this value - it will serve as your **Issuer URL**.</span></span> <span data-ttu-id="ebc97-147">You will configure your application to use this later.</span><span class="sxs-lookup"><span data-stu-id="ebc97-147">You will configure your application to use this later.</span></span>

### <span data-ttu-id="ebc97-148"><a name="secrets"> </a>Add Azure Active Directory information to your application</span><span class="sxs-lookup"><span data-stu-id="ebc97-148"><a name="secrets"> </a>Add Azure Active Directory information to your application</span></span>
1. <span data-ttu-id="ebc97-149">Back in the [Azure portal], navigate to your application.</span><span class="sxs-lookup"><span data-stu-id="ebc97-149">Back in the [Azure portal], navigate to your application.</span></span> <span data-ttu-id="ebc97-150">Click **Settings**, and then **Authentication/Authorization**.</span><span class="sxs-lookup"><span data-stu-id="ebc97-150">Click **Settings**, and then **Authentication/Authorization**.</span></span>
2. <span data-ttu-id="ebc97-151">If the Authentication/Authorization feature is not enabled, turn the switch to **On**.</span><span class="sxs-lookup"><span data-stu-id="ebc97-151">If the Authentication/Authorization feature is not enabled, turn the switch to **On**.</span></span>
3. <span data-ttu-id="ebc97-152">Click **Azure Active Directory**, and then click **Advanced** under **Management Mode**.</span><span class="sxs-lookup"><span data-stu-id="ebc97-152">Click **Azure Active Directory**, and then click **Advanced** under **Management Mode**.</span></span> <span data-ttu-id="ebc97-153">Paste in the Client ID and Issuer URL value which you obtained previously.</span><span class="sxs-lookup"><span data-stu-id="ebc97-153">Paste in the Client ID and Issuer URL value which you obtained previously.</span></span> <span data-ttu-id="ebc97-154">Then click **OK**.</span><span class="sxs-lookup"><span data-stu-id="ebc97-154">Then click **OK**.</span></span>
   
   ![][1]
   
   <span data-ttu-id="ebc97-155">By default, App Service provides authentication but does not restrict authorized access to your site content and APIs.</span><span class="sxs-lookup"><span data-stu-id="ebc97-155">By default, App Service provides authentication but does not restrict authorized access to your site content and APIs.</span></span> <span data-ttu-id="ebc97-156">You must authorize users in your app code.</span><span class="sxs-lookup"><span data-stu-id="ebc97-156">You must authorize users in your app code.</span></span>
4. <span data-ttu-id="ebc97-157">(Optional) To restrict access to your site to only users authenticated by Azure Active Directory, set **Action to take when request is not authenticated** to **Log in with Azure Active Directory**.</span><span class="sxs-lookup"><span data-stu-id="ebc97-157">(Optional) To restrict access to your site to only users authenticated by Azure Active Directory, set **Action to take when request is not authenticated** to **Log in with Azure Active Directory**.</span></span> <span data-ttu-id="ebc97-158">This requires that all requests be authenticated, and all unauthenticated requests are redirected to Azure Active Directory for authentication.</span><span class="sxs-lookup"><span data-stu-id="ebc97-158">This requires that all requests be authenticated, and all unauthenticated requests are redirected to Azure Active Directory for authentication.</span></span>
5. <span data-ttu-id="ebc97-159">Click **Save**.</span><span class="sxs-lookup"><span data-stu-id="ebc97-159">Click **Save**.</span></span>

<span data-ttu-id="ebc97-160">You are now ready to use Azure Active Directory for authentication in your app.</span><span class="sxs-lookup"><span data-stu-id="ebc97-160">You are now ready to use Azure Active Directory for authentication in your app.</span></span>

## <a name="optional-configure-a-native-client-application"></a><span data-ttu-id="ebc97-161">(Optional) Configure a native client application</span><span class="sxs-lookup"><span data-stu-id="ebc97-161">(Optional) Configure a native client application</span></span>
<span data-ttu-id="ebc97-162">Azure Active Directory also allows you to register native clients, which provides greater control over permissions mapping.</span><span class="sxs-lookup"><span data-stu-id="ebc97-162">Azure Active Directory also allows you to register native clients, which provides greater control over permissions mapping.</span></span> <span data-ttu-id="ebc97-163">You need this if you wish to perform logins using a library such as the **Active Directory Authentication Library**.</span><span class="sxs-lookup"><span data-stu-id="ebc97-163">You need this if you wish to perform logins using a library such as the **Active Directory Authentication Library**.</span></span>

1. <span data-ttu-id="ebc97-164">Navigate to **Active Directory** in the [Azure classic portal].</span><span class="sxs-lookup"><span data-stu-id="ebc97-164">Navigate to **Active Directory** in the [Azure classic portal].</span></span>
2. <span data-ttu-id="ebc97-165">Select your directory, and then select the **Applications** tab at the top.</span><span class="sxs-lookup"><span data-stu-id="ebc97-165">Select your directory, and then select the **Applications** tab at the top.</span></span> <span data-ttu-id="ebc97-166">Click **ADD** at the bottom to create a new app registration.</span><span class="sxs-lookup"><span data-stu-id="ebc97-166">Click **ADD** at the bottom to create a new app registration.</span></span>
3. <span data-ttu-id="ebc97-167">Click **Add an application my organization is developing**.</span><span class="sxs-lookup"><span data-stu-id="ebc97-167">Click **Add an application my organization is developing**.</span></span>
4. <span data-ttu-id="ebc97-168">In the Add Application Wizard, enter a **Name** for your application and click the  **Native Client Application** type.</span><span class="sxs-lookup"><span data-stu-id="ebc97-168">In the Add Application Wizard, enter a **Name** for your application and click the  **Native Client Application** type.</span></span> <span data-ttu-id="ebc97-169">Then click to continue.</span><span class="sxs-lookup"><span data-stu-id="ebc97-169">Then click to continue.</span></span>
5. <span data-ttu-id="ebc97-170">In the **Redirect URI** box, enter your site's */.auth/login/done* endpoint, using the HTTPS scheme.</span><span class="sxs-lookup"><span data-stu-id="ebc97-170">In the **Redirect URI** box, enter your site's */.auth/login/done* endpoint, using the HTTPS scheme.</span></span> <span data-ttu-id="ebc97-171">This value should be similar to *https://contoso.azurewebsites.net/.auth/login/done*.</span><span class="sxs-lookup"><span data-stu-id="ebc97-171">This value should be similar to *https://contoso.azurewebsites.net/.auth/login/done*.</span></span> <span data-ttu-id="ebc97-172">If creating a Windows application, instead use the [package SID](app-service-mobile-dotnet-how-to-use-client-library.md#package-sid) as the URI.</span><span class="sxs-lookup"><span data-stu-id="ebc97-172">If creating a Windows application, instead use the [package SID](app-service-mobile-dotnet-how-to-use-client-library.md#package-sid) as the URI.</span></span>
6. <span data-ttu-id="ebc97-173">Once the native application has been added, click the **Configure** tab. Find the **Client ID** and make a note of this value.</span><span class="sxs-lookup"><span data-stu-id="ebc97-173">Once the native application has been added, click the **Configure** tab. Find the **Client ID** and make a note of this value.</span></span>
7. <span data-ttu-id="ebc97-174">Scroll the page down to the **Permissions to other applications** section and click **Add application**.</span><span class="sxs-lookup"><span data-stu-id="ebc97-174">Scroll the page down to the **Permissions to other applications** section and click **Add application**.</span></span>
8. <span data-ttu-id="ebc97-175">Search for the web application that you registered earlier and click the plus icon.</span><span class="sxs-lookup"><span data-stu-id="ebc97-175">Search for the web application that you registered earlier and click the plus icon.</span></span> <span data-ttu-id="ebc97-176">Then click the check to close the dialog.</span><span class="sxs-lookup"><span data-stu-id="ebc97-176">Then click the check to close the dialog.</span></span> <span data-ttu-id="ebc97-177">If the web application cannot be found, navigate to its registration and add a new reply URL (e.g., the HTTP version of your current URL), click save, and then repeat these steps - the application should show up in the list.</span><span class="sxs-lookup"><span data-stu-id="ebc97-177">If the web application cannot be found, navigate to its registration and add a new reply URL (e.g., the HTTP version of your current URL), click save, and then repeat these steps - the application should show up in the list.</span></span>
9. <span data-ttu-id="ebc97-178">On the new entry you just added, open the **Delegated Permissions** dropdown and select **Access (appName)**.</span><span class="sxs-lookup"><span data-stu-id="ebc97-178">On the new entry you just added, open the **Delegated Permissions** dropdown and select **Access (appName)**.</span></span> <span data-ttu-id="ebc97-179">Then click **Save**.</span><span class="sxs-lookup"><span data-stu-id="ebc97-179">Then click **Save**.</span></span>

<span data-ttu-id="ebc97-180">You have now configured a native client application which can access your App Service application.</span><span class="sxs-lookup"><span data-stu-id="ebc97-180">You have now configured a native client application which can access your App Service application.</span></span>

## <span data-ttu-id="ebc97-181"><a name="related-content"> </a>Related Content</span><span class="sxs-lookup"><span data-stu-id="ebc97-181"><a name="related-content"> </a>Related Content</span></span>
[!INCLUDE [app-service-mobile-related-content-get-started-users](../../includes/app-service-mobile-related-content-get-started-users.md)]

<!-- Images. -->

[0]: https://docstestmedia1.blob.core.windows.net/azure-media/articles/app-service-mobile/media/app-service-mobile-how-to-configure-active-directory-authentication/mobile-app-aad-express-settings.png
[1]: https://docstestmedia1.blob.core.windows.net/azure-media/articles/app-service-mobile/media/app-service-mobile-how-to-configure-active-directory-authentication/mobile-app-aad-advanced-settings.png
[2]: https://docstestmedia1.blob.core.windows.net/azure-media/articles/app-service-mobile/media/app-service-mobile-how-to-configure-active-directory-authentication/app-service-navigate-aad.png
[3]: https://docstestmedia1.blob.core.windows.net/azure-media/articles/app-service-mobile/media/app-service-mobile-how-to-configure-active-directory-authentication/app-service-aad-app-configure.png

<!-- URLs. -->

[Azure portal]: https://portal.azure.com/
[Azure classic portal]: https://manage.windowsazure.com/
[alternative method]:#advanced




