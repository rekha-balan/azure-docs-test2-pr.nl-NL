---
title: Creating and using an Internal Load Balancer with an App Service Environment | Microsoft Docs
description: Creating and using an ASE with an ILB
services: app-service
documentationcenter: ''
author: ccompy
manager: stefsch
editor: ''
ms.assetid: ad9a1e00-d5e5-413e-be47-e21e5b285dbf
ms.service: app-service
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/11/2017
ms.author: ccompy
ms.openlocfilehash: ee085f74129fb9ec0e3bfeb369c580ac7d20d7c1
ms.sourcegitcommit: d1451406a010fd3aa854dc8e5b77dc5537d8050e
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 09/13/2018
ms.locfileid: "44869409"
---
# <a name="using-an-internal-load-balancer-with-an-app-service-environment"></a><span data-ttu-id="ca9b5-103">Using an Internal Load Balancer with an App Service Environment</span><span class="sxs-lookup"><span data-stu-id="ca9b5-103">Using an Internal Load Balancer with an App Service Environment</span></span>

> [!NOTE] 
> <span data-ttu-id="ca9b5-104">This article is about the App Service Environment v1.</span><span class="sxs-lookup"><span data-stu-id="ca9b5-104">This article is about the App Service Environment v1.</span></span> <span data-ttu-id="ca9b5-105">There is a newer version of the App Service Environment that is easier to use and runs on more powerful infrastructure.</span><span class="sxs-lookup"><span data-stu-id="ca9b5-105">There is a newer version of the App Service Environment that is easier to use and runs on more powerful infrastructure.</span></span> <span data-ttu-id="ca9b5-106">To learn more about the new version start with the [Introduction to the App Service Environment](intro.md).</span><span class="sxs-lookup"><span data-stu-id="ca9b5-106">To learn more about the new version start with the [Introduction to the App Service Environment](intro.md).</span></span>
>

<span data-ttu-id="ca9b5-107">The App Service Environment (ASE) feature is a Premium service option of Azure App Service that delivers an enhanced configuration capability that is not available in the multi-tenant stamps.</span><span class="sxs-lookup"><span data-stu-id="ca9b5-107">The App Service Environment (ASE) feature is a Premium service option of Azure App Service that delivers an enhanced configuration capability that is not available in the multi-tenant stamps.</span></span> <span data-ttu-id="ca9b5-108">The ASE feature essentially deploys the Azure App Service in your Azure Virtual Network(VNet).</span><span class="sxs-lookup"><span data-stu-id="ca9b5-108">The ASE feature essentially deploys the Azure App Service in your Azure Virtual Network(VNet).</span></span> <span data-ttu-id="ca9b5-109">To gain a greater understanding of the capabilities offered by App Service Environments read the [What is an App Service Environment][WhatisASE] documentation.</span><span class="sxs-lookup"><span data-stu-id="ca9b5-109">To gain a greater understanding of the capabilities offered by App Service Environments read the [What is an App Service Environment][WhatisASE] documentation.</span></span> <span data-ttu-id="ca9b5-110">If you don't know the benefits of operating in a VNet read the [Azure Virtual Network FAQ][virtualnetwork].</span><span class="sxs-lookup"><span data-stu-id="ca9b5-110">If you don't know the benefits of operating in a VNet read the [Azure Virtual Network FAQ][virtualnetwork].</span></span> 

## <a name="overview"></a><span data-ttu-id="ca9b5-111">Overview</span><span class="sxs-lookup"><span data-stu-id="ca9b5-111">Overview</span></span>
<span data-ttu-id="ca9b5-112">An ASE can be deployed with an internet accessible endpoint or with an IP address in your VNet.</span><span class="sxs-lookup"><span data-stu-id="ca9b5-112">An ASE can be deployed with an internet accessible endpoint or with an IP address in your VNet.</span></span> <span data-ttu-id="ca9b5-113">In order to set the IP address to a VNet address you need to deploy your ASE with an Internal Load Balancer(ILB).</span><span class="sxs-lookup"><span data-stu-id="ca9b5-113">In order to set the IP address to a VNet address you need to deploy your ASE with an Internal Load Balancer(ILB).</span></span> <span data-ttu-id="ca9b5-114">When your ASE is configured with an ILB, you provide:</span><span class="sxs-lookup"><span data-stu-id="ca9b5-114">When your ASE is configured with an ILB, you provide:</span></span>

* <span data-ttu-id="ca9b5-115">your own domain or subdomain.</span><span class="sxs-lookup"><span data-stu-id="ca9b5-115">your own domain or subdomain.</span></span> <span data-ttu-id="ca9b5-116">To make it easy, this document assumes subdomain but you can configure it either way.</span><span class="sxs-lookup"><span data-stu-id="ca9b5-116">To make it easy, this document assumes subdomain but you can configure it either way.</span></span> 
* <span data-ttu-id="ca9b5-117">the certificate used for HTTPS</span><span class="sxs-lookup"><span data-stu-id="ca9b5-117">the certificate used for HTTPS</span></span>
* <span data-ttu-id="ca9b5-118">DNS management for your subdomain.</span><span class="sxs-lookup"><span data-stu-id="ca9b5-118">DNS management for your subdomain.</span></span> 

<span data-ttu-id="ca9b5-119">In return, you can do things such as:</span><span class="sxs-lookup"><span data-stu-id="ca9b5-119">In return, you can do things such as:</span></span>

* <span data-ttu-id="ca9b5-120">host intranet applications, like line-of-business applications, securely in the cloud that you access through a Site to Site or ExpressRoute VPN</span><span class="sxs-lookup"><span data-stu-id="ca9b5-120">host intranet applications, like line-of-business applications, securely in the cloud that you access through a Site to Site or ExpressRoute VPN</span></span>
* <span data-ttu-id="ca9b5-121">host apps in the cloud that are not listed in public DNS servers</span><span class="sxs-lookup"><span data-stu-id="ca9b5-121">host apps in the cloud that are not listed in public DNS servers</span></span>
* <span data-ttu-id="ca9b5-122">create internet isolated backend apps with which your front-end apps can securely integrate</span><span class="sxs-lookup"><span data-stu-id="ca9b5-122">create internet isolated backend apps with which your front-end apps can securely integrate</span></span>

#### <a name="disabled-functionality"></a><span data-ttu-id="ca9b5-123">Disabled functionality</span><span class="sxs-lookup"><span data-stu-id="ca9b5-123">Disabled functionality</span></span>
<span data-ttu-id="ca9b5-124">There are some things that you cannot do when using an ILB ASE.</span><span class="sxs-lookup"><span data-stu-id="ca9b5-124">There are some things that you cannot do when using an ILB ASE.</span></span> <span data-ttu-id="ca9b5-125">Those things include:</span><span class="sxs-lookup"><span data-stu-id="ca9b5-125">Those things include:</span></span>

* <span data-ttu-id="ca9b5-126">using IPSSL</span><span class="sxs-lookup"><span data-stu-id="ca9b5-126">using IPSSL</span></span>
* <span data-ttu-id="ca9b5-127">assigning IP addresses to specific apps</span><span class="sxs-lookup"><span data-stu-id="ca9b5-127">assigning IP addresses to specific apps</span></span>
* <span data-ttu-id="ca9b5-128">buying and using a certificate with an app through the portal.</span><span class="sxs-lookup"><span data-stu-id="ca9b5-128">buying and using a certificate with an app through the portal.</span></span> <span data-ttu-id="ca9b5-129">You can, of course, still obtain certificates directly with a Certificate Authority and use it with your apps, but not through the Azure portal.</span><span class="sxs-lookup"><span data-stu-id="ca9b5-129">You can, of course, still obtain certificates directly with a Certificate Authority and use it with your apps, but not through the Azure portal.</span></span>

## <a name="creating-an-ilb-ase"></a><span data-ttu-id="ca9b5-130">Creating an ILB ASE</span><span class="sxs-lookup"><span data-stu-id="ca9b5-130">Creating an ILB ASE</span></span>
<span data-ttu-id="ca9b5-131">Creating an ILB ASE is not much different from creating an ASE normally.</span><span class="sxs-lookup"><span data-stu-id="ca9b5-131">Creating an ILB ASE is not much different from creating an ASE normally.</span></span> <span data-ttu-id="ca9b5-132">For a deeper discussion on creating an ASE, see [How to Create an App Service Environment][HowtoCreateASE].</span><span class="sxs-lookup"><span data-stu-id="ca9b5-132">For a deeper discussion on creating an ASE, see [How to Create an App Service Environment][HowtoCreateASE].</span></span> <span data-ttu-id="ca9b5-133">The process to create an ILB ASE is the same between creating a VNet during ASE creation or selecting a pre-existing VNet.</span><span class="sxs-lookup"><span data-stu-id="ca9b5-133">The process to create an ILB ASE is the same between creating a VNet during ASE creation or selecting a pre-existing VNet.</span></span> <span data-ttu-id="ca9b5-134">To create an ILB ASE:</span><span class="sxs-lookup"><span data-stu-id="ca9b5-134">To create an ILB ASE:</span></span> 

1. <span data-ttu-id="ca9b5-135">In the Azure portal, select **Create a resource -> Web + Mobile -> App Service Environment**.</span><span class="sxs-lookup"><span data-stu-id="ca9b5-135">In the Azure portal, select **Create a resource -> Web + Mobile -> App Service Environment**.</span></span>
2. <span data-ttu-id="ca9b5-136">Select your subscription.</span><span class="sxs-lookup"><span data-stu-id="ca9b5-136">Select your subscription.</span></span>
3. <span data-ttu-id="ca9b5-137">Select or create a resource group.</span><span class="sxs-lookup"><span data-stu-id="ca9b5-137">Select or create a resource group.</span></span>
4. <span data-ttu-id="ca9b5-138">Select or create a VNet.</span><span class="sxs-lookup"><span data-stu-id="ca9b5-138">Select or create a VNet.</span></span>
5. <span data-ttu-id="ca9b5-139">Create a subnet if selecting a VNet.</span><span class="sxs-lookup"><span data-stu-id="ca9b5-139">Create a subnet if selecting a VNet.</span></span>
6. <span data-ttu-id="ca9b5-140">Select **Virtual Network/Location -> VNet Configuration** and set the VIP Type to Internal.</span><span class="sxs-lookup"><span data-stu-id="ca9b5-140">Select **Virtual Network/Location -> VNet Configuration** and set the VIP Type to Internal.</span></span>
7. <span data-ttu-id="ca9b5-141">Provide a subdomain name (this name is the subdomain used for the apps created in this ASE).</span><span class="sxs-lookup"><span data-stu-id="ca9b5-141">Provide a subdomain name (this name is the subdomain used for the apps created in this ASE).</span></span>
8. <span data-ttu-id="ca9b5-142">Select **OK** and then **Create**.</span><span class="sxs-lookup"><span data-stu-id="ca9b5-142">Select **OK** and then **Create**.</span></span>

![][1]

<span data-ttu-id="ca9b5-143">In the Virtual Network pane, there is a VNet Configuration option that lets you select between an External VIP or Internal VIP.</span><span class="sxs-lookup"><span data-stu-id="ca9b5-143">In the Virtual Network pane, there is a VNet Configuration option that lets you select between an External VIP or Internal VIP.</span></span> <span data-ttu-id="ca9b5-144">The default is External.</span><span class="sxs-lookup"><span data-stu-id="ca9b5-144">The default is External.</span></span> <span data-ttu-id="ca9b5-145">If you have it set to External, your ASE uses an internet accessible VIP.</span><span class="sxs-lookup"><span data-stu-id="ca9b5-145">If you have it set to External, your ASE uses an internet accessible VIP.</span></span> <span data-ttu-id="ca9b5-146">If you select Internal, your ASE is configured with an ILB on an IP address within your VNet.</span><span class="sxs-lookup"><span data-stu-id="ca9b5-146">If you select Internal, your ASE is configured with an ILB on an IP address within your VNet.</span></span> 

<span data-ttu-id="ca9b5-147">After selecting Internal, the ability to add more IP addresses to your ASE is removed and instead you must provide the subdomain of the ASE.</span><span class="sxs-lookup"><span data-stu-id="ca9b5-147">After selecting Internal, the ability to add more IP addresses to your ASE is removed and instead you must provide the subdomain of the ASE.</span></span> <span data-ttu-id="ca9b5-148">In an ASE with an External VIP, the name of the ASE is used in the subdomain for apps created in that ASE.</span><span class="sxs-lookup"><span data-stu-id="ca9b5-148">In an ASE with an External VIP, the name of the ASE is used in the subdomain for apps created in that ASE.</span></span> <span data-ttu-id="ca9b5-149">If your ASE is named ***contosotest*** and your app in that ASE is named ***mytest***, the subdomain is of the format ***contosotest.p.azurewebsites.net*** and the URL for that app is ***mytest.contosotest.p.azurewebsites.net***.</span><span class="sxs-lookup"><span data-stu-id="ca9b5-149">If your ASE is named ***contosotest*** and your app in that ASE is named ***mytest***, the subdomain is of the format ***contosotest.p.azurewebsites.net*** and the URL for that app is ***mytest.contosotest.p.azurewebsites.net***.</span></span> <span data-ttu-id="ca9b5-150">If you set the VIP Type to Internal, your ASE name is not used in the subdomain for the ASE.</span><span class="sxs-lookup"><span data-stu-id="ca9b5-150">If you set the VIP Type to Internal, your ASE name is not used in the subdomain for the ASE.</span></span> <span data-ttu-id="ca9b5-151">You specify the subdomain explicitly.</span><span class="sxs-lookup"><span data-stu-id="ca9b5-151">You specify the subdomain explicitly.</span></span> <span data-ttu-id="ca9b5-152">If your subdomain is ***contoso.corp.net*** and you made an app in that ASE named ***timereporting***, the URL for that app is ***timereporting.contoso.corp.net***.</span><span class="sxs-lookup"><span data-stu-id="ca9b5-152">If your subdomain is ***contoso.corp.net*** and you made an app in that ASE named ***timereporting***, the URL for that app is ***timereporting.contoso.corp.net***.</span></span>

## <a name="apps-in-an-ilb-ase"></a><span data-ttu-id="ca9b5-153">Apps in an ILB ASE</span><span class="sxs-lookup"><span data-stu-id="ca9b5-153">Apps in an ILB ASE</span></span>
<span data-ttu-id="ca9b5-154">Creating an app in an ILB ASE is the same as creating an app in an ASE normally.</span><span class="sxs-lookup"><span data-stu-id="ca9b5-154">Creating an app in an ILB ASE is the same as creating an app in an ASE normally.</span></span> 

1. <span data-ttu-id="ca9b5-155">In the Azure portal, select **Create a resource -> Web + Mobile -> Web** or **Mobile** or **API App**.</span><span class="sxs-lookup"><span data-stu-id="ca9b5-155">In the Azure portal, select **Create a resource -> Web + Mobile -> Web** or **Mobile** or **API App**.</span></span>
2. <span data-ttu-id="ca9b5-156">Enter the name of the app.</span><span class="sxs-lookup"><span data-stu-id="ca9b5-156">Enter the name of the app.</span></span>
3. <span data-ttu-id="ca9b5-157">Select your subscription.</span><span class="sxs-lookup"><span data-stu-id="ca9b5-157">Select your subscription.</span></span>
4. <span data-ttu-id="ca9b5-158">Select or create a resource group.</span><span class="sxs-lookup"><span data-stu-id="ca9b5-158">Select or create a resource group.</span></span>
5. <span data-ttu-id="ca9b5-159">Select or create an App Service Plan(ASP).</span><span class="sxs-lookup"><span data-stu-id="ca9b5-159">Select or create an App Service Plan(ASP).</span></span> <span data-ttu-id="ca9b5-160">If creating a new ASP, select your ASE as the location and select the worker pool you want your ASP to be created in.</span><span class="sxs-lookup"><span data-stu-id="ca9b5-160">If creating a new ASP, select your ASE as the location and select the worker pool you want your ASP to be created in.</span></span> <span data-ttu-id="ca9b5-161">When you create the ASP, you select your ASE as the location and the worker pool.</span><span class="sxs-lookup"><span data-stu-id="ca9b5-161">When you create the ASP, you select your ASE as the location and the worker pool.</span></span> <span data-ttu-id="ca9b5-162">When you specify the name of the app, you will see that the subdomain under your app name is replaced by the subdomain for your ASE.</span><span class="sxs-lookup"><span data-stu-id="ca9b5-162">When you specify the name of the app, you will see that the subdomain under your app name is replaced by the subdomain for your ASE.</span></span> 
6. <span data-ttu-id="ca9b5-163">Select **Create**.</span><span class="sxs-lookup"><span data-stu-id="ca9b5-163">Select **Create**.</span></span> <span data-ttu-id="ca9b5-164">Be sure to select the **Pin to dashboard** checkbox if you want the app to show up on your dashboard.</span><span class="sxs-lookup"><span data-stu-id="ca9b5-164">Be sure to select the **Pin to dashboard** checkbox if you want the app to show up on your dashboard.</span></span> 

![][2]

<span data-ttu-id="ca9b5-165">Under the app name the subdomain name gets updated to reflect the subdomain of your ASE.</span><span class="sxs-lookup"><span data-stu-id="ca9b5-165">Under the app name the subdomain name gets updated to reflect the subdomain of your ASE.</span></span> 

## <a name="post-ilb-ase-creation-validation"></a><span data-ttu-id="ca9b5-166">Post ILB ASE creation validation</span><span class="sxs-lookup"><span data-stu-id="ca9b5-166">Post ILB ASE creation validation</span></span>
<span data-ttu-id="ca9b5-167">An ILB ASE is slightly different than the non-ILB ASE.</span><span class="sxs-lookup"><span data-stu-id="ca9b5-167">An ILB ASE is slightly different than the non-ILB ASE.</span></span> <span data-ttu-id="ca9b5-168">As already noted you need to manage your own DNS and you also have to provide your own certificate for HTTPS connections.</span><span class="sxs-lookup"><span data-stu-id="ca9b5-168">As already noted you need to manage your own DNS and you also have to provide your own certificate for HTTPS connections.</span></span> 

<span data-ttu-id="ca9b5-169">After you create your ASE, you will notice that the subdomain shows the subdomain you specified and there is a new item in the **Setting** menu called **ILB Certificate**.</span><span class="sxs-lookup"><span data-stu-id="ca9b5-169">After you create your ASE, you will notice that the subdomain shows the subdomain you specified and there is a new item in the **Setting** menu called **ILB Certificate**.</span></span> <span data-ttu-id="ca9b5-170">The ASE is created with a self-signed certificate which makes it easier to test HTTPS.</span><span class="sxs-lookup"><span data-stu-id="ca9b5-170">The ASE is created with a self-signed certificate which makes it easier to test HTTPS.</span></span> <span data-ttu-id="ca9b5-171">The portal tells you that you need to provide your own certificate for HTTPS, but this is to encourage you to have a certificate that goes with your subdomain.</span><span class="sxs-lookup"><span data-stu-id="ca9b5-171">The portal tells you that you need to provide your own certificate for HTTPS, but this is to encourage you to have a certificate that goes with your subdomain.</span></span> 

![][3]

<span data-ttu-id="ca9b5-172">If you are simply trying things out and don't know how to create a certificate, you can use the IIS MMC console application to create a self-signed certificate.</span><span class="sxs-lookup"><span data-stu-id="ca9b5-172">If you are simply trying things out and don't know how to create a certificate, you can use the IIS MMC console application to create a self-signed certificate.</span></span> <span data-ttu-id="ca9b5-173">Once it is created, you can export it as a .pfx file and then upload it in the ILB Certificate UI.</span><span class="sxs-lookup"><span data-stu-id="ca9b5-173">Once it is created, you can export it as a .pfx file and then upload it in the ILB Certificate UI.</span></span> <span data-ttu-id="ca9b5-174">When you access a site secured with a self-signed certificate, your browser gives you a warning that the site you are accessing is not secure due to the inability to validate the certificate.</span><span class="sxs-lookup"><span data-stu-id="ca9b5-174">When you access a site secured with a self-signed certificate, your browser gives you a warning that the site you are accessing is not secure due to the inability to validate the certificate.</span></span> <span data-ttu-id="ca9b5-175">If you want to avoid that warning, you'll need a properly signed certificate that matches your subdomain and has a chain of trust that is recognized by your browser.</span><span class="sxs-lookup"><span data-stu-id="ca9b5-175">If you want to avoid that warning, you'll need a properly signed certificate that matches your subdomain and has a chain of trust that is recognized by your browser.</span></span>

![][6]

<span data-ttu-id="ca9b5-176">If you want to try the flow with your own certificates and test both HTTP and HTTPS access to your ASE:</span><span class="sxs-lookup"><span data-stu-id="ca9b5-176">If you want to try the flow with your own certificates and test both HTTP and HTTPS access to your ASE:</span></span>

1. <span data-ttu-id="ca9b5-177">Go to ASE UI after ASE is created **ASE -> Settings -> ILB Certificates**.</span><span class="sxs-lookup"><span data-stu-id="ca9b5-177">Go to ASE UI after ASE is created **ASE -> Settings -> ILB Certificates**.</span></span>
2. <span data-ttu-id="ca9b5-178">Set ILB certificate by selecting certificate pfx file and provide password.</span><span class="sxs-lookup"><span data-stu-id="ca9b5-178">Set ILB certificate by selecting certificate pfx file and provide password.</span></span> <span data-ttu-id="ca9b5-179">This step takes a little while to process and the message that a scaling operation is in progress appears.</span><span class="sxs-lookup"><span data-stu-id="ca9b5-179">This step takes a little while to process and the message that a scaling operation is in progress appears.</span></span>
3. <span data-ttu-id="ca9b5-180">Get the ILB address for your ASE (**ASE -> Properties -> Virtual IP Address**).</span><span class="sxs-lookup"><span data-stu-id="ca9b5-180">Get the ILB address for your ASE (**ASE -> Properties -> Virtual IP Address**).</span></span>
4. <span data-ttu-id="ca9b5-181">Create a web app in ASE after creation.</span><span class="sxs-lookup"><span data-stu-id="ca9b5-181">Create a web app in ASE after creation.</span></span> 
5. <span data-ttu-id="ca9b5-182">Create a VM if you don't have one in that VNET (Not in the same subnet as the ASE or things break).</span><span class="sxs-lookup"><span data-stu-id="ca9b5-182">Create a VM if you don't have one in that VNET (Not in the same subnet as the ASE or things break).</span></span>
6. <span data-ttu-id="ca9b5-183">Set DNS for your subdomain.</span><span class="sxs-lookup"><span data-stu-id="ca9b5-183">Set DNS for your subdomain.</span></span> <span data-ttu-id="ca9b5-184">You can use a wildcard with your subdomain in your DNS or if you want to do some simple tests, edit the hosts file on your VM to set web app name to VIP IP address.</span><span class="sxs-lookup"><span data-stu-id="ca9b5-184">You can use a wildcard with your subdomain in your DNS or if you want to do some simple tests, edit the hosts file on your VM to set web app name to VIP IP address.</span></span> <span data-ttu-id="ca9b5-185">If your ASE had the subdomain name .ilbase.com and you made the web app mytestapp so that it would be addressed at mytestapp.ilbase.com, set that in your hosts file.</span><span class="sxs-lookup"><span data-stu-id="ca9b5-185">If your ASE had the subdomain name .ilbase.com and you made the web app mytestapp so that it would be addressed at mytestapp.ilbase.com, set that in your hosts file.</span></span> <span data-ttu-id="ca9b5-186">(On Windows, the hosts file is at C:\Windows\System32\drivers\etc\)</span><span class="sxs-lookup"><span data-stu-id="ca9b5-186">(On Windows, the hosts file is at C:\Windows\System32\drivers\etc\)</span></span>
7. <span data-ttu-id="ca9b5-187">Use a browser on that VM and go to http://mytestapp.ilbase.com (or whatever your web app name is with your subdomain).</span><span class="sxs-lookup"><span data-stu-id="ca9b5-187">Use a browser on that VM and go to http://mytestapp.ilbase.com (or whatever your web app name is with your subdomain).</span></span>
8. <span data-ttu-id="ca9b5-188">Use a browser on that VM and go to https://mytestapp.ilbase.com.</span><span class="sxs-lookup"><span data-stu-id="ca9b5-188">Use a browser on that VM and go to https://mytestapp.ilbase.com.</span></span> <span data-ttu-id="ca9b5-189">You must accept the lack of security if using a self-signed certificate.</span><span class="sxs-lookup"><span data-stu-id="ca9b5-189">You must accept the lack of security if using a self-signed certificate.</span></span> 

<span data-ttu-id="ca9b5-190">The IP address for your ILB is listed in your Properties as the Virtual IP Address.</span><span class="sxs-lookup"><span data-stu-id="ca9b5-190">The IP address for your ILB is listed in your Properties as the Virtual IP Address.</span></span>

![][4]

## <a name="using-an-ilb-ase"></a><span data-ttu-id="ca9b5-191">Using an ILB ASE</span><span class="sxs-lookup"><span data-stu-id="ca9b5-191">Using an ILB ASE</span></span>
#### <a name="network-security-groups"></a><span data-ttu-id="ca9b5-192">Network Security Groups</span><span class="sxs-lookup"><span data-stu-id="ca9b5-192">Network Security Groups</span></span>
<span data-ttu-id="ca9b5-193">An ILB ASE enables network isolation for your apps.</span><span class="sxs-lookup"><span data-stu-id="ca9b5-193">An ILB ASE enables network isolation for your apps.</span></span> <span data-ttu-id="ca9b5-194">The apps are not accessible or even known by the internet.</span><span class="sxs-lookup"><span data-stu-id="ca9b5-194">The apps are not accessible or even known by the internet.</span></span> <span data-ttu-id="ca9b5-195">This approach is excellent for hosting intranet sites, such as line-of-business applications.</span><span class="sxs-lookup"><span data-stu-id="ca9b5-195">This approach is excellent for hosting intranet sites, such as line-of-business applications.</span></span> <span data-ttu-id="ca9b5-196">When you need to restrict access even further, you can still use Network Security Groups(NSGs) to control access at the network level.</span><span class="sxs-lookup"><span data-stu-id="ca9b5-196">When you need to restrict access even further, you can still use Network Security Groups(NSGs) to control access at the network level.</span></span> 

<span data-ttu-id="ca9b5-197">If you wish to use NSGs to further restrict access, you must make sure you do not break the communication that the ASE needs in order to operate.</span><span class="sxs-lookup"><span data-stu-id="ca9b5-197">If you wish to use NSGs to further restrict access, you must make sure you do not break the communication that the ASE needs in order to operate.</span></span> <span data-ttu-id="ca9b5-198">Even though the HTTP/HTTPS access is only through the ILB used by the ASE, the ASE still depends on resources outside of the VNet.</span><span class="sxs-lookup"><span data-stu-id="ca9b5-198">Even though the HTTP/HTTPS access is only through the ILB used by the ASE, the ASE still depends on resources outside of the VNet.</span></span> <span data-ttu-id="ca9b5-199">To see what network access is still required, see [Controlling Inbound Traffic to an App Service Environment][ControlInbound] and  [Network Configuration Details for App Service Environments with ExpressRoute][ExpressRoute].</span><span class="sxs-lookup"><span data-stu-id="ca9b5-199">To see what network access is still required, see [Controlling Inbound Traffic to an App Service Environment][ControlInbound] and  [Network Configuration Details for App Service Environments with ExpressRoute][ExpressRoute].</span></span> 

<span data-ttu-id="ca9b5-200">To configure your NSGs, you must know the IP address that is used by Azure to manage your ASE.</span><span class="sxs-lookup"><span data-stu-id="ca9b5-200">To configure your NSGs, you must know the IP address that is used by Azure to manage your ASE.</span></span> <span data-ttu-id="ca9b5-201">That IP address is also the outbound IP address from your ASE if it makes internet requests.</span><span class="sxs-lookup"><span data-stu-id="ca9b5-201">That IP address is also the outbound IP address from your ASE if it makes internet requests.</span></span> <span data-ttu-id="ca9b5-202">The outbound IP address for your ASE remains static for the life of your ASE.</span><span class="sxs-lookup"><span data-stu-id="ca9b5-202">The outbound IP address for your ASE remains static for the life of your ASE.</span></span> <span data-ttu-id="ca9b5-203">If you delete and recreate your ASE, you will get a new IP address.</span><span class="sxs-lookup"><span data-stu-id="ca9b5-203">If you delete and recreate your ASE, you will get a new IP address.</span></span> <span data-ttu-id="ca9b5-204">To find the IP address, go to **Settings -> Properties** and find the **Outbound IP Address**.</span><span class="sxs-lookup"><span data-stu-id="ca9b5-204">To find the IP address, go to **Settings -> Properties** and find the **Outbound IP Address**.</span></span> 

![][5]

#### <a name="general-ilb-ase-management"></a><span data-ttu-id="ca9b5-205">General ILB ASE management</span><span class="sxs-lookup"><span data-stu-id="ca9b5-205">General ILB ASE management</span></span>
<span data-ttu-id="ca9b5-206">Managing an ILB ASE is largely the same as managing an ASE normally.</span><span class="sxs-lookup"><span data-stu-id="ca9b5-206">Managing an ILB ASE is largely the same as managing an ASE normally.</span></span> <span data-ttu-id="ca9b5-207">You must scale up your worker pools to host more ASP instances and scale up your front-end servers to handle increased amounts of HTTP/HTTPS traffic.</span><span class="sxs-lookup"><span data-stu-id="ca9b5-207">You must scale up your worker pools to host more ASP instances and scale up your front-end servers to handle increased amounts of HTTP/HTTPS traffic.</span></span> <span data-ttu-id="ca9b5-208">For general information on managing the configuration of an ASE, see [Configuring an App Service Environment][ASEConfig].</span><span class="sxs-lookup"><span data-stu-id="ca9b5-208">For general information on managing the configuration of an ASE, see [Configuring an App Service Environment][ASEConfig].</span></span> 

<span data-ttu-id="ca9b5-209">The additional management items are certificate management and DNS management.</span><span class="sxs-lookup"><span data-stu-id="ca9b5-209">The additional management items are certificate management and DNS management.</span></span> <span data-ttu-id="ca9b5-210">You must obtain and upload the certificate used for HTTPS after ILB ASE creation and replace it before it expires.</span><span class="sxs-lookup"><span data-stu-id="ca9b5-210">You must obtain and upload the certificate used for HTTPS after ILB ASE creation and replace it before it expires.</span></span> <span data-ttu-id="ca9b5-211">Because Azure owns the base domain, it can provide certificates for ASEs with an External VIP.</span><span class="sxs-lookup"><span data-stu-id="ca9b5-211">Because Azure owns the base domain, it can provide certificates for ASEs with an External VIP.</span></span> <span data-ttu-id="ca9b5-212">Since the subdomain used by an ILB ASE can be anything, you must provide your own certificate for HTTPS.</span><span class="sxs-lookup"><span data-stu-id="ca9b5-212">Since the subdomain used by an ILB ASE can be anything, you must provide your own certificate for HTTPS.</span></span> 

#### <a name="dns-configuration"></a><span data-ttu-id="ca9b5-213">DNS Configuration</span><span class="sxs-lookup"><span data-stu-id="ca9b5-213">DNS Configuration</span></span>
<span data-ttu-id="ca9b5-214">When using an External VIP, the DNS is managed by Azure.</span><span class="sxs-lookup"><span data-stu-id="ca9b5-214">When using an External VIP, the DNS is managed by Azure.</span></span> <span data-ttu-id="ca9b5-215">Any app created in your ASE is automatically added to Azure DNS, which is a public DNS.</span><span class="sxs-lookup"><span data-stu-id="ca9b5-215">Any app created in your ASE is automatically added to Azure DNS, which is a public DNS.</span></span> <span data-ttu-id="ca9b5-216">In an ILB ASE, you must manage your own DNS.</span><span class="sxs-lookup"><span data-stu-id="ca9b5-216">In an ILB ASE, you must manage your own DNS.</span></span> <span data-ttu-id="ca9b5-217">For a given subdomain, such as contoso.corp.net, you must create DNS A records that point to your ILB address for:</span><span class="sxs-lookup"><span data-stu-id="ca9b5-217">For a given subdomain, such as contoso.corp.net, you must create DNS A records that point to your ILB address for:</span></span>

    * 
    <span data-ttu-id="ca9b5-218">\*.scm ftp publish</span><span class="sxs-lookup"><span data-stu-id="ca9b5-218">\*.scm ftp publish</span></span> 


## <a name="getting-started"></a><span data-ttu-id="ca9b5-219">Getting started</span><span class="sxs-lookup"><span data-stu-id="ca9b5-219">Getting started</span></span>
<span data-ttu-id="ca9b5-220">To get started with App Service Environments, see [Introduction to App Service Environments][WhatisASE]</span><span class="sxs-lookup"><span data-stu-id="ca9b5-220">To get started with App Service Environments, see [Introduction to App Service Environments][WhatisASE]</span></span>

[!INCLUDE [app-service-web-try-app-service](../../../includes/app-service-web-try-app-service.md)]

<!--Image references-->
[1]: ./media/app-service-environment-with-internal-load-balancer/ilbase-createilbase.png
[2]: ./media/app-service-environment-with-internal-load-balancer/ilbase-createapp.png
[3]: ./media/app-service-environment-with-internal-load-balancer/ilbase-newase.png
[4]: ./media/app-service-environment-with-internal-load-balancer/ilbase-vip.png
[5]: ./media/app-service-environment-with-internal-load-balancer/ilbase-externalvip.png
[6]: ./media/app-service-environment-with-internal-load-balancer/ilbase-ilbcertificate.png

<!--Links-->
[WhatisASE]: app-service-app-service-environment-intro.md
[HowtoCreateASE]: app-service-web-how-to-create-an-app-service-environment.md
[ControlInbound]: app-service-app-service-environment-control-inbound-traffic.md
[virtualnetwork]: https://azure.microsoft.com/documentation/articles/virtual-networks-faq/
[AppServicePricing]: http://azure.microsoft.com/pricing/details/app-service/
[ASEAutoscale]: app-service-environment-auto-scale.md
[ExpressRoute]: app-service-app-service-environment-network-configuration-expressroute.md
[vnetnsgs]: http://azure.microsoft.com/documentation/articles/virtual-networks-nsg/
[ASEConfig]: app-service-web-configure-an-app-service-environment.md
