---
title: Configure Azure Active Directory authentication for your App Services application
description: Learn how to configure Azure Active Directory authentication for your App Services application.
author: mattchenderson
services: app-service
documentationcenter: ''
manager: syntaxc4
editor: ''
ms.assetid: 6ec6a46c-bce4-47aa-b8a3-e133baef22eb
ms.service: app-service-mobile
ms.workload: mobile
ms.tgt_pltfrm: na
ms.devlang: multiple
ms.topic: article
ms.date: 04/19/2018
ms.author: mahender
ms.openlocfilehash: 0c2ae7e4cf0b19ab9e1c276504892a2a8aaa8dfc
ms.sourcegitcommit: d1451406a010fd3aa854dc8e5b77dc5537d8050e
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 09/13/2018
ms.locfileid: "44871448"
---
# <a name="configure-your-app-service-app-to-use-azure-active-directory-login"></a><span data-ttu-id="fd87a-103">Configure your App Service app to use Azure Active Directory login</span><span class="sxs-lookup"><span data-stu-id="fd87a-103">Configure your App Service app to use Azure Active Directory login</span></span>
[!INCLUDE [app-service-mobile-selector-authentication](../../includes/app-service-mobile-selector-authentication.md)]

<span data-ttu-id="fd87a-104">This article shows you how to configure Azure App Services to use Azure Active Directory as an authentication provider.</span><span class="sxs-lookup"><span data-stu-id="fd87a-104">This article shows you how to configure Azure App Services to use Azure Active Directory as an authentication provider.</span></span>

## <span data-ttu-id="fd87a-105"><a name="express"> </a>Configure Azure Active Directory using express settings</span><span class="sxs-lookup"><span data-stu-id="fd87a-105"><a name="express"> </a>Configure Azure Active Directory using express settings</span></span>
1. <span data-ttu-id="fd87a-106">In the [Azure portal], navigate to your App Service app.</span><span class="sxs-lookup"><span data-stu-id="fd87a-106">In the [Azure portal], navigate to your App Service app.</span></span> <span data-ttu-id="fd87a-107">In the left navigation, select **Authentication / Authorization**.</span><span class="sxs-lookup"><span data-stu-id="fd87a-107">In the left navigation, select **Authentication / Authorization**.</span></span>
2. <span data-ttu-id="fd87a-108">If **Authentication / Authorization** is not enabled, select **On**.</span><span class="sxs-lookup"><span data-stu-id="fd87a-108">If **Authentication / Authorization** is not enabled, select **On**.</span></span>
3. <span data-ttu-id="fd87a-109">Select **Azure Active Directory**, and then select **Express** under **Management Mode**.</span><span class="sxs-lookup"><span data-stu-id="fd87a-109">Select **Azure Active Directory**, and then select **Express** under **Management Mode**.</span></span>
4. <span data-ttu-id="fd87a-110">Select **OK** to register the App Service app in Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="fd87a-110">Select **OK** to register the App Service app in Azure Active Directory.</span></span> <span data-ttu-id="fd87a-111">This creates a new app registration.</span><span class="sxs-lookup"><span data-stu-id="fd87a-111">This creates a new app registration.</span></span> <span data-ttu-id="fd87a-112">If you want to choose an existing app registration instead, click **Select an existing app** and then search for the name of a previously created app registration within your tenant.</span><span class="sxs-lookup"><span data-stu-id="fd87a-112">If you want to choose an existing app registration instead, click **Select an existing app** and then search for the name of a previously created app registration within your tenant.</span></span>
   <span data-ttu-id="fd87a-113">Click the app registration to select it and click **OK**.</span><span class="sxs-lookup"><span data-stu-id="fd87a-113">Click the app registration to select it and click **OK**.</span></span> <span data-ttu-id="fd87a-114">Then click **OK** on the Azure Active Directory settings page.</span><span class="sxs-lookup"><span data-stu-id="fd87a-114">Then click **OK** on the Azure Active Directory settings page.</span></span>
   <span data-ttu-id="fd87a-115">By default, App Service provides authentication but does not restrict authorized access to your site content and APIs.</span><span class="sxs-lookup"><span data-stu-id="fd87a-115">By default, App Service provides authentication but does not restrict authorized access to your site content and APIs.</span></span> <span data-ttu-id="fd87a-116">You must authorize users in your app code.</span><span class="sxs-lookup"><span data-stu-id="fd87a-116">You must authorize users in your app code.</span></span>
5. <span data-ttu-id="fd87a-117">(Optional) To restrict access to your site to only users authenticated by Azure Active Directory, set **Action to take when request is not authenticated** to **Log in with Azure Active Directory**.</span><span class="sxs-lookup"><span data-stu-id="fd87a-117">(Optional) To restrict access to your site to only users authenticated by Azure Active Directory, set **Action to take when request is not authenticated** to **Log in with Azure Active Directory**.</span></span> <span data-ttu-id="fd87a-118">This requires that all requests be authenticated, and all unauthenticated requests are redirected to Azure Active Directory for authentication.</span><span class="sxs-lookup"><span data-stu-id="fd87a-118">This requires that all requests be authenticated, and all unauthenticated requests are redirected to Azure Active Directory for authentication.</span></span>
6. <span data-ttu-id="fd87a-119">Click **Save**.</span><span class="sxs-lookup"><span data-stu-id="fd87a-119">Click **Save**.</span></span>

<span data-ttu-id="fd87a-120">You are now ready to use Azure Active Directory for authentication in your App Service app.</span><span class="sxs-lookup"><span data-stu-id="fd87a-120">You are now ready to use Azure Active Directory for authentication in your App Service app.</span></span>

## <span data-ttu-id="fd87a-121"><a name="advanced"> </a>(Alternative method) Manually configure Azure Active Directory with advanced settings</span><span class="sxs-lookup"><span data-stu-id="fd87a-121"><a name="advanced"> </a>(Alternative method) Manually configure Azure Active Directory with advanced settings</span></span>
<span data-ttu-id="fd87a-122">You can also choose to provide configuration settings manually.</span><span class="sxs-lookup"><span data-stu-id="fd87a-122">You can also choose to provide configuration settings manually.</span></span> <span data-ttu-id="fd87a-123">This is the preferred solution if the AAD tenant you wish to use is different from the tenant with which you sign into Azure.</span><span class="sxs-lookup"><span data-stu-id="fd87a-123">This is the preferred solution if the AAD tenant you wish to use is different from the tenant with which you sign into Azure.</span></span> <span data-ttu-id="fd87a-124">To complete the configuration, you must first create a registration in Azure Active Directory, and then you must provide some of the registration details to App Service.</span><span class="sxs-lookup"><span data-stu-id="fd87a-124">To complete the configuration, you must first create a registration in Azure Active Directory, and then you must provide some of the registration details to App Service.</span></span>

### <span data-ttu-id="fd87a-125"><a name="register"> </a>Register your App Service app with Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="fd87a-125"><a name="register"> </a>Register your App Service app with Azure Active Directory</span></span>
1. <span data-ttu-id="fd87a-126">Log on to the [Azure portal], and navigate to your App Service app.</span><span class="sxs-lookup"><span data-stu-id="fd87a-126">Log on to the [Azure portal], and navigate to your App Service app.</span></span> <span data-ttu-id="fd87a-127">Copy your app **URL**.</span><span class="sxs-lookup"><span data-stu-id="fd87a-127">Copy your app **URL**.</span></span> <span data-ttu-id="fd87a-128">You will use this to configure your Azure Active Directory app registration.</span><span class="sxs-lookup"><span data-stu-id="fd87a-128">You will use this to configure your Azure Active Directory app registration.</span></span>
2. <span data-ttu-id="fd87a-129">Navigate to **Active Directory**, then select the **App registrations**, then click **New application registration** at the top to start a new app registration.</span><span class="sxs-lookup"><span data-stu-id="fd87a-129">Navigate to **Active Directory**, then select the **App registrations**, then click **New application registration** at the top to start a new app registration.</span></span> 
3. <span data-ttu-id="fd87a-130">In the **Create** page, enter a **Name** for your app registration, select the  **Web App / API** type, in the **Sign-on URL** box paste the application URL (from step 1).</span><span class="sxs-lookup"><span data-stu-id="fd87a-130">In the **Create** page, enter a **Name** for your app registration, select the  **Web App / API** type, in the **Sign-on URL** box paste the application URL (from step 1).</span></span> <span data-ttu-id="fd87a-131">Then click to **Create**.</span><span class="sxs-lookup"><span data-stu-id="fd87a-131">Then click to **Create**.</span></span>
4. <span data-ttu-id="fd87a-132">In a few seconds, you should see the new app registration you just created.</span><span class="sxs-lookup"><span data-stu-id="fd87a-132">In a few seconds, you should see the new app registration you just created.</span></span>
5. <span data-ttu-id="fd87a-133">Once the app registration has been added, click on the app registration name, click on **Settings** at the top, then click on **Properties**</span><span class="sxs-lookup"><span data-stu-id="fd87a-133">Once the app registration has been added, click on the app registration name, click on **Settings** at the top, then click on **Properties**</span></span> 
6. <span data-ttu-id="fd87a-134">In the **App ID URI** box, paste in the Application URL (from step 1), also in the **Home Page URL** paste in the Application URL (from step 1) as well, then click **Save**</span><span class="sxs-lookup"><span data-stu-id="fd87a-134">In the **App ID URI** box, paste in the Application URL (from step 1), also in the **Home Page URL** paste in the Application URL (from step 1) as well, then click **Save**</span></span>
7. <span data-ttu-id="fd87a-135">Now click on the **Reply URLs**, edit the **Reply URL**, paste in the Application URL (from step 1), modify the protocol to make sure you have **https://** protocol (not http://), then appended to the end of the URL, */.auth/login/aad/callback* (For example, `https://contoso.azurewebsites.net/.auth/login/aad/callback`).</span><span class="sxs-lookup"><span data-stu-id="fd87a-135">Now click on the **Reply URLs**, edit the **Reply URL**, paste in the Application URL (from step 1), modify the protocol to make sure you have **https://** protocol (not http://), then appended to the end of the URL, */.auth/login/aad/callback* (For example, `https://contoso.azurewebsites.net/.auth/login/aad/callback`).</span></span> <span data-ttu-id="fd87a-136">Click **Save**.</span><span class="sxs-lookup"><span data-stu-id="fd87a-136">Click **Save**.</span></span>   
8.  <span data-ttu-id="fd87a-137">At this point, copy the **Application ID** for the app.</span><span class="sxs-lookup"><span data-stu-id="fd87a-137">At this point, copy the **Application ID** for the app.</span></span> <span data-ttu-id="fd87a-138">Keep it for later use.</span><span class="sxs-lookup"><span data-stu-id="fd87a-138">Keep it for later use.</span></span> <span data-ttu-id="fd87a-139">You will need it to configure your App Service app.</span><span class="sxs-lookup"><span data-stu-id="fd87a-139">You will need it to configure your App Service app.</span></span>
9. <span data-ttu-id="fd87a-140">Close the **Registered app** page.</span><span class="sxs-lookup"><span data-stu-id="fd87a-140">Close the **Registered app** page.</span></span> <span data-ttu-id="fd87a-141">On the **App registrations** page, click on the **Endpoints** button at the top, then copy the **Federation Metadata Document** URL.</span><span class="sxs-lookup"><span data-stu-id="fd87a-141">On the **App registrations** page, click on the **Endpoints** button at the top, then copy the **Federation Metadata Document** URL.</span></span> 
10. <span data-ttu-id="fd87a-142">Open a new browser window and navigate to the URL by pasting and browsing to the XML page.</span><span class="sxs-lookup"><span data-stu-id="fd87a-142">Open a new browser window and navigate to the URL by pasting and browsing to the XML page.</span></span> <span data-ttu-id="fd87a-143">At the top of document is an **EntityDescriptor** element.</span><span class="sxs-lookup"><span data-stu-id="fd87a-143">At the top of document is an **EntityDescriptor** element.</span></span> <span data-ttu-id="fd87a-144">Find the **entityID** attribute and copy its value.</span><span class="sxs-lookup"><span data-stu-id="fd87a-144">Find the **entityID** attribute and copy its value.</span></span> <span data-ttu-id="fd87a-145">It serves as your **Issuer URL**.</span><span class="sxs-lookup"><span data-stu-id="fd87a-145">It serves as your **Issuer URL**.</span></span> <span data-ttu-id="fd87a-146">You will configure your application to use it later.</span><span class="sxs-lookup"><span data-stu-id="fd87a-146">You will configure your application to use it later.</span></span>

### <span data-ttu-id="fd87a-147"><a name="secrets"> </a>Add Azure Active Directory information to your App Service app</span><span class="sxs-lookup"><span data-stu-id="fd87a-147"><a name="secrets"> </a>Add Azure Active Directory information to your App Service app</span></span>
1. <span data-ttu-id="fd87a-148">Back in the [Azure portal], navigate to your App Service app.</span><span class="sxs-lookup"><span data-stu-id="fd87a-148">Back in the [Azure portal], navigate to your App Service app.</span></span> <span data-ttu-id="fd87a-149">Click **Authentication/Authorization**.</span><span class="sxs-lookup"><span data-stu-id="fd87a-149">Click **Authentication/Authorization**.</span></span> <span data-ttu-id="fd87a-150">If the Authentication/Authorization feature is not enabled, turn the switch to **On**.</span><span class="sxs-lookup"><span data-stu-id="fd87a-150">If the Authentication/Authorization feature is not enabled, turn the switch to **On**.</span></span> <span data-ttu-id="fd87a-151">Click on **Azure Active Directory**, under Authentication Providers, to configure your app.</span><span class="sxs-lookup"><span data-stu-id="fd87a-151">Click on **Azure Active Directory**, under Authentication Providers, to configure your app.</span></span> <span data-ttu-id="fd87a-152">(Optional) By default, App Service provides authentication but does not restrict authorized access to your site content and APIs.</span><span class="sxs-lookup"><span data-stu-id="fd87a-152">(Optional) By default, App Service provides authentication but does not restrict authorized access to your site content and APIs.</span></span> <span data-ttu-id="fd87a-153">You must authorize users in your app code.</span><span class="sxs-lookup"><span data-stu-id="fd87a-153">You must authorize users in your app code.</span></span> <span data-ttu-id="fd87a-154">Set **Action to take when request is not authenticated** to **Log in with Azure Active Directory**.</span><span class="sxs-lookup"><span data-stu-id="fd87a-154">Set **Action to take when request is not authenticated** to **Log in with Azure Active Directory**.</span></span> <span data-ttu-id="fd87a-155">This option requires that all requests be authenticated, and all unauthenticated requests are redirected to Azure Active Directory for authentication.</span><span class="sxs-lookup"><span data-stu-id="fd87a-155">This option requires that all requests be authenticated, and all unauthenticated requests are redirected to Azure Active Directory for authentication.</span></span>
2. <span data-ttu-id="fd87a-156">In the Active Directory Authentication configuration, click **Advanced** under **Management Mode**.</span><span class="sxs-lookup"><span data-stu-id="fd87a-156">In the Active Directory Authentication configuration, click **Advanced** under **Management Mode**.</span></span> <span data-ttu-id="fd87a-157">Paste the Application ID into the Client ID box (from step 8) and paste in the entityId (from step 10) into the Issuer URL value.</span><span class="sxs-lookup"><span data-stu-id="fd87a-157">Paste the Application ID into the Client ID box (from step 8) and paste in the entityId (from step 10) into the Issuer URL value.</span></span> <span data-ttu-id="fd87a-158">Then click **OK**.</span><span class="sxs-lookup"><span data-stu-id="fd87a-158">Then click **OK**.</span></span>
3. <span data-ttu-id="fd87a-159">On the Active Directory Authentication configuration page, click **Save**.</span><span class="sxs-lookup"><span data-stu-id="fd87a-159">On the Active Directory Authentication configuration page, click **Save**.</span></span>

<span data-ttu-id="fd87a-160">You are now ready to use Azure Active Directory for authentication in your App Service app.</span><span class="sxs-lookup"><span data-stu-id="fd87a-160">You are now ready to use Azure Active Directory for authentication in your App Service app.</span></span>

## <a name="optional-configure-a-native-client-application"></a><span data-ttu-id="fd87a-161">(Optional) Configure a native client application</span><span class="sxs-lookup"><span data-stu-id="fd87a-161">(Optional) Configure a native client application</span></span>
<span data-ttu-id="fd87a-162">Azure Active Directory also allows you to register native clients, which provides greater control over permissions mapping.</span><span class="sxs-lookup"><span data-stu-id="fd87a-162">Azure Active Directory also allows you to register native clients, which provides greater control over permissions mapping.</span></span> <span data-ttu-id="fd87a-163">You need this if you wish to perform logins using a library such as the **Active Directory Authentication Library**.</span><span class="sxs-lookup"><span data-stu-id="fd87a-163">You need this if you wish to perform logins using a library such as the **Active Directory Authentication Library**.</span></span>

1. <span data-ttu-id="fd87a-164">Navigate to **Azure Active Directory** in the [Azure portal].</span><span class="sxs-lookup"><span data-stu-id="fd87a-164">Navigate to **Azure Active Directory** in the [Azure portal].</span></span>
2. <span data-ttu-id="fd87a-165">In the left navigation, select **App registrations**.</span><span class="sxs-lookup"><span data-stu-id="fd87a-165">In the left navigation, select **App registrations**.</span></span> <span data-ttu-id="fd87a-166">Click **New app registration** at the top.</span><span class="sxs-lookup"><span data-stu-id="fd87a-166">Click **New app registration** at the top.</span></span>
4. <span data-ttu-id="fd87a-167">In the **Create** page, enter a **Name** for your app registration.</span><span class="sxs-lookup"><span data-stu-id="fd87a-167">In the **Create** page, enter a **Name** for your app registration.</span></span> <span data-ttu-id="fd87a-168">Select **Native** in **Application type**.</span><span class="sxs-lookup"><span data-stu-id="fd87a-168">Select **Native** in **Application type**.</span></span>
5. <span data-ttu-id="fd87a-169">In the **Redirect URI** box, enter your site's */.auth/login/done* endpoint, using the HTTPS scheme.</span><span class="sxs-lookup"><span data-stu-id="fd87a-169">In the **Redirect URI** box, enter your site's */.auth/login/done* endpoint, using the HTTPS scheme.</span></span> <span data-ttu-id="fd87a-170">This value should be similar to *https://contoso.azurewebsites.net/.auth/login/done*.</span><span class="sxs-lookup"><span data-stu-id="fd87a-170">This value should be similar to *https://contoso.azurewebsites.net/.auth/login/done*.</span></span> <span data-ttu-id="fd87a-171">If creating a Windows application, instead use the [package SID](../app-service-mobile/app-service-mobile-dotnet-how-to-use-client-library.md#package-sid) as the URI.</span><span class="sxs-lookup"><span data-stu-id="fd87a-171">If creating a Windows application, instead use the [package SID](../app-service-mobile/app-service-mobile-dotnet-how-to-use-client-library.md#package-sid) as the URI.</span></span>
5. <span data-ttu-id="fd87a-172">Click **Create**.</span><span class="sxs-lookup"><span data-stu-id="fd87a-172">Click **Create**.</span></span>
6. <span data-ttu-id="fd87a-173">Once the app registration has been added, select it to open it.</span><span class="sxs-lookup"><span data-stu-id="fd87a-173">Once the app registration has been added, select it to open it.</span></span> <span data-ttu-id="fd87a-174">Find the **Application ID** and make a note of this value.</span><span class="sxs-lookup"><span data-stu-id="fd87a-174">Find the **Application ID** and make a note of this value.</span></span>
7. <span data-ttu-id="fd87a-175">Click **All settings** > **Required permissions** > **Add** > **Select an API**.</span><span class="sxs-lookup"><span data-stu-id="fd87a-175">Click **All settings** > **Required permissions** > **Add** > **Select an API**.</span></span>
8. <span data-ttu-id="fd87a-176">Type the name of the App Service app that you registered earlier to search for it, then select it and click **Select**.</span><span class="sxs-lookup"><span data-stu-id="fd87a-176">Type the name of the App Service app that you registered earlier to search for it, then select it and click **Select**.</span></span> 
9. <span data-ttu-id="fd87a-177">Select **Access \<app_name>**.</span><span class="sxs-lookup"><span data-stu-id="fd87a-177">Select **Access \<app_name>**.</span></span> <span data-ttu-id="fd87a-178">Then click **Select**.</span><span class="sxs-lookup"><span data-stu-id="fd87a-178">Then click **Select**.</span></span> <span data-ttu-id="fd87a-179">Then click **Done**.</span><span class="sxs-lookup"><span data-stu-id="fd87a-179">Then click **Done**.</span></span>

<span data-ttu-id="fd87a-180">You have now configured a native client application that can access your App Service app.</span><span class="sxs-lookup"><span data-stu-id="fd87a-180">You have now configured a native client application that can access your App Service app.</span></span>

## <span data-ttu-id="fd87a-181"><a name="related-content"> </a>Related Content</span><span class="sxs-lookup"><span data-stu-id="fd87a-181"><a name="related-content"> </a>Related Content</span></span>
[!INCLUDE [app-service-mobile-related-content-get-started-users](../../includes/app-service-mobile-related-content-get-started-users.md)]

<!-- Images. -->

[0]: ./media/app-service-mobile-how-to-configure-active-directory-authentication/app-service-webapp-url.png
[1]: ./media/app-service-mobile-how-to-configure-active-directory-authentication/app-service-aad-app_registration.png
[2]: ./media/app-service-mobile-how-to-configure-active-directory-authentication/app-service-aad-app-registration-create.png
[3]: ./media/app-service-mobile-how-to-configure-active-directory-authentication/app-service-aad-app-registration-config-appidurl.png
[4]: ./media/app-service-mobile-how-to-configure-active-directory-authentication/app-service-aad-app-registration-config-replyurl.png
[5]: ./media/app-service-mobile-how-to-configure-active-directory-authentication/app-service-aad-endpoints.png
[6]: ./media/app-service-mobile-how-to-configure-active-directory-authentication/app-service-aad-endpoints-fedmetadataxml.png
[7]: ./media/app-service-mobile-how-to-configure-active-directory-authentication/app-service-webapp-auth.png
[8]: ./media/app-service-mobile-how-to-configure-active-directory-authentication/app-service-webapp-auth-config.png



<!-- URLs. -->

[Azure portal]: https://portal.azure.com/
[alternative method]:#advanced
