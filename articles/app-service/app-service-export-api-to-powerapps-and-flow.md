---
title: Exporting an Azure hosted API to PowerApps and Microsoft Flow | Microsoft Docs
description: Overview of how to expose an API hosted in App Service to PowerApps and Microsoft Flow
services: app-service
documentationcenter: ''
author: mattchenderson
manager: erikre
editor: ''
ms.assetid: ''
ms.service: app-service
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: multiple
ms.topic: article
ms.date: 02/06/2017
ms.author: mahender
ms.openlocfilehash: 503f17a629527e8c9a3bfe6cde1da31dcf1f18ef
ms.sourcegitcommit: 5b9d839c0c0a94b293fdafe1d6e5429506c07e05
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 08/02/2018
ms.locfileid: "44555512"
---
# <a name="exporting-an-azure-hosted-api-to-powerapps-and-microsoft-flow"></a><span data-ttu-id="f66c5-103">Exporting an Azure hosted API to PowerApps and Microsoft Flow</span><span class="sxs-lookup"><span data-stu-id="f66c5-103">Exporting an Azure hosted API to PowerApps and Microsoft Flow</span></span>

## <a name="creating-custom-apis-for-powerapps-and-microsoft-flow"></a><span data-ttu-id="f66c5-104">Creating custom APIs for PowerApps and Microsoft Flow</span><span class="sxs-lookup"><span data-stu-id="f66c5-104">Creating custom APIs for PowerApps and Microsoft Flow</span></span>

<span data-ttu-id="f66c5-105">The [Microsoft Business Application Platform](https://businessplatform.microsoft.com/) includes a variety of products that help power users get more done.</span><span class="sxs-lookup"><span data-stu-id="f66c5-105">The [Microsoft Business Application Platform](https://businessplatform.microsoft.com/) includes a variety of products that help power users get more done.</span></span> <span data-ttu-id="f66c5-106">[PowerApps](https://powerapps.com) is a service for building and using custom business apps that connect to your data and work across platforms.</span><span class="sxs-lookup"><span data-stu-id="f66c5-106">[PowerApps](https://powerapps.com) is a service for building and using custom business apps that connect to your data and work across platforms.</span></span> <span data-ttu-id="f66c5-107">[Microsoft Flow](https://flow.microsoft.com) makes it easy to automate workflows and business processes between your favorite apps and services.</span><span class="sxs-lookup"><span data-stu-id="f66c5-107">[Microsoft Flow](https://flow.microsoft.com) makes it easy to automate workflows and business processes between your favorite apps and services.</span></span> <span data-ttu-id="f66c5-108">Both PowerApps and Microsoft Flow come with a variety of built-in connectors to data sources such as Office 365, Dynamics 365, Salesforce, and more.</span><span class="sxs-lookup"><span data-stu-id="f66c5-108">Both PowerApps and Microsoft Flow come with a variety of built-in connectors to data sources such as Office 365, Dynamics 365, Salesforce, and more.</span></span> <span data-ttu-id="f66c5-109">However, users also need to be able to leverage data sources and APIs being built by their organization.</span><span class="sxs-lookup"><span data-stu-id="f66c5-109">However, users also need to be able to leverage data sources and APIs being built by their organization.</span></span>

<span data-ttu-id="f66c5-110">Similarly, developers that want to expose their APIs more broadly within the organization may want to make their APIs available to PowerApps and Microsoft Flow users.</span><span class="sxs-lookup"><span data-stu-id="f66c5-110">Similarly, developers that want to expose their APIs more broadly within the organization may want to make their APIs available to PowerApps and Microsoft Flow users.</span></span> <span data-ttu-id="f66c5-111">This topic will show you how to expose an API built with Azure App Service or Azure Functions to PowerApps and Microsoft Flow.</span><span class="sxs-lookup"><span data-stu-id="f66c5-111">This topic will show you how to expose an API built with Azure App Service or Azure Functions to PowerApps and Microsoft Flow.</span></span> <span data-ttu-id="f66c5-112">[Azure App Service](https://azure.microsoft.com/services/app-service/) is a platform-as-a-service offering that allows developers to quickly and easily build enterprise-grade web, mobile, and API applications.</span><span class="sxs-lookup"><span data-stu-id="f66c5-112">[Azure App Service](https://azure.microsoft.com/services/app-service/) is a platform-as-a-service offering that allows developers to quickly and easily build enterprise-grade web, mobile, and API applications.</span></span> <span data-ttu-id="f66c5-113">[Azure Functions](https://azure.microsoft.com/services/functions/) is an event-based serverless compute solution that allows you to quickly author code that can react to other parts of your system and scale based on demand.</span><span class="sxs-lookup"><span data-stu-id="f66c5-113">[Azure Functions](https://azure.microsoft.com/services/functions/) is an event-based serverless compute solution that allows you to quickly author code that can react to other parts of your system and scale based on demand.</span></span>

<span data-ttu-id="f66c5-114">To learn more about these services, see:</span><span class="sxs-lookup"><span data-stu-id="f66c5-114">To learn more about these services, see:</span></span>
- [<span data-ttu-id="f66c5-115">PowerApps Guided Learning</span><span class="sxs-lookup"><span data-stu-id="f66c5-115">PowerApps Guided Learning</span></span>](https://powerapps.microsoft.com/guided-learning/learning-introducing-powerapps/) 
- [<span data-ttu-id="f66c5-116">Microsoft Flow Guided Learning</span><span class="sxs-lookup"><span data-stu-id="f66c5-116">Microsoft Flow Guided Learning</span></span>](https://flow.microsoft.com/guided-learning/learning-introducing-flow/)
- [<span data-ttu-id="f66c5-117">What is App Service?</span><span class="sxs-lookup"><span data-stu-id="f66c5-117">What is App Service?</span></span>](https://docs.microsoft.com/azure/app-service/app-service-value-prop-what-is)
- [<span data-ttu-id="f66c5-118">What is Azure Functions</span><span class="sxs-lookup"><span data-stu-id="f66c5-118">What is Azure Functions</span></span>](https://docs.microsoft.com/azure/azure-functions/functions-overview)

## <a name="sharing-an-api-definition"></a><span data-ttu-id="f66c5-119">Sharing an API definition</span><span class="sxs-lookup"><span data-stu-id="f66c5-119">Sharing an API definition</span></span>

<span data-ttu-id="f66c5-120">APIs are often described using an [Open API document](https://www.openapis.org/) (sometimes referred to as a "Swagger" document).</span><span class="sxs-lookup"><span data-stu-id="f66c5-120">APIs are often described using an [Open API document](https://www.openapis.org/) (sometimes referred to as a "Swagger" document).</span></span> <span data-ttu-id="f66c5-121">This contains all of the information about what operations are available and how the data should be structured.</span><span class="sxs-lookup"><span data-stu-id="f66c5-121">This contains all of the information about what operations are available and how the data should be structured.</span></span> <span data-ttu-id="f66c5-122">PowerApps and Microsoft Flow can create custom APIs for any Open API 2.0 document.</span><span class="sxs-lookup"><span data-stu-id="f66c5-122">PowerApps and Microsoft Flow can create custom APIs for any Open API 2.0 document.</span></span> <span data-ttu-id="f66c5-123">Once a custom API is created, it can be used in exactly the same way as one of the built-in connectors and can quickly be integrated into an application.</span><span class="sxs-lookup"><span data-stu-id="f66c5-123">Once a custom API is created, it can be used in exactly the same way as one of the built-in connectors and can quickly be integrated into an application.</span></span>

<span data-ttu-id="f66c5-124">Azure App Service and Azure Functions have [built-in support](https://docs.microsoft.com/azure/app-service-api/app-service-api-metadata) for creating, hosting, and managing an Open API document.</span><span class="sxs-lookup"><span data-stu-id="f66c5-124">Azure App Service and Azure Functions have [built-in support](https://docs.microsoft.com/azure/app-service-api/app-service-api-metadata) for creating, hosting, and managing an Open API document.</span></span> <span data-ttu-id="f66c5-125">In order to create a custom connector for a web, mobile, API, or function app, two steps will be needed:</span><span class="sxs-lookup"><span data-stu-id="f66c5-125">In order to create a custom connector for a web, mobile, API, or function app, two steps will be needed:</span></span>

1. [<span data-ttu-id="f66c5-126">Retrieving the API definition from App Service or Azure Functions</span><span class="sxs-lookup"><span data-stu-id="f66c5-126">Retrieving the API definition from App Service or Azure Functions</span></span>](#export)
2. [<span data-ttu-id="f66c5-127">Importing the API definition into PowerApps</span><span class="sxs-lookup"><span data-stu-id="f66c5-127">Importing the API definition into PowerApps</span></span>](#import)

<span data-ttu-id="f66c5-128">It is possible that these two steps will need to be carried out by separate individuals within an organization, as a given user may not have permission to perform both actions.</span><span class="sxs-lookup"><span data-stu-id="f66c5-128">It is possible that these two steps will need to be carried out by separate individuals within an organization, as a given user may not have permission to perform both actions.</span></span> <span data-ttu-id="f66c5-129">In this case, a developer who has contributor access to the App Service or Azure Functions application will need to obtain the API definition (a single JSON file) or a link to it.</span><span class="sxs-lookup"><span data-stu-id="f66c5-129">In this case, a developer who has contributor access to the App Service or Azure Functions application will need to obtain the API definition (a single JSON file) or a link to it.</span></span> <span data-ttu-id="f66c5-130">They will then need to provide that definition to a PowerApps or Microsoft Flow owner.</span><span class="sxs-lookup"><span data-stu-id="f66c5-130">They will then need to provide that definition to a PowerApps or Microsoft Flow owner.</span></span> <span data-ttu-id="f66c5-131">That owner can use the metadata to create the custom API.</span><span class="sxs-lookup"><span data-stu-id="f66c5-131">That owner can use the metadata to create the custom API.</span></span>

> [!NOTE]
> <span data-ttu-id="f66c5-132">Because a copy of the API definition is being used, PowerApps and Microsoft Flow will not immediately know about updates or breaking changes to the application.</span><span class="sxs-lookup"><span data-stu-id="f66c5-132">Because a copy of the API definition is being used, PowerApps and Microsoft Flow will not immediately know about updates or breaking changes to the application.</span></span> <span data-ttu-id="f66c5-133">If a new version of the API is made available, these steps should be repeated for the new version.</span><span class="sxs-lookup"><span data-stu-id="f66c5-133">If a new version of the API is made available, these steps should be repeated for the new version.</span></span> 

<a name="export"></a>
## <a name="retrieving-the-api-definition-from-app-service-or-azure-functions"></a><span data-ttu-id="f66c5-134">Retrieving the API definition from App Service or Azure Functions</span><span class="sxs-lookup"><span data-stu-id="f66c5-134">Retrieving the API definition from App Service or Azure Functions</span></span>

<span data-ttu-id="f66c5-135">In this section, you will export the API definition for your App Service API, to be used later in PowerApps.</span><span class="sxs-lookup"><span data-stu-id="f66c5-135">In this section, you will export the API definition for your App Service API, to be used later in PowerApps.</span></span>

1. <span data-ttu-id="f66c5-136">Open the [Azure Portal](https://portal.azure.com) and navigate to your App Service or Azure Functions application.</span><span class="sxs-lookup"><span data-stu-id="f66c5-136">Open the [Azure Portal](https://portal.azure.com) and navigate to your App Service or Azure Functions application.</span></span>

    <span data-ttu-id="f66c5-137">If using Azure App Service, select **API definition** from the settings list.</span><span class="sxs-lookup"><span data-stu-id="f66c5-137">If using Azure App Service, select **API definition** from the settings list.</span></span> 
    
    <span data-ttu-id="f66c5-138">If using Azure Functions, select **Function app settings** and then **Configure API metadata**.</span><span class="sxs-lookup"><span data-stu-id="f66c5-138">If using Azure Functions, select **Function app settings** and then **Configure API metadata**.</span></span>

2. <span data-ttu-id="f66c5-139">If an API definition has been provided, you will see an **Export to PowerApps + Microsoft Flow** button.</span><span class="sxs-lookup"><span data-stu-id="f66c5-139">If an API definition has been provided, you will see an **Export to PowerApps + Microsoft Flow** button.</span></span> <span data-ttu-id="f66c5-140">Click this button to begin the export process.</span><span class="sxs-lookup"><span data-stu-id="f66c5-140">Click this button to begin the export process.</span></span>

3. <span data-ttu-id="f66c5-141">You can choose to either **Download the API definition** or **Get a link**.</span><span class="sxs-lookup"><span data-stu-id="f66c5-141">You can choose to either **Download the API definition** or **Get a link**.</span></span> <span data-ttu-id="f66c5-142">Whichever you choose, the result will be provided to PowerApps in the next section.</span><span class="sxs-lookup"><span data-stu-id="f66c5-142">Whichever you choose, the result will be provided to PowerApps in the next section.</span></span> <span data-ttu-id="f66c5-143">Select one of these options and follow the instructions.</span><span class="sxs-lookup"><span data-stu-id="f66c5-143">Select one of these options and follow the instructions.</span></span>
 
4. <span data-ttu-id="f66c5-144">If your API definition includes any security definitions, these will be called out in step #2.</span><span class="sxs-lookup"><span data-stu-id="f66c5-144">If your API definition includes any security definitions, these will be called out in step #2.</span></span> <span data-ttu-id="f66c5-145">During import, PowerApps and Microsoft Flow will detect these and will prompt for security information.</span><span class="sxs-lookup"><span data-stu-id="f66c5-145">During import, PowerApps and Microsoft Flow will detect these and will prompt for security information.</span></span> <span data-ttu-id="f66c5-146">The services use this to log users in, so that they can access the API.</span><span class="sxs-lookup"><span data-stu-id="f66c5-146">The services use this to log users in, so that they can access the API.</span></span> <span data-ttu-id="f66c5-147">If your API requires authentication, ensure that it is captured as a _security definition_ in your Open API document.</span><span class="sxs-lookup"><span data-stu-id="f66c5-147">If your API requires authentication, ensure that it is captured as a _security definition_ in your Open API document.</span></span>

    <span data-ttu-id="f66c5-148">Gather the credentials related to each definition for use in the next section.</span><span class="sxs-lookup"><span data-stu-id="f66c5-148">Gather the credentials related to each definition for use in the next section.</span></span> <span data-ttu-id="f66c5-149">For a list of identity providers which PowerApps supports natively and the credentials each requires, see [Register custom APIs in PowerApps] and [Register custom APIs in Microsoft Flow].</span><span class="sxs-lookup"><span data-stu-id="f66c5-149">For a list of identity providers which PowerApps supports natively and the credentials each requires, see [Register custom APIs in PowerApps] and [Register custom APIs in Microsoft Flow].</span></span>
 
> [!NOTE]
> <span data-ttu-id="f66c5-150">If using Azure Active Directory authentication, a new AAD app registration will be needed which has delegated access to your API and a reply URL of _https://msmanaged-na.consent.azure-apim.net/redirect_.</span><span class="sxs-lookup"><span data-stu-id="f66c5-150">If using Azure Active Directory authentication, a new AAD app registration will be needed which has delegated access to your API and a reply URL of _https://msmanaged-na.consent.azure-apim.net/redirect_.</span></span> <span data-ttu-id="f66c5-151">Please see [this example](
https://powerapps.microsoft.com/tutorials/customapi-azure-resource-manager-tutorial/) for more detail, substituting your API for Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="f66c5-151">Please see [this example](
https://powerapps.microsoft.com/tutorials/customapi-azure-resource-manager-tutorial/) for more detail, substituting your API for Azure Resource Manager.</span></span>
>
> <span data-ttu-id="f66c5-152">If another individual will be importing the API definition into PowerApps, you will provide the client ID and client secret **of the new registration**, as well as the resource URL of your API, in addition to the API definition file.</span><span class="sxs-lookup"><span data-stu-id="f66c5-152">If another individual will be importing the API definition into PowerApps, you will provide the client ID and client secret **of the new registration**, as well as the resource URL of your API, in addition to the API definition file.</span></span> <span data-ttu-id="f66c5-153">Make sure that these secrets are managed securely.</span><span class="sxs-lookup"><span data-stu-id="f66c5-153">Make sure that these secrets are managed securely.</span></span> <span data-ttu-id="f66c5-154">**Do not share the security credentials of the API itself.**</span><span class="sxs-lookup"><span data-stu-id="f66c5-154">**Do not share the security credentials of the API itself.**</span></span>

<a name="import"></a>
## <a name="importing-the-api-definition-into-powerapps-and-microsoft-flow"></a><span data-ttu-id="f66c5-155">Importing the API definition into PowerApps and Microsoft Flow</span><span class="sxs-lookup"><span data-stu-id="f66c5-155">Importing the API definition into PowerApps and Microsoft Flow</span></span>

<span data-ttu-id="f66c5-156">In this section, you will create a custom API in PowerApps and Microsoft Flow using the API definition obtained earlier.</span><span class="sxs-lookup"><span data-stu-id="f66c5-156">In this section, you will create a custom API in PowerApps and Microsoft Flow using the API definition obtained earlier.</span></span> <span data-ttu-id="f66c5-157">Custom APIs are shared between the two services, so you only need to import the definition once.</span><span class="sxs-lookup"><span data-stu-id="f66c5-157">Custom APIs are shared between the two services, so you only need to import the definition once.</span></span> <span data-ttu-id="f66c5-158">For more information on custom APIs, see [Register custom APIs in PowerApps] and [Register custom APIs in Microsoft Flow].</span><span class="sxs-lookup"><span data-stu-id="f66c5-158">For more information on custom APIs, see [Register custom APIs in PowerApps] and [Register custom APIs in Microsoft Flow].</span></span>

<span data-ttu-id="f66c5-159">**To import into PowerApps:**</span><span class="sxs-lookup"><span data-stu-id="f66c5-159">**To import into PowerApps:**</span></span>

1. <span data-ttu-id="f66c5-160">Open the [Powerapps web portal](https://web.powerapps.com), sign in, and select **Connections**.</span><span class="sxs-lookup"><span data-stu-id="f66c5-160">Open the [Powerapps web portal](https://web.powerapps.com), sign in, and select **Connections**.</span></span> <span data-ttu-id="f66c5-161">Click **New connection**.</span><span class="sxs-lookup"><span data-stu-id="f66c5-161">Click **New connection**.</span></span>

2. <span data-ttu-id="f66c5-162">Select **Custom**, and then click **New custom API**.</span><span class="sxs-lookup"><span data-stu-id="f66c5-162">Select **Custom**, and then click **New custom API**.</span></span>

3. <span data-ttu-id="f66c5-163">Provide a name for your API, and then upload the Swagger definition or paste in the metadata URL.</span><span class="sxs-lookup"><span data-stu-id="f66c5-163">Provide a name for your API, and then upload the Swagger definition or paste in the metadata URL.</span></span> <span data-ttu-id="f66c5-164">Click **Next**.</span><span class="sxs-lookup"><span data-stu-id="f66c5-164">Click **Next**.</span></span>

4. <span data-ttu-id="f66c5-165">If you are prompted to provide authentication details, enter the values obtained in the previous section.</span><span class="sxs-lookup"><span data-stu-id="f66c5-165">If you are prompted to provide authentication details, enter the values obtained in the previous section.</span></span> <span data-ttu-id="f66c5-166">If not, proceed to the next step.</span><span class="sxs-lookup"><span data-stu-id="f66c5-166">If not, proceed to the next step.</span></span>

5. <span data-ttu-id="f66c5-167">Click **Create**.</span><span class="sxs-lookup"><span data-stu-id="f66c5-167">Click **Create**.</span></span>

<span data-ttu-id="f66c5-168">**To import into Microsoft Flow:**</span><span class="sxs-lookup"><span data-stu-id="f66c5-168">**To import into Microsoft Flow:**</span></span>

1. <span data-ttu-id="f66c5-169">Open the [Microsoft Flow web portal](https://flow.microsoft.com/) and sign in.</span><span class="sxs-lookup"><span data-stu-id="f66c5-169">Open the [Microsoft Flow web portal](https://flow.microsoft.com/) and sign in.</span></span> 

2. <span data-ttu-id="f66c5-170">Click the **Settings** button at the upper right of the page (it looks like a gear) and select **Custom APIs**.</span><span class="sxs-lookup"><span data-stu-id="f66c5-170">Click the **Settings** button at the upper right of the page (it looks like a gear) and select **Custom APIs**.</span></span> <span data-ttu-id="f66c5-171">Click **Create custom API**.</span><span class="sxs-lookup"><span data-stu-id="f66c5-171">Click **Create custom API**.</span></span>

3. <span data-ttu-id="f66c5-172">Upload the Swagger definition and click **Continue**.</span><span class="sxs-lookup"><span data-stu-id="f66c5-172">Upload the Swagger definition and click **Continue**.</span></span>

4. <span data-ttu-id="f66c5-173">If you are prompted to provide authentication details, enter the values obtained in the previous section.</span><span class="sxs-lookup"><span data-stu-id="f66c5-173">If you are prompted to provide authentication details, enter the values obtained in the previous section.</span></span> <span data-ttu-id="f66c5-174">If not, proceed to the next step.</span><span class="sxs-lookup"><span data-stu-id="f66c5-174">If not, proceed to the next step.</span></span>

5. <span data-ttu-id="f66c5-175">Click the checkbox at the top of the screen.</span><span class="sxs-lookup"><span data-stu-id="f66c5-175">Click the checkbox at the top of the screen.</span></span>



[Register custom APIs in PowerApps]: https://powerapps.microsoft.com/tutorials/register-custom-api/
[Register custom APIs in Microsoft Flow]: https://flow.microsoft.com/documentation/register-custom-api/
