---
title: Differences and considerations for virtual machines in Azure Stack | Microsoft Docs
description: Learn about differences and considerations when working with virtual machines in Azure Stack.
services: azure-stack
documentationcenter: ''
author: mattbriggs
manager: femila
editor: ''
ms.assetid: 6613946D-114C-441A-9F74-38E35DF0A7D7
ms.service: azure-stack
ms.workload: na
pms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 09/05/2018
ms.author: mabrigg
ms.openlocfilehash: dac8c22261b3bc56e47a3035f0e50b7dd852dd56
ms.sourcegitcommit: d1451406a010fd3aa854dc8e5b77dc5537d8050e
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 09/13/2018
ms.locfileid: "44856042"
---
# <a name="considerations-for-using-virtual-machines-in-azure-stack"></a><span data-ttu-id="5aa59-103">Considerations for using virtual machines in Azure Stack</span><span class="sxs-lookup"><span data-stu-id="5aa59-103">Considerations for using virtual machines in Azure Stack</span></span>

<span data-ttu-id="5aa59-104">*Applies to: Azure Stack integrated systems and Azure Stack Development Kit*</span><span class="sxs-lookup"><span data-stu-id="5aa59-104">*Applies to: Azure Stack integrated systems and Azure Stack Development Kit*</span></span>

<span data-ttu-id="5aa59-105">Azure Stack virtual machines provide on-demand, scalable computing resources.</span><span class="sxs-lookup"><span data-stu-id="5aa59-105">Azure Stack virtual machines provide on-demand, scalable computing resources.</span></span> <span data-ttu-id="5aa59-106">Before you deploy virtual machines (VMs), you must understand the differences between the virtual machine features available in Azure Stack and Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="5aa59-106">Before you deploy virtual machines (VMs), you must understand the differences between the virtual machine features available in Azure Stack and Microsoft Azure.</span></span> <span data-ttu-id="5aa59-107">This article describes these differences and identifies key considerations for planning virtual machine deployments.</span><span class="sxs-lookup"><span data-stu-id="5aa59-107">This article describes these differences and identifies key considerations for planning virtual machine deployments.</span></span> <span data-ttu-id="5aa59-108">To learn about high-level differences between Azure Stack and Azure, see the [Key considerations](azure-stack-considerations.md) article.</span><span class="sxs-lookup"><span data-stu-id="5aa59-108">To learn about high-level differences between Azure Stack and Azure, see the [Key considerations](azure-stack-considerations.md) article.</span></span>

## <a name="cheat-sheet-virtual-machine-differences"></a><span data-ttu-id="5aa59-109">Cheat sheet: Virtual machine differences</span><span class="sxs-lookup"><span data-stu-id="5aa59-109">Cheat sheet: Virtual machine differences</span></span>

| <span data-ttu-id="5aa59-110">Feature</span><span class="sxs-lookup"><span data-stu-id="5aa59-110">Feature</span></span> | <span data-ttu-id="5aa59-111">Azure (global)</span><span class="sxs-lookup"><span data-stu-id="5aa59-111">Azure (global)</span></span> | <span data-ttu-id="5aa59-112">Azure Stack</span><span class="sxs-lookup"><span data-stu-id="5aa59-112">Azure Stack</span></span> |
| --- | --- | --- |
| <span data-ttu-id="5aa59-113">Virtual machine images</span><span class="sxs-lookup"><span data-stu-id="5aa59-113">Virtual machine images</span></span> | <span data-ttu-id="5aa59-114">The Azure Marketplace contains images that you can use to create a virtual machine.</span><span class="sxs-lookup"><span data-stu-id="5aa59-114">The Azure Marketplace contains images that you can use to create a virtual machine.</span></span> <span data-ttu-id="5aa59-115">See the [Azure Marketplace](https://azuremarketplace.microsoft.com/en-us/marketplace/apps/category/compute?subcategories=virtual-machine-images&page=1) page to view the list of images that are available in the Azure Marketplace.</span><span class="sxs-lookup"><span data-stu-id="5aa59-115">See the [Azure Marketplace](https://azuremarketplace.microsoft.com/en-us/marketplace/apps/category/compute?subcategories=virtual-machine-images&page=1) page to view the list of images that are available in the Azure Marketplace.</span></span> | <span data-ttu-id="5aa59-116">By default, there aren’t any images available in the Azure Stack marketplace.</span><span class="sxs-lookup"><span data-stu-id="5aa59-116">By default, there aren’t any images available in the Azure Stack marketplace.</span></span> <span data-ttu-id="5aa59-117">The Azure Stack cloud administrator should publish or download images to the Azure Stack marketplace before users can use them.</span><span class="sxs-lookup"><span data-stu-id="5aa59-117">The Azure Stack cloud administrator should publish or download images to the Azure Stack marketplace before users can use them.</span></span> |
| <span data-ttu-id="5aa59-118">Virtual machine sizes</span><span class="sxs-lookup"><span data-stu-id="5aa59-118">Virtual machine sizes</span></span> | <span data-ttu-id="5aa59-119">Azure supports a wide variety of sizes for virtual machines.</span><span class="sxs-lookup"><span data-stu-id="5aa59-119">Azure supports a wide variety of sizes for virtual machines.</span></span> <span data-ttu-id="5aa59-120">To learn about the available sizes and options, refer to the [Windows virtual machines sizes](../../virtual-machines/virtual-machines-windows-sizes.md) and [Linux virtual machine sizes](../../virtual-machines/linux/sizes.md) topics.</span><span class="sxs-lookup"><span data-stu-id="5aa59-120">To learn about the available sizes and options, refer to the [Windows virtual machines sizes](../../virtual-machines/virtual-machines-windows-sizes.md) and [Linux virtual machine sizes](../../virtual-machines/linux/sizes.md) topics.</span></span> | <span data-ttu-id="5aa59-121">Azure Stack supports a subset of Virtual Machine sizes that are available in Azure.</span><span class="sxs-lookup"><span data-stu-id="5aa59-121">Azure Stack supports a subset of Virtual Machine sizes that are available in Azure.</span></span> <span data-ttu-id="5aa59-122">To view the list of supported sizes, refer to the [virtual machine sizes](#virtual-machine-sizes) section of this article.</span><span class="sxs-lookup"><span data-stu-id="5aa59-122">To view the list of supported sizes, refer to the [virtual machine sizes](#virtual-machine-sizes) section of this article.</span></span> |
| <span data-ttu-id="5aa59-123">Virtual machine quotas</span><span class="sxs-lookup"><span data-stu-id="5aa59-123">Virtual machine quotas</span></span> | <span data-ttu-id="5aa59-124">[Quota limits](../../azure-subscription-service-limits.md#service-specific-limits) are set by Microsoft</span><span class="sxs-lookup"><span data-stu-id="5aa59-124">[Quota limits](../../azure-subscription-service-limits.md#service-specific-limits) are set by Microsoft</span></span> | <span data-ttu-id="5aa59-125">The Azure Stack cloud administrator must assign quotas before they offer virtual machines to their users.</span><span class="sxs-lookup"><span data-stu-id="5aa59-125">The Azure Stack cloud administrator must assign quotas before they offer virtual machines to their users.</span></span> |
| <span data-ttu-id="5aa59-126">Virtual machine extensions</span><span class="sxs-lookup"><span data-stu-id="5aa59-126">Virtual machine extensions</span></span> |<span data-ttu-id="5aa59-127">Azure supports a wide variety of virtual machine extensions.</span><span class="sxs-lookup"><span data-stu-id="5aa59-127">Azure supports a wide variety of virtual machine extensions.</span></span> <span data-ttu-id="5aa59-128">To learn about the available extensions, refer to the [virtual machine extensions and features](../../virtual-machines/windows/extensions-features.md) article.</span><span class="sxs-lookup"><span data-stu-id="5aa59-128">To learn about the available extensions, refer to the [virtual machine extensions and features](../../virtual-machines/windows/extensions-features.md) article.</span></span>| <span data-ttu-id="5aa59-129">Azure Stack supports a subset of extensions that are available in Azure and each of the extension have specific versions.</span><span class="sxs-lookup"><span data-stu-id="5aa59-129">Azure Stack supports a subset of extensions that are available in Azure and each of the extension have specific versions.</span></span> <span data-ttu-id="5aa59-130">The Azure Stack cloud administrator can choose which extensions to be made available to for their users.</span><span class="sxs-lookup"><span data-stu-id="5aa59-130">The Azure Stack cloud administrator can choose which extensions to be made available to for their users.</span></span> <span data-ttu-id="5aa59-131">To view the list of supported extensions, refer to the [virtual machine extensions](#virtual-machine-extensions) section of this article.</span><span class="sxs-lookup"><span data-stu-id="5aa59-131">To view the list of supported extensions, refer to the [virtual machine extensions](#virtual-machine-extensions) section of this article.</span></span> |
| <span data-ttu-id="5aa59-132">Virtual machine network</span><span class="sxs-lookup"><span data-stu-id="5aa59-132">Virtual machine network</span></span> | <span data-ttu-id="5aa59-133">Public IP addresses assigned to tenant virtual machine are accessible over the Internet.</span><span class="sxs-lookup"><span data-stu-id="5aa59-133">Public IP addresses assigned to tenant virtual machine are accessible over the Internet.</span></span><br><br><br><span data-ttu-id="5aa59-134">Azure Virtual Machines has a fixed DNS name</span><span class="sxs-lookup"><span data-stu-id="5aa59-134">Azure Virtual Machines has a fixed DNS name</span></span> | <span data-ttu-id="5aa59-135">Public IP addresses assigned to a tenant virtual machine are accessible within the Azure Stack Development Kit environment only.</span><span class="sxs-lookup"><span data-stu-id="5aa59-135">Public IP addresses assigned to a tenant virtual machine are accessible within the Azure Stack Development Kit environment only.</span></span> <span data-ttu-id="5aa59-136">A user must have access to the Azure Stack Development Kit via [RDP](azure-stack-connect-azure-stack.md#connect-to-azure-stack-with-remote-desktop) or [VPN](azure-stack-connect-azure-stack.md#connect-to-azure-stack-with-vpn) to connect to a virtual machine that is created in Azure Stack.</span><span class="sxs-lookup"><span data-stu-id="5aa59-136">A user must have access to the Azure Stack Development Kit via [RDP](azure-stack-connect-azure-stack.md#connect-to-azure-stack-with-remote-desktop) or [VPN](azure-stack-connect-azure-stack.md#connect-to-azure-stack-with-vpn) to connect to a virtual machine that is created in Azure Stack.</span></span><br><br><span data-ttu-id="5aa59-137">Virtual machines created within a specific Azure Stack instance have a DNS name based on the value that is configured by the cloud administrator.</span><span class="sxs-lookup"><span data-stu-id="5aa59-137">Virtual machines created within a specific Azure Stack instance have a DNS name based on the value that is configured by the cloud administrator.</span></span> |
| <span data-ttu-id="5aa59-138">Virtual machine storage</span><span class="sxs-lookup"><span data-stu-id="5aa59-138">Virtual machine storage</span></span> | <span data-ttu-id="5aa59-139">Supports [managed disks.](../../virtual-machines/windows/managed-disks-overview.md)</span><span class="sxs-lookup"><span data-stu-id="5aa59-139">Supports [managed disks.](../../virtual-machines/windows/managed-disks-overview.md)</span></span> | <span data-ttu-id="5aa59-140">Managed disks are supported in Azure Stack with version 1808 and later.</span><span class="sxs-lookup"><span data-stu-id="5aa59-140">Managed disks are supported in Azure Stack with version 1808 and later.</span></span> |
| <span data-ttu-id="5aa59-141">API versions</span><span class="sxs-lookup"><span data-stu-id="5aa59-141">API versions</span></span> | <span data-ttu-id="5aa59-142">Azure always has the latest API versions for all the virtual machine features.</span><span class="sxs-lookup"><span data-stu-id="5aa59-142">Azure always has the latest API versions for all the virtual machine features.</span></span> | <span data-ttu-id="5aa59-143">Azure Stack supports specific Azure services and specific API versions for these services.</span><span class="sxs-lookup"><span data-stu-id="5aa59-143">Azure Stack supports specific Azure services and specific API versions for these services.</span></span> <span data-ttu-id="5aa59-144">To view the list of supported API versions, refer to the [API versions](#api-versions) section of this article.</span><span class="sxs-lookup"><span data-stu-id="5aa59-144">To view the list of supported API versions, refer to the [API versions](#api-versions) section of this article.</span></span> |
|<span data-ttu-id="5aa59-145">Virtual machine availability sets</span><span class="sxs-lookup"><span data-stu-id="5aa59-145">Virtual machine availability sets</span></span>|<span data-ttu-id="5aa59-146">Multiple fault domains (2 or 3 per region)</span><span class="sxs-lookup"><span data-stu-id="5aa59-146">Multiple fault domains (2 or 3 per region)</span></span><br><span data-ttu-id="5aa59-147">Multiple update domains</span><span class="sxs-lookup"><span data-stu-id="5aa59-147">Multiple update domains</span></span><br><span data-ttu-id="5aa59-148">Managed disk support</span><span class="sxs-lookup"><span data-stu-id="5aa59-148">Managed disk support</span></span>|<span data-ttu-id="5aa59-149">Multiple fault domains (2 or 3 per region)</span><span class="sxs-lookup"><span data-stu-id="5aa59-149">Multiple fault domains (2 or 3 per region)</span></span><br><span data-ttu-id="5aa59-150">Multiple update domains (up to 20)</span><span class="sxs-lookup"><span data-stu-id="5aa59-150">Multiple update domains (up to 20)</span></span><br><span data-ttu-id="5aa59-151">No managed disk support</span><span class="sxs-lookup"><span data-stu-id="5aa59-151">No managed disk support</span></span>|
|<span data-ttu-id="5aa59-152">Virtual machine scale sets</span><span class="sxs-lookup"><span data-stu-id="5aa59-152">Virtual machine scale sets</span></span>|<span data-ttu-id="5aa59-153">Auto-scale supported</span><span class="sxs-lookup"><span data-stu-id="5aa59-153">Auto-scale supported</span></span>|<span data-ttu-id="5aa59-154">Auto-scale not supported.</span><span class="sxs-lookup"><span data-stu-id="5aa59-154">Auto-scale not supported.</span></span><br><span data-ttu-id="5aa59-155">Add more instances to a scale set using the portal, Resource Manager templates, or PowerShell.</span><span class="sxs-lookup"><span data-stu-id="5aa59-155">Add more instances to a scale set using the portal, Resource Manager templates, or PowerShell.</span></span>

## <a name="virtual-machine-sizes"></a><span data-ttu-id="5aa59-156">Virtual machine sizes</span><span class="sxs-lookup"><span data-stu-id="5aa59-156">Virtual machine sizes</span></span>

<span data-ttu-id="5aa59-157">Azure Stack imposes resource limits to avoid over consumption of resources (server local and service-level.) These limits improve the tenant experience by reducing the impact of resource consumption by other tenants.</span><span class="sxs-lookup"><span data-stu-id="5aa59-157">Azure Stack imposes resource limits to avoid over consumption of resources (server local and service-level.) These limits improve the tenant experience by reducing the impact of resource consumption by other tenants.</span></span>

- <span data-ttu-id="5aa59-158">For networking egress from the VM, there are bandwidth caps in place.</span><span class="sxs-lookup"><span data-stu-id="5aa59-158">For networking egress from the VM, there are bandwidth caps in place.</span></span> <span data-ttu-id="5aa59-159">Caps in Azure Stack are the same as the caps in Azure.</span><span class="sxs-lookup"><span data-stu-id="5aa59-159">Caps in Azure Stack are the same as the caps in Azure.</span></span>
- <span data-ttu-id="5aa59-160">For storage resources, Azure Stack implements storage IOPS limits to avoid basic overconsumption of resources by tenants for storage access.</span><span class="sxs-lookup"><span data-stu-id="5aa59-160">For storage resources, Azure Stack implements storage IOPS limits to avoid basic overconsumption of resources by tenants for storage access.</span></span>
- <span data-ttu-id="5aa59-161">For VMs with multiple attached data disks, the maximum throughput of each data disk is 500 IOPS for HDDs, and 2300 IOPS for SSDs.</span><span class="sxs-lookup"><span data-stu-id="5aa59-161">For VMs with multiple attached data disks, the maximum throughput of each data disk is 500 IOPS for HDDs, and 2300 IOPS for SSDs.</span></span>

<span data-ttu-id="5aa59-162">The following table lists the VMs that are supported on Azure Stack along with their configuration:</span><span class="sxs-lookup"><span data-stu-id="5aa59-162">The following table lists the VMs that are supported on Azure Stack along with their configuration:</span></span>

| <span data-ttu-id="5aa59-163">Type</span><span class="sxs-lookup"><span data-stu-id="5aa59-163">Type</span></span>           | <span data-ttu-id="5aa59-164">Size</span><span class="sxs-lookup"><span data-stu-id="5aa59-164">Size</span></span>          | <span data-ttu-id="5aa59-165">Range of supported sizes</span><span class="sxs-lookup"><span data-stu-id="5aa59-165">Range of supported sizes</span></span> |
| ---------------| ------------- | ------------------------ |
|<span data-ttu-id="5aa59-166">General purpose</span><span class="sxs-lookup"><span data-stu-id="5aa59-166">General purpose</span></span> |<span data-ttu-id="5aa59-167">Basic A</span><span class="sxs-lookup"><span data-stu-id="5aa59-167">Basic A</span></span>        |[<span data-ttu-id="5aa59-168">A0 - A4</span><span class="sxs-lookup"><span data-stu-id="5aa59-168">A0 - A4</span></span>](azure-stack-vm-sizes.md#basic-a)                   |
|<span data-ttu-id="5aa59-169">General purpose</span><span class="sxs-lookup"><span data-stu-id="5aa59-169">General purpose</span></span> |<span data-ttu-id="5aa59-170">Standard A</span><span class="sxs-lookup"><span data-stu-id="5aa59-170">Standard A</span></span>     |[<span data-ttu-id="5aa59-171">A0 - A7</span><span class="sxs-lookup"><span data-stu-id="5aa59-171">A0 - A7</span></span>](azure-stack-vm-sizes.md#standard-a)              |
|<span data-ttu-id="5aa59-172">General purpose</span><span class="sxs-lookup"><span data-stu-id="5aa59-172">General purpose</span></span> |<span data-ttu-id="5aa59-173">D-series</span><span class="sxs-lookup"><span data-stu-id="5aa59-173">D-series</span></span>       |[<span data-ttu-id="5aa59-174">D1 - D4</span><span class="sxs-lookup"><span data-stu-id="5aa59-174">D1 - D4</span></span>](azure-stack-vm-sizes.md#d-series)              |
|<span data-ttu-id="5aa59-175">General purpose</span><span class="sxs-lookup"><span data-stu-id="5aa59-175">General purpose</span></span> |<span data-ttu-id="5aa59-176">Dv2-series</span><span class="sxs-lookup"><span data-stu-id="5aa59-176">Dv2-series</span></span>     |[<span data-ttu-id="5aa59-177">D1_v2 - D5_v2</span><span class="sxs-lookup"><span data-stu-id="5aa59-177">D1_v2 - D5_v2</span></span>](azure-stack-vm-sizes.md#ds-series)        |
|<span data-ttu-id="5aa59-178">General purpose</span><span class="sxs-lookup"><span data-stu-id="5aa59-178">General purpose</span></span> |<span data-ttu-id="5aa59-179">DS-series</span><span class="sxs-lookup"><span data-stu-id="5aa59-179">DS-series</span></span>      |[<span data-ttu-id="5aa59-180">DS1 - DS4</span><span class="sxs-lookup"><span data-stu-id="5aa59-180">DS1 - DS4</span></span>](azure-stack-vm-sizes.md#dv2-series)            |
|<span data-ttu-id="5aa59-181">General purpose</span><span class="sxs-lookup"><span data-stu-id="5aa59-181">General purpose</span></span> |<span data-ttu-id="5aa59-182">DSv2-series</span><span class="sxs-lookup"><span data-stu-id="5aa59-182">DSv2-series</span></span>    |[<span data-ttu-id="5aa59-183">DS1_v2 - DS5_v2</span><span class="sxs-lookup"><span data-stu-id="5aa59-183">DS1_v2 - DS5_v2</span></span>](azure-stack-vm-sizes.md#dsv2-series)      |
|<span data-ttu-id="5aa59-184">Memory optimized</span><span class="sxs-lookup"><span data-stu-id="5aa59-184">Memory optimized</span></span>|<span data-ttu-id="5aa59-185">D-series</span><span class="sxs-lookup"><span data-stu-id="5aa59-185">D-series</span></span>       |[<span data-ttu-id="5aa59-186">D11 - D14</span><span class="sxs-lookup"><span data-stu-id="5aa59-186">D11 - D14</span></span>](azure-stack-vm-sizes.md#mo-d)            |
|<span data-ttu-id="5aa59-187">Memory optimized</span><span class="sxs-lookup"><span data-stu-id="5aa59-187">Memory optimized</span></span>|<span data-ttu-id="5aa59-188">DS-series</span><span class="sxs-lookup"><span data-stu-id="5aa59-188">DS-series</span></span>      |[<span data-ttu-id="5aa59-189">DS11 - DS14</span><span class="sxs-lookup"><span data-stu-id="5aa59-189">DS11 - DS14</span></span>](azure-stack-vm-sizes.md#mo-ds)|
|<span data-ttu-id="5aa59-190">Memory optimized</span><span class="sxs-lookup"><span data-stu-id="5aa59-190">Memory optimized</span></span>|<span data-ttu-id="5aa59-191">Dv2-series</span><span class="sxs-lookup"><span data-stu-id="5aa59-191">Dv2-series</span></span>     |[<span data-ttu-id="5aa59-192">D11_v2 - DS14_v2</span><span class="sxs-lookup"><span data-stu-id="5aa59-192">D11_v2 - DS14_v2</span></span>](azure-stack-vm-sizes.md#mo-dv2)     |
|<span data-ttu-id="5aa59-193">Memory optimized</span><span class="sxs-lookup"><span data-stu-id="5aa59-193">Memory optimized</span></span>|<span data-ttu-id="5aa59-194">DSv2-series -</span><span class="sxs-lookup"><span data-stu-id="5aa59-194">DSv2-series -</span></span>  |[<span data-ttu-id="5aa59-195">DS11_v2 - DS14_v2</span><span class="sxs-lookup"><span data-stu-id="5aa59-195">DS11_v2 - DS14_v2</span></span>](azure-stack-vm-sizes.md#mo-dsv2)    |

<span data-ttu-id="5aa59-196">Virtual machine sizes and their associated resource quantities are consistent between Azure Stack and Azure.</span><span class="sxs-lookup"><span data-stu-id="5aa59-196">Virtual machine sizes and their associated resource quantities are consistent between Azure Stack and Azure.</span></span> <span data-ttu-id="5aa59-197">This includes the amount of memory, the number of cores, and the number/size of data disks that can be created.</span><span class="sxs-lookup"><span data-stu-id="5aa59-197">This includes the amount of memory, the number of cores, and the number/size of data disks that can be created.</span></span> <span data-ttu-id="5aa59-198">However, performance of VMs with the same size depends on the underlying characteristics of a particular Azure Stack environment.</span><span class="sxs-lookup"><span data-stu-id="5aa59-198">However, performance of VMs with the same size depends on the underlying characteristics of a particular Azure Stack environment.</span></span>

## <a name="virtual-machine-extensions"></a><span data-ttu-id="5aa59-199">Virtual machine extensions</span><span class="sxs-lookup"><span data-stu-id="5aa59-199">Virtual machine extensions</span></span>

 <span data-ttu-id="5aa59-200">Azure Stack includes a small set of extensions.</span><span class="sxs-lookup"><span data-stu-id="5aa59-200">Azure Stack includes a small set of extensions.</span></span> <span data-ttu-id="5aa59-201">Updates and additional extensions are available through Marketplace syndication.</span><span class="sxs-lookup"><span data-stu-id="5aa59-201">Updates and additional extensions are available through Marketplace syndication.</span></span>

<span data-ttu-id="5aa59-202">Use the following PowerShell script to get the list of virtual machine extensions that are available in your Azure Stack environment:</span><span class="sxs-lookup"><span data-stu-id="5aa59-202">Use the following PowerShell script to get the list of virtual machine extensions that are available in your Azure Stack environment:</span></span>

```powershell
Get-AzureRmVmImagePublisher -Location local | `
  Get-AzureRmVMExtensionImageType | `
  Get-AzureRmVMExtensionImage | `
  Select Type, Version | `
  Format-Table -Property * -AutoSize
```

## <a name="api-versions"></a><span data-ttu-id="5aa59-203">API versions</span><span class="sxs-lookup"><span data-stu-id="5aa59-203">API versions</span></span>

<span data-ttu-id="5aa59-204">Virtual machine features in Azure Stack support the following API versions:</span><span class="sxs-lookup"><span data-stu-id="5aa59-204">Virtual machine features in Azure Stack support the following API versions:</span></span>

![VM resource types](media/azure-stack-vm-considerations/vm-resoource-types.png)

<span data-ttu-id="5aa59-206">You can use the following PowerShell script to get the API versions for the virtual machine features that are available in your Azure Stack environment:</span><span class="sxs-lookup"><span data-stu-id="5aa59-206">You can use the following PowerShell script to get the API versions for the virtual machine features that are available in your Azure Stack environment:</span></span>

```powershell
Get-AzureRmResourceProvider | `
  Select ProviderNamespace -Expand ResourceTypes | `
  Select * -Expand ApiVersions | `
  Select ProviderNamespace, ResourceTypeName, @{Name="ApiVersion"; Expression={$_}} | `
  where-Object {$_.ProviderNamespace -like “Microsoft.compute”}
```

<span data-ttu-id="5aa59-207">The list of supported resource types and API versions may vary if the cloud operator updates your Azure Stack environment to a newer version.</span><span class="sxs-lookup"><span data-stu-id="5aa59-207">The list of supported resource types and API versions may vary if the cloud operator updates your Azure Stack environment to a newer version.</span></span>

## <a name="windows-activation"></a><span data-ttu-id="5aa59-208">Windows Activation</span><span class="sxs-lookup"><span data-stu-id="5aa59-208">Windows Activation</span></span>

<span data-ttu-id="5aa59-209">Windows products must be used in accordance with Product Use Rights and Microsoft license terms.</span><span class="sxs-lookup"><span data-stu-id="5aa59-209">Windows products must be used in accordance with Product Use Rights and Microsoft license terms.</span></span> <span data-ttu-id="5aa59-210">Azure Stack uses [Automatic VM Activation](https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2012-R2-and-2012/dn303421(v%3dws.11)) (AVMA) to activate Windows Server virtual machines (VMs).</span><span class="sxs-lookup"><span data-stu-id="5aa59-210">Azure Stack uses [Automatic VM Activation](https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2012-R2-and-2012/dn303421(v%3dws.11)) (AVMA) to activate Windows Server virtual machines (VMs).</span></span>

- <span data-ttu-id="5aa59-211">Azure Stack host activates Windows with AVMA keys for Windows Server 2016.</span><span class="sxs-lookup"><span data-stu-id="5aa59-211">Azure Stack host activates Windows with AVMA keys for Windows Server 2016.</span></span> <span data-ttu-id="5aa59-212">All VMs that run Windows Server 2012 or later are automatically activated.</span><span class="sxs-lookup"><span data-stu-id="5aa59-212">All VMs that run Windows Server 2012 or later are automatically activated.</span></span>
- <span data-ttu-id="5aa59-213">VMs that run Windows Server 2008 R2 are not automatically activated and must be activated by using [MAK activation](https://technet.microsoft.com/library/ff793438.aspx).</span><span class="sxs-lookup"><span data-stu-id="5aa59-213">VMs that run Windows Server 2008 R2 are not automatically activated and must be activated by using [MAK activation](https://technet.microsoft.com/library/ff793438.aspx).</span></span> <span data-ttu-id="5aa59-214">To use MAK activation, you must provide your own product key.</span><span class="sxs-lookup"><span data-stu-id="5aa59-214">To use MAK activation, you must provide your own product key.</span></span>

<span data-ttu-id="5aa59-215">Microsoft Azure uses KMS activation to activate Windows VMs.</span><span class="sxs-lookup"><span data-stu-id="5aa59-215">Microsoft Azure uses KMS activation to activate Windows VMs.</span></span> <span data-ttu-id="5aa59-216">If you move a VM from Azure Stack to Azure and encounter activate problems, see [Troubleshoot Azure Windows virtual machine activation problems](https://docs.microsoft.com/azure/virtual-machines/windows/troubleshoot-activation-problems).</span><span class="sxs-lookup"><span data-stu-id="5aa59-216">If you move a VM from Azure Stack to Azure and encounter activate problems, see [Troubleshoot Azure Windows virtual machine activation problems](https://docs.microsoft.com/azure/virtual-machines/windows/troubleshoot-activation-problems).</span></span> <span data-ttu-id="5aa59-217">Additional information can be found at the [Troubleshooting Windows activation failures on Azure VMs](https://blogs.msdn.microsoft.com/mast/2017/06/14/troubleshooting-windows-activation-failures-on-azure-vms/) Azure Support Team Blog post.</span><span class="sxs-lookup"><span data-stu-id="5aa59-217">Additional information can be found at the [Troubleshooting Windows activation failures on Azure VMs](https://blogs.msdn.microsoft.com/mast/2017/06/14/troubleshooting-windows-activation-failures-on-azure-vms/) Azure Support Team Blog post.</span></span>

## <a name="next-steps"></a><span data-ttu-id="5aa59-218">Next steps</span><span class="sxs-lookup"><span data-stu-id="5aa59-218">Next steps</span></span>

[<span data-ttu-id="5aa59-219">Create a Windows virtual machine with PowerShell in Azure Stack</span><span class="sxs-lookup"><span data-stu-id="5aa59-219">Create a Windows virtual machine with PowerShell in Azure Stack</span></span>](azure-stack-quick-create-vm-windows-powershell.md)
