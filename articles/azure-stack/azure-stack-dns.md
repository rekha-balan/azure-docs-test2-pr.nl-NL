---
title: DNS in Azure Stack | Microsoft Docs
description: DNS in Azure Stack
services: azure-stack
documentationcenter: ''
author: vhorne
manager: byronr
editor: ''
ms.assetid: ''
ms.service: azure-stack
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 3/2/2017
ms.author: victorh
ms.openlocfilehash: 430c59cd09d702710d5c78b6b75c6638087fbf63
ms.sourcegitcommit: 5b9d839c0c0a94b293fdafe1d6e5429506c07e05
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 08/02/2018
ms.locfileid: "44551651"
---
# <a name="dns-in-azure-stack"></a><span data-ttu-id="bd3df-103">DNS in Azure Stack</span><span class="sxs-lookup"><span data-stu-id="bd3df-103">DNS in Azure Stack</span></span>
<span data-ttu-id="bd3df-104">Azure Stack TP3 introduces two new DNS features:</span><span class="sxs-lookup"><span data-stu-id="bd3df-104">Azure Stack TP3 introduces two new DNS features:</span></span>
* <span data-ttu-id="bd3df-105">Support for DNS hostname resolution</span><span class="sxs-lookup"><span data-stu-id="bd3df-105">Support for DNS hostname resolution</span></span>
* <span data-ttu-id="bd3df-106">Create and manage DNS zones and records using API</span><span class="sxs-lookup"><span data-stu-id="bd3df-106">Create and manage DNS zones and records using API</span></span>

## <a name="support-for-dns-hostname-resolution"></a><span data-ttu-id="bd3df-107">Support for DNS hostname resolution</span><span class="sxs-lookup"><span data-stu-id="bd3df-107">Support for DNS hostname resolution</span></span>
<span data-ttu-id="bd3df-108">You can now specify a DNS domain name label for a public IP resource, which creates a mapping for *domainnamelabel.location*.cloudapp.azurestack.external to the public IP address in the Azure Stack managed DNS servers.</span><span class="sxs-lookup"><span data-stu-id="bd3df-108">You can now specify a DNS domain name label for a public IP resource, which creates a mapping for *domainnamelabel.location*.cloudapp.azurestack.external to the public IP address in the Azure Stack managed DNS servers.</span></span>  

<span data-ttu-id="bd3df-109">For example, if you create a public IP resource with **contoso** as a **domainnamelabel** in the Local Azure Stack location, the fully-qualified domain name (FQDN) **contoso.local.cloudapp.azurestack.external** resolves to the public IP address of the resource.</span><span class="sxs-lookup"><span data-stu-id="bd3df-109">For example, if you create a public IP resource with **contoso** as a **domainnamelabel** in the Local Azure Stack location, the fully-qualified domain name (FQDN) **contoso.local.cloudapp.azurestack.external** resolves to the public IP address of the resource.</span></span> <span data-ttu-id="bd3df-110">You can use this FQDN to create a custom domain CNAME record that points to the public IP address in Azure Stack if you want.</span><span class="sxs-lookup"><span data-stu-id="bd3df-110">You can use this FQDN to create a custom domain CNAME record that points to the public IP address in Azure Stack if you want.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="bd3df-111">Each domain name label created must be unique within its Azure Stack location.</span><span class="sxs-lookup"><span data-stu-id="bd3df-111">Each domain name label created must be unique within its Azure Stack location.</span></span>

<span data-ttu-id="bd3df-112">If you create the public IP address using the portal, it will look like the following:</span><span class="sxs-lookup"><span data-stu-id="bd3df-112">If you create the public IP address using the portal, it will look like the following:</span></span>

![Create public IP address](https://docstestmedia1.blob.core.windows.net/azure-media/articles/azure-stack/media/azure-stack-whats-new-dns/image01.png)

<span data-ttu-id="bd3df-114">This is particularly useful if you want to associate a public IP address with a load-balanced resource.</span><span class="sxs-lookup"><span data-stu-id="bd3df-114">This is particularly useful if you want to associate a public IP address with a load-balanced resource.</span></span> <span data-ttu-id="bd3df-115">For example, you might have a load balancer processing requests from a web application to a web site located behind the load balancer on one or more virtual machines.</span><span class="sxs-lookup"><span data-stu-id="bd3df-115">For example, you might have a load balancer processing requests from a web application to a web site located behind the load balancer on one or more virtual machines.</span></span>  <span data-ttu-id="bd3df-116">Now you can access the load-balanced web site by a DNS name, rather than by an IP address.</span><span class="sxs-lookup"><span data-stu-id="bd3df-116">Now you can access the load-balanced web site by a DNS name, rather than by an IP address.</span></span>

## <a name="create-and-manage-dns-zones-and-records-using-api"></a><span data-ttu-id="bd3df-117">Create and manage DNS zones and records using API</span><span class="sxs-lookup"><span data-stu-id="bd3df-117">Create and manage DNS zones and records using API</span></span>
<span data-ttu-id="bd3df-118">TP3 introduces the ability to create and manage DNS zones and records in Azure Stack.</span><span class="sxs-lookup"><span data-stu-id="bd3df-118">TP3 introduces the ability to create and manage DNS zones and records in Azure Stack.</span></span>  

<span data-ttu-id="bd3df-119">Azure Stack provides a DNS service like that of Azure’s, using APIs that are consistent with Azure’s DNS APIs.</span><span class="sxs-lookup"><span data-stu-id="bd3df-119">Azure Stack provides a DNS service like that of Azure’s, using APIs that are consistent with Azure’s DNS APIs.</span></span>  <span data-ttu-id="bd3df-120">By hosting your domains in Azure Stack DNS, you can manage your DNS records with the same credentials, APIs, tools, billing, and support as your other Azure services.</span><span class="sxs-lookup"><span data-stu-id="bd3df-120">By hosting your domains in Azure Stack DNS, you can manage your DNS records with the same credentials, APIs, tools, billing, and support as your other Azure services.</span></span> <span data-ttu-id="bd3df-121">For obvious reasons the Azure Stack DNS infrastructure is more compact than Azure's.</span><span class="sxs-lookup"><span data-stu-id="bd3df-121">For obvious reasons the Azure Stack DNS infrastructure is more compact than Azure's.</span></span> <span data-ttu-id="bd3df-122">Because of this, the scope, scale, and performance depends on the scale of the Azure Stack deployment and the environment where it is deployed.</span><span class="sxs-lookup"><span data-stu-id="bd3df-122">Because of this, the scope, scale, and performance depends on the scale of the Azure Stack deployment and the environment where it is deployed.</span></span>  <span data-ttu-id="bd3df-123">So, things like performance, availability, global distribution, and High-Availability (HA) can vary from deployment to deployment.</span><span class="sxs-lookup"><span data-stu-id="bd3df-123">So, things like performance, availability, global distribution, and High-Availability (HA) can vary from deployment to deployment.</span></span>

## <a name="comparison-with-azure-dns"></a><span data-ttu-id="bd3df-124">Comparison with Azure DNS</span><span class="sxs-lookup"><span data-stu-id="bd3df-124">Comparison with Azure DNS</span></span>
<span data-ttu-id="bd3df-125">DNS in Azure Stack is very similar to DNS in Azure, with two major exceptions:</span><span class="sxs-lookup"><span data-stu-id="bd3df-125">DNS in Azure Stack is very similar to DNS in Azure, with two major exceptions:</span></span>
* <span data-ttu-id="bd3df-126">**It does not support AAAA records**</span><span class="sxs-lookup"><span data-stu-id="bd3df-126">**It does not support AAAA records**</span></span>

    <span data-ttu-id="bd3df-127">Azure Stack does NOT support AAAA records because Azure Stack does not support IPv6 addresses.</span><span class="sxs-lookup"><span data-stu-id="bd3df-127">Azure Stack does NOT support AAAA records because Azure Stack does not support IPv6 addresses.</span></span>  <span data-ttu-id="bd3df-128">This is a key difference between DNS in Azure and Azure Stack.</span><span class="sxs-lookup"><span data-stu-id="bd3df-128">This is a key difference between DNS in Azure and Azure Stack.</span></span>
* <span data-ttu-id="bd3df-129">**It is not multi-tenant**</span><span class="sxs-lookup"><span data-stu-id="bd3df-129">**It is not multi-tenant**</span></span>

    <span data-ttu-id="bd3df-130">Unlike Azure, the DNS Service in Azure Stack is not multi-tenant.</span><span class="sxs-lookup"><span data-stu-id="bd3df-130">Unlike Azure, the DNS Service in Azure Stack is not multi-tenant.</span></span>  <span data-ttu-id="bd3df-131">This means that each tenant cannot create the same DNS zone.</span><span class="sxs-lookup"><span data-stu-id="bd3df-131">This means that each tenant cannot create the same DNS zone.</span></span>  <span data-ttu-id="bd3df-132">Only the first subscription that attempts to create the zone will succeed, and subsequent requests and will fail.</span><span class="sxs-lookup"><span data-stu-id="bd3df-132">Only the first subscription that attempts to create the zone will succeed, and subsequent requests and will fail.</span></span>  <span data-ttu-id="bd3df-133">This is a known issue, and a key difference between Azure and Azure Stack DNS.</span><span class="sxs-lookup"><span data-stu-id="bd3df-133">This is a known issue, and a key difference between Azure and Azure Stack DNS.</span></span>  <span data-ttu-id="bd3df-134">This issue will be resolved in a future release.</span><span class="sxs-lookup"><span data-stu-id="bd3df-134">This issue will be resolved in a future release.</span></span>

<span data-ttu-id="bd3df-135">In addition, there are some minor differences in how Azure Stack DNS implements Tags, Metadata, Etags, and Limits.</span><span class="sxs-lookup"><span data-stu-id="bd3df-135">In addition, there are some minor differences in how Azure Stack DNS implements Tags, Metadata, Etags, and Limits.</span></span>

<span data-ttu-id="bd3df-136">The following information applies specifically to Azure Stack DNS and varies slightly from Azure DNS.</span><span class="sxs-lookup"><span data-stu-id="bd3df-136">The following information applies specifically to Azure Stack DNS and varies slightly from Azure DNS.</span></span> <span data-ttu-id="bd3df-137">To learn more about Azure DNS, see [DNS zones and records](../dns/dns-zones-records.md) at the Microsoft Azure documentation site.</span><span class="sxs-lookup"><span data-stu-id="bd3df-137">To learn more about Azure DNS, see [DNS zones and records](../dns/dns-zones-records.md) at the Microsoft Azure documentation site.</span></span>

### <a name="tags-metadata-and-etags"></a><span data-ttu-id="bd3df-138">Tags, metadata, and Etags</span><span class="sxs-lookup"><span data-stu-id="bd3df-138">Tags, metadata, and Etags</span></span>

<span data-ttu-id="bd3df-139">**Tags**</span><span class="sxs-lookup"><span data-stu-id="bd3df-139">**Tags**</span></span>

<span data-ttu-id="bd3df-140">Azure Stack DNS supports using Azure Resource Manager tags on DNS zone resources.</span><span class="sxs-lookup"><span data-stu-id="bd3df-140">Azure Stack DNS supports using Azure Resource Manager tags on DNS zone resources.</span></span> <span data-ttu-id="bd3df-141">It does not support tags on DNS record sets, although as an alternative 'metadata' is supported on DNS record sets as explained next.</span><span class="sxs-lookup"><span data-stu-id="bd3df-141">It does not support tags on DNS record sets, although as an alternative 'metadata' is supported on DNS record sets as explained next.</span></span>

<span data-ttu-id="bd3df-142">**Metadata**</span><span class="sxs-lookup"><span data-stu-id="bd3df-142">**Metadata**</span></span>

<span data-ttu-id="bd3df-143">As an alternative to record set tags, Azure Stack DNS supports annotating record sets using 'metadata'.</span><span class="sxs-lookup"><span data-stu-id="bd3df-143">As an alternative to record set tags, Azure Stack DNS supports annotating record sets using 'metadata'.</span></span> <span data-ttu-id="bd3df-144">Similar to tags, metadata enables you to associate name-value pairs with each record set.</span><span class="sxs-lookup"><span data-stu-id="bd3df-144">Similar to tags, metadata enables you to associate name-value pairs with each record set.</span></span> <span data-ttu-id="bd3df-145">For example, this can be useful to record the purpose of each record set.</span><span class="sxs-lookup"><span data-stu-id="bd3df-145">For example, this can be useful to record the purpose of each record set.</span></span> <span data-ttu-id="bd3df-146">Unlike tags, metadata cannot be used to provide a filtered view of your Azure bill and cannot be specified in an Azure Resource Manager policy.</span><span class="sxs-lookup"><span data-stu-id="bd3df-146">Unlike tags, metadata cannot be used to provide a filtered view of your Azure bill and cannot be specified in an Azure Resource Manager policy.</span></span>

<span data-ttu-id="bd3df-147">**Etags**</span><span class="sxs-lookup"><span data-stu-id="bd3df-147">**Etags**</span></span>

<span data-ttu-id="bd3df-148">Suppose two people or two processes try to modify a DNS record at the same time.</span><span class="sxs-lookup"><span data-stu-id="bd3df-148">Suppose two people or two processes try to modify a DNS record at the same time.</span></span> <span data-ttu-id="bd3df-149">Which one wins?</span><span class="sxs-lookup"><span data-stu-id="bd3df-149">Which one wins?</span></span> <span data-ttu-id="bd3df-150">And does the winner know that they've overwritten changes created by someone else?</span><span class="sxs-lookup"><span data-stu-id="bd3df-150">And does the winner know that they've overwritten changes created by someone else?</span></span>

<span data-ttu-id="bd3df-151">Azure Stack DNS uses Etags to handle concurrent changes to the same resource safely.</span><span class="sxs-lookup"><span data-stu-id="bd3df-151">Azure Stack DNS uses Etags to handle concurrent changes to the same resource safely.</span></span> <span data-ttu-id="bd3df-152">Etags are separate from Azure Resource Manager 'Tags'.</span><span class="sxs-lookup"><span data-stu-id="bd3df-152">Etags are separate from Azure Resource Manager 'Tags'.</span></span> <span data-ttu-id="bd3df-153">Each DNS resource (zone or record set) has an Etag associated with it.</span><span class="sxs-lookup"><span data-stu-id="bd3df-153">Each DNS resource (zone or record set) has an Etag associated with it.</span></span> <span data-ttu-id="bd3df-154">Whenever a resource is retrieved, its Etag is also retrieved.</span><span class="sxs-lookup"><span data-stu-id="bd3df-154">Whenever a resource is retrieved, its Etag is also retrieved.</span></span> <span data-ttu-id="bd3df-155">When updating a resource,you can choose to pass back the Etag so Azure Stack DNS can verify that the Etag on the server matches.</span><span class="sxs-lookup"><span data-stu-id="bd3df-155">When updating a resource,you can choose to pass back the Etag so Azure Stack DNS can verify that the Etag on the server matches.</span></span> <span data-ttu-id="bd3df-156">Since each update to a resource results in the Etag being regenerated, an Etag mismatch indicates a concurrent change has occurred.</span><span class="sxs-lookup"><span data-stu-id="bd3df-156">Since each update to a resource results in the Etag being regenerated, an Etag mismatch indicates a concurrent change has occurred.</span></span> <span data-ttu-id="bd3df-157">Etags can also be used when creating a new resource to ensure that the resource does not already exist.</span><span class="sxs-lookup"><span data-stu-id="bd3df-157">Etags can also be used when creating a new resource to ensure that the resource does not already exist.</span></span>

<span data-ttu-id="bd3df-158">By default, Azure Stack DNS PowerShell uses Etags to block concurrent changes to zones and record sets.</span><span class="sxs-lookup"><span data-stu-id="bd3df-158">By default, Azure Stack DNS PowerShell uses Etags to block concurrent changes to zones and record sets.</span></span> <span data-ttu-id="bd3df-159">The optional *-Overwrite* switch can be used to suppress Etag checks, in which case any concurrent changes that have occurred are overwritten.</span><span class="sxs-lookup"><span data-stu-id="bd3df-159">The optional *-Overwrite* switch can be used to suppress Etag checks, in which case any concurrent changes that have occurred are overwritten.</span></span>

<span data-ttu-id="bd3df-160">At the level of the Azure Stack DNS REST API, Etags are specified using HTTP headers.</span><span class="sxs-lookup"><span data-stu-id="bd3df-160">At the level of the Azure Stack DNS REST API, Etags are specified using HTTP headers.</span></span> <span data-ttu-id="bd3df-161">Their behavior is given in the following table:</span><span class="sxs-lookup"><span data-stu-id="bd3df-161">Their behavior is given in the following table:</span></span>

| <span data-ttu-id="bd3df-162">Header</span><span class="sxs-lookup"><span data-stu-id="bd3df-162">Header</span></span> | <span data-ttu-id="bd3df-163">Behavior</span><span class="sxs-lookup"><span data-stu-id="bd3df-163">Behavior</span></span>|
|--------|---------|
| <span data-ttu-id="bd3df-164">None</span><span class="sxs-lookup"><span data-stu-id="bd3df-164">None</span></span>   | <span data-ttu-id="bd3df-165">PUT always succeeds (no Etag checks)</span><span class="sxs-lookup"><span data-stu-id="bd3df-165">PUT always succeeds (no Etag checks)</span></span>|
| <span data-ttu-id="bd3df-166">If-match</span><span class="sxs-lookup"><span data-stu-id="bd3df-166">If-match</span></span>| <span data-ttu-id="bd3df-167">PUT only succeeds if resource exists and Etag matches</span><span class="sxs-lookup"><span data-stu-id="bd3df-167">PUT only succeeds if resource exists and Etag matches</span></span>|
| <span data-ttu-id="bd3df-168">If-match \*</span><span class="sxs-lookup"><span data-stu-id="bd3df-168">If-match \*</span></span>| <span data-ttu-id="bd3df-169">PUT only succeeds if resource exists</span><span class="sxs-lookup"><span data-stu-id="bd3df-169">PUT only succeeds if resource exists</span></span>|
| <span data-ttu-id="bd3df-170">If-none-match \*</span><span class="sxs-lookup"><span data-stu-id="bd3df-170">If-none-match \*</span></span>| <span data-ttu-id="bd3df-171">PUT only succeeds if resource does not exist</span><span class="sxs-lookup"><span data-stu-id="bd3df-171">PUT only succeeds if resource does not exist</span></span>|

### <a name="limits"></a><span data-ttu-id="bd3df-172">Limits</span><span class="sxs-lookup"><span data-stu-id="bd3df-172">Limits</span></span>

<span data-ttu-id="bd3df-173">The following default limits apply when using Azure Stack DNS:</span><span class="sxs-lookup"><span data-stu-id="bd3df-173">The following default limits apply when using Azure Stack DNS:</span></span>

| <span data-ttu-id="bd3df-174">Resource</span><span class="sxs-lookup"><span data-stu-id="bd3df-174">Resource</span></span>| <span data-ttu-id="bd3df-175">Default limit</span><span class="sxs-lookup"><span data-stu-id="bd3df-175">Default limit</span></span>|
|---------|--------------|
| <span data-ttu-id="bd3df-176">Zones per subscription</span><span class="sxs-lookup"><span data-stu-id="bd3df-176">Zones per subscription</span></span>| <span data-ttu-id="bd3df-177">100</span><span class="sxs-lookup"><span data-stu-id="bd3df-177">100</span></span>|
| <span data-ttu-id="bd3df-178">Record sets per zone</span><span class="sxs-lookup"><span data-stu-id="bd3df-178">Record sets per zone</span></span>| <span data-ttu-id="bd3df-179">5000</span><span class="sxs-lookup"><span data-stu-id="bd3df-179">5000</span></span>|
| <span data-ttu-id="bd3df-180">Records per record set</span><span class="sxs-lookup"><span data-stu-id="bd3df-180">Records per record set</span></span>| <span data-ttu-id="bd3df-181">20</span><span class="sxs-lookup"><span data-stu-id="bd3df-181">20</span></span>|

## <a name="next-steps"></a><span data-ttu-id="bd3df-182">Next steps</span><span class="sxs-lookup"><span data-stu-id="bd3df-182">Next steps</span></span>
[<span data-ttu-id="bd3df-183">Introducing iDNS for Azure Stack</span><span class="sxs-lookup"><span data-stu-id="bd3df-183">Introducing iDNS for Azure Stack</span></span>](azure-stack-understanding-dns.md)

