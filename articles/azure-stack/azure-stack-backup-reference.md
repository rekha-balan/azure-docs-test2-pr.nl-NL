---
title: Azure Stack Infrastructure Backup Service reference | Microsoft Docs
description: This article contains reference material for the Azure Stack Infrastructure Backup Service.
services: azure-stack
documentationcenter: ''
author: jeffgilb
manager: femila
editor: ''
ms.assetid: D6EC0224-97EA-446C-BC95-A3D32F668E2C
ms.service: azure-stack
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/17/2018
ms.author: jeffgilb
ms.reviewer: hectorl
ms.openlocfilehash: 5347fd5ce0f2d2951c34df89bcffafffed6db5c5
ms.sourcegitcommit: d1451406a010fd3aa854dc8e5b77dc5537d8050e
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 09/13/2018
ms.locfileid: "44856780"
---
# <a name="infrastructure-backup-service-reference"></a><span data-ttu-id="de22d-103">Infrastructure Backup Service reference</span><span class="sxs-lookup"><span data-stu-id="de22d-103">Infrastructure Backup Service reference</span></span>

## <a name="azure-backup-infrastructure"></a><span data-ttu-id="de22d-104">Azure backup infrastructure</span><span class="sxs-lookup"><span data-stu-id="de22d-104">Azure backup infrastructure</span></span>

<span data-ttu-id="de22d-105">*Applies to: Azure Stack integrated systems and Azure Stack Development Kit*</span><span class="sxs-lookup"><span data-stu-id="de22d-105">*Applies to: Azure Stack integrated systems and Azure Stack Development Kit*</span></span>

<span data-ttu-id="de22d-106">Azure Stack consists of many services that comprise the portal, Azure Resource Manager, and infrastructure management experience.</span><span class="sxs-lookup"><span data-stu-id="de22d-106">Azure Stack consists of many services that comprise the portal, Azure Resource Manager, and infrastructure management experience.</span></span> <span data-ttu-id="de22d-107">The appliance-like management experience of Azure Stack focuses on reducing the complexity exposed to the operator of the solution.</span><span class="sxs-lookup"><span data-stu-id="de22d-107">The appliance-like management experience of Azure Stack focuses on reducing the complexity exposed to the operator of the solution.</span></span>

<span data-ttu-id="de22d-108">Infrastructure Backup is designed to internalize the complexity of backing up and restoring data for infrastructure services, ensuring operators can focus on managing the solution and maintaining an SLA to users.</span><span class="sxs-lookup"><span data-stu-id="de22d-108">Infrastructure Backup is designed to internalize the complexity of backing up and restoring data for infrastructure services, ensuring operators can focus on managing the solution and maintaining an SLA to users.</span></span>

<span data-ttu-id="de22d-109">Exporting the backup data to an external share is required to avoid storing backups on the same system.</span><span class="sxs-lookup"><span data-stu-id="de22d-109">Exporting the backup data to an external share is required to avoid storing backups on the same system.</span></span> <span data-ttu-id="de22d-110">Requiring an external share gives the administrator the flexibility to determine where to store the data based on existing company BC/DR policies.</span><span class="sxs-lookup"><span data-stu-id="de22d-110">Requiring an external share gives the administrator the flexibility to determine where to store the data based on existing company BC/DR policies.</span></span> 

### <a name="infrastructure-backup-components"></a><span data-ttu-id="de22d-111">Infrastructure Backup components</span><span class="sxs-lookup"><span data-stu-id="de22d-111">Infrastructure Backup components</span></span>

<span data-ttu-id="de22d-112">Infrastructure Backup includes the following components:</span><span class="sxs-lookup"><span data-stu-id="de22d-112">Infrastructure Backup includes the following components:</span></span>

 - <span data-ttu-id="de22d-113">**Infrastructure Backup Controller**</span><span class="sxs-lookup"><span data-stu-id="de22d-113">**Infrastructure Backup Controller**</span></span>  
 <span data-ttu-id="de22d-114">The Infrastructure Backup Controller is instantiated with and resides in every Azure Stack Cloud.</span><span class="sxs-lookup"><span data-stu-id="de22d-114">The Infrastructure Backup Controller is instantiated with and resides in every Azure Stack Cloud.</span></span>
 - <span data-ttu-id="de22d-115">**Backup Resource Provider**</span><span class="sxs-lookup"><span data-stu-id="de22d-115">**Backup Resource Provider**</span></span>  
 <span data-ttu-id="de22d-116">The Backup Resource Provider (Backup RP) is composed of the user interface and application program interfaces (API)s exposing basic backup functionality for Azure Stack infrastructure.</span><span class="sxs-lookup"><span data-stu-id="de22d-116">The Backup Resource Provider (Backup RP) is composed of the user interface and application program interfaces (API)s exposing basic backup functionality for Azure Stack infrastructure.</span></span>

#### <a name="infrastructure-backup-controller"></a><span data-ttu-id="de22d-117">Infrastructure Backup Controller</span><span class="sxs-lookup"><span data-stu-id="de22d-117">Infrastructure Backup Controller</span></span>

<span data-ttu-id="de22d-118">The Infrastructure Backup Controller is a Service Fabric service gets instantiated for an Azure Stack Cloud.</span><span class="sxs-lookup"><span data-stu-id="de22d-118">The Infrastructure Backup Controller is a Service Fabric service gets instantiated for an Azure Stack Cloud.</span></span> <span data-ttu-id="de22d-119">Backup resources are created at a regional level and capture region-specific service data from AD, CA, Azure Resource Manager, CRP, SRP, NRP, KeyVault, RBAC.</span><span class="sxs-lookup"><span data-stu-id="de22d-119">Backup resources are created at a regional level and capture region-specific service data from AD, CA, Azure Resource Manager, CRP, SRP, NRP, KeyVault, RBAC.</span></span> 

### <a name="backup-resource-provider"></a><span data-ttu-id="de22d-120">Backup Resource Provider</span><span class="sxs-lookup"><span data-stu-id="de22d-120">Backup Resource Provider</span></span>

<span data-ttu-id="de22d-121">The Backup Resource Provider presents user interface in the Azure Stack portal for basic configuration and listing of backup resources.</span><span class="sxs-lookup"><span data-stu-id="de22d-121">The Backup Resource Provider presents user interface in the Azure Stack portal for basic configuration and listing of backup resources.</span></span> <span data-ttu-id="de22d-122">Operator can perform the following operations in the user interface:</span><span class="sxs-lookup"><span data-stu-id="de22d-122">Operator can perform the following operations in the user interface:</span></span>

 - <span data-ttu-id="de22d-123">Enable backup for the first time by providing external storage location, credentials, and encryption key</span><span class="sxs-lookup"><span data-stu-id="de22d-123">Enable backup for the first time by providing external storage location, credentials, and encryption key</span></span>
 - <span data-ttu-id="de22d-124">View completed created backup resources and status resources under creation</span><span class="sxs-lookup"><span data-stu-id="de22d-124">View completed created backup resources and status resources under creation</span></span>
 - <span data-ttu-id="de22d-125">Modify the storage location where Backup Controller places backup data</span><span class="sxs-lookup"><span data-stu-id="de22d-125">Modify the storage location where Backup Controller places backup data</span></span>
 - <span data-ttu-id="de22d-126">Modify the credentials that Backup Controller uses to access external storage location</span><span class="sxs-lookup"><span data-stu-id="de22d-126">Modify the credentials that Backup Controller uses to access external storage location</span></span>
 - <span data-ttu-id="de22d-127">Modify the encryption key that Backup Controller uses to encrypt backups</span><span class="sxs-lookup"><span data-stu-id="de22d-127">Modify the encryption key that Backup Controller uses to encrypt backups</span></span> 


## <a name="backup-controller-requirements"></a><span data-ttu-id="de22d-128">Backup Controller requirements</span><span class="sxs-lookup"><span data-stu-id="de22d-128">Backup Controller requirements</span></span>

<span data-ttu-id="de22d-129">This section describes the important requirements for Infrastructure Backup.</span><span class="sxs-lookup"><span data-stu-id="de22d-129">This section describes the important requirements for Infrastructure Backup.</span></span> <span data-ttu-id="de22d-130">We recommend that you review the information carefully before you enable backup for your Azure Stack instance, and then refer back to it as necessary during deployment and subsequent operation.</span><span class="sxs-lookup"><span data-stu-id="de22d-130">We recommend that you review the information carefully before you enable backup for your Azure Stack instance, and then refer back to it as necessary during deployment and subsequent operation.</span></span>

<span data-ttu-id="de22d-131">The requirements include:</span><span class="sxs-lookup"><span data-stu-id="de22d-131">The requirements include:</span></span>

  - <span data-ttu-id="de22d-132">**Software requirements** – describes supported storage locations and sizing guidance.</span><span class="sxs-lookup"><span data-stu-id="de22d-132">**Software requirements** – describes supported storage locations and sizing guidance.</span></span> 
  - <span data-ttu-id="de22d-133">**Network requirements** – describes network requirements for different storage locations.</span><span class="sxs-lookup"><span data-stu-id="de22d-133">**Network requirements** – describes network requirements for different storage locations.</span></span>  

### <a name="software-requirements"></a><span data-ttu-id="de22d-134">Software requirements</span><span class="sxs-lookup"><span data-stu-id="de22d-134">Software requirements</span></span>

#### <a name="supported-storage-locations"></a><span data-ttu-id="de22d-135">Supported storage locations</span><span class="sxs-lookup"><span data-stu-id="de22d-135">Supported storage locations</span></span>

| <span data-ttu-id="de22d-136">Storage location</span><span class="sxs-lookup"><span data-stu-id="de22d-136">Storage location</span></span>                                                                 | <span data-ttu-id="de22d-137">Details</span><span class="sxs-lookup"><span data-stu-id="de22d-137">Details</span></span>                                                                                                                                                  |
|----------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="de22d-138">SMB file share hosted on a storage device within the trusted network environment</span><span class="sxs-lookup"><span data-stu-id="de22d-138">SMB file share hosted on a storage device within the trusted network environment</span></span> | <span data-ttu-id="de22d-139">SMB share in the same datacenter where Azure Stack is deployed or in a different datacenter.</span><span class="sxs-lookup"><span data-stu-id="de22d-139">SMB share in the same datacenter where Azure Stack is deployed or in a different datacenter.</span></span> <span data-ttu-id="de22d-140">Multiple Azure Stack instances can use the same file share.</span><span class="sxs-lookup"><span data-stu-id="de22d-140">Multiple Azure Stack instances can use the same file share.</span></span> |
| <span data-ttu-id="de22d-141">SMB file share on Azure</span><span class="sxs-lookup"><span data-stu-id="de22d-141">SMB file share on Azure</span></span>                                                          | <span data-ttu-id="de22d-142">Not currently supported.</span><span class="sxs-lookup"><span data-stu-id="de22d-142">Not currently supported.</span></span>                                                                                                                                 |
| <span data-ttu-id="de22d-143">Blob storage on Azure</span><span class="sxs-lookup"><span data-stu-id="de22d-143">Blob storage on Azure</span></span>                                                            | <span data-ttu-id="de22d-144">Not currently supported.</span><span class="sxs-lookup"><span data-stu-id="de22d-144">Not currently supported.</span></span>                                                                                                                                 |

#### <a name="supported-smb-versions"></a><span data-ttu-id="de22d-145">Supported SMB versions</span><span class="sxs-lookup"><span data-stu-id="de22d-145">Supported SMB versions</span></span>

| <span data-ttu-id="de22d-146">SMB</span><span class="sxs-lookup"><span data-stu-id="de22d-146">SMB</span></span> | <span data-ttu-id="de22d-147">Version</span><span class="sxs-lookup"><span data-stu-id="de22d-147">Version</span></span> |
|-----|---------|
| <span data-ttu-id="de22d-148">SMB</span><span class="sxs-lookup"><span data-stu-id="de22d-148">SMB</span></span> | <span data-ttu-id="de22d-149">3.x</span><span class="sxs-lookup"><span data-stu-id="de22d-149">3.x</span></span>     |

#### <a name="storage-location-sizing"></a><span data-ttu-id="de22d-150">Storage location sizing</span><span class="sxs-lookup"><span data-stu-id="de22d-150">Storage location sizing</span></span> 

<span data-ttu-id="de22d-151">Infrastructure Backup Controller will back up data on demand.</span><span class="sxs-lookup"><span data-stu-id="de22d-151">Infrastructure Backup Controller will back up data on demand.</span></span> <span data-ttu-id="de22d-152">The recommendation is to back up at last two times a day and keep at most seven days of backups.</span><span class="sxs-lookup"><span data-stu-id="de22d-152">The recommendation is to back up at last two times a day and keep at most seven days of backups.</span></span> 

| <span data-ttu-id="de22d-153">Environment Scale</span><span class="sxs-lookup"><span data-stu-id="de22d-153">Environment Scale</span></span> | <span data-ttu-id="de22d-154">Projected size of backup</span><span class="sxs-lookup"><span data-stu-id="de22d-154">Projected size of backup</span></span> | <span data-ttu-id="de22d-155">Total amount of space required</span><span class="sxs-lookup"><span data-stu-id="de22d-155">Total amount of space required</span></span> |
|-------------------|--------------------------|--------------------------------|
| <span data-ttu-id="de22d-156">4-12 nodes</span><span class="sxs-lookup"><span data-stu-id="de22d-156">4-12 nodes</span></span>        | <span data-ttu-id="de22d-157">10 GB</span><span class="sxs-lookup"><span data-stu-id="de22d-157">10 GB</span></span>                     | <span data-ttu-id="de22d-158">140 GB</span><span class="sxs-lookup"><span data-stu-id="de22d-158">140 GB</span></span>                          |

### <a name="network-requirements"></a><span data-ttu-id="de22d-159">Network requirements</span><span class="sxs-lookup"><span data-stu-id="de22d-159">Network requirements</span></span>
| <span data-ttu-id="de22d-160">Storage location</span><span class="sxs-lookup"><span data-stu-id="de22d-160">Storage location</span></span>                                                                 | <span data-ttu-id="de22d-161">Details</span><span class="sxs-lookup"><span data-stu-id="de22d-161">Details</span></span>                                                                                                                                                                                 |
|----------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="de22d-162">SMB file share hosted on a storage device within the trusted network environment</span><span class="sxs-lookup"><span data-stu-id="de22d-162">SMB file share hosted on a storage device within the trusted network environment</span></span> | <span data-ttu-id="de22d-163">Port 445 is required if the Azure Stack instance resides in a firewalled environment.</span><span class="sxs-lookup"><span data-stu-id="de22d-163">Port 445 is required if the Azure Stack instance resides in a firewalled environment.</span></span> <span data-ttu-id="de22d-164">Infrastructure Backup Controller will initiate a connection to the SMB file server over port 445.</span><span class="sxs-lookup"><span data-stu-id="de22d-164">Infrastructure Backup Controller will initiate a connection to the SMB file server over port 445.</span></span> |
| <span data-ttu-id="de22d-165">To use FQDN of file server, the name must be resolvable from the PEP</span><span class="sxs-lookup"><span data-stu-id="de22d-165">To use FQDN of file server, the name must be resolvable from the PEP</span></span>             |                                                                                                                                                                                         |

> [!Note]  
> <span data-ttu-id="de22d-166">No inbound ports need to be opened.</span><span class="sxs-lookup"><span data-stu-id="de22d-166">No inbound ports need to be opened.</span></span>


## <a name="infrastructure-backup-limits"></a><span data-ttu-id="de22d-167">Infrastructure Backup Limits</span><span class="sxs-lookup"><span data-stu-id="de22d-167">Infrastructure Backup Limits</span></span>

<span data-ttu-id="de22d-168">Consider these limits as you plan, deploy, and operate your Microsoft Azure Stack instances.</span><span class="sxs-lookup"><span data-stu-id="de22d-168">Consider these limits as you plan, deploy, and operate your Microsoft Azure Stack instances.</span></span> <span data-ttu-id="de22d-169">The following table describes these limits.</span><span class="sxs-lookup"><span data-stu-id="de22d-169">The following table describes these limits.</span></span>

### <a name="infrastructure-backup-limits"></a><span data-ttu-id="de22d-170">Infrastructure Backup limits</span><span class="sxs-lookup"><span data-stu-id="de22d-170">Infrastructure Backup limits</span></span>
| <span data-ttu-id="de22d-171">Limit identifier</span><span class="sxs-lookup"><span data-stu-id="de22d-171">Limit identifier</span></span>                                                 | <span data-ttu-id="de22d-172">Limit</span><span class="sxs-lookup"><span data-stu-id="de22d-172">Limit</span></span>        | <span data-ttu-id="de22d-173">Comments</span><span class="sxs-lookup"><span data-stu-id="de22d-173">Comments</span></span>                                                                                                                                    |
|------------------------------------------------------------------|--------------|---------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="de22d-174">Backup type</span><span class="sxs-lookup"><span data-stu-id="de22d-174">Backup type</span></span>                                                      | <span data-ttu-id="de22d-175">Full only</span><span class="sxs-lookup"><span data-stu-id="de22d-175">Full only</span></span>    | <span data-ttu-id="de22d-176">Infrastructure Backup Controller only supports full backups.</span><span class="sxs-lookup"><span data-stu-id="de22d-176">Infrastructure Backup Controller only supports full backups.</span></span> <span data-ttu-id="de22d-177">Incremental backups are not supported.</span><span class="sxs-lookup"><span data-stu-id="de22d-177">Incremental backups are not supported.</span></span>                                          |
| <span data-ttu-id="de22d-178">Scheduled backups</span><span class="sxs-lookup"><span data-stu-id="de22d-178">Scheduled backups</span></span>                                                | <span data-ttu-id="de22d-179">Manual only</span><span class="sxs-lookup"><span data-stu-id="de22d-179">Manual only</span></span>  | <span data-ttu-id="de22d-180">Backup controller currently only supports on-demand backups</span><span class="sxs-lookup"><span data-stu-id="de22d-180">Backup controller currently only supports on-demand backups</span></span>                                                                                 |
| <span data-ttu-id="de22d-181">Maximum concurrent backup jobs</span><span class="sxs-lookup"><span data-stu-id="de22d-181">Maximum concurrent backup jobs</span></span>                                   | <span data-ttu-id="de22d-182">1</span><span class="sxs-lookup"><span data-stu-id="de22d-182">1</span></span>            | <span data-ttu-id="de22d-183">Only one active backup job is supported per instance of Backup Controller.</span><span class="sxs-lookup"><span data-stu-id="de22d-183">Only one active backup job is supported per instance of Backup Controller.</span></span>                                                                  |
| <span data-ttu-id="de22d-184">Network switch configuration</span><span class="sxs-lookup"><span data-stu-id="de22d-184">Network switch configuration</span></span>                                     | <span data-ttu-id="de22d-185">Not in scope</span><span class="sxs-lookup"><span data-stu-id="de22d-185">Not in scope</span></span> | <span data-ttu-id="de22d-186">Administrator must back up network switch configuration using OEM tools.</span><span class="sxs-lookup"><span data-stu-id="de22d-186">Administrator must back up network switch configuration using OEM tools.</span></span> <span data-ttu-id="de22d-187">Refer to documentation for Azure Stack provided by each OEM vendor.</span><span class="sxs-lookup"><span data-stu-id="de22d-187">Refer to documentation for Azure Stack provided by each OEM vendor.</span></span> |
| <span data-ttu-id="de22d-188">Hardware Lifecycle Host</span><span class="sxs-lookup"><span data-stu-id="de22d-188">Hardware Lifecycle Host</span></span>                                          | <span data-ttu-id="de22d-189">Not in scope</span><span class="sxs-lookup"><span data-stu-id="de22d-189">Not in scope</span></span> | <span data-ttu-id="de22d-190">Administrator must back up Hardware Lifecycle Host using OEM tools.</span><span class="sxs-lookup"><span data-stu-id="de22d-190">Administrator must back up Hardware Lifecycle Host using OEM tools.</span></span> <span data-ttu-id="de22d-191">Refer to documentation for Azure Stack provided by each OEM vendor.</span><span class="sxs-lookup"><span data-stu-id="de22d-191">Refer to documentation for Azure Stack provided by each OEM vendor.</span></span>      |
| <span data-ttu-id="de22d-192">Maximum number of file shares</span><span class="sxs-lookup"><span data-stu-id="de22d-192">Maximum number of file shares</span></span>                                    | <span data-ttu-id="de22d-193">1</span><span class="sxs-lookup"><span data-stu-id="de22d-193">1</span></span>            | <span data-ttu-id="de22d-194">Only one file share can be used to store backup data</span><span class="sxs-lookup"><span data-stu-id="de22d-194">Only one file share can be used to store backup data</span></span>                                                                                        |
| <span data-ttu-id="de22d-195">Backup App Services, Function, SQL, mysql resource provider data</span><span class="sxs-lookup"><span data-stu-id="de22d-195">Backup App Services, Function, SQL, mysql resource provider data</span></span> | <span data-ttu-id="de22d-196">Not in scope</span><span class="sxs-lookup"><span data-stu-id="de22d-196">Not in scope</span></span> | <span data-ttu-id="de22d-197">Refer to guidance published for deploying and managing value-add RPs created by Microsoft.</span><span class="sxs-lookup"><span data-stu-id="de22d-197">Refer to guidance published for deploying and managing value-add RPs created by Microsoft.</span></span>                                                  |
| <span data-ttu-id="de22d-198">Backup third-party resource providers</span><span class="sxs-lookup"><span data-stu-id="de22d-198">Backup third-party resource providers</span></span>                              | <span data-ttu-id="de22d-199">Not in scope</span><span class="sxs-lookup"><span data-stu-id="de22d-199">Not in scope</span></span> | <span data-ttu-id="de22d-200">Refer to guidance published for deploying and managing value-add RPs created by third-party vendors.</span><span class="sxs-lookup"><span data-stu-id="de22d-200">Refer to guidance published for deploying and managing value-add RPs created by third-party vendors.</span></span>                                          |

## <a name="next-steps"></a><span data-ttu-id="de22d-201">Next steps</span><span class="sxs-lookup"><span data-stu-id="de22d-201">Next steps</span></span>

 - <span data-ttu-id="de22d-202">To learn more about the Infrastructure Backup Service, see [Backup and data recovery for Azure Stack with the Infrastructure Backup Service](azure-stack-backup-infrastructure-backup.md).</span><span class="sxs-lookup"><span data-stu-id="de22d-202">To learn more about the Infrastructure Backup Service, see [Backup and data recovery for Azure Stack with the Infrastructure Backup Service](azure-stack-backup-infrastructure-backup.md).</span></span>