---
title: Adding a VM image to Azure Stack | Microsoft Docs
description: Add your organization's custom Windows or Linux VM image for tenants to use
services: azure-stack
documentationcenter: ''
author: SnehaGunda
manager: byronr
editor: ''
ms.assetid: e5a4236b-1b32-4ee6-9aaa-fcde297a020f
ms.service: azure-stack
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: get-started-article
ms.date: 04/20/2017
ms.author: sngun
ms.openlocfilehash: c6ad9c0f5c745d7c0ab0c51a561cc61b1af88db3
ms.sourcegitcommit: 5b9d839c0c0a94b293fdafe1d6e5429506c07e05
ms.translationtype: HT
ms.contentlocale: nl-NL
ms.lasthandoff: 08/02/2018
ms.locfileid: "44670833"
---
# <a name="make-a-custom-virtual-machine-image-available-in-azure-stack"></a><span data-ttu-id="f3038-103">Make a custom virtual machine image available in Azure Stack</span><span class="sxs-lookup"><span data-stu-id="f3038-103">Make a custom virtual machine image available in Azure Stack</span></span>
<span data-ttu-id="f3038-104">Azure Stack enables administrators to make VM images, such as their organization’s custom VHD, available to their tenants.</span><span class="sxs-lookup"><span data-stu-id="f3038-104">Azure Stack enables administrators to make VM images, such as their organization’s custom VHD, available to their tenants.</span></span> <span data-ttu-id="f3038-105">Images can be referenced by Azure Resource Manager templates or added to the Azure Marketplace UI with the creation of a Marketplace item.</span><span class="sxs-lookup"><span data-stu-id="f3038-105">Images can be referenced by Azure Resource Manager templates or added to the Azure Marketplace UI with the creation of a Marketplace item.</span></span> <span data-ttu-id="f3038-106">A Windows Server 2012 R2 image is included by default in the Azure Stack Technical Preview.</span><span class="sxs-lookup"><span data-stu-id="f3038-106">A Windows Server 2012 R2 image is included by default in the Azure Stack Technical Preview.</span></span>

> [!NOTE]
> <span data-ttu-id="f3038-107">VM images with Marketplace items can be deployed by selecting **New** in the UI, and then selecting the **Virtual Machines** category.</span><span class="sxs-lookup"><span data-stu-id="f3038-107">VM images with Marketplace items can be deployed by selecting **New** in the UI, and then selecting the **Virtual Machines** category.</span></span> <span data-ttu-id="f3038-108">The VM image items are listed.</span><span class="sxs-lookup"><span data-stu-id="f3038-108">The VM image items are listed.</span></span>
> 
> 

## <a name="add-a-vm-image-to-marketplace-with-powershell"></a><span data-ttu-id="f3038-109">Add a VM image to Marketplace with PowerShell</span><span class="sxs-lookup"><span data-stu-id="f3038-109">Add a VM image to Marketplace with PowerShell</span></span>
<span data-ttu-id="f3038-110">If the VM image VHD is available locally on the console VM (or another externally connected device), use the following steps:</span><span class="sxs-lookup"><span data-stu-id="f3038-110">If the VM image VHD is available locally on the console VM (or another externally connected device), use the following steps:</span></span>

1. <span data-ttu-id="f3038-111">Prepare a Windows or Linux operating system virtual hard disk image in VHD format (not VHDX).</span><span class="sxs-lookup"><span data-stu-id="f3038-111">Prepare a Windows or Linux operating system virtual hard disk image in VHD format (not VHDX).</span></span>
   
   * <span data-ttu-id="f3038-112">For Windows images, the article [Upload a Windows VM image to Azure for Resource Manager deployments](../virtual-machines/windows/upload-image.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json) contains image preparation instructions in the **Prepare the VHD for upload** section.</span><span class="sxs-lookup"><span data-stu-id="f3038-112">For Windows images, the article [Upload a Windows VM image to Azure for Resource Manager deployments](../virtual-machines/windows/upload-image.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json) contains image preparation instructions in the **Prepare the VHD for upload** section.</span></span>
   * <span data-ttu-id="f3038-113">For Linux images, follow the steps to prepare the image or use an existing Azure Stack Linux image as described in the article [Deploy Linux virtual machines on Azure Stack](azure-stack-linux.md).</span><span class="sxs-lookup"><span data-stu-id="f3038-113">For Linux images, follow the steps to prepare the image or use an existing Azure Stack Linux image as described in the article [Deploy Linux virtual machines on Azure Stack](azure-stack-linux.md).</span></span>
2. <span data-ttu-id="f3038-114">[Download Azure Stack tools from GitHub](azure-stack-powershell-download.md) and then import the Connect and ComputeAdmin modules:</span><span class="sxs-lookup"><span data-stu-id="f3038-114">[Download Azure Stack tools from GitHub](azure-stack-powershell-download.md) and then import the Connect and ComputeAdmin modules:</span></span>
   
   ```powershell
   Import-Module .\Connect\AzureStack.Connect.psm1
   Import-Module .\ComputeAdmin\AzureStack.ComputeAdmin.psm1
   ``` 

3. <span data-ttu-id="f3038-115">Create the Azure Stack administrator's AzureRM environment by using the following cmdlet:</span><span class="sxs-lookup"><span data-stu-id="f3038-115">Create the Azure Stack administrator's AzureRM environment by using the following cmdlet:</span></span>
   ```powershell
   Add-AzureStackAzureRmEnvironment -Name "AzureStackAdmin" -ArmEndpoint "https://adminmanagement.local.azurestack.external" 
   ```

4. <span data-ttu-id="f3038-116">Get the GUID value of the Azure Active Directory(AAD) tenant that is used to deploy the Azure Stack.</span><span class="sxs-lookup"><span data-stu-id="f3038-116">Get the GUID value of the Azure Active Directory(AAD) tenant that is used to deploy the Azure Stack.</span></span> <span data-ttu-id="f3038-117">If your Azure Stack environment is deployed by using:</span><span class="sxs-lookup"><span data-stu-id="f3038-117">If your Azure Stack environment is deployed by using:</span></span>  

    <span data-ttu-id="f3038-118">a.</span><span class="sxs-lookup"><span data-stu-id="f3038-118">a.</span></span> <span data-ttu-id="f3038-119">**Azure Active Directory**, use the following cmdlet:</span><span class="sxs-lookup"><span data-stu-id="f3038-119">**Azure Active Directory**, use the following cmdlet:</span></span>
    
    ```PowerShell
    $TenantID = Get-DirectoryTenantID -AADTenantName "<myaadtenant>.onmicrosoft.com" -EnvironmentName AzureStackAdmin
    ```
    <span data-ttu-id="f3038-120">b.</span><span class="sxs-lookup"><span data-stu-id="f3038-120">b.</span></span> <span data-ttu-id="f3038-121">**Active Directory Federation Services**, use the following cmdlet:</span><span class="sxs-lookup"><span data-stu-id="f3038-121">**Active Directory Federation Services**, use the following cmdlet:</span></span>
    
    ```PowerShell
    $TenantID = Get-DirectoryTenantID -ADFS -EnvironmentName AzureStackAdmin 
    ```

5. <span data-ttu-id="f3038-122">Add the VM image by invoking the **Add-VMImage** cmdlet.</span><span class="sxs-lookup"><span data-stu-id="f3038-122">Add the VM image by invoking the **Add-VMImage** cmdlet.</span></span> <span data-ttu-id="f3038-123">In the Add-VMImage cmdlet, specify the osType as Windows or Linux.</span><span class="sxs-lookup"><span data-stu-id="f3038-123">In the Add-VMImage cmdlet, specify the osType as Windows or Linux.</span></span> <span data-ttu-id="f3038-124">Include the publisher, offer, SKU, and version for the VM image.</span><span class="sxs-lookup"><span data-stu-id="f3038-124">Include the publisher, offer, SKU, and version for the VM image.</span></span> <span data-ttu-id="f3038-125">These parameters are used by Azure Resource Manager templates that reference the VM image.</span><span class="sxs-lookup"><span data-stu-id="f3038-125">These parameters are used by Azure Resource Manager templates that reference the VM image.</span></span> <span data-ttu-id="f3038-126">Following is an example invocation of the script:</span><span class="sxs-lookup"><span data-stu-id="f3038-126">Following is an example invocation of the script:</span></span>
     
     ```powershell
     # Store the AAD service administrator account credentials in a variable 
     $UserName='<Username of the service administrator account>'
     $Password='<Admin password provided when deploying Azure Stack>'|ConvertTo-SecureString -Force -AsPlainText
     $Credential=New-Object PSCredential($UserName,$Password)

     Add-VMImage -publisher "Canonical" -offer "UbuntuServer" -sku "14.04.3-LTS" -version "1.0.0" -osType Linux -osDiskLocalPath 'C:\Users\AzureStackAdmin\Desktop\UbuntuServer.vhd' -TenantId $TenantID -EnvironmentName "AzureStackAdmin" -azureStackCredentials $Credential
     ```

<span data-ttu-id="f3038-127">The command does the following:</span><span class="sxs-lookup"><span data-stu-id="f3038-127">The command does the following:</span></span>

* <span data-ttu-id="f3038-128">Authenticates to the Azure Stack environment</span><span class="sxs-lookup"><span data-stu-id="f3038-128">Authenticates to the Azure Stack environment</span></span>
* <span data-ttu-id="f3038-129">Uploads the local VHD to a newly created temporary storage account</span><span class="sxs-lookup"><span data-stu-id="f3038-129">Uploads the local VHD to a newly created temporary storage account</span></span>
* <span data-ttu-id="f3038-130">Adds the VM image to the VM image repository</span><span class="sxs-lookup"><span data-stu-id="f3038-130">Adds the VM image to the VM image repository</span></span>
* <span data-ttu-id="f3038-131">Creates a Marketplace item</span><span class="sxs-lookup"><span data-stu-id="f3038-131">Creates a Marketplace item</span></span>

<span data-ttu-id="f3038-132">To verify that the command ran successfully, go to Marketplace in the portal, and then verify that the VM image is available in the **Virtual Machines** category.</span><span class="sxs-lookup"><span data-stu-id="f3038-132">To verify that the command ran successfully, go to Marketplace in the portal, and then verify that the VM image is available in the **Virtual Machines** category.</span></span>

> ![VM image added successfully](https://docstestmedia1.blob.core.windows.net/azure-media/articles/azure-stack/media/azure-stack-add-vm-image/image5.PNG)
> 
> 

<span data-ttu-id="f3038-134">Following is a description of the command parameters.</span><span class="sxs-lookup"><span data-stu-id="f3038-134">Following is a description of the command parameters.</span></span>

| <span data-ttu-id="f3038-135">Parameter</span><span class="sxs-lookup"><span data-stu-id="f3038-135">Parameter</span></span> | <span data-ttu-id="f3038-136">Description</span><span class="sxs-lookup"><span data-stu-id="f3038-136">Description</span></span> |
| --- | --- |
| <span data-ttu-id="f3038-137">**tenantID**</span><span class="sxs-lookup"><span data-stu-id="f3038-137">**tenantID**</span></span> |<span data-ttu-id="f3038-138">Your Azure Active Directory tenant ID in the form *&lt;AADTenantID*.onmicrosoft.com&gt;.</span><span class="sxs-lookup"><span data-stu-id="f3038-138">Your Azure Active Directory tenant ID in the form *&lt;AADTenantID*.onmicrosoft.com&gt;.</span></span> |
| <span data-ttu-id="f3038-139">**publisher**</span><span class="sxs-lookup"><span data-stu-id="f3038-139">**publisher**</span></span> |<span data-ttu-id="f3038-140">The publisher name segment of the VM Image that tenants use when deploying the image.</span><span class="sxs-lookup"><span data-stu-id="f3038-140">The publisher name segment of the VM Image that tenants use when deploying the image.</span></span> <span data-ttu-id="f3038-141">An example is ‘Microsoft’.</span><span class="sxs-lookup"><span data-stu-id="f3038-141">An example is ‘Microsoft’.</span></span> <span data-ttu-id="f3038-142">Do not include a space or other special characters in this field.</span><span class="sxs-lookup"><span data-stu-id="f3038-142">Do not include a space or other special characters in this field.</span></span> |
| <span data-ttu-id="f3038-143">**offer**</span><span class="sxs-lookup"><span data-stu-id="f3038-143">**offer**</span></span> |<span data-ttu-id="f3038-144">The offer name segment of the VM Image that tenants use when deploying the VM image.</span><span class="sxs-lookup"><span data-stu-id="f3038-144">The offer name segment of the VM Image that tenants use when deploying the VM image.</span></span> <span data-ttu-id="f3038-145">An example is ‘WindowsServer’.</span><span class="sxs-lookup"><span data-stu-id="f3038-145">An example is ‘WindowsServer’.</span></span> <span data-ttu-id="f3038-146">Do not include a space or other special characters in this field.</span><span class="sxs-lookup"><span data-stu-id="f3038-146">Do not include a space or other special characters in this field.</span></span> |
| <span data-ttu-id="f3038-147">**sku**</span><span class="sxs-lookup"><span data-stu-id="f3038-147">**sku**</span></span> |<span data-ttu-id="f3038-148">The SKU name segment of the VM Image that tenants use when deploying the VM image.</span><span class="sxs-lookup"><span data-stu-id="f3038-148">The SKU name segment of the VM Image that tenants use when deploying the VM image.</span></span> <span data-ttu-id="f3038-149">An example is ‘Datacenter2016’.</span><span class="sxs-lookup"><span data-stu-id="f3038-149">An example is ‘Datacenter2016’.</span></span> <span data-ttu-id="f3038-150">Do not include a space or other special characters in this field.</span><span class="sxs-lookup"><span data-stu-id="f3038-150">Do not include a space or other special characters in this field.</span></span> |
| <span data-ttu-id="f3038-151">**version**</span><span class="sxs-lookup"><span data-stu-id="f3038-151">**version**</span></span> |<span data-ttu-id="f3038-152">The version of the VM Image that tenants use when deploying the VM image.</span><span class="sxs-lookup"><span data-stu-id="f3038-152">The version of the VM Image that tenants use when deploying the VM image.</span></span> <span data-ttu-id="f3038-153">This version is in the format *\#.\#.\#*.</span><span class="sxs-lookup"><span data-stu-id="f3038-153">This version is in the format *\#.\#.\#*.</span></span> <span data-ttu-id="f3038-154">An example is ‘1.0.0’.</span><span class="sxs-lookup"><span data-stu-id="f3038-154">An example is ‘1.0.0’.</span></span> <span data-ttu-id="f3038-155">Do not include a space or other special characters in this field.</span><span class="sxs-lookup"><span data-stu-id="f3038-155">Do not include a space or other special characters in this field.</span></span> |
| <span data-ttu-id="f3038-156">**osType**</span><span class="sxs-lookup"><span data-stu-id="f3038-156">**osType**</span></span> |<span data-ttu-id="f3038-157">The osType of the image must be either ‘Windows’ or ‘Linux’.</span><span class="sxs-lookup"><span data-stu-id="f3038-157">The osType of the image must be either ‘Windows’ or ‘Linux’.</span></span> |
| <span data-ttu-id="f3038-158">**osDiskLocalPath**</span><span class="sxs-lookup"><span data-stu-id="f3038-158">**osDiskLocalPath**</span></span> |<span data-ttu-id="f3038-159">The local path to the OS disk VHD that you are uploading as a VM image to Azure Stack.</span><span class="sxs-lookup"><span data-stu-id="f3038-159">The local path to the OS disk VHD that you are uploading as a VM image to Azure Stack.</span></span> |
| <span data-ttu-id="f3038-160">**dataDiskLocalPaths**</span><span class="sxs-lookup"><span data-stu-id="f3038-160">**dataDiskLocalPaths**</span></span> |<span data-ttu-id="f3038-161">An optional array of the local paths for data disks that can be uploaded as part of the VM image.</span><span class="sxs-lookup"><span data-stu-id="f3038-161">An optional array of the local paths for data disks that can be uploaded as part of the VM image.</span></span> |
| <span data-ttu-id="f3038-162">**CreateGalleryItem**</span><span class="sxs-lookup"><span data-stu-id="f3038-162">**CreateGalleryItem**</span></span> |<span data-ttu-id="f3038-163">A Boolean flag that determines whether to create an item in Marketplace.</span><span class="sxs-lookup"><span data-stu-id="f3038-163">A Boolean flag that determines whether to create an item in Marketplace.</span></span> <span data-ttu-id="f3038-164">The default is set to true.</span><span class="sxs-lookup"><span data-stu-id="f3038-164">The default is set to true.</span></span> |
| <span data-ttu-id="f3038-165">**title**</span><span class="sxs-lookup"><span data-stu-id="f3038-165">**title**</span></span> |<span data-ttu-id="f3038-166">The display name of Marketplace item.</span><span class="sxs-lookup"><span data-stu-id="f3038-166">The display name of Marketplace item.</span></span> <span data-ttu-id="f3038-167">The default is set to be the Publisher-Offer-Sku of the VM image.</span><span class="sxs-lookup"><span data-stu-id="f3038-167">The default is set to be the Publisher-Offer-Sku of the VM image.</span></span> |
| <span data-ttu-id="f3038-168">**description**</span><span class="sxs-lookup"><span data-stu-id="f3038-168">**description**</span></span> |<span data-ttu-id="f3038-169">The description of the Marketplace item.</span><span class="sxs-lookup"><span data-stu-id="f3038-169">The description of the Marketplace item.</span></span> |
| <span data-ttu-id="f3038-170">**EnvironmentName**</span><span class="sxs-lookup"><span data-stu-id="f3038-170">**EnvironmentName**</span></span> |<span data-ttu-id="f3038-171">The Azure Stack administrtor's PowerShell environment name.</span><span class="sxs-lookup"><span data-stu-id="f3038-171">The Azure Stack administrtor's PowerShell environment name.</span></span> |
| <span data-ttu-id="f3038-172">**azureStackCredentials**</span><span class="sxs-lookup"><span data-stu-id="f3038-172">**azureStackCredentials**</span></span> |<span data-ttu-id="f3038-173">The credentials provided during deployment that are used to login to the Azure Stack Administrator portal.</span><span class="sxs-lookup"><span data-stu-id="f3038-173">The credentials provided during deployment that are used to login to the Azure Stack Administrator portal.</span></span> |
| <span data-ttu-id="f3038-174">**location**</span><span class="sxs-lookup"><span data-stu-id="f3038-174">**location**</span></span> |<span data-ttu-id="f3038-175">The location to which the VM image should be published.</span><span class="sxs-lookup"><span data-stu-id="f3038-175">The location to which the VM image should be published.</span></span> <span data-ttu-id="f3038-176">By default, this value is set to local.</span><span class="sxs-lookup"><span data-stu-id="f3038-176">By default, this value is set to local.</span></span>|
| <span data-ttu-id="f3038-177">**osDiskBlobURI**</span><span class="sxs-lookup"><span data-stu-id="f3038-177">**osDiskBlobURI**</span></span> |<span data-ttu-id="f3038-178">Optionally, this script also accepts a Blob storage URI for osDisk.</span><span class="sxs-lookup"><span data-stu-id="f3038-178">Optionally, this script also accepts a Blob storage URI for osDisk.</span></span> |
| <span data-ttu-id="f3038-179">**dataDiskBlobURIs**</span><span class="sxs-lookup"><span data-stu-id="f3038-179">**dataDiskBlobURIs**</span></span> |<span data-ttu-id="f3038-180">Optionally, this script also accepts an array of Blob storage URIs for adding data disks to the image.</span><span class="sxs-lookup"><span data-stu-id="f3038-180">Optionally, this script also accepts an array of Blob storage URIs for adding data disks to the image.</span></span> |

## <a name="add-a-vm-image-through-the-portal"></a><span data-ttu-id="f3038-181">Add a VM image through the portal</span><span class="sxs-lookup"><span data-stu-id="f3038-181">Add a VM image through the portal</span></span>
> [!NOTE]
> <span data-ttu-id="f3038-182">This method requires creating the Marketplace item separately.</span><span class="sxs-lookup"><span data-stu-id="f3038-182">This method requires creating the Marketplace item separately.</span></span>
> 
> 

<span data-ttu-id="f3038-183">One requirement of images is that they can be referenced by a Blob storage URI.</span><span class="sxs-lookup"><span data-stu-id="f3038-183">One requirement of images is that they can be referenced by a Blob storage URI.</span></span> <span data-ttu-id="f3038-184">Prepare a Windows or Linux operating system virtual hard disk image in VHD format (not VHDX), and then upload the image to a storage account in Azure or in Azure Stack.</span><span class="sxs-lookup"><span data-stu-id="f3038-184">Prepare a Windows or Linux operating system virtual hard disk image in VHD format (not VHDX), and then upload the image to a storage account in Azure or in Azure Stack.</span></span> <span data-ttu-id="f3038-185">If your image is already uploaded to Blob storage in Azure or Azure Stack, you can skip this step.</span><span class="sxs-lookup"><span data-stu-id="f3038-185">If your image is already uploaded to Blob storage in Azure or Azure Stack, you can skip this step.</span></span>

<span data-ttu-id="f3038-186">Follow the steps from [Upload a Windows VM image to Azure for Resource Manager deployments](https://azure.microsoft.com/documentation/articles/virtual-machines-windows-upload-image/) article through the step **Upload the VM image to your storage account**.</span><span class="sxs-lookup"><span data-stu-id="f3038-186">Follow the steps from [Upload a Windows VM image to Azure for Resource Manager deployments](https://azure.microsoft.com/documentation/articles/virtual-machines-windows-upload-image/) article through the step **Upload the VM image to your storage account**.</span></span> <span data-ttu-id="f3038-187">Keep in mind the following:</span><span class="sxs-lookup"><span data-stu-id="f3038-187">Keep in mind the following:</span></span>

* <span data-ttu-id="f3038-188">For a Linux image, follow the instructions to prepare the image, or use an existing Azure Stack Linux image as described in the article [Deploy Linux virtual machines on Azure Stack](azure-stack-linux.md).</span><span class="sxs-lookup"><span data-stu-id="f3038-188">For a Linux image, follow the instructions to prepare the image, or use an existing Azure Stack Linux image as described in the article [Deploy Linux virtual machines on Azure Stack](azure-stack-linux.md).</span></span>
* <span data-ttu-id="f3038-189">It's more efficient to upload an image to Azure Stack Blob storage than to Azure Blob storage because it takes less time to push the VM image to the Azure Stack image repository.</span><span class="sxs-lookup"><span data-stu-id="f3038-189">It's more efficient to upload an image to Azure Stack Blob storage than to Azure Blob storage because it takes less time to push the VM image to the Azure Stack image repository.</span></span> <span data-ttu-id="f3038-190">While following the upload instructions, make sure to substitute the [Authenticate PowerShell with Microsoft Azure Stack](azure-stack-deploy-template-powershell.md) step for the ‘Login to Azure’ step.</span><span class="sxs-lookup"><span data-stu-id="f3038-190">While following the upload instructions, make sure to substitute the [Authenticate PowerShell with Microsoft Azure Stack](azure-stack-deploy-template-powershell.md) step for the ‘Login to Azure’ step.</span></span>
* <span data-ttu-id="f3038-191">Make a note of the Blob storage URI where you upload the image.</span><span class="sxs-lookup"><span data-stu-id="f3038-191">Make a note of the Blob storage URI where you upload the image.</span></span> <span data-ttu-id="f3038-192">It has the following format: *&lt;storageAccount&gt;/&lt;blobContainer&gt;/&lt;targetVHDName&gt;*.vhd</span><span class="sxs-lookup"><span data-stu-id="f3038-192">It has the following format: *&lt;storageAccount&gt;/&lt;blobContainer&gt;/&lt;targetVHDName&gt;*.vhd</span></span>

<span data-ttu-id="f3038-193">To make the blob anonymously accessible, go to the storage account blob container where the VM image VHD was uploaded to **Blob,** and then select **Access Policy**.</span><span class="sxs-lookup"><span data-stu-id="f3038-193">To make the blob anonymously accessible, go to the storage account blob container where the VM image VHD was uploaded to **Blob,** and then select **Access Policy**.</span></span> <span data-ttu-id="f3038-194">If you want, you can instead generate a shared access signature for the container and include it as part of the blob URI.</span><span class="sxs-lookup"><span data-stu-id="f3038-194">If you want, you can instead generate a shared access signature for the container and include it as part of the blob URI.</span></span>

![Navigate to storage account blobs](https://docstestmedia1.blob.core.windows.net/azure-media/articles/azure-stack/media/azure-stack-add-vm-image/image1.png)

![Set blob access to public](https://docstestmedia1.blob.core.windows.net/azure-media/articles/azure-stack/media/azure-stack-add-vm-image/image2.png)

1. <span data-ttu-id="f3038-197">Sign in to Azure Stack as an administrator.</span><span class="sxs-lookup"><span data-stu-id="f3038-197">Sign in to Azure Stack as an administrator.</span></span> <span data-ttu-id="f3038-198">Go to **Region Management**.</span><span class="sxs-lookup"><span data-stu-id="f3038-198">Go to **Region Management**.</span></span> <span data-ttu-id="f3038-199">Then, under **RPs**, select  **Compute Resource Provider** > **VM Images** > **Add.**</span><span class="sxs-lookup"><span data-stu-id="f3038-199">Then, under **RPs**, select  **Compute Resource Provider** > **VM Images** > **Add.**</span></span>
   
   ![Start to add an image](https://docstestmedia1.blob.core.windows.net/azure-media/articles/azure-stack/media/azure-stack-add-vm-image/image3.png)
2. <span data-ttu-id="f3038-201">On the following blade, enter the publisher, offer, SKU, and version of the VM image.</span><span class="sxs-lookup"><span data-stu-id="f3038-201">On the following blade, enter the publisher, offer, SKU, and version of the VM image.</span></span> <span data-ttu-id="f3038-202">These name segments refer to the VM image in Azure Resource Manager templates.</span><span class="sxs-lookup"><span data-stu-id="f3038-202">These name segments refer to the VM image in Azure Resource Manager templates.</span></span> <span data-ttu-id="f3038-203">Make sure to select the **osType** correctly.</span><span class="sxs-lookup"><span data-stu-id="f3038-203">Make sure to select the **osType** correctly.</span></span> <span data-ttu-id="f3038-204">For **osDiskBlobURI**, enter the URI where the image was uploaded in step 1.</span><span class="sxs-lookup"><span data-stu-id="f3038-204">For **osDiskBlobURI**, enter the URI where the image was uploaded in step 1.</span></span> <span data-ttu-id="f3038-205">Click **Create** to begin creating the VM Image.</span><span class="sxs-lookup"><span data-stu-id="f3038-205">Click **Create** to begin creating the VM Image.</span></span>
   
   ![Begin to create the image](https://docstestmedia1.blob.core.windows.net/azure-media/articles/azure-stack/media/azure-stack-add-vm-image/image4.png)
3. <span data-ttu-id="f3038-207">The VM Image status changes to ‘Succeeded’ when the image is successfully added.</span><span class="sxs-lookup"><span data-stu-id="f3038-207">The VM Image status changes to ‘Succeeded’ when the image is successfully added.</span></span>
4. <span data-ttu-id="f3038-208">Tenants can deploy the VM Image by specifying the publisher, offer, SKU, and version of the VM image in an Azure Resource Manager template.</span><span class="sxs-lookup"><span data-stu-id="f3038-208">Tenants can deploy the VM Image by specifying the publisher, offer, SKU, and version of the VM image in an Azure Resource Manager template.</span></span> <span data-ttu-id="f3038-209">To make the VM image more readily available for tenant consumption in the UI, it is best to [create a Marketplace item](azure-stack-create-and-publish-marketplace-item.md).</span><span class="sxs-lookup"><span data-stu-id="f3038-209">To make the VM image more readily available for tenant consumption in the UI, it is best to [create a Marketplace item](azure-stack-create-and-publish-marketplace-item.md).</span></span>




