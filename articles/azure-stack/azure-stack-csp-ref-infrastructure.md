---
title: Usage reporting infrastructure for Cloud Service Providers for Azure Stack | Microsoft Docs
description: Azure Stack includes the infrastructure needed to track usage for tenants serviced by a Cloud Service Provider (CSP) as it occurs and forwards it to Azure.
services: azure-stack
documentationcenter: ''
author: mattbriggs
manager: femila
editor: ''
ms.service: azure-stack
ms.workload: na
pms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/12/2018
ms.author: brenduns
ms.reviewer: alfredo
ms.openlocfilehash: 5a38f504a881662c19fe881058622392cf1bced0
ms.sourcegitcommit: d1451406a010fd3aa854dc8e5b77dc5537d8050e
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 09/13/2018
ms.locfileid: "44856071"
---
## <a name="usage-reporting-infrastructure-for-cloud-service-providers"></a><span data-ttu-id="d1369-103">Usage reporting infrastructure for Cloud Service Providers</span><span class="sxs-lookup"><span data-stu-id="d1369-103">Usage reporting infrastructure for Cloud Service Providers</span></span>

<span data-ttu-id="d1369-104">Azure Stack includes the infrastructure needed to track usage as it occurs and forwards it to Azure.</span><span class="sxs-lookup"><span data-stu-id="d1369-104">Azure Stack includes the infrastructure needed to track usage as it occurs and forwards it to Azure.</span></span> <span data-ttu-id="d1369-105">In Azure, Azure Commerce processes the usage data and charges usage to the appropriate Azure subscriptions.</span><span class="sxs-lookup"><span data-stu-id="d1369-105">In Azure, Azure Commerce processes the usage data and charges usage to the appropriate Azure subscriptions.</span></span> <span data-ttu-id="d1369-106">This happens in the same way as usage tracking is monitored in the global Azure cloud.</span><span class="sxs-lookup"><span data-stu-id="d1369-106">This happens in the same way as usage tracking is monitored in the global Azure cloud.</span></span>

<span data-ttu-id="d1369-107">You should note that certain concepts are consistent between global Azure and Azure Stack.</span><span class="sxs-lookup"><span data-stu-id="d1369-107">You should note that certain concepts are consistent between global Azure and Azure Stack.</span></span> <span data-ttu-id="d1369-108">Azure Stack has local subscriptions, which fulfill a similar role to an Azure subscription.</span><span class="sxs-lookup"><span data-stu-id="d1369-108">Azure Stack has local subscriptions, which fulfill a similar role to an Azure subscription.</span></span> <span data-ttu-id="d1369-109">Local subscriptions are only valid locally.</span><span class="sxs-lookup"><span data-stu-id="d1369-109">Local subscriptions are only valid locally.</span></span> <span data-ttu-id="d1369-110">Local subscriptions are mapped to Azure subscriptions when usage is forwarded to Azure.</span><span class="sxs-lookup"><span data-stu-id="d1369-110">Local subscriptions are mapped to Azure subscriptions when usage is forwarded to Azure.</span></span>

<span data-ttu-id="d1369-111">Azure Stack has local usage meters.</span><span class="sxs-lookup"><span data-stu-id="d1369-111">Azure Stack has local usage meters.</span></span> <span data-ttu-id="d1369-112">Local usage is mapped to the meters used in Azure commerce.</span><span class="sxs-lookup"><span data-stu-id="d1369-112">Local usage is mapped to the meters used in Azure commerce.</span></span> <span data-ttu-id="d1369-113">However, the meter IDs are different.</span><span class="sxs-lookup"><span data-stu-id="d1369-113">However, the meter IDs are different.</span></span> <span data-ttu-id="d1369-114">There are more meters available locally than the one Microsoft uses for billing.</span><span class="sxs-lookup"><span data-stu-id="d1369-114">There are more meters available locally than the one Microsoft uses for billing.</span></span>

<span data-ttu-id="d1369-115">There are some differences between how services are priced in Azure Stack and Azure.</span><span class="sxs-lookup"><span data-stu-id="d1369-115">There are some differences between how services are priced in Azure Stack and Azure.</span></span> <span data-ttu-id="d1369-116">For example, in Azure Stack, the charge for VMs is only based on vcore/hours, with the same rate for all VM series, unlike Azure.</span><span class="sxs-lookup"><span data-stu-id="d1369-116">For example, in Azure Stack, the charge for VMs is only based on vcore/hours, with the same rate for all VM series, unlike Azure.</span></span> <span data-ttu-id="d1369-117">The reason is that in global Azure the different prices reflect different hardware.</span><span class="sxs-lookup"><span data-stu-id="d1369-117">The reason is that in global Azure the different prices reflect different hardware.</span></span> <span data-ttu-id="d1369-118">In Azure Stack, the customer provides the hardware, so there is no reason to charge different rates for different VM classes.</span><span class="sxs-lookup"><span data-stu-id="d1369-118">In Azure Stack, the customer provides the hardware, so there is no reason to charge different rates for different VM classes.</span></span>

<span data-ttu-id="d1369-119">You can find out about the Azure Stack meters used in Commerce and their prices in Partner Center, in the same way as you would for Azure services:</span><span class="sxs-lookup"><span data-stu-id="d1369-119">You can find out about the Azure Stack meters used in Commerce and their prices in Partner Center, in the same way as you would for Azure services:</span></span>

1. <span data-ttu-id="d1369-120">In Partner Center, go to the **Dashboard menu** > **Pricing and offers**.</span><span class="sxs-lookup"><span data-stu-id="d1369-120">In Partner Center, go to the **Dashboard menu** > **Pricing and offers**.</span></span>
2. <span data-ttu-id="d1369-121">Under **Usage-based services**, select **Current**.</span><span class="sxs-lookup"><span data-stu-id="d1369-121">Under **Usage-based services**, select **Current**.</span></span>
3. <span data-ttu-id="d1369-122">Open the **Azure in Global CSP price list** spreadsheet.</span><span class="sxs-lookup"><span data-stu-id="d1369-122">Open the **Azure in Global CSP price list** spreadsheet.</span></span>
4. <span data-ttu-id="d1369-123">Filter on **Region = Azure Stack**.</span><span class="sxs-lookup"><span data-stu-id="d1369-123">Filter on **Region = Azure Stack**.</span></span>

## <a name="usage-and-billing-error-codes"></a><span data-ttu-id="d1369-124">Usage and billing error codes</span><span class="sxs-lookup"><span data-stu-id="d1369-124">Usage and billing error codes</span></span>

<span data-ttu-id="d1369-125">The following error messages can be encountered when adding tenants to a registration.</span><span class="sxs-lookup"><span data-stu-id="d1369-125">The following error messages can be encountered when adding tenants to a registration.</span></span>

| <span data-ttu-id="d1369-126">Error</span><span class="sxs-lookup"><span data-stu-id="d1369-126">Error</span></span>                           | <span data-ttu-id="d1369-127">Details</span><span class="sxs-lookup"><span data-stu-id="d1369-127">Details</span></span>                                                                                                                                                                                                                                                                                                                           | <span data-ttu-id="d1369-128">Comments</span><span class="sxs-lookup"><span data-stu-id="d1369-128">Comments</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
|---------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="d1369-129">RegistrationNotFound</span><span class="sxs-lookup"><span data-stu-id="d1369-129">RegistrationNotFound</span></span>            | <span data-ttu-id="d1369-130">The provided registration was not found.</span><span class="sxs-lookup"><span data-stu-id="d1369-130">The provided registration was not found.</span></span> <span data-ttu-id="d1369-131">Make sure the following information was provided correctly:</span><span class="sxs-lookup"><span data-stu-id="d1369-131">Make sure the following information was provided correctly:</span></span><br><span data-ttu-id="d1369-132">1. Subscription Identifier (value provided: _subscription identifier_),</span><span class="sxs-lookup"><span data-stu-id="d1369-132">1. Subscription Identifier (value provided: _subscription identifier_),</span></span><br><span data-ttu-id="d1369-133">2. Resource Group (value provided: _resource group_),</span><span class="sxs-lookup"><span data-stu-id="d1369-133">2. Resource Group (value provided: _resource group_),</span></span><br><span data-ttu-id="d1369-134">3. Registration Name (value provided: _registration name_).</span><span class="sxs-lookup"><span data-stu-id="d1369-134">3. Registration Name (value provided: _registration name_).</span></span>                             | <span data-ttu-id="d1369-135">This error usually occurs when the information pointing to the initial registration is not correct.</span><span class="sxs-lookup"><span data-stu-id="d1369-135">This error usually occurs when the information pointing to the initial registration is not correct.</span></span> <span data-ttu-id="d1369-136">If you need to verify the resource group and name of your registration, you can find it in the Azure portal, by listing all resources.</span><span class="sxs-lookup"><span data-stu-id="d1369-136">If you need to verify the resource group and name of your registration, you can find it in the Azure portal, by listing all resources.</span></span> <span data-ttu-id="d1369-137">If you find more than one registration resource, look at the CloudDeploymentID in the properties, and select the registration whose CloudDeploymentID matches that of your cloud.</span><span class="sxs-lookup"><span data-stu-id="d1369-137">If you find more than one registration resource, look at the CloudDeploymentID in the properties, and select the registration whose CloudDeploymentID matches that of your cloud.</span></span> <span data-ttu-id="d1369-138">To find the CloudDeploymentID, you can use this PowerShell on the Azure Stack:</span><span class="sxs-lookup"><span data-stu-id="d1369-138">To find the CloudDeploymentID, you can use this PowerShell on the Azure Stack:</span></span><br>`$azureStackStampInfo = Invoke-Command -Session $session -ScriptBlock { Get-AzureStackStampInformation }` |
| <span data-ttu-id="d1369-139">BadCustomerSubscriptionId</span><span class="sxs-lookup"><span data-stu-id="d1369-139">BadCustomerSubscriptionId</span></span>       | <span data-ttu-id="d1369-140">The provided _customer subscription identifier_ and the _registration name_ Subscription Identifier are not owned by the same Microsoft Cloud Service Provider.</span><span class="sxs-lookup"><span data-stu-id="d1369-140">The provided _customer subscription identifier_ and the _registration name_ Subscription Identifier are not owned by the same Microsoft Cloud Service Provider.</span></span> <span data-ttu-id="d1369-141">Check that the Customer Subscription Identifier is correct.</span><span class="sxs-lookup"><span data-stu-id="d1369-141">Check that the Customer Subscription Identifier is correct.</span></span> <span data-ttu-id="d1369-142">If the problem persists, contact support.</span><span class="sxs-lookup"><span data-stu-id="d1369-142">If the problem persists, contact support.</span></span> | <span data-ttu-id="d1369-143">This error occurs when the customer subscription is a CSP subscription, but it rolls up to a CSP partner different from the one to which the subscription used in the initial registration rolls up.</span><span class="sxs-lookup"><span data-stu-id="d1369-143">This error occurs when the customer subscription is a CSP subscription, but it rolls up to a CSP partner different from the one to which the subscription used in the initial registration rolls up.</span></span> <span data-ttu-id="d1369-144">This check is made to prevent a situation that would result in billing a CSP partner who is not responsible for the Azure Stack used.</span><span class="sxs-lookup"><span data-stu-id="d1369-144">This check is made to prevent a situation that would result in billing a CSP partner who is not responsible for the Azure Stack used.</span></span>                                                                                                                                                                                                                                                                          |
| <span data-ttu-id="d1369-145">InvalidCustomerSubscriptionId</span><span class="sxs-lookup"><span data-stu-id="d1369-145">InvalidCustomerSubscriptionId</span></span>   | <span data-ttu-id="d1369-146">The '_customer subscription identifier_' is not valid.</span><span class="sxs-lookup"><span data-stu-id="d1369-146">The '_customer subscription identifier_' is not valid.</span></span> <span data-ttu-id="d1369-147">Make sure a valid Azure subscription is provided.</span><span class="sxs-lookup"><span data-stu-id="d1369-147">Make sure a valid Azure subscription is provided.</span></span>                                                                                                                                                                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| <span data-ttu-id="d1369-148">CustomerSubscriptionNotFound</span><span class="sxs-lookup"><span data-stu-id="d1369-148">CustomerSubscriptionNotFound</span></span>    | <span data-ttu-id="d1369-149">_Customer subscription identifier_ was not found under _registration name.</span><span class="sxs-lookup"><span data-stu-id="d1369-149">_Customer subscription identifier_ was not found under _registration name.</span></span> <span data-ttu-id="d1369-150">Make sure a valid Azure subscription is being used and that the Subscription Identifier was added to the registration using the PUT operation.</span><span class="sxs-lookup"><span data-stu-id="d1369-150">Make sure a valid Azure subscription is being used and that the Subscription Identifier was added to the registration using the PUT operation.</span></span>                                                   | <span data-ttu-id="d1369-151">This error occurs when trying to verity that a tenant has been added to a subscription, and the customer subscription is not found to be associated with the registration.</span><span class="sxs-lookup"><span data-stu-id="d1369-151">This error occurs when trying to verity that a tenant has been added to a subscription, and the customer subscription is not found to be associated with the registration.</span></span> <span data-ttu-id="d1369-152">The customer has not been added to the registration, or the subscription ID has been written incorrectly.</span><span class="sxs-lookup"><span data-stu-id="d1369-152">The customer has not been added to the registration, or the subscription ID has been written incorrectly.</span></span>                                                                                                                                                                                                                                                                                                                                |
| <span data-ttu-id="d1369-153">UnauthorizedCspRegistration</span><span class="sxs-lookup"><span data-stu-id="d1369-153">UnauthorizedCspRegistration</span></span>     | <span data-ttu-id="d1369-154">The provided _registration name_ is not approved to use multi-tenancy.</span><span class="sxs-lookup"><span data-stu-id="d1369-154">The provided _registration name_ is not approved to use multi-tenancy.</span></span> <span data-ttu-id="d1369-155">Send an email to azstCSP@microsoft.com and include your registration name, resource group, and the subscription identifier used in the registration.</span><span class="sxs-lookup"><span data-stu-id="d1369-155">Send an email to azstCSP@microsoft.com and include your registration name, resource group, and the subscription identifier used in the registration.</span></span>                                                                                    | <span data-ttu-id="d1369-156">A registration needs to be approved for multi-tenancy by Microsoft before you can start adding tenants to it.</span><span class="sxs-lookup"><span data-stu-id="d1369-156">A registration needs to be approved for multi-tenancy by Microsoft before you can start adding tenants to it.</span></span> <span data-ttu-id="d1369-157">Refer to the section Registering Tenants in this document for further explanation.</span><span class="sxs-lookup"><span data-stu-id="d1369-157">Refer to the section Registering Tenants in this document for further explanation.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                             |
| <span data-ttu-id="d1369-158">CustomerSubscriptionsNotAllowed</span><span class="sxs-lookup"><span data-stu-id="d1369-158">CustomerSubscriptionsNotAllowed</span></span> | <span data-ttu-id="d1369-159">Customer Subscriptions operations are not supported for disconnected customers.</span><span class="sxs-lookup"><span data-stu-id="d1369-159">Customer Subscriptions operations are not supported for disconnected customers.</span></span> <span data-ttu-id="d1369-160">In order to use this feature, re-register with Pay As You Use licensing.</span><span class="sxs-lookup"><span data-stu-id="d1369-160">In order to use this feature, re-register with Pay As You Use licensing.</span></span>                                                                                                                                                                    | <span data-ttu-id="d1369-161">The registration to which you are trying to add tenants is a Capacity registration, that is, when the registration was created, the parameter BillingModel Capacity was used.</span><span class="sxs-lookup"><span data-stu-id="d1369-161">The registration to which you are trying to add tenants is a Capacity registration, that is, when the registration was created, the parameter BillingModel Capacity was used.</span></span> <span data-ttu-id="d1369-162">Only Pay as you use registrations are allowed for to add tenants.</span><span class="sxs-lookup"><span data-stu-id="d1369-162">Only Pay as you use registrations are allowed for to add tenants.</span></span> <span data-ttu-id="d1369-163">You need to re-register using the parameter BillingModel PayAsYouUse.</span><span class="sxs-lookup"><span data-stu-id="d1369-163">You need to re-register using the parameter BillingModel PayAsYouUse.</span></span>                                                                                                                                                                                                                                                                                          |
| <span data-ttu-id="d1369-164">InvalidCSPSubscription</span><span class="sxs-lookup"><span data-stu-id="d1369-164">InvalidCSPSubscription</span></span>          | <span data-ttu-id="d1369-165">The provided _customer subscription identifier_ is not a valid CSP subscription.</span><span class="sxs-lookup"><span data-stu-id="d1369-165">The provided _customer subscription identifier_ is not a valid CSP subscription.</span></span> <span data-ttu-id="d1369-166">Make sure a valid Azure subscription is provided.</span><span class="sxs-lookup"><span data-stu-id="d1369-166">Make sure a valid Azure subscription is provided.</span></span>                                                                                                                                                        | <span data-ttu-id="d1369-167">This is mostly likely to be due to the customer subscription being mistyped.</span><span class="sxs-lookup"><span data-stu-id="d1369-167">This is mostly likely to be due to the customer subscription being mistyped.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| <span data-ttu-id="d1369-168">MetadataResolverBadGatewayError</span><span class="sxs-lookup"><span data-stu-id="d1369-168">MetadataResolverBadGatewayError</span></span> | <span data-ttu-id="d1369-169">One of the upstream servers returned an unexpected error.</span><span class="sxs-lookup"><span data-stu-id="d1369-169">One of the upstream servers returned an unexpected error.</span></span> <span data-ttu-id="d1369-170">Try again later.</span><span class="sxs-lookup"><span data-stu-id="d1369-170">Try again later.</span></span> <span data-ttu-id="d1369-171">If the problem persists, Contact support.</span><span class="sxs-lookup"><span data-stu-id="d1369-171">If the problem persists, Contact support.</span></span>                                                                                                                                                                                                |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |

## <a name="terms-used-for-billing-and-usage"></a><span data-ttu-id="d1369-172">Terms used for billing and usage</span><span class="sxs-lookup"><span data-stu-id="d1369-172">Terms used for billing and usage</span></span>

<span data-ttu-id="d1369-173">The following terms and concepts are used for usage and billing in Azure Stack:</span><span class="sxs-lookup"><span data-stu-id="d1369-173">The following terms and concepts are used for usage and billing in Azure Stack:</span></span>

| <span data-ttu-id="d1369-174">Term</span><span class="sxs-lookup"><span data-stu-id="d1369-174">Term</span></span> | <span data-ttu-id="d1369-175">Definition</span><span class="sxs-lookup"><span data-stu-id="d1369-175">Definition</span></span> |
| --- | --- |
| <span data-ttu-id="d1369-176">Direct CSP partner</span><span class="sxs-lookup"><span data-stu-id="d1369-176">Direct CSP partner</span></span> | <span data-ttu-id="d1369-177">A direct Cloud Solution Provider (CSP) partner receives an invoice directly from Microsoft for Azure and Azure Stack usage, and bills customers directly.</span><span class="sxs-lookup"><span data-stu-id="d1369-177">A direct Cloud Solution Provider (CSP) partner receives an invoice directly from Microsoft for Azure and Azure Stack usage, and bills customers directly.</span></span> |
| <span data-ttu-id="d1369-178">Indirect CSP</span><span class="sxs-lookup"><span data-stu-id="d1369-178">Indirect CSP</span></span> | <span data-ttu-id="d1369-179">Indirect resellers work with an indirect provider (also known as a distributor).</span><span class="sxs-lookup"><span data-stu-id="d1369-179">Indirect resellers work with an indirect provider (also known as a distributor).</span></span> <span data-ttu-id="d1369-180">The resellers recruit end customers; the indirect provider holds the billing relationship with Microsoft, manages customer billing, and provides additional services like product support.</span><span class="sxs-lookup"><span data-stu-id="d1369-180">The resellers recruit end customers; the indirect provider holds the billing relationship with Microsoft, manages customer billing, and provides additional services like product support.</span></span> |
| <span data-ttu-id="d1369-181">End customer</span><span class="sxs-lookup"><span data-stu-id="d1369-181">End customer</span></span> | <span data-ttu-id="d1369-182">End customers are the businesses and government agencies that own the applications and other workloads that run on Azure Stack.</span><span class="sxs-lookup"><span data-stu-id="d1369-182">End customers are the businesses and government agencies that own the applications and other workloads that run on Azure Stack.</span></span> |

## <a name="next-steps"></a><span data-ttu-id="d1369-183">Next steps</span><span class="sxs-lookup"><span data-stu-id="d1369-183">Next steps</span></span>

 - <span data-ttu-id="d1369-184">To learn more about the CSP program, see [Cloud Solution Provider program](https://partner.microsoft.com/solutions/microsoft-cloud-solutions).</span><span class="sxs-lookup"><span data-stu-id="d1369-184">To learn more about the CSP program, see [Cloud Solution Provider program](https://partner.microsoft.com/solutions/microsoft-cloud-solutions).</span></span>
 - <span data-ttu-id="d1369-185">To learn more about how to retrieve resource usage information from Azure Stack, see [Usage and billing in Azure Stack](azure-stack-billing-and-chargeback.md).</span><span class="sxs-lookup"><span data-stu-id="d1369-185">To learn more about how to retrieve resource usage information from Azure Stack, see [Usage and billing in Azure Stack](azure-stack-billing-and-chargeback.md).</span></span>
