---
title: Automate OS and framework patching with Azure Container Registry Build (ACR Build)
description: An introduction to ACR Build, a suite of features in Azure Container Registry that provides secure, automated container image build and patching in the cloud.
services: container-registry
author: mmacy
manager: jeconnoc
ms.service: container-registry
ms.topic: article
ms.date: 08/01/2018
ms.author: marsma
ms.openlocfilehash: 5c5e41f1baad8bd49f4fa2889ef0677d69db10da
ms.sourcegitcommit: d1451406a010fd3aa854dc8e5b77dc5537d8050e
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 09/13/2018
ms.locfileid: "44867722"
---
# <a name="automate-os-and-framework-patching-with-acr-build"></a><span data-ttu-id="432d3-103">Automate OS and framework patching with ACR Build</span><span class="sxs-lookup"><span data-stu-id="432d3-103">Automate OS and framework patching with ACR Build</span></span>

<span data-ttu-id="432d3-104">Containers provide new levels of virtualization, isolating application and developer dependencies from infrastructure and operational requirements.</span><span class="sxs-lookup"><span data-stu-id="432d3-104">Containers provide new levels of virtualization, isolating application and developer dependencies from infrastructure and operational requirements.</span></span> <span data-ttu-id="432d3-105">What remains, however, is the need to address how this application virtualization is patched.</span><span class="sxs-lookup"><span data-stu-id="432d3-105">What remains, however, is the need to address how this application virtualization is patched.</span></span>

<span data-ttu-id="432d3-106">**ACR Build** is a suite of features within Azure Container Registry.</span><span class="sxs-lookup"><span data-stu-id="432d3-106">**ACR Build** is a suite of features within Azure Container Registry.</span></span> <span data-ttu-id="432d3-107">It provides cloud-based container image building for Linux, Windows, and ARM, and can automate [OS and framework patching](#automate-os-and-framework-patching) for your Docker containers.</span><span class="sxs-lookup"><span data-stu-id="432d3-107">It provides cloud-based container image building for Linux, Windows, and ARM, and can automate [OS and framework patching](#automate-os-and-framework-patching) for your Docker containers.</span></span>

[!INCLUDE [container-registry-build-preview-note](../../includes/container-registry-build-preview-note.md)]

## <a name="what-is-acr-build"></a><span data-ttu-id="432d3-108">What is ACR Build?</span><span class="sxs-lookup"><span data-stu-id="432d3-108">What is ACR Build?</span></span>

<span data-ttu-id="432d3-109">Azure Container Registry Build is an Azure-native container image build service.</span><span class="sxs-lookup"><span data-stu-id="432d3-109">Azure Container Registry Build is an Azure-native container image build service.</span></span> <span data-ttu-id="432d3-110">ACR Build enables inner-loop development in the cloud with on-demand container image builds, and automated builds on source code commit and base image update.</span><span class="sxs-lookup"><span data-stu-id="432d3-110">ACR Build enables inner-loop development in the cloud with on-demand container image builds, and automated builds on source code commit and base image update.</span></span>

<span data-ttu-id="432d3-111">Trigger container image builds automatically when code is committed to a Git repository, or when a container's base image is updated.</span><span class="sxs-lookup"><span data-stu-id="432d3-111">Trigger container image builds automatically when code is committed to a Git repository, or when a container's base image is updated.</span></span> <span data-ttu-id="432d3-112">With base image update triggers, you can automate your OS and application framework patching workflow, maintaining secure environments while adhering to the principals of immutable containers.</span><span class="sxs-lookup"><span data-stu-id="432d3-112">With base image update triggers, you can automate your OS and application framework patching workflow, maintaining secure environments while adhering to the principals of immutable containers.</span></span>

## <a name="quick-build-inner-loop-extended-to-the-cloud"></a><span data-ttu-id="432d3-113">Quick Build: inner-loop extended to the cloud</span><span class="sxs-lookup"><span data-stu-id="432d3-113">Quick Build: inner-loop extended to the cloud</span></span>

<span data-ttu-id="432d3-114">The beginning of lifecycle management starts before developers commit their first lines of code.</span><span class="sxs-lookup"><span data-stu-id="432d3-114">The beginning of lifecycle management starts before developers commit their first lines of code.</span></span> <span data-ttu-id="432d3-115">ACR Build's [Quick Build](container-registry-tutorial-quick-build.md) feature enables an integrated local inner-loop development experience, offloading builds to Azure.</span><span class="sxs-lookup"><span data-stu-id="432d3-115">ACR Build's [Quick Build](container-registry-tutorial-quick-build.md) feature enables an integrated local inner-loop development experience, offloading builds to Azure.</span></span> <span data-ttu-id="432d3-116">With Quick Builds, you can verify your automated build pipelines prior to committing your code.</span><span class="sxs-lookup"><span data-stu-id="432d3-116">With Quick Builds, you can verify your automated build pipelines prior to committing your code.</span></span>

<span data-ttu-id="432d3-117">Using the familiar `docker build` format, the [az acr build][az-acr-build] command in the Azure CLI takes a **context** (the set of files to build), sends it to the ACR Build service and, by default, pushes the built image to its registry upon completion.</span><span class="sxs-lookup"><span data-stu-id="432d3-117">Using the familiar `docker build` format, the [az acr build][az-acr-build] command in the Azure CLI takes a **context** (the set of files to build), sends it to the ACR Build service and, by default, pushes the built image to its registry upon completion.</span></span>

<span data-ttu-id="432d3-118">The following table shows a few examples of supported context locations for ACR Build:</span><span class="sxs-lookup"><span data-stu-id="432d3-118">The following table shows a few examples of supported context locations for ACR Build:</span></span>

| <span data-ttu-id="432d3-119">Context location</span><span class="sxs-lookup"><span data-stu-id="432d3-119">Context location</span></span> | <span data-ttu-id="432d3-120">Description</span><span class="sxs-lookup"><span data-stu-id="432d3-120">Description</span></span> | <span data-ttu-id="432d3-121">Example</span><span class="sxs-lookup"><span data-stu-id="432d3-121">Example</span></span> |
| ---------------- | ----------- | ------- |
| <span data-ttu-id="432d3-122">Local filesystem</span><span class="sxs-lookup"><span data-stu-id="432d3-122">Local filesystem</span></span> | <span data-ttu-id="432d3-123">Files within a directory on the local filesystem.</span><span class="sxs-lookup"><span data-stu-id="432d3-123">Files within a directory on the local filesystem.</span></span> | `/home/user/projects/myapp` |
| <span data-ttu-id="432d3-124">GitHub master branch</span><span class="sxs-lookup"><span data-stu-id="432d3-124">GitHub master branch</span></span> | <span data-ttu-id="432d3-125">Files within the master (or other default) branch of a GitHub repository.</span><span class="sxs-lookup"><span data-stu-id="432d3-125">Files within the master (or other default) branch of a GitHub repository.</span></span>  | `https://github.com/gituser/myapp-repo.git` |
| <span data-ttu-id="432d3-126">GitHub branch</span><span class="sxs-lookup"><span data-stu-id="432d3-126">GitHub branch</span></span> | <span data-ttu-id="432d3-127">Specific branch of a GitHub repo.</span><span class="sxs-lookup"><span data-stu-id="432d3-127">Specific branch of a GitHub repo.</span></span>| `https://github.com/gituser/myapp-repo.git#mybranch` |
| <span data-ttu-id="432d3-128">GitHub PR</span><span class="sxs-lookup"><span data-stu-id="432d3-128">GitHub PR</span></span> | <span data-ttu-id="432d3-129">Pull request in a GitHub repo.</span><span class="sxs-lookup"><span data-stu-id="432d3-129">Pull request in a GitHub repo.</span></span> | `https://github.com/gituser/myapp-repo.git#pull/23/head` |
| <span data-ttu-id="432d3-130">GitHub subfolder</span><span class="sxs-lookup"><span data-stu-id="432d3-130">GitHub subfolder</span></span> | <span data-ttu-id="432d3-131">Files within a subfolder in a GitHub repo.</span><span class="sxs-lookup"><span data-stu-id="432d3-131">Files within a subfolder in a GitHub repo.</span></span> <span data-ttu-id="432d3-132">Example shows combination of PR and subfolder specification.</span><span class="sxs-lookup"><span data-stu-id="432d3-132">Example shows combination of PR and subfolder specification.</span></span> | `https://github.com/gituser/myapp-repo.git#pull/24/head:myfolder` |
| <span data-ttu-id="432d3-133">Remote tarball</span><span class="sxs-lookup"><span data-stu-id="432d3-133">Remote tarball</span></span> | <span data-ttu-id="432d3-134">Files in a compressed archive on a remote webserver.</span><span class="sxs-lookup"><span data-stu-id="432d3-134">Files in a compressed archive on a remote webserver.</span></span> | `http://remoteserver/myapp.tar.gz` |

<span data-ttu-id="432d3-135">ACR Build also follows your geo-replicated registries, enabling dispersed development teams to leverage the closest replicated registry.</span><span class="sxs-lookup"><span data-stu-id="432d3-135">ACR Build also follows your geo-replicated registries, enabling dispersed development teams to leverage the closest replicated registry.</span></span>

<span data-ttu-id="432d3-136">ACR Build is designed as a container lifecycle primitive.</span><span class="sxs-lookup"><span data-stu-id="432d3-136">ACR Build is designed as a container lifecycle primitive.</span></span> <span data-ttu-id="432d3-137">For example, integrate ACR Build into your CI/CD solution.</span><span class="sxs-lookup"><span data-stu-id="432d3-137">For example, integrate ACR Build into your CI/CD solution.</span></span> <span data-ttu-id="432d3-138">By executing [az login][az-login] with a [service principal][az-login-service-principal], your CI/CD solution could then issue [az acr build][az-acr-build] commands to kick off image builds.</span><span class="sxs-lookup"><span data-stu-id="432d3-138">By executing [az login][az-login] with a [service principal][az-login-service-principal], your CI/CD solution could then issue [az acr build][az-acr-build] commands to kick off image builds.</span></span>

<span data-ttu-id="432d3-139">Learn how to use Quick Builds in the first ACR Build tutorial, [Build container images in the cloud with Azure Container Registry Build](container-registry-tutorial-quick-build.md).</span><span class="sxs-lookup"><span data-stu-id="432d3-139">Learn how to use Quick Builds in the first ACR Build tutorial, [Build container images in the cloud with Azure Container Registry Build](container-registry-tutorial-quick-build.md).</span></span>

## <a name="automatic-build-on-source-code-commit"></a><span data-ttu-id="432d3-140">Automatic build on source code commit</span><span class="sxs-lookup"><span data-stu-id="432d3-140">Automatic build on source code commit</span></span>

<span data-ttu-id="432d3-141">Use ACR Build to automatically trigger a container image build when code is committed to a Git repository.</span><span class="sxs-lookup"><span data-stu-id="432d3-141">Use ACR Build to automatically trigger a container image build when code is committed to a Git repository.</span></span> <span data-ttu-id="432d3-142">Build tasks, configurable with the Azure CLI command [az acr build-task][az-acr-build-task], allow you to specify a Git repository and optionally a branch and Dockerfile.</span><span class="sxs-lookup"><span data-stu-id="432d3-142">Build tasks, configurable with the Azure CLI command [az acr build-task][az-acr-build-task], allow you to specify a Git repository and optionally a branch and Dockerfile.</span></span> <span data-ttu-id="432d3-143">When your team commits code to the repository, an ACR Build-created webhook triggers a build of the container image defined in the repo.</span><span class="sxs-lookup"><span data-stu-id="432d3-143">When your team commits code to the repository, an ACR Build-created webhook triggers a build of the container image defined in the repo.</span></span>

<span data-ttu-id="432d3-144">Learn how to trigger builds on source code commit in the second ACR Build tutorial, [Automate container image builds with Azure Container Registry Build](container-registry-tutorial-build-task.md).</span><span class="sxs-lookup"><span data-stu-id="432d3-144">Learn how to trigger builds on source code commit in the second ACR Build tutorial, [Automate container image builds with Azure Container Registry Build](container-registry-tutorial-build-task.md).</span></span>

## <a name="automate-os-and-framework-patching"></a><span data-ttu-id="432d3-145">Automate OS and framework patching</span><span class="sxs-lookup"><span data-stu-id="432d3-145">Automate OS and framework patching</span></span>

<span data-ttu-id="432d3-146">The power of ACR Build to truly enhance your container build pipeline comes from its ability to detect an update to a base image.</span><span class="sxs-lookup"><span data-stu-id="432d3-146">The power of ACR Build to truly enhance your container build pipeline comes from its ability to detect an update to a base image.</span></span> <span data-ttu-id="432d3-147">When the updated base image is pushed to your registry, ACR Build can automatically build any application images based on it.</span><span class="sxs-lookup"><span data-stu-id="432d3-147">When the updated base image is pushed to your registry, ACR Build can automatically build any application images based on it.</span></span>

<span data-ttu-id="432d3-148">Container images can be broadly categorized into *base* images and *application* images.</span><span class="sxs-lookup"><span data-stu-id="432d3-148">Container images can be broadly categorized into *base* images and *application* images.</span></span> <span data-ttu-id="432d3-149">Your base images typically include the operating system and application frameworks upon which your application is built, along with other customizations.</span><span class="sxs-lookup"><span data-stu-id="432d3-149">Your base images typically include the operating system and application frameworks upon which your application is built, along with other customizations.</span></span> <span data-ttu-id="432d3-150">These base images are themselves typically based on public upstream images, for example: [Alpine Linux][base-alpine], [Windows][base-windows], [.NET][base-dotnet], or [Node.js][base-node].</span><span class="sxs-lookup"><span data-stu-id="432d3-150">These base images are themselves typically based on public upstream images, for example: [Alpine Linux][base-alpine], [Windows][base-windows], [.NET][base-dotnet], or [Node.js][base-node].</span></span> <span data-ttu-id="432d3-151">Several of your application images might share a common base image.</span><span class="sxs-lookup"><span data-stu-id="432d3-151">Several of your application images might share a common base image.</span></span>

<span data-ttu-id="432d3-152">When an OS or app framework image is updated by the upstream maintainer, for example with a critical OS security patch, you must also update your base images to include the critical fix.</span><span class="sxs-lookup"><span data-stu-id="432d3-152">When an OS or app framework image is updated by the upstream maintainer, for example with a critical OS security patch, you must also update your base images to include the critical fix.</span></span> <span data-ttu-id="432d3-153">Each application image must then also be rebuilt to include these upstream fixes now included in your base image.</span><span class="sxs-lookup"><span data-stu-id="432d3-153">Each application image must then also be rebuilt to include these upstream fixes now included in your base image.</span></span>

<span data-ttu-id="432d3-154">Because ACR Build dynamically discovers base image dependencies when it builds a container image, it can detect when an application image's base image is updated.</span><span class="sxs-lookup"><span data-stu-id="432d3-154">Because ACR Build dynamically discovers base image dependencies when it builds a container image, it can detect when an application image's base image is updated.</span></span> <span data-ttu-id="432d3-155">With one preconfigured [build task](container-registry-tutorial-base-image-update.md#create-build-task), ACR Build then **automatically rebuilds every application image** for you.</span><span class="sxs-lookup"><span data-stu-id="432d3-155">With one preconfigured [build task](container-registry-tutorial-base-image-update.md#create-build-task), ACR Build then **automatically rebuilds every application image** for you.</span></span> <span data-ttu-id="432d3-156">With this automatic detection and rebuilding, ACR Build saves you the time and effort normally required to manually track and update each and every application image referencing your updated base image.</span><span class="sxs-lookup"><span data-stu-id="432d3-156">With this automatic detection and rebuilding, ACR Build saves you the time and effort normally required to manually track and update each and every application image referencing your updated base image.</span></span>

<span data-ttu-id="432d3-157">Learn about OS and framework patching in the third ACR Build tutorial, [Automate image builds on base image update with Azure Container Registry Build](container-registry-tutorial-base-image-update.md).</span><span class="sxs-lookup"><span data-stu-id="432d3-157">Learn about OS and framework patching in the third ACR Build tutorial, [Automate image builds on base image update with Azure Container Registry Build](container-registry-tutorial-base-image-update.md).</span></span>

> [!NOTE]
> <span data-ttu-id="432d3-158">For the initial preview, base image updates trigger builds only when both the base and application images reside in the same Azure container registry or publicly accessible Docker Hub repositories.</span><span class="sxs-lookup"><span data-stu-id="432d3-158">For the initial preview, base image updates trigger builds only when both the base and application images reside in the same Azure container registry or publicly accessible Docker Hub repositories.</span></span>

## <a name="next-steps"></a><span data-ttu-id="432d3-159">Next steps</span><span class="sxs-lookup"><span data-stu-id="432d3-159">Next steps</span></span>

<span data-ttu-id="432d3-160">When you're ready to automate OS and framework patching by building your container images in the cloud, check out the three-part ACR Build tutorial series.</span><span class="sxs-lookup"><span data-stu-id="432d3-160">When you're ready to automate OS and framework patching by building your container images in the cloud, check out the three-part ACR Build tutorial series.</span></span>

> [!div class="nextstepaction"]
> [<span data-ttu-id="432d3-161">Build container images in the cloud with Azure Container Registry Build</span><span class="sxs-lookup"><span data-stu-id="432d3-161">Build container images in the cloud with Azure Container Registry Build</span></span>](container-registry-tutorial-quick-build.md)

<!-- LINKS - External -->
[base-alpine]: https://hub.docker.com/_/alpine/
[base-dotnet]: https://hub.docker.com/r/microsoft/dotnet/
[base-node]: https://hub.docker.com/_/node/
[base-windows]: https://hub.docker.com/r/microsoft/nanoserver/
[sample-archive]: https://github.com/Azure-Samples/acr-build-helloworld-node/archive/master.zip

<!-- LINKS - Internal -->
[azure-cli]: /cli/azure/install-azure-cli
[az-acr-build]: /cli/azure/acr#az-acr-build
[az-acr-build-task]: /cli/azure/acr#az-acr-build-task
[az-login]: /cli/azure/reference-index#az-login
[az-login-service-principal]: /cli/azure/authenticate-azure-cli#log-in-with-a-service-principal

<!-- IMAGES -->
[quick-build-01-fork]: ./media/container-registry-tutorial-quick-build/quick-build-01-fork.png
[quick-build-02-browser]: ./media/container-registry-tutorial-quick-build/quick-build-02-browser.png
