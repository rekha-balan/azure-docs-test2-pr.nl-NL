---
title: Stage a cloud service deployment (Node.js) | Microsoft Docs
description: Learn how to deploy your Azure application to a staging environment, then deploy to a production environment using Virtual IP (VIP) swap.
services: cloud-services
documentationcenter: nodejs
author: rmcmurray
manager: erikre
editor: ''
ms.assetid: d65d26a6-b424-49cd-a88c-7ef46bb112a8
ms.service: cloud-services
ms.workload: tbd
ms.tgt_pltfrm: na
ms.devlang: nodejs
ms.topic: article
ms.date: 12/22/2016
ms.author: robmcm
ms.openlocfilehash: 17efcb6b85f825134c1f1d88e784f41c61b183b2
ms.sourcegitcommit: 5b9d839c0c0a94b293fdafe1d6e5429506c07e05
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 08/02/2018
ms.locfileid: "44661651"
---
# <a name="staging-an-application-in-azure"></a><span data-ttu-id="355d6-103">Staging an Application in Azure</span><span class="sxs-lookup"><span data-stu-id="355d6-103">Staging an Application in Azure</span></span>
<span data-ttu-id="355d6-104">A packaged application can be deployed to the staging environment in Azure to be tested before you move it to the production environment in which the application is accessible on the Internet.</span><span class="sxs-lookup"><span data-stu-id="355d6-104">A packaged application can be deployed to the staging environment in Azure to be tested before you move it to the production environment in which the application is accessible on the Internet.</span></span> <span data-ttu-id="355d6-105">The staging environment is exactly like the production environment, except that you can only access the staged application with an obfuscated URL that is generated by Azure.</span><span class="sxs-lookup"><span data-stu-id="355d6-105">The staging environment is exactly like the production environment, except that you can only access the staged application with an obfuscated URL that is generated by Azure.</span></span> <span data-ttu-id="355d6-106">After you have verified that your application is working correctly, it can be deployed to the production environment by performing a Virtual IP (VIP) swap.</span><span class="sxs-lookup"><span data-stu-id="355d6-106">After you have verified that your application is working correctly, it can be deployed to the production environment by performing a Virtual IP (VIP) swap.</span></span>

> [!NOTE]
> <span data-ttu-id="355d6-107">The steps in this article only apply to node applications hosted as an Azure Cloud Service.</span><span class="sxs-lookup"><span data-stu-id="355d6-107">The steps in this article only apply to node applications hosted as an Azure Cloud Service.</span></span>
> 
> 

## <a name="step-1-stage-an-application"></a><span data-ttu-id="355d6-108">Step 1: Stage an Application</span><span class="sxs-lookup"><span data-stu-id="355d6-108">Step 1: Stage an Application</span></span>
<span data-ttu-id="355d6-109">This task covers how to stage an application by using the **Microsoft Azure PowerShell**.</span><span class="sxs-lookup"><span data-stu-id="355d6-109">This task covers how to stage an application by using the **Microsoft Azure PowerShell**.</span></span>

1. <span data-ttu-id="355d6-110">When publishing a service, simply pass the **-Slot** parameter to the **Publish-AzureServiceProject** cmdlet.</span><span class="sxs-lookup"><span data-stu-id="355d6-110">When publishing a service, simply pass the **-Slot** parameter to the **Publish-AzureServiceProject** cmdlet.</span></span>
   
   ```powershell
   Publish-AzureServiceProject -Slot staging
   ```
2. <span data-ttu-id="355d6-111">Log on to the [Azure classic portal] and select **Cloud Services**.</span><span class="sxs-lookup"><span data-stu-id="355d6-111">Log on to the [Azure classic portal] and select **Cloud Services**.</span></span> <span data-ttu-id="355d6-112">After the cloud service is created and the **Staging** column status has been updated to **Running**, click on the service name.</span><span class="sxs-lookup"><span data-stu-id="355d6-112">After the cloud service is created and the **Staging** column status has been updated to **Running**, click on the service name.</span></span>
   
   ![portal displaying a running service][cloud-service]
3. <span data-ttu-id="355d6-114">Select the **Dashboard**, and then select **Staging**.</span><span class="sxs-lookup"><span data-stu-id="355d6-114">Select the **Dashboard**, and then select **Staging**.</span></span>
   
   ![cloud service dashboard][cloud-service-dashboard]
4. <span data-ttu-id="355d6-116">Note the value in the **Site URL** entry to the right.</span><span class="sxs-lookup"><span data-stu-id="355d6-116">Note the value in the **Site URL** entry to the right.</span></span> <span data-ttu-id="355d6-117">The DNS name is an obfuscated internal ID that Azure generated.</span><span class="sxs-lookup"><span data-stu-id="355d6-117">The DNS name is an obfuscated internal ID that Azure generated.</span></span>
   
    ![site url][cloud-service-staging-url]

<span data-ttu-id="355d6-119">Now you can verify that the application is working correctly in the staging environment by using the staging site URL.</span><span class="sxs-lookup"><span data-stu-id="355d6-119">Now you can verify that the application is working correctly in the staging environment by using the staging site URL.</span></span>

## <a name="step-2-upgrade-an-application-in-production-by-swapping-vips"></a><span data-ttu-id="355d6-120">Step 2: Upgrade an Application in Production by Swapping VIPs</span><span class="sxs-lookup"><span data-stu-id="355d6-120">Step 2: Upgrade an Application in Production by Swapping VIPs</span></span>
<span data-ttu-id="355d6-121">After you have verified the upgraded version of an application in the staging environment, you can quickly make it available in production by swapping the virtual IPs (VIPs) of the staging and production environments.</span><span class="sxs-lookup"><span data-stu-id="355d6-121">After you have verified the upgraded version of an application in the staging environment, you can quickly make it available in production by swapping the virtual IPs (VIPs) of the staging and production environments.</span></span>

> [!NOTE]
> <span data-ttu-id="355d6-122">This step assumes that you have already deployed an application to production and staged the upgraded version of the application.</span><span class="sxs-lookup"><span data-stu-id="355d6-122">This step assumes that you have already deployed an application to production and staged the upgraded version of the application.</span></span>
> 
> 

1. <span data-ttu-id="355d6-123">Log into the [Azure classic portal], click **Cloud Services** and then select the service name.</span><span class="sxs-lookup"><span data-stu-id="355d6-123">Log into the [Azure classic portal], click **Cloud Services** and then select the service name.</span></span>
2. <span data-ttu-id="355d6-124">From the **Dashboard**, select **Staging**, and then click **Swap** at the bottom of the page.</span><span class="sxs-lookup"><span data-stu-id="355d6-124">From the **Dashboard**, select **Staging**, and then click **Swap** at the bottom of the page.</span></span> <span data-ttu-id="355d6-125">This opens the VIP Swap dialog.</span><span class="sxs-lookup"><span data-stu-id="355d6-125">This opens the VIP Swap dialog.</span></span>
   
   ![vip swap dialog][vip-swap-dialog]
3. <span data-ttu-id="355d6-127">Review the information, and then click **OK**.</span><span class="sxs-lookup"><span data-stu-id="355d6-127">Review the information, and then click **OK**.</span></span> <span data-ttu-id="355d6-128">The two deployments begin updating as the staging deployment switches to production and the production deployment switches to staging.</span><span class="sxs-lookup"><span data-stu-id="355d6-128">The two deployments begin updating as the staging deployment switches to production and the production deployment switches to staging.</span></span>

<span data-ttu-id="355d6-129">You have successfully staged a deployment and upgraded a production deployment by swapping VIPs with the deployment in staging.</span><span class="sxs-lookup"><span data-stu-id="355d6-129">You have successfully staged a deployment and upgraded a production deployment by swapping VIPs with the deployment in staging.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="355d6-130">Additional Resources</span><span class="sxs-lookup"><span data-stu-id="355d6-130">Additional Resources</span></span>
* <span data-ttu-id="355d6-131">[How to Deploy a Service Upgrade to Production by Swapping VIPs in Azure]</span><span class="sxs-lookup"><span data-stu-id="355d6-131">[How to Deploy a Service Upgrade to Production by Swapping VIPs in Azure]</span></span>

[Azure classic portal]: http://manage.windowsazure.com
[cloud-service]: https://docstestmedia1.blob.core.windows.net/azure-media/articles/cloud-services/media/cloud-services-nodejs-stage-application/staging-cloud-service-running.png
[cloud-service-dashboard]: https://docstestmedia1.blob.core.windows.net/azure-media/articles/cloud-services/media/cloud-services-nodejs-stage-application/cloud-service-dashboard-staging.png
[cloud-service-staging-url]: https://docstestmedia1.blob.core.windows.net/azure-media/articles/cloud-services/media/cloud-services-nodejs-stage-application/cloud-service-staging-url.png
[vip-swap-dialog]: https://docstestmedia1.blob.core.windows.net/azure-media/articles/cloud-services/media/cloud-services-nodejs-stage-application/vip-swap-dialog.png
[How to Deploy a Service Upgrade to Production by Swapping VIPs in Azure]: cloud-services-how-to-manage.md#how-to-swap-deployments-to-promote-a-staged-deployment-to-production




