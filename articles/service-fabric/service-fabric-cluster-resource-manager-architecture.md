---
title: Resource Manager Architecture | Microsoft Docs
description: An architectural overview of Service Fabric Cluster Resource Manager.
services: service-fabric
documentationcenter: .net
author: masnider
manager: timlt
editor: ''
ms.assetid: 6c4421f9-834b-450c-939f-1cb4ff456b9b
ms.service: Service-Fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 01/05/2017
ms.author: masnider
ms.openlocfilehash: 955b017908d3baa2a2a1c0b8b737af5d14728ca3
ms.sourcegitcommit: 5b9d839c0c0a94b293fdafe1d6e5429506c07e05
ms.translationtype: HT
ms.contentlocale: nl-NL
ms.lasthandoff: 08/02/2018
ms.locfileid: "44669112"
---
# <a name="cluster-resource-manager-architecture-overview"></a><span data-ttu-id="b73c0-103">Cluster resource manager architecture overview</span><span class="sxs-lookup"><span data-stu-id="b73c0-103">Cluster resource manager architecture overview</span></span>
<span data-ttu-id="b73c0-104">To manage the resources in your cluster, the Service Fabric Cluster Resource Manager must have several pieces of information.</span><span class="sxs-lookup"><span data-stu-id="b73c0-104">To manage the resources in your cluster, the Service Fabric Cluster Resource Manager must have several pieces of information.</span></span> <span data-ttu-id="b73c0-105">It has to know which services currently exist and the current (or default) amount of resources that those services are consuming.</span><span class="sxs-lookup"><span data-stu-id="b73c0-105">It has to know which services currently exist and the current (or default) amount of resources that those services are consuming.</span></span> <span data-ttu-id="b73c0-106">To track the available resources in the cluster, it has to know the capacity of the nodes in the cluster and the amount of resources consumed on each.</span><span class="sxs-lookup"><span data-stu-id="b73c0-106">To track the available resources in the cluster, it has to know the capacity of the nodes in the cluster and the amount of resources consumed on each.</span></span> <span data-ttu-id="b73c0-107">The resource consumption of a given service can change over time, and services usually care about more than one type of resource.</span><span class="sxs-lookup"><span data-stu-id="b73c0-107">The resource consumption of a given service can change over time, and services usually care about more than one type of resource.</span></span> <span data-ttu-id="b73c0-108">Across different services, there may be both real physical and physical resources being measured.</span><span class="sxs-lookup"><span data-stu-id="b73c0-108">Across different services, there may be both real physical and physical resources being measured.</span></span> <span data-ttu-id="b73c0-109">Services may track physical metrics like memory and disk consumption.</span><span class="sxs-lookup"><span data-stu-id="b73c0-109">Services may track physical metrics like memory and disk consumption.</span></span> <span data-ttu-id="b73c0-110">More commonly, services may care about logical metrics - things like "WorkQueueDepth" or "TotalRequests".</span><span class="sxs-lookup"><span data-stu-id="b73c0-110">More commonly, services may care about logical metrics - things like "WorkQueueDepth" or "TotalRequests".</span></span> <span data-ttu-id="b73c0-111">Both logical and physical metrics may be used across many different types of services or maybe specific to only a couple services.</span><span class="sxs-lookup"><span data-stu-id="b73c0-111">Both logical and physical metrics may be used across many different types of services or maybe specific to only a couple services.</span></span>

## <a name="other-considerations"></a><span data-ttu-id="b73c0-112">Other considerations</span><span class="sxs-lookup"><span data-stu-id="b73c0-112">Other considerations</span></span>
<span data-ttu-id="b73c0-113">The owners and operators of the cluster are occasionally different from the service authors, or at a minimum are the same people wearing different hats.</span><span class="sxs-lookup"><span data-stu-id="b73c0-113">The owners and operators of the cluster are occasionally different from the service authors, or at a minimum are the same people wearing different hats.</span></span> <span data-ttu-id="b73c0-114">For example, when developing your service you know a few things about what it requires in terms of resources and how the different components should ideally be deployed.</span><span class="sxs-lookup"><span data-stu-id="b73c0-114">For example, when developing your service you know a few things about what it requires in terms of resources and how the different components should ideally be deployed.</span></span> <span data-ttu-id="b73c0-115">However, the person handling a live-site incident for that service in production has a different job to do, and requires different tools.</span><span class="sxs-lookup"><span data-stu-id="b73c0-115">However, the person handling a live-site incident for that service in production has a different job to do, and requires different tools.</span></span> <span data-ttu-id="b73c0-116">Additionally, neither the cluster or the services are statically configured:</span><span class="sxs-lookup"><span data-stu-id="b73c0-116">Additionally, neither the cluster or the services are statically configured:</span></span>

* <span data-ttu-id="b73c0-117">The number of nodes in the cluster can grow and shrink</span><span class="sxs-lookup"><span data-stu-id="b73c0-117">The number of nodes in the cluster can grow and shrink</span></span>
* <span data-ttu-id="b73c0-118">Nodes of different sizes and types can come and go</span><span class="sxs-lookup"><span data-stu-id="b73c0-118">Nodes of different sizes and types can come and go</span></span>
* <span data-ttu-id="b73c0-119">Services can be created, removed, and change their desired resource allocations</span><span class="sxs-lookup"><span data-stu-id="b73c0-119">Services can be created, removed, and change their desired resource allocations</span></span>
* <span data-ttu-id="b73c0-120">Upgrades or other management operations can roll through the cluster, and things can fail at any time.</span><span class="sxs-lookup"><span data-stu-id="b73c0-120">Upgrades or other management operations can roll through the cluster, and things can fail at any time.</span></span>

## <a name="cluster-resource-manager-components-and-data-flow"></a><span data-ttu-id="b73c0-121">Cluster resource manager components and data flow</span><span class="sxs-lookup"><span data-stu-id="b73c0-121">Cluster resource manager components and data flow</span></span>
<span data-ttu-id="b73c0-122">The Cluster Resource Manager has to track the requirements of individual services and the consumption of resources by the individual service objects that make up those services.</span><span class="sxs-lookup"><span data-stu-id="b73c0-122">The Cluster Resource Manager has to track the requirements of individual services and the consumption of resources by the individual service objects that make up those services.</span></span> <span data-ttu-id="b73c0-123">To accomplish this, the Cluster Resource Manager has two conceptual parts: agents that run on each node and a fault-tolerant service.</span><span class="sxs-lookup"><span data-stu-id="b73c0-123">To accomplish this, the Cluster Resource Manager has two conceptual parts: agents that run on each node and a fault-tolerant service.</span></span> <span data-ttu-id="b73c0-124">The agents on each node track load reports from services, aggregate them, and periodically report them.</span><span class="sxs-lookup"><span data-stu-id="b73c0-124">The agents on each node track load reports from services, aggregate them, and periodically report them.</span></span> <span data-ttu-id="b73c0-125">The Cluster Resource Manager service aggregates all the information from the local agents and reacts based on its current configuration.</span><span class="sxs-lookup"><span data-stu-id="b73c0-125">The Cluster Resource Manager service aggregates all the information from the local agents and reacts based on its current configuration.</span></span>

<span data-ttu-id="b73c0-126">Let’s look at the following diagram:</span><span class="sxs-lookup"><span data-stu-id="b73c0-126">Let’s look at the following diagram:</span></span>

<span data-ttu-id="b73c0-127"><center>
![Resource Balancer Architecture][Image1]
</center></span><span class="sxs-lookup"><span data-stu-id="b73c0-127"><center>
![Resource Balancer Architecture][Image1]
</center></span></span>

<span data-ttu-id="b73c0-128">During runtime, there are many changes that could happen.</span><span class="sxs-lookup"><span data-stu-id="b73c0-128">During runtime, there are many changes that could happen.</span></span> <span data-ttu-id="b73c0-129">For example, let’s say the amount of resources some services consume changes, some services fail, and some nodes join and leave the cluster.</span><span class="sxs-lookup"><span data-stu-id="b73c0-129">For example, let’s say the amount of resources some services consume changes, some services fail, and some nodes join and leave the cluster.</span></span> <span data-ttu-id="b73c0-130">All the changes on a node are aggregated and periodically sent to the Cluster Resource Manager service (1,2) where they are aggregated again, analyzed, and stored.</span><span class="sxs-lookup"><span data-stu-id="b73c0-130">All the changes on a node are aggregated and periodically sent to the Cluster Resource Manager service (1,2) where they are aggregated again, analyzed, and stored.</span></span> <span data-ttu-id="b73c0-131">Every few seconds that service looks at the changes and determines if any actions are necessary (3).</span><span class="sxs-lookup"><span data-stu-id="b73c0-131">Every few seconds that service looks at the changes and determines if any actions are necessary (3).</span></span> <span data-ttu-id="b73c0-132">For example, it could notice that some empty nodes have been added to the cluster and decide to move some services to those nodes.</span><span class="sxs-lookup"><span data-stu-id="b73c0-132">For example, it could notice that some empty nodes have been added to the cluster and decide to move some services to those nodes.</span></span> <span data-ttu-id="b73c0-133">The Cluster Resource Manager could also notice that a particular node is overloaded, or that certain services have failed (or been deleted), freeing up resources elsewhere.</span><span class="sxs-lookup"><span data-stu-id="b73c0-133">The Cluster Resource Manager could also notice that a particular node is overloaded, or that certain services have failed (or been deleted), freeing up resources elsewhere.</span></span>

<span data-ttu-id="b73c0-134">Let’s look at the following diagram and see what happens next.</span><span class="sxs-lookup"><span data-stu-id="b73c0-134">Let’s look at the following diagram and see what happens next.</span></span> <span data-ttu-id="b73c0-135">Let’s say that the Cluster Resource Manager determines that changes are necessary.</span><span class="sxs-lookup"><span data-stu-id="b73c0-135">Let’s say that the Cluster Resource Manager determines that changes are necessary.</span></span> <span data-ttu-id="b73c0-136">It coordinates with other system services (in particular the Failover Manager) to make the necessary changes.</span><span class="sxs-lookup"><span data-stu-id="b73c0-136">It coordinates with other system services (in particular the Failover Manager) to make the necessary changes.</span></span> <span data-ttu-id="b73c0-137">Then the necessary commands are sent to the appropriate nodes (4).</span><span class="sxs-lookup"><span data-stu-id="b73c0-137">Then the necessary commands are sent to the appropriate nodes (4).</span></span> <span data-ttu-id="b73c0-138">In this case, we presume that the Resource Manager noticed that Node 5 was overloaded, and so decided to move service B from N5 to N4.</span><span class="sxs-lookup"><span data-stu-id="b73c0-138">In this case, we presume that the Resource Manager noticed that Node 5 was overloaded, and so decided to move service B from N5 to N4.</span></span> <span data-ttu-id="b73c0-139">At the end of the reconfiguration (5), the cluster looks like this:</span><span class="sxs-lookup"><span data-stu-id="b73c0-139">At the end of the reconfiguration (5), the cluster looks like this:</span></span>

<span data-ttu-id="b73c0-140"><center>
![Resource Balancer Architecture][Image2]
</center></span><span class="sxs-lookup"><span data-stu-id="b73c0-140"><center>
![Resource Balancer Architecture][Image2]
</center></span></span>

## <a name="next-steps"></a><span data-ttu-id="b73c0-141">Next steps</span><span class="sxs-lookup"><span data-stu-id="b73c0-141">Next steps</span></span>
* <span data-ttu-id="b73c0-142">The Cluster Resource Manager has many options for describing the cluster.</span><span class="sxs-lookup"><span data-stu-id="b73c0-142">The Cluster Resource Manager has many options for describing the cluster.</span></span> <span data-ttu-id="b73c0-143">To find out more about them, check out this article on [describing a Service Fabric cluster](service-fabric-cluster-resource-manager-cluster-description.md)</span><span class="sxs-lookup"><span data-stu-id="b73c0-143">To find out more about them, check out this article on [describing a Service Fabric cluster](service-fabric-cluster-resource-manager-cluster-description.md)</span></span>

[Image1]:https://docstestmedia1.blob.core.windows.net/azure-media/articles/service-fabric/media/service-fabric-cluster-resource-manager-architecture/Service-Fabric-Resource-Manager-Architecture-Activity-1.png
[Image2]:https://docstestmedia1.blob.core.windows.net/azure-media/articles/service-fabric/media/service-fabric-cluster-resource-manager-architecture/Service-Fabric-Resource-Manager-Architecture-Activity-2.png


