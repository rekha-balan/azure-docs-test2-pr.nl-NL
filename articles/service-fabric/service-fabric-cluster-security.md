---
title: Secure an Azure Service Fabric cluster | Microsoft Docs
description: Learn about security scenarios for an Azure Service Fabric cluster, and the various technologies you can use to implement them.
services: service-fabric
documentationcenter: .net
author: aljo-microsoft
manager: timlt
editor: ''
ms.assetid: 26b58724-6a43-4f20-b965-2da3f086cf8a
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: conceptual
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 08/14/2018
ms.author: aljo
ms.openlocfilehash: 52730ae24f4917ab593914c390df798f7f58dbde
ms.sourcegitcommit: d1451406a010fd3aa854dc8e5b77dc5537d8050e
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 09/13/2018
ms.locfileid: "44775901"
---
# <a name="service-fabric-cluster-security-scenarios"></a><span data-ttu-id="3c35e-103">Service Fabric cluster security scenarios</span><span class="sxs-lookup"><span data-stu-id="3c35e-103">Service Fabric cluster security scenarios</span></span>
<span data-ttu-id="3c35e-104">An Azure Service Fabric cluster is a resource that you own.</span><span class="sxs-lookup"><span data-stu-id="3c35e-104">An Azure Service Fabric cluster is a resource that you own.</span></span> <span data-ttu-id="3c35e-105">It is your responsibility to secure your clusters to help prevent unauthorized users from connecting to them.</span><span class="sxs-lookup"><span data-stu-id="3c35e-105">It is your responsibility to secure your clusters to help prevent unauthorized users from connecting to them.</span></span> <span data-ttu-id="3c35e-106">A secure cluster is especially important when you are running production workloads on the cluster.</span><span class="sxs-lookup"><span data-stu-id="3c35e-106">A secure cluster is especially important when you are running production workloads on the cluster.</span></span> <span data-ttu-id="3c35e-107">Although it's possible to create an unsecured cluster, if the cluster exposes management endpoints to the public internet, anonymous users can connect to it.</span><span class="sxs-lookup"><span data-stu-id="3c35e-107">Although it's possible to create an unsecured cluster, if the cluster exposes management endpoints to the public internet, anonymous users can connect to it.</span></span> <span data-ttu-id="3c35e-108">Unsecured clusters are not supported for production workloads.</span><span class="sxs-lookup"><span data-stu-id="3c35e-108">Unsecured clusters are not supported for production workloads.</span></span> 

<span data-ttu-id="3c35e-109">This article is an overview of security scenarios for Azure clusters and standalone clusters, and the various technologies you can use to implement them:</span><span class="sxs-lookup"><span data-stu-id="3c35e-109">This article is an overview of security scenarios for Azure clusters and standalone clusters, and the various technologies you can use to implement them:</span></span>

* <span data-ttu-id="3c35e-110">Node-to-node security</span><span class="sxs-lookup"><span data-stu-id="3c35e-110">Node-to-node security</span></span>
* <span data-ttu-id="3c35e-111">Client-to-node security</span><span class="sxs-lookup"><span data-stu-id="3c35e-111">Client-to-node security</span></span>
* <span data-ttu-id="3c35e-112">Role-Based Access Control (RBAC)</span><span class="sxs-lookup"><span data-stu-id="3c35e-112">Role-Based Access Control (RBAC)</span></span>

## <a name="node-to-node-security"></a><span data-ttu-id="3c35e-113">Node-to-node security</span><span class="sxs-lookup"><span data-stu-id="3c35e-113">Node-to-node security</span></span>
<span data-ttu-id="3c35e-114">Node-to-node security helps secure communication between the VMs or computers in a cluster.</span><span class="sxs-lookup"><span data-stu-id="3c35e-114">Node-to-node security helps secure communication between the VMs or computers in a cluster.</span></span> <span data-ttu-id="3c35e-115">This security scenario ensures that only computers that are authorized to join the cluster can participate in hosting applications and services in the cluster.</span><span class="sxs-lookup"><span data-stu-id="3c35e-115">This security scenario ensures that only computers that are authorized to join the cluster can participate in hosting applications and services in the cluster.</span></span>

![Diagram of node-to-node communication][Node-to-Node]

<span data-ttu-id="3c35e-117">Clusters running on Azure and standalone clusters running on Windows both can use either [certificate security](https://msdn.microsoft.com/library/ff649801.aspx) or [Windows security](https://msdn.microsoft.com/library/ff649396.aspx) for Windows Server computers.</span><span class="sxs-lookup"><span data-stu-id="3c35e-117">Clusters running on Azure and standalone clusters running on Windows both can use either [certificate security](https://msdn.microsoft.com/library/ff649801.aspx) or [Windows security](https://msdn.microsoft.com/library/ff649396.aspx) for Windows Server computers.</span></span>

### <a name="node-to-node-certificate-security"></a><span data-ttu-id="3c35e-118">Node-to-node certificate security</span><span class="sxs-lookup"><span data-stu-id="3c35e-118">Node-to-node certificate security</span></span>
<span data-ttu-id="3c35e-119">Service Fabric uses X.509 server certificates that you specify as part of the node-type configuration when you create a cluster.</span><span class="sxs-lookup"><span data-stu-id="3c35e-119">Service Fabric uses X.509 server certificates that you specify as part of the node-type configuration when you create a cluster.</span></span> <span data-ttu-id="3c35e-120">At the end of this article, you can see a brief overview of what these certificates are and how you can acquire or create them.</span><span class="sxs-lookup"><span data-stu-id="3c35e-120">At the end of this article, you can see a brief overview of what these certificates are and how you can acquire or create them.</span></span>

<span data-ttu-id="3c35e-121">Set up certificate security when you create the cluster, either in the Azure portal, by using an Azure Resource Manager template, or by using a standalone JSON template.</span><span class="sxs-lookup"><span data-stu-id="3c35e-121">Set up certificate security when you create the cluster, either in the Azure portal, by using an Azure Resource Manager template, or by using a standalone JSON template.</span></span> <span data-ttu-id="3c35e-122">Service Fabric SDK's default behavior is to deploy and install the certificate with the furthest into the future expiring certificate; the classic behavior allowed the defining of primary and secondary certificates, to allow manually initiated rollovers, and is not recommended for use over the new functionality.</span><span class="sxs-lookup"><span data-stu-id="3c35e-122">Service Fabric SDK's default behavior is to deploy and install the certificate with the furthest into the future expiring certificate; the classic behavior allowed the defining of primary and secondary certificates, to allow manually initiated rollovers, and is not recommended for use over the new functionality.</span></span> <span data-ttu-id="3c35e-123">The primary certificates that will be use has the furthest into the future expiring date, should be different from the admin client and read-only client certificates that you set for [client-to-node security](#client-to-node-security).</span><span class="sxs-lookup"><span data-stu-id="3c35e-123">The primary certificates that will be use has the furthest into the future expiring date, should be different from the admin client and read-only client certificates that you set for [client-to-node security](#client-to-node-security).</span></span>

<span data-ttu-id="3c35e-124">To learn how to set up certificate security in a cluster for Azure, see [Set up a cluster by using an Azure Resource Manager template](service-fabric-cluster-creation-via-arm.md).</span><span class="sxs-lookup"><span data-stu-id="3c35e-124">To learn how to set up certificate security in a cluster for Azure, see [Set up a cluster by using an Azure Resource Manager template](service-fabric-cluster-creation-via-arm.md).</span></span>

<span data-ttu-id="3c35e-125">To learn how to set up certificate security in a cluster for a standalone Windows Server cluster, see [Secure a standalone cluster on Windows by using X.509 certificates](service-fabric-windows-cluster-x509-security.md).</span><span class="sxs-lookup"><span data-stu-id="3c35e-125">To learn how to set up certificate security in a cluster for a standalone Windows Server cluster, see [Secure a standalone cluster on Windows by using X.509 certificates](service-fabric-windows-cluster-x509-security.md).</span></span>

### <a name="node-to-node-windows-security"></a><span data-ttu-id="3c35e-126">Node-to-node Windows security</span><span class="sxs-lookup"><span data-stu-id="3c35e-126">Node-to-node Windows security</span></span>
<span data-ttu-id="3c35e-127">To learn how to set up Windows security for a standalone Windows Server cluster, see [Secure a standalone cluster on Windows by using Windows security](service-fabric-windows-cluster-windows-security.md).</span><span class="sxs-lookup"><span data-stu-id="3c35e-127">To learn how to set up Windows security for a standalone Windows Server cluster, see [Secure a standalone cluster on Windows by using Windows security](service-fabric-windows-cluster-windows-security.md).</span></span>

## <a name="client-to-node-security"></a><span data-ttu-id="3c35e-128">Client-to-node security</span><span class="sxs-lookup"><span data-stu-id="3c35e-128">Client-to-node security</span></span>
<span data-ttu-id="3c35e-129">Client-to-node security authenticates clients and helps secure communication between a client and individual nodes in the cluster.</span><span class="sxs-lookup"><span data-stu-id="3c35e-129">Client-to-node security authenticates clients and helps secure communication between a client and individual nodes in the cluster.</span></span> <span data-ttu-id="3c35e-130">This type of security helps ensure that only authorized users can access the cluster and the applications that are deployed on the cluster.</span><span class="sxs-lookup"><span data-stu-id="3c35e-130">This type of security helps ensure that only authorized users can access the cluster and the applications that are deployed on the cluster.</span></span> <span data-ttu-id="3c35e-131">Clients are uniquely identified through either their Windows security credentials or their certificate security credentials.</span><span class="sxs-lookup"><span data-stu-id="3c35e-131">Clients are uniquely identified through either their Windows security credentials or their certificate security credentials.</span></span>

![Diagram of client-to-node communication][Client-to-Node]

<span data-ttu-id="3c35e-133">Clusters running on Azure and standalone clusters running on Windows both can use either [certificate security](https://msdn.microsoft.com/library/ff649801.aspx) or [Windows security](https://msdn.microsoft.com/library/ff649396.aspx).</span><span class="sxs-lookup"><span data-stu-id="3c35e-133">Clusters running on Azure and standalone clusters running on Windows both can use either [certificate security](https://msdn.microsoft.com/library/ff649801.aspx) or [Windows security](https://msdn.microsoft.com/library/ff649396.aspx).</span></span>

### <a name="client-to-node-certificate-security"></a><span data-ttu-id="3c35e-134">Client-to-node certificate security</span><span class="sxs-lookup"><span data-stu-id="3c35e-134">Client-to-node certificate security</span></span>
<span data-ttu-id="3c35e-135">Set up client-to-node certificate security when you create the cluster, either in the Azure portal, by using a Resource Manager template, or by using a standalone JSON template.</span><span class="sxs-lookup"><span data-stu-id="3c35e-135">Set up client-to-node certificate security when you create the cluster, either in the Azure portal, by using a Resource Manager template, or by using a standalone JSON template.</span></span> <span data-ttu-id="3c35e-136">To create the certificate, specify an admin client certificate or a user client certificate.</span><span class="sxs-lookup"><span data-stu-id="3c35e-136">To create the certificate, specify an admin client certificate or a user client certificate.</span></span> <span data-ttu-id="3c35e-137">As a best practice, the admin client and user client certificates you specify should be different from the primary and secondary certificates you specify for [node-to-node security](#node-to-node-security).</span><span class="sxs-lookup"><span data-stu-id="3c35e-137">As a best practice, the admin client and user client certificates you specify should be different from the primary and secondary certificates you specify for [node-to-node security](#node-to-node-security).</span></span> <span data-ttu-id="3c35e-138">By default, the cluster certificates for node-to-node security are added to the allowed client admin certificates list.</span><span class="sxs-lookup"><span data-stu-id="3c35e-138">By default, the cluster certificates for node-to-node security are added to the allowed client admin certificates list.</span></span>

<span data-ttu-id="3c35e-139">Clients that connect to the cluster by using the admin certificate have full access to management capabilities.</span><span class="sxs-lookup"><span data-stu-id="3c35e-139">Clients that connect to the cluster by using the admin certificate have full access to management capabilities.</span></span> <span data-ttu-id="3c35e-140">Clients that connect to the cluster by using the read-only user client certificate have only read access to management capabilities.</span><span class="sxs-lookup"><span data-stu-id="3c35e-140">Clients that connect to the cluster by using the read-only user client certificate have only read access to management capabilities.</span></span> <span data-ttu-id="3c35e-141">These certificates are used for the RBAC that is described later in this article.</span><span class="sxs-lookup"><span data-stu-id="3c35e-141">These certificates are used for the RBAC that is described later in this article.</span></span>

<span data-ttu-id="3c35e-142">To learn how to set up certificate security in a cluster for Azure, see [Set up a cluster by using an Azure Resource Manager template](service-fabric-cluster-creation-via-arm.md).</span><span class="sxs-lookup"><span data-stu-id="3c35e-142">To learn how to set up certificate security in a cluster for Azure, see [Set up a cluster by using an Azure Resource Manager template](service-fabric-cluster-creation-via-arm.md).</span></span>

<span data-ttu-id="3c35e-143">To learn how to set up certificate security in a cluster for a standalone Windows Server cluster, see [Secure a standalone cluster on Windows by using X.509 certificates](service-fabric-windows-cluster-x509-security.md).</span><span class="sxs-lookup"><span data-stu-id="3c35e-143">To learn how to set up certificate security in a cluster for a standalone Windows Server cluster, see [Secure a standalone cluster on Windows by using X.509 certificates](service-fabric-windows-cluster-x509-security.md).</span></span>

### <a name="client-to-node-azure-active-directory-security-on-azure"></a><span data-ttu-id="3c35e-144">Client-to-node Azure Active Directory security on Azure</span><span class="sxs-lookup"><span data-stu-id="3c35e-144">Client-to-node Azure Active Directory security on Azure</span></span>
<span data-ttu-id="3c35e-145">Azure AD enables organizations (known as tenants) to manage user access to applications.</span><span class="sxs-lookup"><span data-stu-id="3c35e-145">Azure AD enables organizations (known as tenants) to manage user access to applications.</span></span> <span data-ttu-id="3c35e-146">Applications are divided into those with a web-based sign-in UI and those with a native client experience.</span><span class="sxs-lookup"><span data-stu-id="3c35e-146">Applications are divided into those with a web-based sign-in UI and those with a native client experience.</span></span> <span data-ttu-id="3c35e-147">If you have not already created a tenant, start by reading [How to get an Azure Active Directory tenant][active-directory-howto-tenant].</span><span class="sxs-lookup"><span data-stu-id="3c35e-147">If you have not already created a tenant, start by reading [How to get an Azure Active Directory tenant][active-directory-howto-tenant].</span></span>

<span data-ttu-id="3c35e-148">A Service Fabric cluster offers several entry points to its management functionality, including the web-based [Service Fabric Explorer][service-fabric-visualizing-your-cluster] and [Visual Studio][service-fabric-manage-application-in-visual-studio].</span><span class="sxs-lookup"><span data-stu-id="3c35e-148">A Service Fabric cluster offers several entry points to its management functionality, including the web-based [Service Fabric Explorer][service-fabric-visualizing-your-cluster] and [Visual Studio][service-fabric-manage-application-in-visual-studio].</span></span> <span data-ttu-id="3c35e-149">As a result, you create two Azure AD applications to control access to the cluster, one web application and one native application.</span><span class="sxs-lookup"><span data-stu-id="3c35e-149">As a result, you create two Azure AD applications to control access to the cluster, one web application and one native application.</span></span>

<span data-ttu-id="3c35e-150">For clusters running on Azure, you also can secure access to management endpoints by using Azure Active Directory (Azure AD).</span><span class="sxs-lookup"><span data-stu-id="3c35e-150">For clusters running on Azure, you also can secure access to management endpoints by using Azure Active Directory (Azure AD).</span></span> <span data-ttu-id="3c35e-151">To learn how to create the required Azure AD artifacts and how to populate them when you create the cluster, see [Set up Azure AD to authenticate clients](service-fabric-cluster-creation-setup-aad.md).</span><span class="sxs-lookup"><span data-stu-id="3c35e-151">To learn how to create the required Azure AD artifacts and how to populate them when you create the cluster, see [Set up Azure AD to authenticate clients](service-fabric-cluster-creation-setup-aad.md).</span></span>

## <a name="security-recommendations"></a><span data-ttu-id="3c35e-152">Security recommendations</span><span class="sxs-lookup"><span data-stu-id="3c35e-152">Security recommendations</span></span>
<span data-ttu-id="3c35e-153">For Azure clusters, for node-to-node security, we recommend that you use Azure AD security to authenticate clients and certificates.</span><span class="sxs-lookup"><span data-stu-id="3c35e-153">For Azure clusters, for node-to-node security, we recommend that you use Azure AD security to authenticate clients and certificates.</span></span>

<span data-ttu-id="3c35e-154">For standalone Windows Server clusters, if you have Windows Server 2012 R2 and Windows Active Directory, we recommend that you use Windows security with group Managed Service Accounts.</span><span class="sxs-lookup"><span data-stu-id="3c35e-154">For standalone Windows Server clusters, if you have Windows Server 2012 R2 and Windows Active Directory, we recommend that you use Windows security with group Managed Service Accounts.</span></span> <span data-ttu-id="3c35e-155">Otherwise, use Windows security with Windows accounts.</span><span class="sxs-lookup"><span data-stu-id="3c35e-155">Otherwise, use Windows security with Windows accounts.</span></span>

## <a name="role-based-access-control-rbac"></a><span data-ttu-id="3c35e-156">Role-Based Access Control (RBAC)</span><span class="sxs-lookup"><span data-stu-id="3c35e-156">Role-Based Access Control (RBAC)</span></span>
<span data-ttu-id="3c35e-157">You can use access control to limit access to certain cluster operations for different groups of users.</span><span class="sxs-lookup"><span data-stu-id="3c35e-157">You can use access control to limit access to certain cluster operations for different groups of users.</span></span> <span data-ttu-id="3c35e-158">This helps make the cluster more secure.</span><span class="sxs-lookup"><span data-stu-id="3c35e-158">This helps make the cluster more secure.</span></span> <span data-ttu-id="3c35e-159">Two access control types are supported for clients that connect to a cluster: Administrator role and User role.</span><span class="sxs-lookup"><span data-stu-id="3c35e-159">Two access control types are supported for clients that connect to a cluster: Administrator role and User role.</span></span>

<span data-ttu-id="3c35e-160">Users who are assigned the Administrator role have full access to management capabilities, including read and write capabilities.</span><span class="sxs-lookup"><span data-stu-id="3c35e-160">Users who are assigned the Administrator role have full access to management capabilities, including read and write capabilities.</span></span> <span data-ttu-id="3c35e-161">Users who are assigned the User role, by default, have only read access to management capabilities (for example, query capabilities).</span><span class="sxs-lookup"><span data-stu-id="3c35e-161">Users who are assigned the User role, by default, have only read access to management capabilities (for example, query capabilities).</span></span> <span data-ttu-id="3c35e-162">They also can resolve applications and services.</span><span class="sxs-lookup"><span data-stu-id="3c35e-162">They also can resolve applications and services.</span></span>

<span data-ttu-id="3c35e-163">Set the Administrator and User client roles when you create the cluster.</span><span class="sxs-lookup"><span data-stu-id="3c35e-163">Set the Administrator and User client roles when you create the cluster.</span></span> <span data-ttu-id="3c35e-164">Assign roles by providing separate identities (for example, by using certificates or Azure AD) for each role type.</span><span class="sxs-lookup"><span data-stu-id="3c35e-164">Assign roles by providing separate identities (for example, by using certificates or Azure AD) for each role type.</span></span> <span data-ttu-id="3c35e-165">For more information about default access control settings and how to change default settings, see [Role-Based Access Control for Service Fabric clients](service-fabric-cluster-security-roles.md).</span><span class="sxs-lookup"><span data-stu-id="3c35e-165">For more information about default access control settings and how to change default settings, see [Role-Based Access Control for Service Fabric clients](service-fabric-cluster-security-roles.md).</span></span>

## <a name="x509-certificates-and-service-fabric"></a><span data-ttu-id="3c35e-166">X.509 certificates and Service Fabric</span><span class="sxs-lookup"><span data-stu-id="3c35e-166">X.509 certificates and Service Fabric</span></span>
<span data-ttu-id="3c35e-167">X.509 digital certificates commonly are used to authenticate clients and servers.</span><span class="sxs-lookup"><span data-stu-id="3c35e-167">X.509 digital certificates commonly are used to authenticate clients and servers.</span></span> <span data-ttu-id="3c35e-168">They also are used to encrypt and digitally sign messages.</span><span class="sxs-lookup"><span data-stu-id="3c35e-168">They also are used to encrypt and digitally sign messages.</span></span> <span data-ttu-id="3c35e-169">Service Fabric uses X.509 certificates to secure a cluster and provide application security features.</span><span class="sxs-lookup"><span data-stu-id="3c35e-169">Service Fabric uses X.509 certificates to secure a cluster and provide application security features.</span></span> <span data-ttu-id="3c35e-170">For more information about X.509 digital certificates, see [Working with certificates](http://msdn.microsoft.com/library/ms731899.aspx).</span><span class="sxs-lookup"><span data-stu-id="3c35e-170">For more information about X.509 digital certificates, see [Working with certificates](http://msdn.microsoft.com/library/ms731899.aspx).</span></span> <span data-ttu-id="3c35e-171">You use [Key Vault](../key-vault/key-vault-get-started.md) to manage certificates for Service Fabric clusters in Azure.</span><span class="sxs-lookup"><span data-stu-id="3c35e-171">You use [Key Vault](../key-vault/key-vault-get-started.md) to manage certificates for Service Fabric clusters in Azure.</span></span>

<span data-ttu-id="3c35e-172">Some important things to consider:</span><span class="sxs-lookup"><span data-stu-id="3c35e-172">Some important things to consider:</span></span>

* <span data-ttu-id="3c35e-173">To create certificates for clusters that are running production workloads, use a correctly configured Windows Server certificate service, or one from an approved [certificate authority (CA)](https://en.wikipedia.org/wiki/Certificate_authority).</span><span class="sxs-lookup"><span data-stu-id="3c35e-173">To create certificates for clusters that are running production workloads, use a correctly configured Windows Server certificate service, or one from an approved [certificate authority (CA)](https://en.wikipedia.org/wiki/Certificate_authority).</span></span>
* <span data-ttu-id="3c35e-174">Never use any temporary or test certificates that you create by using tools like MakeCert.exe in a production environment.</span><span class="sxs-lookup"><span data-stu-id="3c35e-174">Never use any temporary or test certificates that you create by using tools like MakeCert.exe in a production environment.</span></span>
* <span data-ttu-id="3c35e-175">You can use a self-signed certificate, but only in a test cluster.</span><span class="sxs-lookup"><span data-stu-id="3c35e-175">You can use a self-signed certificate, but only in a test cluster.</span></span> <span data-ttu-id="3c35e-176">Do not use a self-signed certificate in production.</span><span class="sxs-lookup"><span data-stu-id="3c35e-176">Do not use a self-signed certificate in production.</span></span>

### <a name="cluster-and-server-certificate-required"></a><span data-ttu-id="3c35e-177">Cluster and server certificate (required)</span><span class="sxs-lookup"><span data-stu-id="3c35e-177">Cluster and server certificate (required)</span></span>
<span data-ttu-id="3c35e-178">These certificates (one primary and optionally a secondary) are required to secure a cluster and prevent unauthorized access to it.</span><span class="sxs-lookup"><span data-stu-id="3c35e-178">These certificates (one primary and optionally a secondary) are required to secure a cluster and prevent unauthorized access to it.</span></span> <span data-ttu-id="3c35e-179">These certificates provide cluster and server authentication.</span><span class="sxs-lookup"><span data-stu-id="3c35e-179">These certificates provide cluster and server authentication.</span></span>

<span data-ttu-id="3c35e-180">Cluster authentication authenticates node-to-node communication for cluster federation.</span><span class="sxs-lookup"><span data-stu-id="3c35e-180">Cluster authentication authenticates node-to-node communication for cluster federation.</span></span> <span data-ttu-id="3c35e-181">Only nodes that can prove their identity with this certificate can join the cluster.</span><span class="sxs-lookup"><span data-stu-id="3c35e-181">Only nodes that can prove their identity with this certificate can join the cluster.</span></span> <span data-ttu-id="3c35e-182">Server authentication authenticates the cluster management endpoints to a management client, so that the management client knows it is talking to the real cluster and not a 'man in the middle'.</span><span class="sxs-lookup"><span data-stu-id="3c35e-182">Server authentication authenticates the cluster management endpoints to a management client, so that the management client knows it is talking to the real cluster and not a 'man in the middle'.</span></span> <span data-ttu-id="3c35e-183">This certificate also provides an SSL for the HTTPS management API and for Service Fabric Explorer over HTTPS.</span><span class="sxs-lookup"><span data-stu-id="3c35e-183">This certificate also provides an SSL for the HTTPS management API and for Service Fabric Explorer over HTTPS.</span></span> <span data-ttu-id="3c35e-184">When a client or node authenticates a node, one of the initial checks is the value of the common name in the **Subject** field.</span><span class="sxs-lookup"><span data-stu-id="3c35e-184">When a client or node authenticates a node, one of the initial checks is the value of the common name in the **Subject** field.</span></span> <span data-ttu-id="3c35e-185">Either this common name or one of the certificates' Subject Alternative Names (SANs) must be present in the list of allowed common names.</span><span class="sxs-lookup"><span data-stu-id="3c35e-185">Either this common name or one of the certificates' Subject Alternative Names (SANs) must be present in the list of allowed common names.</span></span>

<span data-ttu-id="3c35e-186">The certificate must meet the following requirements:</span><span class="sxs-lookup"><span data-stu-id="3c35e-186">The certificate must meet the following requirements:</span></span>

* <span data-ttu-id="3c35e-187">The certificate must contain a private key.</span><span class="sxs-lookup"><span data-stu-id="3c35e-187">The certificate must contain a private key.</span></span> <span data-ttu-id="3c35e-188">These certificates typically have extensions .pfx or .pem</span><span class="sxs-lookup"><span data-stu-id="3c35e-188">These certificates typically have extensions .pfx or .pem</span></span>  
* <span data-ttu-id="3c35e-189">The certificate must be created for key exchange, which is exportable to a Personal Information Exchange (.pfx) file.</span><span class="sxs-lookup"><span data-stu-id="3c35e-189">The certificate must be created for key exchange, which is exportable to a Personal Information Exchange (.pfx) file.</span></span>
* <span data-ttu-id="3c35e-190">The **certificate's subject name must match the domain that you use to access the Service Fabric cluster**.</span><span class="sxs-lookup"><span data-stu-id="3c35e-190">The **certificate's subject name must match the domain that you use to access the Service Fabric cluster**.</span></span> <span data-ttu-id="3c35e-191">This matching is required to provide an SSL for the cluster's HTTPS management endpoint and Service Fabric Explorer.</span><span class="sxs-lookup"><span data-stu-id="3c35e-191">This matching is required to provide an SSL for the cluster's HTTPS management endpoint and Service Fabric Explorer.</span></span> <span data-ttu-id="3c35e-192">You cannot obtain an SSL certificate from a certificate authority (CA) for the \*.cloudapp.azure.com domain.</span><span class="sxs-lookup"><span data-stu-id="3c35e-192">You cannot obtain an SSL certificate from a certificate authority (CA) for the \*.cloudapp.azure.com domain.</span></span> <span data-ttu-id="3c35e-193">You must obtain a custom domain name for your cluster.</span><span class="sxs-lookup"><span data-stu-id="3c35e-193">You must obtain a custom domain name for your cluster.</span></span> <span data-ttu-id="3c35e-194">When you request a certificate from a CA, the certificate's subject name must match the custom domain name that you use for your cluster.</span><span class="sxs-lookup"><span data-stu-id="3c35e-194">When you request a certificate from a CA, the certificate's subject name must match the custom domain name that you use for your cluster.</span></span>

<span data-ttu-id="3c35e-195">Some other things to consider:</span><span class="sxs-lookup"><span data-stu-id="3c35e-195">Some other things to consider:</span></span>

* <span data-ttu-id="3c35e-196">The **Subject** field can have multiple values.</span><span class="sxs-lookup"><span data-stu-id="3c35e-196">The **Subject** field can have multiple values.</span></span> <span data-ttu-id="3c35e-197">Each value is prefixed with an initialization to indicate the value type.</span><span class="sxs-lookup"><span data-stu-id="3c35e-197">Each value is prefixed with an initialization to indicate the value type.</span></span> <span data-ttu-id="3c35e-198">Usually, the initialization is **CN** (for *common name*); for example, **CN = www.contoso.com**.</span><span class="sxs-lookup"><span data-stu-id="3c35e-198">Usually, the initialization is **CN** (for *common name*); for example, **CN = www.contoso.com**.</span></span> 
* <span data-ttu-id="3c35e-199">The **Subject** field can be blank.</span><span class="sxs-lookup"><span data-stu-id="3c35e-199">The **Subject** field can be blank.</span></span> 
* <span data-ttu-id="3c35e-200">If the optional **Subject Alternative Name** field is populated, it must have both the common name of the certificate and one entry per SAN.</span><span class="sxs-lookup"><span data-stu-id="3c35e-200">If the optional **Subject Alternative Name** field is populated, it must have both the common name of the certificate and one entry per SAN.</span></span> <span data-ttu-id="3c35e-201">These are entered as **DNS Name** values.</span><span class="sxs-lookup"><span data-stu-id="3c35e-201">These are entered as **DNS Name** values.</span></span> <span data-ttu-id="3c35e-202">To learn how to generate certificates that have SANs, see [How to add a Subject Alternative Name to a secure LDAP certificate](http://support.microsoft.com/kb/931351).</span><span class="sxs-lookup"><span data-stu-id="3c35e-202">To learn how to generate certificates that have SANs, see [How to add a Subject Alternative Name to a secure LDAP certificate](http://support.microsoft.com/kb/931351).</span></span>
* <span data-ttu-id="3c35e-203">The value of the **Intended Purposes** field of the certificate should include an appropriate value, such as **Server Authentication** or **Client Authentication**.</span><span class="sxs-lookup"><span data-stu-id="3c35e-203">The value of the **Intended Purposes** field of the certificate should include an appropriate value, such as **Server Authentication** or **Client Authentication**.</span></span>

### <a name="application-certificates-optional"></a><span data-ttu-id="3c35e-204">Application certificates (optional)</span><span class="sxs-lookup"><span data-stu-id="3c35e-204">Application certificates (optional)</span></span>
<span data-ttu-id="3c35e-205">Any number of additional certificates can be installed on a cluster for application security purposes.</span><span class="sxs-lookup"><span data-stu-id="3c35e-205">Any number of additional certificates can be installed on a cluster for application security purposes.</span></span> <span data-ttu-id="3c35e-206">Before creating your cluster, consider the application security scenarios that require a certificate to be installed on the nodes, such as:</span><span class="sxs-lookup"><span data-stu-id="3c35e-206">Before creating your cluster, consider the application security scenarios that require a certificate to be installed on the nodes, such as:</span></span>

* <span data-ttu-id="3c35e-207">Encryption and decryption of application configuration values.</span><span class="sxs-lookup"><span data-stu-id="3c35e-207">Encryption and decryption of application configuration values.</span></span>
* <span data-ttu-id="3c35e-208">Encryption of data across nodes during replication.</span><span class="sxs-lookup"><span data-stu-id="3c35e-208">Encryption of data across nodes during replication.</span></span>

<span data-ttu-id="3c35e-209">The concept of creating secure clusters is the same, whether they are Linux or Windows clusters.</span><span class="sxs-lookup"><span data-stu-id="3c35e-209">The concept of creating secure clusters is the same, whether they are Linux or Windows clusters.</span></span>

### <a name="client-authentication-certificates-optional"></a><span data-ttu-id="3c35e-210">Client authentication certificates (optional)</span><span class="sxs-lookup"><span data-stu-id="3c35e-210">Client authentication certificates (optional)</span></span>
<span data-ttu-id="3c35e-211">Any number of additional certificates can be specified for admin or user client operations.</span><span class="sxs-lookup"><span data-stu-id="3c35e-211">Any number of additional certificates can be specified for admin or user client operations.</span></span> <span data-ttu-id="3c35e-212">The client can use this certificate when mutual authentication is required.</span><span class="sxs-lookup"><span data-stu-id="3c35e-212">The client can use this certificate when mutual authentication is required.</span></span> <span data-ttu-id="3c35e-213">Client certificates typically are not issued by a third-party CA.</span><span class="sxs-lookup"><span data-stu-id="3c35e-213">Client certificates typically are not issued by a third-party CA.</span></span> <span data-ttu-id="3c35e-214">Instead, the Personal store of the current user location typically contains client certificates placed there by a root authority.</span><span class="sxs-lookup"><span data-stu-id="3c35e-214">Instead, the Personal store of the current user location typically contains client certificates placed there by a root authority.</span></span> <span data-ttu-id="3c35e-215">The certificate should have an **Intended Purposes** value of **Client Authentication**.</span><span class="sxs-lookup"><span data-stu-id="3c35e-215">The certificate should have an **Intended Purposes** value of **Client Authentication**.</span></span>  

<span data-ttu-id="3c35e-216">By default the cluster certificate has admin client privileges.</span><span class="sxs-lookup"><span data-stu-id="3c35e-216">By default the cluster certificate has admin client privileges.</span></span> <span data-ttu-id="3c35e-217">These additional client certificates should not be installed into the cluster, but are specified as being allowed in the cluster configuration.</span><span class="sxs-lookup"><span data-stu-id="3c35e-217">These additional client certificates should not be installed into the cluster, but are specified as being allowed in the cluster configuration.</span></span>  <span data-ttu-id="3c35e-218">However, the client certificates need to be installed on the client machines to connect to the cluster and perform any operations.</span><span class="sxs-lookup"><span data-stu-id="3c35e-218">However, the client certificates need to be installed on the client machines to connect to the cluster and perform any operations.</span></span>

> [!NOTE]
> <span data-ttu-id="3c35e-219">All management operations on a Service Fabric cluster require server certificates.</span><span class="sxs-lookup"><span data-stu-id="3c35e-219">All management operations on a Service Fabric cluster require server certificates.</span></span> <span data-ttu-id="3c35e-220">Client certificates cannot be used for management.</span><span class="sxs-lookup"><span data-stu-id="3c35e-220">Client certificates cannot be used for management.</span></span>

## <a name="next-steps"></a><span data-ttu-id="3c35e-221">Next steps</span><span class="sxs-lookup"><span data-stu-id="3c35e-221">Next steps</span></span>
* [<span data-ttu-id="3c35e-222">Create a cluster in Azure by using a Resource Manager template</span><span class="sxs-lookup"><span data-stu-id="3c35e-222">Create a cluster in Azure by using a Resource Manager template</span></span>](service-fabric-cluster-creation-via-arm.md) 
* [<span data-ttu-id="3c35e-223">Create a cluster by using the Azure portal</span><span class="sxs-lookup"><span data-stu-id="3c35e-223">Create a cluster by using the Azure portal</span></span>](service-fabric-cluster-creation-via-portal.md)

<!--Image references-->
[Node-to-Node]: ./media/service-fabric-cluster-security/node-to-node.png
[Client-to-Node]: ./media/service-fabric-cluster-security/client-to-node.png

[active-directory-howto-tenant]:../active-directory/develop/quickstart-create-new-tenant.md
[service-fabric-visualizing-your-cluster]: service-fabric-visualizing-your-cluster.md
[service-fabric-manage-application-in-visual-studio]: service-fabric-manage-application-in-visual-studio.md
