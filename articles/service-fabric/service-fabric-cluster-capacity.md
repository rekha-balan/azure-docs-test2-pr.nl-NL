---
title: Planning the Service Fabric cluster capacity | Microsoft Docs
description: Service Fabric cluster capacity planning considerations. Nodetypes, Durability and Reliability tiers
services: service-fabric
documentationcenter: .net
author: ChackDan
manager: timlt
editor: ''
ms.assetid: 4c584f4a-cb1f-400c-b61f-1f797f11c982
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 03/24/2017
ms.author: chackdan
ms.openlocfilehash: 51531e9b63af81648be6d3e500f4471feff217d8
ms.sourcegitcommit: 5b9d839c0c0a94b293fdafe1d6e5429506c07e05
ms.translationtype: HT
ms.contentlocale: nl-NL
ms.lasthandoff: 08/02/2018
ms.locfileid: "44564294"
---
# <a name="service-fabric-cluster-capacity-planning-considerations"></a><span data-ttu-id="d3356-104">Service Fabric cluster capacity planning considerations</span><span class="sxs-lookup"><span data-stu-id="d3356-104">Service Fabric cluster capacity planning considerations</span></span>
<span data-ttu-id="d3356-105">For any production deployment, capacity planning is an important step.</span><span class="sxs-lookup"><span data-stu-id="d3356-105">For any production deployment, capacity planning is an important step.</span></span> <span data-ttu-id="d3356-106">Here are some of the items that you have to consider as a part of that process.</span><span class="sxs-lookup"><span data-stu-id="d3356-106">Here are some of the items that you have to consider as a part of that process.</span></span>

* <span data-ttu-id="d3356-107">The number of node types your cluster needs to start out with</span><span class="sxs-lookup"><span data-stu-id="d3356-107">The number of node types your cluster needs to start out with</span></span>
* <span data-ttu-id="d3356-108">The properties of each of node type (size, primary, internet facing, number of VMs, etc.)</span><span class="sxs-lookup"><span data-stu-id="d3356-108">The properties of each of node type (size, primary, internet facing, number of VMs, etc.)</span></span>
* <span data-ttu-id="d3356-109">The reliability and durability characteristics of the cluster</span><span class="sxs-lookup"><span data-stu-id="d3356-109">The reliability and durability characteristics of the cluster</span></span>

<span data-ttu-id="d3356-110">Let us briefly review each of these items.</span><span class="sxs-lookup"><span data-stu-id="d3356-110">Let us briefly review each of these items.</span></span>

## <a name="the-number-of-node-types-your-cluster-needs-to-start-out-with"></a><span data-ttu-id="d3356-111">The number of node types your cluster needs to start out with</span><span class="sxs-lookup"><span data-stu-id="d3356-111">The number of node types your cluster needs to start out with</span></span>
<span data-ttu-id="d3356-112">First, you need to figure out what the cluster you are creating is going to be used for and what kinds of applications you are planning to deploy into this cluster.</span><span class="sxs-lookup"><span data-stu-id="d3356-112">First, you need to figure out what the cluster you are creating is going to be used for and what kinds of applications you are planning to deploy into this cluster.</span></span> <span data-ttu-id="d3356-113">If you are not clear on the purpose of the cluster, you are most likely not yet ready to enter the capacity planning process.</span><span class="sxs-lookup"><span data-stu-id="d3356-113">If you are not clear on the purpose of the cluster, you are most likely not yet ready to enter the capacity planning process.</span></span>

<span data-ttu-id="d3356-114">Establish the number of node types your cluster needs to start out with.</span><span class="sxs-lookup"><span data-stu-id="d3356-114">Establish the number of node types your cluster needs to start out with.</span></span>  <span data-ttu-id="d3356-115">Each node type is mapped to a Virtual Machine Scale Set.</span><span class="sxs-lookup"><span data-stu-id="d3356-115">Each node type is mapped to a Virtual Machine Scale Set.</span></span> <span data-ttu-id="d3356-116">Each node type can then be scaled up or down independently, have different sets of ports open, and can have different capacity metrics.</span><span class="sxs-lookup"><span data-stu-id="d3356-116">Each node type can then be scaled up or down independently, have different sets of ports open, and can have different capacity metrics.</span></span> <span data-ttu-id="d3356-117">So the decision of the number of node types essentially comes down to the following considerations:</span><span class="sxs-lookup"><span data-stu-id="d3356-117">So the decision of the number of node types essentially comes down to the following considerations:</span></span>

* <span data-ttu-id="d3356-118">Does your application have multiple services, and do any of them need to be public or internet facing?</span><span class="sxs-lookup"><span data-stu-id="d3356-118">Does your application have multiple services, and do any of them need to be public or internet facing?</span></span> <span data-ttu-id="d3356-119">Typical applications contain a front-end gateway service that receives input from a client, and one or more back-end services that communicate with the front-end services.</span><span class="sxs-lookup"><span data-stu-id="d3356-119">Typical applications contain a front-end gateway service that receives input from a client, and one or more back-end services that communicate with the front-end services.</span></span> <span data-ttu-id="d3356-120">So in this case, you end up having at least two node types.</span><span class="sxs-lookup"><span data-stu-id="d3356-120">So in this case, you end up having at least two node types.</span></span>
* <span data-ttu-id="d3356-121">Do your services (that make up your application) have different infrastructure needs such as greater RAM or higher CPU cycles?</span><span class="sxs-lookup"><span data-stu-id="d3356-121">Do your services (that make up your application) have different infrastructure needs such as greater RAM or higher CPU cycles?</span></span> <span data-ttu-id="d3356-122">For example, let us assume that the application that you want to deploy contains a front-end service and a back-end service.</span><span class="sxs-lookup"><span data-stu-id="d3356-122">For example, let us assume that the application that you want to deploy contains a front-end service and a back-end service.</span></span> <span data-ttu-id="d3356-123">The front-end service can run on smaller VMs (VM sizes like D2) that have ports open to the internet.</span><span class="sxs-lookup"><span data-stu-id="d3356-123">The front-end service can run on smaller VMs (VM sizes like D2) that have ports open to the internet.</span></span>  <span data-ttu-id="d3356-124">The back-end service, however, is computation intensive and needs to run on larger VMs (with VM sizes like D4, D6, D15) that are not internet facing.</span><span class="sxs-lookup"><span data-stu-id="d3356-124">The back-end service, however, is computation intensive and needs to run on larger VMs (with VM sizes like D4, D6, D15) that are not internet facing.</span></span>
  
  <span data-ttu-id="d3356-125">In this example, although you can decide to put all the services on one node type, we recommended that you place them in a cluster with two node types.</span><span class="sxs-lookup"><span data-stu-id="d3356-125">In this example, although you can decide to put all the services on one node type, we recommended that you place them in a cluster with two node types.</span></span>  <span data-ttu-id="d3356-126">This allows for each node type to have distinct properties such as internet connectivity or VM size.</span><span class="sxs-lookup"><span data-stu-id="d3356-126">This allows for each node type to have distinct properties such as internet connectivity or VM size.</span></span> <span data-ttu-id="d3356-127">The number of VMs can be scaled independently, as well.</span><span class="sxs-lookup"><span data-stu-id="d3356-127">The number of VMs can be scaled independently, as well.</span></span>  
* <span data-ttu-id="d3356-128">Since you cannot predict the future, go with facts you know of and decide on the number of node types that your applications need to start with.</span><span class="sxs-lookup"><span data-stu-id="d3356-128">Since you cannot predict the future, go with facts you know of and decide on the number of node types that your applications need to start with.</span></span> <span data-ttu-id="d3356-129">You can always add or remove node types later.</span><span class="sxs-lookup"><span data-stu-id="d3356-129">You can always add or remove node types later.</span></span> <span data-ttu-id="d3356-130">A Service Fabric cluster must have at least one node type.</span><span class="sxs-lookup"><span data-stu-id="d3356-130">A Service Fabric cluster must have at least one node type.</span></span>

## <a name="the-properties-of-each-node-type"></a><span data-ttu-id="d3356-131">The properties of each node type</span><span class="sxs-lookup"><span data-stu-id="d3356-131">The properties of each node type</span></span>
<span data-ttu-id="d3356-132">The **node type** can be seen as equivalent to roles in Cloud Services.</span><span class="sxs-lookup"><span data-stu-id="d3356-132">The **node type** can be seen as equivalent to roles in Cloud Services.</span></span> <span data-ttu-id="d3356-133">Node types define the VM sizes, the number of VMs, and their properties.</span><span class="sxs-lookup"><span data-stu-id="d3356-133">Node types define the VM sizes, the number of VMs, and their properties.</span></span> <span data-ttu-id="d3356-134">Every node type that is defined in a Service Fabric cluster is set up as a separate Virtual Machine Scale Set (VMSS).</span><span class="sxs-lookup"><span data-stu-id="d3356-134">Every node type that is defined in a Service Fabric cluster is set up as a separate Virtual Machine Scale Set (VMSS).</span></span> <span data-ttu-id="d3356-135">VMSS is an Azure compute resource you can use to deploy and manage a collection of virtual machines as a set.</span><span class="sxs-lookup"><span data-stu-id="d3356-135">VMSS is an Azure compute resource you can use to deploy and manage a collection of virtual machines as a set.</span></span> <span data-ttu-id="d3356-136">Being defined as distinct VMSS, each node type can then be scaled up or down independently, have different sets of ports open, and can have different capacity metrics.</span><span class="sxs-lookup"><span data-stu-id="d3356-136">Being defined as distinct VMSS, each node type can then be scaled up or down independently, have different sets of ports open, and can have different capacity metrics.</span></span>

<span data-ttu-id="d3356-137">Read [this document](service-fabric-cluster-nodetypes.md) for more details on the relationship of Nodetypes to VMSS, how to RDP into one of the instances, open new ports etc.</span><span class="sxs-lookup"><span data-stu-id="d3356-137">Read [this document](service-fabric-cluster-nodetypes.md) for more details on the relationship of Nodetypes to VMSS, how to RDP into one of the instances, open new ports etc.</span></span>

<span data-ttu-id="d3356-138">Your cluster can have more than one node type, but the primary node type (the first one that you define on the portal) must have at least five VMs for clusters used for production workloads (or at least three VMs for test clusters).</span><span class="sxs-lookup"><span data-stu-id="d3356-138">Your cluster can have more than one node type, but the primary node type (the first one that you define on the portal) must have at least five VMs for clusters used for production workloads (or at least three VMs for test clusters).</span></span> <span data-ttu-id="d3356-139">If you are creating the cluster using a Resource Manager template, then you will find a **is Primary** attribute under the node type definition.</span><span class="sxs-lookup"><span data-stu-id="d3356-139">If you are creating the cluster using a Resource Manager template, then you will find a **is Primary** attribute under the node type definition.</span></span> <span data-ttu-id="d3356-140">The primary node type is the node type where Service Fabric system services are placed.</span><span class="sxs-lookup"><span data-stu-id="d3356-140">The primary node type is the node type where Service Fabric system services are placed.</span></span>  

### <a name="primary-node-type"></a><span data-ttu-id="d3356-141">Primary node type</span><span class="sxs-lookup"><span data-stu-id="d3356-141">Primary node type</span></span>
<span data-ttu-id="d3356-142">For a cluster with multiple node types, you will need to choose one of them to be primary.</span><span class="sxs-lookup"><span data-stu-id="d3356-142">For a cluster with multiple node types, you will need to choose one of them to be primary.</span></span> <span data-ttu-id="d3356-143">Here are the characteristics of a primary node type:</span><span class="sxs-lookup"><span data-stu-id="d3356-143">Here are the characteristics of a primary node type:</span></span>

* <span data-ttu-id="d3356-144">The **minimum size of VMs** for the primary node type is determined by the **durability tier** you choose.</span><span class="sxs-lookup"><span data-stu-id="d3356-144">The **minimum size of VMs** for the primary node type is determined by the **durability tier** you choose.</span></span> <span data-ttu-id="d3356-145">The default for the durability tier is Bronze.</span><span class="sxs-lookup"><span data-stu-id="d3356-145">The default for the durability tier is Bronze.</span></span> <span data-ttu-id="d3356-146">Scroll down for details on what the durability tier is and the values it can take.</span><span class="sxs-lookup"><span data-stu-id="d3356-146">Scroll down for details on what the durability tier is and the values it can take.</span></span>  
* <span data-ttu-id="d3356-147">The **minimum number of VMs** for the primary node type is determined by the **reliability tier** you choose.</span><span class="sxs-lookup"><span data-stu-id="d3356-147">The **minimum number of VMs** for the primary node type is determined by the **reliability tier** you choose.</span></span> <span data-ttu-id="d3356-148">The default for the reliability tier is Silver.</span><span class="sxs-lookup"><span data-stu-id="d3356-148">The default for the reliability tier is Silver.</span></span> <span data-ttu-id="d3356-149">Scroll down for details on what the reliability tier is and the values it can take.</span><span class="sxs-lookup"><span data-stu-id="d3356-149">Scroll down for details on what the reliability tier is and the values it can take.</span></span> 

 

* <span data-ttu-id="d3356-150">The Service Fabric system services (for example, the Cluster Manager service or Image Store service) are placed on the primary node type and so the reliability and durability of the cluster is determined by the reliability tier value and durability tier value you select for the primary node type.</span><span class="sxs-lookup"><span data-stu-id="d3356-150">The Service Fabric system services (for example, the Cluster Manager service or Image Store service) are placed on the primary node type and so the reliability and durability of the cluster is determined by the reliability tier value and durability tier value you select for the primary node type.</span></span>

![<span data-ttu-id="d3356-151">Screen shot of a cluster that has two Node Types</span><span class="sxs-lookup"><span data-stu-id="d3356-151">Screen shot of a cluster that has two Node Types</span></span> ][SystemServices]

### <a name="non-primary-node-type"></a><span data-ttu-id="d3356-152">Non-primary node type</span><span class="sxs-lookup"><span data-stu-id="d3356-152">Non-primary node type</span></span>
<span data-ttu-id="d3356-153">For a cluster with multiple node types, there is one primary node type and the rest of them are non-primary.</span><span class="sxs-lookup"><span data-stu-id="d3356-153">For a cluster with multiple node types, there is one primary node type and the rest of them are non-primary.</span></span> <span data-ttu-id="d3356-154">Here are the characteristics of a non-primary node type:</span><span class="sxs-lookup"><span data-stu-id="d3356-154">Here are the characteristics of a non-primary node type:</span></span>

* <span data-ttu-id="d3356-155">The minimum size of VMs for this node type is determined by the durability tier you choose.</span><span class="sxs-lookup"><span data-stu-id="d3356-155">The minimum size of VMs for this node type is determined by the durability tier you choose.</span></span> <span data-ttu-id="d3356-156">The default for the durability tier is Bronze.</span><span class="sxs-lookup"><span data-stu-id="d3356-156">The default for the durability tier is Bronze.</span></span> <span data-ttu-id="d3356-157">Scroll down for details on what the durability tier is and the values it can take.</span><span class="sxs-lookup"><span data-stu-id="d3356-157">Scroll down for details on what the durability tier is and the values it can take.</span></span>  
* <span data-ttu-id="d3356-158">The minimum number of VMs for this node type can be one.</span><span class="sxs-lookup"><span data-stu-id="d3356-158">The minimum number of VMs for this node type can be one.</span></span> <span data-ttu-id="d3356-159">However you should choose this number based on the number of replicas of the application/services that you would like to run in this node type.</span><span class="sxs-lookup"><span data-stu-id="d3356-159">However you should choose this number based on the number of replicas of the application/services that you would like to run in this node type.</span></span> <span data-ttu-id="d3356-160">The number of VMs in a node type can be increased after you have deployed the cluster.</span><span class="sxs-lookup"><span data-stu-id="d3356-160">The number of VMs in a node type can be increased after you have deployed the cluster.</span></span>

## <a name="the-durability-characteristics-of-the-cluster"></a><span data-ttu-id="d3356-161">The durability characteristics of the cluster</span><span class="sxs-lookup"><span data-stu-id="d3356-161">The durability characteristics of the cluster</span></span>
<span data-ttu-id="d3356-162">The durability tier is used to indicate to the system the privileges that your VMs have with the underlying Azure infrastructure.</span><span class="sxs-lookup"><span data-stu-id="d3356-162">The durability tier is used to indicate to the system the privileges that your VMs have with the underlying Azure infrastructure.</span></span> <span data-ttu-id="d3356-163">In the primary node type, this privilege allows Service Fabric to pause any VM level infrastructure request (such as a VM reboot, VM reimage, or VM migration) that impact the quorum requirements for the system services and your stateful services.</span><span class="sxs-lookup"><span data-stu-id="d3356-163">In the primary node type, this privilege allows Service Fabric to pause any VM level infrastructure request (such as a VM reboot, VM reimage, or VM migration) that impact the quorum requirements for the system services and your stateful services.</span></span> <span data-ttu-id="d3356-164">In the non-primary node types, this privilege allows Service Fabric to pause any VM level infrastructure request like VM reboot, VM reimage, VM migration etc., that impact the quorum requirements for your stateful services running in it.</span><span class="sxs-lookup"><span data-stu-id="d3356-164">In the non-primary node types, this privilege allows Service Fabric to pause any VM level infrastructure request like VM reboot, VM reimage, VM migration etc., that impact the quorum requirements for your stateful services running in it.</span></span>

<span data-ttu-id="d3356-165">This privilege is expressed in the following values:</span><span class="sxs-lookup"><span data-stu-id="d3356-165">This privilege is expressed in the following values:</span></span>

* <span data-ttu-id="d3356-166">Gold - The infrastructure Jobs can be paused for a duration of 2 hours per UD.</span><span class="sxs-lookup"><span data-stu-id="d3356-166">Gold - The infrastructure Jobs can be paused for a duration of 2 hours per UD.</span></span> <span data-ttu-id="d3356-167">Gold durability can be enabled only on full node VM skus like D15_V2, G5 etc.</span><span class="sxs-lookup"><span data-stu-id="d3356-167">Gold durability can be enabled only on full node VM skus like D15_V2, G5 etc.</span></span>
* <span data-ttu-id="d3356-168">Silver - The infrastructure Jobs can be paused for a duration of 30 minutes per UD (This is currently not enabled for use.</span><span class="sxs-lookup"><span data-stu-id="d3356-168">Silver - The infrastructure Jobs can be paused for a duration of 30 minutes per UD (This is currently not enabled for use.</span></span> <span data-ttu-id="d3356-169">Once enabled this will be available on all standard VMs of single core and above).</span><span class="sxs-lookup"><span data-stu-id="d3356-169">Once enabled this will be available on all standard VMs of single core and above).</span></span>
* <span data-ttu-id="d3356-170">Bronze - No privileges.</span><span class="sxs-lookup"><span data-stu-id="d3356-170">Bronze - No privileges.</span></span> <span data-ttu-id="d3356-171">This is the default.</span><span class="sxs-lookup"><span data-stu-id="d3356-171">This is the default.</span></span>

## <a name="the-reliability-characteristics-of-the-cluster"></a><span data-ttu-id="d3356-172">The reliability characteristics of the cluster</span><span class="sxs-lookup"><span data-stu-id="d3356-172">The reliability characteristics of the cluster</span></span>
<span data-ttu-id="d3356-173">The reliability tier is used to set the number of replicas of the system services that you want to run in this cluster on the primary node type.</span><span class="sxs-lookup"><span data-stu-id="d3356-173">The reliability tier is used to set the number of replicas of the system services that you want to run in this cluster on the primary node type.</span></span> <span data-ttu-id="d3356-174">The more the number of replicas, the more reliable the system services are in your cluster.</span><span class="sxs-lookup"><span data-stu-id="d3356-174">The more the number of replicas, the more reliable the system services are in your cluster.</span></span>  

<span data-ttu-id="d3356-175">The reliability tier can take the following values.</span><span class="sxs-lookup"><span data-stu-id="d3356-175">The reliability tier can take the following values.</span></span>

* <span data-ttu-id="d3356-176">Platinum - Run the System services with a target replica set count of 9</span><span class="sxs-lookup"><span data-stu-id="d3356-176">Platinum - Run the System services with a target replica set count of 9</span></span>
* <span data-ttu-id="d3356-177">Gold - Run the System services with a target replica set count of 7</span><span class="sxs-lookup"><span data-stu-id="d3356-177">Gold - Run the System services with a target replica set count of 7</span></span>
* <span data-ttu-id="d3356-178">Silver - Run the System services with a target replica set count of 5</span><span class="sxs-lookup"><span data-stu-id="d3356-178">Silver - Run the System services with a target replica set count of 5</span></span>
* <span data-ttu-id="d3356-179">Bronze - Run the System services with a target replica set count of 3</span><span class="sxs-lookup"><span data-stu-id="d3356-179">Bronze - Run the System services with a target replica set count of 3</span></span>

> [!NOTE]
> <span data-ttu-id="d3356-180">The reliability tier you choose determines the minimum number of nodes your primary node type must have.</span><span class="sxs-lookup"><span data-stu-id="d3356-180">The reliability tier you choose determines the minimum number of nodes your primary node type must have.</span></span> <span data-ttu-id="d3356-181">The reliability tier has no bearing on the max size of the cluster.</span><span class="sxs-lookup"><span data-stu-id="d3356-181">The reliability tier has no bearing on the max size of the cluster.</span></span> <span data-ttu-id="d3356-182">So you can have a 20 node cluster, that is running at Bronze reliability.</span><span class="sxs-lookup"><span data-stu-id="d3356-182">So you can have a 20 node cluster, that is running at Bronze reliability.</span></span>
> 
> 

 <span data-ttu-id="d3356-183">You can choose to update the reliability of your cluster from one tier to another.</span><span class="sxs-lookup"><span data-stu-id="d3356-183">You can choose to update the reliability of your cluster from one tier to another.</span></span> <span data-ttu-id="d3356-184">Doing this will trigger the cluster upgrades needed to change the system services replica set count.</span><span class="sxs-lookup"><span data-stu-id="d3356-184">Doing this will trigger the cluster upgrades needed to change the system services replica set count.</span></span> <span data-ttu-id="d3356-185">Wait for the upgrade in progress to complete before making any other changes to the cluster, like adding nodes etc.  You can monitor the progress of the upgrade on Service Fabric Explorer or by running [Get-ServiceFabricClusterUpgrade](https://msdn.microsoft.com/library/mt126012.aspx)</span><span class="sxs-lookup"><span data-stu-id="d3356-185">Wait for the upgrade in progress to complete before making any other changes to the cluster, like adding nodes etc.  You can monitor the progress of the upgrade on Service Fabric Explorer or by running [Get-ServiceFabricClusterUpgrade](https://msdn.microsoft.com/library/mt126012.aspx)</span></span>


## <a name="primary-node-type---capacity-guidance"></a><span data-ttu-id="d3356-186">Primary node type - Capacity Guidance</span><span class="sxs-lookup"><span data-stu-id="d3356-186">Primary node type - Capacity Guidance</span></span>

<span data-ttu-id="d3356-187">Here is the guidance for planning the primary node type capacity</span><span class="sxs-lookup"><span data-stu-id="d3356-187">Here is the guidance for planning the primary node type capacity</span></span>

1. <span data-ttu-id="d3356-188">**Number of VM instances:** To run any production workload in Azure, you must specify a reliability tier of Silver or higher, which then translates to a minimum Primary Node type size of 5.</span><span class="sxs-lookup"><span data-stu-id="d3356-188">**Number of VM instances:** To run any production workload in Azure, you must specify a reliability tier of Silver or higher, which then translates to a minimum Primary Node type size of 5.</span></span>
2. <span data-ttu-id="d3356-189">**VM SKU:** Primary node type is where the system services run, so the VM SKU you choose for it, must take into account the overall peak load you plan to place into the cluster.</span><span class="sxs-lookup"><span data-stu-id="d3356-189">**VM SKU:** Primary node type is where the system services run, so the VM SKU you choose for it, must take into account the overall peak load you plan to place into the cluster.</span></span> <span data-ttu-id="d3356-190">Here is an analogy to illustrate what I mean here - Think of the primary node type as your "Lungs", it is what provides oxygen to your brain, and so if the brain does not get enough oxygen, your body suffers.</span><span class="sxs-lookup"><span data-stu-id="d3356-190">Here is an analogy to illustrate what I mean here - Think of the primary node type as your "Lungs", it is what provides oxygen to your brain, and so if the brain does not get enough oxygen, your body suffers.</span></span> 

<span data-ttu-id="d3356-191">The capacity needs of a cluster, is absolutely determined by workload you plan to run in the cluster, So we cannot provide you with a qualitative guidance for your specific workload, however here is the broad guidance to help you get started</span><span class="sxs-lookup"><span data-stu-id="d3356-191">The capacity needs of a cluster, is absolutely determined by workload you plan to run in the cluster, So we cannot provide you with a qualitative guidance for your specific workload, however here is the broad guidance to help you get started</span></span>

<span data-ttu-id="d3356-192">For production workloads</span><span class="sxs-lookup"><span data-stu-id="d3356-192">For production workloads</span></span> 


- <span data-ttu-id="d3356-193">The recommended VM SKU is Standard D3 or Standard D3_V2 or equivalent with a minimum of 14 GB of local SSD.</span><span class="sxs-lookup"><span data-stu-id="d3356-193">The recommended VM SKU is Standard D3 or Standard D3_V2 or equivalent with a minimum of 14 GB of local SSD.</span></span>
- <span data-ttu-id="d3356-194">The minimum supported use VM SKU is Standard D1 or Standard D1_V2 or equivalent with a minimum of 14 GB of local SSD.</span><span class="sxs-lookup"><span data-stu-id="d3356-194">The minimum supported use VM SKU is Standard D1 or Standard D1_V2 or equivalent with a minimum of 14 GB of local SSD.</span></span> 
- <span data-ttu-id="d3356-195">Partial core VM SKUs like Standard A0 are not supported for production workloads.</span><span class="sxs-lookup"><span data-stu-id="d3356-195">Partial core VM SKUs like Standard A0 are not supported for production workloads.</span></span>
- <span data-ttu-id="d3356-196">Standard A1 SKU is specifically not supported for production workloads for performance reasons.</span><span class="sxs-lookup"><span data-stu-id="d3356-196">Standard A1 SKU is specifically not supported for production workloads for performance reasons.</span></span>


## <a name="non-primary-node-type---capacity-guidance-for-stateful-workloads"></a><span data-ttu-id="d3356-197">Non-Primary node type - Capacity Guidance for stateful workloads</span><span class="sxs-lookup"><span data-stu-id="d3356-197">Non-Primary node type - Capacity Guidance for stateful workloads</span></span>

<span data-ttu-id="d3356-198">Read the following for Workloads using Service fabric reliable collections or reliable Actors.</span><span class="sxs-lookup"><span data-stu-id="d3356-198">Read the following for Workloads using Service fabric reliable collections or reliable Actors.</span></span> <span data-ttu-id="d3356-199">Read more here [programming models here.](service-fabric-choose-framework.md)</span><span class="sxs-lookup"><span data-stu-id="d3356-199">Read more here [programming models here.](service-fabric-choose-framework.md)</span></span>

1. <span data-ttu-id="d3356-200">**Number of VM instances:** For production workloads that are stateful, it is recommended that you run them with a minimum and target replica count of 5.</span><span class="sxs-lookup"><span data-stu-id="d3356-200">**Number of VM instances:** For production workloads that are stateful, it is recommended that you run them with a minimum and target replica count of 5.</span></span> <span data-ttu-id="d3356-201">This will mean that in steady state you will end up with a replica (from a replica set) in each fault domain and upgrade domain.</span><span class="sxs-lookup"><span data-stu-id="d3356-201">This will mean that in steady state you will end up with a replica (from a replica set) in each fault domain and upgrade domain.</span></span> <span data-ttu-id="d3356-202">The whole reliability tier concept for system services is actually just a way to specify this setting for system services.</span><span class="sxs-lookup"><span data-stu-id="d3356-202">The whole reliability tier concept for system services is actually just a way to specify this setting for system services.</span></span>

<span data-ttu-id="d3356-203">So for production workloads, the minimum recommended non-Primary Node type size is 5, if you are running stateful workloads in it.</span><span class="sxs-lookup"><span data-stu-id="d3356-203">So for production workloads, the minimum recommended non-Primary Node type size is 5, if you are running stateful workloads in it.</span></span>

2. <span data-ttu-id="d3356-204">**VM SKU:** This is the node type where your application services are running, so the VM SKU you choose for it, must take into account the peak load you plan to place into each Node.</span><span class="sxs-lookup"><span data-stu-id="d3356-204">**VM SKU:** This is the node type where your application services are running, so the VM SKU you choose for it, must take into account the peak load you plan to place into each Node.</span></span> <span data-ttu-id="d3356-205">The capacity needs of the nodetype, is absolutely determined by workload you plan to run in the cluster, So we cannot provide you with a qualitative guidance for your specific workload, however here is the broad guidance to help you get started</span><span class="sxs-lookup"><span data-stu-id="d3356-205">The capacity needs of the nodetype, is absolutely determined by workload you plan to run in the cluster, So we cannot provide you with a qualitative guidance for your specific workload, however here is the broad guidance to help you get started</span></span>

<span data-ttu-id="d3356-206">For production workloads</span><span class="sxs-lookup"><span data-stu-id="d3356-206">For production workloads</span></span> 

- <span data-ttu-id="d3356-207">The recommended VM SKU is Standard D3 or Standard D3_V2 or equivalent with a minimum of 14 GB of local SSD.</span><span class="sxs-lookup"><span data-stu-id="d3356-207">The recommended VM SKU is Standard D3 or Standard D3_V2 or equivalent with a minimum of 14 GB of local SSD.</span></span>
- <span data-ttu-id="d3356-208">The minimum supported use VM SKU is Standard D1 or Standard D1_V2 or equivalent with a minimum of 14 GB of local SSD.</span><span class="sxs-lookup"><span data-stu-id="d3356-208">The minimum supported use VM SKU is Standard D1 or Standard D1_V2 or equivalent with a minimum of 14 GB of local SSD.</span></span> 
- <span data-ttu-id="d3356-209">Partial core VM SKUs like Standard A0 are not supported for production workloads.</span><span class="sxs-lookup"><span data-stu-id="d3356-209">Partial core VM SKUs like Standard A0 are not supported for production workloads.</span></span>
- <span data-ttu-id="d3356-210">Standard A1 SKU is specifically not supported for production workloads for performance reasons.</span><span class="sxs-lookup"><span data-stu-id="d3356-210">Standard A1 SKU is specifically not supported for production workloads for performance reasons.</span></span>


## <a name="non-primary-node-type---capacity-guidance-for-stateless-workloads"></a><span data-ttu-id="d3356-211">Non-Primary node type - Capacity Guidance for stateless workloads</span><span class="sxs-lookup"><span data-stu-id="d3356-211">Non-Primary node type - Capacity Guidance for stateless workloads</span></span>

<span data-ttu-id="d3356-212">Read the following for stateless Workloads</span><span class="sxs-lookup"><span data-stu-id="d3356-212">Read the following for stateless Workloads</span></span>

<span data-ttu-id="d3356-213">**Number of VM instances:** For production workloads that are stateless,the minimum supported non-Primary Node type size is 2.</span><span class="sxs-lookup"><span data-stu-id="d3356-213">**Number of VM instances:** For production workloads that are stateless,the minimum supported non-Primary Node type size is 2.</span></span> <span data-ttu-id="d3356-214">This allows you to run you two stateless instances of your application and allowing your service to survive the loss of a VM instance.</span><span class="sxs-lookup"><span data-stu-id="d3356-214">This allows you to run you two stateless instances of your application and allowing your service to survive the loss of a VM instance.</span></span> 

> [!NOTE]
> <span data-ttu-id="d3356-215">If your cluster is running on a service fabric version less than 5.6, due to a defect in the runtime (which is planned to be fixed in 5.6), scaling down a non-primary node type to less than 5, will result in cluster health turning unhealthy, till you call [Remove-ServiceFabricNodeState cmd](https://docs.microsoft.com/powershell/servicefabric/vlatest/Remove-ServiceFabricNodeState) with the appropriate node name.</span><span class="sxs-lookup"><span data-stu-id="d3356-215">If your cluster is running on a service fabric version less than 5.6, due to a defect in the runtime (which is planned to be fixed in 5.6), scaling down a non-primary node type to less than 5, will result in cluster health turning unhealthy, till you call [Remove-ServiceFabricNodeState cmd](https://docs.microsoft.com/powershell/servicefabric/vlatest/Remove-ServiceFabricNodeState) with the appropriate node name.</span></span> <span data-ttu-id="d3356-216">Read [perform Service Fabric cluster in or out](service-fabric-cluster-scale-up-down.md) for more details</span><span class="sxs-lookup"><span data-stu-id="d3356-216">Read [perform Service Fabric cluster in or out](service-fabric-cluster-scale-up-down.md) for more details</span></span>
> 
>

<span data-ttu-id="d3356-217">**VM SKU:** This is the node type where your application services are running, so the VM SKU you choose for it, must take into account the peak load you plan to place into each Node.</span><span class="sxs-lookup"><span data-stu-id="d3356-217">**VM SKU:** This is the node type where your application services are running, so the VM SKU you choose for it, must take into account the peak load you plan to place into each Node.</span></span> <span data-ttu-id="d3356-218">The capacity needs of the nodetype, is absolutely determined by workload you plan to run in the cluster, So we cannot provide you with a qualitative guidance for your specific workload, however here is the broad guidance to help you get started</span><span class="sxs-lookup"><span data-stu-id="d3356-218">The capacity needs of the nodetype, is absolutely determined by workload you plan to run in the cluster, So we cannot provide you with a qualitative guidance for your specific workload, however here is the broad guidance to help you get started</span></span>

<span data-ttu-id="d3356-219">For production workloads</span><span class="sxs-lookup"><span data-stu-id="d3356-219">For production workloads</span></span> 


- <span data-ttu-id="d3356-220">The recommended VM SKU is Standard D3 or Standard D3_V2 or equivalent.</span><span class="sxs-lookup"><span data-stu-id="d3356-220">The recommended VM SKU is Standard D3 or Standard D3_V2 or equivalent.</span></span> 
- <span data-ttu-id="d3356-221">The minimum supported use VM SKU is Standard D1 or Standard D1_V2 or equivalent.</span><span class="sxs-lookup"><span data-stu-id="d3356-221">The minimum supported use VM SKU is Standard D1 or Standard D1_V2 or equivalent.</span></span> 
- <span data-ttu-id="d3356-222">Partial core VM SKUs like Standard A0 are not supported for production workloads.</span><span class="sxs-lookup"><span data-stu-id="d3356-222">Partial core VM SKUs like Standard A0 are not supported for production workloads.</span></span>
- <span data-ttu-id="d3356-223">Standard A1 SKU is specifically not supported for production workloads for performance reasons.</span><span class="sxs-lookup"><span data-stu-id="d3356-223">Standard A1 SKU is specifically not supported for production workloads for performance reasons.</span></span>

<!--Every topic should have next steps and links to the next logical set of content to keep the customer engaged-->

## <a name="next-steps"></a><span data-ttu-id="d3356-224">Next steps</span><span class="sxs-lookup"><span data-stu-id="d3356-224">Next steps</span></span>
<span data-ttu-id="d3356-225">Once you finish your capacity planning and set up a cluster, please read the following:</span><span class="sxs-lookup"><span data-stu-id="d3356-225">Once you finish your capacity planning and set up a cluster, please read the following:</span></span>

* [<span data-ttu-id="d3356-226">Service Fabric cluster security</span><span class="sxs-lookup"><span data-stu-id="d3356-226">Service Fabric cluster security</span></span>](service-fabric-cluster-security.md)
* [<span data-ttu-id="d3356-227">Service Fabric health model introduction</span><span class="sxs-lookup"><span data-stu-id="d3356-227">Service Fabric health model introduction</span></span>](service-fabric-health-introduction.md)
* [<span data-ttu-id="d3356-228">Relationship of Nodetypes to VMSS</span><span class="sxs-lookup"><span data-stu-id="d3356-228">Relationship of Nodetypes to VMSS</span></span>](service-fabric-cluster-nodetypes.md)

<!--Image references-->
[SystemServices]: https://docstestmedia1.blob.core.windows.net/azure-media/articles/service-fabric/media/service-fabric-cluster-capacity/SystemServices.png

