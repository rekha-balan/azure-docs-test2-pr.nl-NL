---
title: Service Fabric App upgrade using PowerShell| Microsoft Docs
description: This article walks through the experience of deploying a Service Fabric application, changing the code, and rolling out an upgrade using PowerShell.
services: service-fabric
documentationcenter: .net
author: mani-ramaswamy
manager: timlt
editor: ''
ms.assetid: 9bc75748-96b0-49ca-8d8a-41fe08398f25
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 03/02/2017
ms.author: subramar
ms.openlocfilehash: a26efb12fbe370a07ae48b31879afe2627cc52aa
ms.sourcegitcommit: 5b9d839c0c0a94b293fdafe1d6e5429506c07e05
ms.translationtype: HT
ms.contentlocale: nl-NL
ms.lasthandoff: 08/02/2018
ms.locfileid: "44553353"
---
# <a name="service-fabric-application-upgrade-using-powershell"></a><span data-ttu-id="88d0f-103">Service Fabric application upgrade using PowerShell</span><span class="sxs-lookup"><span data-stu-id="88d0f-103">Service Fabric application upgrade using PowerShell</span></span>
> [!div class="op_single_selector"]
> * [PowerShell](service-fabric-application-upgrade-tutorial-powershell.md)
> * [Visual Studio](service-fabric-application-upgrade-tutorial.md)
> 
> 

<br/>

<span data-ttu-id="88d0f-106">The most frequently used and recommended upgrade approach is the monitored rolling upgrade.</span><span class="sxs-lookup"><span data-stu-id="88d0f-106">The most frequently used and recommended upgrade approach is the monitored rolling upgrade.</span></span>  <span data-ttu-id="88d0f-107">Azure Service Fabric monitors the health of the application being upgraded based on a set of health policies.</span><span class="sxs-lookup"><span data-stu-id="88d0f-107">Azure Service Fabric monitors the health of the application being upgraded based on a set of health policies.</span></span> <span data-ttu-id="88d0f-108">Once an update domain (UD) is upgraded, Service Fabric evaluates the application health and either proceeds to the next update domain or fails the upgrade depending on the health policies.</span><span class="sxs-lookup"><span data-stu-id="88d0f-108">Once an update domain (UD) is upgraded, Service Fabric evaluates the application health and either proceeds to the next update domain or fails the upgrade depending on the health policies.</span></span>

<span data-ttu-id="88d0f-109">A monitored application upgrade can be performed using the managed or native APIs, PowerShell, or REST.</span><span class="sxs-lookup"><span data-stu-id="88d0f-109">A monitored application upgrade can be performed using the managed or native APIs, PowerShell, or REST.</span></span> <span data-ttu-id="88d0f-110">For instructions on performing an upgrade using Visual Studio, see [Upgrading your application using Visual Studio](service-fabric-application-upgrade-tutorial.md).</span><span class="sxs-lookup"><span data-stu-id="88d0f-110">For instructions on performing an upgrade using Visual Studio, see [Upgrading your application using Visual Studio](service-fabric-application-upgrade-tutorial.md).</span></span>

<span data-ttu-id="88d0f-111">With Service Fabric monitored rolling upgrades, the application administrator can configure the health evaluation policy that Service Fabric uses to determine if the application is healthy.</span><span class="sxs-lookup"><span data-stu-id="88d0f-111">With Service Fabric monitored rolling upgrades, the application administrator can configure the health evaluation policy that Service Fabric uses to determine if the application is healthy.</span></span> <span data-ttu-id="88d0f-112">In addition, the administrator can configure the action to be taken when the health evaluation fails (for example, doing an automatic rollback.) This section walks through a monitored upgrade for one of the SDK samples that uses PowerShell.</span><span class="sxs-lookup"><span data-stu-id="88d0f-112">In addition, the administrator can configure the action to be taken when the health evaluation fails (for example, doing an automatic rollback.) This section walks through a monitored upgrade for one of the SDK samples that uses PowerShell.</span></span> <span data-ttu-id="88d0f-113">The following Microsoft Virtual Academy video also walks you through an app upgrade: <center><a target="_blank" href="https://mva.microsoft.com/en-US/training-courses/building-microservices-applications-on-azure-service-fabric-16747?l=OrHJH66yC_6406218965"></span><span class="sxs-lookup"><span data-stu-id="88d0f-113">The following Microsoft Virtual Academy video also walks you through an app upgrade: <center><a target="_blank" href="https://mva.microsoft.com/en-US/training-courses/building-microservices-applications-on-azure-service-fabric-16747?l=OrHJH66yC_6406218965"></span></span>
<img src="https://docstestmedia1.blob.core.windows.net/azure-media/articles/service-fabric/media/service-fabric-application-upgrade-tutorial-powershell/AppLifecycleVid.png" WIDTH="360" HEIGHT="244">
</a></center>

## <a name="step-1-build-and-deploy-the-visual-objects-sample"></a><span data-ttu-id="88d0f-114">Step 1: Build and deploy the Visual Objects sample</span><span class="sxs-lookup"><span data-stu-id="88d0f-114">Step 1: Build and deploy the Visual Objects sample</span></span>
<span data-ttu-id="88d0f-115">Build and publish the application by right-clicking on the application project, **VisualObjectsApplication,** and selecting the **Publish** command.</span><span class="sxs-lookup"><span data-stu-id="88d0f-115">Build and publish the application by right-clicking on the application project, **VisualObjectsApplication,** and selecting the **Publish** command.</span></span>  <span data-ttu-id="88d0f-116">For more information, see [Service Fabric application upgrade tutorial](service-fabric-application-upgrade-tutorial.md).</span><span class="sxs-lookup"><span data-stu-id="88d0f-116">For more information, see [Service Fabric application upgrade tutorial](service-fabric-application-upgrade-tutorial.md).</span></span>  <span data-ttu-id="88d0f-117">Alternatively, you can use PowerShell to deploy your application.</span><span class="sxs-lookup"><span data-stu-id="88d0f-117">Alternatively, you can use PowerShell to deploy your application.</span></span>

> [!NOTE]
> Before any of the Service Fabric commands may be used in PowerShell, you first need to connect to the cluster by using the `Connect-ServiceFabricCluster` cmdlet. Similarly, it is assumed that the Cluster has already been set up on your local machine. See the article on [setting up your Service Fabric development environment](service-fabric-get-started.md).
> 
> 

<span data-ttu-id="88d0f-121">After building the project in Visual Studio, you can use the PowerShell command [Copy-ServiceFabricApplicationPackage](/powershell/servicefabric/vlatest/copy-servicefabricapplicationpackage) to copy the application package to the ImageStore.</span><span class="sxs-lookup"><span data-stu-id="88d0f-121">After building the project in Visual Studio, you can use the PowerShell command [Copy-ServiceFabricApplicationPackage](/powershell/servicefabric/vlatest/copy-servicefabricapplicationpackage) to copy the application package to the ImageStore.</span></span> <span data-ttu-id="88d0f-122">If you want to verify the app package locally, use the [Test-ServiceFabricApplicationPackage](/powershell/servicefabric/vlatest/test-servicefabricapplicationpackage) cmdlet.</span><span class="sxs-lookup"><span data-stu-id="88d0f-122">If you want to verify the app package locally, use the [Test-ServiceFabricApplicationPackage](/powershell/servicefabric/vlatest/test-servicefabricapplicationpackage) cmdlet.</span></span> <span data-ttu-id="88d0f-123">The next step is to register the application to the Service Fabric runtime using the [Register-ServiceFabricApplicationPackage](/powershell/servicefabric/vlatest/register-servicefabricapplicationtype) cmdlet.</span><span class="sxs-lookup"><span data-stu-id="88d0f-123">The next step is to register the application to the Service Fabric runtime using the [Register-ServiceFabricApplicationPackage](/powershell/servicefabric/vlatest/register-servicefabricapplicationtype) cmdlet.</span></span> <span data-ttu-id="88d0f-124">The final step is to start an instance of the application by using the [New-ServiceFabricApplication](/powershell/servicefabric/vlatest/new-servicefabricapplication) cmdlet.</span><span class="sxs-lookup"><span data-stu-id="88d0f-124">The final step is to start an instance of the application by using the [New-ServiceFabricApplication](/powershell/servicefabric/vlatest/new-servicefabricapplication) cmdlet.</span></span>  <span data-ttu-id="88d0f-125">These three steps are analogous to using the **Deploy** menu item in Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="88d0f-125">These three steps are analogous to using the **Deploy** menu item in Visual Studio.</span></span>

<span data-ttu-id="88d0f-126">Now, you can use [Service Fabric Explorer to view the cluster and the application](service-fabric-visualizing-your-cluster.md).</span><span class="sxs-lookup"><span data-stu-id="88d0f-126">Now, you can use [Service Fabric Explorer to view the cluster and the application](service-fabric-visualizing-your-cluster.md).</span></span> <span data-ttu-id="88d0f-127">The application has a web service that can be navigated to in Internet Explorer by typing [http://localhost:8081/visualobjects](http://localhost:8081/visualobjects) in the address bar.</span><span class="sxs-lookup"><span data-stu-id="88d0f-127">The application has a web service that can be navigated to in Internet Explorer by typing [http://localhost:8081/visualobjects](http://localhost:8081/visualobjects) in the address bar.</span></span>  <span data-ttu-id="88d0f-128">You should see some floating visual objects moving around in the screen.</span><span class="sxs-lookup"><span data-stu-id="88d0f-128">You should see some floating visual objects moving around in the screen.</span></span>  <span data-ttu-id="88d0f-129">Additionally, you can use [Get-ServiceFabricApplication](/powershell/servicefabric/vlatest/get-servicefabricapplication) to check the application status.</span><span class="sxs-lookup"><span data-stu-id="88d0f-129">Additionally, you can use [Get-ServiceFabricApplication](/powershell/servicefabric/vlatest/get-servicefabricapplication) to check the application status.</span></span>

## <a name="step-2-update-the-visual-objects-sample"></a><span data-ttu-id="88d0f-130">Step 2: Update the Visual Objects sample</span><span class="sxs-lookup"><span data-stu-id="88d0f-130">Step 2: Update the Visual Objects sample</span></span>
<span data-ttu-id="88d0f-131">You might notice that with the version that was deployed in Step 1, the visual objects do not rotate.</span><span class="sxs-lookup"><span data-stu-id="88d0f-131">You might notice that with the version that was deployed in Step 1, the visual objects do not rotate.</span></span> <span data-ttu-id="88d0f-132">Let's upgrade this application to one where the visual objects also rotate.</span><span class="sxs-lookup"><span data-stu-id="88d0f-132">Let's upgrade this application to one where the visual objects also rotate.</span></span>

<span data-ttu-id="88d0f-133">Select the VisualObjects.ActorService project within the VisualObjects solution, and open the StatefulVisualObjectActor.cs file.</span><span class="sxs-lookup"><span data-stu-id="88d0f-133">Select the VisualObjects.ActorService project within the VisualObjects solution, and open the StatefulVisualObjectActor.cs file.</span></span> <span data-ttu-id="88d0f-134">Within that file, navigate to the method `MoveObject`, comment out `this.State.Move()`, and uncomment `this.State.Move(true)`.</span><span class="sxs-lookup"><span data-stu-id="88d0f-134">Within that file, navigate to the method `MoveObject`, comment out `this.State.Move()`, and uncomment `this.State.Move(true)`.</span></span> <span data-ttu-id="88d0f-135">This change rotates the objects after the service is upgraded.</span><span class="sxs-lookup"><span data-stu-id="88d0f-135">This change rotates the objects after the service is upgraded.</span></span>

<span data-ttu-id="88d0f-136">We also need to update the *ServiceManifest.xml* file (under PackageRoot) of the project **VisualObjects.ActorService**.</span><span class="sxs-lookup"><span data-stu-id="88d0f-136">We also need to update the *ServiceManifest.xml* file (under PackageRoot) of the project **VisualObjects.ActorService**.</span></span> <span data-ttu-id="88d0f-137">Update the *CodePackage* and the service version to 2.0, and the corresponding lines in the *ServiceManifest.xml* file.</span><span class="sxs-lookup"><span data-stu-id="88d0f-137">Update the *CodePackage* and the service version to 2.0, and the corresponding lines in the *ServiceManifest.xml* file.</span></span>
<span data-ttu-id="88d0f-138">You can use the Visual Studio *Edit Manifest Files* option after you right-click on the solution to make the manifest file changes.</span><span class="sxs-lookup"><span data-stu-id="88d0f-138">You can use the Visual Studio *Edit Manifest Files* option after you right-click on the solution to make the manifest file changes.</span></span>

<span data-ttu-id="88d0f-139">After the changes are made, the manifest should look like the following (highlighted portions show the changes):</span><span class="sxs-lookup"><span data-stu-id="88d0f-139">After the changes are made, the manifest should look like the following (highlighted portions show the changes):</span></span>

```xml
<ServiceManifestName="VisualObjects.ActorService" Version="2.0" xmlns="http://schemas.microsoft.com/2011/01/fabric" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

<CodePackageName="Code" Version="2.0">
```

<span data-ttu-id="88d0f-140">Now the *ApplicationManifest.xml* file (found under the **VisualObjects** project under the **VisualObjects** solution) is updated to version 2.0 of the **VisualObjects.ActorService** project.</span><span class="sxs-lookup"><span data-stu-id="88d0f-140">Now the *ApplicationManifest.xml* file (found under the **VisualObjects** project under the **VisualObjects** solution) is updated to version 2.0 of the **VisualObjects.ActorService** project.</span></span> <span data-ttu-id="88d0f-141">In addition, the Application version is updated to 2.0.0.0 from 1.0.0.0.</span><span class="sxs-lookup"><span data-stu-id="88d0f-141">In addition, the Application version is updated to 2.0.0.0 from 1.0.0.0.</span></span> <span data-ttu-id="88d0f-142">The *ApplicationManifest.xml* should look like the following snippet:</span><span class="sxs-lookup"><span data-stu-id="88d0f-142">The *ApplicationManifest.xml* should look like the following snippet:</span></span>

```xml
<ApplicationManifestxmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" ApplicationTypeName="VisualObjects" ApplicationTypeVersion="2.0.0.0" xmlns="http://schemas.microsoft.com/2011/01/fabric">

 <ServiceManifestRefServiceManifestName="VisualObjects.ActorService" ServiceManifestVersion="2.0" />
```


<span data-ttu-id="88d0f-143">Now, build the project by selecting just the **ActorService** project, and then right-clicking and selecting the **Build** option in Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="88d0f-143">Now, build the project by selecting just the **ActorService** project, and then right-clicking and selecting the **Build** option in Visual Studio.</span></span> <span data-ttu-id="88d0f-144">If you select **Rebuild all**, you should update the versions for all projects, since the code would have changed.</span><span class="sxs-lookup"><span data-stu-id="88d0f-144">If you select **Rebuild all**, you should update the versions for all projects, since the code would have changed.</span></span> <span data-ttu-id="88d0f-145">Next, let's package the updated application by right-clicking on ***VisualObjectsApplication***, selecting the Service Fabric Menu, and choosing **Package**.</span><span class="sxs-lookup"><span data-stu-id="88d0f-145">Next, let's package the updated application by right-clicking on ***VisualObjectsApplication***, selecting the Service Fabric Menu, and choosing **Package**.</span></span> <span data-ttu-id="88d0f-146">This action creates an application package that can be deployed.</span><span class="sxs-lookup"><span data-stu-id="88d0f-146">This action creates an application package that can be deployed.</span></span>  <span data-ttu-id="88d0f-147">Your updated application is ready to be deployed.</span><span class="sxs-lookup"><span data-stu-id="88d0f-147">Your updated application is ready to be deployed.</span></span>

## <a name="step-3--decide-on-health-policies-and-upgrade-parameters"></a><span data-ttu-id="88d0f-148">Step 3:  Decide on health policies and upgrade parameters</span><span class="sxs-lookup"><span data-stu-id="88d0f-148">Step 3:  Decide on health policies and upgrade parameters</span></span>
<span data-ttu-id="88d0f-149">Familiarize yourself with the [application upgrade parameters](service-fabric-application-upgrade-parameters.md) and the [upgrade process](service-fabric-application-upgrade.md) to get a good understanding of the various upgrade parameters, time-outs, and health criterion applied.</span><span class="sxs-lookup"><span data-stu-id="88d0f-149">Familiarize yourself with the [application upgrade parameters](service-fabric-application-upgrade-parameters.md) and the [upgrade process](service-fabric-application-upgrade.md) to get a good understanding of the various upgrade parameters, time-outs, and health criterion applied.</span></span> <span data-ttu-id="88d0f-150">For this walkthrough, the service health evaluation criterion is set to the default (and recommended) values, which means that all services and instances should be *healthy* after the upgrade.</span><span class="sxs-lookup"><span data-stu-id="88d0f-150">For this walkthrough, the service health evaluation criterion is set to the default (and recommended) values, which means that all services and instances should be *healthy* after the upgrade.</span></span>  

<span data-ttu-id="88d0f-151">However, let's increase the *HealthCheckStableDuration* to 60 seconds (so that the services are healthy for at least 20 seconds before the upgrade proceeds to the next update domain).</span><span class="sxs-lookup"><span data-stu-id="88d0f-151">However, let's increase the *HealthCheckStableDuration* to 60 seconds (so that the services are healthy for at least 20 seconds before the upgrade proceeds to the next update domain).</span></span>  <span data-ttu-id="88d0f-152">Let's also set the *UpgradeDomainTimeout* to be 1200 seconds and the *UpgradeTimeout* to be 3000 seconds.</span><span class="sxs-lookup"><span data-stu-id="88d0f-152">Let's also set the *UpgradeDomainTimeout* to be 1200 seconds and the *UpgradeTimeout* to be 3000 seconds.</span></span>

<span data-ttu-id="88d0f-153">Finally, let's also set the *UpgradeFailureAction* to rollback.</span><span class="sxs-lookup"><span data-stu-id="88d0f-153">Finally, let's also set the *UpgradeFailureAction* to rollback.</span></span> <span data-ttu-id="88d0f-154">This option requires Service Fabric to roll back the application to the previous version if it encounters any issues during the upgrade.</span><span class="sxs-lookup"><span data-stu-id="88d0f-154">This option requires Service Fabric to roll back the application to the previous version if it encounters any issues during the upgrade.</span></span> <span data-ttu-id="88d0f-155">Thus, when starting the upgrade (in Step 4), the following parameters are specified:</span><span class="sxs-lookup"><span data-stu-id="88d0f-155">Thus, when starting the upgrade (in Step 4), the following parameters are specified:</span></span>

<span data-ttu-id="88d0f-156">FailureAction = Rollback</span><span class="sxs-lookup"><span data-stu-id="88d0f-156">FailureAction = Rollback</span></span>

<span data-ttu-id="88d0f-157">HealthCheckStableDurationSec = 60</span><span class="sxs-lookup"><span data-stu-id="88d0f-157">HealthCheckStableDurationSec = 60</span></span>

<span data-ttu-id="88d0f-158">UpgradeDomainTimeoutSec = 1200</span><span class="sxs-lookup"><span data-stu-id="88d0f-158">UpgradeDomainTimeoutSec = 1200</span></span>

<span data-ttu-id="88d0f-159">UpgradeTimeout = 3000</span><span class="sxs-lookup"><span data-stu-id="88d0f-159">UpgradeTimeout = 3000</span></span>

## <a name="step-4-prepare-application-for-upgrade"></a><span data-ttu-id="88d0f-160">Step 4: Prepare application for upgrade</span><span class="sxs-lookup"><span data-stu-id="88d0f-160">Step 4: Prepare application for upgrade</span></span>
<span data-ttu-id="88d0f-161">Now the application is built and ready to be upgraded.</span><span class="sxs-lookup"><span data-stu-id="88d0f-161">Now the application is built and ready to be upgraded.</span></span> <span data-ttu-id="88d0f-162">If you open up a PowerShell window as an administrator and type [Get-ServiceFabricApplication](/powershell/servicefabric/vlatest/get-servicefabricapplication), it should let you know that it is application type 1.0.0.0 of **VisualObjects** that's been deployed.</span><span class="sxs-lookup"><span data-stu-id="88d0f-162">If you open up a PowerShell window as an administrator and type [Get-ServiceFabricApplication](/powershell/servicefabric/vlatest/get-servicefabricapplication), it should let you know that it is application type 1.0.0.0 of **VisualObjects** that's been deployed.</span></span>  

<span data-ttu-id="88d0f-163">The application package is stored under the following relative path where you uncompressed the Service Fabric SDK - *Samples\Services\Stateful\VisualObjects\VisualObjects\obj\x64\Debug*.</span><span class="sxs-lookup"><span data-stu-id="88d0f-163">The application package is stored under the following relative path where you uncompressed the Service Fabric SDK - *Samples\Services\Stateful\VisualObjects\VisualObjects\obj\x64\Debug*.</span></span> <span data-ttu-id="88d0f-164">You should find a "Package" folder in that directory, where the application package is stored.</span><span class="sxs-lookup"><span data-stu-id="88d0f-164">You should find a "Package" folder in that directory, where the application package is stored.</span></span> <span data-ttu-id="88d0f-165">Check the timestamps to ensure that it is the latest build (you may need to modify the paths appropriately as well).</span><span class="sxs-lookup"><span data-stu-id="88d0f-165">Check the timestamps to ensure that it is the latest build (you may need to modify the paths appropriately as well).</span></span>

<span data-ttu-id="88d0f-166">Now let's copy the updated application package to the Service Fabric ImageStore (where the application packages are stored by Service Fabric).</span><span class="sxs-lookup"><span data-stu-id="88d0f-166">Now let's copy the updated application package to the Service Fabric ImageStore (where the application packages are stored by Service Fabric).</span></span> <span data-ttu-id="88d0f-167">The parameter *ApplicationPackagePathInImageStore* informs Service Fabric where it can find the application package.</span><span class="sxs-lookup"><span data-stu-id="88d0f-167">The parameter *ApplicationPackagePathInImageStore* informs Service Fabric where it can find the application package.</span></span> <span data-ttu-id="88d0f-168">We have put the updated application in "VisualObjects\_V2" with the following command (you may need to modify paths again appropriately).</span><span class="sxs-lookup"><span data-stu-id="88d0f-168">We have put the updated application in "VisualObjects\_V2" with the following command (you may need to modify paths again appropriately).</span></span>

```powershell
Copy-ServiceFabricApplicationPackage  -ApplicationPackagePath .\Samples\Services\Stateful\VisualObjects\VisualObjects\obj\x64\Debug\Package
-ImageStoreConnectionString fabric:ImageStore   -ApplicationPackagePathInImageStore "VisualObjects\_V2"
```

<span data-ttu-id="88d0f-169">The next step is to register this application with Service Fabric, which can be performed using the [Register-ServiceFabricApplicationType](/powershell/servicefabric/vlatest/register-servicefabricapplicationtype) command:</span><span class="sxs-lookup"><span data-stu-id="88d0f-169">The next step is to register this application with Service Fabric, which can be performed using the [Register-ServiceFabricApplicationType](/powershell/servicefabric/vlatest/register-servicefabricapplicationtype) command:</span></span>

```powershell
Register-ServiceFabricApplicationType -ApplicationPathInImageStore "VisualObjects\_V2"
```

<span data-ttu-id="88d0f-170">If the preceding command doesn't succeed, it is likely that you need a rebuild of all services.</span><span class="sxs-lookup"><span data-stu-id="88d0f-170">If the preceding command doesn't succeed, it is likely that you need a rebuild of all services.</span></span> <span data-ttu-id="88d0f-171">As mentioned in Step 2, you may have to update your WebService version as well.</span><span class="sxs-lookup"><span data-stu-id="88d0f-171">As mentioned in Step 2, you may have to update your WebService version as well.</span></span>

## <a name="step-5-start-the-application-upgrade"></a><span data-ttu-id="88d0f-172">Step 5: Start the application upgrade</span><span class="sxs-lookup"><span data-stu-id="88d0f-172">Step 5: Start the application upgrade</span></span>
<span data-ttu-id="88d0f-173">Now, we're all set to start the application upgrade by using the [Start-ServiceFabricApplicationUpgrade](/powershell/servicefabric/vlatest/start-servicefabricapplicationupgrade) command:</span><span class="sxs-lookup"><span data-stu-id="88d0f-173">Now, we're all set to start the application upgrade by using the [Start-ServiceFabricApplicationUpgrade](/powershell/servicefabric/vlatest/start-servicefabricapplicationupgrade) command:</span></span>

```powershell
Start-ServiceFabricApplicationUpgrade -ApplicationName fabric:/VisualObjects -ApplicationTypeVersion 2.0.0.0 -HealthCheckStableDurationSec 60 -UpgradeDomainTimeoutSec 1200 -UpgradeTimeout 3000   -FailureAction Rollback -Monitored
```


<span data-ttu-id="88d0f-174">The application name is the same as it was described in the *ApplicationManifest.xml* file.</span><span class="sxs-lookup"><span data-stu-id="88d0f-174">The application name is the same as it was described in the *ApplicationManifest.xml* file.</span></span> <span data-ttu-id="88d0f-175">Service Fabric uses this name to identify which application is getting upgraded.</span><span class="sxs-lookup"><span data-stu-id="88d0f-175">Service Fabric uses this name to identify which application is getting upgraded.</span></span> <span data-ttu-id="88d0f-176">If you set the time-outs to be too short, you may encounter a failure message that states the problem.</span><span class="sxs-lookup"><span data-stu-id="88d0f-176">If you set the time-outs to be too short, you may encounter a failure message that states the problem.</span></span> <span data-ttu-id="88d0f-177">Refer to the troubleshooting section, or increase the time-outs.</span><span class="sxs-lookup"><span data-stu-id="88d0f-177">Refer to the troubleshooting section, or increase the time-outs.</span></span>

<span data-ttu-id="88d0f-178">Now, as the application upgrade proceeds, you can monitor it using Service Fabric Explorer, or by using the [Get-ServiceFabricApplicationUpgrade](/powershell/servicefabric/vlatest/get-servicefabricapplicationupgrade) PowerShell command:</span><span class="sxs-lookup"><span data-stu-id="88d0f-178">Now, as the application upgrade proceeds, you can monitor it using Service Fabric Explorer, or by using the [Get-ServiceFabricApplicationUpgrade](/powershell/servicefabric/vlatest/get-servicefabricapplicationupgrade) PowerShell command:</span></span> 

```powershell
Get-ServiceFabricApplicationUpgrade fabric:/VisualObjects
```

<span data-ttu-id="88d0f-179">In a few minutes, the status that you got by using the preceding PowerShell command, should state that all update domains were upgraded (completed).</span><span class="sxs-lookup"><span data-stu-id="88d0f-179">In a few minutes, the status that you got by using the preceding PowerShell command, should state that all update domains were upgraded (completed).</span></span> <span data-ttu-id="88d0f-180">And you should find that the visual objects in your browser window have started rotating!</span><span class="sxs-lookup"><span data-stu-id="88d0f-180">And you should find that the visual objects in your browser window have started rotating!</span></span>

<span data-ttu-id="88d0f-181">You can try upgrading from version 2 to version 3, or from version 2 to version 1 as an exercise.</span><span class="sxs-lookup"><span data-stu-id="88d0f-181">You can try upgrading from version 2 to version 3, or from version 2 to version 1 as an exercise.</span></span> <span data-ttu-id="88d0f-182">Moving from version 2 to version 1 is also considered an upgrade.</span><span class="sxs-lookup"><span data-stu-id="88d0f-182">Moving from version 2 to version 1 is also considered an upgrade.</span></span> <span data-ttu-id="88d0f-183">Play with time-outs and health policies to make yourself familiar with them.</span><span class="sxs-lookup"><span data-stu-id="88d0f-183">Play with time-outs and health policies to make yourself familiar with them.</span></span> <span data-ttu-id="88d0f-184">When you are deploying to an Azure cluster, the parameters need to be set appropriately.</span><span class="sxs-lookup"><span data-stu-id="88d0f-184">When you are deploying to an Azure cluster, the parameters need to be set appropriately.</span></span> <span data-ttu-id="88d0f-185">It is good to set the time-outs conservatively.</span><span class="sxs-lookup"><span data-stu-id="88d0f-185">It is good to set the time-outs conservatively.</span></span>

## <a name="next-steps"></a><span data-ttu-id="88d0f-186">Next steps</span><span class="sxs-lookup"><span data-stu-id="88d0f-186">Next steps</span></span>
<span data-ttu-id="88d0f-187">[Upgrading your application using Visual Studio](service-fabric-application-upgrade-tutorial.md) walks you through an application upgrade using Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="88d0f-187">[Upgrading your application using Visual Studio](service-fabric-application-upgrade-tutorial.md) walks you through an application upgrade using Visual Studio.</span></span>

<span data-ttu-id="88d0f-188">Control how your application upgrades by using [upgrade parameters](service-fabric-application-upgrade-parameters.md).</span><span class="sxs-lookup"><span data-stu-id="88d0f-188">Control how your application upgrades by using [upgrade parameters](service-fabric-application-upgrade-parameters.md).</span></span>

<span data-ttu-id="88d0f-189">Make your application upgrades compatible by learning how to use [data serialization](service-fabric-application-upgrade-data-serialization.md).</span><span class="sxs-lookup"><span data-stu-id="88d0f-189">Make your application upgrades compatible by learning how to use [data serialization](service-fabric-application-upgrade-data-serialization.md).</span></span>

<span data-ttu-id="88d0f-190">Learn how to use advanced functionality while upgrading your application by referring to [Advanced topics](service-fabric-application-upgrade-advanced.md).</span><span class="sxs-lookup"><span data-stu-id="88d0f-190">Learn how to use advanced functionality while upgrading your application by referring to [Advanced topics](service-fabric-application-upgrade-advanced.md).</span></span>

<span data-ttu-id="88d0f-191">Fix common problems in application upgrades by referring to the steps in [Troubleshooting application upgrades](service-fabric-application-upgrade-troubleshooting.md).</span><span class="sxs-lookup"><span data-stu-id="88d0f-191">Fix common problems in application upgrades by referring to the steps in [Troubleshooting application upgrades](service-fabric-application-upgrade-troubleshooting.md).</span></span>


