---
title: Service Fabric Cluster Resource Manager - Application Groups | Microsoft Docs
description: Overview of the Application Group functionality in the Service Fabric Cluster Resource Manager
services: service-fabric
documentationcenter: .net
author: masnider
manager: timlt
editor: ''
ms.assetid: 4cae2370-77b3-49ce-bf40-030400c4260d
ms.service: Service-Fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 01/05/2017
ms.author: masnider
ms.openlocfilehash: f4456ba56229cfc6bcabd0913c07174e72be54fd
ms.sourcegitcommit: 5b9d839c0c0a94b293fdafe1d6e5429506c07e05
ms.translationtype: HT
ms.contentlocale: nl-NL
ms.lasthandoff: 08/02/2018
ms.locfileid: "44552138"
---
# <a name="introduction-to-application-groups"></a><span data-ttu-id="e2310-103">Introduction to Application Groups</span><span class="sxs-lookup"><span data-stu-id="e2310-103">Introduction to Application Groups</span></span>
<span data-ttu-id="e2310-104">Service Fabric's Cluster Resource Manager typically manages cluster resources by spreading the load (represented via [Metrics](service-fabric-cluster-resource-manager-metrics.md)) evenly throughout the cluster.</span><span class="sxs-lookup"><span data-stu-id="e2310-104">Service Fabric's Cluster Resource Manager typically manages cluster resources by spreading the load (represented via [Metrics](service-fabric-cluster-resource-manager-metrics.md)) evenly throughout the cluster.</span></span> <span data-ttu-id="e2310-105">Service Fabric also manages the capacity of the nodes in the cluster and the cluster as a whole through the notion of [capacity](service-fabric-cluster-resource-manager-cluster-description.md).</span><span class="sxs-lookup"><span data-stu-id="e2310-105">Service Fabric also manages the capacity of the nodes in the cluster and the cluster as a whole through the notion of [capacity](service-fabric-cluster-resource-manager-cluster-description.md).</span></span> <span data-ttu-id="e2310-106">Metrics and capacity work great for many workloads, but patterns that make heavy use of different Service Fabric Application Instances sometimes bring in additional requirements.</span><span class="sxs-lookup"><span data-stu-id="e2310-106">Metrics and capacity work great for many workloads, but patterns that make heavy use of different Service Fabric Application Instances sometimes bring in additional requirements.</span></span> <span data-ttu-id="e2310-107">Some additional requirements are typically:</span><span class="sxs-lookup"><span data-stu-id="e2310-107">Some additional requirements are typically:</span></span>

* <span data-ttu-id="e2310-108">Ability to reserve capacity for an Application Instance's services in the cluster</span><span class="sxs-lookup"><span data-stu-id="e2310-108">Ability to reserve capacity for an Application Instance's services in the cluster</span></span>
* <span data-ttu-id="e2310-109">Ability to limit the total number of nodes that the services within an application run on</span><span class="sxs-lookup"><span data-stu-id="e2310-109">Ability to limit the total number of nodes that the services within an application run on</span></span>
* <span data-ttu-id="e2310-110">Defining capacities on the application instance itself to limit the number or total resource consumption of the services inside it</span><span class="sxs-lookup"><span data-stu-id="e2310-110">Defining capacities on the application instance itself to limit the number or total resource consumption of the services inside it</span></span>

<span data-ttu-id="e2310-111">To meet these requirements, the Service Fabric Cluster Resource Manager supports Application Groups.</span><span class="sxs-lookup"><span data-stu-id="e2310-111">To meet these requirements, the Service Fabric Cluster Resource Manager supports Application Groups.</span></span>

## <a name="managing-application-capacity"></a><span data-ttu-id="e2310-112">Managing Application capacity</span><span class="sxs-lookup"><span data-stu-id="e2310-112">Managing Application capacity</span></span>
<span data-ttu-id="e2310-113">Application capacity can be used to limit the number of nodes spanned by an application.</span><span class="sxs-lookup"><span data-stu-id="e2310-113">Application capacity can be used to limit the number of nodes spanned by an application.</span></span> <span data-ttu-id="e2310-114">It can also limit the metric load of that the applications’ services on individual nodes and in total.</span><span class="sxs-lookup"><span data-stu-id="e2310-114">It can also limit the metric load of that the applications’ services on individual nodes and in total.</span></span> <span data-ttu-id="e2310-115">It can also be used to reserve resources in the cluster for the application.</span><span class="sxs-lookup"><span data-stu-id="e2310-115">It can also be used to reserve resources in the cluster for the application.</span></span>

<span data-ttu-id="e2310-116">Application capacity can be set for new applications when they are created and can also be updated for existing applications.</span><span class="sxs-lookup"><span data-stu-id="e2310-116">Application capacity can be set for new applications when they are created and can also be updated for existing applications.</span></span>

### <a name="limiting-the-maximum-number-of-nodes"></a><span data-ttu-id="e2310-117">Limiting the maximum number of nodes</span><span class="sxs-lookup"><span data-stu-id="e2310-117">Limiting the maximum number of nodes</span></span>
<span data-ttu-id="e2310-118">The simplest use case for Application capacity is when an application instantiation needs to be limited to a certain maximum number of nodes.</span><span class="sxs-lookup"><span data-stu-id="e2310-118">The simplest use case for Application capacity is when an application instantiation needs to be limited to a certain maximum number of nodes.</span></span> <span data-ttu-id="e2310-119">If no Application Capacity is specified, the Service Fabric Cluster Resource Manager creates and places services according to normal rules (balancing or defragmentation).</span><span class="sxs-lookup"><span data-stu-id="e2310-119">If no Application Capacity is specified, the Service Fabric Cluster Resource Manager creates and places services according to normal rules (balancing or defragmentation).</span></span>

<span data-ttu-id="e2310-120">The following image shows an application instance with and without a maximum number of nodes defined.</span><span class="sxs-lookup"><span data-stu-id="e2310-120">The following image shows an application instance with and without a maximum number of nodes defined.</span></span> <span data-ttu-id="e2310-121">There are no guarantees made about which replicas or instances of which services get placed together, or which specific nodes get used.</span><span class="sxs-lookup"><span data-stu-id="e2310-121">There are no guarantees made about which replicas or instances of which services get placed together, or which specific nodes get used.</span></span>

<span data-ttu-id="e2310-122"><center>
![Application Instance Defining Maximum Number of Nodes][Image1]
</center></span><span class="sxs-lookup"><span data-stu-id="e2310-122"><center>
![Application Instance Defining Maximum Number of Nodes][Image1]
</center></span></span>

<span data-ttu-id="e2310-123">In the left example, the application doesn’t have Application Capacity set, and it has three services.</span><span class="sxs-lookup"><span data-stu-id="e2310-123">In the left example, the application doesn’t have Application Capacity set, and it has three services.</span></span> <span data-ttu-id="e2310-124">The Cluster Resource Manager has spread out all replicas across six available nodes to achieve the best balance in the cluster.</span><span class="sxs-lookup"><span data-stu-id="e2310-124">The Cluster Resource Manager has spread out all replicas across six available nodes to achieve the best balance in the cluster.</span></span> <span data-ttu-id="e2310-125">In the right example, we see the same application limited to three nodes.</span><span class="sxs-lookup"><span data-stu-id="e2310-125">In the right example, we see the same application limited to three nodes.</span></span>

<span data-ttu-id="e2310-126">The parameter that controls this behavior is called MaximumNodes.</span><span class="sxs-lookup"><span data-stu-id="e2310-126">The parameter that controls this behavior is called MaximumNodes.</span></span> <span data-ttu-id="e2310-127">This parameter can be set during application creation, or updated for an application instance that was already running.</span><span class="sxs-lookup"><span data-stu-id="e2310-127">This parameter can be set during application creation, or updated for an application instance that was already running.</span></span>

<span data-ttu-id="e2310-128">Powershell</span><span class="sxs-lookup"><span data-stu-id="e2310-128">Powershell</span></span>

``` posh
New-ServiceFabricApplication -ApplicationName fabric:/AppName -ApplicationTypeName AppType1 -ApplicationTypeVersion 1.0.0.0 -MaximumNodes 3
Update-ServiceFabricApplication –Name fabric:/AppName –MaximumNodes 5
```

<span data-ttu-id="e2310-129">C#</span><span class="sxs-lookup"><span data-stu-id="e2310-129">C#</span></span>

``` csharp
ApplicationDescription ad = new ApplicationDescription();
ad.ApplicationName = new Uri("fabric:/AppName");
ad.ApplicationTypeName = "AppType1";
ad.ApplicationTypeVersion = "1.0.0.0";
ad.MaximumNodes = 3;
fc.ApplicationManager.CreateApplicationAsync(ad);

ApplicationUpdateDescription adUpdate = new ApplicationUpdateDescription(new Uri("fabric:/AppName"));
adUpdate.MaximumNodes = 5;
fc.ApplicationManager.UpdateApplicationAsync(adUpdate);

var appMetric = new ApplicationMetricDescription();
appMetric.Name = "Metric1";
appMetric.TotalApplicationCapacity = 1000;

adUpdate.Metrics.Add(appMetric);
```

## <a name="application-metrics-load-and-capacity"></a><span data-ttu-id="e2310-130">Application Metrics, Load, and Capacity</span><span class="sxs-lookup"><span data-stu-id="e2310-130">Application Metrics, Load, and Capacity</span></span>
<span data-ttu-id="e2310-131">Application Groups also allow you to define metrics associated with a given application instance, and the application's capacity for those metrics.</span><span class="sxs-lookup"><span data-stu-id="e2310-131">Application Groups also allow you to define metrics associated with a given application instance, and the application's capacity for those metrics.</span></span> <span data-ttu-id="e2310-132">This allows you to track, reserve, and limit the resource consumption of the services inside that application instance.</span><span class="sxs-lookup"><span data-stu-id="e2310-132">This allows you to track, reserve, and limit the resource consumption of the services inside that application instance.</span></span>

<span data-ttu-id="e2310-133">For each application metric, there are two values that can be set:</span><span class="sxs-lookup"><span data-stu-id="e2310-133">For each application metric, there are two values that can be set:</span></span>

* <span data-ttu-id="e2310-134">**Total Application Capacity** – This setting represents the total capacity of the application for a particular metric.</span><span class="sxs-lookup"><span data-stu-id="e2310-134">**Total Application Capacity** – This setting represents the total capacity of the application for a particular metric.</span></span> <span data-ttu-id="e2310-135">The Cluster Resource Manager disallows the creation of any new services within this application instance that would cause total load to exceed this value.</span><span class="sxs-lookup"><span data-stu-id="e2310-135">The Cluster Resource Manager disallows the creation of any new services within this application instance that would cause total load to exceed this value.</span></span> <span data-ttu-id="e2310-136">For example, let's say the application instance had a capacity of 10 and already had load of five.</span><span class="sxs-lookup"><span data-stu-id="e2310-136">For example, let's say the application instance had a capacity of 10 and already had load of five.</span></span> <span data-ttu-id="e2310-137">In this case the creation of a service with a total default load of 10 would be disallowed.</span><span class="sxs-lookup"><span data-stu-id="e2310-137">In this case the creation of a service with a total default load of 10 would be disallowed.</span></span>
* <span data-ttu-id="e2310-138">**Maximum Node Capacity** – This setting specifies the maximum total load for replicas of the services inside the application on a single node.</span><span class="sxs-lookup"><span data-stu-id="e2310-138">**Maximum Node Capacity** – This setting specifies the maximum total load for replicas of the services inside the application on a single node.</span></span> <span data-ttu-id="e2310-139">If total load on the node goes over this capacity, the Cluster Resource Manager will attempt to move replicas to other nodes so that the capacity constraint is respected.</span><span class="sxs-lookup"><span data-stu-id="e2310-139">If total load on the node goes over this capacity, the Cluster Resource Manager will attempt to move replicas to other nodes so that the capacity constraint is respected.</span></span>

## <a name="reserving-capacity"></a><span data-ttu-id="e2310-140">Reserving Capacity</span><span class="sxs-lookup"><span data-stu-id="e2310-140">Reserving Capacity</span></span>
<span data-ttu-id="e2310-141">Another common use for application groups is to ensure that resources within the cluster are reserved for a given application instance.</span><span class="sxs-lookup"><span data-stu-id="e2310-141">Another common use for application groups is to ensure that resources within the cluster are reserved for a given application instance.</span></span> <span data-ttu-id="e2310-142">This happens even if the application instance doesn't have any services within it yet, or even if they aren't consuming the resources yet.</span><span class="sxs-lookup"><span data-stu-id="e2310-142">This happens even if the application instance doesn't have any services within it yet, or even if they aren't consuming the resources yet.</span></span> <span data-ttu-id="e2310-143">Let's look at how that would work.</span><span class="sxs-lookup"><span data-stu-id="e2310-143">Let's look at how that would work.</span></span>

### <a name="specifying-a-minimum-number-of-nodes-and-resource-reservation"></a><span data-ttu-id="e2310-144">Specifying a minimum number of nodes and resource reservation</span><span class="sxs-lookup"><span data-stu-id="e2310-144">Specifying a minimum number of nodes and resource reservation</span></span>
<span data-ttu-id="e2310-145">Reserving resources for an application instance requires specifying a couple additional parameters: *MinimumNodes* and *NodeReservationCapacity*</span><span class="sxs-lookup"><span data-stu-id="e2310-145">Reserving resources for an application instance requires specifying a couple additional parameters: *MinimumNodes* and *NodeReservationCapacity*</span></span>

* <span data-ttu-id="e2310-146">**MinimumNodes** - Just like specifying a maximum number of nodes that the services within an application can run on, you can also specify the minimum number.</span><span class="sxs-lookup"><span data-stu-id="e2310-146">**MinimumNodes** - Just like specifying a maximum number of nodes that the services within an application can run on, you can also specify the minimum number.</span></span> <span data-ttu-id="e2310-147">This setting defines the number of nodes that the resources should be reserved on, guaranteeing capacity within the cluster as a part of creating the application instance.</span><span class="sxs-lookup"><span data-stu-id="e2310-147">This setting defines the number of nodes that the resources should be reserved on, guaranteeing capacity within the cluster as a part of creating the application instance.</span></span>
* <span data-ttu-id="e2310-148">**NodeReservationCapacity** - The NodeReservationCapacity can be defined for each metric within the application.</span><span class="sxs-lookup"><span data-stu-id="e2310-148">**NodeReservationCapacity** - The NodeReservationCapacity can be defined for each metric within the application.</span></span> <span data-ttu-id="e2310-149">This setting defines the amount of metric load reserved for the application on any node where any of the replicas or instances of the services within it are placed.</span><span class="sxs-lookup"><span data-stu-id="e2310-149">This setting defines the amount of metric load reserved for the application on any node where any of the replicas or instances of the services within it are placed.</span></span>

<span data-ttu-id="e2310-150">Let's look at an example of capacity reservation:</span><span class="sxs-lookup"><span data-stu-id="e2310-150">Let's look at an example of capacity reservation:</span></span>

<span data-ttu-id="e2310-151"><center>
![Application Instances Defining Reserved Capacity][Image2]
</center></span><span class="sxs-lookup"><span data-stu-id="e2310-151"><center>
![Application Instances Defining Reserved Capacity][Image2]
</center></span></span>

<span data-ttu-id="e2310-152">In the left example, applications do not have any Application Capacity defined.</span><span class="sxs-lookup"><span data-stu-id="e2310-152">In the left example, applications do not have any Application Capacity defined.</span></span> <span data-ttu-id="e2310-153">The Cluster Resource Manager balances everything according to normal rules.</span><span class="sxs-lookup"><span data-stu-id="e2310-153">The Cluster Resource Manager balances everything according to normal rules.</span></span>

<span data-ttu-id="e2310-154">In the example on the right, let's say that the application was created with the following settings:</span><span class="sxs-lookup"><span data-stu-id="e2310-154">In the example on the right, let's say that the application was created with the following settings:</span></span>

* <span data-ttu-id="e2310-155">MinimumNodes set to two</span><span class="sxs-lookup"><span data-stu-id="e2310-155">MinimumNodes set to two</span></span>
* <span data-ttu-id="e2310-156">MaximumNodes set to three</span><span class="sxs-lookup"><span data-stu-id="e2310-156">MaximumNodes set to three</span></span>
* <span data-ttu-id="e2310-157">An application Metric defined with</span><span class="sxs-lookup"><span data-stu-id="e2310-157">An application Metric defined with</span></span>
  * <span data-ttu-id="e2310-158">NodeReservationCapacity of 20</span><span class="sxs-lookup"><span data-stu-id="e2310-158">NodeReservationCapacity of 20</span></span>
  * <span data-ttu-id="e2310-159">MaximumNodeCapacity of 50</span><span class="sxs-lookup"><span data-stu-id="e2310-159">MaximumNodeCapacity of 50</span></span>
  * <span data-ttu-id="e2310-160">TotalApplicationCapacity of 100</span><span class="sxs-lookup"><span data-stu-id="e2310-160">TotalApplicationCapacity of 100</span></span>

<span data-ttu-id="e2310-161">Service Fabric reserves capacity on two nodes for the blue application, and doesn't allow services from other application instances in the cluster to consume that capacity.</span><span class="sxs-lookup"><span data-stu-id="e2310-161">Service Fabric reserves capacity on two nodes for the blue application, and doesn't allow services from other application instances in the cluster to consume that capacity.</span></span> <span data-ttu-id="e2310-162">This reserved application capacity is considered consumed and counted against the remaining capacity on that node and within the cluster.</span><span class="sxs-lookup"><span data-stu-id="e2310-162">This reserved application capacity is considered consumed and counted against the remaining capacity on that node and within the cluster.</span></span>

<span data-ttu-id="e2310-163">When an application is created with reservation the Cluster Resource Manager reserves capacity equal to MinimumNodes \* NodeReservationCapacity (for each metric).</span><span class="sxs-lookup"><span data-stu-id="e2310-163">When an application is created with reservation the Cluster Resource Manager reserves capacity equal to MinimumNodes \* NodeReservationCapacity (for each metric).</span></span> <span data-ttu-id="e2310-164">However capacity is reserved on a specific node only when at least one replica is placed on it.</span><span class="sxs-lookup"><span data-stu-id="e2310-164">However capacity is reserved on a specific node only when at least one replica is placed on it.</span></span> <span data-ttu-id="e2310-165">This later reservation allows for flexibility and better resource utilization since resources are only reserved on nodes when needed.</span><span class="sxs-lookup"><span data-stu-id="e2310-165">This later reservation allows for flexibility and better resource utilization since resources are only reserved on nodes when needed.</span></span>

## <a name="obtaining-the-application-load-information"></a><span data-ttu-id="e2310-166">Obtaining the application load information</span><span class="sxs-lookup"><span data-stu-id="e2310-166">Obtaining the application load information</span></span>
<span data-ttu-id="e2310-167">For each application that has Application Capacity defined you can obtain the information about the aggregate load reported by replicas of its services.</span><span class="sxs-lookup"><span data-stu-id="e2310-167">For each application that has Application Capacity defined you can obtain the information about the aggregate load reported by replicas of its services.</span></span>

<span data-ttu-id="e2310-168">For example, load can be retrieved using the following PowerShell cmdlet:</span><span class="sxs-lookup"><span data-stu-id="e2310-168">For example, load can be retrieved using the following PowerShell cmdlet:</span></span>

``` posh
Get-ServiceFabricApplicationLoad –ApplicationName fabric:/MyApplication1

```

<span data-ttu-id="e2310-169">The ApplicationLoad query returns the basic information about Application Capacity that was specified for the application.</span><span class="sxs-lookup"><span data-stu-id="e2310-169">The ApplicationLoad query returns the basic information about Application Capacity that was specified for the application.</span></span> <span data-ttu-id="e2310-170">This information includes the Minimum Nodes and Maximum Nodes info, and the number that the application is currently occupying.</span><span class="sxs-lookup"><span data-stu-id="e2310-170">This information includes the Minimum Nodes and Maximum Nodes info, and the number that the application is currently occupying.</span></span> <span data-ttu-id="e2310-171">It also includes information about each application load metric, including:</span><span class="sxs-lookup"><span data-stu-id="e2310-171">It also includes information about each application load metric, including:</span></span>

* <span data-ttu-id="e2310-172">Metric Name: Name of the metric.</span><span class="sxs-lookup"><span data-stu-id="e2310-172">Metric Name: Name of the metric.</span></span>
* <span data-ttu-id="e2310-173">Reservation Capacity: Cluster Capacity that is reserved in the cluster for this Application.</span><span class="sxs-lookup"><span data-stu-id="e2310-173">Reservation Capacity: Cluster Capacity that is reserved in the cluster for this Application.</span></span>
* <span data-ttu-id="e2310-174">Application Load: Total Load of this Application’s child replicas.</span><span class="sxs-lookup"><span data-stu-id="e2310-174">Application Load: Total Load of this Application’s child replicas.</span></span>
* <span data-ttu-id="e2310-175">Application Capacity: Maximum permitted value of Application Load.</span><span class="sxs-lookup"><span data-stu-id="e2310-175">Application Capacity: Maximum permitted value of Application Load.</span></span>

## <a name="removing-application-capacity"></a><span data-ttu-id="e2310-176">Removing Application Capacity</span><span class="sxs-lookup"><span data-stu-id="e2310-176">Removing Application Capacity</span></span>
<span data-ttu-id="e2310-177">Once the Application Capacity parameters are set for an application, they can be removed using Update Application APIs or PowerShell cmdlets.</span><span class="sxs-lookup"><span data-stu-id="e2310-177">Once the Application Capacity parameters are set for an application, they can be removed using Update Application APIs or PowerShell cmdlets.</span></span> <span data-ttu-id="e2310-178">For example:</span><span class="sxs-lookup"><span data-stu-id="e2310-178">For example:</span></span>

``` posh
Update-ServiceFabricApplication –Name fabric:/MyApplication1 –RemoveApplicationCapacity

```

<span data-ttu-id="e2310-179">This command removes all Application Capacity parameters from the application.</span><span class="sxs-lookup"><span data-stu-id="e2310-179">This command removes all Application Capacity parameters from the application.</span></span> <span data-ttu-id="e2310-180">The effect of the command is immediate.</span><span class="sxs-lookup"><span data-stu-id="e2310-180">The effect of the command is immediate.</span></span> <span data-ttu-id="e2310-181">After this command completes, the Cluster Resource Manager reverts to using the default behavior for managing applications.</span><span class="sxs-lookup"><span data-stu-id="e2310-181">After this command completes, the Cluster Resource Manager reverts to using the default behavior for managing applications.</span></span> <span data-ttu-id="e2310-182">Application Capacity parameters can be specified again via Update-ServiceFabricApplication.</span><span class="sxs-lookup"><span data-stu-id="e2310-182">Application Capacity parameters can be specified again via Update-ServiceFabricApplication.</span></span>

### <a name="restrictions-on-application-capacity"></a><span data-ttu-id="e2310-183">Restrictions on Application Capacity</span><span class="sxs-lookup"><span data-stu-id="e2310-183">Restrictions on Application Capacity</span></span>
<span data-ttu-id="e2310-184">There are several restrictions on Application Capacity parameters that must be respected.</span><span class="sxs-lookup"><span data-stu-id="e2310-184">There are several restrictions on Application Capacity parameters that must be respected.</span></span> <span data-ttu-id="e2310-185">If there are validation errors, the creation or update of the application is rejected with an error and no changes take place.</span><span class="sxs-lookup"><span data-stu-id="e2310-185">If there are validation errors, the creation or update of the application is rejected with an error and no changes take place.</span></span>

* <span data-ttu-id="e2310-186">All integer parameters must be non-negative numbers.</span><span class="sxs-lookup"><span data-stu-id="e2310-186">All integer parameters must be non-negative numbers.</span></span>
* <span data-ttu-id="e2310-187">MinimumNodes must never be greater than MaximumNodes.</span><span class="sxs-lookup"><span data-stu-id="e2310-187">MinimumNodes must never be greater than MaximumNodes.</span></span>
* <span data-ttu-id="e2310-188">If capacities for a load metric are defined, then they must follow these rules:</span><span class="sxs-lookup"><span data-stu-id="e2310-188">If capacities for a load metric are defined, then they must follow these rules:</span></span>
  * <span data-ttu-id="e2310-189">Node Reservation Capacity must not be greater than Maximum Node Capacity.</span><span class="sxs-lookup"><span data-stu-id="e2310-189">Node Reservation Capacity must not be greater than Maximum Node Capacity.</span></span> <span data-ttu-id="e2310-190">For example, you cannot limit the capacity for the metric “CPU” on the node to two units and try to reserve three units on each node.</span><span class="sxs-lookup"><span data-stu-id="e2310-190">For example, you cannot limit the capacity for the metric “CPU” on the node to two units and try to reserve three units on each node.</span></span>
  * <span data-ttu-id="e2310-191">If MaximumNodes is specified, then the product of MaximumNodes and Maximum Node Capacity must not be greater than Total Application Capacity.</span><span class="sxs-lookup"><span data-stu-id="e2310-191">If MaximumNodes is specified, then the product of MaximumNodes and Maximum Node Capacity must not be greater than Total Application Capacity.</span></span> <span data-ttu-id="e2310-192">For example, let's say the Maximum Node Capacity for load metric “CPU” is set to eight.</span><span class="sxs-lookup"><span data-stu-id="e2310-192">For example, let's say the Maximum Node Capacity for load metric “CPU” is set to eight.</span></span> <span data-ttu-id="e2310-193">Let's also say you set the Maximum Nodes to ten.</span><span class="sxs-lookup"><span data-stu-id="e2310-193">Let's also say you set the Maximum Nodes to ten.</span></span> <span data-ttu-id="e2310-194">In this case then Total Application Capacity must be greater than 80 for this load metric.</span><span class="sxs-lookup"><span data-stu-id="e2310-194">In this case then Total Application Capacity must be greater than 80 for this load metric.</span></span>

<span data-ttu-id="e2310-195">The restrictions are enforced both during application creation (on the client side), and during application update (on the server side).</span><span class="sxs-lookup"><span data-stu-id="e2310-195">The restrictions are enforced both during application creation (on the client side), and during application update (on the server side).</span></span>

## <a name="how-not-to-use-application-capacity"></a><span data-ttu-id="e2310-196">How not to use Application Capacity</span><span class="sxs-lookup"><span data-stu-id="e2310-196">How not to use Application Capacity</span></span>
* <span data-ttu-id="e2310-197">Do not try to use the Application Group features to constrain the application to a _specific_ subset of nodes.</span><span class="sxs-lookup"><span data-stu-id="e2310-197">Do not try to use the Application Group features to constrain the application to a _specific_ subset of nodes.</span></span> <span data-ttu-id="e2310-198">In other words, you can specify that the application runs on at most five nodes, but not which specific five nodes in the cluster.</span><span class="sxs-lookup"><span data-stu-id="e2310-198">In other words, you can specify that the application runs on at most five nodes, but not which specific five nodes in the cluster.</span></span> <span data-ttu-id="e2310-199">Constraining an application to specific nodes can be achieved using placement constraints for services.</span><span class="sxs-lookup"><span data-stu-id="e2310-199">Constraining an application to specific nodes can be achieved using placement constraints for services.</span></span>
* <span data-ttu-id="e2310-200">Do not try to use the Application Capacity to ensure that two services from the same application are placed alongside each other.</span><span class="sxs-lookup"><span data-stu-id="e2310-200">Do not try to use the Application Capacity to ensure that two services from the same application are placed alongside each other.</span></span> <span data-ttu-id="e2310-201">Ensuring services run on the same node can be achieved by using affinity or with placement constraints depending on the specific requirements.</span><span class="sxs-lookup"><span data-stu-id="e2310-201">Ensuring services run on the same node can be achieved by using affinity or with placement constraints depending on the specific requirements.</span></span>

## <a name="next-steps"></a><span data-ttu-id="e2310-202">Next steps</span><span class="sxs-lookup"><span data-stu-id="e2310-202">Next steps</span></span>
* <span data-ttu-id="e2310-203">For more information about the other options available for configuring services, check out the topic on the other Cluster Resource Manager configurations available [Learn about configuring Services](service-fabric-cluster-resource-manager-configure-services.md)</span><span class="sxs-lookup"><span data-stu-id="e2310-203">For more information about the other options available for configuring services, check out the topic on the other Cluster Resource Manager configurations available [Learn about configuring Services](service-fabric-cluster-resource-manager-configure-services.md)</span></span>
* <span data-ttu-id="e2310-204">To find out about how the Cluster Resource Manager manages and balances load in the cluster, check out the article on [balancing load](service-fabric-cluster-resource-manager-balancing.md)</span><span class="sxs-lookup"><span data-stu-id="e2310-204">To find out about how the Cluster Resource Manager manages and balances load in the cluster, check out the article on [balancing load](service-fabric-cluster-resource-manager-balancing.md)</span></span>
* <span data-ttu-id="e2310-205">Start from the beginning and [get an Introduction to the Service Fabric Cluster Resource Manager](service-fabric-cluster-resource-manager-introduction.md)</span><span class="sxs-lookup"><span data-stu-id="e2310-205">Start from the beginning and [get an Introduction to the Service Fabric Cluster Resource Manager](service-fabric-cluster-resource-manager-introduction.md)</span></span>
* <span data-ttu-id="e2310-206">For more information on how metrics work generally, read up on [Service Fabric Load Metrics](service-fabric-cluster-resource-manager-metrics.md)</span><span class="sxs-lookup"><span data-stu-id="e2310-206">For more information on how metrics work generally, read up on [Service Fabric Load Metrics](service-fabric-cluster-resource-manager-metrics.md)</span></span>
* <span data-ttu-id="e2310-207">The Cluster Resource Manager has many options for describing the cluster.</span><span class="sxs-lookup"><span data-stu-id="e2310-207">The Cluster Resource Manager has many options for describing the cluster.</span></span> <span data-ttu-id="e2310-208">To find out more about them, check out this article on [describing a Service Fabric cluster](service-fabric-cluster-resource-manager-cluster-description.md)</span><span class="sxs-lookup"><span data-stu-id="e2310-208">To find out more about them, check out this article on [describing a Service Fabric cluster](service-fabric-cluster-resource-manager-cluster-description.md)</span></span>

[Image1]:https://docstestmedia1.blob.core.windows.net/azure-media/articles/service-fabric/media/service-fabric-cluster-resource-manager-application-groups/application-groups-max-nodes.png
[Image2]:https://docstestmedia1.blob.core.windows.net/azure-media/articles/service-fabric/media/service-fabric-cluster-resource-manager-application-groups/application-groups-reserved-capacity.png


