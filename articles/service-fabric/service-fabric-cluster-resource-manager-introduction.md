---
title: Introducing the Service Fabric Cluster Resource Manager | Microsoft Docs
description: An introduction to the Service Fabric Cluster Resource Manager.
services: service-fabric
documentationcenter: .net
author: masnider
manager: timlt
editor: ''
ms.assetid: cfab735b-923d-4246-a2a8-220d4f4e0c64
ms.service: Service-Fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 01/05/2017
ms.author: masnider
ms.openlocfilehash: a15344647c00025fa483df7675907f76ce58e71f
ms.sourcegitcommit: 5b9d839c0c0a94b293fdafe1d6e5429506c07e05
ms.translationtype: HT
ms.contentlocale: nl-NL
ms.lasthandoff: 08/02/2018
ms.locfileid: "44555979"
---
# <a name="introducing-the-service-fabric-cluster-resource-manager"></a><span data-ttu-id="3903a-103">Introducing the Service Fabric cluster resource manager</span><span class="sxs-lookup"><span data-stu-id="3903a-103">Introducing the Service Fabric cluster resource manager</span></span>
<span data-ttu-id="3903a-104">Traditionally managing IT systems or a set of services meant getting a few physical or virtual machines dedicated to those specific services or systems.</span><span class="sxs-lookup"><span data-stu-id="3903a-104">Traditionally managing IT systems or a set of services meant getting a few physical or virtual machines dedicated to those specific services or systems.</span></span> <span data-ttu-id="3903a-105">Many major services were broken down into a “web” tier and a “data” or “storage” tier, maybe with a few other specialized components like a cache.</span><span class="sxs-lookup"><span data-stu-id="3903a-105">Many major services were broken down into a “web” tier and a “data” or “storage” tier, maybe with a few other specialized components like a cache.</span></span> <span data-ttu-id="3903a-106">Other types of applications would have a messaging tier where requests flowed in and out. This tier would connect to a work tier for any analysis or transformation necessary as a part of the messaging.</span><span class="sxs-lookup"><span data-stu-id="3903a-106">Other types of applications would have a messaging tier where requests flowed in and out. This tier would connect to a work tier for any analysis or transformation necessary as a part of the messaging.</span></span> <span data-ttu-id="3903a-107">Each type of workload got specific machines dedicated to it: the database got a couple machines dedicated to it, the web servers a few.</span><span class="sxs-lookup"><span data-stu-id="3903a-107">Each type of workload got specific machines dedicated to it: the database got a couple machines dedicated to it, the web servers a few.</span></span> <span data-ttu-id="3903a-108">If a particular type of workload caused the machines it was on to run too hot, then you added more machines with that same configuration.</span><span class="sxs-lookup"><span data-stu-id="3903a-108">If a particular type of workload caused the machines it was on to run too hot, then you added more machines with that same configuration.</span></span> <span data-ttu-id="3903a-109">Most of the time though you replaced a few of the machines with larger machines.</span><span class="sxs-lookup"><span data-stu-id="3903a-109">Most of the time though you replaced a few of the machines with larger machines.</span></span> <span data-ttu-id="3903a-110">Easy.</span><span class="sxs-lookup"><span data-stu-id="3903a-110">Easy.</span></span> <span data-ttu-id="3903a-111">If a machine failed, that part of the overall application ran at lower capacity until the machine could be restored.</span><span class="sxs-lookup"><span data-stu-id="3903a-111">If a machine failed, that part of the overall application ran at lower capacity until the machine could be restored.</span></span> <span data-ttu-id="3903a-112">Still fairly easy (if not necessarily fun).</span><span class="sxs-lookup"><span data-stu-id="3903a-112">Still fairly easy (if not necessarily fun).</span></span>

<span data-ttu-id="3903a-113">Now however, let’s say you’ve found a need to scale out and have taken the containers and/or microservice plunge.</span><span class="sxs-lookup"><span data-stu-id="3903a-113">Now however, let’s say you’ve found a need to scale out and have taken the containers and/or microservice plunge.</span></span> <span data-ttu-id="3903a-114">Suddenly you find yourself with tens, hundreds, or thousands of machines.</span><span class="sxs-lookup"><span data-stu-id="3903a-114">Suddenly you find yourself with tens, hundreds, or thousands of machines.</span></span> <span data-ttu-id="3903a-115">You have dozens of different types of services (none consuming a full machine's worth of resources), perhaps hundreds of different instances of those services.</span><span class="sxs-lookup"><span data-stu-id="3903a-115">You have dozens of different types of services (none consuming a full machine's worth of resources), perhaps hundreds of different instances of those services.</span></span> <span data-ttu-id="3903a-116">Each named instance has one or more instances or replicas for High Availability (HA).</span><span class="sxs-lookup"><span data-stu-id="3903a-116">Each named instance has one or more instances or replicas for High Availability (HA).</span></span>

<span data-ttu-id="3903a-117">Suddenly managing your environment is not so simple as managing a few machines dedicated to single types of workloads.</span><span class="sxs-lookup"><span data-stu-id="3903a-117">Suddenly managing your environment is not so simple as managing a few machines dedicated to single types of workloads.</span></span> <span data-ttu-id="3903a-118">Your servers are virtual and no longer have names (you *have* switched mindsets from [pets to cattle](http://www.slideshare.net/randybias/architectures-for-open-and-scalable-clouds/20) after all).</span><span class="sxs-lookup"><span data-stu-id="3903a-118">Your servers are virtual and no longer have names (you *have* switched mindsets from [pets to cattle](http://www.slideshare.net/randybias/architectures-for-open-and-scalable-clouds/20) after all).</span></span> <span data-ttu-id="3903a-119">Configuration is less about the machines and more about the services themselves.</span><span class="sxs-lookup"><span data-stu-id="3903a-119">Configuration is less about the machines and more about the services themselves.</span></span> <span data-ttu-id="3903a-120">Dedicated hardware is a thing of the past, and services themselves have become small distributed systems, spanning multiple smaller pieces of commodity hardware.</span><span class="sxs-lookup"><span data-stu-id="3903a-120">Dedicated hardware is a thing of the past, and services themselves have become small distributed systems, spanning multiple smaller pieces of commodity hardware.</span></span>

<span data-ttu-id="3903a-121">As a consequence of breaking your formerly monolithic, tiered app into separate services running on commodity hardware, you now have many more combinations to deal with.</span><span class="sxs-lookup"><span data-stu-id="3903a-121">As a consequence of breaking your formerly monolithic, tiered app into separate services running on commodity hardware, you now have many more combinations to deal with.</span></span> <span data-ttu-id="3903a-122">Who decides what types of workloads can run on which hardware, or how many?</span><span class="sxs-lookup"><span data-stu-id="3903a-122">Who decides what types of workloads can run on which hardware, or how many?</span></span> <span data-ttu-id="3903a-123">Which workloads work well on the same hardware, and which conflict?</span><span class="sxs-lookup"><span data-stu-id="3903a-123">Which workloads work well on the same hardware, and which conflict?</span></span> <span data-ttu-id="3903a-124">When a machine goes down…</span><span class="sxs-lookup"><span data-stu-id="3903a-124">When a machine goes down…</span></span> <span data-ttu-id="3903a-125">what was even running there?</span><span class="sxs-lookup"><span data-stu-id="3903a-125">what was even running there?</span></span> <span data-ttu-id="3903a-126">Who is in charge of making sure that workload starts running again?</span><span class="sxs-lookup"><span data-stu-id="3903a-126">Who is in charge of making sure that workload starts running again?</span></span> <span data-ttu-id="3903a-127">Do you wait for the (virtual?) machine to come back or do your workloads automatically fail over to other machines and keep running?</span><span class="sxs-lookup"><span data-stu-id="3903a-127">Do you wait for the (virtual?) machine to come back or do your workloads automatically fail over to other machines and keep running?</span></span> <span data-ttu-id="3903a-128">Is human intervention required?</span><span class="sxs-lookup"><span data-stu-id="3903a-128">Is human intervention required?</span></span> <span data-ttu-id="3903a-129">What about upgrades in this environment?</span><span class="sxs-lookup"><span data-stu-id="3903a-129">What about upgrades in this environment?</span></span>

<span data-ttu-id="3903a-130">As developers and operators dealing with this, we’re going to need some help managing this complexity.</span><span class="sxs-lookup"><span data-stu-id="3903a-130">As developers and operators dealing with this, we’re going to need some help managing this complexity.</span></span> <span data-ttu-id="3903a-131">You get the sense that a hiring binge and trying to hide the complexity with people is not the right answer.</span><span class="sxs-lookup"><span data-stu-id="3903a-131">You get the sense that a hiring binge and trying to hide the complexity with people is not the right answer.</span></span>

<span data-ttu-id="3903a-132">What to do?</span><span class="sxs-lookup"><span data-stu-id="3903a-132">What to do?</span></span>

## <a name="introducing-orchestrators"></a><span data-ttu-id="3903a-133">Introducing orchestrators</span><span class="sxs-lookup"><span data-stu-id="3903a-133">Introducing orchestrators</span></span>
<span data-ttu-id="3903a-134">An “Orchestrator” is the general term for a piece of software that helps administrators manage these types of environments.</span><span class="sxs-lookup"><span data-stu-id="3903a-134">An “Orchestrator” is the general term for a piece of software that helps administrators manage these types of environments.</span></span> <span data-ttu-id="3903a-135">Orchestrators are the components that take in requests like “I would like five copies of this service running in my environment”.</span><span class="sxs-lookup"><span data-stu-id="3903a-135">Orchestrators are the components that take in requests like “I would like five copies of this service running in my environment”.</span></span> <span data-ttu-id="3903a-136">They try to make the environment match the desired state, no matter what happens.</span><span class="sxs-lookup"><span data-stu-id="3903a-136">They try to make the environment match the desired state, no matter what happens.</span></span>

<span data-ttu-id="3903a-137">Orchestrators (not humans) are what swing into action when a machine fails or a workload terminates for some unexpected reason.</span><span class="sxs-lookup"><span data-stu-id="3903a-137">Orchestrators (not humans) are what swing into action when a machine fails or a workload terminates for some unexpected reason.</span></span> <span data-ttu-id="3903a-138">Most Orchestrators do more than just deal with failure.</span><span class="sxs-lookup"><span data-stu-id="3903a-138">Most Orchestrators do more than just deal with failure.</span></span> <span data-ttu-id="3903a-139">Other features they have are managing new deployments, handling upgrades, and dealing with resource consumption.</span><span class="sxs-lookup"><span data-stu-id="3903a-139">Other features they have are managing new deployments, handling upgrades, and dealing with resource consumption.</span></span> <span data-ttu-id="3903a-140">All Orchestrators are fundamentally about maintaining some desired state of configuration in the environment.</span><span class="sxs-lookup"><span data-stu-id="3903a-140">All Orchestrators are fundamentally about maintaining some desired state of configuration in the environment.</span></span> <span data-ttu-id="3903a-141">You want to be able to tell an Orchestrator what you want and have it do the heavy lifting.</span><span class="sxs-lookup"><span data-stu-id="3903a-141">You want to be able to tell an Orchestrator what you want and have it do the heavy lifting.</span></span> <span data-ttu-id="3903a-142">Chronos or Marathon on top of Mesos, Fleet, Docker Datacenter/Docker Swarm, Kubernetes, and Service Fabric are all examples of Orchestrators (or have them built in).</span><span class="sxs-lookup"><span data-stu-id="3903a-142">Chronos or Marathon on top of Mesos, Fleet, Docker Datacenter/Docker Swarm, Kubernetes, and Service Fabric are all examples of Orchestrators (or have them built in).</span></span> <span data-ttu-id="3903a-143">More are being created all the time as the complexities of managing real world deployments in different types of environments and conditions grow and change.</span><span class="sxs-lookup"><span data-stu-id="3903a-143">More are being created all the time as the complexities of managing real world deployments in different types of environments and conditions grow and change.</span></span>

## <a name="orchestration-as-a-service"></a><span data-ttu-id="3903a-144">Orchestration as a service</span><span class="sxs-lookup"><span data-stu-id="3903a-144">Orchestration as a service</span></span>
<span data-ttu-id="3903a-145">The job of the Orchestrator within a Service Fabric cluster is handled primarily by the Cluster Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="3903a-145">The job of the Orchestrator within a Service Fabric cluster is handled primarily by the Cluster Resource Manager.</span></span> <span data-ttu-id="3903a-146">The Service Fabric Cluster Resource Manager is one of the System Services within Service Fabric and is automatically started up within each cluster.</span><span class="sxs-lookup"><span data-stu-id="3903a-146">The Service Fabric Cluster Resource Manager is one of the System Services within Service Fabric and is automatically started up within each cluster.</span></span> <span data-ttu-id="3903a-147">Generally, the Cluster Resource Manager’s job is broken down into three parts:</span><span class="sxs-lookup"><span data-stu-id="3903a-147">Generally, the Cluster Resource Manager’s job is broken down into three parts:</span></span>

1. <span data-ttu-id="3903a-148">Enforcing Rules</span><span class="sxs-lookup"><span data-stu-id="3903a-148">Enforcing Rules</span></span>
2. <span data-ttu-id="3903a-149">Optimizing Your Environment</span><span class="sxs-lookup"><span data-stu-id="3903a-149">Optimizing Your Environment</span></span>
3. <span data-ttu-id="3903a-150">Helping with Other Processes</span><span class="sxs-lookup"><span data-stu-id="3903a-150">Helping with Other Processes</span></span>

<span data-ttu-id="3903a-151">To see how the Cluster Resource Manager works, watch the following Microsoft Virtual Academy video: <center><a target="_blank" href="https://mva.microsoft.com/en-US/training-courses/building-microservices-applications-on-azure-service-fabric-16747?l=d4tka66yC_5706218965"></span><span class="sxs-lookup"><span data-stu-id="3903a-151">To see how the Cluster Resource Manager works, watch the following Microsoft Virtual Academy video: <center><a target="_blank" href="https://mva.microsoft.com/en-US/training-courses/building-microservices-applications-on-azure-service-fabric-16747?l=d4tka66yC_5706218965"></span></span>
<img src="https://docstestmedia1.blob.core.windows.net/azure-media/articles/service-fabric/media/service-fabric-cluster-resource-manager-introduction/ConceptsAndDemoVid.png" WIDTH="360" HEIGHT="244">
</a></center>

### <a name="what-it-isnt"></a><span data-ttu-id="3903a-152">What it isn’t</span><span class="sxs-lookup"><span data-stu-id="3903a-152">What it isn’t</span></span>
<span data-ttu-id="3903a-153">In traditional N tier applications there was always some notion of a “Load Balancer”.</span><span class="sxs-lookup"><span data-stu-id="3903a-153">In traditional N tier applications there was always some notion of a “Load Balancer”.</span></span> <span data-ttu-id="3903a-154">Usually this was a Network Load Balancer (NLB) or an Application Load Balancer (ALB) depending on where it sat in the networking stack.</span><span class="sxs-lookup"><span data-stu-id="3903a-154">Usually this was a Network Load Balancer (NLB) or an Application Load Balancer (ALB) depending on where it sat in the networking stack.</span></span> <span data-ttu-id="3903a-155">Some load balancers are Hardware-based like F5’s BigIP offering, others are software-based such as Microsoft’s NLB.</span><span class="sxs-lookup"><span data-stu-id="3903a-155">Some load balancers are Hardware-based like F5’s BigIP offering, others are software-based such as Microsoft’s NLB.</span></span> <span data-ttu-id="3903a-156">In other environments, you might see something like HAProxy or nginx in this role.</span><span class="sxs-lookup"><span data-stu-id="3903a-156">In other environments, you might see something like HAProxy or nginx in this role.</span></span> <span data-ttu-id="3903a-157">In these architectures, the job of load balancing is to ensure stateless workloads receive (roughly) the same amount of work.</span><span class="sxs-lookup"><span data-stu-id="3903a-157">In these architectures, the job of load balancing is to ensure stateless workloads receive (roughly) the same amount of work.</span></span> <span data-ttu-id="3903a-158">Strategies balancing load varied.</span><span class="sxs-lookup"><span data-stu-id="3903a-158">Strategies balancing load varied.</span></span> <span data-ttu-id="3903a-159">Some balancers would send each different call to a different server.</span><span class="sxs-lookup"><span data-stu-id="3903a-159">Some balancers would send each different call to a different server.</span></span> <span data-ttu-id="3903a-160">Others provided session pinning/stickiness.</span><span class="sxs-lookup"><span data-stu-id="3903a-160">Others provided session pinning/stickiness.</span></span> <span data-ttu-id="3903a-161">More advanced balancers use actual estimation or reporting to route a calls based on its expected cost and current machine load.</span><span class="sxs-lookup"><span data-stu-id="3903a-161">More advanced balancers use actual estimation or reporting to route a calls based on its expected cost and current machine load.</span></span>

<span data-ttu-id="3903a-162">Network balancers or message routers tried to ensure that the web/worker tier remained roughly balanced.</span><span class="sxs-lookup"><span data-stu-id="3903a-162">Network balancers or message routers tried to ensure that the web/worker tier remained roughly balanced.</span></span> <span data-ttu-id="3903a-163">Strategies for balancing the data tier were different and depended on the data storage mechanism, usually centering around data sharding, caching, managed views, stored procedures, and other store-specific mechanisms.</span><span class="sxs-lookup"><span data-stu-id="3903a-163">Strategies for balancing the data tier were different and depended on the data storage mechanism, usually centering around data sharding, caching, managed views, stored procedures, and other store-specific mechanisms.</span></span>

<span data-ttu-id="3903a-164">While some of these strategies are interesting, the Service Fabric Cluster Resource Manager is not anything like a network load balancer or a cache.</span><span class="sxs-lookup"><span data-stu-id="3903a-164">While some of these strategies are interesting, the Service Fabric Cluster Resource Manager is not anything like a network load balancer or a cache.</span></span> <span data-ttu-id="3903a-165">A Network Load Balancer ensures that the frontends are balanced by moving traffic to where the services are running.</span><span class="sxs-lookup"><span data-stu-id="3903a-165">A Network Load Balancer ensures that the frontends are balanced by moving traffic to where the services are running.</span></span> <span data-ttu-id="3903a-166">The Service Fabric Cluster Resource Manager takes a different strategy.</span><span class="sxs-lookup"><span data-stu-id="3903a-166">The Service Fabric Cluster Resource Manager takes a different strategy.</span></span> <span data-ttu-id="3903a-167">Fundamentally, Service Fabric moves *services* to where they make the most sense, expecting traffic or load to follow.</span><span class="sxs-lookup"><span data-stu-id="3903a-167">Fundamentally, Service Fabric moves *services* to where they make the most sense, expecting traffic or load to follow.</span></span> <span data-ttu-id="3903a-168">For example, it might move services to nodes that are currently cold because the services that are there are not doing much work.</span><span class="sxs-lookup"><span data-stu-id="3903a-168">For example, it might move services to nodes that are currently cold because the services that are there are not doing much work.</span></span> <span data-ttu-id="3903a-169">The nodes may be cold since the services that were present were deleted or moved elsewhere.</span><span class="sxs-lookup"><span data-stu-id="3903a-169">The nodes may be cold since the services that were present were deleted or moved elsewhere.</span></span> <span data-ttu-id="3903a-170">As another example, the Cluster Resource Manager could also move a service away from a machine.</span><span class="sxs-lookup"><span data-stu-id="3903a-170">As another example, the Cluster Resource Manager could also move a service away from a machine.</span></span> <span data-ttu-id="3903a-171">Perhaps the machine is about to be upgraded or is overloaded due to a spike in consumption by the services running on it.</span><span class="sxs-lookup"><span data-stu-id="3903a-171">Perhaps the machine is about to be upgraded or is overloaded due to a spike in consumption by the services running on it.</span></span>

<span data-ttu-id="3903a-172">Because the Cluster Resource Manager is responsible for moving services around (not delivering network traffic to where services already are), it contains a different feature set compared to what you would find in a network load balancer.</span><span class="sxs-lookup"><span data-stu-id="3903a-172">Because the Cluster Resource Manager is responsible for moving services around (not delivering network traffic to where services already are), it contains a different feature set compared to what you would find in a network load balancer.</span></span> <span data-ttu-id="3903a-173">As we look in more detail, we'll find it employs fundamentally different strategies for ensuring that the hardware resources in the cluster are efficiently utilized.</span><span class="sxs-lookup"><span data-stu-id="3903a-173">As we look in more detail, we'll find it employs fundamentally different strategies for ensuring that the hardware resources in the cluster are efficiently utilized.</span></span>

## <a name="next-steps"></a><span data-ttu-id="3903a-174">Next steps</span><span class="sxs-lookup"><span data-stu-id="3903a-174">Next steps</span></span>
* <span data-ttu-id="3903a-175">For information on the architecture and information flow within the Cluster Resource Manager, check out [this article ](service-fabric-cluster-resource-manager-architecture.md)</span><span class="sxs-lookup"><span data-stu-id="3903a-175">For information on the architecture and information flow within the Cluster Resource Manager, check out [this article ](service-fabric-cluster-resource-manager-architecture.md)</span></span>
* <span data-ttu-id="3903a-176">The Cluster Resource Manager has many options for describing the cluster.</span><span class="sxs-lookup"><span data-stu-id="3903a-176">The Cluster Resource Manager has many options for describing the cluster.</span></span> <span data-ttu-id="3903a-177">To find out more about them, check out this article on [describing a Service Fabric cluster](service-fabric-cluster-resource-manager-cluster-description.md)</span><span class="sxs-lookup"><span data-stu-id="3903a-177">To find out more about them, check out this article on [describing a Service Fabric cluster](service-fabric-cluster-resource-manager-cluster-description.md)</span></span>
* <span data-ttu-id="3903a-178">For more information about the other options available for configuring services, check out the topic on the other Cluster Resource Manager configurations available [Learn about configuring Services](service-fabric-cluster-resource-manager-configure-services.md)</span><span class="sxs-lookup"><span data-stu-id="3903a-178">For more information about the other options available for configuring services, check out the topic on the other Cluster Resource Manager configurations available [Learn about configuring Services](service-fabric-cluster-resource-manager-configure-services.md)</span></span>
* <span data-ttu-id="3903a-179">Metrics are how the Service Fabric Cluster Resource Manger manages consumption and capacity in the cluster.</span><span class="sxs-lookup"><span data-stu-id="3903a-179">Metrics are how the Service Fabric Cluster Resource Manger manages consumption and capacity in the cluster.</span></span> <span data-ttu-id="3903a-180">To learn more about them and how to configure them check out [this article](service-fabric-cluster-resource-manager-metrics.md)</span><span class="sxs-lookup"><span data-stu-id="3903a-180">To learn more about them and how to configure them check out [this article](service-fabric-cluster-resource-manager-metrics.md)</span></span>
* <span data-ttu-id="3903a-181">The Cluster Resource Manager works with Service Fabric's management capabilities.</span><span class="sxs-lookup"><span data-stu-id="3903a-181">The Cluster Resource Manager works with Service Fabric's management capabilities.</span></span> <span data-ttu-id="3903a-182">To find out more about that integration, read [this article](service-fabric-cluster-resource-manager-management-integration.md)</span><span class="sxs-lookup"><span data-stu-id="3903a-182">To find out more about that integration, read [this article](service-fabric-cluster-resource-manager-management-integration.md)</span></span>
* <span data-ttu-id="3903a-183">To find out about how the Cluster Resource Manager manages and balances load in the cluster, check out the article on [balancing load](service-fabric-cluster-resource-manager-balancing.md)</span><span class="sxs-lookup"><span data-stu-id="3903a-183">To find out about how the Cluster Resource Manager manages and balances load in the cluster, check out the article on [balancing load](service-fabric-cluster-resource-manager-balancing.md)</span></span>

