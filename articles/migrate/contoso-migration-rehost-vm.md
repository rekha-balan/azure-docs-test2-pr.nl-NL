---
title: Rehost a Contoso app with migration to Azure VMs with Azure Site Recovery | Microsoft Docs
description: Learn how rehost an on-premises app with a lift-and-shift migration of on-premises machines to Azure, using the Azure Site Recovery service.
services: site-recovery
author: rayne-wiselman
manager: carmonm
ms.service: site-recovery
ms.topic: conceptual
ms.date: 09/05/2018
ms.author: raynew
ms.openlocfilehash: 40efd1b556db5cbebff80293a91a228afe17eab5
ms.sourcegitcommit: d1451406a010fd3aa854dc8e5b77dc5537d8050e
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 09/13/2018
ms.locfileid: "44856464"
---
# <a name="contoso-migration-rehost-an-on-premises-app-to-azure-vms"></a><span data-ttu-id="3a9e4-103">Contoso migration: Rehost an on-premises app to Azure VMs</span><span class="sxs-lookup"><span data-stu-id="3a9e4-103">Contoso migration: Rehost an on-premises app to Azure VMs</span></span>


<span data-ttu-id="3a9e4-104">This article demonstrates how Contoso rehosts the on-premises SmartHotel360 app in Azure, by migrating the app VMs to Azure VMs.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-104">This article demonstrates how Contoso rehosts the on-premises SmartHotel360 app in Azure, by migrating the app VMs to Azure VMs.</span></span>


<span data-ttu-id="3a9e4-105">This document is one in a series of articles that show how the fictitious company Contoso migrates on-premises resources to the Microsoft Azure cloud.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-105">This document is one in a series of articles that show how the fictitious company Contoso migrates on-premises resources to the Microsoft Azure cloud.</span></span> <span data-ttu-id="3a9e4-106">The series includes background information, and scenarios that illustrate setting up a migration infrastructure, assessing on-premises resources for migration, and running different types of migrations.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-106">The series includes background information, and scenarios that illustrate setting up a migration infrastructure, assessing on-premises resources for migration, and running different types of migrations.</span></span> <span data-ttu-id="3a9e4-107">Scenarios grow in complexity.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-107">Scenarios grow in complexity.</span></span> <span data-ttu-id="3a9e4-108">We'll add additional articles over time.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-108">We'll add additional articles over time.</span></span>

<span data-ttu-id="3a9e4-109">**Article**</span><span class="sxs-lookup"><span data-stu-id="3a9e4-109">**Article**</span></span> | <span data-ttu-id="3a9e4-110">**Details**</span><span class="sxs-lookup"><span data-stu-id="3a9e4-110">**Details**</span></span> | <span data-ttu-id="3a9e4-111">**Status**</span><span class="sxs-lookup"><span data-stu-id="3a9e4-111">**Status**</span></span>
--- | --- | ---
[<span data-ttu-id="3a9e4-112">Article 1: Overview</span><span class="sxs-lookup"><span data-stu-id="3a9e4-112">Article 1: Overview</span></span>](contoso-migration-overview.md) | <span data-ttu-id="3a9e4-113">Overview of the article series, Contoso's migration strategy, and the sample apps that are used in the series.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-113">Overview of the article series, Contoso's migration strategy, and the sample apps that are used in the series.</span></span> | <span data-ttu-id="3a9e4-114">Available</span><span class="sxs-lookup"><span data-stu-id="3a9e4-114">Available</span></span>
[<span data-ttu-id="3a9e4-115">Article 2: Deploy Azure infrastructure</span><span class="sxs-lookup"><span data-stu-id="3a9e4-115">Article 2: Deploy Azure infrastructure</span></span>](contoso-migration-infrastructure.md) | <span data-ttu-id="3a9e4-116">Contoso prepares its on-premises infrastructure and its Azure infrastructure for migration.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-116">Contoso prepares its on-premises infrastructure and its Azure infrastructure for migration.</span></span> <span data-ttu-id="3a9e4-117">The same infrastructure is used for all migration articles in the series.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-117">The same infrastructure is used for all migration articles in the series.</span></span> | <span data-ttu-id="3a9e4-118">Available</span><span class="sxs-lookup"><span data-stu-id="3a9e4-118">Available</span></span>
[<span data-ttu-id="3a9e4-119">Article 3: Assess on-premises resources for migration to Azure</span><span class="sxs-lookup"><span data-stu-id="3a9e4-119">Article 3: Assess on-premises resources for migration to Azure</span></span>](contoso-migration-assessment.md)  | <span data-ttu-id="3a9e4-120">Contoso runs an assessment of its on-premises SmartHotel360 app running on VMware.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-120">Contoso runs an assessment of its on-premises SmartHotel360 app running on VMware.</span></span> <span data-ttu-id="3a9e4-121">Contoso assesses app VMs using the Azure Migrate service, and the app SQL Server database using Data Migration Assistant.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-121">Contoso assesses app VMs using the Azure Migrate service, and the app SQL Server database using Data Migration Assistant.</span></span> | <span data-ttu-id="3a9e4-122">Available</span><span class="sxs-lookup"><span data-stu-id="3a9e4-122">Available</span></span>
[<span data-ttu-id="3a9e4-123">Article 4: Rehost an app on an Azure VM and SQL Database Managed Instance</span><span class="sxs-lookup"><span data-stu-id="3a9e4-123">Article 4: Rehost an app on an Azure VM and SQL Database Managed Instance</span></span>](contoso-migration-rehost-vm-sql-managed-instance.md) | <span data-ttu-id="3a9e4-124">Contoso runs a lift-and-shift migration to Azure for its on-premises SmartHotel360 app.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-124">Contoso runs a lift-and-shift migration to Azure for its on-premises SmartHotel360 app.</span></span> <span data-ttu-id="3a9e4-125">Contoso migrates the app front-end VM using [Azure Site Recovery](https://docs.microsoft.com/azure/site-recovery/site-recovery-overview).</span><span class="sxs-lookup"><span data-stu-id="3a9e4-125">Contoso migrates the app front-end VM using [Azure Site Recovery](https://docs.microsoft.com/azure/site-recovery/site-recovery-overview).</span></span> <span data-ttu-id="3a9e4-126">Contoso migrates the app database to an Azure SQL Database Managed Instance using the [Azure Database Migration Service](https://docs.microsoft.com/azure/dms/dms-overview).</span><span class="sxs-lookup"><span data-stu-id="3a9e4-126">Contoso migrates the app database to an Azure SQL Database Managed Instance using the [Azure Database Migration Service](https://docs.microsoft.com/azure/dms/dms-overview).</span></span> | <span data-ttu-id="3a9e4-127">Available</span><span class="sxs-lookup"><span data-stu-id="3a9e4-127">Available</span></span>   
<span data-ttu-id="3a9e4-128">Article 5: Rehost an app on Azure VMs</span><span class="sxs-lookup"><span data-stu-id="3a9e4-128">Article 5: Rehost an app on Azure VMs</span></span> | <span data-ttu-id="3a9e4-129">Contoso migrates its SmartHotel360 app VMs to Azure VMs using the Site Recovery service.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-129">Contoso migrates its SmartHotel360 app VMs to Azure VMs using the Site Recovery service.</span></span> | <span data-ttu-id="3a9e4-130">This article</span><span class="sxs-lookup"><span data-stu-id="3a9e4-130">This article</span></span>
[<span data-ttu-id="3a9e4-131">Article 6: Rehost an app on Azure VMs and in a  SQL Server AlwaysOn availability group</span><span class="sxs-lookup"><span data-stu-id="3a9e4-131">Article 6: Rehost an app on Azure VMs and in a  SQL Server AlwaysOn availability group</span></span>](contoso-migration-rehost-vm-sql-ag.md) | <span data-ttu-id="3a9e4-132">Contoso migrates the SmartHotel360 app.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-132">Contoso migrates the SmartHotel360 app.</span></span> <span data-ttu-id="3a9e4-133">Contoso uses Site Recovery to migrate the app VMs.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-133">Contoso uses Site Recovery to migrate the app VMs.</span></span> <span data-ttu-id="3a9e4-134">It uses the Database Migration Service to migrate the app database to a SQL Server cluster that's protected by an AlwaysOn availability group.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-134">It uses the Database Migration Service to migrate the app database to a SQL Server cluster that's protected by an AlwaysOn availability group.</span></span> | <span data-ttu-id="3a9e4-135">Available</span><span class="sxs-lookup"><span data-stu-id="3a9e4-135">Available</span></span> 
[<span data-ttu-id="3a9e4-136">Article 7: Rehost a Linux app on Azure VMs</span><span class="sxs-lookup"><span data-stu-id="3a9e4-136">Article 7: Rehost a Linux app on Azure VMs</span></span>](contoso-migration-rehost-linux-vm.md) | <span data-ttu-id="3a9e4-137">Contoso completes a lift-and-shift migration of the Linux osTicket app to Azure VMs, using Azure Site Recovery</span><span class="sxs-lookup"><span data-stu-id="3a9e4-137">Contoso completes a lift-and-shift migration of the Linux osTicket app to Azure VMs, using Azure Site Recovery</span></span> | <span data-ttu-id="3a9e4-138">Available</span><span class="sxs-lookup"><span data-stu-id="3a9e4-138">Available</span></span>
[<span data-ttu-id="3a9e4-139">Article 8: Rehost a Linux app on Azure VMs and Azure MySQL</span><span class="sxs-lookup"><span data-stu-id="3a9e4-139">Article 8: Rehost a Linux app on Azure VMs and Azure MySQL</span></span>](contoso-migration-rehost-linux-vm-mysql.md) | <span data-ttu-id="3a9e4-140">Contoso migrates the Linux osTicket app to Azure VMs using Azure Site Recovery, and migrates the app database to an Azure MySQL Server instance using MySQL Workbench.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-140">Contoso migrates the Linux osTicket app to Azure VMs using Azure Site Recovery, and migrates the app database to an Azure MySQL Server instance using MySQL Workbench.</span></span> | <span data-ttu-id="3a9e4-141">Available</span><span class="sxs-lookup"><span data-stu-id="3a9e4-141">Available</span></span>
[<span data-ttu-id="3a9e4-142">Article 9: Refactor an app on Azure Web Apps and Azure SQL database</span><span class="sxs-lookup"><span data-stu-id="3a9e4-142">Article 9: Refactor an app on Azure Web Apps and Azure SQL database</span></span>](contoso-migration-refactor-web-app-sql.md) | <span data-ttu-id="3a9e4-143">Contoso migrates the SmartHotel360 app to an Azure Web App, and migrates the app database to an Azure SQL Server instance with Database Migration Assistant</span><span class="sxs-lookup"><span data-stu-id="3a9e4-143">Contoso migrates the SmartHotel360 app to an Azure Web App, and migrates the app database to an Azure SQL Server instance with Database Migration Assistant</span></span> | <span data-ttu-id="3a9e4-144">Available</span><span class="sxs-lookup"><span data-stu-id="3a9e4-144">Available</span></span>
[<span data-ttu-id="3a9e4-145">Article 10: Refactor a Linux app on Azure Web Apps and Azure MySQL</span><span class="sxs-lookup"><span data-stu-id="3a9e4-145">Article 10: Refactor a Linux app on Azure Web Apps and Azure MySQL</span></span>](contoso-migration-refactor-linux-app-service-mysql.md) | <span data-ttu-id="3a9e4-146">Contoso migrates its Linux osTicket app to an Azure web app on multiple Azure regions using Azure Traffic Manager, integrated with GitHub for continuous delivery.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-146">Contoso migrates its Linux osTicket app to an Azure web app on multiple Azure regions using Azure Traffic Manager, integrated with GitHub for continuous delivery.</span></span> <span data-ttu-id="3a9e4-147">Contoso migrates the app database to an Azure Database for MySQL instance.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-147">Contoso migrates the app database to an Azure Database for MySQL instance.</span></span> | <span data-ttu-id="3a9e4-148">Available</span><span class="sxs-lookup"><span data-stu-id="3a9e4-148">Available</span></span> 
[<span data-ttu-id="3a9e4-149">Article 11: Refactor TFS on Azure DevOps Services</span><span class="sxs-lookup"><span data-stu-id="3a9e4-149">Article 11: Refactor TFS on Azure DevOps Services</span></span>](contoso-migration-tfs-vsts.md) | <span data-ttu-id="3a9e4-150">Contoso migrates its on-premises Team Foundation Server deployment to Azure DevOps Services in Azure.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-150">Contoso migrates its on-premises Team Foundation Server deployment to Azure DevOps Services in Azure.</span></span> | <span data-ttu-id="3a9e4-151">Available</span><span class="sxs-lookup"><span data-stu-id="3a9e4-151">Available</span></span>
[<span data-ttu-id="3a9e4-152">Article 12: Rearchitect an app on Azure containers and Azure SQL Database</span><span class="sxs-lookup"><span data-stu-id="3a9e4-152">Article 12: Rearchitect an app on Azure containers and Azure SQL Database</span></span>](contoso-migration-rearchitect-container-sql.md) | <span data-ttu-id="3a9e4-153">Contoso migrates its SmartHotel app to Azure.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-153">Contoso migrates its SmartHotel app to Azure.</span></span> <span data-ttu-id="3a9e4-154">Then, it rearchitects the app web tier as a Windows container running in Azure Service Fabric, and the database with Azure SQL Database.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-154">Then, it rearchitects the app web tier as a Windows container running in Azure Service Fabric, and the database with Azure SQL Database.</span></span> | <span data-ttu-id="3a9e4-155">Available</span><span class="sxs-lookup"><span data-stu-id="3a9e4-155">Available</span></span>
[<span data-ttu-id="3a9e4-156">Article 13: Rebuild an app in Azure</span><span class="sxs-lookup"><span data-stu-id="3a9e4-156">Article 13: Rebuild an app in Azure</span></span>](contoso-migration-rebuild.md) | <span data-ttu-id="3a9e4-157">Contoso rebuilds its SmartHotel app by using a range of Azure capabilities and services, including Azure App Service, Azure Kubernetes Service (AKS), Azure Functions, Azure Cognitive Services, and Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-157">Contoso rebuilds its SmartHotel app by using a range of Azure capabilities and services, including Azure App Service, Azure Kubernetes Service (AKS), Azure Functions, Azure Cognitive Services, and Azure Cosmos DB.</span></span> | <span data-ttu-id="3a9e4-158">Available</span><span class="sxs-lookup"><span data-stu-id="3a9e4-158">Available</span></span>


<span data-ttu-id="3a9e4-159">In this article, Contoso will migrate the two-tier Windows.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-159">In this article, Contoso will migrate the two-tier Windows.</span></span> <span data-ttu-id="3a9e4-160">NET SmartHotel360 app running on VMware VMs, to Azure.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-160">NET SmartHotel360 app running on VMware VMs, to Azure.</span></span> <span data-ttu-id="3a9e4-161">If you want to use this app, it's provided as open-source and you can download it from [github](https://github.com/Microsoft/SmartHotel360).</span><span class="sxs-lookup"><span data-stu-id="3a9e4-161">If you want to use this app, it's provided as open-source and you can download it from [github](https://github.com/Microsoft/SmartHotel360).</span></span>



## <a name="business-drivers"></a><span data-ttu-id="3a9e4-162">Business drivers</span><span class="sxs-lookup"><span data-stu-id="3a9e4-162">Business drivers</span></span>

<span data-ttu-id="3a9e4-163">The IT Leadership team has worked closely with business partners to understand what they want to achieve with this migration:</span><span class="sxs-lookup"><span data-stu-id="3a9e4-163">The IT Leadership team has worked closely with business partners to understand what they want to achieve with this migration:</span></span>

- <span data-ttu-id="3a9e4-164">**Address business growth**: Contoso is growing, and as a result there is pressure on their on-premises systems and infrastructure.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-164">**Address business growth**: Contoso is growing, and as a result there is pressure on their on-premises systems and infrastructure.</span></span>
- <span data-ttu-id="3a9e4-165">**Limit risk**: The SmartHotel360 app is critical for the Contoso business.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-165">**Limit risk**: The SmartHotel360 app is critical for the Contoso business.</span></span> <span data-ttu-id="3a9e4-166">It wants to move the app to Azure with zero risk.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-166">It wants to move the app to Azure with zero risk.</span></span>
- <span data-ttu-id="3a9e4-167">**Extend**:  Contoso doesn't want to modify the app, but does want to ensure that it's stable.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-167">**Extend**:  Contoso doesn't want to modify the app, but does want to ensure that it's stable.</span></span>


## <a name="migration-goals"></a><span data-ttu-id="3a9e4-168">Migration goals</span><span class="sxs-lookup"><span data-stu-id="3a9e4-168">Migration goals</span></span>

<span data-ttu-id="3a9e4-169">The Contoso cloud team has pinned down goals for this migration.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-169">The Contoso cloud team has pinned down goals for this migration.</span></span> <span data-ttu-id="3a9e4-170">These goals are used to determine the best migration method:</span><span class="sxs-lookup"><span data-stu-id="3a9e4-170">These goals are used to determine the best migration method:</span></span>

- <span data-ttu-id="3a9e4-171">After migration, the app in Azure should have the same performance capabilities as it does today in VMware.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-171">After migration, the app in Azure should have the same performance capabilities as it does today in VMware.</span></span>  <span data-ttu-id="3a9e4-172">The app will remain as critical in the cloud as it is on-premises.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-172">The app will remain as critical in the cloud as it is on-premises.</span></span> 
- <span data-ttu-id="3a9e4-173">Contoso doesn’t want to invest in this app.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-173">Contoso doesn’t want to invest in this app.</span></span>  <span data-ttu-id="3a9e4-174">It is important to the business, but in its current form Contoso simply wants to move it safely to the cloud.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-174">It is important to the business, but in its current form Contoso simply wants to move it safely to the cloud.</span></span>
- <span data-ttu-id="3a9e4-175">Contoso doesn't want to change the ops model for this app.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-175">Contoso doesn't want to change the ops model for this app.</span></span> <span data-ttu-id="3a9e4-176">Contoso do want to interact with it in the cloud in the same way that they do now.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-176">Contoso do want to interact with it in the cloud in the same way that they do now.</span></span>
- <span data-ttu-id="3a9e4-177">Contoso doesn't want to change any app functionality.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-177">Contoso doesn't want to change any app functionality.</span></span> <span data-ttu-id="3a9e4-178">Only the app location will change.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-178">Only the app location will change.</span></span>


## <a name="solution-design"></a><span data-ttu-id="3a9e4-179">Solution design</span><span class="sxs-lookup"><span data-stu-id="3a9e4-179">Solution design</span></span>

<span data-ttu-id="3a9e4-180">fter pinning down goals and requirements, Contoso designs and review a deployment solution, and identifies the migration process, including the Azure services that Contoso will use for the migration.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-180">fter pinning down goals and requirements, Contoso designs and review a deployment solution, and identifies the migration process, including the Azure services that Contoso will use for the migration.</span></span>

### <a name="current-app"></a><span data-ttu-id="3a9e4-181">Current app</span><span class="sxs-lookup"><span data-stu-id="3a9e4-181">Current app</span></span>

- <span data-ttu-id="3a9e4-182">The app is tiered across two VMs (**WEBVM** and **SQLVM**).</span><span class="sxs-lookup"><span data-stu-id="3a9e4-182">The app is tiered across two VMs (**WEBVM** and **SQLVM**).</span></span>
- <span data-ttu-id="3a9e4-183">The VMs are located on VMware ESXi host **contosohost1.contoso.com** (version 6.5).</span><span class="sxs-lookup"><span data-stu-id="3a9e4-183">The VMs are located on VMware ESXi host **contosohost1.contoso.com** (version 6.5).</span></span>
- <span data-ttu-id="3a9e4-184">The VMware environment is managed by vCenter Server 6.5 (**vcenter.contoso.com**), running on a VM.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-184">The VMware environment is managed by vCenter Server 6.5 (**vcenter.contoso.com**), running on a VM.</span></span>
- <span data-ttu-id="3a9e4-185">Contoso has an on-premises datacenter (contoso-datacenter), with an on-premises domain controller (**contosodc1**).</span><span class="sxs-lookup"><span data-stu-id="3a9e4-185">Contoso has an on-premises datacenter (contoso-datacenter), with an on-premises domain controller (**contosodc1**).</span></span>

### <a name="proposed-architecture"></a><span data-ttu-id="3a9e4-186">Proposed architecture</span><span class="sxs-lookup"><span data-stu-id="3a9e4-186">Proposed architecture</span></span>

- <span data-ttu-id="3a9e4-187">Since the app is a production workload, the app VMs in Azure will reside in the production resource group ContosoRG.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-187">Since the app is a production workload, the app VMs in Azure will reside in the production resource group ContosoRG.</span></span>
- <span data-ttu-id="3a9e4-188">The app VMs will be migrated to the primary Azure region (East US 2) and placed in the production network (VNET-PROD-EUS2).</span><span class="sxs-lookup"><span data-stu-id="3a9e4-188">The app VMs will be migrated to the primary Azure region (East US 2) and placed in the production network (VNET-PROD-EUS2).</span></span>
- <span data-ttu-id="3a9e4-189">The web frontend VM will reside in the frontend subnet (PROD-FE-EUS2) in the production network.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-189">The web frontend VM will reside in the frontend subnet (PROD-FE-EUS2) in the production network.</span></span>
- <span data-ttu-id="3a9e4-190">The database VM will reside in the database subnet (PROD-DB-EUS2) in the production network.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-190">The database VM will reside in the database subnet (PROD-DB-EUS2) in the production network.</span></span>
- <span data-ttu-id="3a9e4-191">The on-premises VMs in the Contoso datacenter will be decommissioned after the migration is done.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-191">The on-premises VMs in the Contoso datacenter will be decommissioned after the migration is done.</span></span>

![Scenario architecture](./media/contoso-migration-rehost-vm/architecture.png) 

### <a name="database-considerations"></a><span data-ttu-id="3a9e4-193">Database considerations</span><span class="sxs-lookup"><span data-stu-id="3a9e4-193">Database considerations</span></span>

<span data-ttu-id="3a9e4-194">As part of the solution design process, Contoso did a feature comparison between Azure SQL Database and SQL Server.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-194">As part of the solution design process, Contoso did a feature comparison between Azure SQL Database and SQL Server.</span></span> <span data-ttu-id="3a9e4-195">The following considerations helped them to decide to go with SQL Server running on an Azure IaaS VM:</span><span class="sxs-lookup"><span data-stu-id="3a9e4-195">The following considerations helped them to decide to go with SQL Server running on an Azure IaaS VM:</span></span> 

- <span data-ttu-id="3a9e4-196">Using an Azure VM running SQL Server seems to be an optimal solution if Contoso needs to customize the operating system or the database server, or if it might want to colocate and run third-party apps on the same VM.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-196">Using an Azure VM running SQL Server seems to be an optimal solution if Contoso needs to customize the operating system or the database server, or if it might want to colocate and run third-party apps on the same VM.</span></span>
- <span data-ttu-id="3a9e4-197">With Software Assurance, in future Contoso can exchange existing licenses for discounted rates on a SQL Database Managed Instance using the Azure Hybrid Benefit for SQL Server.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-197">With Software Assurance, in future Contoso can exchange existing licenses for discounted rates on a SQL Database Managed Instance using the Azure Hybrid Benefit for SQL Server.</span></span> <span data-ttu-id="3a9e4-198">This can save up to 30% on Managed Instance.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-198">This can save up to 30% on Managed Instance.</span></span>



### <a name="solution-review"></a><span data-ttu-id="3a9e4-199">Solution review</span><span class="sxs-lookup"><span data-stu-id="3a9e4-199">Solution review</span></span>

<span data-ttu-id="3a9e4-200">Contoso evaluates the proposed design by putting together a pros and cons list.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-200">Contoso evaluates the proposed design by putting together a pros and cons list.</span></span>

<span data-ttu-id="3a9e4-201">**Consideration**</span><span class="sxs-lookup"><span data-stu-id="3a9e4-201">**Consideration**</span></span> | <span data-ttu-id="3a9e4-202">**Details**</span><span class="sxs-lookup"><span data-stu-id="3a9e4-202">**Details**</span></span>
--- | ---
<span data-ttu-id="3a9e4-203">**Pros**</span><span class="sxs-lookup"><span data-stu-id="3a9e4-203">**Pros**</span></span> | <span data-ttu-id="3a9e4-204">Both the app VMs will be moved to Azure without changes, making the migration simple.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-204">Both the app VMs will be moved to Azure without changes, making the migration simple.</span></span><br/><br/> <span data-ttu-id="3a9e4-205">Since Contoso is using lift-and-shift for both app VMs, no special configuration or migration tools are needed for the app database.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-205">Since Contoso is using lift-and-shift for both app VMs, no special configuration or migration tools are needed for the app database.</span></span><br/><br/> <span data-ttu-id="3a9e4-206">Contoso can leverage their investment in Software Assurance, using the Azure Hybrid Benefit.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-206">Contoso can leverage their investment in Software Assurance, using the Azure Hybrid Benefit.</span></span><br/><br/> <span data-ttu-id="3a9e4-207">Contoso will retain full control of the app VMs in Azure.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-207">Contoso will retain full control of the app VMs in Azure.</span></span> 
<span data-ttu-id="3a9e4-208">**Cons**</span><span class="sxs-lookup"><span data-stu-id="3a9e4-208">**Cons**</span></span> | <span data-ttu-id="3a9e4-209">WEBVM and SQLVM are running Windows Server 2008 R2.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-209">WEBVM and SQLVM are running Windows Server 2008 R2.</span></span> <span data-ttu-id="3a9e4-210">The operating system is supported by Azure for specific roles (July 2018).</span><span class="sxs-lookup"><span data-stu-id="3a9e4-210">The operating system is supported by Azure for specific roles (July 2018).</span></span> <span data-ttu-id="3a9e4-211">[Learn more](https://support.microsoft.com/help/2721672/microsoft-server-software-support-for-microsoft-azure-virtual-machines).</span><span class="sxs-lookup"><span data-stu-id="3a9e4-211">[Learn more](https://support.microsoft.com/help/2721672/microsoft-server-software-support-for-microsoft-azure-virtual-machines).</span></span><br/><br/> <span data-ttu-id="3a9e4-212">The web and data tiers of the app will remain a single point of failover.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-212">The web and data tiers of the app will remain a single point of failover.</span></span></br><br/> <span data-ttu-id="3a9e4-213">SQLVM is running on SQL Server 2008 R2 which isn't in mainstream support.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-213">SQLVM is running on SQL Server 2008 R2 which isn't in mainstream support.</span></span> <span data-ttu-id="3a9e4-214">However it is supported for Azure VMs (July 2018).</span><span class="sxs-lookup"><span data-stu-id="3a9e4-214">However it is supported for Azure VMs (July 2018).</span></span> <span data-ttu-id="3a9e4-215">[Learn more](https://support.microsoft.com/en-us/help/956893).</span><span class="sxs-lookup"><span data-stu-id="3a9e4-215">[Learn more](https://support.microsoft.com/en-us/help/956893).</span></span><br/><br/> <span data-ttu-id="3a9e4-216">Contoso will need to continue supporting the app as Azure VMs rather than moving to a managed service such as Azure App Service and Azure SQL Database.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-216">Contoso will need to continue supporting the app as Azure VMs rather than moving to a managed service such as Azure App Service and Azure SQL Database.</span></span>



### <a name="migration-process"></a><span data-ttu-id="3a9e4-217">Migration process</span><span class="sxs-lookup"><span data-stu-id="3a9e4-217">Migration process</span></span>

<span data-ttu-id="3a9e4-218">Contoso will migrate the app frontend and database VMs to Azure VMs with Site Recovery:</span><span class="sxs-lookup"><span data-stu-id="3a9e4-218">Contoso will migrate the app frontend and database VMs to Azure VMs with Site Recovery:</span></span>

- <span data-ttu-id="3a9e4-219">As a first step, Contoso prepares and sets up Azure components for Site Recovery, and prepares the on-premises VMware infrastructure.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-219">As a first step, Contoso prepares and sets up Azure components for Site Recovery, and prepares the on-premises VMware infrastructure.</span></span>
- <span data-ttu-id="3a9e4-220">They already have the [Azure infrastructure](contoso-migration-infrastructure.md) in place, so Contoso just needs to add a couple of Azure components specifically for Site Recovery.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-220">They already have the [Azure infrastructure](contoso-migration-infrastructure.md) in place, so Contoso just needs to add a couple of Azure components specifically for Site Recovery.</span></span>
- <span data-ttu-id="3a9e4-221">With everything prepared, Contoso can start replicating the VMs.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-221">With everything prepared, Contoso can start replicating the VMs.</span></span>
- <span data-ttu-id="3a9e4-222">After replication is enabled and working, Contoso will migrate the VM by failing it over to Azure.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-222">After replication is enabled and working, Contoso will migrate the VM by failing it over to Azure.</span></span>

![Migration process](./media/contoso-migration-rehost-vm/migraton-process.png) 



### <a name="azure-services"></a><span data-ttu-id="3a9e4-224">Azure services</span><span class="sxs-lookup"><span data-stu-id="3a9e4-224">Azure services</span></span>

<span data-ttu-id="3a9e4-225">**Service**</span><span class="sxs-lookup"><span data-stu-id="3a9e4-225">**Service**</span></span> | <span data-ttu-id="3a9e4-226">**Description**</span><span class="sxs-lookup"><span data-stu-id="3a9e4-226">**Description**</span></span> | <span data-ttu-id="3a9e4-227">**Cost**</span><span class="sxs-lookup"><span data-stu-id="3a9e4-227">**Cost**</span></span>
--- | --- | ---
[<span data-ttu-id="3a9e4-228">Azure Site Recovery</span><span class="sxs-lookup"><span data-stu-id="3a9e4-228">Azure Site Recovery</span></span>](https://docs.microsoft.com/azure/site-recovery/) | <span data-ttu-id="3a9e4-229">The service orchestrates and manages migration and disaster recovery for Azure VMs, and on-premises VMs and physical servers.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-229">The service orchestrates and manages migration and disaster recovery for Azure VMs, and on-premises VMs and physical servers.</span></span>  | <span data-ttu-id="3a9e4-230">During replication to Azure, Azure Storage charges are incurred.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-230">During replication to Azure, Azure Storage charges are incurred.</span></span>  <span data-ttu-id="3a9e4-231">Azure VMs are created, and incur charges, when failover occurs.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-231">Azure VMs are created, and incur charges, when failover occurs.</span></span> <span data-ttu-id="3a9e4-232">[Learn more](https://azure.microsoft.com/pricing/details/site-recovery/) about charges and pricing.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-232">[Learn more](https://azure.microsoft.com/pricing/details/site-recovery/) about charges and pricing.</span></span>


## <a name="prerequisites"></a><span data-ttu-id="3a9e4-233">Prerequisites</span><span class="sxs-lookup"><span data-stu-id="3a9e4-233">Prerequisites</span></span>

<span data-ttu-id="3a9e4-234">Here's what Contoso needs to run this scenario.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-234">Here's what Contoso needs to run this scenario.</span></span>

<span data-ttu-id="3a9e4-235">**Requirements**</span><span class="sxs-lookup"><span data-stu-id="3a9e4-235">**Requirements**</span></span> | <span data-ttu-id="3a9e4-236">**Details**</span><span class="sxs-lookup"><span data-stu-id="3a9e4-236">**Details**</span></span>
--- | ---
<span data-ttu-id="3a9e4-237">**Azure subscription**</span><span class="sxs-lookup"><span data-stu-id="3a9e4-237">**Azure subscription**</span></span> | <span data-ttu-id="3a9e4-238">Contoso created subscriptions in an earlier article in this series.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-238">Contoso created subscriptions in an earlier article in this series.</span></span> <span data-ttu-id="3a9e4-239">If you don't have an Azure subscription, create a [free account](https://azure.microsoft.com/pricing/free-trial/).</span><span class="sxs-lookup"><span data-stu-id="3a9e4-239">If you don't have an Azure subscription, create a [free account](https://azure.microsoft.com/pricing/free-trial/).</span></span><br/><br/> <span data-ttu-id="3a9e4-240">If you create a free account, you're the administrator of your subscription and can perform all actions.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-240">If you create a free account, you're the administrator of your subscription and can perform all actions.</span></span><br/><br/> <span data-ttu-id="3a9e4-241">If you use an existing subscription and you're not the administrator, you need to work with the admin to assign you Owner or Contributor permissions.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-241">If you use an existing subscription and you're not the administrator, you need to work with the admin to assign you Owner or Contributor permissions.</span></span><br/><br/> <span data-ttu-id="3a9e4-242">If you need more granular permissions, review [this article](../site-recovery/site-recovery-role-based-linked-access-control.md).</span><span class="sxs-lookup"><span data-stu-id="3a9e4-242">If you need more granular permissions, review [this article](../site-recovery/site-recovery-role-based-linked-access-control.md).</span></span> 
<span data-ttu-id="3a9e4-243">**Azure infrastructure**</span><span class="sxs-lookup"><span data-stu-id="3a9e4-243">**Azure infrastructure**</span></span> | <span data-ttu-id="3a9e4-244">[Learn how](contoso-migration-infrastructure.md) Contoso set up an Azure infrastructure.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-244">[Learn how](contoso-migration-infrastructure.md) Contoso set up an Azure infrastructure.</span></span><br/><br/> <span data-ttu-id="3a9e4-245">Learn more about specific [network](https://docs.microsoft.com/azure/site-recovery/vmware-physical-azure-support-matrix#network) and [storage](https://docs.microsoft.com/azure/site-recovery/vmware-physical-azure-support-matrix#storage) requirements for Site Recovery.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-245">Learn more about specific [network](https://docs.microsoft.com/azure/site-recovery/vmware-physical-azure-support-matrix#network) and [storage](https://docs.microsoft.com/azure/site-recovery/vmware-physical-azure-support-matrix#storage) requirements for Site Recovery.</span></span>
<span data-ttu-id="3a9e4-246">**On-premises servers**</span><span class="sxs-lookup"><span data-stu-id="3a9e4-246">**On-premises servers**</span></span> | <span data-ttu-id="3a9e4-247">On-premises vCenter Servers should be running version 5.5, 6.0, or 6.5</span><span class="sxs-lookup"><span data-stu-id="3a9e4-247">On-premises vCenter Servers should be running version 5.5, 6.0, or 6.5</span></span><br/><br/> <span data-ttu-id="3a9e4-248">ESXi hosts should run version 5.5, 6.0 or 6.5</span><span class="sxs-lookup"><span data-stu-id="3a9e4-248">ESXi hosts should run version 5.5, 6.0 or 6.5</span></span><br/><br/> <span data-ttu-id="3a9e4-249">One or more VMware VMs should be running on the ESXi host.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-249">One or more VMware VMs should be running on the ESXi host.</span></span>
<span data-ttu-id="3a9e4-250">**On-premises VMs**</span><span class="sxs-lookup"><span data-stu-id="3a9e4-250">**On-premises VMs**</span></span> | <span data-ttu-id="3a9e4-251">VMs must meet [Azure requirements](https://docs.microsoft.com/azure/site-recovery/vmware-physical-azure-support-matrix#azure-vm-requirements).</span><span class="sxs-lookup"><span data-stu-id="3a9e4-251">VMs must meet [Azure requirements](https://docs.microsoft.com/azure/site-recovery/vmware-physical-azure-support-matrix#azure-vm-requirements).</span></span>


## <a name="scenario-steps"></a><span data-ttu-id="3a9e4-252">Scenario steps</span><span class="sxs-lookup"><span data-stu-id="3a9e4-252">Scenario steps</span></span>

<span data-ttu-id="3a9e4-253">Here's how Contoso admins will run the migration:</span><span class="sxs-lookup"><span data-stu-id="3a9e4-253">Here's how Contoso admins will run the migration:</span></span>

> [!div class="checklist"]
> * <span data-ttu-id="3a9e4-254">**Step 1: Prepare Azure for Site Recovery**: They create an Azure storage account to hold replicated data, and a Recovery Services vault.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-254">**Step 1: Prepare Azure for Site Recovery**: They create an Azure storage account to hold replicated data, and a Recovery Services vault.</span></span>
> * <span data-ttu-id="3a9e4-255">**Step 2: Prepare on-premises VMware for Site Recovery**: They prepare accounts for VM discovery and agent installation, and prepare to connect to Azure VMs after failover.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-255">**Step 2: Prepare on-premises VMware for Site Recovery**: They prepare accounts for VM discovery and agent installation, and prepare to connect to Azure VMs after failover.</span></span>
> * <span data-ttu-id="3a9e4-256">**Step 3: Replicate VMs**: They set up replication, and start replicating VMs to Azure storage.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-256">**Step 3: Replicate VMs**: They set up replication, and start replicating VMs to Azure storage.</span></span>
> * <span data-ttu-id="3a9e4-257">**Step 4: Migrate the VMs with Site Recovery**: They run a test failover to make sure everything's working, and then run a full failover to migrate the VMs to Azure.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-257">**Step 4: Migrate the VMs with Site Recovery**: They run a test failover to make sure everything's working, and then run a full failover to migrate the VMs to Azure.</span></span>




## <a name="step-1-prepare-azure-for-the-site-recovery-service"></a><span data-ttu-id="3a9e4-258">Step 1: Prepare Azure for the Site Recovery service</span><span class="sxs-lookup"><span data-stu-id="3a9e4-258">Step 1: Prepare Azure for the Site Recovery service</span></span>

<span data-ttu-id="3a9e4-259">Here are the Azure components Contoso needs to migrate the VMs to Azure:</span><span class="sxs-lookup"><span data-stu-id="3a9e4-259">Here are the Azure components Contoso needs to migrate the VMs to Azure:</span></span>

- <span data-ttu-id="3a9e4-260">A VNet in which Azure VMs will be located when they're created during failover.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-260">A VNet in which Azure VMs will be located when they're created during failover.</span></span>
- <span data-ttu-id="3a9e4-261">An Azure storage account to hold replicated data.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-261">An Azure storage account to hold replicated data.</span></span> 
- <span data-ttu-id="3a9e4-262">A Recovery Services vault in Azure.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-262">A Recovery Services vault in Azure.</span></span>

<span data-ttu-id="3a9e4-263">They set these up as follows:</span><span class="sxs-lookup"><span data-stu-id="3a9e4-263">They set these up as follows:</span></span>

1. <span data-ttu-id="3a9e4-264">Set up a network-Contoso already set up a network that can be for Site Recovery when they [deployed the Azure infrastructure](contoso-migration-infrastructure.md)</span><span class="sxs-lookup"><span data-stu-id="3a9e4-264">Set up a network-Contoso already set up a network that can be for Site Recovery when they [deployed the Azure infrastructure](contoso-migration-infrastructure.md)</span></span>

    - <span data-ttu-id="3a9e4-265">The SmartHotel360 app is a production app, and the VMs will be migrated to the Azure production network (VNET-PROD-EUS2) in the primary East US 2 region.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-265">The SmartHotel360 app is a production app, and the VMs will be migrated to the Azure production network (VNET-PROD-EUS2) in the primary East US 2 region.</span></span>
    - <span data-ttu-id="3a9e4-266">Both VMs will be placed in the ContosoRG resource group, which is used for production resources.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-266">Both VMs will be placed in the ContosoRG resource group, which is used for production resources.</span></span>
    - <span data-ttu-id="3a9e4-267">The app frontend VM (WEBVM) will migrate to the frontend subnet (PROD-FE-EUS2), in the production network.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-267">The app frontend VM (WEBVM) will migrate to the frontend subnet (PROD-FE-EUS2), in the production network.</span></span>
    - <span data-ttu-id="3a9e4-268">The app database VM (SQLVM) will migrate to the database subnet (PROD-DB-EUS2), in the production network.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-268">The app database VM (SQLVM) will migrate to the database subnet (PROD-DB-EUS2), in the production network.</span></span>

2. <span data-ttu-id="3a9e4-269">Set up a storage account-Contoso creates an Azure storage account (contosovmsacc20180528) in the primary region.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-269">Set up a storage account-Contoso creates an Azure storage account (contosovmsacc20180528) in the primary region.</span></span>
    - <span data-ttu-id="3a9e4-270">The storage account must be in the same region as the Recovery Services vault.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-270">The storage account must be in the same region as the Recovery Services vault.</span></span>
    - <span data-ttu-id="3a9e4-271">They use a general-purpose account, with standard storage, and LRS replication.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-271">They use a general-purpose account, with standard storage, and LRS replication.</span></span> 

    ![Site Recovery storage](./media/contoso-migration-rehost-vm/asr-storage.png)

3. <span data-ttu-id="3a9e4-273">Create a vault-With the network and storage account in place, Contoso now creates a Recovery Services vault (ContosoMigrationVault), and places it in the ContosoFailoverRG resource group in the primary East US 2 region.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-273">Create a vault-With the network and storage account in place, Contoso now creates a Recovery Services vault (ContosoMigrationVault), and places it in the ContosoFailoverRG resource group in the primary East US 2 region.</span></span>

    ![Recovery Services vault](./media/contoso-migration-rehost-vm/asr-vault.png)

<span data-ttu-id="3a9e4-275">**Need more help?**</span><span class="sxs-lookup"><span data-stu-id="3a9e4-275">**Need more help?**</span></span>

<span data-ttu-id="3a9e4-276">[Learn about](https://docs.microsoft.com/azure/site-recovery/tutorial-prepare-azure) setting up Azure for Site Recovery.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-276">[Learn about](https://docs.microsoft.com/azure/site-recovery/tutorial-prepare-azure) setting up Azure for Site Recovery.</span></span>


## <a name="step-2-prepare-on-premises-vmware-for-site-recovery"></a><span data-ttu-id="3a9e4-277">Step 2: Prepare on-premises VMware for Site Recovery</span><span class="sxs-lookup"><span data-stu-id="3a9e4-277">Step 2: Prepare on-premises VMware for Site Recovery</span></span>

<span data-ttu-id="3a9e4-278">Here's what Contoso prepares on-premises:</span><span class="sxs-lookup"><span data-stu-id="3a9e4-278">Here's what Contoso prepares on-premises:</span></span>

- <span data-ttu-id="3a9e4-279">An account on the vCenter server or vSphere ESXi host, to automate VM discovery.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-279">An account on the vCenter server or vSphere ESXi host, to automate VM discovery.</span></span>
- <span data-ttu-id="3a9e4-280">An account that allows automatic installation of the Mobility service on the VMware VMs.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-280">An account that allows automatic installation of the Mobility service on the VMware VMs.</span></span> 
- <span data-ttu-id="3a9e4-281">On-premises VM settings, so that Contoso can connect to the replicated Azure VMs after failover.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-281">On-premises VM settings, so that Contoso can connect to the replicated Azure VMs after failover.</span></span>


### <a name="prepare-an-account-for-automatic-discovery"></a><span data-ttu-id="3a9e4-282">Prepare an account for automatic discovery</span><span class="sxs-lookup"><span data-stu-id="3a9e4-282">Prepare an account for automatic discovery</span></span>

<span data-ttu-id="3a9e4-283">Site Recovery needs access to VMware servers to:</span><span class="sxs-lookup"><span data-stu-id="3a9e4-283">Site Recovery needs access to VMware servers to:</span></span>

- <span data-ttu-id="3a9e4-284">Automatically discover VMs.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-284">Automatically discover VMs.</span></span> 
- <span data-ttu-id="3a9e4-285">Orchestrate replication, failover, and failback for VMs.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-285">Orchestrate replication, failover, and failback for VMs.</span></span>
- <span data-ttu-id="3a9e4-286">At least a read-only account is required.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-286">At least a read-only account is required.</span></span> <span data-ttu-id="3a9e4-287">The account should be able to run operations such as creating and removing disks, and turning on VMs.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-287">The account should be able to run operations such as creating and removing disks, and turning on VMs.</span></span>

<span data-ttu-id="3a9e4-288">Contoso admins set up the account as follows:</span><span class="sxs-lookup"><span data-stu-id="3a9e4-288">Contoso admins set up the account as follows:</span></span>

1. <span data-ttu-id="3a9e4-289">They create a role at the vCenter level.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-289">They create a role at the vCenter level.</span></span>
2. <span data-ttu-id="3a9e4-290">They assign that role the required permissions.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-290">They assign that role the required permissions.</span></span>



### <a name="prepare-an-account-for-mobility-service-installation"></a><span data-ttu-id="3a9e4-291">Prepare an account for Mobility service installation</span><span class="sxs-lookup"><span data-stu-id="3a9e4-291">Prepare an account for Mobility service installation</span></span>

<span data-ttu-id="3a9e4-292">The Mobility service must be installed on each VM.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-292">The Mobility service must be installed on each VM.</span></span>

- <span data-ttu-id="3a9e4-293">Site Recovery can do an automatic push installation of the Mobility service when VM replication is enabled.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-293">Site Recovery can do an automatic push installation of the Mobility service when VM replication is enabled.</span></span>
- <span data-ttu-id="3a9e4-294">An account is required, so that Site Recovery can access the VMs for the push installation.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-294">An account is required, so that Site Recovery can access the VMs for the push installation.</span></span> <span data-ttu-id="3a9e4-295">You specify this account when you set up replication.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-295">You specify this account when you set up replication.</span></span>
- <span data-ttu-id="3a9e4-296">The account can be domain or local, with permissions to install on the VMs.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-296">The account can be domain or local, with permissions to install on the VMs.</span></span>


### <a name="prepare-to-connect-to-azure-vms-after-failover"></a><span data-ttu-id="3a9e4-297">Prepare to connect to Azure VMs after failover</span><span class="sxs-lookup"><span data-stu-id="3a9e4-297">Prepare to connect to Azure VMs after failover</span></span>

<span data-ttu-id="3a9e4-298">After failover, Contoso wants to connect to the Azure VMs.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-298">After failover, Contoso wants to connect to the Azure VMs.</span></span> <span data-ttu-id="3a9e4-299">To do this, Contoso admins do the following before migration:</span><span class="sxs-lookup"><span data-stu-id="3a9e4-299">To do this, Contoso admins do the following before migration:</span></span>

1. <span data-ttu-id="3a9e4-300">For access over the internet they:</span><span class="sxs-lookup"><span data-stu-id="3a9e4-300">For access over the internet they:</span></span>

 - <span data-ttu-id="3a9e4-301">Enable RDP on the on-premises VM before failover.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-301">Enable RDP on the on-premises VM before failover.</span></span>
 - <span data-ttu-id="3a9e4-302">Ensure that TCP and UDP rules are added for the **Public** profile.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-302">Ensure that TCP and UDP rules are added for the **Public** profile.</span></span>
 - <span data-ttu-id="3a9e4-303">Check that RDP is allowed in **Windows Firewall** > **Allowed Apps** for all profiles.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-303">Check that RDP is allowed in **Windows Firewall** > **Allowed Apps** for all profiles.</span></span>
 
2. <span data-ttu-id="3a9e4-304">For access over site-to-site VPN, they:</span><span class="sxs-lookup"><span data-stu-id="3a9e4-304">For access over site-to-site VPN, they:</span></span>

 - <span data-ttu-id="3a9e4-305">Enable RDP on the on-premises machine.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-305">Enable RDP on the on-premises machine.</span></span>
 - <span data-ttu-id="3a9e4-306">Allow RDP in the **Windows Firewall** -> **Allowed apps and features**, for **Domain and Private** networks.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-306">Allow RDP in the **Windows Firewall** -> **Allowed apps and features**, for **Domain and Private** networks.</span></span>
 - <span data-ttu-id="3a9e4-307">Set the operating system's SAN policy on the on-premises VM to **OnlineAll**.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-307">Set the operating system's SAN policy on the on-premises VM to **OnlineAll**.</span></span>

<span data-ttu-id="3a9e4-308">In addition, when they run a failover they need to check the following:</span><span class="sxs-lookup"><span data-stu-id="3a9e4-308">In addition, when they run a failover they need to check the following:</span></span>

- <span data-ttu-id="3a9e4-309">There should be no Windows updates pending on the VM when triggering a failover.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-309">There should be no Windows updates pending on the VM when triggering a failover.</span></span> <span data-ttu-id="3a9e4-310">If there are, they won't be able to log into the VM until the update completes.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-310">If there are, they won't be able to log into the VM until the update completes.</span></span>
- <span data-ttu-id="3a9e4-311">After failover, they can check **Boot diagnostics** to view a screenshot of the VM.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-311">After failover, they can check **Boot diagnostics** to view a screenshot of the VM.</span></span> <span data-ttu-id="3a9e4-312">If this doesn't work, they should verify that the VM is running, and review these [troubleshooting tips](http://social.technet.microsoft.com/wiki/contents/articles/31666.troubleshooting-remote-desktop-connection-after-failover-using-asr.aspx).</span><span class="sxs-lookup"><span data-stu-id="3a9e4-312">If this doesn't work, they should verify that the VM is running, and review these [troubleshooting tips](http://social.technet.microsoft.com/wiki/contents/articles/31666.troubleshooting-remote-desktop-connection-after-failover-using-asr.aspx).</span></span>


<span data-ttu-id="3a9e4-313">**Need more help?**</span><span class="sxs-lookup"><span data-stu-id="3a9e4-313">**Need more help?**</span></span>

- <span data-ttu-id="3a9e4-314">[Learn about](https://docs.microsoft.com/azure/site-recovery/vmware-azure-tutorial-prepare-on-premises#prepare-an-account-for-automatic-discovery) creating and assigning a role for automatic discovery.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-314">[Learn about](https://docs.microsoft.com/azure/site-recovery/vmware-azure-tutorial-prepare-on-premises#prepare-an-account-for-automatic-discovery) creating and assigning a role for automatic discovery.</span></span>
- <span data-ttu-id="3a9e4-315">[Learn about](https://docs.microsoft.com/azure/site-recovery/vmware-azure-tutorial-prepare-on-premises#prepare-an-account-for-mobility-service-installation) creating an account for push installation of the Mobility service.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-315">[Learn about](https://docs.microsoft.com/azure/site-recovery/vmware-azure-tutorial-prepare-on-premises#prepare-an-account-for-mobility-service-installation) creating an account for push installation of the Mobility service.</span></span>


## <a name="step-3-replicate-the-on-premises-vms"></a><span data-ttu-id="3a9e4-316">Step 3: Replicate the on-premises VMs</span><span class="sxs-lookup"><span data-stu-id="3a9e4-316">Step 3: Replicate the on-premises VMs</span></span>

<span data-ttu-id="3a9e4-317">Before Contoso admins can run a migration to Azure, they need to set up and enable replication.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-317">Before Contoso admins can run a migration to Azure, they need to set up and enable replication.</span></span>

### <a name="set-a-replication-goal"></a><span data-ttu-id="3a9e4-318">Set a replication goal</span><span class="sxs-lookup"><span data-stu-id="3a9e4-318">Set a replication goal</span></span>

1. <span data-ttu-id="3a9e4-319">In the vault, under the vault name (ContosoVMVault) they select a replication goal (**Getting Started** > **Site Recovery** > **Prepare infrastructure**.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-319">In the vault, under the vault name (ContosoVMVault) they select a replication goal (**Getting Started** > **Site Recovery** > **Prepare infrastructure**.</span></span>
2. <span data-ttu-id="3a9e4-320">They specify that their machines are located on-premises, running on VMware, and replicating to Azure.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-320">They specify that their machines are located on-premises, running on VMware, and replicating to Azure.</span></span>

    ![Replication goal](./media/contoso-migration-rehost-vm/replication-goal.png)

### <a name="confirm-deployment-planning"></a><span data-ttu-id="3a9e4-322">Confirm deployment planning</span><span class="sxs-lookup"><span data-stu-id="3a9e4-322">Confirm deployment planning</span></span>

<span data-ttu-id="3a9e4-323">To continue, they confirm that they have completed deployment planning, by selecting **Yes, I have done it**.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-323">To continue, they confirm that they have completed deployment planning, by selecting **Yes, I have done it**.</span></span> <span data-ttu-id="3a9e4-324">In this scenario, Contoso are only migrating two VMs, and don't need deployment planning.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-324">In this scenario, Contoso are only migrating two VMs, and don't need deployment planning.</span></span>


### <a name="set-up-the-source-environment"></a><span data-ttu-id="3a9e4-325">Set up the source environment</span><span class="sxs-lookup"><span data-stu-id="3a9e4-325">Set up the source environment</span></span>

<span data-ttu-id="3a9e4-326">Contoso admins need to configure the source environment.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-326">Contoso admins need to configure the source environment.</span></span> <span data-ttu-id="3a9e4-327">To do this, they download an OVF template and use it to deploy the Site Recovery configuration server as a highly available, on-premises VMware VM.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-327">To do this, they download an OVF template and use it to deploy the Site Recovery configuration server as a highly available, on-premises VMware VM.</span></span> <span data-ttu-id="3a9e4-328">After the configuration server is up and running, they register it in the vault.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-328">After the configuration server is up and running, they register it in the vault.</span></span>

<span data-ttu-id="3a9e4-329">The configuration server runs a number of components:</span><span class="sxs-lookup"><span data-stu-id="3a9e4-329">The configuration server runs a number of components:</span></span>

- <span data-ttu-id="3a9e4-330">The configuration server component that coordinates communications between on-premises and Azure and manages data replication.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-330">The configuration server component that coordinates communications between on-premises and Azure and manages data replication.</span></span>
- <span data-ttu-id="3a9e4-331">The process server that acts as a replication gateway.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-331">The process server that acts as a replication gateway.</span></span> <span data-ttu-id="3a9e4-332">It receives replication data; optimizes it with caching, compression, and encryption; and sends it to Azure storage.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-332">It receives replication data; optimizes it with caching, compression, and encryption; and sends it to Azure storage.</span></span>
- <span data-ttu-id="3a9e4-333">The process server also installs Mobility Service on VMs you want to replicate and performs automatic discovery of on-premises VMware VMs.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-333">The process server also installs Mobility Service on VMs you want to replicate and performs automatic discovery of on-premises VMware VMs.</span></span>



<span data-ttu-id="3a9e4-334">Contoso admins perform these steps as follows:</span><span class="sxs-lookup"><span data-stu-id="3a9e4-334">Contoso admins perform these steps as follows:</span></span>

1. <span data-ttu-id="3a9e4-335">In the vault, they download the OVF template from **Prepare Infrastructure** > **Source** > **Configuration Server**.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-335">In the vault, they download the OVF template from **Prepare Infrastructure** > **Source** > **Configuration Server**.</span></span>
    
    ![Download OVF](./media/contoso-migration-rehost-vm/add-cs.png)

2. <span data-ttu-id="3a9e4-337">They import the template into VMware to create and deploy the VM.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-337">They import the template into VMware to create and deploy the VM.</span></span>

    ![OVF template](./media/contoso-migration-rehost-vm/vcenter-wizard.png)

3.  <span data-ttu-id="3a9e4-339">When they turn on the VM for the first time, it boots up into a Windows Server 2016 installation experience.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-339">When they turn on the VM for the first time, it boots up into a Windows Server 2016 installation experience.</span></span> <span data-ttu-id="3a9e4-340">They accept the license agreement, and enter an administrator password.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-340">They accept the license agreement, and enter an administrator password.</span></span>
4. <span data-ttu-id="3a9e4-341">After the installation finishes, they sign in to the VM as the administrator.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-341">After the installation finishes, they sign in to the VM as the administrator.</span></span> <span data-ttu-id="3a9e4-342">At first sign-in, the Azure Site Recovery Configuration Tool runs by default.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-342">At first sign-in, the Azure Site Recovery Configuration Tool runs by default.</span></span>
5. <span data-ttu-id="3a9e4-343">In the tool, they specify a name to register the configuration server in the vault.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-343">In the tool, they specify a name to register the configuration server in the vault.</span></span>
6. <span data-ttu-id="3a9e4-344">The tool checks that the VM can connect to Azure.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-344">The tool checks that the VM can connect to Azure.</span></span> <span data-ttu-id="3a9e4-345">After the connection is established, they sign in to the Azure subscription.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-345">After the connection is established, they sign in to the Azure subscription.</span></span> <span data-ttu-id="3a9e4-346">The credentials must have access to the vault in which they'll register the configuration server.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-346">The credentials must have access to the vault in which they'll register the configuration server.</span></span>

    ![Register configuration server](./media/contoso-migration-rehost-vm/config-server-register2.png)

7. <span data-ttu-id="3a9e4-348">The tool performs some configuration tasks and then reboots.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-348">The tool performs some configuration tasks and then reboots.</span></span>
8. <span data-ttu-id="3a9e4-349">They sign in to the machine again, and the Configuration Server Management Wizard starts automatically.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-349">They sign in to the machine again, and the Configuration Server Management Wizard starts automatically.</span></span>
9. <span data-ttu-id="3a9e4-350">In the wizard, they select the NIC to receive replication traffic.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-350">In the wizard, they select the NIC to receive replication traffic.</span></span> <span data-ttu-id="3a9e4-351">This setting can't be changed after it's configured.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-351">This setting can't be changed after it's configured.</span></span>
10. <span data-ttu-id="3a9e4-352">They select the subscription, resource group, and the vault in which to register the configuration server.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-352">They select the subscription, resource group, and the vault in which to register the configuration server.</span></span>
        <span data-ttu-id="3a9e4-353">![vault](./media/contoso-migration-rehost-vm/cswiz1.png)</span><span class="sxs-lookup"><span data-stu-id="3a9e4-353">![vault](./media/contoso-migration-rehost-vm/cswiz1.png)</span></span> 

10. <span data-ttu-id="3a9e4-354">They download and install MySQL Server, and VMWare PowerCLI.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-354">They download and install MySQL Server, and VMWare PowerCLI.</span></span> 
11. <span data-ttu-id="3a9e4-355">After validation, they specify the FQDN or IP address of the vCenter server or vSphere host.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-355">After validation, they specify the FQDN or IP address of the vCenter server or vSphere host.</span></span> <span data-ttu-id="3a9e4-356">They leave the default port, and specify a friendly name for the server in Azure.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-356">They leave the default port, and specify a friendly name for the server in Azure.</span></span>
12. <span data-ttu-id="3a9e4-357">They specify the account that they created for automatic discovery, and the credentials that are used to automatically install the Mobility Service.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-357">They specify the account that they created for automatic discovery, and the credentials that are used to automatically install the Mobility Service.</span></span> <span data-ttu-id="3a9e4-358">For Windows machines, the account needs local administrator privileges on the VMs.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-358">For Windows machines, the account needs local administrator privileges on the VMs.</span></span>

    ![vCenter](./media/contoso-migration-rehost-vm/cswiz2.png)

7. <span data-ttu-id="3a9e4-360">After registration finishes, in the Azure portal, they double check that the configuration server and VMware server are listed on the **Source** page in the vault.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-360">After registration finishes, in the Azure portal, they double check that the configuration server and VMware server are listed on the **Source** page in the vault.</span></span> <span data-ttu-id="3a9e4-361">Discovery can take 15 minutes or more.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-361">Discovery can take 15 minutes or more.</span></span> 
8. <span data-ttu-id="3a9e4-362">Site Recovery then connects to VMware servers using the specified settings, and discovers VMs.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-362">Site Recovery then connects to VMware servers using the specified settings, and discovers VMs.</span></span>

### <a name="set-up-the-target"></a><span data-ttu-id="3a9e4-363">Set up the target</span><span class="sxs-lookup"><span data-stu-id="3a9e4-363">Set up the target</span></span>

<span data-ttu-id="3a9e4-364">Now Contoso admins specify the target replication settings.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-364">Now Contoso admins specify the target replication settings.</span></span>

1. <span data-ttu-id="3a9e4-365">In **Prepare infrastructure** > **Target**, they select the target settings.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-365">In **Prepare infrastructure** > **Target**, they select the target settings.</span></span>
2. <span data-ttu-id="3a9e4-366">Site Recovery checks that there's an Azure storage account and network in the specified target location.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-366">Site Recovery checks that there's an Azure storage account and network in the specified target location.</span></span>

### <a name="create-a-replication-policy"></a><span data-ttu-id="3a9e4-367">Create a replication policy</span><span class="sxs-lookup"><span data-stu-id="3a9e4-367">Create a replication policy</span></span>

<span data-ttu-id="3a9e4-368">Now Contoso admins can create a replication policy.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-368">Now Contoso admins can create a replication policy.</span></span>

1. <span data-ttu-id="3a9e4-369">In  **Prepare infrastructure** > **Replication Settings** > **Replication Policy** >  **Create and Associate**, they create a policy **ContosoMigrationPolicy**.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-369">In  **Prepare infrastructure** > **Replication Settings** > **Replication Policy** >  **Create and Associate**, they create a policy **ContosoMigrationPolicy**.</span></span>
2. <span data-ttu-id="3a9e4-370">They use the default settings:</span><span class="sxs-lookup"><span data-stu-id="3a9e4-370">They use the default settings:</span></span>
    - <span data-ttu-id="3a9e4-371">**RPO threshold**: Default of 60 minutes.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-371">**RPO threshold**: Default of 60 minutes.</span></span> <span data-ttu-id="3a9e4-372">This value defines how often recovery points are created.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-372">This value defines how often recovery points are created.</span></span> <span data-ttu-id="3a9e4-373">An alert is generated if continuous replication exceeds this limit.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-373">An alert is generated if continuous replication exceeds this limit.</span></span>
    - <span data-ttu-id="3a9e4-374">**Recovery point retention**.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-374">**Recovery point retention**.</span></span> <span data-ttu-id="3a9e4-375">Default of 24 hours.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-375">Default of 24 hours.</span></span> <span data-ttu-id="3a9e4-376">This value specifies how long the retention window is for each recovery point.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-376">This value specifies how long the retention window is for each recovery point.</span></span> <span data-ttu-id="3a9e4-377">Replicated VMs can be recovered to any point in a window.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-377">Replicated VMs can be recovered to any point in a window.</span></span>
    - <span data-ttu-id="3a9e4-378">**App-consistent snapshot frequency**.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-378">**App-consistent snapshot frequency**.</span></span> <span data-ttu-id="3a9e4-379">Default of one hour.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-379">Default of one hour.</span></span> <span data-ttu-id="3a9e4-380">This value specifies the frequency at which application-consistent snapshots are created.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-380">This value specifies the frequency at which application-consistent snapshots are created.</span></span>

        ![Create replication policy](./media/contoso-migration-rehost-vm/replication-policy.png)

5. <span data-ttu-id="3a9e4-382">The policy is automatically associated with the configuration server.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-382">The policy is automatically associated with the configuration server.</span></span> 

    ![Associate replication policy](./media/contoso-migration-rehost-vm/replication-policy2.png)

### <a name="enable-replication-for-webvm"></a><span data-ttu-id="3a9e4-384">Enable replication for WEBVM</span><span class="sxs-lookup"><span data-stu-id="3a9e4-384">Enable replication for WEBVM</span></span>

<span data-ttu-id="3a9e4-385">With everything in place, Contoso admins can now enable replication for the VMs.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-385">With everything in place, Contoso admins can now enable replication for the VMs.</span></span> <span data-ttu-id="3a9e4-386">They start with WebVM.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-386">They start with WebVM.</span></span>

1. <span data-ttu-id="3a9e4-387">In **Replicate application** > **Source** > **+Replicate** they select the source settings.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-387">In **Replicate application** > **Source** > **+Replicate** they select the source settings.</span></span>
2. <span data-ttu-id="3a9e4-388">They indicate that they want to enable VMs, select the vCenter server, and the configuration server.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-388">They indicate that they want to enable VMs, select the vCenter server, and the configuration server.</span></span>

    ![Enable replication](./media/contoso-migration-rehost-vm/enable-replication1.png)

3. <span data-ttu-id="3a9e4-390">They select the target settings, including the resource group and Azure network, and the storage account.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-390">They select the target settings, including the resource group and Azure network, and the storage account.</span></span>

     ![Enable replication](./media/contoso-migration-rehost-vm/enable-replication2.png)

4. <span data-ttu-id="3a9e4-392">They select **WebVM** for replication, check the replication policy, and enable replication.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-392">They select **WebVM** for replication, check the replication policy, and enable replication.</span></span>

    - <span data-ttu-id="3a9e4-393">At this stage they only selects WEBVM because VNet and subnet must be selected, and the app VMs will be placed in different subnets.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-393">At this stage they only selects WEBVM because VNet and subnet must be selected, and the app VMs will be placed in different subnets.</span></span>
    - <span data-ttu-id="3a9e4-394">Site Recovery automatically installs the Mobility service on the VM when replication is enabled.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-394">Site Recovery automatically installs the Mobility service on the VM when replication is enabled.</span></span>

    ![Enable replication](./media/contoso-migration-rehost-vm/enable-replication3.png)

5. <span data-ttu-id="3a9e4-396">They track replication progress in **Jobs**.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-396">They track replication progress in **Jobs**.</span></span> <span data-ttu-id="3a9e4-397">After the **Finalize Protection** job runs, the machine is ready for failover.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-397">After the **Finalize Protection** job runs, the machine is ready for failover.</span></span>
6. <span data-ttu-id="3a9e4-398">In **Essentials** in the Azure portal, they can see the structure for the VMs replicating to Azure.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-398">In **Essentials** in the Azure portal, they can see the structure for the VMs replicating to Azure.</span></span>


### <a name="enable-replication-for-sqlvm"></a><span data-ttu-id="3a9e4-399">Enable replication for SQLVM</span><span class="sxs-lookup"><span data-stu-id="3a9e4-399">Enable replication for SQLVM</span></span>

<span data-ttu-id="3a9e4-400">Now Contoso admins can start replicating the SQLVM machine, using the same process as above.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-400">Now Contoso admins can start replicating the SQLVM machine, using the same process as above.</span></span>

1. <span data-ttu-id="3a9e4-401">They select source settings.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-401">They select source settings.</span></span>

    ![Enable replication](./media/contoso-migration-rehost-vm/enable-replication1.png)

2. <span data-ttu-id="3a9e4-403">They then specify the target settings.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-403">They then specify the target settings.</span></span>

     ![Enable replication](./media/contoso-migration-rehost-vm/enable-replication2-sqlvm.png)

3. <span data-ttu-id="3a9e4-405">They select SQLVM for replication.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-405">They select SQLVM for replication.</span></span> 

    ![Enable replication](./media/contoso-migration-rehost-vm/enable-replication3-sqlvm.png)

4. <span data-ttu-id="3a9e4-407">They apply the same replication policy that was used for WEBVM, and enable replication.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-407">They apply the same replication policy that was used for WEBVM, and enable replication.</span></span>

    ![Infrastructure view](./media/contoso-migration-rehost-vm/essentials.png)

<span data-ttu-id="3a9e4-409">**Need more help?**</span><span class="sxs-lookup"><span data-stu-id="3a9e4-409">**Need more help?**</span></span>

- <span data-ttu-id="3a9e4-410">You can read a full walkthrough of all these steps in [Set up disaster recovery for on-premises VMware VMs](https://docs.microsoft.com/azure/site-recovery/vmware-azure-tutorial).</span><span class="sxs-lookup"><span data-stu-id="3a9e4-410">You can read a full walkthrough of all these steps in [Set up disaster recovery for on-premises VMware VMs](https://docs.microsoft.com/azure/site-recovery/vmware-azure-tutorial).</span></span>
- <span data-ttu-id="3a9e4-411">Detailed instructions are available to help you [set up the source environment](https://docs.microsoft.com/azure/site-recovery/vmware-azure-set-up-source), [deploy the configuration server](https://docs.microsoft.com/azure/site-recovery/vmware-azure-deploy-configuration-server), and [configure replication settings](https://docs.microsoft.com/azure/site-recovery/vmware-azure-set-up-replication).</span><span class="sxs-lookup"><span data-stu-id="3a9e4-411">Detailed instructions are available to help you [set up the source environment](https://docs.microsoft.com/azure/site-recovery/vmware-azure-set-up-source), [deploy the configuration server](https://docs.microsoft.com/azure/site-recovery/vmware-azure-deploy-configuration-server), and [configure replication settings](https://docs.microsoft.com/azure/site-recovery/vmware-azure-set-up-replication).</span></span>
- <span data-ttu-id="3a9e4-412">You can learn more about [enabling replication](https://docs.microsoft.com/azure/site-recovery/vmware-azure-enable-replication).</span><span class="sxs-lookup"><span data-stu-id="3a9e4-412">You can learn more about [enabling replication](https://docs.microsoft.com/azure/site-recovery/vmware-azure-enable-replication).</span></span>


## <a name="step-4-migrate-the-vms"></a><span data-ttu-id="3a9e4-413">Step 4: Migrate the VMs</span><span class="sxs-lookup"><span data-stu-id="3a9e4-413">Step 4: Migrate the VMs</span></span> 

<span data-ttu-id="3a9e4-414">Contoso admins run a quick test failover, and then a full failover to migrate the VMs.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-414">Contoso admins run a quick test failover, and then a full failover to migrate the VMs.</span></span>

### <a name="run-a-test-failover"></a><span data-ttu-id="3a9e4-415">Run a test failover</span><span class="sxs-lookup"><span data-stu-id="3a9e4-415">Run a test failover</span></span>

<span data-ttu-id="3a9e4-416">A test failover helps to ensure that everything's working as expected.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-416">A test failover helps to ensure that everything's working as expected.</span></span> 

1. <span data-ttu-id="3a9e4-417">They run a test failover to the latest available point in time (**Latest processed**).</span><span class="sxs-lookup"><span data-stu-id="3a9e4-417">They run a test failover to the latest available point in time (**Latest processed**).</span></span>
2. <span data-ttu-id="3a9e4-418">They select **Shut down machine before beginning failover**, so that Site Recovery attempts to shut down the source VM before triggering the failover.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-418">They select **Shut down machine before beginning failover**, so that Site Recovery attempts to shut down the source VM before triggering the failover.</span></span> <span data-ttu-id="3a9e4-419">Failover continues even if shutdown fails.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-419">Failover continues even if shutdown fails.</span></span> 
3. <span data-ttu-id="3a9e4-420">Test failover runs:</span><span class="sxs-lookup"><span data-stu-id="3a9e4-420">Test failover runs:</span></span> 

    - <span data-ttu-id="3a9e4-421">A prerequisites check runs to make sure all of the conditions required for migration are in place.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-421">A prerequisites check runs to make sure all of the conditions required for migration are in place.</span></span>
    - <span data-ttu-id="3a9e4-422">Failover processes the data, so that an Azure VM can be created.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-422">Failover processes the data, so that an Azure VM can be created.</span></span> <span data-ttu-id="3a9e4-423">If select the latest recovery point, a recovery point is created from the data.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-423">If select the latest recovery point, a recovery point is created from the data.</span></span>
    - <span data-ttu-id="3a9e4-424">An Azure VM is created using the data processed in the previous step.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-424">An Azure VM is created using the data processed in the previous step.</span></span>
    
3. <span data-ttu-id="3a9e4-425">After the failover finishes, the replica Azure VM appears in the Azure portal.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-425">After the failover finishes, the replica Azure VM appears in the Azure portal.</span></span> <span data-ttu-id="3a9e4-426">They check that the VM is the appropriate size,  connected to the right network, and is running.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-426">They check that the VM is the appropriate size,  connected to the right network, and is running.</span></span> 
4. <span data-ttu-id="3a9e4-427">After verifying the test failover, they clean up the failover, and record and save any observations.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-427">After verifying the test failover, they clean up the failover, and record and save any observations.</span></span> 

### <a name="create-and-customize-a-recovery-plan"></a><span data-ttu-id="3a9e4-428">Create and customize a recovery plan</span><span class="sxs-lookup"><span data-stu-id="3a9e4-428">Create and customize a recovery plan</span></span>

 <span data-ttu-id="3a9e4-429">After verifying that the test failover worked as expected, Contoso admins create a recovery plan for migration.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-429">After verifying that the test failover worked as expected, Contoso admins create a recovery plan for migration.</span></span> 

- <span data-ttu-id="3a9e4-430">A recovery plan specifies the order in which failover occurs, and indicates how Azure VMs will be brought online in Azure.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-430">A recovery plan specifies the order in which failover occurs, and indicates how Azure VMs will be brought online in Azure.</span></span>
- <span data-ttu-id="3a9e4-431">Since the app is two-tier, they customize the recovery plan so that the data VM (SQLVM) starts before the frontend (WEBVM).</span><span class="sxs-lookup"><span data-stu-id="3a9e4-431">Since the app is two-tier, they customize the recovery plan so that the data VM (SQLVM) starts before the frontend (WEBVM).</span></span>

1. <span data-ttu-id="3a9e4-432">In **Recovery Plans (Site Recovery)** > **+Recovery Plan**, they create a plan and add the VMs to it.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-432">In **Recovery Plans (Site Recovery)** > **+Recovery Plan**, they create a plan and add the VMs to it.</span></span>

    ![Recovery plan](./media/contoso-migration-rehost-vm/recovery-plan.png)

2. <span data-ttu-id="3a9e4-434">After creating the plan, they customize it (**Recovery Plans** > **SmartHotelMigrationPlan** > **Customize**).</span><span class="sxs-lookup"><span data-stu-id="3a9e4-434">After creating the plan, they customize it (**Recovery Plans** > **SmartHotelMigrationPlan** > **Customize**).</span></span>
2.  <span data-ttu-id="3a9e4-435">They remove WEBVM from **Group 1: Start**.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-435">They remove WEBVM from **Group 1: Start**.</span></span>  <span data-ttu-id="3a9e4-436">This ensures that the first start action affects SQLVM only.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-436">This ensures that the first start action affects SQLVM only.</span></span>
3.  <span data-ttu-id="3a9e4-437">In **+Group** > **Add protected items**, they add WEBVM to Group 2: Start.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-437">In **+Group** > **Add protected items**, they add WEBVM to Group 2: Start.</span></span>  <span data-ttu-id="3a9e4-438">The VMs need to be in two different groups.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-438">The VMs need to be in two different groups.</span></span>


### <a name="migrate-the-vms"></a><span data-ttu-id="3a9e4-439">Migrate the VMs</span><span class="sxs-lookup"><span data-stu-id="3a9e4-439">Migrate the VMs</span></span>


<span data-ttu-id="3a9e4-440">Now Contoso admins run a full failover to complete the migration.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-440">Now Contoso admins run a full failover to complete the migration.</span></span>

1. <span data-ttu-id="3a9e4-441">They select the recovery plan > **Failover**.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-441">They select the recovery plan > **Failover**.</span></span>
2. <span data-ttu-id="3a9e4-442">They select to fail over to the latest recovery point, and that Site Recovery should try to shut down the on-premises VM before triggering the failover.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-442">They select to fail over to the latest recovery point, and that Site Recovery should try to shut down the on-premises VM before triggering the failover.</span></span> <span data-ttu-id="3a9e4-443">They can follow the failover progress on the **Jobs** page.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-443">They can follow the failover progress on the **Jobs** page.</span></span>

    ![Failover](./media/contoso-migration-rehost-vm/failover1.png)


3. <span data-ttu-id="3a9e4-445">After the failover, they verify that the Azure VM appears as expected in the Azure portal.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-445">After the failover, they verify that the Azure VM appears as expected in the Azure portal.</span></span>

    ![Failover](./media/contoso-migration-rehost-vm/failover2.png)  

3. <span data-ttu-id="3a9e4-447">After verification, they complete the migration for each VM.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-447">After verification, they complete the migration for each VM.</span></span> <span data-ttu-id="3a9e4-448">This stops replication for the VM, and stops Site Recovery billing for it.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-448">This stops replication for the VM, and stops Site Recovery billing for it.</span></span>

    ![Failover](./media/contoso-migration-rehost-vm/failover3.png)

<span data-ttu-id="3a9e4-450">**Need more help?**</span><span class="sxs-lookup"><span data-stu-id="3a9e4-450">**Need more help?**</span></span>

- <span data-ttu-id="3a9e4-451">[Learn about](https://docs.microsoft.com/azure/site-recovery/tutorial-dr-drill-azure) running a test failover.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-451">[Learn about](https://docs.microsoft.com/azure/site-recovery/tutorial-dr-drill-azure) running a test failover.</span></span> 
- <span data-ttu-id="3a9e4-452">[Learn](https://docs.microsoft.com/azure/site-recovery/site-recovery-create-recovery-plans) how to create a recovery plan.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-452">[Learn](https://docs.microsoft.com/azure/site-recovery/site-recovery-create-recovery-plans) how to create a recovery plan.</span></span>
- <span data-ttu-id="3a9e4-453">[Learn about](https://docs.microsoft.com/azure/site-recovery/site-recovery-failover) failing over to Azure.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-453">[Learn about](https://docs.microsoft.com/azure/site-recovery/site-recovery-failover) failing over to Azure.</span></span>

## <a name="clean-up-after-migration"></a><span data-ttu-id="3a9e4-454">Clean up after migration</span><span class="sxs-lookup"><span data-stu-id="3a9e4-454">Clean up after migration</span></span>

<span data-ttu-id="3a9e4-455">With migration complete, the SmartHotel360 app tiers are now running on Azure VMs.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-455">With migration complete, the SmartHotel360 app tiers are now running on Azure VMs.</span></span>

<span data-ttu-id="3a9e4-456">Now, Contoso needs to complete these cleanup steps:</span><span class="sxs-lookup"><span data-stu-id="3a9e4-456">Now, Contoso needs to complete these cleanup steps:</span></span>  

- <span data-ttu-id="3a9e4-457">Remove the WEBVM machine from the vCenter inventory.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-457">Remove the WEBVM machine from the vCenter inventory.</span></span>
- <span data-ttu-id="3a9e4-458">Remove the SQLVM machine from the vCenter inventory.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-458">Remove the SQLVM machine from the vCenter inventory.</span></span>
- <span data-ttu-id="3a9e4-459">Remove WEBVM and SQLVM from local backup jobs.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-459">Remove WEBVM and SQLVM from local backup jobs.</span></span>
- <span data-ttu-id="3a9e4-460">Update internal documentation to show the new location, and IP addresses for the VMs.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-460">Update internal documentation to show the new location, and IP addresses for the VMs.</span></span>
- <span data-ttu-id="3a9e4-461">Review any resources that interact with the VMs, and update any relevant settings or documentation to reflect the new configuration.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-461">Review any resources that interact with the VMs, and update any relevant settings or documentation to reflect the new configuration.</span></span>

## <a name="review-the-deployment"></a><span data-ttu-id="3a9e4-462">Review the deployment</span><span class="sxs-lookup"><span data-stu-id="3a9e4-462">Review the deployment</span></span>

<span data-ttu-id="3a9e4-463">With the app now running, Contoso now needs to fully operationalize and secure it in Azure.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-463">With the app now running, Contoso now needs to fully operationalize and secure it in Azure.</span></span>

### <a name="security"></a><span data-ttu-id="3a9e4-464">Security</span><span class="sxs-lookup"><span data-stu-id="3a9e4-464">Security</span></span>

<span data-ttu-id="3a9e4-465">The Contoso security team reviews the Azure VMs, to determine any security issues.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-465">The Contoso security team reviews the Azure VMs, to determine any security issues.</span></span>

- <span data-ttu-id="3a9e4-466">To control access, the team reviews the Network Security Groups (NSGs) for the VMs.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-466">To control access, the team reviews the Network Security Groups (NSGs) for the VMs.</span></span> <span data-ttu-id="3a9e4-467">NSGs are used to ensure that only traffic allowed to the app can reach it.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-467">NSGs are used to ensure that only traffic allowed to the app can reach it.</span></span>
- <span data-ttu-id="3a9e4-468">The team also consider securing the data on the disk using Azure Disk Encryption and KeyVault.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-468">The team also consider securing the data on the disk using Azure Disk Encryption and KeyVault.</span></span>

<span data-ttu-id="3a9e4-469">[Read more](https://docs.microsoft.com/azure/security/azure-security-best-practices-vms#vm-authentication-and-access-control) about security practices for VMs.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-469">[Read more](https://docs.microsoft.com/azure/security/azure-security-best-practices-vms#vm-authentication-and-access-control) about security practices for VMs.</span></span>

## <a name="bcdr"></a><span data-ttu-id="3a9e4-470">BCDR</span><span class="sxs-lookup"><span data-stu-id="3a9e4-470">BCDR</span></span>

<span data-ttu-id="3a9e4-471">For business continuity and disaster recovery (BCDR), Contoso takes the following actions:</span><span class="sxs-lookup"><span data-stu-id="3a9e4-471">For business continuity and disaster recovery (BCDR), Contoso takes the following actions:</span></span>

- <span data-ttu-id="3a9e4-472">Keep data safe: Contoso backs up the data on the VMs using the Azure Backup service.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-472">Keep data safe: Contoso backs up the data on the VMs using the Azure Backup service.</span></span> <span data-ttu-id="3a9e4-473">[Learn more](https://docs.microsoft.com/azure/backup/backup-introduction-to-azure-backup?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="3a9e4-473">[Learn more](https://docs.microsoft.com/azure/backup/backup-introduction-to-azure-backup?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span></span>
- <span data-ttu-id="3a9e4-474">Keep apps up and running: Contoso replicates the app VMs in Azure to a secondary region using Site Recovery.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-474">Keep apps up and running: Contoso replicates the app VMs in Azure to a secondary region using Site Recovery.</span></span> <span data-ttu-id="3a9e4-475">[Learn more](https://docs.microsoft.com/azure/site-recovery/azure-to-azure-quickstart).</span><span class="sxs-lookup"><span data-stu-id="3a9e4-475">[Learn more](https://docs.microsoft.com/azure/site-recovery/azure-to-azure-quickstart).</span></span>



### <a name="licensing-and-cost-optimization"></a><span data-ttu-id="3a9e4-476">Licensing and cost optimization</span><span class="sxs-lookup"><span data-stu-id="3a9e4-476">Licensing and cost optimization</span></span>

1. <span data-ttu-id="3a9e4-477">Contoso has existing licensing for their VMs, and will leverage the Azure Hybrid Benefit.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-477">Contoso has existing licensing for their VMs, and will leverage the Azure Hybrid Benefit.</span></span>  <span data-ttu-id="3a9e4-478">Contoso will convert the existing Azure VMs, to take advantage of this pricing.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-478">Contoso will convert the existing Azure VMs, to take advantage of this pricing.</span></span>
2. <span data-ttu-id="3a9e4-479">Contoso will enable Azure Cost Management licensed by Cloudyn, a Microsoft subsidiary.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-479">Contoso will enable Azure Cost Management licensed by Cloudyn, a Microsoft subsidiary.</span></span> <span data-ttu-id="3a9e4-480">It's a multi-cloud cost management solution that helps to utilize and manage Azure and other cloud resources.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-480">It's a multi-cloud cost management solution that helps to utilize and manage Azure and other cloud resources.</span></span> <span data-ttu-id="3a9e4-481">[Learn more](https://docs.microsoft.com/azure/cost-management/overview) about Azure Cost Management.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-481">[Learn more](https://docs.microsoft.com/azure/cost-management/overview) about Azure Cost Management.</span></span> 

## <a name="conclusion"></a><span data-ttu-id="3a9e4-482">Conclusion</span><span class="sxs-lookup"><span data-stu-id="3a9e4-482">Conclusion</span></span>

<span data-ttu-id="3a9e4-483">In this article, Contoso rehosted the SmartHotel360 app in Azure by migrating the app VMs to Azure VMs using the Site Recovery service.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-483">In this article, Contoso rehosted the SmartHotel360 app in Azure by migrating the app VMs to Azure VMs using the Site Recovery service.</span></span> 


## <a name="next-steps"></a><span data-ttu-id="3a9e4-484">Next steps</span><span class="sxs-lookup"><span data-stu-id="3a9e4-484">Next steps</span></span>

<span data-ttu-id="3a9e4-485">In the [next article](contoso-migration-rehost-vm-sql-ag.md) in the series, we'll show you how Contoso rehosts the SmartHotel360 app frontend VM on an Azure VM, and migrates the database to a SQL Server AlwaysOn Availability Group in Azure.</span><span class="sxs-lookup"><span data-stu-id="3a9e4-485">In the [next article](contoso-migration-rehost-vm-sql-ag.md) in the series, we'll show you how Contoso rehosts the SmartHotel360 app frontend VM on an Azure VM, and migrates the database to a SQL Server AlwaysOn Availability Group in Azure.</span></span>

